var a2_0x359c=['user','find','kind','facebook','setAccessToken','accessToken','?fields=id,name,email,first_name,last_name,gender,link,locale,timezone','api/facebook','defineProperty','__esModule','fbgraph','sequelize','setSequelize','getApi','render','api/index','log','connecting','default','ready','connected','list','colombia','Downloading:\x20','name','endsWith','json','models','report_files','findOrCreate','error','connect','ftp.vivotek.com','ipd','downloadFtp','then','get','fileName','end','media/','pipe','createWriteStream','status','save','Downloaded:\x20','processFtp','findOne','.txt','parse','Data','CountingInfo','Out','EndTime','create','getPassCounting','findAll','ASC','getPassCountingByDay','query','month','startDate','endDate','pass_counting','col','amount','total','direction','literal','YEAR(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20MONTH(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20DAY(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27))','getPassCountingByHour','countingDate','DATE_FORMAT','countingDateShort','sum','gte','params','HOUR','DAY','MONTH','getFacebook'];(function(_0x5e1323,_0x19a2f5){var _0x5890f9=function(_0x4f3d8d){while(--_0x4f3d8d){_0x5e1323['push'](_0x5e1323['shift']());}};_0x5890f9(++_0x19a2f5);}(a2_0x359c,0x148));var a2_0x2599=function(_0x48c425,_0x449044){_0x48c425=_0x48c425-0x0;var _0x5a567d=a2_0x359c[_0x48c425];return _0x5a567d;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5dfdc7){return _0x5dfdc7&&_0x5dfdc7['__esModule']?_0x5dfdc7:{'default':_0x5dfdc7};};Object[a2_0x2599('0x0')](exports,a2_0x2599('0x1'),{'value':!![]});const fbgraph_1=__importDefault(require(a2_0x2599('0x2')));const ftp_1=__importDefault(require('ftp'));const fs_1=__importDefault(require('fs'));exports[a2_0x2599('0x3')]='';function setSequelize(_0x3dc2be){exports[a2_0x2599('0x3')]=_0x3dc2be;}exports[a2_0x2599('0x4')]=setSequelize;exports[a2_0x2599('0x5')]=(_0x258c21,_0x57e953)=>{_0x57e953[a2_0x2599('0x6')](a2_0x2599('0x7'),{'title':'API\x20Examples'});};exports['syncFtp']=(_0x45ab5b,_0x2ce001)=>{console[a2_0x2599('0x8')](a2_0x2599('0x9'));const _0x306f3d=[];const _0x420020=new ftp_1[(a2_0x2599('0xa'))]();_0x420020['on'](a2_0x2599('0xb'),function(){console[a2_0x2599('0x8')](a2_0x2599('0xc'));_0x420020[a2_0x2599('0xd')](a2_0x2599('0xe'),![],function(_0xaf3907,_0x3b0ef8){if(_0xaf3907){}else{for(const _0x3d62fa of _0x3b0ef8){console[a2_0x2599('0x8')](a2_0x2599('0xf')+_0x3d62fa[a2_0x2599('0x10')]);if(_0x3d62fa['name'][a2_0x2599('0x11')](a2_0x2599('0x12'))){exports[a2_0x2599('0x3')][a2_0x2599('0x13')][a2_0x2599('0x14')][a2_0x2599('0x15')]({'where':{'fileName':_0x3d62fa[a2_0x2599('0x10')]}})['spread']((_0x646979,_0x266d71)=>{if(_0x266d71){console[a2_0x2599('0x8')](_0x3d62fa[a2_0x2599('0x10')]);_0x306f3d['push'](_0x646979);}});}}}_0x2ce001[a2_0x2599('0x12')]({'data':_0x306f3d});});});_0x420020['on'](a2_0x2599('0x16'),function(_0x176547){_0x2ce001[a2_0x2599('0x12')]({'message':_0x176547});});_0x420020[a2_0x2599('0x17')]({'host':a2_0x2599('0x18'),'port':0x15,'user':a2_0x2599('0x19'),'password':'ipd'});};exports[a2_0x2599('0x1a')]=(_0x749018,_0x36fb7c)=>{exports[a2_0x2599('0x3')][a2_0x2599('0x13')][a2_0x2599('0x14')]['findOne']({'where':{'status':null}})[a2_0x2599('0x1b')](_0x25cedb=>{if(_0x25cedb){const _0x1f9298=new ftp_1[(a2_0x2599('0xa'))]();_0x1f9298['on'](a2_0x2599('0xb'),function(){console['log']('connected:'+_0x25cedb['fileName']);_0x1f9298[a2_0x2599('0x1c')]('colombia/'+_0x25cedb[a2_0x2599('0x1d')],function(_0x4608e4,_0x3f0257){_0x1f9298[a2_0x2599('0x1e')]();if(_0x4608e4){}else{const _0x288d91=a2_0x2599('0x1f')+_0x25cedb[a2_0x2599('0x1d')]+'.txt';_0x3f0257[a2_0x2599('0x20')](fs_1[a2_0x2599('0xa')][a2_0x2599('0x21')](_0x288d91));_0x25cedb[a2_0x2599('0x22')]=0x1;_0x25cedb[a2_0x2599('0x23')]();console[a2_0x2599('0x8')](a2_0x2599('0x24')+_0x25cedb[a2_0x2599('0x1d')]);}});});_0x1f9298['on']('error',function(_0x4f1aa3){_0x36fb7c['json']({'message':_0x4f1aa3});});_0x1f9298[a2_0x2599('0x17')]({'host':a2_0x2599('0x18'),'port':0x15,'user':a2_0x2599('0x19'),'password':a2_0x2599('0x19')});_0x36fb7c[a2_0x2599('0x12')]({'data':_0x25cedb[a2_0x2599('0x1d')]});}else{_0x36fb7c[a2_0x2599('0x12')]({'data':[]});}});};exports[a2_0x2599('0x25')]=(_0x4dcbf1,_0x1ac20b)=>{exports['sequelize'][a2_0x2599('0x13')][a2_0x2599('0x14')][a2_0x2599('0x26')]({'where':{'status':0x1}})[a2_0x2599('0x1b')](_0x5cc95d=>{if(_0x5cc95d){const _0x5573e4=a2_0x2599('0x1f')+_0x5cc95d[a2_0x2599('0x1d')]+a2_0x2599('0x27');fs_1[a2_0x2599('0xa')]['readFile'](_0x5573e4,'utf8',function(_0x4fe00e,_0x42ec95){if(_0x4fe00e){_0x5cc95d[a2_0x2599('0x22')]=null;}else{try{const _0x5518ac=JSON[a2_0x2599('0x28')](_0x42ec95);for(const _0x50db2d of _0x5518ac[a2_0x2599('0x29')][0x0][a2_0x2599('0x2a')]){const _0xdb94b1=_0x50db2d['In'];const _0x4348f8=_0x50db2d[a2_0x2599('0x2b')];const _0x4a0198=Date[a2_0x2599('0x28')](_0x50db2d[a2_0x2599('0x2c')]);if(_0xdb94b1>0x0){exports[a2_0x2599('0x3')][a2_0x2599('0x13')]['pass_counting'][a2_0x2599('0x2d')]({'reportFileId':_0x5cc95d['id'],'amount':_0xdb94b1,'countingDate':_0x4a0198});}if(_0x4348f8>0x0){exports['sequelize'][a2_0x2599('0x13')]['pass_counting'][a2_0x2599('0x2d')]({'reportFileId':_0x5cc95d['id'],'amount':_0x4348f8*-0x1,'countingDate':_0x4a0198});}}_0x5cc95d['status']=0x2;}catch(_0x2c1ec0){_0x5cc95d['status']=null;}}_0x5cc95d[a2_0x2599('0x23')]();});_0x1ac20b[a2_0x2599('0x12')]({'data':_0x5cc95d['fileName']});}else{_0x1ac20b[a2_0x2599('0x12')]({'data':[]});}});};exports[a2_0x2599('0x2e')]=(_0x253558,_0x2620d2)=>{exports['sequelize'][a2_0x2599('0x13')]['pass_counting'][a2_0x2599('0x2f')]({'where':{'amount':{[exports[a2_0x2599('0x3')]['Op']['gt']]:0x0}},'order':[['countingDate',a2_0x2599('0x30')]]})[a2_0x2599('0x1b')](_0x4a4447=>{_0x2620d2[a2_0x2599('0x12')]({'data':_0x4a4447});});};exports[a2_0x2599('0x31')]=(_0x3cc437,_0x3192ec)=>{const _0x313bb5=_0x3cc437[a2_0x2599('0x32')][a2_0x2599('0x33')];const _0x239c58=_0x3cc437[a2_0x2599('0x32')][a2_0x2599('0x34')];const _0x450322=_0x3cc437[a2_0x2599('0x32')][a2_0x2599('0x35')];exports[a2_0x2599('0x3')][a2_0x2599('0x13')][a2_0x2599('0x36')][a2_0x2599('0x2f')]({'attributes':['countingDate',[exports[a2_0x2599('0x3')]['fn']('sum',exports[a2_0x2599('0x3')][a2_0x2599('0x37')](a2_0x2599('0x38'))),a2_0x2599('0x39')]],'where':{'countingDate':{[exports[a2_0x2599('0x3')]['Op']['gte']]:_0x239c58,[exports[a2_0x2599('0x3')]['Op']['lt']]:_0x450322},'amount':_0x3cc437['params'][a2_0x2599('0x3a')]=='in'?{[exports['sequelize']['Op']['gt']]:0x0}:{[exports[a2_0x2599('0x3')]['Op']['lt']]:0x0}},'group':[exports[a2_0x2599('0x3')][a2_0x2599('0x3b')](a2_0x2599('0x3c'))],'order':[['countingDate',a2_0x2599('0x30')]]})['then'](_0x2b9664=>{_0x3192ec[a2_0x2599('0x12')]({'data':_0x2b9664});});};exports[a2_0x2599('0x3d')]=(_0xe572b6,_0x4b58eb)=>{const _0x513b0c=_0xe572b6[a2_0x2599('0x32')][a2_0x2599('0x33')];const _0x4fc528=_0xe572b6[a2_0x2599('0x32')][a2_0x2599('0x34')];const _0x35abd3=_0xe572b6[a2_0x2599('0x32')][a2_0x2599('0x35')];exports['sequelize'][a2_0x2599('0x13')][a2_0x2599('0x36')][a2_0x2599('0x2f')]({'attributes':[a2_0x2599('0x3e'),[exports[a2_0x2599('0x3')]['fn'](a2_0x2599('0x3f'),exports[a2_0x2599('0x3')][a2_0x2599('0x37')]('countingDate'),'%Y-%m-%d\x20%H:00'),a2_0x2599('0x40')],[exports['sequelize']['fn'](a2_0x2599('0x41'),exports[a2_0x2599('0x3')][a2_0x2599('0x37')](a2_0x2599('0x38'))),a2_0x2599('0x39')]],'where':{'countingDate':{[exports[a2_0x2599('0x3')]['Op'][a2_0x2599('0x42')]]:_0x4fc528,[exports[a2_0x2599('0x3')]['Op']['lt']]:_0x35abd3},'amount':_0xe572b6[a2_0x2599('0x43')]['direction']=='in'?{[exports[a2_0x2599('0x3')]['Op']['gt']]:0x0}:{[exports['sequelize']['Op']['lt']]:0x0}},'group':[exports['sequelize']['fn'](a2_0x2599('0x44'),exports[a2_0x2599('0x3')][a2_0x2599('0x37')](a2_0x2599('0x3e'))),exports['sequelize']['fn'](a2_0x2599('0x45'),exports[a2_0x2599('0x3')][a2_0x2599('0x37')](a2_0x2599('0x3e'))),exports[a2_0x2599('0x3')]['fn'](a2_0x2599('0x46'),exports[a2_0x2599('0x3')]['col'](a2_0x2599('0x3e'))),exports[a2_0x2599('0x3')]['fn']('YEAR',exports[a2_0x2599('0x3')][a2_0x2599('0x37')](a2_0x2599('0x3e')))],'order':[[a2_0x2599('0x3e'),a2_0x2599('0x30')]]})[a2_0x2599('0x1b')](_0x24b013=>{_0x4b58eb[a2_0x2599('0x12')]({'data':_0x24b013});});};exports[a2_0x2599('0x47')]=(_0x3bfd80,_0x3a0253,_0x2c1753)=>{const _0x11beda=_0x3bfd80[a2_0x2599('0x48')]['tokens'][a2_0x2599('0x49')](_0x11beda=>_0x11beda[a2_0x2599('0x4a')]===a2_0x2599('0x4b'));fbgraph_1[a2_0x2599('0xa')][a2_0x2599('0x4c')](_0x11beda[a2_0x2599('0x4d')]);fbgraph_1[a2_0x2599('0xa')][a2_0x2599('0x1c')](_0x3bfd80[a2_0x2599('0x48')][a2_0x2599('0x4b')]+a2_0x2599('0x4e'),(_0x1b9012,_0x564fe0)=>{if(_0x1b9012){return _0x2c1753(_0x1b9012);}_0x3a0253[a2_0x2599('0x6')](a2_0x2599('0x4f'),{'title':'Facebook\x20API','profile':_0x564fe0});});};