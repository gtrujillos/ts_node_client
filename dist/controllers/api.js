var a2_0x1a30=['connecting','default','ready','log','connected','list','colombia','Downloading:\x20','endsWith','models','report_files','findOrCreate','name','spread','push','json','error','connect','ftp.vivotek.com','ipd','downloadFtp','findOne','then','connected:','fileName','get','end','media/','.txt','createWriteStream','save','Downloaded:\x20','processFtp','readFile','utf8','parse','Data','CountingInfo','Out','EndTime','pass_counting','create','status','findAll','countingDate','ASC','query','month','startDate','endDate','sum','col','total','gte','params','direction','YEAR(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20MONTH(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20DAY(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27))','DATE_FORMAT','%Y-%m-%d\x20%H:00','countingDateShort','amount','HOUR','DAY','MONTH','YEAR','getFacebook','user','tokens','find','kind','facebook','setAccessToken','accessToken','?fields=id,name,email,first_name,last_name,gender,link,locale,timezone','render','__importDefault','__esModule','defineProperty','fbgraph','ftp','sequelize','api/index','API\x20Examples','syncFtp'];(function(_0xba5a84,_0x38b805){var _0x337dbf=function(_0x1b2f08){while(--_0x1b2f08){_0xba5a84['push'](_0xba5a84['shift']());}};_0x337dbf(++_0x38b805);}(a2_0x1a30,0x9f));var a2_0x2e43=function(_0x3629e0,_0x16eeb8){_0x3629e0=_0x3629e0-0x0;var _0x1e070b=a2_0x1a30[_0x3629e0];return _0x1e070b;};'use strict';var __importDefault=this&&this[a2_0x2e43('0x0')]||function(_0x4ce5a6){return _0x4ce5a6&&_0x4ce5a6[a2_0x2e43('0x1')]?_0x4ce5a6:{'default':_0x4ce5a6};};Object[a2_0x2e43('0x2')](exports,'__esModule',{'value':!![]});const fbgraph_1=__importDefault(require(a2_0x2e43('0x3')));const ftp_1=__importDefault(require(a2_0x2e43('0x4')));const fs_1=__importDefault(require('fs'));exports['sequelize']='';function setSequelize(_0x527597){exports[a2_0x2e43('0x5')]=_0x527597;}exports['setSequelize']=setSequelize;exports['getApi']=(_0x3eec97,_0x21d4f9)=>{_0x21d4f9['render'](a2_0x2e43('0x6'),{'title':a2_0x2e43('0x7')});};exports[a2_0x2e43('0x8')]=(_0x408418,_0x3d8576)=>{console['log'](a2_0x2e43('0x9'));const _0x5bccfd=[];const _0x1716cb=new ftp_1[(a2_0x2e43('0xa'))]();_0x1716cb['on'](a2_0x2e43('0xb'),function(){console[a2_0x2e43('0xc')](a2_0x2e43('0xd'));_0x1716cb[a2_0x2e43('0xe')](a2_0x2e43('0xf'),![],function(_0xc8bc5a,_0x1b4b82){if(_0xc8bc5a){}else{for(const _0xfab70b of _0x1b4b82){console[a2_0x2e43('0xc')](a2_0x2e43('0x10')+_0xfab70b['name']);if(_0xfab70b['name'][a2_0x2e43('0x11')]('json')){exports[a2_0x2e43('0x5')][a2_0x2e43('0x12')][a2_0x2e43('0x13')][a2_0x2e43('0x14')]({'where':{'fileName':_0xfab70b[a2_0x2e43('0x15')]}})[a2_0x2e43('0x16')]((_0x390bd3,_0x1b0149)=>{if(_0x1b0149){console[a2_0x2e43('0xc')](_0xfab70b[a2_0x2e43('0x15')]);_0x5bccfd[a2_0x2e43('0x17')](_0x390bd3);}});}}}_0x3d8576[a2_0x2e43('0x18')]({'data':_0x5bccfd});});});_0x1716cb['on'](a2_0x2e43('0x19'),function(_0x9df889){_0x3d8576[a2_0x2e43('0x18')]({'message':_0x9df889});});_0x1716cb[a2_0x2e43('0x1a')]({'host':a2_0x2e43('0x1b'),'port':0x15,'user':a2_0x2e43('0x1c'),'password':a2_0x2e43('0x1c')});};exports[a2_0x2e43('0x1d')]=(_0x59463b,_0x391c97)=>{exports['sequelize'][a2_0x2e43('0x12')][a2_0x2e43('0x13')][a2_0x2e43('0x1e')]({'where':{'status':null}})[a2_0x2e43('0x1f')](_0x13086a=>{if(_0x13086a){const _0x2d2ad4=new ftp_1[(a2_0x2e43('0xa'))]();_0x2d2ad4['on'](a2_0x2e43('0xb'),function(){console[a2_0x2e43('0xc')](a2_0x2e43('0x20')+_0x13086a[a2_0x2e43('0x21')]);_0x2d2ad4[a2_0x2e43('0x22')]('colombia/'+_0x13086a[a2_0x2e43('0x21')],function(_0x214831,_0x5d0599){_0x2d2ad4[a2_0x2e43('0x23')]();if(_0x214831){}else{const _0x3fc5ae=a2_0x2e43('0x24')+_0x13086a[a2_0x2e43('0x21')]+a2_0x2e43('0x25');_0x5d0599['pipe'](fs_1[a2_0x2e43('0xa')][a2_0x2e43('0x26')](_0x3fc5ae));_0x13086a['status']=0x1;_0x13086a[a2_0x2e43('0x27')]();console[a2_0x2e43('0xc')](a2_0x2e43('0x28')+_0x13086a[a2_0x2e43('0x21')]);}});});_0x2d2ad4['on'](a2_0x2e43('0x19'),function(_0x57c67e){_0x391c97[a2_0x2e43('0x18')]({'message':_0x57c67e});});_0x2d2ad4[a2_0x2e43('0x1a')]({'host':a2_0x2e43('0x1b'),'port':0x15,'user':'ipd','password':a2_0x2e43('0x1c')});_0x391c97[a2_0x2e43('0x18')]({'data':_0x13086a[a2_0x2e43('0x21')]});}else{_0x391c97[a2_0x2e43('0x18')]({'data':[]});}});};exports[a2_0x2e43('0x29')]=(_0x339dee,_0x2a5ae6)=>{exports[a2_0x2e43('0x5')][a2_0x2e43('0x12')][a2_0x2e43('0x13')][a2_0x2e43('0x1e')]({'where':{'status':0x1}})[a2_0x2e43('0x1f')](_0x359bc3=>{if(_0x359bc3){const _0x3f43f1=a2_0x2e43('0x24')+_0x359bc3[a2_0x2e43('0x21')]+'.txt';fs_1[a2_0x2e43('0xa')][a2_0x2e43('0x2a')](_0x3f43f1,a2_0x2e43('0x2b'),function(_0x13cda8,_0x44099e){if(_0x13cda8){_0x359bc3['status']=null;}else{try{const _0x42df4e=JSON[a2_0x2e43('0x2c')](_0x44099e);for(const _0x48ec74 of _0x42df4e[a2_0x2e43('0x2d')][0x0][a2_0x2e43('0x2e')]){const _0xb618c8=_0x48ec74['In'];const _0x1339fd=_0x48ec74[a2_0x2e43('0x2f')];const _0x386b64=Date[a2_0x2e43('0x2c')](_0x48ec74[a2_0x2e43('0x30')]);if(_0xb618c8>0x0){exports[a2_0x2e43('0x5')][a2_0x2e43('0x12')][a2_0x2e43('0x31')][a2_0x2e43('0x32')]({'reportFileId':_0x359bc3['id'],'amount':_0xb618c8,'countingDate':_0x386b64});}if(_0x1339fd>0x0){exports[a2_0x2e43('0x5')][a2_0x2e43('0x12')][a2_0x2e43('0x31')]['create']({'reportFileId':_0x359bc3['id'],'amount':_0x1339fd*-0x1,'countingDate':_0x386b64});}}_0x359bc3[a2_0x2e43('0x33')]=0x2;}catch(_0x32e5c6){_0x359bc3[a2_0x2e43('0x33')]=null;}}_0x359bc3[a2_0x2e43('0x27')]();});_0x2a5ae6['json']({'data':_0x359bc3[a2_0x2e43('0x21')]});}else{_0x2a5ae6[a2_0x2e43('0x18')]({'data':[]});}});};exports['getPassCounting']=(_0x5ab2f2,_0x1aae5d)=>{exports[a2_0x2e43('0x5')][a2_0x2e43('0x12')][a2_0x2e43('0x31')][a2_0x2e43('0x34')]({'where':{'amount':{[exports[a2_0x2e43('0x5')]['Op']['gt']]:0x0}},'order':[[a2_0x2e43('0x35'),a2_0x2e43('0x36')]]})[a2_0x2e43('0x1f')](_0x277793=>{_0x1aae5d[a2_0x2e43('0x18')]({'data':_0x277793});});};exports['getPassCountingByDay']=(_0x3b0c76,_0x218835)=>{const _0x83a3d8=_0x3b0c76[a2_0x2e43('0x37')][a2_0x2e43('0x38')];const _0x3dc9fd=_0x3b0c76[a2_0x2e43('0x37')][a2_0x2e43('0x39')];const _0x5a75dc=_0x3b0c76[a2_0x2e43('0x37')][a2_0x2e43('0x3a')];exports[a2_0x2e43('0x5')]['models'][a2_0x2e43('0x31')][a2_0x2e43('0x34')]({'attributes':[a2_0x2e43('0x35'),[exports[a2_0x2e43('0x5')]['fn'](a2_0x2e43('0x3b'),exports[a2_0x2e43('0x5')][a2_0x2e43('0x3c')]('amount')),a2_0x2e43('0x3d')]],'where':{'countingDate':{[exports['sequelize']['Op'][a2_0x2e43('0x3e')]]:_0x3dc9fd,[exports['sequelize']['Op']['lt']]:_0x5a75dc},'amount':_0x3b0c76[a2_0x2e43('0x3f')][a2_0x2e43('0x40')]=='in'?{[exports[a2_0x2e43('0x5')]['Op']['gt']]:0x0}:{[exports['sequelize']['Op']['lt']]:0x0}},'group':[exports[a2_0x2e43('0x5')]['literal'](a2_0x2e43('0x41'))],'order':[['countingDate','ASC']]})[a2_0x2e43('0x1f')](_0x5a6c4d=>{_0x218835[a2_0x2e43('0x18')]({'data':_0x5a6c4d});});};exports['getPassCountingByHour']=(_0x550872,_0x45a528)=>{const _0x418e95=_0x550872[a2_0x2e43('0x37')][a2_0x2e43('0x38')];const _0x568a3c=_0x550872[a2_0x2e43('0x37')]['startDate'];const _0x2d8b5a=_0x550872[a2_0x2e43('0x37')][a2_0x2e43('0x3a')];exports[a2_0x2e43('0x5')][a2_0x2e43('0x12')][a2_0x2e43('0x31')][a2_0x2e43('0x34')]({'attributes':[a2_0x2e43('0x35'),[exports[a2_0x2e43('0x5')]['fn'](a2_0x2e43('0x42'),exports['sequelize'][a2_0x2e43('0x3c')](a2_0x2e43('0x35')),a2_0x2e43('0x43')),a2_0x2e43('0x44')],[exports[a2_0x2e43('0x5')]['fn'](a2_0x2e43('0x3b'),exports[a2_0x2e43('0x5')][a2_0x2e43('0x3c')](a2_0x2e43('0x45'))),'total']],'where':{'countingDate':{[exports[a2_0x2e43('0x5')]['Op'][a2_0x2e43('0x3e')]]:_0x568a3c,[exports['sequelize']['Op']['lt']]:_0x2d8b5a},'amount':_0x550872[a2_0x2e43('0x3f')][a2_0x2e43('0x40')]=='in'?{[exports['sequelize']['Op']['gt']]:0x0}:{[exports[a2_0x2e43('0x5')]['Op']['lt']]:0x0}},'group':[exports[a2_0x2e43('0x5')]['fn'](a2_0x2e43('0x46'),exports[a2_0x2e43('0x5')]['col'](a2_0x2e43('0x35'))),exports['sequelize']['fn'](a2_0x2e43('0x47'),exports['sequelize'][a2_0x2e43('0x3c')](a2_0x2e43('0x35'))),exports[a2_0x2e43('0x5')]['fn'](a2_0x2e43('0x48'),exports[a2_0x2e43('0x5')][a2_0x2e43('0x3c')](a2_0x2e43('0x35'))),exports[a2_0x2e43('0x5')]['fn'](a2_0x2e43('0x49'),exports[a2_0x2e43('0x5')][a2_0x2e43('0x3c')](a2_0x2e43('0x35')))],'order':[[a2_0x2e43('0x35'),a2_0x2e43('0x36')]]})[a2_0x2e43('0x1f')](_0x4e8cd2=>{_0x45a528[a2_0x2e43('0x18')]({'data':_0x4e8cd2});});};exports[a2_0x2e43('0x4a')]=(_0x30df0d,_0x123001,_0x524a47)=>{const _0x31f814=_0x30df0d[a2_0x2e43('0x4b')][a2_0x2e43('0x4c')][a2_0x2e43('0x4d')](_0x31f814=>_0x31f814[a2_0x2e43('0x4e')]===a2_0x2e43('0x4f'));fbgraph_1[a2_0x2e43('0xa')][a2_0x2e43('0x50')](_0x31f814[a2_0x2e43('0x51')]);fbgraph_1[a2_0x2e43('0xa')]['get'](_0x30df0d[a2_0x2e43('0x4b')][a2_0x2e43('0x4f')]+a2_0x2e43('0x52'),(_0x320e6d,_0x131010)=>{if(_0x320e6d){return _0x524a47(_0x320e6d);}_0x123001[a2_0x2e43('0x53')]('api/facebook',{'title':'Facebook\x20API','profile':_0x131010});});};