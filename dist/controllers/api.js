var a2_0x5e30=['API\x20Examples','syncFtp','log','connecting','default','ready','connected','list','Downloading:\x20','name','endsWith','json','models','report_files','findOrCreate','spread','error','ftp.vivotek.com','ipd','downloadFtp','findOne','then','connected:','fileName','get','colombia/','end','media/','.txt','pipe','status','save','Downloaded:\x20','connect','processFtp','readFile','parse','Data','CountingInfo','Out','EndTime','pass_counting','create','getPassCounting','findAll','countingDate','query','startDate','endDate','sum','col','total','params','direction','literal','YEAR(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20MONTH(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20DAY(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27))','getPassCountingByHour','month','DATE_FORMAT','countingDateShort','amount','HOUR','DAY','MONTH','YEAR','ASC','getFacebook','tokens','find','kind','setAccessToken','accessToken','user','facebook','?fields=id,name,email,first_name,last_name,gender,link,locale,timezone','Facebook\x20API','__importDefault','__esModule','defineProperty','fbgraph','ftp','sequelize','setSequelize','render','api/index'];(function(_0xd1c567,_0x146302){var _0x29b718=function(_0x27aa17){while(--_0x27aa17){_0xd1c567['push'](_0xd1c567['shift']());}};_0x29b718(++_0x146302);}(a2_0x5e30,0x1a0));var a2_0x5489=function(_0x36f959,_0x234282){_0x36f959=_0x36f959-0x0;var _0x4578b2=a2_0x5e30[_0x36f959];return _0x4578b2;};'use strict';var __importDefault=this&&this[a2_0x5489('0x0')]||function(_0x2002b2){return _0x2002b2&&_0x2002b2[a2_0x5489('0x1')]?_0x2002b2:{'default':_0x2002b2};};Object[a2_0x5489('0x2')](exports,a2_0x5489('0x1'),{'value':!![]});const fbgraph_1=__importDefault(require(a2_0x5489('0x3')));const ftp_1=__importDefault(require(a2_0x5489('0x4')));const fs_1=__importDefault(require('fs'));exports[a2_0x5489('0x5')]='';function setSequelize(_0x601f58){exports[a2_0x5489('0x5')]=_0x601f58;}exports[a2_0x5489('0x6')]=setSequelize;exports['getApi']=(_0x42c506,_0x30750d)=>{_0x30750d[a2_0x5489('0x7')](a2_0x5489('0x8'),{'title':a2_0x5489('0x9')});};exports[a2_0x5489('0xa')]=(_0x45067a,_0x53305d)=>{console[a2_0x5489('0xb')](a2_0x5489('0xc'));const _0x583729=[];const _0xe32536=new ftp_1[(a2_0x5489('0xd'))]();_0xe32536['on'](a2_0x5489('0xe'),function(){console[a2_0x5489('0xb')](a2_0x5489('0xf'));_0xe32536[a2_0x5489('0x10')]('colombia',![],function(_0x33363d,_0x24f724){if(_0x33363d){}else{for(const _0x37975a of _0x24f724){console[a2_0x5489('0xb')](a2_0x5489('0x11')+_0x37975a[a2_0x5489('0x12')]);if(_0x37975a[a2_0x5489('0x12')][a2_0x5489('0x13')](a2_0x5489('0x14'))){exports[a2_0x5489('0x5')][a2_0x5489('0x15')][a2_0x5489('0x16')][a2_0x5489('0x17')]({'where':{'fileName':_0x37975a[a2_0x5489('0x12')]}})[a2_0x5489('0x18')]((_0x4312fb,_0x1c4e55)=>{if(_0x1c4e55){console['log'](_0x37975a[a2_0x5489('0x12')]);_0x583729['push'](_0x4312fb);}});}}}_0x53305d[a2_0x5489('0x14')]({'data':_0x583729});});});_0xe32536['on'](a2_0x5489('0x19'),function(_0x1ac871){_0x53305d['json']({'message':_0x1ac871});});_0xe32536['connect']({'host':a2_0x5489('0x1a'),'port':0x15,'user':a2_0x5489('0x1b'),'password':'ipd'});};exports[a2_0x5489('0x1c')]=(_0x2ab753,_0x3ebe6a)=>{exports['sequelize']['models'][a2_0x5489('0x16')][a2_0x5489('0x1d')]({'where':{'status':null}})[a2_0x5489('0x1e')](_0x39bfac=>{if(_0x39bfac){const _0x4e68d1=new ftp_1['default']();_0x4e68d1['on'](a2_0x5489('0xe'),function(){console[a2_0x5489('0xb')](a2_0x5489('0x1f')+_0x39bfac[a2_0x5489('0x20')]);_0x4e68d1[a2_0x5489('0x21')](a2_0x5489('0x22')+_0x39bfac[a2_0x5489('0x20')],function(_0xdba591,_0xe0b1cc){_0x4e68d1[a2_0x5489('0x23')]();if(_0xdba591){}else{const _0x15417f=a2_0x5489('0x24')+_0x39bfac[a2_0x5489('0x20')]+a2_0x5489('0x25');_0xe0b1cc[a2_0x5489('0x26')](fs_1[a2_0x5489('0xd')]['createWriteStream'](_0x15417f));_0x39bfac[a2_0x5489('0x27')]=0x1;_0x39bfac[a2_0x5489('0x28')]();console[a2_0x5489('0xb')](a2_0x5489('0x29')+_0x39bfac[a2_0x5489('0x20')]);}});});_0x4e68d1['on'](a2_0x5489('0x19'),function(_0x37d89f){_0x3ebe6a[a2_0x5489('0x14')]({'message':_0x37d89f});});_0x4e68d1[a2_0x5489('0x2a')]({'host':a2_0x5489('0x1a'),'port':0x15,'user':a2_0x5489('0x1b'),'password':a2_0x5489('0x1b')});_0x3ebe6a[a2_0x5489('0x14')]({'data':_0x39bfac[a2_0x5489('0x20')]});}else{_0x3ebe6a[a2_0x5489('0x14')]({'data':[]});}});};exports[a2_0x5489('0x2b')]=(_0x6f1e8e,_0x477458)=>{exports[a2_0x5489('0x5')][a2_0x5489('0x15')][a2_0x5489('0x16')][a2_0x5489('0x1d')]({'where':{'status':0x1}})['then'](_0x486b86=>{if(_0x486b86){const _0x52fb3a='media/'+_0x486b86[a2_0x5489('0x20')]+'.txt';fs_1[a2_0x5489('0xd')][a2_0x5489('0x2c')](_0x52fb3a,'utf8',function(_0x71e759,_0x562c1b){if(_0x71e759){_0x486b86[a2_0x5489('0x27')]=null;}else{try{const _0x2f166c=JSON[a2_0x5489('0x2d')](_0x562c1b);for(const _0x604ec3 of _0x2f166c[a2_0x5489('0x2e')][0x0][a2_0x5489('0x2f')]){const _0x5613ca=_0x604ec3['In'];const _0x1f320e=_0x604ec3[a2_0x5489('0x30')];const _0xdd39fe=Date[a2_0x5489('0x2d')](_0x604ec3[a2_0x5489('0x31')]);if(_0x5613ca>0x0){exports[a2_0x5489('0x5')][a2_0x5489('0x15')][a2_0x5489('0x32')]['create']({'reportFileId':_0x486b86['id'],'amount':_0x5613ca,'countingDate':_0xdd39fe});}if(_0x1f320e>0x0){exports[a2_0x5489('0x5')][a2_0x5489('0x15')]['pass_counting'][a2_0x5489('0x33')]({'reportFileId':_0x486b86['id'],'amount':_0x1f320e*-0x1,'countingDate':_0xdd39fe});}}_0x486b86[a2_0x5489('0x27')]=0x2;}catch(_0xe121ca){_0x486b86[a2_0x5489('0x27')]=null;}}_0x486b86[a2_0x5489('0x28')]();});_0x477458['json']({'data':_0x486b86[a2_0x5489('0x20')]});}else{_0x477458[a2_0x5489('0x14')]({'data':[]});}});};exports[a2_0x5489('0x34')]=(_0x202ea8,_0x387939)=>{exports[a2_0x5489('0x5')][a2_0x5489('0x15')]['pass_counting'][a2_0x5489('0x35')]({'where':{'amount':{[exports[a2_0x5489('0x5')]['Op']['gt']]:0x0}},'order':[[a2_0x5489('0x36'),'ASC']]})['then'](_0x3fbdc6=>{_0x387939[a2_0x5489('0x14')]({'data':_0x3fbdc6});});};exports['getPassCountingByDay']=(_0x22c18d,_0x4ade99)=>{const _0x217e8f=_0x22c18d[a2_0x5489('0x37')]['month'];const _0x5a8eb2=_0x22c18d[a2_0x5489('0x37')][a2_0x5489('0x38')];const _0x31d1cf=_0x22c18d[a2_0x5489('0x37')][a2_0x5489('0x39')];exports[a2_0x5489('0x5')][a2_0x5489('0x15')][a2_0x5489('0x32')][a2_0x5489('0x35')]({'attributes':[a2_0x5489('0x36'),[exports[a2_0x5489('0x5')]['fn'](a2_0x5489('0x3a'),exports[a2_0x5489('0x5')][a2_0x5489('0x3b')]('amount')),a2_0x5489('0x3c')]],'where':{'countingDate':{[exports[a2_0x5489('0x5')]['Op']['gte']]:_0x5a8eb2,[exports[a2_0x5489('0x5')]['Op']['lt']]:_0x31d1cf},'amount':_0x22c18d[a2_0x5489('0x3d')][a2_0x5489('0x3e')]=='in'?{[exports[a2_0x5489('0x5')]['Op']['gt']]:0x0}:{[exports[a2_0x5489('0x5')]['Op']['lt']]:0x0}},'group':[exports[a2_0x5489('0x5')][a2_0x5489('0x3f')](a2_0x5489('0x40'))],'order':[[a2_0x5489('0x36'),'ASC']]})['then'](_0x2b87bd=>{_0x4ade99[a2_0x5489('0x14')]({'data':_0x2b87bd});});};exports[a2_0x5489('0x41')]=(_0x42ef68,_0x2937a6)=>{const _0x250979=_0x42ef68[a2_0x5489('0x37')][a2_0x5489('0x42')];const _0x1e51d8=_0x42ef68['query'][a2_0x5489('0x38')];const _0x31eefd=_0x42ef68[a2_0x5489('0x37')][a2_0x5489('0x39')];exports['sequelize'][a2_0x5489('0x15')]['pass_counting'][a2_0x5489('0x35')]({'attributes':[a2_0x5489('0x36'),[exports[a2_0x5489('0x5')]['fn'](a2_0x5489('0x43'),exports[a2_0x5489('0x5')][a2_0x5489('0x3b')]('countingDate'),'%Y-%m-%d\x20%H:00'),a2_0x5489('0x44')],[exports[a2_0x5489('0x5')]['fn'](a2_0x5489('0x3a'),exports[a2_0x5489('0x5')]['col'](a2_0x5489('0x45'))),a2_0x5489('0x3c')]],'where':{'countingDate':{[exports[a2_0x5489('0x5')]['Op']['gte']]:_0x1e51d8,[exports[a2_0x5489('0x5')]['Op']['lt']]:_0x31eefd},'amount':_0x42ef68[a2_0x5489('0x3d')][a2_0x5489('0x3e')]=='in'?{[exports[a2_0x5489('0x5')]['Op']['gt']]:0x0}:{[exports[a2_0x5489('0x5')]['Op']['lt']]:0x0}},'group':[exports[a2_0x5489('0x5')]['fn'](a2_0x5489('0x46'),exports[a2_0x5489('0x5')]['col'](a2_0x5489('0x36'))),exports['sequelize']['fn'](a2_0x5489('0x47'),exports[a2_0x5489('0x5')][a2_0x5489('0x3b')](a2_0x5489('0x36'))),exports[a2_0x5489('0x5')]['fn'](a2_0x5489('0x48'),exports['sequelize'][a2_0x5489('0x3b')](a2_0x5489('0x36'))),exports[a2_0x5489('0x5')]['fn'](a2_0x5489('0x49'),exports[a2_0x5489('0x5')][a2_0x5489('0x3b')](a2_0x5489('0x36')))],'order':[[a2_0x5489('0x36'),a2_0x5489('0x4a')]]})['then'](_0x300de9=>{_0x2937a6[a2_0x5489('0x14')]({'data':_0x300de9});});};exports[a2_0x5489('0x4b')]=(_0x567ef2,_0x3a2c78,_0xf3e53)=>{const _0x2a2913=_0x567ef2['user'][a2_0x5489('0x4c')][a2_0x5489('0x4d')](_0x2a2913=>_0x2a2913[a2_0x5489('0x4e')]==='facebook');fbgraph_1['default'][a2_0x5489('0x4f')](_0x2a2913[a2_0x5489('0x50')]);fbgraph_1[a2_0x5489('0xd')][a2_0x5489('0x21')](_0x567ef2[a2_0x5489('0x51')][a2_0x5489('0x52')]+a2_0x5489('0x53'),(_0x44c341,_0x508c4c)=>{if(_0x44c341){return _0xf3e53(_0x44c341);}_0x3a2c78[a2_0x5489('0x7')]('api/facebook',{'title':a2_0x5489('0x54'),'profile':_0x508c4c});});};