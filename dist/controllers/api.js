var a2_0x3032=['findOne','connected:','fileName','get','colombia/','end','media/','.txt','createWriteStream','status','save','Downloaded:\x20','processFtp','readFile','utf8','parse','Data','Out','models','pass_counting','create','getPassCounting','findAll','ASC','then','query','month','startDate','endDate','countingDate','col','amount','total','params','literal','YEAR(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20MONTH(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27)),\x20DAY(CONVERT_TZ(countingDate,\x27+00:00\x27,\x27-05:00\x27))','getPassCountingByHour','DATE_FORMAT','%Y-%m-%d\x20%H:00','gte','direction','DAY','MONTH','YEAR','getFacebook','user','tokens','find','kind','facebook','setAccessToken','?fields=id,name,email,first_name,last_name,gender,link,locale,timezone','api/facebook','Facebook\x20API','__importDefault','__esModule','defineProperty','fbgraph','ftp','sequelize','getApi','render','api/index','syncFtp','log','connecting','default','ready','connected','list','colombia','Downloading:\x20','json','findOrCreate','spread','name','error','connect','ftp.vivotek.com','ipd','downloadFtp','report_files'];(function(_0x51ba03,_0x337961){var _0x4d2b4a=function(_0x4f67a4){while(--_0x4f67a4){_0x51ba03['push'](_0x51ba03['shift']());}};_0x4d2b4a(++_0x337961);}(a2_0x3032,0xda));var a2_0x1bce=function(_0x586ff8,_0x1954fd){_0x586ff8=_0x586ff8-0x0;var _0xcf1843=a2_0x3032[_0x586ff8];return _0xcf1843;};'use strict';var __importDefault=this&&this[a2_0x1bce('0x0')]||function(_0x1f0fb5){return _0x1f0fb5&&_0x1f0fb5[a2_0x1bce('0x1')]?_0x1f0fb5:{'default':_0x1f0fb5};};Object[a2_0x1bce('0x2')](exports,'__esModule',{'value':!![]});const fbgraph_1=__importDefault(require(a2_0x1bce('0x3')));const ftp_1=__importDefault(require(a2_0x1bce('0x4')));const fs_1=__importDefault(require('fs'));exports[a2_0x1bce('0x5')]='';function setSequelize(_0x2baffc){exports['sequelize']=_0x2baffc;}exports['setSequelize']=setSequelize;exports[a2_0x1bce('0x6')]=(_0x35d519,_0x3b88be)=>{_0x3b88be[a2_0x1bce('0x7')](a2_0x1bce('0x8'),{'title':'API\x20Examples'});};exports[a2_0x1bce('0x9')]=(_0x3e4f10,_0x1699ce)=>{console[a2_0x1bce('0xa')](a2_0x1bce('0xb'));const _0x2e450c=[];const _0x4fedce=new ftp_1[(a2_0x1bce('0xc'))]();_0x4fedce['on'](a2_0x1bce('0xd'),function(){console['log'](a2_0x1bce('0xe'));_0x4fedce[a2_0x1bce('0xf')](a2_0x1bce('0x10'),![],function(_0x834c2,_0x56e849){if(_0x834c2){}else{for(const _0x2be38f of _0x56e849){console[a2_0x1bce('0xa')](a2_0x1bce('0x11')+_0x2be38f['name']);if(_0x2be38f['name']['endsWith'](a2_0x1bce('0x12'))){exports[a2_0x1bce('0x5')]['models']['report_files'][a2_0x1bce('0x13')]({'where':{'fileName':_0x2be38f['name']}})[a2_0x1bce('0x14')]((_0x3387c2,_0x162db1)=>{if(_0x162db1){console[a2_0x1bce('0xa')](_0x2be38f[a2_0x1bce('0x15')]);_0x2e450c['push'](_0x3387c2);}});}}}_0x1699ce[a2_0x1bce('0x12')]({'data':_0x2e450c});});});_0x4fedce['on'](a2_0x1bce('0x16'),function(_0x462dbb){_0x1699ce[a2_0x1bce('0x12')]({'message':_0x462dbb});});_0x4fedce[a2_0x1bce('0x17')]({'host':a2_0x1bce('0x18'),'port':0x15,'user':a2_0x1bce('0x19'),'password':a2_0x1bce('0x19')});};exports[a2_0x1bce('0x1a')]=(_0x2ac797,_0x5e2a9b)=>{exports[a2_0x1bce('0x5')]['models'][a2_0x1bce('0x1b')][a2_0x1bce('0x1c')]({'where':{'status':null}})['then'](_0x3ee353=>{if(_0x3ee353){const _0x80736b=new ftp_1[(a2_0x1bce('0xc'))]();_0x80736b['on']('ready',function(){console[a2_0x1bce('0xa')](a2_0x1bce('0x1d')+_0x3ee353[a2_0x1bce('0x1e')]);_0x80736b[a2_0x1bce('0x1f')](a2_0x1bce('0x20')+_0x3ee353[a2_0x1bce('0x1e')],function(_0x536429,_0x328693){_0x80736b[a2_0x1bce('0x21')]();if(_0x536429){}else{const _0x132652=a2_0x1bce('0x22')+_0x3ee353[a2_0x1bce('0x1e')]+a2_0x1bce('0x23');_0x328693['pipe'](fs_1[a2_0x1bce('0xc')][a2_0x1bce('0x24')](_0x132652));_0x3ee353[a2_0x1bce('0x25')]=0x1;_0x3ee353[a2_0x1bce('0x26')]();console[a2_0x1bce('0xa')](a2_0x1bce('0x27')+_0x3ee353['fileName']);}});});_0x80736b['on'](a2_0x1bce('0x16'),function(_0x2ad14b){_0x5e2a9b[a2_0x1bce('0x12')]({'message':_0x2ad14b});});_0x80736b[a2_0x1bce('0x17')]({'host':a2_0x1bce('0x18'),'port':0x15,'user':a2_0x1bce('0x19'),'password':a2_0x1bce('0x19')});_0x5e2a9b[a2_0x1bce('0x12')]({'data':_0x3ee353[a2_0x1bce('0x1e')]});}else{_0x5e2a9b['json']({'data':[]});}});};exports[a2_0x1bce('0x28')]=(_0x44b31c,_0x30eb98)=>{exports[a2_0x1bce('0x5')]['models'][a2_0x1bce('0x1b')][a2_0x1bce('0x1c')]({'where':{'status':0x1}})['then'](_0x54b446=>{if(_0x54b446){const _0x3240c3='media/'+_0x54b446[a2_0x1bce('0x1e')]+a2_0x1bce('0x23');fs_1[a2_0x1bce('0xc')][a2_0x1bce('0x29')](_0x3240c3,a2_0x1bce('0x2a'),function(_0x372f8f,_0x33d180){if(_0x372f8f){_0x54b446[a2_0x1bce('0x25')]=null;}else{try{const _0x1abd19=JSON[a2_0x1bce('0x2b')](_0x33d180);for(const _0x48f66f of _0x1abd19[a2_0x1bce('0x2c')][0x0]['CountingInfo']){const _0x26f838=_0x48f66f['In'];const _0x125bfc=_0x48f66f[a2_0x1bce('0x2d')];const _0x487de8=Date['parse'](_0x48f66f['EndTime']);if(_0x26f838>0x0){exports[a2_0x1bce('0x5')][a2_0x1bce('0x2e')][a2_0x1bce('0x2f')][a2_0x1bce('0x30')]({'reportFileId':_0x54b446['id'],'amount':_0x26f838,'countingDate':_0x487de8});}if(_0x125bfc>0x0){exports[a2_0x1bce('0x5')][a2_0x1bce('0x2e')][a2_0x1bce('0x2f')][a2_0x1bce('0x30')]({'reportFileId':_0x54b446['id'],'amount':_0x125bfc*-0x1,'countingDate':_0x487de8});}}_0x54b446[a2_0x1bce('0x25')]=0x2;}catch(_0x17c90c){_0x54b446[a2_0x1bce('0x25')]=null;}}_0x54b446[a2_0x1bce('0x26')]();});_0x30eb98['json']({'data':_0x54b446[a2_0x1bce('0x1e')]});}else{_0x30eb98[a2_0x1bce('0x12')]({'data':[]});}});};exports[a2_0x1bce('0x31')]=(_0x47e169,_0x2ce8c3)=>{exports[a2_0x1bce('0x5')][a2_0x1bce('0x2e')][a2_0x1bce('0x2f')][a2_0x1bce('0x32')]({'where':{'amount':{[exports[a2_0x1bce('0x5')]['Op']['gt']]:0x0}},'order':[['countingDate',a2_0x1bce('0x33')]]})[a2_0x1bce('0x34')](_0x2f18e9=>{_0x2ce8c3['json']({'data':_0x2f18e9});});};exports['getPassCountingByDay']=(_0x28e5fa,_0x297f53)=>{const _0x10960b=_0x28e5fa[a2_0x1bce('0x35')][a2_0x1bce('0x36')];const _0x563b99=_0x28e5fa[a2_0x1bce('0x35')][a2_0x1bce('0x37')];const _0x44118c=_0x28e5fa[a2_0x1bce('0x35')][a2_0x1bce('0x38')];exports[a2_0x1bce('0x5')][a2_0x1bce('0x2e')][a2_0x1bce('0x2f')]['findAll']({'attributes':[a2_0x1bce('0x39'),[exports[a2_0x1bce('0x5')]['fn']('sum',exports['sequelize'][a2_0x1bce('0x3a')](a2_0x1bce('0x3b'))),a2_0x1bce('0x3c')]],'where':{'countingDate':{[exports[a2_0x1bce('0x5')]['Op']['gte']]:_0x563b99,[exports['sequelize']['Op']['lt']]:_0x44118c},'amount':_0x28e5fa[a2_0x1bce('0x3d')]['direction']=='in'?{[exports['sequelize']['Op']['gt']]:0x0}:{[exports[a2_0x1bce('0x5')]['Op']['lt']]:0x0}},'group':[exports[a2_0x1bce('0x5')][a2_0x1bce('0x3e')](a2_0x1bce('0x3f'))],'order':[[a2_0x1bce('0x39'),'ASC']]})[a2_0x1bce('0x34')](_0x3a4d25=>{_0x297f53['json']({'data':_0x3a4d25});});};exports[a2_0x1bce('0x40')]=(_0x241512,_0x5028a2)=>{const _0x2d39bf=_0x241512[a2_0x1bce('0x35')]['month'];const _0x21115b=_0x241512[a2_0x1bce('0x35')][a2_0x1bce('0x37')];const _0x2681f7=_0x241512['query'][a2_0x1bce('0x38')];exports[a2_0x1bce('0x5')][a2_0x1bce('0x2e')][a2_0x1bce('0x2f')][a2_0x1bce('0x32')]({'attributes':['countingDate',[exports['sequelize']['fn'](a2_0x1bce('0x41'),exports[a2_0x1bce('0x5')][a2_0x1bce('0x3a')](a2_0x1bce('0x39')),a2_0x1bce('0x42')),'countingDateShort'],[exports[a2_0x1bce('0x5')]['fn']('sum',exports[a2_0x1bce('0x5')][a2_0x1bce('0x3a')](a2_0x1bce('0x3b'))),'total']],'where':{'countingDate':{[exports[a2_0x1bce('0x5')]['Op'][a2_0x1bce('0x43')]]:_0x21115b,[exports[a2_0x1bce('0x5')]['Op']['lt']]:_0x2681f7},'amount':_0x241512[a2_0x1bce('0x3d')][a2_0x1bce('0x44')]=='in'?{[exports['sequelize']['Op']['gt']]:0x0}:{[exports[a2_0x1bce('0x5')]['Op']['lt']]:0x0}},'group':[exports['sequelize']['fn']('HOUR',exports[a2_0x1bce('0x5')]['col'](a2_0x1bce('0x39'))),exports[a2_0x1bce('0x5')]['fn'](a2_0x1bce('0x45'),exports['sequelize']['col'](a2_0x1bce('0x39'))),exports[a2_0x1bce('0x5')]['fn'](a2_0x1bce('0x46'),exports[a2_0x1bce('0x5')][a2_0x1bce('0x3a')](a2_0x1bce('0x39'))),exports[a2_0x1bce('0x5')]['fn'](a2_0x1bce('0x47'),exports[a2_0x1bce('0x5')][a2_0x1bce('0x3a')]('countingDate'))],'order':[['countingDate',a2_0x1bce('0x33')]]})[a2_0x1bce('0x34')](_0x38e836=>{_0x5028a2['json']({'data':_0x38e836});});};exports[a2_0x1bce('0x48')]=(_0x25f29b,_0x16c0da,_0x149bb2)=>{const _0x386632=_0x25f29b[a2_0x1bce('0x49')][a2_0x1bce('0x4a')][a2_0x1bce('0x4b')](_0x386632=>_0x386632[a2_0x1bce('0x4c')]===a2_0x1bce('0x4d'));fbgraph_1[a2_0x1bce('0xc')][a2_0x1bce('0x4e')](_0x386632['accessToken']);fbgraph_1['default']['get'](_0x25f29b[a2_0x1bce('0x49')][a2_0x1bce('0x4d')]+a2_0x1bce('0x4f'),(_0x1de626,_0x5178f5)=>{if(_0x1de626){return _0x149bb2(_0x1de626);}_0x16c0da['render'](a2_0x1bce('0x50'),{'title':a2_0x1bce('0x51'),'profile':_0x5178f5});});};