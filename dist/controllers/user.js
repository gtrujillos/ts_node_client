var a5_0x20b2=['The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','confirmPassword','equals','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','confirm','waterfall','token','back','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','passport','../models/User','express-validator','getLogin','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','normalizeEmail','validationErrors','redirect','/login','authenticate','local','flash','errors','message','logIn','session','returnTo','logout','getSignup','user','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','body','/signup','default','findOne','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','sanitize','findById','profile','name','gender','location','website','code'];(function(_0x48dc2a,_0x28aea3){var _0x59b2cb=function(_0x5a34b1){while(--_0x5a34b1){_0x48dc2a['push'](_0x48dc2a['shift']());}};_0x59b2cb(++_0x28aea3);}(a5_0x20b2,0x117));var a5_0x1b95=function(_0x5d5405,_0x1a9b4f){_0x5d5405=_0x5d5405-0x0;var _0x1a468c=a5_0x20b2[_0x5d5405];return _0x1a468c;};'use strict';var __importDefault=this&&this[a5_0x1b95('0x0')]||function(_0x1ce7ab){return _0x1ce7ab&&_0x1ce7ab[a5_0x1b95('0x1')]?_0x1ce7ab:{'default':_0x1ce7ab};};Object['defineProperty'](exports,a5_0x1b95('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x1b95('0x2')));const crypto_1=__importDefault(require(a5_0x1b95('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x1b95('0x4')));const User_1=__importDefault(require(a5_0x1b95('0x5')));const request=require(a5_0x1b95('0x6'));exports[a5_0x1b95('0x7')]=(_0x3b5cdb,_0x46d765)=>{if(_0x3b5cdb['user']){return _0x46d765['redirect']('/');}_0x46d765[a5_0x1b95('0x8')](a5_0x1b95('0x9'),{'title':'Login'});};exports[a5_0x1b95('0xa')]=(_0x5ce8fb,_0x496c04,_0x1833e3)=>{_0x5ce8fb[a5_0x1b95('0xb')](a5_0x1b95('0xc'),a5_0x1b95('0xd'))[a5_0x1b95('0xe')]();_0x5ce8fb[a5_0x1b95('0xb')](a5_0x1b95('0xf'),'Password\x20cannot\x20be\x20blank')['notEmpty']();_0x5ce8fb['sanitize'](a5_0x1b95('0xc'))[a5_0x1b95('0x10')]({'gmail_remove_dots':![]});const _0xd68cd7=_0x5ce8fb[a5_0x1b95('0x11')]();if(_0xd68cd7){_0x5ce8fb['flash']('errors',_0xd68cd7);return _0x496c04[a5_0x1b95('0x12')](a5_0x1b95('0x13'));}passport_1['default'][a5_0x1b95('0x14')](a5_0x1b95('0x15'),(_0x886a5e,_0x3d38c2,_0x27792f)=>{if(_0x886a5e){return _0x1833e3(_0x886a5e);}if(!_0x3d38c2){_0x5ce8fb[a5_0x1b95('0x16')](a5_0x1b95('0x17'),_0x27792f[a5_0x1b95('0x18')]);return _0x496c04[a5_0x1b95('0x12')](a5_0x1b95('0x13'));}_0x5ce8fb[a5_0x1b95('0x19')](_0x3d38c2,_0x886a5e=>{if(_0x886a5e){return _0x1833e3(_0x886a5e);}_0x5ce8fb[a5_0x1b95('0x16')]('success',{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x496c04[a5_0x1b95('0x12')](_0x5ce8fb[a5_0x1b95('0x1a')][a5_0x1b95('0x1b')]||'/');});})(_0x5ce8fb,_0x496c04,_0x1833e3);};exports[a5_0x1b95('0x1c')]=(_0x4e8f34,_0x21c789)=>{_0x4e8f34[a5_0x1b95('0x1c')]();_0x21c789[a5_0x1b95('0x12')]('/');};exports[a5_0x1b95('0x1d')]=(_0x38f1ea,_0x29ab73)=>{if(_0x38f1ea[a5_0x1b95('0x1e')]){return _0x29ab73['redirect']('/');}_0x29ab73[a5_0x1b95('0x8')](a5_0x1b95('0x1f'),{'title':a5_0x1b95('0x20')});};exports[a5_0x1b95('0x21')]=(_0x3249da,_0x37e4c1,_0x59a9e3)=>{_0x3249da[a5_0x1b95('0xb')](a5_0x1b95('0xc'),a5_0x1b95('0xd'))[a5_0x1b95('0xe')]();_0x3249da[a5_0x1b95('0xb')]('password',a5_0x1b95('0x22'))['len']({'min':0x4});_0x3249da[a5_0x1b95('0xb')]('confirmPassword',a5_0x1b95('0x23'))['equals'](_0x3249da[a5_0x1b95('0x24')][a5_0x1b95('0xf')]);_0x3249da['sanitize'](a5_0x1b95('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4587a8=_0x3249da['validationErrors']();if(_0x4587a8){_0x3249da[a5_0x1b95('0x16')](a5_0x1b95('0x17'),_0x4587a8);return _0x37e4c1[a5_0x1b95('0x12')](a5_0x1b95('0x25'));}const _0x15ef02=new User_1[(a5_0x1b95('0x26'))]({});User_1['default'][a5_0x1b95('0x27')]({'email':_0x3249da[a5_0x1b95('0x24')][a5_0x1b95('0xc')]},(_0x169369,_0x5dd475)=>{if(_0x169369){return _0x59a9e3(_0x169369);}if(_0x5dd475){_0x3249da[a5_0x1b95('0x16')](a5_0x1b95('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x37e4c1[a5_0x1b95('0x12')](a5_0x1b95('0x25'));}_0x15ef02[a5_0x1b95('0x28')](_0x169369=>{if(_0x169369){return _0x59a9e3(_0x169369);}_0x3249da[a5_0x1b95('0x19')](_0x15ef02,_0x169369=>{if(_0x169369){return _0x59a9e3(_0x169369);}_0x37e4c1[a5_0x1b95('0x12')]('/');});});});};exports[a5_0x1b95('0x29')]=(_0x4168c8,_0x16a159)=>{_0x16a159[a5_0x1b95('0x8')](a5_0x1b95('0x2a'),{'title':a5_0x1b95('0x2b')});};exports[a5_0x1b95('0x2c')]=(_0x223f7a,_0xe6feb2,_0x6ba36c)=>{_0x223f7a[a5_0x1b95('0xb')](a5_0x1b95('0xc'),a5_0x1b95('0x2d'))['isEmail']();_0x223f7a[a5_0x1b95('0x2e')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x46c2d1=_0x223f7a['validationErrors']();if(_0x46c2d1){_0x223f7a[a5_0x1b95('0x16')](a5_0x1b95('0x17'),_0x46c2d1);return _0xe6feb2['redirect']('/account');}User_1['default'][a5_0x1b95('0x2f')](_0x223f7a[a5_0x1b95('0x1e')]['id'],(_0x5f27b6,_0x46c570)=>{if(_0x5f27b6){return _0x6ba36c(_0x5f27b6);}_0x46c570[a5_0x1b95('0xc')]=_0x223f7a[a5_0x1b95('0x24')][a5_0x1b95('0xc')]||'';_0x46c570[a5_0x1b95('0x30')]['name']=_0x223f7a['body'][a5_0x1b95('0x31')]||'';_0x46c570['profile']['gender']=_0x223f7a['body'][a5_0x1b95('0x32')]||'';_0x46c570[a5_0x1b95('0x30')][a5_0x1b95('0x33')]=_0x223f7a[a5_0x1b95('0x24')][a5_0x1b95('0x33')]||'';_0x46c570[a5_0x1b95('0x30')][a5_0x1b95('0x34')]=_0x223f7a[a5_0x1b95('0x24')][a5_0x1b95('0x34')]||'';_0x46c570[a5_0x1b95('0x28')](_0x5f27b6=>{if(_0x5f27b6){if(_0x5f27b6[a5_0x1b95('0x35')]===0x2af8){_0x223f7a['flash']('errors',{'msg':a5_0x1b95('0x36')});return _0xe6feb2[a5_0x1b95('0x12')](a5_0x1b95('0x37'));}return _0x6ba36c(_0x5f27b6);}_0x223f7a['flash'](a5_0x1b95('0x38'),{'msg':a5_0x1b95('0x39')});_0xe6feb2[a5_0x1b95('0x12')](a5_0x1b95('0x37'));});});};exports[a5_0x1b95('0x3a')]=(_0x25ee1f,_0x19fa30,_0x128843)=>{_0x25ee1f[a5_0x1b95('0xb')]('password',a5_0x1b95('0x22'))[a5_0x1b95('0x3b')]({'min':0x4});_0x25ee1f[a5_0x1b95('0xb')](a5_0x1b95('0x3c'),a5_0x1b95('0x23'))[a5_0x1b95('0x3d')](_0x25ee1f['body'][a5_0x1b95('0xf')]);const _0x1974a4=_0x25ee1f[a5_0x1b95('0x11')]();if(_0x1974a4){_0x25ee1f[a5_0x1b95('0x16')]('errors',_0x1974a4);return _0x19fa30['redirect'](a5_0x1b95('0x37'));}User_1[a5_0x1b95('0x26')][a5_0x1b95('0x2f')](_0x25ee1f['user']['id'],(_0x5d5318,_0x6b6aa8)=>{if(_0x5d5318){return _0x128843(_0x5d5318);}_0x6b6aa8['password']=_0x25ee1f['body'][a5_0x1b95('0xf')];_0x6b6aa8[a5_0x1b95('0x28')](_0x5d5318=>{if(_0x5d5318){return _0x128843(_0x5d5318);}_0x25ee1f['flash']('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x19fa30[a5_0x1b95('0x12')](a5_0x1b95('0x37'));});});};exports[a5_0x1b95('0x3e')]=(_0x562325,_0x4672bb,_0xcb0680)=>{User_1[a5_0x1b95('0x26')][a5_0x1b95('0x3f')]({'_id':_0x562325['user']['id']},_0x4a1a4b=>{if(_0x4a1a4b){return _0xcb0680(_0x4a1a4b);}_0x562325[a5_0x1b95('0x1c')]();_0x562325[a5_0x1b95('0x16')](a5_0x1b95('0x40'),{'msg':a5_0x1b95('0x41')});_0x4672bb[a5_0x1b95('0x12')]('/');});};exports['getOauthUnlink']=(_0x51023a,_0x46af81,_0x2a3623)=>{const _0x238c60=_0x51023a[a5_0x1b95('0x42')]['provider'];User_1[a5_0x1b95('0x26')][a5_0x1b95('0x2f')](_0x51023a['user']['id'],(_0x396e40,_0x2a35e5)=>{if(_0x396e40){return _0x2a3623(_0x396e40);}_0x2a35e5[_0x238c60]=undefined;_0x2a35e5[a5_0x1b95('0x43')]=_0x2a35e5[a5_0x1b95('0x43')]['filter'](_0x594f65=>_0x594f65[a5_0x1b95('0x44')]!==_0x238c60);_0x2a35e5[a5_0x1b95('0x28')](_0x396e40=>{if(_0x396e40){return _0x2a3623(_0x396e40);}_0x51023a['flash'](a5_0x1b95('0x40'),{'msg':_0x238c60+a5_0x1b95('0x45')});_0x46af81[a5_0x1b95('0x12')](a5_0x1b95('0x37'));});});};exports[a5_0x1b95('0x46')]=(_0xd04fd5,_0x10cd86,_0x5a4068)=>{if(_0xd04fd5[a5_0x1b95('0x47')]()){return _0x10cd86[a5_0x1b95('0x12')]('/');}User_1[a5_0x1b95('0x26')][a5_0x1b95('0x27')]({'passwordResetToken':_0xd04fd5[a5_0x1b95('0x42')]['token']})[a5_0x1b95('0x48')](a5_0x1b95('0x49'))['gt'](Date[a5_0x1b95('0x4a')]())[a5_0x1b95('0x4b')]((_0x3d3ae1,_0x2dbeb1)=>{if(_0x3d3ae1){return _0x5a4068(_0x3d3ae1);}if(!_0x2dbeb1){_0xd04fd5['flash']('errors',{'msg':a5_0x1b95('0x4c')});return _0x10cd86[a5_0x1b95('0x12')](a5_0x1b95('0x4d'));}_0x10cd86['render']('account/reset',{'title':a5_0x1b95('0x4e')});});};exports[a5_0x1b95('0x4f')]=(_0x50d78f,_0x339a86,_0x32496a)=>{_0x50d78f['assert'](a5_0x1b95('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x1b95('0x3b')]({'min':0x4});_0x50d78f[a5_0x1b95('0xb')](a5_0x1b95('0x50'),'Passwords\x20must\x20match.')[a5_0x1b95('0x3d')](_0x50d78f[a5_0x1b95('0x24')]['password']);const _0x27f24b=_0x50d78f[a5_0x1b95('0x11')]();if(_0x27f24b){_0x50d78f[a5_0x1b95('0x16')](a5_0x1b95('0x17'),_0x27f24b);return _0x339a86[a5_0x1b95('0x12')]('back');}async_1[a5_0x1b95('0x26')][a5_0x1b95('0x51')]([function resetPassword(_0x3b7846){User_1[a5_0x1b95('0x26')][a5_0x1b95('0x27')]({'passwordResetToken':_0x50d78f[a5_0x1b95('0x42')][a5_0x1b95('0x52')]})['where'](a5_0x1b95('0x49'))['gt'](Date[a5_0x1b95('0x4a')]())[a5_0x1b95('0x4b')]((_0x1201e2,_0x246ed5)=>{if(_0x1201e2){return _0x32496a(_0x1201e2);}if(!_0x246ed5){_0x50d78f[a5_0x1b95('0x16')](a5_0x1b95('0x17'),{'msg':a5_0x1b95('0x4c')});return _0x339a86[a5_0x1b95('0x12')](a5_0x1b95('0x53'));}_0x246ed5[a5_0x1b95('0xf')]=_0x50d78f['body']['password'];_0x246ed5['passwordResetToken']=undefined;_0x246ed5[a5_0x1b95('0x49')]=undefined;_0x246ed5[a5_0x1b95('0x28')](_0x1201e2=>{if(_0x1201e2){return _0x32496a(_0x1201e2);}_0x50d78f[a5_0x1b95('0x19')](_0x246ed5,_0x1201e2=>{_0x3b7846(_0x1201e2,_0x246ed5);});});});},function sendResetPasswordEmail(_0x66ddf,_0x16ee48){const _0x22bf69=nodemailer_1[a5_0x1b95('0x26')][a5_0x1b95('0x54')]({'service':a5_0x1b95('0x55'),'auth':{'user':process[a5_0x1b95('0x56')][a5_0x1b95('0x57')],'pass':process[a5_0x1b95('0x56')][a5_0x1b95('0x58')]}});const _0xcef8e3={'to':_0x66ddf[a5_0x1b95('0xc')],'from':a5_0x1b95('0x59'),'subject':a5_0x1b95('0x5a'),'text':a5_0x1b95('0x5b')+_0x66ddf['email']+a5_0x1b95('0x5c')};_0x22bf69[a5_0x1b95('0x5d')](_0xcef8e3,_0x2c426d=>{_0x50d78f[a5_0x1b95('0x16')](a5_0x1b95('0x38'),{'msg':a5_0x1b95('0x5e')});_0x16ee48(_0x2c426d);});}],_0x198b55=>{if(_0x198b55){return _0x32496a(_0x198b55);}_0x339a86[a5_0x1b95('0x12')]('/');});};exports[a5_0x1b95('0x5f')]=(_0x100d43,_0x5917d5)=>{if(_0x100d43[a5_0x1b95('0x47')]()){return _0x5917d5[a5_0x1b95('0x12')]('/');}_0x5917d5[a5_0x1b95('0x8')](a5_0x1b95('0x60'),{'title':a5_0x1b95('0x61')});};exports['postForgot']=(_0x42b341,_0x120077,_0x3d186b)=>{_0x42b341[a5_0x1b95('0xb')](a5_0x1b95('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x1b95('0xe')]();_0x42b341[a5_0x1b95('0x2e')](a5_0x1b95('0xc'))[a5_0x1b95('0x10')]({'gmail_remove_dots':![]});const _0xaebce8=_0x42b341[a5_0x1b95('0x11')]();if(_0xaebce8){_0x42b341[a5_0x1b95('0x16')](a5_0x1b95('0x17'),_0xaebce8);return _0x120077['redirect'](a5_0x1b95('0x4d'));}async_1[a5_0x1b95('0x26')][a5_0x1b95('0x51')]([function createRandomToken(_0x20b12e){crypto_1[a5_0x1b95('0x26')][a5_0x1b95('0x62')](0x10,(_0x445302,_0x566096)=>{const _0x4eedd2=_0x566096[a5_0x1b95('0x63')](a5_0x1b95('0x64'));_0x20b12e(_0x445302,_0x4eedd2);});},function setRandomToken(_0x2d2643,_0x2510a0){User_1[a5_0x1b95('0x26')][a5_0x1b95('0x27')]({'email':_0x42b341[a5_0x1b95('0x24')][a5_0x1b95('0xc')]},(_0x50e644,_0x5ca835)=>{if(_0x50e644){return _0x2510a0(_0x50e644);}if(!_0x5ca835){_0x42b341[a5_0x1b95('0x16')](a5_0x1b95('0x17'),{'msg':a5_0x1b95('0x65')});return _0x120077['redirect'](a5_0x1b95('0x4d'));}_0x5ca835[a5_0x1b95('0x66')]=_0x2d2643;_0x5ca835[a5_0x1b95('0x49')]=Date[a5_0x1b95('0x4a')]()+0x36ee80;_0x5ca835[a5_0x1b95('0x28')](_0x50e644=>{_0x2510a0(_0x50e644,_0x2d2643,_0x5ca835);});});},function sendForgotPasswordEmail(_0x12e23a,_0x5b5c37,_0x43b817){const _0x3b6ef5=nodemailer_1[a5_0x1b95('0x26')][a5_0x1b95('0x54')]({'service':a5_0x1b95('0x55'),'auth':{'user':process[a5_0x1b95('0x56')][a5_0x1b95('0x57')],'pass':process['env'][a5_0x1b95('0x58')]}});const _0x16b046={'to':_0x5b5c37[a5_0x1b95('0xc')],'from':a5_0x1b95('0x67'),'subject':a5_0x1b95('0x68'),'text':a5_0x1b95('0x69')+_0x42b341[a5_0x1b95('0x6a')][a5_0x1b95('0x6b')]+'/reset/'+_0x12e23a+a5_0x1b95('0x6c')};_0x3b6ef5[a5_0x1b95('0x5d')](_0x16b046,_0x362999=>{_0x42b341[a5_0x1b95('0x16')](a5_0x1b95('0x40'),{'msg':a5_0x1b95('0x6d')+_0x5b5c37['email']+a5_0x1b95('0x6e')});_0x43b817(_0x362999);});}],_0x175213=>{if(_0x175213){return _0x3d186b(_0x175213);}_0x120077[a5_0x1b95('0x12')](a5_0x1b95('0x4d'));});};