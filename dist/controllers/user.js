var a5_0x3bdb=['account/forgot','Forgot\x20Password','postForgot','/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','getLogin','user','render','Login','email','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','redirect','/login','default','authenticate','local','flash','message','logIn','success','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','name','profile','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','save','info','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetExpires','passwordResetToken','createTransport','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','isAuthenticated'];(function(_0x54cff7,_0x57bbab){var _0x37afda=function(_0x4a03be){while(--_0x4a03be){_0x54cff7['push'](_0x54cff7['shift']());}};_0x37afda(++_0x57bbab);}(a5_0x3bdb,0x80));var a5_0x4cb9=function(_0x402d9e,_0x436c5a){_0x402d9e=_0x402d9e-0x0;var _0x231cac=a5_0x3bdb[_0x402d9e];return _0x231cac;};'use strict';var __importDefault=this&&this[a5_0x4cb9('0x0')]||function(_0x40e4d9){return _0x40e4d9&&_0x40e4d9[a5_0x4cb9('0x1')]?_0x40e4d9:{'default':_0x40e4d9};};Object[a5_0x4cb9('0x2')](exports,a5_0x4cb9('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x4cb9('0x3')));const crypto_1=__importDefault(require(a5_0x4cb9('0x4')));const nodemailer_1=__importDefault(require(a5_0x4cb9('0x5')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a5_0x4cb9('0x6')]=(_0x3b8b19,_0x5ab493)=>{if(_0x3b8b19[a5_0x4cb9('0x7')]){return _0x5ab493['redirect']('/');}_0x5ab493[a5_0x4cb9('0x8')]('account/login',{'title':a5_0x4cb9('0x9')});};exports['postLogin']=(_0x13a401,_0x510a76,_0x3cfe13)=>{_0x13a401['assert'](a5_0x4cb9('0xa'),a5_0x4cb9('0xb'))[a5_0x4cb9('0xc')]();_0x13a401[a5_0x4cb9('0xd')](a5_0x4cb9('0xe'),a5_0x4cb9('0xf'))[a5_0x4cb9('0x10')]();_0x13a401[a5_0x4cb9('0x11')](a5_0x4cb9('0xa'))[a5_0x4cb9('0x12')]({'gmail_remove_dots':![]});const _0x37af90=_0x13a401[a5_0x4cb9('0x13')]();if(_0x37af90){_0x13a401['flash'](a5_0x4cb9('0x14'),_0x37af90);return _0x510a76[a5_0x4cb9('0x15')](a5_0x4cb9('0x16'));}passport_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x18')](a5_0x4cb9('0x19'),(_0x2ac499,_0x5a64de,_0x1a5896)=>{if(_0x2ac499){return _0x3cfe13(_0x2ac499);}if(!_0x5a64de){_0x13a401[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),_0x1a5896[a5_0x4cb9('0x1b')]);return _0x510a76[a5_0x4cb9('0x15')](a5_0x4cb9('0x16'));}_0x13a401[a5_0x4cb9('0x1c')](_0x5a64de,_0x2ac499=>{if(_0x2ac499){return _0x3cfe13(_0x2ac499);}_0x13a401[a5_0x4cb9('0x1a')](a5_0x4cb9('0x1d'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x510a76[a5_0x4cb9('0x15')](_0x13a401[a5_0x4cb9('0x1e')][a5_0x4cb9('0x1f')]||'/');});})(_0x13a401,_0x510a76,_0x3cfe13);};exports[a5_0x4cb9('0x20')]=(_0x207bac,_0x932f5f)=>{_0x207bac[a5_0x4cb9('0x20')]();_0x932f5f[a5_0x4cb9('0x15')]('/');};exports[a5_0x4cb9('0x21')]=(_0x22a1fe,_0x1b6f2e)=>{if(_0x22a1fe['user']){return _0x1b6f2e[a5_0x4cb9('0x15')]('/');}_0x1b6f2e[a5_0x4cb9('0x8')](a5_0x4cb9('0x22'),{'title':a5_0x4cb9('0x23')});};exports[a5_0x4cb9('0x24')]=(_0x387565,_0x4376ec,_0x22663e)=>{_0x387565['assert'](a5_0x4cb9('0xa'),a5_0x4cb9('0xb'))['isEmail']();_0x387565[a5_0x4cb9('0xd')](a5_0x4cb9('0xe'),a5_0x4cb9('0x25'))[a5_0x4cb9('0x26')]({'min':0x4});_0x387565[a5_0x4cb9('0xd')](a5_0x4cb9('0x27'),a5_0x4cb9('0x28'))[a5_0x4cb9('0x29')](_0x387565['body']['password']);_0x387565[a5_0x4cb9('0x11')](a5_0x4cb9('0xa'))[a5_0x4cb9('0x12')]({'gmail_remove_dots':![]});const _0x1e62d5=_0x387565['validationErrors']();if(_0x1e62d5){_0x387565[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),_0x1e62d5);return _0x4376ec[a5_0x4cb9('0x15')]('/signup');}const _0x751aa8=new User_1[(a5_0x4cb9('0x17'))]({'email':_0x387565[a5_0x4cb9('0x2a')][a5_0x4cb9('0xa')],'password':_0x387565['body'][a5_0x4cb9('0xe')]});User_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x2b')]({'email':_0x387565[a5_0x4cb9('0x2a')][a5_0x4cb9('0xa')]},(_0x37f1ac,_0x2addd4)=>{if(_0x37f1ac){return _0x22663e(_0x37f1ac);}if(_0x2addd4){_0x387565[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),{'msg':a5_0x4cb9('0x2c')});return _0x4376ec[a5_0x4cb9('0x15')]('/signup');}_0x751aa8['save'](_0x37f1ac=>{if(_0x37f1ac){return _0x22663e(_0x37f1ac);}_0x387565['logIn'](_0x751aa8,_0x37f1ac=>{if(_0x37f1ac){return _0x22663e(_0x37f1ac);}_0x4376ec[a5_0x4cb9('0x15')]('/');});});});};exports['getAccount']=(_0x34abdf,_0x3a6195)=>{_0x3a6195[a5_0x4cb9('0x8')](a5_0x4cb9('0x2d'),{'title':'Account\x20Management'});};exports[a5_0x4cb9('0x2e')]=(_0x2f921b,_0xcaff80,_0x339db5)=>{_0x2f921b['assert']('email',a5_0x4cb9('0x2f'))[a5_0x4cb9('0xc')]();_0x2f921b[a5_0x4cb9('0x11')](a5_0x4cb9('0xa'))[a5_0x4cb9('0x12')]({'gmail_remove_dots':![]});const _0x59e1ca=_0x2f921b['validationErrors']();if(_0x59e1ca){_0x2f921b[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),_0x59e1ca);return _0xcaff80['redirect']('/account');}User_1['default'][a5_0x4cb9('0x30')](_0x2f921b['user']['id'],(_0x8a133b,_0x59d197)=>{if(_0x8a133b){return _0x339db5(_0x8a133b);}_0x59d197[a5_0x4cb9('0xa')]=_0x2f921b[a5_0x4cb9('0x2a')][a5_0x4cb9('0xa')]||'';_0x59d197['profile']['name']=_0x2f921b[a5_0x4cb9('0x2a')][a5_0x4cb9('0x31')]||'';_0x59d197[a5_0x4cb9('0x32')]['gender']=_0x2f921b[a5_0x4cb9('0x2a')]['gender']||'';_0x59d197[a5_0x4cb9('0x32')][a5_0x4cb9('0x33')]=_0x2f921b[a5_0x4cb9('0x2a')][a5_0x4cb9('0x33')]||'';_0x59d197[a5_0x4cb9('0x32')][a5_0x4cb9('0x34')]=_0x2f921b[a5_0x4cb9('0x2a')][a5_0x4cb9('0x34')]||'';_0x59d197['save'](_0x8a133b=>{if(_0x8a133b){if(_0x8a133b['code']===0x2af8){_0x2f921b[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),{'msg':a5_0x4cb9('0x35')});return _0xcaff80[a5_0x4cb9('0x15')]('/account');}return _0x339db5(_0x8a133b);}_0x2f921b['flash'](a5_0x4cb9('0x1d'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0xcaff80[a5_0x4cb9('0x15')](a5_0x4cb9('0x36'));});});};exports[a5_0x4cb9('0x37')]=(_0x5b1708,_0x532945,_0x5e1260)=>{_0x5b1708[a5_0x4cb9('0xd')](a5_0x4cb9('0xe'),a5_0x4cb9('0x25'))[a5_0x4cb9('0x26')]({'min':0x4});_0x5b1708['assert'](a5_0x4cb9('0x27'),'Passwords\x20do\x20not\x20match')[a5_0x4cb9('0x29')](_0x5b1708['body'][a5_0x4cb9('0xe')]);const _0x5fe3bd=_0x5b1708[a5_0x4cb9('0x13')]();if(_0x5fe3bd){_0x5b1708[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),_0x5fe3bd);return _0x532945['redirect'](a5_0x4cb9('0x36'));}User_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x30')](_0x5b1708['user']['id'],(_0x3a5196,_0x4a1ff4)=>{if(_0x3a5196){return _0x5e1260(_0x3a5196);}_0x4a1ff4[a5_0x4cb9('0xe')]=_0x5b1708[a5_0x4cb9('0x2a')][a5_0x4cb9('0xe')];_0x4a1ff4['save'](_0x3a5196=>{if(_0x3a5196){return _0x5e1260(_0x3a5196);}_0x5b1708['flash'](a5_0x4cb9('0x1d'),{'msg':a5_0x4cb9('0x38')});_0x532945[a5_0x4cb9('0x15')](a5_0x4cb9('0x36'));});});};exports[a5_0x4cb9('0x39')]=(_0xb8b28e,_0x67f645,_0x1fb780)=>{User_1['default'][a5_0x4cb9('0x3a')]({'_id':_0xb8b28e[a5_0x4cb9('0x7')]['id']},_0x445260=>{if(_0x445260){return _0x1fb780(_0x445260);}_0xb8b28e[a5_0x4cb9('0x20')]();_0xb8b28e['flash']('info',{'msg':a5_0x4cb9('0x3b')});_0x67f645[a5_0x4cb9('0x15')]('/');});};exports[a5_0x4cb9('0x3c')]=(_0x410ac3,_0x3ee297,_0x50f3d4)=>{const _0x506c8d=_0x410ac3[a5_0x4cb9('0x3d')][a5_0x4cb9('0x3e')];User_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x30')](_0x410ac3['user']['id'],(_0x3a0722,_0x256c01)=>{if(_0x3a0722){return _0x50f3d4(_0x3a0722);}_0x256c01[_0x506c8d]=undefined;_0x256c01[a5_0x4cb9('0x3f')]=_0x256c01[a5_0x4cb9('0x3f')][a5_0x4cb9('0x40')](_0x20afb7=>_0x20afb7[a5_0x4cb9('0x41')]!==_0x506c8d);_0x256c01[a5_0x4cb9('0x42')](_0x3a0722=>{if(_0x3a0722){return _0x50f3d4(_0x3a0722);}_0x410ac3[a5_0x4cb9('0x1a')](a5_0x4cb9('0x43'),{'msg':_0x506c8d+a5_0x4cb9('0x44')});_0x3ee297['redirect'](a5_0x4cb9('0x36'));});});};exports[a5_0x4cb9('0x45')]=(_0x37348e,_0x26f215,_0x44a65e)=>{if(_0x37348e['isAuthenticated']()){return _0x26f215[a5_0x4cb9('0x15')]('/');}User_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x2b')]({'passwordResetToken':_0x37348e[a5_0x4cb9('0x3d')][a5_0x4cb9('0x46')]})[a5_0x4cb9('0x47')]('passwordResetExpires')['gt'](Date[a5_0x4cb9('0x48')]())[a5_0x4cb9('0x49')]((_0x287641,_0xa5c26c)=>{if(_0x287641){return _0x44a65e(_0x287641);}if(!_0xa5c26c){_0x37348e['flash'](a5_0x4cb9('0x14'),{'msg':a5_0x4cb9('0x4a')});return _0x26f215[a5_0x4cb9('0x15')]('/forgot');}_0x26f215[a5_0x4cb9('0x8')]('account/reset',{'title':a5_0x4cb9('0x4b')});});};exports['postReset']=(_0x659257,_0x4c7dc8,_0xfd41c)=>{_0x659257[a5_0x4cb9('0xd')](a5_0x4cb9('0xe'),a5_0x4cb9('0x4c'))['len']({'min':0x4});_0x659257[a5_0x4cb9('0xd')](a5_0x4cb9('0x4d'),a5_0x4cb9('0x4e'))[a5_0x4cb9('0x29')](_0x659257['body']['password']);const _0x56c60f=_0x659257[a5_0x4cb9('0x13')]();if(_0x56c60f){_0x659257[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),_0x56c60f);return _0x4c7dc8[a5_0x4cb9('0x15')](a5_0x4cb9('0x4f'));}async_1['default'][a5_0x4cb9('0x50')]([function resetPassword(_0x23a695){User_1['default'][a5_0x4cb9('0x2b')]({'passwordResetToken':_0x659257[a5_0x4cb9('0x3d')][a5_0x4cb9('0x46')]})[a5_0x4cb9('0x47')](a5_0x4cb9('0x51'))['gt'](Date['now']())[a5_0x4cb9('0x49')]((_0x10369e,_0x4ead56)=>{if(_0x10369e){return _0xfd41c(_0x10369e);}if(!_0x4ead56){_0x659257[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4c7dc8['redirect'](a5_0x4cb9('0x4f'));}_0x4ead56[a5_0x4cb9('0xe')]=_0x659257[a5_0x4cb9('0x2a')][a5_0x4cb9('0xe')];_0x4ead56[a5_0x4cb9('0x52')]=undefined;_0x4ead56[a5_0x4cb9('0x51')]=undefined;_0x4ead56[a5_0x4cb9('0x42')](_0x10369e=>{if(_0x10369e){return _0xfd41c(_0x10369e);}_0x659257[a5_0x4cb9('0x1c')](_0x4ead56,_0x10369e=>{_0x23a695(_0x10369e,_0x4ead56);});});});},function sendResetPasswordEmail(_0x1b178a,_0x264adf){const _0x58ef7f=nodemailer_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x53')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x4cb9('0x54')][a5_0x4cb9('0x55')]}});const _0x48847e={'to':_0x1b178a[a5_0x4cb9('0xa')],'from':a5_0x4cb9('0x56'),'subject':a5_0x4cb9('0x57'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x1b178a[a5_0x4cb9('0xa')]+a5_0x4cb9('0x58')};_0x58ef7f[a5_0x4cb9('0x59')](_0x48847e,_0x54825d=>{_0x659257[a5_0x4cb9('0x1a')](a5_0x4cb9('0x1d'),{'msg':a5_0x4cb9('0x5a')});_0x264adf(_0x54825d);});}],_0x1f34f5=>{if(_0x1f34f5){return _0xfd41c(_0x1f34f5);}_0x4c7dc8[a5_0x4cb9('0x15')]('/');});};exports['getForgot']=(_0x317b5a,_0x3eb9c5)=>{if(_0x317b5a[a5_0x4cb9('0x5b')]()){return _0x3eb9c5[a5_0x4cb9('0x15')]('/');}_0x3eb9c5[a5_0x4cb9('0x8')](a5_0x4cb9('0x5c'),{'title':a5_0x4cb9('0x5d')});};exports[a5_0x4cb9('0x5e')]=(_0x13c182,_0x5c71d6,_0x356ead)=>{_0x13c182[a5_0x4cb9('0xd')](a5_0x4cb9('0xa'),a5_0x4cb9('0x2f'))[a5_0x4cb9('0xc')]();_0x13c182[a5_0x4cb9('0x11')](a5_0x4cb9('0xa'))[a5_0x4cb9('0x12')]({'gmail_remove_dots':![]});const _0x282159=_0x13c182[a5_0x4cb9('0x13')]();if(_0x282159){_0x13c182[a5_0x4cb9('0x1a')]('errors',_0x282159);return _0x5c71d6[a5_0x4cb9('0x15')](a5_0x4cb9('0x5f'));}async_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x50')]([function createRandomToken(_0x18009f){crypto_1[a5_0x4cb9('0x17')][a5_0x4cb9('0x60')](0x10,(_0x76c181,_0x442dd5)=>{const _0x3849c8=_0x442dd5[a5_0x4cb9('0x61')](a5_0x4cb9('0x62'));_0x18009f(_0x76c181,_0x3849c8);});},function setRandomToken(_0x1aee33,_0x53e21f){User_1[a5_0x4cb9('0x17')]['findOne']({'email':_0x13c182[a5_0x4cb9('0x2a')][a5_0x4cb9('0xa')]},(_0x5afaea,_0x4ceebd)=>{if(_0x5afaea){return _0x53e21f(_0x5afaea);}if(!_0x4ceebd){_0x13c182[a5_0x4cb9('0x1a')](a5_0x4cb9('0x14'),{'msg':a5_0x4cb9('0x63')});return _0x5c71d6[a5_0x4cb9('0x15')](a5_0x4cb9('0x5f'));}_0x4ceebd[a5_0x4cb9('0x52')]=_0x1aee33;_0x4ceebd[a5_0x4cb9('0x51')]=Date[a5_0x4cb9('0x48')]()+0x36ee80;_0x4ceebd['save'](_0x5afaea=>{_0x53e21f(_0x5afaea,_0x1aee33,_0x4ceebd);});});},function sendForgotPasswordEmail(_0x13ee78,_0x304cef,_0x17977e){const _0xee0d54=nodemailer_1[a5_0x4cb9('0x17')]['createTransport']({'service':a5_0x4cb9('0x64'),'auth':{'user':process[a5_0x4cb9('0x54')][a5_0x4cb9('0x65')],'pass':process[a5_0x4cb9('0x54')]['SENDGRID_PASSWORD']}});const _0x59aba0={'to':_0x304cef[a5_0x4cb9('0xa')],'from':a5_0x4cb9('0x66'),'subject':a5_0x4cb9('0x67'),'text':a5_0x4cb9('0x68')+_0x13c182[a5_0x4cb9('0x69')]['host']+a5_0x4cb9('0x6a')+_0x13ee78+a5_0x4cb9('0x6b')};_0xee0d54[a5_0x4cb9('0x59')](_0x59aba0,_0x33d492=>{_0x13c182[a5_0x4cb9('0x1a')](a5_0x4cb9('0x43'),{'msg':a5_0x4cb9('0x6c')+_0x304cef['email']+a5_0x4cb9('0x6d')});_0x17977e(_0x33d492);});}],_0x3171c8=>{if(_0x3171c8){return _0x356ead(_0x3171c8);}_0x5c71d6[a5_0x4cb9('0x15')](a5_0x4cb9('0x5f'));});};