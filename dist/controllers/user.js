var a5_0x1589=['exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','account/forgot','Forgot\x20Password','postForgot','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__esModule','defineProperty','async','crypto','nodemailer','../models/User','getLogin','redirect','account/login','Login','postLogin','assert','email','Password\x20cannot\x20be\x20blank','notEmpty','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','user','render','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','password','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','normalizeEmail','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','isEmail','/account','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Password\x20has\x20been\x20changed.','postDeleteAccount','info','getOauthUnlink','provider','findById','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now'];(function(_0x32ea1d,_0x136a48){var _0x19a765=function(_0x1e77a6){while(--_0x1e77a6){_0x32ea1d['push'](_0x32ea1d['shift']());}};_0x19a765(++_0x136a48);}(a5_0x1589,0x8e));var a5_0x5bae=function(_0x3fe74d,_0x3b6a0a){_0x3fe74d=_0x3fe74d-0x0;var _0x217801=a5_0x1589[_0x3fe74d];return _0x217801;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x50144c){return _0x50144c&&_0x50144c[a5_0x5bae('0x0')]?_0x50144c:{'default':_0x50144c};};Object[a5_0x5bae('0x1')](exports,a5_0x5bae('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x5bae('0x2')));const crypto_1=__importDefault(require(a5_0x5bae('0x3')));const nodemailer_1=__importDefault(require(a5_0x5bae('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x5bae('0x5')));const request=require('express-validator');exports[a5_0x5bae('0x6')]=(_0x282ce7,_0x7ad0b9)=>{if(_0x282ce7['user']){return _0x7ad0b9[a5_0x5bae('0x7')]('/');}_0x7ad0b9['render'](a5_0x5bae('0x8'),{'title':a5_0x5bae('0x9')});};exports[a5_0x5bae('0xa')]=(_0x1800eb,_0x13a48d,_0x2c028b)=>{_0x1800eb[a5_0x5bae('0xb')](a5_0x5bae('0xc'),'Email\x20is\x20not\x20valid')['isEmail']();_0x1800eb[a5_0x5bae('0xb')]('password',a5_0x5bae('0xd'))[a5_0x5bae('0xe')]();_0x1800eb['sanitize'](a5_0x5bae('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x350609=_0x1800eb[a5_0x5bae('0xf')]();if(_0x350609){_0x1800eb[a5_0x5bae('0x10')](a5_0x5bae('0x11'),_0x350609);return _0x13a48d[a5_0x5bae('0x7')](a5_0x5bae('0x12'));}passport_1[a5_0x5bae('0x13')][a5_0x5bae('0x14')](a5_0x5bae('0x15'),(_0x508196,_0xa378c4,_0x7543ac)=>{if(_0x508196){return _0x2c028b(_0x508196);}if(!_0xa378c4){_0x1800eb[a5_0x5bae('0x10')](a5_0x5bae('0x11'),_0x7543ac[a5_0x5bae('0x16')]);return _0x13a48d[a5_0x5bae('0x7')](a5_0x5bae('0x12'));}_0x1800eb[a5_0x5bae('0x17')](_0xa378c4,_0x508196=>{if(_0x508196){return _0x2c028b(_0x508196);}_0x1800eb[a5_0x5bae('0x10')](a5_0x5bae('0x18'),{'msg':a5_0x5bae('0x19')});_0x13a48d[a5_0x5bae('0x7')](_0x1800eb[a5_0x5bae('0x1a')]['returnTo']||'/');});})(_0x1800eb,_0x13a48d,_0x2c028b);};exports[a5_0x5bae('0x1b')]=(_0xd7d55b,_0xed4dbb)=>{_0xd7d55b['logout']();_0xed4dbb[a5_0x5bae('0x7')]('/');};exports[a5_0x5bae('0x1c')]=(_0x216d7f,_0x42ef3d)=>{if(_0x216d7f[a5_0x5bae('0x1d')]){return _0x42ef3d[a5_0x5bae('0x7')]('/');}_0x42ef3d[a5_0x5bae('0x1e')](a5_0x5bae('0x1f'),{'title':a5_0x5bae('0x20')});};exports[a5_0x5bae('0x21')]=(_0x4ad20c,_0x3d1338,_0xb6a43f)=>{_0x4ad20c['assert']('email',a5_0x5bae('0x22'))['isEmail']();_0x4ad20c['assert'](a5_0x5bae('0x23'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5bae('0x24')]({'min':0x4});_0x4ad20c[a5_0x5bae('0xb')](a5_0x5bae('0x25'),a5_0x5bae('0x26'))[a5_0x5bae('0x27')](_0x4ad20c[a5_0x5bae('0x28')]['password']);_0x4ad20c['sanitize'](a5_0x5bae('0xc'))[a5_0x5bae('0x29')]({'gmail_remove_dots':![]});const _0x4eeb78=_0x4ad20c[a5_0x5bae('0xf')]();if(_0x4eeb78){_0x4ad20c['flash'](a5_0x5bae('0x11'),_0x4eeb78);return _0x3d1338['redirect'](a5_0x5bae('0x2a'));}const _0x55d51f=new User_1[(a5_0x5bae('0x13'))]({'email':_0x4ad20c[a5_0x5bae('0x28')][a5_0x5bae('0xc')],'password':_0x4ad20c[a5_0x5bae('0x28')][a5_0x5bae('0x23')]});User_1[a5_0x5bae('0x13')][a5_0x5bae('0x2b')]({'email':_0x4ad20c[a5_0x5bae('0x28')][a5_0x5bae('0xc')]},(_0x57e9de,_0x19deae)=>{if(_0x57e9de){return _0xb6a43f(_0x57e9de);}if(_0x19deae){_0x4ad20c[a5_0x5bae('0x10')]('errors',{'msg':a5_0x5bae('0x2c')});return _0x3d1338['redirect'](a5_0x5bae('0x2a'));}_0x55d51f[a5_0x5bae('0x2d')](_0x57e9de=>{if(_0x57e9de){return _0xb6a43f(_0x57e9de);}_0x4ad20c[a5_0x5bae('0x17')](_0x55d51f,_0x57e9de=>{if(_0x57e9de){return _0xb6a43f(_0x57e9de);}_0x3d1338['redirect']('/');});});});};exports[a5_0x5bae('0x2e')]=(_0x5df969,_0x9115d3)=>{_0x9115d3[a5_0x5bae('0x1e')](a5_0x5bae('0x2f'),{'title':'Account\x20Management'});};exports[a5_0x5bae('0x30')]=(_0x27db1a,_0x12809f,_0x32dc3d)=>{_0x27db1a[a5_0x5bae('0xb')]('email',a5_0x5bae('0x31'))[a5_0x5bae('0x32')]();_0x27db1a['sanitize'](a5_0x5bae('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x21ceb8=_0x27db1a[a5_0x5bae('0xf')]();if(_0x21ceb8){_0x27db1a[a5_0x5bae('0x10')](a5_0x5bae('0x11'),_0x21ceb8);return _0x12809f[a5_0x5bae('0x7')](a5_0x5bae('0x33'));}User_1[a5_0x5bae('0x13')]['findById'](_0x27db1a[a5_0x5bae('0x1d')]['id'],(_0x13ad3f,_0x424bc6)=>{if(_0x13ad3f){return _0x32dc3d(_0x13ad3f);}_0x424bc6[a5_0x5bae('0xc')]=_0x27db1a['body'][a5_0x5bae('0xc')]||'';_0x424bc6[a5_0x5bae('0x34')][a5_0x5bae('0x35')]=_0x27db1a[a5_0x5bae('0x28')][a5_0x5bae('0x35')]||'';_0x424bc6['profile'][a5_0x5bae('0x36')]=_0x27db1a[a5_0x5bae('0x28')][a5_0x5bae('0x36')]||'';_0x424bc6[a5_0x5bae('0x34')][a5_0x5bae('0x37')]=_0x27db1a[a5_0x5bae('0x28')][a5_0x5bae('0x37')]||'';_0x424bc6[a5_0x5bae('0x34')][a5_0x5bae('0x38')]=_0x27db1a['body']['website']||'';_0x424bc6[a5_0x5bae('0x2d')](_0x13ad3f=>{if(_0x13ad3f){if(_0x13ad3f[a5_0x5bae('0x39')]===0x2af8){_0x27db1a[a5_0x5bae('0x10')]('errors',{'msg':a5_0x5bae('0x3a')});return _0x12809f[a5_0x5bae('0x7')](a5_0x5bae('0x33'));}return _0x32dc3d(_0x13ad3f);}_0x27db1a[a5_0x5bae('0x10')](a5_0x5bae('0x18'),{'msg':a5_0x5bae('0x3b')});_0x12809f[a5_0x5bae('0x7')]('/account');});});};exports[a5_0x5bae('0x3c')]=(_0x5e14ed,_0x987dc8,_0x895ace)=>{_0x5e14ed[a5_0x5bae('0xb')](a5_0x5bae('0x23'),a5_0x5bae('0x3d'))[a5_0x5bae('0x24')]({'min':0x4});_0x5e14ed[a5_0x5bae('0xb')](a5_0x5bae('0x25'),'Passwords\x20do\x20not\x20match')[a5_0x5bae('0x27')](_0x5e14ed[a5_0x5bae('0x28')][a5_0x5bae('0x23')]);const _0x58ec01=_0x5e14ed['validationErrors']();if(_0x58ec01){_0x5e14ed[a5_0x5bae('0x10')](a5_0x5bae('0x11'),_0x58ec01);return _0x987dc8[a5_0x5bae('0x7')](a5_0x5bae('0x33'));}User_1[a5_0x5bae('0x13')]['findById'](_0x5e14ed[a5_0x5bae('0x1d')]['id'],(_0x1b891b,_0x45a9cc)=>{if(_0x1b891b){return _0x895ace(_0x1b891b);}_0x45a9cc[a5_0x5bae('0x23')]=_0x5e14ed['body']['password'];_0x45a9cc[a5_0x5bae('0x2d')](_0x1b891b=>{if(_0x1b891b){return _0x895ace(_0x1b891b);}_0x5e14ed[a5_0x5bae('0x10')](a5_0x5bae('0x18'),{'msg':a5_0x5bae('0x3e')});_0x987dc8[a5_0x5bae('0x7')](a5_0x5bae('0x33'));});});};exports[a5_0x5bae('0x3f')]=(_0x368272,_0x4e5410,_0x3f9743)=>{User_1[a5_0x5bae('0x13')]['remove']({'_id':_0x368272[a5_0x5bae('0x1d')]['id']},_0x2d2e04=>{if(_0x2d2e04){return _0x3f9743(_0x2d2e04);}_0x368272[a5_0x5bae('0x1b')]();_0x368272[a5_0x5bae('0x10')](a5_0x5bae('0x40'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x4e5410[a5_0x5bae('0x7')]('/');});};exports[a5_0x5bae('0x41')]=(_0x58275c,_0x754968,_0x3f9456)=>{const _0x4d3212=_0x58275c['params'][a5_0x5bae('0x42')];User_1[a5_0x5bae('0x13')][a5_0x5bae('0x43')](_0x58275c[a5_0x5bae('0x1d')]['id'],(_0x478a63,_0x2d7ead)=>{if(_0x478a63){return _0x3f9456(_0x478a63);}_0x2d7ead[_0x4d3212]=undefined;_0x2d7ead[a5_0x5bae('0x44')]=_0x2d7ead['tokens'][a5_0x5bae('0x45')](_0xb89f24=>_0xb89f24[a5_0x5bae('0x46')]!==_0x4d3212);_0x2d7ead[a5_0x5bae('0x2d')](_0x478a63=>{if(_0x478a63){return _0x3f9456(_0x478a63);}_0x58275c['flash'](a5_0x5bae('0x40'),{'msg':_0x4d3212+a5_0x5bae('0x47')});_0x754968[a5_0x5bae('0x7')]('/account');});});};exports[a5_0x5bae('0x48')]=(_0x3bc3f0,_0x2e92f9,_0x5832a6)=>{if(_0x3bc3f0[a5_0x5bae('0x49')]()){return _0x2e92f9[a5_0x5bae('0x7')]('/');}User_1[a5_0x5bae('0x13')][a5_0x5bae('0x2b')]({'passwordResetToken':_0x3bc3f0['params'][a5_0x5bae('0x4a')]})[a5_0x5bae('0x4b')](a5_0x5bae('0x4c'))['gt'](Date[a5_0x5bae('0x4d')]())[a5_0x5bae('0x4e')]((_0x886c36,_0x5cc65a)=>{if(_0x886c36){return _0x5832a6(_0x886c36);}if(!_0x5cc65a){_0x3bc3f0[a5_0x5bae('0x10')](a5_0x5bae('0x11'),{'msg':a5_0x5bae('0x4f')});return _0x2e92f9[a5_0x5bae('0x7')](a5_0x5bae('0x50'));}_0x2e92f9[a5_0x5bae('0x1e')](a5_0x5bae('0x51'),{'title':a5_0x5bae('0x52')});});};exports[a5_0x5bae('0x53')]=(_0x148b66,_0x12bb70,_0x24c4bf)=>{_0x148b66[a5_0x5bae('0xb')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x5bae('0x24')]({'min':0x4});_0x148b66[a5_0x5bae('0xb')](a5_0x5bae('0x54'),a5_0x5bae('0x55'))['equals'](_0x148b66[a5_0x5bae('0x28')]['password']);const _0x5688eb=_0x148b66['validationErrors']();if(_0x5688eb){_0x148b66[a5_0x5bae('0x10')](a5_0x5bae('0x11'),_0x5688eb);return _0x12bb70[a5_0x5bae('0x7')](a5_0x5bae('0x56'));}async_1['default'][a5_0x5bae('0x57')]([function resetPassword(_0x1b170b){User_1['default'][a5_0x5bae('0x2b')]({'passwordResetToken':_0x148b66['params'][a5_0x5bae('0x4a')]})[a5_0x5bae('0x4b')](a5_0x5bae('0x4c'))['gt'](Date[a5_0x5bae('0x4d')]())[a5_0x5bae('0x4e')]((_0x3b71b5,_0x5a40a1)=>{if(_0x3b71b5){return _0x24c4bf(_0x3b71b5);}if(!_0x5a40a1){_0x148b66[a5_0x5bae('0x10')](a5_0x5bae('0x11'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x12bb70[a5_0x5bae('0x7')](a5_0x5bae('0x56'));}_0x5a40a1[a5_0x5bae('0x23')]=_0x148b66[a5_0x5bae('0x28')]['password'];_0x5a40a1[a5_0x5bae('0x58')]=undefined;_0x5a40a1[a5_0x5bae('0x4c')]=undefined;_0x5a40a1[a5_0x5bae('0x2d')](_0x3b71b5=>{if(_0x3b71b5){return _0x24c4bf(_0x3b71b5);}_0x148b66['logIn'](_0x5a40a1,_0x3b71b5=>{_0x1b170b(_0x3b71b5,_0x5a40a1);});});});},function sendResetPasswordEmail(_0x25a406,_0x8e99e1){const _0x2e1a2a=nodemailer_1[a5_0x5bae('0x13')][a5_0x5bae('0x59')]({'service':a5_0x5bae('0x5a'),'auth':{'user':process[a5_0x5bae('0x5b')][a5_0x5bae('0x5c')],'pass':process[a5_0x5bae('0x5b')][a5_0x5bae('0x5d')]}});const _0x50699e={'to':_0x25a406['email'],'from':a5_0x5bae('0x5e'),'subject':a5_0x5bae('0x5f'),'text':a5_0x5bae('0x60')+_0x25a406[a5_0x5bae('0xc')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x2e1a2a['sendMail'](_0x50699e,_0x56fa6d=>{_0x148b66[a5_0x5bae('0x10')](a5_0x5bae('0x18'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x8e99e1(_0x56fa6d);});}],_0x1e6319=>{if(_0x1e6319){return _0x24c4bf(_0x1e6319);}_0x12bb70[a5_0x5bae('0x7')]('/');});};exports['getForgot']=(_0x3dc80b,_0x3170f9)=>{if(_0x3dc80b[a5_0x5bae('0x49')]()){return _0x3170f9[a5_0x5bae('0x7')]('/');}_0x3170f9[a5_0x5bae('0x1e')](a5_0x5bae('0x61'),{'title':a5_0x5bae('0x62')});};exports[a5_0x5bae('0x63')]=(_0x45edc6,_0x48e541,_0x4e1f29)=>{_0x45edc6[a5_0x5bae('0xb')](a5_0x5bae('0xc'),a5_0x5bae('0x31'))[a5_0x5bae('0x32')]();_0x45edc6['sanitize'](a5_0x5bae('0xc'))[a5_0x5bae('0x29')]({'gmail_remove_dots':![]});const _0x7a0eab=_0x45edc6['validationErrors']();if(_0x7a0eab){_0x45edc6[a5_0x5bae('0x10')](a5_0x5bae('0x11'),_0x7a0eab);return _0x48e541['redirect'](a5_0x5bae('0x50'));}async_1[a5_0x5bae('0x13')][a5_0x5bae('0x57')]([function createRandomToken(_0x362e95){crypto_1[a5_0x5bae('0x13')]['randomBytes'](0x10,(_0x2b095c,_0x4635de)=>{const _0x103690=_0x4635de[a5_0x5bae('0x64')]('hex');_0x362e95(_0x2b095c,_0x103690);});},function setRandomToken(_0xb3bcd8,_0x313235){User_1['default'][a5_0x5bae('0x2b')]({'email':_0x45edc6[a5_0x5bae('0x28')][a5_0x5bae('0xc')]},(_0x5f5352,_0x30b302)=>{if(_0x5f5352){return _0x313235(_0x5f5352);}if(!_0x30b302){_0x45edc6['flash'](a5_0x5bae('0x11'),{'msg':a5_0x5bae('0x65')});return _0x48e541[a5_0x5bae('0x7')](a5_0x5bae('0x50'));}_0x30b302[a5_0x5bae('0x58')]=_0xb3bcd8;_0x30b302[a5_0x5bae('0x4c')]=Date[a5_0x5bae('0x4d')]()+0x36ee80;_0x30b302['save'](_0x5f5352=>{_0x313235(_0x5f5352,_0xb3bcd8,_0x30b302);});});},function sendForgotPasswordEmail(_0x5be067,_0x428c26,_0x14b9ce){const _0x3161d0=nodemailer_1['default'][a5_0x5bae('0x59')]({'service':a5_0x5bae('0x5a'),'auth':{'user':process[a5_0x5bae('0x5b')][a5_0x5bae('0x5c')],'pass':process[a5_0x5bae('0x5b')][a5_0x5bae('0x5d')]}});const _0xad353b={'to':_0x428c26['email'],'from':a5_0x5bae('0x66'),'subject':a5_0x5bae('0x67'),'text':a5_0x5bae('0x68')+_0x45edc6[a5_0x5bae('0x69')][a5_0x5bae('0x6a')]+a5_0x5bae('0x6b')+_0x5be067+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x3161d0[a5_0x5bae('0x6c')](_0xad353b,_0x39f5a9=>{_0x45edc6['flash'](a5_0x5bae('0x40'),{'msg':a5_0x5bae('0x6d')+_0x428c26[a5_0x5bae('0xc')]+'\x20with\x20further\x20instructions.'});_0x14b9ce(_0x39f5a9);});}],_0x2f78ae=>{if(_0x2f78ae){return _0x4e1f29(_0x2f78ae);}_0x48e541[a5_0x5bae('0x7')]('/forgot');});};