var a5_0xb853=['postSignup','confirmPassword','equals','body','sanitize','validationErrors','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','findOne','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','isAuthenticated','account/forgot','Forgot\x20Password','postForgot','/forgot','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','../models/User','getLogin','redirect','render','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','email','normalizeEmail','flash','errors','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','Create\x20Account'];(function(_0x5ec723,_0x19a132){var _0x5428c5=function(_0x109c93){while(--_0x109c93){_0x5ec723['push'](_0x5ec723['shift']());}};_0x5428c5(++_0x19a132);}(a5_0xb853,0xbe));var a5_0x311b=function(_0x235579,_0x29e112){_0x235579=_0x235579-0x0;var _0x43dfc9=a5_0xb853[_0x235579];return _0x43dfc9;};'use strict';var __importDefault=this&&this[a5_0x311b('0x0')]||function(_0x548fc2){return _0x548fc2&&_0x548fc2[a5_0x311b('0x1')]?_0x548fc2:{'default':_0x548fc2};};Object[a5_0x311b('0x2')](exports,a5_0x311b('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x311b('0x3')));const crypto_1=__importDefault(require(a5_0x311b('0x4')));const nodemailer_1=__importDefault(require(a5_0x311b('0x5')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x311b('0x6')));const request=require('express-validator');exports[a5_0x311b('0x7')]=(_0x123f55,_0x2defb4)=>{if(_0x123f55['user']){return _0x2defb4[a5_0x311b('0x8')]('/');}_0x2defb4[a5_0x311b('0x9')]('account/login',{'title':a5_0x311b('0xa')});};exports[a5_0x311b('0xb')]=(_0x55b722,_0x1dd6d8,_0x4dfee1)=>{_0x55b722[a5_0x311b('0xc')]('email',a5_0x311b('0xd'))[a5_0x311b('0xe')]();_0x55b722['assert'](a5_0x311b('0xf'),a5_0x311b('0x10'))[a5_0x311b('0x11')]();_0x55b722['sanitize'](a5_0x311b('0x12'))[a5_0x311b('0x13')]({'gmail_remove_dots':![]});const _0x283775=_0x55b722['validationErrors']();if(_0x283775){_0x55b722[a5_0x311b('0x14')](a5_0x311b('0x15'),_0x283775);return _0x1dd6d8[a5_0x311b('0x8')](a5_0x311b('0x16'));}passport_1[a5_0x311b('0x17')][a5_0x311b('0x18')](a5_0x311b('0x19'),(_0x14ef98,_0x273ccf,_0x2f5a78)=>{if(_0x14ef98){return _0x4dfee1(_0x14ef98);}if(!_0x273ccf){_0x55b722['flash'](a5_0x311b('0x15'),_0x2f5a78[a5_0x311b('0x1a')]);return _0x1dd6d8[a5_0x311b('0x8')](a5_0x311b('0x16'));}_0x55b722[a5_0x311b('0x1b')](_0x273ccf,_0x14ef98=>{if(_0x14ef98){return _0x4dfee1(_0x14ef98);}_0x55b722[a5_0x311b('0x14')](a5_0x311b('0x1c'),{'msg':a5_0x311b('0x1d')});_0x1dd6d8[a5_0x311b('0x8')](_0x55b722[a5_0x311b('0x1e')][a5_0x311b('0x1f')]||'/');});})(_0x55b722,_0x1dd6d8,_0x4dfee1);};exports[a5_0x311b('0x20')]=(_0x491af4,_0x46fa3d)=>{_0x491af4['logout']();_0x46fa3d[a5_0x311b('0x8')]('/');};exports[a5_0x311b('0x21')]=(_0x59d7b5,_0x1061b7)=>{if(_0x59d7b5[a5_0x311b('0x22')]){return _0x1061b7[a5_0x311b('0x8')]('/');}_0x1061b7['render']('account/signup',{'title':a5_0x311b('0x23')});};exports[a5_0x311b('0x24')]=(_0x2233cb,_0x1865c1,_0x8d6890)=>{_0x2233cb[a5_0x311b('0xc')](a5_0x311b('0x12'),'Email\x20is\x20not\x20valid')[a5_0x311b('0xe')]();_0x2233cb['assert']('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x2233cb[a5_0x311b('0xc')](a5_0x311b('0x25'),'Passwords\x20do\x20not\x20match')[a5_0x311b('0x26')](_0x2233cb[a5_0x311b('0x27')][a5_0x311b('0xf')]);_0x2233cb[a5_0x311b('0x28')](a5_0x311b('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x5e0f73=_0x2233cb[a5_0x311b('0x29')]();if(_0x5e0f73){_0x2233cb[a5_0x311b('0x14')](a5_0x311b('0x15'),_0x5e0f73);return _0x1865c1[a5_0x311b('0x8')](a5_0x311b('0x2a'));}const _0x33d530=new User_1[(a5_0x311b('0x17'))]({});User_1['default']['findOne']({'email':_0x2233cb[a5_0x311b('0x27')]['email']},(_0x18ca85,_0x3454fc)=>{if(_0x18ca85){return _0x8d6890(_0x18ca85);}if(_0x3454fc){_0x2233cb[a5_0x311b('0x14')]('errors',{'msg':a5_0x311b('0x2b')});return _0x1865c1['redirect'](a5_0x311b('0x2a'));}_0x33d530[a5_0x311b('0x2c')](_0x18ca85=>{if(_0x18ca85){return _0x8d6890(_0x18ca85);}_0x2233cb[a5_0x311b('0x1b')](_0x33d530,_0x18ca85=>{if(_0x18ca85){return _0x8d6890(_0x18ca85);}_0x1865c1[a5_0x311b('0x8')]('/');});});});};exports['getAccount']=(_0x42c03c,_0x32dc5e)=>{_0x32dc5e['render'](a5_0x311b('0x2d'),{'title':a5_0x311b('0x2e')});};exports[a5_0x311b('0x2f')]=(_0x11ea2f,_0x379c00,_0x52511f)=>{_0x11ea2f[a5_0x311b('0xc')](a5_0x311b('0x12'),a5_0x311b('0x30'))['isEmail']();_0x11ea2f[a5_0x311b('0x28')](a5_0x311b('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3372a5=_0x11ea2f[a5_0x311b('0x29')]();if(_0x3372a5){_0x11ea2f[a5_0x311b('0x14')]('errors',_0x3372a5);return _0x379c00[a5_0x311b('0x8')]('/account');}User_1[a5_0x311b('0x17')][a5_0x311b('0x31')](_0x11ea2f[a5_0x311b('0x22')]['id'],(_0x1c28b3,_0x46f111)=>{if(_0x1c28b3){return _0x52511f(_0x1c28b3);}_0x46f111[a5_0x311b('0x12')]=_0x11ea2f[a5_0x311b('0x27')][a5_0x311b('0x12')]||'';_0x46f111[a5_0x311b('0x32')][a5_0x311b('0x33')]=_0x11ea2f[a5_0x311b('0x27')]['name']||'';_0x46f111[a5_0x311b('0x32')][a5_0x311b('0x34')]=_0x11ea2f[a5_0x311b('0x27')][a5_0x311b('0x34')]||'';_0x46f111['profile'][a5_0x311b('0x35')]=_0x11ea2f[a5_0x311b('0x27')][a5_0x311b('0x35')]||'';_0x46f111['profile'][a5_0x311b('0x36')]=_0x11ea2f[a5_0x311b('0x27')][a5_0x311b('0x36')]||'';_0x46f111['save'](_0x1c28b3=>{if(_0x1c28b3){if(_0x1c28b3[a5_0x311b('0x37')]===0x2af8){_0x11ea2f[a5_0x311b('0x14')]('errors',{'msg':a5_0x311b('0x38')});return _0x379c00[a5_0x311b('0x8')](a5_0x311b('0x39'));}return _0x52511f(_0x1c28b3);}_0x11ea2f[a5_0x311b('0x14')](a5_0x311b('0x1c'),{'msg':a5_0x311b('0x3a')});_0x379c00[a5_0x311b('0x8')]('/account');});});};exports[a5_0x311b('0x3b')]=(_0x3ae4b5,_0x440ac5,_0x16407a)=>{_0x3ae4b5[a5_0x311b('0xc')](a5_0x311b('0xf'),a5_0x311b('0x3c'))[a5_0x311b('0x3d')]({'min':0x4});_0x3ae4b5['assert'](a5_0x311b('0x25'),a5_0x311b('0x3e'))[a5_0x311b('0x26')](_0x3ae4b5[a5_0x311b('0x27')][a5_0x311b('0xf')]);const _0x88b9b9=_0x3ae4b5[a5_0x311b('0x29')]();if(_0x88b9b9){_0x3ae4b5[a5_0x311b('0x14')]('errors',_0x88b9b9);return _0x440ac5['redirect'](a5_0x311b('0x39'));}User_1[a5_0x311b('0x17')][a5_0x311b('0x31')](_0x3ae4b5[a5_0x311b('0x22')]['id'],(_0x5a6bc4,_0x3fe286)=>{if(_0x5a6bc4){return _0x16407a(_0x5a6bc4);}_0x3fe286[a5_0x311b('0xf')]=_0x3ae4b5['body'][a5_0x311b('0xf')];_0x3fe286['save'](_0x5a6bc4=>{if(_0x5a6bc4){return _0x16407a(_0x5a6bc4);}_0x3ae4b5[a5_0x311b('0x14')]('success',{'msg':a5_0x311b('0x3f')});_0x440ac5['redirect']('/account');});});};exports['postDeleteAccount']=(_0x334bfe,_0x5e1e92,_0x42ac27)=>{User_1[a5_0x311b('0x17')][a5_0x311b('0x40')]({'_id':_0x334bfe['user']['id']},_0x4a5c1c=>{if(_0x4a5c1c){return _0x42ac27(_0x4a5c1c);}_0x334bfe[a5_0x311b('0x20')]();_0x334bfe['flash']('info',{'msg':a5_0x311b('0x41')});_0x5e1e92[a5_0x311b('0x8')]('/');});};exports[a5_0x311b('0x42')]=(_0x494828,_0x4f772d,_0x52365c)=>{const _0x5f39f1=_0x494828[a5_0x311b('0x43')][a5_0x311b('0x44')];User_1[a5_0x311b('0x17')][a5_0x311b('0x31')](_0x494828[a5_0x311b('0x22')]['id'],(_0x1ba64e,_0x1d1465)=>{if(_0x1ba64e){return _0x52365c(_0x1ba64e);}_0x1d1465[_0x5f39f1]=undefined;_0x1d1465[a5_0x311b('0x45')]=_0x1d1465[a5_0x311b('0x45')]['filter'](_0xe6beb4=>_0xe6beb4[a5_0x311b('0x46')]!==_0x5f39f1);_0x1d1465[a5_0x311b('0x2c')](_0x1ba64e=>{if(_0x1ba64e){return _0x52365c(_0x1ba64e);}_0x494828[a5_0x311b('0x14')](a5_0x311b('0x47'),{'msg':_0x5f39f1+a5_0x311b('0x48')});_0x4f772d['redirect'](a5_0x311b('0x39'));});});};exports[a5_0x311b('0x49')]=(_0x343da3,_0x1bf626,_0x48c20d)=>{if(_0x343da3['isAuthenticated']()){return _0x1bf626[a5_0x311b('0x8')]('/');}User_1[a5_0x311b('0x17')][a5_0x311b('0x4a')]({'passwordResetToken':_0x343da3['params'][a5_0x311b('0x4b')]})[a5_0x311b('0x4c')](a5_0x311b('0x4d'))['gt'](Date[a5_0x311b('0x4e')]())[a5_0x311b('0x4f')]((_0x464e32,_0x3146cf)=>{if(_0x464e32){return _0x48c20d(_0x464e32);}if(!_0x3146cf){_0x343da3[a5_0x311b('0x14')](a5_0x311b('0x15'),{'msg':a5_0x311b('0x50')});return _0x1bf626[a5_0x311b('0x8')]('/forgot');}_0x1bf626[a5_0x311b('0x9')]('account/reset',{'title':'Password\x20Reset'});});};exports[a5_0x311b('0x51')]=(_0x5f2bba,_0x3c880e,_0x7e401b)=>{_0x5f2bba[a5_0x311b('0xc')](a5_0x311b('0xf'),a5_0x311b('0x52'))[a5_0x311b('0x3d')]({'min':0x4});_0x5f2bba[a5_0x311b('0xc')](a5_0x311b('0x53'),a5_0x311b('0x54'))[a5_0x311b('0x26')](_0x5f2bba[a5_0x311b('0x27')]['password']);const _0x413bf8=_0x5f2bba[a5_0x311b('0x29')]();if(_0x413bf8){_0x5f2bba[a5_0x311b('0x14')]('errors',_0x413bf8);return _0x3c880e['redirect'](a5_0x311b('0x55'));}async_1[a5_0x311b('0x17')][a5_0x311b('0x56')]([function resetPassword(_0x4b168){User_1[a5_0x311b('0x17')]['findOne']({'passwordResetToken':_0x5f2bba[a5_0x311b('0x43')]['token']})[a5_0x311b('0x4c')](a5_0x311b('0x4d'))['gt'](Date[a5_0x311b('0x4e')]())[a5_0x311b('0x4f')]((_0x2ff81f,_0x223321)=>{if(_0x2ff81f){return _0x7e401b(_0x2ff81f);}if(!_0x223321){_0x5f2bba[a5_0x311b('0x14')](a5_0x311b('0x15'),{'msg':a5_0x311b('0x50')});return _0x3c880e[a5_0x311b('0x8')](a5_0x311b('0x55'));}_0x223321[a5_0x311b('0xf')]=_0x5f2bba[a5_0x311b('0x27')][a5_0x311b('0xf')];_0x223321[a5_0x311b('0x57')]=undefined;_0x223321[a5_0x311b('0x4d')]=undefined;_0x223321[a5_0x311b('0x2c')](_0x2ff81f=>{if(_0x2ff81f){return _0x7e401b(_0x2ff81f);}_0x5f2bba[a5_0x311b('0x1b')](_0x223321,_0x2ff81f=>{_0x4b168(_0x2ff81f,_0x223321);});});});},function sendResetPasswordEmail(_0x3f1e44,_0x277b06){const _0xb947ef=nodemailer_1[a5_0x311b('0x17')]['createTransport']({'service':a5_0x311b('0x58'),'auth':{'user':process[a5_0x311b('0x59')][a5_0x311b('0x5a')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x1e4f2f={'to':_0x3f1e44['email'],'from':a5_0x311b('0x5b'),'subject':a5_0x311b('0x5c'),'text':a5_0x311b('0x5d')+_0x3f1e44[a5_0x311b('0x12')]+a5_0x311b('0x5e')};_0xb947ef[a5_0x311b('0x5f')](_0x1e4f2f,_0x3224c2=>{_0x5f2bba[a5_0x311b('0x14')](a5_0x311b('0x1c'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x277b06(_0x3224c2);});}],_0x5d3b27=>{if(_0x5d3b27){return _0x7e401b(_0x5d3b27);}_0x3c880e[a5_0x311b('0x8')]('/');});};exports[a5_0x311b('0x60')]=(_0x1bd80b,_0x544e7a)=>{if(_0x1bd80b[a5_0x311b('0x61')]()){return _0x544e7a[a5_0x311b('0x8')]('/');}_0x544e7a['render'](a5_0x311b('0x62'),{'title':a5_0x311b('0x63')});};exports[a5_0x311b('0x64')]=(_0x46e570,_0x17ac0e,_0x34fe3b)=>{_0x46e570[a5_0x311b('0xc')](a5_0x311b('0x12'),a5_0x311b('0x30'))[a5_0x311b('0xe')]();_0x46e570[a5_0x311b('0x28')](a5_0x311b('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x55f49f=_0x46e570[a5_0x311b('0x29')]();if(_0x55f49f){_0x46e570[a5_0x311b('0x14')](a5_0x311b('0x15'),_0x55f49f);return _0x17ac0e[a5_0x311b('0x8')](a5_0x311b('0x65'));}async_1[a5_0x311b('0x17')][a5_0x311b('0x56')]([function createRandomToken(_0xd69e12){crypto_1['default'][a5_0x311b('0x66')](0x10,(_0x5a7687,_0x475016)=>{const _0x113e51=_0x475016['toString']('hex');_0xd69e12(_0x5a7687,_0x113e51);});},function setRandomToken(_0xfd39ab,_0x14d59b){User_1[a5_0x311b('0x17')][a5_0x311b('0x4a')]({'email':_0x46e570[a5_0x311b('0x27')][a5_0x311b('0x12')]},(_0x27d3be,_0x574b6e)=>{if(_0x27d3be){return _0x14d59b(_0x27d3be);}if(!_0x574b6e){_0x46e570[a5_0x311b('0x14')](a5_0x311b('0x15'),{'msg':a5_0x311b('0x67')});return _0x17ac0e['redirect'](a5_0x311b('0x65'));}_0x574b6e['passwordResetToken']=_0xfd39ab;_0x574b6e[a5_0x311b('0x4d')]=Date[a5_0x311b('0x4e')]()+0x36ee80;_0x574b6e['save'](_0x27d3be=>{_0x14d59b(_0x27d3be,_0xfd39ab,_0x574b6e);});});},function sendForgotPasswordEmail(_0x4304a0,_0x4eb5ca,_0x87762c){const _0x41f6ec=nodemailer_1[a5_0x311b('0x17')][a5_0x311b('0x68')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x311b('0x59')][a5_0x311b('0x69')]}});const _0x2ea598={'to':_0x4eb5ca[a5_0x311b('0x12')],'from':a5_0x311b('0x6a'),'subject':a5_0x311b('0x6b'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x46e570['headers'][a5_0x311b('0x6c')]+a5_0x311b('0x6d')+_0x4304a0+a5_0x311b('0x6e')};_0x41f6ec[a5_0x311b('0x5f')](_0x2ea598,_0x3ff429=>{_0x46e570[a5_0x311b('0x14')]('info',{'msg':a5_0x311b('0x6f')+_0x4eb5ca[a5_0x311b('0x12')]+a5_0x311b('0x70')});_0x87762c(_0x3ff429);});}],_0x53e57b=>{if(_0x53e57b){return _0x34fe3b(_0x53e57b);}_0x17ac0e[a5_0x311b('0x8')](a5_0x311b('0x65'));});};