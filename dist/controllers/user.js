var a5_0x4dca=['findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','sanitize','/account','findById','body','profile','name','gender','location','website','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','waterfall','passwordResetToken','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','/forgot','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','__importDefault','defineProperty','__esModule','async','nodemailer','passport','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','normalizeEmail','/login','authenticate','local','flash','errors','success','Success!\x20You\x20are\x20logged\x20in.','logout','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','validationErrors','default'];(function(_0x59ebc7,_0x5cc796){var _0x5a906e=function(_0x3a87df){while(--_0x3a87df){_0x59ebc7['push'](_0x59ebc7['shift']());}};_0x5a906e(++_0x5cc796);}(a5_0x4dca,0xff));var a5_0x245f=function(_0x481506,_0x32ca23){_0x481506=_0x481506-0x0;var _0x48836a=a5_0x4dca[_0x481506];return _0x48836a;};'use strict';var __importDefault=this&&this[a5_0x245f('0x0')]||function(_0x5aaf90){return _0x5aaf90&&_0x5aaf90['__esModule']?_0x5aaf90:{'default':_0x5aaf90};};Object[a5_0x245f('0x1')](exports,a5_0x245f('0x2'),{'value':!![]});const async_1=__importDefault(require(a5_0x245f('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x245f('0x4')));const passport_1=__importDefault(require(a5_0x245f('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x245f('0x6'));exports[a5_0x245f('0x7')]=(_0x23cbd8,_0x3025e5)=>{if(_0x23cbd8[a5_0x245f('0x8')]){return _0x3025e5[a5_0x245f('0x9')]('/');}_0x3025e5[a5_0x245f('0xa')]('account/login',{'title':a5_0x245f('0xb')});};exports[a5_0x245f('0xc')]=(_0x10b33c,_0x163bd9,_0x1cbe76)=>{_0x10b33c[a5_0x245f('0xd')](a5_0x245f('0xe'),a5_0x245f('0xf'))[a5_0x245f('0x10')]();_0x10b33c['assert'](a5_0x245f('0x11'),'Password\x20cannot\x20be\x20blank')[a5_0x245f('0x12')]();_0x10b33c['sanitize']('email')[a5_0x245f('0x13')]({'gmail_remove_dots':![]});const _0x7231b4=_0x10b33c['validationErrors']();if(_0x7231b4){_0x10b33c['flash']('errors',_0x7231b4);return _0x163bd9[a5_0x245f('0x9')](a5_0x245f('0x14'));}passport_1['default'][a5_0x245f('0x15')](a5_0x245f('0x16'),(_0x2ea200,_0x2a5b4e,_0x9ffa93)=>{if(_0x2ea200){return _0x1cbe76(_0x2ea200);}if(!_0x2a5b4e){_0x10b33c[a5_0x245f('0x17')](a5_0x245f('0x18'),_0x9ffa93['message']);return _0x163bd9['redirect'](a5_0x245f('0x14'));}_0x10b33c['logIn'](_0x2a5b4e,_0x2ea200=>{if(_0x2ea200){return _0x1cbe76(_0x2ea200);}_0x10b33c[a5_0x245f('0x17')](a5_0x245f('0x19'),{'msg':a5_0x245f('0x1a')});_0x163bd9[a5_0x245f('0x9')](_0x10b33c['session']['returnTo']||'/');});})(_0x10b33c,_0x163bd9,_0x1cbe76);};exports['logout']=(_0x11ef38,_0x15a6ad)=>{_0x11ef38[a5_0x245f('0x1b')]();_0x15a6ad[a5_0x245f('0x9')]('/');};exports['getSignup']=(_0x53b06e,_0x540e45)=>{if(_0x53b06e['user']){return _0x540e45[a5_0x245f('0x9')]('/');}_0x540e45[a5_0x245f('0xa')]('account/signup',{'title':a5_0x245f('0x1c')});};exports['postSignup']=(_0x4bd611,_0x543e5d,_0x50261c)=>{_0x4bd611[a5_0x245f('0xd')]('email','Email\x20is\x20not\x20valid')['isEmail']();_0x4bd611['assert']('password',a5_0x245f('0x1d'))[a5_0x245f('0x1e')]({'min':0x4});_0x4bd611[a5_0x245f('0xd')](a5_0x245f('0x1f'),a5_0x245f('0x20'))[a5_0x245f('0x21')](_0x4bd611['body'][a5_0x245f('0x11')]);_0x4bd611['sanitize']('email')[a5_0x245f('0x13')]({'gmail_remove_dots':![]});const _0x36f358=_0x4bd611[a5_0x245f('0x22')]();if(_0x36f358){_0x4bd611[a5_0x245f('0x17')]('errors',_0x36f358);return _0x543e5d['redirect']('/signup');}const _0x3f7b07=new User_1[(a5_0x245f('0x23'))]({});User_1[a5_0x245f('0x23')][a5_0x245f('0x24')]({'email':_0x4bd611['body']['email']},(_0x4fce9c,_0x4adbab)=>{if(_0x4fce9c){return _0x50261c(_0x4fce9c);}if(_0x4adbab){_0x4bd611['flash'](a5_0x245f('0x18'),{'msg':a5_0x245f('0x25')});return _0x543e5d[a5_0x245f('0x9')]('/signup');}_0x3f7b07[a5_0x245f('0x26')](_0x4fce9c=>{if(_0x4fce9c){return _0x50261c(_0x4fce9c);}_0x4bd611[a5_0x245f('0x27')](_0x3f7b07,_0x4fce9c=>{if(_0x4fce9c){return _0x50261c(_0x4fce9c);}_0x543e5d['redirect']('/');});});});};exports[a5_0x245f('0x28')]=(_0x2e0b4e,_0x53ed35)=>{_0x53ed35['render']('account/profile',{'title':a5_0x245f('0x29')});};exports[a5_0x245f('0x2a')]=(_0xf831f2,_0x10889f,_0x1de04b)=>{_0xf831f2[a5_0x245f('0xd')](a5_0x245f('0xe'),a5_0x245f('0x2b'))[a5_0x245f('0x10')]();_0xf831f2[a5_0x245f('0x2c')](a5_0x245f('0xe'))[a5_0x245f('0x13')]({'gmail_remove_dots':![]});const _0x596ee8=_0xf831f2[a5_0x245f('0x22')]();if(_0x596ee8){_0xf831f2[a5_0x245f('0x17')]('errors',_0x596ee8);return _0x10889f[a5_0x245f('0x9')](a5_0x245f('0x2d'));}User_1[a5_0x245f('0x23')][a5_0x245f('0x2e')](_0xf831f2[a5_0x245f('0x8')]['id'],(_0x3cd878,_0x7cfbc5)=>{if(_0x3cd878){return _0x1de04b(_0x3cd878);}_0x7cfbc5[a5_0x245f('0xe')]=_0xf831f2[a5_0x245f('0x2f')]['email']||'';_0x7cfbc5[a5_0x245f('0x30')][a5_0x245f('0x31')]=_0xf831f2[a5_0x245f('0x2f')][a5_0x245f('0x31')]||'';_0x7cfbc5[a5_0x245f('0x30')][a5_0x245f('0x32')]=_0xf831f2[a5_0x245f('0x2f')]['gender']||'';_0x7cfbc5[a5_0x245f('0x30')][a5_0x245f('0x33')]=_0xf831f2['body'][a5_0x245f('0x33')]||'';_0x7cfbc5[a5_0x245f('0x30')]['website']=_0xf831f2[a5_0x245f('0x2f')][a5_0x245f('0x34')]||'';_0x7cfbc5[a5_0x245f('0x26')](_0x3cd878=>{if(_0x3cd878){if(_0x3cd878['code']===0x2af8){_0xf831f2['flash'](a5_0x245f('0x18'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x10889f[a5_0x245f('0x9')](a5_0x245f('0x2d'));}return _0x1de04b(_0x3cd878);}_0xf831f2[a5_0x245f('0x17')](a5_0x245f('0x19'),{'msg':a5_0x245f('0x35')});_0x10889f[a5_0x245f('0x9')](a5_0x245f('0x2d'));});});};exports[a5_0x245f('0x36')]=(_0xffd2b3,_0x387dfd,_0x3ebb83)=>{_0xffd2b3[a5_0x245f('0xd')](a5_0x245f('0x11'),a5_0x245f('0x1d'))['len']({'min':0x4});_0xffd2b3[a5_0x245f('0xd')](a5_0x245f('0x1f'),a5_0x245f('0x20'))[a5_0x245f('0x21')](_0xffd2b3['body'][a5_0x245f('0x11')]);const _0x15396b=_0xffd2b3[a5_0x245f('0x22')]();if(_0x15396b){_0xffd2b3[a5_0x245f('0x17')](a5_0x245f('0x18'),_0x15396b);return _0x387dfd['redirect'](a5_0x245f('0x2d'));}User_1[a5_0x245f('0x23')][a5_0x245f('0x2e')](_0xffd2b3[a5_0x245f('0x8')]['id'],(_0x7279e8,_0x4f93a4)=>{if(_0x7279e8){return _0x3ebb83(_0x7279e8);}_0x4f93a4[a5_0x245f('0x11')]=_0xffd2b3[a5_0x245f('0x2f')][a5_0x245f('0x11')];_0x4f93a4[a5_0x245f('0x26')](_0x7279e8=>{if(_0x7279e8){return _0x3ebb83(_0x7279e8);}_0xffd2b3[a5_0x245f('0x17')](a5_0x245f('0x19'),{'msg':a5_0x245f('0x37')});_0x387dfd['redirect'](a5_0x245f('0x2d'));});});};exports['postDeleteAccount']=(_0x3dd097,_0x5d3a72,_0x46fa8f)=>{User_1[a5_0x245f('0x23')]['remove']({'_id':_0x3dd097[a5_0x245f('0x8')]['id']},_0x24ba0f=>{if(_0x24ba0f){return _0x46fa8f(_0x24ba0f);}_0x3dd097[a5_0x245f('0x1b')]();_0x3dd097['flash'](a5_0x245f('0x38'),{'msg':a5_0x245f('0x39')});_0x5d3a72[a5_0x245f('0x9')]('/');});};exports[a5_0x245f('0x3a')]=(_0x347629,_0x372305,_0x59ca2b)=>{const _0x47cafa=_0x347629['params'][a5_0x245f('0x3b')];User_1[a5_0x245f('0x23')][a5_0x245f('0x2e')](_0x347629[a5_0x245f('0x8')]['id'],(_0x25289f,_0x24f6a4)=>{if(_0x25289f){return _0x59ca2b(_0x25289f);}_0x24f6a4[_0x47cafa]=undefined;_0x24f6a4[a5_0x245f('0x3c')]=_0x24f6a4[a5_0x245f('0x3c')]['filter'](_0x4b39d0=>_0x4b39d0['kind']!==_0x47cafa);_0x24f6a4[a5_0x245f('0x26')](_0x25289f=>{if(_0x25289f){return _0x59ca2b(_0x25289f);}_0x347629[a5_0x245f('0x17')]('info',{'msg':_0x47cafa+a5_0x245f('0x3d')});_0x372305[a5_0x245f('0x9')](a5_0x245f('0x2d'));});});};exports[a5_0x245f('0x3e')]=(_0x4981b4,_0x56e4ac,_0x17ec90)=>{if(_0x4981b4[a5_0x245f('0x3f')]()){return _0x56e4ac[a5_0x245f('0x9')]('/');}User_1[a5_0x245f('0x23')]['findOne']({'passwordResetToken':_0x4981b4['params'][a5_0x245f('0x40')]})['where'](a5_0x245f('0x41'))['gt'](Date[a5_0x245f('0x42')]())[a5_0x245f('0x43')]((_0x5598fa,_0x144ab2)=>{if(_0x5598fa){return _0x17ec90(_0x5598fa);}if(!_0x144ab2){_0x4981b4[a5_0x245f('0x17')](a5_0x245f('0x18'),{'msg':a5_0x245f('0x44')});return _0x56e4ac[a5_0x245f('0x9')]('/forgot');}_0x56e4ac[a5_0x245f('0xa')](a5_0x245f('0x45'),{'title':'Password\x20Reset'});});};exports[a5_0x245f('0x46')]=(_0xfd6d1d,_0x5b5fbf,_0x51d3dc)=>{_0xfd6d1d[a5_0x245f('0xd')](a5_0x245f('0x11'),a5_0x245f('0x47'))[a5_0x245f('0x1e')]({'min':0x4});_0xfd6d1d[a5_0x245f('0xd')]('confirm','Passwords\x20must\x20match.')[a5_0x245f('0x21')](_0xfd6d1d['body'][a5_0x245f('0x11')]);const _0x25d351=_0xfd6d1d[a5_0x245f('0x22')]();if(_0x25d351){_0xfd6d1d[a5_0x245f('0x17')](a5_0x245f('0x18'),_0x25d351);return _0x5b5fbf[a5_0x245f('0x9')]('back');}async_1[a5_0x245f('0x23')][a5_0x245f('0x48')]([function resetPassword(_0x9a7abc){User_1[a5_0x245f('0x23')][a5_0x245f('0x24')]({'passwordResetToken':_0xfd6d1d['params'][a5_0x245f('0x40')]})['where']('passwordResetExpires')['gt'](Date['now']())[a5_0x245f('0x43')]((_0x1bcbb1,_0x5dfb69)=>{if(_0x1bcbb1){return _0x51d3dc(_0x1bcbb1);}if(!_0x5dfb69){_0xfd6d1d['flash'](a5_0x245f('0x18'),{'msg':a5_0x245f('0x44')});return _0x5b5fbf[a5_0x245f('0x9')]('back');}_0x5dfb69[a5_0x245f('0x11')]=_0xfd6d1d[a5_0x245f('0x2f')][a5_0x245f('0x11')];_0x5dfb69[a5_0x245f('0x49')]=undefined;_0x5dfb69['passwordResetExpires']=undefined;_0x5dfb69[a5_0x245f('0x26')](_0x1bcbb1=>{if(_0x1bcbb1){return _0x51d3dc(_0x1bcbb1);}_0xfd6d1d[a5_0x245f('0x27')](_0x5dfb69,_0x1bcbb1=>{_0x9a7abc(_0x1bcbb1,_0x5dfb69);});});});},function sendResetPasswordEmail(_0x2ae14e,_0x943c91){const _0x192c87=nodemailer_1[a5_0x245f('0x23')]['createTransport']({'service':a5_0x245f('0x4a'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x245f('0x4b')][a5_0x245f('0x4c')]}});const _0x56e755={'to':_0x2ae14e[a5_0x245f('0xe')],'from':a5_0x245f('0x4d'),'subject':a5_0x245f('0x4e'),'text':a5_0x245f('0x4f')+_0x2ae14e[a5_0x245f('0xe')]+a5_0x245f('0x50')};_0x192c87[a5_0x245f('0x51')](_0x56e755,_0x57ce9a=>{_0xfd6d1d[a5_0x245f('0x17')](a5_0x245f('0x19'),{'msg':a5_0x245f('0x52')});_0x943c91(_0x57ce9a);});}],_0x2a60e6=>{if(_0x2a60e6){return _0x51d3dc(_0x2a60e6);}_0x5b5fbf[a5_0x245f('0x9')]('/');});};exports[a5_0x245f('0x53')]=(_0x249898,_0x280249)=>{if(_0x249898[a5_0x245f('0x3f')]()){return _0x280249[a5_0x245f('0x9')]('/');}_0x280249[a5_0x245f('0xa')](a5_0x245f('0x54'),{'title':a5_0x245f('0x55')});};exports[a5_0x245f('0x56')]=(_0x4e0251,_0x36a08e,_0x2e5467)=>{_0x4e0251[a5_0x245f('0xd')]('email',a5_0x245f('0x2b'))[a5_0x245f('0x10')]();_0x4e0251['sanitize']('email')[a5_0x245f('0x13')]({'gmail_remove_dots':![]});const _0x2a4c2b=_0x4e0251[a5_0x245f('0x22')]();if(_0x2a4c2b){_0x4e0251[a5_0x245f('0x17')](a5_0x245f('0x18'),_0x2a4c2b);return _0x36a08e[a5_0x245f('0x9')](a5_0x245f('0x57'));}async_1[a5_0x245f('0x23')][a5_0x245f('0x48')]([function createRandomToken(_0x1b059b){crypto_1[a5_0x245f('0x23')]['randomBytes'](0x10,(_0x336516,_0x25a52b)=>{const _0xfdb5e3=_0x25a52b[a5_0x245f('0x58')]('hex');_0x1b059b(_0x336516,_0xfdb5e3);});},function setRandomToken(_0x17ffb1,_0x5975de){User_1[a5_0x245f('0x23')][a5_0x245f('0x24')]({'email':_0x4e0251[a5_0x245f('0x2f')]['email']},(_0x1c31f5,_0x2e5e2b)=>{if(_0x1c31f5){return _0x5975de(_0x1c31f5);}if(!_0x2e5e2b){_0x4e0251[a5_0x245f('0x17')]('errors',{'msg':a5_0x245f('0x59')});return _0x36a08e['redirect'](a5_0x245f('0x57'));}_0x2e5e2b[a5_0x245f('0x49')]=_0x17ffb1;_0x2e5e2b[a5_0x245f('0x41')]=Date[a5_0x245f('0x42')]()+0x36ee80;_0x2e5e2b[a5_0x245f('0x26')](_0x1c31f5=>{_0x5975de(_0x1c31f5,_0x17ffb1,_0x2e5e2b);});});},function sendForgotPasswordEmail(_0x3c30db,_0x3f2342,_0x49493b){const _0x3efb77=nodemailer_1['default'][a5_0x245f('0x5a')]({'service':'SendGrid','auth':{'user':process[a5_0x245f('0x4b')]['SENDGRID_USER'],'pass':process[a5_0x245f('0x4b')][a5_0x245f('0x4c')]}});const _0x33d8e4={'to':_0x3f2342[a5_0x245f('0xe')],'from':'hackathon@starter.com','subject':a5_0x245f('0x5b'),'text':a5_0x245f('0x5c')+_0x4e0251[a5_0x245f('0x5d')][a5_0x245f('0x5e')]+a5_0x245f('0x5f')+_0x3c30db+a5_0x245f('0x60')};_0x3efb77[a5_0x245f('0x51')](_0x33d8e4,_0x3b46e4=>{_0x4e0251['flash'](a5_0x245f('0x38'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x3f2342['email']+'\x20with\x20further\x20instructions.'});_0x49493b(_0x3b46e4);});}],_0x406ead=>{if(_0x406ead){return _0x2e5467(_0x406ead);}_0x36a08e[a5_0x245f('0x9')](a5_0x245f('0x57'));});};