var a5_0x4cbb=['session','returnTo','logout','getSignup','account/signup','Create\x20Account','isEmail','len','confirmPassword','equals','body','password','validationErrors','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','where','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','sendMail','getForgot','account/forgot','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','flash','errors','/login','default','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a5_0x4cbb,0xbf));var a5_0x1d97=function(_0x44f6d5,_0x5d9f82){_0x44f6d5=_0x44f6d5-0x0;var _0x12cb72=a5_0x4cbb[_0x44f6d5];return _0x12cb72;};'use strict';var __importDefault=this&&this[a5_0x1d97('0x0')]||function(_0x1c810d){return _0x1c810d&&_0x1c810d[a5_0x1d97('0x1')]?_0x1c810d:{'default':_0x1c810d};};Object[a5_0x1d97('0x2')](exports,a5_0x1d97('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x1d97('0x3')));const crypto_1=__importDefault(require(a5_0x1d97('0x4')));const nodemailer_1=__importDefault(require(a5_0x1d97('0x5')));const passport_1=__importDefault(require(a5_0x1d97('0x6')));const User_1=__importDefault(require(a5_0x1d97('0x7')));const request=require(a5_0x1d97('0x8'));exports[a5_0x1d97('0x9')]=(_0x4db7b6,_0x116130)=>{if(_0x4db7b6[a5_0x1d97('0xa')]){return _0x116130[a5_0x1d97('0xb')]('/');}_0x116130[a5_0x1d97('0xc')](a5_0x1d97('0xd'),{'title':a5_0x1d97('0xe')});};exports[a5_0x1d97('0xf')]=(_0x36b53f,_0x5943b3,_0x33679f)=>{_0x36b53f[a5_0x1d97('0x10')](a5_0x1d97('0x11'),a5_0x1d97('0x12'))['isEmail']();_0x36b53f[a5_0x1d97('0x10')]('password',a5_0x1d97('0x13'))[a5_0x1d97('0x14')]();_0x36b53f[a5_0x1d97('0x15')](a5_0x1d97('0x11'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x494a24=_0x36b53f['validationErrors']();if(_0x494a24){_0x36b53f[a5_0x1d97('0x16')](a5_0x1d97('0x17'),_0x494a24);return _0x5943b3['redirect'](a5_0x1d97('0x18'));}passport_1[a5_0x1d97('0x19')]['authenticate'](a5_0x1d97('0x1a'),(_0x1b73d1,_0x25e64c,_0xfd544a)=>{if(_0x1b73d1){return _0x33679f(_0x1b73d1);}if(!_0x25e64c){_0x36b53f[a5_0x1d97('0x16')](a5_0x1d97('0x17'),_0xfd544a[a5_0x1d97('0x1b')]);return _0x5943b3[a5_0x1d97('0xb')]('/login');}_0x36b53f[a5_0x1d97('0x1c')](_0x25e64c,_0x1b73d1=>{if(_0x1b73d1){return _0x33679f(_0x1b73d1);}_0x36b53f[a5_0x1d97('0x16')](a5_0x1d97('0x1d'),{'msg':a5_0x1d97('0x1e')});_0x5943b3[a5_0x1d97('0xb')](_0x36b53f[a5_0x1d97('0x1f')][a5_0x1d97('0x20')]||'/');});})(_0x36b53f,_0x5943b3,_0x33679f);};exports['logout']=(_0x5f5bf4,_0x448996)=>{_0x5f5bf4[a5_0x1d97('0x21')]();_0x448996['redirect']('/');};exports[a5_0x1d97('0x22')]=(_0x35f454,_0x40ba32)=>{if(_0x35f454['user']){return _0x40ba32[a5_0x1d97('0xb')]('/');}_0x40ba32['render'](a5_0x1d97('0x23'),{'title':a5_0x1d97('0x24')});};exports['postSignup']=(_0x498977,_0x45c3ab,_0x50338f)=>{_0x498977[a5_0x1d97('0x10')]('email','Email\x20is\x20not\x20valid')[a5_0x1d97('0x25')]();_0x498977[a5_0x1d97('0x10')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x1d97('0x26')]({'min':0x4});_0x498977[a5_0x1d97('0x10')](a5_0x1d97('0x27'),'Passwords\x20do\x20not\x20match')[a5_0x1d97('0x28')](_0x498977[a5_0x1d97('0x29')][a5_0x1d97('0x2a')]);_0x498977[a5_0x1d97('0x15')](a5_0x1d97('0x11'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x46c383=_0x498977[a5_0x1d97('0x2b')]();if(_0x46c383){_0x498977[a5_0x1d97('0x16')](a5_0x1d97('0x17'),_0x46c383);return _0x45c3ab[a5_0x1d97('0xb')]('/signup');}const _0x4b3d1b=new User_1[(a5_0x1d97('0x19'))]({});User_1[a5_0x1d97('0x19')][a5_0x1d97('0x2c')]({'email':_0x498977[a5_0x1d97('0x29')][a5_0x1d97('0x11')]},(_0x4fe471,_0x57a2cc)=>{if(_0x4fe471){return _0x50338f(_0x4fe471);}if(_0x57a2cc){_0x498977[a5_0x1d97('0x16')](a5_0x1d97('0x17'),{'msg':a5_0x1d97('0x2d')});return _0x45c3ab['redirect'](a5_0x1d97('0x2e'));}_0x4b3d1b[a5_0x1d97('0x2f')](_0x4fe471=>{if(_0x4fe471){return _0x50338f(_0x4fe471);}_0x498977[a5_0x1d97('0x1c')](_0x4b3d1b,_0x4fe471=>{if(_0x4fe471){return _0x50338f(_0x4fe471);}_0x45c3ab[a5_0x1d97('0xb')]('/');});});});};exports[a5_0x1d97('0x30')]=(_0xbe87e1,_0x12c1bc)=>{_0x12c1bc[a5_0x1d97('0xc')](a5_0x1d97('0x31'),{'title':a5_0x1d97('0x32')});};exports[a5_0x1d97('0x33')]=(_0x19b6c1,_0x1c2e2b,_0x4fd03f)=>{_0x19b6c1[a5_0x1d97('0x10')](a5_0x1d97('0x11'),a5_0x1d97('0x34'))[a5_0x1d97('0x25')]();_0x19b6c1['sanitize'](a5_0x1d97('0x11'))[a5_0x1d97('0x35')]({'gmail_remove_dots':![]});const _0x267c74=_0x19b6c1['validationErrors']();if(_0x267c74){_0x19b6c1[a5_0x1d97('0x16')](a5_0x1d97('0x17'),_0x267c74);return _0x1c2e2b[a5_0x1d97('0xb')](a5_0x1d97('0x36'));}User_1[a5_0x1d97('0x19')][a5_0x1d97('0x37')](_0x19b6c1[a5_0x1d97('0xa')]['id'],(_0x438a5d,_0xd0fd74)=>{if(_0x438a5d){return _0x4fd03f(_0x438a5d);}_0xd0fd74[a5_0x1d97('0x11')]=_0x19b6c1[a5_0x1d97('0x29')][a5_0x1d97('0x11')]||'';_0xd0fd74[a5_0x1d97('0x38')][a5_0x1d97('0x39')]=_0x19b6c1['body'][a5_0x1d97('0x39')]||'';_0xd0fd74['profile'][a5_0x1d97('0x3a')]=_0x19b6c1[a5_0x1d97('0x29')][a5_0x1d97('0x3a')]||'';_0xd0fd74[a5_0x1d97('0x38')][a5_0x1d97('0x3b')]=_0x19b6c1['body'][a5_0x1d97('0x3b')]||'';_0xd0fd74[a5_0x1d97('0x38')][a5_0x1d97('0x3c')]=_0x19b6c1[a5_0x1d97('0x29')][a5_0x1d97('0x3c')]||'';_0xd0fd74[a5_0x1d97('0x2f')](_0x438a5d=>{if(_0x438a5d){if(_0x438a5d[a5_0x1d97('0x3d')]===0x2af8){_0x19b6c1[a5_0x1d97('0x16')](a5_0x1d97('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x1c2e2b[a5_0x1d97('0xb')]('/account');}return _0x4fd03f(_0x438a5d);}_0x19b6c1[a5_0x1d97('0x16')]('success',{'msg':a5_0x1d97('0x3e')});_0x1c2e2b[a5_0x1d97('0xb')](a5_0x1d97('0x36'));});});};exports['postUpdatePassword']=(_0x2e85aa,_0xcbd0ef,_0x2f8f61)=>{_0x2e85aa['assert'](a5_0x1d97('0x2a'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x1d97('0x26')]({'min':0x4});_0x2e85aa[a5_0x1d97('0x10')]('confirmPassword',a5_0x1d97('0x3f'))[a5_0x1d97('0x28')](_0x2e85aa[a5_0x1d97('0x29')][a5_0x1d97('0x2a')]);const _0x492900=_0x2e85aa[a5_0x1d97('0x2b')]();if(_0x492900){_0x2e85aa['flash'](a5_0x1d97('0x17'),_0x492900);return _0xcbd0ef[a5_0x1d97('0xb')]('/account');}User_1[a5_0x1d97('0x19')]['findById'](_0x2e85aa['user']['id'],(_0x369b69,_0x9cab86)=>{if(_0x369b69){return _0x2f8f61(_0x369b69);}_0x9cab86[a5_0x1d97('0x2a')]=_0x2e85aa[a5_0x1d97('0x29')][a5_0x1d97('0x2a')];_0x9cab86[a5_0x1d97('0x2f')](_0x369b69=>{if(_0x369b69){return _0x2f8f61(_0x369b69);}_0x2e85aa[a5_0x1d97('0x16')](a5_0x1d97('0x1d'),{'msg':a5_0x1d97('0x40')});_0xcbd0ef[a5_0x1d97('0xb')](a5_0x1d97('0x36'));});});};exports[a5_0x1d97('0x41')]=(_0xbbe8fc,_0x46e9f4,_0x5416f8)=>{User_1[a5_0x1d97('0x19')][a5_0x1d97('0x42')]({'_id':_0xbbe8fc[a5_0x1d97('0xa')]['id']},_0x1e5805=>{if(_0x1e5805){return _0x5416f8(_0x1e5805);}_0xbbe8fc[a5_0x1d97('0x21')]();_0xbbe8fc[a5_0x1d97('0x16')](a5_0x1d97('0x43'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x46e9f4['redirect']('/');});};exports['getOauthUnlink']=(_0x4a7dc9,_0x58a1dd,_0x8b1fdb)=>{const _0x19b56b=_0x4a7dc9[a5_0x1d97('0x44')][a5_0x1d97('0x45')];User_1[a5_0x1d97('0x19')]['findById'](_0x4a7dc9[a5_0x1d97('0xa')]['id'],(_0x35e63c,_0x40e33d)=>{if(_0x35e63c){return _0x8b1fdb(_0x35e63c);}_0x40e33d[_0x19b56b]=undefined;_0x40e33d['tokens']=_0x40e33d[a5_0x1d97('0x46')][a5_0x1d97('0x47')](_0x2159aa=>_0x2159aa[a5_0x1d97('0x48')]!==_0x19b56b);_0x40e33d[a5_0x1d97('0x2f')](_0x35e63c=>{if(_0x35e63c){return _0x8b1fdb(_0x35e63c);}_0x4a7dc9['flash'](a5_0x1d97('0x43'),{'msg':_0x19b56b+a5_0x1d97('0x49')});_0x58a1dd['redirect'](a5_0x1d97('0x36'));});});};exports[a5_0x1d97('0x4a')]=(_0x4bb324,_0x2bd089,_0x8134cd)=>{if(_0x4bb324[a5_0x1d97('0x4b')]()){return _0x2bd089['redirect']('/');}User_1[a5_0x1d97('0x19')][a5_0x1d97('0x2c')]({'passwordResetToken':_0x4bb324[a5_0x1d97('0x44')][a5_0x1d97('0x4c')]})['where'](a5_0x1d97('0x4d'))['gt'](Date[a5_0x1d97('0x4e')]())[a5_0x1d97('0x4f')]((_0x57eb0c,_0x16951a)=>{if(_0x57eb0c){return _0x8134cd(_0x57eb0c);}if(!_0x16951a){_0x4bb324[a5_0x1d97('0x16')]('errors',{'msg':a5_0x1d97('0x50')});return _0x2bd089['redirect'](a5_0x1d97('0x51'));}_0x2bd089[a5_0x1d97('0xc')](a5_0x1d97('0x52'),{'title':a5_0x1d97('0x53')});});};exports[a5_0x1d97('0x54')]=(_0x18548e,_0x2334d4,_0x14dd27)=>{_0x18548e[a5_0x1d97('0x10')](a5_0x1d97('0x2a'),a5_0x1d97('0x55'))['len']({'min':0x4});_0x18548e[a5_0x1d97('0x10')](a5_0x1d97('0x56'),a5_0x1d97('0x57'))['equals'](_0x18548e[a5_0x1d97('0x29')]['password']);const _0x54d83d=_0x18548e['validationErrors']();if(_0x54d83d){_0x18548e[a5_0x1d97('0x16')](a5_0x1d97('0x17'),_0x54d83d);return _0x2334d4[a5_0x1d97('0xb')](a5_0x1d97('0x58'));}async_1['default']['waterfall']([function resetPassword(_0x4e3c3e){User_1[a5_0x1d97('0x19')][a5_0x1d97('0x2c')]({'passwordResetToken':_0x18548e[a5_0x1d97('0x44')][a5_0x1d97('0x4c')]})[a5_0x1d97('0x59')](a5_0x1d97('0x4d'))['gt'](Date[a5_0x1d97('0x4e')]())[a5_0x1d97('0x4f')]((_0x4eb780,_0x16dfdc)=>{if(_0x4eb780){return _0x14dd27(_0x4eb780);}if(!_0x16dfdc){_0x18548e['flash'](a5_0x1d97('0x17'),{'msg':a5_0x1d97('0x50')});return _0x2334d4['redirect'](a5_0x1d97('0x58'));}_0x16dfdc[a5_0x1d97('0x2a')]=_0x18548e[a5_0x1d97('0x29')]['password'];_0x16dfdc[a5_0x1d97('0x5a')]=undefined;_0x16dfdc[a5_0x1d97('0x4d')]=undefined;_0x16dfdc[a5_0x1d97('0x2f')](_0x4eb780=>{if(_0x4eb780){return _0x14dd27(_0x4eb780);}_0x18548e[a5_0x1d97('0x1c')](_0x16dfdc,_0x4eb780=>{_0x4e3c3e(_0x4eb780,_0x16dfdc);});});});},function sendResetPasswordEmail(_0x53f55b,_0x4aa337){const _0x452ca5=nodemailer_1['default'][a5_0x1d97('0x5b')]({'service':a5_0x1d97('0x5c'),'auth':{'user':process[a5_0x1d97('0x5d')][a5_0x1d97('0x5e')],'pass':process['env'][a5_0x1d97('0x5f')]}});const _0x507cce={'to':_0x53f55b[a5_0x1d97('0x11')],'from':a5_0x1d97('0x60'),'subject':a5_0x1d97('0x61'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x53f55b[a5_0x1d97('0x11')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x452ca5[a5_0x1d97('0x62')](_0x507cce,_0x4e1eda=>{_0x18548e['flash'](a5_0x1d97('0x1d'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x4aa337(_0x4e1eda);});}],_0x141137=>{if(_0x141137){return _0x14dd27(_0x141137);}_0x2334d4[a5_0x1d97('0xb')]('/');});};exports[a5_0x1d97('0x63')]=(_0x50f4fc,_0x4181b9)=>{if(_0x50f4fc[a5_0x1d97('0x4b')]()){return _0x4181b9[a5_0x1d97('0xb')]('/');}_0x4181b9[a5_0x1d97('0xc')](a5_0x1d97('0x64'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x2e1a96,_0x211526,_0x5516c4)=>{_0x2e1a96['assert']('email',a5_0x1d97('0x34'))['isEmail']();_0x2e1a96['sanitize'](a5_0x1d97('0x11'))[a5_0x1d97('0x35')]({'gmail_remove_dots':![]});const _0x589348=_0x2e1a96[a5_0x1d97('0x2b')]();if(_0x589348){_0x2e1a96[a5_0x1d97('0x16')](a5_0x1d97('0x17'),_0x589348);return _0x211526['redirect'](a5_0x1d97('0x51'));}async_1['default'][a5_0x1d97('0x65')]([function createRandomToken(_0x18d1a0){crypto_1['default'][a5_0x1d97('0x66')](0x10,(_0x27da1a,_0x5c1746)=>{const _0x2bd6d1=_0x5c1746[a5_0x1d97('0x67')](a5_0x1d97('0x68'));_0x18d1a0(_0x27da1a,_0x2bd6d1);});},function setRandomToken(_0x1d9536,_0x5ce70b){User_1[a5_0x1d97('0x19')]['findOne']({'email':_0x2e1a96[a5_0x1d97('0x29')][a5_0x1d97('0x11')]},(_0xf6c8aa,_0x5ad6f4)=>{if(_0xf6c8aa){return _0x5ce70b(_0xf6c8aa);}if(!_0x5ad6f4){_0x2e1a96[a5_0x1d97('0x16')](a5_0x1d97('0x17'),{'msg':a5_0x1d97('0x69')});return _0x211526[a5_0x1d97('0xb')](a5_0x1d97('0x51'));}_0x5ad6f4[a5_0x1d97('0x5a')]=_0x1d9536;_0x5ad6f4[a5_0x1d97('0x4d')]=Date['now']()+0x36ee80;_0x5ad6f4['save'](_0xf6c8aa=>{_0x5ce70b(_0xf6c8aa,_0x1d9536,_0x5ad6f4);});});},function sendForgotPasswordEmail(_0x3c7874,_0x13254e,_0x171403){const _0x1e2126=nodemailer_1['default'][a5_0x1d97('0x5b')]({'service':a5_0x1d97('0x5c'),'auth':{'user':process[a5_0x1d97('0x5d')]['SENDGRID_USER'],'pass':process[a5_0x1d97('0x5d')][a5_0x1d97('0x5f')]}});const _0x4b1c12={'to':_0x13254e[a5_0x1d97('0x11')],'from':a5_0x1d97('0x6a'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x1d97('0x6b')+_0x2e1a96[a5_0x1d97('0x6c')]['host']+a5_0x1d97('0x6d')+_0x3c7874+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x1e2126['sendMail'](_0x4b1c12,_0x45c9ef=>{_0x2e1a96[a5_0x1d97('0x16')](a5_0x1d97('0x43'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x13254e[a5_0x1d97('0x11')]+a5_0x1d97('0x6e')});_0x171403(_0x45c9ef);});}],_0x56d1d9=>{if(_0x56d1d9){return _0x5516c4(_0x56d1d9);}_0x211526[a5_0x1d97('0xb')](a5_0x1d97('0x51'));});};