var a5_0x6dae=['Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','errors','authenticate','local','message','redirect','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','user','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','validationErrors','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','render','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','body','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','Password\x20has\x20been\x20changed.','info','getOauthUnlink','params','provider','tokens','\x20account\x20has\x20been\x20unlinked.','getReset','token','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','confirm','Passwords\x20must\x20match.','back','waterfall','where','createTransport','env','SENDGRID_USER','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','Forgot\x20Password','randomBytes','toString','hex','passwordResetToken','SendGrid','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator','getLogin','account/login','Login','postLogin','assert','email'];(function(_0x4116fe,_0x16d32f){var _0x1186bf=function(_0x44e24f){while(--_0x44e24f){_0x4116fe['push'](_0x4116fe['shift']());}};_0x1186bf(++_0x16d32f);}(a5_0x6dae,0x1a2));var a5_0x444b=function(_0x290936,_0x22857d){_0x290936=_0x290936-0x0;var _0xe72197=a5_0x6dae[_0x290936];return _0xe72197;};'use strict';var __importDefault=this&&this[a5_0x444b('0x0')]||function(_0x71a2cc){return _0x71a2cc&&_0x71a2cc[a5_0x444b('0x1')]?_0x71a2cc:{'default':_0x71a2cc};};Object[a5_0x444b('0x2')](exports,a5_0x444b('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x444b('0x3')));const crypto_1=__importDefault(require(a5_0x444b('0x4')));const nodemailer_1=__importDefault(require(a5_0x444b('0x5')));const passport_1=__importDefault(require(a5_0x444b('0x6')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x444b('0x7'));exports[a5_0x444b('0x8')]=(_0x272c05,_0x8c30f6)=>{if(_0x272c05['user']){return _0x8c30f6['redirect']('/');}_0x8c30f6['render'](a5_0x444b('0x9'),{'title':a5_0x444b('0xa')});};exports[a5_0x444b('0xb')]=(_0x4ac653,_0x166a58,_0x12f62f)=>{_0x4ac653[a5_0x444b('0xc')](a5_0x444b('0xd'),a5_0x444b('0xe'))[a5_0x444b('0xf')]();_0x4ac653[a5_0x444b('0xc')](a5_0x444b('0x10'),a5_0x444b('0x11'))[a5_0x444b('0x12')]();_0x4ac653[a5_0x444b('0x13')](a5_0x444b('0xd'))[a5_0x444b('0x14')]({'gmail_remove_dots':![]});const _0x516d1a=_0x4ac653['validationErrors']();if(_0x516d1a){_0x4ac653[a5_0x444b('0x15')](a5_0x444b('0x16'),_0x516d1a);return _0x166a58['redirect']('/login');}passport_1['default'][a5_0x444b('0x17')](a5_0x444b('0x18'),(_0x35936d,_0x12429c,_0x33816e)=>{if(_0x35936d){return _0x12f62f(_0x35936d);}if(!_0x12429c){_0x4ac653[a5_0x444b('0x15')](a5_0x444b('0x16'),_0x33816e[a5_0x444b('0x19')]);return _0x166a58[a5_0x444b('0x1a')]('/login');}_0x4ac653[a5_0x444b('0x1b')](_0x12429c,_0x35936d=>{if(_0x35936d){return _0x12f62f(_0x35936d);}_0x4ac653[a5_0x444b('0x15')](a5_0x444b('0x1c'),{'msg':a5_0x444b('0x1d')});_0x166a58[a5_0x444b('0x1a')](_0x4ac653['session'][a5_0x444b('0x1e')]||'/');});})(_0x4ac653,_0x166a58,_0x12f62f);};exports[a5_0x444b('0x1f')]=(_0x477d9b,_0xd398ce)=>{_0x477d9b['logout']();_0xd398ce[a5_0x444b('0x1a')]('/');};exports['getSignup']=(_0x502694,_0x47972a)=>{if(_0x502694[a5_0x444b('0x20')]){return _0x47972a['redirect']('/');}_0x47972a['render'](a5_0x444b('0x21'),{'title':a5_0x444b('0x22')});};exports[a5_0x444b('0x23')]=(_0x37f493,_0xf8b544,_0x10811d)=>{_0x37f493[a5_0x444b('0xc')](a5_0x444b('0xd'),a5_0x444b('0xe'))['isEmail']();_0x37f493[a5_0x444b('0xc')](a5_0x444b('0x10'),a5_0x444b('0x24'))['len']({'min':0x4});_0x37f493[a5_0x444b('0xc')]('confirmPassword',a5_0x444b('0x25'))[a5_0x444b('0x26')](_0x37f493['body']['password']);_0x37f493[a5_0x444b('0x13')]('email')[a5_0x444b('0x14')]({'gmail_remove_dots':![]});const _0x19f34e=_0x37f493[a5_0x444b('0x27')]();if(_0x19f34e){_0x37f493['flash'](a5_0x444b('0x16'),_0x19f34e);return _0xf8b544['redirect'](a5_0x444b('0x28'));}const _0x1590e6=new User_1['default']({});User_1[a5_0x444b('0x29')][a5_0x444b('0x2a')]({'email':_0x37f493['body'][a5_0x444b('0xd')]},(_0x5b03a7,_0x1fe1cb)=>{if(_0x5b03a7){return _0x10811d(_0x5b03a7);}if(_0x1fe1cb){_0x37f493['flash']('errors',{'msg':a5_0x444b('0x2b')});return _0xf8b544[a5_0x444b('0x1a')](a5_0x444b('0x28'));}_0x1590e6[a5_0x444b('0x2c')](_0x5b03a7=>{if(_0x5b03a7){return _0x10811d(_0x5b03a7);}_0x37f493['logIn'](_0x1590e6,_0x5b03a7=>{if(_0x5b03a7){return _0x10811d(_0x5b03a7);}_0xf8b544['redirect']('/');});});});};exports['getAccount']=(_0x3582c9,_0x35af37)=>{_0x35af37[a5_0x444b('0x2d')](a5_0x444b('0x2e'),{'title':a5_0x444b('0x2f')});};exports[a5_0x444b('0x30')]=(_0x41f53e,_0x334874,_0x101b24)=>{_0x41f53e[a5_0x444b('0xc')]('email',a5_0x444b('0x31'))[a5_0x444b('0xf')]();_0x41f53e[a5_0x444b('0x13')](a5_0x444b('0xd'))[a5_0x444b('0x14')]({'gmail_remove_dots':![]});const _0xb9be99=_0x41f53e[a5_0x444b('0x27')]();if(_0xb9be99){_0x41f53e['flash'](a5_0x444b('0x16'),_0xb9be99);return _0x334874[a5_0x444b('0x1a')](a5_0x444b('0x32'));}User_1[a5_0x444b('0x29')][a5_0x444b('0x33')](_0x41f53e[a5_0x444b('0x20')]['id'],(_0x574a35,_0x30ab30)=>{if(_0x574a35){return _0x101b24(_0x574a35);}_0x30ab30[a5_0x444b('0xd')]=_0x41f53e[a5_0x444b('0x34')][a5_0x444b('0xd')]||'';_0x30ab30[a5_0x444b('0x35')][a5_0x444b('0x36')]=_0x41f53e[a5_0x444b('0x34')]['name']||'';_0x30ab30[a5_0x444b('0x35')][a5_0x444b('0x37')]=_0x41f53e['body'][a5_0x444b('0x37')]||'';_0x30ab30[a5_0x444b('0x35')]['location']=_0x41f53e['body'][a5_0x444b('0x38')]||'';_0x30ab30[a5_0x444b('0x35')][a5_0x444b('0x39')]=_0x41f53e[a5_0x444b('0x34')]['website']||'';_0x30ab30[a5_0x444b('0x2c')](_0x574a35=>{if(_0x574a35){if(_0x574a35['code']===0x2af8){_0x41f53e[a5_0x444b('0x15')](a5_0x444b('0x16'),{'msg':a5_0x444b('0x3a')});return _0x334874[a5_0x444b('0x1a')](a5_0x444b('0x32'));}return _0x101b24(_0x574a35);}_0x41f53e[a5_0x444b('0x15')](a5_0x444b('0x1c'),{'msg':a5_0x444b('0x3b')});_0x334874[a5_0x444b('0x1a')]('/account');});});};exports[a5_0x444b('0x3c')]=(_0x772286,_0x3b7a24,_0x1c53c4)=>{_0x772286['assert']('password',a5_0x444b('0x24'))[a5_0x444b('0x3d')]({'min':0x4});_0x772286[a5_0x444b('0xc')]('confirmPassword',a5_0x444b('0x25'))['equals'](_0x772286[a5_0x444b('0x34')][a5_0x444b('0x10')]);const _0x57c1bf=_0x772286[a5_0x444b('0x27')]();if(_0x57c1bf){_0x772286[a5_0x444b('0x15')](a5_0x444b('0x16'),_0x57c1bf);return _0x3b7a24[a5_0x444b('0x1a')](a5_0x444b('0x32'));}User_1[a5_0x444b('0x29')][a5_0x444b('0x33')](_0x772286[a5_0x444b('0x20')]['id'],(_0xd30789,_0xfc7eb1)=>{if(_0xd30789){return _0x1c53c4(_0xd30789);}_0xfc7eb1[a5_0x444b('0x10')]=_0x772286['body']['password'];_0xfc7eb1[a5_0x444b('0x2c')](_0xd30789=>{if(_0xd30789){return _0x1c53c4(_0xd30789);}_0x772286[a5_0x444b('0x15')](a5_0x444b('0x1c'),{'msg':a5_0x444b('0x3e')});_0x3b7a24[a5_0x444b('0x1a')](a5_0x444b('0x32'));});});};exports['postDeleteAccount']=(_0x1c9535,_0x52f709,_0x41fff0)=>{User_1[a5_0x444b('0x29')]['remove']({'_id':_0x1c9535[a5_0x444b('0x20')]['id']},_0x21131a=>{if(_0x21131a){return _0x41fff0(_0x21131a);}_0x1c9535[a5_0x444b('0x1f')]();_0x1c9535[a5_0x444b('0x15')](a5_0x444b('0x3f'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x52f709['redirect']('/');});};exports[a5_0x444b('0x40')]=(_0x42d54c,_0x206a6d,_0x5b0d2c)=>{const _0x331a4e=_0x42d54c[a5_0x444b('0x41')][a5_0x444b('0x42')];User_1[a5_0x444b('0x29')]['findById'](_0x42d54c[a5_0x444b('0x20')]['id'],(_0x251976,_0xd54477)=>{if(_0x251976){return _0x5b0d2c(_0x251976);}_0xd54477[_0x331a4e]=undefined;_0xd54477['tokens']=_0xd54477[a5_0x444b('0x43')]['filter'](_0xb80d6a=>_0xb80d6a['kind']!==_0x331a4e);_0xd54477['save'](_0x251976=>{if(_0x251976){return _0x5b0d2c(_0x251976);}_0x42d54c[a5_0x444b('0x15')](a5_0x444b('0x3f'),{'msg':_0x331a4e+a5_0x444b('0x44')});_0x206a6d[a5_0x444b('0x1a')](a5_0x444b('0x32'));});});};exports[a5_0x444b('0x45')]=(_0x16da30,_0x3193f5,_0x411b72)=>{if(_0x16da30['isAuthenticated']()){return _0x3193f5[a5_0x444b('0x1a')]('/');}User_1['default'][a5_0x444b('0x2a')]({'passwordResetToken':_0x16da30[a5_0x444b('0x41')][a5_0x444b('0x46')]})['where'](a5_0x444b('0x47'))['gt'](Date[a5_0x444b('0x48')]())['exec']((_0x1e54d5,_0x391d23)=>{if(_0x1e54d5){return _0x411b72(_0x1e54d5);}if(!_0x391d23){_0x16da30[a5_0x444b('0x15')](a5_0x444b('0x16'),{'msg':a5_0x444b('0x49')});return _0x3193f5['redirect'](a5_0x444b('0x4a'));}_0x3193f5['render'](a5_0x444b('0x4b'),{'title':'Password\x20Reset'});});};exports[a5_0x444b('0x4c')]=(_0x5992c8,_0x55e002,_0x5c8274)=>{_0x5992c8['assert'](a5_0x444b('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x444b('0x3d')]({'min':0x4});_0x5992c8['assert'](a5_0x444b('0x4d'),a5_0x444b('0x4e'))[a5_0x444b('0x26')](_0x5992c8[a5_0x444b('0x34')][a5_0x444b('0x10')]);const _0x199a0e=_0x5992c8[a5_0x444b('0x27')]();if(_0x199a0e){_0x5992c8[a5_0x444b('0x15')](a5_0x444b('0x16'),_0x199a0e);return _0x55e002['redirect'](a5_0x444b('0x4f'));}async_1[a5_0x444b('0x29')][a5_0x444b('0x50')]([function resetPassword(_0x30e4a8){User_1[a5_0x444b('0x29')][a5_0x444b('0x2a')]({'passwordResetToken':_0x5992c8[a5_0x444b('0x41')][a5_0x444b('0x46')]})[a5_0x444b('0x51')](a5_0x444b('0x47'))['gt'](Date[a5_0x444b('0x48')]())['exec']((_0x1a3317,_0x1a6adb)=>{if(_0x1a3317){return _0x5c8274(_0x1a3317);}if(!_0x1a6adb){_0x5992c8[a5_0x444b('0x15')](a5_0x444b('0x16'),{'msg':a5_0x444b('0x49')});return _0x55e002[a5_0x444b('0x1a')](a5_0x444b('0x4f'));}_0x1a6adb[a5_0x444b('0x10')]=_0x5992c8['body'][a5_0x444b('0x10')];_0x1a6adb['passwordResetToken']=undefined;_0x1a6adb[a5_0x444b('0x47')]=undefined;_0x1a6adb[a5_0x444b('0x2c')](_0x1a3317=>{if(_0x1a3317){return _0x5c8274(_0x1a3317);}_0x5992c8['logIn'](_0x1a6adb,_0x1a3317=>{_0x30e4a8(_0x1a3317,_0x1a6adb);});});});},function sendResetPasswordEmail(_0x8f5e46,_0x41940b){const _0x39fc04=nodemailer_1['default'][a5_0x444b('0x52')]({'service':'SendGrid','auth':{'user':process[a5_0x444b('0x53')][a5_0x444b('0x54')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x3a3a35={'to':_0x8f5e46['email'],'from':'express-ts@starter.com','subject':a5_0x444b('0x55'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x8f5e46[a5_0x444b('0xd')]+a5_0x444b('0x56')};_0x39fc04[a5_0x444b('0x57')](_0x3a3a35,_0x21d111=>{_0x5992c8['flash'](a5_0x444b('0x1c'),{'msg':a5_0x444b('0x58')});_0x41940b(_0x21d111);});}],_0x2d422b=>{if(_0x2d422b){return _0x5c8274(_0x2d422b);}_0x55e002[a5_0x444b('0x1a')]('/');});};exports[a5_0x444b('0x59')]=(_0x2d4694,_0x1c8bfd)=>{if(_0x2d4694[a5_0x444b('0x5a')]()){return _0x1c8bfd['redirect']('/');}_0x1c8bfd['render'](a5_0x444b('0x5b'),{'title':a5_0x444b('0x5c')});};exports['postForgot']=(_0x5924a3,_0x51367e,_0x4607d0)=>{_0x5924a3[a5_0x444b('0xc')](a5_0x444b('0xd'),a5_0x444b('0x31'))['isEmail']();_0x5924a3[a5_0x444b('0x13')](a5_0x444b('0xd'))[a5_0x444b('0x14')]({'gmail_remove_dots':![]});const _0x3647b0=_0x5924a3[a5_0x444b('0x27')]();if(_0x3647b0){_0x5924a3['flash']('errors',_0x3647b0);return _0x51367e[a5_0x444b('0x1a')](a5_0x444b('0x4a'));}async_1[a5_0x444b('0x29')]['waterfall']([function createRandomToken(_0x23a3e2){crypto_1['default'][a5_0x444b('0x5d')](0x10,(_0x29dfff,_0x417b8e)=>{const _0x2ddaac=_0x417b8e[a5_0x444b('0x5e')](a5_0x444b('0x5f'));_0x23a3e2(_0x29dfff,_0x2ddaac);});},function setRandomToken(_0x500aa1,_0x54e8eb){User_1['default'][a5_0x444b('0x2a')]({'email':_0x5924a3[a5_0x444b('0x34')][a5_0x444b('0xd')]},(_0x2daeb2,_0x961a12)=>{if(_0x2daeb2){return _0x54e8eb(_0x2daeb2);}if(!_0x961a12){_0x5924a3[a5_0x444b('0x15')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x51367e['redirect'](a5_0x444b('0x4a'));}_0x961a12[a5_0x444b('0x60')]=_0x500aa1;_0x961a12[a5_0x444b('0x47')]=Date[a5_0x444b('0x48')]()+0x36ee80;_0x961a12[a5_0x444b('0x2c')](_0x2daeb2=>{_0x54e8eb(_0x2daeb2,_0x500aa1,_0x961a12);});});},function sendForgotPasswordEmail(_0x2e770a,_0x193580,_0xa7532e){const _0x190c2f=nodemailer_1['default'][a5_0x444b('0x52')]({'service':a5_0x444b('0x61'),'auth':{'user':process[a5_0x444b('0x53')][a5_0x444b('0x54')],'pass':process[a5_0x444b('0x53')][a5_0x444b('0x62')]}});const _0xeefb21={'to':_0x193580[a5_0x444b('0xd')],'from':a5_0x444b('0x63'),'subject':a5_0x444b('0x64'),'text':a5_0x444b('0x65')+_0x5924a3[a5_0x444b('0x66')][a5_0x444b('0x67')]+a5_0x444b('0x68')+_0x2e770a+a5_0x444b('0x69')};_0x190c2f['sendMail'](_0xeefb21,_0x173574=>{_0x5924a3[a5_0x444b('0x15')](a5_0x444b('0x3f'),{'msg':a5_0x444b('0x6a')+_0x193580[a5_0x444b('0xd')]+a5_0x444b('0x6b')});_0xa7532e(_0x173574);});}],_0x3fd214=>{if(_0x3fd214){return _0x4607d0(_0x3fd214);}_0x51367e[a5_0x444b('0x1a')](a5_0x444b('0x4a'));});};