var a5_0x555e=['assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','/login','authenticate','flash','message','redirect','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','equals','body','password','/signup','default','findOne','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','findById','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','params','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','back','waterfall','createTransport','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','express-validator','user','render','Login','postLogin'];(function(_0x2b33f8,_0x302bab){var _0x2c0c53=function(_0xbe0a54){while(--_0xbe0a54){_0x2b33f8['push'](_0x2b33f8['shift']());}};_0x2c0c53(++_0x302bab);}(a5_0x555e,0xbd));var a5_0x207b=function(_0x2d6ab6,_0x4e8460){_0x2d6ab6=_0x2d6ab6-0x0;var _0x567612=a5_0x555e[_0x2d6ab6];return _0x567612;};'use strict';var __importDefault=this&&this[a5_0x207b('0x0')]||function(_0x4c8462){return _0x4c8462&&_0x4c8462[a5_0x207b('0x1')]?_0x4c8462:{'default':_0x4c8462};};Object[a5_0x207b('0x2')](exports,a5_0x207b('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x207b('0x3')));const nodemailer_1=__importDefault(require(a5_0x207b('0x4')));const passport_1=__importDefault(require(a5_0x207b('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x207b('0x6'));exports['getLogin']=(_0x59477d,_0x405b95)=>{if(_0x59477d[a5_0x207b('0x7')]){return _0x405b95['redirect']('/');}_0x405b95[a5_0x207b('0x8')]('account/login',{'title':a5_0x207b('0x9')});};exports[a5_0x207b('0xa')]=(_0x4e2108,_0x4b22ae,_0x155f46)=>{_0x4e2108[a5_0x207b('0xb')](a5_0x207b('0xc'),a5_0x207b('0xd'))[a5_0x207b('0xe')]();_0x4e2108['assert']('password',a5_0x207b('0xf'))[a5_0x207b('0x10')]();_0x4e2108[a5_0x207b('0x11')]('email')[a5_0x207b('0x12')]({'gmail_remove_dots':![]});const _0x49ca87=_0x4e2108[a5_0x207b('0x13')]();if(_0x49ca87){_0x4e2108['flash'](a5_0x207b('0x14'),_0x49ca87);return _0x4b22ae['redirect'](a5_0x207b('0x15'));}passport_1['default'][a5_0x207b('0x16')]('local',(_0x4706b2,_0x207298,_0xfd78d)=>{if(_0x4706b2){return _0x155f46(_0x4706b2);}if(!_0x207298){_0x4e2108[a5_0x207b('0x17')](a5_0x207b('0x14'),_0xfd78d[a5_0x207b('0x18')]);return _0x4b22ae[a5_0x207b('0x19')](a5_0x207b('0x15'));}_0x4e2108[a5_0x207b('0x1a')](_0x207298,_0x4706b2=>{if(_0x4706b2){return _0x155f46(_0x4706b2);}_0x4e2108[a5_0x207b('0x17')](a5_0x207b('0x1b'),{'msg':a5_0x207b('0x1c')});_0x4b22ae[a5_0x207b('0x19')](_0x4e2108[a5_0x207b('0x1d')]['returnTo']||'/');});})(_0x4e2108,_0x4b22ae,_0x155f46);};exports[a5_0x207b('0x1e')]=(_0x5ef478,_0x4f0b17)=>{_0x5ef478['logout']();_0x4f0b17[a5_0x207b('0x19')]('/');};exports[a5_0x207b('0x1f')]=(_0x1ced10,_0x12e8a3)=>{if(_0x1ced10['user']){return _0x12e8a3[a5_0x207b('0x19')]('/');}_0x12e8a3[a5_0x207b('0x8')](a5_0x207b('0x20'),{'title':a5_0x207b('0x21')});};exports[a5_0x207b('0x22')]=(_0x5f2313,_0x48ad51,_0x3a0939)=>{_0x5f2313['assert'](a5_0x207b('0xc'),'Email\x20is\x20not\x20valid')[a5_0x207b('0xe')]();_0x5f2313[a5_0x207b('0xb')]('password',a5_0x207b('0x23'))['len']({'min':0x4});_0x5f2313[a5_0x207b('0xb')](a5_0x207b('0x24'),'Passwords\x20do\x20not\x20match')[a5_0x207b('0x25')](_0x5f2313[a5_0x207b('0x26')][a5_0x207b('0x27')]);_0x5f2313['sanitize'](a5_0x207b('0xc'))[a5_0x207b('0x12')]({'gmail_remove_dots':![]});const _0x27d03b=_0x5f2313[a5_0x207b('0x13')]();if(_0x27d03b){_0x5f2313[a5_0x207b('0x17')](a5_0x207b('0x14'),_0x27d03b);return _0x48ad51[a5_0x207b('0x19')](a5_0x207b('0x28'));}const _0x1456b4=new User_1[(a5_0x207b('0x29'))]({});User_1[a5_0x207b('0x29')][a5_0x207b('0x2a')]({'email':_0x5f2313[a5_0x207b('0x26')]['email']},(_0x4c6af7,_0x345bc3)=>{if(_0x4c6af7){return _0x3a0939(_0x4c6af7);}if(_0x345bc3){_0x5f2313[a5_0x207b('0x17')](a5_0x207b('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x48ad51[a5_0x207b('0x19')](a5_0x207b('0x28'));}_0x1456b4[a5_0x207b('0x2b')](_0x4c6af7=>{if(_0x4c6af7){return _0x3a0939(_0x4c6af7);}_0x5f2313[a5_0x207b('0x1a')](_0x1456b4,_0x4c6af7=>{if(_0x4c6af7){return _0x3a0939(_0x4c6af7);}_0x48ad51[a5_0x207b('0x19')]('/');});});});};exports['getAccount']=(_0xe76676,_0x13c9b9)=>{_0x13c9b9[a5_0x207b('0x8')](a5_0x207b('0x2c'),{'title':a5_0x207b('0x2d')});};exports[a5_0x207b('0x2e')]=(_0x39df3a,_0x4f6b7b,_0x5b992a)=>{_0x39df3a['assert'](a5_0x207b('0xc'),a5_0x207b('0x2f'))[a5_0x207b('0xe')]();_0x39df3a[a5_0x207b('0x11')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x3ebeab=_0x39df3a[a5_0x207b('0x13')]();if(_0x3ebeab){_0x39df3a[a5_0x207b('0x17')](a5_0x207b('0x14'),_0x3ebeab);return _0x4f6b7b[a5_0x207b('0x19')]('/account');}User_1[a5_0x207b('0x29')]['findById'](_0x39df3a[a5_0x207b('0x7')]['id'],(_0x4ade8c,_0x445b67)=>{if(_0x4ade8c){return _0x5b992a(_0x4ade8c);}_0x445b67['email']=_0x39df3a[a5_0x207b('0x26')][a5_0x207b('0xc')]||'';_0x445b67[a5_0x207b('0x30')]['name']=_0x39df3a[a5_0x207b('0x26')]['name']||'';_0x445b67[a5_0x207b('0x30')][a5_0x207b('0x31')]=_0x39df3a[a5_0x207b('0x26')]['gender']||'';_0x445b67[a5_0x207b('0x30')][a5_0x207b('0x32')]=_0x39df3a[a5_0x207b('0x26')]['location']||'';_0x445b67[a5_0x207b('0x30')][a5_0x207b('0x33')]=_0x39df3a[a5_0x207b('0x26')]['website']||'';_0x445b67[a5_0x207b('0x2b')](_0x4ade8c=>{if(_0x4ade8c){if(_0x4ade8c['code']===0x2af8){_0x39df3a[a5_0x207b('0x17')](a5_0x207b('0x14'),{'msg':a5_0x207b('0x34')});return _0x4f6b7b[a5_0x207b('0x19')](a5_0x207b('0x35'));}return _0x5b992a(_0x4ade8c);}_0x39df3a[a5_0x207b('0x17')](a5_0x207b('0x1b'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x4f6b7b[a5_0x207b('0x19')]('/account');});});};exports['postUpdatePassword']=(_0x38fff9,_0xb2c8cc,_0x467f71)=>{_0x38fff9[a5_0x207b('0xb')](a5_0x207b('0x27'),a5_0x207b('0x23'))['len']({'min':0x4});_0x38fff9['assert'](a5_0x207b('0x24'),'Passwords\x20do\x20not\x20match')['equals'](_0x38fff9[a5_0x207b('0x26')][a5_0x207b('0x27')]);const _0x3648e0=_0x38fff9[a5_0x207b('0x13')]();if(_0x3648e0){_0x38fff9['flash'](a5_0x207b('0x14'),_0x3648e0);return _0xb2c8cc[a5_0x207b('0x19')](a5_0x207b('0x35'));}User_1[a5_0x207b('0x29')][a5_0x207b('0x36')](_0x38fff9[a5_0x207b('0x7')]['id'],(_0xb1938a,_0x5a60e6)=>{if(_0xb1938a){return _0x467f71(_0xb1938a);}_0x5a60e6[a5_0x207b('0x27')]=_0x38fff9[a5_0x207b('0x26')][a5_0x207b('0x27')];_0x5a60e6[a5_0x207b('0x2b')](_0xb1938a=>{if(_0xb1938a){return _0x467f71(_0xb1938a);}_0x38fff9[a5_0x207b('0x17')](a5_0x207b('0x1b'),{'msg':'Password\x20has\x20been\x20changed.'});_0xb2c8cc[a5_0x207b('0x19')](a5_0x207b('0x35'));});});};exports[a5_0x207b('0x37')]=(_0x3ca3dd,_0x285274,_0x3fa3be)=>{User_1[a5_0x207b('0x29')]['remove']({'_id':_0x3ca3dd[a5_0x207b('0x7')]['id']},_0x515f66=>{if(_0x515f66){return _0x3fa3be(_0x515f66);}_0x3ca3dd[a5_0x207b('0x1e')]();_0x3ca3dd['flash'](a5_0x207b('0x38'),{'msg':a5_0x207b('0x39')});_0x285274[a5_0x207b('0x19')]('/');});};exports['getOauthUnlink']=(_0x290467,_0x2ccc94,_0xd4f904)=>{const _0x4a5a8d=_0x290467[a5_0x207b('0x3a')]['provider'];User_1[a5_0x207b('0x29')][a5_0x207b('0x36')](_0x290467[a5_0x207b('0x7')]['id'],(_0x167fac,_0xc62e9e)=>{if(_0x167fac){return _0xd4f904(_0x167fac);}_0xc62e9e[_0x4a5a8d]=undefined;_0xc62e9e[a5_0x207b('0x3b')]=_0xc62e9e[a5_0x207b('0x3b')][a5_0x207b('0x3c')](_0x90b1c=>_0x90b1c[a5_0x207b('0x3d')]!==_0x4a5a8d);_0xc62e9e[a5_0x207b('0x2b')](_0x167fac=>{if(_0x167fac){return _0xd4f904(_0x167fac);}_0x290467[a5_0x207b('0x17')](a5_0x207b('0x38'),{'msg':_0x4a5a8d+a5_0x207b('0x3e')});_0x2ccc94[a5_0x207b('0x19')](a5_0x207b('0x35'));});});};exports[a5_0x207b('0x3f')]=(_0x2fdbe5,_0x57084b,_0x50f894)=>{if(_0x2fdbe5[a5_0x207b('0x40')]()){return _0x57084b[a5_0x207b('0x19')]('/');}User_1[a5_0x207b('0x29')]['findOne']({'passwordResetToken':_0x2fdbe5['params'][a5_0x207b('0x41')]})['where'](a5_0x207b('0x42'))['gt'](Date[a5_0x207b('0x43')]())[a5_0x207b('0x44')]((_0x5dc643,_0x2251d9)=>{if(_0x5dc643){return _0x50f894(_0x5dc643);}if(!_0x2251d9){_0x2fdbe5[a5_0x207b('0x17')]('errors',{'msg':a5_0x207b('0x45')});return _0x57084b[a5_0x207b('0x19')](a5_0x207b('0x46'));}_0x57084b['render'](a5_0x207b('0x47'),{'title':a5_0x207b('0x48')});});};exports[a5_0x207b('0x49')]=(_0x2c5766,_0x3101ac,_0x390ba0)=>{_0x2c5766['assert']('password',a5_0x207b('0x4a'))[a5_0x207b('0x4b')]({'min':0x4});_0x2c5766['assert'](a5_0x207b('0x4c'),'Passwords\x20must\x20match.')['equals'](_0x2c5766[a5_0x207b('0x26')][a5_0x207b('0x27')]);const _0x337354=_0x2c5766[a5_0x207b('0x13')]();if(_0x337354){_0x2c5766[a5_0x207b('0x17')](a5_0x207b('0x14'),_0x337354);return _0x3101ac['redirect'](a5_0x207b('0x4d'));}async_1[a5_0x207b('0x29')][a5_0x207b('0x4e')]([function resetPassword(_0x930a07){User_1[a5_0x207b('0x29')]['findOne']({'passwordResetToken':_0x2c5766['params']['token']})['where']('passwordResetExpires')['gt'](Date[a5_0x207b('0x43')]())[a5_0x207b('0x44')]((_0x18ee30,_0x2988d0)=>{if(_0x18ee30){return _0x390ba0(_0x18ee30);}if(!_0x2988d0){_0x2c5766[a5_0x207b('0x17')](a5_0x207b('0x14'),{'msg':a5_0x207b('0x45')});return _0x3101ac['redirect'](a5_0x207b('0x4d'));}_0x2988d0['password']=_0x2c5766[a5_0x207b('0x26')][a5_0x207b('0x27')];_0x2988d0['passwordResetToken']=undefined;_0x2988d0['passwordResetExpires']=undefined;_0x2988d0[a5_0x207b('0x2b')](_0x18ee30=>{if(_0x18ee30){return _0x390ba0(_0x18ee30);}_0x2c5766[a5_0x207b('0x1a')](_0x2988d0,_0x18ee30=>{_0x930a07(_0x18ee30,_0x2988d0);});});});},function sendResetPasswordEmail(_0x37ddfa,_0x5476ca){const _0x2196d3=nodemailer_1[a5_0x207b('0x29')][a5_0x207b('0x4f')]({'service':a5_0x207b('0x50'),'auth':{'user':process['env'][a5_0x207b('0x51')],'pass':process[a5_0x207b('0x52')][a5_0x207b('0x53')]}});const _0x23c608={'to':_0x37ddfa['email'],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x207b('0x54')+_0x37ddfa[a5_0x207b('0xc')]+a5_0x207b('0x55')};_0x2196d3[a5_0x207b('0x56')](_0x23c608,_0x116a1d=>{_0x2c5766['flash'](a5_0x207b('0x1b'),{'msg':a5_0x207b('0x57')});_0x5476ca(_0x116a1d);});}],_0x538236=>{if(_0x538236){return _0x390ba0(_0x538236);}_0x3101ac[a5_0x207b('0x19')]('/');});};exports[a5_0x207b('0x58')]=(_0x186869,_0x66098e)=>{if(_0x186869[a5_0x207b('0x40')]()){return _0x66098e['redirect']('/');}_0x66098e[a5_0x207b('0x8')](a5_0x207b('0x59'),{'title':a5_0x207b('0x5a')});};exports[a5_0x207b('0x5b')]=(_0x437736,_0x268724,_0x172933)=>{_0x437736[a5_0x207b('0xb')](a5_0x207b('0xc'),a5_0x207b('0x2f'))[a5_0x207b('0xe')]();_0x437736[a5_0x207b('0x11')](a5_0x207b('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x7d9994=_0x437736[a5_0x207b('0x13')]();if(_0x7d9994){_0x437736['flash']('errors',_0x7d9994);return _0x268724['redirect'](a5_0x207b('0x46'));}async_1[a5_0x207b('0x29')][a5_0x207b('0x4e')]([function createRandomToken(_0x1f1108){crypto_1[a5_0x207b('0x29')][a5_0x207b('0x5c')](0x10,(_0x52a332,_0x349e86)=>{const _0x385321=_0x349e86['toString'](a5_0x207b('0x5d'));_0x1f1108(_0x52a332,_0x385321);});},function setRandomToken(_0x54c7d9,_0x161121){User_1[a5_0x207b('0x29')][a5_0x207b('0x2a')]({'email':_0x437736[a5_0x207b('0x26')][a5_0x207b('0xc')]},(_0x4aaa16,_0x1a1b40)=>{if(_0x4aaa16){return _0x161121(_0x4aaa16);}if(!_0x1a1b40){_0x437736[a5_0x207b('0x17')]('errors',{'msg':a5_0x207b('0x5e')});return _0x268724['redirect']('/forgot');}_0x1a1b40[a5_0x207b('0x5f')]=_0x54c7d9;_0x1a1b40[a5_0x207b('0x42')]=Date['now']()+0x36ee80;_0x1a1b40[a5_0x207b('0x2b')](_0x4aaa16=>{_0x161121(_0x4aaa16,_0x54c7d9,_0x1a1b40);});});},function sendForgotPasswordEmail(_0x6c766c,_0x5cac8a,_0xa773e6){const _0xed8e3f=nodemailer_1[a5_0x207b('0x29')][a5_0x207b('0x4f')]({'service':a5_0x207b('0x50'),'auth':{'user':process[a5_0x207b('0x52')][a5_0x207b('0x51')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x132ddb={'to':_0x5cac8a[a5_0x207b('0xc')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x437736['headers']['host']+a5_0x207b('0x60')+_0x6c766c+a5_0x207b('0x61')};_0xed8e3f[a5_0x207b('0x56')](_0x132ddb,_0x37ad5c=>{_0x437736[a5_0x207b('0x17')]('info',{'msg':a5_0x207b('0x62')+_0x5cac8a[a5_0x207b('0xc')]+a5_0x207b('0x63')});_0xa773e6(_0x37ad5c);});}],_0x544a19=>{if(_0x544a19){return _0x172933(_0x544a19);}_0x268724[a5_0x207b('0x19')](a5_0x207b('0x46'));});};