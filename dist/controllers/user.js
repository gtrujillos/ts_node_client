var a5_0x19a0=['Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetExpires','passwordResetToken','createTransport','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','SENDGRID_USER','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','async','crypto','passport','../models/User','express-validator','getLogin','user','redirect','render','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','flash','errors','/login','default','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','body','validationErrors','findOne','/signup','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','equals','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','tokens','filter','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','token','where','now','exec'];(function(_0x4b0c55,_0x4fd8fa){var _0x136ee1=function(_0x7d6c21){while(--_0x7d6c21){_0x4b0c55['push'](_0x4b0c55['shift']());}};_0x136ee1(++_0x4fd8fa);}(a5_0x19a0,0x1c0));var a5_0x18f5=function(_0x317374,_0x553b4a){_0x317374=_0x317374-0x0;var _0x5245e7=a5_0x19a0[_0x317374];return _0x5245e7;};'use strict';var __importDefault=this&&this[a5_0x18f5('0x0')]||function(_0x1d5b94){return _0x1d5b94&&_0x1d5b94[a5_0x18f5('0x1')]?_0x1d5b94:{'default':_0x1d5b94};};Object['defineProperty'](exports,a5_0x18f5('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x18f5('0x2')));const crypto_1=__importDefault(require(a5_0x18f5('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x18f5('0x4')));const User_1=__importDefault(require(a5_0x18f5('0x5')));const request=require(a5_0x18f5('0x6'));exports[a5_0x18f5('0x7')]=(_0x434ec8,_0x4fd355)=>{if(_0x434ec8[a5_0x18f5('0x8')]){return _0x4fd355[a5_0x18f5('0x9')]('/');}_0x4fd355[a5_0x18f5('0xa')]('account/login',{'title':'Login'});};exports['postLogin']=(_0x2ba59f,_0x23b386,_0x54488a)=>{_0x2ba59f[a5_0x18f5('0xb')](a5_0x18f5('0xc'),a5_0x18f5('0xd'))[a5_0x18f5('0xe')]();_0x2ba59f['assert'](a5_0x18f5('0xf'),a5_0x18f5('0x10'))['notEmpty']();_0x2ba59f[a5_0x18f5('0x11')](a5_0x18f5('0xc'))[a5_0x18f5('0x12')]({'gmail_remove_dots':![]});const _0x351312=_0x2ba59f['validationErrors']();if(_0x351312){_0x2ba59f[a5_0x18f5('0x13')](a5_0x18f5('0x14'),_0x351312);return _0x23b386[a5_0x18f5('0x9')](a5_0x18f5('0x15'));}passport_1[a5_0x18f5('0x16')]['authenticate'](a5_0x18f5('0x17'),(_0xf930b,_0x1aa98a,_0xf25686)=>{if(_0xf930b){return _0x54488a(_0xf930b);}if(!_0x1aa98a){_0x2ba59f[a5_0x18f5('0x13')](a5_0x18f5('0x14'),_0xf25686[a5_0x18f5('0x18')]);return _0x23b386[a5_0x18f5('0x9')](a5_0x18f5('0x15'));}_0x2ba59f[a5_0x18f5('0x19')](_0x1aa98a,_0xf930b=>{if(_0xf930b){return _0x54488a(_0xf930b);}_0x2ba59f[a5_0x18f5('0x13')](a5_0x18f5('0x1a'),{'msg':a5_0x18f5('0x1b')});_0x23b386[a5_0x18f5('0x9')](_0x2ba59f[a5_0x18f5('0x1c')][a5_0x18f5('0x1d')]||'/');});})(_0x2ba59f,_0x23b386,_0x54488a);};exports['logout']=(_0xbd3cbe,_0x587819)=>{_0xbd3cbe[a5_0x18f5('0x1e')]();_0x587819[a5_0x18f5('0x9')]('/');};exports['getSignup']=(_0x18c69b,_0x1e9901)=>{if(_0x18c69b[a5_0x18f5('0x8')]){return _0x1e9901[a5_0x18f5('0x9')]('/');}_0x1e9901['render'](a5_0x18f5('0x1f'),{'title':a5_0x18f5('0x20')});};exports['postSignup']=(_0x1ff636,_0x7610b6,_0x2d88f6)=>{_0x1ff636[a5_0x18f5('0xb')](a5_0x18f5('0xc'),a5_0x18f5('0xd'))[a5_0x18f5('0xe')]();_0x1ff636[a5_0x18f5('0xb')]('password',a5_0x18f5('0x21'))['len']({'min':0x4});_0x1ff636[a5_0x18f5('0xb')](a5_0x18f5('0x22'),a5_0x18f5('0x23'))['equals'](_0x1ff636[a5_0x18f5('0x24')][a5_0x18f5('0xf')]);_0x1ff636[a5_0x18f5('0x11')](a5_0x18f5('0xc'))[a5_0x18f5('0x12')]({'gmail_remove_dots':![]});const _0x61e158=_0x1ff636[a5_0x18f5('0x25')]();if(_0x61e158){_0x1ff636[a5_0x18f5('0x13')](a5_0x18f5('0x14'),_0x61e158);return _0x7610b6[a5_0x18f5('0x9')]('/signup');}const _0x1f5889=new User_1['default']({'email':_0x1ff636[a5_0x18f5('0x24')][a5_0x18f5('0xc')],'password':_0x1ff636['body']['password']});User_1['default'][a5_0x18f5('0x26')]({'email':_0x1ff636['body'][a5_0x18f5('0xc')]},(_0x4cc841,_0xd49dbd)=>{if(_0x4cc841){return _0x2d88f6(_0x4cc841);}if(_0xd49dbd){_0x1ff636['flash'](a5_0x18f5('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x7610b6['redirect'](a5_0x18f5('0x27'));}_0x1f5889[a5_0x18f5('0x28')](_0x4cc841=>{if(_0x4cc841){return _0x2d88f6(_0x4cc841);}_0x1ff636[a5_0x18f5('0x19')](_0x1f5889,_0x4cc841=>{if(_0x4cc841){return _0x2d88f6(_0x4cc841);}_0x7610b6[a5_0x18f5('0x9')]('/');});});});};exports['getAccount']=(_0x5ef94c,_0xa64738)=>{_0xa64738[a5_0x18f5('0xa')](a5_0x18f5('0x29'),{'title':a5_0x18f5('0x2a')});};exports[a5_0x18f5('0x2b')]=(_0x32c7a8,_0x2f5cbc,_0x42a7c3)=>{_0x32c7a8[a5_0x18f5('0xb')]('email',a5_0x18f5('0x2c'))['isEmail']();_0x32c7a8[a5_0x18f5('0x11')](a5_0x18f5('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x585389=_0x32c7a8[a5_0x18f5('0x25')]();if(_0x585389){_0x32c7a8[a5_0x18f5('0x13')]('errors',_0x585389);return _0x2f5cbc['redirect'](a5_0x18f5('0x2d'));}User_1[a5_0x18f5('0x16')]['findById'](_0x32c7a8[a5_0x18f5('0x8')]['id'],(_0x11f476,_0x3bc5f3)=>{if(_0x11f476){return _0x42a7c3(_0x11f476);}_0x3bc5f3[a5_0x18f5('0xc')]=_0x32c7a8[a5_0x18f5('0x24')][a5_0x18f5('0xc')]||'';_0x3bc5f3['profile'][a5_0x18f5('0x2e')]=_0x32c7a8[a5_0x18f5('0x24')]['name']||'';_0x3bc5f3[a5_0x18f5('0x2f')][a5_0x18f5('0x30')]=_0x32c7a8['body']['gender']||'';_0x3bc5f3[a5_0x18f5('0x2f')]['location']=_0x32c7a8[a5_0x18f5('0x24')][a5_0x18f5('0x31')]||'';_0x3bc5f3['profile'][a5_0x18f5('0x32')]=_0x32c7a8[a5_0x18f5('0x24')][a5_0x18f5('0x32')]||'';_0x3bc5f3[a5_0x18f5('0x28')](_0x11f476=>{if(_0x11f476){if(_0x11f476[a5_0x18f5('0x33')]===0x2af8){_0x32c7a8[a5_0x18f5('0x13')]('errors',{'msg':a5_0x18f5('0x34')});return _0x2f5cbc[a5_0x18f5('0x9')](a5_0x18f5('0x2d'));}return _0x42a7c3(_0x11f476);}_0x32c7a8[a5_0x18f5('0x13')](a5_0x18f5('0x1a'),{'msg':a5_0x18f5('0x35')});_0x2f5cbc[a5_0x18f5('0x9')](a5_0x18f5('0x2d'));});});};exports[a5_0x18f5('0x36')]=(_0x585304,_0x3de114,_0x15f6ba)=>{_0x585304['assert'](a5_0x18f5('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x585304[a5_0x18f5('0xb')](a5_0x18f5('0x22'),a5_0x18f5('0x23'))[a5_0x18f5('0x37')](_0x585304[a5_0x18f5('0x24')][a5_0x18f5('0xf')]);const _0x32967c=_0x585304[a5_0x18f5('0x25')]();if(_0x32967c){_0x585304[a5_0x18f5('0x13')](a5_0x18f5('0x14'),_0x32967c);return _0x3de114[a5_0x18f5('0x9')]('/account');}User_1[a5_0x18f5('0x16')][a5_0x18f5('0x38')](_0x585304[a5_0x18f5('0x8')]['id'],(_0xd24926,_0x2f650b)=>{if(_0xd24926){return _0x15f6ba(_0xd24926);}_0x2f650b['password']=_0x585304[a5_0x18f5('0x24')][a5_0x18f5('0xf')];_0x2f650b[a5_0x18f5('0x28')](_0xd24926=>{if(_0xd24926){return _0x15f6ba(_0xd24926);}_0x585304['flash'](a5_0x18f5('0x1a'),{'msg':a5_0x18f5('0x39')});_0x3de114[a5_0x18f5('0x9')](a5_0x18f5('0x2d'));});});};exports[a5_0x18f5('0x3a')]=(_0x1ccd77,_0x1db16f,_0x29e55f)=>{User_1[a5_0x18f5('0x16')][a5_0x18f5('0x3b')]({'_id':_0x1ccd77['user']['id']},_0x1d73d1=>{if(_0x1d73d1){return _0x29e55f(_0x1d73d1);}_0x1ccd77[a5_0x18f5('0x1e')]();_0x1ccd77[a5_0x18f5('0x13')](a5_0x18f5('0x3c'),{'msg':a5_0x18f5('0x3d')});_0x1db16f[a5_0x18f5('0x9')]('/');});};exports['getOauthUnlink']=(_0x22396f,_0x1fac24,_0x5b3e4a)=>{const _0x4689dd=_0x22396f['params']['provider'];User_1[a5_0x18f5('0x16')]['findById'](_0x22396f['user']['id'],(_0x15db94,_0x3b383b)=>{if(_0x15db94){return _0x5b3e4a(_0x15db94);}_0x3b383b[_0x4689dd]=undefined;_0x3b383b[a5_0x18f5('0x3e')]=_0x3b383b[a5_0x18f5('0x3e')][a5_0x18f5('0x3f')](_0x226d55=>_0x226d55['kind']!==_0x4689dd);_0x3b383b[a5_0x18f5('0x28')](_0x15db94=>{if(_0x15db94){return _0x5b3e4a(_0x15db94);}_0x22396f['flash']('info',{'msg':_0x4689dd+a5_0x18f5('0x40')});_0x1fac24[a5_0x18f5('0x9')](a5_0x18f5('0x2d'));});});};exports[a5_0x18f5('0x41')]=(_0x545307,_0x428c0b,_0x121c29)=>{if(_0x545307[a5_0x18f5('0x42')]()){return _0x428c0b['redirect']('/');}User_1['default'][a5_0x18f5('0x26')]({'passwordResetToken':_0x545307[a5_0x18f5('0x43')][a5_0x18f5('0x44')]})[a5_0x18f5('0x45')]('passwordResetExpires')['gt'](Date[a5_0x18f5('0x46')]())[a5_0x18f5('0x47')]((_0x60cd75,_0x2e8457)=>{if(_0x60cd75){return _0x121c29(_0x60cd75);}if(!_0x2e8457){_0x545307['flash']('errors',{'msg':a5_0x18f5('0x48')});return _0x428c0b[a5_0x18f5('0x9')](a5_0x18f5('0x49'));}_0x428c0b[a5_0x18f5('0xa')](a5_0x18f5('0x4a'),{'title':a5_0x18f5('0x4b')});});};exports[a5_0x18f5('0x4c')]=(_0x326115,_0x3f7a7a,_0x3576b1)=>{_0x326115['assert'](a5_0x18f5('0xf'),a5_0x18f5('0x4d'))['len']({'min':0x4});_0x326115[a5_0x18f5('0xb')](a5_0x18f5('0x4e'),a5_0x18f5('0x4f'))[a5_0x18f5('0x37')](_0x326115[a5_0x18f5('0x24')][a5_0x18f5('0xf')]);const _0x29eda8=_0x326115['validationErrors']();if(_0x29eda8){_0x326115[a5_0x18f5('0x13')]('errors',_0x29eda8);return _0x3f7a7a[a5_0x18f5('0x9')](a5_0x18f5('0x50'));}async_1[a5_0x18f5('0x16')][a5_0x18f5('0x51')]([function resetPassword(_0x1de922){User_1[a5_0x18f5('0x16')][a5_0x18f5('0x26')]({'passwordResetToken':_0x326115[a5_0x18f5('0x43')][a5_0x18f5('0x44')]})[a5_0x18f5('0x45')](a5_0x18f5('0x52'))['gt'](Date['now']())[a5_0x18f5('0x47')]((_0x445d81,_0x3cdf79)=>{if(_0x445d81){return _0x3576b1(_0x445d81);}if(!_0x3cdf79){_0x326115[a5_0x18f5('0x13')](a5_0x18f5('0x14'),{'msg':a5_0x18f5('0x48')});return _0x3f7a7a[a5_0x18f5('0x9')](a5_0x18f5('0x50'));}_0x3cdf79[a5_0x18f5('0xf')]=_0x326115['body'][a5_0x18f5('0xf')];_0x3cdf79[a5_0x18f5('0x53')]=undefined;_0x3cdf79[a5_0x18f5('0x52')]=undefined;_0x3cdf79['save'](_0x445d81=>{if(_0x445d81){return _0x3576b1(_0x445d81);}_0x326115[a5_0x18f5('0x19')](_0x3cdf79,_0x445d81=>{_0x1de922(_0x445d81,_0x3cdf79);});});});},function sendResetPasswordEmail(_0x34fa8c,_0x4de2c4){const _0x292901=nodemailer_1['default'][a5_0x18f5('0x54')]({'service':'SendGrid','auth':{'user':process[a5_0x18f5('0x55')]['SENDGRID_USER'],'pass':process[a5_0x18f5('0x55')][a5_0x18f5('0x56')]}});const _0x1c07b3={'to':_0x34fa8c[a5_0x18f5('0xc')],'from':a5_0x18f5('0x57'),'subject':a5_0x18f5('0x58'),'text':a5_0x18f5('0x59')+_0x34fa8c[a5_0x18f5('0xc')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x292901['sendMail'](_0x1c07b3,_0xa428ac=>{_0x326115[a5_0x18f5('0x13')](a5_0x18f5('0x1a'),{'msg':a5_0x18f5('0x5a')});_0x4de2c4(_0xa428ac);});}],_0x5119d8=>{if(_0x5119d8){return _0x3576b1(_0x5119d8);}_0x3f7a7a[a5_0x18f5('0x9')]('/');});};exports[a5_0x18f5('0x5b')]=(_0x17c35b,_0x5ead9b)=>{if(_0x17c35b[a5_0x18f5('0x42')]()){return _0x5ead9b[a5_0x18f5('0x9')]('/');}_0x5ead9b[a5_0x18f5('0xa')](a5_0x18f5('0x5c'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x32bf4e,_0x45de28,_0x8bdb5f)=>{_0x32bf4e[a5_0x18f5('0xb')](a5_0x18f5('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x18f5('0xe')]();_0x32bf4e[a5_0x18f5('0x11')](a5_0x18f5('0xc'))[a5_0x18f5('0x12')]({'gmail_remove_dots':![]});const _0x5bfe6d=_0x32bf4e[a5_0x18f5('0x25')]();if(_0x5bfe6d){_0x32bf4e[a5_0x18f5('0x13')](a5_0x18f5('0x14'),_0x5bfe6d);return _0x45de28['redirect'](a5_0x18f5('0x49'));}async_1[a5_0x18f5('0x16')][a5_0x18f5('0x51')]([function createRandomToken(_0x4959d7){crypto_1[a5_0x18f5('0x16')][a5_0x18f5('0x5d')](0x10,(_0x2d2de6,_0x47f550)=>{const _0x4ec41b=_0x47f550[a5_0x18f5('0x5e')](a5_0x18f5('0x5f'));_0x4959d7(_0x2d2de6,_0x4ec41b);});},function setRandomToken(_0x5e2e57,_0xab1719){User_1[a5_0x18f5('0x16')][a5_0x18f5('0x26')]({'email':_0x32bf4e[a5_0x18f5('0x24')][a5_0x18f5('0xc')]},(_0x34bfb9,_0x1eb24a)=>{if(_0x34bfb9){return _0xab1719(_0x34bfb9);}if(!_0x1eb24a){_0x32bf4e['flash'](a5_0x18f5('0x14'),{'msg':a5_0x18f5('0x60')});return _0x45de28[a5_0x18f5('0x9')](a5_0x18f5('0x49'));}_0x1eb24a['passwordResetToken']=_0x5e2e57;_0x1eb24a[a5_0x18f5('0x52')]=Date[a5_0x18f5('0x46')]()+0x36ee80;_0x1eb24a[a5_0x18f5('0x28')](_0x34bfb9=>{_0xab1719(_0x34bfb9,_0x5e2e57,_0x1eb24a);});});},function sendForgotPasswordEmail(_0x4bfcfa,_0x16b78e,_0x328a36){const _0x1aea7c=nodemailer_1['default'][a5_0x18f5('0x54')]({'service':a5_0x18f5('0x61'),'auth':{'user':process[a5_0x18f5('0x55')][a5_0x18f5('0x62')],'pass':process[a5_0x18f5('0x55')][a5_0x18f5('0x56')]}});const _0x295e26={'to':_0x16b78e[a5_0x18f5('0xc')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x18f5('0x63')+_0x32bf4e['headers'][a5_0x18f5('0x64')]+a5_0x18f5('0x65')+_0x4bfcfa+a5_0x18f5('0x66')};_0x1aea7c['sendMail'](_0x295e26,_0x3a7ef6=>{_0x32bf4e[a5_0x18f5('0x13')](a5_0x18f5('0x3c'),{'msg':a5_0x18f5('0x67')+_0x16b78e[a5_0x18f5('0xc')]+'\x20with\x20further\x20instructions.'});_0x328a36(_0x3a7ef6);});}],_0x5e1142=>{if(_0x5e1142){return _0x8bdb5f(_0x5e1142);}_0x45de28[a5_0x18f5('0x9')](a5_0x18f5('0x49'));});};