var a5_0x35ac=['waterfall','now','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','getLogin','user','redirect','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','validationErrors','errors','/login','default','authenticate','message','logIn','flash','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','Create\x20Account','postSignup','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','sanitize','/signup','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','render','account/profile','postUpdateProfile','normalizeEmail','/account','findById','profile','name','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back'];(function(_0x309cd4,_0x55d394){var _0x126472=function(_0x32fbeb){while(--_0x32fbeb){_0x309cd4['push'](_0x309cd4['shift']());}};_0x126472(++_0x55d394);}(a5_0x35ac,0x14f));var a5_0x1966=function(_0x51641b,_0x319940){_0x51641b=_0x51641b-0x0;var _0xce931=a5_0x35ac[_0x51641b];return _0xce931;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3a513e){return _0x3a513e&&_0x3a513e[a5_0x1966('0x0')]?_0x3a513e:{'default':_0x3a513e};};Object[a5_0x1966('0x1')](exports,a5_0x1966('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x1966('0x2')));const crypto_1=__importDefault(require(a5_0x1966('0x3')));const nodemailer_1=__importDefault(require(a5_0x1966('0x4')));const passport_1=__importDefault(require(a5_0x1966('0x5')));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a5_0x1966('0x6')]=(_0x1d3783,_0xcf6b53)=>{if(_0x1d3783[a5_0x1966('0x7')]){return _0xcf6b53[a5_0x1966('0x8')]('/');}_0xcf6b53['render'](a5_0x1966('0x9'),{'title':a5_0x1966('0xa')});};exports[a5_0x1966('0xb')]=(_0xc32bec,_0x3b45a8,_0x4144df)=>{_0xc32bec[a5_0x1966('0xc')](a5_0x1966('0xd'),a5_0x1966('0xe'))[a5_0x1966('0xf')]();_0xc32bec[a5_0x1966('0xc')](a5_0x1966('0x10'),a5_0x1966('0x11'))[a5_0x1966('0x12')]();_0xc32bec['sanitize']('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0xbfdc0a=_0xc32bec[a5_0x1966('0x13')]();if(_0xbfdc0a){_0xc32bec['flash'](a5_0x1966('0x14'),_0xbfdc0a);return _0x3b45a8[a5_0x1966('0x8')](a5_0x1966('0x15'));}passport_1[a5_0x1966('0x16')][a5_0x1966('0x17')]('local',(_0x493b01,_0x48cc3c,_0x3db28d)=>{if(_0x493b01){return _0x4144df(_0x493b01);}if(!_0x48cc3c){_0xc32bec['flash']('errors',_0x3db28d[a5_0x1966('0x18')]);return _0x3b45a8[a5_0x1966('0x8')](a5_0x1966('0x15'));}_0xc32bec[a5_0x1966('0x19')](_0x48cc3c,_0x493b01=>{if(_0x493b01){return _0x4144df(_0x493b01);}_0xc32bec[a5_0x1966('0x1a')](a5_0x1966('0x1b'),{'msg':a5_0x1966('0x1c')});_0x3b45a8[a5_0x1966('0x8')](_0xc32bec[a5_0x1966('0x1d')][a5_0x1966('0x1e')]||'/');});})(_0xc32bec,_0x3b45a8,_0x4144df);};exports[a5_0x1966('0x1f')]=(_0x5562e9,_0x40883f)=>{_0x5562e9['logout']();_0x40883f[a5_0x1966('0x8')]('/');};exports['getSignup']=(_0x7ca495,_0x1b6512)=>{if(_0x7ca495[a5_0x1966('0x7')]){return _0x1b6512[a5_0x1966('0x8')]('/');}_0x1b6512['render'](a5_0x1966('0x20'),{'title':a5_0x1966('0x21')});};exports[a5_0x1966('0x22')]=(_0x36a35b,_0x4b75cf,_0x46fee8)=>{_0x36a35b['assert']('email',a5_0x1966('0xe'))[a5_0x1966('0xf')]();_0x36a35b[a5_0x1966('0xc')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x1966('0x23')]({'min':0x4});_0x36a35b[a5_0x1966('0xc')](a5_0x1966('0x24'),a5_0x1966('0x25'))[a5_0x1966('0x26')](_0x36a35b['body'][a5_0x1966('0x10')]);_0x36a35b[a5_0x1966('0x27')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x3b5c00=_0x36a35b[a5_0x1966('0x13')]();if(_0x3b5c00){_0x36a35b['flash'](a5_0x1966('0x14'),_0x3b5c00);return _0x4b75cf[a5_0x1966('0x8')](a5_0x1966('0x28'));}const _0x3bba48=new User_1[(a5_0x1966('0x16'))]({'email':_0x36a35b[a5_0x1966('0x29')][a5_0x1966('0xd')],'password':_0x36a35b[a5_0x1966('0x29')][a5_0x1966('0x10')]});User_1[a5_0x1966('0x16')][a5_0x1966('0x2a')]({'email':_0x36a35b[a5_0x1966('0x29')][a5_0x1966('0xd')]},(_0x317a2e,_0x3e4e63)=>{if(_0x317a2e){return _0x46fee8(_0x317a2e);}if(_0x3e4e63){_0x36a35b[a5_0x1966('0x1a')]('errors',{'msg':a5_0x1966('0x2b')});return _0x4b75cf['redirect'](a5_0x1966('0x28'));}_0x3bba48[a5_0x1966('0x2c')](_0x317a2e=>{if(_0x317a2e){return _0x46fee8(_0x317a2e);}_0x36a35b[a5_0x1966('0x19')](_0x3bba48,_0x317a2e=>{if(_0x317a2e){return _0x46fee8(_0x317a2e);}_0x4b75cf['redirect']('/');});});});};exports['getAccount']=(_0xc192d9,_0x211879)=>{_0x211879[a5_0x1966('0x2d')](a5_0x1966('0x2e'),{'title':'Account\x20Management'});};exports[a5_0x1966('0x2f')]=(_0x1b154a,_0x317b04,_0x4ad480)=>{_0x1b154a[a5_0x1966('0xc')](a5_0x1966('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x1966('0xf')]();_0x1b154a['sanitize']('email')[a5_0x1966('0x30')]({'gmail_remove_dots':![]});const _0x3bc6a1=_0x1b154a[a5_0x1966('0x13')]();if(_0x3bc6a1){_0x1b154a[a5_0x1966('0x1a')](a5_0x1966('0x14'),_0x3bc6a1);return _0x317b04[a5_0x1966('0x8')](a5_0x1966('0x31'));}User_1[a5_0x1966('0x16')][a5_0x1966('0x32')](_0x1b154a[a5_0x1966('0x7')]['id'],(_0x1dbc49,_0x5d42db)=>{if(_0x1dbc49){return _0x4ad480(_0x1dbc49);}_0x5d42db[a5_0x1966('0xd')]=_0x1b154a[a5_0x1966('0x29')][a5_0x1966('0xd')]||'';_0x5d42db[a5_0x1966('0x33')]['name']=_0x1b154a[a5_0x1966('0x29')][a5_0x1966('0x34')]||'';_0x5d42db['profile']['gender']=_0x1b154a[a5_0x1966('0x29')][a5_0x1966('0x35')]||'';_0x5d42db['profile'][a5_0x1966('0x36')]=_0x1b154a[a5_0x1966('0x29')][a5_0x1966('0x36')]||'';_0x5d42db['profile'][a5_0x1966('0x37')]=_0x1b154a[a5_0x1966('0x29')]['website']||'';_0x5d42db[a5_0x1966('0x2c')](_0x1dbc49=>{if(_0x1dbc49){if(_0x1dbc49[a5_0x1966('0x38')]===0x2af8){_0x1b154a[a5_0x1966('0x1a')]('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x317b04[a5_0x1966('0x8')](a5_0x1966('0x31'));}return _0x4ad480(_0x1dbc49);}_0x1b154a[a5_0x1966('0x1a')](a5_0x1966('0x1b'),{'msg':a5_0x1966('0x39')});_0x317b04[a5_0x1966('0x8')](a5_0x1966('0x31'));});});};exports[a5_0x1966('0x3a')]=(_0x12a9e4,_0x1fa5bb,_0x46afaf)=>{_0x12a9e4[a5_0x1966('0xc')](a5_0x1966('0x10'),a5_0x1966('0x3b'))[a5_0x1966('0x23')]({'min':0x4});_0x12a9e4[a5_0x1966('0xc')](a5_0x1966('0x24'),'Passwords\x20do\x20not\x20match')[a5_0x1966('0x26')](_0x12a9e4[a5_0x1966('0x29')][a5_0x1966('0x10')]);const _0x10e8ee=_0x12a9e4[a5_0x1966('0x13')]();if(_0x10e8ee){_0x12a9e4[a5_0x1966('0x1a')](a5_0x1966('0x14'),_0x10e8ee);return _0x1fa5bb[a5_0x1966('0x8')](a5_0x1966('0x31'));}User_1['default'][a5_0x1966('0x32')](_0x12a9e4['user']['id'],(_0xef05d0,_0xca5c78)=>{if(_0xef05d0){return _0x46afaf(_0xef05d0);}_0xca5c78[a5_0x1966('0x10')]=_0x12a9e4[a5_0x1966('0x29')][a5_0x1966('0x10')];_0xca5c78[a5_0x1966('0x2c')](_0xef05d0=>{if(_0xef05d0){return _0x46afaf(_0xef05d0);}_0x12a9e4[a5_0x1966('0x1a')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x1fa5bb[a5_0x1966('0x8')](a5_0x1966('0x31'));});});};exports[a5_0x1966('0x3c')]=(_0x226e78,_0x2fc2d4,_0x4b2eb2)=>{User_1[a5_0x1966('0x16')][a5_0x1966('0x3d')]({'_id':_0x226e78['user']['id']},_0x4184d1=>{if(_0x4184d1){return _0x4b2eb2(_0x4184d1);}_0x226e78[a5_0x1966('0x1f')]();_0x226e78[a5_0x1966('0x1a')](a5_0x1966('0x3e'),{'msg':a5_0x1966('0x3f')});_0x2fc2d4[a5_0x1966('0x8')]('/');});};exports[a5_0x1966('0x40')]=(_0x17ac97,_0xe04cd4,_0x54631d)=>{const _0x196810=_0x17ac97[a5_0x1966('0x41')]['provider'];User_1[a5_0x1966('0x16')][a5_0x1966('0x32')](_0x17ac97['user']['id'],(_0x31fbdb,_0x4ede15)=>{if(_0x31fbdb){return _0x54631d(_0x31fbdb);}_0x4ede15[_0x196810]=undefined;_0x4ede15[a5_0x1966('0x42')]=_0x4ede15['tokens']['filter'](_0x46c5c0=>_0x46c5c0[a5_0x1966('0x43')]!==_0x196810);_0x4ede15[a5_0x1966('0x2c')](_0x31fbdb=>{if(_0x31fbdb){return _0x54631d(_0x31fbdb);}_0x17ac97[a5_0x1966('0x1a')](a5_0x1966('0x3e'),{'msg':_0x196810+a5_0x1966('0x44')});_0xe04cd4['redirect']('/account');});});};exports['getReset']=(_0x564ff2,_0x10bf09,_0x21f50a)=>{if(_0x564ff2[a5_0x1966('0x45')]()){return _0x10bf09['redirect']('/');}User_1[a5_0x1966('0x16')][a5_0x1966('0x2a')]({'passwordResetToken':_0x564ff2['params'][a5_0x1966('0x46')]})[a5_0x1966('0x47')](a5_0x1966('0x48'))['gt'](Date['now']())[a5_0x1966('0x49')]((_0xd78813,_0x262788)=>{if(_0xd78813){return _0x21f50a(_0xd78813);}if(!_0x262788){_0x564ff2['flash'](a5_0x1966('0x14'),{'msg':a5_0x1966('0x4a')});return _0x10bf09[a5_0x1966('0x8')](a5_0x1966('0x4b'));}_0x10bf09[a5_0x1966('0x2d')]('account/reset',{'title':a5_0x1966('0x4c')});});};exports[a5_0x1966('0x4d')]=(_0x1486aa,_0x55b8a0,_0x55ff18)=>{_0x1486aa[a5_0x1966('0xc')](a5_0x1966('0x10'),a5_0x1966('0x4e'))[a5_0x1966('0x23')]({'min':0x4});_0x1486aa['assert'](a5_0x1966('0x4f'),'Passwords\x20must\x20match.')['equals'](_0x1486aa['body'][a5_0x1966('0x10')]);const _0x2b5c0b=_0x1486aa[a5_0x1966('0x13')]();if(_0x2b5c0b){_0x1486aa['flash'](a5_0x1966('0x14'),_0x2b5c0b);return _0x55b8a0['redirect'](a5_0x1966('0x50'));}async_1['default'][a5_0x1966('0x51')]([function resetPassword(_0x439a6d){User_1[a5_0x1966('0x16')][a5_0x1966('0x2a')]({'passwordResetToken':_0x1486aa['params'][a5_0x1966('0x46')]})[a5_0x1966('0x47')](a5_0x1966('0x48'))['gt'](Date[a5_0x1966('0x52')]())[a5_0x1966('0x49')]((_0x18cdfb,_0x5a2474)=>{if(_0x18cdfb){return _0x55ff18(_0x18cdfb);}if(!_0x5a2474){_0x1486aa[a5_0x1966('0x1a')](a5_0x1966('0x14'),{'msg':a5_0x1966('0x4a')});return _0x55b8a0[a5_0x1966('0x8')]('back');}_0x5a2474['password']=_0x1486aa[a5_0x1966('0x29')][a5_0x1966('0x10')];_0x5a2474['passwordResetToken']=undefined;_0x5a2474[a5_0x1966('0x48')]=undefined;_0x5a2474[a5_0x1966('0x2c')](_0x18cdfb=>{if(_0x18cdfb){return _0x55ff18(_0x18cdfb);}_0x1486aa[a5_0x1966('0x19')](_0x5a2474,_0x18cdfb=>{_0x439a6d(_0x18cdfb,_0x5a2474);});});});},function sendResetPasswordEmail(_0x5f4438,_0x4713bb){const _0x4133f4=nodemailer_1[a5_0x1966('0x16')][a5_0x1966('0x53')]({'service':a5_0x1966('0x54'),'auth':{'user':process[a5_0x1966('0x55')][a5_0x1966('0x56')],'pass':process['env'][a5_0x1966('0x57')]}});const _0x327723={'to':_0x5f4438[a5_0x1966('0xd')],'from':a5_0x1966('0x58'),'subject':a5_0x1966('0x59'),'text':a5_0x1966('0x5a')+_0x5f4438[a5_0x1966('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x4133f4['sendMail'](_0x327723,_0x104baa=>{_0x1486aa['flash'](a5_0x1966('0x1b'),{'msg':a5_0x1966('0x5b')});_0x4713bb(_0x104baa);});}],_0x5b8216=>{if(_0x5b8216){return _0x55ff18(_0x5b8216);}_0x55b8a0[a5_0x1966('0x8')]('/');});};exports[a5_0x1966('0x5c')]=(_0x5f2ca9,_0x392611)=>{if(_0x5f2ca9['isAuthenticated']()){return _0x392611['redirect']('/');}_0x392611['render']('account/forgot',{'title':'Forgot\x20Password'});};exports[a5_0x1966('0x5d')]=(_0x994ed0,_0x9c9169,_0x21c68b)=>{_0x994ed0[a5_0x1966('0xc')](a5_0x1966('0xd'),a5_0x1966('0x5e'))[a5_0x1966('0xf')]();_0x994ed0[a5_0x1966('0x27')](a5_0x1966('0xd'))[a5_0x1966('0x30')]({'gmail_remove_dots':![]});const _0x72589c=_0x994ed0['validationErrors']();if(_0x72589c){_0x994ed0[a5_0x1966('0x1a')](a5_0x1966('0x14'),_0x72589c);return _0x9c9169[a5_0x1966('0x8')](a5_0x1966('0x4b'));}async_1['default'][a5_0x1966('0x51')]([function createRandomToken(_0x382de0){crypto_1[a5_0x1966('0x16')]['randomBytes'](0x10,(_0x2cb940,_0x3f6c9b)=>{const _0x5a7e51=_0x3f6c9b[a5_0x1966('0x5f')](a5_0x1966('0x60'));_0x382de0(_0x2cb940,_0x5a7e51);});},function setRandomToken(_0x17521a,_0x270ce7){User_1[a5_0x1966('0x16')][a5_0x1966('0x2a')]({'email':_0x994ed0[a5_0x1966('0x29')]['email']},(_0x3ed0fd,_0x583298)=>{if(_0x3ed0fd){return _0x270ce7(_0x3ed0fd);}if(!_0x583298){_0x994ed0[a5_0x1966('0x1a')](a5_0x1966('0x14'),{'msg':a5_0x1966('0x61')});return _0x9c9169[a5_0x1966('0x8')](a5_0x1966('0x4b'));}_0x583298['passwordResetToken']=_0x17521a;_0x583298[a5_0x1966('0x48')]=Date['now']()+0x36ee80;_0x583298[a5_0x1966('0x2c')](_0x3ed0fd=>{_0x270ce7(_0x3ed0fd,_0x17521a,_0x583298);});});},function sendForgotPasswordEmail(_0x5ef7c6,_0x1971c9,_0x1e0b55){const _0x47126f=nodemailer_1[a5_0x1966('0x16')][a5_0x1966('0x53')]({'service':'SendGrid','auth':{'user':process[a5_0x1966('0x55')][a5_0x1966('0x56')],'pass':process[a5_0x1966('0x55')][a5_0x1966('0x57')]}});const _0x15569d={'to':_0x1971c9['email'],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x1966('0x62')+_0x994ed0['headers'][a5_0x1966('0x63')]+a5_0x1966('0x64')+_0x5ef7c6+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x47126f[a5_0x1966('0x65')](_0x15569d,_0x4c613c=>{_0x994ed0[a5_0x1966('0x1a')](a5_0x1966('0x3e'),{'msg':a5_0x1966('0x66')+_0x1971c9[a5_0x1966('0xd')]+a5_0x1966('0x67')});_0x1e0b55(_0x4c613c);});}],_0x2f853b=>{if(_0x2f853b){return _0x21c68b(_0x2f853b);}_0x9c9169[a5_0x1966('0x8')](a5_0x1966('0x4b'));});};