var a5_0x16ad=['getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','password','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','validationErrors','errors','/login','default','authenticate','local','flash','logIn','success','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','sanitize','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','isEmail','/account','findById','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Passwords\x20must\x20match.','back','passwordResetExpires','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer'];(function(_0x5799cc,_0x18572d){var _0x2dd081=function(_0x24136b){while(--_0x24136b){_0x5799cc['push'](_0x5799cc['shift']());}};_0x2dd081(++_0x18572d);}(a5_0x16ad,0x19e));var a5_0x5912=function(_0x16a6b4,_0x1a5dbf){_0x16a6b4=_0x16a6b4-0x0;var _0x4cb83b=a5_0x16ad[_0x16a6b4];return _0x4cb83b;};'use strict';var __importDefault=this&&this[a5_0x5912('0x0')]||function(_0x53cd29){return _0x53cd29&&_0x53cd29[a5_0x5912('0x1')]?_0x53cd29:{'default':_0x53cd29};};Object[a5_0x5912('0x2')](exports,a5_0x5912('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x5912('0x3')));const crypto_1=__importDefault(require(a5_0x5912('0x4')));const nodemailer_1=__importDefault(require(a5_0x5912('0x5')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a5_0x5912('0x6')]=(_0x473479,_0x33e8dd)=>{if(_0x473479[a5_0x5912('0x7')]){return _0x33e8dd[a5_0x5912('0x8')]('/');}_0x33e8dd[a5_0x5912('0x9')](a5_0x5912('0xa'),{'title':a5_0x5912('0xb')});};exports[a5_0x5912('0xc')]=(_0x3e8c2d,_0x197165,_0x47a428)=>{_0x3e8c2d[a5_0x5912('0xd')](a5_0x5912('0xe'),'Email\x20is\x20not\x20valid')['isEmail']();_0x3e8c2d[a5_0x5912('0xd')](a5_0x5912('0xf'),a5_0x5912('0x10'))[a5_0x5912('0x11')]();_0x3e8c2d['sanitize'](a5_0x5912('0xe'))[a5_0x5912('0x12')]({'gmail_remove_dots':![]});const _0x2d9560=_0x3e8c2d[a5_0x5912('0x13')]();if(_0x2d9560){_0x3e8c2d['flash'](a5_0x5912('0x14'),_0x2d9560);return _0x197165[a5_0x5912('0x8')](a5_0x5912('0x15'));}passport_1[a5_0x5912('0x16')][a5_0x5912('0x17')](a5_0x5912('0x18'),(_0x6bdd20,_0xf49f8d,_0x11ed57)=>{if(_0x6bdd20){return _0x47a428(_0x6bdd20);}if(!_0xf49f8d){_0x3e8c2d[a5_0x5912('0x19')](a5_0x5912('0x14'),_0x11ed57['message']);return _0x197165['redirect']('/login');}_0x3e8c2d[a5_0x5912('0x1a')](_0xf49f8d,_0x6bdd20=>{if(_0x6bdd20){return _0x47a428(_0x6bdd20);}_0x3e8c2d[a5_0x5912('0x19')](a5_0x5912('0x1b'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x197165[a5_0x5912('0x8')](_0x3e8c2d[a5_0x5912('0x1c')][a5_0x5912('0x1d')]||'/');});})(_0x3e8c2d,_0x197165,_0x47a428);};exports[a5_0x5912('0x1e')]=(_0x2ee230,_0x3377c9)=>{_0x2ee230['logout']();_0x3377c9[a5_0x5912('0x8')]('/');};exports[a5_0x5912('0x1f')]=(_0x8b1818,_0x29833d)=>{if(_0x8b1818[a5_0x5912('0x7')]){return _0x29833d['redirect']('/');}_0x29833d[a5_0x5912('0x9')](a5_0x5912('0x20'),{'title':a5_0x5912('0x21')});};exports[a5_0x5912('0x22')]=(_0x269865,_0x229d97,_0x36c16c)=>{_0x269865['assert'](a5_0x5912('0xe'),'Email\x20is\x20not\x20valid')['isEmail']();_0x269865['assert'](a5_0x5912('0xf'),a5_0x5912('0x23'))[a5_0x5912('0x24')]({'min':0x4});_0x269865[a5_0x5912('0xd')](a5_0x5912('0x25'),a5_0x5912('0x26'))[a5_0x5912('0x27')](_0x269865[a5_0x5912('0x28')]['password']);_0x269865[a5_0x5912('0x29')](a5_0x5912('0xe'))[a5_0x5912('0x12')]({'gmail_remove_dots':![]});const _0x288354=_0x269865[a5_0x5912('0x13')]();if(_0x288354){_0x269865[a5_0x5912('0x19')](a5_0x5912('0x14'),_0x288354);return _0x229d97['redirect'](a5_0x5912('0x2a'));}const _0x28b85a=new User_1[(a5_0x5912('0x16'))]({'email':_0x269865[a5_0x5912('0x28')]['email'],'password':_0x269865[a5_0x5912('0x28')][a5_0x5912('0xf')]});User_1[a5_0x5912('0x16')][a5_0x5912('0x2b')]({'email':_0x269865[a5_0x5912('0x28')]['email']},(_0x220e28,_0x4b069a)=>{if(_0x220e28){return _0x36c16c(_0x220e28);}if(_0x4b069a){_0x269865[a5_0x5912('0x19')]('errors',{'msg':a5_0x5912('0x2c')});return _0x229d97[a5_0x5912('0x8')](a5_0x5912('0x2a'));}_0x28b85a[a5_0x5912('0x2d')](_0x220e28=>{if(_0x220e28){return _0x36c16c(_0x220e28);}_0x269865[a5_0x5912('0x1a')](_0x28b85a,_0x220e28=>{if(_0x220e28){return _0x36c16c(_0x220e28);}_0x229d97[a5_0x5912('0x8')]('/');});});});};exports[a5_0x5912('0x2e')]=(_0x5ee8b1,_0x2212e9)=>{_0x2212e9[a5_0x5912('0x9')](a5_0x5912('0x2f'),{'title':a5_0x5912('0x30')});};exports[a5_0x5912('0x31')]=(_0x48d09b,_0x49e9e0,_0x4555fe)=>{_0x48d09b[a5_0x5912('0xd')](a5_0x5912('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x5912('0x32')]();_0x48d09b[a5_0x5912('0x29')](a5_0x5912('0xe'))[a5_0x5912('0x12')]({'gmail_remove_dots':![]});const _0x333f86=_0x48d09b['validationErrors']();if(_0x333f86){_0x48d09b[a5_0x5912('0x19')](a5_0x5912('0x14'),_0x333f86);return _0x49e9e0[a5_0x5912('0x8')](a5_0x5912('0x33'));}User_1[a5_0x5912('0x16')][a5_0x5912('0x34')](_0x48d09b[a5_0x5912('0x7')]['id'],(_0x518779,_0x43d839)=>{if(_0x518779){return _0x4555fe(_0x518779);}_0x43d839[a5_0x5912('0xe')]=_0x48d09b[a5_0x5912('0x28')][a5_0x5912('0xe')]||'';_0x43d839[a5_0x5912('0x35')]['name']=_0x48d09b['body']['name']||'';_0x43d839[a5_0x5912('0x35')]['gender']=_0x48d09b['body'][a5_0x5912('0x36')]||'';_0x43d839[a5_0x5912('0x35')]['location']=_0x48d09b[a5_0x5912('0x28')][a5_0x5912('0x37')]||'';_0x43d839['profile'][a5_0x5912('0x38')]=_0x48d09b[a5_0x5912('0x28')][a5_0x5912('0x38')]||'';_0x43d839[a5_0x5912('0x2d')](_0x518779=>{if(_0x518779){if(_0x518779[a5_0x5912('0x39')]===0x2af8){_0x48d09b[a5_0x5912('0x19')](a5_0x5912('0x14'),{'msg':a5_0x5912('0x3a')});return _0x49e9e0['redirect'](a5_0x5912('0x33'));}return _0x4555fe(_0x518779);}_0x48d09b[a5_0x5912('0x19')](a5_0x5912('0x1b'),{'msg':a5_0x5912('0x3b')});_0x49e9e0[a5_0x5912('0x8')]('/account');});});};exports[a5_0x5912('0x3c')]=(_0x12bcfa,_0x36e862,_0x5160eb)=>{_0x12bcfa['assert']('password',a5_0x5912('0x23'))[a5_0x5912('0x24')]({'min':0x4});_0x12bcfa[a5_0x5912('0xd')](a5_0x5912('0x25'),a5_0x5912('0x26'))[a5_0x5912('0x27')](_0x12bcfa[a5_0x5912('0x28')]['password']);const _0x86ce9e=_0x12bcfa[a5_0x5912('0x13')]();if(_0x86ce9e){_0x12bcfa[a5_0x5912('0x19')]('errors',_0x86ce9e);return _0x36e862['redirect'](a5_0x5912('0x33'));}User_1[a5_0x5912('0x16')][a5_0x5912('0x34')](_0x12bcfa[a5_0x5912('0x7')]['id'],(_0x4a4304,_0x4e09f4)=>{if(_0x4a4304){return _0x5160eb(_0x4a4304);}_0x4e09f4[a5_0x5912('0xf')]=_0x12bcfa[a5_0x5912('0x28')][a5_0x5912('0xf')];_0x4e09f4['save'](_0x4a4304=>{if(_0x4a4304){return _0x5160eb(_0x4a4304);}_0x12bcfa[a5_0x5912('0x19')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x36e862[a5_0x5912('0x8')](a5_0x5912('0x33'));});});};exports[a5_0x5912('0x3d')]=(_0x1b811e,_0x2b51a7,_0x2c2d6a)=>{User_1[a5_0x5912('0x16')][a5_0x5912('0x3e')]({'_id':_0x1b811e[a5_0x5912('0x7')]['id']},_0x5dc175=>{if(_0x5dc175){return _0x2c2d6a(_0x5dc175);}_0x1b811e[a5_0x5912('0x1e')]();_0x1b811e['flash'](a5_0x5912('0x3f'),{'msg':a5_0x5912('0x40')});_0x2b51a7['redirect']('/');});};exports[a5_0x5912('0x41')]=(_0x1fdd26,_0x358966,_0x3dc558)=>{const _0xc0cb1f=_0x1fdd26[a5_0x5912('0x42')]['provider'];User_1[a5_0x5912('0x16')][a5_0x5912('0x34')](_0x1fdd26[a5_0x5912('0x7')]['id'],(_0x5250c0,_0x2c61e7)=>{if(_0x5250c0){return _0x3dc558(_0x5250c0);}_0x2c61e7[_0xc0cb1f]=undefined;_0x2c61e7['tokens']=_0x2c61e7[a5_0x5912('0x43')][a5_0x5912('0x44')](_0x250580=>_0x250580['kind']!==_0xc0cb1f);_0x2c61e7['save'](_0x5250c0=>{if(_0x5250c0){return _0x3dc558(_0x5250c0);}_0x1fdd26[a5_0x5912('0x19')](a5_0x5912('0x3f'),{'msg':_0xc0cb1f+a5_0x5912('0x45')});_0x358966[a5_0x5912('0x8')](a5_0x5912('0x33'));});});};exports['getReset']=(_0x500622,_0x1ed4e5,_0x49825d)=>{if(_0x500622[a5_0x5912('0x46')]()){return _0x1ed4e5[a5_0x5912('0x8')]('/');}User_1[a5_0x5912('0x16')]['findOne']({'passwordResetToken':_0x500622[a5_0x5912('0x42')][a5_0x5912('0x47')]})['where']('passwordResetExpires')['gt'](Date[a5_0x5912('0x48')]())[a5_0x5912('0x49')]((_0x5eb97a,_0x3e5fb9)=>{if(_0x5eb97a){return _0x49825d(_0x5eb97a);}if(!_0x3e5fb9){_0x500622[a5_0x5912('0x19')](a5_0x5912('0x14'),{'msg':a5_0x5912('0x4a')});return _0x1ed4e5[a5_0x5912('0x8')](a5_0x5912('0x4b'));}_0x1ed4e5[a5_0x5912('0x9')](a5_0x5912('0x4c'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0xc7a2df,_0x4e1903,_0x5870b3)=>{_0xc7a2df[a5_0x5912('0xd')](a5_0x5912('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x5912('0x24')]({'min':0x4});_0xc7a2df[a5_0x5912('0xd')]('confirm',a5_0x5912('0x4d'))[a5_0x5912('0x27')](_0xc7a2df[a5_0x5912('0x28')]['password']);const _0x4bfcb9=_0xc7a2df[a5_0x5912('0x13')]();if(_0x4bfcb9){_0xc7a2df[a5_0x5912('0x19')]('errors',_0x4bfcb9);return _0x4e1903['redirect'](a5_0x5912('0x4e'));}async_1['default']['waterfall']([function resetPassword(_0x4b9fd1){User_1[a5_0x5912('0x16')][a5_0x5912('0x2b')]({'passwordResetToken':_0xc7a2df[a5_0x5912('0x42')][a5_0x5912('0x47')]})['where'](a5_0x5912('0x4f'))['gt'](Date[a5_0x5912('0x48')]())[a5_0x5912('0x49')]((_0x22e298,_0x1343c7)=>{if(_0x22e298){return _0x5870b3(_0x22e298);}if(!_0x1343c7){_0xc7a2df[a5_0x5912('0x19')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4e1903[a5_0x5912('0x8')](a5_0x5912('0x4e'));}_0x1343c7[a5_0x5912('0xf')]=_0xc7a2df[a5_0x5912('0x28')][a5_0x5912('0xf')];_0x1343c7[a5_0x5912('0x50')]=undefined;_0x1343c7[a5_0x5912('0x4f')]=undefined;_0x1343c7['save'](_0x22e298=>{if(_0x22e298){return _0x5870b3(_0x22e298);}_0xc7a2df[a5_0x5912('0x1a')](_0x1343c7,_0x22e298=>{_0x4b9fd1(_0x22e298,_0x1343c7);});});});},function sendResetPasswordEmail(_0xd1cf5f,_0x1c0e37){const _0x23e392=nodemailer_1[a5_0x5912('0x16')][a5_0x5912('0x51')]({'service':'SendGrid','auth':{'user':process[a5_0x5912('0x52')][a5_0x5912('0x53')],'pass':process[a5_0x5912('0x52')][a5_0x5912('0x54')]}});const _0x2cc120={'to':_0xd1cf5f[a5_0x5912('0xe')],'from':a5_0x5912('0x55'),'subject':a5_0x5912('0x56'),'text':a5_0x5912('0x57')+_0xd1cf5f['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0x23e392[a5_0x5912('0x58')](_0x2cc120,_0x129d96=>{_0xc7a2df['flash'](a5_0x5912('0x1b'),{'msg':a5_0x5912('0x59')});_0x1c0e37(_0x129d96);});}],_0x2bfa7d=>{if(_0x2bfa7d){return _0x5870b3(_0x2bfa7d);}_0x4e1903['redirect']('/');});};exports[a5_0x5912('0x5a')]=(_0x1e63f4,_0x503cb7)=>{if(_0x1e63f4['isAuthenticated']()){return _0x503cb7[a5_0x5912('0x8')]('/');}_0x503cb7[a5_0x5912('0x9')](a5_0x5912('0x5b'),{'title':a5_0x5912('0x5c')});};exports[a5_0x5912('0x5d')]=(_0x25db28,_0x5abc5f,_0x4022ee)=>{_0x25db28['assert'](a5_0x5912('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x5912('0x32')]();_0x25db28['sanitize'](a5_0x5912('0xe'))[a5_0x5912('0x12')]({'gmail_remove_dots':![]});const _0xdbccd8=_0x25db28[a5_0x5912('0x13')]();if(_0xdbccd8){_0x25db28['flash']('errors',_0xdbccd8);return _0x5abc5f[a5_0x5912('0x8')](a5_0x5912('0x4b'));}async_1['default'][a5_0x5912('0x5e')]([function createRandomToken(_0x5bc1c5){crypto_1[a5_0x5912('0x16')][a5_0x5912('0x5f')](0x10,(_0x5d6c19,_0x1b2cbe)=>{const _0x2285dd=_0x1b2cbe[a5_0x5912('0x60')]('hex');_0x5bc1c5(_0x5d6c19,_0x2285dd);});},function setRandomToken(_0x4c7128,_0x1476c2){User_1[a5_0x5912('0x16')]['findOne']({'email':_0x25db28[a5_0x5912('0x28')]['email']},(_0x13d647,_0x3b11bf)=>{if(_0x13d647){return _0x1476c2(_0x13d647);}if(!_0x3b11bf){_0x25db28[a5_0x5912('0x19')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x5abc5f[a5_0x5912('0x8')](a5_0x5912('0x4b'));}_0x3b11bf[a5_0x5912('0x50')]=_0x4c7128;_0x3b11bf['passwordResetExpires']=Date[a5_0x5912('0x48')]()+0x36ee80;_0x3b11bf[a5_0x5912('0x2d')](_0x13d647=>{_0x1476c2(_0x13d647,_0x4c7128,_0x3b11bf);});});},function sendForgotPasswordEmail(_0x39eda0,_0x122600,_0x137c2f){const _0x558b78=nodemailer_1[a5_0x5912('0x16')][a5_0x5912('0x51')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x5912('0x52')][a5_0x5912('0x54')]}});const _0x276983={'to':_0x122600[a5_0x5912('0xe')],'from':a5_0x5912('0x61'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x5912('0x62')+_0x25db28[a5_0x5912('0x63')][a5_0x5912('0x64')]+a5_0x5912('0x65')+_0x39eda0+a5_0x5912('0x66')};_0x558b78[a5_0x5912('0x58')](_0x276983,_0x3ff4ab=>{_0x25db28[a5_0x5912('0x19')](a5_0x5912('0x3f'),{'msg':a5_0x5912('0x67')+_0x122600[a5_0x5912('0xe')]+a5_0x5912('0x68')});_0x137c2f(_0x3ff4ab);});}],_0x5aa60a=>{if(_0x5aa60a){return _0x4022ee(_0x5aa60a);}_0x5abc5f['redirect'](a5_0x5912('0x4b'));});};