var a5_0x179e=['location','website','save','/account','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','token','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','now','passwordResetToken','createTransport','env','SENDGRID_PASSWORD','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','Forgot\x20Password','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','__esModule','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','account/login','postLogin','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','/login','default','local','flash','message','redirect','logIn','session','logout','render','Create\x20Account','postSignup','assert','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','isEmail','findById','profile','name','gender'];(function(_0x2704cf,_0x3c3255){var _0x61943c=function(_0x58e48b){while(--_0x58e48b){_0x2704cf['push'](_0x2704cf['shift']());}};_0x61943c(++_0x3c3255);}(a5_0x179e,0x110));var a5_0x1a96=function(_0x49d008,_0xf4984d){_0x49d008=_0x49d008-0x0;var _0x20fb97=a5_0x179e[_0x49d008];return _0x20fb97;};'use strict';var __importDefault=this&&this[a5_0x1a96('0x0')]||function(_0x4dcd73){return _0x4dcd73&&_0x4dcd73['__esModule']?_0x4dcd73:{'default':_0x4dcd73};};Object[a5_0x1a96('0x1')](exports,a5_0x1a96('0x2'),{'value':!![]});const async_1=__importDefault(require(a5_0x1a96('0x3')));const crypto_1=__importDefault(require(a5_0x1a96('0x4')));const nodemailer_1=__importDefault(require(a5_0x1a96('0x5')));const passport_1=__importDefault(require(a5_0x1a96('0x6')));const User_1=__importDefault(require(a5_0x1a96('0x7')));const request=require(a5_0x1a96('0x8'));exports[a5_0x1a96('0x9')]=(_0xc1cc75,_0x4116da)=>{if(_0xc1cc75[a5_0x1a96('0xa')]){return _0x4116da['redirect']('/');}_0x4116da['render'](a5_0x1a96('0xb'),{'title':'Login'});};exports[a5_0x1a96('0xc')]=(_0x420f00,_0x7ce4b9,_0x241c0e)=>{_0x420f00['assert'](a5_0x1a96('0xd'),a5_0x1a96('0xe'))['isEmail']();_0x420f00['assert'](a5_0x1a96('0xf'),a5_0x1a96('0x10'))[a5_0x1a96('0x11')]();_0x420f00[a5_0x1a96('0x12')](a5_0x1a96('0xd'))[a5_0x1a96('0x13')]({'gmail_remove_dots':![]});const _0x5b3938=_0x420f00[a5_0x1a96('0x14')]();if(_0x5b3938){_0x420f00['flash'](a5_0x1a96('0x15'),_0x5b3938);return _0x7ce4b9['redirect'](a5_0x1a96('0x16'));}passport_1[a5_0x1a96('0x17')]['authenticate'](a5_0x1a96('0x18'),(_0x2b9c69,_0x4a4f01,_0x560ae2)=>{if(_0x2b9c69){return _0x241c0e(_0x2b9c69);}if(!_0x4a4f01){_0x420f00[a5_0x1a96('0x19')](a5_0x1a96('0x15'),_0x560ae2[a5_0x1a96('0x1a')]);return _0x7ce4b9[a5_0x1a96('0x1b')](a5_0x1a96('0x16'));}_0x420f00[a5_0x1a96('0x1c')](_0x4a4f01,_0x2b9c69=>{if(_0x2b9c69){return _0x241c0e(_0x2b9c69);}_0x420f00[a5_0x1a96('0x19')]('success',{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x7ce4b9[a5_0x1a96('0x1b')](_0x420f00[a5_0x1a96('0x1d')]['returnTo']||'/');});})(_0x420f00,_0x7ce4b9,_0x241c0e);};exports[a5_0x1a96('0x1e')]=(_0x5a532d,_0x4fb33e)=>{_0x5a532d['logout']();_0x4fb33e[a5_0x1a96('0x1b')]('/');};exports['getSignup']=(_0x37021d,_0x5eda1d)=>{if(_0x37021d['user']){return _0x5eda1d[a5_0x1a96('0x1b')]('/');}_0x5eda1d[a5_0x1a96('0x1f')]('account/signup',{'title':a5_0x1a96('0x20')});};exports[a5_0x1a96('0x21')]=(_0x36b4a7,_0x45e543,_0x396cf3)=>{_0x36b4a7[a5_0x1a96('0x22')](a5_0x1a96('0xd'),a5_0x1a96('0xe'))['isEmail']();_0x36b4a7[a5_0x1a96('0x22')](a5_0x1a96('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x1a96('0x23')]({'min':0x4});_0x36b4a7[a5_0x1a96('0x22')](a5_0x1a96('0x24'),a5_0x1a96('0x25'))[a5_0x1a96('0x26')](_0x36b4a7[a5_0x1a96('0x27')]['password']);_0x36b4a7[a5_0x1a96('0x12')](a5_0x1a96('0xd'))[a5_0x1a96('0x13')]({'gmail_remove_dots':![]});const _0x52ccd0=_0x36b4a7['validationErrors']();if(_0x52ccd0){_0x36b4a7[a5_0x1a96('0x19')](a5_0x1a96('0x15'),_0x52ccd0);return _0x45e543[a5_0x1a96('0x1b')]('/signup');}const _0x3df641=new User_1[(a5_0x1a96('0x17'))]({});User_1[a5_0x1a96('0x17')][a5_0x1a96('0x28')]({'email':_0x36b4a7['body']['email']},(_0xca92be,_0x5f01dd)=>{if(_0xca92be){return _0x396cf3(_0xca92be);}if(_0x5f01dd){_0x36b4a7[a5_0x1a96('0x19')](a5_0x1a96('0x15'),{'msg':a5_0x1a96('0x29')});return _0x45e543[a5_0x1a96('0x1b')]('/signup');}_0x3df641['save'](_0xca92be=>{if(_0xca92be){return _0x396cf3(_0xca92be);}_0x36b4a7['logIn'](_0x3df641,_0xca92be=>{if(_0xca92be){return _0x396cf3(_0xca92be);}_0x45e543['redirect']('/');});});});};exports[a5_0x1a96('0x2a')]=(_0x37b32a,_0xc6d3c2)=>{_0xc6d3c2['render'](a5_0x1a96('0x2b'),{'title':a5_0x1a96('0x2c')});};exports[a5_0x1a96('0x2d')]=(_0x33b3b3,_0x4efa6f,_0x5f263e)=>{_0x33b3b3[a5_0x1a96('0x22')](a5_0x1a96('0xd'),a5_0x1a96('0x2e'))[a5_0x1a96('0x2f')]();_0x33b3b3[a5_0x1a96('0x12')](a5_0x1a96('0xd'))[a5_0x1a96('0x13')]({'gmail_remove_dots':![]});const _0x16a8de=_0x33b3b3[a5_0x1a96('0x14')]();if(_0x16a8de){_0x33b3b3[a5_0x1a96('0x19')](a5_0x1a96('0x15'),_0x16a8de);return _0x4efa6f[a5_0x1a96('0x1b')]('/account');}User_1[a5_0x1a96('0x17')][a5_0x1a96('0x30')](_0x33b3b3[a5_0x1a96('0xa')]['id'],(_0x514c85,_0x217fca)=>{if(_0x514c85){return _0x5f263e(_0x514c85);}_0x217fca[a5_0x1a96('0xd')]=_0x33b3b3['body'][a5_0x1a96('0xd')]||'';_0x217fca[a5_0x1a96('0x31')][a5_0x1a96('0x32')]=_0x33b3b3['body'][a5_0x1a96('0x32')]||'';_0x217fca[a5_0x1a96('0x31')][a5_0x1a96('0x33')]=_0x33b3b3[a5_0x1a96('0x27')][a5_0x1a96('0x33')]||'';_0x217fca[a5_0x1a96('0x31')][a5_0x1a96('0x34')]=_0x33b3b3[a5_0x1a96('0x27')][a5_0x1a96('0x34')]||'';_0x217fca[a5_0x1a96('0x31')][a5_0x1a96('0x35')]=_0x33b3b3[a5_0x1a96('0x27')][a5_0x1a96('0x35')]||'';_0x217fca[a5_0x1a96('0x36')](_0x514c85=>{if(_0x514c85){if(_0x514c85['code']===0x2af8){_0x33b3b3[a5_0x1a96('0x19')]('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x4efa6f[a5_0x1a96('0x1b')](a5_0x1a96('0x37'));}return _0x5f263e(_0x514c85);}_0x33b3b3[a5_0x1a96('0x19')](a5_0x1a96('0x38'),{'msg':a5_0x1a96('0x39')});_0x4efa6f['redirect'](a5_0x1a96('0x37'));});});};exports[a5_0x1a96('0x3a')]=(_0x5273f6,_0x3c37d5,_0x28b0fd)=>{_0x5273f6[a5_0x1a96('0x22')]('password',a5_0x1a96('0x3b'))[a5_0x1a96('0x23')]({'min':0x4});_0x5273f6['assert'](a5_0x1a96('0x24'),a5_0x1a96('0x25'))['equals'](_0x5273f6['body'][a5_0x1a96('0xf')]);const _0x4fe865=_0x5273f6[a5_0x1a96('0x14')]();if(_0x4fe865){_0x5273f6[a5_0x1a96('0x19')](a5_0x1a96('0x15'),_0x4fe865);return _0x3c37d5[a5_0x1a96('0x1b')]('/account');}User_1[a5_0x1a96('0x17')][a5_0x1a96('0x30')](_0x5273f6[a5_0x1a96('0xa')]['id'],(_0x44a5e4,_0x3791e8)=>{if(_0x44a5e4){return _0x28b0fd(_0x44a5e4);}_0x3791e8[a5_0x1a96('0xf')]=_0x5273f6[a5_0x1a96('0x27')]['password'];_0x3791e8[a5_0x1a96('0x36')](_0x44a5e4=>{if(_0x44a5e4){return _0x28b0fd(_0x44a5e4);}_0x5273f6[a5_0x1a96('0x19')](a5_0x1a96('0x38'),{'msg':a5_0x1a96('0x3c')});_0x3c37d5['redirect'](a5_0x1a96('0x37'));});});};exports[a5_0x1a96('0x3d')]=(_0x4062a8,_0x22c232,_0x4748c1)=>{User_1[a5_0x1a96('0x17')][a5_0x1a96('0x3e')]({'_id':_0x4062a8['user']['id']},_0x3e7028=>{if(_0x3e7028){return _0x4748c1(_0x3e7028);}_0x4062a8['logout']();_0x4062a8[a5_0x1a96('0x19')](a5_0x1a96('0x3f'),{'msg':a5_0x1a96('0x40')});_0x22c232[a5_0x1a96('0x1b')]('/');});};exports[a5_0x1a96('0x41')]=(_0x3e4dd6,_0x565efe,_0x24541a)=>{const _0x4a5f37=_0x3e4dd6[a5_0x1a96('0x42')][a5_0x1a96('0x43')];User_1[a5_0x1a96('0x17')][a5_0x1a96('0x30')](_0x3e4dd6[a5_0x1a96('0xa')]['id'],(_0x1fbb1f,_0x555204)=>{if(_0x1fbb1f){return _0x24541a(_0x1fbb1f);}_0x555204[_0x4a5f37]=undefined;_0x555204['tokens']=_0x555204[a5_0x1a96('0x44')][a5_0x1a96('0x45')](_0x3bf8f2=>_0x3bf8f2[a5_0x1a96('0x46')]!==_0x4a5f37);_0x555204[a5_0x1a96('0x36')](_0x1fbb1f=>{if(_0x1fbb1f){return _0x24541a(_0x1fbb1f);}_0x3e4dd6[a5_0x1a96('0x19')](a5_0x1a96('0x3f'),{'msg':_0x4a5f37+a5_0x1a96('0x47')});_0x565efe[a5_0x1a96('0x1b')](a5_0x1a96('0x37'));});});};exports['getReset']=(_0x470cec,_0x426ab8,_0x1ad300)=>{if(_0x470cec['isAuthenticated']()){return _0x426ab8[a5_0x1a96('0x1b')]('/');}User_1[a5_0x1a96('0x17')][a5_0x1a96('0x28')]({'passwordResetToken':_0x470cec[a5_0x1a96('0x42')][a5_0x1a96('0x48')]})['where'](a5_0x1a96('0x49'))['gt'](Date['now']())[a5_0x1a96('0x4a')]((_0x13c787,_0x2b56f2)=>{if(_0x13c787){return _0x1ad300(_0x13c787);}if(!_0x2b56f2){_0x470cec[a5_0x1a96('0x19')](a5_0x1a96('0x15'),{'msg':a5_0x1a96('0x4b')});return _0x426ab8[a5_0x1a96('0x1b')](a5_0x1a96('0x4c'));}_0x426ab8[a5_0x1a96('0x1f')]('account/reset',{'title':a5_0x1a96('0x4d')});});};exports[a5_0x1a96('0x4e')]=(_0x2c3f41,_0xaf975d,_0xbdc9a)=>{_0x2c3f41[a5_0x1a96('0x22')]('password',a5_0x1a96('0x4f'))['len']({'min':0x4});_0x2c3f41[a5_0x1a96('0x22')](a5_0x1a96('0x50'),a5_0x1a96('0x51'))['equals'](_0x2c3f41[a5_0x1a96('0x27')][a5_0x1a96('0xf')]);const _0x534bf0=_0x2c3f41[a5_0x1a96('0x14')]();if(_0x534bf0){_0x2c3f41['flash'](a5_0x1a96('0x15'),_0x534bf0);return _0xaf975d[a5_0x1a96('0x1b')](a5_0x1a96('0x52'));}async_1[a5_0x1a96('0x17')]['waterfall']([function resetPassword(_0x1d77a1){User_1['default']['findOne']({'passwordResetToken':_0x2c3f41[a5_0x1a96('0x42')]['token']})['where'](a5_0x1a96('0x49'))['gt'](Date[a5_0x1a96('0x53')]())[a5_0x1a96('0x4a')]((_0x44c1f5,_0x39c3e9)=>{if(_0x44c1f5){return _0xbdc9a(_0x44c1f5);}if(!_0x39c3e9){_0x2c3f41[a5_0x1a96('0x19')](a5_0x1a96('0x15'),{'msg':a5_0x1a96('0x4b')});return _0xaf975d['redirect'](a5_0x1a96('0x52'));}_0x39c3e9[a5_0x1a96('0xf')]=_0x2c3f41['body'][a5_0x1a96('0xf')];_0x39c3e9[a5_0x1a96('0x54')]=undefined;_0x39c3e9['passwordResetExpires']=undefined;_0x39c3e9[a5_0x1a96('0x36')](_0x44c1f5=>{if(_0x44c1f5){return _0xbdc9a(_0x44c1f5);}_0x2c3f41[a5_0x1a96('0x1c')](_0x39c3e9,_0x44c1f5=>{_0x1d77a1(_0x44c1f5,_0x39c3e9);});});});},function sendResetPasswordEmail(_0x21fd2d,_0x507781){const _0x1caf12=nodemailer_1[a5_0x1a96('0x17')][a5_0x1a96('0x55')]({'service':'SendGrid','auth':{'user':process[a5_0x1a96('0x56')]['SENDGRID_USER'],'pass':process[a5_0x1a96('0x56')][a5_0x1a96('0x57')]}});const _0xa3829b={'to':_0x21fd2d[a5_0x1a96('0xd')],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x1a96('0x58')+_0x21fd2d[a5_0x1a96('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x1caf12[a5_0x1a96('0x59')](_0xa3829b,_0x141e99=>{_0x2c3f41['flash'](a5_0x1a96('0x38'),{'msg':a5_0x1a96('0x5a')});_0x507781(_0x141e99);});}],_0x386f3e=>{if(_0x386f3e){return _0xbdc9a(_0x386f3e);}_0xaf975d[a5_0x1a96('0x1b')]('/');});};exports[a5_0x1a96('0x5b')]=(_0x534114,_0x5d8c58)=>{if(_0x534114[a5_0x1a96('0x5c')]()){return _0x5d8c58[a5_0x1a96('0x1b')]('/');}_0x5d8c58[a5_0x1a96('0x1f')]('account/forgot',{'title':a5_0x1a96('0x5d')});};exports['postForgot']=(_0x389b8c,_0x2e38b7,_0x2a7ba5)=>{_0x389b8c[a5_0x1a96('0x22')]('email',a5_0x1a96('0x2e'))[a5_0x1a96('0x2f')]();_0x389b8c[a5_0x1a96('0x12')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x32c52f=_0x389b8c[a5_0x1a96('0x14')]();if(_0x32c52f){_0x389b8c['flash'](a5_0x1a96('0x15'),_0x32c52f);return _0x2e38b7['redirect'](a5_0x1a96('0x4c'));}async_1[a5_0x1a96('0x17')][a5_0x1a96('0x5e')]([function createRandomToken(_0x483874){crypto_1[a5_0x1a96('0x17')][a5_0x1a96('0x5f')](0x10,(_0x3c7d89,_0x482dbc)=>{const _0x14338a=_0x482dbc[a5_0x1a96('0x60')](a5_0x1a96('0x61'));_0x483874(_0x3c7d89,_0x14338a);});},function setRandomToken(_0x5ab890,_0x4d436c){User_1[a5_0x1a96('0x17')]['findOne']({'email':_0x389b8c[a5_0x1a96('0x27')][a5_0x1a96('0xd')]},(_0x31c44f,_0x2e0118)=>{if(_0x31c44f){return _0x4d436c(_0x31c44f);}if(!_0x2e0118){_0x389b8c['flash']('errors',{'msg':a5_0x1a96('0x62')});return _0x2e38b7['redirect']('/forgot');}_0x2e0118['passwordResetToken']=_0x5ab890;_0x2e0118[a5_0x1a96('0x49')]=Date[a5_0x1a96('0x53')]()+0x36ee80;_0x2e0118[a5_0x1a96('0x36')](_0x31c44f=>{_0x4d436c(_0x31c44f,_0x5ab890,_0x2e0118);});});},function sendForgotPasswordEmail(_0x396ac8,_0x54b72e,_0x5b7537){const _0x35f391=nodemailer_1[a5_0x1a96('0x17')]['createTransport']({'service':a5_0x1a96('0x63'),'auth':{'user':process[a5_0x1a96('0x56')][a5_0x1a96('0x64')],'pass':process[a5_0x1a96('0x56')]['SENDGRID_PASSWORD']}});const _0x5d2410={'to':_0x54b72e[a5_0x1a96('0xd')],'from':a5_0x1a96('0x65'),'subject':a5_0x1a96('0x66'),'text':a5_0x1a96('0x67')+_0x389b8c[a5_0x1a96('0x68')]['host']+a5_0x1a96('0x69')+_0x396ac8+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x35f391[a5_0x1a96('0x59')](_0x5d2410,_0x506588=>{_0x389b8c[a5_0x1a96('0x19')](a5_0x1a96('0x3f'),{'msg':a5_0x1a96('0x6a')+_0x54b72e[a5_0x1a96('0xd')]+a5_0x1a96('0x6b')});_0x5b7537(_0x506588);});}],_0x5b58d3=>{if(_0x5b58d3){return _0x2a7ba5(_0x5b58d3);}_0x2e38b7[a5_0x1a96('0x1b')](a5_0x1a96('0x4c'));});};