var a5_0x5de0=['Account\x20Management','postUpdateProfile','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','tokens','filter','kind','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','account/forgot','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','/forgot','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','defineProperty','__esModule','crypto','passport','../models/User','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','success','returnTo','logout','getSignup','account/signup','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','body','/signup','save','getAccount','account/profile'];(function(_0xf0e450,_0x169c47){var _0xd660e6=function(_0x33cbd2){while(--_0x33cbd2){_0xf0e450['push'](_0xf0e450['shift']());}};_0xd660e6(++_0x169c47);}(a5_0x5de0,0x17b));var a5_0x4179=function(_0x258780,_0x1d5296){_0x258780=_0x258780-0x0;var _0x144626=a5_0x5de0[_0x258780];return _0x144626;};'use strict';var __importDefault=this&&this[a5_0x4179('0x0')]||function(_0x28f6e4){return _0x28f6e4&&_0x28f6e4['__esModule']?_0x28f6e4:{'default':_0x28f6e4};};Object[a5_0x4179('0x1')](exports,a5_0x4179('0x2'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x4179('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x4179('0x4')));const User_1=__importDefault(require(a5_0x4179('0x5')));const request=require(a5_0x4179('0x6'));exports[a5_0x4179('0x7')]=(_0xa272fc,_0x8a0fc5)=>{if(_0xa272fc[a5_0x4179('0x8')]){return _0x8a0fc5[a5_0x4179('0x9')]('/');}_0x8a0fc5[a5_0x4179('0xa')]('account/login',{'title':a5_0x4179('0xb')});};exports[a5_0x4179('0xc')]=(_0x138bd8,_0x939505,_0x1f1aad)=>{_0x138bd8[a5_0x4179('0xd')]('email',a5_0x4179('0xe'))[a5_0x4179('0xf')]();_0x138bd8['assert'](a5_0x4179('0x10'),a5_0x4179('0x11'))[a5_0x4179('0x12')]();_0x138bd8[a5_0x4179('0x13')](a5_0x4179('0x14'))[a5_0x4179('0x15')]({'gmail_remove_dots':![]});const _0x51fa84=_0x138bd8[a5_0x4179('0x16')]();if(_0x51fa84){_0x138bd8[a5_0x4179('0x17')](a5_0x4179('0x18'),_0x51fa84);return _0x939505[a5_0x4179('0x9')](a5_0x4179('0x19'));}passport_1[a5_0x4179('0x1a')][a5_0x4179('0x1b')](a5_0x4179('0x1c'),(_0x1758fa,_0xce059a,_0x140b64)=>{if(_0x1758fa){return _0x1f1aad(_0x1758fa);}if(!_0xce059a){_0x138bd8['flash'](a5_0x4179('0x18'),_0x140b64[a5_0x4179('0x1d')]);return _0x939505[a5_0x4179('0x9')]('/login');}_0x138bd8[a5_0x4179('0x1e')](_0xce059a,_0x1758fa=>{if(_0x1758fa){return _0x1f1aad(_0x1758fa);}_0x138bd8[a5_0x4179('0x17')](a5_0x4179('0x1f'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x939505[a5_0x4179('0x9')](_0x138bd8['session'][a5_0x4179('0x20')]||'/');});})(_0x138bd8,_0x939505,_0x1f1aad);};exports[a5_0x4179('0x21')]=(_0x1be784,_0x365ed1)=>{_0x1be784[a5_0x4179('0x21')]();_0x365ed1[a5_0x4179('0x9')]('/');};exports[a5_0x4179('0x22')]=(_0x2a8b9b,_0x3056de)=>{if(_0x2a8b9b[a5_0x4179('0x8')]){return _0x3056de[a5_0x4179('0x9')]('/');}_0x3056de[a5_0x4179('0xa')](a5_0x4179('0x23'),{'title':'Create\x20Account'});};exports[a5_0x4179('0x24')]=(_0x5285ba,_0xb426b6,_0x474b11)=>{_0x5285ba[a5_0x4179('0xd')]('email',a5_0x4179('0xe'))[a5_0x4179('0xf')]();_0x5285ba[a5_0x4179('0xd')]('password',a5_0x4179('0x25'))[a5_0x4179('0x26')]({'min':0x4});_0x5285ba[a5_0x4179('0xd')](a5_0x4179('0x27'),'Passwords\x20do\x20not\x20match')['equals'](_0x5285ba[a5_0x4179('0x28')][a5_0x4179('0x10')]);_0x5285ba[a5_0x4179('0x13')](a5_0x4179('0x14'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1a8a4e=_0x5285ba[a5_0x4179('0x16')]();if(_0x1a8a4e){_0x5285ba[a5_0x4179('0x17')](a5_0x4179('0x18'),_0x1a8a4e);return _0xb426b6[a5_0x4179('0x9')](a5_0x4179('0x29'));}const _0x578c01=new User_1[(a5_0x4179('0x1a'))]({'email':_0x5285ba[a5_0x4179('0x28')][a5_0x4179('0x14')],'password':_0x5285ba[a5_0x4179('0x28')][a5_0x4179('0x10')]});User_1[a5_0x4179('0x1a')]['findOne']({'email':_0x5285ba[a5_0x4179('0x28')][a5_0x4179('0x14')]},(_0x34b523,_0x1832e1)=>{if(_0x34b523){return _0x474b11(_0x34b523);}if(_0x1832e1){_0x5285ba[a5_0x4179('0x17')](a5_0x4179('0x18'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0xb426b6[a5_0x4179('0x9')](a5_0x4179('0x29'));}_0x578c01[a5_0x4179('0x2a')](_0x34b523=>{if(_0x34b523){return _0x474b11(_0x34b523);}_0x5285ba[a5_0x4179('0x1e')](_0x578c01,_0x34b523=>{if(_0x34b523){return _0x474b11(_0x34b523);}_0xb426b6[a5_0x4179('0x9')]('/');});});});};exports[a5_0x4179('0x2b')]=(_0x1a00c4,_0x41c450)=>{_0x41c450[a5_0x4179('0xa')](a5_0x4179('0x2c'),{'title':a5_0x4179('0x2d')});};exports[a5_0x4179('0x2e')]=(_0x588820,_0xa623e5,_0x410cbb)=>{_0x588820['assert'](a5_0x4179('0x14'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x588820[a5_0x4179('0x13')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x72f864=_0x588820[a5_0x4179('0x16')]();if(_0x72f864){_0x588820['flash'](a5_0x4179('0x18'),_0x72f864);return _0xa623e5[a5_0x4179('0x9')]('/account');}User_1['default'][a5_0x4179('0x2f')](_0x588820[a5_0x4179('0x8')]['id'],(_0x29ee1e,_0x2e8135)=>{if(_0x29ee1e){return _0x410cbb(_0x29ee1e);}_0x2e8135['email']=_0x588820[a5_0x4179('0x28')][a5_0x4179('0x14')]||'';_0x2e8135[a5_0x4179('0x30')][a5_0x4179('0x31')]=_0x588820[a5_0x4179('0x28')]['name']||'';_0x2e8135[a5_0x4179('0x30')][a5_0x4179('0x32')]=_0x588820[a5_0x4179('0x28')]['gender']||'';_0x2e8135[a5_0x4179('0x30')][a5_0x4179('0x33')]=_0x588820[a5_0x4179('0x28')][a5_0x4179('0x33')]||'';_0x2e8135[a5_0x4179('0x30')][a5_0x4179('0x34')]=_0x588820[a5_0x4179('0x28')][a5_0x4179('0x34')]||'';_0x2e8135['save'](_0x29ee1e=>{if(_0x29ee1e){if(_0x29ee1e[a5_0x4179('0x35')]===0x2af8){_0x588820[a5_0x4179('0x17')](a5_0x4179('0x18'),{'msg':a5_0x4179('0x36')});return _0xa623e5[a5_0x4179('0x9')](a5_0x4179('0x37'));}return _0x410cbb(_0x29ee1e);}_0x588820[a5_0x4179('0x17')]('success',{'msg':a5_0x4179('0x38')});_0xa623e5['redirect']('/account');});});};exports[a5_0x4179('0x39')]=(_0x4d88af,_0x3ffdd8,_0x2a4748)=>{_0x4d88af[a5_0x4179('0xd')](a5_0x4179('0x10'),a5_0x4179('0x25'))[a5_0x4179('0x26')]({'min':0x4});_0x4d88af[a5_0x4179('0xd')](a5_0x4179('0x27'),a5_0x4179('0x3a'))[a5_0x4179('0x3b')](_0x4d88af[a5_0x4179('0x28')][a5_0x4179('0x10')]);const _0x445b88=_0x4d88af[a5_0x4179('0x16')]();if(_0x445b88){_0x4d88af[a5_0x4179('0x17')](a5_0x4179('0x18'),_0x445b88);return _0x3ffdd8[a5_0x4179('0x9')](a5_0x4179('0x37'));}User_1[a5_0x4179('0x1a')]['findById'](_0x4d88af[a5_0x4179('0x8')]['id'],(_0x2fb044,_0x57e086)=>{if(_0x2fb044){return _0x2a4748(_0x2fb044);}_0x57e086[a5_0x4179('0x10')]=_0x4d88af[a5_0x4179('0x28')]['password'];_0x57e086[a5_0x4179('0x2a')](_0x2fb044=>{if(_0x2fb044){return _0x2a4748(_0x2fb044);}_0x4d88af['flash'](a5_0x4179('0x1f'),{'msg':a5_0x4179('0x3c')});_0x3ffdd8[a5_0x4179('0x9')](a5_0x4179('0x37'));});});};exports[a5_0x4179('0x3d')]=(_0x468c30,_0x42e5e4,_0x1305e2)=>{User_1[a5_0x4179('0x1a')][a5_0x4179('0x3e')]({'_id':_0x468c30[a5_0x4179('0x8')]['id']},_0xbeb909=>{if(_0xbeb909){return _0x1305e2(_0xbeb909);}_0x468c30[a5_0x4179('0x21')]();_0x468c30['flash'](a5_0x4179('0x3f'),{'msg':a5_0x4179('0x40')});_0x42e5e4[a5_0x4179('0x9')]('/');});};exports['getOauthUnlink']=(_0x5c107d,_0x488937,_0x46a091)=>{const _0x132691=_0x5c107d[a5_0x4179('0x41')]['provider'];User_1[a5_0x4179('0x1a')]['findById'](_0x5c107d[a5_0x4179('0x8')]['id'],(_0xef4024,_0x5e9d36)=>{if(_0xef4024){return _0x46a091(_0xef4024);}_0x5e9d36[_0x132691]=undefined;_0x5e9d36['tokens']=_0x5e9d36[a5_0x4179('0x42')][a5_0x4179('0x43')](_0x4fcca2=>_0x4fcca2[a5_0x4179('0x44')]!==_0x132691);_0x5e9d36[a5_0x4179('0x2a')](_0xef4024=>{if(_0xef4024){return _0x46a091(_0xef4024);}_0x5c107d[a5_0x4179('0x17')](a5_0x4179('0x3f'),{'msg':_0x132691+'\x20account\x20has\x20been\x20unlinked.'});_0x488937[a5_0x4179('0x9')](a5_0x4179('0x37'));});});};exports[a5_0x4179('0x45')]=(_0x32db1b,_0x179d04,_0x2a4570)=>{if(_0x32db1b[a5_0x4179('0x46')]()){return _0x179d04[a5_0x4179('0x9')]('/');}User_1[a5_0x4179('0x1a')][a5_0x4179('0x47')]({'passwordResetToken':_0x32db1b['params'][a5_0x4179('0x48')]})[a5_0x4179('0x49')](a5_0x4179('0x4a'))['gt'](Date[a5_0x4179('0x4b')]())[a5_0x4179('0x4c')]((_0x5144fb,_0x4d2c52)=>{if(_0x5144fb){return _0x2a4570(_0x5144fb);}if(!_0x4d2c52){_0x32db1b['flash'](a5_0x4179('0x18'),{'msg':a5_0x4179('0x4d')});return _0x179d04['redirect']('/forgot');}_0x179d04['render'](a5_0x4179('0x4e'),{'title':a5_0x4179('0x4f')});});};exports['postReset']=(_0x4ed33e,_0x2a5eb3,_0x2decb0)=>{_0x4ed33e[a5_0x4179('0xd')](a5_0x4179('0x10'),a5_0x4179('0x50'))[a5_0x4179('0x26')]({'min':0x4});_0x4ed33e[a5_0x4179('0xd')]('confirm',a5_0x4179('0x51'))[a5_0x4179('0x3b')](_0x4ed33e['body'][a5_0x4179('0x10')]);const _0x41e88c=_0x4ed33e[a5_0x4179('0x16')]();if(_0x41e88c){_0x4ed33e[a5_0x4179('0x17')]('errors',_0x41e88c);return _0x2a5eb3['redirect'](a5_0x4179('0x52'));}async_1['default'][a5_0x4179('0x53')]([function resetPassword(_0x52152c){User_1['default']['findOne']({'passwordResetToken':_0x4ed33e[a5_0x4179('0x41')][a5_0x4179('0x48')]})[a5_0x4179('0x49')](a5_0x4179('0x4a'))['gt'](Date[a5_0x4179('0x4b')]())[a5_0x4179('0x4c')]((_0x21855e,_0x4b6cb6)=>{if(_0x21855e){return _0x2decb0(_0x21855e);}if(!_0x4b6cb6){_0x4ed33e['flash'](a5_0x4179('0x18'),{'msg':a5_0x4179('0x4d')});return _0x2a5eb3[a5_0x4179('0x9')](a5_0x4179('0x52'));}_0x4b6cb6[a5_0x4179('0x10')]=_0x4ed33e['body']['password'];_0x4b6cb6[a5_0x4179('0x54')]=undefined;_0x4b6cb6[a5_0x4179('0x4a')]=undefined;_0x4b6cb6[a5_0x4179('0x2a')](_0x21855e=>{if(_0x21855e){return _0x2decb0(_0x21855e);}_0x4ed33e[a5_0x4179('0x1e')](_0x4b6cb6,_0x21855e=>{_0x52152c(_0x21855e,_0x4b6cb6);});});});},function sendResetPasswordEmail(_0x5a4dd8,_0x46bb2b){const _0x3a68ae=nodemailer_1[a5_0x4179('0x1a')][a5_0x4179('0x55')]({'service':'SendGrid','auth':{'user':process[a5_0x4179('0x56')][a5_0x4179('0x57')],'pass':process['env'][a5_0x4179('0x58')]}});const _0x48d296={'to':_0x5a4dd8[a5_0x4179('0x14')],'from':a5_0x4179('0x59'),'subject':a5_0x4179('0x5a'),'text':a5_0x4179('0x5b')+_0x5a4dd8[a5_0x4179('0x14')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x3a68ae[a5_0x4179('0x5c')](_0x48d296,_0x2b9219=>{_0x4ed33e[a5_0x4179('0x17')](a5_0x4179('0x1f'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x46bb2b(_0x2b9219);});}],_0x3991b2=>{if(_0x3991b2){return _0x2decb0(_0x3991b2);}_0x2a5eb3[a5_0x4179('0x9')]('/');});};exports['getForgot']=(_0x50ccaa,_0x3d49b4)=>{if(_0x50ccaa[a5_0x4179('0x46')]()){return _0x3d49b4['redirect']('/');}_0x3d49b4[a5_0x4179('0xa')](a5_0x4179('0x5d'),{'title':'Forgot\x20Password'});};exports[a5_0x4179('0x5e')]=(_0x15c64a,_0x487327,_0x5b6a2b)=>{_0x15c64a[a5_0x4179('0xd')](a5_0x4179('0x14'),a5_0x4179('0x5f'))[a5_0x4179('0xf')]();_0x15c64a['sanitize'](a5_0x4179('0x14'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x265461=_0x15c64a[a5_0x4179('0x16')]();if(_0x265461){_0x15c64a['flash'](a5_0x4179('0x18'),_0x265461);return _0x487327[a5_0x4179('0x9')](a5_0x4179('0x60'));}async_1[a5_0x4179('0x1a')][a5_0x4179('0x53')]([function createRandomToken(_0xaf11ba){crypto_1[a5_0x4179('0x1a')]['randomBytes'](0x10,(_0x51d145,_0x46de9a)=>{const _0xc37798=_0x46de9a['toString']('hex');_0xaf11ba(_0x51d145,_0xc37798);});},function setRandomToken(_0x137813,_0x111d62){User_1[a5_0x4179('0x1a')][a5_0x4179('0x47')]({'email':_0x15c64a[a5_0x4179('0x28')][a5_0x4179('0x14')]},(_0x11663f,_0x49dc98)=>{if(_0x11663f){return _0x111d62(_0x11663f);}if(!_0x49dc98){_0x15c64a['flash'](a5_0x4179('0x18'),{'msg':a5_0x4179('0x61')});return _0x487327[a5_0x4179('0x9')](a5_0x4179('0x60'));}_0x49dc98[a5_0x4179('0x54')]=_0x137813;_0x49dc98[a5_0x4179('0x4a')]=Date[a5_0x4179('0x4b')]()+0x36ee80;_0x49dc98[a5_0x4179('0x2a')](_0x11663f=>{_0x111d62(_0x11663f,_0x137813,_0x49dc98);});});},function sendForgotPasswordEmail(_0x55d2da,_0x30d7bd,_0x58e917){const _0x2fadc3=nodemailer_1[a5_0x4179('0x1a')][a5_0x4179('0x55')]({'service':a5_0x4179('0x62'),'auth':{'user':process['env'][a5_0x4179('0x57')],'pass':process[a5_0x4179('0x56')][a5_0x4179('0x58')]}});const _0x483b74={'to':_0x30d7bd[a5_0x4179('0x14')],'from':'hackathon@starter.com','subject':a5_0x4179('0x63'),'text':a5_0x4179('0x64')+_0x15c64a[a5_0x4179('0x65')][a5_0x4179('0x66')]+a5_0x4179('0x67')+_0x55d2da+a5_0x4179('0x68')};_0x2fadc3[a5_0x4179('0x5c')](_0x483b74,_0x120708=>{_0x15c64a[a5_0x4179('0x17')]('info',{'msg':a5_0x4179('0x69')+_0x30d7bd[a5_0x4179('0x14')]+'\x20with\x20further\x20instructions.'});_0x58e917(_0x120708);});}],_0xc9e78f=>{if(_0xc9e78f){return _0x5b6a2b(_0xc9e78f);}_0x487327['redirect']('/forgot');});};