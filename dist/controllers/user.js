var a5_0x1219=['account/login','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','sanitize','validationErrors','flash','errors','/login','default','authenticate','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','user','account/signup','postSignup','email','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','/signup','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','len','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','waterfall','back','createTransport','SENDGRID_USER','env','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','toString','passwordResetToken','SendGrid','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x20with\x20further\x20instructions.','defineProperty','__esModule','async','crypto','nodemailer','passport','express-validator','getLogin','redirect','render'];(function(_0x4bd822,_0x2bd6f7){var _0xb4bdb3=function(_0x1d68f6){while(--_0x1d68f6){_0x4bd822['push'](_0x4bd822['shift']());}};_0xb4bdb3(++_0x2bd6f7);}(a5_0x1219,0x192));var a5_0x19e7=function(_0x146738,_0x4036a5){_0x146738=_0x146738-0x0;var _0x49bdf0=a5_0x1219[_0x146738];return _0x49bdf0;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x11d3ba){return _0x11d3ba&&_0x11d3ba['__esModule']?_0x11d3ba:{'default':_0x11d3ba};};Object[a5_0x19e7('0x0')](exports,a5_0x19e7('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x19e7('0x2')));const crypto_1=__importDefault(require(a5_0x19e7('0x3')));const nodemailer_1=__importDefault(require(a5_0x19e7('0x4')));const passport_1=__importDefault(require(a5_0x19e7('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x19e7('0x6'));exports[a5_0x19e7('0x7')]=(_0x405618,_0x2bde83)=>{if(_0x405618['user']){return _0x2bde83[a5_0x19e7('0x8')]('/');}_0x2bde83[a5_0x19e7('0x9')](a5_0x19e7('0xa'),{'title':a5_0x19e7('0xb')});};exports[a5_0x19e7('0xc')]=(_0x1ce03b,_0x484b9d,_0x4d9243)=>{_0x1ce03b[a5_0x19e7('0xd')]('email',a5_0x19e7('0xe'))[a5_0x19e7('0xf')]();_0x1ce03b[a5_0x19e7('0xd')]('password',a5_0x19e7('0x10'))['notEmpty']();_0x1ce03b[a5_0x19e7('0x11')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x478f30=_0x1ce03b[a5_0x19e7('0x12')]();if(_0x478f30){_0x1ce03b[a5_0x19e7('0x13')](a5_0x19e7('0x14'),_0x478f30);return _0x484b9d[a5_0x19e7('0x8')](a5_0x19e7('0x15'));}passport_1[a5_0x19e7('0x16')][a5_0x19e7('0x17')]('local',(_0x42bb45,_0x16befc,_0x29db54)=>{if(_0x42bb45){return _0x4d9243(_0x42bb45);}if(!_0x16befc){_0x1ce03b[a5_0x19e7('0x13')]('errors',_0x29db54['message']);return _0x484b9d[a5_0x19e7('0x8')]('/login');}_0x1ce03b['logIn'](_0x16befc,_0x42bb45=>{if(_0x42bb45){return _0x4d9243(_0x42bb45);}_0x1ce03b[a5_0x19e7('0x13')](a5_0x19e7('0x18'),{'msg':a5_0x19e7('0x19')});_0x484b9d[a5_0x19e7('0x8')](_0x1ce03b['session'][a5_0x19e7('0x1a')]||'/');});})(_0x1ce03b,_0x484b9d,_0x4d9243);};exports[a5_0x19e7('0x1b')]=(_0x291f2d,_0x119052)=>{_0x291f2d[a5_0x19e7('0x1b')]();_0x119052[a5_0x19e7('0x8')]('/');};exports[a5_0x19e7('0x1c')]=(_0x42609a,_0x541fcb)=>{if(_0x42609a[a5_0x19e7('0x1d')]){return _0x541fcb[a5_0x19e7('0x8')]('/');}_0x541fcb['render'](a5_0x19e7('0x1e'),{'title':'Create\x20Account'});};exports[a5_0x19e7('0x1f')]=(_0xf41bb4,_0x511eb8,_0x1358b9)=>{_0xf41bb4[a5_0x19e7('0xd')](a5_0x19e7('0x20'),a5_0x19e7('0xe'))[a5_0x19e7('0xf')]();_0xf41bb4[a5_0x19e7('0xd')](a5_0x19e7('0x21'),a5_0x19e7('0x22'))['len']({'min':0x4});_0xf41bb4[a5_0x19e7('0xd')]('confirmPassword',a5_0x19e7('0x23'))[a5_0x19e7('0x24')](_0xf41bb4['body'][a5_0x19e7('0x21')]);_0xf41bb4[a5_0x19e7('0x11')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x2deb8a=_0xf41bb4[a5_0x19e7('0x12')]();if(_0x2deb8a){_0xf41bb4[a5_0x19e7('0x13')]('errors',_0x2deb8a);return _0x511eb8[a5_0x19e7('0x8')](a5_0x19e7('0x25'));}const _0x4ef2f9=new User_1[(a5_0x19e7('0x16'))]({'email':_0xf41bb4[a5_0x19e7('0x26')][a5_0x19e7('0x20')],'password':_0xf41bb4['body'][a5_0x19e7('0x21')]});User_1[a5_0x19e7('0x16')][a5_0x19e7('0x27')]({'email':_0xf41bb4[a5_0x19e7('0x26')][a5_0x19e7('0x20')]},(_0xf3d8b7,_0x26adbf)=>{if(_0xf3d8b7){return _0x1358b9(_0xf3d8b7);}if(_0x26adbf){_0xf41bb4[a5_0x19e7('0x13')](a5_0x19e7('0x14'),{'msg':a5_0x19e7('0x28')});return _0x511eb8[a5_0x19e7('0x8')](a5_0x19e7('0x25'));}_0x4ef2f9[a5_0x19e7('0x29')](_0xf3d8b7=>{if(_0xf3d8b7){return _0x1358b9(_0xf3d8b7);}_0xf41bb4[a5_0x19e7('0x2a')](_0x4ef2f9,_0xf3d8b7=>{if(_0xf3d8b7){return _0x1358b9(_0xf3d8b7);}_0x511eb8['redirect']('/');});});});};exports['getAccount']=(_0x3f9590,_0x466a65)=>{_0x466a65[a5_0x19e7('0x9')](a5_0x19e7('0x2b'),{'title':a5_0x19e7('0x2c')});};exports[a5_0x19e7('0x2d')]=(_0x15b1c0,_0x136745,_0x8cc34)=>{_0x15b1c0['assert']('email',a5_0x19e7('0x2e'))[a5_0x19e7('0xf')]();_0x15b1c0[a5_0x19e7('0x11')](a5_0x19e7('0x20'))[a5_0x19e7('0x2f')]({'gmail_remove_dots':![]});const _0x513367=_0x15b1c0['validationErrors']();if(_0x513367){_0x15b1c0[a5_0x19e7('0x13')](a5_0x19e7('0x14'),_0x513367);return _0x136745[a5_0x19e7('0x8')](a5_0x19e7('0x30'));}User_1[a5_0x19e7('0x16')][a5_0x19e7('0x31')](_0x15b1c0[a5_0x19e7('0x1d')]['id'],(_0x577621,_0x2d459d)=>{if(_0x577621){return _0x8cc34(_0x577621);}_0x2d459d[a5_0x19e7('0x20')]=_0x15b1c0[a5_0x19e7('0x26')][a5_0x19e7('0x20')]||'';_0x2d459d[a5_0x19e7('0x32')]['name']=_0x15b1c0[a5_0x19e7('0x26')][a5_0x19e7('0x33')]||'';_0x2d459d[a5_0x19e7('0x32')][a5_0x19e7('0x34')]=_0x15b1c0[a5_0x19e7('0x26')][a5_0x19e7('0x34')]||'';_0x2d459d[a5_0x19e7('0x32')]['location']=_0x15b1c0[a5_0x19e7('0x26')]['location']||'';_0x2d459d[a5_0x19e7('0x32')]['website']=_0x15b1c0[a5_0x19e7('0x26')][a5_0x19e7('0x35')]||'';_0x2d459d[a5_0x19e7('0x29')](_0x577621=>{if(_0x577621){if(_0x577621[a5_0x19e7('0x36')]===0x2af8){_0x15b1c0['flash'](a5_0x19e7('0x14'),{'msg':a5_0x19e7('0x37')});return _0x136745[a5_0x19e7('0x8')](a5_0x19e7('0x30'));}return _0x8cc34(_0x577621);}_0x15b1c0[a5_0x19e7('0x13')](a5_0x19e7('0x18'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x136745[a5_0x19e7('0x8')](a5_0x19e7('0x30'));});});};exports[a5_0x19e7('0x38')]=(_0xf5b593,_0x5016c8,_0xc9d9fc)=>{_0xf5b593[a5_0x19e7('0xd')]('password',a5_0x19e7('0x22'))[a5_0x19e7('0x39')]({'min':0x4});_0xf5b593['assert']('confirmPassword',a5_0x19e7('0x23'))[a5_0x19e7('0x24')](_0xf5b593['body'][a5_0x19e7('0x21')]);const _0x44c99a=_0xf5b593[a5_0x19e7('0x12')]();if(_0x44c99a){_0xf5b593[a5_0x19e7('0x13')](a5_0x19e7('0x14'),_0x44c99a);return _0x5016c8[a5_0x19e7('0x8')]('/account');}User_1[a5_0x19e7('0x16')][a5_0x19e7('0x31')](_0xf5b593[a5_0x19e7('0x1d')]['id'],(_0x150c5f,_0x4c69b8)=>{if(_0x150c5f){return _0xc9d9fc(_0x150c5f);}_0x4c69b8[a5_0x19e7('0x21')]=_0xf5b593['body']['password'];_0x4c69b8[a5_0x19e7('0x29')](_0x150c5f=>{if(_0x150c5f){return _0xc9d9fc(_0x150c5f);}_0xf5b593[a5_0x19e7('0x13')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x5016c8[a5_0x19e7('0x8')](a5_0x19e7('0x30'));});});};exports[a5_0x19e7('0x3a')]=(_0x4bd4ac,_0x3e3726,_0x43d2c4)=>{User_1[a5_0x19e7('0x16')][a5_0x19e7('0x3b')]({'_id':_0x4bd4ac[a5_0x19e7('0x1d')]['id']},_0x5b98f9=>{if(_0x5b98f9){return _0x43d2c4(_0x5b98f9);}_0x4bd4ac[a5_0x19e7('0x1b')]();_0x4bd4ac[a5_0x19e7('0x13')](a5_0x19e7('0x3c'),{'msg':a5_0x19e7('0x3d')});_0x3e3726[a5_0x19e7('0x8')]('/');});};exports['getOauthUnlink']=(_0x194196,_0x254a8c,_0x5a04f5)=>{const _0x182114=_0x194196[a5_0x19e7('0x3e')][a5_0x19e7('0x3f')];User_1[a5_0x19e7('0x16')][a5_0x19e7('0x31')](_0x194196['user']['id'],(_0x531443,_0x4e8463)=>{if(_0x531443){return _0x5a04f5(_0x531443);}_0x4e8463[_0x182114]=undefined;_0x4e8463[a5_0x19e7('0x40')]=_0x4e8463['tokens']['filter'](_0x198f11=>_0x198f11[a5_0x19e7('0x41')]!==_0x182114);_0x4e8463[a5_0x19e7('0x29')](_0x531443=>{if(_0x531443){return _0x5a04f5(_0x531443);}_0x194196[a5_0x19e7('0x13')](a5_0x19e7('0x3c'),{'msg':_0x182114+a5_0x19e7('0x42')});_0x254a8c[a5_0x19e7('0x8')]('/account');});});};exports['getReset']=(_0x556954,_0x4d95a6,_0x1a8aa3)=>{if(_0x556954[a5_0x19e7('0x43')]()){return _0x4d95a6[a5_0x19e7('0x8')]('/');}User_1[a5_0x19e7('0x16')][a5_0x19e7('0x27')]({'passwordResetToken':_0x556954[a5_0x19e7('0x3e')][a5_0x19e7('0x44')]})[a5_0x19e7('0x45')](a5_0x19e7('0x46'))['gt'](Date[a5_0x19e7('0x47')]())[a5_0x19e7('0x48')]((_0x254ef0,_0x56cd82)=>{if(_0x254ef0){return _0x1a8aa3(_0x254ef0);}if(!_0x56cd82){_0x556954[a5_0x19e7('0x13')](a5_0x19e7('0x14'),{'msg':a5_0x19e7('0x49')});return _0x4d95a6[a5_0x19e7('0x8')](a5_0x19e7('0x4a'));}_0x4d95a6[a5_0x19e7('0x9')](a5_0x19e7('0x4b'),{'title':a5_0x19e7('0x4c')});});};exports[a5_0x19e7('0x4d')]=(_0x36fd09,_0xb18a9a,_0x388f72)=>{_0x36fd09[a5_0x19e7('0xd')](a5_0x19e7('0x21'),a5_0x19e7('0x4e'))[a5_0x19e7('0x39')]({'min':0x4});_0x36fd09[a5_0x19e7('0xd')](a5_0x19e7('0x4f'),'Passwords\x20must\x20match.')[a5_0x19e7('0x24')](_0x36fd09[a5_0x19e7('0x26')]['password']);const _0x26d0d9=_0x36fd09['validationErrors']();if(_0x26d0d9){_0x36fd09['flash'](a5_0x19e7('0x14'),_0x26d0d9);return _0xb18a9a[a5_0x19e7('0x8')]('back');}async_1['default'][a5_0x19e7('0x50')]([function resetPassword(_0x1e5baf){User_1[a5_0x19e7('0x16')][a5_0x19e7('0x27')]({'passwordResetToken':_0x36fd09['params'][a5_0x19e7('0x44')]})[a5_0x19e7('0x45')](a5_0x19e7('0x46'))['gt'](Date[a5_0x19e7('0x47')]())[a5_0x19e7('0x48')]((_0x15dd6e,_0x3afe53)=>{if(_0x15dd6e){return _0x388f72(_0x15dd6e);}if(!_0x3afe53){_0x36fd09[a5_0x19e7('0x13')](a5_0x19e7('0x14'),{'msg':a5_0x19e7('0x49')});return _0xb18a9a['redirect'](a5_0x19e7('0x51'));}_0x3afe53[a5_0x19e7('0x21')]=_0x36fd09[a5_0x19e7('0x26')][a5_0x19e7('0x21')];_0x3afe53['passwordResetToken']=undefined;_0x3afe53[a5_0x19e7('0x46')]=undefined;_0x3afe53[a5_0x19e7('0x29')](_0x15dd6e=>{if(_0x15dd6e){return _0x388f72(_0x15dd6e);}_0x36fd09[a5_0x19e7('0x2a')](_0x3afe53,_0x15dd6e=>{_0x1e5baf(_0x15dd6e,_0x3afe53);});});});},function sendResetPasswordEmail(_0x1a2c42,_0x582123){const _0x505786=nodemailer_1[a5_0x19e7('0x16')][a5_0x19e7('0x52')]({'service':'SendGrid','auth':{'user':process['env'][a5_0x19e7('0x53')],'pass':process[a5_0x19e7('0x54')]['SENDGRID_PASSWORD']}});const _0x40873f={'to':_0x1a2c42[a5_0x19e7('0x20')],'from':a5_0x19e7('0x55'),'subject':a5_0x19e7('0x56'),'text':a5_0x19e7('0x57')+_0x1a2c42[a5_0x19e7('0x20')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x505786[a5_0x19e7('0x58')](_0x40873f,_0x1d7319=>{_0x36fd09[a5_0x19e7('0x13')](a5_0x19e7('0x18'),{'msg':a5_0x19e7('0x59')});_0x582123(_0x1d7319);});}],_0x68f901=>{if(_0x68f901){return _0x388f72(_0x68f901);}_0xb18a9a['redirect']('/');});};exports[a5_0x19e7('0x5a')]=(_0x26d54a,_0x28f237)=>{if(_0x26d54a['isAuthenticated']()){return _0x28f237[a5_0x19e7('0x8')]('/');}_0x28f237[a5_0x19e7('0x9')]('account/forgot',{'title':a5_0x19e7('0x5b')});};exports[a5_0x19e7('0x5c')]=(_0x419bf7,_0xe11a0a,_0x31312f)=>{_0x419bf7['assert'](a5_0x19e7('0x20'),a5_0x19e7('0x2e'))[a5_0x19e7('0xf')]();_0x419bf7['sanitize'](a5_0x19e7('0x20'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x552ff1=_0x419bf7[a5_0x19e7('0x12')]();if(_0x552ff1){_0x419bf7[a5_0x19e7('0x13')]('errors',_0x552ff1);return _0xe11a0a[a5_0x19e7('0x8')]('/forgot');}async_1[a5_0x19e7('0x16')][a5_0x19e7('0x50')]([function createRandomToken(_0x1235d3){crypto_1[a5_0x19e7('0x16')]['randomBytes'](0x10,(_0x15077c,_0x290e67)=>{const _0x3f03a8=_0x290e67[a5_0x19e7('0x5d')]('hex');_0x1235d3(_0x15077c,_0x3f03a8);});},function setRandomToken(_0x472517,_0x1a2708){User_1['default']['findOne']({'email':_0x419bf7['body'][a5_0x19e7('0x20')]},(_0x2a19d7,_0x368393)=>{if(_0x2a19d7){return _0x1a2708(_0x2a19d7);}if(!_0x368393){_0x419bf7[a5_0x19e7('0x13')](a5_0x19e7('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0xe11a0a[a5_0x19e7('0x8')](a5_0x19e7('0x4a'));}_0x368393[a5_0x19e7('0x5e')]=_0x472517;_0x368393[a5_0x19e7('0x46')]=Date[a5_0x19e7('0x47')]()+0x36ee80;_0x368393['save'](_0x2a19d7=>{_0x1a2708(_0x2a19d7,_0x472517,_0x368393);});});},function sendForgotPasswordEmail(_0xfade6d,_0x58ca27,_0x2028a4){const _0x3eaa17=nodemailer_1[a5_0x19e7('0x16')][a5_0x19e7('0x52')]({'service':a5_0x19e7('0x5f'),'auth':{'user':process[a5_0x19e7('0x54')][a5_0x19e7('0x53')],'pass':process[a5_0x19e7('0x54')][a5_0x19e7('0x60')]}});const _0x305f81={'to':_0x58ca27[a5_0x19e7('0x20')],'from':a5_0x19e7('0x61'),'subject':a5_0x19e7('0x62'),'text':a5_0x19e7('0x63')+_0x419bf7[a5_0x19e7('0x64')]['host']+a5_0x19e7('0x65')+_0xfade6d+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x3eaa17[a5_0x19e7('0x58')](_0x305f81,_0x313aac=>{_0x419bf7['flash'](a5_0x19e7('0x3c'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x58ca27[a5_0x19e7('0x20')]+a5_0x19e7('0x66')});_0x2028a4(_0x313aac);});}],_0x171e1e=>{if(_0x171e1e){return _0x31312f(_0x171e1e);}_0xe11a0a[a5_0x19e7('0x8')](a5_0x19e7('0x4a'));});};