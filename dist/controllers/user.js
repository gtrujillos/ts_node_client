var a5_0xf712=['createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__esModule','defineProperty','async','crypto','passport','../models/User','express-validator','getLogin','redirect','account/login','Login','postLogin','Email\x20is\x20not\x20valid','isEmail','assert','password','notEmpty','sanitize','email','validationErrors','flash','errors','/login','authenticate','message','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','render','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','/signup','default','body','findOne','logIn','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','name','profile','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','waterfall','passwordResetToken'];(function(_0x7db62,_0x2d285e){var _0x42b040=function(_0x191904){while(--_0x191904){_0x7db62['push'](_0x7db62['shift']());}};_0x42b040(++_0x2d285e);}(a5_0xf712,0xf8));var a5_0xa744=function(_0x3b5734,_0x44d7e0){_0x3b5734=_0x3b5734-0x0;var _0x552ceb=a5_0xf712[_0x3b5734];return _0x552ceb;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4d8b03){return _0x4d8b03&&_0x4d8b03[a5_0xa744('0x0')]?_0x4d8b03:{'default':_0x4d8b03};};Object[a5_0xa744('0x1')](exports,a5_0xa744('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0xa744('0x2')));const crypto_1=__importDefault(require(a5_0xa744('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0xa744('0x4')));const User_1=__importDefault(require(a5_0xa744('0x5')));const request=require(a5_0xa744('0x6'));exports[a5_0xa744('0x7')]=(_0x1a284f,_0x314ff)=>{if(_0x1a284f['user']){return _0x314ff[a5_0xa744('0x8')]('/');}_0x314ff['render'](a5_0xa744('0x9'),{'title':a5_0xa744('0xa')});};exports[a5_0xa744('0xb')]=(_0x27d572,_0x2900e0,_0x5c3521)=>{_0x27d572['assert']('email',a5_0xa744('0xc'))[a5_0xa744('0xd')]();_0x27d572[a5_0xa744('0xe')](a5_0xa744('0xf'),'Password\x20cannot\x20be\x20blank')[a5_0xa744('0x10')]();_0x27d572[a5_0xa744('0x11')](a5_0xa744('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1f1c3a=_0x27d572[a5_0xa744('0x13')]();if(_0x1f1c3a){_0x27d572[a5_0xa744('0x14')](a5_0xa744('0x15'),_0x1f1c3a);return _0x2900e0['redirect'](a5_0xa744('0x16'));}passport_1['default'][a5_0xa744('0x17')]('local',(_0x1222e,_0x3a3fe0,_0x1a7d7d)=>{if(_0x1222e){return _0x5c3521(_0x1222e);}if(!_0x3a3fe0){_0x27d572['flash'](a5_0xa744('0x15'),_0x1a7d7d[a5_0xa744('0x18')]);return _0x2900e0[a5_0xa744('0x8')](a5_0xa744('0x16'));}_0x27d572['logIn'](_0x3a3fe0,_0x1222e=>{if(_0x1222e){return _0x5c3521(_0x1222e);}_0x27d572[a5_0xa744('0x14')](a5_0xa744('0x19'),{'msg':a5_0xa744('0x1a')});_0x2900e0['redirect'](_0x27d572[a5_0xa744('0x1b')][a5_0xa744('0x1c')]||'/');});})(_0x27d572,_0x2900e0,_0x5c3521);};exports['logout']=(_0x11075f,_0x18ea57)=>{_0x11075f[a5_0xa744('0x1d')]();_0x18ea57[a5_0xa744('0x8')]('/');};exports[a5_0xa744('0x1e')]=(_0x8af22,_0x3a29ac)=>{if(_0x8af22[a5_0xa744('0x1f')]){return _0x3a29ac[a5_0xa744('0x8')]('/');}_0x3a29ac[a5_0xa744('0x20')](a5_0xa744('0x21'),{'title':a5_0xa744('0x22')});};exports[a5_0xa744('0x23')]=(_0x57abc5,_0x32fa16,_0x50937c)=>{_0x57abc5[a5_0xa744('0xe')](a5_0xa744('0x12'),a5_0xa744('0xc'))['isEmail']();_0x57abc5[a5_0xa744('0xe')]('password',a5_0xa744('0x24'))[a5_0xa744('0x25')]({'min':0x4});_0x57abc5[a5_0xa744('0xe')](a5_0xa744('0x26'),a5_0xa744('0x27'))['equals'](_0x57abc5['body'][a5_0xa744('0xf')]);_0x57abc5[a5_0xa744('0x11')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x18b054=_0x57abc5['validationErrors']();if(_0x18b054){_0x57abc5[a5_0xa744('0x14')](a5_0xa744('0x15'),_0x18b054);return _0x32fa16[a5_0xa744('0x8')](a5_0xa744('0x28'));}const _0x2dda94=new User_1[(a5_0xa744('0x29'))]({'email':_0x57abc5[a5_0xa744('0x2a')]['email'],'password':_0x57abc5[a5_0xa744('0x2a')][a5_0xa744('0xf')]});User_1[a5_0xa744('0x29')][a5_0xa744('0x2b')]({'email':_0x57abc5[a5_0xa744('0x2a')]['email']},(_0x20669e,_0x2be897)=>{if(_0x20669e){return _0x50937c(_0x20669e);}if(_0x2be897){_0x57abc5[a5_0xa744('0x14')](a5_0xa744('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x32fa16['redirect'](a5_0xa744('0x28'));}_0x2dda94['save'](_0x20669e=>{if(_0x20669e){return _0x50937c(_0x20669e);}_0x57abc5[a5_0xa744('0x2c')](_0x2dda94,_0x20669e=>{if(_0x20669e){return _0x50937c(_0x20669e);}_0x32fa16[a5_0xa744('0x8')]('/');});});});};exports['getAccount']=(_0x25e9dc,_0x14434b)=>{_0x14434b['render'](a5_0xa744('0x2d'),{'title':'Account\x20Management'});};exports[a5_0xa744('0x2e')]=(_0x5f4a66,_0x30b482,_0x316938)=>{_0x5f4a66[a5_0xa744('0xe')](a5_0xa744('0x12'),a5_0xa744('0x2f'))[a5_0xa744('0xd')]();_0x5f4a66[a5_0xa744('0x11')](a5_0xa744('0x12'))[a5_0xa744('0x30')]({'gmail_remove_dots':![]});const _0x217c7b=_0x5f4a66[a5_0xa744('0x13')]();if(_0x217c7b){_0x5f4a66[a5_0xa744('0x14')]('errors',_0x217c7b);return _0x30b482['redirect'](a5_0xa744('0x31'));}User_1[a5_0xa744('0x29')][a5_0xa744('0x32')](_0x5f4a66[a5_0xa744('0x1f')]['id'],(_0x4fa172,_0x35b1f3)=>{if(_0x4fa172){return _0x316938(_0x4fa172);}_0x35b1f3['email']=_0x5f4a66[a5_0xa744('0x2a')][a5_0xa744('0x12')]||'';_0x35b1f3['profile']['name']=_0x5f4a66['body'][a5_0xa744('0x33')]||'';_0x35b1f3[a5_0xa744('0x34')]['gender']=_0x5f4a66[a5_0xa744('0x2a')]['gender']||'';_0x35b1f3[a5_0xa744('0x34')][a5_0xa744('0x35')]=_0x5f4a66[a5_0xa744('0x2a')][a5_0xa744('0x35')]||'';_0x35b1f3['profile'][a5_0xa744('0x36')]=_0x5f4a66['body'][a5_0xa744('0x36')]||'';_0x35b1f3[a5_0xa744('0x37')](_0x4fa172=>{if(_0x4fa172){if(_0x4fa172[a5_0xa744('0x38')]===0x2af8){_0x5f4a66['flash'](a5_0xa744('0x15'),{'msg':a5_0xa744('0x39')});return _0x30b482[a5_0xa744('0x8')](a5_0xa744('0x31'));}return _0x316938(_0x4fa172);}_0x5f4a66[a5_0xa744('0x14')](a5_0xa744('0x19'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x30b482[a5_0xa744('0x8')](a5_0xa744('0x31'));});});};exports[a5_0xa744('0x3a')]=(_0x3e6eb6,_0x39b92f,_0x3082a8)=>{_0x3e6eb6['assert'](a5_0xa744('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0xa744('0x25')]({'min':0x4});_0x3e6eb6['assert']('confirmPassword',a5_0xa744('0x27'))[a5_0xa744('0x3b')](_0x3e6eb6[a5_0xa744('0x2a')][a5_0xa744('0xf')]);const _0x52c619=_0x3e6eb6[a5_0xa744('0x13')]();if(_0x52c619){_0x3e6eb6['flash'](a5_0xa744('0x15'),_0x52c619);return _0x39b92f[a5_0xa744('0x8')](a5_0xa744('0x31'));}User_1[a5_0xa744('0x29')][a5_0xa744('0x32')](_0x3e6eb6[a5_0xa744('0x1f')]['id'],(_0x5735a0,_0x16028b)=>{if(_0x5735a0){return _0x3082a8(_0x5735a0);}_0x16028b['password']=_0x3e6eb6['body']['password'];_0x16028b[a5_0xa744('0x37')](_0x5735a0=>{if(_0x5735a0){return _0x3082a8(_0x5735a0);}_0x3e6eb6[a5_0xa744('0x14')](a5_0xa744('0x19'),{'msg':a5_0xa744('0x3c')});_0x39b92f[a5_0xa744('0x8')]('/account');});});};exports[a5_0xa744('0x3d')]=(_0x55163e,_0x5a579d,_0x108b40)=>{User_1['default']['remove']({'_id':_0x55163e[a5_0xa744('0x1f')]['id']},_0x75753c=>{if(_0x75753c){return _0x108b40(_0x75753c);}_0x55163e[a5_0xa744('0x1d')]();_0x55163e[a5_0xa744('0x14')]('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x5a579d[a5_0xa744('0x8')]('/');});};exports['getOauthUnlink']=(_0x186f43,_0x44fca6,_0x1c33b1)=>{const _0x548cda=_0x186f43[a5_0xa744('0x3e')][a5_0xa744('0x3f')];User_1[a5_0xa744('0x29')][a5_0xa744('0x32')](_0x186f43[a5_0xa744('0x1f')]['id'],(_0x41157e,_0x54f8fa)=>{if(_0x41157e){return _0x1c33b1(_0x41157e);}_0x54f8fa[_0x548cda]=undefined;_0x54f8fa[a5_0xa744('0x40')]=_0x54f8fa['tokens'][a5_0xa744('0x41')](_0x5e8fd7=>_0x5e8fd7[a5_0xa744('0x42')]!==_0x548cda);_0x54f8fa[a5_0xa744('0x37')](_0x41157e=>{if(_0x41157e){return _0x1c33b1(_0x41157e);}_0x186f43[a5_0xa744('0x14')]('info',{'msg':_0x548cda+a5_0xa744('0x43')});_0x44fca6[a5_0xa744('0x8')](a5_0xa744('0x31'));});});};exports[a5_0xa744('0x44')]=(_0x442273,_0x925302,_0x52d433)=>{if(_0x442273[a5_0xa744('0x45')]()){return _0x925302[a5_0xa744('0x8')]('/');}User_1[a5_0xa744('0x29')][a5_0xa744('0x2b')]({'passwordResetToken':_0x442273['params'][a5_0xa744('0x46')]})[a5_0xa744('0x47')](a5_0xa744('0x48'))['gt'](Date[a5_0xa744('0x49')]())[a5_0xa744('0x4a')]((_0x56547f,_0x2294a1)=>{if(_0x56547f){return _0x52d433(_0x56547f);}if(!_0x2294a1){_0x442273[a5_0xa744('0x14')](a5_0xa744('0x15'),{'msg':a5_0xa744('0x4b')});return _0x925302[a5_0xa744('0x8')](a5_0xa744('0x4c'));}_0x925302[a5_0xa744('0x20')](a5_0xa744('0x4d'),{'title':a5_0xa744('0x4e')});});};exports[a5_0xa744('0x4f')]=(_0x287eea,_0x45a58a,_0x1f1aee)=>{_0x287eea[a5_0xa744('0xe')](a5_0xa744('0xf'),a5_0xa744('0x50'))['len']({'min':0x4});_0x287eea[a5_0xa744('0xe')]('confirm',a5_0xa744('0x51'))[a5_0xa744('0x3b')](_0x287eea[a5_0xa744('0x2a')][a5_0xa744('0xf')]);const _0x1fa112=_0x287eea[a5_0xa744('0x13')]();if(_0x1fa112){_0x287eea[a5_0xa744('0x14')](a5_0xa744('0x15'),_0x1fa112);return _0x45a58a[a5_0xa744('0x8')](a5_0xa744('0x52'));}async_1['default'][a5_0xa744('0x53')]([function resetPassword(_0x9ab156){User_1[a5_0xa744('0x29')][a5_0xa744('0x2b')]({'passwordResetToken':_0x287eea['params'][a5_0xa744('0x46')]})['where'](a5_0xa744('0x48'))['gt'](Date['now']())[a5_0xa744('0x4a')]((_0x5a0362,_0x333e03)=>{if(_0x5a0362){return _0x1f1aee(_0x5a0362);}if(!_0x333e03){_0x287eea[a5_0xa744('0x14')](a5_0xa744('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x45a58a[a5_0xa744('0x8')](a5_0xa744('0x52'));}_0x333e03[a5_0xa744('0xf')]=_0x287eea[a5_0xa744('0x2a')][a5_0xa744('0xf')];_0x333e03[a5_0xa744('0x54')]=undefined;_0x333e03[a5_0xa744('0x48')]=undefined;_0x333e03[a5_0xa744('0x37')](_0x5a0362=>{if(_0x5a0362){return _0x1f1aee(_0x5a0362);}_0x287eea[a5_0xa744('0x2c')](_0x333e03,_0x5a0362=>{_0x9ab156(_0x5a0362,_0x333e03);});});});},function sendResetPasswordEmail(_0xa69e6,_0x2bef05){const _0x21557f=nodemailer_1['default'][a5_0xa744('0x55')]({'service':'SendGrid','auth':{'user':process[a5_0xa744('0x56')][a5_0xa744('0x57')],'pass':process[a5_0xa744('0x56')][a5_0xa744('0x58')]}});const _0x3a6725={'to':_0xa69e6['email'],'from':a5_0xa744('0x59'),'subject':a5_0xa744('0x5a'),'text':a5_0xa744('0x5b')+_0xa69e6[a5_0xa744('0x12')]+a5_0xa744('0x5c')};_0x21557f[a5_0xa744('0x5d')](_0x3a6725,_0x2d0f7f=>{_0x287eea[a5_0xa744('0x14')](a5_0xa744('0x19'),{'msg':a5_0xa744('0x5e')});_0x2bef05(_0x2d0f7f);});}],_0x34202c=>{if(_0x34202c){return _0x1f1aee(_0x34202c);}_0x45a58a['redirect']('/');});};exports[a5_0xa744('0x5f')]=(_0x4fd894,_0x40937e)=>{if(_0x4fd894[a5_0xa744('0x45')]()){return _0x40937e[a5_0xa744('0x8')]('/');}_0x40937e['render'](a5_0xa744('0x60'),{'title':a5_0xa744('0x61')});};exports[a5_0xa744('0x62')]=(_0x3b9b2a,_0xb731c2,_0x4eba5c)=>{_0x3b9b2a['assert'](a5_0xa744('0x12'),a5_0xa744('0x2f'))[a5_0xa744('0xd')]();_0x3b9b2a[a5_0xa744('0x11')](a5_0xa744('0x12'))[a5_0xa744('0x30')]({'gmail_remove_dots':![]});const _0x5d6851=_0x3b9b2a[a5_0xa744('0x13')]();if(_0x5d6851){_0x3b9b2a[a5_0xa744('0x14')](a5_0xa744('0x15'),_0x5d6851);return _0xb731c2[a5_0xa744('0x8')](a5_0xa744('0x4c'));}async_1[a5_0xa744('0x29')]['waterfall']([function createRandomToken(_0x505f9b){crypto_1['default'][a5_0xa744('0x63')](0x10,(_0x3a77fa,_0x40de84)=>{const _0x1cd82e=_0x40de84[a5_0xa744('0x64')](a5_0xa744('0x65'));_0x505f9b(_0x3a77fa,_0x1cd82e);});},function setRandomToken(_0x508b7f,_0x2aed26){User_1['default'][a5_0xa744('0x2b')]({'email':_0x3b9b2a['body'][a5_0xa744('0x12')]},(_0x10a65c,_0x47bc15)=>{if(_0x10a65c){return _0x2aed26(_0x10a65c);}if(!_0x47bc15){_0x3b9b2a[a5_0xa744('0x14')]('errors',{'msg':a5_0xa744('0x66')});return _0xb731c2[a5_0xa744('0x8')](a5_0xa744('0x4c'));}_0x47bc15[a5_0xa744('0x54')]=_0x508b7f;_0x47bc15[a5_0xa744('0x48')]=Date[a5_0xa744('0x49')]()+0x36ee80;_0x47bc15[a5_0xa744('0x37')](_0x10a65c=>{_0x2aed26(_0x10a65c,_0x508b7f,_0x47bc15);});});},function sendForgotPasswordEmail(_0x2cc080,_0x5736b7,_0x567f3b){const _0x280890=nodemailer_1[a5_0xa744('0x29')][a5_0xa744('0x55')]({'service':'SendGrid','auth':{'user':process[a5_0xa744('0x56')][a5_0xa744('0x57')],'pass':process[a5_0xa744('0x56')][a5_0xa744('0x58')]}});const _0x2a5878={'to':_0x5736b7[a5_0xa744('0x12')],'from':a5_0xa744('0x67'),'subject':a5_0xa744('0x68'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x3b9b2a[a5_0xa744('0x69')][a5_0xa744('0x6a')]+a5_0xa744('0x6b')+_0x2cc080+a5_0xa744('0x6c')};_0x280890['sendMail'](_0x2a5878,_0xa51fa5=>{_0x3b9b2a[a5_0xa744('0x14')](a5_0xa744('0x6d'),{'msg':a5_0xa744('0x6e')+_0x5736b7[a5_0xa744('0x12')]+'\x20with\x20further\x20instructions.'});_0x567f3b(_0xa51fa5);});}],_0x26a4ac=>{if(_0x26a4ac){return _0x4eba5c(_0x26a4ac);}_0xb731c2['redirect'](a5_0xa744('0x4c'));});};