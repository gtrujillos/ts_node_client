var a5_0x45fb=['success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','render','account/signup','len','confirmPassword','Passwords\x20do\x20not\x20match','body','errors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','Account\x20Management','postUpdateProfile','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','passwordResetExpires','now','passwordResetToken','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','waterfall','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','../models/User','express-validator','getLogin','user','redirect','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','sanitize','email','normalizeEmail','validationErrors','flash','/login','default','authenticate','message','logIn'];(function(_0x70bebd,_0x3acf92){var _0x448dd2=function(_0x1a561d){while(--_0x1a561d){_0x70bebd['push'](_0x70bebd['shift']());}};_0x448dd2(++_0x3acf92);}(a5_0x45fb,0x12d));var a5_0x4b9a=function(_0x362867,_0x164179){_0x362867=_0x362867-0x0;var _0x111341=a5_0x45fb[_0x362867];return _0x111341;};'use strict';var __importDefault=this&&this[a5_0x4b9a('0x0')]||function(_0x1e40d7){return _0x1e40d7&&_0x1e40d7[a5_0x4b9a('0x1')]?_0x1e40d7:{'default':_0x1e40d7};};Object[a5_0x4b9a('0x2')](exports,a5_0x4b9a('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x4b9a('0x3')));const crypto_1=__importDefault(require(a5_0x4b9a('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x4b9a('0x5')));const request=require(a5_0x4b9a('0x6'));exports[a5_0x4b9a('0x7')]=(_0x63394d,_0x372671)=>{if(_0x63394d[a5_0x4b9a('0x8')]){return _0x372671[a5_0x4b9a('0x9')]('/');}_0x372671['render']('account/login',{'title':'Login'});};exports[a5_0x4b9a('0xa')]=(_0x54281b,_0x4e2e49,_0x346db7)=>{_0x54281b[a5_0x4b9a('0xb')]('email',a5_0x4b9a('0xc'))[a5_0x4b9a('0xd')]();_0x54281b['assert'](a5_0x4b9a('0xe'),'Password\x20cannot\x20be\x20blank')[a5_0x4b9a('0xf')]();_0x54281b[a5_0x4b9a('0x10')](a5_0x4b9a('0x11'))[a5_0x4b9a('0x12')]({'gmail_remove_dots':![]});const _0x22774b=_0x54281b[a5_0x4b9a('0x13')]();if(_0x22774b){_0x54281b[a5_0x4b9a('0x14')]('errors',_0x22774b);return _0x4e2e49[a5_0x4b9a('0x9')](a5_0x4b9a('0x15'));}passport_1[a5_0x4b9a('0x16')][a5_0x4b9a('0x17')]('local',(_0x5434c7,_0x377cee,_0x19473b)=>{if(_0x5434c7){return _0x346db7(_0x5434c7);}if(!_0x377cee){_0x54281b[a5_0x4b9a('0x14')]('errors',_0x19473b[a5_0x4b9a('0x18')]);return _0x4e2e49['redirect'](a5_0x4b9a('0x15'));}_0x54281b[a5_0x4b9a('0x19')](_0x377cee,_0x5434c7=>{if(_0x5434c7){return _0x346db7(_0x5434c7);}_0x54281b[a5_0x4b9a('0x14')](a5_0x4b9a('0x1a'),{'msg':a5_0x4b9a('0x1b')});_0x4e2e49['redirect'](_0x54281b[a5_0x4b9a('0x1c')][a5_0x4b9a('0x1d')]||'/');});})(_0x54281b,_0x4e2e49,_0x346db7);};exports['logout']=(_0x53029a,_0x1c3cc2)=>{_0x53029a[a5_0x4b9a('0x1e')]();_0x1c3cc2[a5_0x4b9a('0x9')]('/');};exports[a5_0x4b9a('0x1f')]=(_0x3ac71e,_0x1640fe)=>{if(_0x3ac71e[a5_0x4b9a('0x8')]){return _0x1640fe[a5_0x4b9a('0x9')]('/');}_0x1640fe[a5_0x4b9a('0x20')](a5_0x4b9a('0x21'),{'title':'Create\x20Account'});};exports['postSignup']=(_0x411bc2,_0x5bbd7b,_0x2429ec)=>{_0x411bc2[a5_0x4b9a('0xb')](a5_0x4b9a('0x11'),'Email\x20is\x20not\x20valid')['isEmail']();_0x411bc2[a5_0x4b9a('0xb')](a5_0x4b9a('0xe'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x4b9a('0x22')]({'min':0x4});_0x411bc2[a5_0x4b9a('0xb')](a5_0x4b9a('0x23'),a5_0x4b9a('0x24'))['equals'](_0x411bc2[a5_0x4b9a('0x25')][a5_0x4b9a('0xe')]);_0x411bc2[a5_0x4b9a('0x10')](a5_0x4b9a('0x11'))[a5_0x4b9a('0x12')]({'gmail_remove_dots':![]});const _0x226658=_0x411bc2['validationErrors']();if(_0x226658){_0x411bc2[a5_0x4b9a('0x14')](a5_0x4b9a('0x26'),_0x226658);return _0x5bbd7b[a5_0x4b9a('0x9')](a5_0x4b9a('0x27'));}const _0x45d075=new User_1[(a5_0x4b9a('0x16'))]({'email':_0x411bc2['body'][a5_0x4b9a('0x11')],'password':_0x411bc2[a5_0x4b9a('0x25')][a5_0x4b9a('0xe')]});User_1['default'][a5_0x4b9a('0x28')]({'email':_0x411bc2['body'][a5_0x4b9a('0x11')]},(_0x99c328,_0xa36b16)=>{if(_0x99c328){return _0x2429ec(_0x99c328);}if(_0xa36b16){_0x411bc2['flash'](a5_0x4b9a('0x26'),{'msg':a5_0x4b9a('0x29')});return _0x5bbd7b[a5_0x4b9a('0x9')]('/signup');}_0x45d075[a5_0x4b9a('0x2a')](_0x99c328=>{if(_0x99c328){return _0x2429ec(_0x99c328);}_0x411bc2[a5_0x4b9a('0x19')](_0x45d075,_0x99c328=>{if(_0x99c328){return _0x2429ec(_0x99c328);}_0x5bbd7b['redirect']('/');});});});};exports[a5_0x4b9a('0x2b')]=(_0x16405b,_0x5c6fba)=>{_0x5c6fba[a5_0x4b9a('0x20')]('account/profile',{'title':a5_0x4b9a('0x2c')});};exports[a5_0x4b9a('0x2d')]=(_0x142ef7,_0x221708,_0x144df6)=>{_0x142ef7['assert'](a5_0x4b9a('0x11'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x4b9a('0xd')]();_0x142ef7['sanitize'](a5_0x4b9a('0x11'))[a5_0x4b9a('0x12')]({'gmail_remove_dots':![]});const _0x2e510a=_0x142ef7[a5_0x4b9a('0x13')]();if(_0x2e510a){_0x142ef7[a5_0x4b9a('0x14')]('errors',_0x2e510a);return _0x221708[a5_0x4b9a('0x9')](a5_0x4b9a('0x2e'));}User_1['default'][a5_0x4b9a('0x2f')](_0x142ef7[a5_0x4b9a('0x8')]['id'],(_0x5b3633,_0x4b9c8e)=>{if(_0x5b3633){return _0x144df6(_0x5b3633);}_0x4b9c8e['email']=_0x142ef7[a5_0x4b9a('0x25')]['email']||'';_0x4b9c8e[a5_0x4b9a('0x30')]['name']=_0x142ef7['body'][a5_0x4b9a('0x31')]||'';_0x4b9c8e[a5_0x4b9a('0x30')][a5_0x4b9a('0x32')]=_0x142ef7[a5_0x4b9a('0x25')][a5_0x4b9a('0x32')]||'';_0x4b9c8e[a5_0x4b9a('0x30')][a5_0x4b9a('0x33')]=_0x142ef7[a5_0x4b9a('0x25')][a5_0x4b9a('0x33')]||'';_0x4b9c8e[a5_0x4b9a('0x30')]['website']=_0x142ef7[a5_0x4b9a('0x25')][a5_0x4b9a('0x34')]||'';_0x4b9c8e['save'](_0x5b3633=>{if(_0x5b3633){if(_0x5b3633['code']===0x2af8){_0x142ef7['flash']('errors',{'msg':a5_0x4b9a('0x35')});return _0x221708[a5_0x4b9a('0x9')](a5_0x4b9a('0x2e'));}return _0x144df6(_0x5b3633);}_0x142ef7[a5_0x4b9a('0x14')](a5_0x4b9a('0x1a'),{'msg':a5_0x4b9a('0x36')});_0x221708[a5_0x4b9a('0x9')](a5_0x4b9a('0x2e'));});});};exports[a5_0x4b9a('0x37')]=(_0x4dd065,_0x23b3b1,_0x359d94)=>{_0x4dd065[a5_0x4b9a('0xb')]('password',a5_0x4b9a('0x38'))[a5_0x4b9a('0x22')]({'min':0x4});_0x4dd065[a5_0x4b9a('0xb')](a5_0x4b9a('0x23'),'Passwords\x20do\x20not\x20match')[a5_0x4b9a('0x39')](_0x4dd065[a5_0x4b9a('0x25')][a5_0x4b9a('0xe')]);const _0x1819a3=_0x4dd065[a5_0x4b9a('0x13')]();if(_0x1819a3){_0x4dd065[a5_0x4b9a('0x14')](a5_0x4b9a('0x26'),_0x1819a3);return _0x23b3b1[a5_0x4b9a('0x9')]('/account');}User_1[a5_0x4b9a('0x16')]['findById'](_0x4dd065['user']['id'],(_0x373762,_0x526b1a)=>{if(_0x373762){return _0x359d94(_0x373762);}_0x526b1a['password']=_0x4dd065[a5_0x4b9a('0x25')][a5_0x4b9a('0xe')];_0x526b1a['save'](_0x373762=>{if(_0x373762){return _0x359d94(_0x373762);}_0x4dd065[a5_0x4b9a('0x14')](a5_0x4b9a('0x1a'),{'msg':a5_0x4b9a('0x3a')});_0x23b3b1['redirect'](a5_0x4b9a('0x2e'));});});};exports[a5_0x4b9a('0x3b')]=(_0x2c2685,_0x334886,_0x37ebc1)=>{User_1['default'][a5_0x4b9a('0x3c')]({'_id':_0x2c2685[a5_0x4b9a('0x8')]['id']},_0x41101f=>{if(_0x41101f){return _0x37ebc1(_0x41101f);}_0x2c2685[a5_0x4b9a('0x1e')]();_0x2c2685['flash']('info',{'msg':a5_0x4b9a('0x3d')});_0x334886[a5_0x4b9a('0x9')]('/');});};exports[a5_0x4b9a('0x3e')]=(_0xe07e2b,_0x68a772,_0x54e561)=>{const _0x1ebaaf=_0xe07e2b[a5_0x4b9a('0x3f')][a5_0x4b9a('0x40')];User_1[a5_0x4b9a('0x16')]['findById'](_0xe07e2b[a5_0x4b9a('0x8')]['id'],(_0x5e1296,_0x13139d)=>{if(_0x5e1296){return _0x54e561(_0x5e1296);}_0x13139d[_0x1ebaaf]=undefined;_0x13139d['tokens']=_0x13139d[a5_0x4b9a('0x41')][a5_0x4b9a('0x42')](_0x18d86f=>_0x18d86f[a5_0x4b9a('0x43')]!==_0x1ebaaf);_0x13139d['save'](_0x5e1296=>{if(_0x5e1296){return _0x54e561(_0x5e1296);}_0xe07e2b['flash'](a5_0x4b9a('0x44'),{'msg':_0x1ebaaf+a5_0x4b9a('0x45')});_0x68a772['redirect']('/account');});});};exports[a5_0x4b9a('0x46')]=(_0x445481,_0x26505a,_0x28bbb4)=>{if(_0x445481[a5_0x4b9a('0x47')]()){return _0x26505a[a5_0x4b9a('0x9')]('/');}User_1['default'][a5_0x4b9a('0x28')]({'passwordResetToken':_0x445481[a5_0x4b9a('0x3f')][a5_0x4b9a('0x48')]})[a5_0x4b9a('0x49')]('passwordResetExpires')['gt'](Date['now']())[a5_0x4b9a('0x4a')]((_0x24b0a7,_0x44f3c6)=>{if(_0x24b0a7){return _0x28bbb4(_0x24b0a7);}if(!_0x44f3c6){_0x445481[a5_0x4b9a('0x14')](a5_0x4b9a('0x26'),{'msg':a5_0x4b9a('0x4b')});return _0x26505a[a5_0x4b9a('0x9')](a5_0x4b9a('0x4c'));}_0x26505a[a5_0x4b9a('0x20')](a5_0x4b9a('0x4d'),{'title':a5_0x4b9a('0x4e')});});};exports[a5_0x4b9a('0x4f')]=(_0x356714,_0x3ce9ed,_0x2aa9bc)=>{_0x356714[a5_0x4b9a('0xb')](a5_0x4b9a('0xe'),a5_0x4b9a('0x50'))[a5_0x4b9a('0x22')]({'min':0x4});_0x356714[a5_0x4b9a('0xb')](a5_0x4b9a('0x51'),'Passwords\x20must\x20match.')[a5_0x4b9a('0x39')](_0x356714['body'][a5_0x4b9a('0xe')]);const _0x52d067=_0x356714[a5_0x4b9a('0x13')]();if(_0x52d067){_0x356714[a5_0x4b9a('0x14')](a5_0x4b9a('0x26'),_0x52d067);return _0x3ce9ed['redirect'](a5_0x4b9a('0x52'));}async_1[a5_0x4b9a('0x16')]['waterfall']([function resetPassword(_0x5b7214){User_1['default'][a5_0x4b9a('0x28')]({'passwordResetToken':_0x356714[a5_0x4b9a('0x3f')]['token']})[a5_0x4b9a('0x49')](a5_0x4b9a('0x53'))['gt'](Date[a5_0x4b9a('0x54')]())[a5_0x4b9a('0x4a')]((_0x40c546,_0x2bd704)=>{if(_0x40c546){return _0x2aa9bc(_0x40c546);}if(!_0x2bd704){_0x356714[a5_0x4b9a('0x14')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x3ce9ed['redirect']('back');}_0x2bd704['password']=_0x356714[a5_0x4b9a('0x25')]['password'];_0x2bd704[a5_0x4b9a('0x55')]=undefined;_0x2bd704[a5_0x4b9a('0x53')]=undefined;_0x2bd704['save'](_0x40c546=>{if(_0x40c546){return _0x2aa9bc(_0x40c546);}_0x356714[a5_0x4b9a('0x19')](_0x2bd704,_0x40c546=>{_0x5b7214(_0x40c546,_0x2bd704);});});});},function sendResetPasswordEmail(_0xf8a152,_0x565112){const _0x1fce5c=nodemailer_1[a5_0x4b9a('0x16')]['createTransport']({'service':a5_0x4b9a('0x56'),'auth':{'user':process[a5_0x4b9a('0x57')][a5_0x4b9a('0x58')],'pass':process['env'][a5_0x4b9a('0x59')]}});const _0x9e0f07={'to':_0xf8a152[a5_0x4b9a('0x11')],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x4b9a('0x5a')+_0xf8a152[a5_0x4b9a('0x11')]+a5_0x4b9a('0x5b')};_0x1fce5c[a5_0x4b9a('0x5c')](_0x9e0f07,_0x49016c=>{_0x356714[a5_0x4b9a('0x14')]('success',{'msg':a5_0x4b9a('0x5d')});_0x565112(_0x49016c);});}],_0x42e20d=>{if(_0x42e20d){return _0x2aa9bc(_0x42e20d);}_0x3ce9ed[a5_0x4b9a('0x9')]('/');});};exports[a5_0x4b9a('0x5e')]=(_0x310beb,_0x424097)=>{if(_0x310beb[a5_0x4b9a('0x47')]()){return _0x424097['redirect']('/');}_0x424097[a5_0x4b9a('0x20')](a5_0x4b9a('0x5f'),{'title':a5_0x4b9a('0x60')});};exports['postForgot']=(_0x4ed3f1,_0x21d7b4,_0x2bc92f)=>{_0x4ed3f1[a5_0x4b9a('0xb')](a5_0x4b9a('0x11'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x4ed3f1[a5_0x4b9a('0x10')](a5_0x4b9a('0x11'))[a5_0x4b9a('0x12')]({'gmail_remove_dots':![]});const _0x42793d=_0x4ed3f1[a5_0x4b9a('0x13')]();if(_0x42793d){_0x4ed3f1['flash'](a5_0x4b9a('0x26'),_0x42793d);return _0x21d7b4[a5_0x4b9a('0x9')]('/forgot');}async_1[a5_0x4b9a('0x16')][a5_0x4b9a('0x61')]([function createRandomToken(_0x329455){crypto_1[a5_0x4b9a('0x16')]['randomBytes'](0x10,(_0x31b4eb,_0x597be2)=>{const _0x157e48=_0x597be2[a5_0x4b9a('0x62')](a5_0x4b9a('0x63'));_0x329455(_0x31b4eb,_0x157e48);});},function setRandomToken(_0x554d49,_0x11338d){User_1['default']['findOne']({'email':_0x4ed3f1[a5_0x4b9a('0x25')][a5_0x4b9a('0x11')]},(_0x16ea10,_0xcd1094)=>{if(_0x16ea10){return _0x11338d(_0x16ea10);}if(!_0xcd1094){_0x4ed3f1[a5_0x4b9a('0x14')]('errors',{'msg':a5_0x4b9a('0x64')});return _0x21d7b4['redirect'](a5_0x4b9a('0x4c'));}_0xcd1094[a5_0x4b9a('0x55')]=_0x554d49;_0xcd1094[a5_0x4b9a('0x53')]=Date[a5_0x4b9a('0x54')]()+0x36ee80;_0xcd1094[a5_0x4b9a('0x2a')](_0x16ea10=>{_0x11338d(_0x16ea10,_0x554d49,_0xcd1094);});});},function sendForgotPasswordEmail(_0xadfde5,_0x288a09,_0x38348c){const _0x4110c0=nodemailer_1[a5_0x4b9a('0x16')][a5_0x4b9a('0x65')]({'service':a5_0x4b9a('0x56'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x4b9a('0x57')][a5_0x4b9a('0x59')]}});const _0x14516b={'to':_0x288a09[a5_0x4b9a('0x11')],'from':a5_0x4b9a('0x66'),'subject':a5_0x4b9a('0x67'),'text':a5_0x4b9a('0x68')+_0x4ed3f1[a5_0x4b9a('0x69')][a5_0x4b9a('0x6a')]+a5_0x4b9a('0x6b')+_0xadfde5+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x4110c0[a5_0x4b9a('0x5c')](_0x14516b,_0x592af0=>{_0x4ed3f1[a5_0x4b9a('0x14')](a5_0x4b9a('0x44'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x288a09[a5_0x4b9a('0x11')]+a5_0x4b9a('0x6c')});_0x38348c(_0x592af0);});}],_0x54f1be=>{if(_0x54f1be){return _0x2bc92f(_0x54f1be);}_0x21d7b4[a5_0x4b9a('0x9')](a5_0x4b9a('0x4c'));});};