var a5_0x48ca=['normalizeEmail','validationErrors','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','params','where','passwordResetExpires','now','exec','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','token','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','defineProperty','__esModule','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','redirect','/login','default','authenticate','local','flash','errors','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','sanitize'];(function(_0x33d326,_0x3edb38){var _0x38e99b=function(_0x2d1e5a){while(--_0x2d1e5a){_0x33d326['push'](_0x33d326['shift']());}};_0x38e99b(++_0x3edb38);}(a5_0x48ca,0xb5));var a5_0x6ae5=function(_0x5609b4,_0x2bbe99){_0x5609b4=_0x5609b4-0x0;var _0x1067a3=a5_0x48ca[_0x5609b4];return _0x1067a3;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4815b7){return _0x4815b7&&_0x4815b7['__esModule']?_0x4815b7:{'default':_0x4815b7};};Object[a5_0x6ae5('0x0')](exports,a5_0x6ae5('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x6ae5('0x2')));const crypto_1=__importDefault(require(a5_0x6ae5('0x3')));const nodemailer_1=__importDefault(require(a5_0x6ae5('0x4')));const passport_1=__importDefault(require(a5_0x6ae5('0x5')));const User_1=__importDefault(require(a5_0x6ae5('0x6')));const request=require(a5_0x6ae5('0x7'));exports[a5_0x6ae5('0x8')]=(_0x53805c,_0x4c8430)=>{if(_0x53805c[a5_0x6ae5('0x9')]){return _0x4c8430['redirect']('/');}_0x4c8430[a5_0x6ae5('0xa')](a5_0x6ae5('0xb'),{'title':a5_0x6ae5('0xc')});};exports[a5_0x6ae5('0xd')]=(_0x44fdf7,_0x2baedb,_0x42a86f)=>{_0x44fdf7['assert'](a5_0x6ae5('0xe'),a5_0x6ae5('0xf'))[a5_0x6ae5('0x10')]();_0x44fdf7[a5_0x6ae5('0x11')](a5_0x6ae5('0x12'),a5_0x6ae5('0x13'))[a5_0x6ae5('0x14')]();_0x44fdf7['sanitize']('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x4695c6=_0x44fdf7['validationErrors']();if(_0x4695c6){_0x44fdf7['flash']('errors',_0x4695c6);return _0x2baedb[a5_0x6ae5('0x15')](a5_0x6ae5('0x16'));}passport_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x18')](a5_0x6ae5('0x19'),(_0x2d79b5,_0x2a6574,_0x2828f1)=>{if(_0x2d79b5){return _0x42a86f(_0x2d79b5);}if(!_0x2a6574){_0x44fdf7[a5_0x6ae5('0x1a')](a5_0x6ae5('0x1b'),_0x2828f1['message']);return _0x2baedb['redirect']('/login');}_0x44fdf7[a5_0x6ae5('0x1c')](_0x2a6574,_0x2d79b5=>{if(_0x2d79b5){return _0x42a86f(_0x2d79b5);}_0x44fdf7[a5_0x6ae5('0x1a')](a5_0x6ae5('0x1d'),{'msg':a5_0x6ae5('0x1e')});_0x2baedb['redirect'](_0x44fdf7[a5_0x6ae5('0x1f')][a5_0x6ae5('0x20')]||'/');});})(_0x44fdf7,_0x2baedb,_0x42a86f);};exports[a5_0x6ae5('0x21')]=(_0x3f1ca7,_0x224e6c)=>{_0x3f1ca7[a5_0x6ae5('0x21')]();_0x224e6c['redirect']('/');};exports[a5_0x6ae5('0x22')]=(_0xe8cfa5,_0x4ba298)=>{if(_0xe8cfa5['user']){return _0x4ba298[a5_0x6ae5('0x15')]('/');}_0x4ba298[a5_0x6ae5('0xa')](a5_0x6ae5('0x23'),{'title':a5_0x6ae5('0x24')});};exports[a5_0x6ae5('0x25')]=(_0x3c1720,_0x164a63,_0x345768)=>{_0x3c1720[a5_0x6ae5('0x11')](a5_0x6ae5('0xe'),a5_0x6ae5('0xf'))[a5_0x6ae5('0x10')]();_0x3c1720['assert']('password',a5_0x6ae5('0x26'))[a5_0x6ae5('0x27')]({'min':0x4});_0x3c1720['assert'](a5_0x6ae5('0x28'),a5_0x6ae5('0x29'))[a5_0x6ae5('0x2a')](_0x3c1720[a5_0x6ae5('0x2b')][a5_0x6ae5('0x12')]);_0x3c1720[a5_0x6ae5('0x2c')]('email')[a5_0x6ae5('0x2d')]({'gmail_remove_dots':![]});const _0x16f305=_0x3c1720[a5_0x6ae5('0x2e')]();if(_0x16f305){_0x3c1720['flash'](a5_0x6ae5('0x1b'),_0x16f305);return _0x164a63[a5_0x6ae5('0x15')](a5_0x6ae5('0x2f'));}const _0xd49f8f=new User_1[(a5_0x6ae5('0x17'))]({});User_1[a5_0x6ae5('0x17')]['findOne']({'email':_0x3c1720[a5_0x6ae5('0x2b')][a5_0x6ae5('0xe')]},(_0x18f94e,_0x44f242)=>{if(_0x18f94e){return _0x345768(_0x18f94e);}if(_0x44f242){_0x3c1720[a5_0x6ae5('0x1a')](a5_0x6ae5('0x1b'),{'msg':a5_0x6ae5('0x30')});return _0x164a63['redirect'](a5_0x6ae5('0x2f'));}_0xd49f8f[a5_0x6ae5('0x31')](_0x18f94e=>{if(_0x18f94e){return _0x345768(_0x18f94e);}_0x3c1720[a5_0x6ae5('0x1c')](_0xd49f8f,_0x18f94e=>{if(_0x18f94e){return _0x345768(_0x18f94e);}_0x164a63[a5_0x6ae5('0x15')]('/');});});});};exports['getAccount']=(_0x2c582b,_0x1ac23e)=>{_0x1ac23e[a5_0x6ae5('0xa')](a5_0x6ae5('0x32'),{'title':'Account\x20Management'});};exports[a5_0x6ae5('0x33')]=(_0x57a12c,_0x260e63,_0x5ac5d5)=>{_0x57a12c[a5_0x6ae5('0x11')](a5_0x6ae5('0xe'),a5_0x6ae5('0x34'))[a5_0x6ae5('0x10')]();_0x57a12c[a5_0x6ae5('0x2c')](a5_0x6ae5('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x59ab91=_0x57a12c[a5_0x6ae5('0x2e')]();if(_0x59ab91){_0x57a12c[a5_0x6ae5('0x1a')](a5_0x6ae5('0x1b'),_0x59ab91);return _0x260e63[a5_0x6ae5('0x15')](a5_0x6ae5('0x35'));}User_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x36')](_0x57a12c[a5_0x6ae5('0x9')]['id'],(_0x20a7d6,_0x44f190)=>{if(_0x20a7d6){return _0x5ac5d5(_0x20a7d6);}_0x44f190[a5_0x6ae5('0xe')]=_0x57a12c[a5_0x6ae5('0x2b')][a5_0x6ae5('0xe')]||'';_0x44f190['profile'][a5_0x6ae5('0x37')]=_0x57a12c[a5_0x6ae5('0x2b')]['name']||'';_0x44f190[a5_0x6ae5('0x38')]['gender']=_0x57a12c[a5_0x6ae5('0x2b')][a5_0x6ae5('0x39')]||'';_0x44f190[a5_0x6ae5('0x38')][a5_0x6ae5('0x3a')]=_0x57a12c[a5_0x6ae5('0x2b')]['location']||'';_0x44f190[a5_0x6ae5('0x38')]['website']=_0x57a12c[a5_0x6ae5('0x2b')][a5_0x6ae5('0x3b')]||'';_0x44f190['save'](_0x20a7d6=>{if(_0x20a7d6){if(_0x20a7d6['code']===0x2af8){_0x57a12c[a5_0x6ae5('0x1a')]('errors',{'msg':a5_0x6ae5('0x3c')});return _0x260e63[a5_0x6ae5('0x15')](a5_0x6ae5('0x35'));}return _0x5ac5d5(_0x20a7d6);}_0x57a12c['flash']('success',{'msg':a5_0x6ae5('0x3d')});_0x260e63[a5_0x6ae5('0x15')]('/account');});});};exports[a5_0x6ae5('0x3e')]=(_0x13589b,_0x2da037,_0x3872c9)=>{_0x13589b[a5_0x6ae5('0x11')](a5_0x6ae5('0x12'),a5_0x6ae5('0x26'))[a5_0x6ae5('0x27')]({'min':0x4});_0x13589b['assert']('confirmPassword',a5_0x6ae5('0x29'))[a5_0x6ae5('0x2a')](_0x13589b[a5_0x6ae5('0x2b')][a5_0x6ae5('0x12')]);const _0x4fa8d7=_0x13589b[a5_0x6ae5('0x2e')]();if(_0x4fa8d7){_0x13589b['flash'](a5_0x6ae5('0x1b'),_0x4fa8d7);return _0x2da037[a5_0x6ae5('0x15')](a5_0x6ae5('0x35'));}User_1[a5_0x6ae5('0x17')]['findById'](_0x13589b['user']['id'],(_0x213c23,_0x520370)=>{if(_0x213c23){return _0x3872c9(_0x213c23);}_0x520370[a5_0x6ae5('0x12')]=_0x13589b['body']['password'];_0x520370[a5_0x6ae5('0x31')](_0x213c23=>{if(_0x213c23){return _0x3872c9(_0x213c23);}_0x13589b['flash'](a5_0x6ae5('0x1d'),{'msg':a5_0x6ae5('0x3f')});_0x2da037[a5_0x6ae5('0x15')](a5_0x6ae5('0x35'));});});};exports[a5_0x6ae5('0x40')]=(_0x54f741,_0x3b6bcd,_0x49b9a3)=>{User_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x41')]({'_id':_0x54f741['user']['id']},_0x53953e=>{if(_0x53953e){return _0x49b9a3(_0x53953e);}_0x54f741[a5_0x6ae5('0x21')]();_0x54f741['flash'](a5_0x6ae5('0x42'),{'msg':a5_0x6ae5('0x43')});_0x3b6bcd[a5_0x6ae5('0x15')]('/');});};exports[a5_0x6ae5('0x44')]=(_0x5181ed,_0x4016bf,_0x44d658)=>{const _0x5e7ddb=_0x5181ed['params'][a5_0x6ae5('0x45')];User_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x36')](_0x5181ed['user']['id'],(_0x12f4fd,_0x18c04f)=>{if(_0x12f4fd){return _0x44d658(_0x12f4fd);}_0x18c04f[_0x5e7ddb]=undefined;_0x18c04f[a5_0x6ae5('0x46')]=_0x18c04f[a5_0x6ae5('0x46')][a5_0x6ae5('0x47')](_0x2170e9=>_0x2170e9[a5_0x6ae5('0x48')]!==_0x5e7ddb);_0x18c04f[a5_0x6ae5('0x31')](_0x12f4fd=>{if(_0x12f4fd){return _0x44d658(_0x12f4fd);}_0x5181ed[a5_0x6ae5('0x1a')](a5_0x6ae5('0x42'),{'msg':_0x5e7ddb+a5_0x6ae5('0x49')});_0x4016bf['redirect'](a5_0x6ae5('0x35'));});});};exports[a5_0x6ae5('0x4a')]=(_0x35ef9d,_0x32fc34,_0x1a2e3f)=>{if(_0x35ef9d[a5_0x6ae5('0x4b')]()){return _0x32fc34[a5_0x6ae5('0x15')]('/');}User_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x4c')]({'passwordResetToken':_0x35ef9d[a5_0x6ae5('0x4d')]['token']})[a5_0x6ae5('0x4e')](a5_0x6ae5('0x4f'))['gt'](Date[a5_0x6ae5('0x50')]())[a5_0x6ae5('0x51')]((_0x3cc3d0,_0x12b242)=>{if(_0x3cc3d0){return _0x1a2e3f(_0x3cc3d0);}if(!_0x12b242){_0x35ef9d[a5_0x6ae5('0x1a')](a5_0x6ae5('0x1b'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x32fc34[a5_0x6ae5('0x15')](a5_0x6ae5('0x52'));}_0x32fc34[a5_0x6ae5('0xa')](a5_0x6ae5('0x53'),{'title':'Password\x20Reset'});});};exports[a5_0x6ae5('0x54')]=(_0x2c4e7e,_0x33ffd2,_0x17c096)=>{_0x2c4e7e['assert'](a5_0x6ae5('0x12'),a5_0x6ae5('0x55'))[a5_0x6ae5('0x27')]({'min':0x4});_0x2c4e7e[a5_0x6ae5('0x11')](a5_0x6ae5('0x56'),a5_0x6ae5('0x57'))[a5_0x6ae5('0x2a')](_0x2c4e7e[a5_0x6ae5('0x2b')][a5_0x6ae5('0x12')]);const _0x253758=_0x2c4e7e[a5_0x6ae5('0x2e')]();if(_0x253758){_0x2c4e7e[a5_0x6ae5('0x1a')]('errors',_0x253758);return _0x33ffd2[a5_0x6ae5('0x15')]('back');}async_1['default'][a5_0x6ae5('0x58')]([function resetPassword(_0x714af1){User_1['default'][a5_0x6ae5('0x4c')]({'passwordResetToken':_0x2c4e7e[a5_0x6ae5('0x4d')][a5_0x6ae5('0x59')]})[a5_0x6ae5('0x4e')]('passwordResetExpires')['gt'](Date[a5_0x6ae5('0x50')]())['exec']((_0x26d693,_0x43b78a)=>{if(_0x26d693){return _0x17c096(_0x26d693);}if(!_0x43b78a){_0x2c4e7e[a5_0x6ae5('0x1a')]('errors',{'msg':a5_0x6ae5('0x5a')});return _0x33ffd2['redirect'](a5_0x6ae5('0x5b'));}_0x43b78a[a5_0x6ae5('0x12')]=_0x2c4e7e[a5_0x6ae5('0x2b')]['password'];_0x43b78a[a5_0x6ae5('0x5c')]=undefined;_0x43b78a[a5_0x6ae5('0x4f')]=undefined;_0x43b78a[a5_0x6ae5('0x31')](_0x26d693=>{if(_0x26d693){return _0x17c096(_0x26d693);}_0x2c4e7e['logIn'](_0x43b78a,_0x26d693=>{_0x714af1(_0x26d693,_0x43b78a);});});});},function sendResetPasswordEmail(_0x2bf6c8,_0x4cac09){const _0x1f1961=nodemailer_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x5d')]({'service':'SendGrid','auth':{'user':process[a5_0x6ae5('0x5e')][a5_0x6ae5('0x5f')],'pass':process[a5_0x6ae5('0x5e')][a5_0x6ae5('0x60')]}});const _0x4d46b6={'to':_0x2bf6c8[a5_0x6ae5('0xe')],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x2bf6c8[a5_0x6ae5('0xe')]+a5_0x6ae5('0x61')};_0x1f1961[a5_0x6ae5('0x62')](_0x4d46b6,_0x4c9a27=>{_0x2c4e7e[a5_0x6ae5('0x1a')]('success',{'msg':a5_0x6ae5('0x63')});_0x4cac09(_0x4c9a27);});}],_0x16b8a0=>{if(_0x16b8a0){return _0x17c096(_0x16b8a0);}_0x33ffd2[a5_0x6ae5('0x15')]('/');});};exports[a5_0x6ae5('0x64')]=(_0x25e520,_0x3191a3)=>{if(_0x25e520[a5_0x6ae5('0x4b')]()){return _0x3191a3[a5_0x6ae5('0x15')]('/');}_0x3191a3[a5_0x6ae5('0xa')]('account/forgot',{'title':a5_0x6ae5('0x65')});};exports[a5_0x6ae5('0x66')]=(_0x4659ee,_0x3e3634,_0x561b3f)=>{_0x4659ee[a5_0x6ae5('0x11')]('email',a5_0x6ae5('0x34'))[a5_0x6ae5('0x10')]();_0x4659ee[a5_0x6ae5('0x2c')](a5_0x6ae5('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1a28e9=_0x4659ee[a5_0x6ae5('0x2e')]();if(_0x1a28e9){_0x4659ee['flash']('errors',_0x1a28e9);return _0x3e3634['redirect'](a5_0x6ae5('0x52'));}async_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x58')]([function createRandomToken(_0x551dd9){crypto_1['default'][a5_0x6ae5('0x67')](0x10,(_0x2db881,_0x2518ef)=>{const _0x5abfb7=_0x2518ef[a5_0x6ae5('0x68')](a5_0x6ae5('0x69'));_0x551dd9(_0x2db881,_0x5abfb7);});},function setRandomToken(_0x466f9c,_0x1a02df){User_1[a5_0x6ae5('0x17')][a5_0x6ae5('0x4c')]({'email':_0x4659ee['body'][a5_0x6ae5('0xe')]},(_0x53078f,_0x5d17d4)=>{if(_0x53078f){return _0x1a02df(_0x53078f);}if(!_0x5d17d4){_0x4659ee[a5_0x6ae5('0x1a')](a5_0x6ae5('0x1b'),{'msg':a5_0x6ae5('0x6a')});return _0x3e3634['redirect']('/forgot');}_0x5d17d4[a5_0x6ae5('0x5c')]=_0x466f9c;_0x5d17d4[a5_0x6ae5('0x4f')]=Date[a5_0x6ae5('0x50')]()+0x36ee80;_0x5d17d4[a5_0x6ae5('0x31')](_0x53078f=>{_0x1a02df(_0x53078f,_0x466f9c,_0x5d17d4);});});},function sendForgotPasswordEmail(_0x56437a,_0x116ae9,_0x52599d){const _0x52e883=nodemailer_1['default'][a5_0x6ae5('0x5d')]({'service':'SendGrid','auth':{'user':process[a5_0x6ae5('0x5e')][a5_0x6ae5('0x5f')],'pass':process[a5_0x6ae5('0x5e')]['SENDGRID_PASSWORD']}});const _0x38be5c={'to':_0x116ae9[a5_0x6ae5('0xe')],'from':a5_0x6ae5('0x6b'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x4659ee[a5_0x6ae5('0x6c')][a5_0x6ae5('0x6d')]+a5_0x6ae5('0x6e')+_0x56437a+a5_0x6ae5('0x6f')};_0x52e883[a5_0x6ae5('0x62')](_0x38be5c,_0x50ecd5=>{_0x4659ee[a5_0x6ae5('0x1a')](a5_0x6ae5('0x42'),{'msg':a5_0x6ae5('0x70')+_0x116ae9[a5_0x6ae5('0xe')]+'\x20with\x20further\x20instructions.'});_0x52599d(_0x50ecd5);});}],_0x2d56b6=>{if(_0x2d56b6){return _0x561b3f(_0x2d56b6);}_0x3e3634[a5_0x6ae5('0x15')](a5_0x6ae5('0x52'));});};