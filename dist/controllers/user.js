var a5_0x222e=['local','errors','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','body','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','gender','profile','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','params','token','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','now','exec','passwordResetToken','createTransport','SendGrid','SENDGRID_USER','env','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','nodemailer','../models/User','express-validator','getLogin','user','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password','sanitize','normalizeEmail','validationErrors','flash','redirect','/login','authenticate'];(function(_0x1d0d70,_0x2b4ca3){var _0x1ab4aa=function(_0x27235c){while(--_0x27235c){_0x1d0d70['push'](_0x1d0d70['shift']());}};_0x1ab4aa(++_0x2b4ca3);}(a5_0x222e,0xc5));var a5_0x7a3b=function(_0x4f7507,_0x164c36){_0x4f7507=_0x4f7507-0x0;var _0x317581=a5_0x222e[_0x4f7507];return _0x317581;};'use strict';var __importDefault=this&&this[a5_0x7a3b('0x0')]||function(_0x338a72){return _0x338a72&&_0x338a72[a5_0x7a3b('0x1')]?_0x338a72:{'default':_0x338a72};};Object[a5_0x7a3b('0x2')](exports,a5_0x7a3b('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x7a3b('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x7a3b('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x7a3b('0x5')));const request=require(a5_0x7a3b('0x6'));exports[a5_0x7a3b('0x7')]=(_0x668abb,_0x1473c8)=>{if(_0x668abb[a5_0x7a3b('0x8')]){return _0x1473c8['redirect']('/');}_0x1473c8[a5_0x7a3b('0x9')](a5_0x7a3b('0xa'),{'title':a5_0x7a3b('0xb')});};exports[a5_0x7a3b('0xc')]=(_0x15620d,_0x4c17ee,_0x558e89)=>{_0x15620d['assert'](a5_0x7a3b('0xd'),a5_0x7a3b('0xe'))[a5_0x7a3b('0xf')]();_0x15620d[a5_0x7a3b('0x10')](a5_0x7a3b('0x11'),'Password\x20cannot\x20be\x20blank')['notEmpty']();_0x15620d[a5_0x7a3b('0x12')](a5_0x7a3b('0xd'))[a5_0x7a3b('0x13')]({'gmail_remove_dots':![]});const _0x5f5a0c=_0x15620d[a5_0x7a3b('0x14')]();if(_0x5f5a0c){_0x15620d[a5_0x7a3b('0x15')]('errors',_0x5f5a0c);return _0x4c17ee[a5_0x7a3b('0x16')](a5_0x7a3b('0x17'));}passport_1['default'][a5_0x7a3b('0x18')](a5_0x7a3b('0x19'),(_0x1aa818,_0x5f49ee,_0x2f7a0c)=>{if(_0x1aa818){return _0x558e89(_0x1aa818);}if(!_0x5f49ee){_0x15620d[a5_0x7a3b('0x15')](a5_0x7a3b('0x1a'),_0x2f7a0c[a5_0x7a3b('0x1b')]);return _0x4c17ee[a5_0x7a3b('0x16')](a5_0x7a3b('0x17'));}_0x15620d[a5_0x7a3b('0x1c')](_0x5f49ee,_0x1aa818=>{if(_0x1aa818){return _0x558e89(_0x1aa818);}_0x15620d['flash'](a5_0x7a3b('0x1d'),{'msg':a5_0x7a3b('0x1e')});_0x4c17ee['redirect'](_0x15620d[a5_0x7a3b('0x1f')][a5_0x7a3b('0x20')]||'/');});})(_0x15620d,_0x4c17ee,_0x558e89);};exports[a5_0x7a3b('0x21')]=(_0xc22553,_0x55d565)=>{_0xc22553[a5_0x7a3b('0x21')]();_0x55d565[a5_0x7a3b('0x16')]('/');};exports[a5_0x7a3b('0x22')]=(_0x277b32,_0x833c14)=>{if(_0x277b32[a5_0x7a3b('0x8')]){return _0x833c14[a5_0x7a3b('0x16')]('/');}_0x833c14[a5_0x7a3b('0x9')](a5_0x7a3b('0x23'),{'title':a5_0x7a3b('0x24')});};exports[a5_0x7a3b('0x25')]=(_0x415d8f,_0x4008bd,_0x2dc1e5)=>{_0x415d8f['assert']('email','Email\x20is\x20not\x20valid')['isEmail']();_0x415d8f['assert'](a5_0x7a3b('0x11'),a5_0x7a3b('0x26'))[a5_0x7a3b('0x27')]({'min':0x4});_0x415d8f[a5_0x7a3b('0x10')](a5_0x7a3b('0x28'),'Passwords\x20do\x20not\x20match')[a5_0x7a3b('0x29')](_0x415d8f[a5_0x7a3b('0x2a')][a5_0x7a3b('0x11')]);_0x415d8f['sanitize'](a5_0x7a3b('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4969e6=_0x415d8f[a5_0x7a3b('0x14')]();if(_0x4969e6){_0x415d8f[a5_0x7a3b('0x15')](a5_0x7a3b('0x1a'),_0x4969e6);return _0x4008bd['redirect'](a5_0x7a3b('0x2b'));}const _0x5eab3e=new User_1[(a5_0x7a3b('0x2c'))]({});User_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x2d')]({'email':_0x415d8f[a5_0x7a3b('0x2a')][a5_0x7a3b('0xd')]},(_0x2023d5,_0x19bb5e)=>{if(_0x2023d5){return _0x2dc1e5(_0x2023d5);}if(_0x19bb5e){_0x415d8f[a5_0x7a3b('0x15')](a5_0x7a3b('0x1a'),{'msg':a5_0x7a3b('0x2e')});return _0x4008bd[a5_0x7a3b('0x16')](a5_0x7a3b('0x2b'));}_0x5eab3e[a5_0x7a3b('0x2f')](_0x2023d5=>{if(_0x2023d5){return _0x2dc1e5(_0x2023d5);}_0x415d8f['logIn'](_0x5eab3e,_0x2023d5=>{if(_0x2023d5){return _0x2dc1e5(_0x2023d5);}_0x4008bd[a5_0x7a3b('0x16')]('/');});});});};exports['getAccount']=(_0x20e6c3,_0x8eccc9)=>{_0x8eccc9['render'](a5_0x7a3b('0x30'),{'title':a5_0x7a3b('0x31')});};exports[a5_0x7a3b('0x32')]=(_0x25a35b,_0x59683d,_0x440e69)=>{_0x25a35b[a5_0x7a3b('0x10')](a5_0x7a3b('0xd'),a5_0x7a3b('0x33'))[a5_0x7a3b('0xf')]();_0x25a35b[a5_0x7a3b('0x12')]('email')[a5_0x7a3b('0x13')]({'gmail_remove_dots':![]});const _0x589ea2=_0x25a35b[a5_0x7a3b('0x14')]();if(_0x589ea2){_0x25a35b[a5_0x7a3b('0x15')](a5_0x7a3b('0x1a'),_0x589ea2);return _0x59683d[a5_0x7a3b('0x16')](a5_0x7a3b('0x34'));}User_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x35')](_0x25a35b[a5_0x7a3b('0x8')]['id'],(_0x11a1ee,_0x8363d3)=>{if(_0x11a1ee){return _0x440e69(_0x11a1ee);}_0x8363d3[a5_0x7a3b('0xd')]=_0x25a35b[a5_0x7a3b('0x2a')][a5_0x7a3b('0xd')]||'';_0x8363d3['profile'][a5_0x7a3b('0x36')]=_0x25a35b[a5_0x7a3b('0x2a')]['name']||'';_0x8363d3['profile'][a5_0x7a3b('0x37')]=_0x25a35b[a5_0x7a3b('0x2a')][a5_0x7a3b('0x37')]||'';_0x8363d3[a5_0x7a3b('0x38')][a5_0x7a3b('0x39')]=_0x25a35b[a5_0x7a3b('0x2a')][a5_0x7a3b('0x39')]||'';_0x8363d3[a5_0x7a3b('0x38')][a5_0x7a3b('0x3a')]=_0x25a35b[a5_0x7a3b('0x2a')][a5_0x7a3b('0x3a')]||'';_0x8363d3[a5_0x7a3b('0x2f')](_0x11a1ee=>{if(_0x11a1ee){if(_0x11a1ee['code']===0x2af8){_0x25a35b[a5_0x7a3b('0x15')]('errors',{'msg':a5_0x7a3b('0x3b')});return _0x59683d[a5_0x7a3b('0x16')](a5_0x7a3b('0x34'));}return _0x440e69(_0x11a1ee);}_0x25a35b[a5_0x7a3b('0x15')](a5_0x7a3b('0x1d'),{'msg':a5_0x7a3b('0x3c')});_0x59683d['redirect'](a5_0x7a3b('0x34'));});});};exports[a5_0x7a3b('0x3d')]=(_0x11b1e1,_0x1a9dda,_0x1c73be)=>{_0x11b1e1[a5_0x7a3b('0x10')](a5_0x7a3b('0x11'),a5_0x7a3b('0x26'))[a5_0x7a3b('0x27')]({'min':0x4});_0x11b1e1['assert'](a5_0x7a3b('0x28'),'Passwords\x20do\x20not\x20match')[a5_0x7a3b('0x29')](_0x11b1e1[a5_0x7a3b('0x2a')]['password']);const _0x32eb58=_0x11b1e1[a5_0x7a3b('0x14')]();if(_0x32eb58){_0x11b1e1[a5_0x7a3b('0x15')](a5_0x7a3b('0x1a'),_0x32eb58);return _0x1a9dda[a5_0x7a3b('0x16')](a5_0x7a3b('0x34'));}User_1[a5_0x7a3b('0x2c')]['findById'](_0x11b1e1['user']['id'],(_0x994f24,_0x545b63)=>{if(_0x994f24){return _0x1c73be(_0x994f24);}_0x545b63['password']=_0x11b1e1[a5_0x7a3b('0x2a')][a5_0x7a3b('0x11')];_0x545b63['save'](_0x994f24=>{if(_0x994f24){return _0x1c73be(_0x994f24);}_0x11b1e1['flash'](a5_0x7a3b('0x1d'),{'msg':'Password\x20has\x20been\x20changed.'});_0x1a9dda['redirect'](a5_0x7a3b('0x34'));});});};exports[a5_0x7a3b('0x3e')]=(_0x49e46a,_0x5d5b9b,_0xb46d84)=>{User_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x3f')]({'_id':_0x49e46a[a5_0x7a3b('0x8')]['id']},_0x56a702=>{if(_0x56a702){return _0xb46d84(_0x56a702);}_0x49e46a[a5_0x7a3b('0x21')]();_0x49e46a[a5_0x7a3b('0x15')](a5_0x7a3b('0x40'),{'msg':a5_0x7a3b('0x41')});_0x5d5b9b[a5_0x7a3b('0x16')]('/');});};exports[a5_0x7a3b('0x42')]=(_0x5d98d2,_0x36348a,_0x4411ae)=>{const _0x42c356=_0x5d98d2['params'][a5_0x7a3b('0x43')];User_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x35')](_0x5d98d2['user']['id'],(_0x362567,_0x45240c)=>{if(_0x362567){return _0x4411ae(_0x362567);}_0x45240c[_0x42c356]=undefined;_0x45240c[a5_0x7a3b('0x44')]=_0x45240c[a5_0x7a3b('0x44')][a5_0x7a3b('0x45')](_0x4d0db7=>_0x4d0db7[a5_0x7a3b('0x46')]!==_0x42c356);_0x45240c[a5_0x7a3b('0x2f')](_0x362567=>{if(_0x362567){return _0x4411ae(_0x362567);}_0x5d98d2[a5_0x7a3b('0x15')](a5_0x7a3b('0x40'),{'msg':_0x42c356+a5_0x7a3b('0x47')});_0x36348a[a5_0x7a3b('0x16')](a5_0x7a3b('0x34'));});});};exports['getReset']=(_0x109793,_0x128df9,_0x5cd889)=>{if(_0x109793[a5_0x7a3b('0x48')]()){return _0x128df9['redirect']('/');}User_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x2d')]({'passwordResetToken':_0x109793[a5_0x7a3b('0x49')][a5_0x7a3b('0x4a')]})['where'](a5_0x7a3b('0x4b'))['gt'](Date['now']())['exec']((_0x456b46,_0x1b473f)=>{if(_0x456b46){return _0x5cd889(_0x456b46);}if(!_0x1b473f){_0x109793[a5_0x7a3b('0x15')]('errors',{'msg':a5_0x7a3b('0x4c')});return _0x128df9['redirect'](a5_0x7a3b('0x4d'));}_0x128df9[a5_0x7a3b('0x9')](a5_0x7a3b('0x4e'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x4f0467,_0x122f84,_0x21db5d)=>{_0x4f0467[a5_0x7a3b('0x10')]('password',a5_0x7a3b('0x4f'))[a5_0x7a3b('0x27')]({'min':0x4});_0x4f0467['assert'](a5_0x7a3b('0x50'),'Passwords\x20must\x20match.')['equals'](_0x4f0467[a5_0x7a3b('0x2a')][a5_0x7a3b('0x11')]);const _0xe07a97=_0x4f0467[a5_0x7a3b('0x14')]();if(_0xe07a97){_0x4f0467['flash'](a5_0x7a3b('0x1a'),_0xe07a97);return _0x122f84[a5_0x7a3b('0x16')](a5_0x7a3b('0x51'));}async_1['default'][a5_0x7a3b('0x52')]([function resetPassword(_0x4093e8){User_1[a5_0x7a3b('0x2c')]['findOne']({'passwordResetToken':_0x4f0467['params'][a5_0x7a3b('0x4a')]})['where'](a5_0x7a3b('0x4b'))['gt'](Date[a5_0x7a3b('0x53')]())[a5_0x7a3b('0x54')]((_0x5e7bcd,_0x9b0dc5)=>{if(_0x5e7bcd){return _0x21db5d(_0x5e7bcd);}if(!_0x9b0dc5){_0x4f0467[a5_0x7a3b('0x15')](a5_0x7a3b('0x1a'),{'msg':a5_0x7a3b('0x4c')});return _0x122f84['redirect'](a5_0x7a3b('0x51'));}_0x9b0dc5[a5_0x7a3b('0x11')]=_0x4f0467[a5_0x7a3b('0x2a')][a5_0x7a3b('0x11')];_0x9b0dc5[a5_0x7a3b('0x55')]=undefined;_0x9b0dc5['passwordResetExpires']=undefined;_0x9b0dc5[a5_0x7a3b('0x2f')](_0x5e7bcd=>{if(_0x5e7bcd){return _0x21db5d(_0x5e7bcd);}_0x4f0467[a5_0x7a3b('0x1c')](_0x9b0dc5,_0x5e7bcd=>{_0x4093e8(_0x5e7bcd,_0x9b0dc5);});});});},function sendResetPasswordEmail(_0x572996,_0x24c496){const _0x55883d=nodemailer_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x56')]({'service':a5_0x7a3b('0x57'),'auth':{'user':process['env'][a5_0x7a3b('0x58')],'pass':process[a5_0x7a3b('0x59')]['SENDGRID_PASSWORD']}});const _0x21620c={'to':_0x572996[a5_0x7a3b('0xd')],'from':'express-ts@starter.com','subject':a5_0x7a3b('0x5a'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x572996[a5_0x7a3b('0xd')]+a5_0x7a3b('0x5b')};_0x55883d[a5_0x7a3b('0x5c')](_0x21620c,_0x18cb9b=>{_0x4f0467[a5_0x7a3b('0x15')](a5_0x7a3b('0x1d'),{'msg':a5_0x7a3b('0x5d')});_0x24c496(_0x18cb9b);});}],_0x4ad449=>{if(_0x4ad449){return _0x21db5d(_0x4ad449);}_0x122f84[a5_0x7a3b('0x16')]('/');});};exports[a5_0x7a3b('0x5e')]=(_0x33c5eb,_0x4fbbbb)=>{if(_0x33c5eb['isAuthenticated']()){return _0x4fbbbb[a5_0x7a3b('0x16')]('/');}_0x4fbbbb[a5_0x7a3b('0x9')](a5_0x7a3b('0x5f'),{'title':a5_0x7a3b('0x60')});};exports[a5_0x7a3b('0x61')]=(_0x43b330,_0x1db7f2,_0x8d3493)=>{_0x43b330[a5_0x7a3b('0x10')](a5_0x7a3b('0xd'),a5_0x7a3b('0x33'))[a5_0x7a3b('0xf')]();_0x43b330[a5_0x7a3b('0x12')](a5_0x7a3b('0xd'))[a5_0x7a3b('0x13')]({'gmail_remove_dots':![]});const _0x2865b3=_0x43b330[a5_0x7a3b('0x14')]();if(_0x2865b3){_0x43b330[a5_0x7a3b('0x15')]('errors',_0x2865b3);return _0x1db7f2[a5_0x7a3b('0x16')](a5_0x7a3b('0x4d'));}async_1['default'][a5_0x7a3b('0x52')]([function createRandomToken(_0x51b486){crypto_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x62')](0x10,(_0x4f7170,_0x35fc98)=>{const _0x309aeb=_0x35fc98[a5_0x7a3b('0x63')](a5_0x7a3b('0x64'));_0x51b486(_0x4f7170,_0x309aeb);});},function setRandomToken(_0xe920d1,_0x325e24){User_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x2d')]({'email':_0x43b330[a5_0x7a3b('0x2a')]['email']},(_0x196c1c,_0x3be572)=>{if(_0x196c1c){return _0x325e24(_0x196c1c);}if(!_0x3be572){_0x43b330['flash'](a5_0x7a3b('0x1a'),{'msg':a5_0x7a3b('0x65')});return _0x1db7f2['redirect'](a5_0x7a3b('0x4d'));}_0x3be572[a5_0x7a3b('0x55')]=_0xe920d1;_0x3be572['passwordResetExpires']=Date[a5_0x7a3b('0x53')]()+0x36ee80;_0x3be572['save'](_0x196c1c=>{_0x325e24(_0x196c1c,_0xe920d1,_0x3be572);});});},function sendForgotPasswordEmail(_0x123ba1,_0x459c05,_0x10705e){const _0x27fde3=nodemailer_1[a5_0x7a3b('0x2c')][a5_0x7a3b('0x56')]({'service':a5_0x7a3b('0x57'),'auth':{'user':process[a5_0x7a3b('0x59')][a5_0x7a3b('0x58')],'pass':process[a5_0x7a3b('0x59')][a5_0x7a3b('0x66')]}});const _0x347947={'to':_0x459c05[a5_0x7a3b('0xd')],'from':'hackathon@starter.com','subject':a5_0x7a3b('0x67'),'text':a5_0x7a3b('0x68')+_0x43b330[a5_0x7a3b('0x69')][a5_0x7a3b('0x6a')]+a5_0x7a3b('0x6b')+_0x123ba1+a5_0x7a3b('0x6c')};_0x27fde3['sendMail'](_0x347947,_0x1500f2=>{_0x43b330[a5_0x7a3b('0x15')](a5_0x7a3b('0x40'),{'msg':a5_0x7a3b('0x6d')+_0x459c05[a5_0x7a3b('0xd')]+a5_0x7a3b('0x6e')});_0x10705e(_0x1500f2);});}],_0xd9651c=>{if(_0xd9651c){return _0x8d3493(_0xd9651c);}_0x1db7f2['redirect']('/forgot');});};