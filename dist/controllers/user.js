var a5_0x5c63=['postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','/account','equals','validationErrors','findById','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','confirm','Passwords\x20must\x20match.','back','waterfall','exec','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','../models/User','express-validator','getLogin','user','redirect','render','Login','postLogin','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','normalizeEmail','/login','authenticate','flash','errors','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','assert','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','body','/signup','default','save','getAccount','account/profile','Account\x20Management'];(function(_0x20950b,_0x260470){var _0x523f44=function(_0x27244d){while(--_0x27244d){_0x20950b['push'](_0x20950b['shift']());}};_0x523f44(++_0x260470);}(a5_0x5c63,0x10b));var a5_0x5748=function(_0x2ef24d,_0x4e6217){_0x2ef24d=_0x2ef24d-0x0;var _0x232aef=a5_0x5c63[_0x2ef24d];return _0x232aef;};'use strict';var __importDefault=this&&this[a5_0x5748('0x0')]||function(_0x5f2bd0){return _0x5f2bd0&&_0x5f2bd0[a5_0x5748('0x1')]?_0x5f2bd0:{'default':_0x5f2bd0};};Object[a5_0x5748('0x2')](exports,a5_0x5748('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x5748('0x3')));const request=require(a5_0x5748('0x4'));exports[a5_0x5748('0x5')]=(_0x3860ac,_0x4df47d)=>{if(_0x3860ac[a5_0x5748('0x6')]){return _0x4df47d[a5_0x5748('0x7')]('/');}_0x4df47d[a5_0x5748('0x8')]('account/login',{'title':a5_0x5748('0x9')});};exports[a5_0x5748('0xa')]=(_0x38d1b9,_0x279d93,_0x290800)=>{_0x38d1b9['assert']('email',a5_0x5748('0xb'))['isEmail']();_0x38d1b9['assert'](a5_0x5748('0xc'),a5_0x5748('0xd'))[a5_0x5748('0xe')]();_0x38d1b9[a5_0x5748('0xf')](a5_0x5748('0x10'))[a5_0x5748('0x11')]({'gmail_remove_dots':![]});const _0x1c4589=_0x38d1b9['validationErrors']();if(_0x1c4589){_0x38d1b9['flash']('errors',_0x1c4589);return _0x279d93[a5_0x5748('0x7')](a5_0x5748('0x12'));}passport_1['default'][a5_0x5748('0x13')]('local',(_0x19fc88,_0x52cd18,_0xc0168a)=>{if(_0x19fc88){return _0x290800(_0x19fc88);}if(!_0x52cd18){_0x38d1b9[a5_0x5748('0x14')](a5_0x5748('0x15'),_0xc0168a[a5_0x5748('0x16')]);return _0x279d93[a5_0x5748('0x7')](a5_0x5748('0x12'));}_0x38d1b9[a5_0x5748('0x17')](_0x52cd18,_0x19fc88=>{if(_0x19fc88){return _0x290800(_0x19fc88);}_0x38d1b9['flash'](a5_0x5748('0x18'),{'msg':a5_0x5748('0x19')});_0x279d93[a5_0x5748('0x7')](_0x38d1b9[a5_0x5748('0x1a')][a5_0x5748('0x1b')]||'/');});})(_0x38d1b9,_0x279d93,_0x290800);};exports[a5_0x5748('0x1c')]=(_0x5824bf,_0x27dd6a)=>{_0x5824bf[a5_0x5748('0x1c')]();_0x27dd6a['redirect']('/');};exports[a5_0x5748('0x1d')]=(_0x4e9d73,_0x23f64c)=>{if(_0x4e9d73[a5_0x5748('0x6')]){return _0x23f64c[a5_0x5748('0x7')]('/');}_0x23f64c[a5_0x5748('0x8')](a5_0x5748('0x1e'),{'title':a5_0x5748('0x1f')});};exports[a5_0x5748('0x20')]=(_0x5a9f5e,_0xa59cc9,_0x2540a6)=>{_0x5a9f5e[a5_0x5748('0x21')]('email','Email\x20is\x20not\x20valid')[a5_0x5748('0x22')]();_0x5a9f5e['assert']('password',a5_0x5748('0x23'))[a5_0x5748('0x24')]({'min':0x4});_0x5a9f5e[a5_0x5748('0x21')](a5_0x5748('0x25'),'Passwords\x20do\x20not\x20match')['equals'](_0x5a9f5e[a5_0x5748('0x26')]['password']);_0x5a9f5e[a5_0x5748('0xf')](a5_0x5748('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x23ca08=_0x5a9f5e['validationErrors']();if(_0x23ca08){_0x5a9f5e['flash']('errors',_0x23ca08);return _0xa59cc9[a5_0x5748('0x7')](a5_0x5748('0x27'));}const _0x117053=new User_1[(a5_0x5748('0x28'))]({});User_1['default']['findOne']({'email':_0x5a9f5e[a5_0x5748('0x26')][a5_0x5748('0x10')]},(_0x97ca70,_0x1da8ea)=>{if(_0x97ca70){return _0x2540a6(_0x97ca70);}if(_0x1da8ea){_0x5a9f5e[a5_0x5748('0x14')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0xa59cc9[a5_0x5748('0x7')](a5_0x5748('0x27'));}_0x117053[a5_0x5748('0x29')](_0x97ca70=>{if(_0x97ca70){return _0x2540a6(_0x97ca70);}_0x5a9f5e[a5_0x5748('0x17')](_0x117053,_0x97ca70=>{if(_0x97ca70){return _0x2540a6(_0x97ca70);}_0xa59cc9['redirect']('/');});});});};exports[a5_0x5748('0x2a')]=(_0x471f52,_0xaa9cd6)=>{_0xaa9cd6[a5_0x5748('0x8')](a5_0x5748('0x2b'),{'title':a5_0x5748('0x2c')});};exports[a5_0x5748('0x2d')]=(_0x819fa4,_0x2837e9,_0x59a847)=>{_0x819fa4[a5_0x5748('0x21')](a5_0x5748('0x10'),a5_0x5748('0x2e'))['isEmail']();_0x819fa4['sanitize'](a5_0x5748('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3e398=_0x819fa4['validationErrors']();if(_0x3e398){_0x819fa4['flash']('errors',_0x3e398);return _0x2837e9['redirect']('/account');}User_1['default']['findById'](_0x819fa4[a5_0x5748('0x6')]['id'],(_0x3569b8,_0x12530d)=>{if(_0x3569b8){return _0x59a847(_0x3569b8);}_0x12530d['email']=_0x819fa4[a5_0x5748('0x26')][a5_0x5748('0x10')]||'';_0x12530d[a5_0x5748('0x2f')][a5_0x5748('0x30')]=_0x819fa4[a5_0x5748('0x26')][a5_0x5748('0x30')]||'';_0x12530d[a5_0x5748('0x2f')]['gender']=_0x819fa4[a5_0x5748('0x26')][a5_0x5748('0x31')]||'';_0x12530d['profile'][a5_0x5748('0x32')]=_0x819fa4['body'][a5_0x5748('0x32')]||'';_0x12530d[a5_0x5748('0x2f')][a5_0x5748('0x33')]=_0x819fa4['body']['website']||'';_0x12530d['save'](_0x3569b8=>{if(_0x3569b8){if(_0x3569b8['code']===0x2af8){_0x819fa4['flash'](a5_0x5748('0x15'),{'msg':a5_0x5748('0x34')});return _0x2837e9[a5_0x5748('0x7')]('/account');}return _0x59a847(_0x3569b8);}_0x819fa4[a5_0x5748('0x14')](a5_0x5748('0x18'),{'msg':a5_0x5748('0x35')});_0x2837e9[a5_0x5748('0x7')](a5_0x5748('0x36'));});});};exports['postUpdatePassword']=(_0x5a8515,_0x18f844,_0x5d356d)=>{_0x5a8515['assert']('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5748('0x24')]({'min':0x4});_0x5a8515[a5_0x5748('0x21')](a5_0x5748('0x25'),'Passwords\x20do\x20not\x20match')[a5_0x5748('0x37')](_0x5a8515[a5_0x5748('0x26')][a5_0x5748('0xc')]);const _0xb585=_0x5a8515[a5_0x5748('0x38')]();if(_0xb585){_0x5a8515[a5_0x5748('0x14')](a5_0x5748('0x15'),_0xb585);return _0x18f844['redirect'](a5_0x5748('0x36'));}User_1[a5_0x5748('0x28')][a5_0x5748('0x39')](_0x5a8515['user']['id'],(_0x2a40fd,_0x464d63)=>{if(_0x2a40fd){return _0x5d356d(_0x2a40fd);}_0x464d63[a5_0x5748('0xc')]=_0x5a8515[a5_0x5748('0x26')][a5_0x5748('0xc')];_0x464d63[a5_0x5748('0x29')](_0x2a40fd=>{if(_0x2a40fd){return _0x5d356d(_0x2a40fd);}_0x5a8515['flash'](a5_0x5748('0x18'),{'msg':'Password\x20has\x20been\x20changed.'});_0x18f844[a5_0x5748('0x7')](a5_0x5748('0x36'));});});};exports[a5_0x5748('0x3a')]=(_0x10403d,_0x414d96,_0x20479d)=>{User_1[a5_0x5748('0x28')][a5_0x5748('0x3b')]({'_id':_0x10403d['user']['id']},_0x4910f8=>{if(_0x4910f8){return _0x20479d(_0x4910f8);}_0x10403d[a5_0x5748('0x1c')]();_0x10403d[a5_0x5748('0x14')](a5_0x5748('0x3c'),{'msg':a5_0x5748('0x3d')});_0x414d96[a5_0x5748('0x7')]('/');});};exports['getOauthUnlink']=(_0x1de28b,_0x45b0da,_0x4ea430)=>{const _0x28dd28=_0x1de28b[a5_0x5748('0x3e')][a5_0x5748('0x3f')];User_1[a5_0x5748('0x28')][a5_0x5748('0x39')](_0x1de28b[a5_0x5748('0x6')]['id'],(_0x41b880,_0x135c26)=>{if(_0x41b880){return _0x4ea430(_0x41b880);}_0x135c26[_0x28dd28]=undefined;_0x135c26[a5_0x5748('0x40')]=_0x135c26['tokens'][a5_0x5748('0x41')](_0x46b263=>_0x46b263[a5_0x5748('0x42')]!==_0x28dd28);_0x135c26[a5_0x5748('0x29')](_0x41b880=>{if(_0x41b880){return _0x4ea430(_0x41b880);}_0x1de28b[a5_0x5748('0x14')](a5_0x5748('0x3c'),{'msg':_0x28dd28+'\x20account\x20has\x20been\x20unlinked.'});_0x45b0da[a5_0x5748('0x7')]('/account');});});};exports[a5_0x5748('0x43')]=(_0x6e16c1,_0x44c97d,_0x84fd0)=>{if(_0x6e16c1[a5_0x5748('0x44')]()){return _0x44c97d['redirect']('/');}User_1[a5_0x5748('0x28')][a5_0x5748('0x45')]({'passwordResetToken':_0x6e16c1[a5_0x5748('0x3e')][a5_0x5748('0x46')]})[a5_0x5748('0x47')](a5_0x5748('0x48'))['gt'](Date[a5_0x5748('0x49')]())['exec']((_0x55b721,_0x508663)=>{if(_0x55b721){return _0x84fd0(_0x55b721);}if(!_0x508663){_0x6e16c1['flash'](a5_0x5748('0x15'),{'msg':a5_0x5748('0x4a')});return _0x44c97d[a5_0x5748('0x7')](a5_0x5748('0x4b'));}_0x44c97d[a5_0x5748('0x8')](a5_0x5748('0x4c'),{'title':'Password\x20Reset'});});};exports[a5_0x5748('0x4d')]=(_0x51c112,_0x10ddea,_0xca8838)=>{_0x51c112[a5_0x5748('0x21')](a5_0x5748('0xc'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')['len']({'min':0x4});_0x51c112[a5_0x5748('0x21')](a5_0x5748('0x4e'),a5_0x5748('0x4f'))['equals'](_0x51c112['body'][a5_0x5748('0xc')]);const _0x4c61c8=_0x51c112[a5_0x5748('0x38')]();if(_0x4c61c8){_0x51c112[a5_0x5748('0x14')](a5_0x5748('0x15'),_0x4c61c8);return _0x10ddea[a5_0x5748('0x7')](a5_0x5748('0x50'));}async_1[a5_0x5748('0x28')][a5_0x5748('0x51')]([function resetPassword(_0x4621eb){User_1['default']['findOne']({'passwordResetToken':_0x51c112[a5_0x5748('0x3e')]['token']})[a5_0x5748('0x47')](a5_0x5748('0x48'))['gt'](Date['now']())[a5_0x5748('0x52')]((_0x338128,_0x3204e3)=>{if(_0x338128){return _0xca8838(_0x338128);}if(!_0x3204e3){_0x51c112[a5_0x5748('0x14')]('errors',{'msg':a5_0x5748('0x4a')});return _0x10ddea['redirect']('back');}_0x3204e3[a5_0x5748('0xc')]=_0x51c112['body'][a5_0x5748('0xc')];_0x3204e3['passwordResetToken']=undefined;_0x3204e3[a5_0x5748('0x48')]=undefined;_0x3204e3[a5_0x5748('0x29')](_0x338128=>{if(_0x338128){return _0xca8838(_0x338128);}_0x51c112[a5_0x5748('0x17')](_0x3204e3,_0x338128=>{_0x4621eb(_0x338128,_0x3204e3);});});});},function sendResetPasswordEmail(_0x36f01e,_0x40d3cc){const _0x26a600=nodemailer_1[a5_0x5748('0x28')][a5_0x5748('0x53')]({'service':a5_0x5748('0x54'),'auth':{'user':process[a5_0x5748('0x55')][a5_0x5748('0x56')],'pass':process[a5_0x5748('0x55')][a5_0x5748('0x57')]}});const _0x4cb91f={'to':_0x36f01e['email'],'from':'express-ts@starter.com','subject':a5_0x5748('0x58'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x36f01e[a5_0x5748('0x10')]+a5_0x5748('0x59')};_0x26a600[a5_0x5748('0x5a')](_0x4cb91f,_0x3d9a3a=>{_0x51c112['flash'](a5_0x5748('0x18'),{'msg':a5_0x5748('0x5b')});_0x40d3cc(_0x3d9a3a);});}],_0x585d62=>{if(_0x585d62){return _0xca8838(_0x585d62);}_0x10ddea[a5_0x5748('0x7')]('/');});};exports['getForgot']=(_0x39dd5b,_0x58d5ed)=>{if(_0x39dd5b['isAuthenticated']()){return _0x58d5ed[a5_0x5748('0x7')]('/');}_0x58d5ed[a5_0x5748('0x8')](a5_0x5748('0x5c'),{'title':a5_0x5748('0x5d')});};exports['postForgot']=(_0x17d4ff,_0x5ca660,_0x5d0fc5)=>{_0x17d4ff[a5_0x5748('0x21')](a5_0x5748('0x10'),a5_0x5748('0x2e'))[a5_0x5748('0x22')]();_0x17d4ff[a5_0x5748('0xf')](a5_0x5748('0x10'))[a5_0x5748('0x11')]({'gmail_remove_dots':![]});const _0x30e370=_0x17d4ff[a5_0x5748('0x38')]();if(_0x30e370){_0x17d4ff[a5_0x5748('0x14')]('errors',_0x30e370);return _0x5ca660[a5_0x5748('0x7')]('/forgot');}async_1[a5_0x5748('0x28')][a5_0x5748('0x51')]([function createRandomToken(_0x547812){crypto_1[a5_0x5748('0x28')][a5_0x5748('0x5e')](0x10,(_0x2aa8d4,_0x34f6bd)=>{const _0x4debc0=_0x34f6bd[a5_0x5748('0x5f')](a5_0x5748('0x60'));_0x547812(_0x2aa8d4,_0x4debc0);});},function setRandomToken(_0x295c3,_0x421664){User_1[a5_0x5748('0x28')][a5_0x5748('0x45')]({'email':_0x17d4ff[a5_0x5748('0x26')][a5_0x5748('0x10')]},(_0x2b4754,_0x3ccee3)=>{if(_0x2b4754){return _0x421664(_0x2b4754);}if(!_0x3ccee3){_0x17d4ff['flash'](a5_0x5748('0x15'),{'msg':a5_0x5748('0x61')});return _0x5ca660[a5_0x5748('0x7')](a5_0x5748('0x4b'));}_0x3ccee3[a5_0x5748('0x62')]=_0x295c3;_0x3ccee3[a5_0x5748('0x48')]=Date['now']()+0x36ee80;_0x3ccee3['save'](_0x2b4754=>{_0x421664(_0x2b4754,_0x295c3,_0x3ccee3);});});},function sendForgotPasswordEmail(_0x3aa9da,_0x29f1bf,_0x1d8566){const _0x2e7cce=nodemailer_1[a5_0x5748('0x28')]['createTransport']({'service':'SendGrid','auth':{'user':process['env'][a5_0x5748('0x56')],'pass':process['env'][a5_0x5748('0x57')]}});const _0x2f8d82={'to':_0x29f1bf[a5_0x5748('0x10')],'from':a5_0x5748('0x63'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x17d4ff[a5_0x5748('0x64')]['host']+a5_0x5748('0x65')+_0x3aa9da+a5_0x5748('0x66')};_0x2e7cce[a5_0x5748('0x5a')](_0x2f8d82,_0x137869=>{_0x17d4ff['flash'](a5_0x5748('0x3c'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x29f1bf[a5_0x5748('0x10')]+a5_0x5748('0x67')});_0x1d8566(_0x137869);});}],_0x31c5b3=>{if(_0x31c5b3){return _0x5d0fc5(_0x31c5b3);}_0x5ca660[a5_0x5748('0x7')]('/forgot');});};