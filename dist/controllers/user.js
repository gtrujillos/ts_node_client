var a5_0x1e12=['Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','body','sanitize','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','getOauthUnlink','params','provider','tokens','filter','kind','save','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','passwordResetExpires','exec','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','equals','back','waterfall','where','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SENDGRID_USER','env','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','render','account/login','Login','email','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','validationErrors','flash','errors','default','local','message','/login','logIn','success'];(function(_0x558cf2,_0x11bc2a){var _0x326fa9=function(_0xe2b272){while(--_0xe2b272){_0x558cf2['push'](_0x558cf2['shift']());}};_0x326fa9(++_0x11bc2a);}(a5_0x1e12,0xbf));var a5_0x10ec=function(_0x3a034e,_0x42782b){_0x3a034e=_0x3a034e-0x0;var _0x57a9e8=a5_0x1e12[_0x3a034e];return _0x57a9e8;};'use strict';var __importDefault=this&&this[a5_0x10ec('0x0')]||function(_0x2b98e6){return _0x2b98e6&&_0x2b98e6[a5_0x10ec('0x1')]?_0x2b98e6:{'default':_0x2b98e6};};Object[a5_0x10ec('0x2')](exports,a5_0x10ec('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x10ec('0x3')));const crypto_1=__importDefault(require(a5_0x10ec('0x4')));const nodemailer_1=__importDefault(require(a5_0x10ec('0x5')));const passport_1=__importDefault(require(a5_0x10ec('0x6')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x10ec('0x7'));exports[a5_0x10ec('0x8')]=(_0x56ce28,_0x4ea42b)=>{if(_0x56ce28[a5_0x10ec('0x9')]){return _0x4ea42b[a5_0x10ec('0xa')]('/');}_0x4ea42b[a5_0x10ec('0xb')](a5_0x10ec('0xc'),{'title':a5_0x10ec('0xd')});};exports['postLogin']=(_0x2e314a,_0x3ec539,_0x4cd6db)=>{_0x2e314a['assert'](a5_0x10ec('0xe'),a5_0x10ec('0xf'))[a5_0x10ec('0x10')]();_0x2e314a[a5_0x10ec('0x11')](a5_0x10ec('0x12'),a5_0x10ec('0x13'))[a5_0x10ec('0x14')]();_0x2e314a['sanitize'](a5_0x10ec('0xe'))[a5_0x10ec('0x15')]({'gmail_remove_dots':![]});const _0x4b4b64=_0x2e314a[a5_0x10ec('0x16')]();if(_0x4b4b64){_0x2e314a[a5_0x10ec('0x17')](a5_0x10ec('0x18'),_0x4b4b64);return _0x3ec539[a5_0x10ec('0xa')]('/login');}passport_1[a5_0x10ec('0x19')]['authenticate'](a5_0x10ec('0x1a'),(_0x3bc75a,_0xa45e9a,_0x525bc6)=>{if(_0x3bc75a){return _0x4cd6db(_0x3bc75a);}if(!_0xa45e9a){_0x2e314a['flash'](a5_0x10ec('0x18'),_0x525bc6[a5_0x10ec('0x1b')]);return _0x3ec539[a5_0x10ec('0xa')](a5_0x10ec('0x1c'));}_0x2e314a[a5_0x10ec('0x1d')](_0xa45e9a,_0x3bc75a=>{if(_0x3bc75a){return _0x4cd6db(_0x3bc75a);}_0x2e314a[a5_0x10ec('0x17')](a5_0x10ec('0x1e'),{'msg':a5_0x10ec('0x1f')});_0x3ec539[a5_0x10ec('0xa')](_0x2e314a['session'][a5_0x10ec('0x20')]||'/');});})(_0x2e314a,_0x3ec539,_0x4cd6db);};exports[a5_0x10ec('0x21')]=(_0x4b0c23,_0x3bc725)=>{_0x4b0c23[a5_0x10ec('0x21')]();_0x3bc725[a5_0x10ec('0xa')]('/');};exports[a5_0x10ec('0x22')]=(_0x1e481b,_0x5e53fa)=>{if(_0x1e481b['user']){return _0x5e53fa[a5_0x10ec('0xa')]('/');}_0x5e53fa[a5_0x10ec('0xb')](a5_0x10ec('0x23'),{'title':a5_0x10ec('0x24')});};exports[a5_0x10ec('0x25')]=(_0x3298a2,_0x387f3c,_0x59d4b2)=>{_0x3298a2['assert']('email',a5_0x10ec('0xf'))['isEmail']();_0x3298a2[a5_0x10ec('0x11')](a5_0x10ec('0x12'),a5_0x10ec('0x26'))[a5_0x10ec('0x27')]({'min':0x4});_0x3298a2[a5_0x10ec('0x11')](a5_0x10ec('0x28'),'Passwords\x20do\x20not\x20match')['equals'](_0x3298a2[a5_0x10ec('0x29')][a5_0x10ec('0x12')]);_0x3298a2[a5_0x10ec('0x2a')](a5_0x10ec('0xe'))[a5_0x10ec('0x15')]({'gmail_remove_dots':![]});const _0x8573ca=_0x3298a2[a5_0x10ec('0x16')]();if(_0x8573ca){_0x3298a2['flash'](a5_0x10ec('0x18'),_0x8573ca);return _0x387f3c['redirect'](a5_0x10ec('0x2b'));}const _0x53ae8f=new User_1['default']({'email':_0x3298a2[a5_0x10ec('0x29')][a5_0x10ec('0xe')],'password':_0x3298a2[a5_0x10ec('0x29')]['password']});User_1[a5_0x10ec('0x19')][a5_0x10ec('0x2c')]({'email':_0x3298a2[a5_0x10ec('0x29')][a5_0x10ec('0xe')]},(_0x1dc257,_0x52ca6d)=>{if(_0x1dc257){return _0x59d4b2(_0x1dc257);}if(_0x52ca6d){_0x3298a2['flash'](a5_0x10ec('0x18'),{'msg':a5_0x10ec('0x2d')});return _0x387f3c[a5_0x10ec('0xa')]('/signup');}_0x53ae8f['save'](_0x1dc257=>{if(_0x1dc257){return _0x59d4b2(_0x1dc257);}_0x3298a2[a5_0x10ec('0x1d')](_0x53ae8f,_0x1dc257=>{if(_0x1dc257){return _0x59d4b2(_0x1dc257);}_0x387f3c[a5_0x10ec('0xa')]('/');});});});};exports['getAccount']=(_0x3e61de,_0x56a394)=>{_0x56a394[a5_0x10ec('0xb')](a5_0x10ec('0x2e'),{'title':a5_0x10ec('0x2f')});};exports[a5_0x10ec('0x30')]=(_0x39fdc1,_0xc51817,_0x130f2f)=>{_0x39fdc1[a5_0x10ec('0x11')]('email',a5_0x10ec('0x31'))[a5_0x10ec('0x10')]();_0x39fdc1['sanitize'](a5_0x10ec('0xe'))[a5_0x10ec('0x15')]({'gmail_remove_dots':![]});const _0xbbda5=_0x39fdc1['validationErrors']();if(_0xbbda5){_0x39fdc1['flash']('errors',_0xbbda5);return _0xc51817[a5_0x10ec('0xa')](a5_0x10ec('0x32'));}User_1['default'][a5_0x10ec('0x33')](_0x39fdc1[a5_0x10ec('0x9')]['id'],(_0x375eb0,_0x5022fa)=>{if(_0x375eb0){return _0x130f2f(_0x375eb0);}_0x5022fa['email']=_0x39fdc1[a5_0x10ec('0x29')][a5_0x10ec('0xe')]||'';_0x5022fa[a5_0x10ec('0x34')][a5_0x10ec('0x35')]=_0x39fdc1[a5_0x10ec('0x29')]['name']||'';_0x5022fa[a5_0x10ec('0x34')][a5_0x10ec('0x36')]=_0x39fdc1['body'][a5_0x10ec('0x36')]||'';_0x5022fa[a5_0x10ec('0x34')][a5_0x10ec('0x37')]=_0x39fdc1['body'][a5_0x10ec('0x37')]||'';_0x5022fa['profile'][a5_0x10ec('0x38')]=_0x39fdc1['body'][a5_0x10ec('0x38')]||'';_0x5022fa['save'](_0x375eb0=>{if(_0x375eb0){if(_0x375eb0[a5_0x10ec('0x39')]===0x2af8){_0x39fdc1[a5_0x10ec('0x17')](a5_0x10ec('0x18'),{'msg':a5_0x10ec('0x3a')});return _0xc51817[a5_0x10ec('0xa')]('/account');}return _0x130f2f(_0x375eb0);}_0x39fdc1['flash']('success',{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0xc51817[a5_0x10ec('0xa')]('/account');});});};exports[a5_0x10ec('0x3b')]=(_0x37a219,_0x3805ff,_0x5b6725)=>{_0x37a219[a5_0x10ec('0x11')](a5_0x10ec('0x12'),a5_0x10ec('0x26'))['len']({'min':0x4});_0x37a219[a5_0x10ec('0x11')](a5_0x10ec('0x28'),a5_0x10ec('0x3c'))['equals'](_0x37a219[a5_0x10ec('0x29')][a5_0x10ec('0x12')]);const _0x5cec21=_0x37a219[a5_0x10ec('0x16')]();if(_0x5cec21){_0x37a219[a5_0x10ec('0x17')](a5_0x10ec('0x18'),_0x5cec21);return _0x3805ff[a5_0x10ec('0xa')](a5_0x10ec('0x32'));}User_1[a5_0x10ec('0x19')]['findById'](_0x37a219[a5_0x10ec('0x9')]['id'],(_0x285dfb,_0x39d70a)=>{if(_0x285dfb){return _0x5b6725(_0x285dfb);}_0x39d70a[a5_0x10ec('0x12')]=_0x37a219[a5_0x10ec('0x29')][a5_0x10ec('0x12')];_0x39d70a['save'](_0x285dfb=>{if(_0x285dfb){return _0x5b6725(_0x285dfb);}_0x37a219[a5_0x10ec('0x17')](a5_0x10ec('0x1e'),{'msg':a5_0x10ec('0x3d')});_0x3805ff[a5_0x10ec('0xa')]('/account');});});};exports[a5_0x10ec('0x3e')]=(_0x346965,_0x4626f0,_0x52d29b)=>{User_1['default'][a5_0x10ec('0x3f')]({'_id':_0x346965[a5_0x10ec('0x9')]['id']},_0x3ded6a=>{if(_0x3ded6a){return _0x52d29b(_0x3ded6a);}_0x346965[a5_0x10ec('0x21')]();_0x346965[a5_0x10ec('0x17')]('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x4626f0[a5_0x10ec('0xa')]('/');});};exports[a5_0x10ec('0x40')]=(_0x340fc6,_0x3daa74,_0x30f480)=>{const _0x34e161=_0x340fc6[a5_0x10ec('0x41')][a5_0x10ec('0x42')];User_1[a5_0x10ec('0x19')][a5_0x10ec('0x33')](_0x340fc6[a5_0x10ec('0x9')]['id'],(_0x58228e,_0x5d5d44)=>{if(_0x58228e){return _0x30f480(_0x58228e);}_0x5d5d44[_0x34e161]=undefined;_0x5d5d44[a5_0x10ec('0x43')]=_0x5d5d44[a5_0x10ec('0x43')][a5_0x10ec('0x44')](_0x31fe4c=>_0x31fe4c[a5_0x10ec('0x45')]!==_0x34e161);_0x5d5d44[a5_0x10ec('0x46')](_0x58228e=>{if(_0x58228e){return _0x30f480(_0x58228e);}_0x340fc6['flash'](a5_0x10ec('0x47'),{'msg':_0x34e161+a5_0x10ec('0x48')});_0x3daa74[a5_0x10ec('0xa')](a5_0x10ec('0x32'));});});};exports[a5_0x10ec('0x49')]=(_0x19ee8e,_0x4b54b5,_0x134942)=>{if(_0x19ee8e[a5_0x10ec('0x4a')]()){return _0x4b54b5['redirect']('/');}User_1['default']['findOne']({'passwordResetToken':_0x19ee8e[a5_0x10ec('0x41')][a5_0x10ec('0x4b')]})['where'](a5_0x10ec('0x4c'))['gt'](Date['now']())[a5_0x10ec('0x4d')]((_0x485cb4,_0x41cae6)=>{if(_0x485cb4){return _0x134942(_0x485cb4);}if(!_0x41cae6){_0x19ee8e[a5_0x10ec('0x17')](a5_0x10ec('0x18'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4b54b5[a5_0x10ec('0xa')](a5_0x10ec('0x4e'));}_0x4b54b5[a5_0x10ec('0xb')](a5_0x10ec('0x4f'),{'title':'Password\x20Reset'});});};exports[a5_0x10ec('0x50')]=(_0x2b4d87,_0xefb9c7,_0x6668d9)=>{_0x2b4d87['assert'](a5_0x10ec('0x12'),a5_0x10ec('0x51'))['len']({'min':0x4});_0x2b4d87['assert'](a5_0x10ec('0x52'),a5_0x10ec('0x53'))[a5_0x10ec('0x54')](_0x2b4d87[a5_0x10ec('0x29')][a5_0x10ec('0x12')]);const _0xc7cc02=_0x2b4d87['validationErrors']();if(_0xc7cc02){_0x2b4d87[a5_0x10ec('0x17')]('errors',_0xc7cc02);return _0xefb9c7[a5_0x10ec('0xa')](a5_0x10ec('0x55'));}async_1[a5_0x10ec('0x19')][a5_0x10ec('0x56')]([function resetPassword(_0x3214a6){User_1['default'][a5_0x10ec('0x2c')]({'passwordResetToken':_0x2b4d87[a5_0x10ec('0x41')][a5_0x10ec('0x4b')]})[a5_0x10ec('0x57')]('passwordResetExpires')['gt'](Date[a5_0x10ec('0x58')]())[a5_0x10ec('0x4d')]((_0x2498bc,_0x80d7b8)=>{if(_0x2498bc){return _0x6668d9(_0x2498bc);}if(!_0x80d7b8){_0x2b4d87[a5_0x10ec('0x17')](a5_0x10ec('0x18'),{'msg':a5_0x10ec('0x59')});return _0xefb9c7['redirect'](a5_0x10ec('0x55'));}_0x80d7b8['password']=_0x2b4d87[a5_0x10ec('0x29')][a5_0x10ec('0x12')];_0x80d7b8[a5_0x10ec('0x5a')]=undefined;_0x80d7b8[a5_0x10ec('0x4c')]=undefined;_0x80d7b8['save'](_0x2498bc=>{if(_0x2498bc){return _0x6668d9(_0x2498bc);}_0x2b4d87[a5_0x10ec('0x1d')](_0x80d7b8,_0x2498bc=>{_0x3214a6(_0x2498bc,_0x80d7b8);});});});},function sendResetPasswordEmail(_0xa65682,_0x22a02e){const _0x20f99a=nodemailer_1['default'][a5_0x10ec('0x5b')]({'service':'SendGrid','auth':{'user':process['env'][a5_0x10ec('0x5c')],'pass':process[a5_0x10ec('0x5d')]['SENDGRID_PASSWORD']}});const _0x4bed3b={'to':_0xa65682[a5_0x10ec('0xe')],'from':a5_0x10ec('0x5e'),'subject':a5_0x10ec('0x5f'),'text':a5_0x10ec('0x60')+_0xa65682[a5_0x10ec('0xe')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x20f99a[a5_0x10ec('0x61')](_0x4bed3b,_0x38286d=>{_0x2b4d87[a5_0x10ec('0x17')](a5_0x10ec('0x1e'),{'msg':a5_0x10ec('0x62')});_0x22a02e(_0x38286d);});}],_0x550936=>{if(_0x550936){return _0x6668d9(_0x550936);}_0xefb9c7[a5_0x10ec('0xa')]('/');});};exports[a5_0x10ec('0x63')]=(_0x24a08f,_0x37979f)=>{if(_0x24a08f[a5_0x10ec('0x4a')]()){return _0x37979f[a5_0x10ec('0xa')]('/');}_0x37979f[a5_0x10ec('0xb')](a5_0x10ec('0x64'),{'title':a5_0x10ec('0x65')});};exports[a5_0x10ec('0x66')]=(_0x329360,_0x3c13b3,_0x1ca7ec)=>{_0x329360[a5_0x10ec('0x11')](a5_0x10ec('0xe'),a5_0x10ec('0x31'))[a5_0x10ec('0x10')]();_0x329360[a5_0x10ec('0x2a')]('email')[a5_0x10ec('0x15')]({'gmail_remove_dots':![]});const _0x36bc83=_0x329360[a5_0x10ec('0x16')]();if(_0x36bc83){_0x329360['flash'](a5_0x10ec('0x18'),_0x36bc83);return _0x3c13b3[a5_0x10ec('0xa')](a5_0x10ec('0x4e'));}async_1[a5_0x10ec('0x19')]['waterfall']([function createRandomToken(_0x45c000){crypto_1[a5_0x10ec('0x19')]['randomBytes'](0x10,(_0x1fc388,_0x3c7466)=>{const _0x525300=_0x3c7466['toString'](a5_0x10ec('0x67'));_0x45c000(_0x1fc388,_0x525300);});},function setRandomToken(_0x53e602,_0x2401a9){User_1['default'][a5_0x10ec('0x2c')]({'email':_0x329360['body'][a5_0x10ec('0xe')]},(_0x3bc489,_0xf627ae)=>{if(_0x3bc489){return _0x2401a9(_0x3bc489);}if(!_0xf627ae){_0x329360[a5_0x10ec('0x17')]('errors',{'msg':a5_0x10ec('0x68')});return _0x3c13b3[a5_0x10ec('0xa')](a5_0x10ec('0x4e'));}_0xf627ae[a5_0x10ec('0x5a')]=_0x53e602;_0xf627ae[a5_0x10ec('0x4c')]=Date[a5_0x10ec('0x58')]()+0x36ee80;_0xf627ae['save'](_0x3bc489=>{_0x2401a9(_0x3bc489,_0x53e602,_0xf627ae);});});},function sendForgotPasswordEmail(_0x5dce75,_0x3e86ec,_0x3273db){const _0x5c8347=nodemailer_1[a5_0x10ec('0x19')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0x10ec('0x5d')]['SENDGRID_USER'],'pass':process[a5_0x10ec('0x5d')][a5_0x10ec('0x69')]}});const _0x4c6e62={'to':_0x3e86ec[a5_0x10ec('0xe')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x10ec('0x6a')+_0x329360['headers'][a5_0x10ec('0x6b')]+a5_0x10ec('0x6c')+_0x5dce75+a5_0x10ec('0x6d')};_0x5c8347[a5_0x10ec('0x61')](_0x4c6e62,_0x273b25=>{_0x329360[a5_0x10ec('0x17')](a5_0x10ec('0x47'),{'msg':a5_0x10ec('0x6e')+_0x3e86ec[a5_0x10ec('0xe')]+'\x20with\x20further\x20instructions.'});_0x3273db(_0x273b25);});}],_0x2df0b7=>{if(_0x2df0b7){return _0x1ca7ec(_0x2df0b7);}_0x3c13b3[a5_0x10ec('0xa')](a5_0x10ec('0x4e'));});};