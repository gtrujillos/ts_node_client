var a5_0x544e=['env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','/forgot','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','SendGrid','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','__esModule','async','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','postLogin','email','Email\x20is\x20not\x20valid','assert','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','session','logout','getSignup','account/signup','Create\x20Account','postSignup','isEmail','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','/signup','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','getReset','isAuthenticated','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','token','where','passwordResetExpires','now','exec'];(function(_0x32e40b,_0x1ebf69){var _0x1229fe=function(_0x43b5fa){while(--_0x43b5fa){_0x32e40b['push'](_0x32e40b['shift']());}};_0x1229fe(++_0x1ebf69);}(a5_0x544e,0x82));var a5_0x4c40=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a5_0x544e[_0x2d8f05];return _0x4d74cb;};'use strict';var __importDefault=this&&this[a5_0x4c40('0x0')]||function(_0x21629d){return _0x21629d&&_0x21629d['__esModule']?_0x21629d:{'default':_0x21629d};};Object[a5_0x4c40('0x1')](exports,a5_0x4c40('0x2'),{'value':!![]});const async_1=__importDefault(require(a5_0x4c40('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x4c40('0x4')));const passport_1=__importDefault(require(a5_0x4c40('0x5')));const User_1=__importDefault(require(a5_0x4c40('0x6')));const request=require(a5_0x4c40('0x7'));exports[a5_0x4c40('0x8')]=(_0x4aab71,_0x5c0946)=>{if(_0x4aab71[a5_0x4c40('0x9')]){return _0x5c0946[a5_0x4c40('0xa')]('/');}_0x5c0946[a5_0x4c40('0xb')]('account/login',{'title':'Login'});};exports[a5_0x4c40('0xc')]=(_0x4de3fe,_0x5428d8,_0x550581)=>{_0x4de3fe['assert'](a5_0x4c40('0xd'),a5_0x4c40('0xe'))['isEmail']();_0x4de3fe[a5_0x4c40('0xf')](a5_0x4c40('0x10'),a5_0x4c40('0x11'))['notEmpty']();_0x4de3fe[a5_0x4c40('0x12')](a5_0x4c40('0xd'))[a5_0x4c40('0x13')]({'gmail_remove_dots':![]});const _0x400674=_0x4de3fe[a5_0x4c40('0x14')]();if(_0x400674){_0x4de3fe[a5_0x4c40('0x15')](a5_0x4c40('0x16'),_0x400674);return _0x5428d8[a5_0x4c40('0xa')](a5_0x4c40('0x17'));}passport_1[a5_0x4c40('0x18')][a5_0x4c40('0x19')](a5_0x4c40('0x1a'),(_0x133132,_0x16b4ea,_0x12d66f)=>{if(_0x133132){return _0x550581(_0x133132);}if(!_0x16b4ea){_0x4de3fe[a5_0x4c40('0x15')](a5_0x4c40('0x16'),_0x12d66f[a5_0x4c40('0x1b')]);return _0x5428d8[a5_0x4c40('0xa')](a5_0x4c40('0x17'));}_0x4de3fe[a5_0x4c40('0x1c')](_0x16b4ea,_0x133132=>{if(_0x133132){return _0x550581(_0x133132);}_0x4de3fe[a5_0x4c40('0x15')]('success',{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x5428d8[a5_0x4c40('0xa')](_0x4de3fe[a5_0x4c40('0x1d')]['returnTo']||'/');});})(_0x4de3fe,_0x5428d8,_0x550581);};exports[a5_0x4c40('0x1e')]=(_0x33aa23,_0x20a117)=>{_0x33aa23[a5_0x4c40('0x1e')]();_0x20a117[a5_0x4c40('0xa')]('/');};exports[a5_0x4c40('0x1f')]=(_0x129bb3,_0x4638b9)=>{if(_0x129bb3[a5_0x4c40('0x9')]){return _0x4638b9['redirect']('/');}_0x4638b9[a5_0x4c40('0xb')](a5_0x4c40('0x20'),{'title':a5_0x4c40('0x21')});};exports[a5_0x4c40('0x22')]=(_0x3b0c05,_0x3db662,_0x4a3594)=>{_0x3b0c05['assert']('email',a5_0x4c40('0xe'))[a5_0x4c40('0x23')]();_0x3b0c05[a5_0x4c40('0xf')](a5_0x4c40('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x4c40('0x24')]({'min':0x4});_0x3b0c05[a5_0x4c40('0xf')](a5_0x4c40('0x25'),a5_0x4c40('0x26'))[a5_0x4c40('0x27')](_0x3b0c05['body'][a5_0x4c40('0x10')]);_0x3b0c05['sanitize'](a5_0x4c40('0xd'))[a5_0x4c40('0x13')]({'gmail_remove_dots':![]});const _0x48f7af=_0x3b0c05[a5_0x4c40('0x14')]();if(_0x48f7af){_0x3b0c05[a5_0x4c40('0x15')](a5_0x4c40('0x16'),_0x48f7af);return _0x3db662['redirect'](a5_0x4c40('0x28'));}const _0x2e9837=new User_1['default']({'email':_0x3b0c05[a5_0x4c40('0x29')][a5_0x4c40('0xd')],'password':_0x3b0c05[a5_0x4c40('0x29')][a5_0x4c40('0x10')]});User_1[a5_0x4c40('0x18')][a5_0x4c40('0x2a')]({'email':_0x3b0c05[a5_0x4c40('0x29')][a5_0x4c40('0xd')]},(_0x1b11c0,_0x47692f)=>{if(_0x1b11c0){return _0x4a3594(_0x1b11c0);}if(_0x47692f){_0x3b0c05[a5_0x4c40('0x15')]('errors',{'msg':a5_0x4c40('0x2b')});return _0x3db662[a5_0x4c40('0xa')](a5_0x4c40('0x28'));}_0x2e9837[a5_0x4c40('0x2c')](_0x1b11c0=>{if(_0x1b11c0){return _0x4a3594(_0x1b11c0);}_0x3b0c05['logIn'](_0x2e9837,_0x1b11c0=>{if(_0x1b11c0){return _0x4a3594(_0x1b11c0);}_0x3db662[a5_0x4c40('0xa')]('/');});});});};exports[a5_0x4c40('0x2d')]=(_0x3f70f8,_0x42324e)=>{_0x42324e['render'](a5_0x4c40('0x2e'),{'title':a5_0x4c40('0x2f')});};exports[a5_0x4c40('0x30')]=(_0x5d8b00,_0x51cdb3,_0x298b8b)=>{_0x5d8b00[a5_0x4c40('0xf')]('email',a5_0x4c40('0x31'))['isEmail']();_0x5d8b00[a5_0x4c40('0x12')](a5_0x4c40('0xd'))[a5_0x4c40('0x13')]({'gmail_remove_dots':![]});const _0x454009=_0x5d8b00[a5_0x4c40('0x14')]();if(_0x454009){_0x5d8b00[a5_0x4c40('0x15')]('errors',_0x454009);return _0x51cdb3[a5_0x4c40('0xa')](a5_0x4c40('0x32'));}User_1[a5_0x4c40('0x18')][a5_0x4c40('0x33')](_0x5d8b00[a5_0x4c40('0x9')]['id'],(_0x38a2aa,_0xb565b7)=>{if(_0x38a2aa){return _0x298b8b(_0x38a2aa);}_0xb565b7[a5_0x4c40('0xd')]=_0x5d8b00[a5_0x4c40('0x29')][a5_0x4c40('0xd')]||'';_0xb565b7[a5_0x4c40('0x34')][a5_0x4c40('0x35')]=_0x5d8b00['body'][a5_0x4c40('0x35')]||'';_0xb565b7[a5_0x4c40('0x34')]['gender']=_0x5d8b00[a5_0x4c40('0x29')][a5_0x4c40('0x36')]||'';_0xb565b7[a5_0x4c40('0x34')][a5_0x4c40('0x37')]=_0x5d8b00[a5_0x4c40('0x29')][a5_0x4c40('0x37')]||'';_0xb565b7[a5_0x4c40('0x34')][a5_0x4c40('0x38')]=_0x5d8b00['body']['website']||'';_0xb565b7[a5_0x4c40('0x2c')](_0x38a2aa=>{if(_0x38a2aa){if(_0x38a2aa[a5_0x4c40('0x39')]===0x2af8){_0x5d8b00[a5_0x4c40('0x15')](a5_0x4c40('0x16'),{'msg':a5_0x4c40('0x3a')});return _0x51cdb3[a5_0x4c40('0xa')](a5_0x4c40('0x32'));}return _0x298b8b(_0x38a2aa);}_0x5d8b00[a5_0x4c40('0x15')](a5_0x4c40('0x3b'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x51cdb3[a5_0x4c40('0xa')](a5_0x4c40('0x32'));});});};exports[a5_0x4c40('0x3c')]=(_0x3edd4b,_0x41a154,_0x35dcbd)=>{_0x3edd4b[a5_0x4c40('0xf')](a5_0x4c40('0x10'),a5_0x4c40('0x3d'))[a5_0x4c40('0x24')]({'min':0x4});_0x3edd4b['assert'](a5_0x4c40('0x25'),a5_0x4c40('0x26'))[a5_0x4c40('0x27')](_0x3edd4b['body'][a5_0x4c40('0x10')]);const _0x1d49e3=_0x3edd4b[a5_0x4c40('0x14')]();if(_0x1d49e3){_0x3edd4b[a5_0x4c40('0x15')]('errors',_0x1d49e3);return _0x41a154['redirect'](a5_0x4c40('0x32'));}User_1[a5_0x4c40('0x18')][a5_0x4c40('0x33')](_0x3edd4b[a5_0x4c40('0x9')]['id'],(_0x245f8e,_0x42cd37)=>{if(_0x245f8e){return _0x35dcbd(_0x245f8e);}_0x42cd37[a5_0x4c40('0x10')]=_0x3edd4b[a5_0x4c40('0x29')][a5_0x4c40('0x10')];_0x42cd37[a5_0x4c40('0x2c')](_0x245f8e=>{if(_0x245f8e){return _0x35dcbd(_0x245f8e);}_0x3edd4b[a5_0x4c40('0x15')](a5_0x4c40('0x3b'),{'msg':a5_0x4c40('0x3e')});_0x41a154[a5_0x4c40('0xa')](a5_0x4c40('0x32'));});});};exports[a5_0x4c40('0x3f')]=(_0x20d314,_0x3854a9,_0x4c8f5e)=>{User_1[a5_0x4c40('0x18')][a5_0x4c40('0x40')]({'_id':_0x20d314['user']['id']},_0x2ced0d=>{if(_0x2ced0d){return _0x4c8f5e(_0x2ced0d);}_0x20d314['logout']();_0x20d314[a5_0x4c40('0x15')](a5_0x4c40('0x41'),{'msg':a5_0x4c40('0x42')});_0x3854a9['redirect']('/');});};exports[a5_0x4c40('0x43')]=(_0x55ffac,_0x5f100c,_0x2ef7d0)=>{const _0x4a3516=_0x55ffac[a5_0x4c40('0x44')]['provider'];User_1[a5_0x4c40('0x18')][a5_0x4c40('0x33')](_0x55ffac[a5_0x4c40('0x9')]['id'],(_0x5cba8a,_0x43c9c3)=>{if(_0x5cba8a){return _0x2ef7d0(_0x5cba8a);}_0x43c9c3[_0x4a3516]=undefined;_0x43c9c3[a5_0x4c40('0x45')]=_0x43c9c3[a5_0x4c40('0x45')][a5_0x4c40('0x46')](_0x113d13=>_0x113d13[a5_0x4c40('0x47')]!==_0x4a3516);_0x43c9c3[a5_0x4c40('0x2c')](_0x5cba8a=>{if(_0x5cba8a){return _0x2ef7d0(_0x5cba8a);}_0x55ffac[a5_0x4c40('0x15')]('info',{'msg':_0x4a3516+'\x20account\x20has\x20been\x20unlinked.'});_0x5f100c[a5_0x4c40('0xa')](a5_0x4c40('0x32'));});});};exports[a5_0x4c40('0x48')]=(_0x13a24f,_0x1a5ee9,_0x437a8c)=>{if(_0x13a24f[a5_0x4c40('0x49')]()){return _0x1a5ee9['redirect']('/');}User_1[a5_0x4c40('0x18')]['findOne']({'passwordResetToken':_0x13a24f['params']['token']})['where']('passwordResetExpires')['gt'](Date['now']())['exec']((_0x1ef46b,_0xd418b0)=>{if(_0x1ef46b){return _0x437a8c(_0x1ef46b);}if(!_0xd418b0){_0x13a24f[a5_0x4c40('0x15')]('errors',{'msg':a5_0x4c40('0x4a')});return _0x1a5ee9[a5_0x4c40('0xa')]('/forgot');}_0x1a5ee9[a5_0x4c40('0xb')](a5_0x4c40('0x4b'),{'title':a5_0x4c40('0x4c')});});};exports['postReset']=(_0x243130,_0x42f81a,_0x25e705)=>{_0x243130[a5_0x4c40('0xf')](a5_0x4c40('0x10'),a5_0x4c40('0x4d'))[a5_0x4c40('0x24')]({'min':0x4});_0x243130[a5_0x4c40('0xf')](a5_0x4c40('0x4e'),'Passwords\x20must\x20match.')[a5_0x4c40('0x27')](_0x243130[a5_0x4c40('0x29')][a5_0x4c40('0x10')]);const _0x106e09=_0x243130[a5_0x4c40('0x14')]();if(_0x106e09){_0x243130[a5_0x4c40('0x15')]('errors',_0x106e09);return _0x42f81a[a5_0x4c40('0xa')](a5_0x4c40('0x4f'));}async_1[a5_0x4c40('0x18')][a5_0x4c40('0x50')]([function resetPassword(_0x269344){User_1['default'][a5_0x4c40('0x2a')]({'passwordResetToken':_0x243130[a5_0x4c40('0x44')][a5_0x4c40('0x51')]})[a5_0x4c40('0x52')](a5_0x4c40('0x53'))['gt'](Date[a5_0x4c40('0x54')]())[a5_0x4c40('0x55')]((_0x351502,_0x329fbd)=>{if(_0x351502){return _0x25e705(_0x351502);}if(!_0x329fbd){_0x243130[a5_0x4c40('0x15')]('errors',{'msg':a5_0x4c40('0x4a')});return _0x42f81a[a5_0x4c40('0xa')]('back');}_0x329fbd['password']=_0x243130[a5_0x4c40('0x29')][a5_0x4c40('0x10')];_0x329fbd['passwordResetToken']=undefined;_0x329fbd[a5_0x4c40('0x53')]=undefined;_0x329fbd['save'](_0x351502=>{if(_0x351502){return _0x25e705(_0x351502);}_0x243130[a5_0x4c40('0x1c')](_0x329fbd,_0x351502=>{_0x269344(_0x351502,_0x329fbd);});});});},function sendResetPasswordEmail(_0x125977,_0x274cfe){const _0x716f0d=nodemailer_1[a5_0x4c40('0x18')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0x4c40('0x56')][a5_0x4c40('0x57')],'pass':process[a5_0x4c40('0x56')][a5_0x4c40('0x58')]}});const _0x49057a={'to':_0x125977[a5_0x4c40('0xd')],'from':a5_0x4c40('0x59'),'subject':a5_0x4c40('0x5a'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x125977[a5_0x4c40('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x716f0d[a5_0x4c40('0x5b')](_0x49057a,_0x57b4dc=>{_0x243130[a5_0x4c40('0x15')](a5_0x4c40('0x3b'),{'msg':a5_0x4c40('0x5c')});_0x274cfe(_0x57b4dc);});}],_0x16adbc=>{if(_0x16adbc){return _0x25e705(_0x16adbc);}_0x42f81a[a5_0x4c40('0xa')]('/');});};exports[a5_0x4c40('0x5d')]=(_0x4b0135,_0x2e436e)=>{if(_0x4b0135[a5_0x4c40('0x49')]()){return _0x2e436e[a5_0x4c40('0xa')]('/');}_0x2e436e[a5_0x4c40('0xb')](a5_0x4c40('0x5e'),{'title':a5_0x4c40('0x5f')});};exports[a5_0x4c40('0x60')]=(_0x33d9e7,_0x32a961,_0x4e1bff)=>{_0x33d9e7[a5_0x4c40('0xf')](a5_0x4c40('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x4c40('0x23')]();_0x33d9e7[a5_0x4c40('0x12')]('email')[a5_0x4c40('0x13')]({'gmail_remove_dots':![]});const _0x525c2d=_0x33d9e7[a5_0x4c40('0x14')]();if(_0x525c2d){_0x33d9e7['flash'](a5_0x4c40('0x16'),_0x525c2d);return _0x32a961[a5_0x4c40('0xa')](a5_0x4c40('0x61'));}async_1[a5_0x4c40('0x18')]['waterfall']([function createRandomToken(_0xaa6dfd){crypto_1[a5_0x4c40('0x18')]['randomBytes'](0x10,(_0x155ee3,_0x2da1b7)=>{const _0x18810e=_0x2da1b7[a5_0x4c40('0x62')]('hex');_0xaa6dfd(_0x155ee3,_0x18810e);});},function setRandomToken(_0x739ad8,_0x147549){User_1[a5_0x4c40('0x18')]['findOne']({'email':_0x33d9e7[a5_0x4c40('0x29')][a5_0x4c40('0xd')]},(_0x423bfa,_0x31c1de)=>{if(_0x423bfa){return _0x147549(_0x423bfa);}if(!_0x31c1de){_0x33d9e7[a5_0x4c40('0x15')](a5_0x4c40('0x16'),{'msg':a5_0x4c40('0x63')});return _0x32a961[a5_0x4c40('0xa')]('/forgot');}_0x31c1de['passwordResetToken']=_0x739ad8;_0x31c1de[a5_0x4c40('0x53')]=Date[a5_0x4c40('0x54')]()+0x36ee80;_0x31c1de['save'](_0x423bfa=>{_0x147549(_0x423bfa,_0x739ad8,_0x31c1de);});});},function sendForgotPasswordEmail(_0x10a988,_0x4e2c08,_0x50ea4f){const _0x3d0ae2=nodemailer_1[a5_0x4c40('0x18')][a5_0x4c40('0x64')]({'service':a5_0x4c40('0x65'),'auth':{'user':process[a5_0x4c40('0x56')][a5_0x4c40('0x57')],'pass':process[a5_0x4c40('0x56')][a5_0x4c40('0x58')]}});const _0x17fba3={'to':_0x4e2c08[a5_0x4c40('0xd')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x4c40('0x66')+_0x33d9e7['headers'][a5_0x4c40('0x67')]+a5_0x4c40('0x68')+_0x10a988+a5_0x4c40('0x69')};_0x3d0ae2[a5_0x4c40('0x5b')](_0x17fba3,_0x2565c8=>{_0x33d9e7[a5_0x4c40('0x15')]('info',{'msg':a5_0x4c40('0x6a')+_0x4e2c08[a5_0x4c40('0xd')]+a5_0x4c40('0x6b')});_0x50ea4f(_0x2565c8);});}],_0x3f64e8=>{if(_0x3f64e8){return _0x4e1bff(_0x3f64e8);}_0x32a961[a5_0x4c40('0xa')](a5_0x4c40('0x61'));});};