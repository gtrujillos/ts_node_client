var a5_0x570f=['express-validator','user','redirect','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','notEmpty','sanitize','normalizeEmail','flash','errors','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','Create\x20Account','postSignup','isEmail','len','confirmPassword','Passwords\x20do\x20not\x20match','body','validationErrors','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','name','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','equals','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','findById','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','postForgot','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__esModule','defineProperty','crypto','nodemailer'];(function(_0x147042,_0x41a2f9){var _0x1c1533=function(_0xec65d){while(--_0xec65d){_0x147042['push'](_0x147042['shift']());}};_0x1c1533(++_0x41a2f9);}(a5_0x570f,0x69));var a5_0x1086=function(_0x18b022,_0x14fecd){_0x18b022=_0x18b022-0x0;var _0x315c2e=a5_0x570f[_0x18b022];return _0x315c2e;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x464217){return _0x464217&&_0x464217[a5_0x1086('0x0')]?_0x464217:{'default':_0x464217};};Object[a5_0x1086('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x1086('0x2')));const nodemailer_1=__importDefault(require(a5_0x1086('0x3')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x1086('0x4'));exports['getLogin']=(_0x59f417,_0x5c18b9)=>{if(_0x59f417[a5_0x1086('0x5')]){return _0x5c18b9[a5_0x1086('0x6')]('/');}_0x5c18b9[a5_0x1086('0x7')]('account/login',{'title':a5_0x1086('0x8')});};exports[a5_0x1086('0x9')]=(_0x1c36d,_0x306822,_0x451e48)=>{_0x1c36d[a5_0x1086('0xa')](a5_0x1086('0xb'),a5_0x1086('0xc'))['isEmail']();_0x1c36d[a5_0x1086('0xa')](a5_0x1086('0xd'),'Password\x20cannot\x20be\x20blank')[a5_0x1086('0xe')]();_0x1c36d[a5_0x1086('0xf')](a5_0x1086('0xb'))[a5_0x1086('0x10')]({'gmail_remove_dots':![]});const _0x5c7f32=_0x1c36d['validationErrors']();if(_0x5c7f32){_0x1c36d[a5_0x1086('0x11')](a5_0x1086('0x12'),_0x5c7f32);return _0x306822['redirect'](a5_0x1086('0x13'));}passport_1[a5_0x1086('0x14')][a5_0x1086('0x15')](a5_0x1086('0x16'),(_0xbe880c,_0x56cd3b,_0x182609)=>{if(_0xbe880c){return _0x451e48(_0xbe880c);}if(!_0x56cd3b){_0x1c36d[a5_0x1086('0x11')](a5_0x1086('0x12'),_0x182609[a5_0x1086('0x17')]);return _0x306822['redirect']('/login');}_0x1c36d[a5_0x1086('0x18')](_0x56cd3b,_0xbe880c=>{if(_0xbe880c){return _0x451e48(_0xbe880c);}_0x1c36d[a5_0x1086('0x11')](a5_0x1086('0x19'),{'msg':a5_0x1086('0x1a')});_0x306822['redirect'](_0x1c36d[a5_0x1086('0x1b')][a5_0x1086('0x1c')]||'/');});})(_0x1c36d,_0x306822,_0x451e48);};exports[a5_0x1086('0x1d')]=(_0x55249a,_0x193463)=>{_0x55249a[a5_0x1086('0x1d')]();_0x193463[a5_0x1086('0x6')]('/');};exports[a5_0x1086('0x1e')]=(_0x1504cf,_0x35fd7f)=>{if(_0x1504cf[a5_0x1086('0x5')]){return _0x35fd7f[a5_0x1086('0x6')]('/');}_0x35fd7f['render']('account/signup',{'title':a5_0x1086('0x1f')});};exports[a5_0x1086('0x20')]=(_0x3ceee4,_0x49df0b,_0x453a5e)=>{_0x3ceee4[a5_0x1086('0xa')](a5_0x1086('0xb'),a5_0x1086('0xc'))[a5_0x1086('0x21')]();_0x3ceee4['assert'](a5_0x1086('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x1086('0x22')]({'min':0x4});_0x3ceee4['assert'](a5_0x1086('0x23'),a5_0x1086('0x24'))['equals'](_0x3ceee4[a5_0x1086('0x25')][a5_0x1086('0xd')]);_0x3ceee4[a5_0x1086('0xf')](a5_0x1086('0xb'))[a5_0x1086('0x10')]({'gmail_remove_dots':![]});const _0x4592fc=_0x3ceee4[a5_0x1086('0x26')]();if(_0x4592fc){_0x3ceee4['flash'](a5_0x1086('0x12'),_0x4592fc);return _0x49df0b[a5_0x1086('0x6')]('/signup');}const _0x20236c=new User_1['default']({'email':_0x3ceee4['body'][a5_0x1086('0xb')],'password':_0x3ceee4[a5_0x1086('0x25')][a5_0x1086('0xd')]});User_1[a5_0x1086('0x14')]['findOne']({'email':_0x3ceee4[a5_0x1086('0x25')][a5_0x1086('0xb')]},(_0x1b90e8,_0x4b488b)=>{if(_0x1b90e8){return _0x453a5e(_0x1b90e8);}if(_0x4b488b){_0x3ceee4[a5_0x1086('0x11')]('errors',{'msg':a5_0x1086('0x27')});return _0x49df0b[a5_0x1086('0x6')](a5_0x1086('0x28'));}_0x20236c[a5_0x1086('0x29')](_0x1b90e8=>{if(_0x1b90e8){return _0x453a5e(_0x1b90e8);}_0x3ceee4[a5_0x1086('0x18')](_0x20236c,_0x1b90e8=>{if(_0x1b90e8){return _0x453a5e(_0x1b90e8);}_0x49df0b['redirect']('/');});});});};exports['getAccount']=(_0x109b05,_0xaaf565)=>{_0xaaf565[a5_0x1086('0x7')](a5_0x1086('0x2a'),{'title':a5_0x1086('0x2b')});};exports[a5_0x1086('0x2c')]=(_0x34c03f,_0x485b82,_0x1ff440)=>{_0x34c03f['assert'](a5_0x1086('0xb'),a5_0x1086('0x2d'))['isEmail']();_0x34c03f[a5_0x1086('0xf')](a5_0x1086('0xb'))[a5_0x1086('0x10')]({'gmail_remove_dots':![]});const _0x36607f=_0x34c03f[a5_0x1086('0x26')]();if(_0x36607f){_0x34c03f[a5_0x1086('0x11')](a5_0x1086('0x12'),_0x36607f);return _0x485b82[a5_0x1086('0x6')](a5_0x1086('0x2e'));}User_1[a5_0x1086('0x14')]['findById'](_0x34c03f['user']['id'],(_0x4eed02,_0x2364f8)=>{if(_0x4eed02){return _0x1ff440(_0x4eed02);}_0x2364f8[a5_0x1086('0xb')]=_0x34c03f[a5_0x1086('0x25')][a5_0x1086('0xb')]||'';_0x2364f8[a5_0x1086('0x2f')][a5_0x1086('0x30')]=_0x34c03f[a5_0x1086('0x25')]['name']||'';_0x2364f8[a5_0x1086('0x2f')][a5_0x1086('0x31')]=_0x34c03f[a5_0x1086('0x25')]['gender']||'';_0x2364f8[a5_0x1086('0x2f')]['location']=_0x34c03f[a5_0x1086('0x25')][a5_0x1086('0x32')]||'';_0x2364f8['profile'][a5_0x1086('0x33')]=_0x34c03f[a5_0x1086('0x25')][a5_0x1086('0x33')]||'';_0x2364f8[a5_0x1086('0x29')](_0x4eed02=>{if(_0x4eed02){if(_0x4eed02[a5_0x1086('0x34')]===0x2af8){_0x34c03f[a5_0x1086('0x11')](a5_0x1086('0x12'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x485b82['redirect'](a5_0x1086('0x2e'));}return _0x1ff440(_0x4eed02);}_0x34c03f['flash']('success',{'msg':a5_0x1086('0x35')});_0x485b82[a5_0x1086('0x6')](a5_0x1086('0x2e'));});});};exports[a5_0x1086('0x36')]=(_0xdcc5dd,_0x1d683f,_0x4f985b)=>{_0xdcc5dd[a5_0x1086('0xa')]('password',a5_0x1086('0x37'))['len']({'min':0x4});_0xdcc5dd[a5_0x1086('0xa')]('confirmPassword',a5_0x1086('0x24'))[a5_0x1086('0x38')](_0xdcc5dd['body']['password']);const _0x5f09c3=_0xdcc5dd['validationErrors']();if(_0x5f09c3){_0xdcc5dd['flash'](a5_0x1086('0x12'),_0x5f09c3);return _0x1d683f['redirect'](a5_0x1086('0x2e'));}User_1[a5_0x1086('0x14')]['findById'](_0xdcc5dd['user']['id'],(_0x24e075,_0x50bda4)=>{if(_0x24e075){return _0x4f985b(_0x24e075);}_0x50bda4[a5_0x1086('0xd')]=_0xdcc5dd[a5_0x1086('0x25')]['password'];_0x50bda4[a5_0x1086('0x29')](_0x24e075=>{if(_0x24e075){return _0x4f985b(_0x24e075);}_0xdcc5dd['flash'](a5_0x1086('0x19'),{'msg':'Password\x20has\x20been\x20changed.'});_0x1d683f[a5_0x1086('0x6')](a5_0x1086('0x2e'));});});};exports[a5_0x1086('0x39')]=(_0x1d9635,_0x26c901,_0x2c8968)=>{User_1[a5_0x1086('0x14')][a5_0x1086('0x3a')]({'_id':_0x1d9635[a5_0x1086('0x5')]['id']},_0x28baf7=>{if(_0x28baf7){return _0x2c8968(_0x28baf7);}_0x1d9635['logout']();_0x1d9635['flash'](a5_0x1086('0x3b'),{'msg':a5_0x1086('0x3c')});_0x26c901[a5_0x1086('0x6')]('/');});};exports[a5_0x1086('0x3d')]=(_0x1bd7c0,_0x360065,_0x3edf23)=>{const _0x2e1f16=_0x1bd7c0[a5_0x1086('0x3e')][a5_0x1086('0x3f')];User_1[a5_0x1086('0x14')][a5_0x1086('0x40')](_0x1bd7c0['user']['id'],(_0x3d2b45,_0xc2494d)=>{if(_0x3d2b45){return _0x3edf23(_0x3d2b45);}_0xc2494d[_0x2e1f16]=undefined;_0xc2494d[a5_0x1086('0x41')]=_0xc2494d[a5_0x1086('0x41')][a5_0x1086('0x42')](_0x5d19ec=>_0x5d19ec[a5_0x1086('0x43')]!==_0x2e1f16);_0xc2494d[a5_0x1086('0x29')](_0x3d2b45=>{if(_0x3d2b45){return _0x3edf23(_0x3d2b45);}_0x1bd7c0[a5_0x1086('0x11')](a5_0x1086('0x3b'),{'msg':_0x2e1f16+a5_0x1086('0x44')});_0x360065[a5_0x1086('0x6')](a5_0x1086('0x2e'));});});};exports[a5_0x1086('0x45')]=(_0x1edde4,_0x500aff,_0x1dace1)=>{if(_0x1edde4[a5_0x1086('0x46')]()){return _0x500aff['redirect']('/');}User_1['default'][a5_0x1086('0x47')]({'passwordResetToken':_0x1edde4[a5_0x1086('0x3e')][a5_0x1086('0x48')]})[a5_0x1086('0x49')](a5_0x1086('0x4a'))['gt'](Date[a5_0x1086('0x4b')]())[a5_0x1086('0x4c')]((_0xe290b0,_0x53df1e)=>{if(_0xe290b0){return _0x1dace1(_0xe290b0);}if(!_0x53df1e){_0x1edde4[a5_0x1086('0x11')](a5_0x1086('0x12'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x500aff['redirect'](a5_0x1086('0x4d'));}_0x500aff[a5_0x1086('0x7')](a5_0x1086('0x4e'),{'title':a5_0x1086('0x4f')});});};exports[a5_0x1086('0x50')]=(_0x42599f,_0x4e4a83,_0x25df16)=>{_0x42599f[a5_0x1086('0xa')](a5_0x1086('0xd'),a5_0x1086('0x51'))[a5_0x1086('0x22')]({'min':0x4});_0x42599f[a5_0x1086('0xa')](a5_0x1086('0x52'),'Passwords\x20must\x20match.')['equals'](_0x42599f[a5_0x1086('0x25')][a5_0x1086('0xd')]);const _0x34fbfd=_0x42599f[a5_0x1086('0x26')]();if(_0x34fbfd){_0x42599f[a5_0x1086('0x11')](a5_0x1086('0x12'),_0x34fbfd);return _0x4e4a83['redirect'](a5_0x1086('0x53'));}async_1[a5_0x1086('0x14')][a5_0x1086('0x54')]([function resetPassword(_0x3d9bae){User_1[a5_0x1086('0x14')][a5_0x1086('0x47')]({'passwordResetToken':_0x42599f['params']['token']})[a5_0x1086('0x49')](a5_0x1086('0x4a'))['gt'](Date['now']())[a5_0x1086('0x4c')]((_0x421103,_0x57b205)=>{if(_0x421103){return _0x25df16(_0x421103);}if(!_0x57b205){_0x42599f['flash'](a5_0x1086('0x12'),{'msg':a5_0x1086('0x55')});return _0x4e4a83[a5_0x1086('0x6')](a5_0x1086('0x53'));}_0x57b205[a5_0x1086('0xd')]=_0x42599f[a5_0x1086('0x25')][a5_0x1086('0xd')];_0x57b205[a5_0x1086('0x56')]=undefined;_0x57b205[a5_0x1086('0x4a')]=undefined;_0x57b205[a5_0x1086('0x29')](_0x421103=>{if(_0x421103){return _0x25df16(_0x421103);}_0x42599f[a5_0x1086('0x18')](_0x57b205,_0x421103=>{_0x3d9bae(_0x421103,_0x57b205);});});});},function sendResetPasswordEmail(_0x25e26d,_0x42efd9){const _0x240da1=nodemailer_1[a5_0x1086('0x14')][a5_0x1086('0x57')]({'service':a5_0x1086('0x58'),'auth':{'user':process[a5_0x1086('0x59')][a5_0x1086('0x5a')],'pass':process[a5_0x1086('0x59')]['SENDGRID_PASSWORD']}});const _0x4f6323={'to':_0x25e26d['email'],'from':'express-ts@starter.com','subject':a5_0x1086('0x5b'),'text':a5_0x1086('0x5c')+_0x25e26d[a5_0x1086('0xb')]+a5_0x1086('0x5d')};_0x240da1[a5_0x1086('0x5e')](_0x4f6323,_0x400397=>{_0x42599f[a5_0x1086('0x11')](a5_0x1086('0x19'),{'msg':a5_0x1086('0x5f')});_0x42efd9(_0x400397);});}],_0x727c71=>{if(_0x727c71){return _0x25df16(_0x727c71);}_0x4e4a83[a5_0x1086('0x6')]('/');});};exports['getForgot']=(_0x1fd354,_0x10db17)=>{if(_0x1fd354['isAuthenticated']()){return _0x10db17[a5_0x1086('0x6')]('/');}_0x10db17[a5_0x1086('0x7')](a5_0x1086('0x60'),{'title':a5_0x1086('0x61')});};exports[a5_0x1086('0x62')]=(_0x133f03,_0x4438af,_0x18ec01)=>{_0x133f03[a5_0x1086('0xa')](a5_0x1086('0xb'),a5_0x1086('0x2d'))[a5_0x1086('0x21')]();_0x133f03['sanitize'](a5_0x1086('0xb'))[a5_0x1086('0x10')]({'gmail_remove_dots':![]});const _0x3cf341=_0x133f03['validationErrors']();if(_0x3cf341){_0x133f03['flash'](a5_0x1086('0x12'),_0x3cf341);return _0x4438af[a5_0x1086('0x6')](a5_0x1086('0x4d'));}async_1[a5_0x1086('0x14')]['waterfall']([function createRandomToken(_0x2942a8){crypto_1[a5_0x1086('0x14')]['randomBytes'](0x10,(_0x3c639c,_0x467be9)=>{const _0x1574b1=_0x467be9[a5_0x1086('0x63')](a5_0x1086('0x64'));_0x2942a8(_0x3c639c,_0x1574b1);});},function setRandomToken(_0xb36365,_0x59fc25){User_1['default'][a5_0x1086('0x47')]({'email':_0x133f03[a5_0x1086('0x25')][a5_0x1086('0xb')]},(_0x29a606,_0x1d32ed)=>{if(_0x29a606){return _0x59fc25(_0x29a606);}if(!_0x1d32ed){_0x133f03[a5_0x1086('0x11')](a5_0x1086('0x12'),{'msg':a5_0x1086('0x65')});return _0x4438af['redirect'](a5_0x1086('0x4d'));}_0x1d32ed[a5_0x1086('0x56')]=_0xb36365;_0x1d32ed[a5_0x1086('0x4a')]=Date[a5_0x1086('0x4b')]()+0x36ee80;_0x1d32ed['save'](_0x29a606=>{_0x59fc25(_0x29a606,_0xb36365,_0x1d32ed);});});},function sendForgotPasswordEmail(_0x3463d7,_0x408661,_0x43a9cf){const _0x4a15ac=nodemailer_1[a5_0x1086('0x14')][a5_0x1086('0x57')]({'service':a5_0x1086('0x58'),'auth':{'user':process[a5_0x1086('0x59')][a5_0x1086('0x5a')],'pass':process[a5_0x1086('0x59')][a5_0x1086('0x66')]}});const _0x51b264={'to':_0x408661['email'],'from':'hackathon@starter.com','subject':a5_0x1086('0x67'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x133f03[a5_0x1086('0x68')][a5_0x1086('0x69')]+a5_0x1086('0x6a')+_0x3463d7+a5_0x1086('0x6b')};_0x4a15ac[a5_0x1086('0x5e')](_0x51b264,_0x302368=>{_0x133f03['flash']('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x408661['email']+a5_0x1086('0x6c')});_0x43a9cf(_0x302368);});}],_0x2179b9=>{if(_0x2179b9){return _0x18ec01(_0x2179b9);}_0x4438af['redirect'](a5_0x1086('0x4d'));});};