var a5_0x22f4=['getOauthUnlink','params','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','account/forgot','Forgot\x20Password','postForgot','hex','findOne','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','../models/User','getLogin','user','redirect','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','sanitize','normalizeEmail','flash','errors','/login','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','validationErrors','/signup','default','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','profile','gender','location','website','code','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','findById','save','remove','Your\x20account\x20has\x20been\x20deleted.'];(function(_0x354959,_0x128edc){var _0x2e4c3b=function(_0x31022c){while(--_0x31022c){_0x354959['push'](_0x354959['shift']());}};_0x2e4c3b(++_0x128edc);}(a5_0x22f4,0x92));var a5_0x5f3b=function(_0x4a6be6,_0x3b4c4c){_0x4a6be6=_0x4a6be6-0x0;var _0x12be90=a5_0x22f4[_0x4a6be6];return _0x12be90;};'use strict';var __importDefault=this&&this[a5_0x5f3b('0x0')]||function(_0x5f573f){return _0x5f573f&&_0x5f573f[a5_0x5f3b('0x1')]?_0x5f573f:{'default':_0x5f573f};};Object[a5_0x5f3b('0x2')](exports,a5_0x5f3b('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x5f3b('0x3')));const crypto_1=__importDefault(require(a5_0x5f3b('0x4')));const nodemailer_1=__importDefault(require(a5_0x5f3b('0x5')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x5f3b('0x6')));const request=require('express-validator');exports[a5_0x5f3b('0x7')]=(_0x238314,_0x2c58b0)=>{if(_0x238314[a5_0x5f3b('0x8')]){return _0x2c58b0[a5_0x5f3b('0x9')]('/');}_0x2c58b0[a5_0x5f3b('0xa')]('account/login',{'title':a5_0x5f3b('0xb')});};exports[a5_0x5f3b('0xc')]=(_0x5297d0,_0x4e8794,_0x38479d)=>{_0x5297d0[a5_0x5f3b('0xd')](a5_0x5f3b('0xe'),a5_0x5f3b('0xf'))[a5_0x5f3b('0x10')]();_0x5297d0[a5_0x5f3b('0xd')](a5_0x5f3b('0x11'),'Password\x20cannot\x20be\x20blank')[a5_0x5f3b('0x12')]();_0x5297d0[a5_0x5f3b('0x13')](a5_0x5f3b('0xe'))[a5_0x5f3b('0x14')]({'gmail_remove_dots':![]});const _0x1222a0=_0x5297d0['validationErrors']();if(_0x1222a0){_0x5297d0[a5_0x5f3b('0x15')](a5_0x5f3b('0x16'),_0x1222a0);return _0x4e8794[a5_0x5f3b('0x9')](a5_0x5f3b('0x17'));}passport_1['default']['authenticate'](a5_0x5f3b('0x18'),(_0xa752f1,_0x303cfb,_0x526727)=>{if(_0xa752f1){return _0x38479d(_0xa752f1);}if(!_0x303cfb){_0x5297d0[a5_0x5f3b('0x15')](a5_0x5f3b('0x16'),_0x526727[a5_0x5f3b('0x19')]);return _0x4e8794[a5_0x5f3b('0x9')](a5_0x5f3b('0x17'));}_0x5297d0[a5_0x5f3b('0x1a')](_0x303cfb,_0xa752f1=>{if(_0xa752f1){return _0x38479d(_0xa752f1);}_0x5297d0[a5_0x5f3b('0x15')](a5_0x5f3b('0x1b'),{'msg':a5_0x5f3b('0x1c')});_0x4e8794[a5_0x5f3b('0x9')](_0x5297d0[a5_0x5f3b('0x1d')][a5_0x5f3b('0x1e')]||'/');});})(_0x5297d0,_0x4e8794,_0x38479d);};exports['logout']=(_0x207bcc,_0x2a75d5)=>{_0x207bcc[a5_0x5f3b('0x1f')]();_0x2a75d5[a5_0x5f3b('0x9')]('/');};exports[a5_0x5f3b('0x20')]=(_0x3a6a64,_0x131bc5)=>{if(_0x3a6a64[a5_0x5f3b('0x8')]){return _0x131bc5[a5_0x5f3b('0x9')]('/');}_0x131bc5[a5_0x5f3b('0xa')](a5_0x5f3b('0x21'),{'title':a5_0x5f3b('0x22')});};exports[a5_0x5f3b('0x23')]=(_0x52a70f,_0x12ee6b,_0x4b42ef)=>{_0x52a70f[a5_0x5f3b('0xd')]('email',a5_0x5f3b('0xf'))[a5_0x5f3b('0x10')]();_0x52a70f[a5_0x5f3b('0xd')]('password',a5_0x5f3b('0x24'))[a5_0x5f3b('0x25')]({'min':0x4});_0x52a70f['assert']('confirmPassword',a5_0x5f3b('0x26'))[a5_0x5f3b('0x27')](_0x52a70f[a5_0x5f3b('0x28')][a5_0x5f3b('0x11')]);_0x52a70f[a5_0x5f3b('0x13')]('email')[a5_0x5f3b('0x14')]({'gmail_remove_dots':![]});const _0x280e04=_0x52a70f[a5_0x5f3b('0x29')]();if(_0x280e04){_0x52a70f[a5_0x5f3b('0x15')]('errors',_0x280e04);return _0x12ee6b['redirect'](a5_0x5f3b('0x2a'));}const _0x2d16b2=new User_1[(a5_0x5f3b('0x2b'))]({});User_1[a5_0x5f3b('0x2b')]['findOne']({'email':_0x52a70f[a5_0x5f3b('0x28')]['email']},(_0x400542,_0x2fd9b5)=>{if(_0x400542){return _0x4b42ef(_0x400542);}if(_0x2fd9b5){_0x52a70f[a5_0x5f3b('0x15')](a5_0x5f3b('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x12ee6b[a5_0x5f3b('0x9')](a5_0x5f3b('0x2a'));}_0x2d16b2['save'](_0x400542=>{if(_0x400542){return _0x4b42ef(_0x400542);}_0x52a70f[a5_0x5f3b('0x1a')](_0x2d16b2,_0x400542=>{if(_0x400542){return _0x4b42ef(_0x400542);}_0x12ee6b[a5_0x5f3b('0x9')]('/');});});});};exports[a5_0x5f3b('0x2c')]=(_0x4716e1,_0x53b2f5)=>{_0x53b2f5[a5_0x5f3b('0xa')](a5_0x5f3b('0x2d'),{'title':a5_0x5f3b('0x2e')});};exports[a5_0x5f3b('0x2f')]=(_0x135a13,_0x37a77c,_0x572a2a)=>{_0x135a13[a5_0x5f3b('0xd')](a5_0x5f3b('0xe'),a5_0x5f3b('0x30'))['isEmail']();_0x135a13['sanitize'](a5_0x5f3b('0xe'))[a5_0x5f3b('0x14')]({'gmail_remove_dots':![]});const _0xb50811=_0x135a13[a5_0x5f3b('0x29')]();if(_0xb50811){_0x135a13[a5_0x5f3b('0x15')](a5_0x5f3b('0x16'),_0xb50811);return _0x37a77c['redirect']('/account');}User_1[a5_0x5f3b('0x2b')]['findById'](_0x135a13[a5_0x5f3b('0x8')]['id'],(_0x479c6b,_0x30bf30)=>{if(_0x479c6b){return _0x572a2a(_0x479c6b);}_0x30bf30[a5_0x5f3b('0xe')]=_0x135a13['body'][a5_0x5f3b('0xe')]||'';_0x30bf30[a5_0x5f3b('0x31')]['name']=_0x135a13[a5_0x5f3b('0x28')]['name']||'';_0x30bf30[a5_0x5f3b('0x31')][a5_0x5f3b('0x32')]=_0x135a13[a5_0x5f3b('0x28')][a5_0x5f3b('0x32')]||'';_0x30bf30[a5_0x5f3b('0x31')][a5_0x5f3b('0x33')]=_0x135a13[a5_0x5f3b('0x28')][a5_0x5f3b('0x33')]||'';_0x30bf30[a5_0x5f3b('0x31')][a5_0x5f3b('0x34')]=_0x135a13['body']['website']||'';_0x30bf30['save'](_0x479c6b=>{if(_0x479c6b){if(_0x479c6b[a5_0x5f3b('0x35')]===0x2af8){_0x135a13['flash'](a5_0x5f3b('0x16'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x37a77c[a5_0x5f3b('0x9')](a5_0x5f3b('0x36'));}return _0x572a2a(_0x479c6b);}_0x135a13[a5_0x5f3b('0x15')]('success',{'msg':a5_0x5f3b('0x37')});_0x37a77c['redirect'](a5_0x5f3b('0x36'));});});};exports[a5_0x5f3b('0x38')]=(_0x15414a,_0x2feeeb,_0x1cb2a6)=>{_0x15414a['assert']('password',a5_0x5f3b('0x24'))['len']({'min':0x4});_0x15414a[a5_0x5f3b('0xd')](a5_0x5f3b('0x39'),a5_0x5f3b('0x26'))[a5_0x5f3b('0x27')](_0x15414a[a5_0x5f3b('0x28')][a5_0x5f3b('0x11')]);const _0x475c8c=_0x15414a['validationErrors']();if(_0x475c8c){_0x15414a[a5_0x5f3b('0x15')](a5_0x5f3b('0x16'),_0x475c8c);return _0x2feeeb[a5_0x5f3b('0x9')](a5_0x5f3b('0x36'));}User_1['default'][a5_0x5f3b('0x3a')](_0x15414a['user']['id'],(_0x4ba212,_0x22025a)=>{if(_0x4ba212){return _0x1cb2a6(_0x4ba212);}_0x22025a[a5_0x5f3b('0x11')]=_0x15414a[a5_0x5f3b('0x28')][a5_0x5f3b('0x11')];_0x22025a[a5_0x5f3b('0x3b')](_0x4ba212=>{if(_0x4ba212){return _0x1cb2a6(_0x4ba212);}_0x15414a[a5_0x5f3b('0x15')](a5_0x5f3b('0x1b'),{'msg':'Password\x20has\x20been\x20changed.'});_0x2feeeb[a5_0x5f3b('0x9')]('/account');});});};exports['postDeleteAccount']=(_0x3754fa,_0x850be9,_0x402c86)=>{User_1[a5_0x5f3b('0x2b')][a5_0x5f3b('0x3c')]({'_id':_0x3754fa[a5_0x5f3b('0x8')]['id']},_0x2b9b30=>{if(_0x2b9b30){return _0x402c86(_0x2b9b30);}_0x3754fa[a5_0x5f3b('0x1f')]();_0x3754fa[a5_0x5f3b('0x15')]('info',{'msg':a5_0x5f3b('0x3d')});_0x850be9[a5_0x5f3b('0x9')]('/');});};exports[a5_0x5f3b('0x3e')]=(_0x2712b6,_0xa723a5,_0x4f1344)=>{const _0x3e335e=_0x2712b6[a5_0x5f3b('0x3f')]['provider'];User_1['default'][a5_0x5f3b('0x3a')](_0x2712b6[a5_0x5f3b('0x8')]['id'],(_0x247c79,_0xa0c396)=>{if(_0x247c79){return _0x4f1344(_0x247c79);}_0xa0c396[_0x3e335e]=undefined;_0xa0c396[a5_0x5f3b('0x40')]=_0xa0c396[a5_0x5f3b('0x40')][a5_0x5f3b('0x41')](_0x1fe73e=>_0x1fe73e[a5_0x5f3b('0x42')]!==_0x3e335e);_0xa0c396[a5_0x5f3b('0x3b')](_0x247c79=>{if(_0x247c79){return _0x4f1344(_0x247c79);}_0x2712b6[a5_0x5f3b('0x15')](a5_0x5f3b('0x43'),{'msg':_0x3e335e+a5_0x5f3b('0x44')});_0xa723a5[a5_0x5f3b('0x9')](a5_0x5f3b('0x36'));});});};exports[a5_0x5f3b('0x45')]=(_0x14fa5c,_0x29216c,_0x4c8d98)=>{if(_0x14fa5c['isAuthenticated']()){return _0x29216c['redirect']('/');}User_1['default']['findOne']({'passwordResetToken':_0x14fa5c[a5_0x5f3b('0x3f')][a5_0x5f3b('0x46')]})[a5_0x5f3b('0x47')](a5_0x5f3b('0x48'))['gt'](Date[a5_0x5f3b('0x49')]())[a5_0x5f3b('0x4a')]((_0x4e4ea6,_0x1af281)=>{if(_0x4e4ea6){return _0x4c8d98(_0x4e4ea6);}if(!_0x1af281){_0x14fa5c[a5_0x5f3b('0x15')]('errors',{'msg':a5_0x5f3b('0x4b')});return _0x29216c['redirect'](a5_0x5f3b('0x4c'));}_0x29216c['render']('account/reset',{'title':a5_0x5f3b('0x4d')});});};exports[a5_0x5f3b('0x4e')]=(_0x7f47e7,_0x666741,_0xf48feb)=>{_0x7f47e7[a5_0x5f3b('0xd')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x5f3b('0x25')]({'min':0x4});_0x7f47e7[a5_0x5f3b('0xd')]('confirm',a5_0x5f3b('0x4f'))[a5_0x5f3b('0x27')](_0x7f47e7[a5_0x5f3b('0x28')][a5_0x5f3b('0x11')]);const _0x440a00=_0x7f47e7[a5_0x5f3b('0x29')]();if(_0x440a00){_0x7f47e7[a5_0x5f3b('0x15')]('errors',_0x440a00);return _0x666741[a5_0x5f3b('0x9')](a5_0x5f3b('0x50'));}async_1[a5_0x5f3b('0x2b')][a5_0x5f3b('0x51')]([function resetPassword(_0x51317b){User_1[a5_0x5f3b('0x2b')]['findOne']({'passwordResetToken':_0x7f47e7['params'][a5_0x5f3b('0x46')]})[a5_0x5f3b('0x47')](a5_0x5f3b('0x48'))['gt'](Date[a5_0x5f3b('0x49')]())[a5_0x5f3b('0x4a')]((_0x357517,_0x31d9a1)=>{if(_0x357517){return _0xf48feb(_0x357517);}if(!_0x31d9a1){_0x7f47e7['flash']('errors',{'msg':a5_0x5f3b('0x4b')});return _0x666741[a5_0x5f3b('0x9')](a5_0x5f3b('0x50'));}_0x31d9a1[a5_0x5f3b('0x11')]=_0x7f47e7[a5_0x5f3b('0x28')][a5_0x5f3b('0x11')];_0x31d9a1[a5_0x5f3b('0x52')]=undefined;_0x31d9a1[a5_0x5f3b('0x48')]=undefined;_0x31d9a1[a5_0x5f3b('0x3b')](_0x357517=>{if(_0x357517){return _0xf48feb(_0x357517);}_0x7f47e7[a5_0x5f3b('0x1a')](_0x31d9a1,_0x357517=>{_0x51317b(_0x357517,_0x31d9a1);});});});},function sendResetPasswordEmail(_0x484082,_0x2b3917){const _0x3e5e2d=nodemailer_1[a5_0x5f3b('0x2b')][a5_0x5f3b('0x53')]({'service':a5_0x5f3b('0x54'),'auth':{'user':process[a5_0x5f3b('0x55')]['SENDGRID_USER'],'pass':process[a5_0x5f3b('0x55')][a5_0x5f3b('0x56')]}});const _0x81d4c0={'to':_0x484082[a5_0x5f3b('0xe')],'from':a5_0x5f3b('0x57'),'subject':a5_0x5f3b('0x58'),'text':a5_0x5f3b('0x59')+_0x484082[a5_0x5f3b('0xe')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x3e5e2d[a5_0x5f3b('0x5a')](_0x81d4c0,_0x297329=>{_0x7f47e7[a5_0x5f3b('0x15')](a5_0x5f3b('0x1b'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x2b3917(_0x297329);});}],_0x5ad128=>{if(_0x5ad128){return _0xf48feb(_0x5ad128);}_0x666741[a5_0x5f3b('0x9')]('/');});};exports['getForgot']=(_0x33031f,_0x4be08f)=>{if(_0x33031f['isAuthenticated']()){return _0x4be08f[a5_0x5f3b('0x9')]('/');}_0x4be08f[a5_0x5f3b('0xa')](a5_0x5f3b('0x5b'),{'title':a5_0x5f3b('0x5c')});};exports[a5_0x5f3b('0x5d')]=(_0x2d738f,_0x5e2f80,_0x2a2124)=>{_0x2d738f['assert'](a5_0x5f3b('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x5f3b('0x10')]();_0x2d738f[a5_0x5f3b('0x13')](a5_0x5f3b('0xe'))[a5_0x5f3b('0x14')]({'gmail_remove_dots':![]});const _0x26a092=_0x2d738f[a5_0x5f3b('0x29')]();if(_0x26a092){_0x2d738f['flash']('errors',_0x26a092);return _0x5e2f80[a5_0x5f3b('0x9')](a5_0x5f3b('0x4c'));}async_1[a5_0x5f3b('0x2b')][a5_0x5f3b('0x51')]([function createRandomToken(_0x45c43f){crypto_1[a5_0x5f3b('0x2b')]['randomBytes'](0x10,(_0x24389c,_0x4f61ef)=>{const _0x2843ab=_0x4f61ef['toString'](a5_0x5f3b('0x5e'));_0x45c43f(_0x24389c,_0x2843ab);});},function setRandomToken(_0x5413cc,_0x3ee5ae){User_1[a5_0x5f3b('0x2b')][a5_0x5f3b('0x5f')]({'email':_0x2d738f['body'][a5_0x5f3b('0xe')]},(_0x1bb70d,_0x1e831b)=>{if(_0x1bb70d){return _0x3ee5ae(_0x1bb70d);}if(!_0x1e831b){_0x2d738f[a5_0x5f3b('0x15')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x5e2f80[a5_0x5f3b('0x9')](a5_0x5f3b('0x4c'));}_0x1e831b[a5_0x5f3b('0x52')]=_0x5413cc;_0x1e831b[a5_0x5f3b('0x48')]=Date[a5_0x5f3b('0x49')]()+0x36ee80;_0x1e831b[a5_0x5f3b('0x3b')](_0x1bb70d=>{_0x3ee5ae(_0x1bb70d,_0x5413cc,_0x1e831b);});});},function sendForgotPasswordEmail(_0x3f9595,_0x2f7ca7,_0x56a8a8){const _0x5a4000=nodemailer_1[a5_0x5f3b('0x2b')][a5_0x5f3b('0x53')]({'service':a5_0x5f3b('0x54'),'auth':{'user':process[a5_0x5f3b('0x55')][a5_0x5f3b('0x60')],'pass':process[a5_0x5f3b('0x55')]['SENDGRID_PASSWORD']}});const _0x4d68bd={'to':_0x2f7ca7[a5_0x5f3b('0xe')],'from':a5_0x5f3b('0x61'),'subject':a5_0x5f3b('0x62'),'text':a5_0x5f3b('0x63')+_0x2d738f[a5_0x5f3b('0x64')]['host']+a5_0x5f3b('0x65')+_0x3f9595+a5_0x5f3b('0x66')};_0x5a4000[a5_0x5f3b('0x5a')](_0x4d68bd,_0x2e050f=>{_0x2d738f[a5_0x5f3b('0x15')]('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x2f7ca7[a5_0x5f3b('0xe')]+a5_0x5f3b('0x67')});_0x56a8a8(_0x2e050f);});}],_0x42c60a=>{if(_0x42c60a){return _0x2a2124(_0x42c60a);}_0x5e2f80[a5_0x5f3b('0x9')](a5_0x5f3b('0x4c'));});};