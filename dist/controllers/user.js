var a5_0x1adf=['save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','token','passwordResetExpires','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','findOne','where','now','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','isAuthenticated','postForgot','normalizeEmail','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','passport','../models/User','getLogin','user','redirect','render','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','validationErrors','flash','errors','/login','authenticate','local','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','default','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','logIn','getAccount','account/profile','Account\x20Management','postUpdateProfile','/account','findById','name','gender','location','profile','website'];(function(_0xb67384,_0x27295a){var _0x156d7c=function(_0x52a1f8){while(--_0x52a1f8){_0xb67384['push'](_0xb67384['shift']());}};_0x156d7c(++_0x27295a);}(a5_0x1adf,0xa2));var a5_0x412a=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a5_0x1adf[_0x2d8f05];return _0x4d74cb;};'use strict';var __importDefault=this&&this[a5_0x412a('0x0')]||function(_0x15c6d7){return _0x15c6d7&&_0x15c6d7['__esModule']?_0x15c6d7:{'default':_0x15c6d7};};Object['defineProperty'](exports,a5_0x412a('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x412a('0x2')));const crypto_1=__importDefault(require(a5_0x412a('0x3')));const nodemailer_1=__importDefault(require(a5_0x412a('0x4')));const passport_1=__importDefault(require(a5_0x412a('0x5')));const User_1=__importDefault(require(a5_0x412a('0x6')));const request=require('express-validator');exports[a5_0x412a('0x7')]=(_0x17b0bf,_0x587d34)=>{if(_0x17b0bf[a5_0x412a('0x8')]){return _0x587d34[a5_0x412a('0x9')]('/');}_0x587d34[a5_0x412a('0xa')]('account/login',{'title':a5_0x412a('0xb')});};exports[a5_0x412a('0xc')]=(_0x1a4483,_0x4cd652,_0x2d3bb7)=>{_0x1a4483['assert'](a5_0x412a('0xd'),a5_0x412a('0xe'))[a5_0x412a('0xf')]();_0x1a4483[a5_0x412a('0x10')](a5_0x412a('0x11'),a5_0x412a('0x12'))[a5_0x412a('0x13')]();_0x1a4483[a5_0x412a('0x14')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x31f879=_0x1a4483[a5_0x412a('0x15')]();if(_0x31f879){_0x1a4483[a5_0x412a('0x16')](a5_0x412a('0x17'),_0x31f879);return _0x4cd652[a5_0x412a('0x9')](a5_0x412a('0x18'));}passport_1['default'][a5_0x412a('0x19')](a5_0x412a('0x1a'),(_0x3805c5,_0x2483d0,_0x50bfab)=>{if(_0x3805c5){return _0x2d3bb7(_0x3805c5);}if(!_0x2483d0){_0x1a4483[a5_0x412a('0x16')](a5_0x412a('0x17'),_0x50bfab['message']);return _0x4cd652[a5_0x412a('0x9')](a5_0x412a('0x18'));}_0x1a4483['logIn'](_0x2483d0,_0x3805c5=>{if(_0x3805c5){return _0x2d3bb7(_0x3805c5);}_0x1a4483[a5_0x412a('0x16')]('success',{'msg':a5_0x412a('0x1b')});_0x4cd652[a5_0x412a('0x9')](_0x1a4483[a5_0x412a('0x1c')][a5_0x412a('0x1d')]||'/');});})(_0x1a4483,_0x4cd652,_0x2d3bb7);};exports[a5_0x412a('0x1e')]=(_0x882be2,_0x1f637e)=>{_0x882be2[a5_0x412a('0x1e')]();_0x1f637e[a5_0x412a('0x9')]('/');};exports[a5_0x412a('0x1f')]=(_0x23b7e6,_0x42242c)=>{if(_0x23b7e6[a5_0x412a('0x8')]){return _0x42242c[a5_0x412a('0x9')]('/');}_0x42242c[a5_0x412a('0xa')]('account/signup',{'title':a5_0x412a('0x20')});};exports[a5_0x412a('0x21')]=(_0x155ea4,_0x317cc8,_0x5da165)=>{_0x155ea4[a5_0x412a('0x10')](a5_0x412a('0xd'),a5_0x412a('0xe'))[a5_0x412a('0xf')]();_0x155ea4[a5_0x412a('0x10')](a5_0x412a('0x11'),a5_0x412a('0x22'))[a5_0x412a('0x23')]({'min':0x4});_0x155ea4[a5_0x412a('0x10')](a5_0x412a('0x24'),a5_0x412a('0x25'))[a5_0x412a('0x26')](_0x155ea4[a5_0x412a('0x27')][a5_0x412a('0x11')]);_0x155ea4[a5_0x412a('0x14')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x403a2c=_0x155ea4['validationErrors']();if(_0x403a2c){_0x155ea4[a5_0x412a('0x16')]('errors',_0x403a2c);return _0x317cc8[a5_0x412a('0x9')]('/signup');}const _0x34d667=new User_1['default']({});User_1[a5_0x412a('0x28')]['findOne']({'email':_0x155ea4['body']['email']},(_0x5d66ab,_0x3221cd)=>{if(_0x5d66ab){return _0x5da165(_0x5d66ab);}if(_0x3221cd){_0x155ea4['flash']('errors',{'msg':a5_0x412a('0x29')});return _0x317cc8[a5_0x412a('0x9')]('/signup');}_0x34d667['save'](_0x5d66ab=>{if(_0x5d66ab){return _0x5da165(_0x5d66ab);}_0x155ea4[a5_0x412a('0x2a')](_0x34d667,_0x5d66ab=>{if(_0x5d66ab){return _0x5da165(_0x5d66ab);}_0x317cc8[a5_0x412a('0x9')]('/');});});});};exports[a5_0x412a('0x2b')]=(_0x3f60fc,_0x48060e)=>{_0x48060e['render'](a5_0x412a('0x2c'),{'title':a5_0x412a('0x2d')});};exports[a5_0x412a('0x2e')]=(_0x237dd6,_0x5391f6,_0x49c913)=>{_0x237dd6[a5_0x412a('0x10')](a5_0x412a('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x412a('0xf')]();_0x237dd6[a5_0x412a('0x14')](a5_0x412a('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x137f40=_0x237dd6['validationErrors']();if(_0x137f40){_0x237dd6[a5_0x412a('0x16')](a5_0x412a('0x17'),_0x137f40);return _0x5391f6[a5_0x412a('0x9')](a5_0x412a('0x2f'));}User_1[a5_0x412a('0x28')][a5_0x412a('0x30')](_0x237dd6[a5_0x412a('0x8')]['id'],(_0x20a3b0,_0x2213c9)=>{if(_0x20a3b0){return _0x49c913(_0x20a3b0);}_0x2213c9[a5_0x412a('0xd')]=_0x237dd6[a5_0x412a('0x27')][a5_0x412a('0xd')]||'';_0x2213c9['profile'][a5_0x412a('0x31')]=_0x237dd6[a5_0x412a('0x27')][a5_0x412a('0x31')]||'';_0x2213c9['profile'][a5_0x412a('0x32')]=_0x237dd6[a5_0x412a('0x27')][a5_0x412a('0x32')]||'';_0x2213c9['profile'][a5_0x412a('0x33')]=_0x237dd6[a5_0x412a('0x27')][a5_0x412a('0x33')]||'';_0x2213c9[a5_0x412a('0x34')][a5_0x412a('0x35')]=_0x237dd6[a5_0x412a('0x27')][a5_0x412a('0x35')]||'';_0x2213c9[a5_0x412a('0x36')](_0x20a3b0=>{if(_0x20a3b0){if(_0x20a3b0[a5_0x412a('0x37')]===0x2af8){_0x237dd6['flash'](a5_0x412a('0x17'),{'msg':a5_0x412a('0x38')});return _0x5391f6[a5_0x412a('0x9')](a5_0x412a('0x2f'));}return _0x49c913(_0x20a3b0);}_0x237dd6['flash'](a5_0x412a('0x39'),{'msg':a5_0x412a('0x3a')});_0x5391f6['redirect'](a5_0x412a('0x2f'));});});};exports[a5_0x412a('0x3b')]=(_0x4db15d,_0x433f0c,_0x3cd4d3)=>{_0x4db15d[a5_0x412a('0x10')](a5_0x412a('0x11'),a5_0x412a('0x22'))[a5_0x412a('0x23')]({'min':0x4});_0x4db15d[a5_0x412a('0x10')](a5_0x412a('0x24'),a5_0x412a('0x25'))[a5_0x412a('0x26')](_0x4db15d[a5_0x412a('0x27')][a5_0x412a('0x11')]);const _0x4839ab=_0x4db15d[a5_0x412a('0x15')]();if(_0x4839ab){_0x4db15d[a5_0x412a('0x16')](a5_0x412a('0x17'),_0x4839ab);return _0x433f0c[a5_0x412a('0x9')](a5_0x412a('0x2f'));}User_1[a5_0x412a('0x28')]['findById'](_0x4db15d[a5_0x412a('0x8')]['id'],(_0x526bef,_0xca07dc)=>{if(_0x526bef){return _0x3cd4d3(_0x526bef);}_0xca07dc[a5_0x412a('0x11')]=_0x4db15d[a5_0x412a('0x27')][a5_0x412a('0x11')];_0xca07dc[a5_0x412a('0x36')](_0x526bef=>{if(_0x526bef){return _0x3cd4d3(_0x526bef);}_0x4db15d['flash'](a5_0x412a('0x39'),{'msg':a5_0x412a('0x3c')});_0x433f0c[a5_0x412a('0x9')]('/account');});});};exports[a5_0x412a('0x3d')]=(_0x66304,_0xc792eb,_0x36e7b1)=>{User_1['default'][a5_0x412a('0x3e')]({'_id':_0x66304[a5_0x412a('0x8')]['id']},_0x9b049d=>{if(_0x9b049d){return _0x36e7b1(_0x9b049d);}_0x66304[a5_0x412a('0x1e')]();_0x66304[a5_0x412a('0x16')](a5_0x412a('0x3f'),{'msg':a5_0x412a('0x40')});_0xc792eb[a5_0x412a('0x9')]('/');});};exports[a5_0x412a('0x41')]=(_0x5c7c4d,_0x2757fd,_0x5d9b27)=>{const _0x376db1=_0x5c7c4d[a5_0x412a('0x42')][a5_0x412a('0x43')];User_1[a5_0x412a('0x28')][a5_0x412a('0x30')](_0x5c7c4d[a5_0x412a('0x8')]['id'],(_0x226200,_0xeb6432)=>{if(_0x226200){return _0x5d9b27(_0x226200);}_0xeb6432[_0x376db1]=undefined;_0xeb6432[a5_0x412a('0x44')]=_0xeb6432[a5_0x412a('0x44')][a5_0x412a('0x45')](_0x2342d0=>_0x2342d0[a5_0x412a('0x46')]!==_0x376db1);_0xeb6432[a5_0x412a('0x36')](_0x226200=>{if(_0x226200){return _0x5d9b27(_0x226200);}_0x5c7c4d['flash'](a5_0x412a('0x3f'),{'msg':_0x376db1+a5_0x412a('0x47')});_0x2757fd['redirect'](a5_0x412a('0x2f'));});});};exports[a5_0x412a('0x48')]=(_0x1211f9,_0x10e8df,_0x1f6d78)=>{if(_0x1211f9['isAuthenticated']()){return _0x10e8df[a5_0x412a('0x9')]('/');}User_1[a5_0x412a('0x28')]['findOne']({'passwordResetToken':_0x1211f9[a5_0x412a('0x42')][a5_0x412a('0x49')]})['where'](a5_0x412a('0x4a'))['gt'](Date['now']())[a5_0x412a('0x4b')]((_0x2e4dc9,_0x2a54ef)=>{if(_0x2e4dc9){return _0x1f6d78(_0x2e4dc9);}if(!_0x2a54ef){_0x1211f9[a5_0x412a('0x16')](a5_0x412a('0x17'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x10e8df[a5_0x412a('0x9')](a5_0x412a('0x4c'));}_0x10e8df[a5_0x412a('0xa')](a5_0x412a('0x4d'),{'title':a5_0x412a('0x4e')});});};exports[a5_0x412a('0x4f')]=(_0x3ddcbe,_0x3aa205,_0x1a96ba)=>{_0x3ddcbe[a5_0x412a('0x10')](a5_0x412a('0x11'),a5_0x412a('0x50'))[a5_0x412a('0x23')]({'min':0x4});_0x3ddcbe[a5_0x412a('0x10')](a5_0x412a('0x51'),a5_0x412a('0x52'))['equals'](_0x3ddcbe[a5_0x412a('0x27')][a5_0x412a('0x11')]);const _0x752847=_0x3ddcbe['validationErrors']();if(_0x752847){_0x3ddcbe[a5_0x412a('0x16')](a5_0x412a('0x17'),_0x752847);return _0x3aa205[a5_0x412a('0x9')]('back');}async_1[a5_0x412a('0x28')]['waterfall']([function resetPassword(_0x24fe0e){User_1[a5_0x412a('0x28')][a5_0x412a('0x53')]({'passwordResetToken':_0x3ddcbe['params']['token']})[a5_0x412a('0x54')](a5_0x412a('0x4a'))['gt'](Date[a5_0x412a('0x55')]())['exec']((_0x3df49f,_0x5c45f8)=>{if(_0x3df49f){return _0x1a96ba(_0x3df49f);}if(!_0x5c45f8){_0x3ddcbe['flash']('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x3aa205[a5_0x412a('0x9')](a5_0x412a('0x56'));}_0x5c45f8[a5_0x412a('0x11')]=_0x3ddcbe[a5_0x412a('0x27')][a5_0x412a('0x11')];_0x5c45f8[a5_0x412a('0x57')]=undefined;_0x5c45f8['passwordResetExpires']=undefined;_0x5c45f8[a5_0x412a('0x36')](_0x3df49f=>{if(_0x3df49f){return _0x1a96ba(_0x3df49f);}_0x3ddcbe[a5_0x412a('0x2a')](_0x5c45f8,_0x3df49f=>{_0x24fe0e(_0x3df49f,_0x5c45f8);});});});},function sendResetPasswordEmail(_0x261341,_0x433849){const _0x554ddb=nodemailer_1['default'][a5_0x412a('0x58')]({'service':a5_0x412a('0x59'),'auth':{'user':process[a5_0x412a('0x5a')][a5_0x412a('0x5b')],'pass':process[a5_0x412a('0x5a')][a5_0x412a('0x5c')]}});const _0x1dfc2d={'to':_0x261341[a5_0x412a('0xd')],'from':a5_0x412a('0x5d'),'subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x261341[a5_0x412a('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x554ddb[a5_0x412a('0x5e')](_0x1dfc2d,_0x11ce76=>{_0x3ddcbe[a5_0x412a('0x16')]('success',{'msg':a5_0x412a('0x5f')});_0x433849(_0x11ce76);});}],_0x4e63c6=>{if(_0x4e63c6){return _0x1a96ba(_0x4e63c6);}_0x3aa205[a5_0x412a('0x9')]('/');});};exports['getForgot']=(_0x5d6c0a,_0x3c69ba)=>{if(_0x5d6c0a[a5_0x412a('0x60')]()){return _0x3c69ba[a5_0x412a('0x9')]('/');}_0x3c69ba['render']('account/forgot',{'title':'Forgot\x20Password'});};exports[a5_0x412a('0x61')]=(_0x2fad86,_0x57aca0,_0x10bf58)=>{_0x2fad86[a5_0x412a('0x10')](a5_0x412a('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x2fad86[a5_0x412a('0x14')](a5_0x412a('0xd'))[a5_0x412a('0x62')]({'gmail_remove_dots':![]});const _0x20fb3d=_0x2fad86[a5_0x412a('0x15')]();if(_0x20fb3d){_0x2fad86[a5_0x412a('0x16')]('errors',_0x20fb3d);return _0x57aca0[a5_0x412a('0x9')](a5_0x412a('0x4c'));}async_1[a5_0x412a('0x28')]['waterfall']([function createRandomToken(_0x1e1f55){crypto_1[a5_0x412a('0x28')][a5_0x412a('0x63')](0x10,(_0x57998c,_0x5bb0cf)=>{const _0x2043a8=_0x5bb0cf['toString']('hex');_0x1e1f55(_0x57998c,_0x2043a8);});},function setRandomToken(_0x475c1a,_0x31d490){User_1[a5_0x412a('0x28')][a5_0x412a('0x53')]({'email':_0x2fad86[a5_0x412a('0x27')][a5_0x412a('0xd')]},(_0x433633,_0xbde5d6)=>{if(_0x433633){return _0x31d490(_0x433633);}if(!_0xbde5d6){_0x2fad86['flash'](a5_0x412a('0x17'),{'msg':a5_0x412a('0x64')});return _0x57aca0['redirect']('/forgot');}_0xbde5d6[a5_0x412a('0x57')]=_0x475c1a;_0xbde5d6[a5_0x412a('0x4a')]=Date[a5_0x412a('0x55')]()+0x36ee80;_0xbde5d6[a5_0x412a('0x36')](_0x433633=>{_0x31d490(_0x433633,_0x475c1a,_0xbde5d6);});});},function sendForgotPasswordEmail(_0x369ecc,_0x25e84f,_0x19ec9e){const _0x5945b3=nodemailer_1['default'][a5_0x412a('0x58')]({'service':a5_0x412a('0x59'),'auth':{'user':process[a5_0x412a('0x5a')][a5_0x412a('0x5b')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x466d91={'to':_0x25e84f[a5_0x412a('0xd')],'from':a5_0x412a('0x65'),'subject':a5_0x412a('0x66'),'text':a5_0x412a('0x67')+_0x2fad86['headers'][a5_0x412a('0x68')]+'/reset/'+_0x369ecc+a5_0x412a('0x69')};_0x5945b3[a5_0x412a('0x5e')](_0x466d91,_0x4a1fc0=>{_0x2fad86['flash'](a5_0x412a('0x3f'),{'msg':a5_0x412a('0x6a')+_0x25e84f[a5_0x412a('0xd')]+a5_0x412a('0x6b')});_0x19ec9e(_0x4a1fc0);});}],_0x4270ab=>{if(_0x4270ab){return _0x10bf58(_0x4270ab);}_0x57aca0['redirect']('/forgot');});};