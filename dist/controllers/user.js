var a5_0x272a=['tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','token','where','now','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','passwordResetToken','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetExpires','createTransport','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','host','sendMail','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','passport','../models/User','express-validator','user','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','notEmpty','sanitize','normalizeEmail','validationErrors','authenticate','local','flash','redirect','/login','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','isEmail','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','errors','/account','findById','body','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','Password\x20has\x20been\x20changed.','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider'];(function(_0xe451cc,_0x2a73ad){var _0x58fdd6=function(_0x1eab2e){while(--_0x1eab2e){_0xe451cc['push'](_0xe451cc['shift']());}};_0x58fdd6(++_0x2a73ad);}(a5_0x272a,0x9f));var a5_0x29b5=function(_0x2a6011,_0x5a292d){_0x2a6011=_0x2a6011-0x0;var _0x311dfe=a5_0x272a[_0x2a6011];return _0x311dfe;};'use strict';var __importDefault=this&&this[a5_0x29b5('0x0')]||function(_0x38e906){return _0x38e906&&_0x38e906[a5_0x29b5('0x1')]?_0x38e906:{'default':_0x38e906};};Object['defineProperty'](exports,a5_0x29b5('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x29b5('0x2')));const crypto_1=__importDefault(require(a5_0x29b5('0x3')));const nodemailer_1=__importDefault(require(a5_0x29b5('0x4')));const passport_1=__importDefault(require(a5_0x29b5('0x5')));const User_1=__importDefault(require(a5_0x29b5('0x6')));const request=require(a5_0x29b5('0x7'));exports['getLogin']=(_0x507286,_0x3aced9)=>{if(_0x507286[a5_0x29b5('0x8')]){return _0x3aced9['redirect']('/');}_0x3aced9[a5_0x29b5('0x9')](a5_0x29b5('0xa'),{'title':a5_0x29b5('0xb')});};exports[a5_0x29b5('0xc')]=(_0x38022e,_0x2e9d65,_0x2afa72)=>{_0x38022e[a5_0x29b5('0xd')](a5_0x29b5('0xe'),a5_0x29b5('0xf'))['isEmail']();_0x38022e['assert']('password','Password\x20cannot\x20be\x20blank')[a5_0x29b5('0x10')]();_0x38022e[a5_0x29b5('0x11')](a5_0x29b5('0xe'))[a5_0x29b5('0x12')]({'gmail_remove_dots':![]});const _0x348dab=_0x38022e[a5_0x29b5('0x13')]();if(_0x348dab){_0x38022e['flash']('errors',_0x348dab);return _0x2e9d65['redirect']('/login');}passport_1['default'][a5_0x29b5('0x14')](a5_0x29b5('0x15'),(_0x2ecab9,_0x207b1e,_0x4ed79e)=>{if(_0x2ecab9){return _0x2afa72(_0x2ecab9);}if(!_0x207b1e){_0x38022e[a5_0x29b5('0x16')]('errors',_0x4ed79e['message']);return _0x2e9d65[a5_0x29b5('0x17')](a5_0x29b5('0x18'));}_0x38022e[a5_0x29b5('0x19')](_0x207b1e,_0x2ecab9=>{if(_0x2ecab9){return _0x2afa72(_0x2ecab9);}_0x38022e[a5_0x29b5('0x16')](a5_0x29b5('0x1a'),{'msg':a5_0x29b5('0x1b')});_0x2e9d65[a5_0x29b5('0x17')](_0x38022e[a5_0x29b5('0x1c')]['returnTo']||'/');});})(_0x38022e,_0x2e9d65,_0x2afa72);};exports[a5_0x29b5('0x1d')]=(_0xc78626,_0x1a708e)=>{_0xc78626[a5_0x29b5('0x1d')]();_0x1a708e[a5_0x29b5('0x17')]('/');};exports[a5_0x29b5('0x1e')]=(_0x5d6d18,_0x55de3b)=>{if(_0x5d6d18['user']){return _0x55de3b[a5_0x29b5('0x17')]('/');}_0x55de3b[a5_0x29b5('0x9')](a5_0x29b5('0x1f'),{'title':a5_0x29b5('0x20')});};exports['postSignup']=(_0x33620c,_0x2a0bcd,_0x4201f4)=>{_0x33620c['assert']('email',a5_0x29b5('0xf'))[a5_0x29b5('0x21')]();_0x33620c[a5_0x29b5('0xd')](a5_0x29b5('0x22'),a5_0x29b5('0x23'))['len']({'min':0x4});_0x33620c[a5_0x29b5('0xd')](a5_0x29b5('0x24'),a5_0x29b5('0x25'))[a5_0x29b5('0x26')](_0x33620c['body'][a5_0x29b5('0x22')]);_0x33620c[a5_0x29b5('0x11')](a5_0x29b5('0xe'))[a5_0x29b5('0x12')]({'gmail_remove_dots':![]});const _0x44642a=_0x33620c[a5_0x29b5('0x13')]();if(_0x44642a){_0x33620c[a5_0x29b5('0x16')]('errors',_0x44642a);return _0x2a0bcd[a5_0x29b5('0x17')](a5_0x29b5('0x27'));}const _0x22d11a=new User_1[(a5_0x29b5('0x28'))]({});User_1[a5_0x29b5('0x28')][a5_0x29b5('0x29')]({'email':_0x33620c['body']['email']},(_0x3012d5,_0x198bdd)=>{if(_0x3012d5){return _0x4201f4(_0x3012d5);}if(_0x198bdd){_0x33620c[a5_0x29b5('0x16')]('errors',{'msg':a5_0x29b5('0x2a')});return _0x2a0bcd[a5_0x29b5('0x17')](a5_0x29b5('0x27'));}_0x22d11a[a5_0x29b5('0x2b')](_0x3012d5=>{if(_0x3012d5){return _0x4201f4(_0x3012d5);}_0x33620c['logIn'](_0x22d11a,_0x3012d5=>{if(_0x3012d5){return _0x4201f4(_0x3012d5);}_0x2a0bcd[a5_0x29b5('0x17')]('/');});});});};exports[a5_0x29b5('0x2c')]=(_0xe961ad,_0x3055e9)=>{_0x3055e9[a5_0x29b5('0x9')](a5_0x29b5('0x2d'),{'title':a5_0x29b5('0x2e')});};exports[a5_0x29b5('0x2f')]=(_0x191ad8,_0xa713f0,_0x32448b)=>{_0x191ad8[a5_0x29b5('0xd')](a5_0x29b5('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x29b5('0x21')]();_0x191ad8[a5_0x29b5('0x11')](a5_0x29b5('0xe'))[a5_0x29b5('0x12')]({'gmail_remove_dots':![]});const _0x59406e=_0x191ad8[a5_0x29b5('0x13')]();if(_0x59406e){_0x191ad8[a5_0x29b5('0x16')](a5_0x29b5('0x30'),_0x59406e);return _0xa713f0[a5_0x29b5('0x17')](a5_0x29b5('0x31'));}User_1['default'][a5_0x29b5('0x32')](_0x191ad8['user']['id'],(_0x5e9640,_0x394e6f)=>{if(_0x5e9640){return _0x32448b(_0x5e9640);}_0x394e6f[a5_0x29b5('0xe')]=_0x191ad8[a5_0x29b5('0x33')][a5_0x29b5('0xe')]||'';_0x394e6f[a5_0x29b5('0x34')][a5_0x29b5('0x35')]=_0x191ad8[a5_0x29b5('0x33')]['name']||'';_0x394e6f['profile']['gender']=_0x191ad8[a5_0x29b5('0x33')][a5_0x29b5('0x36')]||'';_0x394e6f['profile'][a5_0x29b5('0x37')]=_0x191ad8[a5_0x29b5('0x33')]['location']||'';_0x394e6f['profile'][a5_0x29b5('0x38')]=_0x191ad8[a5_0x29b5('0x33')]['website']||'';_0x394e6f[a5_0x29b5('0x2b')](_0x5e9640=>{if(_0x5e9640){if(_0x5e9640[a5_0x29b5('0x39')]===0x2af8){_0x191ad8[a5_0x29b5('0x16')](a5_0x29b5('0x30'),{'msg':a5_0x29b5('0x3a')});return _0xa713f0['redirect'](a5_0x29b5('0x31'));}return _0x32448b(_0x5e9640);}_0x191ad8[a5_0x29b5('0x16')](a5_0x29b5('0x1a'),{'msg':a5_0x29b5('0x3b')});_0xa713f0[a5_0x29b5('0x17')](a5_0x29b5('0x31'));});});};exports[a5_0x29b5('0x3c')]=(_0x40dcfe,_0x57bb71,_0x52664c)=>{_0x40dcfe['assert'](a5_0x29b5('0x22'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x29b5('0x3d')]({'min':0x4});_0x40dcfe[a5_0x29b5('0xd')](a5_0x29b5('0x24'),a5_0x29b5('0x25'))['equals'](_0x40dcfe[a5_0x29b5('0x33')]['password']);const _0x5f3f56=_0x40dcfe[a5_0x29b5('0x13')]();if(_0x5f3f56){_0x40dcfe[a5_0x29b5('0x16')](a5_0x29b5('0x30'),_0x5f3f56);return _0x57bb71[a5_0x29b5('0x17')]('/account');}User_1[a5_0x29b5('0x28')][a5_0x29b5('0x32')](_0x40dcfe[a5_0x29b5('0x8')]['id'],(_0x1ef892,_0x4df560)=>{if(_0x1ef892){return _0x52664c(_0x1ef892);}_0x4df560[a5_0x29b5('0x22')]=_0x40dcfe[a5_0x29b5('0x33')]['password'];_0x4df560[a5_0x29b5('0x2b')](_0x1ef892=>{if(_0x1ef892){return _0x52664c(_0x1ef892);}_0x40dcfe[a5_0x29b5('0x16')]('success',{'msg':a5_0x29b5('0x3e')});_0x57bb71['redirect']('/account');});});};exports['postDeleteAccount']=(_0x36ccf2,_0x4a8ba4,_0x12945c)=>{User_1[a5_0x29b5('0x28')][a5_0x29b5('0x3f')]({'_id':_0x36ccf2[a5_0x29b5('0x8')]['id']},_0x15f299=>{if(_0x15f299){return _0x12945c(_0x15f299);}_0x36ccf2[a5_0x29b5('0x1d')]();_0x36ccf2[a5_0x29b5('0x16')]('info',{'msg':a5_0x29b5('0x40')});_0x4a8ba4[a5_0x29b5('0x17')]('/');});};exports[a5_0x29b5('0x41')]=(_0x1b81d5,_0x108baa,_0x33159a)=>{const _0x54a2b6=_0x1b81d5['params'][a5_0x29b5('0x42')];User_1[a5_0x29b5('0x28')][a5_0x29b5('0x32')](_0x1b81d5['user']['id'],(_0x5f588b,_0x1e11c4)=>{if(_0x5f588b){return _0x33159a(_0x5f588b);}_0x1e11c4[_0x54a2b6]=undefined;_0x1e11c4[a5_0x29b5('0x43')]=_0x1e11c4[a5_0x29b5('0x43')]['filter'](_0x293323=>_0x293323[a5_0x29b5('0x44')]!==_0x54a2b6);_0x1e11c4['save'](_0x5f588b=>{if(_0x5f588b){return _0x33159a(_0x5f588b);}_0x1b81d5[a5_0x29b5('0x16')]('info',{'msg':_0x54a2b6+a5_0x29b5('0x45')});_0x108baa['redirect'](a5_0x29b5('0x31'));});});};exports[a5_0x29b5('0x46')]=(_0x5dd76d,_0x555e5a,_0x18810f)=>{if(_0x5dd76d[a5_0x29b5('0x47')]()){return _0x555e5a[a5_0x29b5('0x17')]('/');}User_1[a5_0x29b5('0x28')][a5_0x29b5('0x29')]({'passwordResetToken':_0x5dd76d[a5_0x29b5('0x48')][a5_0x29b5('0x49')]})[a5_0x29b5('0x4a')]('passwordResetExpires')['gt'](Date[a5_0x29b5('0x4b')]())[a5_0x29b5('0x4c')]((_0x116a11,_0xe50137)=>{if(_0x116a11){return _0x18810f(_0x116a11);}if(!_0xe50137){_0x5dd76d[a5_0x29b5('0x16')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x555e5a[a5_0x29b5('0x17')](a5_0x29b5('0x4d'));}_0x555e5a[a5_0x29b5('0x9')](a5_0x29b5('0x4e'),{'title':a5_0x29b5('0x4f')});});};exports[a5_0x29b5('0x50')]=(_0x431336,_0x4ef37b,_0x5d8dd1)=>{_0x431336[a5_0x29b5('0xd')](a5_0x29b5('0x22'),a5_0x29b5('0x51'))['len']({'min':0x4});_0x431336[a5_0x29b5('0xd')]('confirm',a5_0x29b5('0x52'))[a5_0x29b5('0x26')](_0x431336[a5_0x29b5('0x33')]['password']);const _0x30a75d=_0x431336[a5_0x29b5('0x13')]();if(_0x30a75d){_0x431336[a5_0x29b5('0x16')](a5_0x29b5('0x30'),_0x30a75d);return _0x4ef37b[a5_0x29b5('0x17')]('back');}async_1[a5_0x29b5('0x28')][a5_0x29b5('0x53')]([function resetPassword(_0x10c8c1){User_1[a5_0x29b5('0x28')]['findOne']({'passwordResetToken':_0x431336[a5_0x29b5('0x48')]['token']})[a5_0x29b5('0x4a')]('passwordResetExpires')['gt'](Date[a5_0x29b5('0x4b')]())[a5_0x29b5('0x4c')]((_0x2cf512,_0x332d83)=>{if(_0x2cf512){return _0x5d8dd1(_0x2cf512);}if(!_0x332d83){_0x431336['flash'](a5_0x29b5('0x30'),{'msg':a5_0x29b5('0x54')});return _0x4ef37b[a5_0x29b5('0x17')](a5_0x29b5('0x55'));}_0x332d83[a5_0x29b5('0x22')]=_0x431336[a5_0x29b5('0x33')][a5_0x29b5('0x22')];_0x332d83[a5_0x29b5('0x56')]=undefined;_0x332d83['passwordResetExpires']=undefined;_0x332d83[a5_0x29b5('0x2b')](_0x2cf512=>{if(_0x2cf512){return _0x5d8dd1(_0x2cf512);}_0x431336[a5_0x29b5('0x19')](_0x332d83,_0x2cf512=>{_0x10c8c1(_0x2cf512,_0x332d83);});});});},function sendResetPasswordEmail(_0x1f553c,_0x1489dd){const _0x57ca28=nodemailer_1[a5_0x29b5('0x28')]['createTransport']({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x29b5('0x57')][a5_0x29b5('0x58')]}});const _0x1dc800={'to':_0x1f553c[a5_0x29b5('0xe')],'from':a5_0x29b5('0x59'),'subject':a5_0x29b5('0x5a'),'text':a5_0x29b5('0x5b')+_0x1f553c[a5_0x29b5('0xe')]+a5_0x29b5('0x5c')};_0x57ca28['sendMail'](_0x1dc800,_0x32d445=>{_0x431336[a5_0x29b5('0x16')](a5_0x29b5('0x1a'),{'msg':a5_0x29b5('0x5d')});_0x1489dd(_0x32d445);});}],_0x2fd893=>{if(_0x2fd893){return _0x5d8dd1(_0x2fd893);}_0x4ef37b[a5_0x29b5('0x17')]('/');});};exports[a5_0x29b5('0x5e')]=(_0x3ed961,_0x12a05e)=>{if(_0x3ed961[a5_0x29b5('0x47')]()){return _0x12a05e['redirect']('/');}_0x12a05e[a5_0x29b5('0x9')](a5_0x29b5('0x5f'),{'title':a5_0x29b5('0x60')});};exports[a5_0x29b5('0x61')]=(_0x5a1f33,_0x488e79,_0x9c0b80)=>{_0x5a1f33[a5_0x29b5('0xd')]('email',a5_0x29b5('0x62'))['isEmail']();_0x5a1f33[a5_0x29b5('0x11')](a5_0x29b5('0xe'))[a5_0x29b5('0x12')]({'gmail_remove_dots':![]});const _0x4e82e7=_0x5a1f33['validationErrors']();if(_0x4e82e7){_0x5a1f33[a5_0x29b5('0x16')](a5_0x29b5('0x30'),_0x4e82e7);return _0x488e79[a5_0x29b5('0x17')](a5_0x29b5('0x4d'));}async_1['default']['waterfall']([function createRandomToken(_0x5aa681){crypto_1[a5_0x29b5('0x28')][a5_0x29b5('0x63')](0x10,(_0x3c0b96,_0x496b7a)=>{const _0x47b241=_0x496b7a[a5_0x29b5('0x64')](a5_0x29b5('0x65'));_0x5aa681(_0x3c0b96,_0x47b241);});},function setRandomToken(_0x54b562,_0x321ea5){User_1['default']['findOne']({'email':_0x5a1f33['body'][a5_0x29b5('0xe')]},(_0x4bb071,_0x2d7c27)=>{if(_0x4bb071){return _0x321ea5(_0x4bb071);}if(!_0x2d7c27){_0x5a1f33['flash'](a5_0x29b5('0x30'),{'msg':a5_0x29b5('0x66')});return _0x488e79[a5_0x29b5('0x17')]('/forgot');}_0x2d7c27['passwordResetToken']=_0x54b562;_0x2d7c27[a5_0x29b5('0x67')]=Date[a5_0x29b5('0x4b')]()+0x36ee80;_0x2d7c27[a5_0x29b5('0x2b')](_0x4bb071=>{_0x321ea5(_0x4bb071,_0x54b562,_0x2d7c27);});});},function sendForgotPasswordEmail(_0x5a625d,_0x515f81,_0x2082e1){const _0x43de46=nodemailer_1[a5_0x29b5('0x28')][a5_0x29b5('0x68')]({'service':'SendGrid','auth':{'user':process[a5_0x29b5('0x57')][a5_0x29b5('0x69')],'pass':process[a5_0x29b5('0x57')]['SENDGRID_PASSWORD']}});const _0x5cd6c7={'to':_0x515f81['email'],'from':a5_0x29b5('0x6a'),'subject':a5_0x29b5('0x6b'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x5a1f33['headers'][a5_0x29b5('0x6c')]+'/reset/'+_0x5a625d+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x43de46[a5_0x29b5('0x6d')](_0x5cd6c7,_0x45ca41=>{_0x5a1f33[a5_0x29b5('0x16')](a5_0x29b5('0x6e'),{'msg':a5_0x29b5('0x6f')+_0x515f81[a5_0x29b5('0xe')]+a5_0x29b5('0x70')});_0x2082e1(_0x45ca41);});}],_0x1497a0=>{if(_0x1497a0){return _0x9c0b80(_0x1497a0);}_0x488e79[a5_0x29b5('0x17')](a5_0x29b5('0x4d'));});};