var a5_0x5f27=['Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','crypto','nodemailer','../models/User','express-validator','user','redirect','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','flash','errors','/login','default','authenticate','local','logIn','success','session','returnTo','logout','Create\x20Account','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','sanitize','/signup','findOne','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','isEmail','validationErrors','/account','name','profile','gender','location','website','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','confirm','Passwords\x20must\x20match.','waterfall','back','passwordResetToken','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com'];(function(_0x38eb4,_0x1775d3){var _0x494bab=function(_0x419ce9){while(--_0x419ce9){_0x38eb4['push'](_0x38eb4['shift']());}};_0x494bab(++_0x1775d3);}(a5_0x5f27,0x149));var a5_0x47fb=function(_0x1affab,_0x3b0125){_0x1affab=_0x1affab-0x0;var _0x1d0a0b=a5_0x5f27[_0x1affab];return _0x1d0a0b;};'use strict';var __importDefault=this&&this[a5_0x47fb('0x0')]||function(_0x55ba67){return _0x55ba67&&_0x55ba67[a5_0x47fb('0x1')]?_0x55ba67:{'default':_0x55ba67};};Object[a5_0x47fb('0x2')](exports,a5_0x47fb('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x47fb('0x3')));const nodemailer_1=__importDefault(require(a5_0x47fb('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x47fb('0x5')));const request=require(a5_0x47fb('0x6'));exports['getLogin']=(_0x3424b9,_0x967367)=>{if(_0x3424b9[a5_0x47fb('0x7')]){return _0x967367[a5_0x47fb('0x8')]('/');}_0x967367[a5_0x47fb('0x9')](a5_0x47fb('0xa'),{'title':'Login'});};exports[a5_0x47fb('0xb')]=(_0x205442,_0x2a2b3c,_0x3572d1)=>{_0x205442[a5_0x47fb('0xc')](a5_0x47fb('0xd'),a5_0x47fb('0xe'))['isEmail']();_0x205442[a5_0x47fb('0xc')]('password',a5_0x47fb('0xf'))[a5_0x47fb('0x10')]();_0x205442['sanitize'](a5_0x47fb('0xd'))[a5_0x47fb('0x11')]({'gmail_remove_dots':![]});const _0x4018ba=_0x205442['validationErrors']();if(_0x4018ba){_0x205442[a5_0x47fb('0x12')](a5_0x47fb('0x13'),_0x4018ba);return _0x2a2b3c['redirect'](a5_0x47fb('0x14'));}passport_1[a5_0x47fb('0x15')][a5_0x47fb('0x16')](a5_0x47fb('0x17'),(_0x5564c4,_0x73b5e4,_0xad405)=>{if(_0x5564c4){return _0x3572d1(_0x5564c4);}if(!_0x73b5e4){_0x205442[a5_0x47fb('0x12')]('errors',_0xad405['message']);return _0x2a2b3c['redirect'](a5_0x47fb('0x14'));}_0x205442[a5_0x47fb('0x18')](_0x73b5e4,_0x5564c4=>{if(_0x5564c4){return _0x3572d1(_0x5564c4);}_0x205442['flash'](a5_0x47fb('0x19'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x2a2b3c[a5_0x47fb('0x8')](_0x205442[a5_0x47fb('0x1a')][a5_0x47fb('0x1b')]||'/');});})(_0x205442,_0x2a2b3c,_0x3572d1);};exports[a5_0x47fb('0x1c')]=(_0x5358a3,_0x2c38e5)=>{_0x5358a3[a5_0x47fb('0x1c')]();_0x2c38e5[a5_0x47fb('0x8')]('/');};exports['getSignup']=(_0xa8a6c1,_0x37e536)=>{if(_0xa8a6c1[a5_0x47fb('0x7')]){return _0x37e536[a5_0x47fb('0x8')]('/');}_0x37e536[a5_0x47fb('0x9')]('account/signup',{'title':a5_0x47fb('0x1d')});};exports[a5_0x47fb('0x1e')]=(_0x5c295d,_0x57e61c,_0x182901)=>{_0x5c295d['assert'](a5_0x47fb('0xd'),'Email\x20is\x20not\x20valid')['isEmail']();_0x5c295d[a5_0x47fb('0xc')](a5_0x47fb('0x1f'),a5_0x47fb('0x20'))[a5_0x47fb('0x21')]({'min':0x4});_0x5c295d[a5_0x47fb('0xc')](a5_0x47fb('0x22'),'Passwords\x20do\x20not\x20match')[a5_0x47fb('0x23')](_0x5c295d['body'][a5_0x47fb('0x1f')]);_0x5c295d[a5_0x47fb('0x24')](a5_0x47fb('0xd'))[a5_0x47fb('0x11')]({'gmail_remove_dots':![]});const _0x45db49=_0x5c295d['validationErrors']();if(_0x45db49){_0x5c295d[a5_0x47fb('0x12')](a5_0x47fb('0x13'),_0x45db49);return _0x57e61c[a5_0x47fb('0x8')](a5_0x47fb('0x25'));}const _0x45fe0c=new User_1[(a5_0x47fb('0x15'))]({});User_1[a5_0x47fb('0x15')][a5_0x47fb('0x26')]({'email':_0x5c295d[a5_0x47fb('0x27')][a5_0x47fb('0xd')]},(_0x1b9ed8,_0x2539a2)=>{if(_0x1b9ed8){return _0x182901(_0x1b9ed8);}if(_0x2539a2){_0x5c295d[a5_0x47fb('0x12')](a5_0x47fb('0x13'),{'msg':a5_0x47fb('0x28')});return _0x57e61c[a5_0x47fb('0x8')](a5_0x47fb('0x25'));}_0x45fe0c[a5_0x47fb('0x29')](_0x1b9ed8=>{if(_0x1b9ed8){return _0x182901(_0x1b9ed8);}_0x5c295d[a5_0x47fb('0x18')](_0x45fe0c,_0x1b9ed8=>{if(_0x1b9ed8){return _0x182901(_0x1b9ed8);}_0x57e61c[a5_0x47fb('0x8')]('/');});});});};exports[a5_0x47fb('0x2a')]=(_0x45a58f,_0x182e12)=>{_0x182e12['render'](a5_0x47fb('0x2b'),{'title':'Account\x20Management'});};exports[a5_0x47fb('0x2c')]=(_0x20aa07,_0xea7a76,_0x2e27c5)=>{_0x20aa07[a5_0x47fb('0xc')](a5_0x47fb('0xd'),a5_0x47fb('0x2d'))[a5_0x47fb('0x2e')]();_0x20aa07[a5_0x47fb('0x24')](a5_0x47fb('0xd'))[a5_0x47fb('0x11')]({'gmail_remove_dots':![]});const _0x53eeea=_0x20aa07[a5_0x47fb('0x2f')]();if(_0x53eeea){_0x20aa07[a5_0x47fb('0x12')]('errors',_0x53eeea);return _0xea7a76['redirect'](a5_0x47fb('0x30'));}User_1[a5_0x47fb('0x15')]['findById'](_0x20aa07[a5_0x47fb('0x7')]['id'],(_0x37d18a,_0x439005)=>{if(_0x37d18a){return _0x2e27c5(_0x37d18a);}_0x439005[a5_0x47fb('0xd')]=_0x20aa07['body'][a5_0x47fb('0xd')]||'';_0x439005['profile'][a5_0x47fb('0x31')]=_0x20aa07[a5_0x47fb('0x27')][a5_0x47fb('0x31')]||'';_0x439005[a5_0x47fb('0x32')][a5_0x47fb('0x33')]=_0x20aa07[a5_0x47fb('0x27')][a5_0x47fb('0x33')]||'';_0x439005[a5_0x47fb('0x32')]['location']=_0x20aa07[a5_0x47fb('0x27')][a5_0x47fb('0x34')]||'';_0x439005['profile'][a5_0x47fb('0x35')]=_0x20aa07[a5_0x47fb('0x27')][a5_0x47fb('0x35')]||'';_0x439005[a5_0x47fb('0x29')](_0x37d18a=>{if(_0x37d18a){if(_0x37d18a['code']===0x2af8){_0x20aa07[a5_0x47fb('0x12')]('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0xea7a76[a5_0x47fb('0x8')]('/account');}return _0x2e27c5(_0x37d18a);}_0x20aa07['flash'](a5_0x47fb('0x19'),{'msg':a5_0x47fb('0x36')});_0xea7a76[a5_0x47fb('0x8')](a5_0x47fb('0x30'));});});};exports[a5_0x47fb('0x37')]=(_0x582404,_0x6873d0,_0x530ced)=>{_0x582404[a5_0x47fb('0xc')](a5_0x47fb('0x1f'),a5_0x47fb('0x20'))[a5_0x47fb('0x21')]({'min':0x4});_0x582404['assert'](a5_0x47fb('0x22'),'Passwords\x20do\x20not\x20match')[a5_0x47fb('0x23')](_0x582404[a5_0x47fb('0x27')][a5_0x47fb('0x1f')]);const _0x452096=_0x582404[a5_0x47fb('0x2f')]();if(_0x452096){_0x582404['flash']('errors',_0x452096);return _0x6873d0[a5_0x47fb('0x8')](a5_0x47fb('0x30'));}User_1[a5_0x47fb('0x15')][a5_0x47fb('0x38')](_0x582404[a5_0x47fb('0x7')]['id'],(_0x53669c,_0x2660ca)=>{if(_0x53669c){return _0x530ced(_0x53669c);}_0x2660ca['password']=_0x582404[a5_0x47fb('0x27')]['password'];_0x2660ca[a5_0x47fb('0x29')](_0x53669c=>{if(_0x53669c){return _0x530ced(_0x53669c);}_0x582404[a5_0x47fb('0x12')](a5_0x47fb('0x19'),{'msg':a5_0x47fb('0x39')});_0x6873d0[a5_0x47fb('0x8')](a5_0x47fb('0x30'));});});};exports[a5_0x47fb('0x3a')]=(_0x460dce,_0x4649d1,_0x18f3fd)=>{User_1[a5_0x47fb('0x15')][a5_0x47fb('0x3b')]({'_id':_0x460dce[a5_0x47fb('0x7')]['id']},_0x4022b4=>{if(_0x4022b4){return _0x18f3fd(_0x4022b4);}_0x460dce[a5_0x47fb('0x1c')]();_0x460dce[a5_0x47fb('0x12')](a5_0x47fb('0x3c'),{'msg':a5_0x47fb('0x3d')});_0x4649d1[a5_0x47fb('0x8')]('/');});};exports[a5_0x47fb('0x3e')]=(_0x102b01,_0x11e462,_0x486c29)=>{const _0x572102=_0x102b01[a5_0x47fb('0x3f')]['provider'];User_1['default']['findById'](_0x102b01[a5_0x47fb('0x7')]['id'],(_0x5dec28,_0x5cb4cc)=>{if(_0x5dec28){return _0x486c29(_0x5dec28);}_0x5cb4cc[_0x572102]=undefined;_0x5cb4cc[a5_0x47fb('0x40')]=_0x5cb4cc[a5_0x47fb('0x40')][a5_0x47fb('0x41')](_0x398d7c=>_0x398d7c[a5_0x47fb('0x42')]!==_0x572102);_0x5cb4cc[a5_0x47fb('0x29')](_0x5dec28=>{if(_0x5dec28){return _0x486c29(_0x5dec28);}_0x102b01['flash']('info',{'msg':_0x572102+a5_0x47fb('0x43')});_0x11e462[a5_0x47fb('0x8')](a5_0x47fb('0x30'));});});};exports['getReset']=(_0x3a565d,_0x1aa16c,_0x55f204)=>{if(_0x3a565d[a5_0x47fb('0x44')]()){return _0x1aa16c[a5_0x47fb('0x8')]('/');}User_1[a5_0x47fb('0x15')]['findOne']({'passwordResetToken':_0x3a565d['params'][a5_0x47fb('0x45')]})[a5_0x47fb('0x46')](a5_0x47fb('0x47'))['gt'](Date[a5_0x47fb('0x48')]())[a5_0x47fb('0x49')]((_0x58be1d,_0xc37769)=>{if(_0x58be1d){return _0x55f204(_0x58be1d);}if(!_0xc37769){_0x3a565d[a5_0x47fb('0x12')](a5_0x47fb('0x13'),{'msg':a5_0x47fb('0x4a')});return _0x1aa16c[a5_0x47fb('0x8')](a5_0x47fb('0x4b'));}_0x1aa16c['render'](a5_0x47fb('0x4c'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x5cfadc,_0x3cb268,_0x273575)=>{_0x5cfadc[a5_0x47fb('0xc')](a5_0x47fb('0x1f'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x47fb('0x21')]({'min':0x4});_0x5cfadc['assert'](a5_0x47fb('0x4d'),a5_0x47fb('0x4e'))[a5_0x47fb('0x23')](_0x5cfadc[a5_0x47fb('0x27')][a5_0x47fb('0x1f')]);const _0x24b632=_0x5cfadc[a5_0x47fb('0x2f')]();if(_0x24b632){_0x5cfadc[a5_0x47fb('0x12')]('errors',_0x24b632);return _0x3cb268[a5_0x47fb('0x8')]('back');}async_1[a5_0x47fb('0x15')][a5_0x47fb('0x4f')]([function resetPassword(_0x4b23a1){User_1[a5_0x47fb('0x15')][a5_0x47fb('0x26')]({'passwordResetToken':_0x5cfadc[a5_0x47fb('0x3f')][a5_0x47fb('0x45')]})[a5_0x47fb('0x46')](a5_0x47fb('0x47'))['gt'](Date[a5_0x47fb('0x48')]())[a5_0x47fb('0x49')]((_0x20990d,_0x46c918)=>{if(_0x20990d){return _0x273575(_0x20990d);}if(!_0x46c918){_0x5cfadc['flash'](a5_0x47fb('0x13'),{'msg':a5_0x47fb('0x4a')});return _0x3cb268[a5_0x47fb('0x8')](a5_0x47fb('0x50'));}_0x46c918[a5_0x47fb('0x1f')]=_0x5cfadc[a5_0x47fb('0x27')][a5_0x47fb('0x1f')];_0x46c918[a5_0x47fb('0x51')]=undefined;_0x46c918[a5_0x47fb('0x47')]=undefined;_0x46c918[a5_0x47fb('0x29')](_0x20990d=>{if(_0x20990d){return _0x273575(_0x20990d);}_0x5cfadc['logIn'](_0x46c918,_0x20990d=>{_0x4b23a1(_0x20990d,_0x46c918);});});});},function sendResetPasswordEmail(_0x2d5230,_0x5819d7){const _0x3c6dc6=nodemailer_1[a5_0x47fb('0x15')]['createTransport']({'service':a5_0x47fb('0x52'),'auth':{'user':process[a5_0x47fb('0x53')][a5_0x47fb('0x54')],'pass':process[a5_0x47fb('0x53')][a5_0x47fb('0x55')]}});const _0x57e1c5={'to':_0x2d5230[a5_0x47fb('0xd')],'from':a5_0x47fb('0x56'),'subject':a5_0x47fb('0x57'),'text':a5_0x47fb('0x58')+_0x2d5230[a5_0x47fb('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x3c6dc6[a5_0x47fb('0x59')](_0x57e1c5,_0x24c316=>{_0x5cfadc[a5_0x47fb('0x12')]('success',{'msg':a5_0x47fb('0x5a')});_0x5819d7(_0x24c316);});}],_0x2f232c=>{if(_0x2f232c){return _0x273575(_0x2f232c);}_0x3cb268[a5_0x47fb('0x8')]('/');});};exports[a5_0x47fb('0x5b')]=(_0x1eb81f,_0x4059b4)=>{if(_0x1eb81f[a5_0x47fb('0x44')]()){return _0x4059b4[a5_0x47fb('0x8')]('/');}_0x4059b4[a5_0x47fb('0x9')](a5_0x47fb('0x5c'),{'title':a5_0x47fb('0x5d')});};exports['postForgot']=(_0x4e11cd,_0x144ae3,_0xfe8548)=>{_0x4e11cd[a5_0x47fb('0xc')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x47fb('0x2e')]();_0x4e11cd[a5_0x47fb('0x24')](a5_0x47fb('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3493f2=_0x4e11cd[a5_0x47fb('0x2f')]();if(_0x3493f2){_0x4e11cd[a5_0x47fb('0x12')]('errors',_0x3493f2);return _0x144ae3['redirect'](a5_0x47fb('0x4b'));}async_1['default'][a5_0x47fb('0x4f')]([function createRandomToken(_0x89146e){crypto_1['default'][a5_0x47fb('0x5e')](0x10,(_0x47108f,_0x6302e6)=>{const _0x4040b8=_0x6302e6['toString'](a5_0x47fb('0x5f'));_0x89146e(_0x47108f,_0x4040b8);});},function setRandomToken(_0x19758a,_0x2fb553){User_1[a5_0x47fb('0x15')][a5_0x47fb('0x26')]({'email':_0x4e11cd[a5_0x47fb('0x27')][a5_0x47fb('0xd')]},(_0x4d263a,_0x2ddc25)=>{if(_0x4d263a){return _0x2fb553(_0x4d263a);}if(!_0x2ddc25){_0x4e11cd[a5_0x47fb('0x12')](a5_0x47fb('0x13'),{'msg':a5_0x47fb('0x60')});return _0x144ae3['redirect']('/forgot');}_0x2ddc25[a5_0x47fb('0x51')]=_0x19758a;_0x2ddc25['passwordResetExpires']=Date[a5_0x47fb('0x48')]()+0x36ee80;_0x2ddc25['save'](_0x4d263a=>{_0x2fb553(_0x4d263a,_0x19758a,_0x2ddc25);});});},function sendForgotPasswordEmail(_0x1832a6,_0x8e02c4,_0x4b9c76){const _0x234dab=nodemailer_1[a5_0x47fb('0x15')][a5_0x47fb('0x61')]({'service':a5_0x47fb('0x52'),'auth':{'user':process[a5_0x47fb('0x53')][a5_0x47fb('0x54')],'pass':process[a5_0x47fb('0x53')][a5_0x47fb('0x55')]}});const _0x4b5f55={'to':_0x8e02c4[a5_0x47fb('0xd')],'from':'hackathon@starter.com','subject':a5_0x47fb('0x62'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x4e11cd[a5_0x47fb('0x63')][a5_0x47fb('0x64')]+a5_0x47fb('0x65')+_0x1832a6+a5_0x47fb('0x66')};_0x234dab[a5_0x47fb('0x59')](_0x4b5f55,_0x2a5a56=>{_0x4e11cd['flash'](a5_0x47fb('0x3c'),{'msg':a5_0x47fb('0x67')+_0x8e02c4[a5_0x47fb('0xd')]+'\x20with\x20further\x20instructions.'});_0x4b9c76(_0x2a5a56);});}],_0x1f8d7d=>{if(_0x1f8d7d){return _0xfe8548(_0x1f8d7d);}_0x144ae3[a5_0x47fb('0x8')](a5_0x47fb('0x4b'));});};