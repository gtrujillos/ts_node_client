var a5_0x492b=['name','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','equals','validationErrors','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','postForgot','/forgot','toString','hex','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','defineProperty','__esModule','async','crypto','nodemailer','passport','express-validator','getLogin','user','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password','notEmpty','sanitize','normalizeEmail','flash','errors','redirect','/login','default','authenticate','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile'];(function(_0x53a014,_0x373b62){var _0x519368=function(_0x42a4c5){while(--_0x42a4c5){_0x53a014['push'](_0x53a014['shift']());}};_0x519368(++_0x373b62);}(a5_0x492b,0x95));var a5_0x1228=function(_0x4ac2c1,_0x2a146e){_0x4ac2c1=_0x4ac2c1-0x0;var _0x82eff3=a5_0x492b[_0x4ac2c1];return _0x82eff3;};'use strict';var __importDefault=this&&this[a5_0x1228('0x0')]||function(_0x16beb2){return _0x16beb2&&_0x16beb2['__esModule']?_0x16beb2:{'default':_0x16beb2};};Object[a5_0x1228('0x1')](exports,a5_0x1228('0x2'),{'value':!![]});const async_1=__importDefault(require(a5_0x1228('0x3')));const crypto_1=__importDefault(require(a5_0x1228('0x4')));const nodemailer_1=__importDefault(require(a5_0x1228('0x5')));const passport_1=__importDefault(require(a5_0x1228('0x6')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x1228('0x7'));exports[a5_0x1228('0x8')]=(_0x4a3b28,_0x4319e0)=>{if(_0x4a3b28[a5_0x1228('0x9')]){return _0x4319e0['redirect']('/');}_0x4319e0[a5_0x1228('0xa')](a5_0x1228('0xb'),{'title':a5_0x1228('0xc')});};exports[a5_0x1228('0xd')]=(_0x1f05d4,_0x592097,_0x39eccb)=>{_0x1f05d4['assert'](a5_0x1228('0xe'),a5_0x1228('0xf'))[a5_0x1228('0x10')]();_0x1f05d4[a5_0x1228('0x11')](a5_0x1228('0x12'),'Password\x20cannot\x20be\x20blank')[a5_0x1228('0x13')]();_0x1f05d4[a5_0x1228('0x14')](a5_0x1228('0xe'))[a5_0x1228('0x15')]({'gmail_remove_dots':![]});const _0x402132=_0x1f05d4['validationErrors']();if(_0x402132){_0x1f05d4[a5_0x1228('0x16')](a5_0x1228('0x17'),_0x402132);return _0x592097[a5_0x1228('0x18')](a5_0x1228('0x19'));}passport_1[a5_0x1228('0x1a')][a5_0x1228('0x1b')]('local',(_0x2a7107,_0x4397fc,_0x59f01c)=>{if(_0x2a7107){return _0x39eccb(_0x2a7107);}if(!_0x4397fc){_0x1f05d4['flash'](a5_0x1228('0x17'),_0x59f01c[a5_0x1228('0x1c')]);return _0x592097[a5_0x1228('0x18')]('/login');}_0x1f05d4[a5_0x1228('0x1d')](_0x4397fc,_0x2a7107=>{if(_0x2a7107){return _0x39eccb(_0x2a7107);}_0x1f05d4[a5_0x1228('0x16')](a5_0x1228('0x1e'),{'msg':a5_0x1228('0x1f')});_0x592097['redirect'](_0x1f05d4[a5_0x1228('0x20')][a5_0x1228('0x21')]||'/');});})(_0x1f05d4,_0x592097,_0x39eccb);};exports['logout']=(_0x27b387,_0x7df575)=>{_0x27b387[a5_0x1228('0x22')]();_0x7df575['redirect']('/');};exports[a5_0x1228('0x23')]=(_0x3b0863,_0x4c5f4f)=>{if(_0x3b0863['user']){return _0x4c5f4f['redirect']('/');}_0x4c5f4f[a5_0x1228('0xa')](a5_0x1228('0x24'),{'title':'Create\x20Account'});};exports[a5_0x1228('0x25')]=(_0x1f6b24,_0x353718,_0x192c5d)=>{_0x1f6b24[a5_0x1228('0x11')](a5_0x1228('0xe'),a5_0x1228('0xf'))[a5_0x1228('0x10')]();_0x1f6b24[a5_0x1228('0x11')](a5_0x1228('0x12'),a5_0x1228('0x26'))[a5_0x1228('0x27')]({'min':0x4});_0x1f6b24['assert'](a5_0x1228('0x28'),a5_0x1228('0x29'))['equals'](_0x1f6b24[a5_0x1228('0x2a')][a5_0x1228('0x12')]);_0x1f6b24[a5_0x1228('0x14')](a5_0x1228('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xe3dbe=_0x1f6b24['validationErrors']();if(_0xe3dbe){_0x1f6b24[a5_0x1228('0x16')](a5_0x1228('0x17'),_0xe3dbe);return _0x353718[a5_0x1228('0x18')](a5_0x1228('0x2b'));}const _0x293933=new User_1[(a5_0x1228('0x1a'))]({});User_1[a5_0x1228('0x1a')]['findOne']({'email':_0x1f6b24['body'][a5_0x1228('0xe')]},(_0x5ce6cc,_0x910137)=>{if(_0x5ce6cc){return _0x192c5d(_0x5ce6cc);}if(_0x910137){_0x1f6b24[a5_0x1228('0x16')](a5_0x1228('0x17'),{'msg':a5_0x1228('0x2c')});return _0x353718[a5_0x1228('0x18')](a5_0x1228('0x2b'));}_0x293933[a5_0x1228('0x2d')](_0x5ce6cc=>{if(_0x5ce6cc){return _0x192c5d(_0x5ce6cc);}_0x1f6b24['logIn'](_0x293933,_0x5ce6cc=>{if(_0x5ce6cc){return _0x192c5d(_0x5ce6cc);}_0x353718['redirect']('/');});});});};exports[a5_0x1228('0x2e')]=(_0x33eb9e,_0x1e7840)=>{_0x1e7840[a5_0x1228('0xa')](a5_0x1228('0x2f'),{'title':'Account\x20Management'});};exports[a5_0x1228('0x30')]=(_0x7ef35,_0x2456b2,_0x31fe6a)=>{_0x7ef35['assert']('email',a5_0x1228('0x31'))[a5_0x1228('0x10')]();_0x7ef35['sanitize']('email')[a5_0x1228('0x15')]({'gmail_remove_dots':![]});const _0x50a75e=_0x7ef35['validationErrors']();if(_0x50a75e){_0x7ef35[a5_0x1228('0x16')](a5_0x1228('0x17'),_0x50a75e);return _0x2456b2['redirect'](a5_0x1228('0x32'));}User_1[a5_0x1228('0x1a')][a5_0x1228('0x33')](_0x7ef35[a5_0x1228('0x9')]['id'],(_0x5ce0db,_0x444d84)=>{if(_0x5ce0db){return _0x31fe6a(_0x5ce0db);}_0x444d84['email']=_0x7ef35['body']['email']||'';_0x444d84[a5_0x1228('0x34')][a5_0x1228('0x35')]=_0x7ef35['body'][a5_0x1228('0x35')]||'';_0x444d84[a5_0x1228('0x34')]['gender']=_0x7ef35['body']['gender']||'';_0x444d84[a5_0x1228('0x34')]['location']=_0x7ef35[a5_0x1228('0x2a')]['location']||'';_0x444d84[a5_0x1228('0x34')][a5_0x1228('0x36')]=_0x7ef35[a5_0x1228('0x2a')][a5_0x1228('0x36')]||'';_0x444d84[a5_0x1228('0x2d')](_0x5ce0db=>{if(_0x5ce0db){if(_0x5ce0db[a5_0x1228('0x37')]===0x2af8){_0x7ef35['flash'](a5_0x1228('0x17'),{'msg':a5_0x1228('0x38')});return _0x2456b2[a5_0x1228('0x18')](a5_0x1228('0x32'));}return _0x31fe6a(_0x5ce0db);}_0x7ef35[a5_0x1228('0x16')](a5_0x1228('0x1e'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x2456b2[a5_0x1228('0x18')](a5_0x1228('0x32'));});});};exports['postUpdatePassword']=(_0x4caf5f,_0x404af3,_0x45142f)=>{_0x4caf5f[a5_0x1228('0x11')](a5_0x1228('0x12'),a5_0x1228('0x26'))[a5_0x1228('0x27')]({'min':0x4});_0x4caf5f[a5_0x1228('0x11')](a5_0x1228('0x28'),a5_0x1228('0x29'))[a5_0x1228('0x39')](_0x4caf5f[a5_0x1228('0x2a')][a5_0x1228('0x12')]);const _0x489967=_0x4caf5f[a5_0x1228('0x3a')]();if(_0x489967){_0x4caf5f[a5_0x1228('0x16')](a5_0x1228('0x17'),_0x489967);return _0x404af3[a5_0x1228('0x18')]('/account');}User_1['default'][a5_0x1228('0x33')](_0x4caf5f[a5_0x1228('0x9')]['id'],(_0x2fc233,_0x5ddcd4)=>{if(_0x2fc233){return _0x45142f(_0x2fc233);}_0x5ddcd4[a5_0x1228('0x12')]=_0x4caf5f['body'][a5_0x1228('0x12')];_0x5ddcd4[a5_0x1228('0x2d')](_0x2fc233=>{if(_0x2fc233){return _0x45142f(_0x2fc233);}_0x4caf5f[a5_0x1228('0x16')](a5_0x1228('0x1e'),{'msg':'Password\x20has\x20been\x20changed.'});_0x404af3[a5_0x1228('0x18')](a5_0x1228('0x32'));});});};exports[a5_0x1228('0x3b')]=(_0x32aab6,_0x36480a,_0x48d591)=>{User_1[a5_0x1228('0x1a')][a5_0x1228('0x3c')]({'_id':_0x32aab6[a5_0x1228('0x9')]['id']},_0x3e84c3=>{if(_0x3e84c3){return _0x48d591(_0x3e84c3);}_0x32aab6[a5_0x1228('0x22')]();_0x32aab6[a5_0x1228('0x16')](a5_0x1228('0x3d'),{'msg':a5_0x1228('0x3e')});_0x36480a[a5_0x1228('0x18')]('/');});};exports['getOauthUnlink']=(_0x10b1b0,_0x4f5ec7,_0x53f3bb)=>{const _0x21d18d=_0x10b1b0[a5_0x1228('0x3f')]['provider'];User_1['default'][a5_0x1228('0x33')](_0x10b1b0[a5_0x1228('0x9')]['id'],(_0x3fc788,_0x7f0aac)=>{if(_0x3fc788){return _0x53f3bb(_0x3fc788);}_0x7f0aac[_0x21d18d]=undefined;_0x7f0aac[a5_0x1228('0x40')]=_0x7f0aac[a5_0x1228('0x40')][a5_0x1228('0x41')](_0x280d61=>_0x280d61[a5_0x1228('0x42')]!==_0x21d18d);_0x7f0aac[a5_0x1228('0x2d')](_0x3fc788=>{if(_0x3fc788){return _0x53f3bb(_0x3fc788);}_0x10b1b0['flash'](a5_0x1228('0x3d'),{'msg':_0x21d18d+a5_0x1228('0x43')});_0x4f5ec7['redirect'](a5_0x1228('0x32'));});});};exports['getReset']=(_0x26ae1a,_0x448010,_0x2cfaea)=>{if(_0x26ae1a[a5_0x1228('0x44')]()){return _0x448010[a5_0x1228('0x18')]('/');}User_1[a5_0x1228('0x1a')][a5_0x1228('0x45')]({'passwordResetToken':_0x26ae1a[a5_0x1228('0x3f')][a5_0x1228('0x46')]})[a5_0x1228('0x47')](a5_0x1228('0x48'))['gt'](Date[a5_0x1228('0x49')]())[a5_0x1228('0x4a')]((_0x52d50a,_0x47d2b6)=>{if(_0x52d50a){return _0x2cfaea(_0x52d50a);}if(!_0x47d2b6){_0x26ae1a['flash'](a5_0x1228('0x17'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x448010[a5_0x1228('0x18')]('/forgot');}_0x448010[a5_0x1228('0xa')](a5_0x1228('0x4b'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x475b2f,_0x3f2674,_0x453d54)=>{_0x475b2f[a5_0x1228('0x11')](a5_0x1228('0x12'),a5_0x1228('0x4c'))[a5_0x1228('0x27')]({'min':0x4});_0x475b2f[a5_0x1228('0x11')]('confirm',a5_0x1228('0x4d'))[a5_0x1228('0x39')](_0x475b2f[a5_0x1228('0x2a')][a5_0x1228('0x12')]);const _0x1a2046=_0x475b2f['validationErrors']();if(_0x1a2046){_0x475b2f[a5_0x1228('0x16')](a5_0x1228('0x17'),_0x1a2046);return _0x3f2674[a5_0x1228('0x18')]('back');}async_1[a5_0x1228('0x1a')][a5_0x1228('0x4e')]([function resetPassword(_0xbc3af){User_1['default'][a5_0x1228('0x45')]({'passwordResetToken':_0x475b2f['params'][a5_0x1228('0x46')]})[a5_0x1228('0x47')](a5_0x1228('0x48'))['gt'](Date['now']())[a5_0x1228('0x4a')]((_0x475ed6,_0x5a8a1b)=>{if(_0x475ed6){return _0x453d54(_0x475ed6);}if(!_0x5a8a1b){_0x475b2f[a5_0x1228('0x16')](a5_0x1228('0x17'),{'msg':a5_0x1228('0x4f')});return _0x3f2674[a5_0x1228('0x18')](a5_0x1228('0x50'));}_0x5a8a1b[a5_0x1228('0x12')]=_0x475b2f[a5_0x1228('0x2a')][a5_0x1228('0x12')];_0x5a8a1b['passwordResetToken']=undefined;_0x5a8a1b[a5_0x1228('0x48')]=undefined;_0x5a8a1b[a5_0x1228('0x2d')](_0x475ed6=>{if(_0x475ed6){return _0x453d54(_0x475ed6);}_0x475b2f['logIn'](_0x5a8a1b,_0x475ed6=>{_0xbc3af(_0x475ed6,_0x5a8a1b);});});});},function sendResetPasswordEmail(_0x2b5828,_0x711775){const _0x1e5922=nodemailer_1['default'][a5_0x1228('0x51')]({'service':a5_0x1228('0x52'),'auth':{'user':process[a5_0x1228('0x53')][a5_0x1228('0x54')],'pass':process[a5_0x1228('0x53')][a5_0x1228('0x55')]}});const _0x9e7232={'to':_0x2b5828[a5_0x1228('0xe')],'from':'express-ts@starter.com','subject':a5_0x1228('0x56'),'text':a5_0x1228('0x57')+_0x2b5828[a5_0x1228('0xe')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x1e5922['sendMail'](_0x9e7232,_0x3e41c=>{_0x475b2f[a5_0x1228('0x16')]('success',{'msg':a5_0x1228('0x58')});_0x711775(_0x3e41c);});}],_0x573b0c=>{if(_0x573b0c){return _0x453d54(_0x573b0c);}_0x3f2674[a5_0x1228('0x18')]('/');});};exports[a5_0x1228('0x59')]=(_0x111646,_0x3abcc4)=>{if(_0x111646[a5_0x1228('0x44')]()){return _0x3abcc4[a5_0x1228('0x18')]('/');}_0x3abcc4[a5_0x1228('0xa')](a5_0x1228('0x5a'),{'title':'Forgot\x20Password'});};exports[a5_0x1228('0x5b')]=(_0xc1b476,_0x13671a,_0xa618e1)=>{_0xc1b476[a5_0x1228('0x11')](a5_0x1228('0xe'),a5_0x1228('0x31'))[a5_0x1228('0x10')]();_0xc1b476['sanitize'](a5_0x1228('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x5d78c7=_0xc1b476['validationErrors']();if(_0x5d78c7){_0xc1b476[a5_0x1228('0x16')](a5_0x1228('0x17'),_0x5d78c7);return _0x13671a[a5_0x1228('0x18')](a5_0x1228('0x5c'));}async_1[a5_0x1228('0x1a')][a5_0x1228('0x4e')]([function createRandomToken(_0x40c00f){crypto_1[a5_0x1228('0x1a')]['randomBytes'](0x10,(_0x597843,_0x57d07f)=>{const _0x522be8=_0x57d07f[a5_0x1228('0x5d')](a5_0x1228('0x5e'));_0x40c00f(_0x597843,_0x522be8);});},function setRandomToken(_0x2612db,_0x14920d){User_1[a5_0x1228('0x1a')][a5_0x1228('0x45')]({'email':_0xc1b476[a5_0x1228('0x2a')][a5_0x1228('0xe')]},(_0x4b6e23,_0x1033be)=>{if(_0x4b6e23){return _0x14920d(_0x4b6e23);}if(!_0x1033be){_0xc1b476[a5_0x1228('0x16')](a5_0x1228('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x13671a[a5_0x1228('0x18')]('/forgot');}_0x1033be['passwordResetToken']=_0x2612db;_0x1033be['passwordResetExpires']=Date['now']()+0x36ee80;_0x1033be[a5_0x1228('0x2d')](_0x4b6e23=>{_0x14920d(_0x4b6e23,_0x2612db,_0x1033be);});});},function sendForgotPasswordEmail(_0x4be2d9,_0x40984f,_0x1c3fd4){const _0x34eb34=nodemailer_1[a5_0x1228('0x1a')][a5_0x1228('0x51')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x1228('0x53')]['SENDGRID_PASSWORD']}});const _0x319562={'to':_0x40984f['email'],'from':a5_0x1228('0x5f'),'subject':a5_0x1228('0x60'),'text':a5_0x1228('0x61')+_0xc1b476['headers'][a5_0x1228('0x62')]+'/reset/'+_0x4be2d9+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x34eb34[a5_0x1228('0x63')](_0x319562,_0x203403=>{_0xc1b476[a5_0x1228('0x16')]('info',{'msg':a5_0x1228('0x64')+_0x40984f['email']+'\x20with\x20further\x20instructions.'});_0x1c3fd4(_0x203403);});}],_0x69f158=>{if(_0x69f158){return _0xa618e1(_0x69f158);}_0x13671a[a5_0x1228('0x18')](a5_0x1228('0x5c'));});};