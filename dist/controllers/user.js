var a5_0x3632=['info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','confirm','Passwords\x20must\x20match.','waterfall','exec','back','passwordResetToken','passwordResetExpires','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','getForgot','isAuthenticated','Forgot\x20Password','postForgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','../models/User','getLogin','user','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','errors','/login','default','local','message','redirect','logIn','success','session','returnTo','logout','getSignup','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','validationErrors','findOne','/signup','save','getAccount','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','password','len','Password\x20has\x20been\x20changed.','postDeleteAccount'];(function(_0x39afef,_0x357509){var _0x16ffed=function(_0x4f3af3){while(--_0x4f3af3){_0x39afef['push'](_0x39afef['shift']());}};_0x16ffed(++_0x357509);}(a5_0x3632,0x108));var a5_0x161b=function(_0x4d7f7e,_0xf9c83d){_0x4d7f7e=_0x4d7f7e-0x0;var _0x117d84=a5_0x3632[_0x4d7f7e];return _0x117d84;};'use strict';var __importDefault=this&&this[a5_0x161b('0x0')]||function(_0x5953b5){return _0x5953b5&&_0x5953b5[a5_0x161b('0x1')]?_0x5953b5:{'default':_0x5953b5};};Object[a5_0x161b('0x2')](exports,a5_0x161b('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x161b('0x3')));const crypto_1=__importDefault(require(a5_0x161b('0x4')));const nodemailer_1=__importDefault(require(a5_0x161b('0x5')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x161b('0x6')));const request=require('express-validator');exports[a5_0x161b('0x7')]=(_0x3de47d,_0x838ea5)=>{if(_0x3de47d[a5_0x161b('0x8')]){return _0x838ea5['redirect']('/');}_0x838ea5[a5_0x161b('0x9')]('account/login',{'title':a5_0x161b('0xa')});};exports[a5_0x161b('0xb')]=(_0x53e6ce,_0x432acf,_0x508d53)=>{_0x53e6ce[a5_0x161b('0xc')](a5_0x161b('0xd'),a5_0x161b('0xe'))[a5_0x161b('0xf')]();_0x53e6ce[a5_0x161b('0xc')]('password',a5_0x161b('0x10'))[a5_0x161b('0x11')]();_0x53e6ce[a5_0x161b('0x12')](a5_0x161b('0xd'))[a5_0x161b('0x13')]({'gmail_remove_dots':![]});const _0x53d5e8=_0x53e6ce['validationErrors']();if(_0x53d5e8){_0x53e6ce[a5_0x161b('0x14')](a5_0x161b('0x15'),_0x53d5e8);return _0x432acf['redirect'](a5_0x161b('0x16'));}passport_1[a5_0x161b('0x17')]['authenticate'](a5_0x161b('0x18'),(_0x15919b,_0x3a4b28,_0x315ed9)=>{if(_0x15919b){return _0x508d53(_0x15919b);}if(!_0x3a4b28){_0x53e6ce[a5_0x161b('0x14')](a5_0x161b('0x15'),_0x315ed9[a5_0x161b('0x19')]);return _0x432acf[a5_0x161b('0x1a')](a5_0x161b('0x16'));}_0x53e6ce[a5_0x161b('0x1b')](_0x3a4b28,_0x15919b=>{if(_0x15919b){return _0x508d53(_0x15919b);}_0x53e6ce['flash'](a5_0x161b('0x1c'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x432acf['redirect'](_0x53e6ce[a5_0x161b('0x1d')][a5_0x161b('0x1e')]||'/');});})(_0x53e6ce,_0x432acf,_0x508d53);};exports[a5_0x161b('0x1f')]=(_0x40b075,_0x39b0fe)=>{_0x40b075['logout']();_0x39b0fe['redirect']('/');};exports[a5_0x161b('0x20')]=(_0x460b6,_0x1f2a6e)=>{if(_0x460b6[a5_0x161b('0x8')]){return _0x1f2a6e[a5_0x161b('0x1a')]('/');}_0x1f2a6e[a5_0x161b('0x9')]('account/signup',{'title':a5_0x161b('0x21')});};exports['postSignup']=(_0x9c2404,_0x475801,_0x2d02d0)=>{_0x9c2404[a5_0x161b('0xc')]('email',a5_0x161b('0xe'))[a5_0x161b('0xf')]();_0x9c2404[a5_0x161b('0xc')]('password',a5_0x161b('0x22'))['len']({'min':0x4});_0x9c2404[a5_0x161b('0xc')](a5_0x161b('0x23'),a5_0x161b('0x24'))[a5_0x161b('0x25')](_0x9c2404[a5_0x161b('0x26')]['password']);_0x9c2404[a5_0x161b('0x12')]('email')[a5_0x161b('0x13')]({'gmail_remove_dots':![]});const _0x18b9dc=_0x9c2404[a5_0x161b('0x27')]();if(_0x18b9dc){_0x9c2404[a5_0x161b('0x14')](a5_0x161b('0x15'),_0x18b9dc);return _0x475801[a5_0x161b('0x1a')]('/signup');}const _0x382f76=new User_1[(a5_0x161b('0x17'))]({});User_1[a5_0x161b('0x17')][a5_0x161b('0x28')]({'email':_0x9c2404[a5_0x161b('0x26')][a5_0x161b('0xd')]},(_0x47f6f5,_0x149403)=>{if(_0x47f6f5){return _0x2d02d0(_0x47f6f5);}if(_0x149403){_0x9c2404[a5_0x161b('0x14')](a5_0x161b('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x475801['redirect'](a5_0x161b('0x29'));}_0x382f76[a5_0x161b('0x2a')](_0x47f6f5=>{if(_0x47f6f5){return _0x2d02d0(_0x47f6f5);}_0x9c2404[a5_0x161b('0x1b')](_0x382f76,_0x47f6f5=>{if(_0x47f6f5){return _0x2d02d0(_0x47f6f5);}_0x475801[a5_0x161b('0x1a')]('/');});});});};exports[a5_0x161b('0x2b')]=(_0x4bc752,_0x45f7d6)=>{_0x45f7d6[a5_0x161b('0x9')]('account/profile',{'title':'Account\x20Management'});};exports[a5_0x161b('0x2c')]=(_0xab7a0d,_0x53f555,_0x31bdd3)=>{_0xab7a0d[a5_0x161b('0xc')](a5_0x161b('0xd'),a5_0x161b('0x2d'))[a5_0x161b('0xf')]();_0xab7a0d[a5_0x161b('0x12')]('email')[a5_0x161b('0x13')]({'gmail_remove_dots':![]});const _0x4524d9=_0xab7a0d[a5_0x161b('0x27')]();if(_0x4524d9){_0xab7a0d[a5_0x161b('0x14')](a5_0x161b('0x15'),_0x4524d9);return _0x53f555[a5_0x161b('0x1a')](a5_0x161b('0x2e'));}User_1[a5_0x161b('0x17')][a5_0x161b('0x2f')](_0xab7a0d[a5_0x161b('0x8')]['id'],(_0x215577,_0xfc1894)=>{if(_0x215577){return _0x31bdd3(_0x215577);}_0xfc1894[a5_0x161b('0xd')]=_0xab7a0d[a5_0x161b('0x26')]['email']||'';_0xfc1894[a5_0x161b('0x30')][a5_0x161b('0x31')]=_0xab7a0d['body'][a5_0x161b('0x31')]||'';_0xfc1894[a5_0x161b('0x30')][a5_0x161b('0x32')]=_0xab7a0d[a5_0x161b('0x26')][a5_0x161b('0x32')]||'';_0xfc1894[a5_0x161b('0x30')]['location']=_0xab7a0d[a5_0x161b('0x26')][a5_0x161b('0x33')]||'';_0xfc1894[a5_0x161b('0x30')][a5_0x161b('0x34')]=_0xab7a0d[a5_0x161b('0x26')]['website']||'';_0xfc1894['save'](_0x215577=>{if(_0x215577){if(_0x215577[a5_0x161b('0x35')]===0x2af8){_0xab7a0d[a5_0x161b('0x14')](a5_0x161b('0x15'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x53f555['redirect'](a5_0x161b('0x2e'));}return _0x31bdd3(_0x215577);}_0xab7a0d['flash'](a5_0x161b('0x1c'),{'msg':a5_0x161b('0x36')});_0x53f555[a5_0x161b('0x1a')](a5_0x161b('0x2e'));});});};exports[a5_0x161b('0x37')]=(_0x1f48ba,_0x43115e,_0x3615c3)=>{_0x1f48ba[a5_0x161b('0xc')](a5_0x161b('0x38'),a5_0x161b('0x22'))[a5_0x161b('0x39')]({'min':0x4});_0x1f48ba[a5_0x161b('0xc')](a5_0x161b('0x23'),a5_0x161b('0x24'))[a5_0x161b('0x25')](_0x1f48ba[a5_0x161b('0x26')][a5_0x161b('0x38')]);const _0x5d533c=_0x1f48ba[a5_0x161b('0x27')]();if(_0x5d533c){_0x1f48ba[a5_0x161b('0x14')](a5_0x161b('0x15'),_0x5d533c);return _0x43115e[a5_0x161b('0x1a')](a5_0x161b('0x2e'));}User_1[a5_0x161b('0x17')][a5_0x161b('0x2f')](_0x1f48ba[a5_0x161b('0x8')]['id'],(_0x2a1a1d,_0x4d72f)=>{if(_0x2a1a1d){return _0x3615c3(_0x2a1a1d);}_0x4d72f[a5_0x161b('0x38')]=_0x1f48ba[a5_0x161b('0x26')]['password'];_0x4d72f[a5_0x161b('0x2a')](_0x2a1a1d=>{if(_0x2a1a1d){return _0x3615c3(_0x2a1a1d);}_0x1f48ba['flash'](a5_0x161b('0x1c'),{'msg':a5_0x161b('0x3a')});_0x43115e[a5_0x161b('0x1a')]('/account');});});};exports[a5_0x161b('0x3b')]=(_0x6e41bd,_0x1ad644,_0xc68f8f)=>{User_1[a5_0x161b('0x17')]['remove']({'_id':_0x6e41bd[a5_0x161b('0x8')]['id']},_0x3619b9=>{if(_0x3619b9){return _0xc68f8f(_0x3619b9);}_0x6e41bd[a5_0x161b('0x1f')]();_0x6e41bd[a5_0x161b('0x14')](a5_0x161b('0x3c'),{'msg':a5_0x161b('0x3d')});_0x1ad644['redirect']('/');});};exports[a5_0x161b('0x3e')]=(_0xaeb8b6,_0x2bed44,_0x3f5835)=>{const _0x258dad=_0xaeb8b6[a5_0x161b('0x3f')][a5_0x161b('0x40')];User_1[a5_0x161b('0x17')][a5_0x161b('0x2f')](_0xaeb8b6[a5_0x161b('0x8')]['id'],(_0x23f6a5,_0x50a858)=>{if(_0x23f6a5){return _0x3f5835(_0x23f6a5);}_0x50a858[_0x258dad]=undefined;_0x50a858[a5_0x161b('0x41')]=_0x50a858[a5_0x161b('0x41')][a5_0x161b('0x42')](_0x2dd416=>_0x2dd416[a5_0x161b('0x43')]!==_0x258dad);_0x50a858[a5_0x161b('0x2a')](_0x23f6a5=>{if(_0x23f6a5){return _0x3f5835(_0x23f6a5);}_0xaeb8b6[a5_0x161b('0x14')](a5_0x161b('0x3c'),{'msg':_0x258dad+a5_0x161b('0x44')});_0x2bed44[a5_0x161b('0x1a')]('/account');});});};exports[a5_0x161b('0x45')]=(_0x1c13da,_0x4c63ad,_0x4aff33)=>{if(_0x1c13da['isAuthenticated']()){return _0x4c63ad[a5_0x161b('0x1a')]('/');}User_1['default'][a5_0x161b('0x28')]({'passwordResetToken':_0x1c13da[a5_0x161b('0x3f')][a5_0x161b('0x46')]})[a5_0x161b('0x47')]('passwordResetExpires')['gt'](Date[a5_0x161b('0x48')]())['exec']((_0x57fea1,_0x5c5d9d)=>{if(_0x57fea1){return _0x4aff33(_0x57fea1);}if(!_0x5c5d9d){_0x1c13da['flash'](a5_0x161b('0x15'),{'msg':a5_0x161b('0x49')});return _0x4c63ad[a5_0x161b('0x1a')](a5_0x161b('0x4a'));}_0x4c63ad[a5_0x161b('0x9')](a5_0x161b('0x4b'),{'title':a5_0x161b('0x4c')});});};exports[a5_0x161b('0x4d')]=(_0x4cc013,_0x48a78c,_0x2d13fd)=>{_0x4cc013[a5_0x161b('0xc')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x161b('0x39')]({'min':0x4});_0x4cc013[a5_0x161b('0xc')](a5_0x161b('0x4e'),a5_0x161b('0x4f'))['equals'](_0x4cc013[a5_0x161b('0x26')][a5_0x161b('0x38')]);const _0x19d3e0=_0x4cc013[a5_0x161b('0x27')]();if(_0x19d3e0){_0x4cc013['flash'](a5_0x161b('0x15'),_0x19d3e0);return _0x48a78c[a5_0x161b('0x1a')]('back');}async_1[a5_0x161b('0x17')][a5_0x161b('0x50')]([function resetPassword(_0x44bc2a){User_1[a5_0x161b('0x17')][a5_0x161b('0x28')]({'passwordResetToken':_0x4cc013[a5_0x161b('0x3f')][a5_0x161b('0x46')]})[a5_0x161b('0x47')]('passwordResetExpires')['gt'](Date[a5_0x161b('0x48')]())[a5_0x161b('0x51')]((_0x315883,_0x15b83e)=>{if(_0x315883){return _0x2d13fd(_0x315883);}if(!_0x15b83e){_0x4cc013[a5_0x161b('0x14')](a5_0x161b('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x48a78c['redirect'](a5_0x161b('0x52'));}_0x15b83e[a5_0x161b('0x38')]=_0x4cc013['body'][a5_0x161b('0x38')];_0x15b83e[a5_0x161b('0x53')]=undefined;_0x15b83e[a5_0x161b('0x54')]=undefined;_0x15b83e[a5_0x161b('0x2a')](_0x315883=>{if(_0x315883){return _0x2d13fd(_0x315883);}_0x4cc013['logIn'](_0x15b83e,_0x315883=>{_0x44bc2a(_0x315883,_0x15b83e);});});});},function sendResetPasswordEmail(_0xcc2012,_0x18f764){const _0x26a7d9=nodemailer_1[a5_0x161b('0x17')][a5_0x161b('0x55')]({'service':a5_0x161b('0x56'),'auth':{'user':process[a5_0x161b('0x57')][a5_0x161b('0x58')],'pass':process[a5_0x161b('0x57')][a5_0x161b('0x59')]}});const _0x3ed651={'to':_0xcc2012[a5_0x161b('0xd')],'from':a5_0x161b('0x5a'),'subject':a5_0x161b('0x5b'),'text':a5_0x161b('0x5c')+_0xcc2012[a5_0x161b('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x26a7d9[a5_0x161b('0x5d')](_0x3ed651,_0x3f6f14=>{_0x4cc013[a5_0x161b('0x14')](a5_0x161b('0x1c'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x18f764(_0x3f6f14);});}],_0x4a555c=>{if(_0x4a555c){return _0x2d13fd(_0x4a555c);}_0x48a78c[a5_0x161b('0x1a')]('/');});};exports[a5_0x161b('0x5e')]=(_0x4317f0,_0x1e5647)=>{if(_0x4317f0[a5_0x161b('0x5f')]()){return _0x1e5647['redirect']('/');}_0x1e5647[a5_0x161b('0x9')]('account/forgot',{'title':a5_0x161b('0x60')});};exports[a5_0x161b('0x61')]=(_0xded048,_0x4cc507,_0x2df588)=>{_0xded048[a5_0x161b('0xc')]('email',a5_0x161b('0x2d'))[a5_0x161b('0xf')]();_0xded048[a5_0x161b('0x12')](a5_0x161b('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1fd31f=_0xded048[a5_0x161b('0x27')]();if(_0x1fd31f){_0xded048[a5_0x161b('0x14')](a5_0x161b('0x15'),_0x1fd31f);return _0x4cc507[a5_0x161b('0x1a')]('/forgot');}async_1['default'][a5_0x161b('0x50')]([function createRandomToken(_0x4a85df){crypto_1[a5_0x161b('0x17')][a5_0x161b('0x62')](0x10,(_0x2eda14,_0x1876ae)=>{const _0x3f711c=_0x1876ae[a5_0x161b('0x63')]('hex');_0x4a85df(_0x2eda14,_0x3f711c);});},function setRandomToken(_0x1fa32f,_0x596c6e){User_1[a5_0x161b('0x17')]['findOne']({'email':_0xded048['body']['email']},(_0xcffaa5,_0x52583c)=>{if(_0xcffaa5){return _0x596c6e(_0xcffaa5);}if(!_0x52583c){_0xded048['flash'](a5_0x161b('0x15'),{'msg':a5_0x161b('0x64')});return _0x4cc507['redirect'](a5_0x161b('0x4a'));}_0x52583c['passwordResetToken']=_0x1fa32f;_0x52583c['passwordResetExpires']=Date[a5_0x161b('0x48')]()+0x36ee80;_0x52583c[a5_0x161b('0x2a')](_0xcffaa5=>{_0x596c6e(_0xcffaa5,_0x1fa32f,_0x52583c);});});},function sendForgotPasswordEmail(_0x111afd,_0x420d1f,_0x19f4d0){const _0x107f83=nodemailer_1[a5_0x161b('0x17')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0x161b('0x57')]['SENDGRID_USER'],'pass':process[a5_0x161b('0x57')][a5_0x161b('0x59')]}});const _0x6ab3f3={'to':_0x420d1f['email'],'from':a5_0x161b('0x65'),'subject':a5_0x161b('0x66'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0xded048[a5_0x161b('0x67')][a5_0x161b('0x68')]+a5_0x161b('0x69')+_0x111afd+a5_0x161b('0x6a')};_0x107f83[a5_0x161b('0x5d')](_0x6ab3f3,_0x5e7d6a=>{_0xded048[a5_0x161b('0x14')](a5_0x161b('0x3c'),{'msg':a5_0x161b('0x6b')+_0x420d1f[a5_0x161b('0xd')]+'\x20with\x20further\x20instructions.'});_0x19f4d0(_0x5e7d6a);});}],_0x19a7a3=>{if(_0x19a7a3){return _0x2df588(_0x19a7a3);}_0x4cc507[a5_0x161b('0x1a')]('/forgot');});};