var a5_0x33b2=['headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','nodemailer','passport','../models/User','express-validator','getLogin','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','sanitize','normalizeEmail','errors','/login','default','authenticate','local','message','logIn','flash','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','user','account/signup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','validationErrors','findOne','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','confirmPassword','equals','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','back','waterfall','passwordResetToken','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','SENDGRID_USER','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter'];(function(_0x301203,_0x334a78){var _0x24bb66=function(_0xb42b51){while(--_0xb42b51){_0x301203['push'](_0x301203['shift']());}};_0x24bb66(++_0x334a78);}(a5_0x33b2,0x1be));var a5_0x426d=function(_0x42de2d,_0x14a9ba){_0x42de2d=_0x42de2d-0x0;var _0x21edee=a5_0x33b2[_0x42de2d];return _0x21edee;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x23247e){return _0x23247e&&_0x23247e[a5_0x426d('0x0')]?_0x23247e:{'default':_0x23247e};};Object[a5_0x426d('0x1')](exports,a5_0x426d('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x426d('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x426d('0x3')));const passport_1=__importDefault(require(a5_0x426d('0x4')));const User_1=__importDefault(require(a5_0x426d('0x5')));const request=require(a5_0x426d('0x6'));exports[a5_0x426d('0x7')]=(_0x22adb8,_0x31f596)=>{if(_0x22adb8['user']){return _0x31f596[a5_0x426d('0x8')]('/');}_0x31f596[a5_0x426d('0x9')](a5_0x426d('0xa'),{'title':a5_0x426d('0xb')});};exports[a5_0x426d('0xc')]=(_0x3c89b2,_0x3e2239,_0x1f5b4e)=>{_0x3c89b2[a5_0x426d('0xd')](a5_0x426d('0xe'),a5_0x426d('0xf'))['isEmail']();_0x3c89b2[a5_0x426d('0xd')](a5_0x426d('0x10'),'Password\x20cannot\x20be\x20blank')['notEmpty']();_0x3c89b2[a5_0x426d('0x11')](a5_0x426d('0xe'))[a5_0x426d('0x12')]({'gmail_remove_dots':![]});const _0x559024=_0x3c89b2['validationErrors']();if(_0x559024){_0x3c89b2['flash'](a5_0x426d('0x13'),_0x559024);return _0x3e2239[a5_0x426d('0x8')](a5_0x426d('0x14'));}passport_1[a5_0x426d('0x15')][a5_0x426d('0x16')](a5_0x426d('0x17'),(_0x354ae4,_0x24cf65,_0xe7d200)=>{if(_0x354ae4){return _0x1f5b4e(_0x354ae4);}if(!_0x24cf65){_0x3c89b2['flash'](a5_0x426d('0x13'),_0xe7d200[a5_0x426d('0x18')]);return _0x3e2239['redirect']('/login');}_0x3c89b2[a5_0x426d('0x19')](_0x24cf65,_0x354ae4=>{if(_0x354ae4){return _0x1f5b4e(_0x354ae4);}_0x3c89b2[a5_0x426d('0x1a')](a5_0x426d('0x1b'),{'msg':a5_0x426d('0x1c')});_0x3e2239[a5_0x426d('0x8')](_0x3c89b2[a5_0x426d('0x1d')][a5_0x426d('0x1e')]||'/');});})(_0x3c89b2,_0x3e2239,_0x1f5b4e);};exports['logout']=(_0xc9b3f8,_0x1ebc33)=>{_0xc9b3f8[a5_0x426d('0x1f')]();_0x1ebc33['redirect']('/');};exports['getSignup']=(_0xc0751f,_0x4d988f)=>{if(_0xc0751f[a5_0x426d('0x20')]){return _0x4d988f[a5_0x426d('0x8')]('/');}_0x4d988f['render'](a5_0x426d('0x21'),{'title':'Create\x20Account'});};exports['postSignup']=(_0xbdded1,_0xe6cfcc,_0x3acb5a)=>{_0xbdded1[a5_0x426d('0xd')](a5_0x426d('0xe'),a5_0x426d('0xf'))[a5_0x426d('0x22')]();_0xbdded1[a5_0x426d('0xd')](a5_0x426d('0x10'),a5_0x426d('0x23'))['len']({'min':0x4});_0xbdded1['assert']('confirmPassword',a5_0x426d('0x24'))['equals'](_0xbdded1['body']['password']);_0xbdded1[a5_0x426d('0x11')](a5_0x426d('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1c9dc7=_0xbdded1[a5_0x426d('0x25')]();if(_0x1c9dc7){_0xbdded1[a5_0x426d('0x1a')](a5_0x426d('0x13'),_0x1c9dc7);return _0xe6cfcc['redirect']('/signup');}const _0x556a8=new User_1['default']({});User_1[a5_0x426d('0x15')][a5_0x426d('0x26')]({'email':_0xbdded1[a5_0x426d('0x27')][a5_0x426d('0xe')]},(_0x54de66,_0x298dd4)=>{if(_0x54de66){return _0x3acb5a(_0x54de66);}if(_0x298dd4){_0xbdded1['flash']('errors',{'msg':a5_0x426d('0x28')});return _0xe6cfcc[a5_0x426d('0x8')]('/signup');}_0x556a8[a5_0x426d('0x29')](_0x54de66=>{if(_0x54de66){return _0x3acb5a(_0x54de66);}_0xbdded1['logIn'](_0x556a8,_0x54de66=>{if(_0x54de66){return _0x3acb5a(_0x54de66);}_0xe6cfcc[a5_0x426d('0x8')]('/');});});});};exports[a5_0x426d('0x2a')]=(_0x208848,_0x381a9d)=>{_0x381a9d[a5_0x426d('0x9')](a5_0x426d('0x2b'),{'title':a5_0x426d('0x2c')});};exports[a5_0x426d('0x2d')]=(_0x3ac7b0,_0x3c6601,_0x5782ce)=>{_0x3ac7b0[a5_0x426d('0xd')](a5_0x426d('0xe'),a5_0x426d('0x2e'))[a5_0x426d('0x22')]();_0x3ac7b0[a5_0x426d('0x11')](a5_0x426d('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x45163e=_0x3ac7b0[a5_0x426d('0x25')]();if(_0x45163e){_0x3ac7b0['flash']('errors',_0x45163e);return _0x3c6601[a5_0x426d('0x8')](a5_0x426d('0x2f'));}User_1['default'][a5_0x426d('0x30')](_0x3ac7b0[a5_0x426d('0x20')]['id'],(_0x1acf15,_0x1076e6)=>{if(_0x1acf15){return _0x5782ce(_0x1acf15);}_0x1076e6[a5_0x426d('0xe')]=_0x3ac7b0[a5_0x426d('0x27')][a5_0x426d('0xe')]||'';_0x1076e6[a5_0x426d('0x31')][a5_0x426d('0x32')]=_0x3ac7b0[a5_0x426d('0x27')][a5_0x426d('0x32')]||'';_0x1076e6[a5_0x426d('0x31')][a5_0x426d('0x33')]=_0x3ac7b0[a5_0x426d('0x27')][a5_0x426d('0x33')]||'';_0x1076e6['profile'][a5_0x426d('0x34')]=_0x3ac7b0['body']['location']||'';_0x1076e6['profile'][a5_0x426d('0x35')]=_0x3ac7b0['body'][a5_0x426d('0x35')]||'';_0x1076e6['save'](_0x1acf15=>{if(_0x1acf15){if(_0x1acf15[a5_0x426d('0x36')]===0x2af8){_0x3ac7b0[a5_0x426d('0x1a')](a5_0x426d('0x13'),{'msg':a5_0x426d('0x37')});return _0x3c6601[a5_0x426d('0x8')](a5_0x426d('0x2f'));}return _0x5782ce(_0x1acf15);}_0x3ac7b0[a5_0x426d('0x1a')](a5_0x426d('0x1b'),{'msg':a5_0x426d('0x38')});_0x3c6601[a5_0x426d('0x8')](a5_0x426d('0x2f'));});});};exports[a5_0x426d('0x39')]=(_0x1cad8c,_0x330af1,_0x3b6a8b)=>{_0x1cad8c[a5_0x426d('0xd')](a5_0x426d('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x426d('0x3a')]({'min':0x4});_0x1cad8c['assert'](a5_0x426d('0x3b'),a5_0x426d('0x24'))[a5_0x426d('0x3c')](_0x1cad8c[a5_0x426d('0x27')][a5_0x426d('0x10')]);const _0x5bdaf3=_0x1cad8c['validationErrors']();if(_0x5bdaf3){_0x1cad8c[a5_0x426d('0x1a')]('errors',_0x5bdaf3);return _0x330af1[a5_0x426d('0x8')](a5_0x426d('0x2f'));}User_1[a5_0x426d('0x15')]['findById'](_0x1cad8c[a5_0x426d('0x20')]['id'],(_0x1db014,_0x256e7a)=>{if(_0x1db014){return _0x3b6a8b(_0x1db014);}_0x256e7a[a5_0x426d('0x10')]=_0x1cad8c[a5_0x426d('0x27')][a5_0x426d('0x10')];_0x256e7a[a5_0x426d('0x29')](_0x1db014=>{if(_0x1db014){return _0x3b6a8b(_0x1db014);}_0x1cad8c[a5_0x426d('0x1a')]('success',{'msg':'Password\x20has\x20been\x20changed.'});_0x330af1[a5_0x426d('0x8')](a5_0x426d('0x2f'));});});};exports[a5_0x426d('0x3d')]=(_0x36d9d6,_0x36e1e7,_0x183476)=>{User_1['default'][a5_0x426d('0x3e')]({'_id':_0x36d9d6[a5_0x426d('0x20')]['id']},_0x13f840=>{if(_0x13f840){return _0x183476(_0x13f840);}_0x36d9d6['logout']();_0x36d9d6[a5_0x426d('0x1a')](a5_0x426d('0x3f'),{'msg':a5_0x426d('0x40')});_0x36e1e7['redirect']('/');});};exports[a5_0x426d('0x41')]=(_0x57b0a5,_0x85963c,_0x203503)=>{const _0x5934a0=_0x57b0a5[a5_0x426d('0x42')][a5_0x426d('0x43')];User_1[a5_0x426d('0x15')][a5_0x426d('0x30')](_0x57b0a5[a5_0x426d('0x20')]['id'],(_0x352faa,_0x13787f)=>{if(_0x352faa){return _0x203503(_0x352faa);}_0x13787f[_0x5934a0]=undefined;_0x13787f[a5_0x426d('0x44')]=_0x13787f[a5_0x426d('0x44')][a5_0x426d('0x45')](_0x5bd5d0=>_0x5bd5d0[a5_0x426d('0x46')]!==_0x5934a0);_0x13787f[a5_0x426d('0x29')](_0x352faa=>{if(_0x352faa){return _0x203503(_0x352faa);}_0x57b0a5[a5_0x426d('0x1a')]('info',{'msg':_0x5934a0+a5_0x426d('0x47')});_0x85963c[a5_0x426d('0x8')](a5_0x426d('0x2f'));});});};exports[a5_0x426d('0x48')]=(_0x3f10a8,_0x217a45,_0x77cd67)=>{if(_0x3f10a8[a5_0x426d('0x49')]()){return _0x217a45['redirect']('/');}User_1['default'][a5_0x426d('0x26')]({'passwordResetToken':_0x3f10a8[a5_0x426d('0x42')][a5_0x426d('0x4a')]})[a5_0x426d('0x4b')](a5_0x426d('0x4c'))['gt'](Date[a5_0x426d('0x4d')]())[a5_0x426d('0x4e')]((_0x20362d,_0x3a80ea)=>{if(_0x20362d){return _0x77cd67(_0x20362d);}if(!_0x3a80ea){_0x3f10a8[a5_0x426d('0x1a')](a5_0x426d('0x13'),{'msg':a5_0x426d('0x4f')});return _0x217a45[a5_0x426d('0x8')](a5_0x426d('0x50'));}_0x217a45['render'](a5_0x426d('0x51'),{'title':a5_0x426d('0x52')});});};exports[a5_0x426d('0x53')]=(_0x379a09,_0x4984c5,_0x24b28e)=>{_0x379a09[a5_0x426d('0xd')]('password',a5_0x426d('0x54'))[a5_0x426d('0x3a')]({'min':0x4});_0x379a09[a5_0x426d('0xd')]('confirm','Passwords\x20must\x20match.')[a5_0x426d('0x3c')](_0x379a09['body'][a5_0x426d('0x10')]);const _0x3daf2c=_0x379a09[a5_0x426d('0x25')]();if(_0x3daf2c){_0x379a09[a5_0x426d('0x1a')](a5_0x426d('0x13'),_0x3daf2c);return _0x4984c5[a5_0x426d('0x8')](a5_0x426d('0x55'));}async_1[a5_0x426d('0x15')][a5_0x426d('0x56')]([function resetPassword(_0xe1c287){User_1[a5_0x426d('0x15')][a5_0x426d('0x26')]({'passwordResetToken':_0x379a09[a5_0x426d('0x42')][a5_0x426d('0x4a')]})['where'](a5_0x426d('0x4c'))['gt'](Date[a5_0x426d('0x4d')]())['exec']((_0x2af073,_0x48084f)=>{if(_0x2af073){return _0x24b28e(_0x2af073);}if(!_0x48084f){_0x379a09[a5_0x426d('0x1a')](a5_0x426d('0x13'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4984c5[a5_0x426d('0x8')](a5_0x426d('0x55'));}_0x48084f[a5_0x426d('0x10')]=_0x379a09[a5_0x426d('0x27')]['password'];_0x48084f[a5_0x426d('0x57')]=undefined;_0x48084f['passwordResetExpires']=undefined;_0x48084f[a5_0x426d('0x29')](_0x2af073=>{if(_0x2af073){return _0x24b28e(_0x2af073);}_0x379a09[a5_0x426d('0x19')](_0x48084f,_0x2af073=>{_0xe1c287(_0x2af073,_0x48084f);});});});},function sendResetPasswordEmail(_0x5a6d2d,_0x15b33c){const _0x5095d5=nodemailer_1['default']['createTransport']({'service':a5_0x426d('0x58'),'auth':{'user':process[a5_0x426d('0x59')]['SENDGRID_USER'],'pass':process[a5_0x426d('0x59')][a5_0x426d('0x5a')]}});const _0x43dc83={'to':_0x5a6d2d[a5_0x426d('0xe')],'from':a5_0x426d('0x5b'),'subject':a5_0x426d('0x5c'),'text':a5_0x426d('0x5d')+_0x5a6d2d[a5_0x426d('0xe')]+a5_0x426d('0x5e')};_0x5095d5['sendMail'](_0x43dc83,_0x480a97=>{_0x379a09[a5_0x426d('0x1a')](a5_0x426d('0x1b'),{'msg':a5_0x426d('0x5f')});_0x15b33c(_0x480a97);});}],_0x1ed792=>{if(_0x1ed792){return _0x24b28e(_0x1ed792);}_0x4984c5[a5_0x426d('0x8')]('/');});};exports[a5_0x426d('0x60')]=(_0x420bb8,_0xcdb2ff)=>{if(_0x420bb8[a5_0x426d('0x49')]()){return _0xcdb2ff[a5_0x426d('0x8')]('/');}_0xcdb2ff['render']('account/forgot',{'title':a5_0x426d('0x61')});};exports['postForgot']=(_0xccaa9,_0x4b11e9,_0x349217)=>{_0xccaa9[a5_0x426d('0xd')](a5_0x426d('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0xccaa9[a5_0x426d('0x11')](a5_0x426d('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x5d5d09=_0xccaa9[a5_0x426d('0x25')]();if(_0x5d5d09){_0xccaa9[a5_0x426d('0x1a')]('errors',_0x5d5d09);return _0x4b11e9[a5_0x426d('0x8')](a5_0x426d('0x50'));}async_1[a5_0x426d('0x15')][a5_0x426d('0x56')]([function createRandomToken(_0x4b4bf6){crypto_1[a5_0x426d('0x15')][a5_0x426d('0x62')](0x10,(_0x16b553,_0x2d9615)=>{const _0x377a5b=_0x2d9615['toString'](a5_0x426d('0x63'));_0x4b4bf6(_0x16b553,_0x377a5b);});},function setRandomToken(_0x1f2075,_0x5a5565){User_1['default'][a5_0x426d('0x26')]({'email':_0xccaa9[a5_0x426d('0x27')][a5_0x426d('0xe')]},(_0x7f5e17,_0x34ff8f)=>{if(_0x7f5e17){return _0x5a5565(_0x7f5e17);}if(!_0x34ff8f){_0xccaa9[a5_0x426d('0x1a')](a5_0x426d('0x13'),{'msg':a5_0x426d('0x64')});return _0x4b11e9['redirect'](a5_0x426d('0x50'));}_0x34ff8f[a5_0x426d('0x57')]=_0x1f2075;_0x34ff8f[a5_0x426d('0x4c')]=Date[a5_0x426d('0x4d')]()+0x36ee80;_0x34ff8f[a5_0x426d('0x29')](_0x7f5e17=>{_0x5a5565(_0x7f5e17,_0x1f2075,_0x34ff8f);});});},function sendForgotPasswordEmail(_0x5099ab,_0x897cf4,_0x5528ee){const _0x5cb364=nodemailer_1[a5_0x426d('0x15')][a5_0x426d('0x65')]({'service':a5_0x426d('0x58'),'auth':{'user':process[a5_0x426d('0x59')][a5_0x426d('0x66')],'pass':process[a5_0x426d('0x59')][a5_0x426d('0x5a')]}});const _0x2273bb={'to':_0x897cf4['email'],'from':'hackathon@starter.com','subject':a5_0x426d('0x67'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0xccaa9[a5_0x426d('0x68')][a5_0x426d('0x69')]+a5_0x426d('0x6a')+_0x5099ab+a5_0x426d('0x6b')};_0x5cb364['sendMail'](_0x2273bb,_0x10676a=>{_0xccaa9['flash']('info',{'msg':a5_0x426d('0x6c')+_0x897cf4['email']+a5_0x426d('0x6d')});_0x5528ee(_0x10676a);});}],_0x39dc46=>{if(_0x39dc46){return _0x349217(_0x39dc46);}_0x4b11e9[a5_0x426d('0x8')](a5_0x426d('0x50'));});};