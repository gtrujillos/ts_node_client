var a5_0x5f17=['Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_USER','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','user','redirect','render','account/login','Login','postLogin','assert','email','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','flash','errors','/login','default','local','message','logIn','success','logout','getSignup','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','validationErrors','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','info','isAuthenticated','token','where','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','now','passwordResetToken','createTransport','SendGrid','env','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail'];(function(_0x48a919,_0xe1a70e){var _0x19af70=function(_0x4af607){while(--_0x4af607){_0x48a919['push'](_0x48a919['shift']());}};_0x19af70(++_0xe1a70e);}(a5_0x5f17,0x150));var a5_0x1174=function(_0x3df54c,_0x3795b7){_0x3df54c=_0x3df54c-0x0;var _0x34d2d3=a5_0x5f17[_0x3df54c];return _0x34d2d3;};'use strict';var __importDefault=this&&this[a5_0x1174('0x0')]||function(_0x2da69c){return _0x2da69c&&_0x2da69c[a5_0x1174('0x1')]?_0x2da69c:{'default':_0x2da69c};};Object[a5_0x1174('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x1174('0x3')));const nodemailer_1=__importDefault(require(a5_0x1174('0x4')));const passport_1=__importDefault(require(a5_0x1174('0x5')));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports['getLogin']=(_0x4e2aa9,_0x5d4967)=>{if(_0x4e2aa9[a5_0x1174('0x6')]){return _0x5d4967[a5_0x1174('0x7')]('/');}_0x5d4967[a5_0x1174('0x8')](a5_0x1174('0x9'),{'title':a5_0x1174('0xa')});};exports[a5_0x1174('0xb')]=(_0x237a61,_0x48f8a1,_0x587055)=>{_0x237a61[a5_0x1174('0xc')](a5_0x1174('0xd'),'Email\x20is\x20not\x20valid')[a5_0x1174('0xe')]();_0x237a61[a5_0x1174('0xc')](a5_0x1174('0xf'),a5_0x1174('0x10'))['notEmpty']();_0x237a61[a5_0x1174('0x11')](a5_0x1174('0xd'))[a5_0x1174('0x12')]({'gmail_remove_dots':![]});const _0x20e71=_0x237a61['validationErrors']();if(_0x20e71){_0x237a61[a5_0x1174('0x13')](a5_0x1174('0x14'),_0x20e71);return _0x48f8a1[a5_0x1174('0x7')](a5_0x1174('0x15'));}passport_1[a5_0x1174('0x16')]['authenticate'](a5_0x1174('0x17'),(_0xb1c77b,_0x589c36,_0x1b2815)=>{if(_0xb1c77b){return _0x587055(_0xb1c77b);}if(!_0x589c36){_0x237a61[a5_0x1174('0x13')]('errors',_0x1b2815[a5_0x1174('0x18')]);return _0x48f8a1[a5_0x1174('0x7')](a5_0x1174('0x15'));}_0x237a61[a5_0x1174('0x19')](_0x589c36,_0xb1c77b=>{if(_0xb1c77b){return _0x587055(_0xb1c77b);}_0x237a61[a5_0x1174('0x13')](a5_0x1174('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x48f8a1[a5_0x1174('0x7')](_0x237a61['session']['returnTo']||'/');});})(_0x237a61,_0x48f8a1,_0x587055);};exports[a5_0x1174('0x1b')]=(_0x945338,_0x18757e)=>{_0x945338['logout']();_0x18757e[a5_0x1174('0x7')]('/');};exports[a5_0x1174('0x1c')]=(_0x5b5810,_0x59f71b)=>{if(_0x5b5810[a5_0x1174('0x6')]){return _0x59f71b[a5_0x1174('0x7')]('/');}_0x59f71b['render'](a5_0x1174('0x1d'),{'title':a5_0x1174('0x1e')});};exports[a5_0x1174('0x1f')]=(_0x681ac1,_0x103943,_0x3e6d67)=>{_0x681ac1[a5_0x1174('0xc')](a5_0x1174('0xd'),a5_0x1174('0x20'))[a5_0x1174('0xe')]();_0x681ac1['assert']('password',a5_0x1174('0x21'))[a5_0x1174('0x22')]({'min':0x4});_0x681ac1['assert'](a5_0x1174('0x23'),'Passwords\x20do\x20not\x20match')[a5_0x1174('0x24')](_0x681ac1[a5_0x1174('0x25')][a5_0x1174('0xf')]);_0x681ac1[a5_0x1174('0x11')]('email')[a5_0x1174('0x12')]({'gmail_remove_dots':![]});const _0x365318=_0x681ac1['validationErrors']();if(_0x365318){_0x681ac1[a5_0x1174('0x13')](a5_0x1174('0x14'),_0x365318);return _0x103943[a5_0x1174('0x7')](a5_0x1174('0x26'));}const _0x511a1c=new User_1[(a5_0x1174('0x16'))]({});User_1[a5_0x1174('0x16')][a5_0x1174('0x27')]({'email':_0x681ac1[a5_0x1174('0x25')][a5_0x1174('0xd')]},(_0x2a293d,_0x511963)=>{if(_0x2a293d){return _0x3e6d67(_0x2a293d);}if(_0x511963){_0x681ac1['flash']('errors',{'msg':a5_0x1174('0x28')});return _0x103943[a5_0x1174('0x7')]('/signup');}_0x511a1c[a5_0x1174('0x29')](_0x2a293d=>{if(_0x2a293d){return _0x3e6d67(_0x2a293d);}_0x681ac1[a5_0x1174('0x19')](_0x511a1c,_0x2a293d=>{if(_0x2a293d){return _0x3e6d67(_0x2a293d);}_0x103943[a5_0x1174('0x7')]('/');});});});};exports[a5_0x1174('0x2a')]=(_0x356f46,_0x292266)=>{_0x292266[a5_0x1174('0x8')](a5_0x1174('0x2b'),{'title':a5_0x1174('0x2c')});};exports[a5_0x1174('0x2d')]=(_0x5a5d9e,_0x11d520,_0x3b56a1)=>{_0x5a5d9e[a5_0x1174('0xc')](a5_0x1174('0xd'),a5_0x1174('0x2e'))[a5_0x1174('0xe')]();_0x5a5d9e[a5_0x1174('0x11')](a5_0x1174('0xd'))[a5_0x1174('0x12')]({'gmail_remove_dots':![]});const _0x1d9492=_0x5a5d9e[a5_0x1174('0x2f')]();if(_0x1d9492){_0x5a5d9e[a5_0x1174('0x13')](a5_0x1174('0x14'),_0x1d9492);return _0x11d520[a5_0x1174('0x7')](a5_0x1174('0x30'));}User_1[a5_0x1174('0x16')][a5_0x1174('0x31')](_0x5a5d9e['user']['id'],(_0x1b9958,_0x35c86f)=>{if(_0x1b9958){return _0x3b56a1(_0x1b9958);}_0x35c86f[a5_0x1174('0xd')]=_0x5a5d9e[a5_0x1174('0x25')]['email']||'';_0x35c86f[a5_0x1174('0x32')][a5_0x1174('0x33')]=_0x5a5d9e['body'][a5_0x1174('0x33')]||'';_0x35c86f[a5_0x1174('0x32')][a5_0x1174('0x34')]=_0x5a5d9e[a5_0x1174('0x25')][a5_0x1174('0x34')]||'';_0x35c86f[a5_0x1174('0x32')][a5_0x1174('0x35')]=_0x5a5d9e[a5_0x1174('0x25')][a5_0x1174('0x35')]||'';_0x35c86f['profile'][a5_0x1174('0x36')]=_0x5a5d9e[a5_0x1174('0x25')]['website']||'';_0x35c86f['save'](_0x1b9958=>{if(_0x1b9958){if(_0x1b9958[a5_0x1174('0x37')]===0x2af8){_0x5a5d9e[a5_0x1174('0x13')](a5_0x1174('0x14'),{'msg':a5_0x1174('0x38')});return _0x11d520[a5_0x1174('0x7')](a5_0x1174('0x30'));}return _0x3b56a1(_0x1b9958);}_0x5a5d9e['flash']('success',{'msg':a5_0x1174('0x39')});_0x11d520[a5_0x1174('0x7')](a5_0x1174('0x30'));});});};exports[a5_0x1174('0x3a')]=(_0x526436,_0x16400b,_0x4b9a81)=>{_0x526436[a5_0x1174('0xc')](a5_0x1174('0xf'),a5_0x1174('0x21'))[a5_0x1174('0x22')]({'min':0x4});_0x526436[a5_0x1174('0xc')](a5_0x1174('0x23'),a5_0x1174('0x3b'))[a5_0x1174('0x24')](_0x526436[a5_0x1174('0x25')]['password']);const _0x5d2fb3=_0x526436[a5_0x1174('0x2f')]();if(_0x5d2fb3){_0x526436[a5_0x1174('0x13')](a5_0x1174('0x14'),_0x5d2fb3);return _0x16400b[a5_0x1174('0x7')](a5_0x1174('0x30'));}User_1[a5_0x1174('0x16')][a5_0x1174('0x31')](_0x526436[a5_0x1174('0x6')]['id'],(_0x29ffdc,_0x56a53e)=>{if(_0x29ffdc){return _0x4b9a81(_0x29ffdc);}_0x56a53e[a5_0x1174('0xf')]=_0x526436[a5_0x1174('0x25')][a5_0x1174('0xf')];_0x56a53e['save'](_0x29ffdc=>{if(_0x29ffdc){return _0x4b9a81(_0x29ffdc);}_0x526436[a5_0x1174('0x13')](a5_0x1174('0x1a'),{'msg':a5_0x1174('0x3c')});_0x16400b[a5_0x1174('0x7')](a5_0x1174('0x30'));});});};exports[a5_0x1174('0x3d')]=(_0x33fb97,_0x1ac922,_0x28c68a)=>{User_1[a5_0x1174('0x16')]['remove']({'_id':_0x33fb97[a5_0x1174('0x6')]['id']},_0x568c0c=>{if(_0x568c0c){return _0x28c68a(_0x568c0c);}_0x33fb97[a5_0x1174('0x1b')]();_0x33fb97[a5_0x1174('0x13')]('info',{'msg':a5_0x1174('0x3e')});_0x1ac922[a5_0x1174('0x7')]('/');});};exports[a5_0x1174('0x3f')]=(_0x53e92a,_0x41fb8f,_0x4a5463)=>{const _0x176b50=_0x53e92a[a5_0x1174('0x40')][a5_0x1174('0x41')];User_1[a5_0x1174('0x16')][a5_0x1174('0x31')](_0x53e92a[a5_0x1174('0x6')]['id'],(_0x2dd72c,_0x3d6034)=>{if(_0x2dd72c){return _0x4a5463(_0x2dd72c);}_0x3d6034[_0x176b50]=undefined;_0x3d6034[a5_0x1174('0x42')]=_0x3d6034[a5_0x1174('0x42')][a5_0x1174('0x43')](_0x49dbb7=>_0x49dbb7[a5_0x1174('0x44')]!==_0x176b50);_0x3d6034['save'](_0x2dd72c=>{if(_0x2dd72c){return _0x4a5463(_0x2dd72c);}_0x53e92a[a5_0x1174('0x13')](a5_0x1174('0x45'),{'msg':_0x176b50+'\x20account\x20has\x20been\x20unlinked.'});_0x41fb8f[a5_0x1174('0x7')](a5_0x1174('0x30'));});});};exports['getReset']=(_0x200da6,_0x7f0100,_0x17f038)=>{if(_0x200da6[a5_0x1174('0x46')]()){return _0x7f0100[a5_0x1174('0x7')]('/');}User_1[a5_0x1174('0x16')][a5_0x1174('0x27')]({'passwordResetToken':_0x200da6[a5_0x1174('0x40')][a5_0x1174('0x47')]})[a5_0x1174('0x48')](a5_0x1174('0x49'))['gt'](Date['now']())['exec']((_0x50fbb6,_0x434c28)=>{if(_0x50fbb6){return _0x17f038(_0x50fbb6);}if(!_0x434c28){_0x200da6[a5_0x1174('0x13')]('errors',{'msg':a5_0x1174('0x4a')});return _0x7f0100[a5_0x1174('0x7')](a5_0x1174('0x4b'));}_0x7f0100[a5_0x1174('0x8')]('account/reset',{'title':a5_0x1174('0x4c')});});};exports[a5_0x1174('0x4d')]=(_0x48d0a0,_0x2f46b5,_0x151a19)=>{_0x48d0a0[a5_0x1174('0xc')](a5_0x1174('0xf'),a5_0x1174('0x4e'))[a5_0x1174('0x22')]({'min':0x4});_0x48d0a0[a5_0x1174('0xc')](a5_0x1174('0x4f'),a5_0x1174('0x50'))[a5_0x1174('0x24')](_0x48d0a0[a5_0x1174('0x25')][a5_0x1174('0xf')]);const _0x42b1d9=_0x48d0a0['validationErrors']();if(_0x42b1d9){_0x48d0a0['flash'](a5_0x1174('0x14'),_0x42b1d9);return _0x2f46b5[a5_0x1174('0x7')](a5_0x1174('0x51'));}async_1['default']['waterfall']([function resetPassword(_0x5f00ce){User_1[a5_0x1174('0x16')]['findOne']({'passwordResetToken':_0x48d0a0[a5_0x1174('0x40')][a5_0x1174('0x47')]})[a5_0x1174('0x48')](a5_0x1174('0x49'))['gt'](Date[a5_0x1174('0x52')]())['exec']((_0x23d7cb,_0x4fffb5)=>{if(_0x23d7cb){return _0x151a19(_0x23d7cb);}if(!_0x4fffb5){_0x48d0a0[a5_0x1174('0x13')]('errors',{'msg':a5_0x1174('0x4a')});return _0x2f46b5[a5_0x1174('0x7')](a5_0x1174('0x51'));}_0x4fffb5[a5_0x1174('0xf')]=_0x48d0a0[a5_0x1174('0x25')][a5_0x1174('0xf')];_0x4fffb5[a5_0x1174('0x53')]=undefined;_0x4fffb5[a5_0x1174('0x49')]=undefined;_0x4fffb5[a5_0x1174('0x29')](_0x23d7cb=>{if(_0x23d7cb){return _0x151a19(_0x23d7cb);}_0x48d0a0[a5_0x1174('0x19')](_0x4fffb5,_0x23d7cb=>{_0x5f00ce(_0x23d7cb,_0x4fffb5);});});});},function sendResetPasswordEmail(_0x5bcdf6,_0x4ef6c9){const _0x320895=nodemailer_1[a5_0x1174('0x16')][a5_0x1174('0x54')]({'service':a5_0x1174('0x55'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x1174('0x56')]['SENDGRID_PASSWORD']}});const _0x530509={'to':_0x5bcdf6[a5_0x1174('0xd')],'from':a5_0x1174('0x57'),'subject':a5_0x1174('0x58'),'text':a5_0x1174('0x59')+_0x5bcdf6[a5_0x1174('0xd')]+a5_0x1174('0x5a')};_0x320895[a5_0x1174('0x5b')](_0x530509,_0x13043b=>{_0x48d0a0[a5_0x1174('0x13')](a5_0x1174('0x1a'),{'msg':a5_0x1174('0x5c')});_0x4ef6c9(_0x13043b);});}],_0x2c335f=>{if(_0x2c335f){return _0x151a19(_0x2c335f);}_0x2f46b5['redirect']('/');});};exports[a5_0x1174('0x5d')]=(_0x5564ad,_0x80afe9)=>{if(_0x5564ad[a5_0x1174('0x46')]()){return _0x80afe9[a5_0x1174('0x7')]('/');}_0x80afe9[a5_0x1174('0x8')](a5_0x1174('0x5e'),{'title':a5_0x1174('0x5f')});};exports[a5_0x1174('0x60')]=(_0x234ec7,_0x57175a,_0x1d9d8a)=>{_0x234ec7['assert']('email',a5_0x1174('0x2e'))[a5_0x1174('0xe')]();_0x234ec7[a5_0x1174('0x11')]('email')[a5_0x1174('0x12')]({'gmail_remove_dots':![]});const _0x364f07=_0x234ec7[a5_0x1174('0x2f')]();if(_0x364f07){_0x234ec7['flash'](a5_0x1174('0x14'),_0x364f07);return _0x57175a['redirect'](a5_0x1174('0x4b'));}async_1[a5_0x1174('0x16')][a5_0x1174('0x61')]([function createRandomToken(_0x5a2e94){crypto_1[a5_0x1174('0x16')]['randomBytes'](0x10,(_0x22ba96,_0x10c395)=>{const _0x19647a=_0x10c395['toString'](a5_0x1174('0x62'));_0x5a2e94(_0x22ba96,_0x19647a);});},function setRandomToken(_0x5dd15b,_0x35aac0){User_1[a5_0x1174('0x16')][a5_0x1174('0x27')]({'email':_0x234ec7[a5_0x1174('0x25')][a5_0x1174('0xd')]},(_0x2e6cb4,_0x86b55e)=>{if(_0x2e6cb4){return _0x35aac0(_0x2e6cb4);}if(!_0x86b55e){_0x234ec7[a5_0x1174('0x13')](a5_0x1174('0x14'),{'msg':a5_0x1174('0x63')});return _0x57175a[a5_0x1174('0x7')](a5_0x1174('0x4b'));}_0x86b55e[a5_0x1174('0x53')]=_0x5dd15b;_0x86b55e['passwordResetExpires']=Date[a5_0x1174('0x52')]()+0x36ee80;_0x86b55e[a5_0x1174('0x29')](_0x2e6cb4=>{_0x35aac0(_0x2e6cb4,_0x5dd15b,_0x86b55e);});});},function sendForgotPasswordEmail(_0x2a20a1,_0x1ddb1d,_0xdaed2d){const _0x40ec2b=nodemailer_1[a5_0x1174('0x16')][a5_0x1174('0x54')]({'service':a5_0x1174('0x55'),'auth':{'user':process[a5_0x1174('0x56')][a5_0x1174('0x64')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x50aaf6={'to':_0x1ddb1d['email'],'from':'hackathon@starter.com','subject':a5_0x1174('0x65'),'text':a5_0x1174('0x66')+_0x234ec7[a5_0x1174('0x67')]['host']+a5_0x1174('0x68')+_0x2a20a1+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x40ec2b[a5_0x1174('0x5b')](_0x50aaf6,_0x1aa23c=>{_0x234ec7[a5_0x1174('0x13')](a5_0x1174('0x45'),{'msg':a5_0x1174('0x69')+_0x1ddb1d[a5_0x1174('0xd')]+a5_0x1174('0x6a')});_0xdaed2d(_0x1aa23c);});}],_0x1db4f0=>{if(_0x1db4f0){return _0x1d9d8a(_0x1db4f0);}_0x57175a[a5_0x1174('0x7')](a5_0x1174('0x4b'));});};