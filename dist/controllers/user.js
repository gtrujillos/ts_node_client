var a5_0x1a6a=['postUpdatePassword','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','now','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','getForgot','Forgot\x20Password','postForgot','waterfall','randomBytes','SENDGRID_PASSWORD','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','crypto','nodemailer','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','validationErrors','flash','/login','authenticate','local','errors','message','logIn','success','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','assert','email','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','sanitize','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','name','profile','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.'];(function(_0x1dd112,_0x226b7a){var _0x26c34e=function(_0x4ec2f4){while(--_0x4ec2f4){_0x1dd112['push'](_0x1dd112['shift']());}};_0x26c34e(++_0x226b7a);}(a5_0x1a6a,0x106));var a5_0x4372=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a5_0x1a6a[_0x2d8f05];return _0x4d74cb;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x22dd14){return _0x22dd14&&_0x22dd14[a5_0x4372('0x0')]?_0x22dd14:{'default':_0x22dd14};};Object[a5_0x4372('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x4372('0x2')));const nodemailer_1=__importDefault(require(a5_0x4372('0x3')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x4372('0x4')));const request=require(a5_0x4372('0x5'));exports[a5_0x4372('0x6')]=(_0x16caed,_0x44b289)=>{if(_0x16caed[a5_0x4372('0x7')]){return _0x44b289[a5_0x4372('0x8')]('/');}_0x44b289[a5_0x4372('0x9')](a5_0x4372('0xa'),{'title':a5_0x4372('0xb')});};exports['postLogin']=(_0x3e96ee,_0x19a7ab,_0x8fb8a3)=>{_0x3e96ee['assert']('email',a5_0x4372('0xc'))[a5_0x4372('0xd')]();_0x3e96ee['assert'](a5_0x4372('0xe'),a5_0x4372('0xf'))[a5_0x4372('0x10')]();_0x3e96ee['sanitize']('email')[a5_0x4372('0x11')]({'gmail_remove_dots':![]});const _0x441bdc=_0x3e96ee[a5_0x4372('0x12')]();if(_0x441bdc){_0x3e96ee[a5_0x4372('0x13')]('errors',_0x441bdc);return _0x19a7ab[a5_0x4372('0x8')](a5_0x4372('0x14'));}passport_1['default'][a5_0x4372('0x15')](a5_0x4372('0x16'),(_0x52caf2,_0x37a1de,_0x2a2ea0)=>{if(_0x52caf2){return _0x8fb8a3(_0x52caf2);}if(!_0x37a1de){_0x3e96ee[a5_0x4372('0x13')](a5_0x4372('0x17'),_0x2a2ea0[a5_0x4372('0x18')]);return _0x19a7ab[a5_0x4372('0x8')]('/login');}_0x3e96ee[a5_0x4372('0x19')](_0x37a1de,_0x52caf2=>{if(_0x52caf2){return _0x8fb8a3(_0x52caf2);}_0x3e96ee[a5_0x4372('0x13')](a5_0x4372('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x19a7ab[a5_0x4372('0x8')](_0x3e96ee[a5_0x4372('0x1b')][a5_0x4372('0x1c')]||'/');});})(_0x3e96ee,_0x19a7ab,_0x8fb8a3);};exports[a5_0x4372('0x1d')]=(_0xa6e4b3,_0x2ede34)=>{_0xa6e4b3[a5_0x4372('0x1d')]();_0x2ede34[a5_0x4372('0x8')]('/');};exports[a5_0x4372('0x1e')]=(_0x2f0c7d,_0x233b6a)=>{if(_0x2f0c7d[a5_0x4372('0x7')]){return _0x233b6a[a5_0x4372('0x8')]('/');}_0x233b6a['render'](a5_0x4372('0x1f'),{'title':a5_0x4372('0x20')});};exports[a5_0x4372('0x21')]=(_0x193eda,_0x54f473,_0x1dc53e)=>{_0x193eda[a5_0x4372('0x22')](a5_0x4372('0x23'),a5_0x4372('0xc'))[a5_0x4372('0xd')]();_0x193eda[a5_0x4372('0x22')]('password',a5_0x4372('0x24'))[a5_0x4372('0x25')]({'min':0x4});_0x193eda[a5_0x4372('0x22')](a5_0x4372('0x26'),a5_0x4372('0x27'))[a5_0x4372('0x28')](_0x193eda[a5_0x4372('0x29')][a5_0x4372('0xe')]);_0x193eda[a5_0x4372('0x2a')](a5_0x4372('0x23'))[a5_0x4372('0x11')]({'gmail_remove_dots':![]});const _0x414e74=_0x193eda[a5_0x4372('0x12')]();if(_0x414e74){_0x193eda[a5_0x4372('0x13')](a5_0x4372('0x17'),_0x414e74);return _0x54f473['redirect'](a5_0x4372('0x2b'));}const _0x5b74c0=new User_1[(a5_0x4372('0x2c'))]({});User_1['default'][a5_0x4372('0x2d')]({'email':_0x193eda[a5_0x4372('0x29')]['email']},(_0x5cbb09,_0xbe8d32)=>{if(_0x5cbb09){return _0x1dc53e(_0x5cbb09);}if(_0xbe8d32){_0x193eda[a5_0x4372('0x13')]('errors',{'msg':a5_0x4372('0x2e')});return _0x54f473[a5_0x4372('0x8')](a5_0x4372('0x2b'));}_0x5b74c0[a5_0x4372('0x2f')](_0x5cbb09=>{if(_0x5cbb09){return _0x1dc53e(_0x5cbb09);}_0x193eda[a5_0x4372('0x19')](_0x5b74c0,_0x5cbb09=>{if(_0x5cbb09){return _0x1dc53e(_0x5cbb09);}_0x54f473[a5_0x4372('0x8')]('/');});});});};exports[a5_0x4372('0x30')]=(_0x106b11,_0x38f0f5)=>{_0x38f0f5[a5_0x4372('0x9')]('account/profile',{'title':'Account\x20Management'});};exports[a5_0x4372('0x31')]=(_0x37c364,_0x993b07,_0x10704d)=>{_0x37c364['assert'](a5_0x4372('0x23'),a5_0x4372('0x32'))[a5_0x4372('0xd')]();_0x37c364[a5_0x4372('0x2a')](a5_0x4372('0x23'))[a5_0x4372('0x11')]({'gmail_remove_dots':![]});const _0x1c689e=_0x37c364[a5_0x4372('0x12')]();if(_0x1c689e){_0x37c364['flash'](a5_0x4372('0x17'),_0x1c689e);return _0x993b07[a5_0x4372('0x8')](a5_0x4372('0x33'));}User_1['default']['findById'](_0x37c364[a5_0x4372('0x7')]['id'],(_0xf5aa07,_0x3297bc)=>{if(_0xf5aa07){return _0x10704d(_0xf5aa07);}_0x3297bc[a5_0x4372('0x23')]=_0x37c364[a5_0x4372('0x29')]['email']||'';_0x3297bc['profile'][a5_0x4372('0x34')]=_0x37c364[a5_0x4372('0x29')][a5_0x4372('0x34')]||'';_0x3297bc[a5_0x4372('0x35')]['gender']=_0x37c364['body'][a5_0x4372('0x36')]||'';_0x3297bc['profile'][a5_0x4372('0x37')]=_0x37c364[a5_0x4372('0x29')][a5_0x4372('0x37')]||'';_0x3297bc[a5_0x4372('0x35')][a5_0x4372('0x38')]=_0x37c364[a5_0x4372('0x29')][a5_0x4372('0x38')]||'';_0x3297bc[a5_0x4372('0x2f')](_0xf5aa07=>{if(_0xf5aa07){if(_0xf5aa07[a5_0x4372('0x39')]===0x2af8){_0x37c364['flash']('errors',{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x993b07['redirect'](a5_0x4372('0x33'));}return _0x10704d(_0xf5aa07);}_0x37c364[a5_0x4372('0x13')](a5_0x4372('0x1a'),{'msg':a5_0x4372('0x3a')});_0x993b07[a5_0x4372('0x8')](a5_0x4372('0x33'));});});};exports[a5_0x4372('0x3b')]=(_0x101de3,_0xbc9f93,_0x84db0a)=>{_0x101de3[a5_0x4372('0x22')](a5_0x4372('0xe'),a5_0x4372('0x24'))[a5_0x4372('0x25')]({'min':0x4});_0x101de3['assert']('confirmPassword','Passwords\x20do\x20not\x20match')[a5_0x4372('0x28')](_0x101de3[a5_0x4372('0x29')][a5_0x4372('0xe')]);const _0x245b0a=_0x101de3[a5_0x4372('0x12')]();if(_0x245b0a){_0x101de3[a5_0x4372('0x13')](a5_0x4372('0x17'),_0x245b0a);return _0xbc9f93[a5_0x4372('0x8')](a5_0x4372('0x33'));}User_1[a5_0x4372('0x2c')][a5_0x4372('0x3c')](_0x101de3[a5_0x4372('0x7')]['id'],(_0x24d7b5,_0x25496b)=>{if(_0x24d7b5){return _0x84db0a(_0x24d7b5);}_0x25496b[a5_0x4372('0xe')]=_0x101de3[a5_0x4372('0x29')][a5_0x4372('0xe')];_0x25496b[a5_0x4372('0x2f')](_0x24d7b5=>{if(_0x24d7b5){return _0x84db0a(_0x24d7b5);}_0x101de3['flash'](a5_0x4372('0x1a'),{'msg':a5_0x4372('0x3d')});_0xbc9f93['redirect']('/account');});});};exports[a5_0x4372('0x3e')]=(_0x2736d7,_0x174839,_0x7d4ac1)=>{User_1[a5_0x4372('0x2c')]['remove']({'_id':_0x2736d7[a5_0x4372('0x7')]['id']},_0x39ac17=>{if(_0x39ac17){return _0x7d4ac1(_0x39ac17);}_0x2736d7[a5_0x4372('0x1d')]();_0x2736d7['flash'](a5_0x4372('0x3f'),{'msg':a5_0x4372('0x40')});_0x174839[a5_0x4372('0x8')]('/');});};exports[a5_0x4372('0x41')]=(_0xe6bca7,_0x48d72b,_0x2db071)=>{const _0x505918=_0xe6bca7[a5_0x4372('0x42')][a5_0x4372('0x43')];User_1[a5_0x4372('0x2c')][a5_0x4372('0x3c')](_0xe6bca7[a5_0x4372('0x7')]['id'],(_0xe2e58c,_0x418c2e)=>{if(_0xe2e58c){return _0x2db071(_0xe2e58c);}_0x418c2e[_0x505918]=undefined;_0x418c2e[a5_0x4372('0x44')]=_0x418c2e['tokens'][a5_0x4372('0x45')](_0x22e63b=>_0x22e63b['kind']!==_0x505918);_0x418c2e['save'](_0xe2e58c=>{if(_0xe2e58c){return _0x2db071(_0xe2e58c);}_0xe6bca7[a5_0x4372('0x13')]('info',{'msg':_0x505918+a5_0x4372('0x46')});_0x48d72b['redirect'](a5_0x4372('0x33'));});});};exports['getReset']=(_0x5ef341,_0x3b98ae,_0x350c7e)=>{if(_0x5ef341[a5_0x4372('0x47')]()){return _0x3b98ae[a5_0x4372('0x8')]('/');}User_1[a5_0x4372('0x2c')][a5_0x4372('0x2d')]({'passwordResetToken':_0x5ef341['params'][a5_0x4372('0x48')]})[a5_0x4372('0x49')](a5_0x4372('0x4a'))['gt'](Date['now']())[a5_0x4372('0x4b')]((_0xe4b14c,_0x505e71)=>{if(_0xe4b14c){return _0x350c7e(_0xe4b14c);}if(!_0x505e71){_0x5ef341[a5_0x4372('0x13')](a5_0x4372('0x17'),{'msg':a5_0x4372('0x4c')});return _0x3b98ae[a5_0x4372('0x8')](a5_0x4372('0x4d'));}_0x3b98ae[a5_0x4372('0x9')](a5_0x4372('0x4e'),{'title':a5_0x4372('0x4f')});});};exports['postReset']=(_0x570928,_0x1992fa,_0x5d7753)=>{_0x570928[a5_0x4372('0x22')](a5_0x4372('0xe'),a5_0x4372('0x50'))[a5_0x4372('0x25')]({'min':0x4});_0x570928[a5_0x4372('0x22')](a5_0x4372('0x51'),a5_0x4372('0x52'))[a5_0x4372('0x28')](_0x570928[a5_0x4372('0x29')][a5_0x4372('0xe')]);const _0x3e044c=_0x570928[a5_0x4372('0x12')]();if(_0x3e044c){_0x570928[a5_0x4372('0x13')](a5_0x4372('0x17'),_0x3e044c);return _0x1992fa['redirect'](a5_0x4372('0x53'));}async_1['default']['waterfall']([function resetPassword(_0x42be15){User_1[a5_0x4372('0x2c')][a5_0x4372('0x2d')]({'passwordResetToken':_0x570928[a5_0x4372('0x42')]['token']})[a5_0x4372('0x49')](a5_0x4372('0x4a'))['gt'](Date[a5_0x4372('0x54')]())[a5_0x4372('0x4b')]((_0x2a8d18,_0x3a272f)=>{if(_0x2a8d18){return _0x5d7753(_0x2a8d18);}if(!_0x3a272f){_0x570928['flash'](a5_0x4372('0x17'),{'msg':a5_0x4372('0x4c')});return _0x1992fa[a5_0x4372('0x8')]('back');}_0x3a272f['password']=_0x570928[a5_0x4372('0x29')]['password'];_0x3a272f[a5_0x4372('0x55')]=undefined;_0x3a272f[a5_0x4372('0x4a')]=undefined;_0x3a272f['save'](_0x2a8d18=>{if(_0x2a8d18){return _0x5d7753(_0x2a8d18);}_0x570928[a5_0x4372('0x19')](_0x3a272f,_0x2a8d18=>{_0x42be15(_0x2a8d18,_0x3a272f);});});});},function sendResetPasswordEmail(_0x80a954,_0x10d403){const _0x43a07e=nodemailer_1[a5_0x4372('0x2c')][a5_0x4372('0x56')]({'service':a5_0x4372('0x57'),'auth':{'user':process[a5_0x4372('0x58')][a5_0x4372('0x59')],'pass':process[a5_0x4372('0x58')]['SENDGRID_PASSWORD']}});const _0x167c9d={'to':_0x80a954[a5_0x4372('0x23')],'from':a5_0x4372('0x5a'),'subject':a5_0x4372('0x5b'),'text':a5_0x4372('0x5c')+_0x80a954['email']+a5_0x4372('0x5d')};_0x43a07e['sendMail'](_0x167c9d,_0x3bd7ce=>{_0x570928[a5_0x4372('0x13')](a5_0x4372('0x1a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x10d403(_0x3bd7ce);});}],_0x2b1f0c=>{if(_0x2b1f0c){return _0x5d7753(_0x2b1f0c);}_0x1992fa[a5_0x4372('0x8')]('/');});};exports[a5_0x4372('0x5e')]=(_0x56632b,_0xf540bd)=>{if(_0x56632b['isAuthenticated']()){return _0xf540bd[a5_0x4372('0x8')]('/');}_0xf540bd['render']('account/forgot',{'title':a5_0x4372('0x5f')});};exports[a5_0x4372('0x60')]=(_0x38a22a,_0x144107,_0x2d7729)=>{_0x38a22a[a5_0x4372('0x22')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x4372('0xd')]();_0x38a22a[a5_0x4372('0x2a')](a5_0x4372('0x23'))[a5_0x4372('0x11')]({'gmail_remove_dots':![]});const _0x5e3e73=_0x38a22a[a5_0x4372('0x12')]();if(_0x5e3e73){_0x38a22a[a5_0x4372('0x13')](a5_0x4372('0x17'),_0x5e3e73);return _0x144107[a5_0x4372('0x8')](a5_0x4372('0x4d'));}async_1[a5_0x4372('0x2c')][a5_0x4372('0x61')]([function createRandomToken(_0x5dc6d9){crypto_1[a5_0x4372('0x2c')][a5_0x4372('0x62')](0x10,(_0x327a63,_0x57e2d9)=>{const _0x41b6e8=_0x57e2d9['toString']('hex');_0x5dc6d9(_0x327a63,_0x41b6e8);});},function setRandomToken(_0x55c257,_0x1fef49){User_1[a5_0x4372('0x2c')][a5_0x4372('0x2d')]({'email':_0x38a22a[a5_0x4372('0x29')][a5_0x4372('0x23')]},(_0xebaa44,_0x21d76b)=>{if(_0xebaa44){return _0x1fef49(_0xebaa44);}if(!_0x21d76b){_0x38a22a['flash'](a5_0x4372('0x17'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x144107[a5_0x4372('0x8')](a5_0x4372('0x4d'));}_0x21d76b[a5_0x4372('0x55')]=_0x55c257;_0x21d76b[a5_0x4372('0x4a')]=Date[a5_0x4372('0x54')]()+0x36ee80;_0x21d76b[a5_0x4372('0x2f')](_0xebaa44=>{_0x1fef49(_0xebaa44,_0x55c257,_0x21d76b);});});},function sendForgotPasswordEmail(_0x31e68e,_0x2f8164,_0x46e37a){const _0x259a87=nodemailer_1['default'][a5_0x4372('0x56')]({'service':a5_0x4372('0x57'),'auth':{'user':process[a5_0x4372('0x58')]['SENDGRID_USER'],'pass':process[a5_0x4372('0x58')][a5_0x4372('0x63')]}});const _0x5364ca={'to':_0x2f8164[a5_0x4372('0x23')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x4372('0x64')+_0x38a22a['headers'][a5_0x4372('0x65')]+a5_0x4372('0x66')+_0x31e68e+a5_0x4372('0x67')};_0x259a87[a5_0x4372('0x68')](_0x5364ca,_0xbb4353=>{_0x38a22a[a5_0x4372('0x13')]('info',{'msg':a5_0x4372('0x69')+_0x2f8164[a5_0x4372('0x23')]+a5_0x4372('0x6a')});_0x46e37a(_0xbb4353);});}],_0x75aa3c=>{if(_0x75aa3c){return _0x2d7729(_0x75aa3c);}_0x144107[a5_0x4372('0x8')](a5_0x4372('0x4d'));});};