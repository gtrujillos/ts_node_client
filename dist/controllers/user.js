var a5_0x3424=['findById','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','passport','../models/User','express-validator','getLogin','user','redirect','Login','assert','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','render','account/profile','Account\x20Management','postUpdateProfile','/account','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','confirmPassword'];(function(_0x566fb4,_0x5ce7b0){var _0x46b9fd=function(_0x2312ea){while(--_0x2312ea){_0x566fb4['push'](_0x566fb4['shift']());}};_0x46b9fd(++_0x5ce7b0);}(a5_0x3424,0xa2));var a5_0xe732=function(_0x3f0f1a,_0x47b257){_0x3f0f1a=_0x3f0f1a-0x0;var _0x50e74c=a5_0x3424[_0x3f0f1a];return _0x50e74c;};'use strict';var __importDefault=this&&this[a5_0xe732('0x0')]||function(_0x2005c8){return _0x2005c8&&_0x2005c8[a5_0xe732('0x1')]?_0x2005c8:{'default':_0x2005c8};};Object[a5_0xe732('0x2')](exports,a5_0xe732('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0xe732('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0xe732('0x4')));const User_1=__importDefault(require(a5_0xe732('0x5')));const request=require(a5_0xe732('0x6'));exports[a5_0xe732('0x7')]=(_0x19b67c,_0x8d0d67)=>{if(_0x19b67c[a5_0xe732('0x8')]){return _0x8d0d67[a5_0xe732('0x9')]('/');}_0x8d0d67['render']('account/login',{'title':a5_0xe732('0xa')});};exports['postLogin']=(_0x3b86a4,_0x9523f7,_0x2126f7)=>{_0x3b86a4[a5_0xe732('0xb')](a5_0xe732('0xc'),a5_0xe732('0xd'))['isEmail']();_0x3b86a4['assert'](a5_0xe732('0xe'),a5_0xe732('0xf'))[a5_0xe732('0x10')]();_0x3b86a4[a5_0xe732('0x11')](a5_0xe732('0xc'))[a5_0xe732('0x12')]({'gmail_remove_dots':![]});const _0x20ffa9=_0x3b86a4[a5_0xe732('0x13')]();if(_0x20ffa9){_0x3b86a4[a5_0xe732('0x14')](a5_0xe732('0x15'),_0x20ffa9);return _0x9523f7['redirect'](a5_0xe732('0x16'));}passport_1[a5_0xe732('0x17')][a5_0xe732('0x18')](a5_0xe732('0x19'),(_0x25a65a,_0x4b7b66,_0x2a14cc)=>{if(_0x25a65a){return _0x2126f7(_0x25a65a);}if(!_0x4b7b66){_0x3b86a4[a5_0xe732('0x14')](a5_0xe732('0x15'),_0x2a14cc['message']);return _0x9523f7['redirect'](a5_0xe732('0x16'));}_0x3b86a4[a5_0xe732('0x1a')](_0x4b7b66,_0x25a65a=>{if(_0x25a65a){return _0x2126f7(_0x25a65a);}_0x3b86a4[a5_0xe732('0x14')](a5_0xe732('0x1b'),{'msg':a5_0xe732('0x1c')});_0x9523f7[a5_0xe732('0x9')](_0x3b86a4['session'][a5_0xe732('0x1d')]||'/');});})(_0x3b86a4,_0x9523f7,_0x2126f7);};exports['logout']=(_0x5cd551,_0x4eb7fa)=>{_0x5cd551[a5_0xe732('0x1e')]();_0x4eb7fa[a5_0xe732('0x9')]('/');};exports[a5_0xe732('0x1f')]=(_0x33db6b,_0x44294b)=>{if(_0x33db6b['user']){return _0x44294b[a5_0xe732('0x9')]('/');}_0x44294b['render']('account/signup',{'title':'Create\x20Account'});};exports[a5_0xe732('0x20')]=(_0x25297b,_0x2beb6c,_0x1a20be)=>{_0x25297b[a5_0xe732('0xb')](a5_0xe732('0xc'),a5_0xe732('0xd'))[a5_0xe732('0x21')]();_0x25297b['assert'](a5_0xe732('0xe'),a5_0xe732('0x22'))[a5_0xe732('0x23')]({'min':0x4});_0x25297b[a5_0xe732('0xb')]('confirmPassword',a5_0xe732('0x24'))[a5_0xe732('0x25')](_0x25297b[a5_0xe732('0x26')][a5_0xe732('0xe')]);_0x25297b[a5_0xe732('0x11')](a5_0xe732('0xc'))[a5_0xe732('0x12')]({'gmail_remove_dots':![]});const _0xaf9264=_0x25297b['validationErrors']();if(_0xaf9264){_0x25297b[a5_0xe732('0x14')](a5_0xe732('0x15'),_0xaf9264);return _0x2beb6c[a5_0xe732('0x9')](a5_0xe732('0x27'));}const _0x41d7c1=new User_1[(a5_0xe732('0x17'))]({});User_1[a5_0xe732('0x17')][a5_0xe732('0x28')]({'email':_0x25297b['body'][a5_0xe732('0xc')]},(_0x5c8410,_0xc86c1b)=>{if(_0x5c8410){return _0x1a20be(_0x5c8410);}if(_0xc86c1b){_0x25297b[a5_0xe732('0x14')]('errors',{'msg':a5_0xe732('0x29')});return _0x2beb6c[a5_0xe732('0x9')]('/signup');}_0x41d7c1[a5_0xe732('0x2a')](_0x5c8410=>{if(_0x5c8410){return _0x1a20be(_0x5c8410);}_0x25297b[a5_0xe732('0x1a')](_0x41d7c1,_0x5c8410=>{if(_0x5c8410){return _0x1a20be(_0x5c8410);}_0x2beb6c['redirect']('/');});});});};exports[a5_0xe732('0x2b')]=(_0x13d217,_0x3797f4)=>{_0x3797f4[a5_0xe732('0x2c')](a5_0xe732('0x2d'),{'title':a5_0xe732('0x2e')});};exports[a5_0xe732('0x2f')]=(_0x5a2c7c,_0x5ac208,_0x3f13ca)=>{_0x5a2c7c[a5_0xe732('0xb')](a5_0xe732('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0xe732('0x21')]();_0x5a2c7c['sanitize'](a5_0xe732('0xc'))[a5_0xe732('0x12')]({'gmail_remove_dots':![]});const _0x292c94=_0x5a2c7c[a5_0xe732('0x13')]();if(_0x292c94){_0x5a2c7c['flash'](a5_0xe732('0x15'),_0x292c94);return _0x5ac208[a5_0xe732('0x9')](a5_0xe732('0x30'));}User_1['default']['findById'](_0x5a2c7c['user']['id'],(_0x290141,_0x372c8f)=>{if(_0x290141){return _0x3f13ca(_0x290141);}_0x372c8f['email']=_0x5a2c7c[a5_0xe732('0x26')][a5_0xe732('0xc')]||'';_0x372c8f[a5_0xe732('0x31')][a5_0xe732('0x32')]=_0x5a2c7c[a5_0xe732('0x26')][a5_0xe732('0x32')]||'';_0x372c8f[a5_0xe732('0x31')]['gender']=_0x5a2c7c[a5_0xe732('0x26')][a5_0xe732('0x33')]||'';_0x372c8f[a5_0xe732('0x31')][a5_0xe732('0x34')]=_0x5a2c7c['body'][a5_0xe732('0x34')]||'';_0x372c8f[a5_0xe732('0x31')][a5_0xe732('0x35')]=_0x5a2c7c['body'][a5_0xe732('0x35')]||'';_0x372c8f['save'](_0x290141=>{if(_0x290141){if(_0x290141[a5_0xe732('0x36')]===0x2af8){_0x5a2c7c[a5_0xe732('0x14')](a5_0xe732('0x15'),{'msg':a5_0xe732('0x37')});return _0x5ac208[a5_0xe732('0x9')](a5_0xe732('0x30'));}return _0x3f13ca(_0x290141);}_0x5a2c7c[a5_0xe732('0x14')](a5_0xe732('0x1b'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x5ac208['redirect'](a5_0xe732('0x30'));});});};exports[a5_0xe732('0x38')]=(_0x5cb715,_0x48d87f,_0x3c6d1d)=>{_0x5cb715[a5_0xe732('0xb')](a5_0xe732('0xe'),a5_0xe732('0x22'))[a5_0xe732('0x23')]({'min':0x4});_0x5cb715['assert'](a5_0xe732('0x39'),'Passwords\x20do\x20not\x20match')['equals'](_0x5cb715[a5_0xe732('0x26')][a5_0xe732('0xe')]);const _0x4c27de=_0x5cb715[a5_0xe732('0x13')]();if(_0x4c27de){_0x5cb715['flash'](a5_0xe732('0x15'),_0x4c27de);return _0x48d87f[a5_0xe732('0x9')](a5_0xe732('0x30'));}User_1['default'][a5_0xe732('0x3a')](_0x5cb715[a5_0xe732('0x8')]['id'],(_0x2e8d97,_0x3e7f95)=>{if(_0x2e8d97){return _0x3c6d1d(_0x2e8d97);}_0x3e7f95['password']=_0x5cb715[a5_0xe732('0x26')][a5_0xe732('0xe')];_0x3e7f95[a5_0xe732('0x2a')](_0x2e8d97=>{if(_0x2e8d97){return _0x3c6d1d(_0x2e8d97);}_0x5cb715[a5_0xe732('0x14')](a5_0xe732('0x1b'),{'msg':'Password\x20has\x20been\x20changed.'});_0x48d87f['redirect']('/account');});});};exports['postDeleteAccount']=(_0x643649,_0x4f2d5d,_0x51e564)=>{User_1[a5_0xe732('0x17')][a5_0xe732('0x3b')]({'_id':_0x643649[a5_0xe732('0x8')]['id']},_0x2bf218=>{if(_0x2bf218){return _0x51e564(_0x2bf218);}_0x643649[a5_0xe732('0x1e')]();_0x643649['flash'](a5_0xe732('0x3c'),{'msg':a5_0xe732('0x3d')});_0x4f2d5d[a5_0xe732('0x9')]('/');});};exports[a5_0xe732('0x3e')]=(_0x4e2083,_0x24da07,_0x40f4f9)=>{const _0x71f1d0=_0x4e2083[a5_0xe732('0x3f')][a5_0xe732('0x40')];User_1[a5_0xe732('0x17')]['findById'](_0x4e2083['user']['id'],(_0x36f12f,_0x5913eb)=>{if(_0x36f12f){return _0x40f4f9(_0x36f12f);}_0x5913eb[_0x71f1d0]=undefined;_0x5913eb[a5_0xe732('0x41')]=_0x5913eb[a5_0xe732('0x41')][a5_0xe732('0x42')](_0x461c79=>_0x461c79[a5_0xe732('0x43')]!==_0x71f1d0);_0x5913eb[a5_0xe732('0x2a')](_0x36f12f=>{if(_0x36f12f){return _0x40f4f9(_0x36f12f);}_0x4e2083[a5_0xe732('0x14')](a5_0xe732('0x3c'),{'msg':_0x71f1d0+a5_0xe732('0x44')});_0x24da07['redirect'](a5_0xe732('0x30'));});});};exports[a5_0xe732('0x45')]=(_0x12565f,_0x74d4b3,_0x182ee5)=>{if(_0x12565f[a5_0xe732('0x46')]()){return _0x74d4b3[a5_0xe732('0x9')]('/');}User_1[a5_0xe732('0x17')][a5_0xe732('0x28')]({'passwordResetToken':_0x12565f[a5_0xe732('0x3f')][a5_0xe732('0x47')]})[a5_0xe732('0x48')](a5_0xe732('0x49'))['gt'](Date[a5_0xe732('0x4a')]())[a5_0xe732('0x4b')]((_0x123727,_0x45d6ff)=>{if(_0x123727){return _0x182ee5(_0x123727);}if(!_0x45d6ff){_0x12565f[a5_0xe732('0x14')](a5_0xe732('0x15'),{'msg':a5_0xe732('0x4c')});return _0x74d4b3[a5_0xe732('0x9')](a5_0xe732('0x4d'));}_0x74d4b3[a5_0xe732('0x2c')](a5_0xe732('0x4e'),{'title':a5_0xe732('0x4f')});});};exports[a5_0xe732('0x50')]=(_0x5ea909,_0x17c142,_0x33182f)=>{_0x5ea909['assert']('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0xe732('0x23')]({'min':0x4});_0x5ea909[a5_0xe732('0xb')]('confirm',a5_0xe732('0x51'))[a5_0xe732('0x25')](_0x5ea909['body'][a5_0xe732('0xe')]);const _0x4e871b=_0x5ea909[a5_0xe732('0x13')]();if(_0x4e871b){_0x5ea909[a5_0xe732('0x14')](a5_0xe732('0x15'),_0x4e871b);return _0x17c142[a5_0xe732('0x9')](a5_0xe732('0x52'));}async_1[a5_0xe732('0x17')][a5_0xe732('0x53')]([function resetPassword(_0x470826){User_1[a5_0xe732('0x17')][a5_0xe732('0x28')]({'passwordResetToken':_0x5ea909[a5_0xe732('0x3f')][a5_0xe732('0x47')]})[a5_0xe732('0x48')]('passwordResetExpires')['gt'](Date[a5_0xe732('0x4a')]())['exec']((_0x2078e8,_0x4d37ba)=>{if(_0x2078e8){return _0x33182f(_0x2078e8);}if(!_0x4d37ba){_0x5ea909[a5_0xe732('0x14')](a5_0xe732('0x15'),{'msg':a5_0xe732('0x4c')});return _0x17c142['redirect'](a5_0xe732('0x52'));}_0x4d37ba[a5_0xe732('0xe')]=_0x5ea909[a5_0xe732('0x26')][a5_0xe732('0xe')];_0x4d37ba[a5_0xe732('0x54')]=undefined;_0x4d37ba['passwordResetExpires']=undefined;_0x4d37ba['save'](_0x2078e8=>{if(_0x2078e8){return _0x33182f(_0x2078e8);}_0x5ea909[a5_0xe732('0x1a')](_0x4d37ba,_0x2078e8=>{_0x470826(_0x2078e8,_0x4d37ba);});});});},function sendResetPasswordEmail(_0x27bed1,_0x10a176){const _0x224001=nodemailer_1[a5_0xe732('0x17')][a5_0xe732('0x55')]({'service':a5_0xe732('0x56'),'auth':{'user':process[a5_0xe732('0x57')][a5_0xe732('0x58')],'pass':process[a5_0xe732('0x57')][a5_0xe732('0x59')]}});const _0x5cc070={'to':_0x27bed1[a5_0xe732('0xc')],'from':a5_0xe732('0x5a'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0xe732('0x5b')+_0x27bed1[a5_0xe732('0xc')]+a5_0xe732('0x5c')};_0x224001['sendMail'](_0x5cc070,_0x1985b=>{_0x5ea909[a5_0xe732('0x14')](a5_0xe732('0x1b'),{'msg':a5_0xe732('0x5d')});_0x10a176(_0x1985b);});}],_0x9c2092=>{if(_0x9c2092){return _0x33182f(_0x9c2092);}_0x17c142['redirect']('/');});};exports[a5_0xe732('0x5e')]=(_0x464484,_0x3bf984)=>{if(_0x464484[a5_0xe732('0x46')]()){return _0x3bf984['redirect']('/');}_0x3bf984[a5_0xe732('0x2c')](a5_0xe732('0x5f'),{'title':'Forgot\x20Password'});};exports[a5_0xe732('0x60')]=(_0x5b213c,_0x750c79,_0x4e20ff)=>{_0x5b213c[a5_0xe732('0xb')](a5_0xe732('0xc'),a5_0xe732('0x61'))[a5_0xe732('0x21')]();_0x5b213c[a5_0xe732('0x11')](a5_0xe732('0xc'))[a5_0xe732('0x12')]({'gmail_remove_dots':![]});const _0xdebfcc=_0x5b213c[a5_0xe732('0x13')]();if(_0xdebfcc){_0x5b213c[a5_0xe732('0x14')](a5_0xe732('0x15'),_0xdebfcc);return _0x750c79[a5_0xe732('0x9')](a5_0xe732('0x4d'));}async_1[a5_0xe732('0x17')]['waterfall']([function createRandomToken(_0x418168){crypto_1[a5_0xe732('0x17')][a5_0xe732('0x62')](0x10,(_0x4e4fc4,_0x34eb20)=>{const _0x4c8fa2=_0x34eb20[a5_0xe732('0x63')](a5_0xe732('0x64'));_0x418168(_0x4e4fc4,_0x4c8fa2);});},function setRandomToken(_0x1529cd,_0x4aea47){User_1[a5_0xe732('0x17')][a5_0xe732('0x28')]({'email':_0x5b213c[a5_0xe732('0x26')][a5_0xe732('0xc')]},(_0x141da5,_0x594933)=>{if(_0x141da5){return _0x4aea47(_0x141da5);}if(!_0x594933){_0x5b213c[a5_0xe732('0x14')](a5_0xe732('0x15'),{'msg':a5_0xe732('0x65')});return _0x750c79['redirect'](a5_0xe732('0x4d'));}_0x594933['passwordResetToken']=_0x1529cd;_0x594933[a5_0xe732('0x49')]=Date[a5_0xe732('0x4a')]()+0x36ee80;_0x594933[a5_0xe732('0x2a')](_0x141da5=>{_0x4aea47(_0x141da5,_0x1529cd,_0x594933);});});},function sendForgotPasswordEmail(_0x4d8d2f,_0x319a03,_0x472fbe){const _0x2e981b=nodemailer_1[a5_0xe732('0x17')][a5_0xe732('0x55')]({'service':a5_0xe732('0x56'),'auth':{'user':process['env'][a5_0xe732('0x58')],'pass':process[a5_0xe732('0x57')][a5_0xe732('0x59')]}});const _0x1d2d13={'to':_0x319a03[a5_0xe732('0xc')],'from':a5_0xe732('0x66'),'subject':a5_0xe732('0x67'),'text':a5_0xe732('0x68')+_0x5b213c[a5_0xe732('0x69')]['host']+a5_0xe732('0x6a')+_0x4d8d2f+a5_0xe732('0x6b')};_0x2e981b['sendMail'](_0x1d2d13,_0x327227=>{_0x5b213c['flash'](a5_0xe732('0x3c'),{'msg':a5_0xe732('0x6c')+_0x319a03[a5_0xe732('0xc')]+a5_0xe732('0x6d')});_0x472fbe(_0x327227);});}],_0x1a490b=>{if(_0x1a490b){return _0x4e20ff(_0x1a490b);}_0x750c79[a5_0xe732('0x9')](a5_0xe732('0x4d'));});};