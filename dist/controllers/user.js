var a5_0x520a=['express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator','user','redirect','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','normalizeEmail','flash','errors','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','sanitize','validationErrors','/signup','body','save','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','gender','website','code','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','provider','findById','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','findOne','exec','back','passwordResetToken','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD'];(function(_0x33a541,_0x4a60dd){var _0x31e309=function(_0x44f135){while(--_0x44f135){_0x33a541['push'](_0x33a541['shift']());}};_0x31e309(++_0x4a60dd);}(a5_0x520a,0x157));var a5_0x20fc=function(_0x1e7b6c,_0x3c623b){_0x1e7b6c=_0x1e7b6c-0x0;var _0x5c700e=a5_0x520a[_0x1e7b6c];return _0x5c700e;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x36faeb){return _0x36faeb&&_0x36faeb[a5_0x20fc('0x0')]?_0x36faeb:{'default':_0x36faeb};};Object[a5_0x20fc('0x1')](exports,a5_0x20fc('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x20fc('0x2')));const crypto_1=__importDefault(require(a5_0x20fc('0x3')));const nodemailer_1=__importDefault(require(a5_0x20fc('0x4')));const passport_1=__importDefault(require(a5_0x20fc('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x20fc('0x6'));exports['getLogin']=(_0x420f5e,_0x35c831)=>{if(_0x420f5e[a5_0x20fc('0x7')]){return _0x35c831[a5_0x20fc('0x8')]('/');}_0x35c831[a5_0x20fc('0x9')](a5_0x20fc('0xa'),{'title':'Login'});};exports[a5_0x20fc('0xb')]=(_0x71b446,_0x9f71cb,_0x573076)=>{_0x71b446[a5_0x20fc('0xc')](a5_0x20fc('0xd'),a5_0x20fc('0xe'))[a5_0x20fc('0xf')]();_0x71b446[a5_0x20fc('0xc')](a5_0x20fc('0x10'),'Password\x20cannot\x20be\x20blank')[a5_0x20fc('0x11')]();_0x71b446['sanitize']('email')[a5_0x20fc('0x12')]({'gmail_remove_dots':![]});const _0x981616=_0x71b446['validationErrors']();if(_0x981616){_0x71b446[a5_0x20fc('0x13')](a5_0x20fc('0x14'),_0x981616);return _0x9f71cb[a5_0x20fc('0x8')](a5_0x20fc('0x15'));}passport_1[a5_0x20fc('0x16')][a5_0x20fc('0x17')](a5_0x20fc('0x18'),(_0x32d2db,_0x5e8925,_0x1d483c)=>{if(_0x32d2db){return _0x573076(_0x32d2db);}if(!_0x5e8925){_0x71b446[a5_0x20fc('0x13')](a5_0x20fc('0x14'),_0x1d483c[a5_0x20fc('0x19')]);return _0x9f71cb['redirect'](a5_0x20fc('0x15'));}_0x71b446[a5_0x20fc('0x1a')](_0x5e8925,_0x32d2db=>{if(_0x32d2db){return _0x573076(_0x32d2db);}_0x71b446['flash'](a5_0x20fc('0x1b'),{'msg':a5_0x20fc('0x1c')});_0x9f71cb[a5_0x20fc('0x8')](_0x71b446[a5_0x20fc('0x1d')][a5_0x20fc('0x1e')]||'/');});})(_0x71b446,_0x9f71cb,_0x573076);};exports[a5_0x20fc('0x1f')]=(_0x305ea5,_0x92008b)=>{_0x305ea5[a5_0x20fc('0x1f')]();_0x92008b[a5_0x20fc('0x8')]('/');};exports['getSignup']=(_0x13b0e6,_0x465e7d)=>{if(_0x13b0e6[a5_0x20fc('0x7')]){return _0x465e7d[a5_0x20fc('0x8')]('/');}_0x465e7d[a5_0x20fc('0x9')](a5_0x20fc('0x20'),{'title':a5_0x20fc('0x21')});};exports[a5_0x20fc('0x22')]=(_0x426f3a,_0x18fb5f,_0x267488)=>{_0x426f3a[a5_0x20fc('0xc')](a5_0x20fc('0xd'),'Email\x20is\x20not\x20valid')['isEmail']();_0x426f3a[a5_0x20fc('0xc')]('password',a5_0x20fc('0x23'))[a5_0x20fc('0x24')]({'min':0x4});_0x426f3a[a5_0x20fc('0xc')](a5_0x20fc('0x25'),a5_0x20fc('0x26'))[a5_0x20fc('0x27')](_0x426f3a['body'][a5_0x20fc('0x10')]);_0x426f3a[a5_0x20fc('0x28')](a5_0x20fc('0xd'))[a5_0x20fc('0x12')]({'gmail_remove_dots':![]});const _0x40032a=_0x426f3a[a5_0x20fc('0x29')]();if(_0x40032a){_0x426f3a[a5_0x20fc('0x13')](a5_0x20fc('0x14'),_0x40032a);return _0x18fb5f[a5_0x20fc('0x8')](a5_0x20fc('0x2a'));}const _0x4c076c=new User_1[(a5_0x20fc('0x16'))]({});User_1[a5_0x20fc('0x16')]['findOne']({'email':_0x426f3a[a5_0x20fc('0x2b')]['email']},(_0x4eaced,_0x508be9)=>{if(_0x4eaced){return _0x267488(_0x4eaced);}if(_0x508be9){_0x426f3a[a5_0x20fc('0x13')](a5_0x20fc('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x18fb5f['redirect'](a5_0x20fc('0x2a'));}_0x4c076c[a5_0x20fc('0x2c')](_0x4eaced=>{if(_0x4eaced){return _0x267488(_0x4eaced);}_0x426f3a[a5_0x20fc('0x1a')](_0x4c076c,_0x4eaced=>{if(_0x4eaced){return _0x267488(_0x4eaced);}_0x18fb5f[a5_0x20fc('0x8')]('/');});});});};exports[a5_0x20fc('0x2d')]=(_0x5386bf,_0x51e0a4)=>{_0x51e0a4[a5_0x20fc('0x9')](a5_0x20fc('0x2e'),{'title':a5_0x20fc('0x2f')});};exports['postUpdateProfile']=(_0x2355f6,_0x214f75,_0x21e7b8)=>{_0x2355f6[a5_0x20fc('0xc')]('email',a5_0x20fc('0x30'))[a5_0x20fc('0xf')]();_0x2355f6['sanitize'](a5_0x20fc('0xd'))[a5_0x20fc('0x12')]({'gmail_remove_dots':![]});const _0x217a65=_0x2355f6[a5_0x20fc('0x29')]();if(_0x217a65){_0x2355f6['flash'](a5_0x20fc('0x14'),_0x217a65);return _0x214f75[a5_0x20fc('0x8')](a5_0x20fc('0x31'));}User_1[a5_0x20fc('0x16')]['findById'](_0x2355f6[a5_0x20fc('0x7')]['id'],(_0x3e7a4b,_0x5ddd21)=>{if(_0x3e7a4b){return _0x21e7b8(_0x3e7a4b);}_0x5ddd21['email']=_0x2355f6[a5_0x20fc('0x2b')]['email']||'';_0x5ddd21[a5_0x20fc('0x32')]['name']=_0x2355f6['body']['name']||'';_0x5ddd21[a5_0x20fc('0x32')][a5_0x20fc('0x33')]=_0x2355f6[a5_0x20fc('0x2b')][a5_0x20fc('0x33')]||'';_0x5ddd21['profile']['location']=_0x2355f6[a5_0x20fc('0x2b')]['location']||'';_0x5ddd21[a5_0x20fc('0x32')][a5_0x20fc('0x34')]=_0x2355f6[a5_0x20fc('0x2b')][a5_0x20fc('0x34')]||'';_0x5ddd21[a5_0x20fc('0x2c')](_0x3e7a4b=>{if(_0x3e7a4b){if(_0x3e7a4b[a5_0x20fc('0x35')]===0x2af8){_0x2355f6[a5_0x20fc('0x13')](a5_0x20fc('0x14'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x214f75[a5_0x20fc('0x8')]('/account');}return _0x21e7b8(_0x3e7a4b);}_0x2355f6['flash'](a5_0x20fc('0x1b'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x214f75[a5_0x20fc('0x8')]('/account');});});};exports[a5_0x20fc('0x36')]=(_0x27ee91,_0x1c6dee,_0x1349a4)=>{_0x27ee91[a5_0x20fc('0xc')](a5_0x20fc('0x10'),a5_0x20fc('0x23'))[a5_0x20fc('0x24')]({'min':0x4});_0x27ee91[a5_0x20fc('0xc')](a5_0x20fc('0x25'),a5_0x20fc('0x26'))[a5_0x20fc('0x27')](_0x27ee91['body']['password']);const _0x169ba6=_0x27ee91['validationErrors']();if(_0x169ba6){_0x27ee91[a5_0x20fc('0x13')](a5_0x20fc('0x14'),_0x169ba6);return _0x1c6dee[a5_0x20fc('0x8')](a5_0x20fc('0x31'));}User_1['default']['findById'](_0x27ee91[a5_0x20fc('0x7')]['id'],(_0x33edab,_0x106975)=>{if(_0x33edab){return _0x1349a4(_0x33edab);}_0x106975['password']=_0x27ee91[a5_0x20fc('0x2b')][a5_0x20fc('0x10')];_0x106975[a5_0x20fc('0x2c')](_0x33edab=>{if(_0x33edab){return _0x1349a4(_0x33edab);}_0x27ee91['flash'](a5_0x20fc('0x1b'),{'msg':a5_0x20fc('0x37')});_0x1c6dee[a5_0x20fc('0x8')](a5_0x20fc('0x31'));});});};exports[a5_0x20fc('0x38')]=(_0x55849e,_0x410aaf,_0x286b72)=>{User_1[a5_0x20fc('0x16')][a5_0x20fc('0x39')]({'_id':_0x55849e[a5_0x20fc('0x7')]['id']},_0x344f1e=>{if(_0x344f1e){return _0x286b72(_0x344f1e);}_0x55849e['logout']();_0x55849e['flash'](a5_0x20fc('0x3a'),{'msg':a5_0x20fc('0x3b')});_0x410aaf['redirect']('/');});};exports['getOauthUnlink']=(_0x269723,_0x12fcb1,_0x46b2bd)=>{const _0x2aeb29=_0x269723[a5_0x20fc('0x3c')][a5_0x20fc('0x3d')];User_1[a5_0x20fc('0x16')][a5_0x20fc('0x3e')](_0x269723[a5_0x20fc('0x7')]['id'],(_0x5b15be,_0x129c2a)=>{if(_0x5b15be){return _0x46b2bd(_0x5b15be);}_0x129c2a[_0x2aeb29]=undefined;_0x129c2a[a5_0x20fc('0x3f')]=_0x129c2a[a5_0x20fc('0x3f')][a5_0x20fc('0x40')](_0xfc5901=>_0xfc5901[a5_0x20fc('0x41')]!==_0x2aeb29);_0x129c2a[a5_0x20fc('0x2c')](_0x5b15be=>{if(_0x5b15be){return _0x46b2bd(_0x5b15be);}_0x269723[a5_0x20fc('0x13')]('info',{'msg':_0x2aeb29+a5_0x20fc('0x42')});_0x12fcb1['redirect'](a5_0x20fc('0x31'));});});};exports[a5_0x20fc('0x43')]=(_0x2ec575,_0x94c5b9,_0x5eef94)=>{if(_0x2ec575['isAuthenticated']()){return _0x94c5b9['redirect']('/');}User_1[a5_0x20fc('0x16')]['findOne']({'passwordResetToken':_0x2ec575[a5_0x20fc('0x3c')][a5_0x20fc('0x44')]})[a5_0x20fc('0x45')](a5_0x20fc('0x46'))['gt'](Date[a5_0x20fc('0x47')]())['exec']((_0x4e7250,_0x2371aa)=>{if(_0x4e7250){return _0x5eef94(_0x4e7250);}if(!_0x2371aa){_0x2ec575[a5_0x20fc('0x13')]('errors',{'msg':a5_0x20fc('0x48')});return _0x94c5b9[a5_0x20fc('0x8')](a5_0x20fc('0x49'));}_0x94c5b9[a5_0x20fc('0x9')](a5_0x20fc('0x4a'),{'title':a5_0x20fc('0x4b')});});};exports[a5_0x20fc('0x4c')]=(_0x492396,_0x4c98dc,_0x35767a)=>{_0x492396[a5_0x20fc('0xc')](a5_0x20fc('0x10'),a5_0x20fc('0x4d'))[a5_0x20fc('0x24')]({'min':0x4});_0x492396[a5_0x20fc('0xc')](a5_0x20fc('0x4e'),a5_0x20fc('0x4f'))[a5_0x20fc('0x27')](_0x492396[a5_0x20fc('0x2b')][a5_0x20fc('0x10')]);const _0x4cb28f=_0x492396[a5_0x20fc('0x29')]();if(_0x4cb28f){_0x492396['flash']('errors',_0x4cb28f);return _0x4c98dc['redirect']('back');}async_1['default'][a5_0x20fc('0x50')]([function resetPassword(_0x1c18a9){User_1['default'][a5_0x20fc('0x51')]({'passwordResetToken':_0x492396[a5_0x20fc('0x3c')]['token']})[a5_0x20fc('0x45')](a5_0x20fc('0x46'))['gt'](Date[a5_0x20fc('0x47')]())[a5_0x20fc('0x52')]((_0x396461,_0x28f387)=>{if(_0x396461){return _0x35767a(_0x396461);}if(!_0x28f387){_0x492396[a5_0x20fc('0x13')](a5_0x20fc('0x14'),{'msg':a5_0x20fc('0x48')});return _0x4c98dc[a5_0x20fc('0x8')](a5_0x20fc('0x53'));}_0x28f387['password']=_0x492396[a5_0x20fc('0x2b')][a5_0x20fc('0x10')];_0x28f387[a5_0x20fc('0x54')]=undefined;_0x28f387['passwordResetExpires']=undefined;_0x28f387[a5_0x20fc('0x2c')](_0x396461=>{if(_0x396461){return _0x35767a(_0x396461);}_0x492396[a5_0x20fc('0x1a')](_0x28f387,_0x396461=>{_0x1c18a9(_0x396461,_0x28f387);});});});},function sendResetPasswordEmail(_0x1effdb,_0x13bf69){const _0x5ca218=nodemailer_1[a5_0x20fc('0x16')]['createTransport']({'service':a5_0x20fc('0x55'),'auth':{'user':process[a5_0x20fc('0x56')][a5_0x20fc('0x57')],'pass':process[a5_0x20fc('0x56')][a5_0x20fc('0x58')]}});const _0x30e6e1={'to':_0x1effdb[a5_0x20fc('0xd')],'from':a5_0x20fc('0x59'),'subject':a5_0x20fc('0x5a'),'text':a5_0x20fc('0x5b')+_0x1effdb[a5_0x20fc('0xd')]+a5_0x20fc('0x5c')};_0x5ca218[a5_0x20fc('0x5d')](_0x30e6e1,_0x206a18=>{_0x492396[a5_0x20fc('0x13')](a5_0x20fc('0x1b'),{'msg':a5_0x20fc('0x5e')});_0x13bf69(_0x206a18);});}],_0x510538=>{if(_0x510538){return _0x35767a(_0x510538);}_0x4c98dc['redirect']('/');});};exports[a5_0x20fc('0x5f')]=(_0x46c922,_0x974e32)=>{if(_0x46c922['isAuthenticated']()){return _0x974e32[a5_0x20fc('0x8')]('/');}_0x974e32['render']('account/forgot',{'title':a5_0x20fc('0x60')});};exports[a5_0x20fc('0x61')]=(_0x1121b9,_0x373a3e,_0x68f487)=>{_0x1121b9[a5_0x20fc('0xc')](a5_0x20fc('0xd'),a5_0x20fc('0x30'))[a5_0x20fc('0xf')]();_0x1121b9[a5_0x20fc('0x28')](a5_0x20fc('0xd'))[a5_0x20fc('0x12')]({'gmail_remove_dots':![]});const _0x34000c=_0x1121b9['validationErrors']();if(_0x34000c){_0x1121b9[a5_0x20fc('0x13')](a5_0x20fc('0x14'),_0x34000c);return _0x373a3e[a5_0x20fc('0x8')](a5_0x20fc('0x49'));}async_1[a5_0x20fc('0x16')]['waterfall']([function createRandomToken(_0x18bf4f){crypto_1[a5_0x20fc('0x16')][a5_0x20fc('0x62')](0x10,(_0x12d791,_0x1efa9c)=>{const _0x50805c=_0x1efa9c[a5_0x20fc('0x63')](a5_0x20fc('0x64'));_0x18bf4f(_0x12d791,_0x50805c);});},function setRandomToken(_0x30cd6e,_0x1b52cf){User_1['default'][a5_0x20fc('0x51')]({'email':_0x1121b9[a5_0x20fc('0x2b')][a5_0x20fc('0xd')]},(_0x1de114,_0x165afb)=>{if(_0x1de114){return _0x1b52cf(_0x1de114);}if(!_0x165afb){_0x1121b9[a5_0x20fc('0x13')](a5_0x20fc('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x373a3e[a5_0x20fc('0x8')](a5_0x20fc('0x49'));}_0x165afb['passwordResetToken']=_0x30cd6e;_0x165afb['passwordResetExpires']=Date[a5_0x20fc('0x47')]()+0x36ee80;_0x165afb[a5_0x20fc('0x2c')](_0x1de114=>{_0x1b52cf(_0x1de114,_0x30cd6e,_0x165afb);});});},function sendForgotPasswordEmail(_0x1e6529,_0x87f730,_0x154b3a){const _0x207720=nodemailer_1[a5_0x20fc('0x16')]['createTransport']({'service':a5_0x20fc('0x55'),'auth':{'user':process[a5_0x20fc('0x56')][a5_0x20fc('0x57')],'pass':process['env'][a5_0x20fc('0x58')]}});const _0x354ff4={'to':_0x87f730[a5_0x20fc('0xd')],'from':'hackathon@starter.com','subject':a5_0x20fc('0x65'),'text':a5_0x20fc('0x66')+_0x1121b9[a5_0x20fc('0x67')][a5_0x20fc('0x68')]+a5_0x20fc('0x69')+_0x1e6529+a5_0x20fc('0x6a')};_0x207720['sendMail'](_0x354ff4,_0x50753f=>{_0x1121b9['flash']('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x87f730[a5_0x20fc('0xd')]+a5_0x20fc('0x6b')});_0x154b3a(_0x50753f);});}],_0xf66fae=>{if(_0xf66fae){return _0x68f487(_0xf66fae);}_0x373a3e['redirect'](a5_0x20fc('0x49'));});};