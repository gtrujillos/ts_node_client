var a5_0x4380=['/signup','findOne','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','confirmPassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','getOauthUnlink','params','provider','tokens','filter','kind','getReset','isAuthenticated','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','token','back','passwordResetToken','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','postForgot','/forgot','waterfall','hex','createTransport','SendGrid','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','../models/User','user','redirect','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','sanitize','validationErrors','flash','errors','/login','default','authenticate','local','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','account/signup','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','normalizeEmail'];(function(_0x5c6fb8,_0x3c6e9b){var _0x3ad2b0=function(_0x1fbb19){while(--_0x1fbb19){_0x5c6fb8['push'](_0x5c6fb8['shift']());}};_0x3ad2b0(++_0x3c6e9b);}(a5_0x4380,0x174));var a5_0x3194=function(_0x38cad8,_0xd1fef){_0x38cad8=_0x38cad8-0x0;var _0x2d461f=a5_0x4380[_0x38cad8];return _0x2d461f;};'use strict';var __importDefault=this&&this[a5_0x3194('0x0')]||function(_0xa17f9c){return _0xa17f9c&&_0xa17f9c[a5_0x3194('0x1')]?_0xa17f9c:{'default':_0xa17f9c};};Object['defineProperty'](exports,a5_0x3194('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x3194('0x2')));const crypto_1=__importDefault(require(a5_0x3194('0x3')));const nodemailer_1=__importDefault(require(a5_0x3194('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x3194('0x5')));const request=require('express-validator');exports['getLogin']=(_0x3f31f9,_0x47f840)=>{if(_0x3f31f9[a5_0x3194('0x6')]){return _0x47f840[a5_0x3194('0x7')]('/');}_0x47f840[a5_0x3194('0x8')]('account/login',{'title':a5_0x3194('0x9')});};exports[a5_0x3194('0xa')]=(_0x195e60,_0x28aa2f,_0xe76a30)=>{_0x195e60[a5_0x3194('0xb')](a5_0x3194('0xc'),a5_0x3194('0xd'))[a5_0x3194('0xe')]();_0x195e60[a5_0x3194('0xb')](a5_0x3194('0xf'),'Password\x20cannot\x20be\x20blank')[a5_0x3194('0x10')]();_0x195e60[a5_0x3194('0x11')](a5_0x3194('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x399f32=_0x195e60[a5_0x3194('0x12')]();if(_0x399f32){_0x195e60[a5_0x3194('0x13')](a5_0x3194('0x14'),_0x399f32);return _0x28aa2f[a5_0x3194('0x7')](a5_0x3194('0x15'));}passport_1[a5_0x3194('0x16')][a5_0x3194('0x17')](a5_0x3194('0x18'),(_0x5aa811,_0x43bcd3,_0x11090c)=>{if(_0x5aa811){return _0xe76a30(_0x5aa811);}if(!_0x43bcd3){_0x195e60[a5_0x3194('0x13')](a5_0x3194('0x14'),_0x11090c['message']);return _0x28aa2f[a5_0x3194('0x7')](a5_0x3194('0x15'));}_0x195e60[a5_0x3194('0x19')](_0x43bcd3,_0x5aa811=>{if(_0x5aa811){return _0xe76a30(_0x5aa811);}_0x195e60[a5_0x3194('0x13')](a5_0x3194('0x1a'),{'msg':a5_0x3194('0x1b')});_0x28aa2f['redirect'](_0x195e60['session'][a5_0x3194('0x1c')]||'/');});})(_0x195e60,_0x28aa2f,_0xe76a30);};exports[a5_0x3194('0x1d')]=(_0x49ce53,_0x5babb5)=>{_0x49ce53[a5_0x3194('0x1d')]();_0x5babb5[a5_0x3194('0x7')]('/');};exports['getSignup']=(_0x2a64ff,_0x5de3e6)=>{if(_0x2a64ff[a5_0x3194('0x6')]){return _0x5de3e6[a5_0x3194('0x7')]('/');}_0x5de3e6[a5_0x3194('0x8')](a5_0x3194('0x1e'),{'title':'Create\x20Account'});};exports[a5_0x3194('0x1f')]=(_0x18b7e0,_0x773f70,_0x4d4bab)=>{_0x18b7e0['assert']('email','Email\x20is\x20not\x20valid')[a5_0x3194('0xe')]();_0x18b7e0[a5_0x3194('0xb')](a5_0x3194('0xf'),a5_0x3194('0x20'))['len']({'min':0x4});_0x18b7e0[a5_0x3194('0xb')]('confirmPassword',a5_0x3194('0x21'))[a5_0x3194('0x22')](_0x18b7e0['body'][a5_0x3194('0xf')]);_0x18b7e0[a5_0x3194('0x11')](a5_0x3194('0xc'))[a5_0x3194('0x23')]({'gmail_remove_dots':![]});const _0x14cc65=_0x18b7e0['validationErrors']();if(_0x14cc65){_0x18b7e0[a5_0x3194('0x13')]('errors',_0x14cc65);return _0x773f70[a5_0x3194('0x7')](a5_0x3194('0x24'));}const _0x294685=new User_1['default']({});User_1[a5_0x3194('0x16')][a5_0x3194('0x25')]({'email':_0x18b7e0[a5_0x3194('0x26')][a5_0x3194('0xc')]},(_0x11e4e0,_0x3ad0e6)=>{if(_0x11e4e0){return _0x4d4bab(_0x11e4e0);}if(_0x3ad0e6){_0x18b7e0[a5_0x3194('0x13')]('errors',{'msg':a5_0x3194('0x27')});return _0x773f70[a5_0x3194('0x7')](a5_0x3194('0x24'));}_0x294685[a5_0x3194('0x28')](_0x11e4e0=>{if(_0x11e4e0){return _0x4d4bab(_0x11e4e0);}_0x18b7e0[a5_0x3194('0x19')](_0x294685,_0x11e4e0=>{if(_0x11e4e0){return _0x4d4bab(_0x11e4e0);}_0x773f70[a5_0x3194('0x7')]('/');});});});};exports['getAccount']=(_0x15eaaf,_0x3dcb1b)=>{_0x3dcb1b[a5_0x3194('0x8')]('account/profile',{'title':a5_0x3194('0x29')});};exports['postUpdateProfile']=(_0x1102ab,_0x3a0c14,_0x1a247b)=>{_0x1102ab['assert'](a5_0x3194('0xc'),a5_0x3194('0x2a'))[a5_0x3194('0xe')]();_0x1102ab['sanitize'](a5_0x3194('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xa20091=_0x1102ab[a5_0x3194('0x12')]();if(_0xa20091){_0x1102ab['flash']('errors',_0xa20091);return _0x3a0c14[a5_0x3194('0x7')](a5_0x3194('0x2b'));}User_1[a5_0x3194('0x16')][a5_0x3194('0x2c')](_0x1102ab[a5_0x3194('0x6')]['id'],(_0x461275,_0x4416a4)=>{if(_0x461275){return _0x1a247b(_0x461275);}_0x4416a4['email']=_0x1102ab[a5_0x3194('0x26')][a5_0x3194('0xc')]||'';_0x4416a4[a5_0x3194('0x2d')][a5_0x3194('0x2e')]=_0x1102ab[a5_0x3194('0x26')][a5_0x3194('0x2e')]||'';_0x4416a4[a5_0x3194('0x2d')][a5_0x3194('0x2f')]=_0x1102ab[a5_0x3194('0x26')][a5_0x3194('0x2f')]||'';_0x4416a4['profile'][a5_0x3194('0x30')]=_0x1102ab[a5_0x3194('0x26')][a5_0x3194('0x30')]||'';_0x4416a4[a5_0x3194('0x2d')]['website']=_0x1102ab['body'][a5_0x3194('0x31')]||'';_0x4416a4['save'](_0x461275=>{if(_0x461275){if(_0x461275[a5_0x3194('0x32')]===0x2af8){_0x1102ab[a5_0x3194('0x13')](a5_0x3194('0x14'),{'msg':a5_0x3194('0x33')});return _0x3a0c14['redirect']('/account');}return _0x1a247b(_0x461275);}_0x1102ab[a5_0x3194('0x13')](a5_0x3194('0x1a'),{'msg':a5_0x3194('0x34')});_0x3a0c14[a5_0x3194('0x7')](a5_0x3194('0x2b'));});});};exports[a5_0x3194('0x35')]=(_0x5080d0,_0x56f392,_0x2a9317)=>{_0x5080d0[a5_0x3194('0xb')](a5_0x3194('0xf'),a5_0x3194('0x20'))[a5_0x3194('0x36')]({'min':0x4});_0x5080d0['assert'](a5_0x3194('0x37'),a5_0x3194('0x21'))['equals'](_0x5080d0['body'][a5_0x3194('0xf')]);const _0x44f6ae=_0x5080d0[a5_0x3194('0x12')]();if(_0x44f6ae){_0x5080d0['flash']('errors',_0x44f6ae);return _0x56f392[a5_0x3194('0x7')](a5_0x3194('0x2b'));}User_1[a5_0x3194('0x16')][a5_0x3194('0x2c')](_0x5080d0[a5_0x3194('0x6')]['id'],(_0x1b7faf,_0x23d1e0)=>{if(_0x1b7faf){return _0x2a9317(_0x1b7faf);}_0x23d1e0[a5_0x3194('0xf')]=_0x5080d0['body']['password'];_0x23d1e0[a5_0x3194('0x28')](_0x1b7faf=>{if(_0x1b7faf){return _0x2a9317(_0x1b7faf);}_0x5080d0[a5_0x3194('0x13')]('success',{'msg':a5_0x3194('0x38')});_0x56f392[a5_0x3194('0x7')](a5_0x3194('0x2b'));});});};exports[a5_0x3194('0x39')]=(_0x442ede,_0x262550,_0x1e7e97)=>{User_1[a5_0x3194('0x16')][a5_0x3194('0x3a')]({'_id':_0x442ede[a5_0x3194('0x6')]['id']},_0x4bbf93=>{if(_0x4bbf93){return _0x1e7e97(_0x4bbf93);}_0x442ede[a5_0x3194('0x1d')]();_0x442ede[a5_0x3194('0x13')](a5_0x3194('0x3b'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x262550[a5_0x3194('0x7')]('/');});};exports[a5_0x3194('0x3c')]=(_0x3feaf6,_0x31f05b,_0x3918a6)=>{const _0x16d340=_0x3feaf6[a5_0x3194('0x3d')][a5_0x3194('0x3e')];User_1[a5_0x3194('0x16')][a5_0x3194('0x2c')](_0x3feaf6[a5_0x3194('0x6')]['id'],(_0x54dc72,_0x29a84d)=>{if(_0x54dc72){return _0x3918a6(_0x54dc72);}_0x29a84d[_0x16d340]=undefined;_0x29a84d[a5_0x3194('0x3f')]=_0x29a84d[a5_0x3194('0x3f')][a5_0x3194('0x40')](_0x1a1d02=>_0x1a1d02[a5_0x3194('0x41')]!==_0x16d340);_0x29a84d[a5_0x3194('0x28')](_0x54dc72=>{if(_0x54dc72){return _0x3918a6(_0x54dc72);}_0x3feaf6[a5_0x3194('0x13')]('info',{'msg':_0x16d340+'\x20account\x20has\x20been\x20unlinked.'});_0x31f05b[a5_0x3194('0x7')]('/account');});});};exports[a5_0x3194('0x42')]=(_0x1f436c,_0x4ec677,_0x24b3df)=>{if(_0x1f436c[a5_0x3194('0x43')]()){return _0x4ec677[a5_0x3194('0x7')]('/');}User_1['default']['findOne']({'passwordResetToken':_0x1f436c[a5_0x3194('0x3d')]['token']})[a5_0x3194('0x44')](a5_0x3194('0x45'))['gt'](Date[a5_0x3194('0x46')]())[a5_0x3194('0x47')]((_0x228401,_0x1fa739)=>{if(_0x228401){return _0x24b3df(_0x228401);}if(!_0x1fa739){_0x1f436c[a5_0x3194('0x13')](a5_0x3194('0x14'),{'msg':a5_0x3194('0x48')});return _0x4ec677[a5_0x3194('0x7')]('/forgot');}_0x4ec677[a5_0x3194('0x8')](a5_0x3194('0x49'),{'title':a5_0x3194('0x4a')});});};exports['postReset']=(_0x5bde94,_0x487cc9,_0x2da4f0)=>{_0x5bde94['assert'](a5_0x3194('0xf'),a5_0x3194('0x4b'))['len']({'min':0x4});_0x5bde94[a5_0x3194('0xb')](a5_0x3194('0x4c'),a5_0x3194('0x4d'))[a5_0x3194('0x22')](_0x5bde94[a5_0x3194('0x26')][a5_0x3194('0xf')]);const _0x3816f7=_0x5bde94[a5_0x3194('0x12')]();if(_0x3816f7){_0x5bde94['flash'](a5_0x3194('0x14'),_0x3816f7);return _0x487cc9['redirect']('back');}async_1['default']['waterfall']([function resetPassword(_0x49b0df){User_1[a5_0x3194('0x16')]['findOne']({'passwordResetToken':_0x5bde94[a5_0x3194('0x3d')][a5_0x3194('0x4e')]})[a5_0x3194('0x44')](a5_0x3194('0x45'))['gt'](Date[a5_0x3194('0x46')]())[a5_0x3194('0x47')]((_0x6f5aad,_0x2406d6)=>{if(_0x6f5aad){return _0x2da4f0(_0x6f5aad);}if(!_0x2406d6){_0x5bde94[a5_0x3194('0x13')](a5_0x3194('0x14'),{'msg':a5_0x3194('0x48')});return _0x487cc9[a5_0x3194('0x7')](a5_0x3194('0x4f'));}_0x2406d6[a5_0x3194('0xf')]=_0x5bde94[a5_0x3194('0x26')]['password'];_0x2406d6[a5_0x3194('0x50')]=undefined;_0x2406d6[a5_0x3194('0x45')]=undefined;_0x2406d6['save'](_0x6f5aad=>{if(_0x6f5aad){return _0x2da4f0(_0x6f5aad);}_0x5bde94[a5_0x3194('0x19')](_0x2406d6,_0x6f5aad=>{_0x49b0df(_0x6f5aad,_0x2406d6);});});});},function sendResetPasswordEmail(_0x21d0ca,_0x4c0cb2){const _0x4ba64a=nodemailer_1[a5_0x3194('0x16')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0x3194('0x51')][a5_0x3194('0x52')],'pass':process[a5_0x3194('0x51')][a5_0x3194('0x53')]}});const _0x56c84b={'to':_0x21d0ca['email'],'from':a5_0x3194('0x54'),'subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x21d0ca[a5_0x3194('0xc')]+a5_0x3194('0x55')};_0x4ba64a[a5_0x3194('0x56')](_0x56c84b,_0x54528f=>{_0x5bde94[a5_0x3194('0x13')](a5_0x3194('0x1a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x4c0cb2(_0x54528f);});}],_0x37d4da=>{if(_0x37d4da){return _0x2da4f0(_0x37d4da);}_0x487cc9[a5_0x3194('0x7')]('/');});};exports[a5_0x3194('0x57')]=(_0x4bee5c,_0x1e6be9)=>{if(_0x4bee5c[a5_0x3194('0x43')]()){return _0x1e6be9[a5_0x3194('0x7')]('/');}_0x1e6be9[a5_0x3194('0x8')](a5_0x3194('0x58'),{'title':'Forgot\x20Password'});};exports[a5_0x3194('0x59')]=(_0x3f79c9,_0x1e2da8,_0x3aa9da)=>{_0x3f79c9[a5_0x3194('0xb')](a5_0x3194('0xc'),a5_0x3194('0x2a'))['isEmail']();_0x3f79c9[a5_0x3194('0x11')](a5_0x3194('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xb1048a=_0x3f79c9[a5_0x3194('0x12')]();if(_0xb1048a){_0x3f79c9[a5_0x3194('0x13')](a5_0x3194('0x14'),_0xb1048a);return _0x1e2da8[a5_0x3194('0x7')](a5_0x3194('0x5a'));}async_1[a5_0x3194('0x16')][a5_0x3194('0x5b')]([function createRandomToken(_0x38cc30){crypto_1[a5_0x3194('0x16')]['randomBytes'](0x10,(_0x2771a1,_0x3a4abd)=>{const _0x3b894f=_0x3a4abd['toString'](a5_0x3194('0x5c'));_0x38cc30(_0x2771a1,_0x3b894f);});},function setRandomToken(_0xfd57fb,_0x2cc592){User_1['default'][a5_0x3194('0x25')]({'email':_0x3f79c9[a5_0x3194('0x26')][a5_0x3194('0xc')]},(_0xc0f2bc,_0x320901)=>{if(_0xc0f2bc){return _0x2cc592(_0xc0f2bc);}if(!_0x320901){_0x3f79c9[a5_0x3194('0x13')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x1e2da8[a5_0x3194('0x7')]('/forgot');}_0x320901[a5_0x3194('0x50')]=_0xfd57fb;_0x320901[a5_0x3194('0x45')]=Date[a5_0x3194('0x46')]()+0x36ee80;_0x320901[a5_0x3194('0x28')](_0xc0f2bc=>{_0x2cc592(_0xc0f2bc,_0xfd57fb,_0x320901);});});},function sendForgotPasswordEmail(_0x58e328,_0x1f7b20,_0x39c76a){const _0x467e60=nodemailer_1[a5_0x3194('0x16')][a5_0x3194('0x5d')]({'service':a5_0x3194('0x5e'),'auth':{'user':process['env'][a5_0x3194('0x52')],'pass':process[a5_0x3194('0x51')][a5_0x3194('0x53')]}});const _0x5b9ad7={'to':_0x1f7b20['email'],'from':a5_0x3194('0x5f'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x3194('0x60')+_0x3f79c9[a5_0x3194('0x61')][a5_0x3194('0x62')]+a5_0x3194('0x63')+_0x58e328+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x467e60[a5_0x3194('0x56')](_0x5b9ad7,_0x2f3afb=>{_0x3f79c9['flash'](a5_0x3194('0x3b'),{'msg':a5_0x3194('0x64')+_0x1f7b20[a5_0x3194('0xc')]+a5_0x3194('0x65')});_0x39c76a(_0x2f3afb);});}],_0x8bd3fb=>{if(_0x8bd3fb){return _0x3aa9da(_0x8bd3fb);}_0x1e2da8[a5_0x3194('0x7')](a5_0x3194('0x5a'));});};