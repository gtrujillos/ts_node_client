var a5_0xad0f=['provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','createTransport','SendGrid','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','env','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','passport','express-validator','user','redirect','render','account/login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','success','session','returnTo','logout','getSignup','Create\x20Account','len','confirmPassword','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params'];(function(_0x34701c,_0x54200d){var _0x29d32c=function(_0x86fb1){while(--_0x86fb1){_0x34701c['push'](_0x34701c['shift']());}};_0x29d32c(++_0x54200d);}(a5_0xad0f,0x104));var a5_0x1bb6=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a5_0xad0f[_0x2d8f05];return _0x4d74cb;};'use strict';var __importDefault=this&&this[a5_0x1bb6('0x0')]||function(_0x53b8d3){return _0x53b8d3&&_0x53b8d3[a5_0x1bb6('0x1')]?_0x53b8d3:{'default':_0x53b8d3};};Object[a5_0x1bb6('0x2')](exports,a5_0x1bb6('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x1bb6('0x3')));const crypto_1=__importDefault(require(a5_0x1bb6('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x1bb6('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x1bb6('0x6'));exports['getLogin']=(_0x4fd85e,_0x3a7918)=>{if(_0x4fd85e[a5_0x1bb6('0x7')]){return _0x3a7918[a5_0x1bb6('0x8')]('/');}_0x3a7918[a5_0x1bb6('0x9')](a5_0x1bb6('0xa'),{'title':'Login'});};exports[a5_0x1bb6('0xb')]=(_0x5498ab,_0x3ac0a5,_0xd46589)=>{_0x5498ab['assert'](a5_0x1bb6('0xc'),a5_0x1bb6('0xd'))[a5_0x1bb6('0xe')]();_0x5498ab[a5_0x1bb6('0xf')](a5_0x1bb6('0x10'),a5_0x1bb6('0x11'))[a5_0x1bb6('0x12')]();_0x5498ab[a5_0x1bb6('0x13')](a5_0x1bb6('0xc'))[a5_0x1bb6('0x14')]({'gmail_remove_dots':![]});const _0x11aa25=_0x5498ab[a5_0x1bb6('0x15')]();if(_0x11aa25){_0x5498ab[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),_0x11aa25);return _0x3ac0a5[a5_0x1bb6('0x8')](a5_0x1bb6('0x18'));}passport_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x1a')](a5_0x1bb6('0x1b'),(_0x293a34,_0x56dbfc,_0x4b8d2d)=>{if(_0x293a34){return _0xd46589(_0x293a34);}if(!_0x56dbfc){_0x5498ab[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),_0x4b8d2d[a5_0x1bb6('0x1c')]);return _0x3ac0a5['redirect']('/login');}_0x5498ab[a5_0x1bb6('0x1d')](_0x56dbfc,_0x293a34=>{if(_0x293a34){return _0xd46589(_0x293a34);}_0x5498ab[a5_0x1bb6('0x16')](a5_0x1bb6('0x1e'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x3ac0a5[a5_0x1bb6('0x8')](_0x5498ab[a5_0x1bb6('0x1f')][a5_0x1bb6('0x20')]||'/');});})(_0x5498ab,_0x3ac0a5,_0xd46589);};exports[a5_0x1bb6('0x21')]=(_0x5d9fe1,_0x34cb0f)=>{_0x5d9fe1[a5_0x1bb6('0x21')]();_0x34cb0f[a5_0x1bb6('0x8')]('/');};exports[a5_0x1bb6('0x22')]=(_0x477a9f,_0x58e20b)=>{if(_0x477a9f['user']){return _0x58e20b[a5_0x1bb6('0x8')]('/');}_0x58e20b[a5_0x1bb6('0x9')]('account/signup',{'title':a5_0x1bb6('0x23')});};exports['postSignup']=(_0x2471d1,_0x19c7e1,_0x33fc19)=>{_0x2471d1['assert']('email',a5_0x1bb6('0xd'))[a5_0x1bb6('0xe')]();_0x2471d1[a5_0x1bb6('0xf')](a5_0x1bb6('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x1bb6('0x24')]({'min':0x4});_0x2471d1[a5_0x1bb6('0xf')](a5_0x1bb6('0x25'),'Passwords\x20do\x20not\x20match')[a5_0x1bb6('0x26')](_0x2471d1[a5_0x1bb6('0x27')][a5_0x1bb6('0x10')]);_0x2471d1[a5_0x1bb6('0x13')](a5_0x1bb6('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x59303e=_0x2471d1[a5_0x1bb6('0x15')]();if(_0x59303e){_0x2471d1[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),_0x59303e);return _0x19c7e1[a5_0x1bb6('0x8')](a5_0x1bb6('0x28'));}const _0x35404d=new User_1['default']({'email':_0x2471d1['body'][a5_0x1bb6('0xc')],'password':_0x2471d1[a5_0x1bb6('0x27')]['password']});User_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x29')]({'email':_0x2471d1[a5_0x1bb6('0x27')][a5_0x1bb6('0xc')]},(_0x24d5ee,_0x2dd2b1)=>{if(_0x24d5ee){return _0x33fc19(_0x24d5ee);}if(_0x2dd2b1){_0x2471d1[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),{'msg':a5_0x1bb6('0x2a')});return _0x19c7e1[a5_0x1bb6('0x8')](a5_0x1bb6('0x28'));}_0x35404d[a5_0x1bb6('0x2b')](_0x24d5ee=>{if(_0x24d5ee){return _0x33fc19(_0x24d5ee);}_0x2471d1[a5_0x1bb6('0x1d')](_0x35404d,_0x24d5ee=>{if(_0x24d5ee){return _0x33fc19(_0x24d5ee);}_0x19c7e1[a5_0x1bb6('0x8')]('/');});});});};exports['getAccount']=(_0x40f821,_0x58e97b)=>{_0x58e97b[a5_0x1bb6('0x9')](a5_0x1bb6('0x2c'),{'title':a5_0x1bb6('0x2d')});};exports[a5_0x1bb6('0x2e')]=(_0x2df7e0,_0x6343e,_0x49340a)=>{_0x2df7e0[a5_0x1bb6('0xf')]('email',a5_0x1bb6('0x2f'))[a5_0x1bb6('0xe')]();_0x2df7e0[a5_0x1bb6('0x13')](a5_0x1bb6('0xc'))[a5_0x1bb6('0x14')]({'gmail_remove_dots':![]});const _0x51bd42=_0x2df7e0['validationErrors']();if(_0x51bd42){_0x2df7e0[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),_0x51bd42);return _0x6343e[a5_0x1bb6('0x8')](a5_0x1bb6('0x30'));}User_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x31')](_0x2df7e0[a5_0x1bb6('0x7')]['id'],(_0x1bacde,_0x3e1b7e)=>{if(_0x1bacde){return _0x49340a(_0x1bacde);}_0x3e1b7e[a5_0x1bb6('0xc')]=_0x2df7e0[a5_0x1bb6('0x27')][a5_0x1bb6('0xc')]||'';_0x3e1b7e['profile'][a5_0x1bb6('0x32')]=_0x2df7e0[a5_0x1bb6('0x27')][a5_0x1bb6('0x32')]||'';_0x3e1b7e[a5_0x1bb6('0x33')][a5_0x1bb6('0x34')]=_0x2df7e0['body'][a5_0x1bb6('0x34')]||'';_0x3e1b7e[a5_0x1bb6('0x33')][a5_0x1bb6('0x35')]=_0x2df7e0[a5_0x1bb6('0x27')][a5_0x1bb6('0x35')]||'';_0x3e1b7e[a5_0x1bb6('0x33')][a5_0x1bb6('0x36')]=_0x2df7e0[a5_0x1bb6('0x27')][a5_0x1bb6('0x36')]||'';_0x3e1b7e[a5_0x1bb6('0x2b')](_0x1bacde=>{if(_0x1bacde){if(_0x1bacde['code']===0x2af8){_0x2df7e0['flash'](a5_0x1bb6('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x6343e[a5_0x1bb6('0x8')](a5_0x1bb6('0x30'));}return _0x49340a(_0x1bacde);}_0x2df7e0[a5_0x1bb6('0x16')]('success',{'msg':a5_0x1bb6('0x37')});_0x6343e['redirect'](a5_0x1bb6('0x30'));});});};exports[a5_0x1bb6('0x38')]=(_0x47862b,_0x47ab08,_0x311a93)=>{_0x47862b[a5_0x1bb6('0xf')](a5_0x1bb6('0x10'),a5_0x1bb6('0x39'))[a5_0x1bb6('0x24')]({'min':0x4});_0x47862b[a5_0x1bb6('0xf')]('confirmPassword','Passwords\x20do\x20not\x20match')['equals'](_0x47862b[a5_0x1bb6('0x27')][a5_0x1bb6('0x10')]);const _0x900df=_0x47862b[a5_0x1bb6('0x15')]();if(_0x900df){_0x47862b[a5_0x1bb6('0x16')]('errors',_0x900df);return _0x47ab08['redirect'](a5_0x1bb6('0x30'));}User_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x31')](_0x47862b[a5_0x1bb6('0x7')]['id'],(_0x3a8370,_0x2b0f43)=>{if(_0x3a8370){return _0x311a93(_0x3a8370);}_0x2b0f43[a5_0x1bb6('0x10')]=_0x47862b[a5_0x1bb6('0x27')][a5_0x1bb6('0x10')];_0x2b0f43[a5_0x1bb6('0x2b')](_0x3a8370=>{if(_0x3a8370){return _0x311a93(_0x3a8370);}_0x47862b[a5_0x1bb6('0x16')](a5_0x1bb6('0x1e'),{'msg':a5_0x1bb6('0x3a')});_0x47ab08[a5_0x1bb6('0x8')](a5_0x1bb6('0x30'));});});};exports['postDeleteAccount']=(_0x55df02,_0x357044,_0x3a108f)=>{User_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x3b')]({'_id':_0x55df02['user']['id']},_0x16ace7=>{if(_0x16ace7){return _0x3a108f(_0x16ace7);}_0x55df02['logout']();_0x55df02[a5_0x1bb6('0x16')](a5_0x1bb6('0x3c'),{'msg':a5_0x1bb6('0x3d')});_0x357044[a5_0x1bb6('0x8')]('/');});};exports[a5_0x1bb6('0x3e')]=(_0x3fa8e0,_0x58f5f3,_0x4e8c66)=>{const _0x35c6bc=_0x3fa8e0[a5_0x1bb6('0x3f')][a5_0x1bb6('0x40')];User_1['default'][a5_0x1bb6('0x31')](_0x3fa8e0['user']['id'],(_0x5636a2,_0x1f52ea)=>{if(_0x5636a2){return _0x4e8c66(_0x5636a2);}_0x1f52ea[_0x35c6bc]=undefined;_0x1f52ea[a5_0x1bb6('0x41')]=_0x1f52ea[a5_0x1bb6('0x41')][a5_0x1bb6('0x42')](_0x49fee1=>_0x49fee1[a5_0x1bb6('0x43')]!==_0x35c6bc);_0x1f52ea[a5_0x1bb6('0x2b')](_0x5636a2=>{if(_0x5636a2){return _0x4e8c66(_0x5636a2);}_0x3fa8e0['flash'](a5_0x1bb6('0x3c'),{'msg':_0x35c6bc+a5_0x1bb6('0x44')});_0x58f5f3['redirect'](a5_0x1bb6('0x30'));});});};exports['getReset']=(_0x15755e,_0x45ea36,_0x90c7f1)=>{if(_0x15755e['isAuthenticated']()){return _0x45ea36[a5_0x1bb6('0x8')]('/');}User_1[a5_0x1bb6('0x19')]['findOne']({'passwordResetToken':_0x15755e[a5_0x1bb6('0x3f')][a5_0x1bb6('0x45')]})[a5_0x1bb6('0x46')](a5_0x1bb6('0x47'))['gt'](Date[a5_0x1bb6('0x48')]())[a5_0x1bb6('0x49')]((_0x5beebf,_0x1ae81b)=>{if(_0x5beebf){return _0x90c7f1(_0x5beebf);}if(!_0x1ae81b){_0x15755e[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),{'msg':a5_0x1bb6('0x4a')});return _0x45ea36[a5_0x1bb6('0x8')](a5_0x1bb6('0x4b'));}_0x45ea36[a5_0x1bb6('0x9')](a5_0x1bb6('0x4c'),{'title':a5_0x1bb6('0x4d')});});};exports[a5_0x1bb6('0x4e')]=(_0x213bb1,_0x5bcb40,_0x4cff6c)=>{_0x213bb1['assert'](a5_0x1bb6('0x10'),a5_0x1bb6('0x4f'))[a5_0x1bb6('0x24')]({'min':0x4});_0x213bb1['assert'](a5_0x1bb6('0x50'),a5_0x1bb6('0x51'))[a5_0x1bb6('0x26')](_0x213bb1[a5_0x1bb6('0x27')][a5_0x1bb6('0x10')]);const _0x3f016d=_0x213bb1[a5_0x1bb6('0x15')]();if(_0x3f016d){_0x213bb1[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),_0x3f016d);return _0x5bcb40['redirect'](a5_0x1bb6('0x52'));}async_1['default'][a5_0x1bb6('0x53')]([function resetPassword(_0x25ade7){User_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x29')]({'passwordResetToken':_0x213bb1['params'][a5_0x1bb6('0x45')]})[a5_0x1bb6('0x46')]('passwordResetExpires')['gt'](Date[a5_0x1bb6('0x48')]())[a5_0x1bb6('0x49')]((_0x1552ed,_0x350d0c)=>{if(_0x1552ed){return _0x4cff6c(_0x1552ed);}if(!_0x350d0c){_0x213bb1[a5_0x1bb6('0x16')](a5_0x1bb6('0x17'),{'msg':a5_0x1bb6('0x4a')});return _0x5bcb40[a5_0x1bb6('0x8')](a5_0x1bb6('0x52'));}_0x350d0c[a5_0x1bb6('0x10')]=_0x213bb1[a5_0x1bb6('0x27')][a5_0x1bb6('0x10')];_0x350d0c[a5_0x1bb6('0x54')]=undefined;_0x350d0c[a5_0x1bb6('0x47')]=undefined;_0x350d0c[a5_0x1bb6('0x2b')](_0x1552ed=>{if(_0x1552ed){return _0x4cff6c(_0x1552ed);}_0x213bb1['logIn'](_0x350d0c,_0x1552ed=>{_0x25ade7(_0x1552ed,_0x350d0c);});});});},function sendResetPasswordEmail(_0xe9a978,_0x59a7c7){const _0x3dd082=nodemailer_1['default'][a5_0x1bb6('0x55')]({'service':a5_0x1bb6('0x56'),'auth':{'user':process['env'][a5_0x1bb6('0x57')],'pass':process['env'][a5_0x1bb6('0x58')]}});const _0x5c8dc5={'to':_0xe9a978['email'],'from':a5_0x1bb6('0x59'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x1bb6('0x5a')+_0xe9a978[a5_0x1bb6('0xc')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x3dd082['sendMail'](_0x5c8dc5,_0x1e0ab3=>{_0x213bb1[a5_0x1bb6('0x16')]('success',{'msg':a5_0x1bb6('0x5b')});_0x59a7c7(_0x1e0ab3);});}],_0x112fd2=>{if(_0x112fd2){return _0x4cff6c(_0x112fd2);}_0x5bcb40['redirect']('/');});};exports['getForgot']=(_0x50ac45,_0x220edf)=>{if(_0x50ac45['isAuthenticated']()){return _0x220edf[a5_0x1bb6('0x8')]('/');}_0x220edf['render'](a5_0x1bb6('0x5c'),{'title':a5_0x1bb6('0x5d')});};exports[a5_0x1bb6('0x5e')]=(_0x18520a,_0x27af5c,_0x579acb)=>{_0x18520a[a5_0x1bb6('0xf')](a5_0x1bb6('0xc'),a5_0x1bb6('0x2f'))[a5_0x1bb6('0xe')]();_0x18520a[a5_0x1bb6('0x13')](a5_0x1bb6('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x52132a=_0x18520a['validationErrors']();if(_0x52132a){_0x18520a['flash']('errors',_0x52132a);return _0x27af5c[a5_0x1bb6('0x8')]('/forgot');}async_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x53')]([function createRandomToken(_0x54a559){crypto_1[a5_0x1bb6('0x19')][a5_0x1bb6('0x5f')](0x10,(_0x56139d,_0x20e57a)=>{const _0x5ac8a3=_0x20e57a['toString'](a5_0x1bb6('0x60'));_0x54a559(_0x56139d,_0x5ac8a3);});},function setRandomToken(_0x2e18f0,_0x18eac4){User_1[a5_0x1bb6('0x19')]['findOne']({'email':_0x18520a['body'][a5_0x1bb6('0xc')]},(_0x3a43a5,_0x8d570a)=>{if(_0x3a43a5){return _0x18eac4(_0x3a43a5);}if(!_0x8d570a){_0x18520a[a5_0x1bb6('0x16')]('errors',{'msg':a5_0x1bb6('0x61')});return _0x27af5c[a5_0x1bb6('0x8')](a5_0x1bb6('0x4b'));}_0x8d570a[a5_0x1bb6('0x54')]=_0x2e18f0;_0x8d570a['passwordResetExpires']=Date[a5_0x1bb6('0x48')]()+0x36ee80;_0x8d570a['save'](_0x3a43a5=>{_0x18eac4(_0x3a43a5,_0x2e18f0,_0x8d570a);});});},function sendForgotPasswordEmail(_0x36657c,_0x156f98,_0x2334ab){const _0x33a9f1=nodemailer_1[a5_0x1bb6('0x19')]['createTransport']({'service':a5_0x1bb6('0x56'),'auth':{'user':process[a5_0x1bb6('0x62')][a5_0x1bb6('0x57')],'pass':process[a5_0x1bb6('0x62')][a5_0x1bb6('0x58')]}});const _0x304d8a={'to':_0x156f98[a5_0x1bb6('0xc')],'from':a5_0x1bb6('0x63'),'subject':a5_0x1bb6('0x64'),'text':a5_0x1bb6('0x65')+_0x18520a[a5_0x1bb6('0x66')][a5_0x1bb6('0x67')]+a5_0x1bb6('0x68')+_0x36657c+a5_0x1bb6('0x69')};_0x33a9f1['sendMail'](_0x304d8a,_0x3a69aa=>{_0x18520a[a5_0x1bb6('0x16')](a5_0x1bb6('0x3c'),{'msg':a5_0x1bb6('0x6a')+_0x156f98['email']+a5_0x1bb6('0x6b')});_0x2334ab(_0x3a69aa);});}],_0x3b9529=>{if(_0x3b9529){return _0x579acb(_0x3b9529);}_0x27af5c[a5_0x1bb6('0x8')]('/forgot');});};