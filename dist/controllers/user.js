var a5_0x7576=['findById','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','logIn','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','waterfall','randomBytes','toString','hex','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','__esModule','async','crypto','passport','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','assert','password','len','Passwords\x20do\x20not\x20match','equals','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','postUpdateProfile','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword'];(function(_0x2e4596,_0x13eb1c){var _0x1a8d84=function(_0x23a033){while(--_0x23a033){_0x2e4596['push'](_0x2e4596['shift']());}};_0x1a8d84(++_0x13eb1c);}(a5_0x7576,0x118));var a5_0x54e5=function(_0x3ed7d7,_0x2f1559){_0x3ed7d7=_0x3ed7d7-0x0;var _0x33d993=a5_0x7576[_0x3ed7d7];return _0x33d993;};'use strict';var __importDefault=this&&this[a5_0x54e5('0x0')]||function(_0x485189){return _0x485189&&_0x485189['__esModule']?_0x485189:{'default':_0x485189};};Object[a5_0x54e5('0x1')](exports,a5_0x54e5('0x2'),{'value':!![]});const async_1=__importDefault(require(a5_0x54e5('0x3')));const crypto_1=__importDefault(require(a5_0x54e5('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x54e5('0x5')));const User_1=__importDefault(require(a5_0x54e5('0x6')));const request=require(a5_0x54e5('0x7'));exports[a5_0x54e5('0x8')]=(_0x397cea,_0x18ee30)=>{if(_0x397cea[a5_0x54e5('0x9')]){return _0x18ee30[a5_0x54e5('0xa')]('/');}_0x18ee30[a5_0x54e5('0xb')](a5_0x54e5('0xc'),{'title':a5_0x54e5('0xd')});};exports['postLogin']=(_0x16e8de,_0x2c3d9e,_0x1b6cfe)=>{_0x16e8de['assert'](a5_0x54e5('0xe'),a5_0x54e5('0xf'))[a5_0x54e5('0x10')]();_0x16e8de['assert']('password',a5_0x54e5('0x11'))['notEmpty']();_0x16e8de[a5_0x54e5('0x12')](a5_0x54e5('0xe'))[a5_0x54e5('0x13')]({'gmail_remove_dots':![]});const _0x86dab6=_0x16e8de[a5_0x54e5('0x14')]();if(_0x86dab6){_0x16e8de[a5_0x54e5('0x15')](a5_0x54e5('0x16'),_0x86dab6);return _0x2c3d9e[a5_0x54e5('0xa')](a5_0x54e5('0x17'));}passport_1[a5_0x54e5('0x18')][a5_0x54e5('0x19')](a5_0x54e5('0x1a'),(_0x1afb8f,_0x560530,_0x21dfff)=>{if(_0x1afb8f){return _0x1b6cfe(_0x1afb8f);}if(!_0x560530){_0x16e8de['flash'](a5_0x54e5('0x16'),_0x21dfff[a5_0x54e5('0x1b')]);return _0x2c3d9e['redirect'](a5_0x54e5('0x17'));}_0x16e8de['logIn'](_0x560530,_0x1afb8f=>{if(_0x1afb8f){return _0x1b6cfe(_0x1afb8f);}_0x16e8de[a5_0x54e5('0x15')](a5_0x54e5('0x1c'),{'msg':a5_0x54e5('0x1d')});_0x2c3d9e[a5_0x54e5('0xa')](_0x16e8de['session'][a5_0x54e5('0x1e')]||'/');});})(_0x16e8de,_0x2c3d9e,_0x1b6cfe);};exports[a5_0x54e5('0x1f')]=(_0x5c2863,_0x2abef4)=>{_0x5c2863[a5_0x54e5('0x1f')]();_0x2abef4[a5_0x54e5('0xa')]('/');};exports[a5_0x54e5('0x20')]=(_0x5f7db6,_0xc49b8d)=>{if(_0x5f7db6[a5_0x54e5('0x9')]){return _0xc49b8d[a5_0x54e5('0xa')]('/');}_0xc49b8d[a5_0x54e5('0xb')](a5_0x54e5('0x21'),{'title':a5_0x54e5('0x22')});};exports[a5_0x54e5('0x23')]=(_0xfa27e0,_0x3518f0,_0x156894)=>{_0xfa27e0[a5_0x54e5('0x24')]('email','Email\x20is\x20not\x20valid')[a5_0x54e5('0x10')]();_0xfa27e0[a5_0x54e5('0x24')](a5_0x54e5('0x25'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x54e5('0x26')]({'min':0x4});_0xfa27e0[a5_0x54e5('0x24')]('confirmPassword',a5_0x54e5('0x27'))[a5_0x54e5('0x28')](_0xfa27e0[a5_0x54e5('0x29')][a5_0x54e5('0x25')]);_0xfa27e0[a5_0x54e5('0x12')](a5_0x54e5('0xe'))[a5_0x54e5('0x13')]({'gmail_remove_dots':![]});const _0x5ecba9=_0xfa27e0[a5_0x54e5('0x14')]();if(_0x5ecba9){_0xfa27e0[a5_0x54e5('0x15')](a5_0x54e5('0x16'),_0x5ecba9);return _0x3518f0[a5_0x54e5('0xa')]('/signup');}const _0x28768f=new User_1[(a5_0x54e5('0x18'))]({});User_1[a5_0x54e5('0x18')][a5_0x54e5('0x2a')]({'email':_0xfa27e0[a5_0x54e5('0x29')][a5_0x54e5('0xe')]},(_0x3e28dd,_0x73dc09)=>{if(_0x3e28dd){return _0x156894(_0x3e28dd);}if(_0x73dc09){_0xfa27e0[a5_0x54e5('0x15')]('errors',{'msg':a5_0x54e5('0x2b')});return _0x3518f0['redirect']('/signup');}_0x28768f[a5_0x54e5('0x2c')](_0x3e28dd=>{if(_0x3e28dd){return _0x156894(_0x3e28dd);}_0xfa27e0['logIn'](_0x28768f,_0x3e28dd=>{if(_0x3e28dd){return _0x156894(_0x3e28dd);}_0x3518f0[a5_0x54e5('0xa')]('/');});});});};exports[a5_0x54e5('0x2d')]=(_0x1b1434,_0x289f54)=>{_0x289f54[a5_0x54e5('0xb')](a5_0x54e5('0x2e'),{'title':'Account\x20Management'});};exports[a5_0x54e5('0x2f')]=(_0x26f629,_0x561bcc,_0x56d80b)=>{_0x26f629[a5_0x54e5('0x24')](a5_0x54e5('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x26f629['sanitize'](a5_0x54e5('0xe'))[a5_0x54e5('0x13')]({'gmail_remove_dots':![]});const _0x1d2f46=_0x26f629[a5_0x54e5('0x14')]();if(_0x1d2f46){_0x26f629[a5_0x54e5('0x15')](a5_0x54e5('0x16'),_0x1d2f46);return _0x561bcc[a5_0x54e5('0xa')]('/account');}User_1[a5_0x54e5('0x18')]['findById'](_0x26f629[a5_0x54e5('0x9')]['id'],(_0xb1a7c9,_0xeca9bc)=>{if(_0xb1a7c9){return _0x56d80b(_0xb1a7c9);}_0xeca9bc[a5_0x54e5('0xe')]=_0x26f629[a5_0x54e5('0x29')][a5_0x54e5('0xe')]||'';_0xeca9bc[a5_0x54e5('0x30')][a5_0x54e5('0x31')]=_0x26f629[a5_0x54e5('0x29')][a5_0x54e5('0x31')]||'';_0xeca9bc[a5_0x54e5('0x30')][a5_0x54e5('0x32')]=_0x26f629[a5_0x54e5('0x29')]['gender']||'';_0xeca9bc['profile'][a5_0x54e5('0x33')]=_0x26f629[a5_0x54e5('0x29')][a5_0x54e5('0x33')]||'';_0xeca9bc['profile'][a5_0x54e5('0x34')]=_0x26f629[a5_0x54e5('0x29')]['website']||'';_0xeca9bc[a5_0x54e5('0x2c')](_0xb1a7c9=>{if(_0xb1a7c9){if(_0xb1a7c9['code']===0x2af8){_0x26f629[a5_0x54e5('0x15')]('errors',{'msg':a5_0x54e5('0x35')});return _0x561bcc[a5_0x54e5('0xa')](a5_0x54e5('0x36'));}return _0x56d80b(_0xb1a7c9);}_0x26f629[a5_0x54e5('0x15')]('success',{'msg':a5_0x54e5('0x37')});_0x561bcc[a5_0x54e5('0xa')](a5_0x54e5('0x36'));});});};exports[a5_0x54e5('0x38')]=(_0x3abd60,_0x466e98,_0x3976fc)=>{_0x3abd60['assert'](a5_0x54e5('0x25'),a5_0x54e5('0x39'))[a5_0x54e5('0x26')]({'min':0x4});_0x3abd60['assert'](a5_0x54e5('0x3a'),a5_0x54e5('0x27'))[a5_0x54e5('0x28')](_0x3abd60[a5_0x54e5('0x29')][a5_0x54e5('0x25')]);const _0x4c8d07=_0x3abd60[a5_0x54e5('0x14')]();if(_0x4c8d07){_0x3abd60[a5_0x54e5('0x15')](a5_0x54e5('0x16'),_0x4c8d07);return _0x466e98[a5_0x54e5('0xa')](a5_0x54e5('0x36'));}User_1[a5_0x54e5('0x18')][a5_0x54e5('0x3b')](_0x3abd60[a5_0x54e5('0x9')]['id'],(_0x4405a8,_0x3ba339)=>{if(_0x4405a8){return _0x3976fc(_0x4405a8);}_0x3ba339[a5_0x54e5('0x25')]=_0x3abd60['body'][a5_0x54e5('0x25')];_0x3ba339[a5_0x54e5('0x2c')](_0x4405a8=>{if(_0x4405a8){return _0x3976fc(_0x4405a8);}_0x3abd60[a5_0x54e5('0x15')](a5_0x54e5('0x1c'),{'msg':a5_0x54e5('0x3c')});_0x466e98[a5_0x54e5('0xa')](a5_0x54e5('0x36'));});});};exports['postDeleteAccount']=(_0x4ea161,_0x36651b,_0x31eb63)=>{User_1[a5_0x54e5('0x18')][a5_0x54e5('0x3d')]({'_id':_0x4ea161[a5_0x54e5('0x9')]['id']},_0x37031b=>{if(_0x37031b){return _0x31eb63(_0x37031b);}_0x4ea161[a5_0x54e5('0x1f')]();_0x4ea161[a5_0x54e5('0x15')](a5_0x54e5('0x3e'),{'msg':a5_0x54e5('0x3f')});_0x36651b[a5_0x54e5('0xa')]('/');});};exports[a5_0x54e5('0x40')]=(_0x47aa50,_0x27d18a,_0x2b61fc)=>{const _0x371730=_0x47aa50[a5_0x54e5('0x41')][a5_0x54e5('0x42')];User_1[a5_0x54e5('0x18')][a5_0x54e5('0x3b')](_0x47aa50[a5_0x54e5('0x9')]['id'],(_0x183bd6,_0x53ea36)=>{if(_0x183bd6){return _0x2b61fc(_0x183bd6);}_0x53ea36[_0x371730]=undefined;_0x53ea36[a5_0x54e5('0x43')]=_0x53ea36[a5_0x54e5('0x43')][a5_0x54e5('0x44')](_0x165ea3=>_0x165ea3['kind']!==_0x371730);_0x53ea36[a5_0x54e5('0x2c')](_0x183bd6=>{if(_0x183bd6){return _0x2b61fc(_0x183bd6);}_0x47aa50[a5_0x54e5('0x15')](a5_0x54e5('0x3e'),{'msg':_0x371730+a5_0x54e5('0x45')});_0x27d18a[a5_0x54e5('0xa')](a5_0x54e5('0x36'));});});};exports[a5_0x54e5('0x46')]=(_0x133a76,_0x49cba6,_0x534d10)=>{if(_0x133a76[a5_0x54e5('0x47')]()){return _0x49cba6[a5_0x54e5('0xa')]('/');}User_1[a5_0x54e5('0x18')][a5_0x54e5('0x2a')]({'passwordResetToken':_0x133a76[a5_0x54e5('0x41')][a5_0x54e5('0x48')]})[a5_0x54e5('0x49')](a5_0x54e5('0x4a'))['gt'](Date['now']())[a5_0x54e5('0x4b')]((_0x34706d,_0x1b523c)=>{if(_0x34706d){return _0x534d10(_0x34706d);}if(!_0x1b523c){_0x133a76[a5_0x54e5('0x15')](a5_0x54e5('0x16'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x49cba6[a5_0x54e5('0xa')](a5_0x54e5('0x4c'));}_0x49cba6['render'](a5_0x54e5('0x4d'),{'title':a5_0x54e5('0x4e')});});};exports[a5_0x54e5('0x4f')]=(_0x3b7ed7,_0x21cd71,_0xa366c8)=>{_0x3b7ed7[a5_0x54e5('0x24')](a5_0x54e5('0x25'),a5_0x54e5('0x50'))[a5_0x54e5('0x26')]({'min':0x4});_0x3b7ed7[a5_0x54e5('0x24')]('confirm',a5_0x54e5('0x51'))['equals'](_0x3b7ed7[a5_0x54e5('0x29')][a5_0x54e5('0x25')]);const _0x390db6=_0x3b7ed7[a5_0x54e5('0x14')]();if(_0x390db6){_0x3b7ed7[a5_0x54e5('0x15')](a5_0x54e5('0x16'),_0x390db6);return _0x21cd71['redirect'](a5_0x54e5('0x52'));}async_1[a5_0x54e5('0x18')]['waterfall']([function resetPassword(_0x492f5f){User_1[a5_0x54e5('0x18')]['findOne']({'passwordResetToken':_0x3b7ed7[a5_0x54e5('0x41')]['token']})[a5_0x54e5('0x49')](a5_0x54e5('0x4a'))['gt'](Date[a5_0x54e5('0x53')]())['exec']((_0x27415d,_0x10ed99)=>{if(_0x27415d){return _0xa366c8(_0x27415d);}if(!_0x10ed99){_0x3b7ed7['flash'](a5_0x54e5('0x16'),{'msg':a5_0x54e5('0x54')});return _0x21cd71['redirect'](a5_0x54e5('0x52'));}_0x10ed99['password']=_0x3b7ed7[a5_0x54e5('0x29')][a5_0x54e5('0x25')];_0x10ed99[a5_0x54e5('0x55')]=undefined;_0x10ed99[a5_0x54e5('0x4a')]=undefined;_0x10ed99[a5_0x54e5('0x2c')](_0x27415d=>{if(_0x27415d){return _0xa366c8(_0x27415d);}_0x3b7ed7[a5_0x54e5('0x56')](_0x10ed99,_0x27415d=>{_0x492f5f(_0x27415d,_0x10ed99);});});});},function sendResetPasswordEmail(_0xc55960,_0x209102){const _0x5c4533=nodemailer_1[a5_0x54e5('0x18')][a5_0x54e5('0x57')]({'service':a5_0x54e5('0x58'),'auth':{'user':process[a5_0x54e5('0x59')][a5_0x54e5('0x5a')],'pass':process[a5_0x54e5('0x59')][a5_0x54e5('0x5b')]}});const _0x49f90a={'to':_0xc55960['email'],'from':'express-ts@starter.com','subject':a5_0x54e5('0x5c'),'text':a5_0x54e5('0x5d')+_0xc55960[a5_0x54e5('0xe')]+a5_0x54e5('0x5e')};_0x5c4533[a5_0x54e5('0x5f')](_0x49f90a,_0x448a99=>{_0x3b7ed7[a5_0x54e5('0x15')]('success',{'msg':a5_0x54e5('0x60')});_0x209102(_0x448a99);});}],_0x29a824=>{if(_0x29a824){return _0xa366c8(_0x29a824);}_0x21cd71[a5_0x54e5('0xa')]('/');});};exports[a5_0x54e5('0x61')]=(_0x41719b,_0x3beca9)=>{if(_0x41719b[a5_0x54e5('0x47')]()){return _0x3beca9['redirect']('/');}_0x3beca9[a5_0x54e5('0xb')](a5_0x54e5('0x62'),{'title':a5_0x54e5('0x63')});};exports[a5_0x54e5('0x64')]=(_0x8a3dbc,_0x1cbd4a,_0x1be43d)=>{_0x8a3dbc[a5_0x54e5('0x24')](a5_0x54e5('0xe'),a5_0x54e5('0x65'))[a5_0x54e5('0x10')]();_0x8a3dbc[a5_0x54e5('0x12')]('email')[a5_0x54e5('0x13')]({'gmail_remove_dots':![]});const _0x5358a6=_0x8a3dbc[a5_0x54e5('0x14')]();if(_0x5358a6){_0x8a3dbc[a5_0x54e5('0x15')](a5_0x54e5('0x16'),_0x5358a6);return _0x1cbd4a[a5_0x54e5('0xa')](a5_0x54e5('0x4c'));}async_1[a5_0x54e5('0x18')][a5_0x54e5('0x66')]([function createRandomToken(_0x18f2ac){crypto_1[a5_0x54e5('0x18')][a5_0x54e5('0x67')](0x10,(_0x5bcfd7,_0xfa2a13)=>{const _0x344c32=_0xfa2a13[a5_0x54e5('0x68')](a5_0x54e5('0x69'));_0x18f2ac(_0x5bcfd7,_0x344c32);});},function setRandomToken(_0x7720d3,_0x5abbb4){User_1['default'][a5_0x54e5('0x2a')]({'email':_0x8a3dbc[a5_0x54e5('0x29')][a5_0x54e5('0xe')]},(_0x45b5a2,_0x2b0730)=>{if(_0x45b5a2){return _0x5abbb4(_0x45b5a2);}if(!_0x2b0730){_0x8a3dbc[a5_0x54e5('0x15')](a5_0x54e5('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x1cbd4a[a5_0x54e5('0xa')](a5_0x54e5('0x4c'));}_0x2b0730[a5_0x54e5('0x55')]=_0x7720d3;_0x2b0730[a5_0x54e5('0x4a')]=Date[a5_0x54e5('0x53')]()+0x36ee80;_0x2b0730[a5_0x54e5('0x2c')](_0x45b5a2=>{_0x5abbb4(_0x45b5a2,_0x7720d3,_0x2b0730);});});},function sendForgotPasswordEmail(_0x185f28,_0x2315db,_0x527384){const _0x29f4f6=nodemailer_1[a5_0x54e5('0x18')][a5_0x54e5('0x57')]({'service':a5_0x54e5('0x58'),'auth':{'user':process[a5_0x54e5('0x59')]['SENDGRID_USER'],'pass':process[a5_0x54e5('0x59')][a5_0x54e5('0x5b')]}});const _0x4cc440={'to':_0x2315db[a5_0x54e5('0xe')],'from':a5_0x54e5('0x6a'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x54e5('0x6b')+_0x8a3dbc[a5_0x54e5('0x6c')][a5_0x54e5('0x6d')]+'/reset/'+_0x185f28+a5_0x54e5('0x6e')};_0x29f4f6[a5_0x54e5('0x5f')](_0x4cc440,_0x9eee46=>{_0x8a3dbc['flash']('info',{'msg':a5_0x54e5('0x6f')+_0x2315db[a5_0x54e5('0xe')]+a5_0x54e5('0x70')});_0x527384(_0x9eee46);});}],_0x5d601d=>{if(_0x5d601d){return _0x1be43d(_0x5d601d);}_0x1cbd4a[a5_0x54e5('0xa')](a5_0x54e5('0x4c'));});};