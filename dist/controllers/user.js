var a5_0x3589=['getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','/signup','findOne','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','password','confirmPassword','Password\x20has\x20been\x20changed.','postDeleteAccount','info','params','tokens','filter','\x20account\x20has\x20been\x20unlinked.','getReset','where','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetExpires','exec','passwordResetToken','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.'];(function(_0x16eabb,_0x3db965){var _0x3d2519=function(_0x1f96af){while(--_0x1f96af){_0x16eabb['push'](_0x16eabb['shift']());}};_0x3d2519(++_0x3db965);}(a5_0x3589,0xec));var a5_0x50c1=function(_0x5680d6,_0x43d46f){_0x5680d6=_0x5680d6-0x0;var _0x17a646=a5_0x3589[_0x5680d6];return _0x17a646;};'use strict';var __importDefault=this&&this[a5_0x50c1('0x0')]||function(_0x3fb601){return _0x3fb601&&_0x3fb601[a5_0x50c1('0x1')]?_0x3fb601:{'default':_0x3fb601};};Object[a5_0x50c1('0x2')](exports,a5_0x50c1('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x50c1('0x3')));const crypto_1=__importDefault(require(a5_0x50c1('0x4')));const nodemailer_1=__importDefault(require(a5_0x50c1('0x5')));const passport_1=__importDefault(require(a5_0x50c1('0x6')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x50c1('0x7'));exports[a5_0x50c1('0x8')]=(_0x50a728,_0x559e71)=>{if(_0x50a728[a5_0x50c1('0x9')]){return _0x559e71[a5_0x50c1('0xa')]('/');}_0x559e71[a5_0x50c1('0xb')](a5_0x50c1('0xc'),{'title':a5_0x50c1('0xd')});};exports[a5_0x50c1('0xe')]=(_0x11d2c4,_0x4524ff,_0x36ab90)=>{_0x11d2c4[a5_0x50c1('0xf')](a5_0x50c1('0x10'),a5_0x50c1('0x11'))[a5_0x50c1('0x12')]();_0x11d2c4[a5_0x50c1('0xf')]('password',a5_0x50c1('0x13'))[a5_0x50c1('0x14')]();_0x11d2c4[a5_0x50c1('0x15')](a5_0x50c1('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x558857=_0x11d2c4[a5_0x50c1('0x16')]();if(_0x558857){_0x11d2c4[a5_0x50c1('0x17')](a5_0x50c1('0x18'),_0x558857);return _0x4524ff[a5_0x50c1('0xa')](a5_0x50c1('0x19'));}passport_1[a5_0x50c1('0x1a')][a5_0x50c1('0x1b')](a5_0x50c1('0x1c'),(_0x325035,_0x2fe8ab,_0x2437d4)=>{if(_0x325035){return _0x36ab90(_0x325035);}if(!_0x2fe8ab){_0x11d2c4[a5_0x50c1('0x17')](a5_0x50c1('0x18'),_0x2437d4[a5_0x50c1('0x1d')]);return _0x4524ff[a5_0x50c1('0xa')]('/login');}_0x11d2c4[a5_0x50c1('0x1e')](_0x2fe8ab,_0x325035=>{if(_0x325035){return _0x36ab90(_0x325035);}_0x11d2c4['flash'](a5_0x50c1('0x1f'),{'msg':a5_0x50c1('0x20')});_0x4524ff['redirect'](_0x11d2c4[a5_0x50c1('0x21')]['returnTo']||'/');});})(_0x11d2c4,_0x4524ff,_0x36ab90);};exports[a5_0x50c1('0x22')]=(_0x18d23c,_0x12603d)=>{_0x18d23c[a5_0x50c1('0x22')]();_0x12603d['redirect']('/');};exports[a5_0x50c1('0x23')]=(_0x5ebc87,_0x293a47)=>{if(_0x5ebc87['user']){return _0x293a47[a5_0x50c1('0xa')]('/');}_0x293a47[a5_0x50c1('0xb')](a5_0x50c1('0x24'),{'title':a5_0x50c1('0x25')});};exports['postSignup']=(_0x44466e,_0x5d1c87,_0x11cae0)=>{_0x44466e['assert'](a5_0x50c1('0x10'),'Email\x20is\x20not\x20valid')[a5_0x50c1('0x12')]();_0x44466e[a5_0x50c1('0xf')]('password',a5_0x50c1('0x26'))[a5_0x50c1('0x27')]({'min':0x4});_0x44466e[a5_0x50c1('0xf')]('confirmPassword',a5_0x50c1('0x28'))[a5_0x50c1('0x29')](_0x44466e['body']['password']);_0x44466e['sanitize'](a5_0x50c1('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x49b219=_0x44466e[a5_0x50c1('0x16')]();if(_0x49b219){_0x44466e[a5_0x50c1('0x17')](a5_0x50c1('0x18'),_0x49b219);return _0x5d1c87['redirect'](a5_0x50c1('0x2a'));}const _0x2b69c4=new User_1[(a5_0x50c1('0x1a'))]({});User_1[a5_0x50c1('0x1a')][a5_0x50c1('0x2b')]({'email':_0x44466e[a5_0x50c1('0x2c')][a5_0x50c1('0x10')]},(_0x59e015,_0x5df9f2)=>{if(_0x59e015){return _0x11cae0(_0x59e015);}if(_0x5df9f2){_0x44466e[a5_0x50c1('0x17')](a5_0x50c1('0x18'),{'msg':a5_0x50c1('0x2d')});return _0x5d1c87['redirect'](a5_0x50c1('0x2a'));}_0x2b69c4[a5_0x50c1('0x2e')](_0x59e015=>{if(_0x59e015){return _0x11cae0(_0x59e015);}_0x44466e[a5_0x50c1('0x1e')](_0x2b69c4,_0x59e015=>{if(_0x59e015){return _0x11cae0(_0x59e015);}_0x5d1c87[a5_0x50c1('0xa')]('/');});});});};exports[a5_0x50c1('0x2f')]=(_0x3dd0be,_0x4ce993)=>{_0x4ce993[a5_0x50c1('0xb')](a5_0x50c1('0x30'),{'title':a5_0x50c1('0x31')});};exports['postUpdateProfile']=(_0x517d70,_0xf5cd9a,_0x4a9fea)=>{_0x517d70[a5_0x50c1('0xf')](a5_0x50c1('0x10'),a5_0x50c1('0x32'))[a5_0x50c1('0x12')]();_0x517d70['sanitize'](a5_0x50c1('0x10'))[a5_0x50c1('0x33')]({'gmail_remove_dots':![]});const _0x18ed83=_0x517d70[a5_0x50c1('0x16')]();if(_0x18ed83){_0x517d70[a5_0x50c1('0x17')]('errors',_0x18ed83);return _0xf5cd9a[a5_0x50c1('0xa')](a5_0x50c1('0x34'));}User_1[a5_0x50c1('0x1a')][a5_0x50c1('0x35')](_0x517d70[a5_0x50c1('0x9')]['id'],(_0x25e925,_0x1bc72d)=>{if(_0x25e925){return _0x4a9fea(_0x25e925);}_0x1bc72d[a5_0x50c1('0x10')]=_0x517d70[a5_0x50c1('0x2c')]['email']||'';_0x1bc72d[a5_0x50c1('0x36')][a5_0x50c1('0x37')]=_0x517d70[a5_0x50c1('0x2c')]['name']||'';_0x1bc72d[a5_0x50c1('0x36')][a5_0x50c1('0x38')]=_0x517d70[a5_0x50c1('0x2c')][a5_0x50c1('0x38')]||'';_0x1bc72d[a5_0x50c1('0x36')][a5_0x50c1('0x39')]=_0x517d70[a5_0x50c1('0x2c')][a5_0x50c1('0x39')]||'';_0x1bc72d[a5_0x50c1('0x36')][a5_0x50c1('0x3a')]=_0x517d70[a5_0x50c1('0x2c')][a5_0x50c1('0x3a')]||'';_0x1bc72d[a5_0x50c1('0x2e')](_0x25e925=>{if(_0x25e925){if(_0x25e925[a5_0x50c1('0x3b')]===0x2af8){_0x517d70[a5_0x50c1('0x17')](a5_0x50c1('0x18'),{'msg':a5_0x50c1('0x3c')});return _0xf5cd9a[a5_0x50c1('0xa')]('/account');}return _0x4a9fea(_0x25e925);}_0x517d70[a5_0x50c1('0x17')](a5_0x50c1('0x1f'),{'msg':a5_0x50c1('0x3d')});_0xf5cd9a[a5_0x50c1('0xa')]('/account');});});};exports[a5_0x50c1('0x3e')]=(_0x186418,_0xd472d,_0x413a13)=>{_0x186418['assert'](a5_0x50c1('0x3f'),a5_0x50c1('0x26'))[a5_0x50c1('0x27')]({'min':0x4});_0x186418[a5_0x50c1('0xf')](a5_0x50c1('0x40'),a5_0x50c1('0x28'))['equals'](_0x186418[a5_0x50c1('0x2c')][a5_0x50c1('0x3f')]);const _0x3a96cd=_0x186418['validationErrors']();if(_0x3a96cd){_0x186418[a5_0x50c1('0x17')](a5_0x50c1('0x18'),_0x3a96cd);return _0xd472d['redirect']('/account');}User_1['default']['findById'](_0x186418['user']['id'],(_0x900d67,_0x957ca3)=>{if(_0x900d67){return _0x413a13(_0x900d67);}_0x957ca3[a5_0x50c1('0x3f')]=_0x186418['body'][a5_0x50c1('0x3f')];_0x957ca3['save'](_0x900d67=>{if(_0x900d67){return _0x413a13(_0x900d67);}_0x186418[a5_0x50c1('0x17')]('success',{'msg':a5_0x50c1('0x41')});_0xd472d[a5_0x50c1('0xa')](a5_0x50c1('0x34'));});});};exports[a5_0x50c1('0x42')]=(_0x54dbd8,_0x29fcd3,_0x694ee9)=>{User_1[a5_0x50c1('0x1a')]['remove']({'_id':_0x54dbd8[a5_0x50c1('0x9')]['id']},_0x6eb1ab=>{if(_0x6eb1ab){return _0x694ee9(_0x6eb1ab);}_0x54dbd8[a5_0x50c1('0x22')]();_0x54dbd8[a5_0x50c1('0x17')](a5_0x50c1('0x43'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x29fcd3[a5_0x50c1('0xa')]('/');});};exports['getOauthUnlink']=(_0x2c72dd,_0x468c62,_0x3520e3)=>{const _0x1ecbfd=_0x2c72dd[a5_0x50c1('0x44')]['provider'];User_1[a5_0x50c1('0x1a')]['findById'](_0x2c72dd['user']['id'],(_0x12c828,_0x3d740f)=>{if(_0x12c828){return _0x3520e3(_0x12c828);}_0x3d740f[_0x1ecbfd]=undefined;_0x3d740f[a5_0x50c1('0x45')]=_0x3d740f['tokens'][a5_0x50c1('0x46')](_0x4cefe7=>_0x4cefe7['kind']!==_0x1ecbfd);_0x3d740f['save'](_0x12c828=>{if(_0x12c828){return _0x3520e3(_0x12c828);}_0x2c72dd[a5_0x50c1('0x17')](a5_0x50c1('0x43'),{'msg':_0x1ecbfd+a5_0x50c1('0x47')});_0x468c62[a5_0x50c1('0xa')](a5_0x50c1('0x34'));});});};exports[a5_0x50c1('0x48')]=(_0x347177,_0x5cd8e3,_0x925a5e)=>{if(_0x347177['isAuthenticated']()){return _0x5cd8e3[a5_0x50c1('0xa')]('/');}User_1[a5_0x50c1('0x1a')]['findOne']({'passwordResetToken':_0x347177[a5_0x50c1('0x44')]['token']})[a5_0x50c1('0x49')]('passwordResetExpires')['gt'](Date[a5_0x50c1('0x4a')]())['exec']((_0x467c5a,_0x59158c)=>{if(_0x467c5a){return _0x925a5e(_0x467c5a);}if(!_0x59158c){_0x347177[a5_0x50c1('0x17')](a5_0x50c1('0x18'),{'msg':a5_0x50c1('0x4b')});return _0x5cd8e3[a5_0x50c1('0xa')](a5_0x50c1('0x4c'));}_0x5cd8e3[a5_0x50c1('0xb')](a5_0x50c1('0x4d'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x20aa55,_0x4948a7,_0x4f4240)=>{_0x20aa55['assert']('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x50c1('0x27')]({'min':0x4});_0x20aa55[a5_0x50c1('0xf')](a5_0x50c1('0x4e'),a5_0x50c1('0x4f'))['equals'](_0x20aa55[a5_0x50c1('0x2c')][a5_0x50c1('0x3f')]);const _0x195e52=_0x20aa55['validationErrors']();if(_0x195e52){_0x20aa55['flash'](a5_0x50c1('0x18'),_0x195e52);return _0x4948a7[a5_0x50c1('0xa')](a5_0x50c1('0x50'));}async_1['default'][a5_0x50c1('0x51')]([function resetPassword(_0x3d946b){User_1[a5_0x50c1('0x1a')][a5_0x50c1('0x2b')]({'passwordResetToken':_0x20aa55['params']['token']})[a5_0x50c1('0x49')](a5_0x50c1('0x52'))['gt'](Date[a5_0x50c1('0x4a')]())[a5_0x50c1('0x53')]((_0x3b0147,_0x5dd7c8)=>{if(_0x3b0147){return _0x4f4240(_0x3b0147);}if(!_0x5dd7c8){_0x20aa55[a5_0x50c1('0x17')](a5_0x50c1('0x18'),{'msg':a5_0x50c1('0x4b')});return _0x4948a7['redirect']('back');}_0x5dd7c8[a5_0x50c1('0x3f')]=_0x20aa55[a5_0x50c1('0x2c')][a5_0x50c1('0x3f')];_0x5dd7c8[a5_0x50c1('0x54')]=undefined;_0x5dd7c8[a5_0x50c1('0x52')]=undefined;_0x5dd7c8[a5_0x50c1('0x2e')](_0x3b0147=>{if(_0x3b0147){return _0x4f4240(_0x3b0147);}_0x20aa55[a5_0x50c1('0x1e')](_0x5dd7c8,_0x3b0147=>{_0x3d946b(_0x3b0147,_0x5dd7c8);});});});},function sendResetPasswordEmail(_0x2cd4e5,_0x1aef59){const _0x66b78c=nodemailer_1[a5_0x50c1('0x1a')]['createTransport']({'service':a5_0x50c1('0x55'),'auth':{'user':process['env'][a5_0x50c1('0x56')],'pass':process[a5_0x50c1('0x57')][a5_0x50c1('0x58')]}});const _0x1b24fd={'to':_0x2cd4e5['email'],'from':'express-ts@starter.com','subject':a5_0x50c1('0x59'),'text':a5_0x50c1('0x5a')+_0x2cd4e5[a5_0x50c1('0x10')]+a5_0x50c1('0x5b')};_0x66b78c[a5_0x50c1('0x5c')](_0x1b24fd,_0x50dc34=>{_0x20aa55[a5_0x50c1('0x17')]('success',{'msg':a5_0x50c1('0x5d')});_0x1aef59(_0x50dc34);});}],_0x51ff25=>{if(_0x51ff25){return _0x4f4240(_0x51ff25);}_0x4948a7['redirect']('/');});};exports[a5_0x50c1('0x5e')]=(_0x203da3,_0x1b2fc7)=>{if(_0x203da3['isAuthenticated']()){return _0x1b2fc7[a5_0x50c1('0xa')]('/');}_0x1b2fc7[a5_0x50c1('0xb')](a5_0x50c1('0x5f'),{'title':a5_0x50c1('0x60')});};exports[a5_0x50c1('0x61')]=(_0x597ce8,_0x404498,_0x3c153a)=>{_0x597ce8['assert'](a5_0x50c1('0x10'),a5_0x50c1('0x32'))['isEmail']();_0x597ce8[a5_0x50c1('0x15')]('email')[a5_0x50c1('0x33')]({'gmail_remove_dots':![]});const _0x1dc9c1=_0x597ce8[a5_0x50c1('0x16')]();if(_0x1dc9c1){_0x597ce8['flash'](a5_0x50c1('0x18'),_0x1dc9c1);return _0x404498[a5_0x50c1('0xa')](a5_0x50c1('0x4c'));}async_1[a5_0x50c1('0x1a')][a5_0x50c1('0x51')]([function createRandomToken(_0x15ff86){crypto_1[a5_0x50c1('0x1a')][a5_0x50c1('0x62')](0x10,(_0x4dac0f,_0x497998)=>{const _0x3ebbd8=_0x497998[a5_0x50c1('0x63')](a5_0x50c1('0x64'));_0x15ff86(_0x4dac0f,_0x3ebbd8);});},function setRandomToken(_0x50c705,_0x519c5f){User_1[a5_0x50c1('0x1a')][a5_0x50c1('0x2b')]({'email':_0x597ce8[a5_0x50c1('0x2c')][a5_0x50c1('0x10')]},(_0x2d558c,_0x336fd3)=>{if(_0x2d558c){return _0x519c5f(_0x2d558c);}if(!_0x336fd3){_0x597ce8[a5_0x50c1('0x17')](a5_0x50c1('0x18'),{'msg':a5_0x50c1('0x65')});return _0x404498[a5_0x50c1('0xa')](a5_0x50c1('0x4c'));}_0x336fd3[a5_0x50c1('0x54')]=_0x50c705;_0x336fd3[a5_0x50c1('0x52')]=Date['now']()+0x36ee80;_0x336fd3['save'](_0x2d558c=>{_0x519c5f(_0x2d558c,_0x50c705,_0x336fd3);});});},function sendForgotPasswordEmail(_0x392dc3,_0x178395,_0x16cd8f){const _0x8dd368=nodemailer_1['default'][a5_0x50c1('0x66')]({'service':a5_0x50c1('0x55'),'auth':{'user':process[a5_0x50c1('0x57')][a5_0x50c1('0x56')],'pass':process[a5_0x50c1('0x57')][a5_0x50c1('0x58')]}});const _0x30ba33={'to':_0x178395[a5_0x50c1('0x10')],'from':a5_0x50c1('0x67'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x50c1('0x68')+_0x597ce8['headers'][a5_0x50c1('0x69')]+a5_0x50c1('0x6a')+_0x392dc3+a5_0x50c1('0x6b')};_0x8dd368[a5_0x50c1('0x5c')](_0x30ba33,_0x318d06=>{_0x597ce8['flash'](a5_0x50c1('0x43'),{'msg':a5_0x50c1('0x6c')+_0x178395[a5_0x50c1('0x10')]+a5_0x50c1('0x6d')});_0x16cd8f(_0x318d06);});}],_0x15d881=>{if(_0x15d881){return _0x3c153a(_0x15d881);}_0x404498[a5_0x50c1('0xa')](a5_0x50c1('0x4c'));});};