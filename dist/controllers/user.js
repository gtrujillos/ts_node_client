var a5_0x5368=['account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','SENDGRID_USER','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','redirect','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','assert','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','flash','errors','default','authenticate','local','message','/login','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','account/signup','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','validationErrors','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','logIn','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot'];(function(_0x564a5c,_0x258f31){var _0x3857e5=function(_0x3a028d){while(--_0x3a028d){_0x564a5c['push'](_0x564a5c['shift']());}};_0x3857e5(++_0x258f31);}(a5_0x5368,0x183));var a5_0x59da=function(_0x1f51a2,_0x49bcee){_0x1f51a2=_0x1f51a2-0x0;var _0x1fbd75=a5_0x5368[_0x1f51a2];return _0x1fbd75;};'use strict';var __importDefault=this&&this[a5_0x59da('0x0')]||function(_0x2ed101){return _0x2ed101&&_0x2ed101[a5_0x59da('0x1')]?_0x2ed101:{'default':_0x2ed101};};Object[a5_0x59da('0x2')](exports,a5_0x59da('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x59da('0x3')));const crypto_1=__importDefault(require(a5_0x59da('0x4')));const nodemailer_1=__importDefault(require(a5_0x59da('0x5')));const passport_1=__importDefault(require(a5_0x59da('0x6')));const User_1=__importDefault(require(a5_0x59da('0x7')));const request=require(a5_0x59da('0x8'));exports[a5_0x59da('0x9')]=(_0x1d9ef6,_0x95f561)=>{if(_0x1d9ef6['user']){return _0x95f561[a5_0x59da('0xa')]('/');}_0x95f561[a5_0x59da('0xb')](a5_0x59da('0xc'),{'title':a5_0x59da('0xd')});};exports[a5_0x59da('0xe')]=(_0x4c797f,_0x1c2169,_0x20a3bf)=>{_0x4c797f['assert'](a5_0x59da('0xf'),a5_0x59da('0x10'))['isEmail']();_0x4c797f[a5_0x59da('0x11')](a5_0x59da('0x12'),a5_0x59da('0x13'))['notEmpty']();_0x4c797f[a5_0x59da('0x14')](a5_0x59da('0xf'))[a5_0x59da('0x15')]({'gmail_remove_dots':![]});const _0x2288d0=_0x4c797f['validationErrors']();if(_0x2288d0){_0x4c797f[a5_0x59da('0x16')](a5_0x59da('0x17'),_0x2288d0);return _0x1c2169[a5_0x59da('0xa')]('/login');}passport_1[a5_0x59da('0x18')][a5_0x59da('0x19')](a5_0x59da('0x1a'),(_0x54090a,_0x555650,_0x4744e1)=>{if(_0x54090a){return _0x20a3bf(_0x54090a);}if(!_0x555650){_0x4c797f[a5_0x59da('0x16')](a5_0x59da('0x17'),_0x4744e1[a5_0x59da('0x1b')]);return _0x1c2169[a5_0x59da('0xa')](a5_0x59da('0x1c'));}_0x4c797f['logIn'](_0x555650,_0x54090a=>{if(_0x54090a){return _0x20a3bf(_0x54090a);}_0x4c797f[a5_0x59da('0x16')](a5_0x59da('0x1d'),{'msg':a5_0x59da('0x1e')});_0x1c2169[a5_0x59da('0xa')](_0x4c797f[a5_0x59da('0x1f')][a5_0x59da('0x20')]||'/');});})(_0x4c797f,_0x1c2169,_0x20a3bf);};exports[a5_0x59da('0x21')]=(_0x5148b1,_0x4be734)=>{_0x5148b1['logout']();_0x4be734[a5_0x59da('0xa')]('/');};exports[a5_0x59da('0x22')]=(_0x196417,_0x3b5762)=>{if(_0x196417[a5_0x59da('0x23')]){return _0x3b5762['redirect']('/');}_0x3b5762[a5_0x59da('0xb')](a5_0x59da('0x24'),{'title':a5_0x59da('0x25')});};exports[a5_0x59da('0x26')]=(_0x279f05,_0x9bb9b0,_0x3f7376)=>{_0x279f05['assert']('email',a5_0x59da('0x10'))[a5_0x59da('0x27')]();_0x279f05[a5_0x59da('0x11')]('password',a5_0x59da('0x28'))[a5_0x59da('0x29')]({'min':0x4});_0x279f05['assert'](a5_0x59da('0x2a'),a5_0x59da('0x2b'))[a5_0x59da('0x2c')](_0x279f05[a5_0x59da('0x2d')][a5_0x59da('0x12')]);_0x279f05[a5_0x59da('0x14')](a5_0x59da('0xf'))[a5_0x59da('0x15')]({'gmail_remove_dots':![]});const _0x169d91=_0x279f05[a5_0x59da('0x2e')]();if(_0x169d91){_0x279f05['flash'](a5_0x59da('0x17'),_0x169d91);return _0x9bb9b0['redirect']('/signup');}const _0x169cf2=new User_1[(a5_0x59da('0x18'))]({'email':_0x279f05[a5_0x59da('0x2d')][a5_0x59da('0xf')],'password':_0x279f05[a5_0x59da('0x2d')][a5_0x59da('0x12')]});User_1[a5_0x59da('0x18')]['findOne']({'email':_0x279f05[a5_0x59da('0x2d')][a5_0x59da('0xf')]},(_0x5dc845,_0x54a124)=>{if(_0x5dc845){return _0x3f7376(_0x5dc845);}if(_0x54a124){_0x279f05[a5_0x59da('0x16')]('errors',{'msg':a5_0x59da('0x2f')});return _0x9bb9b0[a5_0x59da('0xa')](a5_0x59da('0x30'));}_0x169cf2[a5_0x59da('0x31')](_0x5dc845=>{if(_0x5dc845){return _0x3f7376(_0x5dc845);}_0x279f05[a5_0x59da('0x32')](_0x169cf2,_0x5dc845=>{if(_0x5dc845){return _0x3f7376(_0x5dc845);}_0x9bb9b0[a5_0x59da('0xa')]('/');});});});};exports[a5_0x59da('0x33')]=(_0x2023ec,_0x1404cc)=>{_0x1404cc[a5_0x59da('0xb')](a5_0x59da('0x34'),{'title':a5_0x59da('0x35')});};exports[a5_0x59da('0x36')]=(_0x33f8b8,_0x526ec0,_0x27eabb)=>{_0x33f8b8[a5_0x59da('0x11')](a5_0x59da('0xf'),a5_0x59da('0x37'))[a5_0x59da('0x27')]();_0x33f8b8[a5_0x59da('0x14')](a5_0x59da('0xf'))[a5_0x59da('0x15')]({'gmail_remove_dots':![]});const _0x452444=_0x33f8b8[a5_0x59da('0x2e')]();if(_0x452444){_0x33f8b8[a5_0x59da('0x16')]('errors',_0x452444);return _0x526ec0['redirect'](a5_0x59da('0x38'));}User_1[a5_0x59da('0x18')][a5_0x59da('0x39')](_0x33f8b8[a5_0x59da('0x23')]['id'],(_0x4dcac1,_0x434fb7)=>{if(_0x4dcac1){return _0x27eabb(_0x4dcac1);}_0x434fb7['email']=_0x33f8b8[a5_0x59da('0x2d')][a5_0x59da('0xf')]||'';_0x434fb7[a5_0x59da('0x3a')][a5_0x59da('0x3b')]=_0x33f8b8[a5_0x59da('0x2d')][a5_0x59da('0x3b')]||'';_0x434fb7[a5_0x59da('0x3a')]['gender']=_0x33f8b8[a5_0x59da('0x2d')][a5_0x59da('0x3c')]||'';_0x434fb7[a5_0x59da('0x3a')][a5_0x59da('0x3d')]=_0x33f8b8['body'][a5_0x59da('0x3d')]||'';_0x434fb7[a5_0x59da('0x3a')]['website']=_0x33f8b8[a5_0x59da('0x2d')]['website']||'';_0x434fb7[a5_0x59da('0x31')](_0x4dcac1=>{if(_0x4dcac1){if(_0x4dcac1['code']===0x2af8){_0x33f8b8['flash'](a5_0x59da('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x526ec0['redirect']('/account');}return _0x27eabb(_0x4dcac1);}_0x33f8b8[a5_0x59da('0x16')]('success',{'msg':a5_0x59da('0x3e')});_0x526ec0['redirect'](a5_0x59da('0x38'));});});};exports[a5_0x59da('0x3f')]=(_0x5674af,_0x3c54fd,_0x3f18d8)=>{_0x5674af['assert']('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x59da('0x29')]({'min':0x4});_0x5674af['assert'](a5_0x59da('0x2a'),a5_0x59da('0x2b'))[a5_0x59da('0x2c')](_0x5674af[a5_0x59da('0x2d')][a5_0x59da('0x12')]);const _0x255c84=_0x5674af['validationErrors']();if(_0x255c84){_0x5674af['flash'](a5_0x59da('0x17'),_0x255c84);return _0x3c54fd['redirect'](a5_0x59da('0x38'));}User_1[a5_0x59da('0x18')][a5_0x59da('0x39')](_0x5674af[a5_0x59da('0x23')]['id'],(_0xff5947,_0x4c0e65)=>{if(_0xff5947){return _0x3f18d8(_0xff5947);}_0x4c0e65[a5_0x59da('0x12')]=_0x5674af['body'][a5_0x59da('0x12')];_0x4c0e65[a5_0x59da('0x31')](_0xff5947=>{if(_0xff5947){return _0x3f18d8(_0xff5947);}_0x5674af[a5_0x59da('0x16')](a5_0x59da('0x1d'),{'msg':a5_0x59da('0x40')});_0x3c54fd[a5_0x59da('0xa')](a5_0x59da('0x38'));});});};exports[a5_0x59da('0x41')]=(_0x292def,_0x41b007,_0x58bf99)=>{User_1['default']['remove']({'_id':_0x292def[a5_0x59da('0x23')]['id']},_0x1c6ac2=>{if(_0x1c6ac2){return _0x58bf99(_0x1c6ac2);}_0x292def[a5_0x59da('0x21')]();_0x292def[a5_0x59da('0x16')](a5_0x59da('0x42'),{'msg':a5_0x59da('0x43')});_0x41b007[a5_0x59da('0xa')]('/');});};exports[a5_0x59da('0x44')]=(_0x24cc74,_0x494f6d,_0x14d76e)=>{const _0x41f2a4=_0x24cc74[a5_0x59da('0x45')][a5_0x59da('0x46')];User_1['default']['findById'](_0x24cc74[a5_0x59da('0x23')]['id'],(_0x67f74e,_0x37db02)=>{if(_0x67f74e){return _0x14d76e(_0x67f74e);}_0x37db02[_0x41f2a4]=undefined;_0x37db02[a5_0x59da('0x47')]=_0x37db02[a5_0x59da('0x47')][a5_0x59da('0x48')](_0x55525f=>_0x55525f[a5_0x59da('0x49')]!==_0x41f2a4);_0x37db02[a5_0x59da('0x31')](_0x67f74e=>{if(_0x67f74e){return _0x14d76e(_0x67f74e);}_0x24cc74[a5_0x59da('0x16')](a5_0x59da('0x42'),{'msg':_0x41f2a4+a5_0x59da('0x4a')});_0x494f6d[a5_0x59da('0xa')](a5_0x59da('0x38'));});});};exports[a5_0x59da('0x4b')]=(_0x205ead,_0x39c9b5,_0x3ac95f)=>{if(_0x205ead[a5_0x59da('0x4c')]()){return _0x39c9b5[a5_0x59da('0xa')]('/');}User_1[a5_0x59da('0x18')][a5_0x59da('0x4d')]({'passwordResetToken':_0x205ead[a5_0x59da('0x45')][a5_0x59da('0x4e')]})[a5_0x59da('0x4f')](a5_0x59da('0x50'))['gt'](Date[a5_0x59da('0x51')]())[a5_0x59da('0x52')]((_0x194ee8,_0x47b130)=>{if(_0x194ee8){return _0x3ac95f(_0x194ee8);}if(!_0x47b130){_0x205ead['flash'](a5_0x59da('0x17'),{'msg':a5_0x59da('0x53')});return _0x39c9b5['redirect'](a5_0x59da('0x54'));}_0x39c9b5[a5_0x59da('0xb')](a5_0x59da('0x55'),{'title':a5_0x59da('0x56')});});};exports[a5_0x59da('0x57')]=(_0x173548,_0x389e26,_0x3c89f4)=>{_0x173548[a5_0x59da('0x11')](a5_0x59da('0x12'),a5_0x59da('0x58'))[a5_0x59da('0x29')]({'min':0x4});_0x173548['assert']('confirm',a5_0x59da('0x59'))[a5_0x59da('0x2c')](_0x173548['body']['password']);const _0xc27769=_0x173548[a5_0x59da('0x2e')]();if(_0xc27769){_0x173548['flash'](a5_0x59da('0x17'),_0xc27769);return _0x389e26[a5_0x59da('0xa')](a5_0x59da('0x5a'));}async_1[a5_0x59da('0x18')]['waterfall']([function resetPassword(_0x34cdaf){User_1[a5_0x59da('0x18')][a5_0x59da('0x4d')]({'passwordResetToken':_0x173548[a5_0x59da('0x45')]['token']})[a5_0x59da('0x4f')](a5_0x59da('0x50'))['gt'](Date[a5_0x59da('0x51')]())[a5_0x59da('0x52')]((_0x43f525,_0x16b792)=>{if(_0x43f525){return _0x3c89f4(_0x43f525);}if(!_0x16b792){_0x173548[a5_0x59da('0x16')]('errors',{'msg':a5_0x59da('0x53')});return _0x389e26[a5_0x59da('0xa')](a5_0x59da('0x5a'));}_0x16b792[a5_0x59da('0x12')]=_0x173548['body'][a5_0x59da('0x12')];_0x16b792['passwordResetToken']=undefined;_0x16b792['passwordResetExpires']=undefined;_0x16b792['save'](_0x43f525=>{if(_0x43f525){return _0x3c89f4(_0x43f525);}_0x173548['logIn'](_0x16b792,_0x43f525=>{_0x34cdaf(_0x43f525,_0x16b792);});});});},function sendResetPasswordEmail(_0x28f2d8,_0x1b03a3){const _0x211c89=nodemailer_1['default'][a5_0x59da('0x5b')]({'service':a5_0x59da('0x5c'),'auth':{'user':process[a5_0x59da('0x5d')]['SENDGRID_USER'],'pass':process['env'][a5_0x59da('0x5e')]}});const _0x4e9b6e={'to':_0x28f2d8[a5_0x59da('0xf')],'from':a5_0x59da('0x5f'),'subject':a5_0x59da('0x60'),'text':a5_0x59da('0x61')+_0x28f2d8[a5_0x59da('0xf')]+a5_0x59da('0x62')};_0x211c89['sendMail'](_0x4e9b6e,_0x4b2f65=>{_0x173548[a5_0x59da('0x16')](a5_0x59da('0x1d'),{'msg':a5_0x59da('0x63')});_0x1b03a3(_0x4b2f65);});}],_0x1685e8=>{if(_0x1685e8){return _0x3c89f4(_0x1685e8);}_0x389e26[a5_0x59da('0xa')]('/');});};exports[a5_0x59da('0x64')]=(_0x7a36b4,_0x5e2b4f)=>{if(_0x7a36b4['isAuthenticated']()){return _0x5e2b4f['redirect']('/');}_0x5e2b4f[a5_0x59da('0xb')](a5_0x59da('0x65'),{'title':a5_0x59da('0x66')});};exports[a5_0x59da('0x67')]=(_0x815778,_0x47a20b,_0x4bef8e)=>{_0x815778[a5_0x59da('0x11')](a5_0x59da('0xf'),a5_0x59da('0x37'))[a5_0x59da('0x27')]();_0x815778[a5_0x59da('0x14')](a5_0x59da('0xf'))[a5_0x59da('0x15')]({'gmail_remove_dots':![]});const _0x3f8d9d=_0x815778[a5_0x59da('0x2e')]();if(_0x3f8d9d){_0x815778[a5_0x59da('0x16')](a5_0x59da('0x17'),_0x3f8d9d);return _0x47a20b[a5_0x59da('0xa')]('/forgot');}async_1['default'][a5_0x59da('0x68')]([function createRandomToken(_0x161318){crypto_1['default'][a5_0x59da('0x69')](0x10,(_0x143e65,_0x58d1a2)=>{const _0x236291=_0x58d1a2[a5_0x59da('0x6a')](a5_0x59da('0x6b'));_0x161318(_0x143e65,_0x236291);});},function setRandomToken(_0x44e2ee,_0x333ad4){User_1[a5_0x59da('0x18')][a5_0x59da('0x4d')]({'email':_0x815778[a5_0x59da('0x2d')][a5_0x59da('0xf')]},(_0x526c09,_0xd6be05)=>{if(_0x526c09){return _0x333ad4(_0x526c09);}if(!_0xd6be05){_0x815778[a5_0x59da('0x16')](a5_0x59da('0x17'),{'msg':a5_0x59da('0x6c')});return _0x47a20b[a5_0x59da('0xa')](a5_0x59da('0x54'));}_0xd6be05[a5_0x59da('0x6d')]=_0x44e2ee;_0xd6be05[a5_0x59da('0x50')]=Date[a5_0x59da('0x51')]()+0x36ee80;_0xd6be05[a5_0x59da('0x31')](_0x526c09=>{_0x333ad4(_0x526c09,_0x44e2ee,_0xd6be05);});});},function sendForgotPasswordEmail(_0x387411,_0x5cc050,_0x20626a){const _0xcd5612=nodemailer_1[a5_0x59da('0x18')][a5_0x59da('0x5b')]({'service':a5_0x59da('0x5c'),'auth':{'user':process[a5_0x59da('0x5d')][a5_0x59da('0x6e')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x55d168={'to':_0x5cc050[a5_0x59da('0xf')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x59da('0x6f')+_0x815778[a5_0x59da('0x70')][a5_0x59da('0x71')]+a5_0x59da('0x72')+_0x387411+a5_0x59da('0x73')};_0xcd5612[a5_0x59da('0x74')](_0x55d168,_0x14f29d=>{_0x815778[a5_0x59da('0x16')](a5_0x59da('0x42'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x5cc050[a5_0x59da('0xf')]+a5_0x59da('0x75')});_0x20626a(_0x14f29d);});}],_0xa161dc=>{if(_0xa161dc){return _0x4bef8e(_0xa161dc);}_0x47a20b[a5_0x59da('0xa')](a5_0x59da('0x54'));});};