var a5_0x189b=['website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','findById','save','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','logIn','createTransport','SendGrid','SENDGRID_USER','env','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','/forgot','passwordResetToken','SENDGRID_PASSWORD','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__esModule','defineProperty','async','nodemailer','passport','../models/User','getLogin','user','redirect','render','account/login','postLogin','assert','email','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','authenticate','local','message','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','default','findOne','/signup','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','isEmail','/account','profile','gender','location'];(function(_0x1341d1,_0x50f69f){var _0x50fdc5=function(_0x317366){while(--_0x317366){_0x1341d1['push'](_0x1341d1['shift']());}};_0x50fdc5(++_0x50f69f);}(a5_0x189b,0x170));var a5_0x380c=function(_0xd32841,_0x4457c4){_0xd32841=_0xd32841-0x0;var _0x154b2d=a5_0x189b[_0xd32841];return _0x154b2d;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x197aca){return _0x197aca&&_0x197aca[a5_0x380c('0x0')]?_0x197aca:{'default':_0x197aca};};Object[a5_0x380c('0x1')](exports,a5_0x380c('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x380c('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x380c('0x3')));const passport_1=__importDefault(require(a5_0x380c('0x4')));const User_1=__importDefault(require(a5_0x380c('0x5')));const request=require('express-validator');exports[a5_0x380c('0x6')]=(_0xac473,_0x330088)=>{if(_0xac473[a5_0x380c('0x7')]){return _0x330088[a5_0x380c('0x8')]('/');}_0x330088[a5_0x380c('0x9')](a5_0x380c('0xa'),{'title':'Login'});};exports[a5_0x380c('0xb')]=(_0x3ae07e,_0x578a24,_0x4ca9ba)=>{_0x3ae07e[a5_0x380c('0xc')](a5_0x380c('0xd'),'Email\x20is\x20not\x20valid')['isEmail']();_0x3ae07e[a5_0x380c('0xc')](a5_0x380c('0xe'),a5_0x380c('0xf'))[a5_0x380c('0x10')]();_0x3ae07e[a5_0x380c('0x11')]('email')[a5_0x380c('0x12')]({'gmail_remove_dots':![]});const _0x50d857=_0x3ae07e[a5_0x380c('0x13')]();if(_0x50d857){_0x3ae07e[a5_0x380c('0x14')](a5_0x380c('0x15'),_0x50d857);return _0x578a24[a5_0x380c('0x8')](a5_0x380c('0x16'));}passport_1['default'][a5_0x380c('0x17')](a5_0x380c('0x18'),(_0x2356d0,_0x5f1724,_0x2ddeb7)=>{if(_0x2356d0){return _0x4ca9ba(_0x2356d0);}if(!_0x5f1724){_0x3ae07e['flash'](a5_0x380c('0x15'),_0x2ddeb7[a5_0x380c('0x19')]);return _0x578a24['redirect'](a5_0x380c('0x16'));}_0x3ae07e['logIn'](_0x5f1724,_0x2356d0=>{if(_0x2356d0){return _0x4ca9ba(_0x2356d0);}_0x3ae07e[a5_0x380c('0x14')](a5_0x380c('0x1a'),{'msg':a5_0x380c('0x1b')});_0x578a24['redirect'](_0x3ae07e[a5_0x380c('0x1c')][a5_0x380c('0x1d')]||'/');});})(_0x3ae07e,_0x578a24,_0x4ca9ba);};exports[a5_0x380c('0x1e')]=(_0x3f27fb,_0x45cade)=>{_0x3f27fb[a5_0x380c('0x1e')]();_0x45cade[a5_0x380c('0x8')]('/');};exports[a5_0x380c('0x1f')]=(_0x4cf3c2,_0x432992)=>{if(_0x4cf3c2[a5_0x380c('0x7')]){return _0x432992[a5_0x380c('0x8')]('/');}_0x432992['render'](a5_0x380c('0x20'),{'title':a5_0x380c('0x21')});};exports[a5_0x380c('0x22')]=(_0x2f1b48,_0x35e68c,_0xd93241)=>{_0x2f1b48[a5_0x380c('0xc')](a5_0x380c('0xd'),a5_0x380c('0x23'))['isEmail']();_0x2f1b48[a5_0x380c('0xc')](a5_0x380c('0xe'),a5_0x380c('0x24'))[a5_0x380c('0x25')]({'min':0x4});_0x2f1b48[a5_0x380c('0xc')]('confirmPassword',a5_0x380c('0x26'))[a5_0x380c('0x27')](_0x2f1b48[a5_0x380c('0x28')][a5_0x380c('0xe')]);_0x2f1b48[a5_0x380c('0x11')]('email')[a5_0x380c('0x12')]({'gmail_remove_dots':![]});const _0x17b88a=_0x2f1b48['validationErrors']();if(_0x17b88a){_0x2f1b48[a5_0x380c('0x14')](a5_0x380c('0x15'),_0x17b88a);return _0x35e68c[a5_0x380c('0x8')]('/signup');}const _0x539f0b=new User_1[(a5_0x380c('0x29'))]({});User_1['default'][a5_0x380c('0x2a')]({'email':_0x2f1b48['body'][a5_0x380c('0xd')]},(_0x55ab94,_0x50c584)=>{if(_0x55ab94){return _0xd93241(_0x55ab94);}if(_0x50c584){_0x2f1b48[a5_0x380c('0x14')](a5_0x380c('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x35e68c['redirect'](a5_0x380c('0x2b'));}_0x539f0b['save'](_0x55ab94=>{if(_0x55ab94){return _0xd93241(_0x55ab94);}_0x2f1b48['logIn'](_0x539f0b,_0x55ab94=>{if(_0x55ab94){return _0xd93241(_0x55ab94);}_0x35e68c[a5_0x380c('0x8')]('/');});});});};exports['getAccount']=(_0x4bbc98,_0x125e4c)=>{_0x125e4c[a5_0x380c('0x9')](a5_0x380c('0x2c'),{'title':a5_0x380c('0x2d')});};exports['postUpdateProfile']=(_0x5b3380,_0x1f8ee9,_0x32ecf2)=>{_0x5b3380[a5_0x380c('0xc')](a5_0x380c('0xd'),a5_0x380c('0x2e'))[a5_0x380c('0x2f')]();_0x5b3380[a5_0x380c('0x11')](a5_0x380c('0xd'))[a5_0x380c('0x12')]({'gmail_remove_dots':![]});const _0x737a13=_0x5b3380[a5_0x380c('0x13')]();if(_0x737a13){_0x5b3380[a5_0x380c('0x14')]('errors',_0x737a13);return _0x1f8ee9['redirect'](a5_0x380c('0x30'));}User_1[a5_0x380c('0x29')]['findById'](_0x5b3380[a5_0x380c('0x7')]['id'],(_0x5cd3e0,_0x448fb2)=>{if(_0x5cd3e0){return _0x32ecf2(_0x5cd3e0);}_0x448fb2[a5_0x380c('0xd')]=_0x5b3380[a5_0x380c('0x28')][a5_0x380c('0xd')]||'';_0x448fb2['profile']['name']=_0x5b3380[a5_0x380c('0x28')]['name']||'';_0x448fb2[a5_0x380c('0x31')][a5_0x380c('0x32')]=_0x5b3380['body'][a5_0x380c('0x32')]||'';_0x448fb2['profile']['location']=_0x5b3380[a5_0x380c('0x28')][a5_0x380c('0x33')]||'';_0x448fb2[a5_0x380c('0x31')][a5_0x380c('0x34')]=_0x5b3380['body']['website']||'';_0x448fb2['save'](_0x5cd3e0=>{if(_0x5cd3e0){if(_0x5cd3e0[a5_0x380c('0x35')]===0x2af8){_0x5b3380[a5_0x380c('0x14')](a5_0x380c('0x15'),{'msg':a5_0x380c('0x36')});return _0x1f8ee9[a5_0x380c('0x8')](a5_0x380c('0x30'));}return _0x32ecf2(_0x5cd3e0);}_0x5b3380[a5_0x380c('0x14')]('success',{'msg':a5_0x380c('0x37')});_0x1f8ee9['redirect'](a5_0x380c('0x30'));});});};exports[a5_0x380c('0x38')]=(_0x35511b,_0x2f004a,_0x849368)=>{_0x35511b[a5_0x380c('0xc')](a5_0x380c('0xe'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x380c('0x25')]({'min':0x4});_0x35511b['assert'](a5_0x380c('0x39'),a5_0x380c('0x26'))[a5_0x380c('0x27')](_0x35511b[a5_0x380c('0x28')][a5_0x380c('0xe')]);const _0xfed8aa=_0x35511b[a5_0x380c('0x13')]();if(_0xfed8aa){_0x35511b['flash'](a5_0x380c('0x15'),_0xfed8aa);return _0x2f004a[a5_0x380c('0x8')]('/account');}User_1[a5_0x380c('0x29')][a5_0x380c('0x3a')](_0x35511b['user']['id'],(_0x53c3c7,_0x3ec252)=>{if(_0x53c3c7){return _0x849368(_0x53c3c7);}_0x3ec252[a5_0x380c('0xe')]=_0x35511b[a5_0x380c('0x28')]['password'];_0x3ec252[a5_0x380c('0x3b')](_0x53c3c7=>{if(_0x53c3c7){return _0x849368(_0x53c3c7);}_0x35511b[a5_0x380c('0x14')](a5_0x380c('0x1a'),{'msg':a5_0x380c('0x3c')});_0x2f004a[a5_0x380c('0x8')](a5_0x380c('0x30'));});});};exports['postDeleteAccount']=(_0x1094e5,_0xfb87f2,_0x111c10)=>{User_1[a5_0x380c('0x29')][a5_0x380c('0x3d')]({'_id':_0x1094e5[a5_0x380c('0x7')]['id']},_0x1b07e1=>{if(_0x1b07e1){return _0x111c10(_0x1b07e1);}_0x1094e5[a5_0x380c('0x1e')]();_0x1094e5[a5_0x380c('0x14')](a5_0x380c('0x3e'),{'msg':a5_0x380c('0x3f')});_0xfb87f2[a5_0x380c('0x8')]('/');});};exports[a5_0x380c('0x40')]=(_0x421300,_0x2a3073,_0x48f9ce)=>{const _0x2595a1=_0x421300[a5_0x380c('0x41')]['provider'];User_1[a5_0x380c('0x29')][a5_0x380c('0x3a')](_0x421300[a5_0x380c('0x7')]['id'],(_0x1da1b7,_0x194316)=>{if(_0x1da1b7){return _0x48f9ce(_0x1da1b7);}_0x194316[_0x2595a1]=undefined;_0x194316['tokens']=_0x194316[a5_0x380c('0x42')]['filter'](_0x55907c=>_0x55907c[a5_0x380c('0x43')]!==_0x2595a1);_0x194316[a5_0x380c('0x3b')](_0x1da1b7=>{if(_0x1da1b7){return _0x48f9ce(_0x1da1b7);}_0x421300[a5_0x380c('0x14')]('info',{'msg':_0x2595a1+a5_0x380c('0x44')});_0x2a3073[a5_0x380c('0x8')](a5_0x380c('0x30'));});});};exports[a5_0x380c('0x45')]=(_0xad241,_0x43a792,_0xb135b2)=>{if(_0xad241[a5_0x380c('0x46')]()){return _0x43a792[a5_0x380c('0x8')]('/');}User_1[a5_0x380c('0x29')]['findOne']({'passwordResetToken':_0xad241[a5_0x380c('0x41')][a5_0x380c('0x47')]})[a5_0x380c('0x48')](a5_0x380c('0x49'))['gt'](Date[a5_0x380c('0x4a')]())[a5_0x380c('0x4b')]((_0x363d7f,_0xa8f3f0)=>{if(_0x363d7f){return _0xb135b2(_0x363d7f);}if(!_0xa8f3f0){_0xad241[a5_0x380c('0x14')](a5_0x380c('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x43a792[a5_0x380c('0x8')]('/forgot');}_0x43a792['render'](a5_0x380c('0x4c'),{'title':a5_0x380c('0x4d')});});};exports[a5_0x380c('0x4e')]=(_0xa7d3f3,_0x2bf61b,_0x54a40d)=>{_0xa7d3f3[a5_0x380c('0xc')]('password',a5_0x380c('0x4f'))['len']({'min':0x4});_0xa7d3f3[a5_0x380c('0xc')]('confirm',a5_0x380c('0x50'))[a5_0x380c('0x27')](_0xa7d3f3[a5_0x380c('0x28')][a5_0x380c('0xe')]);const _0x23c4e5=_0xa7d3f3['validationErrors']();if(_0x23c4e5){_0xa7d3f3[a5_0x380c('0x14')](a5_0x380c('0x15'),_0x23c4e5);return _0x2bf61b[a5_0x380c('0x8')](a5_0x380c('0x51'));}async_1[a5_0x380c('0x29')]['waterfall']([function resetPassword(_0x4c77d1){User_1[a5_0x380c('0x29')]['findOne']({'passwordResetToken':_0xa7d3f3[a5_0x380c('0x41')][a5_0x380c('0x47')]})[a5_0x380c('0x48')](a5_0x380c('0x49'))['gt'](Date[a5_0x380c('0x4a')]())[a5_0x380c('0x4b')]((_0x5ce77b,_0x569a2f)=>{if(_0x5ce77b){return _0x54a40d(_0x5ce77b);}if(!_0x569a2f){_0xa7d3f3[a5_0x380c('0x14')](a5_0x380c('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2bf61b[a5_0x380c('0x8')]('back');}_0x569a2f[a5_0x380c('0xe')]=_0xa7d3f3['body'][a5_0x380c('0xe')];_0x569a2f['passwordResetToken']=undefined;_0x569a2f[a5_0x380c('0x49')]=undefined;_0x569a2f[a5_0x380c('0x3b')](_0x5ce77b=>{if(_0x5ce77b){return _0x54a40d(_0x5ce77b);}_0xa7d3f3[a5_0x380c('0x52')](_0x569a2f,_0x5ce77b=>{_0x4c77d1(_0x5ce77b,_0x569a2f);});});});},function sendResetPasswordEmail(_0x10bb22,_0x480cf6){const _0x3d995d=nodemailer_1[a5_0x380c('0x29')][a5_0x380c('0x53')]({'service':a5_0x380c('0x54'),'auth':{'user':process['env'][a5_0x380c('0x55')],'pass':process[a5_0x380c('0x56')]['SENDGRID_PASSWORD']}});const _0x2071cb={'to':_0x10bb22[a5_0x380c('0xd')],'from':a5_0x380c('0x57'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x380c('0x58')+_0x10bb22[a5_0x380c('0xd')]+a5_0x380c('0x59')};_0x3d995d[a5_0x380c('0x5a')](_0x2071cb,_0x5be4f6=>{_0xa7d3f3[a5_0x380c('0x14')](a5_0x380c('0x1a'),{'msg':a5_0x380c('0x5b')});_0x480cf6(_0x5be4f6);});}],_0x1edd5c=>{if(_0x1edd5c){return _0x54a40d(_0x1edd5c);}_0x2bf61b[a5_0x380c('0x8')]('/');});};exports['getForgot']=(_0x52c679,_0x27542b)=>{if(_0x52c679['isAuthenticated']()){return _0x27542b['redirect']('/');}_0x27542b[a5_0x380c('0x9')](a5_0x380c('0x5c'),{'title':a5_0x380c('0x5d')});};exports['postForgot']=(_0x58166e,_0x551b94,_0x37e36e)=>{_0x58166e[a5_0x380c('0xc')](a5_0x380c('0xd'),a5_0x380c('0x2e'))[a5_0x380c('0x2f')]();_0x58166e[a5_0x380c('0x11')](a5_0x380c('0xd'))[a5_0x380c('0x12')]({'gmail_remove_dots':![]});const _0x55fe2c=_0x58166e['validationErrors']();if(_0x55fe2c){_0x58166e['flash'](a5_0x380c('0x15'),_0x55fe2c);return _0x551b94[a5_0x380c('0x8')]('/forgot');}async_1[a5_0x380c('0x29')]['waterfall']([function createRandomToken(_0x27e4ac){crypto_1[a5_0x380c('0x29')][a5_0x380c('0x5e')](0x10,(_0x3753e3,_0x1ae3c6)=>{const _0x52db16=_0x1ae3c6['toString']('hex');_0x27e4ac(_0x3753e3,_0x52db16);});},function setRandomToken(_0x21fe62,_0xc7b6f4){User_1[a5_0x380c('0x29')][a5_0x380c('0x2a')]({'email':_0x58166e[a5_0x380c('0x28')]['email']},(_0x3c4c23,_0x48d1d0)=>{if(_0x3c4c23){return _0xc7b6f4(_0x3c4c23);}if(!_0x48d1d0){_0x58166e['flash'](a5_0x380c('0x15'),{'msg':a5_0x380c('0x5f')});return _0x551b94[a5_0x380c('0x8')](a5_0x380c('0x60'));}_0x48d1d0[a5_0x380c('0x61')]=_0x21fe62;_0x48d1d0[a5_0x380c('0x49')]=Date[a5_0x380c('0x4a')]()+0x36ee80;_0x48d1d0[a5_0x380c('0x3b')](_0x3c4c23=>{_0xc7b6f4(_0x3c4c23,_0x21fe62,_0x48d1d0);});});},function sendForgotPasswordEmail(_0x459552,_0x493b01,_0x197bd9){const _0xfd9564=nodemailer_1[a5_0x380c('0x29')][a5_0x380c('0x53')]({'service':a5_0x380c('0x54'),'auth':{'user':process[a5_0x380c('0x56')]['SENDGRID_USER'],'pass':process['env'][a5_0x380c('0x62')]}});const _0x5ef0a1={'to':_0x493b01['email'],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x380c('0x63')+_0x58166e[a5_0x380c('0x64')][a5_0x380c('0x65')]+a5_0x380c('0x66')+_0x459552+a5_0x380c('0x67')};_0xfd9564[a5_0x380c('0x5a')](_0x5ef0a1,_0x2757c4=>{_0x58166e[a5_0x380c('0x14')](a5_0x380c('0x3e'),{'msg':a5_0x380c('0x68')+_0x493b01[a5_0x380c('0xd')]+'\x20with\x20further\x20instructions.'});_0x197bd9(_0x2757c4);});}],_0x1a2904=>{if(_0x1a2904){return _0x37e36e(_0x1a2904);}_0x551b94[a5_0x380c('0x8')](a5_0x380c('0x60'));});};