var a5_0x192c=['getAccount','render','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','user','profile','name','gender','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','postUpdatePassword','equals','findById','success','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','now','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','Forgot\x20Password','postForgot','/forgot','passwordResetToken','createTransport','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','async','crypto','passport','express-validator','redirect','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','errors','/login','default','authenticate','local','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','Create\x20Account','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.'];(function(_0x4c9705,_0x4a2590){var _0x31ef58=function(_0x4fce3b){while(--_0x4fce3b){_0x4c9705['push'](_0x4c9705['shift']());}};_0x31ef58(++_0x4a2590);}(a5_0x192c,0xb5));var a5_0x411b=function(_0x3689b4,_0x24b967){_0x3689b4=_0x3689b4-0x0;var _0x2e0eb6=a5_0x192c[_0x3689b4];return _0x2e0eb6;};'use strict';var __importDefault=this&&this[a5_0x411b('0x0')]||function(_0x52297e){return _0x52297e&&_0x52297e['__esModule']?_0x52297e:{'default':_0x52297e};};Object[a5_0x411b('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x411b('0x2')));const crypto_1=__importDefault(require(a5_0x411b('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x411b('0x4')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x411b('0x5'));exports['getLogin']=(_0x27cb1c,_0x588906)=>{if(_0x27cb1c['user']){return _0x588906[a5_0x411b('0x6')]('/');}_0x588906['render'](a5_0x411b('0x7'),{'title':'Login'});};exports[a5_0x411b('0x8')]=(_0x2deaef,_0x47a09f,_0x36b9bb)=>{_0x2deaef[a5_0x411b('0x9')](a5_0x411b('0xa'),a5_0x411b('0xb'))[a5_0x411b('0xc')]();_0x2deaef[a5_0x411b('0x9')]('password',a5_0x411b('0xd'))[a5_0x411b('0xe')]();_0x2deaef[a5_0x411b('0xf')](a5_0x411b('0xa'))[a5_0x411b('0x10')]({'gmail_remove_dots':![]});const _0x21ebb8=_0x2deaef['validationErrors']();if(_0x21ebb8){_0x2deaef[a5_0x411b('0x11')](a5_0x411b('0x12'),_0x21ebb8);return _0x47a09f[a5_0x411b('0x6')](a5_0x411b('0x13'));}passport_1[a5_0x411b('0x14')][a5_0x411b('0x15')](a5_0x411b('0x16'),(_0x4a4107,_0x5ee099,_0x580c50)=>{if(_0x4a4107){return _0x36b9bb(_0x4a4107);}if(!_0x5ee099){_0x2deaef['flash']('errors',_0x580c50['message']);return _0x47a09f['redirect']('/login');}_0x2deaef[a5_0x411b('0x17')](_0x5ee099,_0x4a4107=>{if(_0x4a4107){return _0x36b9bb(_0x4a4107);}_0x2deaef[a5_0x411b('0x11')]('success',{'msg':a5_0x411b('0x18')});_0x47a09f[a5_0x411b('0x6')](_0x2deaef[a5_0x411b('0x19')][a5_0x411b('0x1a')]||'/');});})(_0x2deaef,_0x47a09f,_0x36b9bb);};exports['logout']=(_0x331ef3,_0x35cbc2)=>{_0x331ef3[a5_0x411b('0x1b')]();_0x35cbc2['redirect']('/');};exports['getSignup']=(_0x7abb80,_0x112315)=>{if(_0x7abb80['user']){return _0x112315[a5_0x411b('0x6')]('/');}_0x112315['render'](a5_0x411b('0x1c'),{'title':a5_0x411b('0x1d')});};exports[a5_0x411b('0x1e')]=(_0x2522f3,_0x503570,_0x277e15)=>{_0x2522f3[a5_0x411b('0x9')](a5_0x411b('0xa'),a5_0x411b('0xb'))[a5_0x411b('0xc')]();_0x2522f3[a5_0x411b('0x9')](a5_0x411b('0x1f'),a5_0x411b('0x20'))[a5_0x411b('0x21')]({'min':0x4});_0x2522f3['assert'](a5_0x411b('0x22'),a5_0x411b('0x23'))['equals'](_0x2522f3[a5_0x411b('0x24')]['password']);_0x2522f3[a5_0x411b('0xf')](a5_0x411b('0xa'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xfacee3=_0x2522f3[a5_0x411b('0x25')]();if(_0xfacee3){_0x2522f3['flash'](a5_0x411b('0x12'),_0xfacee3);return _0x503570[a5_0x411b('0x6')](a5_0x411b('0x26'));}const _0x5bb43b=new User_1['default']({});User_1[a5_0x411b('0x14')][a5_0x411b('0x27')]({'email':_0x2522f3['body']['email']},(_0x4954b5,_0x529e2b)=>{if(_0x4954b5){return _0x277e15(_0x4954b5);}if(_0x529e2b){_0x2522f3[a5_0x411b('0x11')]('errors',{'msg':a5_0x411b('0x28')});return _0x503570[a5_0x411b('0x6')](a5_0x411b('0x26'));}_0x5bb43b['save'](_0x4954b5=>{if(_0x4954b5){return _0x277e15(_0x4954b5);}_0x2522f3[a5_0x411b('0x17')](_0x5bb43b,_0x4954b5=>{if(_0x4954b5){return _0x277e15(_0x4954b5);}_0x503570[a5_0x411b('0x6')]('/');});});});};exports[a5_0x411b('0x29')]=(_0x1904d1,_0x21b7a9)=>{_0x21b7a9[a5_0x411b('0x2a')](a5_0x411b('0x2b'),{'title':a5_0x411b('0x2c')});};exports[a5_0x411b('0x2d')]=(_0x29a121,_0x509607,_0x22efd2)=>{_0x29a121[a5_0x411b('0x9')](a5_0x411b('0xa'),a5_0x411b('0x2e'))[a5_0x411b('0xc')]();_0x29a121[a5_0x411b('0xf')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x4d7f17=_0x29a121[a5_0x411b('0x25')]();if(_0x4d7f17){_0x29a121[a5_0x411b('0x11')](a5_0x411b('0x12'),_0x4d7f17);return _0x509607['redirect']('/account');}User_1['default']['findById'](_0x29a121[a5_0x411b('0x2f')]['id'],(_0x16aaff,_0x4f059b)=>{if(_0x16aaff){return _0x22efd2(_0x16aaff);}_0x4f059b[a5_0x411b('0xa')]=_0x29a121[a5_0x411b('0x24')]['email']||'';_0x4f059b[a5_0x411b('0x30')][a5_0x411b('0x31')]=_0x29a121[a5_0x411b('0x24')][a5_0x411b('0x31')]||'';_0x4f059b[a5_0x411b('0x30')][a5_0x411b('0x32')]=_0x29a121[a5_0x411b('0x24')][a5_0x411b('0x32')]||'';_0x4f059b[a5_0x411b('0x30')][a5_0x411b('0x33')]=_0x29a121[a5_0x411b('0x24')][a5_0x411b('0x33')]||'';_0x4f059b[a5_0x411b('0x30')][a5_0x411b('0x34')]=_0x29a121['body'][a5_0x411b('0x34')]||'';_0x4f059b[a5_0x411b('0x35')](_0x16aaff=>{if(_0x16aaff){if(_0x16aaff[a5_0x411b('0x36')]===0x2af8){_0x29a121[a5_0x411b('0x11')](a5_0x411b('0x12'),{'msg':a5_0x411b('0x37')});return _0x509607[a5_0x411b('0x6')](a5_0x411b('0x38'));}return _0x22efd2(_0x16aaff);}_0x29a121['flash']('success',{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x509607[a5_0x411b('0x6')](a5_0x411b('0x38'));});});};exports[a5_0x411b('0x39')]=(_0x2770a2,_0xd0e919,_0x324679)=>{_0x2770a2[a5_0x411b('0x9')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x2770a2[a5_0x411b('0x9')](a5_0x411b('0x22'),'Passwords\x20do\x20not\x20match')[a5_0x411b('0x3a')](_0x2770a2[a5_0x411b('0x24')][a5_0x411b('0x1f')]);const _0x453833=_0x2770a2['validationErrors']();if(_0x453833){_0x2770a2[a5_0x411b('0x11')](a5_0x411b('0x12'),_0x453833);return _0xd0e919[a5_0x411b('0x6')](a5_0x411b('0x38'));}User_1[a5_0x411b('0x14')][a5_0x411b('0x3b')](_0x2770a2[a5_0x411b('0x2f')]['id'],(_0x3e9653,_0x86bc71)=>{if(_0x3e9653){return _0x324679(_0x3e9653);}_0x86bc71[a5_0x411b('0x1f')]=_0x2770a2[a5_0x411b('0x24')]['password'];_0x86bc71[a5_0x411b('0x35')](_0x3e9653=>{if(_0x3e9653){return _0x324679(_0x3e9653);}_0x2770a2[a5_0x411b('0x11')](a5_0x411b('0x3c'),{'msg':a5_0x411b('0x3d')});_0xd0e919['redirect'](a5_0x411b('0x38'));});});};exports[a5_0x411b('0x3e')]=(_0x658510,_0x43e4c4,_0xc107fc)=>{User_1[a5_0x411b('0x14')][a5_0x411b('0x3f')]({'_id':_0x658510[a5_0x411b('0x2f')]['id']},_0x42744d=>{if(_0x42744d){return _0xc107fc(_0x42744d);}_0x658510[a5_0x411b('0x1b')]();_0x658510['flash'](a5_0x411b('0x40'),{'msg':a5_0x411b('0x41')});_0x43e4c4[a5_0x411b('0x6')]('/');});};exports['getOauthUnlink']=(_0x131e11,_0x2d5d6c,_0x79baad)=>{const _0x32a7d1=_0x131e11[a5_0x411b('0x42')][a5_0x411b('0x43')];User_1[a5_0x411b('0x14')]['findById'](_0x131e11[a5_0x411b('0x2f')]['id'],(_0x276835,_0x38bc8f)=>{if(_0x276835){return _0x79baad(_0x276835);}_0x38bc8f[_0x32a7d1]=undefined;_0x38bc8f[a5_0x411b('0x44')]=_0x38bc8f[a5_0x411b('0x44')][a5_0x411b('0x45')](_0x5e345f=>_0x5e345f[a5_0x411b('0x46')]!==_0x32a7d1);_0x38bc8f[a5_0x411b('0x35')](_0x276835=>{if(_0x276835){return _0x79baad(_0x276835);}_0x131e11[a5_0x411b('0x11')](a5_0x411b('0x40'),{'msg':_0x32a7d1+a5_0x411b('0x47')});_0x2d5d6c['redirect'](a5_0x411b('0x38'));});});};exports[a5_0x411b('0x48')]=(_0x53e7c4,_0x3eccd4,_0x4c913d)=>{if(_0x53e7c4[a5_0x411b('0x49')]()){return _0x3eccd4[a5_0x411b('0x6')]('/');}User_1['default'][a5_0x411b('0x27')]({'passwordResetToken':_0x53e7c4['params'][a5_0x411b('0x4a')]})[a5_0x411b('0x4b')](a5_0x411b('0x4c'))['gt'](Date['now']())[a5_0x411b('0x4d')]((_0x725bb4,_0x4d5ff9)=>{if(_0x725bb4){return _0x4c913d(_0x725bb4);}if(!_0x4d5ff9){_0x53e7c4[a5_0x411b('0x11')](a5_0x411b('0x12'),{'msg':a5_0x411b('0x4e')});return _0x3eccd4[a5_0x411b('0x6')]('/forgot');}_0x3eccd4['render'](a5_0x411b('0x4f'),{'title':a5_0x411b('0x50')});});};exports[a5_0x411b('0x51')]=(_0x19ebdc,_0x27dea6,_0x14a0cd)=>{_0x19ebdc['assert']('password',a5_0x411b('0x52'))[a5_0x411b('0x21')]({'min':0x4});_0x19ebdc[a5_0x411b('0x9')](a5_0x411b('0x53'),a5_0x411b('0x54'))[a5_0x411b('0x3a')](_0x19ebdc['body'][a5_0x411b('0x1f')]);const _0x291d0c=_0x19ebdc[a5_0x411b('0x25')]();if(_0x291d0c){_0x19ebdc['flash'](a5_0x411b('0x12'),_0x291d0c);return _0x27dea6[a5_0x411b('0x6')](a5_0x411b('0x55'));}async_1['default'][a5_0x411b('0x56')]([function resetPassword(_0x5ae1f8){User_1[a5_0x411b('0x14')][a5_0x411b('0x27')]({'passwordResetToken':_0x19ebdc[a5_0x411b('0x42')]['token']})['where']('passwordResetExpires')['gt'](Date[a5_0x411b('0x57')]())['exec']((_0x29c51b,_0x4c37a6)=>{if(_0x29c51b){return _0x14a0cd(_0x29c51b);}if(!_0x4c37a6){_0x19ebdc['flash'](a5_0x411b('0x12'),{'msg':a5_0x411b('0x4e')});return _0x27dea6[a5_0x411b('0x6')](a5_0x411b('0x55'));}_0x4c37a6[a5_0x411b('0x1f')]=_0x19ebdc['body']['password'];_0x4c37a6['passwordResetToken']=undefined;_0x4c37a6['passwordResetExpires']=undefined;_0x4c37a6[a5_0x411b('0x35')](_0x29c51b=>{if(_0x29c51b){return _0x14a0cd(_0x29c51b);}_0x19ebdc[a5_0x411b('0x17')](_0x4c37a6,_0x29c51b=>{_0x5ae1f8(_0x29c51b,_0x4c37a6);});});});},function sendResetPasswordEmail(_0x1d522e,_0x299bb1){const _0x2e6c84=nodemailer_1['default']['createTransport']({'service':a5_0x411b('0x58'),'auth':{'user':process[a5_0x411b('0x59')][a5_0x411b('0x5a')],'pass':process[a5_0x411b('0x59')][a5_0x411b('0x5b')]}});const _0xa7cbad={'to':_0x1d522e[a5_0x411b('0xa')],'from':a5_0x411b('0x5c'),'subject':a5_0x411b('0x5d'),'text':a5_0x411b('0x5e')+_0x1d522e[a5_0x411b('0xa')]+a5_0x411b('0x5f')};_0x2e6c84['sendMail'](_0xa7cbad,_0x2f3396=>{_0x19ebdc[a5_0x411b('0x11')](a5_0x411b('0x3c'),{'msg':a5_0x411b('0x60')});_0x299bb1(_0x2f3396);});}],_0x57aa9b=>{if(_0x57aa9b){return _0x14a0cd(_0x57aa9b);}_0x27dea6['redirect']('/');});};exports['getForgot']=(_0x12af56,_0x1166c9)=>{if(_0x12af56[a5_0x411b('0x49')]()){return _0x1166c9[a5_0x411b('0x6')]('/');}_0x1166c9['render']('account/forgot',{'title':a5_0x411b('0x61')});};exports[a5_0x411b('0x62')]=(_0x2b45bf,_0x2a576b,_0x451af4)=>{_0x2b45bf[a5_0x411b('0x9')]('email',a5_0x411b('0x2e'))['isEmail']();_0x2b45bf[a5_0x411b('0xf')](a5_0x411b('0xa'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3b2456=_0x2b45bf[a5_0x411b('0x25')]();if(_0x3b2456){_0x2b45bf['flash'](a5_0x411b('0x12'),_0x3b2456);return _0x2a576b[a5_0x411b('0x6')](a5_0x411b('0x63'));}async_1[a5_0x411b('0x14')][a5_0x411b('0x56')]([function createRandomToken(_0x1e61a3){crypto_1['default']['randomBytes'](0x10,(_0x3473ad,_0x4d05c7)=>{const _0x10ef01=_0x4d05c7['toString']('hex');_0x1e61a3(_0x3473ad,_0x10ef01);});},function setRandomToken(_0x2f6f7b,_0x17e6dd){User_1[a5_0x411b('0x14')]['findOne']({'email':_0x2b45bf[a5_0x411b('0x24')]['email']},(_0xfa28c5,_0x1b658b)=>{if(_0xfa28c5){return _0x17e6dd(_0xfa28c5);}if(!_0x1b658b){_0x2b45bf[a5_0x411b('0x11')](a5_0x411b('0x12'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x2a576b[a5_0x411b('0x6')](a5_0x411b('0x63'));}_0x1b658b[a5_0x411b('0x64')]=_0x2f6f7b;_0x1b658b[a5_0x411b('0x4c')]=Date[a5_0x411b('0x57')]()+0x36ee80;_0x1b658b[a5_0x411b('0x35')](_0xfa28c5=>{_0x17e6dd(_0xfa28c5,_0x2f6f7b,_0x1b658b);});});},function sendForgotPasswordEmail(_0x2ce194,_0x29c3fe,_0x5442f7){const _0x948f7e=nodemailer_1['default'][a5_0x411b('0x65')]({'service':a5_0x411b('0x58'),'auth':{'user':process[a5_0x411b('0x59')][a5_0x411b('0x5a')],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x24b87a={'to':_0x29c3fe[a5_0x411b('0xa')],'from':a5_0x411b('0x66'),'subject':a5_0x411b('0x67'),'text':a5_0x411b('0x68')+_0x2b45bf[a5_0x411b('0x69')][a5_0x411b('0x6a')]+a5_0x411b('0x6b')+_0x2ce194+a5_0x411b('0x6c')};_0x948f7e['sendMail'](_0x24b87a,_0x460911=>{_0x2b45bf[a5_0x411b('0x11')]('info',{'msg':a5_0x411b('0x6d')+_0x29c3fe[a5_0x411b('0xa')]+a5_0x411b('0x6e')});_0x5442f7(_0x460911);});}],_0x41630d=>{if(_0x41630d){return _0x451af4(_0x41630d);}_0x2a576b[a5_0x411b('0x6')]('/forgot');});};