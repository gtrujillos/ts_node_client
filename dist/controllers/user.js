var a5_0x16f4=['account/profile','Account\x20Management','postUpdateProfile','/account','findById','profile','name','location','website','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','/forgot','account/reset','Password\x20Reset','postReset','Passwords\x20must\x20match.','back','now','exec','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_USER','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','passport','../models/User','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','Password\x20cannot\x20be\x20blank','notEmpty','email','validationErrors','flash','default','authenticate','local','errors','message','/login','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','isEmail','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','password','sanitize','normalizeEmail','/signup','findOne','save'];(function(_0x34064b,_0x1ad9d9){var _0x500074=function(_0xc6b993){while(--_0xc6b993){_0x34064b['push'](_0x34064b['shift']());}};_0x500074(++_0x1ad9d9);}(a5_0x16f4,0x171));var a5_0x5432=function(_0x2a2408,_0xc21c1f){_0x2a2408=_0x2a2408-0x0;var _0x2bbede=a5_0x16f4[_0x2a2408];return _0x2bbede;};'use strict';var __importDefault=this&&this[a5_0x5432('0x0')]||function(_0x57c585){return _0x57c585&&_0x57c585[a5_0x5432('0x1')]?_0x57c585:{'default':_0x57c585};};Object[a5_0x5432('0x2')](exports,a5_0x5432('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x5432('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x5432('0x4')));const User_1=__importDefault(require(a5_0x5432('0x5')));const request=require(a5_0x5432('0x6'));exports[a5_0x5432('0x7')]=(_0x28149e,_0x15946e)=>{if(_0x28149e[a5_0x5432('0x8')]){return _0x15946e[a5_0x5432('0x9')]('/');}_0x15946e[a5_0x5432('0xa')]('account/login',{'title':a5_0x5432('0xb')});};exports[a5_0x5432('0xc')]=(_0x47b8e3,_0x9d3a00,_0xe72ccd)=>{_0x47b8e3[a5_0x5432('0xd')]('email','Email\x20is\x20not\x20valid')['isEmail']();_0x47b8e3[a5_0x5432('0xd')]('password',a5_0x5432('0xe'))[a5_0x5432('0xf')]();_0x47b8e3['sanitize'](a5_0x5432('0x10'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2e6a71=_0x47b8e3[a5_0x5432('0x11')]();if(_0x2e6a71){_0x47b8e3[a5_0x5432('0x12')]('errors',_0x2e6a71);return _0x9d3a00['redirect']('/login');}passport_1[a5_0x5432('0x13')][a5_0x5432('0x14')](a5_0x5432('0x15'),(_0x35c6c5,_0x1ed9ae,_0x4d3758)=>{if(_0x35c6c5){return _0xe72ccd(_0x35c6c5);}if(!_0x1ed9ae){_0x47b8e3[a5_0x5432('0x12')](a5_0x5432('0x16'),_0x4d3758[a5_0x5432('0x17')]);return _0x9d3a00[a5_0x5432('0x9')](a5_0x5432('0x18'));}_0x47b8e3[a5_0x5432('0x19')](_0x1ed9ae,_0x35c6c5=>{if(_0x35c6c5){return _0xe72ccd(_0x35c6c5);}_0x47b8e3[a5_0x5432('0x12')](a5_0x5432('0x1a'),{'msg':a5_0x5432('0x1b')});_0x9d3a00[a5_0x5432('0x9')](_0x47b8e3[a5_0x5432('0x1c')]['returnTo']||'/');});})(_0x47b8e3,_0x9d3a00,_0xe72ccd);};exports[a5_0x5432('0x1d')]=(_0x4a691d,_0xb65e5a)=>{_0x4a691d[a5_0x5432('0x1d')]();_0xb65e5a[a5_0x5432('0x9')]('/');};exports[a5_0x5432('0x1e')]=(_0x3b717e,_0x34d82f)=>{if(_0x3b717e[a5_0x5432('0x8')]){return _0x34d82f[a5_0x5432('0x9')]('/');}_0x34d82f[a5_0x5432('0xa')](a5_0x5432('0x1f'),{'title':a5_0x5432('0x20')});};exports[a5_0x5432('0x21')]=(_0x553f79,_0x1a0056,_0x319216)=>{_0x553f79['assert'](a5_0x5432('0x10'),a5_0x5432('0x22'))[a5_0x5432('0x23')]();_0x553f79[a5_0x5432('0xd')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5432('0x24')]({'min':0x4});_0x553f79[a5_0x5432('0xd')](a5_0x5432('0x25'),a5_0x5432('0x26'))[a5_0x5432('0x27')](_0x553f79[a5_0x5432('0x28')][a5_0x5432('0x29')]);_0x553f79[a5_0x5432('0x2a')](a5_0x5432('0x10'))[a5_0x5432('0x2b')]({'gmail_remove_dots':![]});const _0x10d860=_0x553f79[a5_0x5432('0x11')]();if(_0x10d860){_0x553f79[a5_0x5432('0x12')](a5_0x5432('0x16'),_0x10d860);return _0x1a0056[a5_0x5432('0x9')](a5_0x5432('0x2c'));}const _0x378ce1=new User_1[(a5_0x5432('0x13'))]({});User_1[a5_0x5432('0x13')][a5_0x5432('0x2d')]({'email':_0x553f79[a5_0x5432('0x28')][a5_0x5432('0x10')]},(_0x2fe40d,_0x35d1f7)=>{if(_0x2fe40d){return _0x319216(_0x2fe40d);}if(_0x35d1f7){_0x553f79[a5_0x5432('0x12')](a5_0x5432('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x1a0056['redirect'](a5_0x5432('0x2c'));}_0x378ce1[a5_0x5432('0x2e')](_0x2fe40d=>{if(_0x2fe40d){return _0x319216(_0x2fe40d);}_0x553f79[a5_0x5432('0x19')](_0x378ce1,_0x2fe40d=>{if(_0x2fe40d){return _0x319216(_0x2fe40d);}_0x1a0056['redirect']('/');});});});};exports['getAccount']=(_0x28f2e7,_0x8e9319)=>{_0x8e9319['render'](a5_0x5432('0x2f'),{'title':a5_0x5432('0x30')});};exports[a5_0x5432('0x31')]=(_0x44a405,_0x2444fe,_0x144c25)=>{_0x44a405[a5_0x5432('0xd')](a5_0x5432('0x10'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x5432('0x23')]();_0x44a405['sanitize']('email')[a5_0x5432('0x2b')]({'gmail_remove_dots':![]});const _0x3b4515=_0x44a405['validationErrors']();if(_0x3b4515){_0x44a405['flash'](a5_0x5432('0x16'),_0x3b4515);return _0x2444fe[a5_0x5432('0x9')](a5_0x5432('0x32'));}User_1[a5_0x5432('0x13')][a5_0x5432('0x33')](_0x44a405[a5_0x5432('0x8')]['id'],(_0x478152,_0x1023aa)=>{if(_0x478152){return _0x144c25(_0x478152);}_0x1023aa['email']=_0x44a405[a5_0x5432('0x28')][a5_0x5432('0x10')]||'';_0x1023aa[a5_0x5432('0x34')][a5_0x5432('0x35')]=_0x44a405[a5_0x5432('0x28')][a5_0x5432('0x35')]||'';_0x1023aa[a5_0x5432('0x34')]['gender']=_0x44a405[a5_0x5432('0x28')]['gender']||'';_0x1023aa[a5_0x5432('0x34')][a5_0x5432('0x36')]=_0x44a405[a5_0x5432('0x28')]['location']||'';_0x1023aa['profile'][a5_0x5432('0x37')]=_0x44a405[a5_0x5432('0x28')][a5_0x5432('0x37')]||'';_0x1023aa[a5_0x5432('0x2e')](_0x478152=>{if(_0x478152){if(_0x478152['code']===0x2af8){_0x44a405[a5_0x5432('0x12')](a5_0x5432('0x16'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x2444fe[a5_0x5432('0x9')](a5_0x5432('0x32'));}return _0x144c25(_0x478152);}_0x44a405[a5_0x5432('0x12')](a5_0x5432('0x1a'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x2444fe['redirect']('/account');});});};exports[a5_0x5432('0x38')]=(_0x11e1ac,_0x43a071,_0xe38dbf)=>{_0x11e1ac['assert'](a5_0x5432('0x29'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5432('0x24')]({'min':0x4});_0x11e1ac['assert']('confirmPassword','Passwords\x20do\x20not\x20match')[a5_0x5432('0x27')](_0x11e1ac[a5_0x5432('0x28')][a5_0x5432('0x29')]);const _0x21e1d7=_0x11e1ac['validationErrors']();if(_0x21e1d7){_0x11e1ac[a5_0x5432('0x12')](a5_0x5432('0x16'),_0x21e1d7);return _0x43a071[a5_0x5432('0x9')](a5_0x5432('0x32'));}User_1['default']['findById'](_0x11e1ac[a5_0x5432('0x8')]['id'],(_0x1f3e04,_0x541cc4)=>{if(_0x1f3e04){return _0xe38dbf(_0x1f3e04);}_0x541cc4[a5_0x5432('0x29')]=_0x11e1ac[a5_0x5432('0x28')][a5_0x5432('0x29')];_0x541cc4[a5_0x5432('0x2e')](_0x1f3e04=>{if(_0x1f3e04){return _0xe38dbf(_0x1f3e04);}_0x11e1ac[a5_0x5432('0x12')](a5_0x5432('0x1a'),{'msg':a5_0x5432('0x39')});_0x43a071[a5_0x5432('0x9')](a5_0x5432('0x32'));});});};exports[a5_0x5432('0x3a')]=(_0x120770,_0x2a3738,_0x33df6a)=>{User_1[a5_0x5432('0x13')]['remove']({'_id':_0x120770[a5_0x5432('0x8')]['id']},_0x366fcd=>{if(_0x366fcd){return _0x33df6a(_0x366fcd);}_0x120770[a5_0x5432('0x1d')]();_0x120770[a5_0x5432('0x12')](a5_0x5432('0x3b'),{'msg':a5_0x5432('0x3c')});_0x2a3738['redirect']('/');});};exports[a5_0x5432('0x3d')]=(_0x4adfe0,_0x2be11c,_0x408d2f)=>{const _0x2ffb6e=_0x4adfe0[a5_0x5432('0x3e')]['provider'];User_1[a5_0x5432('0x13')][a5_0x5432('0x33')](_0x4adfe0[a5_0x5432('0x8')]['id'],(_0x5f2172,_0x55f39f)=>{if(_0x5f2172){return _0x408d2f(_0x5f2172);}_0x55f39f[_0x2ffb6e]=undefined;_0x55f39f[a5_0x5432('0x3f')]=_0x55f39f[a5_0x5432('0x3f')][a5_0x5432('0x40')](_0x4cb348=>_0x4cb348['kind']!==_0x2ffb6e);_0x55f39f['save'](_0x5f2172=>{if(_0x5f2172){return _0x408d2f(_0x5f2172);}_0x4adfe0[a5_0x5432('0x12')](a5_0x5432('0x3b'),{'msg':_0x2ffb6e+a5_0x5432('0x41')});_0x2be11c[a5_0x5432('0x9')]('/account');});});};exports['getReset']=(_0x5b853a,_0x53d4d6,_0x421ba0)=>{if(_0x5b853a[a5_0x5432('0x42')]()){return _0x53d4d6['redirect']('/');}User_1[a5_0x5432('0x13')][a5_0x5432('0x2d')]({'passwordResetToken':_0x5b853a[a5_0x5432('0x3e')][a5_0x5432('0x43')]})[a5_0x5432('0x44')](a5_0x5432('0x45'))['gt'](Date['now']())['exec']((_0x27cbe0,_0x50172a)=>{if(_0x27cbe0){return _0x421ba0(_0x27cbe0);}if(!_0x50172a){_0x5b853a[a5_0x5432('0x12')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x53d4d6['redirect'](a5_0x5432('0x46'));}_0x53d4d6[a5_0x5432('0xa')](a5_0x5432('0x47'),{'title':a5_0x5432('0x48')});});};exports[a5_0x5432('0x49')]=(_0x46f7eb,_0x37ca26,_0x29ff35)=>{_0x46f7eb['assert']('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x5432('0x24')]({'min':0x4});_0x46f7eb[a5_0x5432('0xd')]('confirm',a5_0x5432('0x4a'))['equals'](_0x46f7eb['body']['password']);const _0x419e27=_0x46f7eb[a5_0x5432('0x11')]();if(_0x419e27){_0x46f7eb[a5_0x5432('0x12')]('errors',_0x419e27);return _0x37ca26[a5_0x5432('0x9')](a5_0x5432('0x4b'));}async_1[a5_0x5432('0x13')]['waterfall']([function resetPassword(_0x1adf13){User_1['default']['findOne']({'passwordResetToken':_0x46f7eb[a5_0x5432('0x3e')]['token']})[a5_0x5432('0x44')]('passwordResetExpires')['gt'](Date[a5_0x5432('0x4c')]())[a5_0x5432('0x4d')]((_0x42f71f,_0x2dbd8c)=>{if(_0x42f71f){return _0x29ff35(_0x42f71f);}if(!_0x2dbd8c){_0x46f7eb['flash']('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x37ca26[a5_0x5432('0x9')](a5_0x5432('0x4b'));}_0x2dbd8c['password']=_0x46f7eb['body'][a5_0x5432('0x29')];_0x2dbd8c[a5_0x5432('0x4e')]=undefined;_0x2dbd8c[a5_0x5432('0x45')]=undefined;_0x2dbd8c['save'](_0x42f71f=>{if(_0x42f71f){return _0x29ff35(_0x42f71f);}_0x46f7eb[a5_0x5432('0x19')](_0x2dbd8c,_0x42f71f=>{_0x1adf13(_0x42f71f,_0x2dbd8c);});});});},function sendResetPasswordEmail(_0x318b95,_0x4188d4){const _0xdfa8bb=nodemailer_1[a5_0x5432('0x13')][a5_0x5432('0x4f')]({'service':a5_0x5432('0x50'),'auth':{'user':process[a5_0x5432('0x51')]['SENDGRID_USER'],'pass':process[a5_0x5432('0x51')][a5_0x5432('0x52')]}});const _0x521e4a={'to':_0x318b95[a5_0x5432('0x10')],'from':a5_0x5432('0x53'),'subject':a5_0x5432('0x54'),'text':a5_0x5432('0x55')+_0x318b95[a5_0x5432('0x10')]+a5_0x5432('0x56')};_0xdfa8bb[a5_0x5432('0x57')](_0x521e4a,_0x1b6b82=>{_0x46f7eb[a5_0x5432('0x12')]('success',{'msg':a5_0x5432('0x58')});_0x4188d4(_0x1b6b82);});}],_0x5dad01=>{if(_0x5dad01){return _0x29ff35(_0x5dad01);}_0x37ca26['redirect']('/');});};exports[a5_0x5432('0x59')]=(_0x5e11c8,_0x2800f3)=>{if(_0x5e11c8['isAuthenticated']()){return _0x2800f3[a5_0x5432('0x9')]('/');}_0x2800f3[a5_0x5432('0xa')]('account/forgot',{'title':a5_0x5432('0x5a')});};exports[a5_0x5432('0x5b')]=(_0x38efe3,_0x1dd409,_0x2e39c3)=>{_0x38efe3[a5_0x5432('0xd')](a5_0x5432('0x10'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x5432('0x23')]();_0x38efe3['sanitize']('email')[a5_0x5432('0x2b')]({'gmail_remove_dots':![]});const _0x2a2dc0=_0x38efe3[a5_0x5432('0x11')]();if(_0x2a2dc0){_0x38efe3[a5_0x5432('0x12')]('errors',_0x2a2dc0);return _0x1dd409['redirect'](a5_0x5432('0x46'));}async_1[a5_0x5432('0x13')][a5_0x5432('0x5c')]([function createRandomToken(_0x1a2e1a){crypto_1['default'][a5_0x5432('0x5d')](0x10,(_0x5eced1,_0x1eec1f)=>{const _0x57b784=_0x1eec1f[a5_0x5432('0x5e')]('hex');_0x1a2e1a(_0x5eced1,_0x57b784);});},function setRandomToken(_0x55fabf,_0x5f2667){User_1[a5_0x5432('0x13')][a5_0x5432('0x2d')]({'email':_0x38efe3[a5_0x5432('0x28')][a5_0x5432('0x10')]},(_0x5a2c96,_0x1161b2)=>{if(_0x5a2c96){return _0x5f2667(_0x5a2c96);}if(!_0x1161b2){_0x38efe3[a5_0x5432('0x12')](a5_0x5432('0x16'),{'msg':a5_0x5432('0x5f')});return _0x1dd409[a5_0x5432('0x9')](a5_0x5432('0x46'));}_0x1161b2[a5_0x5432('0x4e')]=_0x55fabf;_0x1161b2['passwordResetExpires']=Date[a5_0x5432('0x4c')]()+0x36ee80;_0x1161b2[a5_0x5432('0x2e')](_0x5a2c96=>{_0x5f2667(_0x5a2c96,_0x55fabf,_0x1161b2);});});},function sendForgotPasswordEmail(_0x46e378,_0x16e244,_0x276488){const _0x479a75=nodemailer_1[a5_0x5432('0x13')][a5_0x5432('0x4f')]({'service':a5_0x5432('0x50'),'auth':{'user':process[a5_0x5432('0x51')][a5_0x5432('0x60')],'pass':process['env'][a5_0x5432('0x52')]}});const _0x4b0b18={'to':_0x16e244[a5_0x5432('0x10')],'from':'hackathon@starter.com','subject':a5_0x5432('0x61'),'text':a5_0x5432('0x62')+_0x38efe3[a5_0x5432('0x63')]['host']+a5_0x5432('0x64')+_0x46e378+a5_0x5432('0x65')};_0x479a75[a5_0x5432('0x57')](_0x4b0b18,_0xb79e0f=>{_0x38efe3[a5_0x5432('0x12')]('info',{'msg':a5_0x5432('0x66')+_0x16e244[a5_0x5432('0x10')]+a5_0x5432('0x67')});_0x276488(_0xb79e0f);});}],_0x4dc214=>{if(_0x4dc214){return _0x2e39c3(_0x4dc214);}_0x1dd409[a5_0x5432('0x9')]('/forgot');});};