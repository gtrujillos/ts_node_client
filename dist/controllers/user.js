var a5_0x823e=['remove','getOauthUnlink','params','provider','findById','tokens','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','now','exec','/forgot','account/reset','Password\x20Reset','postReset','confirm','back','waterfall','token','where','passwordResetExpires','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','redirect','render','account/login','Login','assert','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','email','normalizeEmail','validationErrors','flash','/login','default','authenticate','local','errors','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','user','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','sanitize','/signup','findOne','save','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','body','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','password','postDeleteAccount'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a5_0x823e,0x9f));var a5_0x5eb8=function(_0x12eb9f,_0x177eff){_0x12eb9f=_0x12eb9f-0x0;var _0x4fe550=a5_0x823e[_0x12eb9f];return _0x4fe550;};'use strict';var __importDefault=this&&this[a5_0x5eb8('0x0')]||function(_0x37cbce){return _0x37cbce&&_0x37cbce[a5_0x5eb8('0x1')]?_0x37cbce:{'default':_0x37cbce};};Object[a5_0x5eb8('0x2')](exports,a5_0x5eb8('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x5eb8('0x3')));const crypto_1=__importDefault(require(a5_0x5eb8('0x4')));const nodemailer_1=__importDefault(require(a5_0x5eb8('0x5')));const passport_1=__importDefault(require(a5_0x5eb8('0x6')));const User_1=__importDefault(require(a5_0x5eb8('0x7')));const request=require(a5_0x5eb8('0x8'));exports['getLogin']=(_0x10ad8d,_0x15cfad)=>{if(_0x10ad8d['user']){return _0x15cfad[a5_0x5eb8('0x9')]('/');}_0x15cfad[a5_0x5eb8('0xa')](a5_0x5eb8('0xb'),{'title':a5_0x5eb8('0xc')});};exports['postLogin']=(_0x2acfaf,_0x3051b1,_0x4e9403)=>{_0x2acfaf[a5_0x5eb8('0xd')]('email',a5_0x5eb8('0xe'))[a5_0x5eb8('0xf')]();_0x2acfaf['assert']('password',a5_0x5eb8('0x10'))[a5_0x5eb8('0x11')]();_0x2acfaf['sanitize'](a5_0x5eb8('0x12'))[a5_0x5eb8('0x13')]({'gmail_remove_dots':![]});const _0x51c14c=_0x2acfaf[a5_0x5eb8('0x14')]();if(_0x51c14c){_0x2acfaf[a5_0x5eb8('0x15')]('errors',_0x51c14c);return _0x3051b1['redirect'](a5_0x5eb8('0x16'));}passport_1[a5_0x5eb8('0x17')][a5_0x5eb8('0x18')](a5_0x5eb8('0x19'),(_0x34c948,_0x4492a4,_0x51c8d)=>{if(_0x34c948){return _0x4e9403(_0x34c948);}if(!_0x4492a4){_0x2acfaf[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),_0x51c8d[a5_0x5eb8('0x1b')]);return _0x3051b1['redirect'](a5_0x5eb8('0x16'));}_0x2acfaf[a5_0x5eb8('0x1c')](_0x4492a4,_0x34c948=>{if(_0x34c948){return _0x4e9403(_0x34c948);}_0x2acfaf[a5_0x5eb8('0x15')](a5_0x5eb8('0x1d'),{'msg':a5_0x5eb8('0x1e')});_0x3051b1[a5_0x5eb8('0x9')](_0x2acfaf[a5_0x5eb8('0x1f')][a5_0x5eb8('0x20')]||'/');});})(_0x2acfaf,_0x3051b1,_0x4e9403);};exports[a5_0x5eb8('0x21')]=(_0x4bb57e,_0x2b0d73)=>{_0x4bb57e[a5_0x5eb8('0x21')]();_0x2b0d73[a5_0x5eb8('0x9')]('/');};exports['getSignup']=(_0x2cda1b,_0x1142d9)=>{if(_0x2cda1b[a5_0x5eb8('0x22')]){return _0x1142d9[a5_0x5eb8('0x9')]('/');}_0x1142d9[a5_0x5eb8('0xa')](a5_0x5eb8('0x23'),{'title':a5_0x5eb8('0x24')});};exports[a5_0x5eb8('0x25')]=(_0x2c7cd5,_0x36c486,_0x113c8f)=>{_0x2c7cd5[a5_0x5eb8('0xd')]('email',a5_0x5eb8('0xe'))[a5_0x5eb8('0xf')]();_0x2c7cd5['assert']('password',a5_0x5eb8('0x26'))[a5_0x5eb8('0x27')]({'min':0x4});_0x2c7cd5[a5_0x5eb8('0xd')](a5_0x5eb8('0x28'),a5_0x5eb8('0x29'))[a5_0x5eb8('0x2a')](_0x2c7cd5['body']['password']);_0x2c7cd5[a5_0x5eb8('0x2b')](a5_0x5eb8('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x6819b3=_0x2c7cd5[a5_0x5eb8('0x14')]();if(_0x6819b3){_0x2c7cd5[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),_0x6819b3);return _0x36c486[a5_0x5eb8('0x9')](a5_0x5eb8('0x2c'));}const _0xe44e6d=new User_1['default']({});User_1['default'][a5_0x5eb8('0x2d')]({'email':_0x2c7cd5['body'][a5_0x5eb8('0x12')]},(_0x830bad,_0x4caefa)=>{if(_0x830bad){return _0x113c8f(_0x830bad);}if(_0x4caefa){_0x2c7cd5[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x36c486[a5_0x5eb8('0x9')](a5_0x5eb8('0x2c'));}_0xe44e6d[a5_0x5eb8('0x2e')](_0x830bad=>{if(_0x830bad){return _0x113c8f(_0x830bad);}_0x2c7cd5[a5_0x5eb8('0x1c')](_0xe44e6d,_0x830bad=>{if(_0x830bad){return _0x113c8f(_0x830bad);}_0x36c486[a5_0x5eb8('0x9')]('/');});});});};exports['getAccount']=(_0x3c3da7,_0x1ef388)=>{_0x1ef388[a5_0x5eb8('0xa')]('account/profile',{'title':a5_0x5eb8('0x2f')});};exports[a5_0x5eb8('0x30')]=(_0x5bc9bb,_0x3f11a9,_0xc454fd)=>{_0x5bc9bb[a5_0x5eb8('0xd')](a5_0x5eb8('0x12'),a5_0x5eb8('0x31'))[a5_0x5eb8('0xf')]();_0x5bc9bb[a5_0x5eb8('0x2b')]('email')[a5_0x5eb8('0x13')]({'gmail_remove_dots':![]});const _0x3bdf64=_0x5bc9bb[a5_0x5eb8('0x14')]();if(_0x3bdf64){_0x5bc9bb[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),_0x3bdf64);return _0x3f11a9[a5_0x5eb8('0x9')](a5_0x5eb8('0x32'));}User_1[a5_0x5eb8('0x17')]['findById'](_0x5bc9bb['user']['id'],(_0x1487a4,_0x30a0e8)=>{if(_0x1487a4){return _0xc454fd(_0x1487a4);}_0x30a0e8[a5_0x5eb8('0x12')]=_0x5bc9bb[a5_0x5eb8('0x33')][a5_0x5eb8('0x12')]||'';_0x30a0e8[a5_0x5eb8('0x34')]['name']=_0x5bc9bb['body']['name']||'';_0x30a0e8[a5_0x5eb8('0x34')][a5_0x5eb8('0x35')]=_0x5bc9bb['body'][a5_0x5eb8('0x35')]||'';_0x30a0e8['profile'][a5_0x5eb8('0x36')]=_0x5bc9bb[a5_0x5eb8('0x33')][a5_0x5eb8('0x36')]||'';_0x30a0e8[a5_0x5eb8('0x34')]['website']=_0x5bc9bb[a5_0x5eb8('0x33')][a5_0x5eb8('0x37')]||'';_0x30a0e8[a5_0x5eb8('0x2e')](_0x1487a4=>{if(_0x1487a4){if(_0x1487a4[a5_0x5eb8('0x38')]===0x2af8){_0x5bc9bb[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),{'msg':a5_0x5eb8('0x39')});return _0x3f11a9['redirect'](a5_0x5eb8('0x32'));}return _0xc454fd(_0x1487a4);}_0x5bc9bb[a5_0x5eb8('0x15')](a5_0x5eb8('0x1d'),{'msg':a5_0x5eb8('0x3a')});_0x3f11a9[a5_0x5eb8('0x9')](a5_0x5eb8('0x32'));});});};exports['postUpdatePassword']=(_0x307736,_0x5b7a0a,_0x2fa3e3)=>{_0x307736['assert'](a5_0x5eb8('0x3b'),a5_0x5eb8('0x26'))[a5_0x5eb8('0x27')]({'min':0x4});_0x307736['assert'](a5_0x5eb8('0x28'),a5_0x5eb8('0x29'))[a5_0x5eb8('0x2a')](_0x307736[a5_0x5eb8('0x33')]['password']);const _0x2dbb48=_0x307736[a5_0x5eb8('0x14')]();if(_0x2dbb48){_0x307736[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),_0x2dbb48);return _0x5b7a0a[a5_0x5eb8('0x9')]('/account');}User_1[a5_0x5eb8('0x17')]['findById'](_0x307736[a5_0x5eb8('0x22')]['id'],(_0x397614,_0x2998ad)=>{if(_0x397614){return _0x2fa3e3(_0x397614);}_0x2998ad[a5_0x5eb8('0x3b')]=_0x307736[a5_0x5eb8('0x33')][a5_0x5eb8('0x3b')];_0x2998ad[a5_0x5eb8('0x2e')](_0x397614=>{if(_0x397614){return _0x2fa3e3(_0x397614);}_0x307736[a5_0x5eb8('0x15')](a5_0x5eb8('0x1d'),{'msg':'Password\x20has\x20been\x20changed.'});_0x5b7a0a[a5_0x5eb8('0x9')](a5_0x5eb8('0x32'));});});};exports[a5_0x5eb8('0x3c')]=(_0x31611d,_0x43bd4b,_0x3794d2)=>{User_1['default'][a5_0x5eb8('0x3d')]({'_id':_0x31611d[a5_0x5eb8('0x22')]['id']},_0x557c21=>{if(_0x557c21){return _0x3794d2(_0x557c21);}_0x31611d['logout']();_0x31611d['flash']('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x43bd4b[a5_0x5eb8('0x9')]('/');});};exports[a5_0x5eb8('0x3e')]=(_0x245f9d,_0x1e8f5f,_0x255402)=>{const _0x240c40=_0x245f9d[a5_0x5eb8('0x3f')][a5_0x5eb8('0x40')];User_1[a5_0x5eb8('0x17')][a5_0x5eb8('0x41')](_0x245f9d[a5_0x5eb8('0x22')]['id'],(_0x2c3dbf,_0x1c2ccf)=>{if(_0x2c3dbf){return _0x255402(_0x2c3dbf);}_0x1c2ccf[_0x240c40]=undefined;_0x1c2ccf['tokens']=_0x1c2ccf[a5_0x5eb8('0x42')]['filter'](_0x447335=>_0x447335[a5_0x5eb8('0x43')]!==_0x240c40);_0x1c2ccf['save'](_0x2c3dbf=>{if(_0x2c3dbf){return _0x255402(_0x2c3dbf);}_0x245f9d[a5_0x5eb8('0x15')](a5_0x5eb8('0x44'),{'msg':_0x240c40+a5_0x5eb8('0x45')});_0x1e8f5f['redirect']('/account');});});};exports[a5_0x5eb8('0x46')]=(_0xd03cec,_0x481f9c,_0x8ea192)=>{if(_0xd03cec[a5_0x5eb8('0x47')]()){return _0x481f9c[a5_0x5eb8('0x9')]('/');}User_1[a5_0x5eb8('0x17')][a5_0x5eb8('0x2d')]({'passwordResetToken':_0xd03cec[a5_0x5eb8('0x3f')]['token']})['where']('passwordResetExpires')['gt'](Date[a5_0x5eb8('0x48')]())[a5_0x5eb8('0x49')]((_0x45037e,_0xef4d2)=>{if(_0x45037e){return _0x8ea192(_0x45037e);}if(!_0xef4d2){_0xd03cec[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x481f9c[a5_0x5eb8('0x9')](a5_0x5eb8('0x4a'));}_0x481f9c[a5_0x5eb8('0xa')](a5_0x5eb8('0x4b'),{'title':a5_0x5eb8('0x4c')});});};exports[a5_0x5eb8('0x4d')]=(_0x547654,_0x4fcc44,_0x10ff6b)=>{_0x547654['assert'](a5_0x5eb8('0x3b'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x5eb8('0x27')]({'min':0x4});_0x547654[a5_0x5eb8('0xd')](a5_0x5eb8('0x4e'),'Passwords\x20must\x20match.')[a5_0x5eb8('0x2a')](_0x547654[a5_0x5eb8('0x33')][a5_0x5eb8('0x3b')]);const _0x27b618=_0x547654['validationErrors']();if(_0x27b618){_0x547654['flash'](a5_0x5eb8('0x1a'),_0x27b618);return _0x4fcc44[a5_0x5eb8('0x9')](a5_0x5eb8('0x4f'));}async_1['default'][a5_0x5eb8('0x50')]([function resetPassword(_0x867922){User_1[a5_0x5eb8('0x17')][a5_0x5eb8('0x2d')]({'passwordResetToken':_0x547654[a5_0x5eb8('0x3f')][a5_0x5eb8('0x51')]})[a5_0x5eb8('0x52')](a5_0x5eb8('0x53'))['gt'](Date['now']())[a5_0x5eb8('0x49')]((_0x5a9d4f,_0x1c5aab)=>{if(_0x5a9d4f){return _0x10ff6b(_0x5a9d4f);}if(!_0x1c5aab){_0x547654[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4fcc44[a5_0x5eb8('0x9')](a5_0x5eb8('0x4f'));}_0x1c5aab['password']=_0x547654[a5_0x5eb8('0x33')][a5_0x5eb8('0x3b')];_0x1c5aab[a5_0x5eb8('0x54')]=undefined;_0x1c5aab[a5_0x5eb8('0x53')]=undefined;_0x1c5aab['save'](_0x5a9d4f=>{if(_0x5a9d4f){return _0x10ff6b(_0x5a9d4f);}_0x547654[a5_0x5eb8('0x1c')](_0x1c5aab,_0x5a9d4f=>{_0x867922(_0x5a9d4f,_0x1c5aab);});});});},function sendResetPasswordEmail(_0x35339c,_0x54e501){const _0x5538ad=nodemailer_1[a5_0x5eb8('0x17')][a5_0x5eb8('0x55')]({'service':a5_0x5eb8('0x56'),'auth':{'user':process[a5_0x5eb8('0x57')][a5_0x5eb8('0x58')],'pass':process[a5_0x5eb8('0x57')]['SENDGRID_PASSWORD']}});const _0x86be71={'to':_0x35339c[a5_0x5eb8('0x12')],'from':a5_0x5eb8('0x59'),'subject':a5_0x5eb8('0x5a'),'text':a5_0x5eb8('0x5b')+_0x35339c[a5_0x5eb8('0x12')]+a5_0x5eb8('0x5c')};_0x5538ad[a5_0x5eb8('0x5d')](_0x86be71,_0x456973=>{_0x547654[a5_0x5eb8('0x15')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x54e501(_0x456973);});}],_0x25c34f=>{if(_0x25c34f){return _0x10ff6b(_0x25c34f);}_0x4fcc44[a5_0x5eb8('0x9')]('/');});};exports[a5_0x5eb8('0x5e')]=(_0x47afaa,_0x57abd1)=>{if(_0x47afaa[a5_0x5eb8('0x47')]()){return _0x57abd1['redirect']('/');}_0x57abd1[a5_0x5eb8('0xa')](a5_0x5eb8('0x5f'),{'title':a5_0x5eb8('0x60')});};exports[a5_0x5eb8('0x61')]=(_0x1496eb,_0x11bb72,_0xfd6ecf)=>{_0x1496eb[a5_0x5eb8('0xd')](a5_0x5eb8('0x12'),a5_0x5eb8('0x31'))[a5_0x5eb8('0xf')]();_0x1496eb[a5_0x5eb8('0x2b')]('email')[a5_0x5eb8('0x13')]({'gmail_remove_dots':![]});const _0x1a4aa7=_0x1496eb[a5_0x5eb8('0x14')]();if(_0x1a4aa7){_0x1496eb[a5_0x5eb8('0x15')](a5_0x5eb8('0x1a'),_0x1a4aa7);return _0x11bb72[a5_0x5eb8('0x9')](a5_0x5eb8('0x4a'));}async_1['default']['waterfall']([function createRandomToken(_0x207bb7){crypto_1['default'][a5_0x5eb8('0x62')](0x10,(_0x2510e4,_0x5e05f8)=>{const _0x219854=_0x5e05f8[a5_0x5eb8('0x63')]('hex');_0x207bb7(_0x2510e4,_0x219854);});},function setRandomToken(_0x4f8d9e,_0x14c4f2){User_1[a5_0x5eb8('0x17')][a5_0x5eb8('0x2d')]({'email':_0x1496eb['body']['email']},(_0xd1ea,_0x3317c3)=>{if(_0xd1ea){return _0x14c4f2(_0xd1ea);}if(!_0x3317c3){_0x1496eb['flash'](a5_0x5eb8('0x1a'),{'msg':a5_0x5eb8('0x64')});return _0x11bb72[a5_0x5eb8('0x9')](a5_0x5eb8('0x4a'));}_0x3317c3[a5_0x5eb8('0x54')]=_0x4f8d9e;_0x3317c3[a5_0x5eb8('0x53')]=Date['now']()+0x36ee80;_0x3317c3[a5_0x5eb8('0x2e')](_0xd1ea=>{_0x14c4f2(_0xd1ea,_0x4f8d9e,_0x3317c3);});});},function sendForgotPasswordEmail(_0x4586ba,_0xdc6836,_0x57841e){const _0x87303a=nodemailer_1[a5_0x5eb8('0x17')]['createTransport']({'service':a5_0x5eb8('0x56'),'auth':{'user':process[a5_0x5eb8('0x57')][a5_0x5eb8('0x58')],'pass':process['env'][a5_0x5eb8('0x65')]}});const _0x408214={'to':_0xdc6836[a5_0x5eb8('0x12')],'from':a5_0x5eb8('0x66'),'subject':a5_0x5eb8('0x67'),'text':a5_0x5eb8('0x68')+_0x1496eb[a5_0x5eb8('0x69')]['host']+a5_0x5eb8('0x6a')+_0x4586ba+a5_0x5eb8('0x6b')};_0x87303a[a5_0x5eb8('0x5d')](_0x408214,_0x3de672=>{_0x1496eb[a5_0x5eb8('0x15')](a5_0x5eb8('0x44'),{'msg':a5_0x5eb8('0x6c')+_0xdc6836[a5_0x5eb8('0x12')]+a5_0x5eb8('0x6d')});_0x57841e(_0x3de672);});}],_0x7d0e85=>{if(_0x7d0e85){return _0xfd6ecf(_0x7d0e85);}_0x11bb72[a5_0x5eb8('0x9')]('/forgot');});};