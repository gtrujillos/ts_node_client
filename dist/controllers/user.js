var a5_0x43aa=['Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','../models/User','express-validator','getLogin','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','message','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','user','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','code','Profile\x20information\x20has\x20been\x20updated.','/account','postUpdatePassword','equals','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','back','waterfall','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD'];(function(_0x1e0802,_0x55b83d){var _0x24b377=function(_0x145238){while(--_0x145238){_0x1e0802['push'](_0x1e0802['shift']());}};_0x24b377(++_0x55b83d);}(a5_0x43aa,0x1b3));var a5_0x2cfc=function(_0x25c718,_0x1c9f83){_0x25c718=_0x25c718-0x0;var _0x10961c=a5_0x43aa[_0x25c718];return _0x10961c;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x475bcf){return _0x475bcf&&_0x475bcf[a5_0x2cfc('0x0')]?_0x475bcf:{'default':_0x475bcf};};Object[a5_0x2cfc('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x2cfc('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x2cfc('0x3')));const request=require(a5_0x2cfc('0x4'));exports[a5_0x2cfc('0x5')]=(_0xb600fe,_0x2cd05e)=>{if(_0xb600fe['user']){return _0x2cd05e[a5_0x2cfc('0x6')]('/');}_0x2cd05e[a5_0x2cfc('0x7')](a5_0x2cfc('0x8'),{'title':a5_0x2cfc('0x9')});};exports[a5_0x2cfc('0xa')]=(_0x38c13c,_0x11d7b7,_0x2f64d0)=>{_0x38c13c[a5_0x2cfc('0xb')](a5_0x2cfc('0xc'),a5_0x2cfc('0xd'))[a5_0x2cfc('0xe')]();_0x38c13c[a5_0x2cfc('0xb')](a5_0x2cfc('0xf'),a5_0x2cfc('0x10'))[a5_0x2cfc('0x11')]();_0x38c13c[a5_0x2cfc('0x12')](a5_0x2cfc('0xc'))[a5_0x2cfc('0x13')]({'gmail_remove_dots':![]});const _0x578799=_0x38c13c[a5_0x2cfc('0x14')]();if(_0x578799){_0x38c13c[a5_0x2cfc('0x15')](a5_0x2cfc('0x16'),_0x578799);return _0x11d7b7[a5_0x2cfc('0x6')](a5_0x2cfc('0x17'));}passport_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x19')]('local',(_0xd2ccce,_0x3e92e4,_0x3c3a8a)=>{if(_0xd2ccce){return _0x2f64d0(_0xd2ccce);}if(!_0x3e92e4){_0x38c13c['flash'](a5_0x2cfc('0x16'),_0x3c3a8a[a5_0x2cfc('0x1a')]);return _0x11d7b7[a5_0x2cfc('0x6')](a5_0x2cfc('0x17'));}_0x38c13c['logIn'](_0x3e92e4,_0xd2ccce=>{if(_0xd2ccce){return _0x2f64d0(_0xd2ccce);}_0x38c13c['flash'](a5_0x2cfc('0x1b'),{'msg':a5_0x2cfc('0x1c')});_0x11d7b7['redirect'](_0x38c13c[a5_0x2cfc('0x1d')][a5_0x2cfc('0x1e')]||'/');});})(_0x38c13c,_0x11d7b7,_0x2f64d0);};exports[a5_0x2cfc('0x1f')]=(_0x1f8141,_0x4870fb)=>{_0x1f8141[a5_0x2cfc('0x1f')]();_0x4870fb['redirect']('/');};exports['getSignup']=(_0x47d80b,_0x36f985)=>{if(_0x47d80b[a5_0x2cfc('0x20')]){return _0x36f985['redirect']('/');}_0x36f985[a5_0x2cfc('0x7')](a5_0x2cfc('0x21'),{'title':a5_0x2cfc('0x22')});};exports[a5_0x2cfc('0x23')]=(_0x2a340d,_0x1ecaa2,_0x24afc2)=>{_0x2a340d['assert'](a5_0x2cfc('0xc'),a5_0x2cfc('0xd'))[a5_0x2cfc('0xe')]();_0x2a340d['assert'](a5_0x2cfc('0xf'),a5_0x2cfc('0x24'))[a5_0x2cfc('0x25')]({'min':0x4});_0x2a340d[a5_0x2cfc('0xb')](a5_0x2cfc('0x26'),a5_0x2cfc('0x27'))['equals'](_0x2a340d[a5_0x2cfc('0x28')]['password']);_0x2a340d[a5_0x2cfc('0x12')](a5_0x2cfc('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x491764=_0x2a340d[a5_0x2cfc('0x14')]();if(_0x491764){_0x2a340d[a5_0x2cfc('0x15')](a5_0x2cfc('0x16'),_0x491764);return _0x1ecaa2[a5_0x2cfc('0x6')](a5_0x2cfc('0x29'));}const _0x3a64f5=new User_1['default']({});User_1['default']['findOne']({'email':_0x2a340d['body'][a5_0x2cfc('0xc')]},(_0x5ef356,_0x295e67)=>{if(_0x5ef356){return _0x24afc2(_0x5ef356);}if(_0x295e67){_0x2a340d['flash'](a5_0x2cfc('0x16'),{'msg':a5_0x2cfc('0x2a')});return _0x1ecaa2[a5_0x2cfc('0x6')](a5_0x2cfc('0x29'));}_0x3a64f5[a5_0x2cfc('0x2b')](_0x5ef356=>{if(_0x5ef356){return _0x24afc2(_0x5ef356);}_0x2a340d[a5_0x2cfc('0x2c')](_0x3a64f5,_0x5ef356=>{if(_0x5ef356){return _0x24afc2(_0x5ef356);}_0x1ecaa2[a5_0x2cfc('0x6')]('/');});});});};exports[a5_0x2cfc('0x2d')]=(_0xe84db5,_0x573585)=>{_0x573585['render']('account/profile',{'title':a5_0x2cfc('0x2e')});};exports[a5_0x2cfc('0x2f')]=(_0x46b841,_0x2888b8,_0x16dd1f)=>{_0x46b841[a5_0x2cfc('0xb')](a5_0x2cfc('0xc'),a5_0x2cfc('0x30'))['isEmail']();_0x46b841[a5_0x2cfc('0x12')]('email')[a5_0x2cfc('0x13')]({'gmail_remove_dots':![]});const _0x43ee7b=_0x46b841[a5_0x2cfc('0x14')]();if(_0x43ee7b){_0x46b841[a5_0x2cfc('0x15')](a5_0x2cfc('0x16'),_0x43ee7b);return _0x2888b8[a5_0x2cfc('0x6')]('/account');}User_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x31')](_0x46b841[a5_0x2cfc('0x20')]['id'],(_0x12d8af,_0x146fc3)=>{if(_0x12d8af){return _0x16dd1f(_0x12d8af);}_0x146fc3['email']=_0x46b841[a5_0x2cfc('0x28')]['email']||'';_0x146fc3[a5_0x2cfc('0x32')]['name']=_0x46b841[a5_0x2cfc('0x28')][a5_0x2cfc('0x33')]||'';_0x146fc3['profile'][a5_0x2cfc('0x34')]=_0x46b841[a5_0x2cfc('0x28')]['gender']||'';_0x146fc3[a5_0x2cfc('0x32')][a5_0x2cfc('0x35')]=_0x46b841[a5_0x2cfc('0x28')][a5_0x2cfc('0x35')]||'';_0x146fc3[a5_0x2cfc('0x32')]['website']=_0x46b841[a5_0x2cfc('0x28')]['website']||'';_0x146fc3[a5_0x2cfc('0x2b')](_0x12d8af=>{if(_0x12d8af){if(_0x12d8af[a5_0x2cfc('0x36')]===0x2af8){_0x46b841['flash'](a5_0x2cfc('0x16'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x2888b8[a5_0x2cfc('0x6')]('/account');}return _0x16dd1f(_0x12d8af);}_0x46b841[a5_0x2cfc('0x15')](a5_0x2cfc('0x1b'),{'msg':a5_0x2cfc('0x37')});_0x2888b8[a5_0x2cfc('0x6')](a5_0x2cfc('0x38'));});});};exports[a5_0x2cfc('0x39')]=(_0xc4bb53,_0xe57f94,_0x5e52af)=>{_0xc4bb53[a5_0x2cfc('0xb')](a5_0x2cfc('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x2cfc('0x25')]({'min':0x4});_0xc4bb53[a5_0x2cfc('0xb')](a5_0x2cfc('0x26'),a5_0x2cfc('0x27'))[a5_0x2cfc('0x3a')](_0xc4bb53[a5_0x2cfc('0x28')]['password']);const _0x40e805=_0xc4bb53[a5_0x2cfc('0x14')]();if(_0x40e805){_0xc4bb53[a5_0x2cfc('0x15')]('errors',_0x40e805);return _0xe57f94['redirect']('/account');}User_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x31')](_0xc4bb53[a5_0x2cfc('0x20')]['id'],(_0x1d6b35,_0x1e968a)=>{if(_0x1d6b35){return _0x5e52af(_0x1d6b35);}_0x1e968a[a5_0x2cfc('0xf')]=_0xc4bb53[a5_0x2cfc('0x28')][a5_0x2cfc('0xf')];_0x1e968a[a5_0x2cfc('0x2b')](_0x1d6b35=>{if(_0x1d6b35){return _0x5e52af(_0x1d6b35);}_0xc4bb53[a5_0x2cfc('0x15')](a5_0x2cfc('0x1b'),{'msg':'Password\x20has\x20been\x20changed.'});_0xe57f94[a5_0x2cfc('0x6')](a5_0x2cfc('0x38'));});});};exports[a5_0x2cfc('0x3b')]=(_0x45143b,_0x13245a,_0x3ad342)=>{User_1['default'][a5_0x2cfc('0x3c')]({'_id':_0x45143b[a5_0x2cfc('0x20')]['id']},_0x5e04f1=>{if(_0x5e04f1){return _0x3ad342(_0x5e04f1);}_0x45143b[a5_0x2cfc('0x1f')]();_0x45143b[a5_0x2cfc('0x15')]('info',{'msg':a5_0x2cfc('0x3d')});_0x13245a[a5_0x2cfc('0x6')]('/');});};exports[a5_0x2cfc('0x3e')]=(_0x1dc0f7,_0x47ad1b,_0x37a020)=>{const _0x318e0b=_0x1dc0f7[a5_0x2cfc('0x3f')][a5_0x2cfc('0x40')];User_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x31')](_0x1dc0f7[a5_0x2cfc('0x20')]['id'],(_0x5bf8f9,_0x43b5d5)=>{if(_0x5bf8f9){return _0x37a020(_0x5bf8f9);}_0x43b5d5[_0x318e0b]=undefined;_0x43b5d5[a5_0x2cfc('0x41')]=_0x43b5d5['tokens'][a5_0x2cfc('0x42')](_0x29796c=>_0x29796c[a5_0x2cfc('0x43')]!==_0x318e0b);_0x43b5d5['save'](_0x5bf8f9=>{if(_0x5bf8f9){return _0x37a020(_0x5bf8f9);}_0x1dc0f7[a5_0x2cfc('0x15')]('info',{'msg':_0x318e0b+a5_0x2cfc('0x44')});_0x47ad1b[a5_0x2cfc('0x6')]('/account');});});};exports[a5_0x2cfc('0x45')]=(_0x347436,_0x5cdea9,_0x3eddb7)=>{if(_0x347436[a5_0x2cfc('0x46')]()){return _0x5cdea9[a5_0x2cfc('0x6')]('/');}User_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x47')]({'passwordResetToken':_0x347436[a5_0x2cfc('0x3f')][a5_0x2cfc('0x48')]})['where'](a5_0x2cfc('0x49'))['gt'](Date[a5_0x2cfc('0x4a')]())[a5_0x2cfc('0x4b')]((_0x159a90,_0x13b3af)=>{if(_0x159a90){return _0x3eddb7(_0x159a90);}if(!_0x13b3af){_0x347436[a5_0x2cfc('0x15')](a5_0x2cfc('0x16'),{'msg':a5_0x2cfc('0x4c')});return _0x5cdea9[a5_0x2cfc('0x6')](a5_0x2cfc('0x4d'));}_0x5cdea9[a5_0x2cfc('0x7')](a5_0x2cfc('0x4e'),{'title':a5_0x2cfc('0x4f')});});};exports['postReset']=(_0x4c62a3,_0x25fa9b,_0x2867f4)=>{_0x4c62a3[a5_0x2cfc('0xb')](a5_0x2cfc('0xf'),a5_0x2cfc('0x50'))[a5_0x2cfc('0x25')]({'min':0x4});_0x4c62a3[a5_0x2cfc('0xb')](a5_0x2cfc('0x51'),'Passwords\x20must\x20match.')['equals'](_0x4c62a3[a5_0x2cfc('0x28')][a5_0x2cfc('0xf')]);const _0x55b0e4=_0x4c62a3['validationErrors']();if(_0x55b0e4){_0x4c62a3['flash'](a5_0x2cfc('0x16'),_0x55b0e4);return _0x25fa9b[a5_0x2cfc('0x6')](a5_0x2cfc('0x52'));}async_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x53')]([function resetPassword(_0x15a897){User_1['default']['findOne']({'passwordResetToken':_0x4c62a3['params']['token']})['where'](a5_0x2cfc('0x49'))['gt'](Date[a5_0x2cfc('0x4a')]())[a5_0x2cfc('0x4b')]((_0x3eea0b,_0x29764b)=>{if(_0x3eea0b){return _0x2867f4(_0x3eea0b);}if(!_0x29764b){_0x4c62a3[a5_0x2cfc('0x15')](a5_0x2cfc('0x16'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x25fa9b[a5_0x2cfc('0x6')](a5_0x2cfc('0x52'));}_0x29764b[a5_0x2cfc('0xf')]=_0x4c62a3[a5_0x2cfc('0x28')][a5_0x2cfc('0xf')];_0x29764b[a5_0x2cfc('0x54')]=undefined;_0x29764b[a5_0x2cfc('0x49')]=undefined;_0x29764b[a5_0x2cfc('0x2b')](_0x3eea0b=>{if(_0x3eea0b){return _0x2867f4(_0x3eea0b);}_0x4c62a3[a5_0x2cfc('0x2c')](_0x29764b,_0x3eea0b=>{_0x15a897(_0x3eea0b,_0x29764b);});});});},function sendResetPasswordEmail(_0xef6b2e,_0x558ef5){const _0x248e8a=nodemailer_1['default'][a5_0x2cfc('0x55')]({'service':a5_0x2cfc('0x56'),'auth':{'user':process[a5_0x2cfc('0x57')][a5_0x2cfc('0x58')],'pass':process['env'][a5_0x2cfc('0x59')]}});const _0x57a1d9={'to':_0xef6b2e[a5_0x2cfc('0xc')],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x2cfc('0x5a')+_0xef6b2e[a5_0x2cfc('0xc')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x248e8a[a5_0x2cfc('0x5b')](_0x57a1d9,_0x21f0c8=>{_0x4c62a3['flash']('success',{'msg':a5_0x2cfc('0x5c')});_0x558ef5(_0x21f0c8);});}],_0x273a82=>{if(_0x273a82){return _0x2867f4(_0x273a82);}_0x25fa9b['redirect']('/');});};exports[a5_0x2cfc('0x5d')]=(_0x16d6e3,_0x495384)=>{if(_0x16d6e3[a5_0x2cfc('0x46')]()){return _0x495384[a5_0x2cfc('0x6')]('/');}_0x495384[a5_0x2cfc('0x7')](a5_0x2cfc('0x5e'),{'title':a5_0x2cfc('0x5f')});};exports['postForgot']=(_0x43ab46,_0x3d4e6a,_0x1367c5)=>{_0x43ab46[a5_0x2cfc('0xb')](a5_0x2cfc('0xc'),a5_0x2cfc('0x30'))[a5_0x2cfc('0xe')]();_0x43ab46[a5_0x2cfc('0x12')](a5_0x2cfc('0xc'))[a5_0x2cfc('0x13')]({'gmail_remove_dots':![]});const _0x4e263d=_0x43ab46[a5_0x2cfc('0x14')]();if(_0x4e263d){_0x43ab46[a5_0x2cfc('0x15')]('errors',_0x4e263d);return _0x3d4e6a['redirect'](a5_0x2cfc('0x4d'));}async_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x53')]([function createRandomToken(_0x1b5f10){crypto_1[a5_0x2cfc('0x18')]['randomBytes'](0x10,(_0xf8ae5e,_0x469ecd)=>{const _0x42e548=_0x469ecd[a5_0x2cfc('0x60')]('hex');_0x1b5f10(_0xf8ae5e,_0x42e548);});},function setRandomToken(_0x29b023,_0x4b7980){User_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x47')]({'email':_0x43ab46[a5_0x2cfc('0x28')][a5_0x2cfc('0xc')]},(_0x3ab285,_0x5bf4e1)=>{if(_0x3ab285){return _0x4b7980(_0x3ab285);}if(!_0x5bf4e1){_0x43ab46[a5_0x2cfc('0x15')](a5_0x2cfc('0x16'),{'msg':a5_0x2cfc('0x61')});return _0x3d4e6a[a5_0x2cfc('0x6')](a5_0x2cfc('0x4d'));}_0x5bf4e1['passwordResetToken']=_0x29b023;_0x5bf4e1[a5_0x2cfc('0x49')]=Date[a5_0x2cfc('0x4a')]()+0x36ee80;_0x5bf4e1['save'](_0x3ab285=>{_0x4b7980(_0x3ab285,_0x29b023,_0x5bf4e1);});});},function sendForgotPasswordEmail(_0x809421,_0x4e46b6,_0x4ae925){const _0x13854d=nodemailer_1[a5_0x2cfc('0x18')][a5_0x2cfc('0x55')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x2cfc('0x57')]['SENDGRID_PASSWORD']}});const _0xe3dfbe={'to':_0x4e46b6[a5_0x2cfc('0xc')],'from':a5_0x2cfc('0x62'),'subject':a5_0x2cfc('0x63'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x43ab46['headers']['host']+a5_0x2cfc('0x64')+_0x809421+a5_0x2cfc('0x65')};_0x13854d[a5_0x2cfc('0x5b')](_0xe3dfbe,_0xb61537=>{_0x43ab46[a5_0x2cfc('0x15')](a5_0x2cfc('0x66'),{'msg':a5_0x2cfc('0x67')+_0x4e46b6[a5_0x2cfc('0xc')]+a5_0x2cfc('0x68')});_0x4ae925(_0xb61537);});}],_0x4be971=>{if(_0x4be971){return _0x1367c5(_0x4be971);}_0x3d4e6a[a5_0x2cfc('0x6')]('/forgot');});};