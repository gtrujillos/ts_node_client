var a5_0x3dc1=['postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','confirmPassword','Passwords\x20do\x20not\x20match','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','token','where','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','exec','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','passport','../models/User','express-validator','getLogin','redirect','Login','postLogin','email','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','errors','/login','default','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','render','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','equals','body','validationErrors','/signup','findOne','save','Account\x20Management'];(function(_0x3ec5c5,_0x51b3c6){var _0x4d122d=function(_0x2a03d3){while(--_0x2a03d3){_0x3ec5c5['push'](_0x3ec5c5['shift']());}};_0x4d122d(++_0x51b3c6);}(a5_0x3dc1,0x1eb));var a5_0x2508=function(_0x516d65,_0x59cc06){_0x516d65=_0x516d65-0x0;var _0x5a731e=a5_0x3dc1[_0x516d65];return _0x5a731e;};'use strict';var __importDefault=this&&this[a5_0x2508('0x0')]||function(_0x290786){return _0x290786&&_0x290786[a5_0x2508('0x1')]?_0x290786:{'default':_0x290786};};Object['defineProperty'](exports,a5_0x2508('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x2508('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x2508('0x3')));const User_1=__importDefault(require(a5_0x2508('0x4')));const request=require(a5_0x2508('0x5'));exports[a5_0x2508('0x6')]=(_0x491632,_0x2539fd)=>{if(_0x491632['user']){return _0x2539fd[a5_0x2508('0x7')]('/');}_0x2539fd['render']('account/login',{'title':a5_0x2508('0x8')});};exports[a5_0x2508('0x9')]=(_0x33f41a,_0x2d26a9,_0x39455c)=>{_0x33f41a['assert'](a5_0x2508('0xa'),'Email\x20is\x20not\x20valid')[a5_0x2508('0xb')]();_0x33f41a[a5_0x2508('0xc')](a5_0x2508('0xd'),a5_0x2508('0xe'))[a5_0x2508('0xf')]();_0x33f41a[a5_0x2508('0x10')]('email')[a5_0x2508('0x11')]({'gmail_remove_dots':![]});const _0x4b54be=_0x33f41a['validationErrors']();if(_0x4b54be){_0x33f41a[a5_0x2508('0x12')](a5_0x2508('0x13'),_0x4b54be);return _0x2d26a9[a5_0x2508('0x7')](a5_0x2508('0x14'));}passport_1[a5_0x2508('0x15')]['authenticate']('local',(_0x151483,_0x863ea4,_0x997b24)=>{if(_0x151483){return _0x39455c(_0x151483);}if(!_0x863ea4){_0x33f41a['flash'](a5_0x2508('0x13'),_0x997b24[a5_0x2508('0x16')]);return _0x2d26a9[a5_0x2508('0x7')]('/login');}_0x33f41a[a5_0x2508('0x17')](_0x863ea4,_0x151483=>{if(_0x151483){return _0x39455c(_0x151483);}_0x33f41a[a5_0x2508('0x12')](a5_0x2508('0x18'),{'msg':a5_0x2508('0x19')});_0x2d26a9[a5_0x2508('0x7')](_0x33f41a[a5_0x2508('0x1a')][a5_0x2508('0x1b')]||'/');});})(_0x33f41a,_0x2d26a9,_0x39455c);};exports[a5_0x2508('0x1c')]=(_0x4197f7,_0xc57f68)=>{_0x4197f7[a5_0x2508('0x1c')]();_0xc57f68[a5_0x2508('0x7')]('/');};exports[a5_0x2508('0x1d')]=(_0x413805,_0x4d0bc5)=>{if(_0x413805[a5_0x2508('0x1e')]){return _0x4d0bc5[a5_0x2508('0x7')]('/');}_0x4d0bc5[a5_0x2508('0x1f')]('account/signup',{'title':a5_0x2508('0x20')});};exports[a5_0x2508('0x21')]=(_0x30f520,_0x20bfd7,_0xee1c50)=>{_0x30f520[a5_0x2508('0xc')](a5_0x2508('0xa'),a5_0x2508('0x22'))[a5_0x2508('0xb')]();_0x30f520[a5_0x2508('0xc')](a5_0x2508('0xd'),a5_0x2508('0x23'))[a5_0x2508('0x24')]({'min':0x4});_0x30f520['assert']('confirmPassword','Passwords\x20do\x20not\x20match')[a5_0x2508('0x25')](_0x30f520[a5_0x2508('0x26')][a5_0x2508('0xd')]);_0x30f520[a5_0x2508('0x10')](a5_0x2508('0xa'))[a5_0x2508('0x11')]({'gmail_remove_dots':![]});const _0x2fdd6a=_0x30f520[a5_0x2508('0x27')]();if(_0x2fdd6a){_0x30f520[a5_0x2508('0x12')]('errors',_0x2fdd6a);return _0x20bfd7['redirect'](a5_0x2508('0x28'));}const _0x325605=new User_1[(a5_0x2508('0x15'))]({'email':_0x30f520[a5_0x2508('0x26')][a5_0x2508('0xa')],'password':_0x30f520[a5_0x2508('0x26')]['password']});User_1[a5_0x2508('0x15')][a5_0x2508('0x29')]({'email':_0x30f520[a5_0x2508('0x26')][a5_0x2508('0xa')]},(_0x337553,_0x16b591)=>{if(_0x337553){return _0xee1c50(_0x337553);}if(_0x16b591){_0x30f520[a5_0x2508('0x12')](a5_0x2508('0x13'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x20bfd7[a5_0x2508('0x7')](a5_0x2508('0x28'));}_0x325605[a5_0x2508('0x2a')](_0x337553=>{if(_0x337553){return _0xee1c50(_0x337553);}_0x30f520['logIn'](_0x325605,_0x337553=>{if(_0x337553){return _0xee1c50(_0x337553);}_0x20bfd7[a5_0x2508('0x7')]('/');});});});};exports['getAccount']=(_0x188930,_0x21c342)=>{_0x21c342[a5_0x2508('0x1f')]('account/profile',{'title':a5_0x2508('0x2b')});};exports[a5_0x2508('0x2c')]=(_0x3027e3,_0x375113,_0x202b9c)=>{_0x3027e3[a5_0x2508('0xc')](a5_0x2508('0xa'),a5_0x2508('0x2d'))[a5_0x2508('0xb')]();_0x3027e3[a5_0x2508('0x10')](a5_0x2508('0xa'))[a5_0x2508('0x11')]({'gmail_remove_dots':![]});const _0x3e5a23=_0x3027e3[a5_0x2508('0x27')]();if(_0x3e5a23){_0x3027e3[a5_0x2508('0x12')](a5_0x2508('0x13'),_0x3e5a23);return _0x375113[a5_0x2508('0x7')](a5_0x2508('0x2e'));}User_1[a5_0x2508('0x15')]['findById'](_0x3027e3[a5_0x2508('0x1e')]['id'],(_0xc00d22,_0x3f56d5)=>{if(_0xc00d22){return _0x202b9c(_0xc00d22);}_0x3f56d5[a5_0x2508('0xa')]=_0x3027e3[a5_0x2508('0x26')][a5_0x2508('0xa')]||'';_0x3f56d5['profile']['name']=_0x3027e3[a5_0x2508('0x26')]['name']||'';_0x3f56d5[a5_0x2508('0x2f')][a5_0x2508('0x30')]=_0x3027e3[a5_0x2508('0x26')][a5_0x2508('0x30')]||'';_0x3f56d5['profile'][a5_0x2508('0x31')]=_0x3027e3[a5_0x2508('0x26')][a5_0x2508('0x31')]||'';_0x3f56d5[a5_0x2508('0x2f')][a5_0x2508('0x32')]=_0x3027e3[a5_0x2508('0x26')]['website']||'';_0x3f56d5[a5_0x2508('0x2a')](_0xc00d22=>{if(_0xc00d22){if(_0xc00d22[a5_0x2508('0x33')]===0x2af8){_0x3027e3['flash'](a5_0x2508('0x13'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x375113[a5_0x2508('0x7')](a5_0x2508('0x2e'));}return _0x202b9c(_0xc00d22);}_0x3027e3[a5_0x2508('0x12')](a5_0x2508('0x18'),{'msg':a5_0x2508('0x34')});_0x375113[a5_0x2508('0x7')](a5_0x2508('0x2e'));});});};exports['postUpdatePassword']=(_0x1eb4b8,_0x2f8529,_0x134d62)=>{_0x1eb4b8['assert'](a5_0x2508('0xd'),a5_0x2508('0x23'))[a5_0x2508('0x24')]({'min':0x4});_0x1eb4b8[a5_0x2508('0xc')](a5_0x2508('0x35'),a5_0x2508('0x36'))[a5_0x2508('0x25')](_0x1eb4b8[a5_0x2508('0x26')][a5_0x2508('0xd')]);const _0x2bf142=_0x1eb4b8[a5_0x2508('0x27')]();if(_0x2bf142){_0x1eb4b8[a5_0x2508('0x12')](a5_0x2508('0x13'),_0x2bf142);return _0x2f8529[a5_0x2508('0x7')](a5_0x2508('0x2e'));}User_1[a5_0x2508('0x15')][a5_0x2508('0x37')](_0x1eb4b8[a5_0x2508('0x1e')]['id'],(_0x4fa8e5,_0x369725)=>{if(_0x4fa8e5){return _0x134d62(_0x4fa8e5);}_0x369725[a5_0x2508('0xd')]=_0x1eb4b8[a5_0x2508('0x26')][a5_0x2508('0xd')];_0x369725[a5_0x2508('0x2a')](_0x4fa8e5=>{if(_0x4fa8e5){return _0x134d62(_0x4fa8e5);}_0x1eb4b8[a5_0x2508('0x12')](a5_0x2508('0x18'),{'msg':a5_0x2508('0x38')});_0x2f8529[a5_0x2508('0x7')](a5_0x2508('0x2e'));});});};exports[a5_0x2508('0x39')]=(_0x2377e5,_0x2affa5,_0x37f8ca)=>{User_1[a5_0x2508('0x15')]['remove']({'_id':_0x2377e5[a5_0x2508('0x1e')]['id']},_0x216f96=>{if(_0x216f96){return _0x37f8ca(_0x216f96);}_0x2377e5['logout']();_0x2377e5[a5_0x2508('0x12')](a5_0x2508('0x3a'),{'msg':a5_0x2508('0x3b')});_0x2affa5[a5_0x2508('0x7')]('/');});};exports[a5_0x2508('0x3c')]=(_0x4e913b,_0x5bf029,_0x41ad12)=>{const _0x25bd11=_0x4e913b['params'][a5_0x2508('0x3d')];User_1[a5_0x2508('0x15')][a5_0x2508('0x37')](_0x4e913b['user']['id'],(_0x7f735e,_0x1266c1)=>{if(_0x7f735e){return _0x41ad12(_0x7f735e);}_0x1266c1[_0x25bd11]=undefined;_0x1266c1['tokens']=_0x1266c1[a5_0x2508('0x3e')][a5_0x2508('0x3f')](_0x4b1a5b=>_0x4b1a5b[a5_0x2508('0x40')]!==_0x25bd11);_0x1266c1[a5_0x2508('0x2a')](_0x7f735e=>{if(_0x7f735e){return _0x41ad12(_0x7f735e);}_0x4e913b[a5_0x2508('0x12')](a5_0x2508('0x3a'),{'msg':_0x25bd11+a5_0x2508('0x41')});_0x5bf029['redirect'](a5_0x2508('0x2e'));});});};exports[a5_0x2508('0x42')]=(_0x5c0082,_0x3a9096,_0x50fa7d)=>{if(_0x5c0082[a5_0x2508('0x43')]()){return _0x3a9096[a5_0x2508('0x7')]('/');}User_1[a5_0x2508('0x15')]['findOne']({'passwordResetToken':_0x5c0082[a5_0x2508('0x44')][a5_0x2508('0x45')]})[a5_0x2508('0x46')](a5_0x2508('0x47'))['gt'](Date[a5_0x2508('0x48')]())['exec']((_0x1b69e1,_0x139e49)=>{if(_0x1b69e1){return _0x50fa7d(_0x1b69e1);}if(!_0x139e49){_0x5c0082[a5_0x2508('0x12')](a5_0x2508('0x13'),{'msg':a5_0x2508('0x49')});return _0x3a9096[a5_0x2508('0x7')](a5_0x2508('0x4a'));}_0x3a9096[a5_0x2508('0x1f')]('account/reset',{'title':a5_0x2508('0x4b')});});};exports[a5_0x2508('0x4c')]=(_0x3a6831,_0x497777,_0x3ed700)=>{_0x3a6831[a5_0x2508('0xc')](a5_0x2508('0xd'),a5_0x2508('0x4d'))['len']({'min':0x4});_0x3a6831[a5_0x2508('0xc')](a5_0x2508('0x4e'),a5_0x2508('0x4f'))[a5_0x2508('0x25')](_0x3a6831['body'][a5_0x2508('0xd')]);const _0x5bdf4a=_0x3a6831[a5_0x2508('0x27')]();if(_0x5bdf4a){_0x3a6831[a5_0x2508('0x12')]('errors',_0x5bdf4a);return _0x497777['redirect'](a5_0x2508('0x50'));}async_1[a5_0x2508('0x15')]['waterfall']([function resetPassword(_0x59592b){User_1[a5_0x2508('0x15')]['findOne']({'passwordResetToken':_0x3a6831[a5_0x2508('0x44')][a5_0x2508('0x45')]})[a5_0x2508('0x46')](a5_0x2508('0x47'))['gt'](Date[a5_0x2508('0x48')]())[a5_0x2508('0x51')]((_0x509941,_0x54fa5c)=>{if(_0x509941){return _0x3ed700(_0x509941);}if(!_0x54fa5c){_0x3a6831[a5_0x2508('0x12')]('errors',{'msg':a5_0x2508('0x49')});return _0x497777[a5_0x2508('0x7')](a5_0x2508('0x50'));}_0x54fa5c['password']=_0x3a6831[a5_0x2508('0x26')][a5_0x2508('0xd')];_0x54fa5c[a5_0x2508('0x52')]=undefined;_0x54fa5c[a5_0x2508('0x47')]=undefined;_0x54fa5c[a5_0x2508('0x2a')](_0x509941=>{if(_0x509941){return _0x3ed700(_0x509941);}_0x3a6831[a5_0x2508('0x17')](_0x54fa5c,_0x509941=>{_0x59592b(_0x509941,_0x54fa5c);});});});},function sendResetPasswordEmail(_0x732b56,_0x1f2a7b){const _0x536136=nodemailer_1['default'][a5_0x2508('0x53')]({'service':'SendGrid','auth':{'user':process[a5_0x2508('0x54')][a5_0x2508('0x55')],'pass':process['env'][a5_0x2508('0x56')]}});const _0x25d5c4={'to':_0x732b56[a5_0x2508('0xa')],'from':a5_0x2508('0x57'),'subject':a5_0x2508('0x58'),'text':a5_0x2508('0x59')+_0x732b56[a5_0x2508('0xa')]+a5_0x2508('0x5a')};_0x536136[a5_0x2508('0x5b')](_0x25d5c4,_0x5d0279=>{_0x3a6831[a5_0x2508('0x12')]('success',{'msg':a5_0x2508('0x5c')});_0x1f2a7b(_0x5d0279);});}],_0x39c58b=>{if(_0x39c58b){return _0x3ed700(_0x39c58b);}_0x497777[a5_0x2508('0x7')]('/');});};exports[a5_0x2508('0x5d')]=(_0x4f9e86,_0x1da45e)=>{if(_0x4f9e86[a5_0x2508('0x43')]()){return _0x1da45e[a5_0x2508('0x7')]('/');}_0x1da45e[a5_0x2508('0x1f')]('account/forgot',{'title':a5_0x2508('0x5e')});};exports[a5_0x2508('0x5f')]=(_0x58a7fb,_0x184c98,_0x142e47)=>{_0x58a7fb[a5_0x2508('0xc')](a5_0x2508('0xa'),a5_0x2508('0x2d'))[a5_0x2508('0xb')]();_0x58a7fb[a5_0x2508('0x10')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x5c10a8=_0x58a7fb['validationErrors']();if(_0x5c10a8){_0x58a7fb['flash'](a5_0x2508('0x13'),_0x5c10a8);return _0x184c98[a5_0x2508('0x7')](a5_0x2508('0x4a'));}async_1['default'][a5_0x2508('0x60')]([function createRandomToken(_0x1a04ad){crypto_1[a5_0x2508('0x15')][a5_0x2508('0x61')](0x10,(_0x3fefc0,_0x59a3ec)=>{const _0x427a8f=_0x59a3ec[a5_0x2508('0x62')]('hex');_0x1a04ad(_0x3fefc0,_0x427a8f);});},function setRandomToken(_0x2bddaa,_0x545a35){User_1[a5_0x2508('0x15')][a5_0x2508('0x29')]({'email':_0x58a7fb[a5_0x2508('0x26')][a5_0x2508('0xa')]},(_0x173268,_0x3db783)=>{if(_0x173268){return _0x545a35(_0x173268);}if(!_0x3db783){_0x58a7fb[a5_0x2508('0x12')](a5_0x2508('0x13'),{'msg':a5_0x2508('0x63')});return _0x184c98['redirect'](a5_0x2508('0x4a'));}_0x3db783['passwordResetToken']=_0x2bddaa;_0x3db783[a5_0x2508('0x47')]=Date['now']()+0x36ee80;_0x3db783[a5_0x2508('0x2a')](_0x173268=>{_0x545a35(_0x173268,_0x2bddaa,_0x3db783);});});},function sendForgotPasswordEmail(_0x3393c4,_0x5aa94c,_0x5e618d){const _0x54641d=nodemailer_1[a5_0x2508('0x15')][a5_0x2508('0x53')]({'service':a5_0x2508('0x64'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x2508('0x54')]['SENDGRID_PASSWORD']}});const _0x25d23d={'to':_0x5aa94c[a5_0x2508('0xa')],'from':'hackathon@starter.com','subject':a5_0x2508('0x65'),'text':a5_0x2508('0x66')+_0x58a7fb[a5_0x2508('0x67')]['host']+'/reset/'+_0x3393c4+a5_0x2508('0x68')};_0x54641d[a5_0x2508('0x5b')](_0x25d23d,_0x59d0f7=>{_0x58a7fb[a5_0x2508('0x12')]('info',{'msg':a5_0x2508('0x69')+_0x5aa94c[a5_0x2508('0xa')]+a5_0x2508('0x6a')});_0x5e618d(_0x59d0f7);});}],_0x372550=>{if(_0x372550){return _0x142e47(_0x372550);}_0x184c98[a5_0x2508('0x7')](a5_0x2508('0x4a'));});};