var a5_0x531a=['validationErrors','flash','errors','/login','default','authenticate','local','logIn','success','session','logout','getSignup','render','account/signup','Create\x20Account','assert','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','Account\x20Management','postUpdateProfile','/account','name','gender','profile','location','website','save','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','params','token','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','back','waterfall','where','now','passwordResetToken','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','account/login','postLogin','email','isEmail','sanitize','normalizeEmail'];(function(_0x1c1a0f,_0x5ff117){var _0x497711=function(_0x20e400){while(--_0x20e400){_0x1c1a0f['push'](_0x1c1a0f['shift']());}};_0x497711(++_0x5ff117);}(a5_0x531a,0x18d));var a5_0x3e36=function(_0x26a0cb,_0x1cdc3a){_0x26a0cb=_0x26a0cb-0x0;var _0x5e35c3=a5_0x531a[_0x26a0cb];return _0x5e35c3;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5974e3){return _0x5974e3&&_0x5974e3['__esModule']?_0x5974e3:{'default':_0x5974e3};};Object['defineProperty'](exports,a5_0x3e36('0x0'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x3e36('0x1')));const nodemailer_1=__importDefault(require(a5_0x3e36('0x2')));const passport_1=__importDefault(require(a5_0x3e36('0x3')));const User_1=__importDefault(require(a5_0x3e36('0x4')));const request=require(a5_0x3e36('0x5'));exports[a5_0x3e36('0x6')]=(_0x33b9ff,_0x151b7e)=>{if(_0x33b9ff[a5_0x3e36('0x7')]){return _0x151b7e[a5_0x3e36('0x8')]('/');}_0x151b7e['render'](a5_0x3e36('0x9'),{'title':'Login'});};exports[a5_0x3e36('0xa')]=(_0x2b428a,_0x3a8bc3,_0xf2320f)=>{_0x2b428a['assert'](a5_0x3e36('0xb'),'Email\x20is\x20not\x20valid')[a5_0x3e36('0xc')]();_0x2b428a['assert']('password','Password\x20cannot\x20be\x20blank')['notEmpty']();_0x2b428a[a5_0x3e36('0xd')](a5_0x3e36('0xb'))[a5_0x3e36('0xe')]({'gmail_remove_dots':![]});const _0x379a73=_0x2b428a[a5_0x3e36('0xf')]();if(_0x379a73){_0x2b428a[a5_0x3e36('0x10')](a5_0x3e36('0x11'),_0x379a73);return _0x3a8bc3[a5_0x3e36('0x8')](a5_0x3e36('0x12'));}passport_1[a5_0x3e36('0x13')][a5_0x3e36('0x14')](a5_0x3e36('0x15'),(_0x701193,_0x2b22bf,_0x1de10a)=>{if(_0x701193){return _0xf2320f(_0x701193);}if(!_0x2b22bf){_0x2b428a[a5_0x3e36('0x10')](a5_0x3e36('0x11'),_0x1de10a['message']);return _0x3a8bc3['redirect'](a5_0x3e36('0x12'));}_0x2b428a[a5_0x3e36('0x16')](_0x2b22bf,_0x701193=>{if(_0x701193){return _0xf2320f(_0x701193);}_0x2b428a['flash'](a5_0x3e36('0x17'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x3a8bc3[a5_0x3e36('0x8')](_0x2b428a[a5_0x3e36('0x18')]['returnTo']||'/');});})(_0x2b428a,_0x3a8bc3,_0xf2320f);};exports[a5_0x3e36('0x19')]=(_0x52eceb,_0x583d69)=>{_0x52eceb[a5_0x3e36('0x19')]();_0x583d69['redirect']('/');};exports[a5_0x3e36('0x1a')]=(_0x4594b3,_0x445eef)=>{if(_0x4594b3['user']){return _0x445eef['redirect']('/');}_0x445eef[a5_0x3e36('0x1b')](a5_0x3e36('0x1c'),{'title':a5_0x3e36('0x1d')});};exports['postSignup']=(_0x3f71db,_0xafd29f,_0x203ccc)=>{_0x3f71db['assert'](a5_0x3e36('0xb'),'Email\x20is\x20not\x20valid')[a5_0x3e36('0xc')]();_0x3f71db[a5_0x3e36('0x1e')](a5_0x3e36('0x1f'),a5_0x3e36('0x20'))[a5_0x3e36('0x21')]({'min':0x4});_0x3f71db[a5_0x3e36('0x1e')]('confirmPassword',a5_0x3e36('0x22'))[a5_0x3e36('0x23')](_0x3f71db[a5_0x3e36('0x24')]['password']);_0x3f71db[a5_0x3e36('0xd')](a5_0x3e36('0xb'))[a5_0x3e36('0xe')]({'gmail_remove_dots':![]});const _0x54e3b4=_0x3f71db[a5_0x3e36('0xf')]();if(_0x54e3b4){_0x3f71db[a5_0x3e36('0x10')](a5_0x3e36('0x11'),_0x54e3b4);return _0xafd29f[a5_0x3e36('0x8')](a5_0x3e36('0x25'));}const _0x497cf0=new User_1[(a5_0x3e36('0x13'))]({'email':_0x3f71db['body']['email'],'password':_0x3f71db[a5_0x3e36('0x24')][a5_0x3e36('0x1f')]});User_1['default'][a5_0x3e36('0x26')]({'email':_0x3f71db[a5_0x3e36('0x24')][a5_0x3e36('0xb')]},(_0x32b2bd,_0x4da435)=>{if(_0x32b2bd){return _0x203ccc(_0x32b2bd);}if(_0x4da435){_0x3f71db[a5_0x3e36('0x10')](a5_0x3e36('0x11'),{'msg':a5_0x3e36('0x27')});return _0xafd29f[a5_0x3e36('0x8')](a5_0x3e36('0x25'));}_0x497cf0['save'](_0x32b2bd=>{if(_0x32b2bd){return _0x203ccc(_0x32b2bd);}_0x3f71db[a5_0x3e36('0x16')](_0x497cf0,_0x32b2bd=>{if(_0x32b2bd){return _0x203ccc(_0x32b2bd);}_0xafd29f[a5_0x3e36('0x8')]('/');});});});};exports['getAccount']=(_0x364ec8,_0x483edc)=>{_0x483edc[a5_0x3e36('0x1b')]('account/profile',{'title':a5_0x3e36('0x28')});};exports[a5_0x3e36('0x29')]=(_0x50468f,_0x302df2,_0x263755)=>{_0x50468f[a5_0x3e36('0x1e')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x3e36('0xc')]();_0x50468f[a5_0x3e36('0xd')](a5_0x3e36('0xb'))[a5_0x3e36('0xe')]({'gmail_remove_dots':![]});const _0x4e7e14=_0x50468f[a5_0x3e36('0xf')]();if(_0x4e7e14){_0x50468f[a5_0x3e36('0x10')](a5_0x3e36('0x11'),_0x4e7e14);return _0x302df2['redirect'](a5_0x3e36('0x2a'));}User_1[a5_0x3e36('0x13')]['findById'](_0x50468f[a5_0x3e36('0x7')]['id'],(_0xe75cd4,_0x227f8e)=>{if(_0xe75cd4){return _0x263755(_0xe75cd4);}_0x227f8e['email']=_0x50468f[a5_0x3e36('0x24')][a5_0x3e36('0xb')]||'';_0x227f8e['profile']['name']=_0x50468f[a5_0x3e36('0x24')][a5_0x3e36('0x2b')]||'';_0x227f8e['profile'][a5_0x3e36('0x2c')]=_0x50468f[a5_0x3e36('0x24')][a5_0x3e36('0x2c')]||'';_0x227f8e[a5_0x3e36('0x2d')][a5_0x3e36('0x2e')]=_0x50468f[a5_0x3e36('0x24')][a5_0x3e36('0x2e')]||'';_0x227f8e[a5_0x3e36('0x2d')]['website']=_0x50468f[a5_0x3e36('0x24')][a5_0x3e36('0x2f')]||'';_0x227f8e[a5_0x3e36('0x30')](_0xe75cd4=>{if(_0xe75cd4){if(_0xe75cd4['code']===0x2af8){_0x50468f['flash']('errors',{'msg':a5_0x3e36('0x31')});return _0x302df2[a5_0x3e36('0x8')](a5_0x3e36('0x2a'));}return _0x263755(_0xe75cd4);}_0x50468f[a5_0x3e36('0x10')](a5_0x3e36('0x17'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x302df2[a5_0x3e36('0x8')](a5_0x3e36('0x2a'));});});};exports['postUpdatePassword']=(_0x43fb8e,_0x12a8c4,_0x114507)=>{_0x43fb8e['assert'](a5_0x3e36('0x1f'),a5_0x3e36('0x20'))[a5_0x3e36('0x21')]({'min':0x4});_0x43fb8e['assert']('confirmPassword',a5_0x3e36('0x22'))[a5_0x3e36('0x23')](_0x43fb8e[a5_0x3e36('0x24')]['password']);const _0x2cb27d=_0x43fb8e[a5_0x3e36('0xf')]();if(_0x2cb27d){_0x43fb8e['flash']('errors',_0x2cb27d);return _0x12a8c4[a5_0x3e36('0x8')](a5_0x3e36('0x2a'));}User_1[a5_0x3e36('0x13')][a5_0x3e36('0x32')](_0x43fb8e['user']['id'],(_0x2d601b,_0x48ebd7)=>{if(_0x2d601b){return _0x114507(_0x2d601b);}_0x48ebd7[a5_0x3e36('0x1f')]=_0x43fb8e[a5_0x3e36('0x24')][a5_0x3e36('0x1f')];_0x48ebd7[a5_0x3e36('0x30')](_0x2d601b=>{if(_0x2d601b){return _0x114507(_0x2d601b);}_0x43fb8e[a5_0x3e36('0x10')]('success',{'msg':a5_0x3e36('0x33')});_0x12a8c4[a5_0x3e36('0x8')](a5_0x3e36('0x2a'));});});};exports[a5_0x3e36('0x34')]=(_0x2586d2,_0x142d85,_0x5e995d)=>{User_1[a5_0x3e36('0x13')][a5_0x3e36('0x35')]({'_id':_0x2586d2[a5_0x3e36('0x7')]['id']},_0x4abdcf=>{if(_0x4abdcf){return _0x5e995d(_0x4abdcf);}_0x2586d2[a5_0x3e36('0x19')]();_0x2586d2[a5_0x3e36('0x10')](a5_0x3e36('0x36'),{'msg':a5_0x3e36('0x37')});_0x142d85[a5_0x3e36('0x8')]('/');});};exports[a5_0x3e36('0x38')]=(_0x77f53f,_0x45d2db,_0x3b46b7)=>{const _0x1c8210=_0x77f53f['params'][a5_0x3e36('0x39')];User_1[a5_0x3e36('0x13')]['findById'](_0x77f53f[a5_0x3e36('0x7')]['id'],(_0x3612cb,_0x40eaf7)=>{if(_0x3612cb){return _0x3b46b7(_0x3612cb);}_0x40eaf7[_0x1c8210]=undefined;_0x40eaf7[a5_0x3e36('0x3a')]=_0x40eaf7[a5_0x3e36('0x3a')][a5_0x3e36('0x3b')](_0x2cf066=>_0x2cf066[a5_0x3e36('0x3c')]!==_0x1c8210);_0x40eaf7[a5_0x3e36('0x30')](_0x3612cb=>{if(_0x3612cb){return _0x3b46b7(_0x3612cb);}_0x77f53f['flash'](a5_0x3e36('0x36'),{'msg':_0x1c8210+a5_0x3e36('0x3d')});_0x45d2db[a5_0x3e36('0x8')](a5_0x3e36('0x2a'));});});};exports['getReset']=(_0x4f2a0f,_0x358a0a,_0x2617f6)=>{if(_0x4f2a0f[a5_0x3e36('0x3e')]()){return _0x358a0a[a5_0x3e36('0x8')]('/');}User_1[a5_0x3e36('0x13')]['findOne']({'passwordResetToken':_0x4f2a0f[a5_0x3e36('0x3f')][a5_0x3e36('0x40')]})['where'](a5_0x3e36('0x41'))['gt'](Date['now']())[a5_0x3e36('0x42')]((_0x2f2874,_0x2aa508)=>{if(_0x2f2874){return _0x2617f6(_0x2f2874);}if(!_0x2aa508){_0x4f2a0f[a5_0x3e36('0x10')]('errors',{'msg':a5_0x3e36('0x43')});return _0x358a0a[a5_0x3e36('0x8')](a5_0x3e36('0x44'));}_0x358a0a[a5_0x3e36('0x1b')](a5_0x3e36('0x45'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x10582e,_0x45be2f,_0x8c4ff4)=>{_0x10582e['assert'](a5_0x3e36('0x1f'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x3e36('0x21')]({'min':0x4});_0x10582e[a5_0x3e36('0x1e')]('confirm','Passwords\x20must\x20match.')[a5_0x3e36('0x23')](_0x10582e[a5_0x3e36('0x24')][a5_0x3e36('0x1f')]);const _0x5e8a8f=_0x10582e['validationErrors']();if(_0x5e8a8f){_0x10582e['flash'](a5_0x3e36('0x11'),_0x5e8a8f);return _0x45be2f[a5_0x3e36('0x8')](a5_0x3e36('0x46'));}async_1[a5_0x3e36('0x13')][a5_0x3e36('0x47')]([function resetPassword(_0x48b77b){User_1['default'][a5_0x3e36('0x26')]({'passwordResetToken':_0x10582e[a5_0x3e36('0x3f')][a5_0x3e36('0x40')]})[a5_0x3e36('0x48')](a5_0x3e36('0x41'))['gt'](Date[a5_0x3e36('0x49')]())[a5_0x3e36('0x42')]((_0x15bd37,_0x51bffc)=>{if(_0x15bd37){return _0x8c4ff4(_0x15bd37);}if(!_0x51bffc){_0x10582e[a5_0x3e36('0x10')](a5_0x3e36('0x11'),{'msg':a5_0x3e36('0x43')});return _0x45be2f[a5_0x3e36('0x8')](a5_0x3e36('0x46'));}_0x51bffc[a5_0x3e36('0x1f')]=_0x10582e[a5_0x3e36('0x24')][a5_0x3e36('0x1f')];_0x51bffc[a5_0x3e36('0x4a')]=undefined;_0x51bffc[a5_0x3e36('0x41')]=undefined;_0x51bffc[a5_0x3e36('0x30')](_0x15bd37=>{if(_0x15bd37){return _0x8c4ff4(_0x15bd37);}_0x10582e[a5_0x3e36('0x16')](_0x51bffc,_0x15bd37=>{_0x48b77b(_0x15bd37,_0x51bffc);});});});},function sendResetPasswordEmail(_0xaceb29,_0x4170fb){const _0x391dc4=nodemailer_1[a5_0x3e36('0x13')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0x3e36('0x4b')][a5_0x3e36('0x4c')],'pass':process[a5_0x3e36('0x4b')][a5_0x3e36('0x4d')]}});const _0x25ba38={'to':_0xaceb29[a5_0x3e36('0xb')],'from':a5_0x3e36('0x4e'),'subject':a5_0x3e36('0x4f'),'text':a5_0x3e36('0x50')+_0xaceb29[a5_0x3e36('0xb')]+a5_0x3e36('0x51')};_0x391dc4[a5_0x3e36('0x52')](_0x25ba38,_0xc1c4d7=>{_0x10582e[a5_0x3e36('0x10')]('success',{'msg':a5_0x3e36('0x53')});_0x4170fb(_0xc1c4d7);});}],_0x4448cf=>{if(_0x4448cf){return _0x8c4ff4(_0x4448cf);}_0x45be2f[a5_0x3e36('0x8')]('/');});};exports[a5_0x3e36('0x54')]=(_0x469140,_0x32fb8d)=>{if(_0x469140[a5_0x3e36('0x3e')]()){return _0x32fb8d[a5_0x3e36('0x8')]('/');}_0x32fb8d[a5_0x3e36('0x1b')](a5_0x3e36('0x55'),{'title':a5_0x3e36('0x56')});};exports[a5_0x3e36('0x57')]=(_0x16b942,_0x216544,_0x125273)=>{_0x16b942[a5_0x3e36('0x1e')](a5_0x3e36('0xb'),a5_0x3e36('0x58'))[a5_0x3e36('0xc')]();_0x16b942['sanitize']('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x3a115d=_0x16b942['validationErrors']();if(_0x3a115d){_0x16b942['flash'](a5_0x3e36('0x11'),_0x3a115d);return _0x216544[a5_0x3e36('0x8')]('/forgot');}async_1[a5_0x3e36('0x13')][a5_0x3e36('0x47')]([function createRandomToken(_0x7c5dee){crypto_1[a5_0x3e36('0x13')][a5_0x3e36('0x59')](0x10,(_0x1b726f,_0x164141)=>{const _0x23c668=_0x164141[a5_0x3e36('0x5a')](a5_0x3e36('0x5b'));_0x7c5dee(_0x1b726f,_0x23c668);});},function setRandomToken(_0x1ee443,_0xd9100c){User_1[a5_0x3e36('0x13')][a5_0x3e36('0x26')]({'email':_0x16b942[a5_0x3e36('0x24')][a5_0x3e36('0xb')]},(_0x863ab4,_0x582517)=>{if(_0x863ab4){return _0xd9100c(_0x863ab4);}if(!_0x582517){_0x16b942[a5_0x3e36('0x10')]('errors',{'msg':a5_0x3e36('0x5c')});return _0x216544[a5_0x3e36('0x8')](a5_0x3e36('0x44'));}_0x582517[a5_0x3e36('0x4a')]=_0x1ee443;_0x582517['passwordResetExpires']=Date[a5_0x3e36('0x49')]()+0x36ee80;_0x582517['save'](_0x863ab4=>{_0xd9100c(_0x863ab4,_0x1ee443,_0x582517);});});},function sendForgotPasswordEmail(_0x1ddbb6,_0xdd580e,_0x379694){const _0x474a82=nodemailer_1['default'][a5_0x3e36('0x5d')]({'service':'SendGrid','auth':{'user':process[a5_0x3e36('0x4b')][a5_0x3e36('0x4c')],'pass':process[a5_0x3e36('0x4b')][a5_0x3e36('0x4d')]}});const _0x1e29a4={'to':_0xdd580e[a5_0x3e36('0xb')],'from':a5_0x3e36('0x5e'),'subject':a5_0x3e36('0x5f'),'text':a5_0x3e36('0x60')+_0x16b942[a5_0x3e36('0x61')][a5_0x3e36('0x62')]+a5_0x3e36('0x63')+_0x1ddbb6+a5_0x3e36('0x64')};_0x474a82['sendMail'](_0x1e29a4,_0x2c5dcd=>{_0x16b942[a5_0x3e36('0x10')](a5_0x3e36('0x36'),{'msg':a5_0x3e36('0x65')+_0xdd580e[a5_0x3e36('0xb')]+a5_0x3e36('0x66')});_0x379694(_0x2c5dcd);});}],_0x24ad12=>{if(_0x24ad12){return _0x125273(_0x24ad12);}_0x216544['redirect']('/forgot');});};