var a5_0x5666=['name','gender','location','website','code','postUpdatePassword','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','info','getReset','isAuthenticated','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','Passwords\x20must\x20match.','back','now','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','sendMail','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','account/login','postLogin','assert','email','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','local','message','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','render','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','logIn','getAccount','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a5_0x5666,0x105));var a5_0x20a7=function(_0x47a60f,_0x46c9b9){_0x47a60f=_0x47a60f-0x0;var _0x4d57b1=a5_0x5666[_0x47a60f];return _0x4d57b1;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4c20f1){return _0x4c20f1&&_0x4c20f1[a5_0x20a7('0x0')]?_0x4c20f1:{'default':_0x4c20f1};};Object[a5_0x20a7('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x20a7('0x2')));const crypto_1=__importDefault(require(a5_0x20a7('0x3')));const nodemailer_1=__importDefault(require(a5_0x20a7('0x4')));const passport_1=__importDefault(require(a5_0x20a7('0x5')));const User_1=__importDefault(require(a5_0x20a7('0x6')));const request=require(a5_0x20a7('0x7'));exports[a5_0x20a7('0x8')]=(_0x5ab55d,_0x58a501)=>{if(_0x5ab55d[a5_0x20a7('0x9')]){return _0x58a501[a5_0x20a7('0xa')]('/');}_0x58a501['render'](a5_0x20a7('0xb'),{'title':'Login'});};exports[a5_0x20a7('0xc')]=(_0x4f4466,_0x5039fb,_0x44a0f9)=>{_0x4f4466[a5_0x20a7('0xd')](a5_0x20a7('0xe'),'Email\x20is\x20not\x20valid')[a5_0x20a7('0xf')]();_0x4f4466['assert'](a5_0x20a7('0x10'),a5_0x20a7('0x11'))[a5_0x20a7('0x12')]();_0x4f4466[a5_0x20a7('0x13')](a5_0x20a7('0xe'))[a5_0x20a7('0x14')]({'gmail_remove_dots':![]});const _0x44b63c=_0x4f4466[a5_0x20a7('0x15')]();if(_0x44b63c){_0x4f4466[a5_0x20a7('0x16')](a5_0x20a7('0x17'),_0x44b63c);return _0x5039fb[a5_0x20a7('0xa')](a5_0x20a7('0x18'));}passport_1[a5_0x20a7('0x19')]['authenticate'](a5_0x20a7('0x1a'),(_0x3537d5,_0x158817,_0x36a2ec)=>{if(_0x3537d5){return _0x44a0f9(_0x3537d5);}if(!_0x158817){_0x4f4466[a5_0x20a7('0x16')]('errors',_0x36a2ec[a5_0x20a7('0x1b')]);return _0x5039fb['redirect'](a5_0x20a7('0x18'));}_0x4f4466['logIn'](_0x158817,_0x3537d5=>{if(_0x3537d5){return _0x44a0f9(_0x3537d5);}_0x4f4466[a5_0x20a7('0x16')](a5_0x20a7('0x1c'),{'msg':a5_0x20a7('0x1d')});_0x5039fb[a5_0x20a7('0xa')](_0x4f4466[a5_0x20a7('0x1e')][a5_0x20a7('0x1f')]||'/');});})(_0x4f4466,_0x5039fb,_0x44a0f9);};exports[a5_0x20a7('0x20')]=(_0x342c7f,_0x4bfac3)=>{_0x342c7f[a5_0x20a7('0x20')]();_0x4bfac3['redirect']('/');};exports['getSignup']=(_0x7c047e,_0x6cf83f)=>{if(_0x7c047e[a5_0x20a7('0x9')]){return _0x6cf83f[a5_0x20a7('0xa')]('/');}_0x6cf83f[a5_0x20a7('0x21')](a5_0x20a7('0x22'),{'title':a5_0x20a7('0x23')});};exports[a5_0x20a7('0x24')]=(_0x9844bf,_0x198cc7,_0x2d807f)=>{_0x9844bf[a5_0x20a7('0xd')]('email','Email\x20is\x20not\x20valid')['isEmail']();_0x9844bf[a5_0x20a7('0xd')](a5_0x20a7('0x10'),a5_0x20a7('0x25'))['len']({'min':0x4});_0x9844bf[a5_0x20a7('0xd')](a5_0x20a7('0x26'),a5_0x20a7('0x27'))[a5_0x20a7('0x28')](_0x9844bf[a5_0x20a7('0x29')][a5_0x20a7('0x10')]);_0x9844bf[a5_0x20a7('0x13')](a5_0x20a7('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3c05ef=_0x9844bf[a5_0x20a7('0x15')]();if(_0x3c05ef){_0x9844bf[a5_0x20a7('0x16')]('errors',_0x3c05ef);return _0x198cc7[a5_0x20a7('0xa')]('/signup');}const _0x25c6a7=new User_1['default']({});User_1[a5_0x20a7('0x19')][a5_0x20a7('0x2a')]({'email':_0x9844bf[a5_0x20a7('0x29')][a5_0x20a7('0xe')]},(_0x375d76,_0x49eb87)=>{if(_0x375d76){return _0x2d807f(_0x375d76);}if(_0x49eb87){_0x9844bf[a5_0x20a7('0x16')](a5_0x20a7('0x17'),{'msg':a5_0x20a7('0x2b')});return _0x198cc7[a5_0x20a7('0xa')](a5_0x20a7('0x2c'));}_0x25c6a7[a5_0x20a7('0x2d')](_0x375d76=>{if(_0x375d76){return _0x2d807f(_0x375d76);}_0x9844bf[a5_0x20a7('0x2e')](_0x25c6a7,_0x375d76=>{if(_0x375d76){return _0x2d807f(_0x375d76);}_0x198cc7[a5_0x20a7('0xa')]('/');});});});};exports[a5_0x20a7('0x2f')]=(_0x448888,_0x29555d)=>{_0x29555d[a5_0x20a7('0x21')]('account/profile',{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x5df06d,_0x522d4f,_0x4edc83)=>{_0x5df06d[a5_0x20a7('0xd')]('email',a5_0x20a7('0x30'))[a5_0x20a7('0xf')]();_0x5df06d[a5_0x20a7('0x13')](a5_0x20a7('0xe'))[a5_0x20a7('0x14')]({'gmail_remove_dots':![]});const _0x1d585e=_0x5df06d['validationErrors']();if(_0x1d585e){_0x5df06d[a5_0x20a7('0x16')](a5_0x20a7('0x17'),_0x1d585e);return _0x522d4f[a5_0x20a7('0xa')](a5_0x20a7('0x31'));}User_1[a5_0x20a7('0x19')]['findById'](_0x5df06d['user']['id'],(_0x4f41ef,_0x257a11)=>{if(_0x4f41ef){return _0x4edc83(_0x4f41ef);}_0x257a11[a5_0x20a7('0xe')]=_0x5df06d[a5_0x20a7('0x29')][a5_0x20a7('0xe')]||'';_0x257a11[a5_0x20a7('0x32')]['name']=_0x5df06d[a5_0x20a7('0x29')][a5_0x20a7('0x33')]||'';_0x257a11[a5_0x20a7('0x32')][a5_0x20a7('0x34')]=_0x5df06d[a5_0x20a7('0x29')][a5_0x20a7('0x34')]||'';_0x257a11[a5_0x20a7('0x32')]['location']=_0x5df06d[a5_0x20a7('0x29')][a5_0x20a7('0x35')]||'';_0x257a11[a5_0x20a7('0x32')]['website']=_0x5df06d[a5_0x20a7('0x29')][a5_0x20a7('0x36')]||'';_0x257a11[a5_0x20a7('0x2d')](_0x4f41ef=>{if(_0x4f41ef){if(_0x4f41ef[a5_0x20a7('0x37')]===0x2af8){_0x5df06d['flash'](a5_0x20a7('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x522d4f[a5_0x20a7('0xa')](a5_0x20a7('0x31'));}return _0x4edc83(_0x4f41ef);}_0x5df06d[a5_0x20a7('0x16')](a5_0x20a7('0x1c'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x522d4f[a5_0x20a7('0xa')]('/account');});});};exports[a5_0x20a7('0x38')]=(_0x5bc755,_0x7785e1,_0x2f1ef1)=>{_0x5bc755[a5_0x20a7('0xd')](a5_0x20a7('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x5bc755[a5_0x20a7('0xd')]('confirmPassword',a5_0x20a7('0x27'))[a5_0x20a7('0x28')](_0x5bc755['body'][a5_0x20a7('0x10')]);const _0x5dce37=_0x5bc755['validationErrors']();if(_0x5dce37){_0x5bc755[a5_0x20a7('0x16')](a5_0x20a7('0x17'),_0x5dce37);return _0x7785e1[a5_0x20a7('0xa')](a5_0x20a7('0x31'));}User_1['default'][a5_0x20a7('0x39')](_0x5bc755[a5_0x20a7('0x9')]['id'],(_0x2bb5aa,_0x407f35)=>{if(_0x2bb5aa){return _0x2f1ef1(_0x2bb5aa);}_0x407f35[a5_0x20a7('0x10')]=_0x5bc755[a5_0x20a7('0x29')]['password'];_0x407f35[a5_0x20a7('0x2d')](_0x2bb5aa=>{if(_0x2bb5aa){return _0x2f1ef1(_0x2bb5aa);}_0x5bc755[a5_0x20a7('0x16')](a5_0x20a7('0x1c'),{'msg':a5_0x20a7('0x3a')});_0x7785e1[a5_0x20a7('0xa')]('/account');});});};exports[a5_0x20a7('0x3b')]=(_0x290dbf,_0x3e375f,_0x56b7e6)=>{User_1[a5_0x20a7('0x19')]['remove']({'_id':_0x290dbf[a5_0x20a7('0x9')]['id']},_0x346c0c=>{if(_0x346c0c){return _0x56b7e6(_0x346c0c);}_0x290dbf['logout']();_0x290dbf[a5_0x20a7('0x16')]('info',{'msg':a5_0x20a7('0x3c')});_0x3e375f[a5_0x20a7('0xa')]('/');});};exports[a5_0x20a7('0x3d')]=(_0xc4620c,_0x59c198,_0x30272e)=>{const _0x59085a=_0xc4620c[a5_0x20a7('0x3e')]['provider'];User_1[a5_0x20a7('0x19')][a5_0x20a7('0x39')](_0xc4620c[a5_0x20a7('0x9')]['id'],(_0x9b003,_0x470ff3)=>{if(_0x9b003){return _0x30272e(_0x9b003);}_0x470ff3[_0x59085a]=undefined;_0x470ff3[a5_0x20a7('0x3f')]=_0x470ff3[a5_0x20a7('0x3f')][a5_0x20a7('0x40')](_0x555706=>_0x555706[a5_0x20a7('0x41')]!==_0x59085a);_0x470ff3['save'](_0x9b003=>{if(_0x9b003){return _0x30272e(_0x9b003);}_0xc4620c[a5_0x20a7('0x16')](a5_0x20a7('0x42'),{'msg':_0x59085a+'\x20account\x20has\x20been\x20unlinked.'});_0x59c198['redirect'](a5_0x20a7('0x31'));});});};exports[a5_0x20a7('0x43')]=(_0x494ba5,_0x3b15c6,_0x4b2386)=>{if(_0x494ba5[a5_0x20a7('0x44')]()){return _0x3b15c6['redirect']('/');}User_1[a5_0x20a7('0x19')][a5_0x20a7('0x2a')]({'passwordResetToken':_0x494ba5['params']['token']})[a5_0x20a7('0x45')](a5_0x20a7('0x46'))['gt'](Date['now']())[a5_0x20a7('0x47')]((_0x5c1ad7,_0x32a4e1)=>{if(_0x5c1ad7){return _0x4b2386(_0x5c1ad7);}if(!_0x32a4e1){_0x494ba5[a5_0x20a7('0x16')](a5_0x20a7('0x17'),{'msg':a5_0x20a7('0x48')});return _0x3b15c6[a5_0x20a7('0xa')](a5_0x20a7('0x49'));}_0x3b15c6[a5_0x20a7('0x21')](a5_0x20a7('0x4a'),{'title':a5_0x20a7('0x4b')});});};exports[a5_0x20a7('0x4c')]=(_0x1ddfa2,_0x75f030,_0x4537ec)=>{_0x1ddfa2[a5_0x20a7('0xd')](a5_0x20a7('0x10'),a5_0x20a7('0x4d'))[a5_0x20a7('0x4e')]({'min':0x4});_0x1ddfa2[a5_0x20a7('0xd')](a5_0x20a7('0x4f'),a5_0x20a7('0x50'))['equals'](_0x1ddfa2['body'][a5_0x20a7('0x10')]);const _0x5eda94=_0x1ddfa2[a5_0x20a7('0x15')]();if(_0x5eda94){_0x1ddfa2[a5_0x20a7('0x16')]('errors',_0x5eda94);return _0x75f030[a5_0x20a7('0xa')](a5_0x20a7('0x51'));}async_1[a5_0x20a7('0x19')]['waterfall']([function resetPassword(_0x3f9123){User_1['default'][a5_0x20a7('0x2a')]({'passwordResetToken':_0x1ddfa2[a5_0x20a7('0x3e')]['token']})[a5_0x20a7('0x45')](a5_0x20a7('0x46'))['gt'](Date[a5_0x20a7('0x52')]())[a5_0x20a7('0x47')]((_0x3cf1a5,_0x1bb9f5)=>{if(_0x3cf1a5){return _0x4537ec(_0x3cf1a5);}if(!_0x1bb9f5){_0x1ddfa2[a5_0x20a7('0x16')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x75f030['redirect']('back');}_0x1bb9f5[a5_0x20a7('0x10')]=_0x1ddfa2[a5_0x20a7('0x29')]['password'];_0x1bb9f5['passwordResetToken']=undefined;_0x1bb9f5[a5_0x20a7('0x46')]=undefined;_0x1bb9f5[a5_0x20a7('0x2d')](_0x3cf1a5=>{if(_0x3cf1a5){return _0x4537ec(_0x3cf1a5);}_0x1ddfa2[a5_0x20a7('0x2e')](_0x1bb9f5,_0x3cf1a5=>{_0x3f9123(_0x3cf1a5,_0x1bb9f5);});});});},function sendResetPasswordEmail(_0x37f5d4,_0x4b75f8){const _0x54530a=nodemailer_1[a5_0x20a7('0x19')][a5_0x20a7('0x53')]({'service':a5_0x20a7('0x54'),'auth':{'user':process[a5_0x20a7('0x55')][a5_0x20a7('0x56')],'pass':process['env'][a5_0x20a7('0x57')]}});const _0x318690={'to':_0x37f5d4[a5_0x20a7('0xe')],'from':a5_0x20a7('0x58'),'subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x37f5d4[a5_0x20a7('0xe')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x54530a[a5_0x20a7('0x59')](_0x318690,_0x67c198=>{_0x1ddfa2[a5_0x20a7('0x16')](a5_0x20a7('0x1c'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x4b75f8(_0x67c198);});}],_0x568478=>{if(_0x568478){return _0x4537ec(_0x568478);}_0x75f030[a5_0x20a7('0xa')]('/');});};exports[a5_0x20a7('0x5a')]=(_0x4ff6dc,_0x1f19c0)=>{if(_0x4ff6dc['isAuthenticated']()){return _0x1f19c0[a5_0x20a7('0xa')]('/');}_0x1f19c0[a5_0x20a7('0x21')](a5_0x20a7('0x5b'),{'title':a5_0x20a7('0x5c')});};exports[a5_0x20a7('0x5d')]=(_0x5c7a47,_0x4ac796,_0x546695)=>{_0x5c7a47[a5_0x20a7('0xd')](a5_0x20a7('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x5c7a47[a5_0x20a7('0x13')](a5_0x20a7('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4c9286=_0x5c7a47[a5_0x20a7('0x15')]();if(_0x4c9286){_0x5c7a47[a5_0x20a7('0x16')](a5_0x20a7('0x17'),_0x4c9286);return _0x4ac796[a5_0x20a7('0xa')](a5_0x20a7('0x49'));}async_1[a5_0x20a7('0x19')][a5_0x20a7('0x5e')]([function createRandomToken(_0xd5e8e2){crypto_1['default']['randomBytes'](0x10,(_0x38471c,_0x31bdd8)=>{const _0x193bfd=_0x31bdd8[a5_0x20a7('0x5f')](a5_0x20a7('0x60'));_0xd5e8e2(_0x38471c,_0x193bfd);});},function setRandomToken(_0xe1ea4e,_0xb19658){User_1[a5_0x20a7('0x19')][a5_0x20a7('0x2a')]({'email':_0x5c7a47[a5_0x20a7('0x29')][a5_0x20a7('0xe')]},(_0x1dcccb,_0x27e146)=>{if(_0x1dcccb){return _0xb19658(_0x1dcccb);}if(!_0x27e146){_0x5c7a47[a5_0x20a7('0x16')](a5_0x20a7('0x17'),{'msg':a5_0x20a7('0x61')});return _0x4ac796[a5_0x20a7('0xa')]('/forgot');}_0x27e146['passwordResetToken']=_0xe1ea4e;_0x27e146[a5_0x20a7('0x46')]=Date['now']()+0x36ee80;_0x27e146[a5_0x20a7('0x2d')](_0x1dcccb=>{_0xb19658(_0x1dcccb,_0xe1ea4e,_0x27e146);});});},function sendForgotPasswordEmail(_0x3d14db,_0x8904ae,_0x1187aa){const _0x5a4a18=nodemailer_1[a5_0x20a7('0x19')][a5_0x20a7('0x53')]({'service':a5_0x20a7('0x54'),'auth':{'user':process[a5_0x20a7('0x55')][a5_0x20a7('0x56')],'pass':process[a5_0x20a7('0x55')][a5_0x20a7('0x57')]}});const _0x120fd5={'to':_0x8904ae[a5_0x20a7('0xe')],'from':a5_0x20a7('0x62'),'subject':a5_0x20a7('0x63'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x5c7a47[a5_0x20a7('0x64')][a5_0x20a7('0x65')]+a5_0x20a7('0x66')+_0x3d14db+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x5a4a18['sendMail'](_0x120fd5,_0xab1d07=>{_0x5c7a47[a5_0x20a7('0x16')](a5_0x20a7('0x42'),{'msg':a5_0x20a7('0x67')+_0x8904ae['email']+'\x20with\x20further\x20instructions.'});_0x1187aa(_0xab1d07);});}],_0x4cb62d=>{if(_0x4cb62d){return _0x546695(_0x4cb62d);}_0x4ac796['redirect'](a5_0x20a7('0x49'));});};