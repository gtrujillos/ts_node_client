var a5_0x54ca=['express-validator','getLogin','redirect','render','Login','email','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','flash','errors','/login','default','authenticate','local','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','user','account/signup','Create\x20Account','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','validationErrors','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','getAccount','account/profile','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','success','postDeleteAccount','remove','info','getOauthUnlink','params','provider','tokens','kind','getReset','isAuthenticated','token','now','exec','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','waterfall','where','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','async','crypto','nodemailer','passport'];(function(_0x227c31,_0x3dcf4b){var _0x1ca313=function(_0x1c40ed){while(--_0x1c40ed){_0x227c31['push'](_0x227c31['shift']());}};_0x1ca313(++_0x3dcf4b);}(a5_0x54ca,0x65));var a5_0x4876=function(_0x37a65b,_0x4168ef){_0x37a65b=_0x37a65b-0x0;var _0x412f3f=a5_0x54ca[_0x37a65b];return _0x412f3f;};'use strict';var __importDefault=this&&this[a5_0x4876('0x0')]||function(_0x4eacad){return _0x4eacad&&_0x4eacad['__esModule']?_0x4eacad:{'default':_0x4eacad};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x4876('0x1')));const crypto_1=__importDefault(require(a5_0x4876('0x2')));const nodemailer_1=__importDefault(require(a5_0x4876('0x3')));const passport_1=__importDefault(require(a5_0x4876('0x4')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x4876('0x5'));exports[a5_0x4876('0x6')]=(_0x46022d,_0xaddc05)=>{if(_0x46022d['user']){return _0xaddc05[a5_0x4876('0x7')]('/');}_0xaddc05[a5_0x4876('0x8')]('account/login',{'title':a5_0x4876('0x9')});};exports['postLogin']=(_0x5913b5,_0x228a54,_0x5dfc69)=>{_0x5913b5['assert'](a5_0x4876('0xa'),'Email\x20is\x20not\x20valid')[a5_0x4876('0xb')]();_0x5913b5[a5_0x4876('0xc')](a5_0x4876('0xd'),a5_0x4876('0xe'))[a5_0x4876('0xf')]();_0x5913b5[a5_0x4876('0x10')](a5_0x4876('0xa'))[a5_0x4876('0x11')]({'gmail_remove_dots':![]});const _0x1f842a=_0x5913b5['validationErrors']();if(_0x1f842a){_0x5913b5[a5_0x4876('0x12')](a5_0x4876('0x13'),_0x1f842a);return _0x228a54[a5_0x4876('0x7')](a5_0x4876('0x14'));}passport_1[a5_0x4876('0x15')][a5_0x4876('0x16')](a5_0x4876('0x17'),(_0x4fc159,_0x4abd87,_0x459f16)=>{if(_0x4fc159){return _0x5dfc69(_0x4fc159);}if(!_0x4abd87){_0x5913b5[a5_0x4876('0x12')](a5_0x4876('0x13'),_0x459f16['message']);return _0x228a54[a5_0x4876('0x7')]('/login');}_0x5913b5['logIn'](_0x4abd87,_0x4fc159=>{if(_0x4fc159){return _0x5dfc69(_0x4fc159);}_0x5913b5[a5_0x4876('0x12')]('success',{'msg':a5_0x4876('0x18')});_0x228a54[a5_0x4876('0x7')](_0x5913b5[a5_0x4876('0x19')][a5_0x4876('0x1a')]||'/');});})(_0x5913b5,_0x228a54,_0x5dfc69);};exports[a5_0x4876('0x1b')]=(_0xc32639,_0x2b7006)=>{_0xc32639['logout']();_0x2b7006[a5_0x4876('0x7')]('/');};exports['getSignup']=(_0x5e26b6,_0x2b3f96)=>{if(_0x5e26b6[a5_0x4876('0x1c')]){return _0x2b3f96[a5_0x4876('0x7')]('/');}_0x2b3f96[a5_0x4876('0x8')](a5_0x4876('0x1d'),{'title':a5_0x4876('0x1e')});};exports['postSignup']=(_0x537dbb,_0x11a4ee,_0x2d1cc8)=>{_0x537dbb['assert'](a5_0x4876('0xa'),'Email\x20is\x20not\x20valid')[a5_0x4876('0xb')]();_0x537dbb[a5_0x4876('0xc')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x4876('0x1f')]({'min':0x4});_0x537dbb['assert'](a5_0x4876('0x20'),a5_0x4876('0x21'))[a5_0x4876('0x22')](_0x537dbb[a5_0x4876('0x23')][a5_0x4876('0xd')]);_0x537dbb[a5_0x4876('0x10')](a5_0x4876('0xa'))[a5_0x4876('0x11')]({'gmail_remove_dots':![]});const _0x31abde=_0x537dbb[a5_0x4876('0x24')]();if(_0x31abde){_0x537dbb[a5_0x4876('0x12')](a5_0x4876('0x13'),_0x31abde);return _0x11a4ee[a5_0x4876('0x7')]('/signup');}const _0x5968af=new User_1[(a5_0x4876('0x15'))]({'email':_0x537dbb[a5_0x4876('0x23')][a5_0x4876('0xa')],'password':_0x537dbb[a5_0x4876('0x23')][a5_0x4876('0xd')]});User_1[a5_0x4876('0x15')][a5_0x4876('0x25')]({'email':_0x537dbb['body'][a5_0x4876('0xa')]},(_0x1edea4,_0x903875)=>{if(_0x1edea4){return _0x2d1cc8(_0x1edea4);}if(_0x903875){_0x537dbb['flash'](a5_0x4876('0x13'),{'msg':a5_0x4876('0x26')});return _0x11a4ee['redirect'](a5_0x4876('0x27'));}_0x5968af[a5_0x4876('0x28')](_0x1edea4=>{if(_0x1edea4){return _0x2d1cc8(_0x1edea4);}_0x537dbb['logIn'](_0x5968af,_0x1edea4=>{if(_0x1edea4){return _0x2d1cc8(_0x1edea4);}_0x11a4ee[a5_0x4876('0x7')]('/');});});});};exports[a5_0x4876('0x29')]=(_0x4dd3ab,_0x3034fd)=>{_0x3034fd[a5_0x4876('0x8')](a5_0x4876('0x2a'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x21bcda,_0x54ad4c,_0x4e1822)=>{_0x21bcda[a5_0x4876('0xc')](a5_0x4876('0xa'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x21bcda['sanitize'](a5_0x4876('0xa'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3358ba=_0x21bcda[a5_0x4876('0x24')]();if(_0x3358ba){_0x21bcda['flash'](a5_0x4876('0x13'),_0x3358ba);return _0x54ad4c[a5_0x4876('0x7')]('/account');}User_1[a5_0x4876('0x15')][a5_0x4876('0x2b')](_0x21bcda['user']['id'],(_0x29691f,_0x54bc1b)=>{if(_0x29691f){return _0x4e1822(_0x29691f);}_0x54bc1b[a5_0x4876('0xa')]=_0x21bcda[a5_0x4876('0x23')][a5_0x4876('0xa')]||'';_0x54bc1b[a5_0x4876('0x2c')][a5_0x4876('0x2d')]=_0x21bcda[a5_0x4876('0x23')][a5_0x4876('0x2d')]||'';_0x54bc1b['profile'][a5_0x4876('0x2e')]=_0x21bcda[a5_0x4876('0x23')][a5_0x4876('0x2e')]||'';_0x54bc1b['profile']['location']=_0x21bcda[a5_0x4876('0x23')][a5_0x4876('0x2f')]||'';_0x54bc1b[a5_0x4876('0x2c')][a5_0x4876('0x30')]=_0x21bcda[a5_0x4876('0x23')]['website']||'';_0x54bc1b[a5_0x4876('0x28')](_0x29691f=>{if(_0x29691f){if(_0x29691f[a5_0x4876('0x31')]===0x2af8){_0x21bcda[a5_0x4876('0x12')]('errors',{'msg':a5_0x4876('0x32')});return _0x54ad4c[a5_0x4876('0x7')](a5_0x4876('0x33'));}return _0x4e1822(_0x29691f);}_0x21bcda['flash']('success',{'msg':a5_0x4876('0x34')});_0x54ad4c['redirect']('/account');});});};exports[a5_0x4876('0x35')]=(_0x2d2b50,_0x175266,_0x39a294)=>{_0x2d2b50[a5_0x4876('0xc')](a5_0x4876('0xd'),a5_0x4876('0x36'))[a5_0x4876('0x1f')]({'min':0x4});_0x2d2b50[a5_0x4876('0xc')](a5_0x4876('0x20'),'Passwords\x20do\x20not\x20match')['equals'](_0x2d2b50['body'][a5_0x4876('0xd')]);const _0x1ce0f4=_0x2d2b50[a5_0x4876('0x24')]();if(_0x1ce0f4){_0x2d2b50[a5_0x4876('0x12')](a5_0x4876('0x13'),_0x1ce0f4);return _0x175266[a5_0x4876('0x7')](a5_0x4876('0x33'));}User_1['default'][a5_0x4876('0x2b')](_0x2d2b50[a5_0x4876('0x1c')]['id'],(_0x4e52a0,_0x14baa1)=>{if(_0x4e52a0){return _0x39a294(_0x4e52a0);}_0x14baa1[a5_0x4876('0xd')]=_0x2d2b50[a5_0x4876('0x23')]['password'];_0x14baa1[a5_0x4876('0x28')](_0x4e52a0=>{if(_0x4e52a0){return _0x39a294(_0x4e52a0);}_0x2d2b50[a5_0x4876('0x12')](a5_0x4876('0x37'),{'msg':'Password\x20has\x20been\x20changed.'});_0x175266[a5_0x4876('0x7')](a5_0x4876('0x33'));});});};exports[a5_0x4876('0x38')]=(_0x3b20a1,_0x201b70,_0x2abd03)=>{User_1[a5_0x4876('0x15')][a5_0x4876('0x39')]({'_id':_0x3b20a1[a5_0x4876('0x1c')]['id']},_0xf6322=>{if(_0xf6322){return _0x2abd03(_0xf6322);}_0x3b20a1[a5_0x4876('0x1b')]();_0x3b20a1['flash'](a5_0x4876('0x3a'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x201b70[a5_0x4876('0x7')]('/');});};exports[a5_0x4876('0x3b')]=(_0x36c677,_0xdad226,_0x73f738)=>{const _0x168812=_0x36c677[a5_0x4876('0x3c')][a5_0x4876('0x3d')];User_1[a5_0x4876('0x15')]['findById'](_0x36c677['user']['id'],(_0x3dfa0c,_0x1e8973)=>{if(_0x3dfa0c){return _0x73f738(_0x3dfa0c);}_0x1e8973[_0x168812]=undefined;_0x1e8973[a5_0x4876('0x3e')]=_0x1e8973[a5_0x4876('0x3e')]['filter'](_0x425581=>_0x425581[a5_0x4876('0x3f')]!==_0x168812);_0x1e8973[a5_0x4876('0x28')](_0x3dfa0c=>{if(_0x3dfa0c){return _0x73f738(_0x3dfa0c);}_0x36c677[a5_0x4876('0x12')]('info',{'msg':_0x168812+'\x20account\x20has\x20been\x20unlinked.'});_0xdad226[a5_0x4876('0x7')](a5_0x4876('0x33'));});});};exports[a5_0x4876('0x40')]=(_0x7f3ffc,_0x505e15,_0x20ee47)=>{if(_0x7f3ffc[a5_0x4876('0x41')]()){return _0x505e15['redirect']('/');}User_1[a5_0x4876('0x15')][a5_0x4876('0x25')]({'passwordResetToken':_0x7f3ffc[a5_0x4876('0x3c')][a5_0x4876('0x42')]})['where']('passwordResetExpires')['gt'](Date[a5_0x4876('0x43')]())[a5_0x4876('0x44')]((_0x4f14e3,_0x40bfdb)=>{if(_0x4f14e3){return _0x20ee47(_0x4f14e3);}if(!_0x40bfdb){_0x7f3ffc['flash'](a5_0x4876('0x13'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x505e15[a5_0x4876('0x7')]('/forgot');}_0x505e15[a5_0x4876('0x8')](a5_0x4876('0x45'),{'title':a5_0x4876('0x46')});});};exports[a5_0x4876('0x47')]=(_0x4db86a,_0x5eba0b,_0x51fc64)=>{_0x4db86a[a5_0x4876('0xc')](a5_0x4876('0xd'),a5_0x4876('0x48'))['len']({'min':0x4});_0x4db86a['assert'](a5_0x4876('0x49'),'Passwords\x20must\x20match.')[a5_0x4876('0x22')](_0x4db86a[a5_0x4876('0x23')][a5_0x4876('0xd')]);const _0xdbfcc3=_0x4db86a[a5_0x4876('0x24')]();if(_0xdbfcc3){_0x4db86a[a5_0x4876('0x12')](a5_0x4876('0x13'),_0xdbfcc3);return _0x5eba0b[a5_0x4876('0x7')]('back');}async_1['default'][a5_0x4876('0x4a')]([function resetPassword(_0x535027){User_1[a5_0x4876('0x15')][a5_0x4876('0x25')]({'passwordResetToken':_0x4db86a[a5_0x4876('0x3c')]['token']})[a5_0x4876('0x4b')](a5_0x4876('0x4c'))['gt'](Date[a5_0x4876('0x43')]())[a5_0x4876('0x44')]((_0x39a1cd,_0x5c4a93)=>{if(_0x39a1cd){return _0x51fc64(_0x39a1cd);}if(!_0x5c4a93){_0x4db86a[a5_0x4876('0x12')](a5_0x4876('0x13'),{'msg':a5_0x4876('0x4d')});return _0x5eba0b['redirect']('back');}_0x5c4a93[a5_0x4876('0xd')]=_0x4db86a[a5_0x4876('0x23')][a5_0x4876('0xd')];_0x5c4a93[a5_0x4876('0x4e')]=undefined;_0x5c4a93[a5_0x4876('0x4c')]=undefined;_0x5c4a93[a5_0x4876('0x28')](_0x39a1cd=>{if(_0x39a1cd){return _0x51fc64(_0x39a1cd);}_0x4db86a['logIn'](_0x5c4a93,_0x39a1cd=>{_0x535027(_0x39a1cd,_0x5c4a93);});});});},function sendResetPasswordEmail(_0x34139d,_0x46b207){const _0x7e83fa=nodemailer_1[a5_0x4876('0x15')][a5_0x4876('0x4f')]({'service':a5_0x4876('0x50'),'auth':{'user':process[a5_0x4876('0x51')][a5_0x4876('0x52')],'pass':process[a5_0x4876('0x51')][a5_0x4876('0x53')]}});const _0x5d7b00={'to':_0x34139d[a5_0x4876('0xa')],'from':a5_0x4876('0x54'),'subject':a5_0x4876('0x55'),'text':a5_0x4876('0x56')+_0x34139d[a5_0x4876('0xa')]+a5_0x4876('0x57')};_0x7e83fa[a5_0x4876('0x58')](_0x5d7b00,_0x56ab90=>{_0x4db86a[a5_0x4876('0x12')]('success',{'msg':a5_0x4876('0x59')});_0x46b207(_0x56ab90);});}],_0x3bd62d=>{if(_0x3bd62d){return _0x51fc64(_0x3bd62d);}_0x5eba0b[a5_0x4876('0x7')]('/');});};exports[a5_0x4876('0x5a')]=(_0x49cd25,_0x412992)=>{if(_0x49cd25[a5_0x4876('0x41')]()){return _0x412992[a5_0x4876('0x7')]('/');}_0x412992[a5_0x4876('0x8')]('account/forgot',{'title':a5_0x4876('0x5b')});};exports[a5_0x4876('0x5c')]=(_0x1e01d2,_0x1f3d1f,_0x3a8e79)=>{_0x1e01d2[a5_0x4876('0xc')](a5_0x4876('0xa'),a5_0x4876('0x5d'))[a5_0x4876('0xb')]();_0x1e01d2[a5_0x4876('0x10')](a5_0x4876('0xa'))[a5_0x4876('0x11')]({'gmail_remove_dots':![]});const _0x335f66=_0x1e01d2[a5_0x4876('0x24')]();if(_0x335f66){_0x1e01d2[a5_0x4876('0x12')](a5_0x4876('0x13'),_0x335f66);return _0x1f3d1f[a5_0x4876('0x7')](a5_0x4876('0x5e'));}async_1['default']['waterfall']([function createRandomToken(_0x4faa4a){crypto_1['default'][a5_0x4876('0x5f')](0x10,(_0x1c9d43,_0x411594)=>{const _0x52cf17=_0x411594[a5_0x4876('0x60')](a5_0x4876('0x61'));_0x4faa4a(_0x1c9d43,_0x52cf17);});},function setRandomToken(_0x4ead82,_0x5b0a3b){User_1[a5_0x4876('0x15')][a5_0x4876('0x25')]({'email':_0x1e01d2[a5_0x4876('0x23')][a5_0x4876('0xa')]},(_0x526e22,_0xc4e248)=>{if(_0x526e22){return _0x5b0a3b(_0x526e22);}if(!_0xc4e248){_0x1e01d2[a5_0x4876('0x12')](a5_0x4876('0x13'),{'msg':a5_0x4876('0x62')});return _0x1f3d1f[a5_0x4876('0x7')](a5_0x4876('0x5e'));}_0xc4e248[a5_0x4876('0x4e')]=_0x4ead82;_0xc4e248[a5_0x4876('0x4c')]=Date[a5_0x4876('0x43')]()+0x36ee80;_0xc4e248[a5_0x4876('0x28')](_0x526e22=>{_0x5b0a3b(_0x526e22,_0x4ead82,_0xc4e248);});});},function sendForgotPasswordEmail(_0x25b436,_0x954ece,_0x4511b0){const _0x410ecd=nodemailer_1[a5_0x4876('0x15')][a5_0x4876('0x4f')]({'service':a5_0x4876('0x50'),'auth':{'user':process[a5_0x4876('0x51')]['SENDGRID_USER'],'pass':process[a5_0x4876('0x51')][a5_0x4876('0x53')]}});const _0x3bccab={'to':_0x954ece[a5_0x4876('0xa')],'from':a5_0x4876('0x63'),'subject':a5_0x4876('0x64'),'text':a5_0x4876('0x65')+_0x1e01d2['headers'][a5_0x4876('0x66')]+'/reset/'+_0x25b436+a5_0x4876('0x67')};_0x410ecd['sendMail'](_0x3bccab,_0x3c5ae2=>{_0x1e01d2[a5_0x4876('0x12')](a5_0x4876('0x3a'),{'msg':a5_0x4876('0x68')+_0x954ece[a5_0x4876('0xa')]+a5_0x4876('0x69')});_0x4511b0(_0x3c5ae2);});}],_0x50fcd7=>{if(_0x50fcd7){return _0x3a8e79(_0x50fcd7);}_0x1f3d1f['redirect'](a5_0x4876('0x5e'));});};