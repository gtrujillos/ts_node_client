var a5_0x3c85=['postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','filter','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','params','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','nodemailer','../models/User','getLogin','user','account/login','Login','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','redirect','/login','default','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','render','postSignup','len','confirmPassword','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.'];(function(_0x320fd5,_0x438935){var _0x3af963=function(_0x5b433d){while(--_0x5b433d){_0x320fd5['push'](_0x320fd5['shift']());}};_0x3af963(++_0x438935);}(a5_0x3c85,0x1ef));var a5_0x3387=function(_0x55f63e,_0x4269c3){_0x55f63e=_0x55f63e-0x0;var _0x1f7ac3=a5_0x3c85[_0x55f63e];return _0x1f7ac3;};'use strict';var __importDefault=this&&this[a5_0x3387('0x0')]||function(_0x12c7d2){return _0x12c7d2&&_0x12c7d2[a5_0x3387('0x1')]?_0x12c7d2:{'default':_0x12c7d2};};Object[a5_0x3387('0x2')](exports,a5_0x3387('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x3387('0x3')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x3387('0x4')));const request=require('express-validator');exports[a5_0x3387('0x5')]=(_0x3bab3a,_0x493582)=>{if(_0x3bab3a[a5_0x3387('0x6')]){return _0x493582['redirect']('/');}_0x493582['render'](a5_0x3387('0x7'),{'title':a5_0x3387('0x8')});};exports['postLogin']=(_0x5dbbb6,_0x59be60,_0x388ff7)=>{_0x5dbbb6[a5_0x3387('0x9')](a5_0x3387('0xa'),a5_0x3387('0xb'))[a5_0x3387('0xc')]();_0x5dbbb6['assert'](a5_0x3387('0xd'),a5_0x3387('0xe'))['notEmpty']();_0x5dbbb6[a5_0x3387('0xf')](a5_0x3387('0xa'))[a5_0x3387('0x10')]({'gmail_remove_dots':![]});const _0x124311=_0x5dbbb6[a5_0x3387('0x11')]();if(_0x124311){_0x5dbbb6[a5_0x3387('0x12')](a5_0x3387('0x13'),_0x124311);return _0x59be60[a5_0x3387('0x14')](a5_0x3387('0x15'));}passport_1[a5_0x3387('0x16')]['authenticate']('local',(_0x1d7e4c,_0x3e4dfc,_0x1549bd)=>{if(_0x1d7e4c){return _0x388ff7(_0x1d7e4c);}if(!_0x3e4dfc){_0x5dbbb6[a5_0x3387('0x12')]('errors',_0x1549bd[a5_0x3387('0x17')]);return _0x59be60[a5_0x3387('0x14')](a5_0x3387('0x15'));}_0x5dbbb6[a5_0x3387('0x18')](_0x3e4dfc,_0x1d7e4c=>{if(_0x1d7e4c){return _0x388ff7(_0x1d7e4c);}_0x5dbbb6[a5_0x3387('0x12')](a5_0x3387('0x19'),{'msg':a5_0x3387('0x1a')});_0x59be60['redirect'](_0x5dbbb6[a5_0x3387('0x1b')][a5_0x3387('0x1c')]||'/');});})(_0x5dbbb6,_0x59be60,_0x388ff7);};exports[a5_0x3387('0x1d')]=(_0x47403b,_0x278401)=>{_0x47403b[a5_0x3387('0x1d')]();_0x278401[a5_0x3387('0x14')]('/');};exports[a5_0x3387('0x1e')]=(_0x56e12c,_0x1501ad)=>{if(_0x56e12c['user']){return _0x1501ad[a5_0x3387('0x14')]('/');}_0x1501ad[a5_0x3387('0x1f')]('account/signup',{'title':'Create\x20Account'});};exports[a5_0x3387('0x20')]=(_0x3d2016,_0xadcc7f,_0x528864)=>{_0x3d2016[a5_0x3387('0x9')](a5_0x3387('0xa'),a5_0x3387('0xb'))[a5_0x3387('0xc')]();_0x3d2016[a5_0x3387('0x9')](a5_0x3387('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x3387('0x21')]({'min':0x4});_0x3d2016[a5_0x3387('0x9')](a5_0x3387('0x22'),'Passwords\x20do\x20not\x20match')[a5_0x3387('0x23')](_0x3d2016[a5_0x3387('0x24')][a5_0x3387('0xd')]);_0x3d2016[a5_0x3387('0xf')](a5_0x3387('0xa'))[a5_0x3387('0x10')]({'gmail_remove_dots':![]});const _0x16327b=_0x3d2016['validationErrors']();if(_0x16327b){_0x3d2016['flash']('errors',_0x16327b);return _0xadcc7f[a5_0x3387('0x14')](a5_0x3387('0x25'));}const _0x5b13e1=new User_1['default']({'email':_0x3d2016['body'][a5_0x3387('0xa')],'password':_0x3d2016[a5_0x3387('0x24')][a5_0x3387('0xd')]});User_1['default'][a5_0x3387('0x26')]({'email':_0x3d2016[a5_0x3387('0x24')][a5_0x3387('0xa')]},(_0x2436ef,_0x16a501)=>{if(_0x2436ef){return _0x528864(_0x2436ef);}if(_0x16a501){_0x3d2016[a5_0x3387('0x12')](a5_0x3387('0x13'),{'msg':a5_0x3387('0x27')});return _0xadcc7f['redirect'](a5_0x3387('0x25'));}_0x5b13e1[a5_0x3387('0x28')](_0x2436ef=>{if(_0x2436ef){return _0x528864(_0x2436ef);}_0x3d2016[a5_0x3387('0x18')](_0x5b13e1,_0x2436ef=>{if(_0x2436ef){return _0x528864(_0x2436ef);}_0xadcc7f[a5_0x3387('0x14')]('/');});});});};exports[a5_0x3387('0x29')]=(_0x2d6ec5,_0x51a229)=>{_0x51a229[a5_0x3387('0x1f')]('account/profile',{'title':a5_0x3387('0x2a')});};exports[a5_0x3387('0x2b')]=(_0x4e1191,_0x302d43,_0x184b5d)=>{_0x4e1191[a5_0x3387('0x9')](a5_0x3387('0xa'),a5_0x3387('0x2c'))['isEmail']();_0x4e1191[a5_0x3387('0xf')](a5_0x3387('0xa'))[a5_0x3387('0x10')]({'gmail_remove_dots':![]});const _0x919d34=_0x4e1191['validationErrors']();if(_0x919d34){_0x4e1191[a5_0x3387('0x12')](a5_0x3387('0x13'),_0x919d34);return _0x302d43[a5_0x3387('0x14')]('/account');}User_1[a5_0x3387('0x16')][a5_0x3387('0x2d')](_0x4e1191['user']['id'],(_0x109b0e,_0x5f2bf9)=>{if(_0x109b0e){return _0x184b5d(_0x109b0e);}_0x5f2bf9[a5_0x3387('0xa')]=_0x4e1191[a5_0x3387('0x24')][a5_0x3387('0xa')]||'';_0x5f2bf9[a5_0x3387('0x2e')]['name']=_0x4e1191[a5_0x3387('0x24')][a5_0x3387('0x2f')]||'';_0x5f2bf9[a5_0x3387('0x2e')][a5_0x3387('0x30')]=_0x4e1191[a5_0x3387('0x24')][a5_0x3387('0x30')]||'';_0x5f2bf9[a5_0x3387('0x2e')][a5_0x3387('0x31')]=_0x4e1191[a5_0x3387('0x24')][a5_0x3387('0x31')]||'';_0x5f2bf9[a5_0x3387('0x2e')][a5_0x3387('0x32')]=_0x4e1191[a5_0x3387('0x24')][a5_0x3387('0x32')]||'';_0x5f2bf9[a5_0x3387('0x28')](_0x109b0e=>{if(_0x109b0e){if(_0x109b0e[a5_0x3387('0x33')]===0x2af8){_0x4e1191[a5_0x3387('0x12')](a5_0x3387('0x13'),{'msg':a5_0x3387('0x34')});return _0x302d43['redirect'](a5_0x3387('0x35'));}return _0x184b5d(_0x109b0e);}_0x4e1191[a5_0x3387('0x12')](a5_0x3387('0x19'),{'msg':a5_0x3387('0x36')});_0x302d43[a5_0x3387('0x14')](a5_0x3387('0x35'));});});};exports[a5_0x3387('0x37')]=(_0x764343,_0x23a3c9,_0x1d66de)=>{_0x764343['assert'](a5_0x3387('0xd'),a5_0x3387('0x38'))[a5_0x3387('0x21')]({'min':0x4});_0x764343[a5_0x3387('0x9')](a5_0x3387('0x22'),a5_0x3387('0x39'))[a5_0x3387('0x23')](_0x764343[a5_0x3387('0x24')][a5_0x3387('0xd')]);const _0x48eeae=_0x764343[a5_0x3387('0x11')]();if(_0x48eeae){_0x764343[a5_0x3387('0x12')]('errors',_0x48eeae);return _0x23a3c9['redirect'](a5_0x3387('0x35'));}User_1[a5_0x3387('0x16')]['findById'](_0x764343[a5_0x3387('0x6')]['id'],(_0x50acd4,_0x3ded28)=>{if(_0x50acd4){return _0x1d66de(_0x50acd4);}_0x3ded28[a5_0x3387('0xd')]=_0x764343['body']['password'];_0x3ded28[a5_0x3387('0x28')](_0x50acd4=>{if(_0x50acd4){return _0x1d66de(_0x50acd4);}_0x764343[a5_0x3387('0x12')]('success',{'msg':a5_0x3387('0x3a')});_0x23a3c9[a5_0x3387('0x14')](a5_0x3387('0x35'));});});};exports[a5_0x3387('0x3b')]=(_0x2924b4,_0x5631b4,_0xe4a844)=>{User_1['default'][a5_0x3387('0x3c')]({'_id':_0x2924b4[a5_0x3387('0x6')]['id']},_0x3d5037=>{if(_0x3d5037){return _0xe4a844(_0x3d5037);}_0x2924b4[a5_0x3387('0x1d')]();_0x2924b4[a5_0x3387('0x12')](a5_0x3387('0x3d'),{'msg':a5_0x3387('0x3e')});_0x5631b4[a5_0x3387('0x14')]('/');});};exports[a5_0x3387('0x3f')]=(_0x1728eb,_0x1974d1,_0x3ceb68)=>{const _0x161840=_0x1728eb['params'][a5_0x3387('0x40')];User_1[a5_0x3387('0x16')]['findById'](_0x1728eb[a5_0x3387('0x6')]['id'],(_0x39a498,_0x5b991b)=>{if(_0x39a498){return _0x3ceb68(_0x39a498);}_0x5b991b[_0x161840]=undefined;_0x5b991b['tokens']=_0x5b991b['tokens'][a5_0x3387('0x41')](_0x497ace=>_0x497ace['kind']!==_0x161840);_0x5b991b[a5_0x3387('0x28')](_0x39a498=>{if(_0x39a498){return _0x3ceb68(_0x39a498);}_0x1728eb[a5_0x3387('0x12')](a5_0x3387('0x3d'),{'msg':_0x161840+a5_0x3387('0x42')});_0x1974d1['redirect'](a5_0x3387('0x35'));});});};exports[a5_0x3387('0x43')]=(_0x5a8613,_0x454a10,_0x1cf0b0)=>{if(_0x5a8613['isAuthenticated']()){return _0x454a10['redirect']('/');}User_1[a5_0x3387('0x16')][a5_0x3387('0x26')]({'passwordResetToken':_0x5a8613['params'][a5_0x3387('0x44')]})[a5_0x3387('0x45')](a5_0x3387('0x46'))['gt'](Date[a5_0x3387('0x47')]())[a5_0x3387('0x48')]((_0x547b67,_0x380bf0)=>{if(_0x547b67){return _0x1cf0b0(_0x547b67);}if(!_0x380bf0){_0x5a8613[a5_0x3387('0x12')](a5_0x3387('0x13'),{'msg':a5_0x3387('0x49')});return _0x454a10['redirect'](a5_0x3387('0x4a'));}_0x454a10[a5_0x3387('0x1f')](a5_0x3387('0x4b'),{'title':a5_0x3387('0x4c')});});};exports[a5_0x3387('0x4d')]=(_0x40c896,_0x5ae990,_0x2ad8c8)=>{_0x40c896[a5_0x3387('0x9')](a5_0x3387('0xd'),a5_0x3387('0x4e'))[a5_0x3387('0x21')]({'min':0x4});_0x40c896[a5_0x3387('0x9')](a5_0x3387('0x4f'),a5_0x3387('0x50'))['equals'](_0x40c896['body'][a5_0x3387('0xd')]);const _0x79cf79=_0x40c896[a5_0x3387('0x11')]();if(_0x79cf79){_0x40c896[a5_0x3387('0x12')]('errors',_0x79cf79);return _0x5ae990[a5_0x3387('0x14')](a5_0x3387('0x51'));}async_1[a5_0x3387('0x16')]['waterfall']([function resetPassword(_0xb5e23c){User_1[a5_0x3387('0x16')][a5_0x3387('0x26')]({'passwordResetToken':_0x40c896[a5_0x3387('0x52')]['token']})['where'](a5_0x3387('0x46'))['gt'](Date[a5_0x3387('0x47')]())[a5_0x3387('0x48')]((_0x30484f,_0x1dde37)=>{if(_0x30484f){return _0x2ad8c8(_0x30484f);}if(!_0x1dde37){_0x40c896[a5_0x3387('0x12')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x5ae990['redirect'](a5_0x3387('0x51'));}_0x1dde37[a5_0x3387('0xd')]=_0x40c896[a5_0x3387('0x24')][a5_0x3387('0xd')];_0x1dde37[a5_0x3387('0x53')]=undefined;_0x1dde37[a5_0x3387('0x46')]=undefined;_0x1dde37['save'](_0x30484f=>{if(_0x30484f){return _0x2ad8c8(_0x30484f);}_0x40c896[a5_0x3387('0x18')](_0x1dde37,_0x30484f=>{_0xb5e23c(_0x30484f,_0x1dde37);});});});},function sendResetPasswordEmail(_0x719260,_0x4d8458){const _0x3dc41b=nodemailer_1['default'][a5_0x3387('0x54')]({'service':a5_0x3387('0x55'),'auth':{'user':process[a5_0x3387('0x56')][a5_0x3387('0x57')],'pass':process['env'][a5_0x3387('0x58')]}});const _0x48358c={'to':_0x719260['email'],'from':a5_0x3387('0x59'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x3387('0x5a')+_0x719260['email']+a5_0x3387('0x5b')};_0x3dc41b[a5_0x3387('0x5c')](_0x48358c,_0x3ab4f0=>{_0x40c896[a5_0x3387('0x12')]('success',{'msg':a5_0x3387('0x5d')});_0x4d8458(_0x3ab4f0);});}],_0x2f94da=>{if(_0x2f94da){return _0x2ad8c8(_0x2f94da);}_0x5ae990[a5_0x3387('0x14')]('/');});};exports[a5_0x3387('0x5e')]=(_0x55fab0,_0x20e679)=>{if(_0x55fab0[a5_0x3387('0x5f')]()){return _0x20e679['redirect']('/');}_0x20e679[a5_0x3387('0x1f')]('account/forgot',{'title':a5_0x3387('0x60')});};exports[a5_0x3387('0x61')]=(_0x2791fb,_0x25d067,_0x142246)=>{_0x2791fb[a5_0x3387('0x9')](a5_0x3387('0xa'),a5_0x3387('0x2c'))[a5_0x3387('0xc')]();_0x2791fb[a5_0x3387('0xf')](a5_0x3387('0xa'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x73d049=_0x2791fb[a5_0x3387('0x11')]();if(_0x73d049){_0x2791fb[a5_0x3387('0x12')]('errors',_0x73d049);return _0x25d067[a5_0x3387('0x14')](a5_0x3387('0x4a'));}async_1[a5_0x3387('0x16')][a5_0x3387('0x62')]([function createRandomToken(_0x4753e2){crypto_1['default'][a5_0x3387('0x63')](0x10,(_0x26e306,_0x4febcc)=>{const _0x3da1bf=_0x4febcc[a5_0x3387('0x64')](a5_0x3387('0x65'));_0x4753e2(_0x26e306,_0x3da1bf);});},function setRandomToken(_0x4a9105,_0x5b52b0){User_1[a5_0x3387('0x16')][a5_0x3387('0x26')]({'email':_0x2791fb[a5_0x3387('0x24')][a5_0x3387('0xa')]},(_0x396f62,_0x332bf5)=>{if(_0x396f62){return _0x5b52b0(_0x396f62);}if(!_0x332bf5){_0x2791fb[a5_0x3387('0x12')](a5_0x3387('0x13'),{'msg':a5_0x3387('0x66')});return _0x25d067[a5_0x3387('0x14')](a5_0x3387('0x4a'));}_0x332bf5['passwordResetToken']=_0x4a9105;_0x332bf5[a5_0x3387('0x46')]=Date[a5_0x3387('0x47')]()+0x36ee80;_0x332bf5[a5_0x3387('0x28')](_0x396f62=>{_0x5b52b0(_0x396f62,_0x4a9105,_0x332bf5);});});},function sendForgotPasswordEmail(_0x150048,_0x3d2212,_0xe53f98){const _0x1c545f=nodemailer_1[a5_0x3387('0x16')][a5_0x3387('0x54')]({'service':a5_0x3387('0x55'),'auth':{'user':process[a5_0x3387('0x56')][a5_0x3387('0x57')],'pass':process[a5_0x3387('0x56')][a5_0x3387('0x58')]}});const _0x4b78b1={'to':_0x3d2212[a5_0x3387('0xa')],'from':a5_0x3387('0x67'),'subject':a5_0x3387('0x68'),'text':a5_0x3387('0x69')+_0x2791fb[a5_0x3387('0x6a')]['host']+a5_0x3387('0x6b')+_0x150048+a5_0x3387('0x6c')};_0x1c545f['sendMail'](_0x4b78b1,_0x33fa53=>{_0x2791fb['flash'](a5_0x3387('0x3d'),{'msg':a5_0x3387('0x6d')+_0x3d2212[a5_0x3387('0xa')]+'\x20with\x20further\x20instructions.'});_0xe53f98(_0x33fa53);});}],_0x1df9cb=>{if(_0x1df9cb){return _0x142246(_0x1df9cb);}_0x25d067[a5_0x3387('0x14')](a5_0x3387('0x4a'));});};