var a5_0x420d=['createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','postForgot','/forgot','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','passport','../models/User','express-validator','getLogin','redirect','account/login','Login','postLogin','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','validationErrors','flash','/login','default','authenticate','local','message','logIn','success','returnTo','logout','getSignup','user','render','account/signup','Create\x20Account','Email\x20is\x20not\x20valid','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','body','normalizeEmail','errors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','/account','postUpdatePassword','Passwords\x20do\x20not\x20match','equals','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','where','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back'];(function(_0x3ab2c3,_0x48de38){var _0x27511a=function(_0x3062fe){while(--_0x3062fe){_0x3ab2c3['push'](_0x3ab2c3['shift']());}};_0x27511a(++_0x48de38);}(a5_0x420d,0x169));var a5_0x2fb0=function(_0x1a556a,_0x47c7a1){_0x1a556a=_0x1a556a-0x0;var _0x15bef3=a5_0x420d[_0x1a556a];return _0x15bef3;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x39deb8){return _0x39deb8&&_0x39deb8[a5_0x2fb0('0x0')]?_0x39deb8:{'default':_0x39deb8};};Object[a5_0x2fb0('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x2fb0('0x2')));const crypto_1=__importDefault(require(a5_0x2fb0('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x2fb0('0x4')));const User_1=__importDefault(require(a5_0x2fb0('0x5')));const request=require(a5_0x2fb0('0x6'));exports[a5_0x2fb0('0x7')]=(_0xa379b9,_0x558083)=>{if(_0xa379b9['user']){return _0x558083[a5_0x2fb0('0x8')]('/');}_0x558083['render'](a5_0x2fb0('0x9'),{'title':a5_0x2fb0('0xa')});};exports[a5_0x2fb0('0xb')]=(_0x49f276,_0x2fbcfa,_0x89148d)=>{_0x49f276[a5_0x2fb0('0xc')]('email','Email\x20is\x20not\x20valid')['isEmail']();_0x49f276[a5_0x2fb0('0xc')](a5_0x2fb0('0xd'),a5_0x2fb0('0xe'))[a5_0x2fb0('0xf')]();_0x49f276[a5_0x2fb0('0x10')](a5_0x2fb0('0x11'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x101ca7=_0x49f276[a5_0x2fb0('0x12')]();if(_0x101ca7){_0x49f276[a5_0x2fb0('0x13')]('errors',_0x101ca7);return _0x2fbcfa['redirect'](a5_0x2fb0('0x14'));}passport_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x16')](a5_0x2fb0('0x17'),(_0xbaf0be,_0x1d06da,_0x566313)=>{if(_0xbaf0be){return _0x89148d(_0xbaf0be);}if(!_0x1d06da){_0x49f276['flash']('errors',_0x566313[a5_0x2fb0('0x18')]);return _0x2fbcfa[a5_0x2fb0('0x8')](a5_0x2fb0('0x14'));}_0x49f276[a5_0x2fb0('0x19')](_0x1d06da,_0xbaf0be=>{if(_0xbaf0be){return _0x89148d(_0xbaf0be);}_0x49f276['flash'](a5_0x2fb0('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x2fbcfa['redirect'](_0x49f276['session'][a5_0x2fb0('0x1b')]||'/');});})(_0x49f276,_0x2fbcfa,_0x89148d);};exports[a5_0x2fb0('0x1c')]=(_0x3f762e,_0x267762)=>{_0x3f762e[a5_0x2fb0('0x1c')]();_0x267762[a5_0x2fb0('0x8')]('/');};exports[a5_0x2fb0('0x1d')]=(_0x32a226,_0x14f0aa)=>{if(_0x32a226[a5_0x2fb0('0x1e')]){return _0x14f0aa[a5_0x2fb0('0x8')]('/');}_0x14f0aa[a5_0x2fb0('0x1f')](a5_0x2fb0('0x20'),{'title':a5_0x2fb0('0x21')});};exports['postSignup']=(_0x167a76,_0x48fb65,_0x98802d)=>{_0x167a76[a5_0x2fb0('0xc')](a5_0x2fb0('0x11'),a5_0x2fb0('0x22'))[a5_0x2fb0('0x23')]();_0x167a76[a5_0x2fb0('0xc')](a5_0x2fb0('0xd'),a5_0x2fb0('0x24'))[a5_0x2fb0('0x25')]({'min':0x4});_0x167a76[a5_0x2fb0('0xc')](a5_0x2fb0('0x26'),'Passwords\x20do\x20not\x20match')['equals'](_0x167a76[a5_0x2fb0('0x27')][a5_0x2fb0('0xd')]);_0x167a76[a5_0x2fb0('0x10')](a5_0x2fb0('0x11'))[a5_0x2fb0('0x28')]({'gmail_remove_dots':![]});const _0xfb13c0=_0x167a76[a5_0x2fb0('0x12')]();if(_0xfb13c0){_0x167a76[a5_0x2fb0('0x13')](a5_0x2fb0('0x29'),_0xfb13c0);return _0x48fb65['redirect'](a5_0x2fb0('0x2a'));}const _0x4ce48a=new User_1[(a5_0x2fb0('0x15'))]({});User_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x2b')]({'email':_0x167a76[a5_0x2fb0('0x27')]['email']},(_0x58ff62,_0x4c86c6)=>{if(_0x58ff62){return _0x98802d(_0x58ff62);}if(_0x4c86c6){_0x167a76['flash'](a5_0x2fb0('0x29'),{'msg':a5_0x2fb0('0x2c')});return _0x48fb65[a5_0x2fb0('0x8')](a5_0x2fb0('0x2a'));}_0x4ce48a[a5_0x2fb0('0x2d')](_0x58ff62=>{if(_0x58ff62){return _0x98802d(_0x58ff62);}_0x167a76['logIn'](_0x4ce48a,_0x58ff62=>{if(_0x58ff62){return _0x98802d(_0x58ff62);}_0x48fb65[a5_0x2fb0('0x8')]('/');});});});};exports[a5_0x2fb0('0x2e')]=(_0x1d500e,_0x4566dc)=>{_0x4566dc[a5_0x2fb0('0x1f')](a5_0x2fb0('0x2f'),{'title':a5_0x2fb0('0x30')});};exports[a5_0x2fb0('0x31')]=(_0x17a001,_0x59526b,_0x2dd4f1)=>{_0x17a001[a5_0x2fb0('0xc')]('email',a5_0x2fb0('0x32'))[a5_0x2fb0('0x23')]();_0x17a001[a5_0x2fb0('0x10')](a5_0x2fb0('0x11'))[a5_0x2fb0('0x28')]({'gmail_remove_dots':![]});const _0x44d282=_0x17a001[a5_0x2fb0('0x12')]();if(_0x44d282){_0x17a001[a5_0x2fb0('0x13')](a5_0x2fb0('0x29'),_0x44d282);return _0x59526b[a5_0x2fb0('0x8')]('/account');}User_1['default']['findById'](_0x17a001[a5_0x2fb0('0x1e')]['id'],(_0x577949,_0x1fcc11)=>{if(_0x577949){return _0x2dd4f1(_0x577949);}_0x1fcc11[a5_0x2fb0('0x11')]=_0x17a001[a5_0x2fb0('0x27')]['email']||'';_0x1fcc11[a5_0x2fb0('0x33')][a5_0x2fb0('0x34')]=_0x17a001[a5_0x2fb0('0x27')]['name']||'';_0x1fcc11[a5_0x2fb0('0x33')][a5_0x2fb0('0x35')]=_0x17a001['body'][a5_0x2fb0('0x35')]||'';_0x1fcc11[a5_0x2fb0('0x33')][a5_0x2fb0('0x36')]=_0x17a001['body'][a5_0x2fb0('0x36')]||'';_0x1fcc11[a5_0x2fb0('0x33')][a5_0x2fb0('0x37')]=_0x17a001[a5_0x2fb0('0x27')][a5_0x2fb0('0x37')]||'';_0x1fcc11['save'](_0x577949=>{if(_0x577949){if(_0x577949[a5_0x2fb0('0x38')]===0x2af8){_0x17a001['flash'](a5_0x2fb0('0x29'),{'msg':a5_0x2fb0('0x39')});return _0x59526b[a5_0x2fb0('0x8')]('/account');}return _0x2dd4f1(_0x577949);}_0x17a001['flash'](a5_0x2fb0('0x1a'),{'msg':a5_0x2fb0('0x3a')});_0x59526b[a5_0x2fb0('0x8')](a5_0x2fb0('0x3b'));});});};exports[a5_0x2fb0('0x3c')]=(_0x3879c8,_0x54ea40,_0x46c0bf)=>{_0x3879c8[a5_0x2fb0('0xc')](a5_0x2fb0('0xd'),a5_0x2fb0('0x24'))['len']({'min':0x4});_0x3879c8[a5_0x2fb0('0xc')](a5_0x2fb0('0x26'),a5_0x2fb0('0x3d'))[a5_0x2fb0('0x3e')](_0x3879c8[a5_0x2fb0('0x27')][a5_0x2fb0('0xd')]);const _0x16cd65=_0x3879c8['validationErrors']();if(_0x16cd65){_0x3879c8['flash'](a5_0x2fb0('0x29'),_0x16cd65);return _0x54ea40['redirect'](a5_0x2fb0('0x3b'));}User_1['default'][a5_0x2fb0('0x3f')](_0x3879c8[a5_0x2fb0('0x1e')]['id'],(_0x37372d,_0x23b509)=>{if(_0x37372d){return _0x46c0bf(_0x37372d);}_0x23b509[a5_0x2fb0('0xd')]=_0x3879c8[a5_0x2fb0('0x27')][a5_0x2fb0('0xd')];_0x23b509[a5_0x2fb0('0x2d')](_0x37372d=>{if(_0x37372d){return _0x46c0bf(_0x37372d);}_0x3879c8[a5_0x2fb0('0x13')](a5_0x2fb0('0x1a'),{'msg':a5_0x2fb0('0x40')});_0x54ea40[a5_0x2fb0('0x8')](a5_0x2fb0('0x3b'));});});};exports[a5_0x2fb0('0x41')]=(_0x2d0da8,_0x595cde,_0x1ad4ee)=>{User_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x42')]({'_id':_0x2d0da8['user']['id']},_0x3fca65=>{if(_0x3fca65){return _0x1ad4ee(_0x3fca65);}_0x2d0da8[a5_0x2fb0('0x1c')]();_0x2d0da8[a5_0x2fb0('0x13')](a5_0x2fb0('0x43'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x595cde[a5_0x2fb0('0x8')]('/');});};exports[a5_0x2fb0('0x44')]=(_0xe132e8,_0x1ed578,_0x1481af)=>{const _0x25ab02=_0xe132e8[a5_0x2fb0('0x45')][a5_0x2fb0('0x46')];User_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x3f')](_0xe132e8[a5_0x2fb0('0x1e')]['id'],(_0xeac74f,_0x261c41)=>{if(_0xeac74f){return _0x1481af(_0xeac74f);}_0x261c41[_0x25ab02]=undefined;_0x261c41['tokens']=_0x261c41[a5_0x2fb0('0x47')]['filter'](_0x70c67b=>_0x70c67b[a5_0x2fb0('0x48')]!==_0x25ab02);_0x261c41[a5_0x2fb0('0x2d')](_0xeac74f=>{if(_0xeac74f){return _0x1481af(_0xeac74f);}_0xe132e8[a5_0x2fb0('0x13')](a5_0x2fb0('0x43'),{'msg':_0x25ab02+a5_0x2fb0('0x49')});_0x1ed578[a5_0x2fb0('0x8')](a5_0x2fb0('0x3b'));});});};exports[a5_0x2fb0('0x4a')]=(_0x235b2d,_0x390688,_0x14c813)=>{if(_0x235b2d['isAuthenticated']()){return _0x390688[a5_0x2fb0('0x8')]('/');}User_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x2b')]({'passwordResetToken':_0x235b2d[a5_0x2fb0('0x45')]['token']})[a5_0x2fb0('0x4b')](a5_0x2fb0('0x4c'))['gt'](Date[a5_0x2fb0('0x4d')]())['exec']((_0x51281b,_0x3f8e77)=>{if(_0x51281b){return _0x14c813(_0x51281b);}if(!_0x3f8e77){_0x235b2d[a5_0x2fb0('0x13')]('errors',{'msg':a5_0x2fb0('0x4e')});return _0x390688[a5_0x2fb0('0x8')]('/forgot');}_0x390688[a5_0x2fb0('0x1f')]('account/reset',{'title':'Password\x20Reset'});});};exports[a5_0x2fb0('0x4f')]=(_0x58f0e8,_0x2b3d1f,_0x16f156)=>{_0x58f0e8['assert'](a5_0x2fb0('0xd'),a5_0x2fb0('0x50'))[a5_0x2fb0('0x25')]({'min':0x4});_0x58f0e8[a5_0x2fb0('0xc')]('confirm',a5_0x2fb0('0x51'))['equals'](_0x58f0e8[a5_0x2fb0('0x27')][a5_0x2fb0('0xd')]);const _0x53e305=_0x58f0e8['validationErrors']();if(_0x53e305){_0x58f0e8[a5_0x2fb0('0x13')](a5_0x2fb0('0x29'),_0x53e305);return _0x2b3d1f[a5_0x2fb0('0x8')](a5_0x2fb0('0x52'));}async_1[a5_0x2fb0('0x15')]['waterfall']([function resetPassword(_0x359fdd){User_1['default'][a5_0x2fb0('0x2b')]({'passwordResetToken':_0x58f0e8['params']['token']})['where'](a5_0x2fb0('0x4c'))['gt'](Date['now']())['exec']((_0x22b9fa,_0x49e064)=>{if(_0x22b9fa){return _0x16f156(_0x22b9fa);}if(!_0x49e064){_0x58f0e8[a5_0x2fb0('0x13')](a5_0x2fb0('0x29'),{'msg':a5_0x2fb0('0x4e')});return _0x2b3d1f[a5_0x2fb0('0x8')](a5_0x2fb0('0x52'));}_0x49e064[a5_0x2fb0('0xd')]=_0x58f0e8[a5_0x2fb0('0x27')][a5_0x2fb0('0xd')];_0x49e064['passwordResetToken']=undefined;_0x49e064['passwordResetExpires']=undefined;_0x49e064[a5_0x2fb0('0x2d')](_0x22b9fa=>{if(_0x22b9fa){return _0x16f156(_0x22b9fa);}_0x58f0e8['logIn'](_0x49e064,_0x22b9fa=>{_0x359fdd(_0x22b9fa,_0x49e064);});});});},function sendResetPasswordEmail(_0x17d92d,_0x5cd064){const _0xf1cfb4=nodemailer_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x53')]({'service':'SendGrid','auth':{'user':process[a5_0x2fb0('0x54')][a5_0x2fb0('0x55')],'pass':process['env'][a5_0x2fb0('0x56')]}});const _0x4c7726={'to':_0x17d92d[a5_0x2fb0('0x11')],'from':a5_0x2fb0('0x57'),'subject':a5_0x2fb0('0x58'),'text':a5_0x2fb0('0x59')+_0x17d92d[a5_0x2fb0('0x11')]+a5_0x2fb0('0x5a')};_0xf1cfb4[a5_0x2fb0('0x5b')](_0x4c7726,_0x1bda8c=>{_0x58f0e8[a5_0x2fb0('0x13')](a5_0x2fb0('0x1a'),{'msg':a5_0x2fb0('0x5c')});_0x5cd064(_0x1bda8c);});}],_0x3a66b2=>{if(_0x3a66b2){return _0x16f156(_0x3a66b2);}_0x2b3d1f[a5_0x2fb0('0x8')]('/');});};exports[a5_0x2fb0('0x5d')]=(_0xe32b69,_0x154188)=>{if(_0xe32b69[a5_0x2fb0('0x5e')]()){return _0x154188[a5_0x2fb0('0x8')]('/');}_0x154188['render'](a5_0x2fb0('0x5f'),{'title':'Forgot\x20Password'});};exports[a5_0x2fb0('0x60')]=(_0xc5353e,_0xe54de4,_0x120042)=>{_0xc5353e['assert']('email',a5_0x2fb0('0x32'))[a5_0x2fb0('0x23')]();_0xc5353e[a5_0x2fb0('0x10')]('email')[a5_0x2fb0('0x28')]({'gmail_remove_dots':![]});const _0x30513f=_0xc5353e[a5_0x2fb0('0x12')]();if(_0x30513f){_0xc5353e[a5_0x2fb0('0x13')](a5_0x2fb0('0x29'),_0x30513f);return _0xe54de4[a5_0x2fb0('0x8')](a5_0x2fb0('0x61'));}async_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x62')]([function createRandomToken(_0xb113c3){crypto_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x63')](0x10,(_0x3b68d7,_0x1860b7)=>{const _0x34acae=_0x1860b7[a5_0x2fb0('0x64')](a5_0x2fb0('0x65'));_0xb113c3(_0x3b68d7,_0x34acae);});},function setRandomToken(_0x179e70,_0x177ac5){User_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x2b')]({'email':_0xc5353e[a5_0x2fb0('0x27')][a5_0x2fb0('0x11')]},(_0x4524e1,_0x43f34b)=>{if(_0x4524e1){return _0x177ac5(_0x4524e1);}if(!_0x43f34b){_0xc5353e[a5_0x2fb0('0x13')](a5_0x2fb0('0x29'),{'msg':a5_0x2fb0('0x66')});return _0xe54de4[a5_0x2fb0('0x8')](a5_0x2fb0('0x61'));}_0x43f34b['passwordResetToken']=_0x179e70;_0x43f34b[a5_0x2fb0('0x4c')]=Date['now']()+0x36ee80;_0x43f34b[a5_0x2fb0('0x2d')](_0x4524e1=>{_0x177ac5(_0x4524e1,_0x179e70,_0x43f34b);});});},function sendForgotPasswordEmail(_0x19a6f3,_0x230929,_0x5822e6){const _0x1cba8e=nodemailer_1[a5_0x2fb0('0x15')][a5_0x2fb0('0x53')]({'service':'SendGrid','auth':{'user':process[a5_0x2fb0('0x54')]['SENDGRID_USER'],'pass':process[a5_0x2fb0('0x54')][a5_0x2fb0('0x56')]}});const _0x3ec04f={'to':_0x230929['email'],'from':a5_0x2fb0('0x67'),'subject':a5_0x2fb0('0x68'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0xc5353e[a5_0x2fb0('0x69')][a5_0x2fb0('0x6a')]+a5_0x2fb0('0x6b')+_0x19a6f3+a5_0x2fb0('0x6c')};_0x1cba8e[a5_0x2fb0('0x5b')](_0x3ec04f,_0x15800c=>{_0xc5353e[a5_0x2fb0('0x13')](a5_0x2fb0('0x43'),{'msg':a5_0x2fb0('0x6d')+_0x230929[a5_0x2fb0('0x11')]+a5_0x2fb0('0x6e')});_0x5822e6(_0x15800c);});}],_0x259684=>{if(_0x259684){return _0x120042(_0x259684);}_0xe54de4[a5_0x2fb0('0x8')](a5_0x2fb0('0x61'));});};