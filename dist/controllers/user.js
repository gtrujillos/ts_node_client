var a5_0x1bac=['user','profile','name','gender','location','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','provider','findById','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','waterfall','params','now','back','passwordResetToken','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','/forgot','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','getLogin','render','account/login','postLogin','assert','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','email','normalizeEmail','validationErrors','flash','errors','redirect','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','len','confirmPassword','Passwords\x20do\x20not\x20match','sanitize','/signup','body','findOne','save','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account'];(function(_0x16e345,_0x4f2880){var _0x56bc11=function(_0x3c9da5){while(--_0x3c9da5){_0x16e345['push'](_0x16e345['shift']());}};_0x56bc11(++_0x4f2880);}(a5_0x1bac,0xa7));var a5_0x5bb4=function(_0x395f9a,_0x3de6bb){_0x395f9a=_0x395f9a-0x0;var _0x1a10f3=a5_0x1bac[_0x395f9a];return _0x1a10f3;};'use strict';var __importDefault=this&&this[a5_0x5bb4('0x0')]||function(_0x3ba84c){return _0x3ba84c&&_0x3ba84c[a5_0x5bb4('0x1')]?_0x3ba84c:{'default':_0x3ba84c};};Object[a5_0x5bb4('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x5bb4('0x3')));const crypto_1=__importDefault(require(a5_0x5bb4('0x4')));const nodemailer_1=__importDefault(require(a5_0x5bb4('0x5')));const passport_1=__importDefault(require(a5_0x5bb4('0x6')));const User_1=__importDefault(require('../models/User'));const request=require('express-validator');exports[a5_0x5bb4('0x7')]=(_0x372ebc,_0x170d8b)=>{if(_0x372ebc['user']){return _0x170d8b['redirect']('/');}_0x170d8b[a5_0x5bb4('0x8')](a5_0x5bb4('0x9'),{'title':'Login'});};exports[a5_0x5bb4('0xa')]=(_0x2c702c,_0x2ed715,_0x2fd03e)=>{_0x2c702c[a5_0x5bb4('0xb')]('email','Email\x20is\x20not\x20valid')[a5_0x5bb4('0xc')]();_0x2c702c[a5_0x5bb4('0xb')](a5_0x5bb4('0xd'),a5_0x5bb4('0xe'))[a5_0x5bb4('0xf')]();_0x2c702c['sanitize'](a5_0x5bb4('0x10'))[a5_0x5bb4('0x11')]({'gmail_remove_dots':![]});const _0xa20b5c=_0x2c702c[a5_0x5bb4('0x12')]();if(_0xa20b5c){_0x2c702c[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),_0xa20b5c);return _0x2ed715[a5_0x5bb4('0x15')](a5_0x5bb4('0x16'));}passport_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x18')](a5_0x5bb4('0x19'),(_0x2a8262,_0x2929f1,_0x144271)=>{if(_0x2a8262){return _0x2fd03e(_0x2a8262);}if(!_0x2929f1){_0x2c702c[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),_0x144271[a5_0x5bb4('0x1a')]);return _0x2ed715[a5_0x5bb4('0x15')](a5_0x5bb4('0x16'));}_0x2c702c[a5_0x5bb4('0x1b')](_0x2929f1,_0x2a8262=>{if(_0x2a8262){return _0x2fd03e(_0x2a8262);}_0x2c702c[a5_0x5bb4('0x13')](a5_0x5bb4('0x1c'),{'msg':a5_0x5bb4('0x1d')});_0x2ed715[a5_0x5bb4('0x15')](_0x2c702c[a5_0x5bb4('0x1e')]['returnTo']||'/');});})(_0x2c702c,_0x2ed715,_0x2fd03e);};exports['logout']=(_0x558b4f,_0x42030d)=>{_0x558b4f[a5_0x5bb4('0x1f')]();_0x42030d[a5_0x5bb4('0x15')]('/');};exports[a5_0x5bb4('0x20')]=(_0x5dcab7,_0x2c4440)=>{if(_0x5dcab7['user']){return _0x2c4440['redirect']('/');}_0x2c4440[a5_0x5bb4('0x8')]('account/signup',{'title':a5_0x5bb4('0x21')});};exports[a5_0x5bb4('0x22')]=(_0x2da257,_0x49064c,_0x23bc34)=>{_0x2da257[a5_0x5bb4('0xb')](a5_0x5bb4('0x10'),a5_0x5bb4('0x23'))[a5_0x5bb4('0xc')]();_0x2da257[a5_0x5bb4('0xb')](a5_0x5bb4('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5bb4('0x24')]({'min':0x4});_0x2da257[a5_0x5bb4('0xb')](a5_0x5bb4('0x25'),a5_0x5bb4('0x26'))['equals'](_0x2da257['body'][a5_0x5bb4('0xd')]);_0x2da257[a5_0x5bb4('0x27')](a5_0x5bb4('0x10'))[a5_0x5bb4('0x11')]({'gmail_remove_dots':![]});const _0x491e6f=_0x2da257[a5_0x5bb4('0x12')]();if(_0x491e6f){_0x2da257[a5_0x5bb4('0x13')]('errors',_0x491e6f);return _0x49064c[a5_0x5bb4('0x15')](a5_0x5bb4('0x28'));}const _0x2e3d4d=new User_1[(a5_0x5bb4('0x17'))]({'email':_0x2da257[a5_0x5bb4('0x29')][a5_0x5bb4('0x10')],'password':_0x2da257[a5_0x5bb4('0x29')][a5_0x5bb4('0xd')]});User_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x2a')]({'email':_0x2da257[a5_0x5bb4('0x29')]['email']},(_0x15a667,_0x1bdde9)=>{if(_0x15a667){return _0x23bc34(_0x15a667);}if(_0x1bdde9){_0x2da257['flash'](a5_0x5bb4('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x49064c[a5_0x5bb4('0x15')]('/signup');}_0x2e3d4d[a5_0x5bb4('0x2b')](_0x15a667=>{if(_0x15a667){return _0x23bc34(_0x15a667);}_0x2da257[a5_0x5bb4('0x1b')](_0x2e3d4d,_0x15a667=>{if(_0x15a667){return _0x23bc34(_0x15a667);}_0x49064c['redirect']('/');});});});};exports['getAccount']=(_0x17c374,_0x38a315)=>{_0x38a315[a5_0x5bb4('0x8')]('account/profile',{'title':a5_0x5bb4('0x2c')});};exports['postUpdateProfile']=(_0x350cd3,_0x21755d,_0x16cf08)=>{_0x350cd3['assert'](a5_0x5bb4('0x10'),a5_0x5bb4('0x2d'))[a5_0x5bb4('0xc')]();_0x350cd3[a5_0x5bb4('0x27')](a5_0x5bb4('0x10'))[a5_0x5bb4('0x11')]({'gmail_remove_dots':![]});const _0x49b882=_0x350cd3['validationErrors']();if(_0x49b882){_0x350cd3[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),_0x49b882);return _0x21755d[a5_0x5bb4('0x15')](a5_0x5bb4('0x2e'));}User_1[a5_0x5bb4('0x17')]['findById'](_0x350cd3[a5_0x5bb4('0x2f')]['id'],(_0x20349e,_0xca8ae9)=>{if(_0x20349e){return _0x16cf08(_0x20349e);}_0xca8ae9[a5_0x5bb4('0x10')]=_0x350cd3[a5_0x5bb4('0x29')]['email']||'';_0xca8ae9[a5_0x5bb4('0x30')][a5_0x5bb4('0x31')]=_0x350cd3[a5_0x5bb4('0x29')][a5_0x5bb4('0x31')]||'';_0xca8ae9[a5_0x5bb4('0x30')][a5_0x5bb4('0x32')]=_0x350cd3[a5_0x5bb4('0x29')]['gender']||'';_0xca8ae9[a5_0x5bb4('0x30')][a5_0x5bb4('0x33')]=_0x350cd3[a5_0x5bb4('0x29')][a5_0x5bb4('0x33')]||'';_0xca8ae9[a5_0x5bb4('0x30')]['website']=_0x350cd3['body']['website']||'';_0xca8ae9['save'](_0x20349e=>{if(_0x20349e){if(_0x20349e[a5_0x5bb4('0x34')]===0x2af8){_0x350cd3[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),{'msg':a5_0x5bb4('0x35')});return _0x21755d['redirect'](a5_0x5bb4('0x2e'));}return _0x16cf08(_0x20349e);}_0x350cd3[a5_0x5bb4('0x13')]('success',{'msg':a5_0x5bb4('0x36')});_0x21755d['redirect'](a5_0x5bb4('0x2e'));});});};exports['postUpdatePassword']=(_0x3a68c9,_0x29a2a4,_0x56a511)=>{_0x3a68c9[a5_0x5bb4('0xb')](a5_0x5bb4('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5bb4('0x24')]({'min':0x4});_0x3a68c9[a5_0x5bb4('0xb')](a5_0x5bb4('0x25'),a5_0x5bb4('0x26'))[a5_0x5bb4('0x37')](_0x3a68c9[a5_0x5bb4('0x29')]['password']);const _0x24bb97=_0x3a68c9[a5_0x5bb4('0x12')]();if(_0x24bb97){_0x3a68c9[a5_0x5bb4('0x13')]('errors',_0x24bb97);return _0x29a2a4[a5_0x5bb4('0x15')](a5_0x5bb4('0x2e'));}User_1[a5_0x5bb4('0x17')]['findById'](_0x3a68c9[a5_0x5bb4('0x2f')]['id'],(_0x59d188,_0x52cd5c)=>{if(_0x59d188){return _0x56a511(_0x59d188);}_0x52cd5c['password']=_0x3a68c9[a5_0x5bb4('0x29')][a5_0x5bb4('0xd')];_0x52cd5c['save'](_0x59d188=>{if(_0x59d188){return _0x56a511(_0x59d188);}_0x3a68c9[a5_0x5bb4('0x13')]('success',{'msg':a5_0x5bb4('0x38')});_0x29a2a4[a5_0x5bb4('0x15')](a5_0x5bb4('0x2e'));});});};exports[a5_0x5bb4('0x39')]=(_0x2cef94,_0x569e02,_0x330fe7)=>{User_1['default']['remove']({'_id':_0x2cef94[a5_0x5bb4('0x2f')]['id']},_0x3a6791=>{if(_0x3a6791){return _0x330fe7(_0x3a6791);}_0x2cef94[a5_0x5bb4('0x1f')]();_0x2cef94[a5_0x5bb4('0x13')](a5_0x5bb4('0x3a'),{'msg':a5_0x5bb4('0x3b')});_0x569e02['redirect']('/');});};exports['getOauthUnlink']=(_0x502eff,_0xf54a1f,_0x332e84)=>{const _0x2bd700=_0x502eff['params'][a5_0x5bb4('0x3c')];User_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x3d')](_0x502eff[a5_0x5bb4('0x2f')]['id'],(_0xdd6519,_0x7ba10f)=>{if(_0xdd6519){return _0x332e84(_0xdd6519);}_0x7ba10f[_0x2bd700]=undefined;_0x7ba10f[a5_0x5bb4('0x3e')]=_0x7ba10f[a5_0x5bb4('0x3e')][a5_0x5bb4('0x3f')](_0x38085c=>_0x38085c[a5_0x5bb4('0x40')]!==_0x2bd700);_0x7ba10f[a5_0x5bb4('0x2b')](_0xdd6519=>{if(_0xdd6519){return _0x332e84(_0xdd6519);}_0x502eff[a5_0x5bb4('0x13')](a5_0x5bb4('0x3a'),{'msg':_0x2bd700+a5_0x5bb4('0x41')});_0xf54a1f[a5_0x5bb4('0x15')](a5_0x5bb4('0x2e'));});});};exports[a5_0x5bb4('0x42')]=(_0x3ff7c4,_0x5b27a4,_0x4acf54)=>{if(_0x3ff7c4[a5_0x5bb4('0x43')]()){return _0x5b27a4[a5_0x5bb4('0x15')]('/');}User_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x2a')]({'passwordResetToken':_0x3ff7c4['params'][a5_0x5bb4('0x44')]})[a5_0x5bb4('0x45')](a5_0x5bb4('0x46'))['gt'](Date['now']())[a5_0x5bb4('0x47')]((_0x18c728,_0x14b701)=>{if(_0x18c728){return _0x4acf54(_0x18c728);}if(!_0x14b701){_0x3ff7c4[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),{'msg':a5_0x5bb4('0x48')});return _0x5b27a4[a5_0x5bb4('0x15')]('/forgot');}_0x5b27a4[a5_0x5bb4('0x8')](a5_0x5bb4('0x49'),{'title':a5_0x5bb4('0x4a')});});};exports[a5_0x5bb4('0x4b')]=(_0x21fe00,_0x316fbd,_0x3ebabb)=>{_0x21fe00['assert']('password',a5_0x5bb4('0x4c'))[a5_0x5bb4('0x24')]({'min':0x4});_0x21fe00[a5_0x5bb4('0xb')]('confirm',a5_0x5bb4('0x4d'))['equals'](_0x21fe00[a5_0x5bb4('0x29')][a5_0x5bb4('0xd')]);const _0x42d4dd=_0x21fe00[a5_0x5bb4('0x12')]();if(_0x42d4dd){_0x21fe00[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),_0x42d4dd);return _0x316fbd[a5_0x5bb4('0x15')]('back');}async_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x4e')]([function resetPassword(_0x97c584){User_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x2a')]({'passwordResetToken':_0x21fe00[a5_0x5bb4('0x4f')][a5_0x5bb4('0x44')]})[a5_0x5bb4('0x45')](a5_0x5bb4('0x46'))['gt'](Date[a5_0x5bb4('0x50')]())[a5_0x5bb4('0x47')]((_0x4c4339,_0x34cc0a)=>{if(_0x4c4339){return _0x3ebabb(_0x4c4339);}if(!_0x34cc0a){_0x21fe00[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),{'msg':a5_0x5bb4('0x48')});return _0x316fbd['redirect'](a5_0x5bb4('0x51'));}_0x34cc0a['password']=_0x21fe00[a5_0x5bb4('0x29')][a5_0x5bb4('0xd')];_0x34cc0a[a5_0x5bb4('0x52')]=undefined;_0x34cc0a['passwordResetExpires']=undefined;_0x34cc0a['save'](_0x4c4339=>{if(_0x4c4339){return _0x3ebabb(_0x4c4339);}_0x21fe00[a5_0x5bb4('0x1b')](_0x34cc0a,_0x4c4339=>{_0x97c584(_0x4c4339,_0x34cc0a);});});});},function sendResetPasswordEmail(_0x194238,_0x4b65c7){const _0x247c3d=nodemailer_1[a5_0x5bb4('0x17')]['createTransport']({'service':a5_0x5bb4('0x53'),'auth':{'user':process[a5_0x5bb4('0x54')][a5_0x5bb4('0x55')],'pass':process[a5_0x5bb4('0x54')]['SENDGRID_PASSWORD']}});const _0x8d27a5={'to':_0x194238[a5_0x5bb4('0x10')],'from':a5_0x5bb4('0x56'),'subject':a5_0x5bb4('0x57'),'text':a5_0x5bb4('0x58')+_0x194238[a5_0x5bb4('0x10')]+a5_0x5bb4('0x59')};_0x247c3d[a5_0x5bb4('0x5a')](_0x8d27a5,_0x17931c=>{_0x21fe00[a5_0x5bb4('0x13')](a5_0x5bb4('0x1c'),{'msg':a5_0x5bb4('0x5b')});_0x4b65c7(_0x17931c);});}],_0x2d67e8=>{if(_0x2d67e8){return _0x3ebabb(_0x2d67e8);}_0x316fbd['redirect']('/');});};exports[a5_0x5bb4('0x5c')]=(_0x114221,_0x3e4104)=>{if(_0x114221[a5_0x5bb4('0x43')]()){return _0x3e4104[a5_0x5bb4('0x15')]('/');}_0x3e4104['render'](a5_0x5bb4('0x5d'),{'title':a5_0x5bb4('0x5e')});};exports[a5_0x5bb4('0x5f')]=(_0x10ac9f,_0x5c88f1,_0x1d395e)=>{_0x10ac9f[a5_0x5bb4('0xb')]('email',a5_0x5bb4('0x2d'))[a5_0x5bb4('0xc')]();_0x10ac9f[a5_0x5bb4('0x27')](a5_0x5bb4('0x10'))[a5_0x5bb4('0x11')]({'gmail_remove_dots':![]});const _0x5a9516=_0x10ac9f[a5_0x5bb4('0x12')]();if(_0x5a9516){_0x10ac9f[a5_0x5bb4('0x13')](a5_0x5bb4('0x14'),_0x5a9516);return _0x5c88f1[a5_0x5bb4('0x15')](a5_0x5bb4('0x60'));}async_1['default'][a5_0x5bb4('0x4e')]([function createRandomToken(_0x3caa57){crypto_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x61')](0x10,(_0x63cd5c,_0x31d14e)=>{const _0x59c57a=_0x31d14e['toString']('hex');_0x3caa57(_0x63cd5c,_0x59c57a);});},function setRandomToken(_0x52fe65,_0x7c1cb8){User_1[a5_0x5bb4('0x17')][a5_0x5bb4('0x2a')]({'email':_0x10ac9f['body'][a5_0x5bb4('0x10')]},(_0x595b73,_0x368108)=>{if(_0x595b73){return _0x7c1cb8(_0x595b73);}if(!_0x368108){_0x10ac9f[a5_0x5bb4('0x13')]('errors',{'msg':a5_0x5bb4('0x62')});return _0x5c88f1['redirect']('/forgot');}_0x368108[a5_0x5bb4('0x52')]=_0x52fe65;_0x368108[a5_0x5bb4('0x46')]=Date[a5_0x5bb4('0x50')]()+0x36ee80;_0x368108[a5_0x5bb4('0x2b')](_0x595b73=>{_0x7c1cb8(_0x595b73,_0x52fe65,_0x368108);});});},function sendForgotPasswordEmail(_0x3ffd37,_0x18ca05,_0x1fd210){const _0x237ef0=nodemailer_1[a5_0x5bb4('0x17')]['createTransport']({'service':a5_0x5bb4('0x53'),'auth':{'user':process[a5_0x5bb4('0x54')]['SENDGRID_USER'],'pass':process['env'][a5_0x5bb4('0x63')]}});const _0x164bac={'to':_0x18ca05[a5_0x5bb4('0x10')],'from':a5_0x5bb4('0x64'),'subject':a5_0x5bb4('0x65'),'text':a5_0x5bb4('0x66')+_0x10ac9f[a5_0x5bb4('0x67')]['host']+a5_0x5bb4('0x68')+_0x3ffd37+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x237ef0[a5_0x5bb4('0x5a')](_0x164bac,_0x1d1491=>{_0x10ac9f[a5_0x5bb4('0x13')](a5_0x5bb4('0x3a'),{'msg':a5_0x5bb4('0x69')+_0x18ca05['email']+a5_0x5bb4('0x6a')});_0x1fd210(_0x1d1491);});}],_0x4ce49a=>{if(_0x4ce49a){return _0x1d395e(_0x4ce49a);}_0x5c88f1[a5_0x5bb4('0x15')]('/forgot');});};