var a5_0x217f=['postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Passwords\x20do\x20not\x20match','equals','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','waterfall','token','where','passwordResetExpires','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','Forgot\x20Password','postForgot','/forgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','normalizeEmail','flash','/login','default','authenticate','local','message','success','session','logout','getSignup','account/signup','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','body','sanitize','validationErrors','/signup','findOne','errors','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','Account\x20Management'];(function(_0x233cca,_0x511b96){var _0xbddac3=function(_0x216a1d){while(--_0x216a1d){_0x233cca['push'](_0x233cca['shift']());}};_0xbddac3(++_0x511b96);}(a5_0x217f,0x11e));var a5_0x5f43=function(_0x24d786,_0x138ee5){_0x24d786=_0x24d786-0x0;var _0x36dd93=a5_0x217f[_0x24d786];return _0x36dd93;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x226775){return _0x226775&&_0x226775[a5_0x5f43('0x0')]?_0x226775:{'default':_0x226775};};Object[a5_0x5f43('0x1')](exports,a5_0x5f43('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x5f43('0x2')));const crypto_1=__importDefault(require(a5_0x5f43('0x3')));const nodemailer_1=__importDefault(require(a5_0x5f43('0x4')));const passport_1=__importDefault(require(a5_0x5f43('0x5')));const User_1=__importDefault(require(a5_0x5f43('0x6')));const request=require(a5_0x5f43('0x7'));exports[a5_0x5f43('0x8')]=(_0x283ee2,_0x17e8f7)=>{if(_0x283ee2[a5_0x5f43('0x9')]){return _0x17e8f7[a5_0x5f43('0xa')]('/');}_0x17e8f7[a5_0x5f43('0xb')](a5_0x5f43('0xc'),{'title':a5_0x5f43('0xd')});};exports[a5_0x5f43('0xe')]=(_0x59ba6f,_0x48b752,_0x1eb176)=>{_0x59ba6f[a5_0x5f43('0xf')](a5_0x5f43('0x10'),a5_0x5f43('0x11'))[a5_0x5f43('0x12')]();_0x59ba6f['assert'](a5_0x5f43('0x13'),'Password\x20cannot\x20be\x20blank')[a5_0x5f43('0x14')]();_0x59ba6f['sanitize'](a5_0x5f43('0x10'))[a5_0x5f43('0x15')]({'gmail_remove_dots':![]});const _0x24d878=_0x59ba6f['validationErrors']();if(_0x24d878){_0x59ba6f[a5_0x5f43('0x16')]('errors',_0x24d878);return _0x48b752[a5_0x5f43('0xa')](a5_0x5f43('0x17'));}passport_1[a5_0x5f43('0x18')][a5_0x5f43('0x19')](a5_0x5f43('0x1a'),(_0x57e361,_0x5c636a,_0x5a8c44)=>{if(_0x57e361){return _0x1eb176(_0x57e361);}if(!_0x5c636a){_0x59ba6f['flash']('errors',_0x5a8c44[a5_0x5f43('0x1b')]);return _0x48b752[a5_0x5f43('0xa')](a5_0x5f43('0x17'));}_0x59ba6f['logIn'](_0x5c636a,_0x57e361=>{if(_0x57e361){return _0x1eb176(_0x57e361);}_0x59ba6f['flash'](a5_0x5f43('0x1c'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x48b752[a5_0x5f43('0xa')](_0x59ba6f[a5_0x5f43('0x1d')]['returnTo']||'/');});})(_0x59ba6f,_0x48b752,_0x1eb176);};exports[a5_0x5f43('0x1e')]=(_0x51e35f,_0x5926a1)=>{_0x51e35f[a5_0x5f43('0x1e')]();_0x5926a1[a5_0x5f43('0xa')]('/');};exports[a5_0x5f43('0x1f')]=(_0x595f08,_0x36e72e)=>{if(_0x595f08['user']){return _0x36e72e[a5_0x5f43('0xa')]('/');}_0x36e72e[a5_0x5f43('0xb')](a5_0x5f43('0x20'),{'title':a5_0x5f43('0x21')});};exports['postSignup']=(_0x3269b8,_0x39eeb9,_0x39fd85)=>{_0x3269b8[a5_0x5f43('0xf')](a5_0x5f43('0x10'),a5_0x5f43('0x11'))[a5_0x5f43('0x12')]();_0x3269b8['assert']('password',a5_0x5f43('0x22'))[a5_0x5f43('0x23')]({'min':0x4});_0x3269b8[a5_0x5f43('0xf')]('confirmPassword','Passwords\x20do\x20not\x20match')['equals'](_0x3269b8[a5_0x5f43('0x24')][a5_0x5f43('0x13')]);_0x3269b8[a5_0x5f43('0x25')](a5_0x5f43('0x10'))[a5_0x5f43('0x15')]({'gmail_remove_dots':![]});const _0x3e2545=_0x3269b8[a5_0x5f43('0x26')]();if(_0x3e2545){_0x3269b8[a5_0x5f43('0x16')]('errors',_0x3e2545);return _0x39eeb9[a5_0x5f43('0xa')](a5_0x5f43('0x27'));}const _0x358d07=new User_1[(a5_0x5f43('0x18'))]({'email':_0x3269b8[a5_0x5f43('0x24')][a5_0x5f43('0x10')],'password':_0x3269b8[a5_0x5f43('0x24')]['password']});User_1[a5_0x5f43('0x18')][a5_0x5f43('0x28')]({'email':_0x3269b8[a5_0x5f43('0x24')][a5_0x5f43('0x10')]},(_0x4b8143,_0x410679)=>{if(_0x4b8143){return _0x39fd85(_0x4b8143);}if(_0x410679){_0x3269b8[a5_0x5f43('0x16')](a5_0x5f43('0x29'),{'msg':a5_0x5f43('0x2a')});return _0x39eeb9[a5_0x5f43('0xa')](a5_0x5f43('0x27'));}_0x358d07[a5_0x5f43('0x2b')](_0x4b8143=>{if(_0x4b8143){return _0x39fd85(_0x4b8143);}_0x3269b8[a5_0x5f43('0x2c')](_0x358d07,_0x4b8143=>{if(_0x4b8143){return _0x39fd85(_0x4b8143);}_0x39eeb9['redirect']('/');});});});};exports[a5_0x5f43('0x2d')]=(_0x5b648d,_0x34e027)=>{_0x34e027['render']('account/profile',{'title':a5_0x5f43('0x2e')});};exports[a5_0x5f43('0x2f')]=(_0x4419f3,_0x471a1e,_0xf08b9)=>{_0x4419f3[a5_0x5f43('0xf')]('email',a5_0x5f43('0x30'))[a5_0x5f43('0x12')]();_0x4419f3[a5_0x5f43('0x25')](a5_0x5f43('0x10'))[a5_0x5f43('0x15')]({'gmail_remove_dots':![]});const _0x1318be=_0x4419f3[a5_0x5f43('0x26')]();if(_0x1318be){_0x4419f3[a5_0x5f43('0x16')](a5_0x5f43('0x29'),_0x1318be);return _0x471a1e[a5_0x5f43('0xa')](a5_0x5f43('0x31'));}User_1[a5_0x5f43('0x18')][a5_0x5f43('0x32')](_0x4419f3[a5_0x5f43('0x9')]['id'],(_0x135671,_0x149db4)=>{if(_0x135671){return _0xf08b9(_0x135671);}_0x149db4['email']=_0x4419f3[a5_0x5f43('0x24')][a5_0x5f43('0x10')]||'';_0x149db4[a5_0x5f43('0x33')][a5_0x5f43('0x34')]=_0x4419f3[a5_0x5f43('0x24')][a5_0x5f43('0x34')]||'';_0x149db4[a5_0x5f43('0x33')]['gender']=_0x4419f3[a5_0x5f43('0x24')]['gender']||'';_0x149db4[a5_0x5f43('0x33')][a5_0x5f43('0x35')]=_0x4419f3[a5_0x5f43('0x24')][a5_0x5f43('0x35')]||'';_0x149db4[a5_0x5f43('0x33')]['website']=_0x4419f3[a5_0x5f43('0x24')][a5_0x5f43('0x36')]||'';_0x149db4[a5_0x5f43('0x2b')](_0x135671=>{if(_0x135671){if(_0x135671[a5_0x5f43('0x37')]===0x2af8){_0x4419f3[a5_0x5f43('0x16')](a5_0x5f43('0x29'),{'msg':a5_0x5f43('0x38')});return _0x471a1e[a5_0x5f43('0xa')](a5_0x5f43('0x31'));}return _0xf08b9(_0x135671);}_0x4419f3['flash'](a5_0x5f43('0x1c'),{'msg':a5_0x5f43('0x39')});_0x471a1e[a5_0x5f43('0xa')](a5_0x5f43('0x31'));});});};exports[a5_0x5f43('0x3a')]=(_0x33140d,_0x27cf6c,_0x3ce404)=>{_0x33140d[a5_0x5f43('0xf')](a5_0x5f43('0x13'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5f43('0x23')]({'min':0x4});_0x33140d[a5_0x5f43('0xf')](a5_0x5f43('0x3b'),a5_0x5f43('0x3c'))[a5_0x5f43('0x3d')](_0x33140d['body'][a5_0x5f43('0x13')]);const _0x9991bd=_0x33140d[a5_0x5f43('0x26')]();if(_0x9991bd){_0x33140d['flash'](a5_0x5f43('0x29'),_0x9991bd);return _0x27cf6c['redirect'](a5_0x5f43('0x31'));}User_1[a5_0x5f43('0x18')][a5_0x5f43('0x32')](_0x33140d[a5_0x5f43('0x9')]['id'],(_0x186606,_0x41e286)=>{if(_0x186606){return _0x3ce404(_0x186606);}_0x41e286[a5_0x5f43('0x13')]=_0x33140d['body']['password'];_0x41e286[a5_0x5f43('0x2b')](_0x186606=>{if(_0x186606){return _0x3ce404(_0x186606);}_0x33140d[a5_0x5f43('0x16')]('success',{'msg':a5_0x5f43('0x3e')});_0x27cf6c['redirect'](a5_0x5f43('0x31'));});});};exports['postDeleteAccount']=(_0x57abef,_0x2c21d3,_0xac7356)=>{User_1[a5_0x5f43('0x18')][a5_0x5f43('0x3f')]({'_id':_0x57abef[a5_0x5f43('0x9')]['id']},_0x3481f7=>{if(_0x3481f7){return _0xac7356(_0x3481f7);}_0x57abef[a5_0x5f43('0x1e')]();_0x57abef[a5_0x5f43('0x16')](a5_0x5f43('0x40'),{'msg':a5_0x5f43('0x41')});_0x2c21d3['redirect']('/');});};exports[a5_0x5f43('0x42')]=(_0x442806,_0x44a921,_0x40d2df)=>{const _0x545046=_0x442806[a5_0x5f43('0x43')][a5_0x5f43('0x44')];User_1['default'][a5_0x5f43('0x32')](_0x442806[a5_0x5f43('0x9')]['id'],(_0x456c86,_0x4dc8ca)=>{if(_0x456c86){return _0x40d2df(_0x456c86);}_0x4dc8ca[_0x545046]=undefined;_0x4dc8ca[a5_0x5f43('0x45')]=_0x4dc8ca[a5_0x5f43('0x45')]['filter'](_0x5bc848=>_0x5bc848[a5_0x5f43('0x46')]!==_0x545046);_0x4dc8ca[a5_0x5f43('0x2b')](_0x456c86=>{if(_0x456c86){return _0x40d2df(_0x456c86);}_0x442806['flash'](a5_0x5f43('0x40'),{'msg':_0x545046+a5_0x5f43('0x47')});_0x44a921[a5_0x5f43('0xa')]('/account');});});};exports[a5_0x5f43('0x48')]=(_0x4d23a3,_0x3cfdd5,_0x1b075a)=>{if(_0x4d23a3[a5_0x5f43('0x49')]()){return _0x3cfdd5[a5_0x5f43('0xa')]('/');}User_1[a5_0x5f43('0x18')]['findOne']({'passwordResetToken':_0x4d23a3['params']['token']})['where']('passwordResetExpires')['gt'](Date[a5_0x5f43('0x4a')]())[a5_0x5f43('0x4b')]((_0x137659,_0x19ec2a)=>{if(_0x137659){return _0x1b075a(_0x137659);}if(!_0x19ec2a){_0x4d23a3[a5_0x5f43('0x16')](a5_0x5f43('0x29'),{'msg':a5_0x5f43('0x4c')});return _0x3cfdd5[a5_0x5f43('0xa')]('/forgot');}_0x3cfdd5[a5_0x5f43('0xb')](a5_0x5f43('0x4d'),{'title':'Password\x20Reset'});});};exports[a5_0x5f43('0x4e')]=(_0x435fc7,_0x27cb3a,_0x42ab1a)=>{_0x435fc7['assert'](a5_0x5f43('0x13'),a5_0x5f43('0x4f'))['len']({'min':0x4});_0x435fc7[a5_0x5f43('0xf')]('confirm',a5_0x5f43('0x50'))[a5_0x5f43('0x3d')](_0x435fc7['body'][a5_0x5f43('0x13')]);const _0x199d1c=_0x435fc7[a5_0x5f43('0x26')]();if(_0x199d1c){_0x435fc7[a5_0x5f43('0x16')](a5_0x5f43('0x29'),_0x199d1c);return _0x27cb3a[a5_0x5f43('0xa')](a5_0x5f43('0x51'));}async_1[a5_0x5f43('0x18')][a5_0x5f43('0x52')]([function resetPassword(_0x5c11e7){User_1[a5_0x5f43('0x18')][a5_0x5f43('0x28')]({'passwordResetToken':_0x435fc7['params'][a5_0x5f43('0x53')]})[a5_0x5f43('0x54')]('passwordResetExpires')['gt'](Date[a5_0x5f43('0x4a')]())['exec']((_0x1aa763,_0x425843)=>{if(_0x1aa763){return _0x42ab1a(_0x1aa763);}if(!_0x425843){_0x435fc7['flash'](a5_0x5f43('0x29'),{'msg':a5_0x5f43('0x4c')});return _0x27cb3a['redirect'](a5_0x5f43('0x51'));}_0x425843[a5_0x5f43('0x13')]=_0x435fc7[a5_0x5f43('0x24')][a5_0x5f43('0x13')];_0x425843['passwordResetToken']=undefined;_0x425843[a5_0x5f43('0x55')]=undefined;_0x425843[a5_0x5f43('0x2b')](_0x1aa763=>{if(_0x1aa763){return _0x42ab1a(_0x1aa763);}_0x435fc7['logIn'](_0x425843,_0x1aa763=>{_0x5c11e7(_0x1aa763,_0x425843);});});});},function sendResetPasswordEmail(_0x19f6a5,_0x3da07e){const _0x486d71=nodemailer_1[a5_0x5f43('0x18')][a5_0x5f43('0x56')]({'service':a5_0x5f43('0x57'),'auth':{'user':process[a5_0x5f43('0x58')][a5_0x5f43('0x59')],'pass':process[a5_0x5f43('0x58')][a5_0x5f43('0x5a')]}});const _0x227474={'to':_0x19f6a5[a5_0x5f43('0x10')],'from':a5_0x5f43('0x5b'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x5f43('0x5c')+_0x19f6a5['email']+a5_0x5f43('0x5d')};_0x486d71[a5_0x5f43('0x5e')](_0x227474,_0x56f342=>{_0x435fc7[a5_0x5f43('0x16')](a5_0x5f43('0x1c'),{'msg':a5_0x5f43('0x5f')});_0x3da07e(_0x56f342);});}],_0x33f5b6=>{if(_0x33f5b6){return _0x42ab1a(_0x33f5b6);}_0x27cb3a[a5_0x5f43('0xa')]('/');});};exports['getForgot']=(_0x56ce06,_0x1083f1)=>{if(_0x56ce06[a5_0x5f43('0x49')]()){return _0x1083f1['redirect']('/');}_0x1083f1[a5_0x5f43('0xb')]('account/forgot',{'title':a5_0x5f43('0x60')});};exports[a5_0x5f43('0x61')]=(_0x802475,_0x48c1bd,_0x4683fd)=>{_0x802475[a5_0x5f43('0xf')](a5_0x5f43('0x10'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x802475[a5_0x5f43('0x25')](a5_0x5f43('0x10'))[a5_0x5f43('0x15')]({'gmail_remove_dots':![]});const _0x1f6ca2=_0x802475[a5_0x5f43('0x26')]();if(_0x1f6ca2){_0x802475['flash'](a5_0x5f43('0x29'),_0x1f6ca2);return _0x48c1bd['redirect'](a5_0x5f43('0x62'));}async_1[a5_0x5f43('0x18')][a5_0x5f43('0x52')]([function createRandomToken(_0x277c2e){crypto_1[a5_0x5f43('0x18')][a5_0x5f43('0x63')](0x10,(_0x3c01b0,_0x4cbfa7)=>{const _0x393382=_0x4cbfa7[a5_0x5f43('0x64')](a5_0x5f43('0x65'));_0x277c2e(_0x3c01b0,_0x393382);});},function setRandomToken(_0x362fe1,_0x5cad0d){User_1[a5_0x5f43('0x18')][a5_0x5f43('0x28')]({'email':_0x802475[a5_0x5f43('0x24')]['email']},(_0x4b88b4,_0x359f98)=>{if(_0x4b88b4){return _0x5cad0d(_0x4b88b4);}if(!_0x359f98){_0x802475['flash'](a5_0x5f43('0x29'),{'msg':a5_0x5f43('0x66')});return _0x48c1bd[a5_0x5f43('0xa')](a5_0x5f43('0x62'));}_0x359f98[a5_0x5f43('0x67')]=_0x362fe1;_0x359f98[a5_0x5f43('0x55')]=Date['now']()+0x36ee80;_0x359f98[a5_0x5f43('0x2b')](_0x4b88b4=>{_0x5cad0d(_0x4b88b4,_0x362fe1,_0x359f98);});});},function sendForgotPasswordEmail(_0x41aee3,_0x1f52a5,_0x290bb4){const _0x1c8735=nodemailer_1[a5_0x5f43('0x18')][a5_0x5f43('0x56')]({'service':a5_0x5f43('0x57'),'auth':{'user':process[a5_0x5f43('0x58')][a5_0x5f43('0x59')],'pass':process[a5_0x5f43('0x58')][a5_0x5f43('0x5a')]}});const _0x557519={'to':_0x1f52a5[a5_0x5f43('0x10')],'from':a5_0x5f43('0x68'),'subject':a5_0x5f43('0x69'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x802475['headers'][a5_0x5f43('0x6a')]+a5_0x5f43('0x6b')+_0x41aee3+a5_0x5f43('0x6c')};_0x1c8735[a5_0x5f43('0x5e')](_0x557519,_0x1cd990=>{_0x802475['flash'](a5_0x5f43('0x40'),{'msg':a5_0x5f43('0x6d')+_0x1f52a5[a5_0x5f43('0x10')]+a5_0x5f43('0x6e')});_0x290bb4(_0x1cd990);});}],_0x26c638=>{if(_0x26c638){return _0x4683fd(_0x26c638);}_0x48c1bd[a5_0x5f43('0xa')]('/forgot');});};