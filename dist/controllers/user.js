var a5_0x3b7e=['/account','name','profile','gender','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','findById','Password\x20has\x20been\x20changed.','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','confirm','Passwords\x20must\x20match.','back','waterfall','where','passwordResetToken','SendGrid','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','env','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','normalizeEmail','validationErrors','flash','errors','/login','default','local','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','sanitize'];(function(_0x19666d,_0x3e1bca){var _0x119200=function(_0xc7424d){while(--_0xc7424d){_0x19666d['push'](_0x19666d['shift']());}};_0x119200(++_0x3e1bca);}(a5_0x3b7e,0xa6));var a5_0x5195=function(_0x4b8999,_0x12be14){_0x4b8999=_0x4b8999-0x0;var _0x262046=a5_0x3b7e[_0x4b8999];return _0x262046;};'use strict';var __importDefault=this&&this[a5_0x5195('0x0')]||function(_0x238eaa){return _0x238eaa&&_0x238eaa[a5_0x5195('0x1')]?_0x238eaa:{'default':_0x238eaa};};Object[a5_0x5195('0x2')](exports,a5_0x5195('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x5195('0x3')));const nodemailer_1=__importDefault(require(a5_0x5195('0x4')));const passport_1=__importDefault(require(a5_0x5195('0x5')));const User_1=__importDefault(require(a5_0x5195('0x6')));const request=require(a5_0x5195('0x7'));exports[a5_0x5195('0x8')]=(_0x2cf8b6,_0x406133)=>{if(_0x2cf8b6[a5_0x5195('0x9')]){return _0x406133[a5_0x5195('0xa')]('/');}_0x406133[a5_0x5195('0xb')](a5_0x5195('0xc'),{'title':a5_0x5195('0xd')});};exports[a5_0x5195('0xe')]=(_0x51a5d7,_0x1c17a6,_0x5a984a)=>{_0x51a5d7[a5_0x5195('0xf')](a5_0x5195('0x10'),a5_0x5195('0x11'))[a5_0x5195('0x12')]();_0x51a5d7[a5_0x5195('0xf')](a5_0x5195('0x13'),'Password\x20cannot\x20be\x20blank')[a5_0x5195('0x14')]();_0x51a5d7['sanitize'](a5_0x5195('0x10'))[a5_0x5195('0x15')]({'gmail_remove_dots':![]});const _0x39c92c=_0x51a5d7[a5_0x5195('0x16')]();if(_0x39c92c){_0x51a5d7[a5_0x5195('0x17')](a5_0x5195('0x18'),_0x39c92c);return _0x1c17a6[a5_0x5195('0xa')](a5_0x5195('0x19'));}passport_1[a5_0x5195('0x1a')]['authenticate'](a5_0x5195('0x1b'),(_0x43e0a5,_0x5a9bde,_0x3d8e97)=>{if(_0x43e0a5){return _0x5a984a(_0x43e0a5);}if(!_0x5a9bde){_0x51a5d7[a5_0x5195('0x17')](a5_0x5195('0x18'),_0x3d8e97['message']);return _0x1c17a6[a5_0x5195('0xa')](a5_0x5195('0x19'));}_0x51a5d7[a5_0x5195('0x1c')](_0x5a9bde,_0x43e0a5=>{if(_0x43e0a5){return _0x5a984a(_0x43e0a5);}_0x51a5d7['flash'](a5_0x5195('0x1d'),{'msg':a5_0x5195('0x1e')});_0x1c17a6['redirect'](_0x51a5d7[a5_0x5195('0x1f')][a5_0x5195('0x20')]||'/');});})(_0x51a5d7,_0x1c17a6,_0x5a984a);};exports[a5_0x5195('0x21')]=(_0x5b2f1b,_0x2221f8)=>{_0x5b2f1b[a5_0x5195('0x21')]();_0x2221f8[a5_0x5195('0xa')]('/');};exports[a5_0x5195('0x22')]=(_0x4fa7c4,_0x283343)=>{if(_0x4fa7c4[a5_0x5195('0x9')]){return _0x283343['redirect']('/');}_0x283343[a5_0x5195('0xb')](a5_0x5195('0x23'),{'title':a5_0x5195('0x24')});};exports[a5_0x5195('0x25')]=(_0x522dc3,_0x520369,_0x4029fc)=>{_0x522dc3[a5_0x5195('0xf')](a5_0x5195('0x10'),a5_0x5195('0x11'))['isEmail']();_0x522dc3[a5_0x5195('0xf')](a5_0x5195('0x13'),a5_0x5195('0x26'))[a5_0x5195('0x27')]({'min':0x4});_0x522dc3[a5_0x5195('0xf')](a5_0x5195('0x28'),a5_0x5195('0x29'))[a5_0x5195('0x2a')](_0x522dc3[a5_0x5195('0x2b')][a5_0x5195('0x13')]);_0x522dc3['sanitize'](a5_0x5195('0x10'))[a5_0x5195('0x15')]({'gmail_remove_dots':![]});const _0x3c942c=_0x522dc3[a5_0x5195('0x16')]();if(_0x3c942c){_0x522dc3['flash'](a5_0x5195('0x18'),_0x3c942c);return _0x520369['redirect'](a5_0x5195('0x2c'));}const _0x2fce71=new User_1['default']({});User_1[a5_0x5195('0x1a')]['findOne']({'email':_0x522dc3[a5_0x5195('0x2b')][a5_0x5195('0x10')]},(_0xeff4b2,_0xfe4468)=>{if(_0xeff4b2){return _0x4029fc(_0xeff4b2);}if(_0xfe4468){_0x522dc3['flash']('errors',{'msg':a5_0x5195('0x2d')});return _0x520369[a5_0x5195('0xa')]('/signup');}_0x2fce71['save'](_0xeff4b2=>{if(_0xeff4b2){return _0x4029fc(_0xeff4b2);}_0x522dc3[a5_0x5195('0x1c')](_0x2fce71,_0xeff4b2=>{if(_0xeff4b2){return _0x4029fc(_0xeff4b2);}_0x520369[a5_0x5195('0xa')]('/');});});});};exports[a5_0x5195('0x2e')]=(_0x2247f8,_0xed99f9)=>{_0xed99f9[a5_0x5195('0xb')](a5_0x5195('0x2f'),{'title':a5_0x5195('0x30')});};exports[a5_0x5195('0x31')]=(_0x42c276,_0x3bdd9b,_0x336fd5)=>{_0x42c276[a5_0x5195('0xf')](a5_0x5195('0x10'),a5_0x5195('0x32'))[a5_0x5195('0x12')]();_0x42c276[a5_0x5195('0x33')](a5_0x5195('0x10'))[a5_0x5195('0x15')]({'gmail_remove_dots':![]});const _0x514eee=_0x42c276['validationErrors']();if(_0x514eee){_0x42c276[a5_0x5195('0x17')](a5_0x5195('0x18'),_0x514eee);return _0x3bdd9b[a5_0x5195('0xa')](a5_0x5195('0x34'));}User_1[a5_0x5195('0x1a')]['findById'](_0x42c276[a5_0x5195('0x9')]['id'],(_0x5934d8,_0xe8b2a8)=>{if(_0x5934d8){return _0x336fd5(_0x5934d8);}_0xe8b2a8[a5_0x5195('0x10')]=_0x42c276['body'][a5_0x5195('0x10')]||'';_0xe8b2a8['profile']['name']=_0x42c276[a5_0x5195('0x2b')][a5_0x5195('0x35')]||'';_0xe8b2a8[a5_0x5195('0x36')][a5_0x5195('0x37')]=_0x42c276[a5_0x5195('0x2b')][a5_0x5195('0x37')]||'';_0xe8b2a8['profile'][a5_0x5195('0x38')]=_0x42c276[a5_0x5195('0x2b')]['location']||'';_0xe8b2a8[a5_0x5195('0x36')][a5_0x5195('0x39')]=_0x42c276[a5_0x5195('0x2b')][a5_0x5195('0x39')]||'';_0xe8b2a8[a5_0x5195('0x3a')](_0x5934d8=>{if(_0x5934d8){if(_0x5934d8[a5_0x5195('0x3b')]===0x2af8){_0x42c276['flash'](a5_0x5195('0x18'),{'msg':a5_0x5195('0x3c')});return _0x3bdd9b[a5_0x5195('0xa')]('/account');}return _0x336fd5(_0x5934d8);}_0x42c276[a5_0x5195('0x17')](a5_0x5195('0x1d'),{'msg':a5_0x5195('0x3d')});_0x3bdd9b[a5_0x5195('0xa')]('/account');});});};exports['postUpdatePassword']=(_0x1d0243,_0xe47a3c,_0x2889f7)=>{_0x1d0243[a5_0x5195('0xf')](a5_0x5195('0x13'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5195('0x27')]({'min':0x4});_0x1d0243['assert'](a5_0x5195('0x28'),a5_0x5195('0x29'))[a5_0x5195('0x2a')](_0x1d0243[a5_0x5195('0x2b')][a5_0x5195('0x13')]);const _0x386b74=_0x1d0243[a5_0x5195('0x16')]();if(_0x386b74){_0x1d0243[a5_0x5195('0x17')](a5_0x5195('0x18'),_0x386b74);return _0xe47a3c[a5_0x5195('0xa')](a5_0x5195('0x34'));}User_1[a5_0x5195('0x1a')][a5_0x5195('0x3e')](_0x1d0243[a5_0x5195('0x9')]['id'],(_0x5335ae,_0x3857cf)=>{if(_0x5335ae){return _0x2889f7(_0x5335ae);}_0x3857cf[a5_0x5195('0x13')]=_0x1d0243['body'][a5_0x5195('0x13')];_0x3857cf[a5_0x5195('0x3a')](_0x5335ae=>{if(_0x5335ae){return _0x2889f7(_0x5335ae);}_0x1d0243[a5_0x5195('0x17')](a5_0x5195('0x1d'),{'msg':a5_0x5195('0x3f')});_0xe47a3c['redirect'](a5_0x5195('0x34'));});});};exports['postDeleteAccount']=(_0x304b48,_0x2ade08,_0x22e96f)=>{User_1[a5_0x5195('0x1a')]['remove']({'_id':_0x304b48['user']['id']},_0x585f08=>{if(_0x585f08){return _0x22e96f(_0x585f08);}_0x304b48[a5_0x5195('0x21')]();_0x304b48['flash']('info',{'msg':a5_0x5195('0x40')});_0x2ade08[a5_0x5195('0xa')]('/');});};exports['getOauthUnlink']=(_0x5135df,_0x1666c5,_0x24f045)=>{const _0x2a31e8=_0x5135df[a5_0x5195('0x41')][a5_0x5195('0x42')];User_1[a5_0x5195('0x1a')][a5_0x5195('0x3e')](_0x5135df[a5_0x5195('0x9')]['id'],(_0x5c008b,_0x621cf)=>{if(_0x5c008b){return _0x24f045(_0x5c008b);}_0x621cf[_0x2a31e8]=undefined;_0x621cf[a5_0x5195('0x43')]=_0x621cf[a5_0x5195('0x43')][a5_0x5195('0x44')](_0x139807=>_0x139807[a5_0x5195('0x45')]!==_0x2a31e8);_0x621cf[a5_0x5195('0x3a')](_0x5c008b=>{if(_0x5c008b){return _0x24f045(_0x5c008b);}_0x5135df[a5_0x5195('0x17')](a5_0x5195('0x46'),{'msg':_0x2a31e8+a5_0x5195('0x47')});_0x1666c5[a5_0x5195('0xa')](a5_0x5195('0x34'));});});};exports[a5_0x5195('0x48')]=(_0x53b349,_0x5112eb,_0x569d19)=>{if(_0x53b349[a5_0x5195('0x49')]()){return _0x5112eb[a5_0x5195('0xa')]('/');}User_1['default'][a5_0x5195('0x4a')]({'passwordResetToken':_0x53b349[a5_0x5195('0x41')][a5_0x5195('0x4b')]})['where'](a5_0x5195('0x4c'))['gt'](Date[a5_0x5195('0x4d')]())['exec']((_0x53ceb8,_0x46f1c0)=>{if(_0x53ceb8){return _0x569d19(_0x53ceb8);}if(!_0x46f1c0){_0x53b349[a5_0x5195('0x17')](a5_0x5195('0x18'),{'msg':a5_0x5195('0x4e')});return _0x5112eb[a5_0x5195('0xa')](a5_0x5195('0x4f'));}_0x5112eb[a5_0x5195('0xb')](a5_0x5195('0x50'),{'title':a5_0x5195('0x51')});});};exports[a5_0x5195('0x52')]=(_0x10a2cc,_0x32b5f5,_0xecb50a)=>{_0x10a2cc[a5_0x5195('0xf')](a5_0x5195('0x13'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x5195('0x27')]({'min':0x4});_0x10a2cc[a5_0x5195('0xf')](a5_0x5195('0x53'),a5_0x5195('0x54'))[a5_0x5195('0x2a')](_0x10a2cc[a5_0x5195('0x2b')]['password']);const _0x3ecdf7=_0x10a2cc[a5_0x5195('0x16')]();if(_0x3ecdf7){_0x10a2cc[a5_0x5195('0x17')](a5_0x5195('0x18'),_0x3ecdf7);return _0x32b5f5[a5_0x5195('0xa')](a5_0x5195('0x55'));}async_1[a5_0x5195('0x1a')][a5_0x5195('0x56')]([function resetPassword(_0x2a356f){User_1['default'][a5_0x5195('0x4a')]({'passwordResetToken':_0x10a2cc[a5_0x5195('0x41')][a5_0x5195('0x4b')]})[a5_0x5195('0x57')](a5_0x5195('0x4c'))['gt'](Date[a5_0x5195('0x4d')]())['exec']((_0x47c2a1,_0x213912)=>{if(_0x47c2a1){return _0xecb50a(_0x47c2a1);}if(!_0x213912){_0x10a2cc[a5_0x5195('0x17')](a5_0x5195('0x18'),{'msg':a5_0x5195('0x4e')});return _0x32b5f5[a5_0x5195('0xa')](a5_0x5195('0x55'));}_0x213912['password']=_0x10a2cc['body']['password'];_0x213912[a5_0x5195('0x58')]=undefined;_0x213912[a5_0x5195('0x4c')]=undefined;_0x213912[a5_0x5195('0x3a')](_0x47c2a1=>{if(_0x47c2a1){return _0xecb50a(_0x47c2a1);}_0x10a2cc['logIn'](_0x213912,_0x47c2a1=>{_0x2a356f(_0x47c2a1,_0x213912);});});});},function sendResetPasswordEmail(_0x429309,_0x2f20f9){const _0x16b597=nodemailer_1[a5_0x5195('0x1a')]['createTransport']({'service':a5_0x5195('0x59'),'auth':{'user':process['env'][a5_0x5195('0x5a')],'pass':process['env'][a5_0x5195('0x5b')]}});const _0xe0b940={'to':_0x429309[a5_0x5195('0x10')],'from':a5_0x5195('0x5c'),'subject':a5_0x5195('0x5d'),'text':a5_0x5195('0x5e')+_0x429309[a5_0x5195('0x10')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x16b597['sendMail'](_0xe0b940,_0x4f08b3=>{_0x10a2cc[a5_0x5195('0x17')](a5_0x5195('0x1d'),{'msg':a5_0x5195('0x5f')});_0x2f20f9(_0x4f08b3);});}],_0x171fcd=>{if(_0x171fcd){return _0xecb50a(_0x171fcd);}_0x32b5f5[a5_0x5195('0xa')]('/');});};exports[a5_0x5195('0x60')]=(_0x288e7e,_0x510dfc)=>{if(_0x288e7e[a5_0x5195('0x49')]()){return _0x510dfc['redirect']('/');}_0x510dfc['render'](a5_0x5195('0x61'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x3c89e6,_0x156e91,_0x21b3e1)=>{_0x3c89e6['assert']('email',a5_0x5195('0x32'))[a5_0x5195('0x12')]();_0x3c89e6['sanitize'](a5_0x5195('0x10'))[a5_0x5195('0x15')]({'gmail_remove_dots':![]});const _0x26b9b5=_0x3c89e6[a5_0x5195('0x16')]();if(_0x26b9b5){_0x3c89e6[a5_0x5195('0x17')](a5_0x5195('0x18'),_0x26b9b5);return _0x156e91[a5_0x5195('0xa')](a5_0x5195('0x4f'));}async_1[a5_0x5195('0x1a')][a5_0x5195('0x56')]([function createRandomToken(_0x20cd93){crypto_1[a5_0x5195('0x1a')]['randomBytes'](0x10,(_0x24c11d,_0x4df310)=>{const _0x180397=_0x4df310[a5_0x5195('0x62')]('hex');_0x20cd93(_0x24c11d,_0x180397);});},function setRandomToken(_0x3a6c78,_0x3bee81){User_1[a5_0x5195('0x1a')][a5_0x5195('0x4a')]({'email':_0x3c89e6[a5_0x5195('0x2b')][a5_0x5195('0x10')]},(_0x16d21f,_0x2b7dcc)=>{if(_0x16d21f){return _0x3bee81(_0x16d21f);}if(!_0x2b7dcc){_0x3c89e6[a5_0x5195('0x17')](a5_0x5195('0x18'),{'msg':a5_0x5195('0x63')});return _0x156e91[a5_0x5195('0xa')](a5_0x5195('0x4f'));}_0x2b7dcc[a5_0x5195('0x58')]=_0x3a6c78;_0x2b7dcc[a5_0x5195('0x4c')]=Date[a5_0x5195('0x4d')]()+0x36ee80;_0x2b7dcc['save'](_0x16d21f=>{_0x3bee81(_0x16d21f,_0x3a6c78,_0x2b7dcc);});});},function sendForgotPasswordEmail(_0x35c3b1,_0x30bef0,_0x422ce9){const _0x5e5382=nodemailer_1[a5_0x5195('0x1a')][a5_0x5195('0x64')]({'service':a5_0x5195('0x59'),'auth':{'user':process['env'][a5_0x5195('0x5a')],'pass':process[a5_0x5195('0x65')]['SENDGRID_PASSWORD']}});const _0x2bd29c={'to':_0x30bef0[a5_0x5195('0x10')],'from':a5_0x5195('0x66'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x5195('0x67')+_0x3c89e6[a5_0x5195('0x68')][a5_0x5195('0x69')]+'/reset/'+_0x35c3b1+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x5e5382[a5_0x5195('0x6a')](_0x2bd29c,_0x5ad071=>{_0x3c89e6[a5_0x5195('0x17')](a5_0x5195('0x46'),{'msg':a5_0x5195('0x6b')+_0x30bef0[a5_0x5195('0x10')]+a5_0x5195('0x6c')});_0x422ce9(_0x5ad071);});}],_0x2de535=>{if(_0x2de535){return _0x21b3e1(_0x2de535);}_0x156e91[a5_0x5195('0xa')](a5_0x5195('0x4f'));});};