var a5_0x132c=['account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','toString','hex','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','\x20with\x20further\x20instructions.','__importDefault','defineProperty','async','crypto','nodemailer','passport','../models/User','getLogin','redirect','render','account/login','Login','assert','Email\x20is\x20not\x20valid','isEmail','password','notEmpty','sanitize','email','normalizeEmail','validationErrors','errors','/login','default','authenticate','local','flash','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','body','/signup','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','Passwords\x20do\x20not\x20match','user','success','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot'];(function(_0x2dac8e,_0x556db2){var _0x2df480=function(_0x11818f){while(--_0x11818f){_0x2dac8e['push'](_0x2dac8e['shift']());}};_0x2df480(++_0x556db2);}(a5_0x132c,0x161));var a5_0x3ff1=function(_0x3c4c4a,_0x3469ea){_0x3c4c4a=_0x3c4c4a-0x0;var _0x18ec40=a5_0x132c[_0x3c4c4a];return _0x18ec40;};'use strict';var __importDefault=this&&this[a5_0x3ff1('0x0')]||function(_0x1c29a6){return _0x1c29a6&&_0x1c29a6['__esModule']?_0x1c29a6:{'default':_0x1c29a6};};Object[a5_0x3ff1('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x3ff1('0x2')));const crypto_1=__importDefault(require(a5_0x3ff1('0x3')));const nodemailer_1=__importDefault(require(a5_0x3ff1('0x4')));const passport_1=__importDefault(require(a5_0x3ff1('0x5')));const User_1=__importDefault(require(a5_0x3ff1('0x6')));const request=require('express-validator');exports[a5_0x3ff1('0x7')]=(_0x24bce7,_0x4ded84)=>{if(_0x24bce7['user']){return _0x4ded84[a5_0x3ff1('0x8')]('/');}_0x4ded84[a5_0x3ff1('0x9')](a5_0x3ff1('0xa'),{'title':a5_0x3ff1('0xb')});};exports['postLogin']=(_0x3a8b3c,_0x167368,_0x2c8b9e)=>{_0x3a8b3c[a5_0x3ff1('0xc')]('email',a5_0x3ff1('0xd'))[a5_0x3ff1('0xe')]();_0x3a8b3c[a5_0x3ff1('0xc')](a5_0x3ff1('0xf'),'Password\x20cannot\x20be\x20blank')[a5_0x3ff1('0x10')]();_0x3a8b3c[a5_0x3ff1('0x11')](a5_0x3ff1('0x12'))[a5_0x3ff1('0x13')]({'gmail_remove_dots':![]});const _0x32c6c7=_0x3a8b3c[a5_0x3ff1('0x14')]();if(_0x32c6c7){_0x3a8b3c['flash'](a5_0x3ff1('0x15'),_0x32c6c7);return _0x167368[a5_0x3ff1('0x8')](a5_0x3ff1('0x16'));}passport_1[a5_0x3ff1('0x17')][a5_0x3ff1('0x18')](a5_0x3ff1('0x19'),(_0x1bcd27,_0x5c6c08,_0x8d3bea)=>{if(_0x1bcd27){return _0x2c8b9e(_0x1bcd27);}if(!_0x5c6c08){_0x3a8b3c[a5_0x3ff1('0x1a')]('errors',_0x8d3bea[a5_0x3ff1('0x1b')]);return _0x167368[a5_0x3ff1('0x8')]('/login');}_0x3a8b3c[a5_0x3ff1('0x1c')](_0x5c6c08,_0x1bcd27=>{if(_0x1bcd27){return _0x2c8b9e(_0x1bcd27);}_0x3a8b3c[a5_0x3ff1('0x1a')]('success',{'msg':a5_0x3ff1('0x1d')});_0x167368[a5_0x3ff1('0x8')](_0x3a8b3c[a5_0x3ff1('0x1e')][a5_0x3ff1('0x1f')]||'/');});})(_0x3a8b3c,_0x167368,_0x2c8b9e);};exports[a5_0x3ff1('0x20')]=(_0x353be9,_0x2227c6)=>{_0x353be9[a5_0x3ff1('0x20')]();_0x2227c6['redirect']('/');};exports[a5_0x3ff1('0x21')]=(_0x56791b,_0x3c307f)=>{if(_0x56791b['user']){return _0x3c307f[a5_0x3ff1('0x8')]('/');}_0x3c307f['render'](a5_0x3ff1('0x22'),{'title':a5_0x3ff1('0x23')});};exports[a5_0x3ff1('0x24')]=(_0x410325,_0x3ea7da,_0x2b58c7)=>{_0x410325[a5_0x3ff1('0xc')](a5_0x3ff1('0x12'),'Email\x20is\x20not\x20valid')[a5_0x3ff1('0xe')]();_0x410325['assert']('password',a5_0x3ff1('0x25'))[a5_0x3ff1('0x26')]({'min':0x4});_0x410325[a5_0x3ff1('0xc')](a5_0x3ff1('0x27'),'Passwords\x20do\x20not\x20match')[a5_0x3ff1('0x28')](_0x410325[a5_0x3ff1('0x29')]['password']);_0x410325[a5_0x3ff1('0x11')](a5_0x3ff1('0x12'))[a5_0x3ff1('0x13')]({'gmail_remove_dots':![]});const _0xdba48d=_0x410325[a5_0x3ff1('0x14')]();if(_0xdba48d){_0x410325[a5_0x3ff1('0x1a')]('errors',_0xdba48d);return _0x3ea7da[a5_0x3ff1('0x8')](a5_0x3ff1('0x2a'));}const _0x11859a=new User_1[(a5_0x3ff1('0x17'))]({});User_1[a5_0x3ff1('0x17')]['findOne']({'email':_0x410325[a5_0x3ff1('0x29')]['email']},(_0x57b2ef,_0x431a9c)=>{if(_0x57b2ef){return _0x2b58c7(_0x57b2ef);}if(_0x431a9c){_0x410325[a5_0x3ff1('0x1a')](a5_0x3ff1('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x3ea7da[a5_0x3ff1('0x8')](a5_0x3ff1('0x2a'));}_0x11859a[a5_0x3ff1('0x2b')](_0x57b2ef=>{if(_0x57b2ef){return _0x2b58c7(_0x57b2ef);}_0x410325[a5_0x3ff1('0x1c')](_0x11859a,_0x57b2ef=>{if(_0x57b2ef){return _0x2b58c7(_0x57b2ef);}_0x3ea7da[a5_0x3ff1('0x8')]('/');});});});};exports[a5_0x3ff1('0x2c')]=(_0x454b68,_0x799cde)=>{_0x799cde[a5_0x3ff1('0x9')](a5_0x3ff1('0x2d'),{'title':a5_0x3ff1('0x2e')});};exports[a5_0x3ff1('0x2f')]=(_0x550240,_0x54fc29,_0x397546)=>{_0x550240[a5_0x3ff1('0xc')](a5_0x3ff1('0x12'),a5_0x3ff1('0x30'))[a5_0x3ff1('0xe')]();_0x550240[a5_0x3ff1('0x11')]('email')[a5_0x3ff1('0x13')]({'gmail_remove_dots':![]});const _0x34ea8b=_0x550240[a5_0x3ff1('0x14')]();if(_0x34ea8b){_0x550240['flash'](a5_0x3ff1('0x15'),_0x34ea8b);return _0x54fc29[a5_0x3ff1('0x8')]('/account');}User_1[a5_0x3ff1('0x17')][a5_0x3ff1('0x31')](_0x550240['user']['id'],(_0x10769c,_0x22cc7a)=>{if(_0x10769c){return _0x397546(_0x10769c);}_0x22cc7a[a5_0x3ff1('0x12')]=_0x550240[a5_0x3ff1('0x29')][a5_0x3ff1('0x12')]||'';_0x22cc7a[a5_0x3ff1('0x32')][a5_0x3ff1('0x33')]=_0x550240['body'][a5_0x3ff1('0x33')]||'';_0x22cc7a[a5_0x3ff1('0x32')][a5_0x3ff1('0x34')]=_0x550240[a5_0x3ff1('0x29')][a5_0x3ff1('0x34')]||'';_0x22cc7a[a5_0x3ff1('0x32')][a5_0x3ff1('0x35')]=_0x550240[a5_0x3ff1('0x29')][a5_0x3ff1('0x35')]||'';_0x22cc7a[a5_0x3ff1('0x32')][a5_0x3ff1('0x36')]=_0x550240['body']['website']||'';_0x22cc7a[a5_0x3ff1('0x2b')](_0x10769c=>{if(_0x10769c){if(_0x10769c[a5_0x3ff1('0x37')]===0x2af8){_0x550240[a5_0x3ff1('0x1a')](a5_0x3ff1('0x15'),{'msg':a5_0x3ff1('0x38')});return _0x54fc29[a5_0x3ff1('0x8')](a5_0x3ff1('0x39'));}return _0x397546(_0x10769c);}_0x550240[a5_0x3ff1('0x1a')]('success',{'msg':a5_0x3ff1('0x3a')});_0x54fc29['redirect'](a5_0x3ff1('0x39'));});});};exports['postUpdatePassword']=(_0x286eb6,_0x5dc530,_0x240199)=>{_0x286eb6[a5_0x3ff1('0xc')](a5_0x3ff1('0xf'),a5_0x3ff1('0x25'))[a5_0x3ff1('0x26')]({'min':0x4});_0x286eb6[a5_0x3ff1('0xc')](a5_0x3ff1('0x27'),a5_0x3ff1('0x3b'))[a5_0x3ff1('0x28')](_0x286eb6[a5_0x3ff1('0x29')][a5_0x3ff1('0xf')]);const _0x550b81=_0x286eb6[a5_0x3ff1('0x14')]();if(_0x550b81){_0x286eb6[a5_0x3ff1('0x1a')](a5_0x3ff1('0x15'),_0x550b81);return _0x5dc530['redirect']('/account');}User_1[a5_0x3ff1('0x17')][a5_0x3ff1('0x31')](_0x286eb6[a5_0x3ff1('0x3c')]['id'],(_0x5d8cd9,_0x573fd3)=>{if(_0x5d8cd9){return _0x240199(_0x5d8cd9);}_0x573fd3['password']=_0x286eb6['body'][a5_0x3ff1('0xf')];_0x573fd3[a5_0x3ff1('0x2b')](_0x5d8cd9=>{if(_0x5d8cd9){return _0x240199(_0x5d8cd9);}_0x286eb6[a5_0x3ff1('0x1a')](a5_0x3ff1('0x3d'),{'msg':'Password\x20has\x20been\x20changed.'});_0x5dc530[a5_0x3ff1('0x8')]('/account');});});};exports['postDeleteAccount']=(_0x3dbf15,_0x50d5d2,_0x2a57c7)=>{User_1[a5_0x3ff1('0x17')]['remove']({'_id':_0x3dbf15[a5_0x3ff1('0x3c')]['id']},_0x46f258=>{if(_0x46f258){return _0x2a57c7(_0x46f258);}_0x3dbf15[a5_0x3ff1('0x20')]();_0x3dbf15['flash'](a5_0x3ff1('0x3e'),{'msg':a5_0x3ff1('0x3f')});_0x50d5d2['redirect']('/');});};exports[a5_0x3ff1('0x40')]=(_0x207e00,_0x334a06,_0x443c7a)=>{const _0x3c5a5e=_0x207e00[a5_0x3ff1('0x41')]['provider'];User_1[a5_0x3ff1('0x17')][a5_0x3ff1('0x31')](_0x207e00[a5_0x3ff1('0x3c')]['id'],(_0x29dd8b,_0x1dcfcb)=>{if(_0x29dd8b){return _0x443c7a(_0x29dd8b);}_0x1dcfcb[_0x3c5a5e]=undefined;_0x1dcfcb[a5_0x3ff1('0x42')]=_0x1dcfcb[a5_0x3ff1('0x42')][a5_0x3ff1('0x43')](_0x1cf1d6=>_0x1cf1d6[a5_0x3ff1('0x44')]!==_0x3c5a5e);_0x1dcfcb['save'](_0x29dd8b=>{if(_0x29dd8b){return _0x443c7a(_0x29dd8b);}_0x207e00[a5_0x3ff1('0x1a')](a5_0x3ff1('0x3e'),{'msg':_0x3c5a5e+'\x20account\x20has\x20been\x20unlinked.'});_0x334a06[a5_0x3ff1('0x8')](a5_0x3ff1('0x39'));});});};exports[a5_0x3ff1('0x45')]=(_0x247276,_0xe7868d,_0x2a8ea6)=>{if(_0x247276[a5_0x3ff1('0x46')]()){return _0xe7868d['redirect']('/');}User_1[a5_0x3ff1('0x17')][a5_0x3ff1('0x47')]({'passwordResetToken':_0x247276[a5_0x3ff1('0x41')][a5_0x3ff1('0x48')]})[a5_0x3ff1('0x49')](a5_0x3ff1('0x4a'))['gt'](Date[a5_0x3ff1('0x4b')]())[a5_0x3ff1('0x4c')]((_0x202fbc,_0x27aabb)=>{if(_0x202fbc){return _0x2a8ea6(_0x202fbc);}if(!_0x27aabb){_0x247276[a5_0x3ff1('0x1a')](a5_0x3ff1('0x15'),{'msg':a5_0x3ff1('0x4d')});return _0xe7868d['redirect'](a5_0x3ff1('0x4e'));}_0xe7868d[a5_0x3ff1('0x9')](a5_0x3ff1('0x4f'),{'title':a5_0x3ff1('0x50')});});};exports[a5_0x3ff1('0x51')]=(_0x15d0fd,_0x4ebf22,_0x24ca9e)=>{_0x15d0fd[a5_0x3ff1('0xc')]('password',a5_0x3ff1('0x52'))[a5_0x3ff1('0x26')]({'min':0x4});_0x15d0fd[a5_0x3ff1('0xc')](a5_0x3ff1('0x53'),a5_0x3ff1('0x54'))[a5_0x3ff1('0x28')](_0x15d0fd[a5_0x3ff1('0x29')][a5_0x3ff1('0xf')]);const _0x43718a=_0x15d0fd[a5_0x3ff1('0x14')]();if(_0x43718a){_0x15d0fd[a5_0x3ff1('0x1a')](a5_0x3ff1('0x15'),_0x43718a);return _0x4ebf22[a5_0x3ff1('0x8')](a5_0x3ff1('0x55'));}async_1['default'][a5_0x3ff1('0x56')]([function resetPassword(_0xdea9eb){User_1['default'][a5_0x3ff1('0x47')]({'passwordResetToken':_0x15d0fd['params'][a5_0x3ff1('0x48')]})[a5_0x3ff1('0x49')](a5_0x3ff1('0x4a'))['gt'](Date['now']())['exec']((_0xa2c3b6,_0x4f7e9b)=>{if(_0xa2c3b6){return _0x24ca9e(_0xa2c3b6);}if(!_0x4f7e9b){_0x15d0fd[a5_0x3ff1('0x1a')](a5_0x3ff1('0x15'),{'msg':a5_0x3ff1('0x4d')});return _0x4ebf22['redirect'](a5_0x3ff1('0x55'));}_0x4f7e9b[a5_0x3ff1('0xf')]=_0x15d0fd[a5_0x3ff1('0x29')][a5_0x3ff1('0xf')];_0x4f7e9b['passwordResetToken']=undefined;_0x4f7e9b[a5_0x3ff1('0x4a')]=undefined;_0x4f7e9b[a5_0x3ff1('0x2b')](_0xa2c3b6=>{if(_0xa2c3b6){return _0x24ca9e(_0xa2c3b6);}_0x15d0fd['logIn'](_0x4f7e9b,_0xa2c3b6=>{_0xdea9eb(_0xa2c3b6,_0x4f7e9b);});});});},function sendResetPasswordEmail(_0x36ca6a,_0x25ab9a){const _0xc65f4c=nodemailer_1['default']['createTransport']({'service':a5_0x3ff1('0x57'),'auth':{'user':process[a5_0x3ff1('0x58')][a5_0x3ff1('0x59')],'pass':process['env'][a5_0x3ff1('0x5a')]}});const _0x9b8229={'to':_0x36ca6a[a5_0x3ff1('0x12')],'from':'express-ts@starter.com','subject':a5_0x3ff1('0x5b'),'text':a5_0x3ff1('0x5c')+_0x36ca6a[a5_0x3ff1('0x12')]+a5_0x3ff1('0x5d')};_0xc65f4c['sendMail'](_0x9b8229,_0x241b22=>{_0x15d0fd[a5_0x3ff1('0x1a')](a5_0x3ff1('0x3d'),{'msg':a5_0x3ff1('0x5e')});_0x25ab9a(_0x241b22);});}],_0x43133d=>{if(_0x43133d){return _0x24ca9e(_0x43133d);}_0x4ebf22[a5_0x3ff1('0x8')]('/');});};exports[a5_0x3ff1('0x5f')]=(_0x651093,_0x53c07c)=>{if(_0x651093['isAuthenticated']()){return _0x53c07c[a5_0x3ff1('0x8')]('/');}_0x53c07c['render'](a5_0x3ff1('0x60'),{'title':a5_0x3ff1('0x61')});};exports[a5_0x3ff1('0x62')]=(_0x113b2c,_0x5a3fbc,_0x56e05b)=>{_0x113b2c['assert']('email','Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x113b2c[a5_0x3ff1('0x11')](a5_0x3ff1('0x12'))[a5_0x3ff1('0x13')]({'gmail_remove_dots':![]});const _0x5b4abb=_0x113b2c[a5_0x3ff1('0x14')]();if(_0x5b4abb){_0x113b2c[a5_0x3ff1('0x1a')]('errors',_0x5b4abb);return _0x5a3fbc[a5_0x3ff1('0x8')]('/forgot');}async_1[a5_0x3ff1('0x17')][a5_0x3ff1('0x56')]([function createRandomToken(_0x31ac08){crypto_1[a5_0x3ff1('0x17')]['randomBytes'](0x10,(_0x5554e2,_0x5ca56b)=>{const _0x314586=_0x5ca56b[a5_0x3ff1('0x63')](a5_0x3ff1('0x64'));_0x31ac08(_0x5554e2,_0x314586);});},function setRandomToken(_0x2fe056,_0x160e67){User_1['default']['findOne']({'email':_0x113b2c[a5_0x3ff1('0x29')][a5_0x3ff1('0x12')]},(_0x279b26,_0x28f004)=>{if(_0x279b26){return _0x160e67(_0x279b26);}if(!_0x28f004){_0x113b2c[a5_0x3ff1('0x1a')](a5_0x3ff1('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x5a3fbc[a5_0x3ff1('0x8')](a5_0x3ff1('0x4e'));}_0x28f004['passwordResetToken']=_0x2fe056;_0x28f004[a5_0x3ff1('0x4a')]=Date[a5_0x3ff1('0x4b')]()+0x36ee80;_0x28f004['save'](_0x279b26=>{_0x160e67(_0x279b26,_0x2fe056,_0x28f004);});});},function sendForgotPasswordEmail(_0x240572,_0x20cac2,_0x193a4b){const _0x4b2d23=nodemailer_1['default']['createTransport']({'service':a5_0x3ff1('0x57'),'auth':{'user':process['env'][a5_0x3ff1('0x59')],'pass':process[a5_0x3ff1('0x58')][a5_0x3ff1('0x5a')]}});const _0x32cc7d={'to':_0x20cac2[a5_0x3ff1('0x12')],'from':a5_0x3ff1('0x65'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x3ff1('0x66')+_0x113b2c[a5_0x3ff1('0x67')]['host']+a5_0x3ff1('0x68')+_0x240572+a5_0x3ff1('0x69')};_0x4b2d23[a5_0x3ff1('0x6a')](_0x32cc7d,_0xd1dd63=>{_0x113b2c[a5_0x3ff1('0x1a')]('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x20cac2[a5_0x3ff1('0x12')]+a5_0x3ff1('0x6b')});_0x193a4b(_0xd1dd63);});}],_0x233875=>{if(_0x233875){return _0x56e05b(_0x233875);}_0x5a3fbc[a5_0x3ff1('0x8')](a5_0x3ff1('0x4e'));});};