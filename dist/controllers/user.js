var a5_0x3aca=['hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','render','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','/signup','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','passwordResetExpires','now','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','token','where','passwordResetToken','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','postForgot','waterfall','randomBytes','toString','hex','findOne'];(function(_0x420f86,_0x31c537){var _0x30cd5a=function(_0x111b9e){while(--_0x111b9e){_0x420f86['push'](_0x420f86['shift']());}};_0x30cd5a(++_0x31c537);}(a5_0x3aca,0x1b7));var a5_0x487b=function(_0x5ed5fa,_0x2071a5){_0x5ed5fa=_0x5ed5fa-0x0;var _0xc335f2=a5_0x3aca[_0x5ed5fa];return _0xc335f2;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x15dfc5){return _0x15dfc5&&_0x15dfc5[a5_0x487b('0x0')]?_0x15dfc5:{'default':_0x15dfc5};};Object[a5_0x487b('0x1')](exports,a5_0x487b('0x0'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x487b('0x2')));const nodemailer_1=__importDefault(require(a5_0x487b('0x3')));const passport_1=__importDefault(require(a5_0x487b('0x4')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x487b('0x5'));exports[a5_0x487b('0x6')]=(_0x4cb48b,_0x1ea17d)=>{if(_0x4cb48b[a5_0x487b('0x7')]){return _0x1ea17d[a5_0x487b('0x8')]('/');}_0x1ea17d['render'](a5_0x487b('0x9'),{'title':'Login'});};exports[a5_0x487b('0xa')]=(_0x3be395,_0x3f851d,_0xaac2d4)=>{_0x3be395[a5_0x487b('0xb')](a5_0x487b('0xc'),a5_0x487b('0xd'))['isEmail']();_0x3be395[a5_0x487b('0xb')](a5_0x487b('0xe'),a5_0x487b('0xf'))[a5_0x487b('0x10')]();_0x3be395[a5_0x487b('0x11')](a5_0x487b('0xc'))[a5_0x487b('0x12')]({'gmail_remove_dots':![]});const _0x5da419=_0x3be395[a5_0x487b('0x13')]();if(_0x5da419){_0x3be395[a5_0x487b('0x14')](a5_0x487b('0x15'),_0x5da419);return _0x3f851d[a5_0x487b('0x8')](a5_0x487b('0x16'));}passport_1[a5_0x487b('0x17')][a5_0x487b('0x18')](a5_0x487b('0x19'),(_0x2e4bc8,_0x23f5ef,_0xde4b74)=>{if(_0x2e4bc8){return _0xaac2d4(_0x2e4bc8);}if(!_0x23f5ef){_0x3be395[a5_0x487b('0x14')]('errors',_0xde4b74[a5_0x487b('0x1a')]);return _0x3f851d[a5_0x487b('0x8')](a5_0x487b('0x16'));}_0x3be395[a5_0x487b('0x1b')](_0x23f5ef,_0x2e4bc8=>{if(_0x2e4bc8){return _0xaac2d4(_0x2e4bc8);}_0x3be395[a5_0x487b('0x14')]('success',{'msg':a5_0x487b('0x1c')});_0x3f851d[a5_0x487b('0x8')](_0x3be395[a5_0x487b('0x1d')][a5_0x487b('0x1e')]||'/');});})(_0x3be395,_0x3f851d,_0xaac2d4);};exports[a5_0x487b('0x1f')]=(_0x1713fe,_0x17eb86)=>{_0x1713fe[a5_0x487b('0x1f')]();_0x17eb86[a5_0x487b('0x8')]('/');};exports['getSignup']=(_0x147c20,_0x106f29)=>{if(_0x147c20[a5_0x487b('0x7')]){return _0x106f29[a5_0x487b('0x8')]('/');}_0x106f29[a5_0x487b('0x20')]('account/signup',{'title':a5_0x487b('0x21')});};exports[a5_0x487b('0x22')]=(_0x183c23,_0x30a7dd,_0x19c61e)=>{_0x183c23[a5_0x487b('0xb')](a5_0x487b('0xc'),a5_0x487b('0xd'))[a5_0x487b('0x23')]();_0x183c23[a5_0x487b('0xb')](a5_0x487b('0xe'),a5_0x487b('0x24'))[a5_0x487b('0x25')]({'min':0x4});_0x183c23['assert'](a5_0x487b('0x26'),a5_0x487b('0x27'))[a5_0x487b('0x28')](_0x183c23['body'][a5_0x487b('0xe')]);_0x183c23[a5_0x487b('0x11')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x9e0e5e=_0x183c23[a5_0x487b('0x13')]();if(_0x9e0e5e){_0x183c23[a5_0x487b('0x14')]('errors',_0x9e0e5e);return _0x30a7dd[a5_0x487b('0x8')](a5_0x487b('0x29'));}const _0xbb7446=new User_1[(a5_0x487b('0x17'))]({'email':_0x183c23[a5_0x487b('0x2a')][a5_0x487b('0xc')],'password':_0x183c23[a5_0x487b('0x2a')][a5_0x487b('0xe')]});User_1[a5_0x487b('0x17')]['findOne']({'email':_0x183c23[a5_0x487b('0x2a')][a5_0x487b('0xc')]},(_0x3291da,_0x118a37)=>{if(_0x3291da){return _0x19c61e(_0x3291da);}if(_0x118a37){_0x183c23[a5_0x487b('0x14')]('errors',{'msg':a5_0x487b('0x2b')});return _0x30a7dd['redirect'](a5_0x487b('0x29'));}_0xbb7446[a5_0x487b('0x2c')](_0x3291da=>{if(_0x3291da){return _0x19c61e(_0x3291da);}_0x183c23[a5_0x487b('0x1b')](_0xbb7446,_0x3291da=>{if(_0x3291da){return _0x19c61e(_0x3291da);}_0x30a7dd[a5_0x487b('0x8')]('/');});});});};exports[a5_0x487b('0x2d')]=(_0x2d129a,_0x3b80e5)=>{_0x3b80e5[a5_0x487b('0x20')](a5_0x487b('0x2e'),{'title':a5_0x487b('0x2f')});};exports[a5_0x487b('0x30')]=(_0x5d8114,_0x559a48,_0x228c71)=>{_0x5d8114[a5_0x487b('0xb')](a5_0x487b('0xc'),a5_0x487b('0x31'))[a5_0x487b('0x23')]();_0x5d8114['sanitize'](a5_0x487b('0xc'))[a5_0x487b('0x12')]({'gmail_remove_dots':![]});const _0x1688f7=_0x5d8114[a5_0x487b('0x13')]();if(_0x1688f7){_0x5d8114['flash']('errors',_0x1688f7);return _0x559a48[a5_0x487b('0x8')](a5_0x487b('0x32'));}User_1[a5_0x487b('0x17')][a5_0x487b('0x33')](_0x5d8114[a5_0x487b('0x7')]['id'],(_0x33f156,_0x1fa181)=>{if(_0x33f156){return _0x228c71(_0x33f156);}_0x1fa181[a5_0x487b('0xc')]=_0x5d8114[a5_0x487b('0x2a')]['email']||'';_0x1fa181[a5_0x487b('0x34')][a5_0x487b('0x35')]=_0x5d8114[a5_0x487b('0x2a')]['name']||'';_0x1fa181[a5_0x487b('0x34')][a5_0x487b('0x36')]=_0x5d8114[a5_0x487b('0x2a')][a5_0x487b('0x36')]||'';_0x1fa181['profile'][a5_0x487b('0x37')]=_0x5d8114[a5_0x487b('0x2a')][a5_0x487b('0x37')]||'';_0x1fa181['profile'][a5_0x487b('0x38')]=_0x5d8114['body'][a5_0x487b('0x38')]||'';_0x1fa181[a5_0x487b('0x2c')](_0x33f156=>{if(_0x33f156){if(_0x33f156[a5_0x487b('0x39')]===0x2af8){_0x5d8114[a5_0x487b('0x14')](a5_0x487b('0x15'),{'msg':a5_0x487b('0x3a')});return _0x559a48[a5_0x487b('0x8')]('/account');}return _0x228c71(_0x33f156);}_0x5d8114[a5_0x487b('0x14')](a5_0x487b('0x3b'),{'msg':a5_0x487b('0x3c')});_0x559a48['redirect'](a5_0x487b('0x32'));});});};exports[a5_0x487b('0x3d')]=(_0x27b996,_0x13796b,_0x4dcee6)=>{_0x27b996[a5_0x487b('0xb')](a5_0x487b('0xe'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x487b('0x25')]({'min':0x4});_0x27b996['assert'](a5_0x487b('0x26'),'Passwords\x20do\x20not\x20match')['equals'](_0x27b996[a5_0x487b('0x2a')][a5_0x487b('0xe')]);const _0x189bbb=_0x27b996[a5_0x487b('0x13')]();if(_0x189bbb){_0x27b996[a5_0x487b('0x14')]('errors',_0x189bbb);return _0x13796b[a5_0x487b('0x8')](a5_0x487b('0x32'));}User_1[a5_0x487b('0x17')][a5_0x487b('0x33')](_0x27b996[a5_0x487b('0x7')]['id'],(_0x7f51c0,_0x846fac)=>{if(_0x7f51c0){return _0x4dcee6(_0x7f51c0);}_0x846fac['password']=_0x27b996[a5_0x487b('0x2a')][a5_0x487b('0xe')];_0x846fac[a5_0x487b('0x2c')](_0x7f51c0=>{if(_0x7f51c0){return _0x4dcee6(_0x7f51c0);}_0x27b996[a5_0x487b('0x14')](a5_0x487b('0x3b'),{'msg':a5_0x487b('0x3e')});_0x13796b[a5_0x487b('0x8')](a5_0x487b('0x32'));});});};exports['postDeleteAccount']=(_0x2e9f72,_0x2fb6b4,_0x53d338)=>{User_1['default']['remove']({'_id':_0x2e9f72[a5_0x487b('0x7')]['id']},_0x1fec47=>{if(_0x1fec47){return _0x53d338(_0x1fec47);}_0x2e9f72[a5_0x487b('0x1f')]();_0x2e9f72[a5_0x487b('0x14')]('info',{'msg':a5_0x487b('0x3f')});_0x2fb6b4[a5_0x487b('0x8')]('/');});};exports[a5_0x487b('0x40')]=(_0x259184,_0x30ec4e,_0x2d8111)=>{const _0x468e09=_0x259184[a5_0x487b('0x41')][a5_0x487b('0x42')];User_1[a5_0x487b('0x17')][a5_0x487b('0x33')](_0x259184['user']['id'],(_0x4c81ea,_0x30e853)=>{if(_0x4c81ea){return _0x2d8111(_0x4c81ea);}_0x30e853[_0x468e09]=undefined;_0x30e853[a5_0x487b('0x43')]=_0x30e853[a5_0x487b('0x43')][a5_0x487b('0x44')](_0x5e5b6c=>_0x5e5b6c[a5_0x487b('0x45')]!==_0x468e09);_0x30e853[a5_0x487b('0x2c')](_0x4c81ea=>{if(_0x4c81ea){return _0x2d8111(_0x4c81ea);}_0x259184[a5_0x487b('0x14')](a5_0x487b('0x46'),{'msg':_0x468e09+a5_0x487b('0x47')});_0x30ec4e[a5_0x487b('0x8')]('/account');});});};exports[a5_0x487b('0x48')]=(_0x3ffdf0,_0x28b970,_0x4bfaef)=>{if(_0x3ffdf0[a5_0x487b('0x49')]()){return _0x28b970[a5_0x487b('0x8')]('/');}User_1[a5_0x487b('0x17')]['findOne']({'passwordResetToken':_0x3ffdf0[a5_0x487b('0x41')]['token']})['where'](a5_0x487b('0x4a'))['gt'](Date[a5_0x487b('0x4b')]())[a5_0x487b('0x4c')]((_0x12f32e,_0x1d29ba)=>{if(_0x12f32e){return _0x4bfaef(_0x12f32e);}if(!_0x1d29ba){_0x3ffdf0[a5_0x487b('0x14')](a5_0x487b('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x28b970['redirect'](a5_0x487b('0x4d'));}_0x28b970[a5_0x487b('0x20')](a5_0x487b('0x4e'),{'title':a5_0x487b('0x4f')});});};exports[a5_0x487b('0x50')]=(_0x410d42,_0x6940ce,_0x23cd77)=>{_0x410d42[a5_0x487b('0xb')](a5_0x487b('0xe'),a5_0x487b('0x51'))[a5_0x487b('0x25')]({'min':0x4});_0x410d42[a5_0x487b('0xb')]('confirm',a5_0x487b('0x52'))[a5_0x487b('0x28')](_0x410d42[a5_0x487b('0x2a')]['password']);const _0x4a4036=_0x410d42[a5_0x487b('0x13')]();if(_0x4a4036){_0x410d42[a5_0x487b('0x14')](a5_0x487b('0x15'),_0x4a4036);return _0x6940ce[a5_0x487b('0x8')]('back');}async_1['default']['waterfall']([function resetPassword(_0x420b4f){User_1[a5_0x487b('0x17')]['findOne']({'passwordResetToken':_0x410d42['params'][a5_0x487b('0x53')]})[a5_0x487b('0x54')](a5_0x487b('0x4a'))['gt'](Date['now']())['exec']((_0x3b5b10,_0x22564e)=>{if(_0x3b5b10){return _0x23cd77(_0x3b5b10);}if(!_0x22564e){_0x410d42[a5_0x487b('0x14')](a5_0x487b('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x6940ce[a5_0x487b('0x8')]('back');}_0x22564e[a5_0x487b('0xe')]=_0x410d42[a5_0x487b('0x2a')][a5_0x487b('0xe')];_0x22564e[a5_0x487b('0x55')]=undefined;_0x22564e[a5_0x487b('0x4a')]=undefined;_0x22564e[a5_0x487b('0x2c')](_0x3b5b10=>{if(_0x3b5b10){return _0x23cd77(_0x3b5b10);}_0x410d42[a5_0x487b('0x1b')](_0x22564e,_0x3b5b10=>{_0x420b4f(_0x3b5b10,_0x22564e);});});});},function sendResetPasswordEmail(_0x393bae,_0x545612){const _0x4d37b5=nodemailer_1['default']['createTransport']({'service':a5_0x487b('0x56'),'auth':{'user':process[a5_0x487b('0x57')][a5_0x487b('0x58')],'pass':process[a5_0x487b('0x57')][a5_0x487b('0x59')]}});const _0x1f2895={'to':_0x393bae['email'],'from':a5_0x487b('0x5a'),'subject':a5_0x487b('0x5b'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x393bae[a5_0x487b('0xc')]+a5_0x487b('0x5c')};_0x4d37b5[a5_0x487b('0x5d')](_0x1f2895,_0x468409=>{_0x410d42[a5_0x487b('0x14')](a5_0x487b('0x3b'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x545612(_0x468409);});}],_0xfa028f=>{if(_0xfa028f){return _0x23cd77(_0xfa028f);}_0x6940ce[a5_0x487b('0x8')]('/');});};exports[a5_0x487b('0x5e')]=(_0x52b5a4,_0x1af493)=>{if(_0x52b5a4[a5_0x487b('0x49')]()){return _0x1af493['redirect']('/');}_0x1af493['render']('account/forgot',{'title':'Forgot\x20Password'});};exports[a5_0x487b('0x5f')]=(_0x24d282,_0x335c9a,_0x573e4c)=>{_0x24d282[a5_0x487b('0xb')](a5_0x487b('0xc'),a5_0x487b('0x31'))['isEmail']();_0x24d282['sanitize'](a5_0x487b('0xc'))[a5_0x487b('0x12')]({'gmail_remove_dots':![]});const _0x23d17e=_0x24d282['validationErrors']();if(_0x23d17e){_0x24d282['flash'](a5_0x487b('0x15'),_0x23d17e);return _0x335c9a[a5_0x487b('0x8')](a5_0x487b('0x4d'));}async_1[a5_0x487b('0x17')][a5_0x487b('0x60')]([function createRandomToken(_0x4eb06e){crypto_1[a5_0x487b('0x17')][a5_0x487b('0x61')](0x10,(_0x1e6047,_0x4e13b2)=>{const _0xcc3e4e=_0x4e13b2[a5_0x487b('0x62')](a5_0x487b('0x63'));_0x4eb06e(_0x1e6047,_0xcc3e4e);});},function setRandomToken(_0x5ad4dd,_0x3e60b9){User_1[a5_0x487b('0x17')][a5_0x487b('0x64')]({'email':_0x24d282[a5_0x487b('0x2a')]['email']},(_0x587897,_0x4816e4)=>{if(_0x587897){return _0x3e60b9(_0x587897);}if(!_0x4816e4){_0x24d282['flash'](a5_0x487b('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x335c9a['redirect'](a5_0x487b('0x4d'));}_0x4816e4[a5_0x487b('0x55')]=_0x5ad4dd;_0x4816e4[a5_0x487b('0x4a')]=Date[a5_0x487b('0x4b')]()+0x36ee80;_0x4816e4['save'](_0x587897=>{_0x3e60b9(_0x587897,_0x5ad4dd,_0x4816e4);});});},function sendForgotPasswordEmail(_0x276a9f,_0x7c201e,_0x545c88){const _0x3b7935=nodemailer_1[a5_0x487b('0x17')]['createTransport']({'service':a5_0x487b('0x56'),'auth':{'user':process['env'][a5_0x487b('0x58')],'pass':process[a5_0x487b('0x57')][a5_0x487b('0x59')]}});const _0x506cfd={'to':_0x7c201e[a5_0x487b('0xc')],'from':a5_0x487b('0x65'),'subject':a5_0x487b('0x66'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x24d282[a5_0x487b('0x67')]['host']+a5_0x487b('0x68')+_0x276a9f+a5_0x487b('0x69')};_0x3b7935[a5_0x487b('0x5d')](_0x506cfd,_0x913086=>{_0x24d282['flash'](a5_0x487b('0x46'),{'msg':a5_0x487b('0x6a')+_0x7c201e['email']+a5_0x487b('0x6b')});_0x545c88(_0x913086);});}],_0x44b7b2=>{if(_0x44b7b2){return _0x573e4c(_0x44b7b2);}_0x335c9a[a5_0x487b('0x8')](a5_0x487b('0x4d'));});};