var a5_0x23b5=['back','waterfall','token','where','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','/forgot','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','express-validator','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','/login','default','authenticate','local','errors','logIn','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','Account\x20Management','postUpdateProfile','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','postUpdatePassword','confirmPassword','Password\x20has\x20been\x20changed.','remove','Your\x20account\x20has\x20been\x20deleted.','params','tokens','filter','kind','getReset','isAuthenticated','passwordResetExpires','exec','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.'];(function(_0x1bab24,_0x404217){var _0x49d413=function(_0x1eddb5){while(--_0x1eddb5){_0x1bab24['push'](_0x1bab24['shift']());}};_0x49d413(++_0x404217);}(a5_0x23b5,0xfc));var a5_0x460d=function(_0x3287d5,_0x153e49){_0x3287d5=_0x3287d5-0x0;var _0x16ec21=a5_0x23b5[_0x3287d5];return _0x16ec21;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1aa068){return _0x1aa068&&_0x1aa068[a5_0x460d('0x0')]?_0x1aa068:{'default':_0x1aa068};};Object[a5_0x460d('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x460d('0x2')));const crypto_1=__importDefault(require(a5_0x460d('0x3')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x460d('0x4'));exports[a5_0x460d('0x5')]=(_0x17ed61,_0x5a52ef)=>{if(_0x17ed61[a5_0x460d('0x6')]){return _0x5a52ef[a5_0x460d('0x7')]('/');}_0x5a52ef[a5_0x460d('0x8')](a5_0x460d('0x9'),{'title':a5_0x460d('0xa')});};exports[a5_0x460d('0xb')]=(_0xe8e7e5,_0x40756a,_0x4d6307)=>{_0xe8e7e5[a5_0x460d('0xc')](a5_0x460d('0xd'),a5_0x460d('0xe'))[a5_0x460d('0xf')]();_0xe8e7e5[a5_0x460d('0xc')](a5_0x460d('0x10'),a5_0x460d('0x11'))[a5_0x460d('0x12')]();_0xe8e7e5[a5_0x460d('0x13')](a5_0x460d('0xd'))[a5_0x460d('0x14')]({'gmail_remove_dots':![]});const _0x37ac51=_0xe8e7e5[a5_0x460d('0x15')]();if(_0x37ac51){_0xe8e7e5[a5_0x460d('0x16')]('errors',_0x37ac51);return _0x40756a[a5_0x460d('0x7')](a5_0x460d('0x17'));}passport_1[a5_0x460d('0x18')][a5_0x460d('0x19')](a5_0x460d('0x1a'),(_0x47f34a,_0x2208ca,_0x5bb057)=>{if(_0x47f34a){return _0x4d6307(_0x47f34a);}if(!_0x2208ca){_0xe8e7e5[a5_0x460d('0x16')](a5_0x460d('0x1b'),_0x5bb057['message']);return _0x40756a[a5_0x460d('0x7')](a5_0x460d('0x17'));}_0xe8e7e5[a5_0x460d('0x1c')](_0x2208ca,_0x47f34a=>{if(_0x47f34a){return _0x4d6307(_0x47f34a);}_0xe8e7e5[a5_0x460d('0x16')]('success',{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x40756a[a5_0x460d('0x7')](_0xe8e7e5[a5_0x460d('0x1d')][a5_0x460d('0x1e')]||'/');});})(_0xe8e7e5,_0x40756a,_0x4d6307);};exports[a5_0x460d('0x1f')]=(_0x453541,_0x11872e)=>{_0x453541[a5_0x460d('0x1f')]();_0x11872e[a5_0x460d('0x7')]('/');};exports[a5_0x460d('0x20')]=(_0x317b5f,_0x1f972c)=>{if(_0x317b5f['user']){return _0x1f972c[a5_0x460d('0x7')]('/');}_0x1f972c['render'](a5_0x460d('0x21'),{'title':a5_0x460d('0x22')});};exports[a5_0x460d('0x23')]=(_0x3c4b34,_0x54a008,_0x203498)=>{_0x3c4b34[a5_0x460d('0xc')](a5_0x460d('0xd'),'Email\x20is\x20not\x20valid')[a5_0x460d('0xf')]();_0x3c4b34['assert'](a5_0x460d('0x10'),a5_0x460d('0x24'))[a5_0x460d('0x25')]({'min':0x4});_0x3c4b34[a5_0x460d('0xc')]('confirmPassword',a5_0x460d('0x26'))[a5_0x460d('0x27')](_0x3c4b34[a5_0x460d('0x28')][a5_0x460d('0x10')]);_0x3c4b34[a5_0x460d('0x13')](a5_0x460d('0xd'))[a5_0x460d('0x14')]({'gmail_remove_dots':![]});const _0x326c8b=_0x3c4b34[a5_0x460d('0x15')]();if(_0x326c8b){_0x3c4b34[a5_0x460d('0x16')](a5_0x460d('0x1b'),_0x326c8b);return _0x54a008['redirect'](a5_0x460d('0x29'));}const _0x33e2f3=new User_1[(a5_0x460d('0x18'))]({'email':_0x3c4b34[a5_0x460d('0x28')][a5_0x460d('0xd')],'password':_0x3c4b34[a5_0x460d('0x28')][a5_0x460d('0x10')]});User_1[a5_0x460d('0x18')][a5_0x460d('0x2a')]({'email':_0x3c4b34[a5_0x460d('0x28')][a5_0x460d('0xd')]},(_0x503b84,_0x28c31c)=>{if(_0x503b84){return _0x203498(_0x503b84);}if(_0x28c31c){_0x3c4b34[a5_0x460d('0x16')](a5_0x460d('0x1b'),{'msg':a5_0x460d('0x2b')});return _0x54a008[a5_0x460d('0x7')](a5_0x460d('0x29'));}_0x33e2f3[a5_0x460d('0x2c')](_0x503b84=>{if(_0x503b84){return _0x203498(_0x503b84);}_0x3c4b34[a5_0x460d('0x1c')](_0x33e2f3,_0x503b84=>{if(_0x503b84){return _0x203498(_0x503b84);}_0x54a008['redirect']('/');});});});};exports['getAccount']=(_0x3fc4b0,_0x443858)=>{_0x443858[a5_0x460d('0x8')]('account/profile',{'title':a5_0x460d('0x2d')});};exports[a5_0x460d('0x2e')]=(_0x213786,_0x1c69e3,_0x15d980)=>{_0x213786[a5_0x460d('0xc')](a5_0x460d('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x460d('0xf')]();_0x213786[a5_0x460d('0x13')]('email')[a5_0x460d('0x14')]({'gmail_remove_dots':![]});const _0x20c4fd=_0x213786['validationErrors']();if(_0x20c4fd){_0x213786[a5_0x460d('0x16')](a5_0x460d('0x1b'),_0x20c4fd);return _0x1c69e3['redirect'](a5_0x460d('0x2f'));}User_1[a5_0x460d('0x18')][a5_0x460d('0x30')](_0x213786[a5_0x460d('0x6')]['id'],(_0x118f63,_0x45b57a)=>{if(_0x118f63){return _0x15d980(_0x118f63);}_0x45b57a[a5_0x460d('0xd')]=_0x213786['body'][a5_0x460d('0xd')]||'';_0x45b57a[a5_0x460d('0x31')]['name']=_0x213786[a5_0x460d('0x28')][a5_0x460d('0x32')]||'';_0x45b57a[a5_0x460d('0x31')][a5_0x460d('0x33')]=_0x213786[a5_0x460d('0x28')][a5_0x460d('0x33')]||'';_0x45b57a[a5_0x460d('0x31')][a5_0x460d('0x34')]=_0x213786['body'][a5_0x460d('0x34')]||'';_0x45b57a[a5_0x460d('0x31')][a5_0x460d('0x35')]=_0x213786[a5_0x460d('0x28')][a5_0x460d('0x35')]||'';_0x45b57a[a5_0x460d('0x2c')](_0x118f63=>{if(_0x118f63){if(_0x118f63[a5_0x460d('0x36')]===0x2af8){_0x213786[a5_0x460d('0x16')]('errors',{'msg':a5_0x460d('0x37')});return _0x1c69e3[a5_0x460d('0x7')](a5_0x460d('0x2f'));}return _0x15d980(_0x118f63);}_0x213786[a5_0x460d('0x16')](a5_0x460d('0x38'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x1c69e3[a5_0x460d('0x7')](a5_0x460d('0x2f'));});});};exports[a5_0x460d('0x39')]=(_0x564058,_0x4c9ef7,_0x2368c6)=>{_0x564058[a5_0x460d('0xc')](a5_0x460d('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x460d('0x25')]({'min':0x4});_0x564058[a5_0x460d('0xc')](a5_0x460d('0x3a'),a5_0x460d('0x26'))['equals'](_0x564058['body'][a5_0x460d('0x10')]);const _0x19beb2=_0x564058[a5_0x460d('0x15')]();if(_0x19beb2){_0x564058['flash'](a5_0x460d('0x1b'),_0x19beb2);return _0x4c9ef7[a5_0x460d('0x7')](a5_0x460d('0x2f'));}User_1['default']['findById'](_0x564058[a5_0x460d('0x6')]['id'],(_0x8f3330,_0x51fa77)=>{if(_0x8f3330){return _0x2368c6(_0x8f3330);}_0x51fa77[a5_0x460d('0x10')]=_0x564058[a5_0x460d('0x28')]['password'];_0x51fa77['save'](_0x8f3330=>{if(_0x8f3330){return _0x2368c6(_0x8f3330);}_0x564058[a5_0x460d('0x16')](a5_0x460d('0x38'),{'msg':a5_0x460d('0x3b')});_0x4c9ef7[a5_0x460d('0x7')]('/account');});});};exports['postDeleteAccount']=(_0x3a937b,_0x5ea9ed,_0x243fcc)=>{User_1[a5_0x460d('0x18')][a5_0x460d('0x3c')]({'_id':_0x3a937b[a5_0x460d('0x6')]['id']},_0x30b799=>{if(_0x30b799){return _0x243fcc(_0x30b799);}_0x3a937b[a5_0x460d('0x1f')]();_0x3a937b[a5_0x460d('0x16')]('info',{'msg':a5_0x460d('0x3d')});_0x5ea9ed[a5_0x460d('0x7')]('/');});};exports['getOauthUnlink']=(_0xede223,_0x48d679,_0x189cbf)=>{const _0x3eed46=_0xede223[a5_0x460d('0x3e')]['provider'];User_1[a5_0x460d('0x18')][a5_0x460d('0x30')](_0xede223[a5_0x460d('0x6')]['id'],(_0x4e6767,_0xd82313)=>{if(_0x4e6767){return _0x189cbf(_0x4e6767);}_0xd82313[_0x3eed46]=undefined;_0xd82313['tokens']=_0xd82313[a5_0x460d('0x3f')][a5_0x460d('0x40')](_0x3eb49c=>_0x3eb49c[a5_0x460d('0x41')]!==_0x3eed46);_0xd82313['save'](_0x4e6767=>{if(_0x4e6767){return _0x189cbf(_0x4e6767);}_0xede223[a5_0x460d('0x16')]('info',{'msg':_0x3eed46+'\x20account\x20has\x20been\x20unlinked.'});_0x48d679[a5_0x460d('0x7')](a5_0x460d('0x2f'));});});};exports[a5_0x460d('0x42')]=(_0x3e8071,_0x5c7829,_0x395ca2)=>{if(_0x3e8071[a5_0x460d('0x43')]()){return _0x5c7829['redirect']('/');}User_1['default']['findOne']({'passwordResetToken':_0x3e8071[a5_0x460d('0x3e')]['token']})['where'](a5_0x460d('0x44'))['gt'](Date['now']())[a5_0x460d('0x45')]((_0xbaf792,_0x16ac0f)=>{if(_0xbaf792){return _0x395ca2(_0xbaf792);}if(!_0x16ac0f){_0x3e8071['flash']('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x5c7829['redirect']('/forgot');}_0x5c7829[a5_0x460d('0x8')]('account/reset',{'title':a5_0x460d('0x46')});});};exports[a5_0x460d('0x47')]=(_0x13e4e5,_0x478be0,_0x3b65e7)=>{_0x13e4e5['assert'](a5_0x460d('0x10'),a5_0x460d('0x48'))[a5_0x460d('0x25')]({'min':0x4});_0x13e4e5[a5_0x460d('0xc')](a5_0x460d('0x49'),a5_0x460d('0x4a'))['equals'](_0x13e4e5[a5_0x460d('0x28')][a5_0x460d('0x10')]);const _0x329b3c=_0x13e4e5[a5_0x460d('0x15')]();if(_0x329b3c){_0x13e4e5[a5_0x460d('0x16')](a5_0x460d('0x1b'),_0x329b3c);return _0x478be0[a5_0x460d('0x7')](a5_0x460d('0x4b'));}async_1[a5_0x460d('0x18')][a5_0x460d('0x4c')]([function resetPassword(_0x120537){User_1[a5_0x460d('0x18')][a5_0x460d('0x2a')]({'passwordResetToken':_0x13e4e5['params'][a5_0x460d('0x4d')]})[a5_0x460d('0x4e')](a5_0x460d('0x44'))['gt'](Date[a5_0x460d('0x4f')]())[a5_0x460d('0x45')]((_0x95c4c7,_0x887415)=>{if(_0x95c4c7){return _0x3b65e7(_0x95c4c7);}if(!_0x887415){_0x13e4e5['flash'](a5_0x460d('0x1b'),{'msg':a5_0x460d('0x50')});return _0x478be0[a5_0x460d('0x7')]('back');}_0x887415[a5_0x460d('0x10')]=_0x13e4e5[a5_0x460d('0x28')][a5_0x460d('0x10')];_0x887415[a5_0x460d('0x51')]=undefined;_0x887415[a5_0x460d('0x44')]=undefined;_0x887415[a5_0x460d('0x2c')](_0x95c4c7=>{if(_0x95c4c7){return _0x3b65e7(_0x95c4c7);}_0x13e4e5[a5_0x460d('0x1c')](_0x887415,_0x95c4c7=>{_0x120537(_0x95c4c7,_0x887415);});});});},function sendResetPasswordEmail(_0x4b6d02,_0x52b9d8){const _0x42c4dd=nodemailer_1['default'][a5_0x460d('0x52')]({'service':'SendGrid','auth':{'user':process[a5_0x460d('0x53')][a5_0x460d('0x54')],'pass':process['env'][a5_0x460d('0x55')]}});const _0x1002fb={'to':_0x4b6d02[a5_0x460d('0xd')],'from':a5_0x460d('0x56'),'subject':a5_0x460d('0x57'),'text':a5_0x460d('0x58')+_0x4b6d02[a5_0x460d('0xd')]+a5_0x460d('0x59')};_0x42c4dd[a5_0x460d('0x5a')](_0x1002fb,_0x5526dd=>{_0x13e4e5['flash']('success',{'msg':a5_0x460d('0x5b')});_0x52b9d8(_0x5526dd);});}],_0xb4e3c2=>{if(_0xb4e3c2){return _0x3b65e7(_0xb4e3c2);}_0x478be0[a5_0x460d('0x7')]('/');});};exports[a5_0x460d('0x5c')]=(_0x2c3b53,_0x5c84c0)=>{if(_0x2c3b53[a5_0x460d('0x43')]()){return _0x5c84c0[a5_0x460d('0x7')]('/');}_0x5c84c0[a5_0x460d('0x8')](a5_0x460d('0x5d'),{'title':a5_0x460d('0x5e')});};exports[a5_0x460d('0x5f')]=(_0x39ea54,_0x5e6c73,_0x50ba4b)=>{_0x39ea54['assert'](a5_0x460d('0xd'),a5_0x460d('0x60'))[a5_0x460d('0xf')]();_0x39ea54[a5_0x460d('0x13')](a5_0x460d('0xd'))[a5_0x460d('0x14')]({'gmail_remove_dots':![]});const _0x5a4a75=_0x39ea54[a5_0x460d('0x15')]();if(_0x5a4a75){_0x39ea54[a5_0x460d('0x16')](a5_0x460d('0x1b'),_0x5a4a75);return _0x5e6c73[a5_0x460d('0x7')]('/forgot');}async_1[a5_0x460d('0x18')][a5_0x460d('0x4c')]([function createRandomToken(_0x3b8976){crypto_1[a5_0x460d('0x18')][a5_0x460d('0x61')](0x10,(_0x5b4da9,_0x150935)=>{const _0x4860c9=_0x150935[a5_0x460d('0x62')](a5_0x460d('0x63'));_0x3b8976(_0x5b4da9,_0x4860c9);});},function setRandomToken(_0x31fdb4,_0x136449){User_1[a5_0x460d('0x18')][a5_0x460d('0x2a')]({'email':_0x39ea54[a5_0x460d('0x28')][a5_0x460d('0xd')]},(_0x458661,_0x4e05a3)=>{if(_0x458661){return _0x136449(_0x458661);}if(!_0x4e05a3){_0x39ea54[a5_0x460d('0x16')](a5_0x460d('0x1b'),{'msg':a5_0x460d('0x64')});return _0x5e6c73['redirect'](a5_0x460d('0x65'));}_0x4e05a3[a5_0x460d('0x51')]=_0x31fdb4;_0x4e05a3[a5_0x460d('0x44')]=Date[a5_0x460d('0x4f')]()+0x36ee80;_0x4e05a3[a5_0x460d('0x2c')](_0x458661=>{_0x136449(_0x458661,_0x31fdb4,_0x4e05a3);});});},function sendForgotPasswordEmail(_0x1a37b1,_0x36e458,_0x5cdb76){const _0x52f2ab=nodemailer_1[a5_0x460d('0x18')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0x460d('0x53')][a5_0x460d('0x54')],'pass':process['env'][a5_0x460d('0x55')]}});const _0x4d3e53={'to':_0x36e458[a5_0x460d('0xd')],'from':a5_0x460d('0x66'),'subject':a5_0x460d('0x67'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x39ea54[a5_0x460d('0x68')]['host']+a5_0x460d('0x69')+_0x1a37b1+a5_0x460d('0x6a')};_0x52f2ab[a5_0x460d('0x5a')](_0x4d3e53,_0x32d7a1=>{_0x39ea54['flash']('info',{'msg':a5_0x460d('0x6b')+_0x36e458[a5_0x460d('0xd')]+a5_0x460d('0x6c')});_0x5cdb76(_0x32d7a1);});}],_0x265c9e=>{if(_0x265c9e){return _0x50ba4b(_0x265c9e);}_0x5e6c73['redirect'](a5_0x460d('0x65'));});};