var a5_0x1a33=['findById','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','passwordResetExpires','now','exec','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','where','passwordResetToken','createTransport','env','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','getForgot','account/forgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','authenticate','local','logIn','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','postSignup','email','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','/signup','default','findOne','body','save','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','params'];(function(_0x4fdde9,_0x42aace){var _0x3b7dfb=function(_0x1d9593){while(--_0x1d9593){_0x4fdde9['push'](_0x4fdde9['shift']());}};_0x3b7dfb(++_0x42aace);}(a5_0x1a33,0x1cb));var a5_0x5559=function(_0x4e948d,_0xeacc44){_0x4e948d=_0x4e948d-0x0;var _0x523ff1=a5_0x1a33[_0x4e948d];return _0x523ff1;};'use strict';var __importDefault=this&&this[a5_0x5559('0x0')]||function(_0x15a60f){return _0x15a60f&&_0x15a60f[a5_0x5559('0x1')]?_0x15a60f:{'default':_0x15a60f};};Object[a5_0x5559('0x2')](exports,a5_0x5559('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x5559('0x3')));const crypto_1=__importDefault(require(a5_0x5559('0x4')));const nodemailer_1=__importDefault(require(a5_0x5559('0x5')));const passport_1=__importDefault(require(a5_0x5559('0x6')));const User_1=__importDefault(require(a5_0x5559('0x7')));const request=require(a5_0x5559('0x8'));exports[a5_0x5559('0x9')]=(_0x597a26,_0x12d6a3)=>{if(_0x597a26[a5_0x5559('0xa')]){return _0x12d6a3[a5_0x5559('0xb')]('/');}_0x12d6a3[a5_0x5559('0xc')]('account/login',{'title':a5_0x5559('0xd')});};exports[a5_0x5559('0xe')]=(_0x2386ec,_0x106e16,_0x108285)=>{_0x2386ec[a5_0x5559('0xf')]('email',a5_0x5559('0x10'))[a5_0x5559('0x11')]();_0x2386ec[a5_0x5559('0xf')]('password',a5_0x5559('0x12'))[a5_0x5559('0x13')]();_0x2386ec[a5_0x5559('0x14')]('email')[a5_0x5559('0x15')]({'gmail_remove_dots':![]});const _0x299f57=_0x2386ec[a5_0x5559('0x16')]();if(_0x299f57){_0x2386ec[a5_0x5559('0x17')](a5_0x5559('0x18'),_0x299f57);return _0x106e16[a5_0x5559('0xb')](a5_0x5559('0x19'));}passport_1['default'][a5_0x5559('0x1a')](a5_0x5559('0x1b'),(_0x1fb769,_0x229b38,_0x412b2a)=>{if(_0x1fb769){return _0x108285(_0x1fb769);}if(!_0x229b38){_0x2386ec[a5_0x5559('0x17')](a5_0x5559('0x18'),_0x412b2a['message']);return _0x106e16[a5_0x5559('0xb')](a5_0x5559('0x19'));}_0x2386ec[a5_0x5559('0x1c')](_0x229b38,_0x1fb769=>{if(_0x1fb769){return _0x108285(_0x1fb769);}_0x2386ec[a5_0x5559('0x17')]('success',{'msg':a5_0x5559('0x1d')});_0x106e16[a5_0x5559('0xb')](_0x2386ec['session'][a5_0x5559('0x1e')]||'/');});})(_0x2386ec,_0x106e16,_0x108285);};exports[a5_0x5559('0x1f')]=(_0x4e5ae5,_0x6c6a0b)=>{_0x4e5ae5[a5_0x5559('0x1f')]();_0x6c6a0b['redirect']('/');};exports[a5_0x5559('0x20')]=(_0x543e7a,_0x2e9290)=>{if(_0x543e7a[a5_0x5559('0xa')]){return _0x2e9290[a5_0x5559('0xb')]('/');}_0x2e9290['render'](a5_0x5559('0x21'),{'title':'Create\x20Account'});};exports[a5_0x5559('0x22')]=(_0x1d5d0b,_0x113043,_0x523916)=>{_0x1d5d0b[a5_0x5559('0xf')](a5_0x5559('0x23'),a5_0x5559('0x10'))['isEmail']();_0x1d5d0b[a5_0x5559('0xf')](a5_0x5559('0x24'),a5_0x5559('0x25'))['len']({'min':0x4});_0x1d5d0b[a5_0x5559('0xf')]('confirmPassword',a5_0x5559('0x26'))[a5_0x5559('0x27')](_0x1d5d0b['body'][a5_0x5559('0x24')]);_0x1d5d0b[a5_0x5559('0x14')](a5_0x5559('0x23'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x35d4c4=_0x1d5d0b[a5_0x5559('0x16')]();if(_0x35d4c4){_0x1d5d0b['flash'](a5_0x5559('0x18'),_0x35d4c4);return _0x113043['redirect'](a5_0x5559('0x28'));}const _0x526ba9=new User_1[(a5_0x5559('0x29'))]({});User_1[a5_0x5559('0x29')][a5_0x5559('0x2a')]({'email':_0x1d5d0b[a5_0x5559('0x2b')][a5_0x5559('0x23')]},(_0x410968,_0x1e13d5)=>{if(_0x410968){return _0x523916(_0x410968);}if(_0x1e13d5){_0x1d5d0b[a5_0x5559('0x17')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x113043['redirect']('/signup');}_0x526ba9[a5_0x5559('0x2c')](_0x410968=>{if(_0x410968){return _0x523916(_0x410968);}_0x1d5d0b[a5_0x5559('0x1c')](_0x526ba9,_0x410968=>{if(_0x410968){return _0x523916(_0x410968);}_0x113043[a5_0x5559('0xb')]('/');});});});};exports[a5_0x5559('0x2d')]=(_0x5ac39f,_0x40d982)=>{_0x40d982['render'](a5_0x5559('0x2e'),{'title':'Account\x20Management'});};exports[a5_0x5559('0x2f')]=(_0x528a71,_0x38f0ad,_0x9c6b86)=>{_0x528a71[a5_0x5559('0xf')]('email',a5_0x5559('0x30'))[a5_0x5559('0x11')]();_0x528a71['sanitize'](a5_0x5559('0x23'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x24365e=_0x528a71[a5_0x5559('0x16')]();if(_0x24365e){_0x528a71[a5_0x5559('0x17')]('errors',_0x24365e);return _0x38f0ad[a5_0x5559('0xb')](a5_0x5559('0x31'));}User_1[a5_0x5559('0x29')]['findById'](_0x528a71[a5_0x5559('0xa')]['id'],(_0x19e9d6,_0xa1310e)=>{if(_0x19e9d6){return _0x9c6b86(_0x19e9d6);}_0xa1310e[a5_0x5559('0x23')]=_0x528a71[a5_0x5559('0x2b')][a5_0x5559('0x23')]||'';_0xa1310e[a5_0x5559('0x32')][a5_0x5559('0x33')]=_0x528a71['body']['name']||'';_0xa1310e[a5_0x5559('0x32')][a5_0x5559('0x34')]=_0x528a71[a5_0x5559('0x2b')][a5_0x5559('0x34')]||'';_0xa1310e[a5_0x5559('0x32')][a5_0x5559('0x35')]=_0x528a71[a5_0x5559('0x2b')][a5_0x5559('0x35')]||'';_0xa1310e[a5_0x5559('0x32')]['website']=_0x528a71['body'][a5_0x5559('0x36')]||'';_0xa1310e['save'](_0x19e9d6=>{if(_0x19e9d6){if(_0x19e9d6[a5_0x5559('0x37')]===0x2af8){_0x528a71['flash'](a5_0x5559('0x18'),{'msg':a5_0x5559('0x38')});return _0x38f0ad[a5_0x5559('0xb')](a5_0x5559('0x31'));}return _0x9c6b86(_0x19e9d6);}_0x528a71[a5_0x5559('0x17')](a5_0x5559('0x39'),{'msg':a5_0x5559('0x3a')});_0x38f0ad[a5_0x5559('0xb')](a5_0x5559('0x31'));});});};exports[a5_0x5559('0x3b')]=(_0x531586,_0x30759d,_0x4012b3)=>{_0x531586[a5_0x5559('0xf')](a5_0x5559('0x24'),a5_0x5559('0x25'))['len']({'min':0x4});_0x531586['assert'](a5_0x5559('0x3c'),a5_0x5559('0x26'))[a5_0x5559('0x27')](_0x531586[a5_0x5559('0x2b')][a5_0x5559('0x24')]);const _0x4e7aa1=_0x531586[a5_0x5559('0x16')]();if(_0x4e7aa1){_0x531586[a5_0x5559('0x17')]('errors',_0x4e7aa1);return _0x30759d['redirect'](a5_0x5559('0x31'));}User_1[a5_0x5559('0x29')]['findById'](_0x531586['user']['id'],(_0x1089e5,_0x12c35f)=>{if(_0x1089e5){return _0x4012b3(_0x1089e5);}_0x12c35f[a5_0x5559('0x24')]=_0x531586[a5_0x5559('0x2b')][a5_0x5559('0x24')];_0x12c35f[a5_0x5559('0x2c')](_0x1089e5=>{if(_0x1089e5){return _0x4012b3(_0x1089e5);}_0x531586[a5_0x5559('0x17')](a5_0x5559('0x39'),{'msg':a5_0x5559('0x3d')});_0x30759d[a5_0x5559('0xb')]('/account');});});};exports[a5_0x5559('0x3e')]=(_0x1cf063,_0x1eb2c0,_0x49c6a7)=>{User_1[a5_0x5559('0x29')][a5_0x5559('0x3f')]({'_id':_0x1cf063[a5_0x5559('0xa')]['id']},_0x3d19f1=>{if(_0x3d19f1){return _0x49c6a7(_0x3d19f1);}_0x1cf063['logout']();_0x1cf063[a5_0x5559('0x17')]('info',{'msg':a5_0x5559('0x40')});_0x1eb2c0[a5_0x5559('0xb')]('/');});};exports['getOauthUnlink']=(_0x2de77b,_0x3e0804,_0x15b0ae)=>{const _0x52f507=_0x2de77b[a5_0x5559('0x41')]['provider'];User_1[a5_0x5559('0x29')][a5_0x5559('0x42')](_0x2de77b[a5_0x5559('0xa')]['id'],(_0x51f4df,_0x4d146e)=>{if(_0x51f4df){return _0x15b0ae(_0x51f4df);}_0x4d146e[_0x52f507]=undefined;_0x4d146e['tokens']=_0x4d146e[a5_0x5559('0x43')][a5_0x5559('0x44')](_0x32c61d=>_0x32c61d[a5_0x5559('0x45')]!==_0x52f507);_0x4d146e[a5_0x5559('0x2c')](_0x51f4df=>{if(_0x51f4df){return _0x15b0ae(_0x51f4df);}_0x2de77b[a5_0x5559('0x17')](a5_0x5559('0x46'),{'msg':_0x52f507+a5_0x5559('0x47')});_0x3e0804[a5_0x5559('0xb')](a5_0x5559('0x31'));});});};exports['getReset']=(_0x5f4856,_0x5c6840,_0x11a272)=>{if(_0x5f4856[a5_0x5559('0x48')]()){return _0x5c6840[a5_0x5559('0xb')]('/');}User_1[a5_0x5559('0x29')][a5_0x5559('0x2a')]({'passwordResetToken':_0x5f4856[a5_0x5559('0x41')][a5_0x5559('0x49')]})['where'](a5_0x5559('0x4a'))['gt'](Date[a5_0x5559('0x4b')]())[a5_0x5559('0x4c')]((_0x45a7f5,_0x8d9479)=>{if(_0x45a7f5){return _0x11a272(_0x45a7f5);}if(!_0x8d9479){_0x5f4856[a5_0x5559('0x17')](a5_0x5559('0x18'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x5c6840[a5_0x5559('0xb')](a5_0x5559('0x4d'));}_0x5c6840[a5_0x5559('0xc')]('account/reset',{'title':a5_0x5559('0x4e')});});};exports[a5_0x5559('0x4f')]=(_0x2be1c4,_0x150aac,_0xb33a3a)=>{_0x2be1c4[a5_0x5559('0xf')](a5_0x5559('0x24'),a5_0x5559('0x50'))['len']({'min':0x4});_0x2be1c4[a5_0x5559('0xf')](a5_0x5559('0x51'),a5_0x5559('0x52'))['equals'](_0x2be1c4[a5_0x5559('0x2b')][a5_0x5559('0x24')]);const _0x43798c=_0x2be1c4[a5_0x5559('0x16')]();if(_0x43798c){_0x2be1c4[a5_0x5559('0x17')](a5_0x5559('0x18'),_0x43798c);return _0x150aac['redirect'](a5_0x5559('0x53'));}async_1[a5_0x5559('0x29')][a5_0x5559('0x54')]([function resetPassword(_0x5a4b51){User_1[a5_0x5559('0x29')][a5_0x5559('0x2a')]({'passwordResetToken':_0x2be1c4[a5_0x5559('0x41')][a5_0x5559('0x49')]})[a5_0x5559('0x55')](a5_0x5559('0x4a'))['gt'](Date[a5_0x5559('0x4b')]())[a5_0x5559('0x4c')]((_0x3b7805,_0x4b02cf)=>{if(_0x3b7805){return _0xb33a3a(_0x3b7805);}if(!_0x4b02cf){_0x2be1c4[a5_0x5559('0x17')](a5_0x5559('0x18'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x150aac['redirect'](a5_0x5559('0x53'));}_0x4b02cf[a5_0x5559('0x24')]=_0x2be1c4['body'][a5_0x5559('0x24')];_0x4b02cf[a5_0x5559('0x56')]=undefined;_0x4b02cf[a5_0x5559('0x4a')]=undefined;_0x4b02cf[a5_0x5559('0x2c')](_0x3b7805=>{if(_0x3b7805){return _0xb33a3a(_0x3b7805);}_0x2be1c4[a5_0x5559('0x1c')](_0x4b02cf,_0x3b7805=>{_0x5a4b51(_0x3b7805,_0x4b02cf);});});});},function sendResetPasswordEmail(_0x5c0a94,_0x43d09a){const _0x318565=nodemailer_1['default'][a5_0x5559('0x57')]({'service':'SendGrid','auth':{'user':process[a5_0x5559('0x58')]['SENDGRID_USER'],'pass':process[a5_0x5559('0x58')][a5_0x5559('0x59')]}});const _0x2888e1={'to':_0x5c0a94[a5_0x5559('0x23')],'from':'express-ts@starter.com','subject':a5_0x5559('0x5a'),'text':a5_0x5559('0x5b')+_0x5c0a94[a5_0x5559('0x23')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x318565[a5_0x5559('0x5c')](_0x2888e1,_0x564029=>{_0x2be1c4[a5_0x5559('0x17')](a5_0x5559('0x39'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x43d09a(_0x564029);});}],_0x108ff1=>{if(_0x108ff1){return _0xb33a3a(_0x108ff1);}_0x150aac['redirect']('/');});};exports[a5_0x5559('0x5d')]=(_0x2f053a,_0x514001)=>{if(_0x2f053a[a5_0x5559('0x48')]()){return _0x514001[a5_0x5559('0xb')]('/');}_0x514001[a5_0x5559('0xc')](a5_0x5559('0x5e'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x2a82b0,_0x2c23bd,_0x598011)=>{_0x2a82b0['assert'](a5_0x5559('0x23'),a5_0x5559('0x30'))[a5_0x5559('0x11')]();_0x2a82b0[a5_0x5559('0x14')](a5_0x5559('0x23'))[a5_0x5559('0x15')]({'gmail_remove_dots':![]});const _0x243a84=_0x2a82b0[a5_0x5559('0x16')]();if(_0x243a84){_0x2a82b0[a5_0x5559('0x17')](a5_0x5559('0x18'),_0x243a84);return _0x2c23bd[a5_0x5559('0xb')]('/forgot');}async_1[a5_0x5559('0x29')][a5_0x5559('0x54')]([function createRandomToken(_0x3babfe){crypto_1[a5_0x5559('0x29')][a5_0x5559('0x5f')](0x10,(_0x5cc2cf,_0x636076)=>{const _0x59ae23=_0x636076['toString'](a5_0x5559('0x60'));_0x3babfe(_0x5cc2cf,_0x59ae23);});},function setRandomToken(_0x3ce170,_0x47c329){User_1['default'][a5_0x5559('0x2a')]({'email':_0x2a82b0[a5_0x5559('0x2b')][a5_0x5559('0x23')]},(_0x5b5684,_0x56f0ef)=>{if(_0x5b5684){return _0x47c329(_0x5b5684);}if(!_0x56f0ef){_0x2a82b0[a5_0x5559('0x17')](a5_0x5559('0x18'),{'msg':a5_0x5559('0x61')});return _0x2c23bd[a5_0x5559('0xb')]('/forgot');}_0x56f0ef[a5_0x5559('0x56')]=_0x3ce170;_0x56f0ef[a5_0x5559('0x4a')]=Date[a5_0x5559('0x4b')]()+0x36ee80;_0x56f0ef['save'](_0x5b5684=>{_0x47c329(_0x5b5684,_0x3ce170,_0x56f0ef);});});},function sendForgotPasswordEmail(_0x277499,_0xf3bf4b,_0x2382e1){const _0x54d599=nodemailer_1[a5_0x5559('0x29')][a5_0x5559('0x57')]({'service':a5_0x5559('0x62'),'auth':{'user':process[a5_0x5559('0x58')]['SENDGRID_USER'],'pass':process[a5_0x5559('0x58')][a5_0x5559('0x59')]}});const _0x488354={'to':_0xf3bf4b[a5_0x5559('0x23')],'from':a5_0x5559('0x63'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x5559('0x64')+_0x2a82b0['headers'][a5_0x5559('0x65')]+a5_0x5559('0x66')+_0x277499+a5_0x5559('0x67')};_0x54d599[a5_0x5559('0x5c')](_0x488354,_0x1195d1=>{_0x2a82b0[a5_0x5559('0x17')](a5_0x5559('0x46'),{'msg':a5_0x5559('0x68')+_0xf3bf4b['email']+'\x20with\x20further\x20instructions.'});_0x2382e1(_0x1195d1);});}],_0x272b18=>{if(_0x272b18){return _0x598011(_0x272b18);}_0x2c23bd[a5_0x5559('0xb')]('/forgot');});};