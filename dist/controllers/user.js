var a5_0x4016=['remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','info','getReset','token','passwordResetExpires','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','where','back','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','isAuthenticated','Forgot\x20Password','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','now','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','async','crypto','nodemailer','passport','../models/User','getLogin','user','redirect','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','flash','errors','/login','authenticate','local','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','validationErrors','default','body','findOne','/signup','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','sanitize','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount'];(function(_0x320df8,_0x2455f7){var _0x4bb8c8=function(_0x29c3aa){while(--_0x29c3aa){_0x320df8['push'](_0x320df8['shift']());}};_0x4bb8c8(++_0x2455f7);}(a5_0x4016,0x9d));var a5_0x1986=function(_0x4c9ea7,_0x586ded){_0x4c9ea7=_0x4c9ea7-0x0;var _0x139afb=a5_0x4016[_0x4c9ea7];return _0x139afb;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2006b7){return _0x2006b7&&_0x2006b7[a5_0x1986('0x0')]?_0x2006b7:{'default':_0x2006b7};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x1986('0x1')));const crypto_1=__importDefault(require(a5_0x1986('0x2')));const nodemailer_1=__importDefault(require(a5_0x1986('0x3')));const passport_1=__importDefault(require(a5_0x1986('0x4')));const User_1=__importDefault(require(a5_0x1986('0x5')));const request=require('express-validator');exports[a5_0x1986('0x6')]=(_0x30afb2,_0x11813b)=>{if(_0x30afb2[a5_0x1986('0x7')]){return _0x11813b[a5_0x1986('0x8')]('/');}_0x11813b[a5_0x1986('0x9')](a5_0x1986('0xa'),{'title':'Login'});};exports[a5_0x1986('0xb')]=(_0x2c36f8,_0xe7342d,_0x1110ac)=>{_0x2c36f8[a5_0x1986('0xc')](a5_0x1986('0xd'),a5_0x1986('0xe'))[a5_0x1986('0xf')]();_0x2c36f8[a5_0x1986('0xc')](a5_0x1986('0x10'),a5_0x1986('0x11'))[a5_0x1986('0x12')]();_0x2c36f8['sanitize']('email')[a5_0x1986('0x13')]({'gmail_remove_dots':![]});const _0x3bc5b4=_0x2c36f8['validationErrors']();if(_0x3bc5b4){_0x2c36f8[a5_0x1986('0x14')](a5_0x1986('0x15'),_0x3bc5b4);return _0xe7342d[a5_0x1986('0x8')](a5_0x1986('0x16'));}passport_1['default'][a5_0x1986('0x17')](a5_0x1986('0x18'),(_0x4b6ecc,_0x721782,_0x2277d4)=>{if(_0x4b6ecc){return _0x1110ac(_0x4b6ecc);}if(!_0x721782){_0x2c36f8[a5_0x1986('0x14')](a5_0x1986('0x15'),_0x2277d4['message']);return _0xe7342d[a5_0x1986('0x8')]('/login');}_0x2c36f8[a5_0x1986('0x19')](_0x721782,_0x4b6ecc=>{if(_0x4b6ecc){return _0x1110ac(_0x4b6ecc);}_0x2c36f8[a5_0x1986('0x14')](a5_0x1986('0x1a'),{'msg':a5_0x1986('0x1b')});_0xe7342d[a5_0x1986('0x8')](_0x2c36f8['session'][a5_0x1986('0x1c')]||'/');});})(_0x2c36f8,_0xe7342d,_0x1110ac);};exports[a5_0x1986('0x1d')]=(_0x3cbafd,_0x4b98a6)=>{_0x3cbafd[a5_0x1986('0x1d')]();_0x4b98a6['redirect']('/');};exports[a5_0x1986('0x1e')]=(_0x1e7dad,_0xbfef96)=>{if(_0x1e7dad[a5_0x1986('0x7')]){return _0xbfef96[a5_0x1986('0x8')]('/');}_0xbfef96[a5_0x1986('0x9')](a5_0x1986('0x1f'),{'title':'Create\x20Account'});};exports[a5_0x1986('0x20')]=(_0xb09f2d,_0x33f47c,_0x51e6c2)=>{_0xb09f2d['assert'](a5_0x1986('0xd'),a5_0x1986('0xe'))[a5_0x1986('0xf')]();_0xb09f2d[a5_0x1986('0xc')](a5_0x1986('0x10'),a5_0x1986('0x21'))[a5_0x1986('0x22')]({'min':0x4});_0xb09f2d[a5_0x1986('0xc')](a5_0x1986('0x23'),a5_0x1986('0x24'))[a5_0x1986('0x25')](_0xb09f2d['body'][a5_0x1986('0x10')]);_0xb09f2d['sanitize'](a5_0x1986('0xd'))[a5_0x1986('0x13')]({'gmail_remove_dots':![]});const _0x247c62=_0xb09f2d[a5_0x1986('0x26')]();if(_0x247c62){_0xb09f2d['flash'](a5_0x1986('0x15'),_0x247c62);return _0x33f47c['redirect']('/signup');}const _0x1b6dbd=new User_1[(a5_0x1986('0x27'))]({'email':_0xb09f2d['body'][a5_0x1986('0xd')],'password':_0xb09f2d[a5_0x1986('0x28')][a5_0x1986('0x10')]});User_1['default'][a5_0x1986('0x29')]({'email':_0xb09f2d[a5_0x1986('0x28')][a5_0x1986('0xd')]},(_0x1572a9,_0xb776d)=>{if(_0x1572a9){return _0x51e6c2(_0x1572a9);}if(_0xb776d){_0xb09f2d[a5_0x1986('0x14')](a5_0x1986('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x33f47c[a5_0x1986('0x8')](a5_0x1986('0x2a'));}_0x1b6dbd[a5_0x1986('0x2b')](_0x1572a9=>{if(_0x1572a9){return _0x51e6c2(_0x1572a9);}_0xb09f2d[a5_0x1986('0x19')](_0x1b6dbd,_0x1572a9=>{if(_0x1572a9){return _0x51e6c2(_0x1572a9);}_0x33f47c[a5_0x1986('0x8')]('/');});});});};exports['getAccount']=(_0xdacc8e,_0x553ebf)=>{_0x553ebf[a5_0x1986('0x9')](a5_0x1986('0x2c'),{'title':a5_0x1986('0x2d')});};exports[a5_0x1986('0x2e')]=(_0x24f90f,_0x54df2a,_0x2f9038)=>{_0x24f90f[a5_0x1986('0xc')](a5_0x1986('0xd'),a5_0x1986('0x2f'))[a5_0x1986('0xf')]();_0x24f90f[a5_0x1986('0x30')](a5_0x1986('0xd'))[a5_0x1986('0x13')]({'gmail_remove_dots':![]});const _0x4fa163=_0x24f90f[a5_0x1986('0x26')]();if(_0x4fa163){_0x24f90f[a5_0x1986('0x14')](a5_0x1986('0x15'),_0x4fa163);return _0x54df2a['redirect']('/account');}User_1['default'][a5_0x1986('0x31')](_0x24f90f[a5_0x1986('0x7')]['id'],(_0x32f791,_0x5a89e9)=>{if(_0x32f791){return _0x2f9038(_0x32f791);}_0x5a89e9['email']=_0x24f90f['body'][a5_0x1986('0xd')]||'';_0x5a89e9[a5_0x1986('0x32')][a5_0x1986('0x33')]=_0x24f90f[a5_0x1986('0x28')][a5_0x1986('0x33')]||'';_0x5a89e9['profile'][a5_0x1986('0x34')]=_0x24f90f['body'][a5_0x1986('0x34')]||'';_0x5a89e9[a5_0x1986('0x32')][a5_0x1986('0x35')]=_0x24f90f[a5_0x1986('0x28')]['location']||'';_0x5a89e9[a5_0x1986('0x32')][a5_0x1986('0x36')]=_0x24f90f[a5_0x1986('0x28')][a5_0x1986('0x36')]||'';_0x5a89e9[a5_0x1986('0x2b')](_0x32f791=>{if(_0x32f791){if(_0x32f791['code']===0x2af8){_0x24f90f['flash'](a5_0x1986('0x15'),{'msg':a5_0x1986('0x37')});return _0x54df2a[a5_0x1986('0x8')](a5_0x1986('0x38'));}return _0x2f9038(_0x32f791);}_0x24f90f['flash'](a5_0x1986('0x1a'),{'msg':a5_0x1986('0x39')});_0x54df2a[a5_0x1986('0x8')](a5_0x1986('0x38'));});});};exports[a5_0x1986('0x3a')]=(_0x140c7f,_0x83981,_0x59a9fe)=>{_0x140c7f[a5_0x1986('0xc')](a5_0x1986('0x10'),a5_0x1986('0x21'))['len']({'min':0x4});_0x140c7f[a5_0x1986('0xc')]('confirmPassword','Passwords\x20do\x20not\x20match')[a5_0x1986('0x25')](_0x140c7f[a5_0x1986('0x28')]['password']);const _0x1dba73=_0x140c7f[a5_0x1986('0x26')]();if(_0x1dba73){_0x140c7f[a5_0x1986('0x14')](a5_0x1986('0x15'),_0x1dba73);return _0x83981[a5_0x1986('0x8')](a5_0x1986('0x38'));}User_1[a5_0x1986('0x27')][a5_0x1986('0x31')](_0x140c7f[a5_0x1986('0x7')]['id'],(_0x36a7bf,_0x2468ae)=>{if(_0x36a7bf){return _0x59a9fe(_0x36a7bf);}_0x2468ae[a5_0x1986('0x10')]=_0x140c7f[a5_0x1986('0x28')][a5_0x1986('0x10')];_0x2468ae[a5_0x1986('0x2b')](_0x36a7bf=>{if(_0x36a7bf){return _0x59a9fe(_0x36a7bf);}_0x140c7f[a5_0x1986('0x14')](a5_0x1986('0x1a'),{'msg':a5_0x1986('0x3b')});_0x83981['redirect'](a5_0x1986('0x38'));});});};exports[a5_0x1986('0x3c')]=(_0x4f2fe3,_0x32a347,_0x1edec0)=>{User_1['default'][a5_0x1986('0x3d')]({'_id':_0x4f2fe3[a5_0x1986('0x7')]['id']},_0x4ef629=>{if(_0x4ef629){return _0x1edec0(_0x4ef629);}_0x4f2fe3[a5_0x1986('0x1d')]();_0x4f2fe3[a5_0x1986('0x14')]('info',{'msg':a5_0x1986('0x3e')});_0x32a347[a5_0x1986('0x8')]('/');});};exports[a5_0x1986('0x3f')]=(_0x4ca8fe,_0x2da7e0,_0x5c5d1b)=>{const _0x5dfa16=_0x4ca8fe[a5_0x1986('0x40')][a5_0x1986('0x41')];User_1[a5_0x1986('0x27')][a5_0x1986('0x31')](_0x4ca8fe[a5_0x1986('0x7')]['id'],(_0x22c226,_0x135650)=>{if(_0x22c226){return _0x5c5d1b(_0x22c226);}_0x135650[_0x5dfa16]=undefined;_0x135650[a5_0x1986('0x42')]=_0x135650[a5_0x1986('0x42')][a5_0x1986('0x43')](_0x480462=>_0x480462[a5_0x1986('0x44')]!==_0x5dfa16);_0x135650[a5_0x1986('0x2b')](_0x22c226=>{if(_0x22c226){return _0x5c5d1b(_0x22c226);}_0x4ca8fe[a5_0x1986('0x14')](a5_0x1986('0x45'),{'msg':_0x5dfa16+'\x20account\x20has\x20been\x20unlinked.'});_0x2da7e0['redirect'](a5_0x1986('0x38'));});});};exports[a5_0x1986('0x46')]=(_0x13b0f1,_0x2a2a43,_0x117325)=>{if(_0x13b0f1['isAuthenticated']()){return _0x2a2a43[a5_0x1986('0x8')]('/');}User_1['default'][a5_0x1986('0x29')]({'passwordResetToken':_0x13b0f1[a5_0x1986('0x40')][a5_0x1986('0x47')]})['where'](a5_0x1986('0x48'))['gt'](Date['now']())[a5_0x1986('0x49')]((_0x4497bc,_0x457568)=>{if(_0x4497bc){return _0x117325(_0x4497bc);}if(!_0x457568){_0x13b0f1[a5_0x1986('0x14')]('errors',{'msg':a5_0x1986('0x4a')});return _0x2a2a43[a5_0x1986('0x8')](a5_0x1986('0x4b'));}_0x2a2a43['render'](a5_0x1986('0x4c'),{'title':'Password\x20Reset'});});};exports[a5_0x1986('0x4d')]=(_0x8a3f81,_0x205bfd,_0x5abba1)=>{_0x8a3f81[a5_0x1986('0xc')](a5_0x1986('0x10'),a5_0x1986('0x4e'))[a5_0x1986('0x22')]({'min':0x4});_0x8a3f81[a5_0x1986('0xc')](a5_0x1986('0x4f'),'Passwords\x20must\x20match.')[a5_0x1986('0x25')](_0x8a3f81[a5_0x1986('0x28')][a5_0x1986('0x10')]);const _0x486fd6=_0x8a3f81[a5_0x1986('0x26')]();if(_0x486fd6){_0x8a3f81['flash']('errors',_0x486fd6);return _0x205bfd[a5_0x1986('0x8')]('back');}async_1['default']['waterfall']([function resetPassword(_0x14b82a){User_1[a5_0x1986('0x27')][a5_0x1986('0x29')]({'passwordResetToken':_0x8a3f81['params'][a5_0x1986('0x47')]})[a5_0x1986('0x50')]('passwordResetExpires')['gt'](Date['now']())[a5_0x1986('0x49')]((_0x3f70dc,_0x419a44)=>{if(_0x3f70dc){return _0x5abba1(_0x3f70dc);}if(!_0x419a44){_0x8a3f81[a5_0x1986('0x14')](a5_0x1986('0x15'),{'msg':a5_0x1986('0x4a')});return _0x205bfd[a5_0x1986('0x8')](a5_0x1986('0x51'));}_0x419a44[a5_0x1986('0x10')]=_0x8a3f81['body'][a5_0x1986('0x10')];_0x419a44['passwordResetToken']=undefined;_0x419a44[a5_0x1986('0x48')]=undefined;_0x419a44['save'](_0x3f70dc=>{if(_0x3f70dc){return _0x5abba1(_0x3f70dc);}_0x8a3f81[a5_0x1986('0x19')](_0x419a44,_0x3f70dc=>{_0x14b82a(_0x3f70dc,_0x419a44);});});});},function sendResetPasswordEmail(_0x5b74e7,_0xb924b3){const _0x26c09f=nodemailer_1[a5_0x1986('0x27')][a5_0x1986('0x52')]({'service':'SendGrid','auth':{'user':process[a5_0x1986('0x53')][a5_0x1986('0x54')],'pass':process['env'][a5_0x1986('0x55')]}});const _0x273407={'to':_0x5b74e7[a5_0x1986('0xd')],'from':'express-ts@starter.com','subject':a5_0x1986('0x56'),'text':a5_0x1986('0x57')+_0x5b74e7['email']+a5_0x1986('0x58')};_0x26c09f[a5_0x1986('0x59')](_0x273407,_0x81ad9d=>{_0x8a3f81['flash'](a5_0x1986('0x1a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0xb924b3(_0x81ad9d);});}],_0x31c1fb=>{if(_0x31c1fb){return _0x5abba1(_0x31c1fb);}_0x205bfd[a5_0x1986('0x8')]('/');});};exports[a5_0x1986('0x5a')]=(_0x576385,_0x36b72a)=>{if(_0x576385[a5_0x1986('0x5b')]()){return _0x36b72a[a5_0x1986('0x8')]('/');}_0x36b72a['render']('account/forgot',{'title':a5_0x1986('0x5c')});};exports[a5_0x1986('0x5d')]=(_0x335e2f,_0x2b3105,_0x2e2352)=>{_0x335e2f[a5_0x1986('0xc')]('email',a5_0x1986('0x2f'))[a5_0x1986('0xf')]();_0x335e2f[a5_0x1986('0x30')](a5_0x1986('0xd'))[a5_0x1986('0x13')]({'gmail_remove_dots':![]});const _0x354cd9=_0x335e2f[a5_0x1986('0x26')]();if(_0x354cd9){_0x335e2f[a5_0x1986('0x14')](a5_0x1986('0x15'),_0x354cd9);return _0x2b3105['redirect'](a5_0x1986('0x4b'));}async_1['default']['waterfall']([function createRandomToken(_0x23429d){crypto_1[a5_0x1986('0x27')][a5_0x1986('0x5e')](0x10,(_0x52eadd,_0x3b67e3)=>{const _0x194b67=_0x3b67e3['toString'](a5_0x1986('0x5f'));_0x23429d(_0x52eadd,_0x194b67);});},function setRandomToken(_0x25a6f8,_0x388ebc){User_1[a5_0x1986('0x27')][a5_0x1986('0x29')]({'email':_0x335e2f[a5_0x1986('0x28')][a5_0x1986('0xd')]},(_0x2c8c1b,_0x4b3171)=>{if(_0x2c8c1b){return _0x388ebc(_0x2c8c1b);}if(!_0x4b3171){_0x335e2f['flash']('errors',{'msg':a5_0x1986('0x60')});return _0x2b3105['redirect'](a5_0x1986('0x4b'));}_0x4b3171[a5_0x1986('0x61')]=_0x25a6f8;_0x4b3171[a5_0x1986('0x48')]=Date[a5_0x1986('0x62')]()+0x36ee80;_0x4b3171[a5_0x1986('0x2b')](_0x2c8c1b=>{_0x388ebc(_0x2c8c1b,_0x25a6f8,_0x4b3171);});});},function sendForgotPasswordEmail(_0x49a3f7,_0x50bd1d,_0x2ca0ef){const _0x451915=nodemailer_1[a5_0x1986('0x27')][a5_0x1986('0x52')]({'service':a5_0x1986('0x63'),'auth':{'user':process[a5_0x1986('0x53')]['SENDGRID_USER'],'pass':process[a5_0x1986('0x53')][a5_0x1986('0x55')]}});const _0x1c9023={'to':_0x50bd1d[a5_0x1986('0xd')],'from':a5_0x1986('0x64'),'subject':a5_0x1986('0x65'),'text':a5_0x1986('0x66')+_0x335e2f[a5_0x1986('0x67')][a5_0x1986('0x68')]+a5_0x1986('0x69')+_0x49a3f7+a5_0x1986('0x6a')};_0x451915['sendMail'](_0x1c9023,_0x12def2=>{_0x335e2f[a5_0x1986('0x14')](a5_0x1986('0x45'),{'msg':a5_0x1986('0x6b')+_0x50bd1d[a5_0x1986('0xd')]+a5_0x1986('0x6c')});_0x2ca0ef(_0x12def2);});}],_0x150d2f=>{if(_0x150d2f){return _0x2e2352(_0x150d2f);}_0x2b3105['redirect'](a5_0x1986('0x4b'));});};