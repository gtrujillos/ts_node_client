var a5_0x491f=['errors','/login','default','authenticate','local','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','account/signup','Create\x20Account','postSignup','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Passwords\x20do\x20not\x20match','equals','Password\x20has\x20been\x20changed.','remove','info','Your\x20account\x20has\x20been\x20deleted.','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','where','passwordResetExpires','passwordResetToken','createTransport','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','postForgot','/forgot','randomBytes','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','render','account/login','Login','assert','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash'];(function(_0x1a7269,_0x1a4cbf){var _0x3f315a=function(_0x5295f5){while(--_0x5295f5){_0x1a7269['push'](_0x1a7269['shift']());}};_0x3f315a(++_0x1a4cbf);}(a5_0x491f,0xc4));var a5_0x3468=function(_0xeeff2e,_0x3e42cb){_0xeeff2e=_0xeeff2e-0x0;var _0x371c24=a5_0x491f[_0xeeff2e];return _0x371c24;};'use strict';var __importDefault=this&&this[a5_0x3468('0x0')]||function(_0x335c16){return _0x335c16&&_0x335c16[a5_0x3468('0x1')]?_0x335c16:{'default':_0x335c16};};Object[a5_0x3468('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x3468('0x3')));const crypto_1=__importDefault(require(a5_0x3468('0x4')));const nodemailer_1=__importDefault(require(a5_0x3468('0x5')));const passport_1=__importDefault(require(a5_0x3468('0x6')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x3468('0x7'));exports[a5_0x3468('0x8')]=(_0x29caee,_0x11f3c5)=>{if(_0x29caee[a5_0x3468('0x9')]){return _0x11f3c5[a5_0x3468('0xa')]('/');}_0x11f3c5[a5_0x3468('0xb')](a5_0x3468('0xc'),{'title':a5_0x3468('0xd')});};exports['postLogin']=(_0x5ba577,_0x59421e,_0xfc58c0)=>{_0x5ba577[a5_0x3468('0xe')](a5_0x3468('0xf'),a5_0x3468('0x10'))[a5_0x3468('0x11')]();_0x5ba577[a5_0x3468('0xe')]('password',a5_0x3468('0x12'))[a5_0x3468('0x13')]();_0x5ba577[a5_0x3468('0x14')]('email')[a5_0x3468('0x15')]({'gmail_remove_dots':![]});const _0x127fc5=_0x5ba577[a5_0x3468('0x16')]();if(_0x127fc5){_0x5ba577[a5_0x3468('0x17')](a5_0x3468('0x18'),_0x127fc5);return _0x59421e['redirect'](a5_0x3468('0x19'));}passport_1[a5_0x3468('0x1a')][a5_0x3468('0x1b')](a5_0x3468('0x1c'),(_0x5d2e89,_0x378542,_0x2c93eb)=>{if(_0x5d2e89){return _0xfc58c0(_0x5d2e89);}if(!_0x378542){_0x5ba577[a5_0x3468('0x17')](a5_0x3468('0x18'),_0x2c93eb['message']);return _0x59421e[a5_0x3468('0xa')](a5_0x3468('0x19'));}_0x5ba577[a5_0x3468('0x1d')](_0x378542,_0x5d2e89=>{if(_0x5d2e89){return _0xfc58c0(_0x5d2e89);}_0x5ba577['flash'](a5_0x3468('0x1e'),{'msg':a5_0x3468('0x1f')});_0x59421e[a5_0x3468('0xa')](_0x5ba577['session'][a5_0x3468('0x20')]||'/');});})(_0x5ba577,_0x59421e,_0xfc58c0);};exports[a5_0x3468('0x21')]=(_0x4c32ad,_0x285403)=>{_0x4c32ad[a5_0x3468('0x21')]();_0x285403['redirect']('/');};exports['getSignup']=(_0x163330,_0x3bd295)=>{if(_0x163330['user']){return _0x3bd295[a5_0x3468('0xa')]('/');}_0x3bd295[a5_0x3468('0xb')](a5_0x3468('0x22'),{'title':a5_0x3468('0x23')});};exports[a5_0x3468('0x24')]=(_0x299ba2,_0x24e67f,_0x50479b)=>{_0x299ba2[a5_0x3468('0xe')](a5_0x3468('0xf'),a5_0x3468('0x10'))[a5_0x3468('0x11')]();_0x299ba2[a5_0x3468('0xe')](a5_0x3468('0x25'),a5_0x3468('0x26'))[a5_0x3468('0x27')]({'min':0x4});_0x299ba2[a5_0x3468('0xe')]('confirmPassword','Passwords\x20do\x20not\x20match')['equals'](_0x299ba2[a5_0x3468('0x28')][a5_0x3468('0x25')]);_0x299ba2[a5_0x3468('0x14')](a5_0x3468('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xf73ee1=_0x299ba2[a5_0x3468('0x16')]();if(_0xf73ee1){_0x299ba2[a5_0x3468('0x17')](a5_0x3468('0x18'),_0xf73ee1);return _0x24e67f[a5_0x3468('0xa')](a5_0x3468('0x29'));}const _0x3dc751=new User_1['default']({'email':_0x299ba2['body'][a5_0x3468('0xf')],'password':_0x299ba2[a5_0x3468('0x28')][a5_0x3468('0x25')]});User_1[a5_0x3468('0x1a')][a5_0x3468('0x2a')]({'email':_0x299ba2[a5_0x3468('0x28')]['email']},(_0x73dac,_0x565f08)=>{if(_0x73dac){return _0x50479b(_0x73dac);}if(_0x565f08){_0x299ba2[a5_0x3468('0x17')](a5_0x3468('0x18'),{'msg':a5_0x3468('0x2b')});return _0x24e67f[a5_0x3468('0xa')]('/signup');}_0x3dc751[a5_0x3468('0x2c')](_0x73dac=>{if(_0x73dac){return _0x50479b(_0x73dac);}_0x299ba2['logIn'](_0x3dc751,_0x73dac=>{if(_0x73dac){return _0x50479b(_0x73dac);}_0x24e67f[a5_0x3468('0xa')]('/');});});});};exports[a5_0x3468('0x2d')]=(_0x1ec406,_0x279a81)=>{_0x279a81[a5_0x3468('0xb')](a5_0x3468('0x2e'),{'title':a5_0x3468('0x2f')});};exports[a5_0x3468('0x30')]=(_0x4cca85,_0x2fac85,_0x47386e)=>{_0x4cca85['assert'](a5_0x3468('0xf'),a5_0x3468('0x31'))[a5_0x3468('0x11')]();_0x4cca85[a5_0x3468('0x14')](a5_0x3468('0xf'))[a5_0x3468('0x15')]({'gmail_remove_dots':![]});const _0x1d7f27=_0x4cca85['validationErrors']();if(_0x1d7f27){_0x4cca85[a5_0x3468('0x17')](a5_0x3468('0x18'),_0x1d7f27);return _0x2fac85[a5_0x3468('0xa')](a5_0x3468('0x32'));}User_1[a5_0x3468('0x1a')][a5_0x3468('0x33')](_0x4cca85['user']['id'],(_0x32676b,_0x358c48)=>{if(_0x32676b){return _0x47386e(_0x32676b);}_0x358c48[a5_0x3468('0xf')]=_0x4cca85[a5_0x3468('0x28')][a5_0x3468('0xf')]||'';_0x358c48[a5_0x3468('0x34')][a5_0x3468('0x35')]=_0x4cca85[a5_0x3468('0x28')][a5_0x3468('0x35')]||'';_0x358c48[a5_0x3468('0x34')][a5_0x3468('0x36')]=_0x4cca85[a5_0x3468('0x28')][a5_0x3468('0x36')]||'';_0x358c48['profile']['location']=_0x4cca85['body']['location']||'';_0x358c48[a5_0x3468('0x34')]['website']=_0x4cca85[a5_0x3468('0x28')]['website']||'';_0x358c48[a5_0x3468('0x2c')](_0x32676b=>{if(_0x32676b){if(_0x32676b['code']===0x2af8){_0x4cca85[a5_0x3468('0x17')]('errors',{'msg':a5_0x3468('0x37')});return _0x2fac85[a5_0x3468('0xa')](a5_0x3468('0x32'));}return _0x47386e(_0x32676b);}_0x4cca85[a5_0x3468('0x17')]('success',{'msg':a5_0x3468('0x38')});_0x2fac85['redirect'](a5_0x3468('0x32'));});});};exports[a5_0x3468('0x39')]=(_0x5b0d80,_0x19e312,_0x3e00c0)=>{_0x5b0d80[a5_0x3468('0xe')](a5_0x3468('0x25'),a5_0x3468('0x26'))[a5_0x3468('0x27')]({'min':0x4});_0x5b0d80[a5_0x3468('0xe')](a5_0x3468('0x3a'),a5_0x3468('0x3b'))[a5_0x3468('0x3c')](_0x5b0d80[a5_0x3468('0x28')][a5_0x3468('0x25')]);const _0x445944=_0x5b0d80[a5_0x3468('0x16')]();if(_0x445944){_0x5b0d80[a5_0x3468('0x17')](a5_0x3468('0x18'),_0x445944);return _0x19e312['redirect'](a5_0x3468('0x32'));}User_1[a5_0x3468('0x1a')][a5_0x3468('0x33')](_0x5b0d80['user']['id'],(_0x35ef03,_0x3a15a5)=>{if(_0x35ef03){return _0x3e00c0(_0x35ef03);}_0x3a15a5[a5_0x3468('0x25')]=_0x5b0d80[a5_0x3468('0x28')][a5_0x3468('0x25')];_0x3a15a5['save'](_0x35ef03=>{if(_0x35ef03){return _0x3e00c0(_0x35ef03);}_0x5b0d80['flash'](a5_0x3468('0x1e'),{'msg':a5_0x3468('0x3d')});_0x19e312[a5_0x3468('0xa')](a5_0x3468('0x32'));});});};exports['postDeleteAccount']=(_0xf41202,_0x1b661c,_0x2fca98)=>{User_1[a5_0x3468('0x1a')][a5_0x3468('0x3e')]({'_id':_0xf41202[a5_0x3468('0x9')]['id']},_0x5ec708=>{if(_0x5ec708){return _0x2fca98(_0x5ec708);}_0xf41202['logout']();_0xf41202[a5_0x3468('0x17')](a5_0x3468('0x3f'),{'msg':a5_0x3468('0x40')});_0x1b661c[a5_0x3468('0xa')]('/');});};exports['getOauthUnlink']=(_0x183f99,_0x5e80a7,_0x5750d2)=>{const _0x521a33=_0x183f99[a5_0x3468('0x41')][a5_0x3468('0x42')];User_1['default'][a5_0x3468('0x33')](_0x183f99['user']['id'],(_0x4a91d1,_0xb7ea79)=>{if(_0x4a91d1){return _0x5750d2(_0x4a91d1);}_0xb7ea79[_0x521a33]=undefined;_0xb7ea79[a5_0x3468('0x43')]=_0xb7ea79[a5_0x3468('0x43')][a5_0x3468('0x44')](_0x1551e2=>_0x1551e2[a5_0x3468('0x45')]!==_0x521a33);_0xb7ea79[a5_0x3468('0x2c')](_0x4a91d1=>{if(_0x4a91d1){return _0x5750d2(_0x4a91d1);}_0x183f99['flash']('info',{'msg':_0x521a33+a5_0x3468('0x46')});_0x5e80a7[a5_0x3468('0xa')](a5_0x3468('0x32'));});});};exports[a5_0x3468('0x47')]=(_0x3e12ae,_0x2179bc,_0x536e17)=>{if(_0x3e12ae[a5_0x3468('0x48')]()){return _0x2179bc['redirect']('/');}User_1[a5_0x3468('0x1a')][a5_0x3468('0x2a')]({'passwordResetToken':_0x3e12ae[a5_0x3468('0x41')][a5_0x3468('0x49')]})['where']('passwordResetExpires')['gt'](Date[a5_0x3468('0x4a')]())[a5_0x3468('0x4b')]((_0x406205,_0x34130f)=>{if(_0x406205){return _0x536e17(_0x406205);}if(!_0x34130f){_0x3e12ae[a5_0x3468('0x17')](a5_0x3468('0x18'),{'msg':a5_0x3468('0x4c')});return _0x2179bc[a5_0x3468('0xa')]('/forgot');}_0x2179bc[a5_0x3468('0xb')](a5_0x3468('0x4d'),{'title':a5_0x3468('0x4e')});});};exports[a5_0x3468('0x4f')]=(_0x1f6deb,_0x54e469,_0x1022c2)=>{_0x1f6deb[a5_0x3468('0xe')]('password',a5_0x3468('0x50'))[a5_0x3468('0x27')]({'min':0x4});_0x1f6deb[a5_0x3468('0xe')](a5_0x3468('0x51'),a5_0x3468('0x52'))[a5_0x3468('0x3c')](_0x1f6deb['body']['password']);const _0x3f45b7=_0x1f6deb[a5_0x3468('0x16')]();if(_0x3f45b7){_0x1f6deb[a5_0x3468('0x17')](a5_0x3468('0x18'),_0x3f45b7);return _0x54e469['redirect'](a5_0x3468('0x53'));}async_1[a5_0x3468('0x1a')][a5_0x3468('0x54')]([function resetPassword(_0x2638ba){User_1['default'][a5_0x3468('0x2a')]({'passwordResetToken':_0x1f6deb[a5_0x3468('0x41')][a5_0x3468('0x49')]})[a5_0x3468('0x55')](a5_0x3468('0x56'))['gt'](Date[a5_0x3468('0x4a')]())[a5_0x3468('0x4b')]((_0x289874,_0x18686d)=>{if(_0x289874){return _0x1022c2(_0x289874);}if(!_0x18686d){_0x1f6deb[a5_0x3468('0x17')](a5_0x3468('0x18'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x54e469['redirect'](a5_0x3468('0x53'));}_0x18686d['password']=_0x1f6deb['body']['password'];_0x18686d[a5_0x3468('0x57')]=undefined;_0x18686d[a5_0x3468('0x56')]=undefined;_0x18686d[a5_0x3468('0x2c')](_0x289874=>{if(_0x289874){return _0x1022c2(_0x289874);}_0x1f6deb[a5_0x3468('0x1d')](_0x18686d,_0x289874=>{_0x2638ba(_0x289874,_0x18686d);});});});},function sendResetPasswordEmail(_0x200596,_0x3d915d){const _0x3f4a67=nodemailer_1[a5_0x3468('0x1a')][a5_0x3468('0x58')]({'service':'SendGrid','auth':{'user':process['env'][a5_0x3468('0x59')],'pass':process[a5_0x3468('0x5a')][a5_0x3468('0x5b')]}});const _0x58d4ac={'to':_0x200596['email'],'from':a5_0x3468('0x5c'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x3468('0x5d')+_0x200596[a5_0x3468('0xf')]+a5_0x3468('0x5e')};_0x3f4a67['sendMail'](_0x58d4ac,_0x535630=>{_0x1f6deb[a5_0x3468('0x17')](a5_0x3468('0x1e'),{'msg':a5_0x3468('0x5f')});_0x3d915d(_0x535630);});}],_0x16bf78=>{if(_0x16bf78){return _0x1022c2(_0x16bf78);}_0x54e469['redirect']('/');});};exports[a5_0x3468('0x60')]=(_0xacc7ba,_0x214cd5)=>{if(_0xacc7ba[a5_0x3468('0x48')]()){return _0x214cd5[a5_0x3468('0xa')]('/');}_0x214cd5[a5_0x3468('0xb')](a5_0x3468('0x61'),{'title':'Forgot\x20Password'});};exports[a5_0x3468('0x62')]=(_0x1e3124,_0x5b95db,_0x15af98)=>{_0x1e3124[a5_0x3468('0xe')](a5_0x3468('0xf'),a5_0x3468('0x31'))[a5_0x3468('0x11')]();_0x1e3124[a5_0x3468('0x14')](a5_0x3468('0xf'))[a5_0x3468('0x15')]({'gmail_remove_dots':![]});const _0x39d975=_0x1e3124[a5_0x3468('0x16')]();if(_0x39d975){_0x1e3124[a5_0x3468('0x17')]('errors',_0x39d975);return _0x5b95db[a5_0x3468('0xa')](a5_0x3468('0x63'));}async_1[a5_0x3468('0x1a')][a5_0x3468('0x54')]([function createRandomToken(_0x4b0a6a){crypto_1['default'][a5_0x3468('0x64')](0x10,(_0xe09750,_0x28c5dc)=>{const _0x117fae=_0x28c5dc['toString']('hex');_0x4b0a6a(_0xe09750,_0x117fae);});},function setRandomToken(_0x64eb99,_0x29f34f){User_1['default'][a5_0x3468('0x2a')]({'email':_0x1e3124['body'][a5_0x3468('0xf')]},(_0x532f22,_0x43e899)=>{if(_0x532f22){return _0x29f34f(_0x532f22);}if(!_0x43e899){_0x1e3124[a5_0x3468('0x17')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x5b95db[a5_0x3468('0xa')](a5_0x3468('0x63'));}_0x43e899['passwordResetToken']=_0x64eb99;_0x43e899[a5_0x3468('0x56')]=Date[a5_0x3468('0x4a')]()+0x36ee80;_0x43e899[a5_0x3468('0x2c')](_0x532f22=>{_0x29f34f(_0x532f22,_0x64eb99,_0x43e899);});});},function sendForgotPasswordEmail(_0x589080,_0x232cd7,_0x3f2f4f){const _0x26a68e=nodemailer_1[a5_0x3468('0x1a')][a5_0x3468('0x58')]({'service':a5_0x3468('0x65'),'auth':{'user':process[a5_0x3468('0x5a')][a5_0x3468('0x59')],'pass':process[a5_0x3468('0x5a')][a5_0x3468('0x5b')]}});const _0x822ae={'to':_0x232cd7[a5_0x3468('0xf')],'from':a5_0x3468('0x66'),'subject':a5_0x3468('0x67'),'text':a5_0x3468('0x68')+_0x1e3124['headers'][a5_0x3468('0x69')]+a5_0x3468('0x6a')+_0x589080+a5_0x3468('0x6b')};_0x26a68e[a5_0x3468('0x6c')](_0x822ae,_0x2d564c=>{_0x1e3124[a5_0x3468('0x17')]('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x232cd7[a5_0x3468('0xf')]+a5_0x3468('0x6d')});_0x3f2f4f(_0x2d564c);});}],_0x245ce4=>{if(_0x245ce4){return _0x15af98(_0x245ce4);}_0x5b95db[a5_0x3468('0xa')](a5_0x3468('0x63'));});};