var a5_0x1c10=['The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','success','Password\x20has\x20been\x20changed.','postDeleteAccount','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','exec','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','/forgot','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','createTransport','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','nodemailer','passport','express-validator','getLogin','user','redirect','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','sanitize','normalizeEmail','validationErrors','flash','/login','authenticate','local','errors','message','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','render','account/signup','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','/signup','default','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website'];(function(_0x1abc28,_0x404fa9){var _0x5c7e1e=function(_0x336b98){while(--_0x336b98){_0x1abc28['push'](_0x1abc28['shift']());}};_0x5c7e1e(++_0x404fa9);}(a5_0x1c10,0x1cd));var a5_0x2fbd=function(_0x150e2a,_0x56e89f){_0x150e2a=_0x150e2a-0x0;var _0x134777=a5_0x1c10[_0x150e2a];return _0x134777;};'use strict';var __importDefault=this&&this[a5_0x2fbd('0x0')]||function(_0x21e68b){return _0x21e68b&&_0x21e68b[a5_0x2fbd('0x1')]?_0x21e68b:{'default':_0x21e68b};};Object['defineProperty'](exports,a5_0x2fbd('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x2fbd('0x2')));const passport_1=__importDefault(require(a5_0x2fbd('0x3')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x2fbd('0x4'));exports[a5_0x2fbd('0x5')]=(_0x2ba418,_0x4160de)=>{if(_0x2ba418[a5_0x2fbd('0x6')]){return _0x4160de[a5_0x2fbd('0x7')]('/');}_0x4160de['render'](a5_0x2fbd('0x8'),{'title':'Login'});};exports[a5_0x2fbd('0x9')]=(_0x1daadf,_0x1cb1e0,_0x5717ab)=>{_0x1daadf[a5_0x2fbd('0xa')](a5_0x2fbd('0xb'),a5_0x2fbd('0xc'))['isEmail']();_0x1daadf['assert'](a5_0x2fbd('0xd'),'Password\x20cannot\x20be\x20blank')['notEmpty']();_0x1daadf[a5_0x2fbd('0xe')](a5_0x2fbd('0xb'))[a5_0x2fbd('0xf')]({'gmail_remove_dots':![]});const _0x383eaa=_0x1daadf[a5_0x2fbd('0x10')]();if(_0x383eaa){_0x1daadf[a5_0x2fbd('0x11')]('errors',_0x383eaa);return _0x1cb1e0['redirect'](a5_0x2fbd('0x12'));}passport_1['default'][a5_0x2fbd('0x13')](a5_0x2fbd('0x14'),(_0x48bbd9,_0x1b84ad,_0x4c12e3)=>{if(_0x48bbd9){return _0x5717ab(_0x48bbd9);}if(!_0x1b84ad){_0x1daadf[a5_0x2fbd('0x11')](a5_0x2fbd('0x15'),_0x4c12e3[a5_0x2fbd('0x16')]);return _0x1cb1e0[a5_0x2fbd('0x7')](a5_0x2fbd('0x12'));}_0x1daadf['logIn'](_0x1b84ad,_0x48bbd9=>{if(_0x48bbd9){return _0x5717ab(_0x48bbd9);}_0x1daadf[a5_0x2fbd('0x11')]('success',{'msg':a5_0x2fbd('0x17')});_0x1cb1e0[a5_0x2fbd('0x7')](_0x1daadf[a5_0x2fbd('0x18')][a5_0x2fbd('0x19')]||'/');});})(_0x1daadf,_0x1cb1e0,_0x5717ab);};exports[a5_0x2fbd('0x1a')]=(_0x3b6e06,_0x20c420)=>{_0x3b6e06[a5_0x2fbd('0x1a')]();_0x20c420[a5_0x2fbd('0x7')]('/');};exports[a5_0x2fbd('0x1b')]=(_0x97e17,_0x160bd0)=>{if(_0x97e17[a5_0x2fbd('0x6')]){return _0x160bd0[a5_0x2fbd('0x7')]('/');}_0x160bd0[a5_0x2fbd('0x1c')](a5_0x2fbd('0x1d'),{'title':'Create\x20Account'});};exports[a5_0x2fbd('0x1e')]=(_0x1e781c,_0x484837,_0x18d98e)=>{_0x1e781c[a5_0x2fbd('0xa')](a5_0x2fbd('0xb'),a5_0x2fbd('0xc'))[a5_0x2fbd('0x1f')]();_0x1e781c[a5_0x2fbd('0xa')]('password',a5_0x2fbd('0x20'))[a5_0x2fbd('0x21')]({'min':0x4});_0x1e781c['assert'](a5_0x2fbd('0x22'),'Passwords\x20do\x20not\x20match')[a5_0x2fbd('0x23')](_0x1e781c['body'][a5_0x2fbd('0xd')]);_0x1e781c[a5_0x2fbd('0xe')](a5_0x2fbd('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1cc1f9=_0x1e781c[a5_0x2fbd('0x10')]();if(_0x1cc1f9){_0x1e781c['flash']('errors',_0x1cc1f9);return _0x484837[a5_0x2fbd('0x7')](a5_0x2fbd('0x24'));}const _0x4d1fad=new User_1[(a5_0x2fbd('0x25'))]({'email':_0x1e781c[a5_0x2fbd('0x26')]['email'],'password':_0x1e781c['body'][a5_0x2fbd('0xd')]});User_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x27')]({'email':_0x1e781c['body'][a5_0x2fbd('0xb')]},(_0x421efb,_0x5b2dde)=>{if(_0x421efb){return _0x18d98e(_0x421efb);}if(_0x5b2dde){_0x1e781c[a5_0x2fbd('0x11')](a5_0x2fbd('0x15'),{'msg':a5_0x2fbd('0x28')});return _0x484837[a5_0x2fbd('0x7')](a5_0x2fbd('0x24'));}_0x4d1fad[a5_0x2fbd('0x29')](_0x421efb=>{if(_0x421efb){return _0x18d98e(_0x421efb);}_0x1e781c[a5_0x2fbd('0x2a')](_0x4d1fad,_0x421efb=>{if(_0x421efb){return _0x18d98e(_0x421efb);}_0x484837[a5_0x2fbd('0x7')]('/');});});});};exports[a5_0x2fbd('0x2b')]=(_0x152bec,_0x3f4940)=>{_0x3f4940[a5_0x2fbd('0x1c')](a5_0x2fbd('0x2c'),{'title':a5_0x2fbd('0x2d')});};exports['postUpdateProfile']=(_0x4e885a,_0xcee006,_0x4f7876)=>{_0x4e885a['assert'](a5_0x2fbd('0xb'),a5_0x2fbd('0x2e'))[a5_0x2fbd('0x1f')]();_0x4e885a[a5_0x2fbd('0xe')]('email')[a5_0x2fbd('0xf')]({'gmail_remove_dots':![]});const _0x55ae1e=_0x4e885a[a5_0x2fbd('0x10')]();if(_0x55ae1e){_0x4e885a['flash'](a5_0x2fbd('0x15'),_0x55ae1e);return _0xcee006[a5_0x2fbd('0x7')](a5_0x2fbd('0x2f'));}User_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x30')](_0x4e885a[a5_0x2fbd('0x6')]['id'],(_0x33d782,_0x686d17)=>{if(_0x33d782){return _0x4f7876(_0x33d782);}_0x686d17[a5_0x2fbd('0xb')]=_0x4e885a[a5_0x2fbd('0x26')]['email']||'';_0x686d17[a5_0x2fbd('0x31')][a5_0x2fbd('0x32')]=_0x4e885a[a5_0x2fbd('0x26')]['name']||'';_0x686d17['profile'][a5_0x2fbd('0x33')]=_0x4e885a['body'][a5_0x2fbd('0x33')]||'';_0x686d17['profile']['location']=_0x4e885a[a5_0x2fbd('0x26')][a5_0x2fbd('0x34')]||'';_0x686d17[a5_0x2fbd('0x31')][a5_0x2fbd('0x35')]=_0x4e885a[a5_0x2fbd('0x26')]['website']||'';_0x686d17[a5_0x2fbd('0x29')](_0x33d782=>{if(_0x33d782){if(_0x33d782['code']===0x2af8){_0x4e885a[a5_0x2fbd('0x11')](a5_0x2fbd('0x15'),{'msg':a5_0x2fbd('0x36')});return _0xcee006['redirect'](a5_0x2fbd('0x2f'));}return _0x4f7876(_0x33d782);}_0x4e885a[a5_0x2fbd('0x11')]('success',{'msg':a5_0x2fbd('0x37')});_0xcee006[a5_0x2fbd('0x7')](a5_0x2fbd('0x2f'));});});};exports[a5_0x2fbd('0x38')]=(_0x76e0f8,_0x2c0ce7,_0x358649)=>{_0x76e0f8[a5_0x2fbd('0xa')](a5_0x2fbd('0xd'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x2fbd('0x21')]({'min':0x4});_0x76e0f8[a5_0x2fbd('0xa')]('confirmPassword',a5_0x2fbd('0x39'))[a5_0x2fbd('0x23')](_0x76e0f8['body'][a5_0x2fbd('0xd')]);const _0x4e6b5c=_0x76e0f8[a5_0x2fbd('0x10')]();if(_0x4e6b5c){_0x76e0f8[a5_0x2fbd('0x11')](a5_0x2fbd('0x15'),_0x4e6b5c);return _0x2c0ce7[a5_0x2fbd('0x7')]('/account');}User_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x30')](_0x76e0f8['user']['id'],(_0x1727bd,_0x27dc6b)=>{if(_0x1727bd){return _0x358649(_0x1727bd);}_0x27dc6b[a5_0x2fbd('0xd')]=_0x76e0f8[a5_0x2fbd('0x26')][a5_0x2fbd('0xd')];_0x27dc6b[a5_0x2fbd('0x29')](_0x1727bd=>{if(_0x1727bd){return _0x358649(_0x1727bd);}_0x76e0f8[a5_0x2fbd('0x11')](a5_0x2fbd('0x3a'),{'msg':a5_0x2fbd('0x3b')});_0x2c0ce7['redirect']('/account');});});};exports[a5_0x2fbd('0x3c')]=(_0x82e62,_0x34f5fb,_0x36a1c0)=>{User_1[a5_0x2fbd('0x25')]['remove']({'_id':_0x82e62[a5_0x2fbd('0x6')]['id']},_0x4ac963=>{if(_0x4ac963){return _0x36a1c0(_0x4ac963);}_0x82e62[a5_0x2fbd('0x1a')]();_0x82e62['flash']('info',{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x34f5fb[a5_0x2fbd('0x7')]('/');});};exports[a5_0x2fbd('0x3d')]=(_0x3b8975,_0x48ce0c,_0x55f8db)=>{const _0x2447b7=_0x3b8975[a5_0x2fbd('0x3e')][a5_0x2fbd('0x3f')];User_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x30')](_0x3b8975[a5_0x2fbd('0x6')]['id'],(_0x5899cb,_0x198dc1)=>{if(_0x5899cb){return _0x55f8db(_0x5899cb);}_0x198dc1[_0x2447b7]=undefined;_0x198dc1['tokens']=_0x198dc1[a5_0x2fbd('0x40')]['filter'](_0x30e0f9=>_0x30e0f9[a5_0x2fbd('0x41')]!==_0x2447b7);_0x198dc1['save'](_0x5899cb=>{if(_0x5899cb){return _0x55f8db(_0x5899cb);}_0x3b8975[a5_0x2fbd('0x11')]('info',{'msg':_0x2447b7+a5_0x2fbd('0x42')});_0x48ce0c[a5_0x2fbd('0x7')](a5_0x2fbd('0x2f'));});});};exports[a5_0x2fbd('0x43')]=(_0x286d11,_0x56bf7c,_0x2ea8ac)=>{if(_0x286d11[a5_0x2fbd('0x44')]()){return _0x56bf7c[a5_0x2fbd('0x7')]('/');}User_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x27')]({'passwordResetToken':_0x286d11['params'][a5_0x2fbd('0x45')]})[a5_0x2fbd('0x46')]('passwordResetExpires')['gt'](Date['now']())[a5_0x2fbd('0x47')]((_0x179fdc,_0x367952)=>{if(_0x179fdc){return _0x2ea8ac(_0x179fdc);}if(!_0x367952){_0x286d11[a5_0x2fbd('0x11')](a5_0x2fbd('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x56bf7c[a5_0x2fbd('0x7')]('/forgot');}_0x56bf7c[a5_0x2fbd('0x1c')](a5_0x2fbd('0x48'),{'title':a5_0x2fbd('0x49')});});};exports[a5_0x2fbd('0x4a')]=(_0x1e902c,_0x1fdf4e,_0x32628d)=>{_0x1e902c[a5_0x2fbd('0xa')](a5_0x2fbd('0xd'),a5_0x2fbd('0x4b'))[a5_0x2fbd('0x21')]({'min':0x4});_0x1e902c[a5_0x2fbd('0xa')](a5_0x2fbd('0x4c'),a5_0x2fbd('0x4d'))[a5_0x2fbd('0x23')](_0x1e902c['body'][a5_0x2fbd('0xd')]);const _0x4f7202=_0x1e902c['validationErrors']();if(_0x4f7202){_0x1e902c[a5_0x2fbd('0x11')]('errors',_0x4f7202);return _0x1fdf4e[a5_0x2fbd('0x7')]('back');}async_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x4e')]([function resetPassword(_0x3fe0ea){User_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x27')]({'passwordResetToken':_0x1e902c[a5_0x2fbd('0x3e')]['token']})[a5_0x2fbd('0x46')](a5_0x2fbd('0x4f'))['gt'](Date[a5_0x2fbd('0x50')]())['exec']((_0x5cb2e8,_0x340459)=>{if(_0x5cb2e8){return _0x32628d(_0x5cb2e8);}if(!_0x340459){_0x1e902c[a5_0x2fbd('0x11')]('errors',{'msg':a5_0x2fbd('0x51')});return _0x1fdf4e[a5_0x2fbd('0x7')]('back');}_0x340459[a5_0x2fbd('0xd')]=_0x1e902c['body'][a5_0x2fbd('0xd')];_0x340459['passwordResetToken']=undefined;_0x340459[a5_0x2fbd('0x4f')]=undefined;_0x340459[a5_0x2fbd('0x29')](_0x5cb2e8=>{if(_0x5cb2e8){return _0x32628d(_0x5cb2e8);}_0x1e902c[a5_0x2fbd('0x2a')](_0x340459,_0x5cb2e8=>{_0x3fe0ea(_0x5cb2e8,_0x340459);});});});},function sendResetPasswordEmail(_0x103974,_0x16fe3c){const _0x408c5b=nodemailer_1[a5_0x2fbd('0x25')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0x2fbd('0x52')][a5_0x2fbd('0x53')],'pass':process['env'][a5_0x2fbd('0x54')]}});const _0x15897a={'to':_0x103974['email'],'from':a5_0x2fbd('0x55'),'subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x103974[a5_0x2fbd('0xb')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x408c5b[a5_0x2fbd('0x56')](_0x15897a,_0x28e1a9=>{_0x1e902c['flash'](a5_0x2fbd('0x3a'),{'msg':a5_0x2fbd('0x57')});_0x16fe3c(_0x28e1a9);});}],_0x575068=>{if(_0x575068){return _0x32628d(_0x575068);}_0x1fdf4e[a5_0x2fbd('0x7')]('/');});};exports[a5_0x2fbd('0x58')]=(_0x2f2ac7,_0x4fc3e6)=>{if(_0x2f2ac7['isAuthenticated']()){return _0x4fc3e6['redirect']('/');}_0x4fc3e6[a5_0x2fbd('0x1c')](a5_0x2fbd('0x59'),{'title':a5_0x2fbd('0x5a')});};exports[a5_0x2fbd('0x5b')]=(_0x52c29e,_0x1d5859,_0x4a055c)=>{_0x52c29e[a5_0x2fbd('0xa')](a5_0x2fbd('0xb'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x52c29e[a5_0x2fbd('0xe')](a5_0x2fbd('0xb'))[a5_0x2fbd('0xf')]({'gmail_remove_dots':![]});const _0x59d266=_0x52c29e[a5_0x2fbd('0x10')]();if(_0x59d266){_0x52c29e[a5_0x2fbd('0x11')](a5_0x2fbd('0x15'),_0x59d266);return _0x1d5859[a5_0x2fbd('0x7')](a5_0x2fbd('0x5c'));}async_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x4e')]([function createRandomToken(_0x53d73b){crypto_1[a5_0x2fbd('0x25')]['randomBytes'](0x10,(_0x4a65f7,_0x1f10d2)=>{const _0x4a391c=_0x1f10d2['toString'](a5_0x2fbd('0x5d'));_0x53d73b(_0x4a65f7,_0x4a391c);});},function setRandomToken(_0x2dd72b,_0x3804f5){User_1[a5_0x2fbd('0x25')]['findOne']({'email':_0x52c29e[a5_0x2fbd('0x26')][a5_0x2fbd('0xb')]},(_0x2183be,_0x169101)=>{if(_0x2183be){return _0x3804f5(_0x2183be);}if(!_0x169101){_0x52c29e['flash'](a5_0x2fbd('0x15'),{'msg':a5_0x2fbd('0x5e')});return _0x1d5859[a5_0x2fbd('0x7')](a5_0x2fbd('0x5c'));}_0x169101[a5_0x2fbd('0x5f')]=_0x2dd72b;_0x169101[a5_0x2fbd('0x4f')]=Date['now']()+0x36ee80;_0x169101[a5_0x2fbd('0x29')](_0x2183be=>{_0x3804f5(_0x2183be,_0x2dd72b,_0x169101);});});},function sendForgotPasswordEmail(_0x1622d7,_0x3e0908,_0x7e4c13){const _0x205514=nodemailer_1[a5_0x2fbd('0x25')][a5_0x2fbd('0x60')]({'service':'SendGrid','auth':{'user':process[a5_0x2fbd('0x52')][a5_0x2fbd('0x53')],'pass':process[a5_0x2fbd('0x52')][a5_0x2fbd('0x54')]}});const _0x2d0d04={'to':_0x3e0908['email'],'from':'hackathon@starter.com','subject':a5_0x2fbd('0x61'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x52c29e[a5_0x2fbd('0x62')]['host']+a5_0x2fbd('0x63')+_0x1622d7+a5_0x2fbd('0x64')};_0x205514[a5_0x2fbd('0x56')](_0x2d0d04,_0xff357c=>{_0x52c29e[a5_0x2fbd('0x11')](a5_0x2fbd('0x65'),{'msg':a5_0x2fbd('0x66')+_0x3e0908[a5_0x2fbd('0xb')]+'\x20with\x20further\x20instructions.'});_0x7e4c13(_0xff357c);});}],_0x469b89=>{if(_0x469b89){return _0x4a055c(_0x469b89);}_0x1d5859[a5_0x2fbd('0x7')](a5_0x2fbd('0x5c'));});};