var a5_0x41b7=['Passwords\x20do\x20not\x20match','body','normalizeEmail','/signup','save','logIn','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','Forgot\x20Password','postForgot','/forgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','../models/User','express-validator','user','redirect','render','account/login','Login','postLogin','Email\x20is\x20not\x20valid','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','validationErrors','flash','/login','default','authenticate','local','errors','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','account/signup','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a5_0x41b7,0xb6));var a5_0x57c9=function(_0x59d012,_0x566008){_0x59d012=_0x59d012-0x0;var _0x1f844b=a5_0x41b7[_0x59d012];return _0x1f844b;};'use strict';var __importDefault=this&&this[a5_0x57c9('0x0')]||function(_0x306119){return _0x306119&&_0x306119[a5_0x57c9('0x1')]?_0x306119:{'default':_0x306119};};Object[a5_0x57c9('0x2')](exports,a5_0x57c9('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x57c9('0x3')));const crypto_1=__importDefault(require(a5_0x57c9('0x4')));const nodemailer_1=__importDefault(require(a5_0x57c9('0x5')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x57c9('0x6')));const request=require(a5_0x57c9('0x7'));exports['getLogin']=(_0x388ed2,_0x2bc3a7)=>{if(_0x388ed2[a5_0x57c9('0x8')]){return _0x2bc3a7[a5_0x57c9('0x9')]('/');}_0x2bc3a7[a5_0x57c9('0xa')](a5_0x57c9('0xb'),{'title':a5_0x57c9('0xc')});};exports[a5_0x57c9('0xd')]=(_0x32cee9,_0x579cb9,_0x39caa6)=>{_0x32cee9['assert']('email',a5_0x57c9('0xe'))[a5_0x57c9('0xf')]();_0x32cee9[a5_0x57c9('0x10')](a5_0x57c9('0x11'),a5_0x57c9('0x12'))[a5_0x57c9('0x13')]();_0x32cee9[a5_0x57c9('0x14')](a5_0x57c9('0x15'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x10e56c=_0x32cee9[a5_0x57c9('0x16')]();if(_0x10e56c){_0x32cee9[a5_0x57c9('0x17')]('errors',_0x10e56c);return _0x579cb9['redirect'](a5_0x57c9('0x18'));}passport_1[a5_0x57c9('0x19')][a5_0x57c9('0x1a')](a5_0x57c9('0x1b'),(_0x314657,_0x41de69,_0x5934b2)=>{if(_0x314657){return _0x39caa6(_0x314657);}if(!_0x41de69){_0x32cee9[a5_0x57c9('0x17')](a5_0x57c9('0x1c'),_0x5934b2['message']);return _0x579cb9[a5_0x57c9('0x9')]('/login');}_0x32cee9['logIn'](_0x41de69,_0x314657=>{if(_0x314657){return _0x39caa6(_0x314657);}_0x32cee9[a5_0x57c9('0x17')](a5_0x57c9('0x1d'),{'msg':a5_0x57c9('0x1e')});_0x579cb9[a5_0x57c9('0x9')](_0x32cee9[a5_0x57c9('0x1f')]['returnTo']||'/');});})(_0x32cee9,_0x579cb9,_0x39caa6);};exports[a5_0x57c9('0x20')]=(_0x49554d,_0x6d932b)=>{_0x49554d[a5_0x57c9('0x20')]();_0x6d932b[a5_0x57c9('0x9')]('/');};exports['getSignup']=(_0x4d0ddb,_0x47c67a)=>{if(_0x4d0ddb[a5_0x57c9('0x8')]){return _0x47c67a[a5_0x57c9('0x9')]('/');}_0x47c67a[a5_0x57c9('0xa')](a5_0x57c9('0x21'),{'title':a5_0x57c9('0x22')});};exports['postSignup']=(_0x105861,_0x12ebf4,_0x524b00)=>{_0x105861['assert']('email',a5_0x57c9('0xe'))[a5_0x57c9('0xf')]();_0x105861[a5_0x57c9('0x10')](a5_0x57c9('0x11'),a5_0x57c9('0x23'))[a5_0x57c9('0x24')]({'min':0x4});_0x105861[a5_0x57c9('0x10')](a5_0x57c9('0x25'),a5_0x57c9('0x26'))['equals'](_0x105861[a5_0x57c9('0x27')][a5_0x57c9('0x11')]);_0x105861['sanitize'](a5_0x57c9('0x15'))[a5_0x57c9('0x28')]({'gmail_remove_dots':![]});const _0x274cac=_0x105861[a5_0x57c9('0x16')]();if(_0x274cac){_0x105861[a5_0x57c9('0x17')](a5_0x57c9('0x1c'),_0x274cac);return _0x12ebf4[a5_0x57c9('0x9')](a5_0x57c9('0x29'));}const _0xfa3527=new User_1[(a5_0x57c9('0x19'))]({});User_1[a5_0x57c9('0x19')]['findOne']({'email':_0x105861[a5_0x57c9('0x27')][a5_0x57c9('0x15')]},(_0x10dec2,_0x486f49)=>{if(_0x10dec2){return _0x524b00(_0x10dec2);}if(_0x486f49){_0x105861[a5_0x57c9('0x17')](a5_0x57c9('0x1c'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x12ebf4[a5_0x57c9('0x9')](a5_0x57c9('0x29'));}_0xfa3527[a5_0x57c9('0x2a')](_0x10dec2=>{if(_0x10dec2){return _0x524b00(_0x10dec2);}_0x105861[a5_0x57c9('0x2b')](_0xfa3527,_0x10dec2=>{if(_0x10dec2){return _0x524b00(_0x10dec2);}_0x12ebf4[a5_0x57c9('0x9')]('/');});});});};exports['getAccount']=(_0x5d3276,_0x50ad3c)=>{_0x50ad3c[a5_0x57c9('0xa')](a5_0x57c9('0x2c'),{'title':a5_0x57c9('0x2d')});};exports['postUpdateProfile']=(_0x57e375,_0x244a25,_0x551999)=>{_0x57e375[a5_0x57c9('0x10')](a5_0x57c9('0x15'),a5_0x57c9('0x2e'))[a5_0x57c9('0xf')]();_0x57e375[a5_0x57c9('0x14')]('email')[a5_0x57c9('0x28')]({'gmail_remove_dots':![]});const _0x4db53c=_0x57e375[a5_0x57c9('0x16')]();if(_0x4db53c){_0x57e375[a5_0x57c9('0x17')]('errors',_0x4db53c);return _0x244a25[a5_0x57c9('0x9')](a5_0x57c9('0x2f'));}User_1['default'][a5_0x57c9('0x30')](_0x57e375['user']['id'],(_0x65aba9,_0x5dc4ca)=>{if(_0x65aba9){return _0x551999(_0x65aba9);}_0x5dc4ca[a5_0x57c9('0x15')]=_0x57e375['body'][a5_0x57c9('0x15')]||'';_0x5dc4ca[a5_0x57c9('0x31')][a5_0x57c9('0x32')]=_0x57e375[a5_0x57c9('0x27')]['name']||'';_0x5dc4ca[a5_0x57c9('0x31')][a5_0x57c9('0x33')]=_0x57e375[a5_0x57c9('0x27')]['gender']||'';_0x5dc4ca[a5_0x57c9('0x31')][a5_0x57c9('0x34')]=_0x57e375[a5_0x57c9('0x27')][a5_0x57c9('0x34')]||'';_0x5dc4ca[a5_0x57c9('0x31')]['website']=_0x57e375[a5_0x57c9('0x27')][a5_0x57c9('0x35')]||'';_0x5dc4ca[a5_0x57c9('0x2a')](_0x65aba9=>{if(_0x65aba9){if(_0x65aba9[a5_0x57c9('0x36')]===0x2af8){_0x57e375[a5_0x57c9('0x17')](a5_0x57c9('0x1c'),{'msg':a5_0x57c9('0x37')});return _0x244a25['redirect']('/account');}return _0x551999(_0x65aba9);}_0x57e375[a5_0x57c9('0x17')](a5_0x57c9('0x1d'),{'msg':a5_0x57c9('0x38')});_0x244a25[a5_0x57c9('0x9')](a5_0x57c9('0x2f'));});});};exports['postUpdatePassword']=(_0x2e4362,_0x4bd7a2,_0x2da076)=>{_0x2e4362[a5_0x57c9('0x10')](a5_0x57c9('0x11'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x57c9('0x24')]({'min':0x4});_0x2e4362[a5_0x57c9('0x10')](a5_0x57c9('0x25'),a5_0x57c9('0x26'))[a5_0x57c9('0x39')](_0x2e4362['body']['password']);const _0x57de98=_0x2e4362['validationErrors']();if(_0x57de98){_0x2e4362[a5_0x57c9('0x17')]('errors',_0x57de98);return _0x4bd7a2[a5_0x57c9('0x9')](a5_0x57c9('0x2f'));}User_1[a5_0x57c9('0x19')][a5_0x57c9('0x30')](_0x2e4362[a5_0x57c9('0x8')]['id'],(_0x1156da,_0x1b41c7)=>{if(_0x1156da){return _0x2da076(_0x1156da);}_0x1b41c7[a5_0x57c9('0x11')]=_0x2e4362['body'][a5_0x57c9('0x11')];_0x1b41c7[a5_0x57c9('0x2a')](_0x1156da=>{if(_0x1156da){return _0x2da076(_0x1156da);}_0x2e4362['flash'](a5_0x57c9('0x1d'),{'msg':a5_0x57c9('0x3a')});_0x4bd7a2[a5_0x57c9('0x9')]('/account');});});};exports[a5_0x57c9('0x3b')]=(_0x305289,_0x508140,_0x19731d)=>{User_1[a5_0x57c9('0x19')]['remove']({'_id':_0x305289[a5_0x57c9('0x8')]['id']},_0x23e250=>{if(_0x23e250){return _0x19731d(_0x23e250);}_0x305289[a5_0x57c9('0x20')]();_0x305289[a5_0x57c9('0x17')](a5_0x57c9('0x3c'),{'msg':a5_0x57c9('0x3d')});_0x508140[a5_0x57c9('0x9')]('/');});};exports[a5_0x57c9('0x3e')]=(_0x510f62,_0x31a370,_0x137722)=>{const _0x17ef32=_0x510f62[a5_0x57c9('0x3f')][a5_0x57c9('0x40')];User_1[a5_0x57c9('0x19')][a5_0x57c9('0x30')](_0x510f62[a5_0x57c9('0x8')]['id'],(_0x250f51,_0x2e2c05)=>{if(_0x250f51){return _0x137722(_0x250f51);}_0x2e2c05[_0x17ef32]=undefined;_0x2e2c05[a5_0x57c9('0x41')]=_0x2e2c05[a5_0x57c9('0x41')]['filter'](_0x2f940a=>_0x2f940a[a5_0x57c9('0x42')]!==_0x17ef32);_0x2e2c05[a5_0x57c9('0x2a')](_0x250f51=>{if(_0x250f51){return _0x137722(_0x250f51);}_0x510f62[a5_0x57c9('0x17')](a5_0x57c9('0x3c'),{'msg':_0x17ef32+a5_0x57c9('0x43')});_0x31a370['redirect'](a5_0x57c9('0x2f'));});});};exports[a5_0x57c9('0x44')]=(_0x151cf4,_0x205933,_0x4ed47f)=>{if(_0x151cf4[a5_0x57c9('0x45')]()){return _0x205933['redirect']('/');}User_1[a5_0x57c9('0x19')][a5_0x57c9('0x46')]({'passwordResetToken':_0x151cf4[a5_0x57c9('0x3f')][a5_0x57c9('0x47')]})[a5_0x57c9('0x48')](a5_0x57c9('0x49'))['gt'](Date[a5_0x57c9('0x4a')]())['exec']((_0x137bc3,_0x55f93d)=>{if(_0x137bc3){return _0x4ed47f(_0x137bc3);}if(!_0x55f93d){_0x151cf4['flash'](a5_0x57c9('0x1c'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x205933[a5_0x57c9('0x9')]('/forgot');}_0x205933[a5_0x57c9('0xa')](a5_0x57c9('0x4b'),{'title':a5_0x57c9('0x4c')});});};exports[a5_0x57c9('0x4d')]=(_0x555a56,_0x3088b1,_0xbd55db)=>{_0x555a56[a5_0x57c9('0x10')](a5_0x57c9('0x11'),a5_0x57c9('0x4e'))['len']({'min':0x4});_0x555a56[a5_0x57c9('0x10')](a5_0x57c9('0x4f'),a5_0x57c9('0x50'))['equals'](_0x555a56[a5_0x57c9('0x27')]['password']);const _0x56b4fa=_0x555a56[a5_0x57c9('0x16')]();if(_0x56b4fa){_0x555a56[a5_0x57c9('0x17')]('errors',_0x56b4fa);return _0x3088b1[a5_0x57c9('0x9')](a5_0x57c9('0x51'));}async_1['default'][a5_0x57c9('0x52')]([function resetPassword(_0xe67928){User_1[a5_0x57c9('0x19')][a5_0x57c9('0x46')]({'passwordResetToken':_0x555a56['params'][a5_0x57c9('0x47')]})[a5_0x57c9('0x48')](a5_0x57c9('0x49'))['gt'](Date[a5_0x57c9('0x4a')]())['exec']((_0x4125aa,_0x677679)=>{if(_0x4125aa){return _0xbd55db(_0x4125aa);}if(!_0x677679){_0x555a56[a5_0x57c9('0x17')](a5_0x57c9('0x1c'),{'msg':a5_0x57c9('0x53')});return _0x3088b1[a5_0x57c9('0x9')]('back');}_0x677679['password']=_0x555a56[a5_0x57c9('0x27')]['password'];_0x677679[a5_0x57c9('0x54')]=undefined;_0x677679[a5_0x57c9('0x49')]=undefined;_0x677679['save'](_0x4125aa=>{if(_0x4125aa){return _0xbd55db(_0x4125aa);}_0x555a56[a5_0x57c9('0x2b')](_0x677679,_0x4125aa=>{_0xe67928(_0x4125aa,_0x677679);});});});},function sendResetPasswordEmail(_0x26af63,_0x4c458a){const _0x49dd1c=nodemailer_1[a5_0x57c9('0x19')][a5_0x57c9('0x55')]({'service':'SendGrid','auth':{'user':process[a5_0x57c9('0x56')][a5_0x57c9('0x57')],'pass':process['env'][a5_0x57c9('0x58')]}});const _0x4a368d={'to':_0x26af63[a5_0x57c9('0x15')],'from':'express-ts@starter.com','subject':a5_0x57c9('0x59'),'text':a5_0x57c9('0x5a')+_0x26af63[a5_0x57c9('0x15')]+a5_0x57c9('0x5b')};_0x49dd1c[a5_0x57c9('0x5c')](_0x4a368d,_0x4b271e=>{_0x555a56['flash'](a5_0x57c9('0x1d'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x4c458a(_0x4b271e);});}],_0x29f564=>{if(_0x29f564){return _0xbd55db(_0x29f564);}_0x3088b1[a5_0x57c9('0x9')]('/');});};exports[a5_0x57c9('0x5d')]=(_0x95565d,_0x3d462d)=>{if(_0x95565d[a5_0x57c9('0x45')]()){return _0x3d462d[a5_0x57c9('0x9')]('/');}_0x3d462d[a5_0x57c9('0xa')](a5_0x57c9('0x5e'),{'title':a5_0x57c9('0x5f')});};exports[a5_0x57c9('0x60')]=(_0x29a7b3,_0x3258c8,_0x1c41d8)=>{_0x29a7b3[a5_0x57c9('0x10')]('email',a5_0x57c9('0x2e'))[a5_0x57c9('0xf')]();_0x29a7b3[a5_0x57c9('0x14')](a5_0x57c9('0x15'))[a5_0x57c9('0x28')]({'gmail_remove_dots':![]});const _0x4848d4=_0x29a7b3[a5_0x57c9('0x16')]();if(_0x4848d4){_0x29a7b3[a5_0x57c9('0x17')](a5_0x57c9('0x1c'),_0x4848d4);return _0x3258c8[a5_0x57c9('0x9')](a5_0x57c9('0x61'));}async_1[a5_0x57c9('0x19')][a5_0x57c9('0x52')]([function createRandomToken(_0x13ceb4){crypto_1[a5_0x57c9('0x19')][a5_0x57c9('0x62')](0x10,(_0x23955c,_0xdb3e53)=>{const _0x556d7e=_0xdb3e53['toString'](a5_0x57c9('0x63'));_0x13ceb4(_0x23955c,_0x556d7e);});},function setRandomToken(_0x54c04f,_0x169047){User_1[a5_0x57c9('0x19')]['findOne']({'email':_0x29a7b3[a5_0x57c9('0x27')][a5_0x57c9('0x15')]},(_0x243c09,_0xa2102)=>{if(_0x243c09){return _0x169047(_0x243c09);}if(!_0xa2102){_0x29a7b3[a5_0x57c9('0x17')](a5_0x57c9('0x1c'),{'msg':a5_0x57c9('0x64')});return _0x3258c8[a5_0x57c9('0x9')](a5_0x57c9('0x61'));}_0xa2102[a5_0x57c9('0x54')]=_0x54c04f;_0xa2102[a5_0x57c9('0x49')]=Date[a5_0x57c9('0x4a')]()+0x36ee80;_0xa2102[a5_0x57c9('0x2a')](_0x243c09=>{_0x169047(_0x243c09,_0x54c04f,_0xa2102);});});},function sendForgotPasswordEmail(_0x623456,_0x391510,_0xffd884){const _0x33e3ee=nodemailer_1[a5_0x57c9('0x19')]['createTransport']({'service':a5_0x57c9('0x65'),'auth':{'user':process[a5_0x57c9('0x56')][a5_0x57c9('0x57')],'pass':process['env'][a5_0x57c9('0x58')]}});const _0x4c54c4={'to':_0x391510[a5_0x57c9('0x15')],'from':a5_0x57c9('0x66'),'subject':a5_0x57c9('0x67'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x29a7b3[a5_0x57c9('0x68')][a5_0x57c9('0x69')]+a5_0x57c9('0x6a')+_0x623456+a5_0x57c9('0x6b')};_0x33e3ee[a5_0x57c9('0x5c')](_0x4c54c4,_0x4f3642=>{_0x29a7b3[a5_0x57c9('0x17')](a5_0x57c9('0x3c'),{'msg':a5_0x57c9('0x6c')+_0x391510[a5_0x57c9('0x15')]+a5_0x57c9('0x6d')});_0xffd884(_0x4f3642);});}],_0x385a73=>{if(_0x385a73){return _0x1c41d8(_0x385a73);}_0x3258c8[a5_0x57c9('0x9')](a5_0x57c9('0x61'));});};