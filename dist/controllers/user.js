var a5_0x4ed4=['exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__esModule','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','redirect','render','Login','postLogin','assert','email','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','errors','/login','authenticate','logIn','success','session','returnTo','logout','user','account/signup','Create\x20Account','Email\x20is\x20not\x20valid','password','len','confirmPassword','body','validationErrors','flash','/signup','default','save','getAccount','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','filter','kind','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','findOne','token','where','passwordResetExpires','now'];(function(_0x541b80,_0x2a5330){var _0x461239=function(_0x16a2f5){while(--_0x16a2f5){_0x541b80['push'](_0x541b80['shift']());}};_0x461239(++_0x2a5330);}(a5_0x4ed4,0x91));var a5_0x3c05=function(_0x337a9d,_0x324e69){_0x337a9d=_0x337a9d-0x0;var _0x5bc890=a5_0x4ed4[_0x337a9d];return _0x5bc890;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4f6ed0){return _0x4f6ed0&&_0x4f6ed0['__esModule']?_0x4f6ed0:{'default':_0x4f6ed0};};Object['defineProperty'](exports,a5_0x3c05('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x3c05('0x1')));const crypto_1=__importDefault(require(a5_0x3c05('0x2')));const nodemailer_1=__importDefault(require(a5_0x3c05('0x3')));const passport_1=__importDefault(require(a5_0x3c05('0x4')));const User_1=__importDefault(require(a5_0x3c05('0x5')));const request=require(a5_0x3c05('0x6'));exports[a5_0x3c05('0x7')]=(_0x3d812e,_0xaaf670)=>{if(_0x3d812e['user']){return _0xaaf670[a5_0x3c05('0x8')]('/');}_0xaaf670[a5_0x3c05('0x9')]('account/login',{'title':a5_0x3c05('0xa')});};exports[a5_0x3c05('0xb')]=(_0x3ce1c3,_0x2e043e,_0x232f40)=>{_0x3ce1c3[a5_0x3c05('0xc')](a5_0x3c05('0xd'),'Email\x20is\x20not\x20valid')[a5_0x3c05('0xe')]();_0x3ce1c3['assert']('password',a5_0x3c05('0xf'))[a5_0x3c05('0x10')]();_0x3ce1c3[a5_0x3c05('0x11')](a5_0x3c05('0xd'))[a5_0x3c05('0x12')]({'gmail_remove_dots':![]});const _0x41b2ff=_0x3ce1c3['validationErrors']();if(_0x41b2ff){_0x3ce1c3['flash'](a5_0x3c05('0x13'),_0x41b2ff);return _0x2e043e[a5_0x3c05('0x8')](a5_0x3c05('0x14'));}passport_1['default'][a5_0x3c05('0x15')]('local',(_0x1ecedf,_0x124b87,_0x164fb2)=>{if(_0x1ecedf){return _0x232f40(_0x1ecedf);}if(!_0x124b87){_0x3ce1c3['flash'](a5_0x3c05('0x13'),_0x164fb2['message']);return _0x2e043e[a5_0x3c05('0x8')](a5_0x3c05('0x14'));}_0x3ce1c3[a5_0x3c05('0x16')](_0x124b87,_0x1ecedf=>{if(_0x1ecedf){return _0x232f40(_0x1ecedf);}_0x3ce1c3['flash'](a5_0x3c05('0x17'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x2e043e[a5_0x3c05('0x8')](_0x3ce1c3[a5_0x3c05('0x18')][a5_0x3c05('0x19')]||'/');});})(_0x3ce1c3,_0x2e043e,_0x232f40);};exports[a5_0x3c05('0x1a')]=(_0x2db2dd,_0x69542f)=>{_0x2db2dd['logout']();_0x69542f['redirect']('/');};exports['getSignup']=(_0x4205eb,_0x3eaedf)=>{if(_0x4205eb[a5_0x3c05('0x1b')]){return _0x3eaedf[a5_0x3c05('0x8')]('/');}_0x3eaedf['render'](a5_0x3c05('0x1c'),{'title':a5_0x3c05('0x1d')});};exports['postSignup']=(_0x2b069b,_0x9e9f14,_0x4d2d5e)=>{_0x2b069b[a5_0x3c05('0xc')](a5_0x3c05('0xd'),a5_0x3c05('0x1e'))[a5_0x3c05('0xe')]();_0x2b069b[a5_0x3c05('0xc')](a5_0x3c05('0x1f'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x3c05('0x20')]({'min':0x4});_0x2b069b[a5_0x3c05('0xc')](a5_0x3c05('0x21'),'Passwords\x20do\x20not\x20match')['equals'](_0x2b069b[a5_0x3c05('0x22')][a5_0x3c05('0x1f')]);_0x2b069b[a5_0x3c05('0x11')](a5_0x3c05('0xd'))[a5_0x3c05('0x12')]({'gmail_remove_dots':![]});const _0x2e22e3=_0x2b069b[a5_0x3c05('0x23')]();if(_0x2e22e3){_0x2b069b[a5_0x3c05('0x24')](a5_0x3c05('0x13'),_0x2e22e3);return _0x9e9f14[a5_0x3c05('0x8')](a5_0x3c05('0x25'));}const _0x1edcb0=new User_1['default']({});User_1[a5_0x3c05('0x26')]['findOne']({'email':_0x2b069b['body'][a5_0x3c05('0xd')]},(_0x5332c8,_0x4082c3)=>{if(_0x5332c8){return _0x4d2d5e(_0x5332c8);}if(_0x4082c3){_0x2b069b[a5_0x3c05('0x24')](a5_0x3c05('0x13'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x9e9f14[a5_0x3c05('0x8')](a5_0x3c05('0x25'));}_0x1edcb0[a5_0x3c05('0x27')](_0x5332c8=>{if(_0x5332c8){return _0x4d2d5e(_0x5332c8);}_0x2b069b[a5_0x3c05('0x16')](_0x1edcb0,_0x5332c8=>{if(_0x5332c8){return _0x4d2d5e(_0x5332c8);}_0x9e9f14['redirect']('/');});});});};exports[a5_0x3c05('0x28')]=(_0x1fb7c5,_0x22aacc)=>{_0x22aacc[a5_0x3c05('0x9')](a5_0x3c05('0x29'),{'title':a5_0x3c05('0x2a')});};exports['postUpdateProfile']=(_0x155e44,_0x501e47,_0x530748)=>{_0x155e44[a5_0x3c05('0xc')]('email',a5_0x3c05('0x2b'))[a5_0x3c05('0xe')]();_0x155e44[a5_0x3c05('0x11')](a5_0x3c05('0xd'))[a5_0x3c05('0x12')]({'gmail_remove_dots':![]});const _0x246c39=_0x155e44[a5_0x3c05('0x23')]();if(_0x246c39){_0x155e44['flash'](a5_0x3c05('0x13'),_0x246c39);return _0x501e47[a5_0x3c05('0x8')](a5_0x3c05('0x2c'));}User_1[a5_0x3c05('0x26')][a5_0x3c05('0x2d')](_0x155e44['user']['id'],(_0x3bc739,_0x3dfd8b)=>{if(_0x3bc739){return _0x530748(_0x3bc739);}_0x3dfd8b[a5_0x3c05('0xd')]=_0x155e44[a5_0x3c05('0x22')][a5_0x3c05('0xd')]||'';_0x3dfd8b['profile']['name']=_0x155e44[a5_0x3c05('0x22')][a5_0x3c05('0x2e')]||'';_0x3dfd8b[a5_0x3c05('0x2f')][a5_0x3c05('0x30')]=_0x155e44['body'][a5_0x3c05('0x30')]||'';_0x3dfd8b[a5_0x3c05('0x2f')][a5_0x3c05('0x31')]=_0x155e44['body'][a5_0x3c05('0x31')]||'';_0x3dfd8b[a5_0x3c05('0x2f')][a5_0x3c05('0x32')]=_0x155e44[a5_0x3c05('0x22')]['website']||'';_0x3dfd8b[a5_0x3c05('0x27')](_0x3bc739=>{if(_0x3bc739){if(_0x3bc739[a5_0x3c05('0x33')]===0x2af8){_0x155e44['flash'](a5_0x3c05('0x13'),{'msg':a5_0x3c05('0x34')});return _0x501e47[a5_0x3c05('0x8')](a5_0x3c05('0x2c'));}return _0x530748(_0x3bc739);}_0x155e44[a5_0x3c05('0x24')]('success',{'msg':a5_0x3c05('0x35')});_0x501e47[a5_0x3c05('0x8')](a5_0x3c05('0x2c'));});});};exports[a5_0x3c05('0x36')]=(_0xbaf32,_0x4bf331,_0x4105d8)=>{_0xbaf32['assert'](a5_0x3c05('0x1f'),a5_0x3c05('0x37'))[a5_0x3c05('0x20')]({'min':0x4});_0xbaf32[a5_0x3c05('0xc')]('confirmPassword',a5_0x3c05('0x38'))[a5_0x3c05('0x39')](_0xbaf32['body'][a5_0x3c05('0x1f')]);const _0x2d30f6=_0xbaf32[a5_0x3c05('0x23')]();if(_0x2d30f6){_0xbaf32['flash'](a5_0x3c05('0x13'),_0x2d30f6);return _0x4bf331[a5_0x3c05('0x8')](a5_0x3c05('0x2c'));}User_1[a5_0x3c05('0x26')][a5_0x3c05('0x2d')](_0xbaf32[a5_0x3c05('0x1b')]['id'],(_0x428326,_0x2e4059)=>{if(_0x428326){return _0x4105d8(_0x428326);}_0x2e4059[a5_0x3c05('0x1f')]=_0xbaf32[a5_0x3c05('0x22')][a5_0x3c05('0x1f')];_0x2e4059['save'](_0x428326=>{if(_0x428326){return _0x4105d8(_0x428326);}_0xbaf32[a5_0x3c05('0x24')](a5_0x3c05('0x17'),{'msg':a5_0x3c05('0x3a')});_0x4bf331[a5_0x3c05('0x8')](a5_0x3c05('0x2c'));});});};exports[a5_0x3c05('0x3b')]=(_0x5af850,_0x3c25a3,_0x4f912a)=>{User_1[a5_0x3c05('0x26')][a5_0x3c05('0x3c')]({'_id':_0x5af850[a5_0x3c05('0x1b')]['id']},_0x4ba4eb=>{if(_0x4ba4eb){return _0x4f912a(_0x4ba4eb);}_0x5af850[a5_0x3c05('0x1a')]();_0x5af850[a5_0x3c05('0x24')](a5_0x3c05('0x3d'),{'msg':a5_0x3c05('0x3e')});_0x3c25a3[a5_0x3c05('0x8')]('/');});};exports[a5_0x3c05('0x3f')]=(_0xba179d,_0x5d10bf,_0x32b9c7)=>{const _0x4257df=_0xba179d[a5_0x3c05('0x40')][a5_0x3c05('0x41')];User_1['default']['findById'](_0xba179d[a5_0x3c05('0x1b')]['id'],(_0x14bda4,_0x180a51)=>{if(_0x14bda4){return _0x32b9c7(_0x14bda4);}_0x180a51[_0x4257df]=undefined;_0x180a51['tokens']=_0x180a51['tokens'][a5_0x3c05('0x42')](_0x335891=>_0x335891[a5_0x3c05('0x43')]!==_0x4257df);_0x180a51['save'](_0x14bda4=>{if(_0x14bda4){return _0x32b9c7(_0x14bda4);}_0xba179d[a5_0x3c05('0x24')]('info',{'msg':_0x4257df+a5_0x3c05('0x44')});_0x5d10bf['redirect'](a5_0x3c05('0x2c'));});});};exports['getReset']=(_0x281d6f,_0xbed144,_0x1f0cd9)=>{if(_0x281d6f[a5_0x3c05('0x45')]()){return _0xbed144['redirect']('/');}User_1[a5_0x3c05('0x26')][a5_0x3c05('0x46')]({'passwordResetToken':_0x281d6f[a5_0x3c05('0x40')][a5_0x3c05('0x47')]})[a5_0x3c05('0x48')](a5_0x3c05('0x49'))['gt'](Date[a5_0x3c05('0x4a')]())[a5_0x3c05('0x4b')]((_0x4b99d3,_0x592557)=>{if(_0x4b99d3){return _0x1f0cd9(_0x4b99d3);}if(!_0x592557){_0x281d6f['flash'](a5_0x3c05('0x13'),{'msg':a5_0x3c05('0x4c')});return _0xbed144['redirect'](a5_0x3c05('0x4d'));}_0xbed144[a5_0x3c05('0x9')](a5_0x3c05('0x4e'),{'title':a5_0x3c05('0x4f')});});};exports[a5_0x3c05('0x50')]=(_0x5c82c2,_0x5b6497,_0x52d4c7)=>{_0x5c82c2[a5_0x3c05('0xc')](a5_0x3c05('0x1f'),a5_0x3c05('0x51'))[a5_0x3c05('0x20')]({'min':0x4});_0x5c82c2[a5_0x3c05('0xc')]('confirm',a5_0x3c05('0x52'))[a5_0x3c05('0x39')](_0x5c82c2[a5_0x3c05('0x22')][a5_0x3c05('0x1f')]);const _0x58e4c3=_0x5c82c2[a5_0x3c05('0x23')]();if(_0x58e4c3){_0x5c82c2[a5_0x3c05('0x24')](a5_0x3c05('0x13'),_0x58e4c3);return _0x5b6497[a5_0x3c05('0x8')](a5_0x3c05('0x53'));}async_1[a5_0x3c05('0x26')][a5_0x3c05('0x54')]([function resetPassword(_0x432e74){User_1[a5_0x3c05('0x26')][a5_0x3c05('0x46')]({'passwordResetToken':_0x5c82c2[a5_0x3c05('0x40')][a5_0x3c05('0x47')]})[a5_0x3c05('0x48')]('passwordResetExpires')['gt'](Date[a5_0x3c05('0x4a')]())[a5_0x3c05('0x4b')]((_0x35e9ad,_0x3d1f33)=>{if(_0x35e9ad){return _0x52d4c7(_0x35e9ad);}if(!_0x3d1f33){_0x5c82c2[a5_0x3c05('0x24')](a5_0x3c05('0x13'),{'msg':a5_0x3c05('0x4c')});return _0x5b6497[a5_0x3c05('0x8')](a5_0x3c05('0x53'));}_0x3d1f33[a5_0x3c05('0x1f')]=_0x5c82c2[a5_0x3c05('0x22')][a5_0x3c05('0x1f')];_0x3d1f33[a5_0x3c05('0x55')]=undefined;_0x3d1f33[a5_0x3c05('0x49')]=undefined;_0x3d1f33['save'](_0x35e9ad=>{if(_0x35e9ad){return _0x52d4c7(_0x35e9ad);}_0x5c82c2[a5_0x3c05('0x16')](_0x3d1f33,_0x35e9ad=>{_0x432e74(_0x35e9ad,_0x3d1f33);});});});},function sendResetPasswordEmail(_0x320d86,_0x2eb116){const _0x2b46b8=nodemailer_1[a5_0x3c05('0x26')][a5_0x3c05('0x56')]({'service':a5_0x3c05('0x57'),'auth':{'user':process[a5_0x3c05('0x58')]['SENDGRID_USER'],'pass':process[a5_0x3c05('0x58')][a5_0x3c05('0x59')]}});const _0x51bbbd={'to':_0x320d86['email'],'from':a5_0x3c05('0x5a'),'subject':a5_0x3c05('0x5b'),'text':a5_0x3c05('0x5c')+_0x320d86[a5_0x3c05('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x2b46b8[a5_0x3c05('0x5d')](_0x51bbbd,_0x284b55=>{_0x5c82c2[a5_0x3c05('0x24')](a5_0x3c05('0x17'),{'msg':a5_0x3c05('0x5e')});_0x2eb116(_0x284b55);});}],_0x378690=>{if(_0x378690){return _0x52d4c7(_0x378690);}_0x5b6497[a5_0x3c05('0x8')]('/');});};exports[a5_0x3c05('0x5f')]=(_0x4e9409,_0x4bd5a4)=>{if(_0x4e9409[a5_0x3c05('0x45')]()){return _0x4bd5a4[a5_0x3c05('0x8')]('/');}_0x4bd5a4[a5_0x3c05('0x9')](a5_0x3c05('0x60'),{'title':a5_0x3c05('0x61')});};exports[a5_0x3c05('0x62')]=(_0x1ef068,_0x2e49b9,_0x123fb5)=>{_0x1ef068[a5_0x3c05('0xc')](a5_0x3c05('0xd'),a5_0x3c05('0x2b'))[a5_0x3c05('0xe')]();_0x1ef068[a5_0x3c05('0x11')]('email')[a5_0x3c05('0x12')]({'gmail_remove_dots':![]});const _0x2dc1df=_0x1ef068[a5_0x3c05('0x23')]();if(_0x2dc1df){_0x1ef068['flash'](a5_0x3c05('0x13'),_0x2dc1df);return _0x2e49b9[a5_0x3c05('0x8')](a5_0x3c05('0x4d'));}async_1[a5_0x3c05('0x26')]['waterfall']([function createRandomToken(_0x13007f){crypto_1[a5_0x3c05('0x26')][a5_0x3c05('0x63')](0x10,(_0x190689,_0x422537)=>{const _0x4b209b=_0x422537[a5_0x3c05('0x64')](a5_0x3c05('0x65'));_0x13007f(_0x190689,_0x4b209b);});},function setRandomToken(_0x1c2c10,_0x2a9091){User_1['default'][a5_0x3c05('0x46')]({'email':_0x1ef068[a5_0x3c05('0x22')][a5_0x3c05('0xd')]},(_0x2915ec,_0x2b9750)=>{if(_0x2915ec){return _0x2a9091(_0x2915ec);}if(!_0x2b9750){_0x1ef068[a5_0x3c05('0x24')]('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x2e49b9[a5_0x3c05('0x8')](a5_0x3c05('0x4d'));}_0x2b9750['passwordResetToken']=_0x1c2c10;_0x2b9750[a5_0x3c05('0x49')]=Date[a5_0x3c05('0x4a')]()+0x36ee80;_0x2b9750[a5_0x3c05('0x27')](_0x2915ec=>{_0x2a9091(_0x2915ec,_0x1c2c10,_0x2b9750);});});},function sendForgotPasswordEmail(_0x4e34de,_0x58c212,_0x8fe69b){const _0x4a28c0=nodemailer_1[a5_0x3c05('0x26')][a5_0x3c05('0x56')]({'service':a5_0x3c05('0x57'),'auth':{'user':process[a5_0x3c05('0x58')][a5_0x3c05('0x66')],'pass':process[a5_0x3c05('0x58')][a5_0x3c05('0x59')]}});const _0x3598f1={'to':_0x58c212[a5_0x3c05('0xd')],'from':a5_0x3c05('0x67'),'subject':a5_0x3c05('0x68'),'text':a5_0x3c05('0x69')+_0x1ef068[a5_0x3c05('0x6a')][a5_0x3c05('0x6b')]+'/reset/'+_0x4e34de+a5_0x3c05('0x6c')};_0x4a28c0[a5_0x3c05('0x5d')](_0x3598f1,_0x1d9f60=>{_0x1ef068[a5_0x3c05('0x24')](a5_0x3c05('0x3d'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x58c212[a5_0x3c05('0xd')]+a5_0x3c05('0x6d')});_0x8fe69b(_0x1d9f60);});}],_0x3b92c7=>{if(_0x3b92c7){return _0x123fb5(_0x3b92c7);}_0x2e49b9[a5_0x3c05('0x8')](a5_0x3c05('0x4d'));});};