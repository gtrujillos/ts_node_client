var a5_0x24c4=['sendMail','account/forgot','Forgot\x20Password','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','account/login','postLogin','assert','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','validationErrors','flash','/login','default','authenticate','errors','message','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','getSignup','account/signup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','logIn','account/profile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','save','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','info','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a'];(function(_0x497a88,_0x40c323){var _0x5cbc6c=function(_0x31af80){while(--_0x31af80){_0x497a88['push'](_0x497a88['shift']());}};_0x5cbc6c(++_0x40c323);}(a5_0x24c4,0x150));var a5_0x22d9=function(_0x1f758e,_0x2d7860){_0x1f758e=_0x1f758e-0x0;var _0x89e66c=a5_0x24c4[_0x1f758e];return _0x89e66c;};'use strict';var __importDefault=this&&this[a5_0x22d9('0x0')]||function(_0x46b47b){return _0x46b47b&&_0x46b47b[a5_0x22d9('0x1')]?_0x46b47b:{'default':_0x46b47b};};Object[a5_0x22d9('0x2')](exports,a5_0x22d9('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x22d9('0x3')));const crypto_1=__importDefault(require(a5_0x22d9('0x4')));const nodemailer_1=__importDefault(require(a5_0x22d9('0x5')));const passport_1=__importDefault(require(a5_0x22d9('0x6')));const User_1=__importDefault(require(a5_0x22d9('0x7')));const request=require(a5_0x22d9('0x8'));exports[a5_0x22d9('0x9')]=(_0x4a7b62,_0x48e732)=>{if(_0x4a7b62[a5_0x22d9('0xa')]){return _0x48e732[a5_0x22d9('0xb')]('/');}_0x48e732[a5_0x22d9('0xc')](a5_0x22d9('0xd'),{'title':'Login'});};exports[a5_0x22d9('0xe')]=(_0x537c5a,_0x360ed5,_0x3eea71)=>{_0x537c5a[a5_0x22d9('0xf')]('email','Email\x20is\x20not\x20valid')[a5_0x22d9('0x10')]();_0x537c5a['assert']('password',a5_0x22d9('0x11'))[a5_0x22d9('0x12')]();_0x537c5a[a5_0x22d9('0x13')](a5_0x22d9('0x14'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x315e5f=_0x537c5a[a5_0x22d9('0x15')]();if(_0x315e5f){_0x537c5a[a5_0x22d9('0x16')]('errors',_0x315e5f);return _0x360ed5['redirect'](a5_0x22d9('0x17'));}passport_1[a5_0x22d9('0x18')][a5_0x22d9('0x19')]('local',(_0x2bc8b9,_0x2a0460,_0x2a2bcd)=>{if(_0x2bc8b9){return _0x3eea71(_0x2bc8b9);}if(!_0x2a0460){_0x537c5a['flash'](a5_0x22d9('0x1a'),_0x2a2bcd[a5_0x22d9('0x1b')]);return _0x360ed5['redirect'](a5_0x22d9('0x17'));}_0x537c5a['logIn'](_0x2a0460,_0x2bc8b9=>{if(_0x2bc8b9){return _0x3eea71(_0x2bc8b9);}_0x537c5a['flash'](a5_0x22d9('0x1c'),{'msg':a5_0x22d9('0x1d')});_0x360ed5[a5_0x22d9('0xb')](_0x537c5a[a5_0x22d9('0x1e')]['returnTo']||'/');});})(_0x537c5a,_0x360ed5,_0x3eea71);};exports[a5_0x22d9('0x1f')]=(_0x58f979,_0x49604a)=>{_0x58f979[a5_0x22d9('0x1f')]();_0x49604a['redirect']('/');};exports[a5_0x22d9('0x20')]=(_0x421f7d,_0x4ef3c9)=>{if(_0x421f7d[a5_0x22d9('0xa')]){return _0x4ef3c9[a5_0x22d9('0xb')]('/');}_0x4ef3c9['render'](a5_0x22d9('0x21'),{'title':a5_0x22d9('0x22')});};exports[a5_0x22d9('0x23')]=(_0x4063ab,_0xac3650,_0x447fcb)=>{_0x4063ab[a5_0x22d9('0xf')](a5_0x22d9('0x14'),a5_0x22d9('0x24'))[a5_0x22d9('0x10')]();_0x4063ab['assert'](a5_0x22d9('0x25'),a5_0x22d9('0x26'))[a5_0x22d9('0x27')]({'min':0x4});_0x4063ab['assert']('confirmPassword',a5_0x22d9('0x28'))[a5_0x22d9('0x29')](_0x4063ab[a5_0x22d9('0x2a')][a5_0x22d9('0x25')]);_0x4063ab['sanitize'](a5_0x22d9('0x14'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x5907ce=_0x4063ab['validationErrors']();if(_0x5907ce){_0x4063ab[a5_0x22d9('0x16')]('errors',_0x5907ce);return _0xac3650[a5_0x22d9('0xb')](a5_0x22d9('0x2b'));}const _0x15a0f5=new User_1[(a5_0x22d9('0x18'))]({});User_1[a5_0x22d9('0x18')][a5_0x22d9('0x2c')]({'email':_0x4063ab['body'][a5_0x22d9('0x14')]},(_0x55880c,_0x477e25)=>{if(_0x55880c){return _0x447fcb(_0x55880c);}if(_0x477e25){_0x4063ab[a5_0x22d9('0x16')]('errors',{'msg':a5_0x22d9('0x2d')});return _0xac3650[a5_0x22d9('0xb')](a5_0x22d9('0x2b'));}_0x15a0f5['save'](_0x55880c=>{if(_0x55880c){return _0x447fcb(_0x55880c);}_0x4063ab[a5_0x22d9('0x2e')](_0x15a0f5,_0x55880c=>{if(_0x55880c){return _0x447fcb(_0x55880c);}_0xac3650[a5_0x22d9('0xb')]('/');});});});};exports['getAccount']=(_0x44e0af,_0x55388b)=>{_0x55388b['render'](a5_0x22d9('0x2f'),{'title':'Account\x20Management'});};exports['postUpdateProfile']=(_0x51b402,_0x2473b2,_0x1e4bc0)=>{_0x51b402[a5_0x22d9('0xf')](a5_0x22d9('0x14'),a5_0x22d9('0x30'))[a5_0x22d9('0x10')]();_0x51b402['sanitize'](a5_0x22d9('0x14'))[a5_0x22d9('0x31')]({'gmail_remove_dots':![]});const _0x43f051=_0x51b402[a5_0x22d9('0x15')]();if(_0x43f051){_0x51b402[a5_0x22d9('0x16')](a5_0x22d9('0x1a'),_0x43f051);return _0x2473b2['redirect'](a5_0x22d9('0x32'));}User_1['default'][a5_0x22d9('0x33')](_0x51b402[a5_0x22d9('0xa')]['id'],(_0x1cca3e,_0x2685b4)=>{if(_0x1cca3e){return _0x1e4bc0(_0x1cca3e);}_0x2685b4[a5_0x22d9('0x14')]=_0x51b402[a5_0x22d9('0x2a')][a5_0x22d9('0x14')]||'';_0x2685b4[a5_0x22d9('0x34')]['name']=_0x51b402[a5_0x22d9('0x2a')][a5_0x22d9('0x35')]||'';_0x2685b4[a5_0x22d9('0x34')][a5_0x22d9('0x36')]=_0x51b402[a5_0x22d9('0x2a')][a5_0x22d9('0x36')]||'';_0x2685b4['profile']['location']=_0x51b402['body'][a5_0x22d9('0x37')]||'';_0x2685b4['profile'][a5_0x22d9('0x38')]=_0x51b402['body']['website']||'';_0x2685b4['save'](_0x1cca3e=>{if(_0x1cca3e){if(_0x1cca3e[a5_0x22d9('0x39')]===0x2af8){_0x51b402[a5_0x22d9('0x16')](a5_0x22d9('0x1a'),{'msg':a5_0x22d9('0x3a')});return _0x2473b2[a5_0x22d9('0xb')](a5_0x22d9('0x32'));}return _0x1e4bc0(_0x1cca3e);}_0x51b402[a5_0x22d9('0x16')](a5_0x22d9('0x1c'),{'msg':a5_0x22d9('0x3b')});_0x2473b2['redirect'](a5_0x22d9('0x32'));});});};exports['postUpdatePassword']=(_0x278c9e,_0x2e8e61,_0x693012)=>{_0x278c9e['assert'](a5_0x22d9('0x25'),a5_0x22d9('0x26'))[a5_0x22d9('0x27')]({'min':0x4});_0x278c9e[a5_0x22d9('0xf')]('confirmPassword',a5_0x22d9('0x28'))['equals'](_0x278c9e[a5_0x22d9('0x2a')][a5_0x22d9('0x25')]);const _0x30c247=_0x278c9e[a5_0x22d9('0x15')]();if(_0x30c247){_0x278c9e[a5_0x22d9('0x16')](a5_0x22d9('0x1a'),_0x30c247);return _0x2e8e61['redirect'](a5_0x22d9('0x32'));}User_1[a5_0x22d9('0x18')]['findById'](_0x278c9e[a5_0x22d9('0xa')]['id'],(_0x4e9a82,_0x12894f)=>{if(_0x4e9a82){return _0x693012(_0x4e9a82);}_0x12894f[a5_0x22d9('0x25')]=_0x278c9e[a5_0x22d9('0x2a')][a5_0x22d9('0x25')];_0x12894f[a5_0x22d9('0x3c')](_0x4e9a82=>{if(_0x4e9a82){return _0x693012(_0x4e9a82);}_0x278c9e[a5_0x22d9('0x16')](a5_0x22d9('0x1c'),{'msg':a5_0x22d9('0x3d')});_0x2e8e61[a5_0x22d9('0xb')](a5_0x22d9('0x32'));});});};exports[a5_0x22d9('0x3e')]=(_0x227099,_0x3d0407,_0x1e7ac8)=>{User_1['default'][a5_0x22d9('0x3f')]({'_id':_0x227099[a5_0x22d9('0xa')]['id']},_0x37f506=>{if(_0x37f506){return _0x1e7ac8(_0x37f506);}_0x227099[a5_0x22d9('0x1f')]();_0x227099[a5_0x22d9('0x16')]('info',{'msg':a5_0x22d9('0x40')});_0x3d0407[a5_0x22d9('0xb')]('/');});};exports[a5_0x22d9('0x41')]=(_0x10fcd5,_0xc9c001,_0x1124cf)=>{const _0x4f3222=_0x10fcd5[a5_0x22d9('0x42')][a5_0x22d9('0x43')];User_1[a5_0x22d9('0x18')][a5_0x22d9('0x33')](_0x10fcd5[a5_0x22d9('0xa')]['id'],(_0xbd826d,_0x2cd612)=>{if(_0xbd826d){return _0x1124cf(_0xbd826d);}_0x2cd612[_0x4f3222]=undefined;_0x2cd612[a5_0x22d9('0x44')]=_0x2cd612['tokens'][a5_0x22d9('0x45')](_0x103c9b=>_0x103c9b['kind']!==_0x4f3222);_0x2cd612[a5_0x22d9('0x3c')](_0xbd826d=>{if(_0xbd826d){return _0x1124cf(_0xbd826d);}_0x10fcd5[a5_0x22d9('0x16')](a5_0x22d9('0x46'),{'msg':_0x4f3222+a5_0x22d9('0x47')});_0xc9c001[a5_0x22d9('0xb')](a5_0x22d9('0x32'));});});};exports[a5_0x22d9('0x48')]=(_0x483d1a,_0x46d6e3,_0x4e4980)=>{if(_0x483d1a[a5_0x22d9('0x49')]()){return _0x46d6e3['redirect']('/');}User_1[a5_0x22d9('0x18')][a5_0x22d9('0x2c')]({'passwordResetToken':_0x483d1a[a5_0x22d9('0x42')][a5_0x22d9('0x4a')]})[a5_0x22d9('0x4b')](a5_0x22d9('0x4c'))['gt'](Date[a5_0x22d9('0x4d')]())[a5_0x22d9('0x4e')]((_0x5e9aba,_0x4c55b9)=>{if(_0x5e9aba){return _0x4e4980(_0x5e9aba);}if(!_0x4c55b9){_0x483d1a[a5_0x22d9('0x16')](a5_0x22d9('0x1a'),{'msg':a5_0x22d9('0x4f')});return _0x46d6e3['redirect'](a5_0x22d9('0x50'));}_0x46d6e3[a5_0x22d9('0xc')]('account/reset',{'title':a5_0x22d9('0x51')});});};exports[a5_0x22d9('0x52')]=(_0x32d36d,_0xf8aea5,_0x3a6efc)=>{_0x32d36d[a5_0x22d9('0xf')](a5_0x22d9('0x25'),a5_0x22d9('0x53'))[a5_0x22d9('0x27')]({'min':0x4});_0x32d36d[a5_0x22d9('0xf')](a5_0x22d9('0x54'),a5_0x22d9('0x55'))[a5_0x22d9('0x29')](_0x32d36d[a5_0x22d9('0x2a')][a5_0x22d9('0x25')]);const _0x57811b=_0x32d36d[a5_0x22d9('0x15')]();if(_0x57811b){_0x32d36d[a5_0x22d9('0x16')](a5_0x22d9('0x1a'),_0x57811b);return _0xf8aea5[a5_0x22d9('0xb')](a5_0x22d9('0x56'));}async_1[a5_0x22d9('0x18')]['waterfall']([function resetPassword(_0x46aacc){User_1[a5_0x22d9('0x18')][a5_0x22d9('0x2c')]({'passwordResetToken':_0x32d36d[a5_0x22d9('0x42')][a5_0x22d9('0x4a')]})['where'](a5_0x22d9('0x4c'))['gt'](Date[a5_0x22d9('0x4d')]())['exec']((_0x48cc1c,_0x5a070a)=>{if(_0x48cc1c){return _0x3a6efc(_0x48cc1c);}if(!_0x5a070a){_0x32d36d[a5_0x22d9('0x16')](a5_0x22d9('0x1a'),{'msg':a5_0x22d9('0x4f')});return _0xf8aea5[a5_0x22d9('0xb')](a5_0x22d9('0x56'));}_0x5a070a['password']=_0x32d36d[a5_0x22d9('0x2a')][a5_0x22d9('0x25')];_0x5a070a[a5_0x22d9('0x57')]=undefined;_0x5a070a[a5_0x22d9('0x4c')]=undefined;_0x5a070a[a5_0x22d9('0x3c')](_0x48cc1c=>{if(_0x48cc1c){return _0x3a6efc(_0x48cc1c);}_0x32d36d[a5_0x22d9('0x2e')](_0x5a070a,_0x48cc1c=>{_0x46aacc(_0x48cc1c,_0x5a070a);});});});},function sendResetPasswordEmail(_0xb60e2f,_0x45ad0e){const _0x421637=nodemailer_1[a5_0x22d9('0x18')][a5_0x22d9('0x58')]({'service':a5_0x22d9('0x59'),'auth':{'user':process[a5_0x22d9('0x5a')][a5_0x22d9('0x5b')],'pass':process[a5_0x22d9('0x5a')]['SENDGRID_PASSWORD']}});const _0x37c2c4={'to':_0xb60e2f['email'],'from':a5_0x22d9('0x5c'),'subject':a5_0x22d9('0x5d'),'text':a5_0x22d9('0x5e')+_0xb60e2f[a5_0x22d9('0x14')]+a5_0x22d9('0x5f')};_0x421637[a5_0x22d9('0x60')](_0x37c2c4,_0x24aab5=>{_0x32d36d['flash']('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x45ad0e(_0x24aab5);});}],_0x366f02=>{if(_0x366f02){return _0x3a6efc(_0x366f02);}_0xf8aea5['redirect']('/');});};exports['getForgot']=(_0x149497,_0x443ae2)=>{if(_0x149497[a5_0x22d9('0x49')]()){return _0x443ae2['redirect']('/');}_0x443ae2[a5_0x22d9('0xc')](a5_0x22d9('0x61'),{'title':a5_0x22d9('0x62')});};exports['postForgot']=(_0x581607,_0x37f301,_0x16f6c7)=>{_0x581607[a5_0x22d9('0xf')]('email',a5_0x22d9('0x30'))[a5_0x22d9('0x10')]();_0x581607[a5_0x22d9('0x13')](a5_0x22d9('0x14'))[a5_0x22d9('0x31')]({'gmail_remove_dots':![]});const _0x544763=_0x581607[a5_0x22d9('0x15')]();if(_0x544763){_0x581607[a5_0x22d9('0x16')](a5_0x22d9('0x1a'),_0x544763);return _0x37f301[a5_0x22d9('0xb')]('/forgot');}async_1[a5_0x22d9('0x18')]['waterfall']([function createRandomToken(_0x28695d){crypto_1[a5_0x22d9('0x18')][a5_0x22d9('0x63')](0x10,(_0x28a027,_0x4eedf1)=>{const _0x110a68=_0x4eedf1['toString']('hex');_0x28695d(_0x28a027,_0x110a68);});},function setRandomToken(_0x38b520,_0xdbb5fa){User_1[a5_0x22d9('0x18')][a5_0x22d9('0x2c')]({'email':_0x581607['body']['email']},(_0x4f585f,_0x218a24)=>{if(_0x4f585f){return _0xdbb5fa(_0x4f585f);}if(!_0x218a24){_0x581607[a5_0x22d9('0x16')]('errors',{'msg':a5_0x22d9('0x64')});return _0x37f301[a5_0x22d9('0xb')](a5_0x22d9('0x50'));}_0x218a24[a5_0x22d9('0x57')]=_0x38b520;_0x218a24[a5_0x22d9('0x4c')]=Date[a5_0x22d9('0x4d')]()+0x36ee80;_0x218a24[a5_0x22d9('0x3c')](_0x4f585f=>{_0xdbb5fa(_0x4f585f,_0x38b520,_0x218a24);});});},function sendForgotPasswordEmail(_0x44b8e2,_0xfaa096,_0x2d5c70){const _0x47940a=nodemailer_1['default']['createTransport']({'service':a5_0x22d9('0x59'),'auth':{'user':process[a5_0x22d9('0x5a')]['SENDGRID_USER'],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x363747={'to':_0xfaa096[a5_0x22d9('0x14')],'from':a5_0x22d9('0x65'),'subject':a5_0x22d9('0x66'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x581607['headers'][a5_0x22d9('0x67')]+a5_0x22d9('0x68')+_0x44b8e2+a5_0x22d9('0x69')};_0x47940a[a5_0x22d9('0x60')](_0x363747,_0x3eda8c=>{_0x581607[a5_0x22d9('0x16')](a5_0x22d9('0x46'),{'msg':a5_0x22d9('0x6a')+_0xfaa096[a5_0x22d9('0x14')]+a5_0x22d9('0x6b')});_0x2d5c70(_0x3eda8c);});}],_0x5db389=>{if(_0x5db389){return _0x16f6c7(_0x5db389);}_0x37f301[a5_0x22d9('0xb')](a5_0x22d9('0x50'));});};