var a5_0x5e12=['account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','logIn','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','render','Login','email','isEmail','assert','password','Password\x20cannot\x20be\x20blank','notEmpty','flash','errors','/login','default','local','message','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','sanitize','validationErrors','findOne','/signup','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','normalizeEmail','/account','findById','profile','name','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','/forgot'];(function(_0x4eb50c,_0x1d18d2){var _0x4dcdc3=function(_0x4847d1){while(--_0x4847d1){_0x4eb50c['push'](_0x4eb50c['shift']());}};_0x4dcdc3(++_0x1d18d2);}(a5_0x5e12,0xfe));var a5_0x1f18=function(_0x2f3e31,_0x3a89c9){_0x2f3e31=_0x2f3e31-0x0;var _0x2c6db2=a5_0x5e12[_0x2f3e31];return _0x2c6db2;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4a5c66){return _0x4a5c66&&_0x4a5c66[a5_0x1f18('0x0')]?_0x4a5c66:{'default':_0x4a5c66};};Object[a5_0x1f18('0x1')](exports,a5_0x1f18('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x1f18('0x2')));const crypto_1=__importDefault(require(a5_0x1f18('0x3')));const nodemailer_1=__importDefault(require(a5_0x1f18('0x4')));const passport_1=__importDefault(require(a5_0x1f18('0x5')));const User_1=__importDefault(require(a5_0x1f18('0x6')));const request=require(a5_0x1f18('0x7'));exports[a5_0x1f18('0x8')]=(_0x284856,_0x142d5f)=>{if(_0x284856[a5_0x1f18('0x9')]){return _0x142d5f[a5_0x1f18('0xa')]('/');}_0x142d5f[a5_0x1f18('0xb')]('account/login',{'title':a5_0x1f18('0xc')});};exports['postLogin']=(_0x2e8594,_0x3164f0,_0x51eff6)=>{_0x2e8594['assert'](a5_0x1f18('0xd'),'Email\x20is\x20not\x20valid')[a5_0x1f18('0xe')]();_0x2e8594[a5_0x1f18('0xf')](a5_0x1f18('0x10'),a5_0x1f18('0x11'))[a5_0x1f18('0x12')]();_0x2e8594['sanitize'](a5_0x1f18('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x569083=_0x2e8594['validationErrors']();if(_0x569083){_0x2e8594[a5_0x1f18('0x13')](a5_0x1f18('0x14'),_0x569083);return _0x3164f0[a5_0x1f18('0xa')](a5_0x1f18('0x15'));}passport_1[a5_0x1f18('0x16')]['authenticate'](a5_0x1f18('0x17'),(_0x395432,_0x204e17,_0x56a2c2)=>{if(_0x395432){return _0x51eff6(_0x395432);}if(!_0x204e17){_0x2e8594[a5_0x1f18('0x13')](a5_0x1f18('0x14'),_0x56a2c2[a5_0x1f18('0x18')]);return _0x3164f0['redirect']('/login');}_0x2e8594['logIn'](_0x204e17,_0x395432=>{if(_0x395432){return _0x51eff6(_0x395432);}_0x2e8594[a5_0x1f18('0x13')](a5_0x1f18('0x19'),{'msg':a5_0x1f18('0x1a')});_0x3164f0[a5_0x1f18('0xa')](_0x2e8594[a5_0x1f18('0x1b')][a5_0x1f18('0x1c')]||'/');});})(_0x2e8594,_0x3164f0,_0x51eff6);};exports[a5_0x1f18('0x1d')]=(_0x4b76f7,_0x2e602d)=>{_0x4b76f7['logout']();_0x2e602d['redirect']('/');};exports['getSignup']=(_0x5f4e55,_0x4d1e4f)=>{if(_0x5f4e55[a5_0x1f18('0x9')]){return _0x4d1e4f[a5_0x1f18('0xa')]('/');}_0x4d1e4f['render'](a5_0x1f18('0x1e'),{'title':a5_0x1f18('0x1f')});};exports[a5_0x1f18('0x20')]=(_0x23dfe4,_0x588bd1,_0x5d1906)=>{_0x23dfe4[a5_0x1f18('0xf')](a5_0x1f18('0xd'),'Email\x20is\x20not\x20valid')['isEmail']();_0x23dfe4[a5_0x1f18('0xf')](a5_0x1f18('0x10'),a5_0x1f18('0x21'))[a5_0x1f18('0x22')]({'min':0x4});_0x23dfe4['assert'](a5_0x1f18('0x23'),a5_0x1f18('0x24'))[a5_0x1f18('0x25')](_0x23dfe4[a5_0x1f18('0x26')][a5_0x1f18('0x10')]);_0x23dfe4[a5_0x1f18('0x27')](a5_0x1f18('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x29c784=_0x23dfe4[a5_0x1f18('0x28')]();if(_0x29c784){_0x23dfe4['flash'](a5_0x1f18('0x14'),_0x29c784);return _0x588bd1[a5_0x1f18('0xa')]('/signup');}const _0x57bb58=new User_1[(a5_0x1f18('0x16'))]({});User_1[a5_0x1f18('0x16')][a5_0x1f18('0x29')]({'email':_0x23dfe4[a5_0x1f18('0x26')][a5_0x1f18('0xd')]},(_0x3f5577,_0x297cf4)=>{if(_0x3f5577){return _0x5d1906(_0x3f5577);}if(_0x297cf4){_0x23dfe4['flash']('errors',{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x588bd1[a5_0x1f18('0xa')](a5_0x1f18('0x2a'));}_0x57bb58[a5_0x1f18('0x2b')](_0x3f5577=>{if(_0x3f5577){return _0x5d1906(_0x3f5577);}_0x23dfe4['logIn'](_0x57bb58,_0x3f5577=>{if(_0x3f5577){return _0x5d1906(_0x3f5577);}_0x588bd1[a5_0x1f18('0xa')]('/');});});});};exports[a5_0x1f18('0x2c')]=(_0x433a1e,_0x220345)=>{_0x220345[a5_0x1f18('0xb')](a5_0x1f18('0x2d'),{'title':a5_0x1f18('0x2e')});};exports[a5_0x1f18('0x2f')]=(_0x2869b0,_0x4fb97e,_0x137e06)=>{_0x2869b0['assert'](a5_0x1f18('0xd'),a5_0x1f18('0x30'))[a5_0x1f18('0xe')]();_0x2869b0[a5_0x1f18('0x27')](a5_0x1f18('0xd'))[a5_0x1f18('0x31')]({'gmail_remove_dots':![]});const _0x58f332=_0x2869b0['validationErrors']();if(_0x58f332){_0x2869b0[a5_0x1f18('0x13')](a5_0x1f18('0x14'),_0x58f332);return _0x4fb97e['redirect'](a5_0x1f18('0x32'));}User_1['default'][a5_0x1f18('0x33')](_0x2869b0['user']['id'],(_0x3c473f,_0x5482d9)=>{if(_0x3c473f){return _0x137e06(_0x3c473f);}_0x5482d9['email']=_0x2869b0[a5_0x1f18('0x26')][a5_0x1f18('0xd')]||'';_0x5482d9[a5_0x1f18('0x34')][a5_0x1f18('0x35')]=_0x2869b0['body'][a5_0x1f18('0x35')]||'';_0x5482d9[a5_0x1f18('0x34')][a5_0x1f18('0x36')]=_0x2869b0['body'][a5_0x1f18('0x36')]||'';_0x5482d9[a5_0x1f18('0x34')][a5_0x1f18('0x37')]=_0x2869b0[a5_0x1f18('0x26')][a5_0x1f18('0x37')]||'';_0x5482d9[a5_0x1f18('0x34')]['website']=_0x2869b0[a5_0x1f18('0x26')][a5_0x1f18('0x38')]||'';_0x5482d9[a5_0x1f18('0x2b')](_0x3c473f=>{if(_0x3c473f){if(_0x3c473f[a5_0x1f18('0x39')]===0x2af8){_0x2869b0['flash'](a5_0x1f18('0x14'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x4fb97e['redirect'](a5_0x1f18('0x32'));}return _0x137e06(_0x3c473f);}_0x2869b0['flash']('success',{'msg':a5_0x1f18('0x3a')});_0x4fb97e[a5_0x1f18('0xa')](a5_0x1f18('0x32'));});});};exports[a5_0x1f18('0x3b')]=(_0x47ee27,_0x2b48a3,_0x4c17ad)=>{_0x47ee27[a5_0x1f18('0xf')](a5_0x1f18('0x10'),a5_0x1f18('0x21'))[a5_0x1f18('0x22')]({'min':0x4});_0x47ee27[a5_0x1f18('0xf')](a5_0x1f18('0x23'),a5_0x1f18('0x24'))[a5_0x1f18('0x25')](_0x47ee27[a5_0x1f18('0x26')]['password']);const _0x31ca4d=_0x47ee27['validationErrors']();if(_0x31ca4d){_0x47ee27[a5_0x1f18('0x13')]('errors',_0x31ca4d);return _0x2b48a3[a5_0x1f18('0xa')](a5_0x1f18('0x32'));}User_1[a5_0x1f18('0x16')]['findById'](_0x47ee27['user']['id'],(_0x1c3f09,_0x1dc9cc)=>{if(_0x1c3f09){return _0x4c17ad(_0x1c3f09);}_0x1dc9cc[a5_0x1f18('0x10')]=_0x47ee27[a5_0x1f18('0x26')][a5_0x1f18('0x10')];_0x1dc9cc[a5_0x1f18('0x2b')](_0x1c3f09=>{if(_0x1c3f09){return _0x4c17ad(_0x1c3f09);}_0x47ee27[a5_0x1f18('0x13')](a5_0x1f18('0x19'),{'msg':'Password\x20has\x20been\x20changed.'});_0x2b48a3[a5_0x1f18('0xa')]('/account');});});};exports['postDeleteAccount']=(_0xf59107,_0x4e185a,_0x584d9c)=>{User_1[a5_0x1f18('0x16')]['remove']({'_id':_0xf59107['user']['id']},_0x46ba5a=>{if(_0x46ba5a){return _0x584d9c(_0x46ba5a);}_0xf59107[a5_0x1f18('0x1d')]();_0xf59107['flash'](a5_0x1f18('0x3c'),{'msg':a5_0x1f18('0x3d')});_0x4e185a[a5_0x1f18('0xa')]('/');});};exports[a5_0x1f18('0x3e')]=(_0x5d45db,_0x623e8a,_0x30d438)=>{const _0x20338e=_0x5d45db[a5_0x1f18('0x3f')][a5_0x1f18('0x40')];User_1[a5_0x1f18('0x16')][a5_0x1f18('0x33')](_0x5d45db[a5_0x1f18('0x9')]['id'],(_0x16bec7,_0x282e5b)=>{if(_0x16bec7){return _0x30d438(_0x16bec7);}_0x282e5b[_0x20338e]=undefined;_0x282e5b[a5_0x1f18('0x41')]=_0x282e5b[a5_0x1f18('0x41')][a5_0x1f18('0x42')](_0x52df93=>_0x52df93['kind']!==_0x20338e);_0x282e5b[a5_0x1f18('0x2b')](_0x16bec7=>{if(_0x16bec7){return _0x30d438(_0x16bec7);}_0x5d45db[a5_0x1f18('0x13')]('info',{'msg':_0x20338e+a5_0x1f18('0x43')});_0x623e8a[a5_0x1f18('0xa')](a5_0x1f18('0x32'));});});};exports[a5_0x1f18('0x44')]=(_0x40bf99,_0x1b8b61,_0x217d85)=>{if(_0x40bf99[a5_0x1f18('0x45')]()){return _0x1b8b61[a5_0x1f18('0xa')]('/');}User_1[a5_0x1f18('0x16')][a5_0x1f18('0x29')]({'passwordResetToken':_0x40bf99['params'][a5_0x1f18('0x46')]})[a5_0x1f18('0x47')](a5_0x1f18('0x48'))['gt'](Date[a5_0x1f18('0x49')]())[a5_0x1f18('0x4a')]((_0x6544cb,_0x2201b4)=>{if(_0x6544cb){return _0x217d85(_0x6544cb);}if(!_0x2201b4){_0x40bf99[a5_0x1f18('0x13')](a5_0x1f18('0x14'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x1b8b61[a5_0x1f18('0xa')](a5_0x1f18('0x4b'));}_0x1b8b61[a5_0x1f18('0xb')](a5_0x1f18('0x4c'),{'title':a5_0x1f18('0x4d')});});};exports['postReset']=(_0x12c1fb,_0x5b3cc5,_0x31940c)=>{_0x12c1fb[a5_0x1f18('0xf')](a5_0x1f18('0x10'),a5_0x1f18('0x4e'))[a5_0x1f18('0x22')]({'min':0x4});_0x12c1fb[a5_0x1f18('0xf')](a5_0x1f18('0x4f'),a5_0x1f18('0x50'))[a5_0x1f18('0x25')](_0x12c1fb[a5_0x1f18('0x26')]['password']);const _0x4a43eb=_0x12c1fb['validationErrors']();if(_0x4a43eb){_0x12c1fb[a5_0x1f18('0x13')]('errors',_0x4a43eb);return _0x5b3cc5[a5_0x1f18('0xa')](a5_0x1f18('0x51'));}async_1['default'][a5_0x1f18('0x52')]([function resetPassword(_0x50f25e){User_1['default']['findOne']({'passwordResetToken':_0x12c1fb[a5_0x1f18('0x3f')][a5_0x1f18('0x46')]})[a5_0x1f18('0x47')](a5_0x1f18('0x48'))['gt'](Date[a5_0x1f18('0x49')]())[a5_0x1f18('0x4a')]((_0x5ea9a3,_0x3986e6)=>{if(_0x5ea9a3){return _0x31940c(_0x5ea9a3);}if(!_0x3986e6){_0x12c1fb[a5_0x1f18('0x13')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x5b3cc5[a5_0x1f18('0xa')](a5_0x1f18('0x51'));}_0x3986e6[a5_0x1f18('0x10')]=_0x12c1fb['body'][a5_0x1f18('0x10')];_0x3986e6['passwordResetToken']=undefined;_0x3986e6[a5_0x1f18('0x48')]=undefined;_0x3986e6['save'](_0x5ea9a3=>{if(_0x5ea9a3){return _0x31940c(_0x5ea9a3);}_0x12c1fb[a5_0x1f18('0x53')](_0x3986e6,_0x5ea9a3=>{_0x50f25e(_0x5ea9a3,_0x3986e6);});});});},function sendResetPasswordEmail(_0x2b54ac,_0x2f79fa){const _0x46674e=nodemailer_1[a5_0x1f18('0x16')][a5_0x1f18('0x54')]({'service':a5_0x1f18('0x55'),'auth':{'user':process[a5_0x1f18('0x56')][a5_0x1f18('0x57')],'pass':process[a5_0x1f18('0x56')][a5_0x1f18('0x58')]}});const _0x2e9881={'to':_0x2b54ac[a5_0x1f18('0xd')],'from':a5_0x1f18('0x59'),'subject':a5_0x1f18('0x5a'),'text':a5_0x1f18('0x5b')+_0x2b54ac[a5_0x1f18('0xd')]+a5_0x1f18('0x5c')};_0x46674e['sendMail'](_0x2e9881,_0xf59e60=>{_0x12c1fb[a5_0x1f18('0x13')]('success',{'msg':a5_0x1f18('0x5d')});_0x2f79fa(_0xf59e60);});}],_0x9c04cf=>{if(_0x9c04cf){return _0x31940c(_0x9c04cf);}_0x5b3cc5['redirect']('/');});};exports[a5_0x1f18('0x5e')]=(_0x2abea0,_0x161274)=>{if(_0x2abea0['isAuthenticated']()){return _0x161274['redirect']('/');}_0x161274[a5_0x1f18('0xb')](a5_0x1f18('0x5f'),{'title':a5_0x1f18('0x60')});};exports[a5_0x1f18('0x61')]=(_0x6a2cd8,_0x2f971c,_0x32fed6)=>{_0x6a2cd8[a5_0x1f18('0xf')](a5_0x1f18('0xd'),a5_0x1f18('0x30'))['isEmail']();_0x6a2cd8[a5_0x1f18('0x27')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x20936a=_0x6a2cd8[a5_0x1f18('0x28')]();if(_0x20936a){_0x6a2cd8[a5_0x1f18('0x13')](a5_0x1f18('0x14'),_0x20936a);return _0x2f971c[a5_0x1f18('0xa')](a5_0x1f18('0x4b'));}async_1[a5_0x1f18('0x16')][a5_0x1f18('0x52')]([function createRandomToken(_0x31161e){crypto_1[a5_0x1f18('0x16')][a5_0x1f18('0x62')](0x10,(_0x30deb9,_0x42366f)=>{const _0x5632a1=_0x42366f['toString'](a5_0x1f18('0x63'));_0x31161e(_0x30deb9,_0x5632a1);});},function setRandomToken(_0x342e60,_0x5b7d67){User_1['default'][a5_0x1f18('0x29')]({'email':_0x6a2cd8[a5_0x1f18('0x26')][a5_0x1f18('0xd')]},(_0x1b3bfd,_0x3ad421)=>{if(_0x1b3bfd){return _0x5b7d67(_0x1b3bfd);}if(!_0x3ad421){_0x6a2cd8[a5_0x1f18('0x13')]('errors',{'msg':a5_0x1f18('0x64')});return _0x2f971c['redirect'](a5_0x1f18('0x4b'));}_0x3ad421[a5_0x1f18('0x65')]=_0x342e60;_0x3ad421[a5_0x1f18('0x48')]=Date[a5_0x1f18('0x49')]()+0x36ee80;_0x3ad421[a5_0x1f18('0x2b')](_0x1b3bfd=>{_0x5b7d67(_0x1b3bfd,_0x342e60,_0x3ad421);});});},function sendForgotPasswordEmail(_0x2889c8,_0x5233fd,_0x444440){const _0x1965b6=nodemailer_1[a5_0x1f18('0x16')][a5_0x1f18('0x54')]({'service':a5_0x1f18('0x55'),'auth':{'user':process[a5_0x1f18('0x56')][a5_0x1f18('0x57')],'pass':process[a5_0x1f18('0x56')][a5_0x1f18('0x58')]}});const _0x24fe0c={'to':_0x5233fd[a5_0x1f18('0xd')],'from':'hackathon@starter.com','subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x1f18('0x66')+_0x6a2cd8[a5_0x1f18('0x67')][a5_0x1f18('0x68')]+a5_0x1f18('0x69')+_0x2889c8+a5_0x1f18('0x6a')};_0x1965b6[a5_0x1f18('0x6b')](_0x24fe0c,_0x4261f2=>{_0x6a2cd8[a5_0x1f18('0x13')](a5_0x1f18('0x3c'),{'msg':a5_0x1f18('0x6c')+_0x5233fd[a5_0x1f18('0xd')]+a5_0x1f18('0x6d')});_0x444440(_0x4261f2);});}],_0x28d541=>{if(_0x28d541){return _0x32fed6(_0x28d541);}_0x2f971c[a5_0x1f18('0xa')](a5_0x1f18('0x4b'));});};