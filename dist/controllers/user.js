var a5_0x70f3=['/forgot','account/reset','Password\x20Reset','postReset','Passwords\x20must\x20match.','back','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','defineProperty','async','crypto','nodemailer','../models/User','express-validator','getLogin','redirect','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','/login','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','user','postSignup','assert','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','account/profile','Account\x20Management','Please\x20enter\x20a\x20valid\x20email\x20address.','isEmail','/account','default','name','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','findById','tokens','filter','kind','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'];(function(_0x434274,_0x2c38fd){var _0x59b8c8=function(_0x4ce3e8){while(--_0x4ce3e8){_0x434274['push'](_0x434274['shift']());}};_0x59b8c8(++_0x2c38fd);}(a5_0x70f3,0x15e));var a5_0x7493=function(_0x291e8b,_0xf7a755){_0x291e8b=_0x291e8b-0x0;var _0x4d5de2=a5_0x70f3[_0x291e8b];return _0x4d5de2;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2f5ff7){return _0x2f5ff7&&_0x2f5ff7['__esModule']?_0x2f5ff7:{'default':_0x2f5ff7};};Object[a5_0x7493('0x0')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x7493('0x1')));const crypto_1=__importDefault(require(a5_0x7493('0x2')));const nodemailer_1=__importDefault(require(a5_0x7493('0x3')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x7493('0x4')));const request=require(a5_0x7493('0x5'));exports[a5_0x7493('0x6')]=(_0x44c626,_0x19557f)=>{if(_0x44c626['user']){return _0x19557f[a5_0x7493('0x7')]('/');}_0x19557f[a5_0x7493('0x8')](a5_0x7493('0x9'),{'title':a5_0x7493('0xa')});};exports[a5_0x7493('0xb')]=(_0x3168be,_0x42896b,_0x251efa)=>{_0x3168be['assert'](a5_0x7493('0xc'),a5_0x7493('0xd'))['isEmail']();_0x3168be['assert'](a5_0x7493('0xe'),a5_0x7493('0xf'))['notEmpty']();_0x3168be[a5_0x7493('0x10')](a5_0x7493('0xc'))[a5_0x7493('0x11')]({'gmail_remove_dots':![]});const _0x1cc344=_0x3168be[a5_0x7493('0x12')]();if(_0x1cc344){_0x3168be[a5_0x7493('0x13')](a5_0x7493('0x14'),_0x1cc344);return _0x42896b[a5_0x7493('0x7')](a5_0x7493('0x15'));}passport_1['default'][a5_0x7493('0x16')](a5_0x7493('0x17'),(_0x524cab,_0x54827c,_0x1d0a54)=>{if(_0x524cab){return _0x251efa(_0x524cab);}if(!_0x54827c){_0x3168be['flash'](a5_0x7493('0x14'),_0x1d0a54[a5_0x7493('0x18')]);return _0x42896b[a5_0x7493('0x7')](a5_0x7493('0x15'));}_0x3168be[a5_0x7493('0x19')](_0x54827c,_0x524cab=>{if(_0x524cab){return _0x251efa(_0x524cab);}_0x3168be[a5_0x7493('0x13')](a5_0x7493('0x1a'),{'msg':a5_0x7493('0x1b')});_0x42896b[a5_0x7493('0x7')](_0x3168be[a5_0x7493('0x1c')][a5_0x7493('0x1d')]||'/');});})(_0x3168be,_0x42896b,_0x251efa);};exports[a5_0x7493('0x1e')]=(_0x550ad5,_0x2d868a)=>{_0x550ad5[a5_0x7493('0x1e')]();_0x2d868a[a5_0x7493('0x7')]('/');};exports[a5_0x7493('0x1f')]=(_0x230a6a,_0xd20ddf)=>{if(_0x230a6a[a5_0x7493('0x20')]){return _0xd20ddf[a5_0x7493('0x7')]('/');}_0xd20ddf[a5_0x7493('0x8')]('account/signup',{'title':'Create\x20Account'});};exports[a5_0x7493('0x21')]=(_0x22de55,_0x35c753,_0x54c488)=>{_0x22de55[a5_0x7493('0x22')](a5_0x7493('0xc'),'Email\x20is\x20not\x20valid')['isEmail']();_0x22de55[a5_0x7493('0x22')]('password',a5_0x7493('0x23'))[a5_0x7493('0x24')]({'min':0x4});_0x22de55[a5_0x7493('0x22')](a5_0x7493('0x25'),a5_0x7493('0x26'))['equals'](_0x22de55[a5_0x7493('0x27')][a5_0x7493('0xe')]);_0x22de55[a5_0x7493('0x10')](a5_0x7493('0xc'))[a5_0x7493('0x11')]({'gmail_remove_dots':![]});const _0xa1f024=_0x22de55['validationErrors']();if(_0xa1f024){_0x22de55['flash'](a5_0x7493('0x14'),_0xa1f024);return _0x35c753['redirect']('/signup');}const _0x12e362=new User_1['default']({});User_1['default'][a5_0x7493('0x28')]({'email':_0x22de55[a5_0x7493('0x27')][a5_0x7493('0xc')]},(_0x632fd2,_0x3f5272)=>{if(_0x632fd2){return _0x54c488(_0x632fd2);}if(_0x3f5272){_0x22de55[a5_0x7493('0x13')]('errors',{'msg':a5_0x7493('0x29')});return _0x35c753[a5_0x7493('0x7')](a5_0x7493('0x2a'));}_0x12e362[a5_0x7493('0x2b')](_0x632fd2=>{if(_0x632fd2){return _0x54c488(_0x632fd2);}_0x22de55[a5_0x7493('0x19')](_0x12e362,_0x632fd2=>{if(_0x632fd2){return _0x54c488(_0x632fd2);}_0x35c753[a5_0x7493('0x7')]('/');});});});};exports['getAccount']=(_0x377add,_0x48b48b)=>{_0x48b48b['render'](a5_0x7493('0x2c'),{'title':a5_0x7493('0x2d')});};exports['postUpdateProfile']=(_0x392b5d,_0x38f9fb,_0x4e3b44)=>{_0x392b5d['assert']('email',a5_0x7493('0x2e'))[a5_0x7493('0x2f')]();_0x392b5d[a5_0x7493('0x10')](a5_0x7493('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x289c4a=_0x392b5d[a5_0x7493('0x12')]();if(_0x289c4a){_0x392b5d[a5_0x7493('0x13')]('errors',_0x289c4a);return _0x38f9fb[a5_0x7493('0x7')](a5_0x7493('0x30'));}User_1[a5_0x7493('0x31')]['findById'](_0x392b5d[a5_0x7493('0x20')]['id'],(_0x374117,_0x57fe1d)=>{if(_0x374117){return _0x4e3b44(_0x374117);}_0x57fe1d[a5_0x7493('0xc')]=_0x392b5d[a5_0x7493('0x27')][a5_0x7493('0xc')]||'';_0x57fe1d['profile'][a5_0x7493('0x32')]=_0x392b5d['body'][a5_0x7493('0x32')]||'';_0x57fe1d[a5_0x7493('0x33')][a5_0x7493('0x34')]=_0x392b5d['body']['gender']||'';_0x57fe1d['profile'][a5_0x7493('0x35')]=_0x392b5d[a5_0x7493('0x27')][a5_0x7493('0x35')]||'';_0x57fe1d[a5_0x7493('0x33')]['website']=_0x392b5d['body'][a5_0x7493('0x36')]||'';_0x57fe1d[a5_0x7493('0x2b')](_0x374117=>{if(_0x374117){if(_0x374117[a5_0x7493('0x37')]===0x2af8){_0x392b5d[a5_0x7493('0x13')](a5_0x7493('0x14'),{'msg':a5_0x7493('0x38')});return _0x38f9fb['redirect'](a5_0x7493('0x30'));}return _0x4e3b44(_0x374117);}_0x392b5d[a5_0x7493('0x13')](a5_0x7493('0x1a'),{'msg':a5_0x7493('0x39')});_0x38f9fb['redirect']('/account');});});};exports[a5_0x7493('0x3a')]=(_0x275fa3,_0x5eae08,_0x4101ab)=>{_0x275fa3['assert'](a5_0x7493('0xe'),a5_0x7493('0x23'))[a5_0x7493('0x24')]({'min':0x4});_0x275fa3[a5_0x7493('0x22')](a5_0x7493('0x25'),a5_0x7493('0x26'))[a5_0x7493('0x3b')](_0x275fa3[a5_0x7493('0x27')]['password']);const _0x236ff4=_0x275fa3[a5_0x7493('0x12')]();if(_0x236ff4){_0x275fa3[a5_0x7493('0x13')](a5_0x7493('0x14'),_0x236ff4);return _0x5eae08[a5_0x7493('0x7')](a5_0x7493('0x30'));}User_1['default']['findById'](_0x275fa3[a5_0x7493('0x20')]['id'],(_0x4f9086,_0x1ed366)=>{if(_0x4f9086){return _0x4101ab(_0x4f9086);}_0x1ed366[a5_0x7493('0xe')]=_0x275fa3[a5_0x7493('0x27')][a5_0x7493('0xe')];_0x1ed366[a5_0x7493('0x2b')](_0x4f9086=>{if(_0x4f9086){return _0x4101ab(_0x4f9086);}_0x275fa3[a5_0x7493('0x13')]('success',{'msg':a5_0x7493('0x3c')});_0x5eae08['redirect']('/account');});});};exports[a5_0x7493('0x3d')]=(_0x5ee127,_0x57240d,_0x5274c9)=>{User_1[a5_0x7493('0x31')]['remove']({'_id':_0x5ee127[a5_0x7493('0x20')]['id']},_0x198716=>{if(_0x198716){return _0x5274c9(_0x198716);}_0x5ee127['logout']();_0x5ee127['flash'](a5_0x7493('0x3e'),{'msg':a5_0x7493('0x3f')});_0x57240d[a5_0x7493('0x7')]('/');});};exports[a5_0x7493('0x40')]=(_0x3fe1a9,_0x337993,_0x258096)=>{const _0x37bf5d=_0x3fe1a9[a5_0x7493('0x41')]['provider'];User_1[a5_0x7493('0x31')][a5_0x7493('0x42')](_0x3fe1a9[a5_0x7493('0x20')]['id'],(_0x429c1d,_0x206d86)=>{if(_0x429c1d){return _0x258096(_0x429c1d);}_0x206d86[_0x37bf5d]=undefined;_0x206d86[a5_0x7493('0x43')]=_0x206d86['tokens'][a5_0x7493('0x44')](_0x16bd22=>_0x16bd22[a5_0x7493('0x45')]!==_0x37bf5d);_0x206d86[a5_0x7493('0x2b')](_0x429c1d=>{if(_0x429c1d){return _0x258096(_0x429c1d);}_0x3fe1a9[a5_0x7493('0x13')]('info',{'msg':_0x37bf5d+'\x20account\x20has\x20been\x20unlinked.'});_0x337993[a5_0x7493('0x7')](a5_0x7493('0x30'));});});};exports[a5_0x7493('0x46')]=(_0x4ca114,_0xb4773b,_0x3e1a73)=>{if(_0x4ca114[a5_0x7493('0x47')]()){return _0xb4773b['redirect']('/');}User_1[a5_0x7493('0x31')][a5_0x7493('0x28')]({'passwordResetToken':_0x4ca114[a5_0x7493('0x41')][a5_0x7493('0x48')]})[a5_0x7493('0x49')](a5_0x7493('0x4a'))['gt'](Date[a5_0x7493('0x4b')]())[a5_0x7493('0x4c')]((_0x4eab60,_0x9f0a81)=>{if(_0x4eab60){return _0x3e1a73(_0x4eab60);}if(!_0x9f0a81){_0x4ca114['flash']('errors',{'msg':a5_0x7493('0x4d')});return _0xb4773b[a5_0x7493('0x7')](a5_0x7493('0x4e'));}_0xb4773b[a5_0x7493('0x8')](a5_0x7493('0x4f'),{'title':a5_0x7493('0x50')});});};exports[a5_0x7493('0x51')]=(_0x3c5082,_0x519e39,_0xecb54)=>{_0x3c5082[a5_0x7493('0x22')](a5_0x7493('0xe'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x7493('0x24')]({'min':0x4});_0x3c5082[a5_0x7493('0x22')]('confirm',a5_0x7493('0x52'))[a5_0x7493('0x3b')](_0x3c5082[a5_0x7493('0x27')]['password']);const _0x2cf32c=_0x3c5082[a5_0x7493('0x12')]();if(_0x2cf32c){_0x3c5082['flash']('errors',_0x2cf32c);return _0x519e39[a5_0x7493('0x7')](a5_0x7493('0x53'));}async_1[a5_0x7493('0x31')]['waterfall']([function resetPassword(_0x5a76b9){User_1[a5_0x7493('0x31')][a5_0x7493('0x28')]({'passwordResetToken':_0x3c5082[a5_0x7493('0x41')][a5_0x7493('0x48')]})['where'](a5_0x7493('0x4a'))['gt'](Date['now']())['exec']((_0x3ba305,_0x52ae7f)=>{if(_0x3ba305){return _0xecb54(_0x3ba305);}if(!_0x52ae7f){_0x3c5082[a5_0x7493('0x13')](a5_0x7493('0x14'),{'msg':a5_0x7493('0x4d')});return _0x519e39['redirect'](a5_0x7493('0x53'));}_0x52ae7f[a5_0x7493('0xe')]=_0x3c5082[a5_0x7493('0x27')][a5_0x7493('0xe')];_0x52ae7f[a5_0x7493('0x54')]=undefined;_0x52ae7f[a5_0x7493('0x4a')]=undefined;_0x52ae7f[a5_0x7493('0x2b')](_0x3ba305=>{if(_0x3ba305){return _0xecb54(_0x3ba305);}_0x3c5082[a5_0x7493('0x19')](_0x52ae7f,_0x3ba305=>{_0x5a76b9(_0x3ba305,_0x52ae7f);});});});},function sendResetPasswordEmail(_0x35a09e,_0x40cdfc){const _0xce10a9=nodemailer_1['default'][a5_0x7493('0x55')]({'service':a5_0x7493('0x56'),'auth':{'user':process[a5_0x7493('0x57')][a5_0x7493('0x58')],'pass':process[a5_0x7493('0x57')][a5_0x7493('0x59')]}});const _0x320ce7={'to':_0x35a09e['email'],'from':'express-ts@starter.com','subject':'Your\x20password\x20has\x20been\x20changed','text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x35a09e['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0xce10a9[a5_0x7493('0x5a')](_0x320ce7,_0x50b598=>{_0x3c5082['flash'](a5_0x7493('0x1a'),{'msg':a5_0x7493('0x5b')});_0x40cdfc(_0x50b598);});}],_0x1a877b=>{if(_0x1a877b){return _0xecb54(_0x1a877b);}_0x519e39[a5_0x7493('0x7')]('/');});};exports['getForgot']=(_0x244d41,_0x2a8313)=>{if(_0x244d41[a5_0x7493('0x47')]()){return _0x2a8313[a5_0x7493('0x7')]('/');}_0x2a8313[a5_0x7493('0x8')](a5_0x7493('0x5c'),{'title':a5_0x7493('0x5d')});};exports[a5_0x7493('0x5e')]=(_0x1795d1,_0x54344c,_0x185600)=>{_0x1795d1[a5_0x7493('0x22')]('email','Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x1795d1[a5_0x7493('0x10')]('email')[a5_0x7493('0x11')]({'gmail_remove_dots':![]});const _0x5c8028=_0x1795d1[a5_0x7493('0x12')]();if(_0x5c8028){_0x1795d1[a5_0x7493('0x13')]('errors',_0x5c8028);return _0x54344c[a5_0x7493('0x7')](a5_0x7493('0x4e'));}async_1[a5_0x7493('0x31')][a5_0x7493('0x5f')]([function createRandomToken(_0x5a2683){crypto_1['default'][a5_0x7493('0x60')](0x10,(_0x22bae6,_0x4d6d0c)=>{const _0x5954ba=_0x4d6d0c[a5_0x7493('0x61')](a5_0x7493('0x62'));_0x5a2683(_0x22bae6,_0x5954ba);});},function setRandomToken(_0x304694,_0xbeafb5){User_1[a5_0x7493('0x31')]['findOne']({'email':_0x1795d1[a5_0x7493('0x27')]['email']},(_0x5062db,_0x5afa5c)=>{if(_0x5062db){return _0xbeafb5(_0x5062db);}if(!_0x5afa5c){_0x1795d1[a5_0x7493('0x13')](a5_0x7493('0x14'),{'msg':a5_0x7493('0x63')});return _0x54344c['redirect'](a5_0x7493('0x4e'));}_0x5afa5c[a5_0x7493('0x54')]=_0x304694;_0x5afa5c[a5_0x7493('0x4a')]=Date[a5_0x7493('0x4b')]()+0x36ee80;_0x5afa5c[a5_0x7493('0x2b')](_0x5062db=>{_0xbeafb5(_0x5062db,_0x304694,_0x5afa5c);});});},function sendForgotPasswordEmail(_0x3b4bc7,_0x50a53b,_0x1d2978){const _0x3031e5=nodemailer_1[a5_0x7493('0x31')][a5_0x7493('0x55')]({'service':'SendGrid','auth':{'user':process[a5_0x7493('0x57')]['SENDGRID_USER'],'pass':process[a5_0x7493('0x57')][a5_0x7493('0x59')]}});const _0x2b9e68={'to':_0x50a53b[a5_0x7493('0xc')],'from':'hackathon@starter.com','subject':a5_0x7493('0x64'),'text':a5_0x7493('0x65')+_0x1795d1[a5_0x7493('0x66')][a5_0x7493('0x67')]+'/reset/'+_0x3b4bc7+a5_0x7493('0x68')};_0x3031e5['sendMail'](_0x2b9e68,_0x55d380=>{_0x1795d1[a5_0x7493('0x13')]('info',{'msg':a5_0x7493('0x69')+_0x50a53b[a5_0x7493('0xc')]+a5_0x7493('0x6a')});_0x1d2978(_0x55d380);});}],_0x582d79=>{if(_0x582d79){return _0x185600(_0x582d79);}_0x54344c[a5_0x7493('0x7')](a5_0x7493('0x4e'));});};