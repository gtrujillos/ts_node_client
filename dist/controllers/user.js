var a5_0x1f79=['tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','passwordResetExpires','now','exec','/forgot','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','params','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','env','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','SENDGRID_USER','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','../models/User','express-validator','user','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','validationErrors','flash','errors','/login','default','authenticate','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','body','normalizeEmail','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','gender','profile','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','Passwords\x20do\x20not\x20match','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider'];(function(_0x2eba8e,_0x413e68){var _0x8f4be=function(_0x1f26c2){while(--_0x1f26c2){_0x2eba8e['push'](_0x2eba8e['shift']());}};_0x8f4be(++_0x413e68);}(a5_0x1f79,0x17c));var a5_0x5cf7=function(_0x3cb487,_0x62395a){_0x3cb487=_0x3cb487-0x0;var _0xa9bfce=a5_0x1f79[_0x3cb487];return _0xa9bfce;};'use strict';var __importDefault=this&&this[a5_0x5cf7('0x0')]||function(_0x39cc54){return _0x39cc54&&_0x39cc54[a5_0x5cf7('0x1')]?_0x39cc54:{'default':_0x39cc54};};Object[a5_0x5cf7('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x5cf7('0x3')));const nodemailer_1=__importDefault(require(a5_0x5cf7('0x4')));const passport_1=__importDefault(require(a5_0x5cf7('0x5')));const User_1=__importDefault(require(a5_0x5cf7('0x6')));const request=require(a5_0x5cf7('0x7'));exports['getLogin']=(_0x35669c,_0x2ecbf2)=>{if(_0x35669c[a5_0x5cf7('0x8')]){return _0x2ecbf2[a5_0x5cf7('0x9')]('/');}_0x2ecbf2[a5_0x5cf7('0xa')](a5_0x5cf7('0xb'),{'title':a5_0x5cf7('0xc')});};exports[a5_0x5cf7('0xd')]=(_0x5b6ac6,_0x1640db,_0x217ae5)=>{_0x5b6ac6[a5_0x5cf7('0xe')](a5_0x5cf7('0xf'),a5_0x5cf7('0x10'))[a5_0x5cf7('0x11')]();_0x5b6ac6[a5_0x5cf7('0xe')](a5_0x5cf7('0x12'),a5_0x5cf7('0x13'))[a5_0x5cf7('0x14')]();_0x5b6ac6[a5_0x5cf7('0x15')](a5_0x5cf7('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2abe16=_0x5b6ac6[a5_0x5cf7('0x16')]();if(_0x2abe16){_0x5b6ac6[a5_0x5cf7('0x17')](a5_0x5cf7('0x18'),_0x2abe16);return _0x1640db[a5_0x5cf7('0x9')](a5_0x5cf7('0x19'));}passport_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x1b')]('local',(_0x494a7a,_0x1fe9af,_0x108a5b)=>{if(_0x494a7a){return _0x217ae5(_0x494a7a);}if(!_0x1fe9af){_0x5b6ac6[a5_0x5cf7('0x17')](a5_0x5cf7('0x18'),_0x108a5b['message']);return _0x1640db[a5_0x5cf7('0x9')](a5_0x5cf7('0x19'));}_0x5b6ac6[a5_0x5cf7('0x1c')](_0x1fe9af,_0x494a7a=>{if(_0x494a7a){return _0x217ae5(_0x494a7a);}_0x5b6ac6['flash'](a5_0x5cf7('0x1d'),{'msg':a5_0x5cf7('0x1e')});_0x1640db[a5_0x5cf7('0x9')](_0x5b6ac6['session'][a5_0x5cf7('0x1f')]||'/');});})(_0x5b6ac6,_0x1640db,_0x217ae5);};exports['logout']=(_0x4e4861,_0x3dc945)=>{_0x4e4861[a5_0x5cf7('0x20')]();_0x3dc945[a5_0x5cf7('0x9')]('/');};exports[a5_0x5cf7('0x21')]=(_0x1220d7,_0x4c5498)=>{if(_0x1220d7[a5_0x5cf7('0x8')]){return _0x4c5498[a5_0x5cf7('0x9')]('/');}_0x4c5498['render']('account/signup',{'title':'Create\x20Account'});};exports[a5_0x5cf7('0x22')]=(_0x553f44,_0x65ff14,_0x1bf4e9)=>{_0x553f44[a5_0x5cf7('0xe')]('email',a5_0x5cf7('0x10'))['isEmail']();_0x553f44[a5_0x5cf7('0xe')](a5_0x5cf7('0x12'),a5_0x5cf7('0x23'))[a5_0x5cf7('0x24')]({'min':0x4});_0x553f44[a5_0x5cf7('0xe')](a5_0x5cf7('0x25'),'Passwords\x20do\x20not\x20match')['equals'](_0x553f44[a5_0x5cf7('0x26')]['password']);_0x553f44[a5_0x5cf7('0x15')](a5_0x5cf7('0xf'))[a5_0x5cf7('0x27')]({'gmail_remove_dots':![]});const _0x1e4800=_0x553f44[a5_0x5cf7('0x16')]();if(_0x1e4800){_0x553f44[a5_0x5cf7('0x17')](a5_0x5cf7('0x18'),_0x1e4800);return _0x65ff14[a5_0x5cf7('0x9')]('/signup');}const _0x5824c2=new User_1[(a5_0x5cf7('0x1a'))]({'email':_0x553f44[a5_0x5cf7('0x26')][a5_0x5cf7('0xf')],'password':_0x553f44['body'][a5_0x5cf7('0x12')]});User_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x28')]({'email':_0x553f44[a5_0x5cf7('0x26')][a5_0x5cf7('0xf')]},(_0x4043bc,_0xd348d1)=>{if(_0x4043bc){return _0x1bf4e9(_0x4043bc);}if(_0xd348d1){_0x553f44[a5_0x5cf7('0x17')](a5_0x5cf7('0x18'),{'msg':a5_0x5cf7('0x29')});return _0x65ff14[a5_0x5cf7('0x9')](a5_0x5cf7('0x2a'));}_0x5824c2[a5_0x5cf7('0x2b')](_0x4043bc=>{if(_0x4043bc){return _0x1bf4e9(_0x4043bc);}_0x553f44[a5_0x5cf7('0x1c')](_0x5824c2,_0x4043bc=>{if(_0x4043bc){return _0x1bf4e9(_0x4043bc);}_0x65ff14[a5_0x5cf7('0x9')]('/');});});});};exports[a5_0x5cf7('0x2c')]=(_0x98b150,_0x31594f)=>{_0x31594f[a5_0x5cf7('0xa')](a5_0x5cf7('0x2d'),{'title':a5_0x5cf7('0x2e')});};exports[a5_0x5cf7('0x2f')]=(_0x533ff6,_0x346360,_0xa8b8c4)=>{_0x533ff6[a5_0x5cf7('0xe')]('email',a5_0x5cf7('0x30'))['isEmail']();_0x533ff6[a5_0x5cf7('0x15')](a5_0x5cf7('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x131870=_0x533ff6['validationErrors']();if(_0x131870){_0x533ff6['flash']('errors',_0x131870);return _0x346360['redirect'](a5_0x5cf7('0x31'));}User_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x32')](_0x533ff6[a5_0x5cf7('0x8')]['id'],(_0x5f3f26,_0x712f2c)=>{if(_0x5f3f26){return _0xa8b8c4(_0x5f3f26);}_0x712f2c[a5_0x5cf7('0xf')]=_0x533ff6[a5_0x5cf7('0x26')][a5_0x5cf7('0xf')]||'';_0x712f2c['profile']['name']=_0x533ff6['body'][a5_0x5cf7('0x33')]||'';_0x712f2c['profile'][a5_0x5cf7('0x34')]=_0x533ff6[a5_0x5cf7('0x26')]['gender']||'';_0x712f2c[a5_0x5cf7('0x35')]['location']=_0x533ff6[a5_0x5cf7('0x26')][a5_0x5cf7('0x36')]||'';_0x712f2c[a5_0x5cf7('0x35')][a5_0x5cf7('0x37')]=_0x533ff6[a5_0x5cf7('0x26')][a5_0x5cf7('0x37')]||'';_0x712f2c['save'](_0x5f3f26=>{if(_0x5f3f26){if(_0x5f3f26[a5_0x5cf7('0x38')]===0x2af8){_0x533ff6[a5_0x5cf7('0x17')]('errors',{'msg':a5_0x5cf7('0x39')});return _0x346360[a5_0x5cf7('0x9')](a5_0x5cf7('0x31'));}return _0xa8b8c4(_0x5f3f26);}_0x533ff6[a5_0x5cf7('0x17')](a5_0x5cf7('0x1d'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x346360['redirect']('/account');});});};exports[a5_0x5cf7('0x3a')]=(_0x2c2199,_0x1c3311,_0x38e900)=>{_0x2c2199[a5_0x5cf7('0xe')](a5_0x5cf7('0x12'),a5_0x5cf7('0x23'))[a5_0x5cf7('0x24')]({'min':0x4});_0x2c2199['assert'](a5_0x5cf7('0x25'),a5_0x5cf7('0x3b'))[a5_0x5cf7('0x3c')](_0x2c2199[a5_0x5cf7('0x26')][a5_0x5cf7('0x12')]);const _0x811c6=_0x2c2199[a5_0x5cf7('0x16')]();if(_0x811c6){_0x2c2199[a5_0x5cf7('0x17')](a5_0x5cf7('0x18'),_0x811c6);return _0x1c3311['redirect'](a5_0x5cf7('0x31'));}User_1['default'][a5_0x5cf7('0x32')](_0x2c2199[a5_0x5cf7('0x8')]['id'],(_0x7a42a4,_0xeb9a98)=>{if(_0x7a42a4){return _0x38e900(_0x7a42a4);}_0xeb9a98['password']=_0x2c2199[a5_0x5cf7('0x26')][a5_0x5cf7('0x12')];_0xeb9a98['save'](_0x7a42a4=>{if(_0x7a42a4){return _0x38e900(_0x7a42a4);}_0x2c2199['flash'](a5_0x5cf7('0x1d'),{'msg':a5_0x5cf7('0x3d')});_0x1c3311[a5_0x5cf7('0x9')](a5_0x5cf7('0x31'));});});};exports[a5_0x5cf7('0x3e')]=(_0x53002,_0x3c2c68,_0x553968)=>{User_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x3f')]({'_id':_0x53002['user']['id']},_0x2320e0=>{if(_0x2320e0){return _0x553968(_0x2320e0);}_0x53002['logout']();_0x53002[a5_0x5cf7('0x17')](a5_0x5cf7('0x40'),{'msg':a5_0x5cf7('0x41')});_0x3c2c68['redirect']('/');});};exports[a5_0x5cf7('0x42')]=(_0x2fb7bf,_0x428dd4,_0x1995b4)=>{const _0x9dc46f=_0x2fb7bf['params'][a5_0x5cf7('0x43')];User_1[a5_0x5cf7('0x1a')]['findById'](_0x2fb7bf[a5_0x5cf7('0x8')]['id'],(_0x122c58,_0x46113b)=>{if(_0x122c58){return _0x1995b4(_0x122c58);}_0x46113b[_0x9dc46f]=undefined;_0x46113b[a5_0x5cf7('0x44')]=_0x46113b[a5_0x5cf7('0x44')]['filter'](_0x4738c3=>_0x4738c3[a5_0x5cf7('0x45')]!==_0x9dc46f);_0x46113b[a5_0x5cf7('0x2b')](_0x122c58=>{if(_0x122c58){return _0x1995b4(_0x122c58);}_0x2fb7bf[a5_0x5cf7('0x17')]('info',{'msg':_0x9dc46f+a5_0x5cf7('0x46')});_0x428dd4[a5_0x5cf7('0x9')](a5_0x5cf7('0x31'));});});};exports[a5_0x5cf7('0x47')]=(_0x322322,_0x22d088,_0x1d119c)=>{if(_0x322322['isAuthenticated']()){return _0x22d088[a5_0x5cf7('0x9')]('/');}User_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x28')]({'passwordResetToken':_0x322322['params'][a5_0x5cf7('0x48')]})[a5_0x5cf7('0x49')](a5_0x5cf7('0x4a'))['gt'](Date[a5_0x5cf7('0x4b')]())[a5_0x5cf7('0x4c')]((_0x1e582f,_0x3013b0)=>{if(_0x1e582f){return _0x1d119c(_0x1e582f);}if(!_0x3013b0){_0x322322[a5_0x5cf7('0x17')](a5_0x5cf7('0x18'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x22d088[a5_0x5cf7('0x9')](a5_0x5cf7('0x4d'));}_0x22d088[a5_0x5cf7('0xa')]('account/reset',{'title':a5_0x5cf7('0x4e')});});};exports[a5_0x5cf7('0x4f')]=(_0x5702b8,_0x4a8379,_0x48dc54)=>{_0x5702b8[a5_0x5cf7('0xe')]('password',a5_0x5cf7('0x50'))[a5_0x5cf7('0x24')]({'min':0x4});_0x5702b8[a5_0x5cf7('0xe')](a5_0x5cf7('0x51'),a5_0x5cf7('0x52'))[a5_0x5cf7('0x3c')](_0x5702b8[a5_0x5cf7('0x26')][a5_0x5cf7('0x12')]);const _0x56b206=_0x5702b8[a5_0x5cf7('0x16')]();if(_0x56b206){_0x5702b8['flash'](a5_0x5cf7('0x18'),_0x56b206);return _0x4a8379['redirect'](a5_0x5cf7('0x53'));}async_1['default'][a5_0x5cf7('0x54')]([function resetPassword(_0xff3852){User_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x28')]({'passwordResetToken':_0x5702b8[a5_0x5cf7('0x55')]['token']})[a5_0x5cf7('0x49')](a5_0x5cf7('0x4a'))['gt'](Date[a5_0x5cf7('0x4b')]())[a5_0x5cf7('0x4c')]((_0x31162d,_0x466149)=>{if(_0x31162d){return _0x48dc54(_0x31162d);}if(!_0x466149){_0x5702b8['flash'](a5_0x5cf7('0x18'),{'msg':a5_0x5cf7('0x56')});return _0x4a8379[a5_0x5cf7('0x9')]('back');}_0x466149[a5_0x5cf7('0x12')]=_0x5702b8['body'][a5_0x5cf7('0x12')];_0x466149[a5_0x5cf7('0x57')]=undefined;_0x466149[a5_0x5cf7('0x4a')]=undefined;_0x466149[a5_0x5cf7('0x2b')](_0x31162d=>{if(_0x31162d){return _0x48dc54(_0x31162d);}_0x5702b8[a5_0x5cf7('0x1c')](_0x466149,_0x31162d=>{_0xff3852(_0x31162d,_0x466149);});});});},function sendResetPasswordEmail(_0x5d37a1,_0x2d3121){const _0x286085=nodemailer_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x58')]({'service':'SendGrid','auth':{'user':process[a5_0x5cf7('0x59')]['SENDGRID_USER'],'pass':process[a5_0x5cf7('0x59')][a5_0x5cf7('0x5a')]}});const _0x4340f9={'to':_0x5d37a1['email'],'from':'express-ts@starter.com','subject':a5_0x5cf7('0x5b'),'text':a5_0x5cf7('0x5c')+_0x5d37a1[a5_0x5cf7('0xf')]+a5_0x5cf7('0x5d')};_0x286085[a5_0x5cf7('0x5e')](_0x4340f9,_0x4d31b8=>{_0x5702b8[a5_0x5cf7('0x17')]('success',{'msg':a5_0x5cf7('0x5f')});_0x2d3121(_0x4d31b8);});}],_0x7fd472=>{if(_0x7fd472){return _0x48dc54(_0x7fd472);}_0x4a8379[a5_0x5cf7('0x9')]('/');});};exports[a5_0x5cf7('0x60')]=(_0x1ba4c9,_0x5b303e)=>{if(_0x1ba4c9['isAuthenticated']()){return _0x5b303e['redirect']('/');}_0x5b303e[a5_0x5cf7('0xa')](a5_0x5cf7('0x61'),{'title':a5_0x5cf7('0x62')});};exports[a5_0x5cf7('0x63')]=(_0x33db6b,_0x1d0fa8,_0x4e9e81)=>{_0x33db6b[a5_0x5cf7('0xe')](a5_0x5cf7('0xf'),a5_0x5cf7('0x30'))['isEmail']();_0x33db6b[a5_0x5cf7('0x15')](a5_0x5cf7('0xf'))[a5_0x5cf7('0x27')]({'gmail_remove_dots':![]});const _0x4f43e0=_0x33db6b[a5_0x5cf7('0x16')]();if(_0x4f43e0){_0x33db6b[a5_0x5cf7('0x17')]('errors',_0x4f43e0);return _0x1d0fa8[a5_0x5cf7('0x9')]('/forgot');}async_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x54')]([function createRandomToken(_0x3f1c6b){crypto_1[a5_0x5cf7('0x1a')][a5_0x5cf7('0x64')](0x10,(_0x4cde2e,_0x3d2855)=>{const _0x344d57=_0x3d2855[a5_0x5cf7('0x65')]('hex');_0x3f1c6b(_0x4cde2e,_0x344d57);});},function setRandomToken(_0x98b06,_0xb5fb0d){User_1[a5_0x5cf7('0x1a')]['findOne']({'email':_0x33db6b[a5_0x5cf7('0x26')][a5_0x5cf7('0xf')]},(_0x44f4d3,_0x272924)=>{if(_0x44f4d3){return _0xb5fb0d(_0x44f4d3);}if(!_0x272924){_0x33db6b[a5_0x5cf7('0x17')]('errors',{'msg':a5_0x5cf7('0x66')});return _0x1d0fa8[a5_0x5cf7('0x9')](a5_0x5cf7('0x4d'));}_0x272924['passwordResetToken']=_0x98b06;_0x272924[a5_0x5cf7('0x4a')]=Date[a5_0x5cf7('0x4b')]()+0x36ee80;_0x272924[a5_0x5cf7('0x2b')](_0x44f4d3=>{_0xb5fb0d(_0x44f4d3,_0x98b06,_0x272924);});});},function sendForgotPasswordEmail(_0x33a4ee,_0x3f0f7,_0x356243){const _0x2159fa=nodemailer_1['default'][a5_0x5cf7('0x58')]({'service':a5_0x5cf7('0x67'),'auth':{'user':process['env'][a5_0x5cf7('0x68')],'pass':process[a5_0x5cf7('0x59')][a5_0x5cf7('0x5a')]}});const _0x54c63b={'to':_0x3f0f7[a5_0x5cf7('0xf')],'from':'hackathon@starter.com','subject':a5_0x5cf7('0x69'),'text':a5_0x5cf7('0x6a')+_0x33db6b['headers'][a5_0x5cf7('0x6b')]+a5_0x5cf7('0x6c')+_0x33a4ee+a5_0x5cf7('0x6d')};_0x2159fa['sendMail'](_0x54c63b,_0x350bb9=>{_0x33db6b[a5_0x5cf7('0x17')](a5_0x5cf7('0x40'),{'msg':a5_0x5cf7('0x6e')+_0x3f0f7[a5_0x5cf7('0xf')]+a5_0x5cf7('0x6f')});_0x356243(_0x350bb9);});}],_0x33843e=>{if(_0x33843e){return _0x4e9e81(_0x33843e);}_0x1d0fa8['redirect'](a5_0x5cf7('0x4d'));});};