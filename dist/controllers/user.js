var a5_0x1afd=['Forgot\x20Password','postForgot','waterfall','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','defineProperty','async','crypto','nodemailer','../models/User','express-validator','getLogin','user','redirect','render','account/login','postLogin','email','isEmail','assert','password','notEmpty','sanitize','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','success','session','logout','getSignup','Create\x20Account','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','normalizeEmail','findOne','save','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','postUpdatePassword','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','back','passwordResetExpires','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot'];(function(_0x5288af,_0x51d0f3){var _0x47867a=function(_0x4548dc){while(--_0x4548dc){_0x5288af['push'](_0x5288af['shift']());}};_0x47867a(++_0x51d0f3);}(a5_0x1afd,0x74));var a5_0x4ba8=function(_0xceb119,_0x4278ef){_0xceb119=_0xceb119-0x0;var _0x2feec5=a5_0x1afd[_0xceb119];return _0x2feec5;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x59a589){return _0x59a589&&_0x59a589['__esModule']?_0x59a589:{'default':_0x59a589};};Object[a5_0x4ba8('0x0')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x4ba8('0x1')));const crypto_1=__importDefault(require(a5_0x4ba8('0x2')));const nodemailer_1=__importDefault(require(a5_0x4ba8('0x3')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x4ba8('0x4')));const request=require(a5_0x4ba8('0x5'));exports[a5_0x4ba8('0x6')]=(_0x2a91cd,_0x5b4e6d)=>{if(_0x2a91cd[a5_0x4ba8('0x7')]){return _0x5b4e6d[a5_0x4ba8('0x8')]('/');}_0x5b4e6d[a5_0x4ba8('0x9')](a5_0x4ba8('0xa'),{'title':'Login'});};exports[a5_0x4ba8('0xb')]=(_0xef15ef,_0x1d6e04,_0x511588)=>{_0xef15ef['assert'](a5_0x4ba8('0xc'),'Email\x20is\x20not\x20valid')[a5_0x4ba8('0xd')]();_0xef15ef[a5_0x4ba8('0xe')](a5_0x4ba8('0xf'),'Password\x20cannot\x20be\x20blank')[a5_0x4ba8('0x10')]();_0xef15ef[a5_0x4ba8('0x11')](a5_0x4ba8('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xcd99aa=_0xef15ef[a5_0x4ba8('0x12')]();if(_0xcd99aa){_0xef15ef[a5_0x4ba8('0x13')](a5_0x4ba8('0x14'),_0xcd99aa);return _0x1d6e04[a5_0x4ba8('0x8')](a5_0x4ba8('0x15'));}passport_1[a5_0x4ba8('0x16')][a5_0x4ba8('0x17')](a5_0x4ba8('0x18'),(_0x17a417,_0x5e5f47,_0x112c39)=>{if(_0x17a417){return _0x511588(_0x17a417);}if(!_0x5e5f47){_0xef15ef['flash'](a5_0x4ba8('0x14'),_0x112c39[a5_0x4ba8('0x19')]);return _0x1d6e04[a5_0x4ba8('0x8')](a5_0x4ba8('0x15'));}_0xef15ef[a5_0x4ba8('0x1a')](_0x5e5f47,_0x17a417=>{if(_0x17a417){return _0x511588(_0x17a417);}_0xef15ef['flash'](a5_0x4ba8('0x1b'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x1d6e04[a5_0x4ba8('0x8')](_0xef15ef[a5_0x4ba8('0x1c')]['returnTo']||'/');});})(_0xef15ef,_0x1d6e04,_0x511588);};exports[a5_0x4ba8('0x1d')]=(_0x550d9a,_0x328381)=>{_0x550d9a['logout']();_0x328381[a5_0x4ba8('0x8')]('/');};exports[a5_0x4ba8('0x1e')]=(_0x2ab30b,_0x21c16d)=>{if(_0x2ab30b[a5_0x4ba8('0x7')]){return _0x21c16d[a5_0x4ba8('0x8')]('/');}_0x21c16d['render']('account/signup',{'title':a5_0x4ba8('0x1f')});};exports[a5_0x4ba8('0x20')]=(_0xf0711,_0x15b931,_0x15109b)=>{_0xf0711[a5_0x4ba8('0xe')](a5_0x4ba8('0xc'),a5_0x4ba8('0x21'))[a5_0x4ba8('0xd')]();_0xf0711['assert'](a5_0x4ba8('0xf'),a5_0x4ba8('0x22'))[a5_0x4ba8('0x23')]({'min':0x4});_0xf0711['assert'](a5_0x4ba8('0x24'),a5_0x4ba8('0x25'))[a5_0x4ba8('0x26')](_0xf0711[a5_0x4ba8('0x27')][a5_0x4ba8('0xf')]);_0xf0711[a5_0x4ba8('0x11')](a5_0x4ba8('0xc'))[a5_0x4ba8('0x28')]({'gmail_remove_dots':![]});const _0x32bf9f=_0xf0711[a5_0x4ba8('0x12')]();if(_0x32bf9f){_0xf0711[a5_0x4ba8('0x13')](a5_0x4ba8('0x14'),_0x32bf9f);return _0x15b931[a5_0x4ba8('0x8')]('/signup');}const _0xb5e8a9=new User_1[(a5_0x4ba8('0x16'))]({});User_1[a5_0x4ba8('0x16')][a5_0x4ba8('0x29')]({'email':_0xf0711[a5_0x4ba8('0x27')][a5_0x4ba8('0xc')]},(_0x25a803,_0x282d0a)=>{if(_0x25a803){return _0x15109b(_0x25a803);}if(_0x282d0a){_0xf0711[a5_0x4ba8('0x13')](a5_0x4ba8('0x14'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x15b931[a5_0x4ba8('0x8')]('/signup');}_0xb5e8a9[a5_0x4ba8('0x2a')](_0x25a803=>{if(_0x25a803){return _0x15109b(_0x25a803);}_0xf0711[a5_0x4ba8('0x1a')](_0xb5e8a9,_0x25a803=>{if(_0x25a803){return _0x15109b(_0x25a803);}_0x15b931[a5_0x4ba8('0x8')]('/');});});});};exports[a5_0x4ba8('0x2b')]=(_0x2ee0f9,_0x3827ec)=>{_0x3827ec[a5_0x4ba8('0x9')](a5_0x4ba8('0x2c'),{'title':'Account\x20Management'});};exports[a5_0x4ba8('0x2d')]=(_0x5532c7,_0x1851d6,_0x928ccf)=>{_0x5532c7[a5_0x4ba8('0xe')](a5_0x4ba8('0xc'),a5_0x4ba8('0x2e'))['isEmail']();_0x5532c7[a5_0x4ba8('0x11')](a5_0x4ba8('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2ee338=_0x5532c7['validationErrors']();if(_0x2ee338){_0x5532c7[a5_0x4ba8('0x13')]('errors',_0x2ee338);return _0x1851d6[a5_0x4ba8('0x8')]('/account');}User_1['default'][a5_0x4ba8('0x2f')](_0x5532c7[a5_0x4ba8('0x7')]['id'],(_0x198fcb,_0x37dfab)=>{if(_0x198fcb){return _0x928ccf(_0x198fcb);}_0x37dfab['email']=_0x5532c7['body'][a5_0x4ba8('0xc')]||'';_0x37dfab[a5_0x4ba8('0x30')][a5_0x4ba8('0x31')]=_0x5532c7[a5_0x4ba8('0x27')][a5_0x4ba8('0x31')]||'';_0x37dfab['profile'][a5_0x4ba8('0x32')]=_0x5532c7['body']['gender']||'';_0x37dfab[a5_0x4ba8('0x30')][a5_0x4ba8('0x33')]=_0x5532c7[a5_0x4ba8('0x27')][a5_0x4ba8('0x33')]||'';_0x37dfab['profile'][a5_0x4ba8('0x34')]=_0x5532c7[a5_0x4ba8('0x27')][a5_0x4ba8('0x34')]||'';_0x37dfab['save'](_0x198fcb=>{if(_0x198fcb){if(_0x198fcb[a5_0x4ba8('0x35')]===0x2af8){_0x5532c7[a5_0x4ba8('0x13')](a5_0x4ba8('0x14'),{'msg':a5_0x4ba8('0x36')});return _0x1851d6[a5_0x4ba8('0x8')](a5_0x4ba8('0x37'));}return _0x928ccf(_0x198fcb);}_0x5532c7[a5_0x4ba8('0x13')](a5_0x4ba8('0x1b'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x1851d6[a5_0x4ba8('0x8')](a5_0x4ba8('0x37'));});});};exports[a5_0x4ba8('0x38')]=(_0xa824e8,_0x64612e,_0x2957aa)=>{_0xa824e8['assert']('password',a5_0x4ba8('0x22'))[a5_0x4ba8('0x23')]({'min':0x4});_0xa824e8[a5_0x4ba8('0xe')](a5_0x4ba8('0x24'),'Passwords\x20do\x20not\x20match')[a5_0x4ba8('0x26')](_0xa824e8[a5_0x4ba8('0x27')][a5_0x4ba8('0xf')]);const _0x30cdcb=_0xa824e8[a5_0x4ba8('0x12')]();if(_0x30cdcb){_0xa824e8['flash'](a5_0x4ba8('0x14'),_0x30cdcb);return _0x64612e['redirect'](a5_0x4ba8('0x37'));}User_1['default']['findById'](_0xa824e8['user']['id'],(_0x144f0a,_0x541594)=>{if(_0x144f0a){return _0x2957aa(_0x144f0a);}_0x541594['password']=_0xa824e8['body'][a5_0x4ba8('0xf')];_0x541594[a5_0x4ba8('0x2a')](_0x144f0a=>{if(_0x144f0a){return _0x2957aa(_0x144f0a);}_0xa824e8[a5_0x4ba8('0x13')](a5_0x4ba8('0x1b'),{'msg':'Password\x20has\x20been\x20changed.'});_0x64612e[a5_0x4ba8('0x8')](a5_0x4ba8('0x37'));});});};exports[a5_0x4ba8('0x39')]=(_0x2d6b7f,_0x3800a4,_0x47a308)=>{User_1[a5_0x4ba8('0x16')][a5_0x4ba8('0x3a')]({'_id':_0x2d6b7f['user']['id']},_0x2d3441=>{if(_0x2d3441){return _0x47a308(_0x2d3441);}_0x2d6b7f['logout']();_0x2d6b7f[a5_0x4ba8('0x13')](a5_0x4ba8('0x3b'),{'msg':a5_0x4ba8('0x3c')});_0x3800a4[a5_0x4ba8('0x8')]('/');});};exports[a5_0x4ba8('0x3d')]=(_0x3e0315,_0x2e229d,_0x165858)=>{const _0xb8d052=_0x3e0315[a5_0x4ba8('0x3e')]['provider'];User_1[a5_0x4ba8('0x16')]['findById'](_0x3e0315[a5_0x4ba8('0x7')]['id'],(_0x3d3332,_0x5e95f5)=>{if(_0x3d3332){return _0x165858(_0x3d3332);}_0x5e95f5[_0xb8d052]=undefined;_0x5e95f5[a5_0x4ba8('0x3f')]=_0x5e95f5['tokens']['filter'](_0x4f58c8=>_0x4f58c8['kind']!==_0xb8d052);_0x5e95f5[a5_0x4ba8('0x2a')](_0x3d3332=>{if(_0x3d3332){return _0x165858(_0x3d3332);}_0x3e0315[a5_0x4ba8('0x13')](a5_0x4ba8('0x3b'),{'msg':_0xb8d052+a5_0x4ba8('0x40')});_0x2e229d[a5_0x4ba8('0x8')]('/account');});});};exports['getReset']=(_0x2fcf8f,_0x1eafb2,_0x1708d4)=>{if(_0x2fcf8f[a5_0x4ba8('0x41')]()){return _0x1eafb2[a5_0x4ba8('0x8')]('/');}User_1[a5_0x4ba8('0x16')]['findOne']({'passwordResetToken':_0x2fcf8f[a5_0x4ba8('0x3e')][a5_0x4ba8('0x42')]})[a5_0x4ba8('0x43')]('passwordResetExpires')['gt'](Date[a5_0x4ba8('0x44')]())['exec']((_0x2a663a,_0x5e1d84)=>{if(_0x2a663a){return _0x1708d4(_0x2a663a);}if(!_0x5e1d84){_0x2fcf8f[a5_0x4ba8('0x13')](a5_0x4ba8('0x14'),{'msg':a5_0x4ba8('0x45')});return _0x1eafb2[a5_0x4ba8('0x8')](a5_0x4ba8('0x46'));}_0x1eafb2[a5_0x4ba8('0x9')](a5_0x4ba8('0x47'),{'title':'Password\x20Reset'});});};exports[a5_0x4ba8('0x48')]=(_0x5eeaa5,_0x3ee32,_0x311bd5)=>{_0x5eeaa5[a5_0x4ba8('0xe')](a5_0x4ba8('0xf'),a5_0x4ba8('0x49'))[a5_0x4ba8('0x23')]({'min':0x4});_0x5eeaa5[a5_0x4ba8('0xe')]('confirm',a5_0x4ba8('0x4a'))[a5_0x4ba8('0x26')](_0x5eeaa5[a5_0x4ba8('0x27')][a5_0x4ba8('0xf')]);const _0x5c742c=_0x5eeaa5[a5_0x4ba8('0x12')]();if(_0x5c742c){_0x5eeaa5[a5_0x4ba8('0x13')](a5_0x4ba8('0x14'),_0x5c742c);return _0x3ee32[a5_0x4ba8('0x8')](a5_0x4ba8('0x4b'));}async_1[a5_0x4ba8('0x16')]['waterfall']([function resetPassword(_0x295b2c){User_1[a5_0x4ba8('0x16')][a5_0x4ba8('0x29')]({'passwordResetToken':_0x5eeaa5[a5_0x4ba8('0x3e')][a5_0x4ba8('0x42')]})[a5_0x4ba8('0x43')](a5_0x4ba8('0x4c'))['gt'](Date['now']())['exec']((_0x2c59a6,_0x3b0d8a)=>{if(_0x2c59a6){return _0x311bd5(_0x2c59a6);}if(!_0x3b0d8a){_0x5eeaa5['flash'](a5_0x4ba8('0x14'),{'msg':a5_0x4ba8('0x45')});return _0x3ee32['redirect'](a5_0x4ba8('0x4b'));}_0x3b0d8a[a5_0x4ba8('0xf')]=_0x5eeaa5[a5_0x4ba8('0x27')][a5_0x4ba8('0xf')];_0x3b0d8a[a5_0x4ba8('0x4d')]=undefined;_0x3b0d8a[a5_0x4ba8('0x4c')]=undefined;_0x3b0d8a[a5_0x4ba8('0x2a')](_0x2c59a6=>{if(_0x2c59a6){return _0x311bd5(_0x2c59a6);}_0x5eeaa5[a5_0x4ba8('0x1a')](_0x3b0d8a,_0x2c59a6=>{_0x295b2c(_0x2c59a6,_0x3b0d8a);});});});},function sendResetPasswordEmail(_0xd337f0,_0x49156c){const _0x40e746=nodemailer_1[a5_0x4ba8('0x16')][a5_0x4ba8('0x4e')]({'service':a5_0x4ba8('0x4f'),'auth':{'user':process[a5_0x4ba8('0x50')][a5_0x4ba8('0x51')],'pass':process[a5_0x4ba8('0x50')][a5_0x4ba8('0x52')]}});const _0x2f1263={'to':_0xd337f0['email'],'from':a5_0x4ba8('0x53'),'subject':a5_0x4ba8('0x54'),'text':a5_0x4ba8('0x55')+_0xd337f0[a5_0x4ba8('0xc')]+a5_0x4ba8('0x56')};_0x40e746[a5_0x4ba8('0x57')](_0x2f1263,_0x3d6d10=>{_0x5eeaa5[a5_0x4ba8('0x13')]('success',{'msg':a5_0x4ba8('0x58')});_0x49156c(_0x3d6d10);});}],_0x4d3ad0=>{if(_0x4d3ad0){return _0x311bd5(_0x4d3ad0);}_0x3ee32[a5_0x4ba8('0x8')]('/');});};exports[a5_0x4ba8('0x59')]=(_0x3e97f8,_0x2c2710)=>{if(_0x3e97f8[a5_0x4ba8('0x41')]()){return _0x2c2710[a5_0x4ba8('0x8')]('/');}_0x2c2710[a5_0x4ba8('0x9')]('account/forgot',{'title':a5_0x4ba8('0x5a')});};exports[a5_0x4ba8('0x5b')]=(_0x543c1d,_0x54334b,_0x40429c)=>{_0x543c1d[a5_0x4ba8('0xe')]('email',a5_0x4ba8('0x2e'))[a5_0x4ba8('0xd')]();_0x543c1d[a5_0x4ba8('0x11')]('email')[a5_0x4ba8('0x28')]({'gmail_remove_dots':![]});const _0x47f733=_0x543c1d[a5_0x4ba8('0x12')]();if(_0x47f733){_0x543c1d[a5_0x4ba8('0x13')](a5_0x4ba8('0x14'),_0x47f733);return _0x54334b[a5_0x4ba8('0x8')]('/forgot');}async_1['default'][a5_0x4ba8('0x5c')]([function createRandomToken(_0x4dfeb3){crypto_1[a5_0x4ba8('0x16')][a5_0x4ba8('0x5d')](0x10,(_0x368a95,_0x43a2af)=>{const _0x2dd320=_0x43a2af[a5_0x4ba8('0x5e')](a5_0x4ba8('0x5f'));_0x4dfeb3(_0x368a95,_0x2dd320);});},function setRandomToken(_0x223c92,_0xa19c1c){User_1['default'][a5_0x4ba8('0x29')]({'email':_0x543c1d[a5_0x4ba8('0x27')][a5_0x4ba8('0xc')]},(_0x45ae9f,_0x4eb2e7)=>{if(_0x45ae9f){return _0xa19c1c(_0x45ae9f);}if(!_0x4eb2e7){_0x543c1d['flash']('errors',{'msg':a5_0x4ba8('0x60')});return _0x54334b['redirect'](a5_0x4ba8('0x46'));}_0x4eb2e7[a5_0x4ba8('0x4d')]=_0x223c92;_0x4eb2e7[a5_0x4ba8('0x4c')]=Date[a5_0x4ba8('0x44')]()+0x36ee80;_0x4eb2e7['save'](_0x45ae9f=>{_0xa19c1c(_0x45ae9f,_0x223c92,_0x4eb2e7);});});},function sendForgotPasswordEmail(_0x4e29b9,_0x358aa7,_0x315aa7){const _0x122cd7=nodemailer_1[a5_0x4ba8('0x16')][a5_0x4ba8('0x4e')]({'service':'SendGrid','auth':{'user':process[a5_0x4ba8('0x50')][a5_0x4ba8('0x51')],'pass':process[a5_0x4ba8('0x50')][a5_0x4ba8('0x52')]}});const _0x32c1de={'to':_0x358aa7[a5_0x4ba8('0xc')],'from':a5_0x4ba8('0x61'),'subject':a5_0x4ba8('0x62'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x543c1d[a5_0x4ba8('0x63')][a5_0x4ba8('0x64')]+'/reset/'+_0x4e29b9+a5_0x4ba8('0x65')};_0x122cd7[a5_0x4ba8('0x57')](_0x32c1de,_0x325487=>{_0x543c1d[a5_0x4ba8('0x13')](a5_0x4ba8('0x3b'),{'msg':a5_0x4ba8('0x66')+_0x358aa7[a5_0x4ba8('0xc')]+'\x20with\x20further\x20instructions.'});_0x315aa7(_0x325487);});}],_0xdb821b=>{if(_0xdb821b){return _0x40429c(_0xdb821b);}_0x54334b['redirect']('/forgot');});};