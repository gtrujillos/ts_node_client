var a5_0x1d8e=['postUpdatePassword','len','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter','kind','info','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','findOne','token','where','passwordResetExpires','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','Password\x20Reset','postReset','confirm','Passwords\x20must\x20match.','back','waterfall','now','passwordResetToken','createTransport','SENDGRID_USER','env','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','\x20with\x20further\x20instructions.','__esModule','async','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','account/login','Login','postLogin','assert','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','email','normalizeEmail','default','authenticate','local','flash','errors','message','/login','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','render','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','password','validationErrors','/signup','body','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','findById','name','profile','gender','location','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.'];(function(_0x355666,_0x6e07ba){var _0x1f6b3a=function(_0x22cf19){while(--_0x22cf19){_0x355666['push'](_0x355666['shift']());}};_0x1f6b3a(++_0x6e07ba);}(a5_0x1d8e,0x185));var a5_0x59d9=function(_0x1ce8bf,_0x2e4d40){_0x1ce8bf=_0x1ce8bf-0x0;var _0x427d22=a5_0x1d8e[_0x1ce8bf];return _0x427d22;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x15e5d4){return _0x15e5d4&&_0x15e5d4[a5_0x59d9('0x0')]?_0x15e5d4:{'default':_0x15e5d4};};Object['defineProperty'](exports,a5_0x59d9('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x59d9('0x1')));const crypto_1=__importDefault(require(a5_0x59d9('0x2')));const nodemailer_1=__importDefault(require(a5_0x59d9('0x3')));const passport_1=__importDefault(require(a5_0x59d9('0x4')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x59d9('0x5'));exports[a5_0x59d9('0x6')]=(_0x1d8701,_0x1122a8)=>{if(_0x1d8701[a5_0x59d9('0x7')]){return _0x1122a8[a5_0x59d9('0x8')]('/');}_0x1122a8['render'](a5_0x59d9('0x9'),{'title':a5_0x59d9('0xa')});};exports[a5_0x59d9('0xb')]=(_0x2c80ed,_0x5cd4aa,_0x1cd8ec)=>{_0x2c80ed[a5_0x59d9('0xc')]('email',a5_0x59d9('0xd'))[a5_0x59d9('0xe')]();_0x2c80ed['assert']('password',a5_0x59d9('0xf'))[a5_0x59d9('0x10')]();_0x2c80ed[a5_0x59d9('0x11')](a5_0x59d9('0x12'))[a5_0x59d9('0x13')]({'gmail_remove_dots':![]});const _0x1b4ec6=_0x2c80ed['validationErrors']();if(_0x1b4ec6){_0x2c80ed['flash']('errors',_0x1b4ec6);return _0x5cd4aa[a5_0x59d9('0x8')]('/login');}passport_1[a5_0x59d9('0x14')][a5_0x59d9('0x15')](a5_0x59d9('0x16'),(_0x524c56,_0xc7e9bd,_0x4f9c04)=>{if(_0x524c56){return _0x1cd8ec(_0x524c56);}if(!_0xc7e9bd){_0x2c80ed[a5_0x59d9('0x17')](a5_0x59d9('0x18'),_0x4f9c04[a5_0x59d9('0x19')]);return _0x5cd4aa['redirect'](a5_0x59d9('0x1a'));}_0x2c80ed[a5_0x59d9('0x1b')](_0xc7e9bd,_0x524c56=>{if(_0x524c56){return _0x1cd8ec(_0x524c56);}_0x2c80ed['flash'](a5_0x59d9('0x1c'),{'msg':a5_0x59d9('0x1d')});_0x5cd4aa[a5_0x59d9('0x8')](_0x2c80ed['session'][a5_0x59d9('0x1e')]||'/');});})(_0x2c80ed,_0x5cd4aa,_0x1cd8ec);};exports[a5_0x59d9('0x1f')]=(_0x1598a8,_0x4df9d1)=>{_0x1598a8[a5_0x59d9('0x1f')]();_0x4df9d1[a5_0x59d9('0x8')]('/');};exports[a5_0x59d9('0x20')]=(_0x1021da,_0x16aabc)=>{if(_0x1021da[a5_0x59d9('0x7')]){return _0x16aabc[a5_0x59d9('0x8')]('/');}_0x16aabc[a5_0x59d9('0x21')](a5_0x59d9('0x22'),{'title':a5_0x59d9('0x23')});};exports[a5_0x59d9('0x24')]=(_0x38fa5d,_0xc690ae,_0x5aadd1)=>{_0x38fa5d[a5_0x59d9('0xc')](a5_0x59d9('0x12'),'Email\x20is\x20not\x20valid')[a5_0x59d9('0xe')]();_0x38fa5d[a5_0x59d9('0xc')]('password',a5_0x59d9('0x25'))['len']({'min':0x4});_0x38fa5d[a5_0x59d9('0xc')](a5_0x59d9('0x26'),a5_0x59d9('0x27'))[a5_0x59d9('0x28')](_0x38fa5d['body'][a5_0x59d9('0x29')]);_0x38fa5d[a5_0x59d9('0x11')](a5_0x59d9('0x12'))[a5_0x59d9('0x13')]({'gmail_remove_dots':![]});const _0x292c73=_0x38fa5d[a5_0x59d9('0x2a')]();if(_0x292c73){_0x38fa5d[a5_0x59d9('0x17')](a5_0x59d9('0x18'),_0x292c73);return _0xc690ae[a5_0x59d9('0x8')](a5_0x59d9('0x2b'));}const _0x3c8c98=new User_1[(a5_0x59d9('0x14'))]({});User_1[a5_0x59d9('0x14')]['findOne']({'email':_0x38fa5d[a5_0x59d9('0x2c')][a5_0x59d9('0x12')]},(_0x3f37f8,_0x1aa96a)=>{if(_0x3f37f8){return _0x5aadd1(_0x3f37f8);}if(_0x1aa96a){_0x38fa5d[a5_0x59d9('0x17')](a5_0x59d9('0x18'),{'msg':a5_0x59d9('0x2d')});return _0xc690ae['redirect'](a5_0x59d9('0x2b'));}_0x3c8c98[a5_0x59d9('0x2e')](_0x3f37f8=>{if(_0x3f37f8){return _0x5aadd1(_0x3f37f8);}_0x38fa5d[a5_0x59d9('0x1b')](_0x3c8c98,_0x3f37f8=>{if(_0x3f37f8){return _0x5aadd1(_0x3f37f8);}_0xc690ae[a5_0x59d9('0x8')]('/');});});});};exports[a5_0x59d9('0x2f')]=(_0x152f53,_0x1945ca)=>{_0x1945ca[a5_0x59d9('0x21')](a5_0x59d9('0x30'),{'title':a5_0x59d9('0x31')});};exports[a5_0x59d9('0x32')]=(_0x4de9f0,_0x3b0910,_0x4d3a2d)=>{_0x4de9f0['assert'](a5_0x59d9('0x12'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x59d9('0xe')]();_0x4de9f0[a5_0x59d9('0x11')](a5_0x59d9('0x12'))[a5_0x59d9('0x13')]({'gmail_remove_dots':![]});const _0x55f3da=_0x4de9f0[a5_0x59d9('0x2a')]();if(_0x55f3da){_0x4de9f0['flash'](a5_0x59d9('0x18'),_0x55f3da);return _0x3b0910[a5_0x59d9('0x8')]('/account');}User_1['default'][a5_0x59d9('0x33')](_0x4de9f0[a5_0x59d9('0x7')]['id'],(_0x2c0e69,_0x1de9b0)=>{if(_0x2c0e69){return _0x4d3a2d(_0x2c0e69);}_0x1de9b0[a5_0x59d9('0x12')]=_0x4de9f0[a5_0x59d9('0x2c')]['email']||'';_0x1de9b0['profile'][a5_0x59d9('0x34')]=_0x4de9f0['body'][a5_0x59d9('0x34')]||'';_0x1de9b0[a5_0x59d9('0x35')][a5_0x59d9('0x36')]=_0x4de9f0[a5_0x59d9('0x2c')][a5_0x59d9('0x36')]||'';_0x1de9b0[a5_0x59d9('0x35')][a5_0x59d9('0x37')]=_0x4de9f0[a5_0x59d9('0x2c')][a5_0x59d9('0x37')]||'';_0x1de9b0[a5_0x59d9('0x35')]['website']=_0x4de9f0[a5_0x59d9('0x2c')]['website']||'';_0x1de9b0[a5_0x59d9('0x2e')](_0x2c0e69=>{if(_0x2c0e69){if(_0x2c0e69['code']===0x2af8){_0x4de9f0['flash'](a5_0x59d9('0x18'),{'msg':a5_0x59d9('0x38')});return _0x3b0910['redirect'](a5_0x59d9('0x39'));}return _0x4d3a2d(_0x2c0e69);}_0x4de9f0[a5_0x59d9('0x17')]('success',{'msg':a5_0x59d9('0x3a')});_0x3b0910[a5_0x59d9('0x8')](a5_0x59d9('0x39'));});});};exports[a5_0x59d9('0x3b')]=(_0x926d8a,_0x35cfcc,_0x4253ce)=>{_0x926d8a[a5_0x59d9('0xc')]('password',a5_0x59d9('0x25'))[a5_0x59d9('0x3c')]({'min':0x4});_0x926d8a['assert'](a5_0x59d9('0x26'),a5_0x59d9('0x27'))[a5_0x59d9('0x28')](_0x926d8a['body'][a5_0x59d9('0x29')]);const _0x2de8a1=_0x926d8a[a5_0x59d9('0x2a')]();if(_0x2de8a1){_0x926d8a['flash']('errors',_0x2de8a1);return _0x35cfcc[a5_0x59d9('0x8')](a5_0x59d9('0x39'));}User_1[a5_0x59d9('0x14')]['findById'](_0x926d8a['user']['id'],(_0x51f5a5,_0x41619f)=>{if(_0x51f5a5){return _0x4253ce(_0x51f5a5);}_0x41619f[a5_0x59d9('0x29')]=_0x926d8a[a5_0x59d9('0x2c')][a5_0x59d9('0x29')];_0x41619f[a5_0x59d9('0x2e')](_0x51f5a5=>{if(_0x51f5a5){return _0x4253ce(_0x51f5a5);}_0x926d8a[a5_0x59d9('0x17')](a5_0x59d9('0x1c'),{'msg':'Password\x20has\x20been\x20changed.'});_0x35cfcc['redirect'](a5_0x59d9('0x39'));});});};exports[a5_0x59d9('0x3d')]=(_0x4f34b2,_0x52e503,_0x5040c1)=>{User_1['default'][a5_0x59d9('0x3e')]({'_id':_0x4f34b2[a5_0x59d9('0x7')]['id']},_0x5ae175=>{if(_0x5ae175){return _0x5040c1(_0x5ae175);}_0x4f34b2['logout']();_0x4f34b2[a5_0x59d9('0x17')]('info',{'msg':a5_0x59d9('0x3f')});_0x52e503[a5_0x59d9('0x8')]('/');});};exports[a5_0x59d9('0x40')]=(_0xf416bc,_0x437d54,_0x2836f0)=>{const _0x41b44d=_0xf416bc[a5_0x59d9('0x41')]['provider'];User_1[a5_0x59d9('0x14')]['findById'](_0xf416bc[a5_0x59d9('0x7')]['id'],(_0x42813e,_0x22675d)=>{if(_0x42813e){return _0x2836f0(_0x42813e);}_0x22675d[_0x41b44d]=undefined;_0x22675d[a5_0x59d9('0x42')]=_0x22675d[a5_0x59d9('0x42')][a5_0x59d9('0x43')](_0x340ae9=>_0x340ae9[a5_0x59d9('0x44')]!==_0x41b44d);_0x22675d[a5_0x59d9('0x2e')](_0x42813e=>{if(_0x42813e){return _0x2836f0(_0x42813e);}_0xf416bc[a5_0x59d9('0x17')](a5_0x59d9('0x45'),{'msg':_0x41b44d+a5_0x59d9('0x46')});_0x437d54[a5_0x59d9('0x8')](a5_0x59d9('0x39'));});});};exports['getReset']=(_0x237152,_0xde68b2,_0x3f0bb5)=>{if(_0x237152[a5_0x59d9('0x47')]()){return _0xde68b2[a5_0x59d9('0x8')]('/');}User_1[a5_0x59d9('0x14')][a5_0x59d9('0x48')]({'passwordResetToken':_0x237152['params'][a5_0x59d9('0x49')]})[a5_0x59d9('0x4a')](a5_0x59d9('0x4b'))['gt'](Date['now']())['exec']((_0x262a64,_0x26216c)=>{if(_0x262a64){return _0x3f0bb5(_0x262a64);}if(!_0x26216c){_0x237152[a5_0x59d9('0x17')](a5_0x59d9('0x18'),{'msg':a5_0x59d9('0x4c')});return _0xde68b2[a5_0x59d9('0x8')](a5_0x59d9('0x4d'));}_0xde68b2[a5_0x59d9('0x21')]('account/reset',{'title':a5_0x59d9('0x4e')});});};exports[a5_0x59d9('0x4f')]=(_0x212afe,_0x1a3c8d,_0x15703a)=>{_0x212afe['assert'](a5_0x59d9('0x29'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x59d9('0x3c')]({'min':0x4});_0x212afe[a5_0x59d9('0xc')](a5_0x59d9('0x50'),a5_0x59d9('0x51'))[a5_0x59d9('0x28')](_0x212afe[a5_0x59d9('0x2c')]['password']);const _0x5b5368=_0x212afe['validationErrors']();if(_0x5b5368){_0x212afe[a5_0x59d9('0x17')](a5_0x59d9('0x18'),_0x5b5368);return _0x1a3c8d[a5_0x59d9('0x8')](a5_0x59d9('0x52'));}async_1[a5_0x59d9('0x14')][a5_0x59d9('0x53')]([function resetPassword(_0x3490d2){User_1[a5_0x59d9('0x14')]['findOne']({'passwordResetToken':_0x212afe[a5_0x59d9('0x41')]['token']})[a5_0x59d9('0x4a')]('passwordResetExpires')['gt'](Date[a5_0x59d9('0x54')]())['exec']((_0x292de6,_0x53e809)=>{if(_0x292de6){return _0x15703a(_0x292de6);}if(!_0x53e809){_0x212afe[a5_0x59d9('0x17')](a5_0x59d9('0x18'),{'msg':a5_0x59d9('0x4c')});return _0x1a3c8d[a5_0x59d9('0x8')](a5_0x59d9('0x52'));}_0x53e809['password']=_0x212afe[a5_0x59d9('0x2c')][a5_0x59d9('0x29')];_0x53e809[a5_0x59d9('0x55')]=undefined;_0x53e809[a5_0x59d9('0x4b')]=undefined;_0x53e809[a5_0x59d9('0x2e')](_0x292de6=>{if(_0x292de6){return _0x15703a(_0x292de6);}_0x212afe[a5_0x59d9('0x1b')](_0x53e809,_0x292de6=>{_0x3490d2(_0x292de6,_0x53e809);});});});},function sendResetPasswordEmail(_0x4c48b5,_0x2c0c9f){const _0x35e7dc=nodemailer_1['default'][a5_0x59d9('0x56')]({'service':'SendGrid','auth':{'user':process['env'][a5_0x59d9('0x57')],'pass':process[a5_0x59d9('0x58')][a5_0x59d9('0x59')]}});const _0x132316={'to':_0x4c48b5['email'],'from':'express-ts@starter.com','subject':a5_0x59d9('0x5a'),'text':a5_0x59d9('0x5b')+_0x4c48b5[a5_0x59d9('0x12')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x35e7dc[a5_0x59d9('0x5c')](_0x132316,_0x47697b=>{_0x212afe[a5_0x59d9('0x17')](a5_0x59d9('0x1c'),{'msg':a5_0x59d9('0x5d')});_0x2c0c9f(_0x47697b);});}],_0x8972fb=>{if(_0x8972fb){return _0x15703a(_0x8972fb);}_0x1a3c8d[a5_0x59d9('0x8')]('/');});};exports[a5_0x59d9('0x5e')]=(_0x2be76f,_0x484818)=>{if(_0x2be76f[a5_0x59d9('0x47')]()){return _0x484818['redirect']('/');}_0x484818[a5_0x59d9('0x21')](a5_0x59d9('0x5f'),{'title':a5_0x59d9('0x60')});};exports[a5_0x59d9('0x61')]=(_0x3faec1,_0x2cca83,_0x472bb1)=>{_0x3faec1[a5_0x59d9('0xc')](a5_0x59d9('0x12'),a5_0x59d9('0x62'))[a5_0x59d9('0xe')]();_0x3faec1[a5_0x59d9('0x11')](a5_0x59d9('0x12'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x5a2684=_0x3faec1[a5_0x59d9('0x2a')]();if(_0x5a2684){_0x3faec1[a5_0x59d9('0x17')](a5_0x59d9('0x18'),_0x5a2684);return _0x2cca83[a5_0x59d9('0x8')](a5_0x59d9('0x4d'));}async_1[a5_0x59d9('0x14')][a5_0x59d9('0x53')]([function createRandomToken(_0x513341){crypto_1[a5_0x59d9('0x14')][a5_0x59d9('0x63')](0x10,(_0x297be4,_0x103538)=>{const _0x6e253a=_0x103538[a5_0x59d9('0x64')](a5_0x59d9('0x65'));_0x513341(_0x297be4,_0x6e253a);});},function setRandomToken(_0x3df858,_0x4ee776){User_1[a5_0x59d9('0x14')][a5_0x59d9('0x48')]({'email':_0x3faec1[a5_0x59d9('0x2c')][a5_0x59d9('0x12')]},(_0x3a0060,_0x5b79cf)=>{if(_0x3a0060){return _0x4ee776(_0x3a0060);}if(!_0x5b79cf){_0x3faec1[a5_0x59d9('0x17')](a5_0x59d9('0x18'),{'msg':a5_0x59d9('0x66')});return _0x2cca83[a5_0x59d9('0x8')](a5_0x59d9('0x4d'));}_0x5b79cf['passwordResetToken']=_0x3df858;_0x5b79cf[a5_0x59d9('0x4b')]=Date[a5_0x59d9('0x54')]()+0x36ee80;_0x5b79cf[a5_0x59d9('0x2e')](_0x3a0060=>{_0x4ee776(_0x3a0060,_0x3df858,_0x5b79cf);});});},function sendForgotPasswordEmail(_0x2c37fd,_0x3683bc,_0x1ec3a2){const _0x22a960=nodemailer_1['default'][a5_0x59d9('0x56')]({'service':a5_0x59d9('0x67'),'auth':{'user':process['env'][a5_0x59d9('0x57')],'pass':process[a5_0x59d9('0x58')][a5_0x59d9('0x59')]}});const _0x8edb06={'to':_0x3683bc[a5_0x59d9('0x12')],'from':a5_0x59d9('0x68'),'subject':a5_0x59d9('0x69'),'text':a5_0x59d9('0x6a')+_0x3faec1[a5_0x59d9('0x6b')][a5_0x59d9('0x6c')]+a5_0x59d9('0x6d')+_0x2c37fd+a5_0x59d9('0x6e')};_0x22a960[a5_0x59d9('0x5c')](_0x8edb06,_0x59ef65=>{_0x3faec1['flash']('info',{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x3683bc[a5_0x59d9('0x12')]+a5_0x59d9('0x6f')});_0x1ec3a2(_0x59ef65);});}],_0x470823=>{if(_0x470823){return _0x472bb1(_0x470823);}_0x2cca83['redirect'](a5_0x59d9('0x4d'));});};