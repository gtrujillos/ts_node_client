var a5_0x290b=['createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','headers','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','passport','../models/User','user','redirect','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','/login','default','message','flash','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','findById','profile','name','gender','location','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','/account','postUpdatePassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','waterfall','token','where','passwordResetExpires','back','logIn'];(function(_0x187de4,_0x27a26a){var _0x5f4389=function(_0x4b23b0){while(--_0x4b23b0){_0x187de4['push'](_0x187de4['shift']());}};_0x5f4389(++_0x27a26a);}(a5_0x290b,0x7d));var a5_0x28bf=function(_0x2448f6,_0x5cdede){_0x2448f6=_0x2448f6-0x0;var _0x26bc5e=a5_0x290b[_0x2448f6];return _0x26bc5e;};'use strict';var __importDefault=this&&this[a5_0x28bf('0x0')]||function(_0x4f0673){return _0x4f0673&&_0x4f0673[a5_0x28bf('0x1')]?_0x4f0673:{'default':_0x4f0673};};Object['defineProperty'](exports,a5_0x28bf('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x28bf('0x2')));const crypto_1=__importDefault(require(a5_0x28bf('0x3')));const nodemailer_1=__importDefault(require(a5_0x28bf('0x4')));const passport_1=__importDefault(require(a5_0x28bf('0x5')));const User_1=__importDefault(require(a5_0x28bf('0x6')));const request=require('express-validator');exports['getLogin']=(_0x1be047,_0x5a5252)=>{if(_0x1be047[a5_0x28bf('0x7')]){return _0x5a5252[a5_0x28bf('0x8')]('/');}_0x5a5252[a5_0x28bf('0x9')](a5_0x28bf('0xa'),{'title':'Login'});};exports[a5_0x28bf('0xb')]=(_0x3e20ab,_0x3cb2e3,_0x336082)=>{_0x3e20ab[a5_0x28bf('0xc')](a5_0x28bf('0xd'),a5_0x28bf('0xe'))[a5_0x28bf('0xf')]();_0x3e20ab[a5_0x28bf('0xc')](a5_0x28bf('0x10'),a5_0x28bf('0x11'))[a5_0x28bf('0x12')]();_0x3e20ab[a5_0x28bf('0x13')](a5_0x28bf('0xd'))[a5_0x28bf('0x14')]({'gmail_remove_dots':![]});const _0x5dd8cb=_0x3e20ab[a5_0x28bf('0x15')]();if(_0x5dd8cb){_0x3e20ab['flash'](a5_0x28bf('0x16'),_0x5dd8cb);return _0x3cb2e3[a5_0x28bf('0x8')](a5_0x28bf('0x17'));}passport_1[a5_0x28bf('0x18')]['authenticate']('local',(_0x12cea8,_0x4a2c2e,_0xd6580e)=>{if(_0x12cea8){return _0x336082(_0x12cea8);}if(!_0x4a2c2e){_0x3e20ab['flash'](a5_0x28bf('0x16'),_0xd6580e[a5_0x28bf('0x19')]);return _0x3cb2e3['redirect'](a5_0x28bf('0x17'));}_0x3e20ab['logIn'](_0x4a2c2e,_0x12cea8=>{if(_0x12cea8){return _0x336082(_0x12cea8);}_0x3e20ab[a5_0x28bf('0x1a')](a5_0x28bf('0x1b'),{'msg':a5_0x28bf('0x1c')});_0x3cb2e3[a5_0x28bf('0x8')](_0x3e20ab[a5_0x28bf('0x1d')][a5_0x28bf('0x1e')]||'/');});})(_0x3e20ab,_0x3cb2e3,_0x336082);};exports[a5_0x28bf('0x1f')]=(_0x18334a,_0x3e27e8)=>{_0x18334a[a5_0x28bf('0x1f')]();_0x3e27e8[a5_0x28bf('0x8')]('/');};exports[a5_0x28bf('0x20')]=(_0xb6d69a,_0x5ed907)=>{if(_0xb6d69a['user']){return _0x5ed907['redirect']('/');}_0x5ed907[a5_0x28bf('0x9')](a5_0x28bf('0x21'),{'title':a5_0x28bf('0x22')});};exports[a5_0x28bf('0x23')]=(_0x43caa4,_0x2e6de4,_0x1426d9)=>{_0x43caa4[a5_0x28bf('0xc')](a5_0x28bf('0xd'),a5_0x28bf('0xe'))[a5_0x28bf('0xf')]();_0x43caa4[a5_0x28bf('0xc')](a5_0x28bf('0x10'),a5_0x28bf('0x24'))[a5_0x28bf('0x25')]({'min':0x4});_0x43caa4['assert'](a5_0x28bf('0x26'),a5_0x28bf('0x27'))['equals'](_0x43caa4[a5_0x28bf('0x28')]['password']);_0x43caa4['sanitize'](a5_0x28bf('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x45bbf2=_0x43caa4[a5_0x28bf('0x15')]();if(_0x45bbf2){_0x43caa4['flash'](a5_0x28bf('0x16'),_0x45bbf2);return _0x2e6de4['redirect']('/signup');}const _0x39482c=new User_1['default']({});User_1[a5_0x28bf('0x18')][a5_0x28bf('0x29')]({'email':_0x43caa4[a5_0x28bf('0x28')][a5_0x28bf('0xd')]},(_0x2c6d18,_0x265423)=>{if(_0x2c6d18){return _0x1426d9(_0x2c6d18);}if(_0x265423){_0x43caa4['flash'](a5_0x28bf('0x16'),{'msg':a5_0x28bf('0x2a')});return _0x2e6de4[a5_0x28bf('0x8')]('/signup');}_0x39482c[a5_0x28bf('0x2b')](_0x2c6d18=>{if(_0x2c6d18){return _0x1426d9(_0x2c6d18);}_0x43caa4['logIn'](_0x39482c,_0x2c6d18=>{if(_0x2c6d18){return _0x1426d9(_0x2c6d18);}_0x2e6de4[a5_0x28bf('0x8')]('/');});});});};exports[a5_0x28bf('0x2c')]=(_0x5b6e6e,_0x51b3e3)=>{_0x51b3e3[a5_0x28bf('0x9')]('account/profile',{'title':a5_0x28bf('0x2d')});};exports[a5_0x28bf('0x2e')]=(_0x46b7e3,_0x3c9d15,_0x1db0c4)=>{_0x46b7e3[a5_0x28bf('0xc')](a5_0x28bf('0xd'),a5_0x28bf('0x2f'))[a5_0x28bf('0xf')]();_0x46b7e3[a5_0x28bf('0x13')](a5_0x28bf('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x576ec4=_0x46b7e3[a5_0x28bf('0x15')]();if(_0x576ec4){_0x46b7e3[a5_0x28bf('0x1a')](a5_0x28bf('0x16'),_0x576ec4);return _0x3c9d15['redirect']('/account');}User_1['default'][a5_0x28bf('0x30')](_0x46b7e3[a5_0x28bf('0x7')]['id'],(_0x2200d3,_0x4d37d0)=>{if(_0x2200d3){return _0x1db0c4(_0x2200d3);}_0x4d37d0[a5_0x28bf('0xd')]=_0x46b7e3['body']['email']||'';_0x4d37d0[a5_0x28bf('0x31')]['name']=_0x46b7e3[a5_0x28bf('0x28')][a5_0x28bf('0x32')]||'';_0x4d37d0['profile'][a5_0x28bf('0x33')]=_0x46b7e3[a5_0x28bf('0x28')][a5_0x28bf('0x33')]||'';_0x4d37d0['profile'][a5_0x28bf('0x34')]=_0x46b7e3[a5_0x28bf('0x28')][a5_0x28bf('0x34')]||'';_0x4d37d0[a5_0x28bf('0x31')]['website']=_0x46b7e3[a5_0x28bf('0x28')]['website']||'';_0x4d37d0[a5_0x28bf('0x2b')](_0x2200d3=>{if(_0x2200d3){if(_0x2200d3[a5_0x28bf('0x35')]===0x2af8){_0x46b7e3[a5_0x28bf('0x1a')](a5_0x28bf('0x16'),{'msg':a5_0x28bf('0x36')});return _0x3c9d15[a5_0x28bf('0x8')]('/account');}return _0x1db0c4(_0x2200d3);}_0x46b7e3[a5_0x28bf('0x1a')](a5_0x28bf('0x1b'),{'msg':a5_0x28bf('0x37')});_0x3c9d15[a5_0x28bf('0x8')](a5_0x28bf('0x38'));});});};exports[a5_0x28bf('0x39')]=(_0x507c4c,_0x452208,_0x175152)=>{_0x507c4c[a5_0x28bf('0xc')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x507c4c[a5_0x28bf('0xc')](a5_0x28bf('0x26'),a5_0x28bf('0x27'))['equals'](_0x507c4c[a5_0x28bf('0x28')][a5_0x28bf('0x10')]);const _0xe6e39e=_0x507c4c[a5_0x28bf('0x15')]();if(_0xe6e39e){_0x507c4c[a5_0x28bf('0x1a')]('errors',_0xe6e39e);return _0x452208['redirect'](a5_0x28bf('0x38'));}User_1[a5_0x28bf('0x18')][a5_0x28bf('0x30')](_0x507c4c['user']['id'],(_0x595645,_0x2fc262)=>{if(_0x595645){return _0x175152(_0x595645);}_0x2fc262['password']=_0x507c4c[a5_0x28bf('0x28')][a5_0x28bf('0x10')];_0x2fc262[a5_0x28bf('0x2b')](_0x595645=>{if(_0x595645){return _0x175152(_0x595645);}_0x507c4c[a5_0x28bf('0x1a')]('success',{'msg':a5_0x28bf('0x3a')});_0x452208[a5_0x28bf('0x8')](a5_0x28bf('0x38'));});});};exports[a5_0x28bf('0x3b')]=(_0x817e59,_0x3fdefb,_0x900910)=>{User_1[a5_0x28bf('0x18')][a5_0x28bf('0x3c')]({'_id':_0x817e59[a5_0x28bf('0x7')]['id']},_0x389571=>{if(_0x389571){return _0x900910(_0x389571);}_0x817e59[a5_0x28bf('0x1f')]();_0x817e59[a5_0x28bf('0x1a')](a5_0x28bf('0x3d'),{'msg':a5_0x28bf('0x3e')});_0x3fdefb['redirect']('/');});};exports[a5_0x28bf('0x3f')]=(_0x3121f6,_0x4a6d7a,_0x3bf3fb)=>{const _0x4f6ac0=_0x3121f6[a5_0x28bf('0x40')][a5_0x28bf('0x41')];User_1[a5_0x28bf('0x18')][a5_0x28bf('0x30')](_0x3121f6[a5_0x28bf('0x7')]['id'],(_0x479016,_0x2e2613)=>{if(_0x479016){return _0x3bf3fb(_0x479016);}_0x2e2613[_0x4f6ac0]=undefined;_0x2e2613[a5_0x28bf('0x42')]=_0x2e2613[a5_0x28bf('0x42')][a5_0x28bf('0x43')](_0x3d46db=>_0x3d46db[a5_0x28bf('0x44')]!==_0x4f6ac0);_0x2e2613[a5_0x28bf('0x2b')](_0x479016=>{if(_0x479016){return _0x3bf3fb(_0x479016);}_0x3121f6[a5_0x28bf('0x1a')](a5_0x28bf('0x3d'),{'msg':_0x4f6ac0+a5_0x28bf('0x45')});_0x4a6d7a[a5_0x28bf('0x8')](a5_0x28bf('0x38'));});});};exports[a5_0x28bf('0x46')]=(_0x25f68a,_0x2536cd,_0x9f97c5)=>{if(_0x25f68a['isAuthenticated']()){return _0x2536cd[a5_0x28bf('0x8')]('/');}User_1[a5_0x28bf('0x18')][a5_0x28bf('0x29')]({'passwordResetToken':_0x25f68a[a5_0x28bf('0x40')]['token']})['where']('passwordResetExpires')['gt'](Date[a5_0x28bf('0x47')]())[a5_0x28bf('0x48')]((_0x500c59,_0x572834)=>{if(_0x500c59){return _0x9f97c5(_0x500c59);}if(!_0x572834){_0x25f68a[a5_0x28bf('0x1a')](a5_0x28bf('0x16'),{'msg':a5_0x28bf('0x49')});return _0x2536cd[a5_0x28bf('0x8')](a5_0x28bf('0x4a'));}_0x2536cd[a5_0x28bf('0x9')](a5_0x28bf('0x4b'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x361699,_0x2091ef,_0x40c535)=>{_0x361699[a5_0x28bf('0xc')]('password',a5_0x28bf('0x4c'))[a5_0x28bf('0x25')]({'min':0x4});_0x361699['assert']('confirm','Passwords\x20must\x20match.')['equals'](_0x361699[a5_0x28bf('0x28')][a5_0x28bf('0x10')]);const _0x1cb9c7=_0x361699['validationErrors']();if(_0x1cb9c7){_0x361699[a5_0x28bf('0x1a')](a5_0x28bf('0x16'),_0x1cb9c7);return _0x2091ef[a5_0x28bf('0x8')]('back');}async_1[a5_0x28bf('0x18')][a5_0x28bf('0x4d')]([function resetPassword(_0x4a231c){User_1['default'][a5_0x28bf('0x29')]({'passwordResetToken':_0x361699[a5_0x28bf('0x40')][a5_0x28bf('0x4e')]})[a5_0x28bf('0x4f')](a5_0x28bf('0x50'))['gt'](Date[a5_0x28bf('0x47')]())[a5_0x28bf('0x48')]((_0x5e7a92,_0x8ab9c6)=>{if(_0x5e7a92){return _0x40c535(_0x5e7a92);}if(!_0x8ab9c6){_0x361699[a5_0x28bf('0x1a')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2091ef[a5_0x28bf('0x8')](a5_0x28bf('0x51'));}_0x8ab9c6['password']=_0x361699['body'][a5_0x28bf('0x10')];_0x8ab9c6['passwordResetToken']=undefined;_0x8ab9c6['passwordResetExpires']=undefined;_0x8ab9c6[a5_0x28bf('0x2b')](_0x5e7a92=>{if(_0x5e7a92){return _0x40c535(_0x5e7a92);}_0x361699[a5_0x28bf('0x52')](_0x8ab9c6,_0x5e7a92=>{_0x4a231c(_0x5e7a92,_0x8ab9c6);});});});},function sendResetPasswordEmail(_0x10bb90,_0x20d70c){const _0xeac8a8=nodemailer_1['default'][a5_0x28bf('0x53')]({'service':a5_0x28bf('0x54'),'auth':{'user':process[a5_0x28bf('0x55')][a5_0x28bf('0x56')],'pass':process[a5_0x28bf('0x55')][a5_0x28bf('0x57')]}});const _0x5d58a1={'to':_0x10bb90[a5_0x28bf('0xd')],'from':'express-ts@starter.com','subject':a5_0x28bf('0x58'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x10bb90[a5_0x28bf('0xd')]+a5_0x28bf('0x59')};_0xeac8a8[a5_0x28bf('0x5a')](_0x5d58a1,_0x305df9=>{_0x361699[a5_0x28bf('0x1a')](a5_0x28bf('0x1b'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x20d70c(_0x305df9);});}],_0x2a46cd=>{if(_0x2a46cd){return _0x40c535(_0x2a46cd);}_0x2091ef['redirect']('/');});};exports['getForgot']=(_0x31bf24,_0x1bb118)=>{if(_0x31bf24['isAuthenticated']()){return _0x1bb118[a5_0x28bf('0x8')]('/');}_0x1bb118['render'](a5_0x28bf('0x5b'),{'title':a5_0x28bf('0x5c')});};exports[a5_0x28bf('0x5d')]=(_0x59e5c1,_0x327219,_0x5a9f6a)=>{_0x59e5c1[a5_0x28bf('0xc')]('email',a5_0x28bf('0x2f'))[a5_0x28bf('0xf')]();_0x59e5c1[a5_0x28bf('0x13')](a5_0x28bf('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2b9489=_0x59e5c1['validationErrors']();if(_0x2b9489){_0x59e5c1[a5_0x28bf('0x1a')](a5_0x28bf('0x16'),_0x2b9489);return _0x327219[a5_0x28bf('0x8')](a5_0x28bf('0x4a'));}async_1['default'][a5_0x28bf('0x4d')]([function createRandomToken(_0x90d90c){crypto_1[a5_0x28bf('0x18')][a5_0x28bf('0x5e')](0x10,(_0x14c761,_0x42c42f)=>{const _0x2f3b29=_0x42c42f[a5_0x28bf('0x5f')]('hex');_0x90d90c(_0x14c761,_0x2f3b29);});},function setRandomToken(_0x8b243b,_0x288fe1){User_1[a5_0x28bf('0x18')][a5_0x28bf('0x29')]({'email':_0x59e5c1[a5_0x28bf('0x28')][a5_0x28bf('0xd')]},(_0xb2276e,_0x4d83ab)=>{if(_0xb2276e){return _0x288fe1(_0xb2276e);}if(!_0x4d83ab){_0x59e5c1[a5_0x28bf('0x1a')](a5_0x28bf('0x16'),{'msg':a5_0x28bf('0x60')});return _0x327219[a5_0x28bf('0x8')](a5_0x28bf('0x4a'));}_0x4d83ab[a5_0x28bf('0x61')]=_0x8b243b;_0x4d83ab[a5_0x28bf('0x50')]=Date[a5_0x28bf('0x47')]()+0x36ee80;_0x4d83ab['save'](_0xb2276e=>{_0x288fe1(_0xb2276e,_0x8b243b,_0x4d83ab);});});},function sendForgotPasswordEmail(_0x276dda,_0x3c2dea,_0x2e4661){const _0x5e9390=nodemailer_1[a5_0x28bf('0x18')][a5_0x28bf('0x53')]({'service':a5_0x28bf('0x54'),'auth':{'user':process['env'][a5_0x28bf('0x56')],'pass':process[a5_0x28bf('0x55')][a5_0x28bf('0x57')]}});const _0x466a8b={'to':_0x3c2dea[a5_0x28bf('0xd')],'from':a5_0x28bf('0x62'),'subject':a5_0x28bf('0x63'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x59e5c1[a5_0x28bf('0x64')]['host']+'/reset/'+_0x276dda+a5_0x28bf('0x65')};_0x5e9390[a5_0x28bf('0x5a')](_0x466a8b,_0x13cb22=>{_0x59e5c1[a5_0x28bf('0x1a')](a5_0x28bf('0x3d'),{'msg':a5_0x28bf('0x66')+_0x3c2dea[a5_0x28bf('0xd')]+a5_0x28bf('0x67')});_0x2e4661(_0x13cb22);});}],_0x48a362=>{if(_0x48a362){return _0x5a9f6a(_0x48a362);}_0x327219[a5_0x28bf('0x8')](a5_0x28bf('0x4a'));});};