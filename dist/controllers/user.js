var a5_0x4a14=['returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','normalizeEmail','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','/signup','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','/account','findById','profile','name','gender','location','website','code','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20has\x20been\x20changed.','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','passwordResetToken','createTransport','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','getForgot','account/forgot','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','sendMail','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','async','crypto','nodemailer','passport','express-validator','getLogin','user','redirect','render','account/login','Login','email','Email\x20is\x20not\x20valid','assert','password','Password\x20cannot\x20be\x20blank','sanitize','validationErrors','flash','errors','/login','authenticate','local','success','Success!\x20You\x20are\x20logged\x20in.','session'];(function(_0x32766b,_0x39a2f4){var _0xcd9885=function(_0x5935f5){while(--_0x5935f5){_0x32766b['push'](_0x32766b['shift']());}};_0xcd9885(++_0x39a2f4);}(a5_0x4a14,0x126));var a5_0x96e9=function(_0x37fda5,_0x51bad4){_0x37fda5=_0x37fda5-0x0;var _0x187296=a5_0x4a14[_0x37fda5];return _0x187296;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5976e9){return _0x5976e9&&_0x5976e9['__esModule']?_0x5976e9:{'default':_0x5976e9};};Object['defineProperty'](exports,a5_0x96e9('0x0'),{'value':!![]});const async_1=__importDefault(require(a5_0x96e9('0x1')));const crypto_1=__importDefault(require(a5_0x96e9('0x2')));const nodemailer_1=__importDefault(require(a5_0x96e9('0x3')));const passport_1=__importDefault(require(a5_0x96e9('0x4')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x96e9('0x5'));exports[a5_0x96e9('0x6')]=(_0x126ff4,_0x24f060)=>{if(_0x126ff4[a5_0x96e9('0x7')]){return _0x24f060[a5_0x96e9('0x8')]('/');}_0x24f060[a5_0x96e9('0x9')](a5_0x96e9('0xa'),{'title':a5_0x96e9('0xb')});};exports['postLogin']=(_0x4411a0,_0x241acb,_0x3af81a)=>{_0x4411a0['assert'](a5_0x96e9('0xc'),a5_0x96e9('0xd'))['isEmail']();_0x4411a0[a5_0x96e9('0xe')](a5_0x96e9('0xf'),a5_0x96e9('0x10'))['notEmpty']();_0x4411a0[a5_0x96e9('0x11')](a5_0x96e9('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x53ae50=_0x4411a0[a5_0x96e9('0x12')]();if(_0x53ae50){_0x4411a0[a5_0x96e9('0x13')](a5_0x96e9('0x14'),_0x53ae50);return _0x241acb[a5_0x96e9('0x8')](a5_0x96e9('0x15'));}passport_1['default'][a5_0x96e9('0x16')](a5_0x96e9('0x17'),(_0x1a93c4,_0x3f79d5,_0xb227e0)=>{if(_0x1a93c4){return _0x3af81a(_0x1a93c4);}if(!_0x3f79d5){_0x4411a0[a5_0x96e9('0x13')]('errors',_0xb227e0['message']);return _0x241acb[a5_0x96e9('0x8')](a5_0x96e9('0x15'));}_0x4411a0['logIn'](_0x3f79d5,_0x1a93c4=>{if(_0x1a93c4){return _0x3af81a(_0x1a93c4);}_0x4411a0['flash'](a5_0x96e9('0x18'),{'msg':a5_0x96e9('0x19')});_0x241acb[a5_0x96e9('0x8')](_0x4411a0[a5_0x96e9('0x1a')][a5_0x96e9('0x1b')]||'/');});})(_0x4411a0,_0x241acb,_0x3af81a);};exports['logout']=(_0x1c6c99,_0xea7881)=>{_0x1c6c99[a5_0x96e9('0x1c')]();_0xea7881[a5_0x96e9('0x8')]('/');};exports[a5_0x96e9('0x1d')]=(_0x1fcfe6,_0x10fbde)=>{if(_0x1fcfe6[a5_0x96e9('0x7')]){return _0x10fbde['redirect']('/');}_0x10fbde['render'](a5_0x96e9('0x1e'),{'title':a5_0x96e9('0x1f')});};exports[a5_0x96e9('0x20')]=(_0x9c03b4,_0x1e0fe3,_0x3cc9a0)=>{_0x9c03b4['assert'](a5_0x96e9('0xc'),a5_0x96e9('0xd'))[a5_0x96e9('0x21')]();_0x9c03b4['assert']('password',a5_0x96e9('0x22'))[a5_0x96e9('0x23')]({'min':0x4});_0x9c03b4['assert'](a5_0x96e9('0x24'),a5_0x96e9('0x25'))[a5_0x96e9('0x26')](_0x9c03b4[a5_0x96e9('0x27')][a5_0x96e9('0xf')]);_0x9c03b4['sanitize'](a5_0x96e9('0xc'))[a5_0x96e9('0x28')]({'gmail_remove_dots':![]});const _0x5f15f0=_0x9c03b4[a5_0x96e9('0x12')]();if(_0x5f15f0){_0x9c03b4['flash'](a5_0x96e9('0x14'),_0x5f15f0);return _0x1e0fe3[a5_0x96e9('0x8')]('/signup');}const _0x3f1756=new User_1[(a5_0x96e9('0x29'))]({});User_1['default'][a5_0x96e9('0x2a')]({'email':_0x9c03b4[a5_0x96e9('0x27')][a5_0x96e9('0xc')]},(_0x4048e4,_0x27fef3)=>{if(_0x4048e4){return _0x3cc9a0(_0x4048e4);}if(_0x27fef3){_0x9c03b4['flash'](a5_0x96e9('0x14'),{'msg':a5_0x96e9('0x2b')});return _0x1e0fe3[a5_0x96e9('0x8')](a5_0x96e9('0x2c'));}_0x3f1756[a5_0x96e9('0x2d')](_0x4048e4=>{if(_0x4048e4){return _0x3cc9a0(_0x4048e4);}_0x9c03b4['logIn'](_0x3f1756,_0x4048e4=>{if(_0x4048e4){return _0x3cc9a0(_0x4048e4);}_0x1e0fe3[a5_0x96e9('0x8')]('/');});});});};exports[a5_0x96e9('0x2e')]=(_0x9d2377,_0x23fde7)=>{_0x23fde7[a5_0x96e9('0x9')](a5_0x96e9('0x2f'),{'title':a5_0x96e9('0x30')});};exports[a5_0x96e9('0x31')]=(_0x5751db,_0x14cc2e,_0x193965)=>{_0x5751db[a5_0x96e9('0xe')](a5_0x96e9('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')['isEmail']();_0x5751db[a5_0x96e9('0x11')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x3b1dfa=_0x5751db['validationErrors']();if(_0x3b1dfa){_0x5751db[a5_0x96e9('0x13')](a5_0x96e9('0x14'),_0x3b1dfa);return _0x14cc2e[a5_0x96e9('0x8')](a5_0x96e9('0x32'));}User_1[a5_0x96e9('0x29')][a5_0x96e9('0x33')](_0x5751db[a5_0x96e9('0x7')]['id'],(_0x33313c,_0x269743)=>{if(_0x33313c){return _0x193965(_0x33313c);}_0x269743[a5_0x96e9('0xc')]=_0x5751db['body'][a5_0x96e9('0xc')]||'';_0x269743[a5_0x96e9('0x34')][a5_0x96e9('0x35')]=_0x5751db[a5_0x96e9('0x27')][a5_0x96e9('0x35')]||'';_0x269743[a5_0x96e9('0x34')][a5_0x96e9('0x36')]=_0x5751db[a5_0x96e9('0x27')]['gender']||'';_0x269743[a5_0x96e9('0x34')]['location']=_0x5751db[a5_0x96e9('0x27')][a5_0x96e9('0x37')]||'';_0x269743[a5_0x96e9('0x34')][a5_0x96e9('0x38')]=_0x5751db[a5_0x96e9('0x27')][a5_0x96e9('0x38')]||'';_0x269743['save'](_0x33313c=>{if(_0x33313c){if(_0x33313c[a5_0x96e9('0x39')]===0x2af8){_0x5751db['flash'](a5_0x96e9('0x14'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x14cc2e[a5_0x96e9('0x8')](a5_0x96e9('0x32'));}return _0x193965(_0x33313c);}_0x5751db[a5_0x96e9('0x13')](a5_0x96e9('0x18'),{'msg':a5_0x96e9('0x3a')});_0x14cc2e['redirect']('/account');});});};exports[a5_0x96e9('0x3b')]=(_0x595d8d,_0x6ba2f3,_0x9f2d81)=>{_0x595d8d['assert'](a5_0x96e9('0xf'),a5_0x96e9('0x22'))[a5_0x96e9('0x23')]({'min':0x4});_0x595d8d[a5_0x96e9('0xe')](a5_0x96e9('0x24'),a5_0x96e9('0x25'))[a5_0x96e9('0x26')](_0x595d8d['body']['password']);const _0x56a3d1=_0x595d8d[a5_0x96e9('0x12')]();if(_0x56a3d1){_0x595d8d[a5_0x96e9('0x13')](a5_0x96e9('0x14'),_0x56a3d1);return _0x6ba2f3[a5_0x96e9('0x8')](a5_0x96e9('0x32'));}User_1[a5_0x96e9('0x29')]['findById'](_0x595d8d[a5_0x96e9('0x7')]['id'],(_0x50e535,_0x13d0ef)=>{if(_0x50e535){return _0x9f2d81(_0x50e535);}_0x13d0ef['password']=_0x595d8d[a5_0x96e9('0x27')][a5_0x96e9('0xf')];_0x13d0ef[a5_0x96e9('0x2d')](_0x50e535=>{if(_0x50e535){return _0x9f2d81(_0x50e535);}_0x595d8d[a5_0x96e9('0x13')](a5_0x96e9('0x18'),{'msg':a5_0x96e9('0x3c')});_0x6ba2f3['redirect']('/account');});});};exports['postDeleteAccount']=(_0xbe4d36,_0x30d58f,_0x288faa)=>{User_1[a5_0x96e9('0x29')]['remove']({'_id':_0xbe4d36['user']['id']},_0x3f420d=>{if(_0x3f420d){return _0x288faa(_0x3f420d);}_0xbe4d36['logout']();_0xbe4d36[a5_0x96e9('0x13')](a5_0x96e9('0x3d'),{'msg':a5_0x96e9('0x3e')});_0x30d58f[a5_0x96e9('0x8')]('/');});};exports[a5_0x96e9('0x3f')]=(_0x4bb095,_0x2df766,_0x2044fc)=>{const _0x302db5=_0x4bb095[a5_0x96e9('0x40')][a5_0x96e9('0x41')];User_1[a5_0x96e9('0x29')][a5_0x96e9('0x33')](_0x4bb095[a5_0x96e9('0x7')]['id'],(_0x3e192b,_0x518298)=>{if(_0x3e192b){return _0x2044fc(_0x3e192b);}_0x518298[_0x302db5]=undefined;_0x518298[a5_0x96e9('0x42')]=_0x518298['tokens'][a5_0x96e9('0x43')](_0x209dc4=>_0x209dc4[a5_0x96e9('0x44')]!==_0x302db5);_0x518298['save'](_0x3e192b=>{if(_0x3e192b){return _0x2044fc(_0x3e192b);}_0x4bb095[a5_0x96e9('0x13')](a5_0x96e9('0x3d'),{'msg':_0x302db5+a5_0x96e9('0x45')});_0x2df766[a5_0x96e9('0x8')](a5_0x96e9('0x32'));});});};exports[a5_0x96e9('0x46')]=(_0x534636,_0x2c8594,_0x4c833d)=>{if(_0x534636[a5_0x96e9('0x47')]()){return _0x2c8594[a5_0x96e9('0x8')]('/');}User_1[a5_0x96e9('0x29')][a5_0x96e9('0x2a')]({'passwordResetToken':_0x534636[a5_0x96e9('0x40')][a5_0x96e9('0x48')]})[a5_0x96e9('0x49')](a5_0x96e9('0x4a'))['gt'](Date[a5_0x96e9('0x4b')]())[a5_0x96e9('0x4c')]((_0x14d456,_0xddac8e)=>{if(_0x14d456){return _0x4c833d(_0x14d456);}if(!_0xddac8e){_0x534636[a5_0x96e9('0x13')](a5_0x96e9('0x14'),{'msg':a5_0x96e9('0x4d')});return _0x2c8594[a5_0x96e9('0x8')](a5_0x96e9('0x4e'));}_0x2c8594['render'](a5_0x96e9('0x4f'),{'title':a5_0x96e9('0x50')});});};exports['postReset']=(_0x342fff,_0x328373,_0x2fc00c)=>{_0x342fff[a5_0x96e9('0xe')](a5_0x96e9('0xf'),a5_0x96e9('0x51'))[a5_0x96e9('0x23')]({'min':0x4});_0x342fff[a5_0x96e9('0xe')](a5_0x96e9('0x52'),a5_0x96e9('0x53'))[a5_0x96e9('0x26')](_0x342fff[a5_0x96e9('0x27')][a5_0x96e9('0xf')]);const _0x25ab1f=_0x342fff[a5_0x96e9('0x12')]();if(_0x25ab1f){_0x342fff['flash'](a5_0x96e9('0x14'),_0x25ab1f);return _0x328373[a5_0x96e9('0x8')]('back');}async_1[a5_0x96e9('0x29')][a5_0x96e9('0x54')]([function resetPassword(_0x237e45){User_1[a5_0x96e9('0x29')][a5_0x96e9('0x2a')]({'passwordResetToken':_0x342fff['params'][a5_0x96e9('0x48')]})[a5_0x96e9('0x49')](a5_0x96e9('0x4a'))['gt'](Date['now']())[a5_0x96e9('0x4c')]((_0x17ab12,_0x585392)=>{if(_0x17ab12){return _0x2fc00c(_0x17ab12);}if(!_0x585392){_0x342fff[a5_0x96e9('0x13')](a5_0x96e9('0x14'),{'msg':a5_0x96e9('0x4d')});return _0x328373[a5_0x96e9('0x8')]('back');}_0x585392[a5_0x96e9('0xf')]=_0x342fff[a5_0x96e9('0x27')]['password'];_0x585392[a5_0x96e9('0x55')]=undefined;_0x585392[a5_0x96e9('0x4a')]=undefined;_0x585392[a5_0x96e9('0x2d')](_0x17ab12=>{if(_0x17ab12){return _0x2fc00c(_0x17ab12);}_0x342fff['logIn'](_0x585392,_0x17ab12=>{_0x237e45(_0x17ab12,_0x585392);});});});},function sendResetPasswordEmail(_0x3b785d,_0x25a3bd){const _0xd54429=nodemailer_1[a5_0x96e9('0x29')][a5_0x96e9('0x56')]({'service':'SendGrid','auth':{'user':process[a5_0x96e9('0x57')][a5_0x96e9('0x58')],'pass':process[a5_0x96e9('0x57')]['SENDGRID_PASSWORD']}});const _0xe7f2fc={'to':_0x3b785d[a5_0x96e9('0xc')],'from':a5_0x96e9('0x59'),'subject':a5_0x96e9('0x5a'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x3b785d['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0xd54429['sendMail'](_0xe7f2fc,_0x4fedbf=>{_0x342fff[a5_0x96e9('0x13')](a5_0x96e9('0x18'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x25a3bd(_0x4fedbf);});}],_0x2934c8=>{if(_0x2934c8){return _0x2fc00c(_0x2934c8);}_0x328373['redirect']('/');});};exports[a5_0x96e9('0x5b')]=(_0x2d2fa3,_0x42790f)=>{if(_0x2d2fa3[a5_0x96e9('0x47')]()){return _0x42790f[a5_0x96e9('0x8')]('/');}_0x42790f[a5_0x96e9('0x9')](a5_0x96e9('0x5c'),{'title':'Forgot\x20Password'});};exports[a5_0x96e9('0x5d')]=(_0x49ebaa,_0xa31d7d,_0x2ce908)=>{_0x49ebaa[a5_0x96e9('0xe')](a5_0x96e9('0xc'),a5_0x96e9('0x5e'))[a5_0x96e9('0x21')]();_0x49ebaa[a5_0x96e9('0x11')]('email')[a5_0x96e9('0x28')]({'gmail_remove_dots':![]});const _0x5d1174=_0x49ebaa[a5_0x96e9('0x12')]();if(_0x5d1174){_0x49ebaa[a5_0x96e9('0x13')](a5_0x96e9('0x14'),_0x5d1174);return _0xa31d7d[a5_0x96e9('0x8')](a5_0x96e9('0x4e'));}async_1['default']['waterfall']([function createRandomToken(_0x319923){crypto_1[a5_0x96e9('0x29')]['randomBytes'](0x10,(_0x180866,_0x43dfcc)=>{const _0x670b3e=_0x43dfcc['toString'](a5_0x96e9('0x5f'));_0x319923(_0x180866,_0x670b3e);});},function setRandomToken(_0x215a8a,_0x15ce51){User_1[a5_0x96e9('0x29')]['findOne']({'email':_0x49ebaa[a5_0x96e9('0x27')][a5_0x96e9('0xc')]},(_0x4f062d,_0x215f9b)=>{if(_0x4f062d){return _0x15ce51(_0x4f062d);}if(!_0x215f9b){_0x49ebaa[a5_0x96e9('0x13')](a5_0x96e9('0x14'),{'msg':a5_0x96e9('0x60')});return _0xa31d7d[a5_0x96e9('0x8')](a5_0x96e9('0x4e'));}_0x215f9b[a5_0x96e9('0x55')]=_0x215a8a;_0x215f9b[a5_0x96e9('0x4a')]=Date[a5_0x96e9('0x4b')]()+0x36ee80;_0x215f9b[a5_0x96e9('0x2d')](_0x4f062d=>{_0x15ce51(_0x4f062d,_0x215a8a,_0x215f9b);});});},function sendForgotPasswordEmail(_0x46c25c,_0x26b888,_0x1db235){const _0x5bc4d6=nodemailer_1[a5_0x96e9('0x29')]['createTransport']({'service':a5_0x96e9('0x61'),'auth':{'user':process[a5_0x96e9('0x57')][a5_0x96e9('0x58')],'pass':process[a5_0x96e9('0x57')]['SENDGRID_PASSWORD']}});const _0x59daa5={'to':_0x26b888[a5_0x96e9('0xc')],'from':a5_0x96e9('0x62'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x96e9('0x63')+_0x49ebaa[a5_0x96e9('0x64')][a5_0x96e9('0x65')]+a5_0x96e9('0x66')+_0x46c25c+a5_0x96e9('0x67')};_0x5bc4d6[a5_0x96e9('0x68')](_0x59daa5,_0x15b553=>{_0x49ebaa[a5_0x96e9('0x13')](a5_0x96e9('0x3d'),{'msg':a5_0x96e9('0x69')+_0x26b888['email']+a5_0x96e9('0x6a')});_0x1db235(_0x15b553);});}],_0x2e7477=>{if(_0x2e7477){return _0x2ce908(_0x2e7477);}_0xa31d7d['redirect'](a5_0x96e9('0x4e'));});};