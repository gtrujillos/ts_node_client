var a5_0x359c=['getForgot','account/forgot','Forgot\x20Password','postForgot','randomBytes','toString','hex','SENDGRID_USER','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','defineProperty','__esModule','async','nodemailer','passport','../models/User','express-validator','getLogin','user','redirect','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','errors','/login','default','authenticate','local','flash','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','render','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','save','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','profile','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','/account','Profile\x20information\x20has\x20been\x20updated.','findById','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','where','passwordResetExpires','now','exec','/forgot','account/reset','Password\x20Reset','postReset','Passwords\x20must\x20match.','back','waterfall','passwordResetToken','createTransport','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.'];(function(_0x311f58,_0x42212e){var _0x3de3b1=function(_0x456732){while(--_0x456732){_0x311f58['push'](_0x311f58['shift']());}};_0x3de3b1(++_0x42212e);}(a5_0x359c,0x148));var a5_0x2599=function(_0x1bd13b,_0x54d171){_0x1bd13b=_0x1bd13b-0x0;var _0x201c48=a5_0x359c[_0x1bd13b];return _0x201c48;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5dfdc7){return _0x5dfdc7&&_0x5dfdc7['__esModule']?_0x5dfdc7:{'default':_0x5dfdc7};};Object[a5_0x2599('0x0')](exports,a5_0x2599('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x2599('0x2')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x2599('0x3')));const passport_1=__importDefault(require(a5_0x2599('0x4')));const User_1=__importDefault(require(a5_0x2599('0x5')));const request=require(a5_0x2599('0x6'));exports[a5_0x2599('0x7')]=(_0x258c21,_0x57e953)=>{if(_0x258c21[a5_0x2599('0x8')]){return _0x57e953[a5_0x2599('0x9')]('/');}_0x57e953['render']('account/login',{'title':a5_0x2599('0xa')});};exports[a5_0x2599('0xb')]=(_0x2f44f6,_0x1983cc,_0x306f3d)=>{_0x2f44f6[a5_0x2599('0xc')](a5_0x2599('0xd'),a5_0x2599('0xe'))[a5_0x2599('0xf')]();_0x2f44f6[a5_0x2599('0xc')](a5_0x2599('0x10'),a5_0x2599('0x11'))[a5_0x2599('0x12')]();_0x2f44f6[a5_0x2599('0x13')](a5_0x2599('0xd'))[a5_0x2599('0x14')]({'gmail_remove_dots':![]});const _0x2dc9e5=_0x2f44f6[a5_0x2599('0x15')]();if(_0x2dc9e5){_0x2f44f6['flash'](a5_0x2599('0x16'),_0x2dc9e5);return _0x1983cc[a5_0x2599('0x9')](a5_0x2599('0x17'));}passport_1[a5_0x2599('0x18')][a5_0x2599('0x19')](a5_0x2599('0x1a'),(_0x2194fc,_0x5bcb5b,_0x646979)=>{if(_0x2194fc){return _0x306f3d(_0x2194fc);}if(!_0x5bcb5b){_0x2f44f6[a5_0x2599('0x1b')](a5_0x2599('0x16'),_0x646979[a5_0x2599('0x1c')]);return _0x1983cc['redirect'](a5_0x2599('0x17'));}_0x2f44f6[a5_0x2599('0x1d')](_0x5bcb5b,_0x2194fc=>{if(_0x2194fc){return _0x306f3d(_0x2194fc);}_0x2f44f6[a5_0x2599('0x1b')](a5_0x2599('0x1e'),{'msg':a5_0x2599('0x1f')});_0x1983cc[a5_0x2599('0x9')](_0x2f44f6['session'][a5_0x2599('0x20')]||'/');});})(_0x2f44f6,_0x1983cc,_0x306f3d);};exports[a5_0x2599('0x21')]=(_0x36fb7c,_0x3b57d3)=>{_0x36fb7c[a5_0x2599('0x21')]();_0x3b57d3[a5_0x2599('0x9')]('/');};exports['getSignup']=(_0x155f72,_0x25cedb)=>{if(_0x155f72[a5_0x2599('0x8')]){return _0x25cedb[a5_0x2599('0x9')]('/');}_0x25cedb[a5_0x2599('0x22')]('account/signup',{'title':'Create\x20Account'});};exports['postSignup']=(_0x15475c,_0x505d8c,_0x46dc27)=>{_0x15475c[a5_0x2599('0xc')](a5_0x2599('0xd'),a5_0x2599('0xe'))[a5_0x2599('0xf')]();_0x15475c[a5_0x2599('0xc')](a5_0x2599('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x2599('0x23')]({'min':0x4});_0x15475c[a5_0x2599('0xc')](a5_0x2599('0x24'),a5_0x2599('0x25'))[a5_0x2599('0x26')](_0x15475c[a5_0x2599('0x27')][a5_0x2599('0x10')]);_0x15475c[a5_0x2599('0x13')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x4d8ded=_0x15475c[a5_0x2599('0x15')]();if(_0x4d8ded){_0x15475c[a5_0x2599('0x1b')](a5_0x2599('0x16'),_0x4d8ded);return _0x505d8c[a5_0x2599('0x9')](a5_0x2599('0x28'));}const _0x200671=new User_1[(a5_0x2599('0x18'))]({});User_1[a5_0x2599('0x18')][a5_0x2599('0x29')]({'email':_0x15475c[a5_0x2599('0x27')]['email']},(_0x189ed4,_0x1af097)=>{if(_0x189ed4){return _0x46dc27(_0x189ed4);}if(_0x1af097){_0x15475c[a5_0x2599('0x1b')](a5_0x2599('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x505d8c['redirect'](a5_0x2599('0x28'));}_0x200671[a5_0x2599('0x2a')](_0x189ed4=>{if(_0x189ed4){return _0x46dc27(_0x189ed4);}_0x15475c[a5_0x2599('0x1d')](_0x200671,_0x189ed4=>{if(_0x189ed4){return _0x46dc27(_0x189ed4);}_0x505d8c['redirect']('/');});});});};exports['getAccount']=(_0x42ec95,_0x1dd34f)=>{_0x1dd34f[a5_0x2599('0x22')](a5_0x2599('0x2b'),{'title':'Account\x20Management'});};exports[a5_0x2599('0x2c')]=(_0x236da9,_0xdb94b1,_0x4348f8)=>{_0x236da9[a5_0x2599('0xc')]('email',a5_0x2599('0x2d'))[a5_0x2599('0xf')]();_0x236da9[a5_0x2599('0x13')](a5_0x2599('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x44b78b=_0x236da9['validationErrors']();if(_0x44b78b){_0x236da9[a5_0x2599('0x1b')]('errors',_0x44b78b);return _0xdb94b1[a5_0x2599('0x9')]('/account');}User_1[a5_0x2599('0x18')]['findById'](_0x236da9[a5_0x2599('0x8')]['id'],(_0x1d0d31,_0x55fac1)=>{if(_0x1d0d31){return _0x4348f8(_0x1d0d31);}_0x55fac1[a5_0x2599('0xd')]=_0x236da9[a5_0x2599('0x27')][a5_0x2599('0xd')]||'';_0x55fac1[a5_0x2599('0x2e')]['name']=_0x236da9[a5_0x2599('0x27')]['name']||'';_0x55fac1[a5_0x2599('0x2e')][a5_0x2599('0x2f')]=_0x236da9['body'][a5_0x2599('0x2f')]||'';_0x55fac1[a5_0x2599('0x2e')]['location']=_0x236da9[a5_0x2599('0x27')][a5_0x2599('0x30')]||'';_0x55fac1[a5_0x2599('0x2e')][a5_0x2599('0x31')]=_0x236da9[a5_0x2599('0x27')][a5_0x2599('0x31')]||'';_0x55fac1[a5_0x2599('0x2a')](_0x1d0d31=>{if(_0x1d0d31){if(_0x1d0d31[a5_0x2599('0x32')]===0x2af8){_0x236da9[a5_0x2599('0x1b')](a5_0x2599('0x16'),{'msg':a5_0x2599('0x33')});return _0xdb94b1[a5_0x2599('0x9')](a5_0x2599('0x34'));}return _0x4348f8(_0x1d0d31);}_0x236da9[a5_0x2599('0x1b')](a5_0x2599('0x1e'),{'msg':a5_0x2599('0x35')});_0xdb94b1['redirect'](a5_0x2599('0x34'));});});};exports['postUpdatePassword']=(_0x3d02c1,_0x2bcfb4,_0x2f2afc)=>{_0x3d02c1[a5_0x2599('0xc')](a5_0x2599('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x2599('0x23')]({'min':0x4});_0x3d02c1['assert'](a5_0x2599('0x24'),'Passwords\x20do\x20not\x20match')[a5_0x2599('0x26')](_0x3d02c1[a5_0x2599('0x27')][a5_0x2599('0x10')]);const _0x236198=_0x3d02c1['validationErrors']();if(_0x236198){_0x3d02c1[a5_0x2599('0x1b')]('errors',_0x236198);return _0x2bcfb4[a5_0x2599('0x9')](a5_0x2599('0x34'));}User_1[a5_0x2599('0x18')][a5_0x2599('0x36')](_0x3d02c1['user']['id'],(_0x513b0c,_0x45345d)=>{if(_0x513b0c){return _0x2f2afc(_0x513b0c);}_0x45345d[a5_0x2599('0x10')]=_0x3d02c1['body'][a5_0x2599('0x10')];_0x45345d[a5_0x2599('0x2a')](_0x513b0c=>{if(_0x513b0c){return _0x2f2afc(_0x513b0c);}_0x3d02c1[a5_0x2599('0x1b')](a5_0x2599('0x1e'),{'msg':'Password\x20has\x20been\x20changed.'});_0x2bcfb4[a5_0x2599('0x9')](a5_0x2599('0x34'));});});};exports[a5_0x2599('0x37')]=(_0x753009,_0x24b929,_0x16d6aa)=>{User_1[a5_0x2599('0x18')][a5_0x2599('0x38')]({'_id':_0x753009['user']['id']},_0x535f34=>{if(_0x535f34){return _0x16d6aa(_0x535f34);}_0x753009[a5_0x2599('0x21')]();_0x753009['flash'](a5_0x2599('0x39'),{'msg':a5_0x2599('0x3a')});_0x24b929[a5_0x2599('0x9')]('/');});};exports[a5_0x2599('0x3b')]=(_0xe99b6b,_0x3dfb51,_0x27495d)=>{const _0x4659c8=_0xe99b6b[a5_0x2599('0x3c')]['provider'];User_1[a5_0x2599('0x18')]['findById'](_0xe99b6b['user']['id'],(_0x28f973,_0x2583e9)=>{if(_0x28f973){return _0x27495d(_0x28f973);}_0x2583e9[_0x4659c8]=undefined;_0x2583e9[a5_0x2599('0x3d')]=_0x2583e9[a5_0x2599('0x3d')]['filter'](_0x3893bf=>_0x3893bf[a5_0x2599('0x3e')]!==_0x4659c8);_0x2583e9[a5_0x2599('0x2a')](_0x28f973=>{if(_0x28f973){return _0x27495d(_0x28f973);}_0xe99b6b[a5_0x2599('0x1b')](a5_0x2599('0x39'),{'msg':_0x4659c8+a5_0x2599('0x3f')});_0x3dfb51['redirect'](a5_0x2599('0x34'));});});};exports[a5_0x2599('0x40')]=(_0x538150,_0x39c554,_0x421d04)=>{if(_0x538150[a5_0x2599('0x41')]()){return _0x39c554[a5_0x2599('0x9')]('/');}User_1[a5_0x2599('0x18')][a5_0x2599('0x29')]({'passwordResetToken':_0x538150[a5_0x2599('0x3c')][a5_0x2599('0x42')]})[a5_0x2599('0x43')](a5_0x2599('0x44'))['gt'](Date[a5_0x2599('0x45')]())[a5_0x2599('0x46')]((_0x11beda,_0x2f8114)=>{if(_0x11beda){return _0x421d04(_0x11beda);}if(!_0x2f8114){_0x538150['flash'](a5_0x2599('0x16'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x39c554[a5_0x2599('0x9')](a5_0x2599('0x47'));}_0x39c554[a5_0x2599('0x22')](a5_0x2599('0x48'),{'title':a5_0x2599('0x49')});});};exports[a5_0x2599('0x4a')]=(_0x2e29d3,_0xa98ee6,_0x16c91e)=>{_0x2e29d3[a5_0x2599('0xc')](a5_0x2599('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x2599('0x23')]({'min':0x4});_0x2e29d3[a5_0x2599('0xc')]('confirm',a5_0x2599('0x4b'))['equals'](_0x2e29d3[a5_0x2599('0x27')][a5_0x2599('0x10')]);const _0x20f25b=_0x2e29d3[a5_0x2599('0x15')]();if(_0x20f25b){_0x2e29d3[a5_0x2599('0x1b')]('errors',_0x20f25b);return _0xa98ee6[a5_0x2599('0x9')](a5_0x2599('0x4c'));}async_1[a5_0x2599('0x18')][a5_0x2599('0x4d')]([function resetPassword(_0x439859){User_1[a5_0x2599('0x18')][a5_0x2599('0x29')]({'passwordResetToken':_0x2e29d3['params'][a5_0x2599('0x42')]})[a5_0x2599('0x43')](a5_0x2599('0x44'))['gt'](Date[a5_0x2599('0x45')]())[a5_0x2599('0x46')]((_0x42c0d7,_0x2c07e4)=>{if(_0x42c0d7){return _0x16c91e(_0x42c0d7);}if(!_0x2c07e4){_0x2e29d3[a5_0x2599('0x1b')](a5_0x2599('0x16'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0xa98ee6[a5_0x2599('0x9')](a5_0x2599('0x4c'));}_0x2c07e4[a5_0x2599('0x10')]=_0x2e29d3['body'][a5_0x2599('0x10')];_0x2c07e4[a5_0x2599('0x4e')]=undefined;_0x2c07e4['passwordResetExpires']=undefined;_0x2c07e4[a5_0x2599('0x2a')](_0x42c0d7=>{if(_0x42c0d7){return _0x16c91e(_0x42c0d7);}_0x2e29d3[a5_0x2599('0x1d')](_0x2c07e4,_0x42c0d7=>{_0x439859(_0x42c0d7,_0x2c07e4);});});});},function sendResetPasswordEmail(_0x265b50,_0x27427a){const _0x17f999=nodemailer_1[a5_0x2599('0x18')][a5_0x2599('0x4f')]({'service':a5_0x2599('0x50'),'auth':{'user':process[a5_0x2599('0x51')]['SENDGRID_USER'],'pass':process[a5_0x2599('0x51')][a5_0x2599('0x52')]}});const _0x1f2982={'to':_0x265b50[a5_0x2599('0xd')],'from':a5_0x2599('0x53'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x2599('0x54')+_0x265b50['email']+a5_0x2599('0x55')};_0x17f999[a5_0x2599('0x56')](_0x1f2982,_0x26d358=>{_0x2e29d3[a5_0x2599('0x1b')](a5_0x2599('0x1e'),{'msg':a5_0x2599('0x57')});_0x27427a(_0x26d358);});}],_0x3faae4=>{if(_0x3faae4){return _0x16c91e(_0x3faae4);}_0xa98ee6[a5_0x2599('0x9')]('/');});};exports[a5_0x2599('0x58')]=(_0x536510,_0x54711e)=>{if(_0x536510['isAuthenticated']()){return _0x54711e[a5_0x2599('0x9')]('/');}_0x54711e[a5_0x2599('0x22')](a5_0x2599('0x59'),{'title':a5_0x2599('0x5a')});};exports[a5_0x2599('0x5b')]=(_0x1b028f,_0x523d73,_0x450504)=>{_0x1b028f[a5_0x2599('0xc')](a5_0x2599('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x2599('0xf')]();_0x1b028f['sanitize'](a5_0x2599('0xd'))[a5_0x2599('0x14')]({'gmail_remove_dots':![]});const _0x48063d=_0x1b028f['validationErrors']();if(_0x48063d){_0x1b028f['flash'](a5_0x2599('0x16'),_0x48063d);return _0x523d73['redirect']('/forgot');}async_1[a5_0x2599('0x18')][a5_0x2599('0x4d')]([function createRandomToken(_0x473171){crypto_1['default'][a5_0x2599('0x5c')](0x10,(_0x4b5f92,_0x2cf342)=>{const _0x102314=_0x2cf342[a5_0x2599('0x5d')](a5_0x2599('0x5e'));_0x473171(_0x4b5f92,_0x102314);});},function setRandomToken(_0x1f24ec,_0x2b987b){User_1[a5_0x2599('0x18')][a5_0x2599('0x29')]({'email':_0x1b028f[a5_0x2599('0x27')][a5_0x2599('0xd')]},(_0x3c57d4,_0x50ae1f)=>{if(_0x3c57d4){return _0x2b987b(_0x3c57d4);}if(!_0x50ae1f){_0x1b028f[a5_0x2599('0x1b')](a5_0x2599('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x523d73['redirect'](a5_0x2599('0x47'));}_0x50ae1f[a5_0x2599('0x4e')]=_0x1f24ec;_0x50ae1f[a5_0x2599('0x44')]=Date[a5_0x2599('0x45')]()+0x36ee80;_0x50ae1f[a5_0x2599('0x2a')](_0x3c57d4=>{_0x2b987b(_0x3c57d4,_0x1f24ec,_0x50ae1f);});});},function sendForgotPasswordEmail(_0x5d29c5,_0x163aab,_0x242b8f){const _0x4fe7a6=nodemailer_1[a5_0x2599('0x18')][a5_0x2599('0x4f')]({'service':a5_0x2599('0x50'),'auth':{'user':process['env'][a5_0x2599('0x5f')],'pass':process[a5_0x2599('0x51')][a5_0x2599('0x52')]}});const _0x55482d={'to':_0x163aab['email'],'from':a5_0x2599('0x60'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x2599('0x61')+_0x1b028f[a5_0x2599('0x62')][a5_0x2599('0x63')]+a5_0x2599('0x64')+_0x5d29c5+a5_0x2599('0x65')};_0x4fe7a6[a5_0x2599('0x56')](_0x55482d,_0x5a893f=>{_0x1b028f[a5_0x2599('0x1b')](a5_0x2599('0x39'),{'msg':a5_0x2599('0x66')+_0x163aab['email']+a5_0x2599('0x67')});_0x242b8f(_0x5a893f);});}],_0x48e9c9=>{if(_0x48e9c9){return _0x450504(_0x48e9c9);}_0x523d73[a5_0x2599('0x9')]('/forgot');});};