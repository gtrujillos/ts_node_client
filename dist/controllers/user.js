var a5_0x4b66=['postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','redirect','authenticate','local','message','/login','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','len','confirmPassword','body','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','/account','findById','name','gender','profile','location','website','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','equals','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','params','tokens','filter','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','token','passwordResetExpires','now','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','where','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','createTransport','SENDGRID_USER','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','defineProperty','__esModule','async','crypto','passport','express-validator','getLogin','user','render','account/login','Login'];(function(_0x40499a,_0x55346f){var _0x7db816=function(_0x50503d){while(--_0x50503d){_0x40499a['push'](_0x40499a['shift']());}};_0x7db816(++_0x55346f);}(a5_0x4b66,0x141));var a5_0x1df4=function(_0x2d7f22,_0xeb2bf9){_0x2d7f22=_0x2d7f22-0x0;var _0x292872=a5_0x4b66[_0x2d7f22];return _0x292872;};'use strict';var __importDefault=this&&this[a5_0x1df4('0x0')]||function(_0x4a0afb){return _0x4a0afb&&_0x4a0afb['__esModule']?_0x4a0afb:{'default':_0x4a0afb};};Object[a5_0x1df4('0x1')](exports,a5_0x1df4('0x2'),{'value':!![]});const async_1=__importDefault(require(a5_0x1df4('0x3')));const crypto_1=__importDefault(require(a5_0x1df4('0x4')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x1df4('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x1df4('0x6'));exports[a5_0x1df4('0x7')]=(_0x3290a5,_0x46da33)=>{if(_0x3290a5[a5_0x1df4('0x8')]){return _0x46da33['redirect']('/');}_0x46da33[a5_0x1df4('0x9')](a5_0x1df4('0xa'),{'title':a5_0x1df4('0xb')});};exports[a5_0x1df4('0xc')]=(_0x3a724c,_0x10c910,_0x5b8c81)=>{_0x3a724c[a5_0x1df4('0xd')](a5_0x1df4('0xe'),a5_0x1df4('0xf'))[a5_0x1df4('0x10')]();_0x3a724c['assert'](a5_0x1df4('0x11'),a5_0x1df4('0x12'))['notEmpty']();_0x3a724c[a5_0x1df4('0x13')]('email')[a5_0x1df4('0x14')]({'gmail_remove_dots':![]});const _0x4a0064=_0x3a724c[a5_0x1df4('0x15')]();if(_0x4a0064){_0x3a724c[a5_0x1df4('0x16')](a5_0x1df4('0x17'),_0x4a0064);return _0x10c910[a5_0x1df4('0x18')]('/login');}passport_1['default'][a5_0x1df4('0x19')](a5_0x1df4('0x1a'),(_0x9f9e3f,_0xd56a5d,_0x285dac)=>{if(_0x9f9e3f){return _0x5b8c81(_0x9f9e3f);}if(!_0xd56a5d){_0x3a724c['flash']('errors',_0x285dac[a5_0x1df4('0x1b')]);return _0x10c910[a5_0x1df4('0x18')](a5_0x1df4('0x1c'));}_0x3a724c[a5_0x1df4('0x1d')](_0xd56a5d,_0x9f9e3f=>{if(_0x9f9e3f){return _0x5b8c81(_0x9f9e3f);}_0x3a724c[a5_0x1df4('0x16')](a5_0x1df4('0x1e'),{'msg':a5_0x1df4('0x1f')});_0x10c910[a5_0x1df4('0x18')](_0x3a724c[a5_0x1df4('0x20')][a5_0x1df4('0x21')]||'/');});})(_0x3a724c,_0x10c910,_0x5b8c81);};exports[a5_0x1df4('0x22')]=(_0x26bf7b,_0x3432e4)=>{_0x26bf7b[a5_0x1df4('0x22')]();_0x3432e4['redirect']('/');};exports[a5_0x1df4('0x23')]=(_0x553163,_0x278a28)=>{if(_0x553163[a5_0x1df4('0x8')]){return _0x278a28[a5_0x1df4('0x18')]('/');}_0x278a28['render'](a5_0x1df4('0x24'),{'title':a5_0x1df4('0x25')});};exports[a5_0x1df4('0x26')]=(_0x20000b,_0x3f977c,_0x1b7f07)=>{_0x20000b['assert'](a5_0x1df4('0xe'),a5_0x1df4('0xf'))[a5_0x1df4('0x10')]();_0x20000b[a5_0x1df4('0xd')](a5_0x1df4('0x11'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x1df4('0x27')]({'min':0x4});_0x20000b[a5_0x1df4('0xd')](a5_0x1df4('0x28'),'Passwords\x20do\x20not\x20match')['equals'](_0x20000b[a5_0x1df4('0x29')][a5_0x1df4('0x11')]);_0x20000b[a5_0x1df4('0x13')](a5_0x1df4('0xe'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2b8f1a=_0x20000b[a5_0x1df4('0x15')]();if(_0x2b8f1a){_0x20000b[a5_0x1df4('0x16')](a5_0x1df4('0x17'),_0x2b8f1a);return _0x3f977c[a5_0x1df4('0x18')](a5_0x1df4('0x2a'));}const _0xf0a56c=new User_1['default']({});User_1[a5_0x1df4('0x2b')][a5_0x1df4('0x2c')]({'email':_0x20000b[a5_0x1df4('0x29')][a5_0x1df4('0xe')]},(_0x4b7cf2,_0x3fb190)=>{if(_0x4b7cf2){return _0x1b7f07(_0x4b7cf2);}if(_0x3fb190){_0x20000b['flash'](a5_0x1df4('0x17'),{'msg':a5_0x1df4('0x2d')});return _0x3f977c[a5_0x1df4('0x18')]('/signup');}_0xf0a56c[a5_0x1df4('0x2e')](_0x4b7cf2=>{if(_0x4b7cf2){return _0x1b7f07(_0x4b7cf2);}_0x20000b[a5_0x1df4('0x1d')](_0xf0a56c,_0x4b7cf2=>{if(_0x4b7cf2){return _0x1b7f07(_0x4b7cf2);}_0x3f977c[a5_0x1df4('0x18')]('/');});});});};exports[a5_0x1df4('0x2f')]=(_0x42e2a5,_0x19364e)=>{_0x19364e['render'](a5_0x1df4('0x30'),{'title':a5_0x1df4('0x31')});};exports[a5_0x1df4('0x32')]=(_0x51a49c,_0x52dd8b,_0x359cab)=>{_0x51a49c['assert'](a5_0x1df4('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x1df4('0x10')]();_0x51a49c[a5_0x1df4('0x13')]('email')[a5_0x1df4('0x14')]({'gmail_remove_dots':![]});const _0x5403f8=_0x51a49c['validationErrors']();if(_0x5403f8){_0x51a49c[a5_0x1df4('0x16')](a5_0x1df4('0x17'),_0x5403f8);return _0x52dd8b[a5_0x1df4('0x18')](a5_0x1df4('0x33'));}User_1[a5_0x1df4('0x2b')][a5_0x1df4('0x34')](_0x51a49c['user']['id'],(_0x521be7,_0x53dd49)=>{if(_0x521be7){return _0x359cab(_0x521be7);}_0x53dd49[a5_0x1df4('0xe')]=_0x51a49c['body'][a5_0x1df4('0xe')]||'';_0x53dd49['profile'][a5_0x1df4('0x35')]=_0x51a49c['body'][a5_0x1df4('0x35')]||'';_0x53dd49['profile'][a5_0x1df4('0x36')]=_0x51a49c[a5_0x1df4('0x29')][a5_0x1df4('0x36')]||'';_0x53dd49[a5_0x1df4('0x37')][a5_0x1df4('0x38')]=_0x51a49c['body']['location']||'';_0x53dd49[a5_0x1df4('0x37')][a5_0x1df4('0x39')]=_0x51a49c[a5_0x1df4('0x29')][a5_0x1df4('0x39')]||'';_0x53dd49[a5_0x1df4('0x2e')](_0x521be7=>{if(_0x521be7){if(_0x521be7['code']===0x2af8){_0x51a49c[a5_0x1df4('0x16')](a5_0x1df4('0x17'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x52dd8b[a5_0x1df4('0x18')](a5_0x1df4('0x33'));}return _0x359cab(_0x521be7);}_0x51a49c[a5_0x1df4('0x16')](a5_0x1df4('0x1e'),{'msg':a5_0x1df4('0x3a')});_0x52dd8b[a5_0x1df4('0x18')](a5_0x1df4('0x33'));});});};exports[a5_0x1df4('0x3b')]=(_0x296ca8,_0x106eb9,_0x28e2b5)=>{_0x296ca8[a5_0x1df4('0xd')](a5_0x1df4('0x11'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x296ca8['assert'](a5_0x1df4('0x28'),a5_0x1df4('0x3c'))[a5_0x1df4('0x3d')](_0x296ca8[a5_0x1df4('0x29')][a5_0x1df4('0x11')]);const _0x29460c=_0x296ca8['validationErrors']();if(_0x29460c){_0x296ca8[a5_0x1df4('0x16')](a5_0x1df4('0x17'),_0x29460c);return _0x106eb9[a5_0x1df4('0x18')]('/account');}User_1['default'][a5_0x1df4('0x34')](_0x296ca8['user']['id'],(_0x181787,_0x25ba26)=>{if(_0x181787){return _0x28e2b5(_0x181787);}_0x25ba26[a5_0x1df4('0x11')]=_0x296ca8[a5_0x1df4('0x29')]['password'];_0x25ba26[a5_0x1df4('0x2e')](_0x181787=>{if(_0x181787){return _0x28e2b5(_0x181787);}_0x296ca8[a5_0x1df4('0x16')](a5_0x1df4('0x1e'),{'msg':'Password\x20has\x20been\x20changed.'});_0x106eb9[a5_0x1df4('0x18')]('/account');});});};exports[a5_0x1df4('0x3e')]=(_0x3f7f75,_0x34d0ca,_0x339f35)=>{User_1[a5_0x1df4('0x2b')][a5_0x1df4('0x3f')]({'_id':_0x3f7f75[a5_0x1df4('0x8')]['id']},_0x16b469=>{if(_0x16b469){return _0x339f35(_0x16b469);}_0x3f7f75[a5_0x1df4('0x22')]();_0x3f7f75['flash']('info',{'msg':a5_0x1df4('0x40')});_0x34d0ca['redirect']('/');});};exports['getOauthUnlink']=(_0x5c6a41,_0x11a90a,_0x964b76)=>{const _0x3cabd4=_0x5c6a41[a5_0x1df4('0x41')]['provider'];User_1[a5_0x1df4('0x2b')]['findById'](_0x5c6a41[a5_0x1df4('0x8')]['id'],(_0x5ae138,_0x166c26)=>{if(_0x5ae138){return _0x964b76(_0x5ae138);}_0x166c26[_0x3cabd4]=undefined;_0x166c26[a5_0x1df4('0x42')]=_0x166c26[a5_0x1df4('0x42')][a5_0x1df4('0x43')](_0x3762bd=>_0x3762bd['kind']!==_0x3cabd4);_0x166c26[a5_0x1df4('0x2e')](_0x5ae138=>{if(_0x5ae138){return _0x964b76(_0x5ae138);}_0x5c6a41['flash']('info',{'msg':_0x3cabd4+a5_0x1df4('0x44')});_0x11a90a['redirect'](a5_0x1df4('0x33'));});});};exports[a5_0x1df4('0x45')]=(_0x17b9ec,_0x315b9f,_0x367112)=>{if(_0x17b9ec[a5_0x1df4('0x46')]()){return _0x315b9f[a5_0x1df4('0x18')]('/');}User_1[a5_0x1df4('0x2b')][a5_0x1df4('0x2c')]({'passwordResetToken':_0x17b9ec[a5_0x1df4('0x41')][a5_0x1df4('0x47')]})['where'](a5_0x1df4('0x48'))['gt'](Date[a5_0x1df4('0x49')]())['exec']((_0x5175f8,_0x56d7ce)=>{if(_0x5175f8){return _0x367112(_0x5175f8);}if(!_0x56d7ce){_0x17b9ec[a5_0x1df4('0x16')](a5_0x1df4('0x17'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x315b9f[a5_0x1df4('0x18')](a5_0x1df4('0x4a'));}_0x315b9f[a5_0x1df4('0x9')](a5_0x1df4('0x4b'),{'title':a5_0x1df4('0x4c')});});};exports[a5_0x1df4('0x4d')]=(_0x22b1fc,_0x490b95,_0x2df52e)=>{_0x22b1fc[a5_0x1df4('0xd')]('password',a5_0x1df4('0x4e'))[a5_0x1df4('0x27')]({'min':0x4});_0x22b1fc[a5_0x1df4('0xd')](a5_0x1df4('0x4f'),a5_0x1df4('0x50'))[a5_0x1df4('0x3d')](_0x22b1fc[a5_0x1df4('0x29')][a5_0x1df4('0x11')]);const _0x19b82d=_0x22b1fc[a5_0x1df4('0x15')]();if(_0x19b82d){_0x22b1fc[a5_0x1df4('0x16')](a5_0x1df4('0x17'),_0x19b82d);return _0x490b95[a5_0x1df4('0x18')](a5_0x1df4('0x51'));}async_1[a5_0x1df4('0x2b')][a5_0x1df4('0x52')]([function resetPassword(_0x3cb26f){User_1[a5_0x1df4('0x2b')][a5_0x1df4('0x2c')]({'passwordResetToken':_0x22b1fc[a5_0x1df4('0x41')]['token']})[a5_0x1df4('0x53')](a5_0x1df4('0x48'))['gt'](Date[a5_0x1df4('0x49')]())['exec']((_0x22af48,_0x5ed624)=>{if(_0x22af48){return _0x2df52e(_0x22af48);}if(!_0x5ed624){_0x22b1fc[a5_0x1df4('0x16')](a5_0x1df4('0x17'),{'msg':a5_0x1df4('0x54')});return _0x490b95[a5_0x1df4('0x18')](a5_0x1df4('0x51'));}_0x5ed624[a5_0x1df4('0x11')]=_0x22b1fc[a5_0x1df4('0x29')][a5_0x1df4('0x11')];_0x5ed624[a5_0x1df4('0x55')]=undefined;_0x5ed624['passwordResetExpires']=undefined;_0x5ed624[a5_0x1df4('0x2e')](_0x22af48=>{if(_0x22af48){return _0x2df52e(_0x22af48);}_0x22b1fc[a5_0x1df4('0x1d')](_0x5ed624,_0x22af48=>{_0x3cb26f(_0x22af48,_0x5ed624);});});});},function sendResetPasswordEmail(_0x46a922,_0x55221f){const _0x466516=nodemailer_1[a5_0x1df4('0x2b')]['createTransport']({'service':a5_0x1df4('0x56'),'auth':{'user':process[a5_0x1df4('0x57')]['SENDGRID_USER'],'pass':process['env'][a5_0x1df4('0x58')]}});const _0x1274b0={'to':_0x46a922[a5_0x1df4('0xe')],'from':a5_0x1df4('0x59'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x1df4('0x5a')+_0x46a922[a5_0x1df4('0xe')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x466516[a5_0x1df4('0x5b')](_0x1274b0,_0x486b5a=>{_0x22b1fc[a5_0x1df4('0x16')](a5_0x1df4('0x1e'),{'msg':a5_0x1df4('0x5c')});_0x55221f(_0x486b5a);});}],_0x11261a=>{if(_0x11261a){return _0x2df52e(_0x11261a);}_0x490b95[a5_0x1df4('0x18')]('/');});};exports[a5_0x1df4('0x5d')]=(_0x1c9639,_0x25bdaa)=>{if(_0x1c9639[a5_0x1df4('0x46')]()){return _0x25bdaa[a5_0x1df4('0x18')]('/');}_0x25bdaa['render'](a5_0x1df4('0x5e'),{'title':a5_0x1df4('0x5f')});};exports[a5_0x1df4('0x60')]=(_0x36dcda,_0x4d027e,_0x5a038a)=>{_0x36dcda[a5_0x1df4('0xd')](a5_0x1df4('0xe'),a5_0x1df4('0x61'))[a5_0x1df4('0x10')]();_0x36dcda[a5_0x1df4('0x13')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x1166c9=_0x36dcda[a5_0x1df4('0x15')]();if(_0x1166c9){_0x36dcda['flash'](a5_0x1df4('0x17'),_0x1166c9);return _0x4d027e[a5_0x1df4('0x18')](a5_0x1df4('0x4a'));}async_1['default'][a5_0x1df4('0x52')]([function createRandomToken(_0x2bd845){crypto_1[a5_0x1df4('0x2b')][a5_0x1df4('0x62')](0x10,(_0x4b7445,_0x32d552)=>{const _0x26129c=_0x32d552[a5_0x1df4('0x63')](a5_0x1df4('0x64'));_0x2bd845(_0x4b7445,_0x26129c);});},function setRandomToken(_0x20c120,_0x1ecf97){User_1[a5_0x1df4('0x2b')][a5_0x1df4('0x2c')]({'email':_0x36dcda[a5_0x1df4('0x29')][a5_0x1df4('0xe')]},(_0x45ad1e,_0x4e04f4)=>{if(_0x45ad1e){return _0x1ecf97(_0x45ad1e);}if(!_0x4e04f4){_0x36dcda[a5_0x1df4('0x16')]('errors',{'msg':a5_0x1df4('0x65')});return _0x4d027e[a5_0x1df4('0x18')]('/forgot');}_0x4e04f4[a5_0x1df4('0x55')]=_0x20c120;_0x4e04f4['passwordResetExpires']=Date['now']()+0x36ee80;_0x4e04f4[a5_0x1df4('0x2e')](_0x45ad1e=>{_0x1ecf97(_0x45ad1e,_0x20c120,_0x4e04f4);});});},function sendForgotPasswordEmail(_0x32d11b,_0x47c464,_0x533f8c){const _0x5a4716=nodemailer_1[a5_0x1df4('0x2b')][a5_0x1df4('0x66')]({'service':'SendGrid','auth':{'user':process[a5_0x1df4('0x57')][a5_0x1df4('0x67')],'pass':process[a5_0x1df4('0x57')][a5_0x1df4('0x58')]}});const _0x6e1837={'to':_0x47c464[a5_0x1df4('0xe')],'from':'hackathon@starter.com','subject':a5_0x1df4('0x68'),'text':a5_0x1df4('0x69')+_0x36dcda[a5_0x1df4('0x6a')]['host']+a5_0x1df4('0x6b')+_0x32d11b+a5_0x1df4('0x6c')};_0x5a4716[a5_0x1df4('0x5b')](_0x6e1837,_0x577eaa=>{_0x36dcda[a5_0x1df4('0x16')](a5_0x1df4('0x6d'),{'msg':a5_0x1df4('0x6e')+_0x47c464[a5_0x1df4('0xe')]+'\x20with\x20further\x20instructions.'});_0x533f8c(_0x577eaa);});}],_0x286a40=>{if(_0x286a40){return _0x5a038a(_0x286a40);}_0x4d027e[a5_0x1df4('0x18')](a5_0x1df4('0x4a'));});};