var a5_0x5242=['code','/account','success','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','findById','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','getOauthUnlink','params','provider','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','where','passwordResetExpires','now','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','Passwords\x20must\x20match.','waterfall','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','back','createTransport','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','Forgot\x20Password','postForgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','passwordResetToken','hackathon@starter.com','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','../models/User','express-validator','getLogin','redirect','render','account/login','assert','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','local','message','logIn','session','returnTo','logout','user','account/signup','Create\x20Account','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','equals','body','/signup','default','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','name','profile','gender','location','website'];(function(_0x2243af,_0x1c73b4){var _0xd17fdf=function(_0x27659f){while(--_0x27659f){_0x2243af['push'](_0x2243af['shift']());}};_0xd17fdf(++_0x1c73b4);}(a5_0x5242,0xa2));var a5_0x2777=function(_0x1f68dc,_0x44749c){_0x1f68dc=_0x1f68dc-0x0;var _0x154dd4=a5_0x5242[_0x1f68dc];return _0x154dd4;};'use strict';var __importDefault=this&&this[a5_0x2777('0x0')]||function(_0x3260d4){return _0x3260d4&&_0x3260d4[a5_0x2777('0x1')]?_0x3260d4:{'default':_0x3260d4};};Object[a5_0x2777('0x2')](exports,a5_0x2777('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x2777('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x2777('0x4')));const request=require(a5_0x2777('0x5'));exports[a5_0x2777('0x6')]=(_0x56c60c,_0x4915df)=>{if(_0x56c60c['user']){return _0x4915df[a5_0x2777('0x7')]('/');}_0x4915df[a5_0x2777('0x8')](a5_0x2777('0x9'),{'title':'Login'});};exports['postLogin']=(_0x465754,_0x1f5d08,_0x5166b4)=>{_0x465754[a5_0x2777('0xa')](a5_0x2777('0xb'),a5_0x2777('0xc'))['isEmail']();_0x465754[a5_0x2777('0xa')](a5_0x2777('0xd'),a5_0x2777('0xe'))[a5_0x2777('0xf')]();_0x465754[a5_0x2777('0x10')](a5_0x2777('0xb'))[a5_0x2777('0x11')]({'gmail_remove_dots':![]});const _0x5bbec7=_0x465754[a5_0x2777('0x12')]();if(_0x5bbec7){_0x465754[a5_0x2777('0x13')](a5_0x2777('0x14'),_0x5bbec7);return _0x1f5d08[a5_0x2777('0x7')](a5_0x2777('0x15'));}passport_1['default']['authenticate'](a5_0x2777('0x16'),(_0x4bc890,_0x330946,_0x582e00)=>{if(_0x4bc890){return _0x5166b4(_0x4bc890);}if(!_0x330946){_0x465754[a5_0x2777('0x13')](a5_0x2777('0x14'),_0x582e00[a5_0x2777('0x17')]);return _0x1f5d08[a5_0x2777('0x7')](a5_0x2777('0x15'));}_0x465754[a5_0x2777('0x18')](_0x330946,_0x4bc890=>{if(_0x4bc890){return _0x5166b4(_0x4bc890);}_0x465754[a5_0x2777('0x13')]('success',{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x1f5d08[a5_0x2777('0x7')](_0x465754[a5_0x2777('0x19')][a5_0x2777('0x1a')]||'/');});})(_0x465754,_0x1f5d08,_0x5166b4);};exports[a5_0x2777('0x1b')]=(_0xc4ebc2,_0x58c69a)=>{_0xc4ebc2['logout']();_0x58c69a[a5_0x2777('0x7')]('/');};exports['getSignup']=(_0x5af77f,_0x3245b2)=>{if(_0x5af77f[a5_0x2777('0x1c')]){return _0x3245b2[a5_0x2777('0x7')]('/');}_0x3245b2[a5_0x2777('0x8')](a5_0x2777('0x1d'),{'title':a5_0x2777('0x1e')});};exports['postSignup']=(_0x167411,_0x58bed2,_0x10bd95)=>{_0x167411[a5_0x2777('0xa')]('email',a5_0x2777('0xc'))[a5_0x2777('0x1f')]();_0x167411[a5_0x2777('0xa')](a5_0x2777('0xd'),a5_0x2777('0x20'))[a5_0x2777('0x21')]({'min':0x4});_0x167411[a5_0x2777('0xa')]('confirmPassword',a5_0x2777('0x22'))[a5_0x2777('0x23')](_0x167411[a5_0x2777('0x24')][a5_0x2777('0xd')]);_0x167411[a5_0x2777('0x10')](a5_0x2777('0xb'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x51f2af=_0x167411[a5_0x2777('0x12')]();if(_0x51f2af){_0x167411[a5_0x2777('0x13')](a5_0x2777('0x14'),_0x51f2af);return _0x58bed2[a5_0x2777('0x7')](a5_0x2777('0x25'));}const _0x18223e=new User_1[(a5_0x2777('0x26'))]({'email':_0x167411[a5_0x2777('0x24')]['email'],'password':_0x167411['body'][a5_0x2777('0xd')]});User_1[a5_0x2777('0x26')]['findOne']({'email':_0x167411[a5_0x2777('0x24')][a5_0x2777('0xb')]},(_0x214d12,_0x2aaae9)=>{if(_0x214d12){return _0x10bd95(_0x214d12);}if(_0x2aaae9){_0x167411['flash'](a5_0x2777('0x14'),{'msg':a5_0x2777('0x27')});return _0x58bed2[a5_0x2777('0x7')](a5_0x2777('0x25'));}_0x18223e[a5_0x2777('0x28')](_0x214d12=>{if(_0x214d12){return _0x10bd95(_0x214d12);}_0x167411[a5_0x2777('0x18')](_0x18223e,_0x214d12=>{if(_0x214d12){return _0x10bd95(_0x214d12);}_0x58bed2[a5_0x2777('0x7')]('/');});});});};exports['getAccount']=(_0x35d887,_0x5c4625)=>{_0x5c4625[a5_0x2777('0x8')](a5_0x2777('0x29'),{'title':a5_0x2777('0x2a')});};exports[a5_0x2777('0x2b')]=(_0x35bcd7,_0x2c39f3,_0x108281)=>{_0x35bcd7[a5_0x2777('0xa')](a5_0x2777('0xb'),a5_0x2777('0x2c'))[a5_0x2777('0x1f')]();_0x35bcd7[a5_0x2777('0x10')](a5_0x2777('0xb'))[a5_0x2777('0x11')]({'gmail_remove_dots':![]});const _0x4d7a1f=_0x35bcd7[a5_0x2777('0x12')]();if(_0x4d7a1f){_0x35bcd7[a5_0x2777('0x13')](a5_0x2777('0x14'),_0x4d7a1f);return _0x2c39f3[a5_0x2777('0x7')]('/account');}User_1[a5_0x2777('0x26')]['findById'](_0x35bcd7[a5_0x2777('0x1c')]['id'],(_0x53bf0c,_0x617b26)=>{if(_0x53bf0c){return _0x108281(_0x53bf0c);}_0x617b26[a5_0x2777('0xb')]=_0x35bcd7['body'][a5_0x2777('0xb')]||'';_0x617b26['profile']['name']=_0x35bcd7[a5_0x2777('0x24')][a5_0x2777('0x2d')]||'';_0x617b26[a5_0x2777('0x2e')][a5_0x2777('0x2f')]=_0x35bcd7[a5_0x2777('0x24')]['gender']||'';_0x617b26[a5_0x2777('0x2e')][a5_0x2777('0x30')]=_0x35bcd7[a5_0x2777('0x24')][a5_0x2777('0x30')]||'';_0x617b26[a5_0x2777('0x2e')][a5_0x2777('0x31')]=_0x35bcd7['body'][a5_0x2777('0x31')]||'';_0x617b26[a5_0x2777('0x28')](_0x53bf0c=>{if(_0x53bf0c){if(_0x53bf0c[a5_0x2777('0x32')]===0x2af8){_0x35bcd7['flash'](a5_0x2777('0x14'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x2c39f3[a5_0x2777('0x7')](a5_0x2777('0x33'));}return _0x108281(_0x53bf0c);}_0x35bcd7[a5_0x2777('0x13')](a5_0x2777('0x34'),{'msg':a5_0x2777('0x35')});_0x2c39f3['redirect']('/account');});});};exports[a5_0x2777('0x36')]=(_0x31b67f,_0x4e3bd1,_0x432004)=>{_0x31b67f[a5_0x2777('0xa')](a5_0x2777('0xd'),a5_0x2777('0x20'))[a5_0x2777('0x21')]({'min':0x4});_0x31b67f[a5_0x2777('0xa')](a5_0x2777('0x37'),'Passwords\x20do\x20not\x20match')[a5_0x2777('0x23')](_0x31b67f[a5_0x2777('0x24')][a5_0x2777('0xd')]);const _0x23f901=_0x31b67f['validationErrors']();if(_0x23f901){_0x31b67f['flash'](a5_0x2777('0x14'),_0x23f901);return _0x4e3bd1[a5_0x2777('0x7')](a5_0x2777('0x33'));}User_1['default'][a5_0x2777('0x38')](_0x31b67f[a5_0x2777('0x1c')]['id'],(_0x102e6d,_0x411526)=>{if(_0x102e6d){return _0x432004(_0x102e6d);}_0x411526[a5_0x2777('0xd')]=_0x31b67f[a5_0x2777('0x24')][a5_0x2777('0xd')];_0x411526[a5_0x2777('0x28')](_0x102e6d=>{if(_0x102e6d){return _0x432004(_0x102e6d);}_0x31b67f[a5_0x2777('0x13')](a5_0x2777('0x34'),{'msg':a5_0x2777('0x39')});_0x4e3bd1[a5_0x2777('0x7')](a5_0x2777('0x33'));});});};exports[a5_0x2777('0x3a')]=(_0x492e5e,_0x348fde,_0x3e49e4)=>{User_1[a5_0x2777('0x26')][a5_0x2777('0x3b')]({'_id':_0x492e5e[a5_0x2777('0x1c')]['id']},_0x3fe965=>{if(_0x3fe965){return _0x3e49e4(_0x3fe965);}_0x492e5e[a5_0x2777('0x1b')]();_0x492e5e[a5_0x2777('0x13')](a5_0x2777('0x3c'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x348fde[a5_0x2777('0x7')]('/');});};exports[a5_0x2777('0x3d')]=(_0x1389c4,_0x23158a,_0x75cbbe)=>{const _0x5e1b71=_0x1389c4[a5_0x2777('0x3e')][a5_0x2777('0x3f')];User_1['default']['findById'](_0x1389c4[a5_0x2777('0x1c')]['id'],(_0x3e6b79,_0x3963b7)=>{if(_0x3e6b79){return _0x75cbbe(_0x3e6b79);}_0x3963b7[_0x5e1b71]=undefined;_0x3963b7['tokens']=_0x3963b7[a5_0x2777('0x40')]['filter'](_0x577f1d=>_0x577f1d[a5_0x2777('0x41')]!==_0x5e1b71);_0x3963b7['save'](_0x3e6b79=>{if(_0x3e6b79){return _0x75cbbe(_0x3e6b79);}_0x1389c4[a5_0x2777('0x13')]('info',{'msg':_0x5e1b71+a5_0x2777('0x42')});_0x23158a[a5_0x2777('0x7')](a5_0x2777('0x33'));});});};exports[a5_0x2777('0x43')]=(_0x17eef2,_0x3fda02,_0x5ef4dc)=>{if(_0x17eef2[a5_0x2777('0x44')]()){return _0x3fda02[a5_0x2777('0x7')]('/');}User_1[a5_0x2777('0x26')][a5_0x2777('0x45')]({'passwordResetToken':_0x17eef2['params'][a5_0x2777('0x46')]})[a5_0x2777('0x47')](a5_0x2777('0x48'))['gt'](Date[a5_0x2777('0x49')]())[a5_0x2777('0x4a')]((_0x121690,_0x1685f0)=>{if(_0x121690){return _0x5ef4dc(_0x121690);}if(!_0x1685f0){_0x17eef2[a5_0x2777('0x13')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x3fda02[a5_0x2777('0x7')](a5_0x2777('0x4b'));}_0x3fda02[a5_0x2777('0x8')](a5_0x2777('0x4c'),{'title':a5_0x2777('0x4d')});});};exports[a5_0x2777('0x4e')]=(_0xf2d7b0,_0x45fdc1,_0x2d4230)=>{_0xf2d7b0[a5_0x2777('0xa')](a5_0x2777('0xd'),a5_0x2777('0x4f'))[a5_0x2777('0x21')]({'min':0x4});_0xf2d7b0[a5_0x2777('0xa')]('confirm',a5_0x2777('0x50'))[a5_0x2777('0x23')](_0xf2d7b0['body'][a5_0x2777('0xd')]);const _0x24143=_0xf2d7b0['validationErrors']();if(_0x24143){_0xf2d7b0[a5_0x2777('0x13')]('errors',_0x24143);return _0x45fdc1[a5_0x2777('0x7')]('back');}async_1[a5_0x2777('0x26')][a5_0x2777('0x51')]([function resetPassword(_0x1d2265){User_1[a5_0x2777('0x26')][a5_0x2777('0x45')]({'passwordResetToken':_0xf2d7b0[a5_0x2777('0x3e')][a5_0x2777('0x46')]})[a5_0x2777('0x47')](a5_0x2777('0x48'))['gt'](Date[a5_0x2777('0x49')]())[a5_0x2777('0x4a')]((_0x428280,_0x89d15d)=>{if(_0x428280){return _0x2d4230(_0x428280);}if(!_0x89d15d){_0xf2d7b0[a5_0x2777('0x13')]('errors',{'msg':a5_0x2777('0x52')});return _0x45fdc1[a5_0x2777('0x7')](a5_0x2777('0x53'));}_0x89d15d[a5_0x2777('0xd')]=_0xf2d7b0[a5_0x2777('0x24')]['password'];_0x89d15d['passwordResetToken']=undefined;_0x89d15d['passwordResetExpires']=undefined;_0x89d15d['save'](_0x428280=>{if(_0x428280){return _0x2d4230(_0x428280);}_0xf2d7b0[a5_0x2777('0x18')](_0x89d15d,_0x428280=>{_0x1d2265(_0x428280,_0x89d15d);});});});},function sendResetPasswordEmail(_0x326757,_0x568ad0){const _0x1ca88c=nodemailer_1['default'][a5_0x2777('0x54')]({'service':a5_0x2777('0x55'),'auth':{'user':process['env'][a5_0x2777('0x56')],'pass':process[a5_0x2777('0x57')][a5_0x2777('0x58')]}});const _0x4dac2a={'to':_0x326757[a5_0x2777('0xb')],'from':'express-ts@starter.com','subject':a5_0x2777('0x59'),'text':a5_0x2777('0x5a')+_0x326757[a5_0x2777('0xb')]+a5_0x2777('0x5b')};_0x1ca88c[a5_0x2777('0x5c')](_0x4dac2a,_0x1ba46a=>{_0xf2d7b0[a5_0x2777('0x13')](a5_0x2777('0x34'),{'msg':a5_0x2777('0x5d')});_0x568ad0(_0x1ba46a);});}],_0x4e1824=>{if(_0x4e1824){return _0x2d4230(_0x4e1824);}_0x45fdc1[a5_0x2777('0x7')]('/');});};exports['getForgot']=(_0x2b9188,_0x511ddf)=>{if(_0x2b9188[a5_0x2777('0x44')]()){return _0x511ddf[a5_0x2777('0x7')]('/');}_0x511ddf[a5_0x2777('0x8')]('account/forgot',{'title':a5_0x2777('0x5e')});};exports[a5_0x2777('0x5f')]=(_0x508c0f,_0x1a5e50,_0xd3f67f)=>{_0x508c0f[a5_0x2777('0xa')]('email',a5_0x2777('0x2c'))['isEmail']();_0x508c0f['sanitize']('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x311d73=_0x508c0f[a5_0x2777('0x12')]();if(_0x311d73){_0x508c0f[a5_0x2777('0x13')](a5_0x2777('0x14'),_0x311d73);return _0x1a5e50[a5_0x2777('0x7')](a5_0x2777('0x4b'));}async_1[a5_0x2777('0x26')][a5_0x2777('0x51')]([function createRandomToken(_0x4b4730){crypto_1[a5_0x2777('0x26')][a5_0x2777('0x60')](0x10,(_0x36a156,_0x2a30af)=>{const _0x13f232=_0x2a30af[a5_0x2777('0x61')]('hex');_0x4b4730(_0x36a156,_0x13f232);});},function setRandomToken(_0x1a9e7f,_0x329964){User_1[a5_0x2777('0x26')][a5_0x2777('0x45')]({'email':_0x508c0f['body']['email']},(_0x3a0207,_0x14c06b)=>{if(_0x3a0207){return _0x329964(_0x3a0207);}if(!_0x14c06b){_0x508c0f[a5_0x2777('0x13')](a5_0x2777('0x14'),{'msg':a5_0x2777('0x62')});return _0x1a5e50[a5_0x2777('0x7')](a5_0x2777('0x4b'));}_0x14c06b[a5_0x2777('0x63')]=_0x1a9e7f;_0x14c06b[a5_0x2777('0x48')]=Date[a5_0x2777('0x49')]()+0x36ee80;_0x14c06b[a5_0x2777('0x28')](_0x3a0207=>{_0x329964(_0x3a0207,_0x1a9e7f,_0x14c06b);});});},function sendForgotPasswordEmail(_0x4f9cf8,_0x19142c,_0x2807a8){const _0x53a196=nodemailer_1[a5_0x2777('0x26')]['createTransport']({'service':a5_0x2777('0x55'),'auth':{'user':process[a5_0x2777('0x57')][a5_0x2777('0x56')],'pass':process['env'][a5_0x2777('0x58')]}});const _0xe0a8d8={'to':_0x19142c[a5_0x2777('0xb')],'from':a5_0x2777('0x64'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':a5_0x2777('0x65')+_0x508c0f[a5_0x2777('0x66')][a5_0x2777('0x67')]+'/reset/'+_0x4f9cf8+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x53a196[a5_0x2777('0x5c')](_0xe0a8d8,_0x582e59=>{_0x508c0f['flash'](a5_0x2777('0x3c'),{'msg':a5_0x2777('0x68')+_0x19142c[a5_0x2777('0xb')]+a5_0x2777('0x69')});_0x2807a8(_0x582e59);});}],_0x4bddd0=>{if(_0x4bddd0){return _0xd3f67f(_0x4bddd0);}_0x1a5e50[a5_0x2777('0x7')](a5_0x2777('0x4b'));});};