var a5_0xa262=['Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','account/signup','Email\x20is\x20not\x20valid','password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','normalizeEmail','errors','/signup','findOne','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','name','gender','profile','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','Password\x20has\x20been\x20changed.','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','info','\x20account\x20has\x20been\x20unlinked.','getReset','token','where','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','passwordResetExpires','exec','createTransport','SendGrid','env','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','postForgot','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_USER','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','../models/User','getLogin','user','redirect','render','account/login','Login','postLogin','assert','email','isEmail','notEmpty','sanitize','validationErrors','flash','/login','default','authenticate','message','logIn','success'];(function(_0xb479be,_0x4bb6ab){var _0x44c2ed=function(_0x39774b){while(--_0x39774b){_0xb479be['push'](_0xb479be['shift']());}};_0x44c2ed(++_0x4bb6ab);}(a5_0xa262,0x19d));var a5_0x570f=function(_0x1da51e,_0x2a74a4){_0x1da51e=_0x1da51e-0x0;var _0x46aae5=a5_0xa262[_0x1da51e];return _0x46aae5;};'use strict';var __importDefault=this&&this[a5_0x570f('0x0')]||function(_0x3e06d7){return _0x3e06d7&&_0x3e06d7[a5_0x570f('0x1')]?_0x3e06d7:{'default':_0x3e06d7};};Object[a5_0x570f('0x2')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x570f('0x3')));const nodemailer_1=__importDefault(require(a5_0x570f('0x4')));const passport_1=__importDefault(require(a5_0x570f('0x5')));const User_1=__importDefault(require(a5_0x570f('0x6')));const request=require('express-validator');exports[a5_0x570f('0x7')]=(_0x4184ad,_0x3c8264)=>{if(_0x4184ad[a5_0x570f('0x8')]){return _0x3c8264[a5_0x570f('0x9')]('/');}_0x3c8264[a5_0x570f('0xa')](a5_0x570f('0xb'),{'title':a5_0x570f('0xc')});};exports[a5_0x570f('0xd')]=(_0x407709,_0x1f5a55,_0x32f608)=>{_0x407709[a5_0x570f('0xe')](a5_0x570f('0xf'),'Email\x20is\x20not\x20valid')[a5_0x570f('0x10')]();_0x407709[a5_0x570f('0xe')]('password','Password\x20cannot\x20be\x20blank')[a5_0x570f('0x11')]();_0x407709[a5_0x570f('0x12')](a5_0x570f('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x40a2dc=_0x407709[a5_0x570f('0x13')]();if(_0x40a2dc){_0x407709[a5_0x570f('0x14')]('errors',_0x40a2dc);return _0x1f5a55[a5_0x570f('0x9')](a5_0x570f('0x15'));}passport_1[a5_0x570f('0x16')][a5_0x570f('0x17')]('local',(_0x58aa3f,_0x40c098,_0x434b4f)=>{if(_0x58aa3f){return _0x32f608(_0x58aa3f);}if(!_0x40c098){_0x407709[a5_0x570f('0x14')]('errors',_0x434b4f[a5_0x570f('0x18')]);return _0x1f5a55[a5_0x570f('0x9')](a5_0x570f('0x15'));}_0x407709[a5_0x570f('0x19')](_0x40c098,_0x58aa3f=>{if(_0x58aa3f){return _0x32f608(_0x58aa3f);}_0x407709[a5_0x570f('0x14')](a5_0x570f('0x1a'),{'msg':a5_0x570f('0x1b')});_0x1f5a55[a5_0x570f('0x9')](_0x407709['session'][a5_0x570f('0x1c')]||'/');});})(_0x407709,_0x1f5a55,_0x32f608);};exports['logout']=(_0x2b583c,_0x4b73fb)=>{_0x2b583c[a5_0x570f('0x1d')]();_0x4b73fb[a5_0x570f('0x9')]('/');};exports['getSignup']=(_0x30e922,_0x5292e6)=>{if(_0x30e922[a5_0x570f('0x8')]){return _0x5292e6[a5_0x570f('0x9')]('/');}_0x5292e6[a5_0x570f('0xa')](a5_0x570f('0x1e'),{'title':'Create\x20Account'});};exports['postSignup']=(_0x2adf8d,_0x40a39a,_0x300b22)=>{_0x2adf8d[a5_0x570f('0xe')](a5_0x570f('0xf'),a5_0x570f('0x1f'))[a5_0x570f('0x10')]();_0x2adf8d[a5_0x570f('0xe')](a5_0x570f('0x20'),a5_0x570f('0x21'))[a5_0x570f('0x22')]({'min':0x4});_0x2adf8d[a5_0x570f('0xe')](a5_0x570f('0x23'),a5_0x570f('0x24'))[a5_0x570f('0x25')](_0x2adf8d[a5_0x570f('0x26')][a5_0x570f('0x20')]);_0x2adf8d[a5_0x570f('0x12')](a5_0x570f('0xf'))[a5_0x570f('0x27')]({'gmail_remove_dots':![]});const _0x2be445=_0x2adf8d[a5_0x570f('0x13')]();if(_0x2be445){_0x2adf8d['flash'](a5_0x570f('0x28'),_0x2be445);return _0x40a39a[a5_0x570f('0x9')](a5_0x570f('0x29'));}const _0x1b3b2c=new User_1['default']({'email':_0x2adf8d[a5_0x570f('0x26')][a5_0x570f('0xf')],'password':_0x2adf8d[a5_0x570f('0x26')][a5_0x570f('0x20')]});User_1[a5_0x570f('0x16')][a5_0x570f('0x2a')]({'email':_0x2adf8d[a5_0x570f('0x26')][a5_0x570f('0xf')]},(_0x4d3520,_0x535af9)=>{if(_0x4d3520){return _0x300b22(_0x4d3520);}if(_0x535af9){_0x2adf8d[a5_0x570f('0x14')](a5_0x570f('0x28'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x40a39a[a5_0x570f('0x9')](a5_0x570f('0x29'));}_0x1b3b2c[a5_0x570f('0x2b')](_0x4d3520=>{if(_0x4d3520){return _0x300b22(_0x4d3520);}_0x2adf8d[a5_0x570f('0x19')](_0x1b3b2c,_0x4d3520=>{if(_0x4d3520){return _0x300b22(_0x4d3520);}_0x40a39a[a5_0x570f('0x9')]('/');});});});};exports[a5_0x570f('0x2c')]=(_0x244297,_0x257307)=>{_0x257307[a5_0x570f('0xa')](a5_0x570f('0x2d'),{'title':a5_0x570f('0x2e')});};exports[a5_0x570f('0x2f')]=(_0x5352d3,_0x1c579f,_0x2ba3e7)=>{_0x5352d3[a5_0x570f('0xe')](a5_0x570f('0xf'),a5_0x570f('0x30'))[a5_0x570f('0x10')]();_0x5352d3[a5_0x570f('0x12')](a5_0x570f('0xf'))[a5_0x570f('0x27')]({'gmail_remove_dots':![]});const _0x20aaf=_0x5352d3[a5_0x570f('0x13')]();if(_0x20aaf){_0x5352d3['flash'](a5_0x570f('0x28'),_0x20aaf);return _0x1c579f[a5_0x570f('0x9')](a5_0x570f('0x31'));}User_1['default'][a5_0x570f('0x32')](_0x5352d3[a5_0x570f('0x8')]['id'],(_0x4940f2,_0x2d9ccc)=>{if(_0x4940f2){return _0x2ba3e7(_0x4940f2);}_0x2d9ccc[a5_0x570f('0xf')]=_0x5352d3[a5_0x570f('0x26')]['email']||'';_0x2d9ccc['profile'][a5_0x570f('0x33')]=_0x5352d3[a5_0x570f('0x26')][a5_0x570f('0x33')]||'';_0x2d9ccc['profile']['gender']=_0x5352d3['body'][a5_0x570f('0x34')]||'';_0x2d9ccc[a5_0x570f('0x35')][a5_0x570f('0x36')]=_0x5352d3[a5_0x570f('0x26')][a5_0x570f('0x36')]||'';_0x2d9ccc['profile'][a5_0x570f('0x37')]=_0x5352d3[a5_0x570f('0x26')][a5_0x570f('0x37')]||'';_0x2d9ccc[a5_0x570f('0x2b')](_0x4940f2=>{if(_0x4940f2){if(_0x4940f2[a5_0x570f('0x38')]===0x2af8){_0x5352d3[a5_0x570f('0x14')]('errors',{'msg':a5_0x570f('0x39')});return _0x1c579f[a5_0x570f('0x9')](a5_0x570f('0x31'));}return _0x2ba3e7(_0x4940f2);}_0x5352d3[a5_0x570f('0x14')](a5_0x570f('0x1a'),{'msg':a5_0x570f('0x3a')});_0x1c579f[a5_0x570f('0x9')]('/account');});});};exports['postUpdatePassword']=(_0x3a650b,_0x58728a,_0x395524)=>{_0x3a650b[a5_0x570f('0xe')]('password',a5_0x570f('0x21'))[a5_0x570f('0x22')]({'min':0x4});_0x3a650b['assert']('confirmPassword',a5_0x570f('0x24'))[a5_0x570f('0x25')](_0x3a650b[a5_0x570f('0x26')][a5_0x570f('0x20')]);const _0x595f9b=_0x3a650b[a5_0x570f('0x13')]();if(_0x595f9b){_0x3a650b['flash']('errors',_0x595f9b);return _0x58728a[a5_0x570f('0x9')]('/account');}User_1[a5_0x570f('0x16')][a5_0x570f('0x32')](_0x3a650b[a5_0x570f('0x8')]['id'],(_0x567db8,_0x4b6e3d)=>{if(_0x567db8){return _0x395524(_0x567db8);}_0x4b6e3d[a5_0x570f('0x20')]=_0x3a650b[a5_0x570f('0x26')]['password'];_0x4b6e3d['save'](_0x567db8=>{if(_0x567db8){return _0x395524(_0x567db8);}_0x3a650b['flash'](a5_0x570f('0x1a'),{'msg':a5_0x570f('0x3b')});_0x58728a[a5_0x570f('0x9')](a5_0x570f('0x31'));});});};exports['postDeleteAccount']=(_0x17c873,_0x101758,_0x4f463f)=>{User_1[a5_0x570f('0x16')]['remove']({'_id':_0x17c873[a5_0x570f('0x8')]['id']},_0x4bd4d5=>{if(_0x4bd4d5){return _0x4f463f(_0x4bd4d5);}_0x17c873[a5_0x570f('0x1d')]();_0x17c873[a5_0x570f('0x14')]('info',{'msg':a5_0x570f('0x3c')});_0x101758[a5_0x570f('0x9')]('/');});};exports[a5_0x570f('0x3d')]=(_0x4246d0,_0x523c36,_0x48aeba)=>{const _0x5e85b6=_0x4246d0[a5_0x570f('0x3e')][a5_0x570f('0x3f')];User_1[a5_0x570f('0x16')][a5_0x570f('0x32')](_0x4246d0[a5_0x570f('0x8')]['id'],(_0x121cc9,_0x2fa1f4)=>{if(_0x121cc9){return _0x48aeba(_0x121cc9);}_0x2fa1f4[_0x5e85b6]=undefined;_0x2fa1f4['tokens']=_0x2fa1f4[a5_0x570f('0x40')][a5_0x570f('0x41')](_0xb019cc=>_0xb019cc['kind']!==_0x5e85b6);_0x2fa1f4[a5_0x570f('0x2b')](_0x121cc9=>{if(_0x121cc9){return _0x48aeba(_0x121cc9);}_0x4246d0[a5_0x570f('0x14')](a5_0x570f('0x42'),{'msg':_0x5e85b6+a5_0x570f('0x43')});_0x523c36[a5_0x570f('0x9')]('/account');});});};exports[a5_0x570f('0x44')]=(_0x2c6c21,_0x5debd2,_0x3bca05)=>{if(_0x2c6c21['isAuthenticated']()){return _0x5debd2[a5_0x570f('0x9')]('/');}User_1[a5_0x570f('0x16')][a5_0x570f('0x2a')]({'passwordResetToken':_0x2c6c21[a5_0x570f('0x3e')][a5_0x570f('0x45')]})[a5_0x570f('0x46')]('passwordResetExpires')['gt'](Date[a5_0x570f('0x47')]())['exec']((_0x542919,_0xf7f4ce)=>{if(_0x542919){return _0x3bca05(_0x542919);}if(!_0xf7f4ce){_0x2c6c21[a5_0x570f('0x14')](a5_0x570f('0x28'),{'msg':a5_0x570f('0x48')});return _0x5debd2[a5_0x570f('0x9')](a5_0x570f('0x49'));}_0x5debd2['render'](a5_0x570f('0x4a'),{'title':a5_0x570f('0x4b')});});};exports['postReset']=(_0x4deba2,_0x166b5a,_0x947f50)=>{_0x4deba2[a5_0x570f('0xe')]('password',a5_0x570f('0x4c'))[a5_0x570f('0x22')]({'min':0x4});_0x4deba2[a5_0x570f('0xe')](a5_0x570f('0x4d'),a5_0x570f('0x4e'))[a5_0x570f('0x25')](_0x4deba2[a5_0x570f('0x26')][a5_0x570f('0x20')]);const _0x4ab40e=_0x4deba2['validationErrors']();if(_0x4ab40e){_0x4deba2[a5_0x570f('0x14')](a5_0x570f('0x28'),_0x4ab40e);return _0x166b5a[a5_0x570f('0x9')](a5_0x570f('0x4f'));}async_1[a5_0x570f('0x16')][a5_0x570f('0x50')]([function resetPassword(_0x4c69f8){User_1['default'][a5_0x570f('0x2a')]({'passwordResetToken':_0x4deba2[a5_0x570f('0x3e')][a5_0x570f('0x45')]})[a5_0x570f('0x46')](a5_0x570f('0x51'))['gt'](Date[a5_0x570f('0x47')]())[a5_0x570f('0x52')]((_0x300fd5,_0x235a3e)=>{if(_0x300fd5){return _0x947f50(_0x300fd5);}if(!_0x235a3e){_0x4deba2[a5_0x570f('0x14')](a5_0x570f('0x28'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x166b5a['redirect'](a5_0x570f('0x4f'));}_0x235a3e[a5_0x570f('0x20')]=_0x4deba2[a5_0x570f('0x26')][a5_0x570f('0x20')];_0x235a3e['passwordResetToken']=undefined;_0x235a3e[a5_0x570f('0x51')]=undefined;_0x235a3e[a5_0x570f('0x2b')](_0x300fd5=>{if(_0x300fd5){return _0x947f50(_0x300fd5);}_0x4deba2[a5_0x570f('0x19')](_0x235a3e,_0x300fd5=>{_0x4c69f8(_0x300fd5,_0x235a3e);});});});},function sendResetPasswordEmail(_0x3ed7ea,_0xddb70a){const _0x5eefdf=nodemailer_1['default'][a5_0x570f('0x53')]({'service':a5_0x570f('0x54'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x570f('0x55')]['SENDGRID_PASSWORD']}});const _0x3d29d1={'to':_0x3ed7ea[a5_0x570f('0xf')],'from':a5_0x570f('0x56'),'subject':a5_0x570f('0x57'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x3ed7ea['email']+a5_0x570f('0x58')};_0x5eefdf[a5_0x570f('0x59')](_0x3d29d1,_0x57b68b=>{_0x4deba2[a5_0x570f('0x14')](a5_0x570f('0x1a'),{'msg':a5_0x570f('0x5a')});_0xddb70a(_0x57b68b);});}],_0x4cc17f=>{if(_0x4cc17f){return _0x947f50(_0x4cc17f);}_0x166b5a[a5_0x570f('0x9')]('/');});};exports[a5_0x570f('0x5b')]=(_0x4aa95b,_0x2f520a)=>{if(_0x4aa95b[a5_0x570f('0x5c')]()){return _0x2f520a[a5_0x570f('0x9')]('/');}_0x2f520a[a5_0x570f('0xa')](a5_0x570f('0x5d'),{'title':'Forgot\x20Password'});};exports[a5_0x570f('0x5e')]=(_0x4e46cb,_0x17773e,_0x515665)=>{_0x4e46cb[a5_0x570f('0xe')](a5_0x570f('0xf'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x570f('0x10')]();_0x4e46cb['sanitize'](a5_0x570f('0xf'))[a5_0x570f('0x27')]({'gmail_remove_dots':![]});const _0x100463=_0x4e46cb[a5_0x570f('0x13')]();if(_0x100463){_0x4e46cb['flash'](a5_0x570f('0x28'),_0x100463);return _0x17773e[a5_0x570f('0x9')]('/forgot');}async_1['default'][a5_0x570f('0x50')]([function createRandomToken(_0x1e0082){crypto_1[a5_0x570f('0x16')][a5_0x570f('0x5f')](0x10,(_0x2ff471,_0x2167ed)=>{const _0x274c29=_0x2167ed[a5_0x570f('0x60')](a5_0x570f('0x61'));_0x1e0082(_0x2ff471,_0x274c29);});},function setRandomToken(_0x52c84a,_0x3cd8a0){User_1[a5_0x570f('0x16')][a5_0x570f('0x2a')]({'email':_0x4e46cb[a5_0x570f('0x26')][a5_0x570f('0xf')]},(_0x4549bf,_0x18d2e2)=>{if(_0x4549bf){return _0x3cd8a0(_0x4549bf);}if(!_0x18d2e2){_0x4e46cb[a5_0x570f('0x14')]('errors',{'msg':a5_0x570f('0x62')});return _0x17773e['redirect']('/forgot');}_0x18d2e2['passwordResetToken']=_0x52c84a;_0x18d2e2[a5_0x570f('0x51')]=Date[a5_0x570f('0x47')]()+0x36ee80;_0x18d2e2['save'](_0x4549bf=>{_0x3cd8a0(_0x4549bf,_0x52c84a,_0x18d2e2);});});},function sendForgotPasswordEmail(_0x36bc2a,_0x35effa,_0x4211ac){const _0xc47bb2=nodemailer_1[a5_0x570f('0x16')][a5_0x570f('0x53')]({'service':a5_0x570f('0x54'),'auth':{'user':process[a5_0x570f('0x55')][a5_0x570f('0x63')],'pass':process[a5_0x570f('0x55')][a5_0x570f('0x64')]}});const _0x10450b={'to':_0x35effa[a5_0x570f('0xf')],'from':a5_0x570f('0x65'),'subject':a5_0x570f('0x66'),'text':a5_0x570f('0x67')+_0x4e46cb[a5_0x570f('0x68')][a5_0x570f('0x69')]+a5_0x570f('0x6a')+_0x36bc2a+a5_0x570f('0x6b')};_0xc47bb2[a5_0x570f('0x59')](_0x10450b,_0x563a82=>{_0x4e46cb['flash'](a5_0x570f('0x42'),{'msg':a5_0x570f('0x6c')+_0x35effa[a5_0x570f('0xf')]+a5_0x570f('0x6d')});_0x4211ac(_0x563a82);});}],_0x535cca=>{if(_0x535cca){return _0x515665(_0x535cca);}_0x17773e[a5_0x570f('0x9')](a5_0x570f('0x49'));});};