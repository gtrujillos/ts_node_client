var a5_0x2640=['getAccount','account/profile','Account\x20Management','/account','findById','profile','name','gender','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','render','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','len','confirm','Passwords\x20must\x20match.','waterfall','back','passwordResetToken','createTransport','env','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','SENDGRID_USER','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','nodemailer','passport','express-validator','getLogin','user','redirect','Login','postLogin','assert','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','Passwords\x20do\x20not\x20match','equals','body','/signup','email','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.'];(function(_0x135e7c,_0x10446f){var _0x148171=function(_0x345b8b){while(--_0x345b8b){_0x135e7c['push'](_0x135e7c['shift']());}};_0x148171(++_0x10446f);}(a5_0x2640,0x123));var a5_0x3f59=function(_0x589efd,_0x9711cc){_0x589efd=_0x589efd-0x0;var _0x58edd3=a5_0x2640[_0x589efd];return _0x58edd3;};'use strict';var __importDefault=this&&this[a5_0x3f59('0x0')]||function(_0x43ef4b){return _0x43ef4b&&_0x43ef4b[a5_0x3f59('0x1')]?_0x43ef4b:{'default':_0x43ef4b};};Object[a5_0x3f59('0x2')](exports,a5_0x3f59('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x3f59('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x3f59('0x4')));const passport_1=__importDefault(require(a5_0x3f59('0x5')));const User_1=__importDefault(require('../models/User'));const request=require(a5_0x3f59('0x6'));exports[a5_0x3f59('0x7')]=(_0x14b472,_0x2280e3)=>{if(_0x14b472[a5_0x3f59('0x8')]){return _0x2280e3[a5_0x3f59('0x9')]('/');}_0x2280e3['render']('account/login',{'title':a5_0x3f59('0xa')});};exports[a5_0x3f59('0xb')]=(_0x958730,_0xdf413,_0x225456)=>{_0x958730[a5_0x3f59('0xc')]('email',a5_0x3f59('0xd'))['isEmail']();_0x958730['assert'](a5_0x3f59('0xe'),a5_0x3f59('0xf'))['notEmpty']();_0x958730[a5_0x3f59('0x10')]('email')[a5_0x3f59('0x11')]({'gmail_remove_dots':![]});const _0x57d203=_0x958730[a5_0x3f59('0x12')]();if(_0x57d203){_0x958730[a5_0x3f59('0x13')](a5_0x3f59('0x14'),_0x57d203);return _0xdf413[a5_0x3f59('0x9')](a5_0x3f59('0x15'));}passport_1[a5_0x3f59('0x16')]['authenticate']('local',(_0x54104a,_0x49785f,_0x5df496)=>{if(_0x54104a){return _0x225456(_0x54104a);}if(!_0x49785f){_0x958730['flash'](a5_0x3f59('0x14'),_0x5df496['message']);return _0xdf413[a5_0x3f59('0x9')](a5_0x3f59('0x15'));}_0x958730[a5_0x3f59('0x17')](_0x49785f,_0x54104a=>{if(_0x54104a){return _0x225456(_0x54104a);}_0x958730[a5_0x3f59('0x13')](a5_0x3f59('0x18'),{'msg':a5_0x3f59('0x19')});_0xdf413[a5_0x3f59('0x9')](_0x958730[a5_0x3f59('0x1a')][a5_0x3f59('0x1b')]||'/');});})(_0x958730,_0xdf413,_0x225456);};exports[a5_0x3f59('0x1c')]=(_0x219af0,_0x50e762)=>{_0x219af0[a5_0x3f59('0x1c')]();_0x50e762[a5_0x3f59('0x9')]('/');};exports[a5_0x3f59('0x1d')]=(_0x3aa3d8,_0x4c5171)=>{if(_0x3aa3d8[a5_0x3f59('0x8')]){return _0x4c5171[a5_0x3f59('0x9')]('/');}_0x4c5171['render'](a5_0x3f59('0x1e'),{'title':a5_0x3f59('0x1f')});};exports[a5_0x3f59('0x20')]=(_0x6a849a,_0x41b24d,_0xe1fe69)=>{_0x6a849a['assert']('email','Email\x20is\x20not\x20valid')[a5_0x3f59('0x21')]();_0x6a849a[a5_0x3f59('0xc')](a5_0x3f59('0xe'),a5_0x3f59('0x22'))['len']({'min':0x4});_0x6a849a['assert']('confirmPassword',a5_0x3f59('0x23'))[a5_0x3f59('0x24')](_0x6a849a[a5_0x3f59('0x25')][a5_0x3f59('0xe')]);_0x6a849a['sanitize']('email')[a5_0x3f59('0x11')]({'gmail_remove_dots':![]});const _0x36abd9=_0x6a849a['validationErrors']();if(_0x36abd9){_0x6a849a[a5_0x3f59('0x13')](a5_0x3f59('0x14'),_0x36abd9);return _0x41b24d[a5_0x3f59('0x9')](a5_0x3f59('0x26'));}const _0x48b176=new User_1[(a5_0x3f59('0x16'))]({'email':_0x6a849a['body'][a5_0x3f59('0x27')],'password':_0x6a849a[a5_0x3f59('0x25')]['password']});User_1['default'][a5_0x3f59('0x28')]({'email':_0x6a849a[a5_0x3f59('0x25')][a5_0x3f59('0x27')]},(_0x35a2b2,_0x4e467e)=>{if(_0x35a2b2){return _0xe1fe69(_0x35a2b2);}if(_0x4e467e){_0x6a849a['flash'](a5_0x3f59('0x14'),{'msg':a5_0x3f59('0x29')});return _0x41b24d[a5_0x3f59('0x9')]('/signup');}_0x48b176['save'](_0x35a2b2=>{if(_0x35a2b2){return _0xe1fe69(_0x35a2b2);}_0x6a849a[a5_0x3f59('0x17')](_0x48b176,_0x35a2b2=>{if(_0x35a2b2){return _0xe1fe69(_0x35a2b2);}_0x41b24d[a5_0x3f59('0x9')]('/');});});});};exports[a5_0x3f59('0x2a')]=(_0x69e95,_0x32ca81)=>{_0x32ca81['render'](a5_0x3f59('0x2b'),{'title':a5_0x3f59('0x2c')});};exports['postUpdateProfile']=(_0x5be1f8,_0x1d466c,_0x2d534d)=>{_0x5be1f8[a5_0x3f59('0xc')](a5_0x3f59('0x27'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x3f59('0x21')]();_0x5be1f8['sanitize']('email')[a5_0x3f59('0x11')]({'gmail_remove_dots':![]});const _0x1a0e59=_0x5be1f8['validationErrors']();if(_0x1a0e59){_0x5be1f8[a5_0x3f59('0x13')]('errors',_0x1a0e59);return _0x1d466c[a5_0x3f59('0x9')](a5_0x3f59('0x2d'));}User_1[a5_0x3f59('0x16')][a5_0x3f59('0x2e')](_0x5be1f8['user']['id'],(_0x5322a8,_0x469016)=>{if(_0x5322a8){return _0x2d534d(_0x5322a8);}_0x469016['email']=_0x5be1f8['body'][a5_0x3f59('0x27')]||'';_0x469016[a5_0x3f59('0x2f')][a5_0x3f59('0x30')]=_0x5be1f8[a5_0x3f59('0x25')][a5_0x3f59('0x30')]||'';_0x469016[a5_0x3f59('0x2f')][a5_0x3f59('0x31')]=_0x5be1f8['body'][a5_0x3f59('0x31')]||'';_0x469016[a5_0x3f59('0x2f')][a5_0x3f59('0x32')]=_0x5be1f8[a5_0x3f59('0x25')][a5_0x3f59('0x32')]||'';_0x469016['profile'][a5_0x3f59('0x33')]=_0x5be1f8['body'][a5_0x3f59('0x33')]||'';_0x469016[a5_0x3f59('0x34')](_0x5322a8=>{if(_0x5322a8){if(_0x5322a8[a5_0x3f59('0x35')]===0x2af8){_0x5be1f8['flash'](a5_0x3f59('0x14'),{'msg':a5_0x3f59('0x36')});return _0x1d466c[a5_0x3f59('0x9')]('/account');}return _0x2d534d(_0x5322a8);}_0x5be1f8[a5_0x3f59('0x13')](a5_0x3f59('0x18'),{'msg':a5_0x3f59('0x37')});_0x1d466c[a5_0x3f59('0x9')]('/account');});});};exports[a5_0x3f59('0x38')]=(_0x547e4a,_0x45547a,_0x281366)=>{_0x547e4a[a5_0x3f59('0xc')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x547e4a['assert'](a5_0x3f59('0x39'),a5_0x3f59('0x23'))[a5_0x3f59('0x24')](_0x547e4a[a5_0x3f59('0x25')][a5_0x3f59('0xe')]);const _0x458a0d=_0x547e4a['validationErrors']();if(_0x458a0d){_0x547e4a[a5_0x3f59('0x13')](a5_0x3f59('0x14'),_0x458a0d);return _0x45547a['redirect'](a5_0x3f59('0x2d'));}User_1[a5_0x3f59('0x16')][a5_0x3f59('0x2e')](_0x547e4a[a5_0x3f59('0x8')]['id'],(_0x14dd10,_0x2eacf1)=>{if(_0x14dd10){return _0x281366(_0x14dd10);}_0x2eacf1[a5_0x3f59('0xe')]=_0x547e4a[a5_0x3f59('0x25')][a5_0x3f59('0xe')];_0x2eacf1['save'](_0x14dd10=>{if(_0x14dd10){return _0x281366(_0x14dd10);}_0x547e4a['flash']('success',{'msg':a5_0x3f59('0x3a')});_0x45547a[a5_0x3f59('0x9')](a5_0x3f59('0x2d'));});});};exports[a5_0x3f59('0x3b')]=(_0x2ee661,_0x20c33a,_0x474f85)=>{User_1[a5_0x3f59('0x16')][a5_0x3f59('0x3c')]({'_id':_0x2ee661[a5_0x3f59('0x8')]['id']},_0x4390e3=>{if(_0x4390e3){return _0x474f85(_0x4390e3);}_0x2ee661[a5_0x3f59('0x1c')]();_0x2ee661[a5_0x3f59('0x13')](a5_0x3f59('0x3d'),{'msg':a5_0x3f59('0x3e')});_0x20c33a[a5_0x3f59('0x9')]('/');});};exports[a5_0x3f59('0x3f')]=(_0x71fef8,_0x1de393,_0x10d65f)=>{const _0x4ef885=_0x71fef8[a5_0x3f59('0x40')][a5_0x3f59('0x41')];User_1['default'][a5_0x3f59('0x2e')](_0x71fef8['user']['id'],(_0xfaa25f,_0x1c256e)=>{if(_0xfaa25f){return _0x10d65f(_0xfaa25f);}_0x1c256e[_0x4ef885]=undefined;_0x1c256e[a5_0x3f59('0x42')]=_0x1c256e['tokens']['filter'](_0x2a5cd7=>_0x2a5cd7['kind']!==_0x4ef885);_0x1c256e[a5_0x3f59('0x34')](_0xfaa25f=>{if(_0xfaa25f){return _0x10d65f(_0xfaa25f);}_0x71fef8['flash'](a5_0x3f59('0x3d'),{'msg':_0x4ef885+a5_0x3f59('0x43')});_0x1de393[a5_0x3f59('0x9')](a5_0x3f59('0x2d'));});});};exports['getReset']=(_0x16a4ef,_0x4b593c,_0x1867d5)=>{if(_0x16a4ef[a5_0x3f59('0x44')]()){return _0x4b593c[a5_0x3f59('0x9')]('/');}User_1[a5_0x3f59('0x16')][a5_0x3f59('0x28')]({'passwordResetToken':_0x16a4ef[a5_0x3f59('0x40')][a5_0x3f59('0x45')]})[a5_0x3f59('0x46')](a5_0x3f59('0x47'))['gt'](Date[a5_0x3f59('0x48')]())[a5_0x3f59('0x49')]((_0x566649,_0x5cdf1a)=>{if(_0x566649){return _0x1867d5(_0x566649);}if(!_0x5cdf1a){_0x16a4ef['flash'](a5_0x3f59('0x14'),{'msg':a5_0x3f59('0x4a')});return _0x4b593c[a5_0x3f59('0x9')](a5_0x3f59('0x4b'));}_0x4b593c[a5_0x3f59('0x4c')](a5_0x3f59('0x4d'),{'title':a5_0x3f59('0x4e')});});};exports[a5_0x3f59('0x4f')]=(_0x443d31,_0x4a5b41,_0x4d0a87)=>{_0x443d31[a5_0x3f59('0xc')]('password',a5_0x3f59('0x50'))[a5_0x3f59('0x51')]({'min':0x4});_0x443d31[a5_0x3f59('0xc')](a5_0x3f59('0x52'),a5_0x3f59('0x53'))[a5_0x3f59('0x24')](_0x443d31['body'][a5_0x3f59('0xe')]);const _0x57469a=_0x443d31[a5_0x3f59('0x12')]();if(_0x57469a){_0x443d31['flash'](a5_0x3f59('0x14'),_0x57469a);return _0x4a5b41[a5_0x3f59('0x9')]('back');}async_1[a5_0x3f59('0x16')][a5_0x3f59('0x54')]([function resetPassword(_0xa8bab0){User_1[a5_0x3f59('0x16')]['findOne']({'passwordResetToken':_0x443d31[a5_0x3f59('0x40')][a5_0x3f59('0x45')]})[a5_0x3f59('0x46')](a5_0x3f59('0x47'))['gt'](Date['now']())[a5_0x3f59('0x49')]((_0x42f7fc,_0x1a731f)=>{if(_0x42f7fc){return _0x4d0a87(_0x42f7fc);}if(!_0x1a731f){_0x443d31[a5_0x3f59('0x13')](a5_0x3f59('0x14'),{'msg':a5_0x3f59('0x4a')});return _0x4a5b41[a5_0x3f59('0x9')](a5_0x3f59('0x55'));}_0x1a731f[a5_0x3f59('0xe')]=_0x443d31['body']['password'];_0x1a731f[a5_0x3f59('0x56')]=undefined;_0x1a731f[a5_0x3f59('0x47')]=undefined;_0x1a731f[a5_0x3f59('0x34')](_0x42f7fc=>{if(_0x42f7fc){return _0x4d0a87(_0x42f7fc);}_0x443d31[a5_0x3f59('0x17')](_0x1a731f,_0x42f7fc=>{_0xa8bab0(_0x42f7fc,_0x1a731f);});});});},function sendResetPasswordEmail(_0x5c965b,_0x3a6cbb){const _0x2d68fb=nodemailer_1[a5_0x3f59('0x16')][a5_0x3f59('0x57')]({'service':'SendGrid','auth':{'user':process[a5_0x3f59('0x58')]['SENDGRID_USER'],'pass':process['env']['SENDGRID_PASSWORD']}});const _0x2c1bb7={'to':_0x5c965b[a5_0x3f59('0x27')],'from':a5_0x3f59('0x59'),'subject':a5_0x3f59('0x5a'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x5c965b[a5_0x3f59('0x27')]+a5_0x3f59('0x5b')};_0x2d68fb[a5_0x3f59('0x5c')](_0x2c1bb7,_0x36ccd0=>{_0x443d31['flash'](a5_0x3f59('0x18'),{'msg':a5_0x3f59('0x5d')});_0x3a6cbb(_0x36ccd0);});}],_0x4592ec=>{if(_0x4592ec){return _0x4d0a87(_0x4592ec);}_0x4a5b41[a5_0x3f59('0x9')]('/');});};exports['getForgot']=(_0xbbb907,_0xd2c579)=>{if(_0xbbb907[a5_0x3f59('0x44')]()){return _0xd2c579[a5_0x3f59('0x9')]('/');}_0xd2c579[a5_0x3f59('0x4c')]('account/forgot',{'title':a5_0x3f59('0x5e')});};exports[a5_0x3f59('0x5f')]=(_0x217164,_0x254fd2,_0x414c10)=>{_0x217164[a5_0x3f59('0xc')]('email',a5_0x3f59('0x60'))['isEmail']();_0x217164[a5_0x3f59('0x10')]('email')[a5_0x3f59('0x11')]({'gmail_remove_dots':![]});const _0x6e8b86=_0x217164[a5_0x3f59('0x12')]();if(_0x6e8b86){_0x217164[a5_0x3f59('0x13')](a5_0x3f59('0x14'),_0x6e8b86);return _0x254fd2['redirect'](a5_0x3f59('0x4b'));}async_1[a5_0x3f59('0x16')]['waterfall']([function createRandomToken(_0x3d8fce){crypto_1[a5_0x3f59('0x16')]['randomBytes'](0x10,(_0x2edd30,_0x31d67f)=>{const _0x28f4c6=_0x31d67f[a5_0x3f59('0x61')](a5_0x3f59('0x62'));_0x3d8fce(_0x2edd30,_0x28f4c6);});},function setRandomToken(_0x3226b9,_0x384b84){User_1['default'][a5_0x3f59('0x28')]({'email':_0x217164['body'][a5_0x3f59('0x27')]},(_0x5754dd,_0x58c293)=>{if(_0x5754dd){return _0x384b84(_0x5754dd);}if(!_0x58c293){_0x217164[a5_0x3f59('0x13')](a5_0x3f59('0x14'),{'msg':a5_0x3f59('0x63')});return _0x254fd2[a5_0x3f59('0x9')](a5_0x3f59('0x4b'));}_0x58c293[a5_0x3f59('0x56')]=_0x3226b9;_0x58c293[a5_0x3f59('0x47')]=Date['now']()+0x36ee80;_0x58c293[a5_0x3f59('0x34')](_0x5754dd=>{_0x384b84(_0x5754dd,_0x3226b9,_0x58c293);});});},function sendForgotPasswordEmail(_0x356ae0,_0x5a6d60,_0x36d74a){const _0x5c24e8=nodemailer_1[a5_0x3f59('0x16')][a5_0x3f59('0x57')]({'service':a5_0x3f59('0x64'),'auth':{'user':process[a5_0x3f59('0x58')][a5_0x3f59('0x65')],'pass':process[a5_0x3f59('0x58')][a5_0x3f59('0x66')]}});const _0x4676c5={'to':_0x5a6d60[a5_0x3f59('0x27')],'from':a5_0x3f59('0x67'),'subject':a5_0x3f59('0x68'),'text':a5_0x3f59('0x69')+_0x217164['headers'][a5_0x3f59('0x6a')]+a5_0x3f59('0x6b')+_0x356ae0+a5_0x3f59('0x6c')};_0x5c24e8[a5_0x3f59('0x5c')](_0x4676c5,_0x2fc86d=>{_0x217164['flash'](a5_0x3f59('0x3d'),{'msg':a5_0x3f59('0x6d')+_0x5a6d60[a5_0x3f59('0x27')]+a5_0x3f59('0x6e')});_0x36d74a(_0x2fc86d);});}],_0x157fb4=>{if(_0x157fb4){return _0x414c10(_0x157fb4);}_0x254fd2['redirect'](a5_0x3f59('0x4b'));});};