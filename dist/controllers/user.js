var a5_0xd942=['Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','confirmPassword','Passwords\x20do\x20not\x20match','success','Password\x20has\x20been\x20changed.','postDeleteAccount','info','getOauthUnlink','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','params','token','where','passwordResetExpires','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','findOne','passwordResetToken','env','SENDGRID_PASSWORD','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','/forgot','createTransport','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','defineProperty','crypto','nodemailer','passport','../models/User','user','redirect','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','/login','default','authenticate','local','message','logIn','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','account/signup','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','equals','/signup','body','save','getAccount','account/profile','Account\x20Management','postUpdateProfile'];(function(_0x5df16e,_0x1c4883){var _0x59c791=function(_0x57cc48){while(--_0x57cc48){_0x5df16e['push'](_0x5df16e['shift']());}};_0x59c791(++_0x1c4883);}(a5_0xd942,0x1e8));var a5_0xf65b=function(_0x48cee6,_0x2710ad){_0x48cee6=_0x48cee6-0x0;var _0x2b519c=a5_0xd942[_0x48cee6];return _0x2b519c;};'use strict';var __importDefault=this&&this[a5_0xf65b('0x0')]||function(_0x12062c){return _0x12062c&&_0x12062c[a5_0xf65b('0x1')]?_0x12062c:{'default':_0x12062c};};Object[a5_0xf65b('0x2')](exports,a5_0xf65b('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0xf65b('0x3')));const nodemailer_1=__importDefault(require(a5_0xf65b('0x4')));const passport_1=__importDefault(require(a5_0xf65b('0x5')));const User_1=__importDefault(require(a5_0xf65b('0x6')));const request=require('express-validator');exports['getLogin']=(_0x332dfc,_0x172226)=>{if(_0x332dfc[a5_0xf65b('0x7')]){return _0x172226[a5_0xf65b('0x8')]('/');}_0x172226[a5_0xf65b('0x9')](a5_0xf65b('0xa'),{'title':'Login'});};exports[a5_0xf65b('0xb')]=(_0x23c28d,_0x3ad972,_0x2f12fc)=>{_0x23c28d[a5_0xf65b('0xc')](a5_0xf65b('0xd'),a5_0xf65b('0xe'))['isEmail']();_0x23c28d[a5_0xf65b('0xc')](a5_0xf65b('0xf'),a5_0xf65b('0x10'))[a5_0xf65b('0x11')]();_0x23c28d[a5_0xf65b('0x12')](a5_0xf65b('0xd'))[a5_0xf65b('0x13')]({'gmail_remove_dots':![]});const _0x4f2d78=_0x23c28d[a5_0xf65b('0x14')]();if(_0x4f2d78){_0x23c28d[a5_0xf65b('0x15')](a5_0xf65b('0x16'),_0x4f2d78);return _0x3ad972[a5_0xf65b('0x8')](a5_0xf65b('0x17'));}passport_1[a5_0xf65b('0x18')][a5_0xf65b('0x19')](a5_0xf65b('0x1a'),(_0x36a84b,_0x5cf392,_0x44611a)=>{if(_0x36a84b){return _0x2f12fc(_0x36a84b);}if(!_0x5cf392){_0x23c28d[a5_0xf65b('0x15')]('errors',_0x44611a[a5_0xf65b('0x1b')]);return _0x3ad972[a5_0xf65b('0x8')]('/login');}_0x23c28d[a5_0xf65b('0x1c')](_0x5cf392,_0x36a84b=>{if(_0x36a84b){return _0x2f12fc(_0x36a84b);}_0x23c28d['flash']('success',{'msg':a5_0xf65b('0x1d')});_0x3ad972[a5_0xf65b('0x8')](_0x23c28d[a5_0xf65b('0x1e')][a5_0xf65b('0x1f')]||'/');});})(_0x23c28d,_0x3ad972,_0x2f12fc);};exports[a5_0xf65b('0x20')]=(_0x29767b,_0x1ea67f)=>{_0x29767b[a5_0xf65b('0x20')]();_0x1ea67f[a5_0xf65b('0x8')]('/');};exports['getSignup']=(_0x3d9c35,_0x3f7ac7)=>{if(_0x3d9c35[a5_0xf65b('0x7')]){return _0x3f7ac7[a5_0xf65b('0x8')]('/');}_0x3f7ac7[a5_0xf65b('0x9')](a5_0xf65b('0x21'),{'title':a5_0xf65b('0x22')});};exports[a5_0xf65b('0x23')]=(_0x9ea046,_0x18e6fc,_0x3bb0fa)=>{_0x9ea046[a5_0xf65b('0xc')](a5_0xf65b('0xd'),a5_0xf65b('0xe'))[a5_0xf65b('0x24')]();_0x9ea046[a5_0xf65b('0xc')]('password',a5_0xf65b('0x25'))[a5_0xf65b('0x26')]({'min':0x4});_0x9ea046[a5_0xf65b('0xc')]('confirmPassword','Passwords\x20do\x20not\x20match')[a5_0xf65b('0x27')](_0x9ea046['body'][a5_0xf65b('0xf')]);_0x9ea046[a5_0xf65b('0x12')](a5_0xf65b('0xd'))[a5_0xf65b('0x13')]({'gmail_remove_dots':![]});const _0x354251=_0x9ea046[a5_0xf65b('0x14')]();if(_0x354251){_0x9ea046[a5_0xf65b('0x15')]('errors',_0x354251);return _0x18e6fc['redirect'](a5_0xf65b('0x28'));}const _0x278703=new User_1[(a5_0xf65b('0x18'))]({});User_1['default']['findOne']({'email':_0x9ea046[a5_0xf65b('0x29')][a5_0xf65b('0xd')]},(_0x34095,_0x1609de)=>{if(_0x34095){return _0x3bb0fa(_0x34095);}if(_0x1609de){_0x9ea046[a5_0xf65b('0x15')](a5_0xf65b('0x16'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x18e6fc[a5_0xf65b('0x8')]('/signup');}_0x278703[a5_0xf65b('0x2a')](_0x34095=>{if(_0x34095){return _0x3bb0fa(_0x34095);}_0x9ea046[a5_0xf65b('0x1c')](_0x278703,_0x34095=>{if(_0x34095){return _0x3bb0fa(_0x34095);}_0x18e6fc['redirect']('/');});});});};exports[a5_0xf65b('0x2b')]=(_0x57fef8,_0x388931)=>{_0x388931[a5_0xf65b('0x9')](a5_0xf65b('0x2c'),{'title':a5_0xf65b('0x2d')});};exports[a5_0xf65b('0x2e')]=(_0x3644dd,_0x4b9aa4,_0x51ee86)=>{_0x3644dd[a5_0xf65b('0xc')](a5_0xf65b('0xd'),a5_0xf65b('0x2f'))['isEmail']();_0x3644dd[a5_0xf65b('0x12')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x27f76d=_0x3644dd[a5_0xf65b('0x14')]();if(_0x27f76d){_0x3644dd[a5_0xf65b('0x15')](a5_0xf65b('0x16'),_0x27f76d);return _0x4b9aa4[a5_0xf65b('0x8')](a5_0xf65b('0x30'));}User_1['default'][a5_0xf65b('0x31')](_0x3644dd[a5_0xf65b('0x7')]['id'],(_0x224f30,_0x5c02ee)=>{if(_0x224f30){return _0x51ee86(_0x224f30);}_0x5c02ee[a5_0xf65b('0xd')]=_0x3644dd[a5_0xf65b('0x29')][a5_0xf65b('0xd')]||'';_0x5c02ee[a5_0xf65b('0x32')]['name']=_0x3644dd[a5_0xf65b('0x29')][a5_0xf65b('0x33')]||'';_0x5c02ee[a5_0xf65b('0x32')][a5_0xf65b('0x34')]=_0x3644dd[a5_0xf65b('0x29')][a5_0xf65b('0x34')]||'';_0x5c02ee['profile'][a5_0xf65b('0x35')]=_0x3644dd[a5_0xf65b('0x29')][a5_0xf65b('0x35')]||'';_0x5c02ee[a5_0xf65b('0x32')][a5_0xf65b('0x36')]=_0x3644dd[a5_0xf65b('0x29')][a5_0xf65b('0x36')]||'';_0x5c02ee[a5_0xf65b('0x2a')](_0x224f30=>{if(_0x224f30){if(_0x224f30['code']===0x2af8){_0x3644dd[a5_0xf65b('0x15')](a5_0xf65b('0x16'),{'msg':a5_0xf65b('0x37')});return _0x4b9aa4[a5_0xf65b('0x8')](a5_0xf65b('0x30'));}return _0x51ee86(_0x224f30);}_0x3644dd[a5_0xf65b('0x15')]('success',{'msg':a5_0xf65b('0x38')});_0x4b9aa4[a5_0xf65b('0x8')](a5_0xf65b('0x30'));});});};exports[a5_0xf65b('0x39')]=(_0x3af9cb,_0x4374c5,_0x1e3719)=>{_0x3af9cb[a5_0xf65b('0xc')](a5_0xf65b('0xf'),a5_0xf65b('0x25'))[a5_0xf65b('0x26')]({'min':0x4});_0x3af9cb[a5_0xf65b('0xc')](a5_0xf65b('0x3a'),a5_0xf65b('0x3b'))[a5_0xf65b('0x27')](_0x3af9cb[a5_0xf65b('0x29')][a5_0xf65b('0xf')]);const _0x174020=_0x3af9cb[a5_0xf65b('0x14')]();if(_0x174020){_0x3af9cb[a5_0xf65b('0x15')]('errors',_0x174020);return _0x4374c5[a5_0xf65b('0x8')](a5_0xf65b('0x30'));}User_1[a5_0xf65b('0x18')][a5_0xf65b('0x31')](_0x3af9cb[a5_0xf65b('0x7')]['id'],(_0x30da94,_0x541c69)=>{if(_0x30da94){return _0x1e3719(_0x30da94);}_0x541c69[a5_0xf65b('0xf')]=_0x3af9cb[a5_0xf65b('0x29')][a5_0xf65b('0xf')];_0x541c69[a5_0xf65b('0x2a')](_0x30da94=>{if(_0x30da94){return _0x1e3719(_0x30da94);}_0x3af9cb[a5_0xf65b('0x15')](a5_0xf65b('0x3c'),{'msg':a5_0xf65b('0x3d')});_0x4374c5[a5_0xf65b('0x8')]('/account');});});};exports[a5_0xf65b('0x3e')]=(_0x1a69fe,_0x145a4d,_0x42c0e0)=>{User_1[a5_0xf65b('0x18')]['remove']({'_id':_0x1a69fe['user']['id']},_0x13bec2=>{if(_0x13bec2){return _0x42c0e0(_0x13bec2);}_0x1a69fe['logout']();_0x1a69fe[a5_0xf65b('0x15')](a5_0xf65b('0x3f'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x145a4d[a5_0xf65b('0x8')]('/');});};exports[a5_0xf65b('0x40')]=(_0x588d7b,_0x4bd012,_0x472cf2)=>{const _0x463a04=_0x588d7b['params']['provider'];User_1['default'][a5_0xf65b('0x31')](_0x588d7b['user']['id'],(_0x5e78f2,_0x211713)=>{if(_0x5e78f2){return _0x472cf2(_0x5e78f2);}_0x211713[_0x463a04]=undefined;_0x211713[a5_0xf65b('0x41')]=_0x211713[a5_0xf65b('0x41')][a5_0xf65b('0x42')](_0x41e41b=>_0x41e41b[a5_0xf65b('0x43')]!==_0x463a04);_0x211713['save'](_0x5e78f2=>{if(_0x5e78f2){return _0x472cf2(_0x5e78f2);}_0x588d7b[a5_0xf65b('0x15')](a5_0xf65b('0x3f'),{'msg':_0x463a04+a5_0xf65b('0x44')});_0x4bd012[a5_0xf65b('0x8')](a5_0xf65b('0x30'));});});};exports[a5_0xf65b('0x45')]=(_0x15d0ab,_0x460261,_0x1147f9)=>{if(_0x15d0ab[a5_0xf65b('0x46')]()){return _0x460261[a5_0xf65b('0x8')]('/');}User_1[a5_0xf65b('0x18')]['findOne']({'passwordResetToken':_0x15d0ab[a5_0xf65b('0x47')][a5_0xf65b('0x48')]})[a5_0xf65b('0x49')](a5_0xf65b('0x4a'))['gt'](Date[a5_0xf65b('0x4b')]())[a5_0xf65b('0x4c')]((_0xdcbd23,_0x428a51)=>{if(_0xdcbd23){return _0x1147f9(_0xdcbd23);}if(!_0x428a51){_0x15d0ab[a5_0xf65b('0x15')](a5_0xf65b('0x16'),{'msg':a5_0xf65b('0x4d')});return _0x460261[a5_0xf65b('0x8')]('/forgot');}_0x460261[a5_0xf65b('0x9')](a5_0xf65b('0x4e'),{'title':a5_0xf65b('0x4f')});});};exports['postReset']=(_0x4ddb05,_0x36153f,_0x584ab7)=>{_0x4ddb05[a5_0xf65b('0xc')](a5_0xf65b('0xf'),a5_0xf65b('0x50'))[a5_0xf65b('0x26')]({'min':0x4});_0x4ddb05[a5_0xf65b('0xc')](a5_0xf65b('0x51'),a5_0xf65b('0x52'))[a5_0xf65b('0x27')](_0x4ddb05['body'][a5_0xf65b('0xf')]);const _0x3476cc=_0x4ddb05[a5_0xf65b('0x14')]();if(_0x3476cc){_0x4ddb05[a5_0xf65b('0x15')]('errors',_0x3476cc);return _0x36153f[a5_0xf65b('0x8')]('back');}async_1['default']['waterfall']([function resetPassword(_0x11ba54){User_1['default'][a5_0xf65b('0x53')]({'passwordResetToken':_0x4ddb05[a5_0xf65b('0x47')][a5_0xf65b('0x48')]})[a5_0xf65b('0x49')](a5_0xf65b('0x4a'))['gt'](Date[a5_0xf65b('0x4b')]())[a5_0xf65b('0x4c')]((_0x1ac60e,_0x1b106c)=>{if(_0x1ac60e){return _0x584ab7(_0x1ac60e);}if(!_0x1b106c){_0x4ddb05[a5_0xf65b('0x15')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x36153f[a5_0xf65b('0x8')]('back');}_0x1b106c[a5_0xf65b('0xf')]=_0x4ddb05['body']['password'];_0x1b106c[a5_0xf65b('0x54')]=undefined;_0x1b106c[a5_0xf65b('0x4a')]=undefined;_0x1b106c['save'](_0x1ac60e=>{if(_0x1ac60e){return _0x584ab7(_0x1ac60e);}_0x4ddb05[a5_0xf65b('0x1c')](_0x1b106c,_0x1ac60e=>{_0x11ba54(_0x1ac60e,_0x1b106c);});});});},function sendResetPasswordEmail(_0x17fd51,_0x2f49e3){const _0x583527=nodemailer_1[a5_0xf65b('0x18')]['createTransport']({'service':'SendGrid','auth':{'user':process[a5_0xf65b('0x55')]['SENDGRID_USER'],'pass':process[a5_0xf65b('0x55')][a5_0xf65b('0x56')]}});const _0x115437={'to':_0x17fd51[a5_0xf65b('0xd')],'from':a5_0xf65b('0x57'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0xf65b('0x58')+_0x17fd51[a5_0xf65b('0xd')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x583527[a5_0xf65b('0x59')](_0x115437,_0x29b90a=>{_0x4ddb05['flash'](a5_0xf65b('0x3c'),{'msg':a5_0xf65b('0x5a')});_0x2f49e3(_0x29b90a);});}],_0x10f97d=>{if(_0x10f97d){return _0x584ab7(_0x10f97d);}_0x36153f[a5_0xf65b('0x8')]('/');});};exports[a5_0xf65b('0x5b')]=(_0x5ee4a9,_0x9679a7)=>{if(_0x5ee4a9['isAuthenticated']()){return _0x9679a7[a5_0xf65b('0x8')]('/');}_0x9679a7['render'](a5_0xf65b('0x5c'),{'title':a5_0xf65b('0x5d')});};exports[a5_0xf65b('0x5e')]=(_0x27f33b,_0xb3a9e7,_0xe7c8da)=>{_0x27f33b[a5_0xf65b('0xc')](a5_0xf65b('0xd'),a5_0xf65b('0x2f'))['isEmail']();_0x27f33b[a5_0xf65b('0x12')](a5_0xf65b('0xd'))[a5_0xf65b('0x13')]({'gmail_remove_dots':![]});const _0xde1698=_0x27f33b[a5_0xf65b('0x14')]();if(_0xde1698){_0x27f33b[a5_0xf65b('0x15')](a5_0xf65b('0x16'),_0xde1698);return _0xb3a9e7['redirect']('/forgot');}async_1[a5_0xf65b('0x18')][a5_0xf65b('0x5f')]([function createRandomToken(_0x2346c4){crypto_1[a5_0xf65b('0x18')]['randomBytes'](0x10,(_0x43e81a,_0x58f753)=>{const _0x31a4f3=_0x58f753[a5_0xf65b('0x60')](a5_0xf65b('0x61'));_0x2346c4(_0x43e81a,_0x31a4f3);});},function setRandomToken(_0x27fef3,_0x3ee0be){User_1[a5_0xf65b('0x18')][a5_0xf65b('0x53')]({'email':_0x27f33b[a5_0xf65b('0x29')][a5_0xf65b('0xd')]},(_0x546847,_0x44e8d8)=>{if(_0x546847){return _0x3ee0be(_0x546847);}if(!_0x44e8d8){_0x27f33b[a5_0xf65b('0x15')](a5_0xf65b('0x16'),{'msg':a5_0xf65b('0x62')});return _0xb3a9e7[a5_0xf65b('0x8')](a5_0xf65b('0x63'));}_0x44e8d8['passwordResetToken']=_0x27fef3;_0x44e8d8[a5_0xf65b('0x4a')]=Date['now']()+0x36ee80;_0x44e8d8[a5_0xf65b('0x2a')](_0x546847=>{_0x3ee0be(_0x546847,_0x27fef3,_0x44e8d8);});});},function sendForgotPasswordEmail(_0x41fd8d,_0xcf0c0d,_0x90e990){const _0x56188b=nodemailer_1['default'][a5_0xf65b('0x64')]({'service':'SendGrid','auth':{'user':process['env']['SENDGRID_USER'],'pass':process['env'][a5_0xf65b('0x56')]}});const _0x34ea9f={'to':_0xcf0c0d[a5_0xf65b('0xd')],'from':a5_0xf65b('0x65'),'subject':a5_0xf65b('0x66'),'text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x27f33b['headers'][a5_0xf65b('0x67')]+a5_0xf65b('0x68')+_0x41fd8d+a5_0xf65b('0x69')};_0x56188b[a5_0xf65b('0x59')](_0x34ea9f,_0x1f83fe=>{_0x27f33b[a5_0xf65b('0x15')](a5_0xf65b('0x3f'),{'msg':a5_0xf65b('0x6a')+_0xcf0c0d['email']+'\x20with\x20further\x20instructions.'});_0x90e990(_0x1f83fe);});}],_0x4ddb2b=>{if(_0x4ddb2b){return _0xe7c8da(_0x4ddb2b);}_0xb3a9e7[a5_0xf65b('0x8')](a5_0xf65b('0x63'));});};