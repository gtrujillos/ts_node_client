var a5_0x2410=['Password\x20cannot\x20be\x20blank','flash','errors','/login','default','authenticate','local','message','logIn','success','returnTo','logout','getSignup','account/signup','Create\x20Account','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','Passwords\x20do\x20not\x20match','body','password','normalizeEmail','validationErrors','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','sanitize','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','equals','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','params','provider','filter','kind','getReset','isAuthenticated','token','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','passwordResetExpires','back','passwordResetToken','createTransport','SendGrid','SENDGRID_USER','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','Forgot\x20Password','randomBytes','toString','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','__importDefault','__esModule','crypto','passport','../models/User','express-validator','getLogin','user','redirect','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail'];(function(_0x215958,_0x487776){var _0x3c322c=function(_0x3c7791){while(--_0x3c7791){_0x215958['push'](_0x215958['shift']());}};_0x3c322c(++_0x487776);}(a5_0x2410,0x190));var a5_0x4b55=function(_0x4eded8,_0x498c02){_0x4eded8=_0x4eded8-0x0;var _0x34392f=a5_0x2410[_0x4eded8];return _0x34392f;};'use strict';var __importDefault=this&&this[a5_0x4b55('0x0')]||function(_0x112588){return _0x112588&&_0x112588[a5_0x4b55('0x1')]?_0x112588:{'default':_0x112588};};Object['defineProperty'](exports,a5_0x4b55('0x1'),{'value':!![]});const async_1=__importDefault(require('async'));const crypto_1=__importDefault(require(a5_0x4b55('0x2')));const nodemailer_1=__importDefault(require('nodemailer'));const passport_1=__importDefault(require(a5_0x4b55('0x3')));const User_1=__importDefault(require(a5_0x4b55('0x4')));const request=require(a5_0x4b55('0x5'));exports[a5_0x4b55('0x6')]=(_0x26f104,_0x2d77f1)=>{if(_0x26f104[a5_0x4b55('0x7')]){return _0x2d77f1[a5_0x4b55('0x8')]('/');}_0x2d77f1[a5_0x4b55('0x9')]('account/login',{'title':a5_0x4b55('0xa')});};exports[a5_0x4b55('0xb')]=(_0x400ab8,_0x2f465e,_0x491997)=>{_0x400ab8[a5_0x4b55('0xc')](a5_0x4b55('0xd'),a5_0x4b55('0xe'))[a5_0x4b55('0xf')]();_0x400ab8[a5_0x4b55('0xc')]('password',a5_0x4b55('0x10'))['notEmpty']();_0x400ab8['sanitize'](a5_0x4b55('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x2d1966=_0x400ab8['validationErrors']();if(_0x2d1966){_0x400ab8[a5_0x4b55('0x11')](a5_0x4b55('0x12'),_0x2d1966);return _0x2f465e[a5_0x4b55('0x8')](a5_0x4b55('0x13'));}passport_1[a5_0x4b55('0x14')][a5_0x4b55('0x15')](a5_0x4b55('0x16'),(_0x5caf9c,_0x277250,_0x279384)=>{if(_0x5caf9c){return _0x491997(_0x5caf9c);}if(!_0x277250){_0x400ab8['flash'](a5_0x4b55('0x12'),_0x279384[a5_0x4b55('0x17')]);return _0x2f465e[a5_0x4b55('0x8')](a5_0x4b55('0x13'));}_0x400ab8[a5_0x4b55('0x18')](_0x277250,_0x5caf9c=>{if(_0x5caf9c){return _0x491997(_0x5caf9c);}_0x400ab8[a5_0x4b55('0x11')](a5_0x4b55('0x19'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x2f465e[a5_0x4b55('0x8')](_0x400ab8['session'][a5_0x4b55('0x1a')]||'/');});})(_0x400ab8,_0x2f465e,_0x491997);};exports[a5_0x4b55('0x1b')]=(_0x3b9f1f,_0x4591e2)=>{_0x3b9f1f[a5_0x4b55('0x1b')]();_0x4591e2[a5_0x4b55('0x8')]('/');};exports[a5_0x4b55('0x1c')]=(_0x5174ba,_0x2b0163)=>{if(_0x5174ba['user']){return _0x2b0163['redirect']('/');}_0x2b0163['render'](a5_0x4b55('0x1d'),{'title':a5_0x4b55('0x1e')});};exports['postSignup']=(_0xdb0001,_0xcb207c,_0x175bf8)=>{_0xdb0001['assert'](a5_0x4b55('0xd'),a5_0x4b55('0xe'))[a5_0x4b55('0xf')]();_0xdb0001[a5_0x4b55('0xc')]('password',a5_0x4b55('0x1f'))[a5_0x4b55('0x20')]({'min':0x4});_0xdb0001['assert']('confirmPassword',a5_0x4b55('0x21'))['equals'](_0xdb0001[a5_0x4b55('0x22')][a5_0x4b55('0x23')]);_0xdb0001['sanitize'](a5_0x4b55('0xd'))[a5_0x4b55('0x24')]({'gmail_remove_dots':![]});const _0x4c014d=_0xdb0001[a5_0x4b55('0x25')]();if(_0x4c014d){_0xdb0001[a5_0x4b55('0x11')]('errors',_0x4c014d);return _0xcb207c['redirect'](a5_0x4b55('0x26'));}const _0x662475=new User_1[(a5_0x4b55('0x14'))]({'email':_0xdb0001[a5_0x4b55('0x22')][a5_0x4b55('0xd')],'password':_0xdb0001[a5_0x4b55('0x22')]['password']});User_1[a5_0x4b55('0x14')][a5_0x4b55('0x27')]({'email':_0xdb0001[a5_0x4b55('0x22')][a5_0x4b55('0xd')]},(_0x3108f9,_0x490440)=>{if(_0x3108f9){return _0x175bf8(_0x3108f9);}if(_0x490440){_0xdb0001[a5_0x4b55('0x11')](a5_0x4b55('0x12'),{'msg':a5_0x4b55('0x28')});return _0xcb207c[a5_0x4b55('0x8')](a5_0x4b55('0x26'));}_0x662475[a5_0x4b55('0x29')](_0x3108f9=>{if(_0x3108f9){return _0x175bf8(_0x3108f9);}_0xdb0001[a5_0x4b55('0x18')](_0x662475,_0x3108f9=>{if(_0x3108f9){return _0x175bf8(_0x3108f9);}_0xcb207c[a5_0x4b55('0x8')]('/');});});});};exports[a5_0x4b55('0x2a')]=(_0x28e834,_0x489214)=>{_0x489214[a5_0x4b55('0x9')](a5_0x4b55('0x2b'),{'title':'Account\x20Management'});};exports[a5_0x4b55('0x2c')]=(_0x2ee5cd,_0x44e817,_0x575fb4)=>{_0x2ee5cd[a5_0x4b55('0xc')](a5_0x4b55('0xd'),a5_0x4b55('0x2d'))[a5_0x4b55('0xf')]();_0x2ee5cd[a5_0x4b55('0x2e')](a5_0x4b55('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x3cba88=_0x2ee5cd[a5_0x4b55('0x25')]();if(_0x3cba88){_0x2ee5cd[a5_0x4b55('0x11')](a5_0x4b55('0x12'),_0x3cba88);return _0x44e817[a5_0x4b55('0x8')](a5_0x4b55('0x2f'));}User_1['default'][a5_0x4b55('0x30')](_0x2ee5cd[a5_0x4b55('0x7')]['id'],(_0x4b642a,_0x248592)=>{if(_0x4b642a){return _0x575fb4(_0x4b642a);}_0x248592[a5_0x4b55('0xd')]=_0x2ee5cd['body'][a5_0x4b55('0xd')]||'';_0x248592[a5_0x4b55('0x31')][a5_0x4b55('0x32')]=_0x2ee5cd[a5_0x4b55('0x22')]['name']||'';_0x248592[a5_0x4b55('0x31')][a5_0x4b55('0x33')]=_0x2ee5cd[a5_0x4b55('0x22')]['gender']||'';_0x248592[a5_0x4b55('0x31')][a5_0x4b55('0x34')]=_0x2ee5cd[a5_0x4b55('0x22')][a5_0x4b55('0x34')]||'';_0x248592[a5_0x4b55('0x31')][a5_0x4b55('0x35')]=_0x2ee5cd[a5_0x4b55('0x22')]['website']||'';_0x248592[a5_0x4b55('0x29')](_0x4b642a=>{if(_0x4b642a){if(_0x4b642a[a5_0x4b55('0x36')]===0x2af8){_0x2ee5cd[a5_0x4b55('0x11')](a5_0x4b55('0x12'),{'msg':a5_0x4b55('0x37')});return _0x44e817['redirect'](a5_0x4b55('0x2f'));}return _0x575fb4(_0x4b642a);}_0x2ee5cd['flash']('success',{'msg':a5_0x4b55('0x38')});_0x44e817[a5_0x4b55('0x8')](a5_0x4b55('0x2f'));});});};exports['postUpdatePassword']=(_0x41c57a,_0x370faf,_0x2aa562)=>{_0x41c57a['assert']('password',a5_0x4b55('0x1f'))[a5_0x4b55('0x20')]({'min':0x4});_0x41c57a[a5_0x4b55('0xc')]('confirmPassword',a5_0x4b55('0x21'))[a5_0x4b55('0x39')](_0x41c57a[a5_0x4b55('0x22')][a5_0x4b55('0x23')]);const _0x3d9a4e=_0x41c57a['validationErrors']();if(_0x3d9a4e){_0x41c57a[a5_0x4b55('0x11')](a5_0x4b55('0x12'),_0x3d9a4e);return _0x370faf[a5_0x4b55('0x8')](a5_0x4b55('0x2f'));}User_1['default']['findById'](_0x41c57a[a5_0x4b55('0x7')]['id'],(_0x11b447,_0x485be7)=>{if(_0x11b447){return _0x2aa562(_0x11b447);}_0x485be7[a5_0x4b55('0x23')]=_0x41c57a['body'][a5_0x4b55('0x23')];_0x485be7[a5_0x4b55('0x29')](_0x11b447=>{if(_0x11b447){return _0x2aa562(_0x11b447);}_0x41c57a[a5_0x4b55('0x11')](a5_0x4b55('0x19'),{'msg':a5_0x4b55('0x3a')});_0x370faf[a5_0x4b55('0x8')]('/account');});});};exports[a5_0x4b55('0x3b')]=(_0x37e8cc,_0x411377,_0x355491)=>{User_1[a5_0x4b55('0x14')][a5_0x4b55('0x3c')]({'_id':_0x37e8cc['user']['id']},_0x4a930d=>{if(_0x4a930d){return _0x355491(_0x4a930d);}_0x37e8cc['logout']();_0x37e8cc[a5_0x4b55('0x11')](a5_0x4b55('0x3d'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x411377['redirect']('/');});};exports['getOauthUnlink']=(_0x33c4f8,_0x584ba1,_0x9edb7c)=>{const _0x32b112=_0x33c4f8[a5_0x4b55('0x3e')][a5_0x4b55('0x3f')];User_1['default'][a5_0x4b55('0x30')](_0x33c4f8['user']['id'],(_0xf70eb6,_0x29294a)=>{if(_0xf70eb6){return _0x9edb7c(_0xf70eb6);}_0x29294a[_0x32b112]=undefined;_0x29294a['tokens']=_0x29294a['tokens'][a5_0x4b55('0x40')](_0x5dd1e6=>_0x5dd1e6[a5_0x4b55('0x41')]!==_0x32b112);_0x29294a[a5_0x4b55('0x29')](_0xf70eb6=>{if(_0xf70eb6){return _0x9edb7c(_0xf70eb6);}_0x33c4f8[a5_0x4b55('0x11')](a5_0x4b55('0x3d'),{'msg':_0x32b112+'\x20account\x20has\x20been\x20unlinked.'});_0x584ba1['redirect'](a5_0x4b55('0x2f'));});});};exports[a5_0x4b55('0x42')]=(_0x5f19f4,_0x236529,_0x14eee8)=>{if(_0x5f19f4[a5_0x4b55('0x43')]()){return _0x236529['redirect']('/');}User_1[a5_0x4b55('0x14')]['findOne']({'passwordResetToken':_0x5f19f4['params'][a5_0x4b55('0x44')]})['where']('passwordResetExpires')['gt'](Date[a5_0x4b55('0x45')]())['exec']((_0x5444ae,_0x9a19b1)=>{if(_0x5444ae){return _0x14eee8(_0x5444ae);}if(!_0x9a19b1){_0x5f19f4[a5_0x4b55('0x11')]('errors',{'msg':a5_0x4b55('0x46')});return _0x236529[a5_0x4b55('0x8')](a5_0x4b55('0x47'));}_0x236529[a5_0x4b55('0x9')](a5_0x4b55('0x48'),{'title':'Password\x20Reset'});});};exports['postReset']=(_0x3398fc,_0x5766f1,_0x360cfd)=>{_0x3398fc[a5_0x4b55('0xc')](a5_0x4b55('0x23'),a5_0x4b55('0x49'))[a5_0x4b55('0x20')]({'min':0x4});_0x3398fc[a5_0x4b55('0xc')](a5_0x4b55('0x4a'),a5_0x4b55('0x4b'))[a5_0x4b55('0x39')](_0x3398fc[a5_0x4b55('0x22')][a5_0x4b55('0x23')]);const _0x1ea5d5=_0x3398fc[a5_0x4b55('0x25')]();if(_0x1ea5d5){_0x3398fc[a5_0x4b55('0x11')](a5_0x4b55('0x12'),_0x1ea5d5);return _0x5766f1[a5_0x4b55('0x8')]('back');}async_1[a5_0x4b55('0x14')][a5_0x4b55('0x4c')]([function resetPassword(_0x47cc0d){User_1['default']['findOne']({'passwordResetToken':_0x3398fc[a5_0x4b55('0x3e')][a5_0x4b55('0x44')]})['where'](a5_0x4b55('0x4d'))['gt'](Date[a5_0x4b55('0x45')]())['exec']((_0xf1dedb,_0x26c0d0)=>{if(_0xf1dedb){return _0x360cfd(_0xf1dedb);}if(!_0x26c0d0){_0x3398fc['flash'](a5_0x4b55('0x12'),{'msg':a5_0x4b55('0x46')});return _0x5766f1['redirect'](a5_0x4b55('0x4e'));}_0x26c0d0[a5_0x4b55('0x23')]=_0x3398fc['body'][a5_0x4b55('0x23')];_0x26c0d0[a5_0x4b55('0x4f')]=undefined;_0x26c0d0['passwordResetExpires']=undefined;_0x26c0d0[a5_0x4b55('0x29')](_0xf1dedb=>{if(_0xf1dedb){return _0x360cfd(_0xf1dedb);}_0x3398fc[a5_0x4b55('0x18')](_0x26c0d0,_0xf1dedb=>{_0x47cc0d(_0xf1dedb,_0x26c0d0);});});});},function sendResetPasswordEmail(_0x4a3eec,_0x23f7f4){const _0x102fd0=nodemailer_1[a5_0x4b55('0x14')][a5_0x4b55('0x50')]({'service':a5_0x4b55('0x51'),'auth':{'user':process['env'][a5_0x4b55('0x52')],'pass':process[a5_0x4b55('0x53')][a5_0x4b55('0x54')]}});const _0x3d9d9c={'to':_0x4a3eec[a5_0x4b55('0xd')],'from':a5_0x4b55('0x55'),'subject':a5_0x4b55('0x56'),'text':a5_0x4b55('0x57')+_0x4a3eec[a5_0x4b55('0xd')]+a5_0x4b55('0x58')};_0x102fd0[a5_0x4b55('0x59')](_0x3d9d9c,_0x34bd95=>{_0x3398fc[a5_0x4b55('0x11')](a5_0x4b55('0x19'),{'msg':a5_0x4b55('0x5a')});_0x23f7f4(_0x34bd95);});}],_0x46f4eb=>{if(_0x46f4eb){return _0x360cfd(_0x46f4eb);}_0x5766f1['redirect']('/');});};exports[a5_0x4b55('0x5b')]=(_0x40054f,_0x5db2f2)=>{if(_0x40054f[a5_0x4b55('0x43')]()){return _0x5db2f2[a5_0x4b55('0x8')]('/');}_0x5db2f2[a5_0x4b55('0x9')]('account/forgot',{'title':a5_0x4b55('0x5c')});};exports['postForgot']=(_0x238ca1,_0x3bb16f,_0x47c82e)=>{_0x238ca1[a5_0x4b55('0xc')](a5_0x4b55('0xd'),a5_0x4b55('0x2d'))[a5_0x4b55('0xf')]();_0x238ca1[a5_0x4b55('0x2e')]('email')[a5_0x4b55('0x24')]({'gmail_remove_dots':![]});const _0x5efb4f=_0x238ca1[a5_0x4b55('0x25')]();if(_0x5efb4f){_0x238ca1[a5_0x4b55('0x11')](a5_0x4b55('0x12'),_0x5efb4f);return _0x3bb16f[a5_0x4b55('0x8')](a5_0x4b55('0x47'));}async_1[a5_0x4b55('0x14')][a5_0x4b55('0x4c')]([function createRandomToken(_0x3a83f2){crypto_1[a5_0x4b55('0x14')][a5_0x4b55('0x5d')](0x10,(_0x31afe5,_0x1dc64f)=>{const _0x20d015=_0x1dc64f[a5_0x4b55('0x5e')](a5_0x4b55('0x5f'));_0x3a83f2(_0x31afe5,_0x20d015);});},function setRandomToken(_0x398c5a,_0x1a44d7){User_1['default'][a5_0x4b55('0x27')]({'email':_0x238ca1[a5_0x4b55('0x22')][a5_0x4b55('0xd')]},(_0x32560e,_0x15de4f)=>{if(_0x32560e){return _0x1a44d7(_0x32560e);}if(!_0x15de4f){_0x238ca1[a5_0x4b55('0x11')](a5_0x4b55('0x12'),{'msg':a5_0x4b55('0x60')});return _0x3bb16f[a5_0x4b55('0x8')](a5_0x4b55('0x47'));}_0x15de4f['passwordResetToken']=_0x398c5a;_0x15de4f[a5_0x4b55('0x4d')]=Date[a5_0x4b55('0x45')]()+0x36ee80;_0x15de4f[a5_0x4b55('0x29')](_0x32560e=>{_0x1a44d7(_0x32560e,_0x398c5a,_0x15de4f);});});},function sendForgotPasswordEmail(_0x506543,_0x589d8c,_0x4ce6bd){const _0x4b108f=nodemailer_1[a5_0x4b55('0x14')][a5_0x4b55('0x50')]({'service':a5_0x4b55('0x51'),'auth':{'user':process[a5_0x4b55('0x53')][a5_0x4b55('0x52')],'pass':process[a5_0x4b55('0x53')][a5_0x4b55('0x54')]}});const _0x3cdcb9={'to':_0x589d8c[a5_0x4b55('0xd')],'from':a5_0x4b55('0x61'),'subject':a5_0x4b55('0x62'),'text':a5_0x4b55('0x63')+_0x238ca1[a5_0x4b55('0x64')][a5_0x4b55('0x65')]+'/reset/'+_0x506543+a5_0x4b55('0x66')};_0x4b108f[a5_0x4b55('0x59')](_0x3cdcb9,_0x542859=>{_0x238ca1['flash'](a5_0x4b55('0x3d'),{'msg':a5_0x4b55('0x67')+_0x589d8c[a5_0x4b55('0xd')]+'\x20with\x20further\x20instructions.'});_0x4ce6bd(_0x542859);});}],_0x5a785d=>{if(_0x5a785d){return _0x47c82e(_0x5a785d);}_0x3bb16f[a5_0x4b55('0x8')]('/forgot');});};