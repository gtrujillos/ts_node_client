var a5_0x5cf0=['message','/login','logIn','success','session','returnTo','logout','getSignup','user','Create\x20Account','postSignup','confirmPassword','equals','body','normalizeEmail','/signup','default','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','Account\x20Management','postUpdateProfile','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','len','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','getOauthUnlink','params','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','findOne','token','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','account/reset','Password\x20Reset','postReset','confirm','Passwords\x20must\x20match.','waterfall','where','back','passwordResetToken','passwordResetExpires','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','Forgot\x20Password','postForgot','Please\x20enter\x20a\x20valid\x20email\x20address.','/forgot','toString','createTransport','SENDGRID_USER','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x20with\x20further\x20instructions.','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','redirect','render','account/login','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','validationErrors','flash','errors'];(function(_0xacd3cb,_0x5e7adc){var _0x4f4c37=function(_0x41c7b7){while(--_0x41c7b7){_0xacd3cb['push'](_0xacd3cb['shift']());}};_0x4f4c37(++_0x5e7adc);}(a5_0x5cf0,0x197));var a5_0x4f97=function(_0x1acee2,_0x1593d8){_0x1acee2=_0x1acee2-0x0;var _0x1a3016=a5_0x5cf0[_0x1acee2];return _0x1a3016;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1228c5){return _0x1228c5&&_0x1228c5[a5_0x4f97('0x0')]?_0x1228c5:{'default':_0x1228c5};};Object[a5_0x4f97('0x1')](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x4f97('0x2')));const crypto_1=__importDefault(require(a5_0x4f97('0x3')));const nodemailer_1=__importDefault(require(a5_0x4f97('0x4')));const passport_1=__importDefault(require(a5_0x4f97('0x5')));const User_1=__importDefault(require(a5_0x4f97('0x6')));const request=require(a5_0x4f97('0x7'));exports[a5_0x4f97('0x8')]=(_0x582190,_0x456410)=>{if(_0x582190['user']){return _0x456410[a5_0x4f97('0x9')]('/');}_0x456410[a5_0x4f97('0xa')](a5_0x4f97('0xb'),{'title':a5_0x4f97('0xc')});};exports[a5_0x4f97('0xd')]=(_0x511a43,_0x5c4ebe,_0x246ee1)=>{_0x511a43[a5_0x4f97('0xe')](a5_0x4f97('0xf'),a5_0x4f97('0x10'))[a5_0x4f97('0x11')]();_0x511a43[a5_0x4f97('0xe')](a5_0x4f97('0x12'),a5_0x4f97('0x13'))[a5_0x4f97('0x14')]();_0x511a43[a5_0x4f97('0x15')](a5_0x4f97('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x29c622=_0x511a43[a5_0x4f97('0x16')]();if(_0x29c622){_0x511a43[a5_0x4f97('0x17')](a5_0x4f97('0x18'),_0x29c622);return _0x5c4ebe[a5_0x4f97('0x9')]('/login');}passport_1['default']['authenticate']('local',(_0x220bb9,_0x152c13,_0x37db50)=>{if(_0x220bb9){return _0x246ee1(_0x220bb9);}if(!_0x152c13){_0x511a43['flash'](a5_0x4f97('0x18'),_0x37db50[a5_0x4f97('0x19')]);return _0x5c4ebe['redirect'](a5_0x4f97('0x1a'));}_0x511a43[a5_0x4f97('0x1b')](_0x152c13,_0x220bb9=>{if(_0x220bb9){return _0x246ee1(_0x220bb9);}_0x511a43['flash'](a5_0x4f97('0x1c'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x5c4ebe[a5_0x4f97('0x9')](_0x511a43[a5_0x4f97('0x1d')][a5_0x4f97('0x1e')]||'/');});})(_0x511a43,_0x5c4ebe,_0x246ee1);};exports[a5_0x4f97('0x1f')]=(_0x2f3564,_0x4a20bb)=>{_0x2f3564['logout']();_0x4a20bb['redirect']('/');};exports[a5_0x4f97('0x20')]=(_0x344720,_0x3ab5ee)=>{if(_0x344720[a5_0x4f97('0x21')]){return _0x3ab5ee[a5_0x4f97('0x9')]('/');}_0x3ab5ee[a5_0x4f97('0xa')]('account/signup',{'title':a5_0x4f97('0x22')});};exports[a5_0x4f97('0x23')]=(_0x4579f6,_0x96270b,_0xac22d6)=>{_0x4579f6[a5_0x4f97('0xe')](a5_0x4f97('0xf'),'Email\x20is\x20not\x20valid')[a5_0x4f97('0x11')]();_0x4579f6[a5_0x4f97('0xe')](a5_0x4f97('0x12'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x4579f6[a5_0x4f97('0xe')](a5_0x4f97('0x24'),'Passwords\x20do\x20not\x20match')[a5_0x4f97('0x25')](_0x4579f6[a5_0x4f97('0x26')][a5_0x4f97('0x12')]);_0x4579f6[a5_0x4f97('0x15')](a5_0x4f97('0xf'))[a5_0x4f97('0x27')]({'gmail_remove_dots':![]});const _0xb9a710=_0x4579f6[a5_0x4f97('0x16')]();if(_0xb9a710){_0x4579f6['flash'](a5_0x4f97('0x18'),_0xb9a710);return _0x96270b[a5_0x4f97('0x9')](a5_0x4f97('0x28'));}const _0x47dbfe=new User_1[(a5_0x4f97('0x29'))]({'email':_0x4579f6['body'][a5_0x4f97('0xf')],'password':_0x4579f6['body'][a5_0x4f97('0x12')]});User_1[a5_0x4f97('0x29')]['findOne']({'email':_0x4579f6[a5_0x4f97('0x26')][a5_0x4f97('0xf')]},(_0x332ac1,_0x30ccdb)=>{if(_0x332ac1){return _0xac22d6(_0x332ac1);}if(_0x30ccdb){_0x4579f6[a5_0x4f97('0x17')](a5_0x4f97('0x18'),{'msg':a5_0x4f97('0x2a')});return _0x96270b[a5_0x4f97('0x9')](a5_0x4f97('0x28'));}_0x47dbfe[a5_0x4f97('0x2b')](_0x332ac1=>{if(_0x332ac1){return _0xac22d6(_0x332ac1);}_0x4579f6[a5_0x4f97('0x1b')](_0x47dbfe,_0x332ac1=>{if(_0x332ac1){return _0xac22d6(_0x332ac1);}_0x96270b[a5_0x4f97('0x9')]('/');});});});};exports[a5_0x4f97('0x2c')]=(_0x3c1c21,_0x4368b0)=>{_0x4368b0[a5_0x4f97('0xa')]('account/profile',{'title':a5_0x4f97('0x2d')});};exports[a5_0x4f97('0x2e')]=(_0x5f1f29,_0xe7cb99,_0x3054d6)=>{_0x5f1f29['assert'](a5_0x4f97('0xf'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x4f97('0x11')]();_0x5f1f29['sanitize'](a5_0x4f97('0xf'))[a5_0x4f97('0x27')]({'gmail_remove_dots':![]});const _0x22c10d=_0x5f1f29[a5_0x4f97('0x16')]();if(_0x22c10d){_0x5f1f29[a5_0x4f97('0x17')]('errors',_0x22c10d);return _0xe7cb99[a5_0x4f97('0x9')](a5_0x4f97('0x2f'));}User_1[a5_0x4f97('0x29')][a5_0x4f97('0x30')](_0x5f1f29['user']['id'],(_0x345033,_0x2b99dd)=>{if(_0x345033){return _0x3054d6(_0x345033);}_0x2b99dd[a5_0x4f97('0xf')]=_0x5f1f29[a5_0x4f97('0x26')][a5_0x4f97('0xf')]||'';_0x2b99dd[a5_0x4f97('0x31')][a5_0x4f97('0x32')]=_0x5f1f29[a5_0x4f97('0x26')][a5_0x4f97('0x32')]||'';_0x2b99dd[a5_0x4f97('0x31')][a5_0x4f97('0x33')]=_0x5f1f29['body'][a5_0x4f97('0x33')]||'';_0x2b99dd[a5_0x4f97('0x31')]['location']=_0x5f1f29[a5_0x4f97('0x26')][a5_0x4f97('0x34')]||'';_0x2b99dd['profile'][a5_0x4f97('0x35')]=_0x5f1f29['body'][a5_0x4f97('0x35')]||'';_0x2b99dd[a5_0x4f97('0x2b')](_0x345033=>{if(_0x345033){if(_0x345033[a5_0x4f97('0x36')]===0x2af8){_0x5f1f29['flash'](a5_0x4f97('0x18'),{'msg':a5_0x4f97('0x37')});return _0xe7cb99['redirect']('/account');}return _0x3054d6(_0x345033);}_0x5f1f29['flash'](a5_0x4f97('0x1c'),{'msg':a5_0x4f97('0x38')});_0xe7cb99[a5_0x4f97('0x9')](a5_0x4f97('0x2f'));});});};exports[a5_0x4f97('0x39')]=(_0x2ee86e,_0x4b965e,_0x4af98e)=>{_0x2ee86e[a5_0x4f97('0xe')](a5_0x4f97('0x12'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x4f97('0x3a')]({'min':0x4});_0x2ee86e[a5_0x4f97('0xe')](a5_0x4f97('0x24'),a5_0x4f97('0x3b'))[a5_0x4f97('0x25')](_0x2ee86e['body'][a5_0x4f97('0x12')]);const _0x52457a=_0x2ee86e[a5_0x4f97('0x16')]();if(_0x52457a){_0x2ee86e[a5_0x4f97('0x17')]('errors',_0x52457a);return _0x4b965e['redirect']('/account');}User_1['default'][a5_0x4f97('0x30')](_0x2ee86e['user']['id'],(_0x577ee6,_0x5cbf4a)=>{if(_0x577ee6){return _0x4af98e(_0x577ee6);}_0x5cbf4a['password']=_0x2ee86e['body'][a5_0x4f97('0x12')];_0x5cbf4a[a5_0x4f97('0x2b')](_0x577ee6=>{if(_0x577ee6){return _0x4af98e(_0x577ee6);}_0x2ee86e[a5_0x4f97('0x17')](a5_0x4f97('0x1c'),{'msg':a5_0x4f97('0x3c')});_0x4b965e[a5_0x4f97('0x9')](a5_0x4f97('0x2f'));});});};exports[a5_0x4f97('0x3d')]=(_0xadd19,_0x3dffe5,_0x546637)=>{User_1[a5_0x4f97('0x29')][a5_0x4f97('0x3e')]({'_id':_0xadd19[a5_0x4f97('0x21')]['id']},_0x5c5dbb=>{if(_0x5c5dbb){return _0x546637(_0x5c5dbb);}_0xadd19[a5_0x4f97('0x1f')]();_0xadd19[a5_0x4f97('0x17')](a5_0x4f97('0x3f'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x3dffe5[a5_0x4f97('0x9')]('/');});};exports[a5_0x4f97('0x40')]=(_0x238ed8,_0x317ab1,_0x2cbc57)=>{const _0x44488e=_0x238ed8[a5_0x4f97('0x41')]['provider'];User_1[a5_0x4f97('0x29')][a5_0x4f97('0x30')](_0x238ed8[a5_0x4f97('0x21')]['id'],(_0x4742ac,_0x3f060f)=>{if(_0x4742ac){return _0x2cbc57(_0x4742ac);}_0x3f060f[_0x44488e]=undefined;_0x3f060f['tokens']=_0x3f060f[a5_0x4f97('0x42')][a5_0x4f97('0x43')](_0x31dc18=>_0x31dc18[a5_0x4f97('0x44')]!==_0x44488e);_0x3f060f[a5_0x4f97('0x2b')](_0x4742ac=>{if(_0x4742ac){return _0x2cbc57(_0x4742ac);}_0x238ed8[a5_0x4f97('0x17')](a5_0x4f97('0x3f'),{'msg':_0x44488e+a5_0x4f97('0x45')});_0x317ab1['redirect'](a5_0x4f97('0x2f'));});});};exports[a5_0x4f97('0x46')]=(_0x4781ee,_0x8e3772,_0x2dc38d)=>{if(_0x4781ee[a5_0x4f97('0x47')]()){return _0x8e3772[a5_0x4f97('0x9')]('/');}User_1['default'][a5_0x4f97('0x48')]({'passwordResetToken':_0x4781ee[a5_0x4f97('0x41')][a5_0x4f97('0x49')]})['where']('passwordResetExpires')['gt'](Date[a5_0x4f97('0x4a')]())[a5_0x4f97('0x4b')]((_0x53d797,_0xc80b0)=>{if(_0x53d797){return _0x2dc38d(_0x53d797);}if(!_0xc80b0){_0x4781ee['flash'](a5_0x4f97('0x18'),{'msg':a5_0x4f97('0x4c')});return _0x8e3772[a5_0x4f97('0x9')]('/forgot');}_0x8e3772[a5_0x4f97('0xa')](a5_0x4f97('0x4d'),{'title':a5_0x4f97('0x4e')});});};exports[a5_0x4f97('0x4f')]=(_0x58fb7a,_0x22cf3b,_0x370b63)=>{_0x58fb7a[a5_0x4f97('0xe')](a5_0x4f97('0x12'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')['len']({'min':0x4});_0x58fb7a[a5_0x4f97('0xe')](a5_0x4f97('0x50'),a5_0x4f97('0x51'))['equals'](_0x58fb7a[a5_0x4f97('0x26')][a5_0x4f97('0x12')]);const _0x5ef242=_0x58fb7a[a5_0x4f97('0x16')]();if(_0x5ef242){_0x58fb7a[a5_0x4f97('0x17')](a5_0x4f97('0x18'),_0x5ef242);return _0x22cf3b['redirect']('back');}async_1[a5_0x4f97('0x29')][a5_0x4f97('0x52')]([function resetPassword(_0x5a7cf8){User_1[a5_0x4f97('0x29')][a5_0x4f97('0x48')]({'passwordResetToken':_0x58fb7a[a5_0x4f97('0x41')]['token']})[a5_0x4f97('0x53')]('passwordResetExpires')['gt'](Date['now']())[a5_0x4f97('0x4b')]((_0x380d42,_0x112cc9)=>{if(_0x380d42){return _0x370b63(_0x380d42);}if(!_0x112cc9){_0x58fb7a[a5_0x4f97('0x17')](a5_0x4f97('0x18'),{'msg':a5_0x4f97('0x4c')});return _0x22cf3b['redirect'](a5_0x4f97('0x54'));}_0x112cc9['password']=_0x58fb7a[a5_0x4f97('0x26')]['password'];_0x112cc9[a5_0x4f97('0x55')]=undefined;_0x112cc9[a5_0x4f97('0x56')]=undefined;_0x112cc9[a5_0x4f97('0x2b')](_0x380d42=>{if(_0x380d42){return _0x370b63(_0x380d42);}_0x58fb7a[a5_0x4f97('0x1b')](_0x112cc9,_0x380d42=>{_0x5a7cf8(_0x380d42,_0x112cc9);});});});},function sendResetPasswordEmail(_0x21ee48,_0x42e5d6){const _0x36fb15=nodemailer_1[a5_0x4f97('0x29')]['createTransport']({'service':a5_0x4f97('0x57'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process[a5_0x4f97('0x58')][a5_0x4f97('0x59')]}});const _0xe593fc={'to':_0x21ee48[a5_0x4f97('0xf')],'from':a5_0x4f97('0x5a'),'subject':a5_0x4f97('0x5b'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x21ee48['email']+a5_0x4f97('0x5c')};_0x36fb15[a5_0x4f97('0x5d')](_0xe593fc,_0x4188fb=>{_0x58fb7a[a5_0x4f97('0x17')]('success',{'msg':a5_0x4f97('0x5e')});_0x42e5d6(_0x4188fb);});}],_0x122a71=>{if(_0x122a71){return _0x370b63(_0x122a71);}_0x22cf3b['redirect']('/');});};exports['getForgot']=(_0x41ae8c,_0x53580c)=>{if(_0x41ae8c['isAuthenticated']()){return _0x53580c['redirect']('/');}_0x53580c[a5_0x4f97('0xa')]('account/forgot',{'title':a5_0x4f97('0x5f')});};exports[a5_0x4f97('0x60')]=(_0x189564,_0x307408,_0x57f712)=>{_0x189564[a5_0x4f97('0xe')](a5_0x4f97('0xf'),a5_0x4f97('0x61'))[a5_0x4f97('0x11')]();_0x189564['sanitize'](a5_0x4f97('0xf'))[a5_0x4f97('0x27')]({'gmail_remove_dots':![]});const _0x15f1f1=_0x189564[a5_0x4f97('0x16')]();if(_0x15f1f1){_0x189564[a5_0x4f97('0x17')](a5_0x4f97('0x18'),_0x15f1f1);return _0x307408[a5_0x4f97('0x9')](a5_0x4f97('0x62'));}async_1['default'][a5_0x4f97('0x52')]([function createRandomToken(_0xb4815e){crypto_1[a5_0x4f97('0x29')]['randomBytes'](0x10,(_0x350ca9,_0x22753b)=>{const _0x302858=_0x22753b[a5_0x4f97('0x63')]('hex');_0xb4815e(_0x350ca9,_0x302858);});},function setRandomToken(_0x469cd8,_0x5f5fdc){User_1['default'][a5_0x4f97('0x48')]({'email':_0x189564[a5_0x4f97('0x26')][a5_0x4f97('0xf')]},(_0x2b4fb4,_0x33c827)=>{if(_0x2b4fb4){return _0x5f5fdc(_0x2b4fb4);}if(!_0x33c827){_0x189564[a5_0x4f97('0x17')](a5_0x4f97('0x18'),{'msg':'Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.'});return _0x307408['redirect']('/forgot');}_0x33c827['passwordResetToken']=_0x469cd8;_0x33c827[a5_0x4f97('0x56')]=Date[a5_0x4f97('0x4a')]()+0x36ee80;_0x33c827[a5_0x4f97('0x2b')](_0x2b4fb4=>{_0x5f5fdc(_0x2b4fb4,_0x469cd8,_0x33c827);});});},function sendForgotPasswordEmail(_0x7bb397,_0x2c0856,_0x3ddd41){const _0x426f57=nodemailer_1[a5_0x4f97('0x29')][a5_0x4f97('0x64')]({'service':a5_0x4f97('0x57'),'auth':{'user':process[a5_0x4f97('0x58')][a5_0x4f97('0x65')],'pass':process[a5_0x4f97('0x58')][a5_0x4f97('0x59')]}});const _0x24ce97={'to':_0x2c0856[a5_0x4f97('0xf')],'from':a5_0x4f97('0x66'),'subject':a5_0x4f97('0x67'),'text':a5_0x4f97('0x68')+_0x189564['headers'][a5_0x4f97('0x69')]+a5_0x4f97('0x6a')+_0x7bb397+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x426f57[a5_0x4f97('0x5d')](_0x24ce97,_0x499910=>{_0x189564[a5_0x4f97('0x17')](a5_0x4f97('0x3f'),{'msg':'An\x20e-mail\x20has\x20been\x20sent\x20to\x20'+_0x2c0856[a5_0x4f97('0xf')]+a5_0x4f97('0x6b')});_0x3ddd41(_0x499910);});}],_0x34e94f=>{if(_0x34e94f){return _0x57f712(_0x34e94f);}_0x307408[a5_0x4f97('0x9')]('/forgot');});};