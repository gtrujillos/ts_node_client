var a5_0x170f=['redirect','/login','default','local','flash','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','body','/signup','findOne','save','logIn','account/profile','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','isEmail','/account','findById','profile','name','gender','location','website','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','equals','validationErrors','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','now','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','postReset','len','confirm','Passwords\x20must\x20match.','back','params','token','passwordResetExpires','passwordResetToken','createTransport','SendGrid','SENDGRID_PASSWORD','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','account/forgot','Forgot\x20Password','postForgot','waterfall','randomBytes','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_USER','hackathon@starter.com','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','assert','password','Password\x20cannot\x20be\x20blank','sanitize','normalizeEmail','errors'];(function(_0x26ddb0,_0x5def6e){var _0x3c82ee=function(_0x18b36e){while(--_0x18b36e){_0x26ddb0['push'](_0x26ddb0['shift']());}};_0x3c82ee(++_0x5def6e);}(a5_0x170f,0xba));var a5_0x8b3b=function(_0x28d3e9,_0x596bca){_0x28d3e9=_0x28d3e9-0x0;var _0x40b898=a5_0x170f[_0x28d3e9];return _0x40b898;};'use strict';var __importDefault=this&&this[a5_0x8b3b('0x0')]||function(_0x110fa5){return _0x110fa5&&_0x110fa5[a5_0x8b3b('0x1')]?_0x110fa5:{'default':_0x110fa5};};Object['defineProperty'](exports,a5_0x8b3b('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x8b3b('0x2')));const crypto_1=__importDefault(require(a5_0x8b3b('0x3')));const nodemailer_1=__importDefault(require(a5_0x8b3b('0x4')));const passport_1=__importDefault(require(a5_0x8b3b('0x5')));const User_1=__importDefault(require(a5_0x8b3b('0x6')));const request=require(a5_0x8b3b('0x7'));exports[a5_0x8b3b('0x8')]=(_0x497576,_0x400e26)=>{if(_0x497576[a5_0x8b3b('0x9')]){return _0x400e26['redirect']('/');}_0x400e26[a5_0x8b3b('0xa')](a5_0x8b3b('0xb'),{'title':a5_0x8b3b('0xc')});};exports[a5_0x8b3b('0xd')]=(_0x2bb191,_0x2170bf,_0x34a1f3)=>{_0x2bb191['assert'](a5_0x8b3b('0xe'),a5_0x8b3b('0xf'))['isEmail']();_0x2bb191[a5_0x8b3b('0x10')](a5_0x8b3b('0x11'),a5_0x8b3b('0x12'))['notEmpty']();_0x2bb191[a5_0x8b3b('0x13')](a5_0x8b3b('0xe'))[a5_0x8b3b('0x14')]({'gmail_remove_dots':![]});const _0x2b671c=_0x2bb191['validationErrors']();if(_0x2b671c){_0x2bb191['flash'](a5_0x8b3b('0x15'),_0x2b671c);return _0x2170bf[a5_0x8b3b('0x16')](a5_0x8b3b('0x17'));}passport_1[a5_0x8b3b('0x18')]['authenticate'](a5_0x8b3b('0x19'),(_0x46a39f,_0x28a83f,_0xf3d285)=>{if(_0x46a39f){return _0x34a1f3(_0x46a39f);}if(!_0x28a83f){_0x2bb191['flash'](a5_0x8b3b('0x15'),_0xf3d285['message']);return _0x2170bf[a5_0x8b3b('0x16')](a5_0x8b3b('0x17'));}_0x2bb191['logIn'](_0x28a83f,_0x46a39f=>{if(_0x46a39f){return _0x34a1f3(_0x46a39f);}_0x2bb191[a5_0x8b3b('0x1a')](a5_0x8b3b('0x1b'),{'msg':a5_0x8b3b('0x1c')});_0x2170bf[a5_0x8b3b('0x16')](_0x2bb191['session'][a5_0x8b3b('0x1d')]||'/');});})(_0x2bb191,_0x2170bf,_0x34a1f3);};exports['logout']=(_0x5a1963,_0x3e4c76)=>{_0x5a1963[a5_0x8b3b('0x1e')]();_0x3e4c76[a5_0x8b3b('0x16')]('/');};exports[a5_0x8b3b('0x1f')]=(_0x39a2d5,_0x53d269)=>{if(_0x39a2d5[a5_0x8b3b('0x9')]){return _0x53d269['redirect']('/');}_0x53d269['render'](a5_0x8b3b('0x20'),{'title':a5_0x8b3b('0x21')});};exports[a5_0x8b3b('0x22')]=(_0x5efaee,_0x54963d,_0x3fd543)=>{_0x5efaee[a5_0x8b3b('0x10')](a5_0x8b3b('0xe'),a5_0x8b3b('0xf'))['isEmail']();_0x5efaee['assert'](a5_0x8b3b('0x11'),a5_0x8b3b('0x23'))['len']({'min':0x4});_0x5efaee[a5_0x8b3b('0x10')](a5_0x8b3b('0x24'),a5_0x8b3b('0x25'))['equals'](_0x5efaee[a5_0x8b3b('0x26')]['password']);_0x5efaee[a5_0x8b3b('0x13')](a5_0x8b3b('0xe'))[a5_0x8b3b('0x14')]({'gmail_remove_dots':![]});const _0x4deb76=_0x5efaee['validationErrors']();if(_0x4deb76){_0x5efaee[a5_0x8b3b('0x1a')](a5_0x8b3b('0x15'),_0x4deb76);return _0x54963d[a5_0x8b3b('0x16')](a5_0x8b3b('0x27'));}const _0x1b8631=new User_1['default']({'email':_0x5efaee['body'][a5_0x8b3b('0xe')],'password':_0x5efaee['body'][a5_0x8b3b('0x11')]});User_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x28')]({'email':_0x5efaee[a5_0x8b3b('0x26')][a5_0x8b3b('0xe')]},(_0x8f4b5,_0x1ca11f)=>{if(_0x8f4b5){return _0x3fd543(_0x8f4b5);}if(_0x1ca11f){_0x5efaee[a5_0x8b3b('0x1a')](a5_0x8b3b('0x15'),{'msg':'Account\x20with\x20that\x20email\x20address\x20already\x20exists.'});return _0x54963d['redirect'](a5_0x8b3b('0x27'));}_0x1b8631[a5_0x8b3b('0x29')](_0x8f4b5=>{if(_0x8f4b5){return _0x3fd543(_0x8f4b5);}_0x5efaee[a5_0x8b3b('0x2a')](_0x1b8631,_0x8f4b5=>{if(_0x8f4b5){return _0x3fd543(_0x8f4b5);}_0x54963d[a5_0x8b3b('0x16')]('/');});});});};exports['getAccount']=(_0xc0cbd8,_0x243813)=>{_0x243813['render'](a5_0x8b3b('0x2b'),{'title':'Account\x20Management'});};exports[a5_0x8b3b('0x2c')]=(_0x1a5d16,_0x73b475,_0x478521)=>{_0x1a5d16['assert'](a5_0x8b3b('0xe'),a5_0x8b3b('0x2d'))[a5_0x8b3b('0x2e')]();_0x1a5d16[a5_0x8b3b('0x13')](a5_0x8b3b('0xe'))[a5_0x8b3b('0x14')]({'gmail_remove_dots':![]});const _0x2bc7e3=_0x1a5d16['validationErrors']();if(_0x2bc7e3){_0x1a5d16['flash'](a5_0x8b3b('0x15'),_0x2bc7e3);return _0x73b475[a5_0x8b3b('0x16')](a5_0x8b3b('0x2f'));}User_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x30')](_0x1a5d16[a5_0x8b3b('0x9')]['id'],(_0x151006,_0x5a7919)=>{if(_0x151006){return _0x478521(_0x151006);}_0x5a7919[a5_0x8b3b('0xe')]=_0x1a5d16[a5_0x8b3b('0x26')][a5_0x8b3b('0xe')]||'';_0x5a7919[a5_0x8b3b('0x31')][a5_0x8b3b('0x32')]=_0x1a5d16[a5_0x8b3b('0x26')][a5_0x8b3b('0x32')]||'';_0x5a7919[a5_0x8b3b('0x31')]['gender']=_0x1a5d16[a5_0x8b3b('0x26')][a5_0x8b3b('0x33')]||'';_0x5a7919['profile'][a5_0x8b3b('0x34')]=_0x1a5d16[a5_0x8b3b('0x26')]['location']||'';_0x5a7919[a5_0x8b3b('0x31')][a5_0x8b3b('0x35')]=_0x1a5d16[a5_0x8b3b('0x26')][a5_0x8b3b('0x35')]||'';_0x5a7919[a5_0x8b3b('0x29')](_0x151006=>{if(_0x151006){if(_0x151006['code']===0x2af8){_0x1a5d16[a5_0x8b3b('0x1a')](a5_0x8b3b('0x15'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x73b475[a5_0x8b3b('0x16')](a5_0x8b3b('0x2f'));}return _0x478521(_0x151006);}_0x1a5d16[a5_0x8b3b('0x1a')](a5_0x8b3b('0x1b'),{'msg':a5_0x8b3b('0x36')});_0x73b475['redirect'](a5_0x8b3b('0x2f'));});});};exports[a5_0x8b3b('0x37')]=(_0x4c4b2e,_0x29670a,_0x18e629)=>{_0x4c4b2e[a5_0x8b3b('0x10')](a5_0x8b3b('0x11'),a5_0x8b3b('0x23'))['len']({'min':0x4});_0x4c4b2e[a5_0x8b3b('0x10')](a5_0x8b3b('0x24'),a5_0x8b3b('0x25'))[a5_0x8b3b('0x38')](_0x4c4b2e[a5_0x8b3b('0x26')]['password']);const _0x4a82c4=_0x4c4b2e[a5_0x8b3b('0x39')]();if(_0x4a82c4){_0x4c4b2e['flash'](a5_0x8b3b('0x15'),_0x4a82c4);return _0x29670a[a5_0x8b3b('0x16')](a5_0x8b3b('0x2f'));}User_1[a5_0x8b3b('0x18')]['findById'](_0x4c4b2e['user']['id'],(_0x5f2c5c,_0xc73398)=>{if(_0x5f2c5c){return _0x18e629(_0x5f2c5c);}_0xc73398['password']=_0x4c4b2e['body'][a5_0x8b3b('0x11')];_0xc73398[a5_0x8b3b('0x29')](_0x5f2c5c=>{if(_0x5f2c5c){return _0x18e629(_0x5f2c5c);}_0x4c4b2e[a5_0x8b3b('0x1a')](a5_0x8b3b('0x1b'),{'msg':a5_0x8b3b('0x3a')});_0x29670a['redirect'](a5_0x8b3b('0x2f'));});});};exports[a5_0x8b3b('0x3b')]=(_0x2d951a,_0x3e2716,_0x531945)=>{User_1['default'][a5_0x8b3b('0x3c')]({'_id':_0x2d951a[a5_0x8b3b('0x9')]['id']},_0x13c0e1=>{if(_0x13c0e1){return _0x531945(_0x13c0e1);}_0x2d951a[a5_0x8b3b('0x1e')]();_0x2d951a[a5_0x8b3b('0x1a')](a5_0x8b3b('0x3d'),{'msg':a5_0x8b3b('0x3e')});_0x3e2716['redirect']('/');});};exports[a5_0x8b3b('0x3f')]=(_0x58bf9b,_0x3921c0,_0x55864d)=>{const _0x2e15e9=_0x58bf9b['params'][a5_0x8b3b('0x40')];User_1['default'][a5_0x8b3b('0x30')](_0x58bf9b[a5_0x8b3b('0x9')]['id'],(_0x38153b,_0x5b48e6)=>{if(_0x38153b){return _0x55864d(_0x38153b);}_0x5b48e6[_0x2e15e9]=undefined;_0x5b48e6[a5_0x8b3b('0x41')]=_0x5b48e6[a5_0x8b3b('0x41')][a5_0x8b3b('0x42')](_0x4dbee4=>_0x4dbee4[a5_0x8b3b('0x43')]!==_0x2e15e9);_0x5b48e6[a5_0x8b3b('0x29')](_0x38153b=>{if(_0x38153b){return _0x55864d(_0x38153b);}_0x58bf9b[a5_0x8b3b('0x1a')](a5_0x8b3b('0x3d'),{'msg':_0x2e15e9+a5_0x8b3b('0x44')});_0x3921c0[a5_0x8b3b('0x16')](a5_0x8b3b('0x2f'));});});};exports[a5_0x8b3b('0x45')]=(_0x3b09f0,_0x4670cf,_0x145702)=>{if(_0x3b09f0[a5_0x8b3b('0x46')]()){return _0x4670cf[a5_0x8b3b('0x16')]('/');}User_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x28')]({'passwordResetToken':_0x3b09f0['params']['token']})['where']('passwordResetExpires')['gt'](Date[a5_0x8b3b('0x47')]())[a5_0x8b3b('0x48')]((_0xeee60c,_0x49a32d)=>{if(_0xeee60c){return _0x145702(_0xeee60c);}if(!_0x49a32d){_0x3b09f0['flash'](a5_0x8b3b('0x15'),{'msg':a5_0x8b3b('0x49')});return _0x4670cf['redirect'](a5_0x8b3b('0x4a'));}_0x4670cf['render'](a5_0x8b3b('0x4b'),{'title':'Password\x20Reset'});});};exports[a5_0x8b3b('0x4c')]=(_0x5b99e3,_0x2e5f48,_0x337a1b)=>{_0x5b99e3[a5_0x8b3b('0x10')](a5_0x8b3b('0x11'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x8b3b('0x4d')]({'min':0x4});_0x5b99e3['assert'](a5_0x8b3b('0x4e'),a5_0x8b3b('0x4f'))[a5_0x8b3b('0x38')](_0x5b99e3['body'][a5_0x8b3b('0x11')]);const _0x482d2b=_0x5b99e3[a5_0x8b3b('0x39')]();if(_0x482d2b){_0x5b99e3[a5_0x8b3b('0x1a')](a5_0x8b3b('0x15'),_0x482d2b);return _0x2e5f48[a5_0x8b3b('0x16')](a5_0x8b3b('0x50'));}async_1[a5_0x8b3b('0x18')]['waterfall']([function resetPassword(_0x4fef5e){User_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x28')]({'passwordResetToken':_0x5b99e3[a5_0x8b3b('0x51')][a5_0x8b3b('0x52')]})['where'](a5_0x8b3b('0x53'))['gt'](Date[a5_0x8b3b('0x47')]())[a5_0x8b3b('0x48')]((_0x10b00f,_0xfadef8)=>{if(_0x10b00f){return _0x337a1b(_0x10b00f);}if(!_0xfadef8){_0x5b99e3[a5_0x8b3b('0x1a')](a5_0x8b3b('0x15'),{'msg':a5_0x8b3b('0x49')});return _0x2e5f48['redirect']('back');}_0xfadef8['password']=_0x5b99e3[a5_0x8b3b('0x26')][a5_0x8b3b('0x11')];_0xfadef8[a5_0x8b3b('0x54')]=undefined;_0xfadef8[a5_0x8b3b('0x53')]=undefined;_0xfadef8[a5_0x8b3b('0x29')](_0x10b00f=>{if(_0x10b00f){return _0x337a1b(_0x10b00f);}_0x5b99e3[a5_0x8b3b('0x2a')](_0xfadef8,_0x10b00f=>{_0x4fef5e(_0x10b00f,_0xfadef8);});});});},function sendResetPasswordEmail(_0x2bdadd,_0x39d8a7){const _0x403a15=nodemailer_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x55')]({'service':a5_0x8b3b('0x56'),'auth':{'user':process['env']['SENDGRID_USER'],'pass':process['env'][a5_0x8b3b('0x57')]}});const _0x2701b0={'to':_0x2bdadd['email'],'from':'express-ts@starter.com','subject':a5_0x8b3b('0x58'),'text':a5_0x8b3b('0x59')+_0x2bdadd[a5_0x8b3b('0xe')]+'\x20has\x20just\x20been\x20changed.\x0a'};_0x403a15[a5_0x8b3b('0x5a')](_0x2701b0,_0xbadf9d=>{_0x5b99e3[a5_0x8b3b('0x1a')](a5_0x8b3b('0x1b'),{'msg':a5_0x8b3b('0x5b')});_0x39d8a7(_0xbadf9d);});}],_0x346ad4=>{if(_0x346ad4){return _0x337a1b(_0x346ad4);}_0x2e5f48[a5_0x8b3b('0x16')]('/');});};exports[a5_0x8b3b('0x5c')]=(_0x587260,_0x3cdbb8)=>{if(_0x587260['isAuthenticated']()){return _0x3cdbb8[a5_0x8b3b('0x16')]('/');}_0x3cdbb8[a5_0x8b3b('0xa')](a5_0x8b3b('0x5d'),{'title':a5_0x8b3b('0x5e')});};exports[a5_0x8b3b('0x5f')]=(_0x3f6fa8,_0xa78ebe,_0x22caef)=>{_0x3f6fa8['assert'](a5_0x8b3b('0xe'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x8b3b('0x2e')]();_0x3f6fa8['sanitize'](a5_0x8b3b('0xe'))[a5_0x8b3b('0x14')]({'gmail_remove_dots':![]});const _0x4a852e=_0x3f6fa8['validationErrors']();if(_0x4a852e){_0x3f6fa8[a5_0x8b3b('0x1a')]('errors',_0x4a852e);return _0xa78ebe[a5_0x8b3b('0x16')](a5_0x8b3b('0x4a'));}async_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x60')]([function createRandomToken(_0x4b4495){crypto_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x61')](0x10,(_0x1a4d70,_0x2c9507)=>{const _0x954f8f=_0x2c9507['toString']('hex');_0x4b4495(_0x1a4d70,_0x954f8f);});},function setRandomToken(_0x19094f,_0x692fa1){User_1['default'][a5_0x8b3b('0x28')]({'email':_0x3f6fa8[a5_0x8b3b('0x26')][a5_0x8b3b('0xe')]},(_0x1b1635,_0x564593)=>{if(_0x1b1635){return _0x692fa1(_0x1b1635);}if(!_0x564593){_0x3f6fa8[a5_0x8b3b('0x1a')](a5_0x8b3b('0x15'),{'msg':a5_0x8b3b('0x62')});return _0xa78ebe[a5_0x8b3b('0x16')](a5_0x8b3b('0x4a'));}_0x564593['passwordResetToken']=_0x19094f;_0x564593[a5_0x8b3b('0x53')]=Date[a5_0x8b3b('0x47')]()+0x36ee80;_0x564593[a5_0x8b3b('0x29')](_0x1b1635=>{_0x692fa1(_0x1b1635,_0x19094f,_0x564593);});});},function sendForgotPasswordEmail(_0x17d730,_0x38be52,_0x2d1673){const _0x3346ce=nodemailer_1[a5_0x8b3b('0x18')][a5_0x8b3b('0x55')]({'service':'SendGrid','auth':{'user':process['env'][a5_0x8b3b('0x63')],'pass':process['env'][a5_0x8b3b('0x57')]}});const _0x16e034={'to':_0x38be52[a5_0x8b3b('0xe')],'from':a5_0x8b3b('0x64'),'subject':'Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','text':'You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://'+_0x3f6fa8['headers']['host']+a5_0x8b3b('0x65')+_0x17d730+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x3346ce[a5_0x8b3b('0x5a')](_0x16e034,_0xe0cab4=>{_0x3f6fa8['flash'](a5_0x8b3b('0x3d'),{'msg':a5_0x8b3b('0x66')+_0x38be52[a5_0x8b3b('0xe')]+a5_0x8b3b('0x67')});_0x2d1673(_0xe0cab4);});}],_0x4e914c=>{if(_0x4e914c){return _0x22caef(_0x4e914c);}_0xa78ebe['redirect'](a5_0x8b3b('0x4a'));});};