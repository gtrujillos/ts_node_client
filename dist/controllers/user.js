var a5_0x2701=['env','SENDGRID_USER','express-ts@starter.com','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','getForgot','isAuthenticated','account/forgot','Forgot\x20Password','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','passport','../models/User','express-validator','user','render','account/login','postLogin','assert','email','Email\x20is\x20not\x20valid','password','Password\x20cannot\x20be\x20blank','notEmpty','normalizeEmail','validationErrors','flash','errors','redirect','/login','default','authenticate','local','message','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','returnTo','logout','getSignup','account/signup','Create\x20Account','postSignup','isEmail','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','equals','body','sanitize','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','getAccount','account/profile','Account\x20Management','postUpdateProfile','/account','findById','profile','name','gender','location','website','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Passwords\x20do\x20not\x20match','Password\x20has\x20been\x20changed.','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','info','getReset','token','where','passwordResetExpires','now','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','waterfall','passwordResetToken','createTransport','SendGrid'];(function(_0x3f8982,_0x4d8713){var _0x27b37a=function(_0x52c0d6){while(--_0x52c0d6){_0x3f8982['push'](_0x3f8982['shift']());}};_0x27b37a(++_0x4d8713);}(a5_0x2701,0x1d3));var a5_0x5a76=function(_0x488c15,_0x4d7a2e){_0x488c15=_0x488c15-0x0;var _0x280aad=a5_0x2701[_0x488c15];return _0x280aad;};'use strict';var __importDefault=this&&this[a5_0x5a76('0x0')]||function(_0x4a70dc){return _0x4a70dc&&_0x4a70dc['__esModule']?_0x4a70dc:{'default':_0x4a70dc};};Object['defineProperty'](exports,a5_0x5a76('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x5a76('0x2')));const crypto_1=__importDefault(require(a5_0x5a76('0x3')));const nodemailer_1=__importDefault(require(a5_0x5a76('0x4')));const passport_1=__importDefault(require(a5_0x5a76('0x5')));const User_1=__importDefault(require(a5_0x5a76('0x6')));const request=require(a5_0x5a76('0x7'));exports['getLogin']=(_0x3ba3d2,_0x452533)=>{if(_0x3ba3d2[a5_0x5a76('0x8')]){return _0x452533['redirect']('/');}_0x452533[a5_0x5a76('0x9')](a5_0x5a76('0xa'),{'title':'Login'});};exports[a5_0x5a76('0xb')]=(_0x54e1a1,_0x2c3a59,_0x1dc23f)=>{_0x54e1a1[a5_0x5a76('0xc')](a5_0x5a76('0xd'),a5_0x5a76('0xe'))['isEmail']();_0x54e1a1['assert'](a5_0x5a76('0xf'),a5_0x5a76('0x10'))[a5_0x5a76('0x11')]();_0x54e1a1['sanitize'](a5_0x5a76('0xd'))[a5_0x5a76('0x12')]({'gmail_remove_dots':![]});const _0x5ee1b3=_0x54e1a1[a5_0x5a76('0x13')]();if(_0x5ee1b3){_0x54e1a1[a5_0x5a76('0x14')](a5_0x5a76('0x15'),_0x5ee1b3);return _0x2c3a59[a5_0x5a76('0x16')](a5_0x5a76('0x17'));}passport_1[a5_0x5a76('0x18')][a5_0x5a76('0x19')](a5_0x5a76('0x1a'),(_0x49df57,_0x522295,_0x4b6d32)=>{if(_0x49df57){return _0x1dc23f(_0x49df57);}if(!_0x522295){_0x54e1a1[a5_0x5a76('0x14')]('errors',_0x4b6d32[a5_0x5a76('0x1b')]);return _0x2c3a59[a5_0x5a76('0x16')](a5_0x5a76('0x17'));}_0x54e1a1[a5_0x5a76('0x1c')](_0x522295,_0x49df57=>{if(_0x49df57){return _0x1dc23f(_0x49df57);}_0x54e1a1[a5_0x5a76('0x14')](a5_0x5a76('0x1d'),{'msg':a5_0x5a76('0x1e')});_0x2c3a59[a5_0x5a76('0x16')](_0x54e1a1[a5_0x5a76('0x1f')][a5_0x5a76('0x20')]||'/');});})(_0x54e1a1,_0x2c3a59,_0x1dc23f);};exports[a5_0x5a76('0x21')]=(_0x355e71,_0x2218a1)=>{_0x355e71[a5_0x5a76('0x21')]();_0x2218a1[a5_0x5a76('0x16')]('/');};exports[a5_0x5a76('0x22')]=(_0x2be0fc,_0x226a6a)=>{if(_0x2be0fc[a5_0x5a76('0x8')]){return _0x226a6a[a5_0x5a76('0x16')]('/');}_0x226a6a['render'](a5_0x5a76('0x23'),{'title':a5_0x5a76('0x24')});};exports[a5_0x5a76('0x25')]=(_0x4ad12c,_0x5aaed2,_0x3f5087)=>{_0x4ad12c[a5_0x5a76('0xc')](a5_0x5a76('0xd'),a5_0x5a76('0xe'))[a5_0x5a76('0x26')]();_0x4ad12c[a5_0x5a76('0xc')]('password',a5_0x5a76('0x27'))[a5_0x5a76('0x28')]({'min':0x4});_0x4ad12c[a5_0x5a76('0xc')](a5_0x5a76('0x29'),'Passwords\x20do\x20not\x20match')[a5_0x5a76('0x2a')](_0x4ad12c[a5_0x5a76('0x2b')][a5_0x5a76('0xf')]);_0x4ad12c[a5_0x5a76('0x2c')](a5_0x5a76('0xd'))['normalizeEmail']({'gmail_remove_dots':![]});const _0xc6314d=_0x4ad12c[a5_0x5a76('0x13')]();if(_0xc6314d){_0x4ad12c['flash'](a5_0x5a76('0x15'),_0xc6314d);return _0x5aaed2[a5_0x5a76('0x16')](a5_0x5a76('0x2d'));}const _0x1dcb56=new User_1[(a5_0x5a76('0x18'))]({'email':_0x4ad12c[a5_0x5a76('0x2b')][a5_0x5a76('0xd')],'password':_0x4ad12c[a5_0x5a76('0x2b')][a5_0x5a76('0xf')]});User_1[a5_0x5a76('0x18')][a5_0x5a76('0x2e')]({'email':_0x4ad12c[a5_0x5a76('0x2b')][a5_0x5a76('0xd')]},(_0x2be314,_0x3c9516)=>{if(_0x2be314){return _0x3f5087(_0x2be314);}if(_0x3c9516){_0x4ad12c[a5_0x5a76('0x14')](a5_0x5a76('0x15'),{'msg':a5_0x5a76('0x2f')});return _0x5aaed2['redirect'](a5_0x5a76('0x2d'));}_0x1dcb56[a5_0x5a76('0x30')](_0x2be314=>{if(_0x2be314){return _0x3f5087(_0x2be314);}_0x4ad12c[a5_0x5a76('0x1c')](_0x1dcb56,_0x2be314=>{if(_0x2be314){return _0x3f5087(_0x2be314);}_0x5aaed2[a5_0x5a76('0x16')]('/');});});});};exports[a5_0x5a76('0x31')]=(_0x17fd5d,_0x31e764)=>{_0x31e764[a5_0x5a76('0x9')](a5_0x5a76('0x32'),{'title':a5_0x5a76('0x33')});};exports[a5_0x5a76('0x34')]=(_0x5d6f5f,_0x42c1c2,_0x4f83b6)=>{_0x5d6f5f[a5_0x5a76('0xc')](a5_0x5a76('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x5a76('0x26')]();_0x5d6f5f['sanitize']('email')[a5_0x5a76('0x12')]({'gmail_remove_dots':![]});const _0x3eadbb=_0x5d6f5f['validationErrors']();if(_0x3eadbb){_0x5d6f5f['flash'](a5_0x5a76('0x15'),_0x3eadbb);return _0x42c1c2[a5_0x5a76('0x16')](a5_0x5a76('0x35'));}User_1['default'][a5_0x5a76('0x36')](_0x5d6f5f[a5_0x5a76('0x8')]['id'],(_0x24058e,_0x3c8718)=>{if(_0x24058e){return _0x4f83b6(_0x24058e);}_0x3c8718[a5_0x5a76('0xd')]=_0x5d6f5f['body'][a5_0x5a76('0xd')]||'';_0x3c8718[a5_0x5a76('0x37')]['name']=_0x5d6f5f[a5_0x5a76('0x2b')][a5_0x5a76('0x38')]||'';_0x3c8718[a5_0x5a76('0x37')][a5_0x5a76('0x39')]=_0x5d6f5f[a5_0x5a76('0x2b')][a5_0x5a76('0x39')]||'';_0x3c8718[a5_0x5a76('0x37')][a5_0x5a76('0x3a')]=_0x5d6f5f['body']['location']||'';_0x3c8718[a5_0x5a76('0x37')][a5_0x5a76('0x3b')]=_0x5d6f5f[a5_0x5a76('0x2b')]['website']||'';_0x3c8718[a5_0x5a76('0x30')](_0x24058e=>{if(_0x24058e){if(_0x24058e['code']===0x2af8){_0x5d6f5f[a5_0x5a76('0x14')](a5_0x5a76('0x15'),{'msg':a5_0x5a76('0x3c')});return _0x42c1c2[a5_0x5a76('0x16')](a5_0x5a76('0x35'));}return _0x4f83b6(_0x24058e);}_0x5d6f5f[a5_0x5a76('0x14')](a5_0x5a76('0x1d'),{'msg':a5_0x5a76('0x3d')});_0x42c1c2[a5_0x5a76('0x16')](a5_0x5a76('0x35'));});});};exports[a5_0x5a76('0x3e')]=(_0x5e6918,_0x527438,_0x6604c1)=>{_0x5e6918[a5_0x5a76('0xc')](a5_0x5a76('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x5a76('0x28')]({'min':0x4});_0x5e6918['assert'](a5_0x5a76('0x29'),a5_0x5a76('0x3f'))['equals'](_0x5e6918[a5_0x5a76('0x2b')][a5_0x5a76('0xf')]);const _0x1719b6=_0x5e6918[a5_0x5a76('0x13')]();if(_0x1719b6){_0x5e6918['flash']('errors',_0x1719b6);return _0x527438[a5_0x5a76('0x16')](a5_0x5a76('0x35'));}User_1[a5_0x5a76('0x18')][a5_0x5a76('0x36')](_0x5e6918[a5_0x5a76('0x8')]['id'],(_0x33957f,_0x39cd0a)=>{if(_0x33957f){return _0x6604c1(_0x33957f);}_0x39cd0a[a5_0x5a76('0xf')]=_0x5e6918[a5_0x5a76('0x2b')]['password'];_0x39cd0a[a5_0x5a76('0x30')](_0x33957f=>{if(_0x33957f){return _0x6604c1(_0x33957f);}_0x5e6918['flash'](a5_0x5a76('0x1d'),{'msg':a5_0x5a76('0x40')});_0x527438[a5_0x5a76('0x16')](a5_0x5a76('0x35'));});});};exports['postDeleteAccount']=(_0x35d850,_0x458f20,_0x1d9aef)=>{User_1['default'][a5_0x5a76('0x41')]({'_id':_0x35d850[a5_0x5a76('0x8')]['id']},_0x1ca621=>{if(_0x1ca621){return _0x1d9aef(_0x1ca621);}_0x35d850[a5_0x5a76('0x21')]();_0x35d850['flash']('info',{'msg':a5_0x5a76('0x42')});_0x458f20['redirect']('/');});};exports[a5_0x5a76('0x43')]=(_0x2a6302,_0x328ae3,_0x59de29)=>{const _0x33b3b9=_0x2a6302[a5_0x5a76('0x44')][a5_0x5a76('0x45')];User_1[a5_0x5a76('0x18')][a5_0x5a76('0x36')](_0x2a6302['user']['id'],(_0x397733,_0x1f19e0)=>{if(_0x397733){return _0x59de29(_0x397733);}_0x1f19e0[_0x33b3b9]=undefined;_0x1f19e0[a5_0x5a76('0x46')]=_0x1f19e0[a5_0x5a76('0x46')]['filter'](_0x3dd030=>_0x3dd030['kind']!==_0x33b3b9);_0x1f19e0[a5_0x5a76('0x30')](_0x397733=>{if(_0x397733){return _0x59de29(_0x397733);}_0x2a6302[a5_0x5a76('0x14')](a5_0x5a76('0x47'),{'msg':_0x33b3b9+'\x20account\x20has\x20been\x20unlinked.'});_0x328ae3['redirect'](a5_0x5a76('0x35'));});});};exports[a5_0x5a76('0x48')]=(_0x5ae005,_0x2fcd62,_0x1ea7f9)=>{if(_0x5ae005['isAuthenticated']()){return _0x2fcd62['redirect']('/');}User_1[a5_0x5a76('0x18')][a5_0x5a76('0x2e')]({'passwordResetToken':_0x5ae005[a5_0x5a76('0x44')][a5_0x5a76('0x49')]})[a5_0x5a76('0x4a')](a5_0x5a76('0x4b'))['gt'](Date[a5_0x5a76('0x4c')]())['exec']((_0x47f096,_0x54af2e)=>{if(_0x47f096){return _0x1ea7f9(_0x47f096);}if(!_0x54af2e){_0x5ae005['flash']('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x2fcd62['redirect'](a5_0x5a76('0x4d'));}_0x2fcd62[a5_0x5a76('0x9')](a5_0x5a76('0x4e'),{'title':a5_0x5a76('0x4f')});});};exports[a5_0x5a76('0x50')]=(_0x571799,_0x209c8e,_0x2421e4)=>{_0x571799[a5_0x5a76('0xc')]('password',a5_0x5a76('0x51'))[a5_0x5a76('0x28')]({'min':0x4});_0x571799['assert'](a5_0x5a76('0x52'),a5_0x5a76('0x53'))[a5_0x5a76('0x2a')](_0x571799['body'][a5_0x5a76('0xf')]);const _0x5818bd=_0x571799[a5_0x5a76('0x13')]();if(_0x5818bd){_0x571799[a5_0x5a76('0x14')](a5_0x5a76('0x15'),_0x5818bd);return _0x209c8e[a5_0x5a76('0x16')]('back');}async_1[a5_0x5a76('0x18')][a5_0x5a76('0x54')]([function resetPassword(_0x1b9080){User_1['default'][a5_0x5a76('0x2e')]({'passwordResetToken':_0x571799[a5_0x5a76('0x44')][a5_0x5a76('0x49')]})['where'](a5_0x5a76('0x4b'))['gt'](Date[a5_0x5a76('0x4c')]())['exec']((_0x2ab61c,_0x295deb)=>{if(_0x2ab61c){return _0x2421e4(_0x2ab61c);}if(!_0x295deb){_0x571799[a5_0x5a76('0x14')](a5_0x5a76('0x15'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x209c8e[a5_0x5a76('0x16')]('back');}_0x295deb['password']=_0x571799[a5_0x5a76('0x2b')]['password'];_0x295deb[a5_0x5a76('0x55')]=undefined;_0x295deb['passwordResetExpires']=undefined;_0x295deb[a5_0x5a76('0x30')](_0x2ab61c=>{if(_0x2ab61c){return _0x2421e4(_0x2ab61c);}_0x571799[a5_0x5a76('0x1c')](_0x295deb,_0x2ab61c=>{_0x1b9080(_0x2ab61c,_0x295deb);});});});},function sendResetPasswordEmail(_0x2db713,_0x412ab4){const _0x20e80b=nodemailer_1['default'][a5_0x5a76('0x56')]({'service':a5_0x5a76('0x57'),'auth':{'user':process[a5_0x5a76('0x58')][a5_0x5a76('0x59')],'pass':process[a5_0x5a76('0x58')]['SENDGRID_PASSWORD']}});const _0x1fd227={'to':_0x2db713['email'],'from':a5_0x5a76('0x5a'),'subject':'Your\x20password\x20has\x20been\x20changed','text':a5_0x5a76('0x5b')+_0x2db713[a5_0x5a76('0xd')]+a5_0x5a76('0x5c')};_0x20e80b[a5_0x5a76('0x5d')](_0x1fd227,_0x5acf6d=>{_0x571799[a5_0x5a76('0x14')](a5_0x5a76('0x1d'),{'msg':a5_0x5a76('0x5e')});_0x412ab4(_0x5acf6d);});}],_0x124c4d=>{if(_0x124c4d){return _0x2421e4(_0x124c4d);}_0x209c8e[a5_0x5a76('0x16')]('/');});};exports[a5_0x5a76('0x5f')]=(_0x10c5a7,_0xd48bf9)=>{if(_0x10c5a7[a5_0x5a76('0x60')]()){return _0xd48bf9[a5_0x5a76('0x16')]('/');}_0xd48bf9[a5_0x5a76('0x9')](a5_0x5a76('0x61'),{'title':a5_0x5a76('0x62')});};exports['postForgot']=(_0x8cd824,_0x379ba3,_0x28c772)=>{_0x8cd824[a5_0x5a76('0xc')](a5_0x5a76('0xd'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x5a76('0x26')]();_0x8cd824[a5_0x5a76('0x2c')](a5_0x5a76('0xd'))[a5_0x5a76('0x12')]({'gmail_remove_dots':![]});const _0x3d7108=_0x8cd824['validationErrors']();if(_0x3d7108){_0x8cd824[a5_0x5a76('0x14')](a5_0x5a76('0x15'),_0x3d7108);return _0x379ba3[a5_0x5a76('0x16')]('/forgot');}async_1['default'][a5_0x5a76('0x54')]([function createRandomToken(_0x304694){crypto_1[a5_0x5a76('0x18')][a5_0x5a76('0x63')](0x10,(_0x3a6dee,_0x49ae71)=>{const _0x40aaf2=_0x49ae71['toString'](a5_0x5a76('0x64'));_0x304694(_0x3a6dee,_0x40aaf2);});},function setRandomToken(_0x3a718b,_0x9a99ab){User_1[a5_0x5a76('0x18')][a5_0x5a76('0x2e')]({'email':_0x8cd824[a5_0x5a76('0x2b')]['email']},(_0x109875,_0x309d13)=>{if(_0x109875){return _0x9a99ab(_0x109875);}if(!_0x309d13){_0x8cd824[a5_0x5a76('0x14')]('errors',{'msg':a5_0x5a76('0x65')});return _0x379ba3[a5_0x5a76('0x16')]('/forgot');}_0x309d13[a5_0x5a76('0x55')]=_0x3a718b;_0x309d13[a5_0x5a76('0x4b')]=Date[a5_0x5a76('0x4c')]()+0x36ee80;_0x309d13[a5_0x5a76('0x30')](_0x109875=>{_0x9a99ab(_0x109875,_0x3a718b,_0x309d13);});});},function sendForgotPasswordEmail(_0x37c611,_0xb69ecd,_0xe97998){const _0x4715ed=nodemailer_1[a5_0x5a76('0x18')][a5_0x5a76('0x56')]({'service':a5_0x5a76('0x57'),'auth':{'user':process[a5_0x5a76('0x58')][a5_0x5a76('0x59')],'pass':process[a5_0x5a76('0x58')][a5_0x5a76('0x66')]}});const _0x2cfdd5={'to':_0xb69ecd[a5_0x5a76('0xd')],'from':a5_0x5a76('0x67'),'subject':a5_0x5a76('0x68'),'text':a5_0x5a76('0x69')+_0x8cd824[a5_0x5a76('0x6a')][a5_0x5a76('0x6b')]+'/reset/'+_0x37c611+a5_0x5a76('0x6c')};_0x4715ed['sendMail'](_0x2cfdd5,_0x46fa75=>{_0x8cd824[a5_0x5a76('0x14')](a5_0x5a76('0x47'),{'msg':a5_0x5a76('0x6d')+_0xb69ecd['email']+a5_0x5a76('0x6e')});_0xe97998(_0x46fa75);});}],_0x1eaf0b=>{if(_0x1eaf0b){return _0x28c772(_0x1eaf0b);}_0x379ba3[a5_0x5a76('0x16')]('/forgot');});};