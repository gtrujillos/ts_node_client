var a5_0x4dcf=['params','tokens','kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','where','passwordResetExpires','now','/forgot','account/reset','Password\x20Reset','postReset','len','Passwords\x20must\x20match.','back','waterfall','token','exec','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','SendGrid','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','\x20has\x20just\x20been\x20changed.\x0a','sendMail','getForgot','account/forgot','postForgot','randomBytes','toString','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','defineProperty','__esModule','async','nodemailer','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','assert','email','isEmail','password','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','default','local','/login','logIn','success','Success!\x20You\x20are\x20logged\x20in.','session','logout','postSignup','Email\x20is\x20not\x20valid','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','location','website','code','postUpdatePassword','save','Password\x20has\x20been\x20changed.','postDeleteAccount','remove','info'];(function(_0x421487,_0x2e30d0){var _0x1b996b=function(_0x3be238){while(--_0x3be238){_0x421487['push'](_0x421487['shift']());}};_0x1b996b(++_0x2e30d0);}(a5_0x4dcf,0x1c9));var a5_0x5a16=function(_0x20583a,_0x420121){_0x20583a=_0x20583a-0x0;var _0x32606c=a5_0x4dcf[_0x20583a];return _0x32606c;};'use strict';var __importDefault=this&&this[a5_0x5a16('0x0')]||function(_0x3885a4){return _0x3885a4&&_0x3885a4['__esModule']?_0x3885a4:{'default':_0x3885a4};};Object[a5_0x5a16('0x1')](exports,a5_0x5a16('0x2'),{'value':!![]});const async_1=__importDefault(require(a5_0x5a16('0x3')));const crypto_1=__importDefault(require('crypto'));const nodemailer_1=__importDefault(require(a5_0x5a16('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x5a16('0x5')));const request=require(a5_0x5a16('0x6'));exports[a5_0x5a16('0x7')]=(_0x395a20,_0x8487d3)=>{if(_0x395a20[a5_0x5a16('0x8')]){return _0x8487d3[a5_0x5a16('0x9')]('/');}_0x8487d3[a5_0x5a16('0xa')](a5_0x5a16('0xb'),{'title':a5_0x5a16('0xc')});};exports['postLogin']=(_0x2bb3e2,_0xf84a19,_0x1b3dd0)=>{_0x2bb3e2[a5_0x5a16('0xd')](a5_0x5a16('0xe'),'Email\x20is\x20not\x20valid')[a5_0x5a16('0xf')]();_0x2bb3e2['assert'](a5_0x5a16('0x10'),'Password\x20cannot\x20be\x20blank')[a5_0x5a16('0x11')]();_0x2bb3e2[a5_0x5a16('0x12')](a5_0x5a16('0xe'))[a5_0x5a16('0x13')]({'gmail_remove_dots':![]});const _0x3150df=_0x2bb3e2[a5_0x5a16('0x14')]();if(_0x3150df){_0x2bb3e2[a5_0x5a16('0x15')](a5_0x5a16('0x16'),_0x3150df);return _0xf84a19[a5_0x5a16('0x9')]('/login');}passport_1[a5_0x5a16('0x17')]['authenticate'](a5_0x5a16('0x18'),(_0x5d5924,_0x25d7f2,_0x2c76b7)=>{if(_0x5d5924){return _0x1b3dd0(_0x5d5924);}if(!_0x25d7f2){_0x2bb3e2[a5_0x5a16('0x15')]('errors',_0x2c76b7['message']);return _0xf84a19['redirect'](a5_0x5a16('0x19'));}_0x2bb3e2[a5_0x5a16('0x1a')](_0x25d7f2,_0x5d5924=>{if(_0x5d5924){return _0x1b3dd0(_0x5d5924);}_0x2bb3e2[a5_0x5a16('0x15')](a5_0x5a16('0x1b'),{'msg':a5_0x5a16('0x1c')});_0xf84a19['redirect'](_0x2bb3e2[a5_0x5a16('0x1d')]['returnTo']||'/');});})(_0x2bb3e2,_0xf84a19,_0x1b3dd0);};exports[a5_0x5a16('0x1e')]=(_0x5c96a6,_0x303321)=>{_0x5c96a6['logout']();_0x303321[a5_0x5a16('0x9')]('/');};exports['getSignup']=(_0xee4408,_0x3197f7)=>{if(_0xee4408[a5_0x5a16('0x8')]){return _0x3197f7['redirect']('/');}_0x3197f7[a5_0x5a16('0xa')]('account/signup',{'title':'Create\x20Account'});};exports[a5_0x5a16('0x1f')]=(_0x1455ab,_0x58c3ab,_0x4d374b)=>{_0x1455ab[a5_0x5a16('0xd')](a5_0x5a16('0xe'),a5_0x5a16('0x20'))[a5_0x5a16('0xf')]();_0x1455ab[a5_0x5a16('0xd')](a5_0x5a16('0x10'),a5_0x5a16('0x21'))['len']({'min':0x4});_0x1455ab[a5_0x5a16('0xd')](a5_0x5a16('0x22'),a5_0x5a16('0x23'))[a5_0x5a16('0x24')](_0x1455ab[a5_0x5a16('0x25')][a5_0x5a16('0x10')]);_0x1455ab['sanitize'](a5_0x5a16('0xe'))[a5_0x5a16('0x13')]({'gmail_remove_dots':![]});const _0x85d383=_0x1455ab[a5_0x5a16('0x14')]();if(_0x85d383){_0x1455ab[a5_0x5a16('0x15')](a5_0x5a16('0x16'),_0x85d383);return _0x58c3ab['redirect'](a5_0x5a16('0x26'));}const _0x51d501=new User_1['default']({});User_1['default'][a5_0x5a16('0x27')]({'email':_0x1455ab[a5_0x5a16('0x25')][a5_0x5a16('0xe')]},(_0x40b3db,_0x28ae6a)=>{if(_0x40b3db){return _0x4d374b(_0x40b3db);}if(_0x28ae6a){_0x1455ab[a5_0x5a16('0x15')](a5_0x5a16('0x16'),{'msg':a5_0x5a16('0x28')});return _0x58c3ab[a5_0x5a16('0x9')]('/signup');}_0x51d501['save'](_0x40b3db=>{if(_0x40b3db){return _0x4d374b(_0x40b3db);}_0x1455ab[a5_0x5a16('0x1a')](_0x51d501,_0x40b3db=>{if(_0x40b3db){return _0x4d374b(_0x40b3db);}_0x58c3ab[a5_0x5a16('0x9')]('/');});});});};exports[a5_0x5a16('0x29')]=(_0x34f447,_0x560000)=>{_0x560000[a5_0x5a16('0xa')](a5_0x5a16('0x2a'),{'title':a5_0x5a16('0x2b')});};exports[a5_0x5a16('0x2c')]=(_0x44c5d2,_0x194d74,_0x494127)=>{_0x44c5d2[a5_0x5a16('0xd')](a5_0x5a16('0xe'),a5_0x5a16('0x2d'))[a5_0x5a16('0xf')]();_0x44c5d2[a5_0x5a16('0x12')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x20a3fe=_0x44c5d2[a5_0x5a16('0x14')]();if(_0x20a3fe){_0x44c5d2[a5_0x5a16('0x15')]('errors',_0x20a3fe);return _0x194d74[a5_0x5a16('0x9')](a5_0x5a16('0x2e'));}User_1[a5_0x5a16('0x17')][a5_0x5a16('0x2f')](_0x44c5d2[a5_0x5a16('0x8')]['id'],(_0x3c43b7,_0x45d854)=>{if(_0x3c43b7){return _0x494127(_0x3c43b7);}_0x45d854[a5_0x5a16('0xe')]=_0x44c5d2['body'][a5_0x5a16('0xe')]||'';_0x45d854['profile']['name']=_0x44c5d2[a5_0x5a16('0x25')]['name']||'';_0x45d854[a5_0x5a16('0x30')]['gender']=_0x44c5d2[a5_0x5a16('0x25')]['gender']||'';_0x45d854[a5_0x5a16('0x30')][a5_0x5a16('0x31')]=_0x44c5d2[a5_0x5a16('0x25')]['location']||'';_0x45d854['profile']['website']=_0x44c5d2[a5_0x5a16('0x25')][a5_0x5a16('0x32')]||'';_0x45d854['save'](_0x3c43b7=>{if(_0x3c43b7){if(_0x3c43b7[a5_0x5a16('0x33')]===0x2af8){_0x44c5d2[a5_0x5a16('0x15')](a5_0x5a16('0x16'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x194d74['redirect'](a5_0x5a16('0x2e'));}return _0x494127(_0x3c43b7);}_0x44c5d2[a5_0x5a16('0x15')]('success',{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x194d74[a5_0x5a16('0x9')](a5_0x5a16('0x2e'));});});};exports[a5_0x5a16('0x34')]=(_0xa45405,_0x51681f,_0x67114b)=>{_0xa45405[a5_0x5a16('0xd')]('password','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0xa45405[a5_0x5a16('0xd')](a5_0x5a16('0x22'),a5_0x5a16('0x23'))[a5_0x5a16('0x24')](_0xa45405[a5_0x5a16('0x25')][a5_0x5a16('0x10')]);const _0x10daf6=_0xa45405[a5_0x5a16('0x14')]();if(_0x10daf6){_0xa45405[a5_0x5a16('0x15')](a5_0x5a16('0x16'),_0x10daf6);return _0x51681f[a5_0x5a16('0x9')](a5_0x5a16('0x2e'));}User_1[a5_0x5a16('0x17')][a5_0x5a16('0x2f')](_0xa45405[a5_0x5a16('0x8')]['id'],(_0x4c8628,_0x26ad34)=>{if(_0x4c8628){return _0x67114b(_0x4c8628);}_0x26ad34[a5_0x5a16('0x10')]=_0xa45405[a5_0x5a16('0x25')]['password'];_0x26ad34[a5_0x5a16('0x35')](_0x4c8628=>{if(_0x4c8628){return _0x67114b(_0x4c8628);}_0xa45405[a5_0x5a16('0x15')](a5_0x5a16('0x1b'),{'msg':a5_0x5a16('0x36')});_0x51681f[a5_0x5a16('0x9')](a5_0x5a16('0x2e'));});});};exports[a5_0x5a16('0x37')]=(_0x5bc7de,_0x1d7d76,_0x1a874a)=>{User_1[a5_0x5a16('0x17')][a5_0x5a16('0x38')]({'_id':_0x5bc7de['user']['id']},_0x3d5fba=>{if(_0x3d5fba){return _0x1a874a(_0x3d5fba);}_0x5bc7de[a5_0x5a16('0x1e')]();_0x5bc7de['flash'](a5_0x5a16('0x39'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x1d7d76[a5_0x5a16('0x9')]('/');});};exports['getOauthUnlink']=(_0x486e66,_0x322ecc,_0x49e603)=>{const _0x313fb4=_0x486e66[a5_0x5a16('0x3a')]['provider'];User_1[a5_0x5a16('0x17')][a5_0x5a16('0x2f')](_0x486e66['user']['id'],(_0x2cf8a6,_0x199437)=>{if(_0x2cf8a6){return _0x49e603(_0x2cf8a6);}_0x199437[_0x313fb4]=undefined;_0x199437[a5_0x5a16('0x3b')]=_0x199437[a5_0x5a16('0x3b')]['filter'](_0x110a4f=>_0x110a4f[a5_0x5a16('0x3c')]!==_0x313fb4);_0x199437['save'](_0x2cf8a6=>{if(_0x2cf8a6){return _0x49e603(_0x2cf8a6);}_0x486e66[a5_0x5a16('0x15')]('info',{'msg':_0x313fb4+a5_0x5a16('0x3d')});_0x322ecc['redirect'](a5_0x5a16('0x2e'));});});};exports[a5_0x5a16('0x3e')]=(_0x32ccb9,_0x50f9e3,_0x2f6cb3)=>{if(_0x32ccb9[a5_0x5a16('0x3f')]()){return _0x50f9e3[a5_0x5a16('0x9')]('/');}User_1[a5_0x5a16('0x17')]['findOne']({'passwordResetToken':_0x32ccb9[a5_0x5a16('0x3a')]['token']})[a5_0x5a16('0x40')](a5_0x5a16('0x41'))['gt'](Date[a5_0x5a16('0x42')]())['exec']((_0x2e90c1,_0x3c4db0)=>{if(_0x2e90c1){return _0x2f6cb3(_0x2e90c1);}if(!_0x3c4db0){_0x32ccb9[a5_0x5a16('0x15')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x50f9e3[a5_0x5a16('0x9')](a5_0x5a16('0x43'));}_0x50f9e3[a5_0x5a16('0xa')](a5_0x5a16('0x44'),{'title':a5_0x5a16('0x45')});});};exports[a5_0x5a16('0x46')]=(_0x369f33,_0x6c0f07,_0x289167)=>{_0x369f33[a5_0x5a16('0xd')](a5_0x5a16('0x10'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.')[a5_0x5a16('0x47')]({'min':0x4});_0x369f33[a5_0x5a16('0xd')]('confirm',a5_0x5a16('0x48'))['equals'](_0x369f33['body'][a5_0x5a16('0x10')]);const _0x124f9b=_0x369f33[a5_0x5a16('0x14')]();if(_0x124f9b){_0x369f33['flash']('errors',_0x124f9b);return _0x6c0f07[a5_0x5a16('0x9')](a5_0x5a16('0x49'));}async_1['default'][a5_0x5a16('0x4a')]([function resetPassword(_0x233683){User_1['default'][a5_0x5a16('0x27')]({'passwordResetToken':_0x369f33[a5_0x5a16('0x3a')][a5_0x5a16('0x4b')]})['where'](a5_0x5a16('0x41'))['gt'](Date[a5_0x5a16('0x42')]())[a5_0x5a16('0x4c')]((_0x25970f,_0xd37f94)=>{if(_0x25970f){return _0x289167(_0x25970f);}if(!_0xd37f94){_0x369f33[a5_0x5a16('0x15')]('errors',{'msg':a5_0x5a16('0x4d')});return _0x6c0f07['redirect'](a5_0x5a16('0x49'));}_0xd37f94[a5_0x5a16('0x10')]=_0x369f33[a5_0x5a16('0x25')][a5_0x5a16('0x10')];_0xd37f94[a5_0x5a16('0x4e')]=undefined;_0xd37f94[a5_0x5a16('0x41')]=undefined;_0xd37f94[a5_0x5a16('0x35')](_0x25970f=>{if(_0x25970f){return _0x289167(_0x25970f);}_0x369f33[a5_0x5a16('0x1a')](_0xd37f94,_0x25970f=>{_0x233683(_0x25970f,_0xd37f94);});});});},function sendResetPasswordEmail(_0xd558e1,_0x455ceb){const _0x29fb36=nodemailer_1[a5_0x5a16('0x17')][a5_0x5a16('0x4f')]({'service':a5_0x5a16('0x50'),'auth':{'user':process[a5_0x5a16('0x51')][a5_0x5a16('0x52')],'pass':process[a5_0x5a16('0x51')][a5_0x5a16('0x53')]}});const _0x280b34={'to':_0xd558e1[a5_0x5a16('0xe')],'from':a5_0x5a16('0x54'),'subject':a5_0x5a16('0x55'),'text':a5_0x5a16('0x56')+_0xd558e1['email']+a5_0x5a16('0x57')};_0x29fb36[a5_0x5a16('0x58')](_0x280b34,_0x47e787=>{_0x369f33[a5_0x5a16('0x15')](a5_0x5a16('0x1b'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x455ceb(_0x47e787);});}],_0x1a9a71=>{if(_0x1a9a71){return _0x289167(_0x1a9a71);}_0x6c0f07[a5_0x5a16('0x9')]('/');});};exports[a5_0x5a16('0x59')]=(_0x1f3f5b,_0x553a99)=>{if(_0x1f3f5b[a5_0x5a16('0x3f')]()){return _0x553a99[a5_0x5a16('0x9')]('/');}_0x553a99[a5_0x5a16('0xa')](a5_0x5a16('0x5a'),{'title':'Forgot\x20Password'});};exports[a5_0x5a16('0x5b')]=(_0x305bb8,_0x5d4572,_0x21fdb2)=>{_0x305bb8[a5_0x5a16('0xd')]('email',a5_0x5a16('0x2d'))['isEmail']();_0x305bb8[a5_0x5a16('0x12')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x5ed35e=_0x305bb8[a5_0x5a16('0x14')]();if(_0x5ed35e){_0x305bb8[a5_0x5a16('0x15')](a5_0x5a16('0x16'),_0x5ed35e);return _0x5d4572[a5_0x5a16('0x9')]('/forgot');}async_1['default'][a5_0x5a16('0x4a')]([function createRandomToken(_0x232be0){crypto_1[a5_0x5a16('0x17')][a5_0x5a16('0x5c')](0x10,(_0x3d9966,_0x41cf94)=>{const _0x30051d=_0x41cf94[a5_0x5a16('0x5d')]('hex');_0x232be0(_0x3d9966,_0x30051d);});},function setRandomToken(_0xaac6d4,_0x43bf93){User_1['default'][a5_0x5a16('0x27')]({'email':_0x305bb8[a5_0x5a16('0x25')][a5_0x5a16('0xe')]},(_0x2e514f,_0xd380ef)=>{if(_0x2e514f){return _0x43bf93(_0x2e514f);}if(!_0xd380ef){_0x305bb8[a5_0x5a16('0x15')](a5_0x5a16('0x16'),{'msg':a5_0x5a16('0x5e')});return _0x5d4572[a5_0x5a16('0x9')](a5_0x5a16('0x43'));}_0xd380ef[a5_0x5a16('0x4e')]=_0xaac6d4;_0xd380ef[a5_0x5a16('0x41')]=Date[a5_0x5a16('0x42')]()+0x36ee80;_0xd380ef['save'](_0x2e514f=>{_0x43bf93(_0x2e514f,_0xaac6d4,_0xd380ef);});});},function sendForgotPasswordEmail(_0x554cb7,_0x2be3a8,_0x2e1af8){const _0x2630a1=nodemailer_1['default'][a5_0x5a16('0x4f')]({'service':a5_0x5a16('0x50'),'auth':{'user':process[a5_0x5a16('0x51')][a5_0x5a16('0x52')],'pass':process[a5_0x5a16('0x51')]['SENDGRID_PASSWORD']}});const _0x4b9487={'to':_0x2be3a8[a5_0x5a16('0xe')],'from':a5_0x5a16('0x5f'),'subject':a5_0x5a16('0x60'),'text':a5_0x5a16('0x61')+_0x305bb8['headers'][a5_0x5a16('0x62')]+a5_0x5a16('0x63')+_0x554cb7+a5_0x5a16('0x64')};_0x2630a1[a5_0x5a16('0x58')](_0x4b9487,_0x240736=>{_0x305bb8[a5_0x5a16('0x15')](a5_0x5a16('0x39'),{'msg':a5_0x5a16('0x65')+_0x2be3a8['email']+a5_0x5a16('0x66')});_0x2e1af8(_0x240736);});}],_0x4607e1=>{if(_0x4607e1){return _0x21fdb2(_0x4607e1);}_0x5d4572['redirect'](a5_0x5a16('0x43'));});};