var a5_0x2c96=['kind','\x20account\x20has\x20been\x20unlinked.','getReset','isAuthenticated','where','passwordResetExpires','now','exec','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','token','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','passwordResetToken','createTransport','env','SENDGRID_USER','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','Success!\x20Your\x20password\x20has\x20been\x20changed.','account/forgot','Forgot\x20Password','Please\x20enter\x20a\x20valid\x20email\x20address.','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SendGrid','hackathon@starter.com','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','info','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','defineProperty','async','crypto','nodemailer','passport','../models/User','express-validator','getLogin','user','render','account/login','Login','postLogin','email','Email\x20is\x20not\x20valid','isEmail','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','flash','errors','redirect','/login','authenticate','local','success','Success!\x20You\x20are\x20logged\x20in.','returnTo','logout','assert','password','confirmPassword','Passwords\x20do\x20not\x20match','equals','body','/signup','default','findOne','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','save','logIn','getAccount','account/profile','Account\x20Management','/account','findById','profile','name','gender','location','website','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','postDeleteAccount','remove','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','tokens','filter'];(function(_0x518bc6,_0x745e3a){var _0x1d2750=function(_0x1594f3){while(--_0x1594f3){_0x518bc6['push'](_0x518bc6['shift']());}};_0x1d2750(++_0x745e3a);}(a5_0x2c96,0x9b));var a5_0x474d=function(_0x189a46,_0x1dad62){_0x189a46=_0x189a46-0x0;var _0x16bd2e=a5_0x2c96[_0x189a46];return _0x16bd2e;};'use strict';var __importDefault=this&&this[a5_0x474d('0x0')]||function(_0x4705f2){return _0x4705f2&&_0x4705f2[a5_0x474d('0x1')]?_0x4705f2:{'default':_0x4705f2};};Object[a5_0x474d('0x2')](exports,a5_0x474d('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x474d('0x3')));const crypto_1=__importDefault(require(a5_0x474d('0x4')));const nodemailer_1=__importDefault(require(a5_0x474d('0x5')));const passport_1=__importDefault(require(a5_0x474d('0x6')));const User_1=__importDefault(require(a5_0x474d('0x7')));const request=require(a5_0x474d('0x8'));exports[a5_0x474d('0x9')]=(_0x4cf4b7,_0x41f3d0)=>{if(_0x4cf4b7[a5_0x474d('0xa')]){return _0x41f3d0['redirect']('/');}_0x41f3d0[a5_0x474d('0xb')](a5_0x474d('0xc'),{'title':a5_0x474d('0xd')});};exports[a5_0x474d('0xe')]=(_0x2c5df0,_0x21ec20,_0x3f0f35)=>{_0x2c5df0['assert'](a5_0x474d('0xf'),a5_0x474d('0x10'))[a5_0x474d('0x11')]();_0x2c5df0['assert']('password',a5_0x474d('0x12'))[a5_0x474d('0x13')]();_0x2c5df0[a5_0x474d('0x14')](a5_0x474d('0xf'))[a5_0x474d('0x15')]({'gmail_remove_dots':![]});const _0x588f30=_0x2c5df0[a5_0x474d('0x16')]();if(_0x588f30){_0x2c5df0[a5_0x474d('0x17')](a5_0x474d('0x18'),_0x588f30);return _0x21ec20[a5_0x474d('0x19')](a5_0x474d('0x1a'));}passport_1['default'][a5_0x474d('0x1b')](a5_0x474d('0x1c'),(_0x49fb8e,_0x256ecd,_0x209af5)=>{if(_0x49fb8e){return _0x3f0f35(_0x49fb8e);}if(!_0x256ecd){_0x2c5df0[a5_0x474d('0x17')](a5_0x474d('0x18'),_0x209af5['message']);return _0x21ec20['redirect']('/login');}_0x2c5df0['logIn'](_0x256ecd,_0x49fb8e=>{if(_0x49fb8e){return _0x3f0f35(_0x49fb8e);}_0x2c5df0[a5_0x474d('0x17')](a5_0x474d('0x1d'),{'msg':a5_0x474d('0x1e')});_0x21ec20[a5_0x474d('0x19')](_0x2c5df0['session'][a5_0x474d('0x1f')]||'/');});})(_0x2c5df0,_0x21ec20,_0x3f0f35);};exports['logout']=(_0x5d631e,_0x5b852a)=>{_0x5d631e[a5_0x474d('0x20')]();_0x5b852a[a5_0x474d('0x19')]('/');};exports['getSignup']=(_0x4c55e7,_0x61a29f)=>{if(_0x4c55e7['user']){return _0x61a29f[a5_0x474d('0x19')]('/');}_0x61a29f[a5_0x474d('0xb')]('account/signup',{'title':'Create\x20Account'});};exports['postSignup']=(_0x2ce1ce,_0x3d3149,_0x22a36e)=>{_0x2ce1ce[a5_0x474d('0x21')]('email',a5_0x474d('0x10'))[a5_0x474d('0x11')]();_0x2ce1ce[a5_0x474d('0x21')](a5_0x474d('0x22'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')['len']({'min':0x4});_0x2ce1ce[a5_0x474d('0x21')](a5_0x474d('0x23'),a5_0x474d('0x24'))[a5_0x474d('0x25')](_0x2ce1ce[a5_0x474d('0x26')][a5_0x474d('0x22')]);_0x2ce1ce[a5_0x474d('0x14')](a5_0x474d('0xf'))[a5_0x474d('0x15')]({'gmail_remove_dots':![]});const _0x261604=_0x2ce1ce[a5_0x474d('0x16')]();if(_0x261604){_0x2ce1ce[a5_0x474d('0x17')](a5_0x474d('0x18'),_0x261604);return _0x3d3149['redirect'](a5_0x474d('0x27'));}const _0x20dbb9=new User_1[(a5_0x474d('0x28'))]({});User_1[a5_0x474d('0x28')][a5_0x474d('0x29')]({'email':_0x2ce1ce[a5_0x474d('0x26')]['email']},(_0x17c924,_0x428ce8)=>{if(_0x17c924){return _0x22a36e(_0x17c924);}if(_0x428ce8){_0x2ce1ce[a5_0x474d('0x17')](a5_0x474d('0x18'),{'msg':a5_0x474d('0x2a')});return _0x3d3149[a5_0x474d('0x19')]('/signup');}_0x20dbb9[a5_0x474d('0x2b')](_0x17c924=>{if(_0x17c924){return _0x22a36e(_0x17c924);}_0x2ce1ce[a5_0x474d('0x2c')](_0x20dbb9,_0x17c924=>{if(_0x17c924){return _0x22a36e(_0x17c924);}_0x3d3149[a5_0x474d('0x19')]('/');});});});};exports[a5_0x474d('0x2d')]=(_0x2e80b5,_0x21069c)=>{_0x21069c[a5_0x474d('0xb')](a5_0x474d('0x2e'),{'title':a5_0x474d('0x2f')});};exports['postUpdateProfile']=(_0xa46f98,_0x47f959,_0x492715)=>{_0xa46f98[a5_0x474d('0x21')](a5_0x474d('0xf'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x474d('0x11')]();_0xa46f98['sanitize'](a5_0x474d('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x1084b8=_0xa46f98[a5_0x474d('0x16')]();if(_0x1084b8){_0xa46f98[a5_0x474d('0x17')](a5_0x474d('0x18'),_0x1084b8);return _0x47f959[a5_0x474d('0x19')](a5_0x474d('0x30'));}User_1[a5_0x474d('0x28')][a5_0x474d('0x31')](_0xa46f98['user']['id'],(_0x20a273,_0x55f368)=>{if(_0x20a273){return _0x492715(_0x20a273);}_0x55f368[a5_0x474d('0xf')]=_0xa46f98['body'][a5_0x474d('0xf')]||'';_0x55f368[a5_0x474d('0x32')][a5_0x474d('0x33')]=_0xa46f98[a5_0x474d('0x26')][a5_0x474d('0x33')]||'';_0x55f368[a5_0x474d('0x32')][a5_0x474d('0x34')]=_0xa46f98[a5_0x474d('0x26')][a5_0x474d('0x34')]||'';_0x55f368[a5_0x474d('0x32')][a5_0x474d('0x35')]=_0xa46f98[a5_0x474d('0x26')][a5_0x474d('0x35')]||'';_0x55f368[a5_0x474d('0x32')][a5_0x474d('0x36')]=_0xa46f98[a5_0x474d('0x26')][a5_0x474d('0x36')]||'';_0x55f368[a5_0x474d('0x2b')](_0x20a273=>{if(_0x20a273){if(_0x20a273[a5_0x474d('0x37')]===0x2af8){_0xa46f98['flash'](a5_0x474d('0x18'),{'msg':a5_0x474d('0x38')});return _0x47f959['redirect'](a5_0x474d('0x30'));}return _0x492715(_0x20a273);}_0xa46f98['flash'](a5_0x474d('0x1d'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x47f959[a5_0x474d('0x19')](a5_0x474d('0x30'));});});};exports[a5_0x474d('0x39')]=(_0x3d6135,_0xbc20a3,_0x5d4688)=>{_0x3d6135[a5_0x474d('0x21')]('password',a5_0x474d('0x3a'))[a5_0x474d('0x3b')]({'min':0x4});_0x3d6135[a5_0x474d('0x21')](a5_0x474d('0x23'),'Passwords\x20do\x20not\x20match')['equals'](_0x3d6135['body'][a5_0x474d('0x22')]);const _0x2b4c57=_0x3d6135['validationErrors']();if(_0x2b4c57){_0x3d6135[a5_0x474d('0x17')]('errors',_0x2b4c57);return _0xbc20a3[a5_0x474d('0x19')](a5_0x474d('0x30'));}User_1[a5_0x474d('0x28')]['findById'](_0x3d6135['user']['id'],(_0x53f87b,_0x1b1d17)=>{if(_0x53f87b){return _0x5d4688(_0x53f87b);}_0x1b1d17[a5_0x474d('0x22')]=_0x3d6135['body'][a5_0x474d('0x22')];_0x1b1d17[a5_0x474d('0x2b')](_0x53f87b=>{if(_0x53f87b){return _0x5d4688(_0x53f87b);}_0x3d6135['flash']('success',{'msg':'Password\x20has\x20been\x20changed.'});_0xbc20a3['redirect'](a5_0x474d('0x30'));});});};exports[a5_0x474d('0x3c')]=(_0x485676,_0x3ad0c5,_0x350e2a)=>{User_1[a5_0x474d('0x28')][a5_0x474d('0x3d')]({'_id':_0x485676[a5_0x474d('0xa')]['id']},_0xdd396=>{if(_0xdd396){return _0x350e2a(_0xdd396);}_0x485676[a5_0x474d('0x20')]();_0x485676['flash']('info',{'msg':a5_0x474d('0x3e')});_0x3ad0c5[a5_0x474d('0x19')]('/');});};exports[a5_0x474d('0x3f')]=(_0x4bed0a,_0x2dd2bf,_0x1c95e5)=>{const _0x2dc05b=_0x4bed0a[a5_0x474d('0x40')]['provider'];User_1[a5_0x474d('0x28')][a5_0x474d('0x31')](_0x4bed0a[a5_0x474d('0xa')]['id'],(_0xfd0e50,_0x5d2ecc)=>{if(_0xfd0e50){return _0x1c95e5(_0xfd0e50);}_0x5d2ecc[_0x2dc05b]=undefined;_0x5d2ecc['tokens']=_0x5d2ecc[a5_0x474d('0x41')][a5_0x474d('0x42')](_0x26891b=>_0x26891b[a5_0x474d('0x43')]!==_0x2dc05b);_0x5d2ecc['save'](_0xfd0e50=>{if(_0xfd0e50){return _0x1c95e5(_0xfd0e50);}_0x4bed0a[a5_0x474d('0x17')]('info',{'msg':_0x2dc05b+a5_0x474d('0x44')});_0x2dd2bf[a5_0x474d('0x19')](a5_0x474d('0x30'));});});};exports[a5_0x474d('0x45')]=(_0x502018,_0x4b2e06,_0x5034ba)=>{if(_0x502018[a5_0x474d('0x46')]()){return _0x4b2e06[a5_0x474d('0x19')]('/');}User_1['default'][a5_0x474d('0x29')]({'passwordResetToken':_0x502018[a5_0x474d('0x40')]['token']})[a5_0x474d('0x47')](a5_0x474d('0x48'))['gt'](Date[a5_0x474d('0x49')]())[a5_0x474d('0x4a')]((_0x3c5afb,_0x355ecc)=>{if(_0x3c5afb){return _0x5034ba(_0x3c5afb);}if(!_0x355ecc){_0x502018[a5_0x474d('0x17')]('errors',{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4b2e06['redirect'](a5_0x474d('0x4b'));}_0x4b2e06['render'](a5_0x474d('0x4c'),{'title':a5_0x474d('0x4d')});});};exports[a5_0x474d('0x4e')]=(_0x153603,_0x40fe57,_0x1b72e5)=>{_0x153603['assert'](a5_0x474d('0x22'),a5_0x474d('0x4f'))[a5_0x474d('0x3b')]({'min':0x4});_0x153603[a5_0x474d('0x21')](a5_0x474d('0x50'),a5_0x474d('0x51'))['equals'](_0x153603[a5_0x474d('0x26')][a5_0x474d('0x22')]);const _0x18f7c5=_0x153603[a5_0x474d('0x16')]();if(_0x18f7c5){_0x153603[a5_0x474d('0x17')]('errors',_0x18f7c5);return _0x40fe57[a5_0x474d('0x19')](a5_0x474d('0x52'));}async_1['default'][a5_0x474d('0x53')]([function resetPassword(_0x3fbbc1){User_1[a5_0x474d('0x28')][a5_0x474d('0x29')]({'passwordResetToken':_0x153603[a5_0x474d('0x40')][a5_0x474d('0x54')]})['where'](a5_0x474d('0x48'))['gt'](Date[a5_0x474d('0x49')]())[a5_0x474d('0x4a')]((_0xea5725,_0x286800)=>{if(_0xea5725){return _0x1b72e5(_0xea5725);}if(!_0x286800){_0x153603[a5_0x474d('0x17')](a5_0x474d('0x18'),{'msg':a5_0x474d('0x55')});return _0x40fe57[a5_0x474d('0x19')](a5_0x474d('0x52'));}_0x286800[a5_0x474d('0x22')]=_0x153603[a5_0x474d('0x26')][a5_0x474d('0x22')];_0x286800[a5_0x474d('0x56')]=undefined;_0x286800['passwordResetExpires']=undefined;_0x286800[a5_0x474d('0x2b')](_0xea5725=>{if(_0xea5725){return _0x1b72e5(_0xea5725);}_0x153603[a5_0x474d('0x2c')](_0x286800,_0xea5725=>{_0x3fbbc1(_0xea5725,_0x286800);});});});},function sendResetPasswordEmail(_0x3d3ea2,_0x3f0a41){const _0xb3cbfc=nodemailer_1['default'][a5_0x474d('0x57')]({'service':'SendGrid','auth':{'user':process[a5_0x474d('0x58')][a5_0x474d('0x59')],'pass':process[a5_0x474d('0x58')][a5_0x474d('0x5a')]}});const _0x3b0785={'to':_0x3d3ea2[a5_0x474d('0xf')],'from':a5_0x474d('0x5b'),'subject':a5_0x474d('0x5c'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x3d3ea2[a5_0x474d('0xf')]+a5_0x474d('0x5d')};_0xb3cbfc[a5_0x474d('0x5e')](_0x3b0785,_0x2a7f35=>{_0x153603[a5_0x474d('0x17')](a5_0x474d('0x1d'),{'msg':a5_0x474d('0x5f')});_0x3f0a41(_0x2a7f35);});}],_0x4dd450=>{if(_0x4dd450){return _0x1b72e5(_0x4dd450);}_0x40fe57[a5_0x474d('0x19')]('/');});};exports['getForgot']=(_0x5e1517,_0x5142a2)=>{if(_0x5e1517[a5_0x474d('0x46')]()){return _0x5142a2[a5_0x474d('0x19')]('/');}_0x5142a2[a5_0x474d('0xb')](a5_0x474d('0x60'),{'title':a5_0x474d('0x61')});};exports['postForgot']=(_0x11395b,_0x58f1be,_0x1e13a5)=>{_0x11395b[a5_0x474d('0x21')](a5_0x474d('0xf'),a5_0x474d('0x62'))[a5_0x474d('0x11')]();_0x11395b[a5_0x474d('0x14')](a5_0x474d('0xf'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x12c489=_0x11395b[a5_0x474d('0x16')]();if(_0x12c489){_0x11395b[a5_0x474d('0x17')](a5_0x474d('0x18'),_0x12c489);return _0x58f1be[a5_0x474d('0x19')](a5_0x474d('0x4b'));}async_1['default'][a5_0x474d('0x53')]([function createRandomToken(_0x4c19d7){crypto_1[a5_0x474d('0x28')]['randomBytes'](0x10,(_0x588b5f,_0x1c66d6)=>{const _0x58fd37=_0x1c66d6['toString']('hex');_0x4c19d7(_0x588b5f,_0x58fd37);});},function setRandomToken(_0x50bd38,_0x35ab88){User_1['default'][a5_0x474d('0x29')]({'email':_0x11395b[a5_0x474d('0x26')][a5_0x474d('0xf')]},(_0x172e6c,_0x4bc134)=>{if(_0x172e6c){return _0x35ab88(_0x172e6c);}if(!_0x4bc134){_0x11395b['flash'](a5_0x474d('0x18'),{'msg':a5_0x474d('0x63')});return _0x58f1be['redirect'](a5_0x474d('0x4b'));}_0x4bc134[a5_0x474d('0x56')]=_0x50bd38;_0x4bc134[a5_0x474d('0x48')]=Date['now']()+0x36ee80;_0x4bc134[a5_0x474d('0x2b')](_0x172e6c=>{_0x35ab88(_0x172e6c,_0x50bd38,_0x4bc134);});});},function sendForgotPasswordEmail(_0x21df62,_0x1b501d,_0xf40967){const _0x59645d=nodemailer_1[a5_0x474d('0x28')][a5_0x474d('0x57')]({'service':a5_0x474d('0x64'),'auth':{'user':process['env'][a5_0x474d('0x59')],'pass':process[a5_0x474d('0x58')][a5_0x474d('0x5a')]}});const _0x396b2a={'to':_0x1b501d[a5_0x474d('0xf')],'from':a5_0x474d('0x65'),'subject':a5_0x474d('0x66'),'text':a5_0x474d('0x67')+_0x11395b[a5_0x474d('0x68')][a5_0x474d('0x69')]+a5_0x474d('0x6a')+_0x21df62+a5_0x474d('0x6b')};_0x59645d[a5_0x474d('0x5e')](_0x396b2a,_0x14bfa4=>{_0x11395b['flash'](a5_0x474d('0x6c'),{'msg':a5_0x474d('0x6d')+_0x1b501d[a5_0x474d('0xf')]+a5_0x474d('0x6e')});_0xf40967(_0x14bfa4);});}],_0xcfaf5b=>{if(_0xcfaf5b){return _0x1e13a5(_0xcfaf5b);}_0x58f1be[a5_0x474d('0x19')](a5_0x474d('0x4b'));});};