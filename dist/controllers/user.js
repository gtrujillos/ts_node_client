var a5_0x1fc2=['profile','name','gender','location','website','save','code','The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.','postUpdatePassword','equals','Password\x20has\x20been\x20changed.','remove','info','getOauthUnlink','params','provider','tokens','filter','kind','\x20account\x20has\x20been\x20unlinked.','findOne','passwordResetExpires','now','Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.','/forgot','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','back','token','createTransport','SendGrid','env','SENDGRID_USER','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','\x20has\x20just\x20been\x20changed.\x0a','sendMail','isAuthenticated','account/forgot','Forgot\x20Password','postForgot','sanitize','waterfall','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','SENDGRID_PASSWORD','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__esModule','async','crypto','nodemailer','../models/User','express-validator','getLogin','user','redirect','render','account/login','Login','email','Email\x20is\x20not\x20valid','isEmail','assert','password','notEmpty','normalizeEmail','flash','errors','/login','default','authenticate','message','logIn','success','session','returnTo','logout','getSignup','account/signup','postSignup','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','len','confirmPassword','Passwords\x20do\x20not\x20match','body','validationErrors','/signup','Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById'];(function(_0x3fec5b,_0x2183e5){var _0xcb0993=function(_0x31f832){while(--_0x31f832){_0x3fec5b['push'](_0x3fec5b['shift']());}};_0xcb0993(++_0x2183e5);}(a5_0x1fc2,0xa0));var a5_0x467c=function(_0xa845cb,_0x18fa9e){_0xa845cb=_0xa845cb-0x0;var _0x476700=a5_0x1fc2[_0xa845cb];return _0x476700;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x27a6c1){return _0x27a6c1&&_0x27a6c1[a5_0x467c('0x0')]?_0x27a6c1:{'default':_0x27a6c1};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const async_1=__importDefault(require(a5_0x467c('0x1')));const crypto_1=__importDefault(require(a5_0x467c('0x2')));const nodemailer_1=__importDefault(require(a5_0x467c('0x3')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x467c('0x4')));const request=require(a5_0x467c('0x5'));exports[a5_0x467c('0x6')]=(_0x485a70,_0x3c2c8a)=>{if(_0x485a70[a5_0x467c('0x7')]){return _0x3c2c8a[a5_0x467c('0x8')]('/');}_0x3c2c8a[a5_0x467c('0x9')](a5_0x467c('0xa'),{'title':a5_0x467c('0xb')});};exports['postLogin']=(_0x33b5ab,_0x434b5e,_0x4dcc96)=>{_0x33b5ab['assert'](a5_0x467c('0xc'),a5_0x467c('0xd'))[a5_0x467c('0xe')]();_0x33b5ab[a5_0x467c('0xf')](a5_0x467c('0x10'),'Password\x20cannot\x20be\x20blank')[a5_0x467c('0x11')]();_0x33b5ab['sanitize'](a5_0x467c('0xc'))[a5_0x467c('0x12')]({'gmail_remove_dots':![]});const _0x344674=_0x33b5ab['validationErrors']();if(_0x344674){_0x33b5ab[a5_0x467c('0x13')](a5_0x467c('0x14'),_0x344674);return _0x434b5e[a5_0x467c('0x8')](a5_0x467c('0x15'));}passport_1[a5_0x467c('0x16')][a5_0x467c('0x17')]('local',(_0x3b38fc,_0x376814,_0x2eeabf)=>{if(_0x3b38fc){return _0x4dcc96(_0x3b38fc);}if(!_0x376814){_0x33b5ab[a5_0x467c('0x13')]('errors',_0x2eeabf[a5_0x467c('0x18')]);return _0x434b5e[a5_0x467c('0x8')](a5_0x467c('0x15'));}_0x33b5ab[a5_0x467c('0x19')](_0x376814,_0x3b38fc=>{if(_0x3b38fc){return _0x4dcc96(_0x3b38fc);}_0x33b5ab[a5_0x467c('0x13')](a5_0x467c('0x1a'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x434b5e[a5_0x467c('0x8')](_0x33b5ab[a5_0x467c('0x1b')][a5_0x467c('0x1c')]||'/');});})(_0x33b5ab,_0x434b5e,_0x4dcc96);};exports['logout']=(_0x2f14ca,_0x8590ce)=>{_0x2f14ca[a5_0x467c('0x1d')]();_0x8590ce['redirect']('/');};exports[a5_0x467c('0x1e')]=(_0x58000f,_0x291616)=>{if(_0x58000f[a5_0x467c('0x7')]){return _0x291616[a5_0x467c('0x8')]('/');}_0x291616[a5_0x467c('0x9')](a5_0x467c('0x1f'),{'title':'Create\x20Account'});};exports[a5_0x467c('0x20')]=(_0x2ea481,_0x296abf,_0x257f60)=>{_0x2ea481['assert']('email',a5_0x467c('0xd'))[a5_0x467c('0xe')]();_0x2ea481[a5_0x467c('0xf')](a5_0x467c('0x10'),a5_0x467c('0x21'))[a5_0x467c('0x22')]({'min':0x4});_0x2ea481[a5_0x467c('0xf')](a5_0x467c('0x23'),a5_0x467c('0x24'))['equals'](_0x2ea481[a5_0x467c('0x25')][a5_0x467c('0x10')]);_0x2ea481['sanitize'](a5_0x467c('0xc'))[a5_0x467c('0x12')]({'gmail_remove_dots':![]});const _0x5eee48=_0x2ea481[a5_0x467c('0x26')]();if(_0x5eee48){_0x2ea481[a5_0x467c('0x13')](a5_0x467c('0x14'),_0x5eee48);return _0x296abf[a5_0x467c('0x8')](a5_0x467c('0x27'));}const _0x565a0f=new User_1['default']({});User_1['default']['findOne']({'email':_0x2ea481['body'][a5_0x467c('0xc')]},(_0x4b04fb,_0x424b68)=>{if(_0x4b04fb){return _0x257f60(_0x4b04fb);}if(_0x424b68){_0x2ea481[a5_0x467c('0x13')](a5_0x467c('0x14'),{'msg':a5_0x467c('0x28')});return _0x296abf['redirect'](a5_0x467c('0x27'));}_0x565a0f['save'](_0x4b04fb=>{if(_0x4b04fb){return _0x257f60(_0x4b04fb);}_0x2ea481[a5_0x467c('0x19')](_0x565a0f,_0x4b04fb=>{if(_0x4b04fb){return _0x257f60(_0x4b04fb);}_0x296abf[a5_0x467c('0x8')]('/');});});});};exports[a5_0x467c('0x29')]=(_0xc3f097,_0x9c17c2)=>{_0x9c17c2['render'](a5_0x467c('0x2a'),{'title':a5_0x467c('0x2b')});};exports[a5_0x467c('0x2c')]=(_0x47437c,_0x4ee71f,_0x3591a9)=>{_0x47437c[a5_0x467c('0xf')](a5_0x467c('0xc'),a5_0x467c('0x2d'))[a5_0x467c('0xe')]();_0x47437c['sanitize'](a5_0x467c('0xc'))[a5_0x467c('0x12')]({'gmail_remove_dots':![]});const _0x11987b=_0x47437c[a5_0x467c('0x26')]();if(_0x11987b){_0x47437c[a5_0x467c('0x13')](a5_0x467c('0x14'),_0x11987b);return _0x4ee71f['redirect'](a5_0x467c('0x2e'));}User_1[a5_0x467c('0x16')][a5_0x467c('0x2f')](_0x47437c[a5_0x467c('0x7')]['id'],(_0x586573,_0xf107a4)=>{if(_0x586573){return _0x3591a9(_0x586573);}_0xf107a4[a5_0x467c('0xc')]=_0x47437c[a5_0x467c('0x25')][a5_0x467c('0xc')]||'';_0xf107a4[a5_0x467c('0x30')][a5_0x467c('0x31')]=_0x47437c[a5_0x467c('0x25')][a5_0x467c('0x31')]||'';_0xf107a4[a5_0x467c('0x30')]['gender']=_0x47437c[a5_0x467c('0x25')][a5_0x467c('0x32')]||'';_0xf107a4['profile'][a5_0x467c('0x33')]=_0x47437c[a5_0x467c('0x25')][a5_0x467c('0x33')]||'';_0xf107a4[a5_0x467c('0x30')][a5_0x467c('0x34')]=_0x47437c[a5_0x467c('0x25')][a5_0x467c('0x34')]||'';_0xf107a4[a5_0x467c('0x35')](_0x586573=>{if(_0x586573){if(_0x586573[a5_0x467c('0x36')]===0x2af8){_0x47437c['flash'](a5_0x467c('0x14'),{'msg':a5_0x467c('0x37')});return _0x4ee71f[a5_0x467c('0x8')](a5_0x467c('0x2e'));}return _0x3591a9(_0x586573);}_0x47437c[a5_0x467c('0x13')](a5_0x467c('0x1a'),{'msg':'Profile\x20information\x20has\x20been\x20updated.'});_0x4ee71f[a5_0x467c('0x8')](a5_0x467c('0x2e'));});});};exports[a5_0x467c('0x38')]=(_0x4e2442,_0x34380d,_0xb1d970)=>{_0x4e2442['assert'](a5_0x467c('0x10'),a5_0x467c('0x21'))[a5_0x467c('0x22')]({'min':0x4});_0x4e2442[a5_0x467c('0xf')](a5_0x467c('0x23'),a5_0x467c('0x24'))[a5_0x467c('0x39')](_0x4e2442[a5_0x467c('0x25')]['password']);const _0xdb46af=_0x4e2442[a5_0x467c('0x26')]();if(_0xdb46af){_0x4e2442[a5_0x467c('0x13')](a5_0x467c('0x14'),_0xdb46af);return _0x34380d[a5_0x467c('0x8')](a5_0x467c('0x2e'));}User_1[a5_0x467c('0x16')]['findById'](_0x4e2442['user']['id'],(_0x2c2099,_0x3f60ca)=>{if(_0x2c2099){return _0xb1d970(_0x2c2099);}_0x3f60ca['password']=_0x4e2442[a5_0x467c('0x25')][a5_0x467c('0x10')];_0x3f60ca['save'](_0x2c2099=>{if(_0x2c2099){return _0xb1d970(_0x2c2099);}_0x4e2442['flash'](a5_0x467c('0x1a'),{'msg':a5_0x467c('0x3a')});_0x34380d[a5_0x467c('0x8')](a5_0x467c('0x2e'));});});};exports['postDeleteAccount']=(_0x312bc2,_0x1550c8,_0x1d650b)=>{User_1[a5_0x467c('0x16')][a5_0x467c('0x3b')]({'_id':_0x312bc2['user']['id']},_0x26b5b1=>{if(_0x26b5b1){return _0x1d650b(_0x26b5b1);}_0x312bc2[a5_0x467c('0x1d')]();_0x312bc2[a5_0x467c('0x13')](a5_0x467c('0x3c'),{'msg':'Your\x20account\x20has\x20been\x20deleted.'});_0x1550c8[a5_0x467c('0x8')]('/');});};exports[a5_0x467c('0x3d')]=(_0x311b20,_0x4019c6,_0x47af4e)=>{const _0x3e7ea9=_0x311b20[a5_0x467c('0x3e')][a5_0x467c('0x3f')];User_1[a5_0x467c('0x16')]['findById'](_0x311b20[a5_0x467c('0x7')]['id'],(_0x58e6c7,_0x290ddb)=>{if(_0x58e6c7){return _0x47af4e(_0x58e6c7);}_0x290ddb[_0x3e7ea9]=undefined;_0x290ddb[a5_0x467c('0x40')]=_0x290ddb[a5_0x467c('0x40')][a5_0x467c('0x41')](_0xf5fd1b=>_0xf5fd1b[a5_0x467c('0x42')]!==_0x3e7ea9);_0x290ddb[a5_0x467c('0x35')](_0x58e6c7=>{if(_0x58e6c7){return _0x47af4e(_0x58e6c7);}_0x311b20['flash'](a5_0x467c('0x3c'),{'msg':_0x3e7ea9+a5_0x467c('0x43')});_0x4019c6[a5_0x467c('0x8')]('/account');});});};exports['getReset']=(_0x5b85c5,_0xb63622,_0x45fb22)=>{if(_0x5b85c5['isAuthenticated']()){return _0xb63622[a5_0x467c('0x8')]('/');}User_1[a5_0x467c('0x16')][a5_0x467c('0x44')]({'passwordResetToken':_0x5b85c5[a5_0x467c('0x3e')]['token']})['where'](a5_0x467c('0x45'))['gt'](Date[a5_0x467c('0x46')]())['exec']((_0x2c11f1,_0x5231f7)=>{if(_0x2c11f1){return _0x45fb22(_0x2c11f1);}if(!_0x5231f7){_0x5b85c5['flash'](a5_0x467c('0x14'),{'msg':a5_0x467c('0x47')});return _0xb63622['redirect'](a5_0x467c('0x48'));}_0xb63622['render'](a5_0x467c('0x49'),{'title':a5_0x467c('0x4a')});});};exports[a5_0x467c('0x4b')]=(_0x3a0320,_0x34ad43,_0x40e9c7)=>{_0x3a0320[a5_0x467c('0xf')](a5_0x467c('0x10'),a5_0x467c('0x4c'))[a5_0x467c('0x22')]({'min':0x4});_0x3a0320[a5_0x467c('0xf')]('confirm','Passwords\x20must\x20match.')[a5_0x467c('0x39')](_0x3a0320[a5_0x467c('0x25')][a5_0x467c('0x10')]);const _0x2088ce=_0x3a0320[a5_0x467c('0x26')]();if(_0x2088ce){_0x3a0320[a5_0x467c('0x13')](a5_0x467c('0x14'),_0x2088ce);return _0x34ad43[a5_0x467c('0x8')](a5_0x467c('0x4d'));}async_1[a5_0x467c('0x16')]['waterfall']([function resetPassword(_0x3a3f7a){User_1[a5_0x467c('0x16')][a5_0x467c('0x44')]({'passwordResetToken':_0x3a0320[a5_0x467c('0x3e')][a5_0x467c('0x4e')]})['where'](a5_0x467c('0x45'))['gt'](Date[a5_0x467c('0x46')]())['exec']((_0x5bc27e,_0x51af03)=>{if(_0x5bc27e){return _0x40e9c7(_0x5bc27e);}if(!_0x51af03){_0x3a0320[a5_0x467c('0x13')](a5_0x467c('0x14'),{'msg':a5_0x467c('0x47')});return _0x34ad43['redirect'](a5_0x467c('0x4d'));}_0x51af03['password']=_0x3a0320['body']['password'];_0x51af03['passwordResetToken']=undefined;_0x51af03[a5_0x467c('0x45')]=undefined;_0x51af03[a5_0x467c('0x35')](_0x5bc27e=>{if(_0x5bc27e){return _0x40e9c7(_0x5bc27e);}_0x3a0320[a5_0x467c('0x19')](_0x51af03,_0x5bc27e=>{_0x3a3f7a(_0x5bc27e,_0x51af03);});});});},function sendResetPasswordEmail(_0x4e1fb4,_0x2b9b8b){const _0xdf0c91=nodemailer_1['default'][a5_0x467c('0x4f')]({'service':a5_0x467c('0x50'),'auth':{'user':process[a5_0x467c('0x51')][a5_0x467c('0x52')],'pass':process[a5_0x467c('0x51')]['SENDGRID_PASSWORD']}});const _0x3e1140={'to':_0x4e1fb4[a5_0x467c('0xc')],'from':a5_0x467c('0x53'),'subject':a5_0x467c('0x54'),'text':'Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20'+_0x4e1fb4[a5_0x467c('0xc')]+a5_0x467c('0x55')};_0xdf0c91[a5_0x467c('0x56')](_0x3e1140,_0x2f5803=>{_0x3a0320[a5_0x467c('0x13')](a5_0x467c('0x1a'),{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x2b9b8b(_0x2f5803);});}],_0x58b5dc=>{if(_0x58b5dc){return _0x40e9c7(_0x58b5dc);}_0x34ad43['redirect']('/');});};exports['getForgot']=(_0x3b930b,_0x4dfed1)=>{if(_0x3b930b[a5_0x467c('0x57')]()){return _0x4dfed1[a5_0x467c('0x8')]('/');}_0x4dfed1[a5_0x467c('0x9')](a5_0x467c('0x58'),{'title':a5_0x467c('0x59')});};exports[a5_0x467c('0x5a')]=(_0x548780,_0x29f2d1,_0x56d0c)=>{_0x548780[a5_0x467c('0xf')](a5_0x467c('0xc'),'Please\x20enter\x20a\x20valid\x20email\x20address.')[a5_0x467c('0xe')]();_0x548780[a5_0x467c('0x5b')](a5_0x467c('0xc'))[a5_0x467c('0x12')]({'gmail_remove_dots':![]});const _0x380ed8=_0x548780['validationErrors']();if(_0x380ed8){_0x548780[a5_0x467c('0x13')]('errors',_0x380ed8);return _0x29f2d1['redirect'](a5_0x467c('0x48'));}async_1[a5_0x467c('0x16')][a5_0x467c('0x5c')]([function createRandomToken(_0xf99f67){crypto_1[a5_0x467c('0x16')][a5_0x467c('0x5d')](0x10,(_0x3e8b55,_0xdda21a)=>{const _0x419040=_0xdda21a['toString'](a5_0x467c('0x5e'));_0xf99f67(_0x3e8b55,_0x419040);});},function setRandomToken(_0xd36c71,_0x303d58){User_1['default'][a5_0x467c('0x44')]({'email':_0x548780[a5_0x467c('0x25')][a5_0x467c('0xc')]},(_0x2df1c0,_0x301335)=>{if(_0x2df1c0){return _0x303d58(_0x2df1c0);}if(!_0x301335){_0x548780[a5_0x467c('0x13')](a5_0x467c('0x14'),{'msg':a5_0x467c('0x5f')});return _0x29f2d1[a5_0x467c('0x8')](a5_0x467c('0x48'));}_0x301335['passwordResetToken']=_0xd36c71;_0x301335[a5_0x467c('0x45')]=Date[a5_0x467c('0x46')]()+0x36ee80;_0x301335[a5_0x467c('0x35')](_0x2df1c0=>{_0x303d58(_0x2df1c0,_0xd36c71,_0x301335);});});},function sendForgotPasswordEmail(_0xd53c2c,_0x6a53c6,_0x1e5984){const _0x13941b=nodemailer_1[a5_0x467c('0x16')]['createTransport']({'service':'SendGrid','auth':{'user':process['env'][a5_0x467c('0x52')],'pass':process['env'][a5_0x467c('0x60')]}});const _0x246723={'to':_0x6a53c6[a5_0x467c('0xc')],'from':'hackathon@starter.com','subject':a5_0x467c('0x61'),'text':a5_0x467c('0x62')+_0x548780[a5_0x467c('0x63')][a5_0x467c('0x64')]+a5_0x467c('0x65')+_0xd53c2c+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a'};_0x13941b['sendMail'](_0x246723,_0x20cb08=>{_0x548780[a5_0x467c('0x13')]('info',{'msg':a5_0x467c('0x66')+_0x6a53c6[a5_0x467c('0xc')]+a5_0x467c('0x67')});_0x1e5984(_0x20cb08);});}],_0x5cc2e0=>{if(_0x5cc2e0){return _0x56d0c(_0x5cc2e0);}_0x29f2d1[a5_0x467c('0x8')](a5_0x467c('0x48'));});};