var a5_0x4565=['Account\x20with\x20that\x20email\x20address\x20already\x20exists.','getAccount','account/profile','Account\x20Management','postUpdateProfile','Please\x20enter\x20a\x20valid\x20email\x20address.','/account','findById','profile','name','gender','location','website','save','code','Profile\x20information\x20has\x20been\x20updated.','postUpdatePassword','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','confirmPassword','postDeleteAccount','remove','info','Your\x20account\x20has\x20been\x20deleted.','getOauthUnlink','params','provider','tokens','filter','\x20account\x20has\x20been\x20unlinked.','isAuthenticated','passwordResetExpires','exec','account/reset','Password\x20Reset','postReset','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long.','confirm','Passwords\x20must\x20match.','back','waterfall','token','where','now','SendGrid','env','SENDGRID_PASSWORD','express-ts@starter.com','Your\x20password\x20has\x20been\x20changed','Hello,\x0a\x0aThis\x20is\x20a\x20confirmation\x20that\x20the\x20password\x20for\x20your\x20account\x20','sendMail','account/forgot','randomBytes','hex','Account\x20with\x20that\x20email\x20address\x20does\x20not\x20exist.','/forgot','passwordResetToken','SENDGRID_USER','Reset\x20your\x20password\x20on\x20Hackathon\x20Starter','You\x20are\x20receiving\x20this\x20email\x20because\x20you\x20(or\x20someone\x20else)\x20have\x20requested\x20the\x20reset\x20of\x20the\x20password\x20for\x20your\x20account.\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20click\x20on\x20the\x20following\x20link,\x20or\x20paste\x20this\x20into\x20your\x20browser\x20to\x20complete\x20the\x20process:\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20http://','headers','host','/reset/','\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20did\x20not\x20request\x20this,\x20please\x20ignore\x20this\x20email\x20and\x20your\x20password\x20will\x20remain\x20unchanged.\x0a','An\x20e-mail\x20has\x20been\x20sent\x20to\x20','\x20with\x20further\x20instructions.','__importDefault','__esModule','async','crypto','nodemailer','../models/User','express-validator','getLogin','render','Login','postLogin','assert','email','Email\x20is\x20not\x20valid','isEmail','password','Password\x20cannot\x20be\x20blank','notEmpty','sanitize','normalizeEmail','validationErrors','redirect','/login','default','authenticate','local','flash','errors','message','logIn','success','returnTo','logout','getSignup','user','account/signup','Create\x20Account','postSignup','len','Passwords\x20do\x20not\x20match','equals','body','/signup','findOne'];(function(_0xeb8121,_0x3b27ca){var _0x1b1cee=function(_0xa54b40){while(--_0xa54b40){_0xeb8121['push'](_0xeb8121['shift']());}};_0x1b1cee(++_0x3b27ca);}(a5_0x4565,0xae));var a5_0x4c53=function(_0x49ccfd,_0x1594db){_0x49ccfd=_0x49ccfd-0x0;var _0x5ef510=a5_0x4565[_0x49ccfd];return _0x5ef510;};'use strict';var __importDefault=this&&this[a5_0x4c53('0x0')]||function(_0x5304bd){return _0x5304bd&&_0x5304bd['__esModule']?_0x5304bd:{'default':_0x5304bd};};Object['defineProperty'](exports,a5_0x4c53('0x1'),{'value':!![]});const async_1=__importDefault(require(a5_0x4c53('0x2')));const crypto_1=__importDefault(require(a5_0x4c53('0x3')));const nodemailer_1=__importDefault(require(a5_0x4c53('0x4')));const passport_1=__importDefault(require('passport'));const User_1=__importDefault(require(a5_0x4c53('0x5')));const request=require(a5_0x4c53('0x6'));exports[a5_0x4c53('0x7')]=(_0x6e4afa,_0x4b88fc)=>{if(_0x6e4afa['user']){return _0x4b88fc['redirect']('/');}_0x4b88fc[a5_0x4c53('0x8')]('account/login',{'title':a5_0x4c53('0x9')});};exports[a5_0x4c53('0xa')]=(_0x35674b,_0x5857e0,_0x294dc9)=>{_0x35674b[a5_0x4c53('0xb')](a5_0x4c53('0xc'),a5_0x4c53('0xd'))[a5_0x4c53('0xe')]();_0x35674b['assert'](a5_0x4c53('0xf'),a5_0x4c53('0x10'))[a5_0x4c53('0x11')]();_0x35674b[a5_0x4c53('0x12')](a5_0x4c53('0xc'))[a5_0x4c53('0x13')]({'gmail_remove_dots':![]});const _0x245016=_0x35674b[a5_0x4c53('0x14')]();if(_0x245016){_0x35674b['flash']('errors',_0x245016);return _0x5857e0[a5_0x4c53('0x15')](a5_0x4c53('0x16'));}passport_1[a5_0x4c53('0x17')][a5_0x4c53('0x18')](a5_0x4c53('0x19'),(_0x30fc73,_0x1b5199,_0x50c2de)=>{if(_0x30fc73){return _0x294dc9(_0x30fc73);}if(!_0x1b5199){_0x35674b[a5_0x4c53('0x1a')](a5_0x4c53('0x1b'),_0x50c2de[a5_0x4c53('0x1c')]);return _0x5857e0[a5_0x4c53('0x15')](a5_0x4c53('0x16'));}_0x35674b[a5_0x4c53('0x1d')](_0x1b5199,_0x30fc73=>{if(_0x30fc73){return _0x294dc9(_0x30fc73);}_0x35674b['flash'](a5_0x4c53('0x1e'),{'msg':'Success!\x20You\x20are\x20logged\x20in.'});_0x5857e0['redirect'](_0x35674b['session'][a5_0x4c53('0x1f')]||'/');});})(_0x35674b,_0x5857e0,_0x294dc9);};exports['logout']=(_0x45f1a3,_0x1a2bc9)=>{_0x45f1a3[a5_0x4c53('0x20')]();_0x1a2bc9[a5_0x4c53('0x15')]('/');};exports[a5_0x4c53('0x21')]=(_0x200833,_0x2c819d)=>{if(_0x200833[a5_0x4c53('0x22')]){return _0x2c819d[a5_0x4c53('0x15')]('/');}_0x2c819d[a5_0x4c53('0x8')](a5_0x4c53('0x23'),{'title':a5_0x4c53('0x24')});};exports[a5_0x4c53('0x25')]=(_0x5b5022,_0x274f76,_0x1cbcc8)=>{_0x5b5022['assert'](a5_0x4c53('0xc'),'Email\x20is\x20not\x20valid')[a5_0x4c53('0xe')]();_0x5b5022['assert'](a5_0x4c53('0xf'),'Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long')[a5_0x4c53('0x26')]({'min':0x4});_0x5b5022[a5_0x4c53('0xb')]('confirmPassword',a5_0x4c53('0x27'))[a5_0x4c53('0x28')](_0x5b5022[a5_0x4c53('0x29')][a5_0x4c53('0xf')]);_0x5b5022[a5_0x4c53('0x12')](a5_0x4c53('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x4109c3=_0x5b5022[a5_0x4c53('0x14')]();if(_0x4109c3){_0x5b5022[a5_0x4c53('0x1a')](a5_0x4c53('0x1b'),_0x4109c3);return _0x274f76['redirect'](a5_0x4c53('0x2a'));}const _0xcf817b=new User_1['default']({});User_1[a5_0x4c53('0x17')][a5_0x4c53('0x2b')]({'email':_0x5b5022[a5_0x4c53('0x29')][a5_0x4c53('0xc')]},(_0x4fb79f,_0x30eeb4)=>{if(_0x4fb79f){return _0x1cbcc8(_0x4fb79f);}if(_0x30eeb4){_0x5b5022['flash'](a5_0x4c53('0x1b'),{'msg':a5_0x4c53('0x2c')});return _0x274f76[a5_0x4c53('0x15')]('/signup');}_0xcf817b['save'](_0x4fb79f=>{if(_0x4fb79f){return _0x1cbcc8(_0x4fb79f);}_0x5b5022[a5_0x4c53('0x1d')](_0xcf817b,_0x4fb79f=>{if(_0x4fb79f){return _0x1cbcc8(_0x4fb79f);}_0x274f76[a5_0x4c53('0x15')]('/');});});});};exports[a5_0x4c53('0x2d')]=(_0x41e46c,_0x1b4180)=>{_0x1b4180[a5_0x4c53('0x8')](a5_0x4c53('0x2e'),{'title':a5_0x4c53('0x2f')});};exports[a5_0x4c53('0x30')]=(_0x5dabdd,_0x308295,_0x4f16d5)=>{_0x5dabdd[a5_0x4c53('0xb')](a5_0x4c53('0xc'),a5_0x4c53('0x31'))[a5_0x4c53('0xe')]();_0x5dabdd[a5_0x4c53('0x12')]('email')['normalizeEmail']({'gmail_remove_dots':![]});const _0x536e4d=_0x5dabdd[a5_0x4c53('0x14')]();if(_0x536e4d){_0x5dabdd[a5_0x4c53('0x1a')]('errors',_0x536e4d);return _0x308295[a5_0x4c53('0x15')](a5_0x4c53('0x32'));}User_1['default'][a5_0x4c53('0x33')](_0x5dabdd[a5_0x4c53('0x22')]['id'],(_0x205c64,_0x3a262f)=>{if(_0x205c64){return _0x4f16d5(_0x205c64);}_0x3a262f[a5_0x4c53('0xc')]=_0x5dabdd[a5_0x4c53('0x29')]['email']||'';_0x3a262f[a5_0x4c53('0x34')][a5_0x4c53('0x35')]=_0x5dabdd[a5_0x4c53('0x29')][a5_0x4c53('0x35')]||'';_0x3a262f[a5_0x4c53('0x34')][a5_0x4c53('0x36')]=_0x5dabdd[a5_0x4c53('0x29')]['gender']||'';_0x3a262f['profile'][a5_0x4c53('0x37')]=_0x5dabdd[a5_0x4c53('0x29')][a5_0x4c53('0x37')]||'';_0x3a262f[a5_0x4c53('0x34')][a5_0x4c53('0x38')]=_0x5dabdd[a5_0x4c53('0x29')][a5_0x4c53('0x38')]||'';_0x3a262f[a5_0x4c53('0x39')](_0x205c64=>{if(_0x205c64){if(_0x205c64[a5_0x4c53('0x3a')]===0x2af8){_0x5dabdd['flash'](a5_0x4c53('0x1b'),{'msg':'The\x20email\x20address\x20you\x20have\x20entered\x20is\x20already\x20associated\x20with\x20an\x20account.'});return _0x308295['redirect'](a5_0x4c53('0x32'));}return _0x4f16d5(_0x205c64);}_0x5dabdd['flash'](a5_0x4c53('0x1e'),{'msg':a5_0x4c53('0x3b')});_0x308295['redirect'](a5_0x4c53('0x32'));});});};exports[a5_0x4c53('0x3c')]=(_0x42897d,_0x84861f,_0x3c3374)=>{_0x42897d['assert']('password',a5_0x4c53('0x3d'))[a5_0x4c53('0x26')]({'min':0x4});_0x42897d[a5_0x4c53('0xb')](a5_0x4c53('0x3e'),'Passwords\x20do\x20not\x20match')['equals'](_0x42897d[a5_0x4c53('0x29')][a5_0x4c53('0xf')]);const _0x205301=_0x42897d[a5_0x4c53('0x14')]();if(_0x205301){_0x42897d[a5_0x4c53('0x1a')]('errors',_0x205301);return _0x84861f['redirect']('/account');}User_1[a5_0x4c53('0x17')][a5_0x4c53('0x33')](_0x42897d[a5_0x4c53('0x22')]['id'],(_0x5050c9,_0x1c2983)=>{if(_0x5050c9){return _0x3c3374(_0x5050c9);}_0x1c2983[a5_0x4c53('0xf')]=_0x42897d['body'][a5_0x4c53('0xf')];_0x1c2983[a5_0x4c53('0x39')](_0x5050c9=>{if(_0x5050c9){return _0x3c3374(_0x5050c9);}_0x42897d[a5_0x4c53('0x1a')](a5_0x4c53('0x1e'),{'msg':'Password\x20has\x20been\x20changed.'});_0x84861f[a5_0x4c53('0x15')](a5_0x4c53('0x32'));});});};exports[a5_0x4c53('0x3f')]=(_0x5ca74a,_0x5b1c88,_0x1565b5)=>{User_1[a5_0x4c53('0x17')][a5_0x4c53('0x40')]({'_id':_0x5ca74a['user']['id']},_0x4f243a=>{if(_0x4f243a){return _0x1565b5(_0x4f243a);}_0x5ca74a['logout']();_0x5ca74a[a5_0x4c53('0x1a')](a5_0x4c53('0x41'),{'msg':a5_0x4c53('0x42')});_0x5b1c88[a5_0x4c53('0x15')]('/');});};exports[a5_0x4c53('0x43')]=(_0x332093,_0x44f8af,_0x594207)=>{const _0x22b21b=_0x332093[a5_0x4c53('0x44')][a5_0x4c53('0x45')];User_1[a5_0x4c53('0x17')][a5_0x4c53('0x33')](_0x332093['user']['id'],(_0x33b9a2,_0x40bbff)=>{if(_0x33b9a2){return _0x594207(_0x33b9a2);}_0x40bbff[_0x22b21b]=undefined;_0x40bbff[a5_0x4c53('0x46')]=_0x40bbff[a5_0x4c53('0x46')][a5_0x4c53('0x47')](_0x1d858f=>_0x1d858f['kind']!==_0x22b21b);_0x40bbff[a5_0x4c53('0x39')](_0x33b9a2=>{if(_0x33b9a2){return _0x594207(_0x33b9a2);}_0x332093[a5_0x4c53('0x1a')](a5_0x4c53('0x41'),{'msg':_0x22b21b+a5_0x4c53('0x48')});_0x44f8af[a5_0x4c53('0x15')](a5_0x4c53('0x32'));});});};exports['getReset']=(_0x5218af,_0x4fd77d,_0xbf1903)=>{if(_0x5218af[a5_0x4c53('0x49')]()){return _0x4fd77d[a5_0x4c53('0x15')]('/');}User_1[a5_0x4c53('0x17')][a5_0x4c53('0x2b')]({'passwordResetToken':_0x5218af[a5_0x4c53('0x44')]['token']})['where'](a5_0x4c53('0x4a'))['gt'](Date['now']())[a5_0x4c53('0x4b')]((_0x8c5b9c,_0x398c59)=>{if(_0x8c5b9c){return _0xbf1903(_0x8c5b9c);}if(!_0x398c59){_0x5218af[a5_0x4c53('0x1a')](a5_0x4c53('0x1b'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4fd77d[a5_0x4c53('0x15')]('/forgot');}_0x4fd77d[a5_0x4c53('0x8')](a5_0x4c53('0x4c'),{'title':a5_0x4c53('0x4d')});});};exports[a5_0x4c53('0x4e')]=(_0x265f95,_0x4a7db8,_0x2bfcab)=>{_0x265f95[a5_0x4c53('0xb')](a5_0x4c53('0xf'),a5_0x4c53('0x4f'))[a5_0x4c53('0x26')]({'min':0x4});_0x265f95[a5_0x4c53('0xb')](a5_0x4c53('0x50'),a5_0x4c53('0x51'))['equals'](_0x265f95[a5_0x4c53('0x29')][a5_0x4c53('0xf')]);const _0x3b8326=_0x265f95[a5_0x4c53('0x14')]();if(_0x3b8326){_0x265f95[a5_0x4c53('0x1a')](a5_0x4c53('0x1b'),_0x3b8326);return _0x4a7db8['redirect'](a5_0x4c53('0x52'));}async_1[a5_0x4c53('0x17')][a5_0x4c53('0x53')]([function resetPassword(_0x1c47db){User_1['default'][a5_0x4c53('0x2b')]({'passwordResetToken':_0x265f95[a5_0x4c53('0x44')][a5_0x4c53('0x54')]})[a5_0x4c53('0x55')](a5_0x4c53('0x4a'))['gt'](Date[a5_0x4c53('0x56')]())[a5_0x4c53('0x4b')]((_0x5cb286,_0x2d2242)=>{if(_0x5cb286){return _0x2bfcab(_0x5cb286);}if(!_0x2d2242){_0x265f95[a5_0x4c53('0x1a')](a5_0x4c53('0x1b'),{'msg':'Password\x20reset\x20token\x20is\x20invalid\x20or\x20has\x20expired.'});return _0x4a7db8[a5_0x4c53('0x15')](a5_0x4c53('0x52'));}_0x2d2242[a5_0x4c53('0xf')]=_0x265f95[a5_0x4c53('0x29')][a5_0x4c53('0xf')];_0x2d2242['passwordResetToken']=undefined;_0x2d2242[a5_0x4c53('0x4a')]=undefined;_0x2d2242[a5_0x4c53('0x39')](_0x5cb286=>{if(_0x5cb286){return _0x2bfcab(_0x5cb286);}_0x265f95[a5_0x4c53('0x1d')](_0x2d2242,_0x5cb286=>{_0x1c47db(_0x5cb286,_0x2d2242);});});});},function sendResetPasswordEmail(_0x2b7908,_0x545987){const _0x3f9ffd=nodemailer_1[a5_0x4c53('0x17')]['createTransport']({'service':a5_0x4c53('0x57'),'auth':{'user':process[a5_0x4c53('0x58')]['SENDGRID_USER'],'pass':process[a5_0x4c53('0x58')][a5_0x4c53('0x59')]}});const _0x32374e={'to':_0x2b7908[a5_0x4c53('0xc')],'from':a5_0x4c53('0x5a'),'subject':a5_0x4c53('0x5b'),'text':a5_0x4c53('0x5c')+_0x2b7908['email']+'\x20has\x20just\x20been\x20changed.\x0a'};_0x3f9ffd[a5_0x4c53('0x5d')](_0x32374e,_0x4e365e=>{_0x265f95[a5_0x4c53('0x1a')]('success',{'msg':'Success!\x20Your\x20password\x20has\x20been\x20changed.'});_0x545987(_0x4e365e);});}],_0x5d9cb2=>{if(_0x5d9cb2){return _0x2bfcab(_0x5d9cb2);}_0x4a7db8[a5_0x4c53('0x15')]('/');});};exports['getForgot']=(_0x142165,_0x4fadd7)=>{if(_0x142165[a5_0x4c53('0x49')]()){return _0x4fadd7['redirect']('/');}_0x4fadd7[a5_0x4c53('0x8')](a5_0x4c53('0x5e'),{'title':'Forgot\x20Password'});};exports['postForgot']=(_0x335f4e,_0x3c544b,_0x467b10)=>{_0x335f4e[a5_0x4c53('0xb')](a5_0x4c53('0xc'),a5_0x4c53('0x31'))[a5_0x4c53('0xe')]();_0x335f4e[a5_0x4c53('0x12')](a5_0x4c53('0xc'))['normalizeEmail']({'gmail_remove_dots':![]});const _0x905951=_0x335f4e[a5_0x4c53('0x14')]();if(_0x905951){_0x335f4e['flash'](a5_0x4c53('0x1b'),_0x905951);return _0x3c544b['redirect']('/forgot');}async_1[a5_0x4c53('0x17')][a5_0x4c53('0x53')]([function createRandomToken(_0x4cbac2){crypto_1[a5_0x4c53('0x17')][a5_0x4c53('0x5f')](0x10,(_0x5685fe,_0x286dfc)=>{const _0xfeb355=_0x286dfc['toString'](a5_0x4c53('0x60'));_0x4cbac2(_0x5685fe,_0xfeb355);});},function setRandomToken(_0x20d0b1,_0x515794){User_1[a5_0x4c53('0x17')]['findOne']({'email':_0x335f4e[a5_0x4c53('0x29')][a5_0x4c53('0xc')]},(_0x25e21f,_0x464a44)=>{if(_0x25e21f){return _0x515794(_0x25e21f);}if(!_0x464a44){_0x335f4e[a5_0x4c53('0x1a')](a5_0x4c53('0x1b'),{'msg':a5_0x4c53('0x61')});return _0x3c544b[a5_0x4c53('0x15')](a5_0x4c53('0x62'));}_0x464a44[a5_0x4c53('0x63')]=_0x20d0b1;_0x464a44[a5_0x4c53('0x4a')]=Date[a5_0x4c53('0x56')]()+0x36ee80;_0x464a44[a5_0x4c53('0x39')](_0x25e21f=>{_0x515794(_0x25e21f,_0x20d0b1,_0x464a44);});});},function sendForgotPasswordEmail(_0x53c44,_0x1f4830,_0x2805a0){const _0x1787af=nodemailer_1['default']['createTransport']({'service':a5_0x4c53('0x57'),'auth':{'user':process['env'][a5_0x4c53('0x64')],'pass':process[a5_0x4c53('0x58')][a5_0x4c53('0x59')]}});const _0x154b16={'to':_0x1f4830[a5_0x4c53('0xc')],'from':'hackathon@starter.com','subject':a5_0x4c53('0x65'),'text':a5_0x4c53('0x66')+_0x335f4e[a5_0x4c53('0x67')][a5_0x4c53('0x68')]+a5_0x4c53('0x69')+_0x53c44+a5_0x4c53('0x6a')};_0x1787af['sendMail'](_0x154b16,_0x36b411=>{_0x335f4e['flash'](a5_0x4c53('0x41'),{'msg':a5_0x4c53('0x6b')+_0x1f4830[a5_0x4c53('0xc')]+a5_0x4c53('0x6c')});_0x2805a0(_0x36b411);});}],_0xe705e5=>{if(_0xe705e5){return _0x467b10(_0xe705e5);}_0x3c544b[a5_0x4c53('0x15')](a5_0x4c53('0x62'));});};