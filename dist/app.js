var a0_0x2875=['FILES_FOLDER','image1.jpg','base64-img','base64Sync','******************************************************','log','from','base64','writeHead','end','image-convert','replace','fromBuffer','jpg','original','message','__importDefault','__esModule','defineProperty','express','compression','body-parser','./util/logger','dotenv','path','default','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env.example','set','PORT','views','join','../views','view\x20engine','pug','use','static','public','env'];(function(_0x7bdb44,_0x22a217){var _0x37d9eb=function(_0x3f0c25){while(--_0x3f0c25){_0x7bdb44['push'](_0x7bdb44['shift']());}};_0x37d9eb(++_0x22a217);}(a0_0x2875,0x1be));var a0_0x55bd=function(_0x2493ce,_0x18e99b){_0x2493ce=_0x2493ce-0x0;var _0x3849af=a0_0x2875[_0x2493ce];return _0x3849af;};'use strict';var __importDefault=this&&this[a0_0x55bd('0x0')]||function(_0xe41542){return _0xe41542&&_0xe41542[a0_0x55bd('0x1')]?_0xe41542:{'default':_0xe41542};};Object[a0_0x55bd('0x2')](exports,a0_0x55bd('0x1'),{'value':!![]});const express_1=__importDefault(require(a0_0x55bd('0x3')));const compression_1=__importDefault(require(a0_0x55bd('0x4')));const body_parser_1=__importDefault(require(a0_0x55bd('0x5')));const logger_1=__importDefault(require(a0_0x55bd('0x6')));const dotenv_1=__importDefault(require(a0_0x55bd('0x7')));const path_1=__importDefault(require(a0_0x55bd('0x8')));const express_validator_1=__importDefault(require('express-validator'));const fs_1=__importDefault(require('fs'));if(fs_1[a0_0x55bd('0x9')][a0_0x55bd('0xa')](a0_0x55bd('0xb'))){logger_1['default'][a0_0x55bd('0xc')](a0_0x55bd('0xd'));dotenv_1['default'][a0_0x55bd('0xe')]({'path':a0_0x55bd('0xb')});}else{logger_1[a0_0x55bd('0x9')][a0_0x55bd('0xc')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a0_0x55bd('0x9')][a0_0x55bd('0xe')]({'path':a0_0x55bd('0xf')});}const app=express_1['default']();app[a0_0x55bd('0x10')]('port',process['env'][a0_0x55bd('0x11')]||0xbb8);app['set'](a0_0x55bd('0x12'),path_1[a0_0x55bd('0x9')][a0_0x55bd('0x13')](__dirname,a0_0x55bd('0x14')));app[a0_0x55bd('0x10')](a0_0x55bd('0x15'),a0_0x55bd('0x16'));app[a0_0x55bd('0x17')](compression_1[a0_0x55bd('0x9')]());app['use'](body_parser_1[a0_0x55bd('0x9')]['json']());app[a0_0x55bd('0x17')](body_parser_1[a0_0x55bd('0x9')]['urlencoded']({'extended':!![]}));app['use'](express_validator_1[a0_0x55bd('0x9')]());app['use'](express_1[a0_0x55bd('0x9')][a0_0x55bd('0x18')](path_1[a0_0x55bd('0x9')][a0_0x55bd('0x13')](__dirname,a0_0x55bd('0x19')),{'maxAge':0x758fac300}));app['get']('/image1',function(_0x133a75,_0x4c777a){const _0x307fe1=process[a0_0x55bd('0x1a')][a0_0x55bd('0x1b')]+a0_0x55bd('0x1c');const _0x160a0a=process['env'][a0_0x55bd('0x1b')]+'image2.jpg';const _0x3e234b=require(a0_0x55bd('0x1d'));const _0x14ed2d=_0x3e234b[a0_0x55bd('0x1e')](_0x307fe1);console['log'](a0_0x55bd('0x1f'));console[a0_0x55bd('0x20')](_0x14ed2d);const _0x30f913=_0x14ed2d['replace'](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x53695b=Buffer[a0_0x55bd('0x21')](_0x30f913,a0_0x55bd('0x22'));_0x4c777a[a0_0x55bd('0x23')](0xc8,{'Content-Type':'image/png','Content-Length':_0x53695b['length']});_0x4c777a[a0_0x55bd('0x24')](_0x53695b);});app['get']('/image2',function(_0x78ae1f,_0x591f78){const _0x1f3d5f=require(a0_0x55bd('0x1d'));const _0x32af40=require('jimp');const _0x3959cd=require(a0_0x55bd('0x25'));const _0x5c7850=process['env'][a0_0x55bd('0x1b')]+'image2.jpg';const _0x4d8a1e=_0x1f3d5f['base64Sync'](_0x5c7850);const _0x1dfdd5=_0x4d8a1e[a0_0x55bd('0x26')](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x3c4eb2=Buffer['from'](_0x1dfdd5,a0_0x55bd('0x22'));_0x3959cd[a0_0x55bd('0x27')]({'buffer':_0x4d8a1e,'quality':0x32,'output_format':a0_0x55bd('0x28'),'size':a0_0x55bd('0x29')},function(_0x3d5c45,_0x43195e,_0x47deb3){if(!_0x3d5c45){console[a0_0x55bd('0x20')](_0x47deb3);_0x591f78['end'](_0x43195e);}else{_0x591f78['json']({'Error':_0x3d5c45[a0_0x55bd('0x2a')]});}});});exports['default']=app;