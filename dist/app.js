var a0_0x1342=['pug','use','urlencoded','static','public','get','env','FILES_FOLDER','image1.jpg','image2.jpg','log','replace','base64','writeHead','image/png','length','end','/image2','image-convert','base64Sync','******************************************************','from','jpg','json','__importDefault','__esModule','defineProperty','express','compression','body-parser','express-validator','default','existsSync','config','debug','.env.example','set','port','PORT','views','join','../views','view\x20engine'];(function(_0x3bffba,_0x22d685){var _0x4fedb0=function(_0x33d424){while(--_0x33d424){_0x3bffba['push'](_0x3bffba['shift']());}};_0x4fedb0(++_0x22d685);}(a0_0x1342,0x1f1));var a0_0x1220=function(_0x4e9fa3,_0x4c625f){_0x4e9fa3=_0x4e9fa3-0x0;var _0x11b8d0=a0_0x1342[_0x4e9fa3];return _0x11b8d0;};'use strict';var __importDefault=this&&this[a0_0x1220('0x0')]||function(_0x5e216a){return _0x5e216a&&_0x5e216a[a0_0x1220('0x1')]?_0x5e216a:{'default':_0x5e216a};};Object[a0_0x1220('0x2')](exports,a0_0x1220('0x1'),{'value':!![]});const express_1=__importDefault(require(a0_0x1220('0x3')));const compression_1=__importDefault(require(a0_0x1220('0x4')));const body_parser_1=__importDefault(require(a0_0x1220('0x5')));const logger_1=__importDefault(require('./util/logger'));const dotenv_1=__importDefault(require('dotenv'));const path_1=__importDefault(require('path'));const express_validator_1=__importDefault(require(a0_0x1220('0x6')));const fs_1=__importDefault(require('fs'));if(fs_1[a0_0x1220('0x7')][a0_0x1220('0x8')]('.env')){logger_1[a0_0x1220('0x7')]['debug']('Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a0_0x1220('0x7')][a0_0x1220('0x9')]({'path':'.env'});}else{logger_1[a0_0x1220('0x7')][a0_0x1220('0xa')]('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1[a0_0x1220('0x7')][a0_0x1220('0x9')]({'path':a0_0x1220('0xb')});}const app=express_1[a0_0x1220('0x7')]();app[a0_0x1220('0xc')](a0_0x1220('0xd'),process['env'][a0_0x1220('0xe')]||0xbb8);app[a0_0x1220('0xc')](a0_0x1220('0xf'),path_1[a0_0x1220('0x7')][a0_0x1220('0x10')](__dirname,a0_0x1220('0x11')));app[a0_0x1220('0xc')](a0_0x1220('0x12'),a0_0x1220('0x13'));app[a0_0x1220('0x14')](compression_1[a0_0x1220('0x7')]());app[a0_0x1220('0x14')](body_parser_1[a0_0x1220('0x7')]['json']());app['use'](body_parser_1['default'][a0_0x1220('0x15')]({'extended':!![]}));app[a0_0x1220('0x14')](express_validator_1[a0_0x1220('0x7')]());app[a0_0x1220('0x14')](express_1['default'][a0_0x1220('0x16')](path_1[a0_0x1220('0x7')][a0_0x1220('0x10')](__dirname,a0_0x1220('0x17')),{'maxAge':0x758fac300}));app[a0_0x1220('0x18')]('/image1',function(_0x19662c,_0x4b77b9){const _0x277ec5=process[a0_0x1220('0x19')][a0_0x1220('0x1a')]+a0_0x1220('0x1b');const _0x5dbebe=process['env']['FILES_FOLDER']+a0_0x1220('0x1c');const _0x41c65c=require('base64-img');const _0x438fc3=_0x41c65c['base64Sync'](_0x277ec5);console[a0_0x1220('0x1d')]('******************************************************');console[a0_0x1220('0x1d')](_0x438fc3);const _0x3bbeb8=_0x438fc3[a0_0x1220('0x1e')](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x15b7e5=Buffer['from'](_0x3bbeb8,a0_0x1220('0x1f'));_0x4b77b9[a0_0x1220('0x20')](0xc8,{'Content-Type':a0_0x1220('0x21'),'Content-Length':_0x15b7e5[a0_0x1220('0x22')]});_0x4b77b9[a0_0x1220('0x23')](_0x15b7e5);});app['get'](a0_0x1220('0x24'),function(_0x24ee39,_0x4e7c00){const _0x58fb0c=require('base64-img');const _0xad48b2=require('jimp');const _0x2bbb4a=require(a0_0x1220('0x25'));const _0x4896aa=process[a0_0x1220('0x19')][a0_0x1220('0x1a')]+a0_0x1220('0x1c');const _0xca3af=_0x58fb0c[a0_0x1220('0x26')](_0x4896aa);console[a0_0x1220('0x1d')](a0_0x1220('0x27'));const _0x2b2363=_0xca3af[a0_0x1220('0x1e')](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x89dfa9=Buffer[a0_0x1220('0x28')](_0x2b2363,a0_0x1220('0x1f'));_0x2bbb4a['fromBuffer']({'buffer':_0xca3af,'quality':0x32,'output_format':a0_0x1220('0x29'),'size':'original'},function(_0x4d0432,_0x42682f,_0x40b81e){if(!_0x4d0432){console[a0_0x1220('0x1d')](_0x40b81e);_0x4e7c00[a0_0x1220('0x23')](_0x42682f);}else{_0x4e7c00[a0_0x1220('0x2a')]({'Error':_0x4d0432['message']});}});});exports[a0_0x1220('0x7')]=app;