var a0_0x199d=['compression','body-parser','dotenv','path','express-validator','default','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables','PORT','set','views','join','../views','view\x20engine','pug','use','json','urlencoded','static','get','env','FILES_FOLDER','image1.jpg','base64-img','log','******************************************************','replace','base64','writeHead','length','end','/image2','base64Sync','from','fromBuffer','jpg','original','message','__importDefault','defineProperty','__esModule','express'];(function(_0x23fcb8,_0x22848d){var _0x46c9d6=function(_0x4112f8){while(--_0x4112f8){_0x23fcb8['push'](_0x23fcb8['shift']());}};_0x46c9d6(++_0x22848d);}(a0_0x199d,0xe2));var a0_0x4a8b=function(_0x4bf8f8,_0x33fcc1){_0x4bf8f8=_0x4bf8f8-0x0;var _0x20c9c5=a0_0x199d[_0x4bf8f8];return _0x20c9c5;};'use strict';var __importDefault=this&&this[a0_0x4a8b('0x0')]||function(_0x13d316){return _0x13d316&&_0x13d316['__esModule']?_0x13d316:{'default':_0x13d316};};Object[a0_0x4a8b('0x1')](exports,a0_0x4a8b('0x2'),{'value':!![]});const express_1=__importDefault(require(a0_0x4a8b('0x3')));const compression_1=__importDefault(require(a0_0x4a8b('0x4')));const body_parser_1=__importDefault(require(a0_0x4a8b('0x5')));const logger_1=__importDefault(require('./util/logger'));const dotenv_1=__importDefault(require(a0_0x4a8b('0x6')));const path_1=__importDefault(require(a0_0x4a8b('0x7')));const express_validator_1=__importDefault(require(a0_0x4a8b('0x8')));const fs_1=__importDefault(require('fs'));if(fs_1[a0_0x4a8b('0x9')][a0_0x4a8b('0xa')](a0_0x4a8b('0xb'))){logger_1['default'][a0_0x4a8b('0xc')](a0_0x4a8b('0xd'));dotenv_1[a0_0x4a8b('0x9')][a0_0x4a8b('0xe')]({'path':a0_0x4a8b('0xb')});}else{logger_1['default']['debug'](a0_0x4a8b('0xf'));dotenv_1[a0_0x4a8b('0x9')]['config']({'path':'.env.example'});}const app=express_1[a0_0x4a8b('0x9')]();app['set']('port',process['env'][a0_0x4a8b('0x10')]||0xbb8);app[a0_0x4a8b('0x11')](a0_0x4a8b('0x12'),path_1['default'][a0_0x4a8b('0x13')](__dirname,a0_0x4a8b('0x14')));app[a0_0x4a8b('0x11')](a0_0x4a8b('0x15'),a0_0x4a8b('0x16'));app[a0_0x4a8b('0x17')](compression_1['default']());app[a0_0x4a8b('0x17')](body_parser_1['default'][a0_0x4a8b('0x18')]());app[a0_0x4a8b('0x17')](body_parser_1['default'][a0_0x4a8b('0x19')]({'extended':!![]}));app[a0_0x4a8b('0x17')](express_validator_1[a0_0x4a8b('0x9')]());app[a0_0x4a8b('0x17')](express_1[a0_0x4a8b('0x9')][a0_0x4a8b('0x1a')](path_1['default'][a0_0x4a8b('0x13')](__dirname,'public'),{'maxAge':0x758fac300}));app[a0_0x4a8b('0x1b')]('/image1',function(_0x253c5c,_0x48afed){const _0x58346a=process[a0_0x4a8b('0x1c')][a0_0x4a8b('0x1d')]+a0_0x4a8b('0x1e');const _0x2aa98e=process[a0_0x4a8b('0x1c')][a0_0x4a8b('0x1d')]+'image2.jpg';const _0x30915a=require(a0_0x4a8b('0x1f'));const _0x557090=_0x30915a['base64Sync'](_0x58346a);console[a0_0x4a8b('0x20')](a0_0x4a8b('0x21'));console[a0_0x4a8b('0x20')](_0x557090);const _0x1ffdb8=_0x557090[a0_0x4a8b('0x22')](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x119530=Buffer['from'](_0x1ffdb8,a0_0x4a8b('0x23'));_0x48afed[a0_0x4a8b('0x24')](0xc8,{'Content-Type':'image/png','Content-Length':_0x119530[a0_0x4a8b('0x25')]});_0x48afed[a0_0x4a8b('0x26')](_0x119530);});app[a0_0x4a8b('0x1b')](a0_0x4a8b('0x27'),function(_0x567c96,_0x20b482){const _0x5e3247=require(a0_0x4a8b('0x1f'));const _0x4a8674=require('jimp');const _0x154ddb=require('image-convert');const _0x1b003b=process['env'][a0_0x4a8b('0x1d')]+'image2.jpg';const _0x34fc4c=_0x5e3247[a0_0x4a8b('0x28')](_0x1b003b);console[a0_0x4a8b('0x20')](a0_0x4a8b('0x21'));const _0x4a7b92=_0x34fc4c[a0_0x4a8b('0x22')](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x20fc70=Buffer[a0_0x4a8b('0x29')](_0x4a7b92,a0_0x4a8b('0x23'));_0x154ddb[a0_0x4a8b('0x2a')]({'buffer':_0x34fc4c,'quality':0x32,'output_format':a0_0x4a8b('0x2b'),'size':a0_0x4a8b('0x2c')},function(_0x754f85,_0x44b296,_0x16f16c){if(!_0x754f85){console[a0_0x4a8b('0x20')](_0x16f16c);_0x20b482[a0_0x4a8b('0x26')](_0x44b296);}else{_0x20b482[a0_0x4a8b('0x18')]({'Error':_0x754f85[a0_0x4a8b('0x2d')]});}});});exports['default']=app;