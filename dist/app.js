var a0_0x6384=['FILES_FOLDER','image1.jpg','base64-img','base64Sync','log','******************************************************','replace','from','base64','writeHead','image/png','end','/image2','jimp','image-convert','image2.jpg','fromBuffer','jpg','original','message','defineProperty','compression','body-parser','path','express-validator','default','existsSync','.env','debug','Using\x20.env\x20file\x20to\x20supply\x20config\x20environment\x20variables','config','.env.example','set','port','env','PORT','views','../views','view\x20engine','pug','use','static','join','public','get','/image1'];(function(_0x57e716,_0x187ac5){var _0x314af8=function(_0x212ca4){while(--_0x212ca4){_0x57e716['push'](_0x57e716['shift']());}};_0x314af8(++_0x187ac5);}(a0_0x6384,0x156));var a0_0x269e=function(_0x592bf9,_0x3727cf){_0x592bf9=_0x592bf9-0x0;var _0x3b1b5b=a0_0x6384[_0x592bf9];return _0x3b1b5b;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3597d5){return _0x3597d5&&_0x3597d5['__esModule']?_0x3597d5:{'default':_0x3597d5};};Object[a0_0x269e('0x0')](exports,'__esModule',{'value':!![]});const express_1=__importDefault(require('express'));const compression_1=__importDefault(require(a0_0x269e('0x1')));const body_parser_1=__importDefault(require(a0_0x269e('0x2')));const logger_1=__importDefault(require('./util/logger'));const dotenv_1=__importDefault(require('dotenv'));const path_1=__importDefault(require(a0_0x269e('0x3')));const express_validator_1=__importDefault(require(a0_0x269e('0x4')));const fs_1=__importDefault(require('fs'));if(fs_1[a0_0x269e('0x5')][a0_0x269e('0x6')](a0_0x269e('0x7'))){logger_1[a0_0x269e('0x5')][a0_0x269e('0x8')](a0_0x269e('0x9'));dotenv_1[a0_0x269e('0x5')][a0_0x269e('0xa')]({'path':a0_0x269e('0x7')});}else{logger_1[a0_0x269e('0x5')]['debug']('Using\x20.env.example\x20file\x20to\x20supply\x20config\x20environment\x20variables');dotenv_1['default'][a0_0x269e('0xa')]({'path':a0_0x269e('0xb')});}const app=express_1[a0_0x269e('0x5')]();app[a0_0x269e('0xc')](a0_0x269e('0xd'),process[a0_0x269e('0xe')][a0_0x269e('0xf')]||0xbb8);app[a0_0x269e('0xc')](a0_0x269e('0x10'),path_1[a0_0x269e('0x5')]['join'](__dirname,a0_0x269e('0x11')));app['set'](a0_0x269e('0x12'),a0_0x269e('0x13'));app[a0_0x269e('0x14')](compression_1['default']());app['use'](body_parser_1['default']['json']());app[a0_0x269e('0x14')](body_parser_1[a0_0x269e('0x5')]['urlencoded']({'extended':!![]}));app[a0_0x269e('0x14')](express_validator_1[a0_0x269e('0x5')]());app[a0_0x269e('0x14')](express_1[a0_0x269e('0x5')][a0_0x269e('0x15')](path_1[a0_0x269e('0x5')][a0_0x269e('0x16')](__dirname,a0_0x269e('0x17')),{'maxAge':0x758fac300}));app[a0_0x269e('0x18')](a0_0x269e('0x19'),function(_0x5be9a0,_0x64aedd){const _0x2ebd55=process[a0_0x269e('0xe')][a0_0x269e('0x1a')]+a0_0x269e('0x1b');const _0x5dcf16=process['env'][a0_0x269e('0x1a')]+'image2.jpg';const _0x48c993=require(a0_0x269e('0x1c'));const _0xb442cb=_0x48c993[a0_0x269e('0x1d')](_0x2ebd55);console[a0_0x269e('0x1e')](a0_0x269e('0x1f'));console[a0_0x269e('0x1e')](_0xb442cb);const _0x41371d=_0xb442cb[a0_0x269e('0x20')](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x45e2cc=Buffer[a0_0x269e('0x21')](_0x41371d,a0_0x269e('0x22'));_0x64aedd[a0_0x269e('0x23')](0xc8,{'Content-Type':a0_0x269e('0x24'),'Content-Length':_0x45e2cc['length']});_0x64aedd[a0_0x269e('0x25')](_0x45e2cc);});app[a0_0x269e('0x18')](a0_0x269e('0x26'),function(_0x5ea1a1,_0x29478e){const _0x3e168d=require(a0_0x269e('0x1c'));const _0xb5f8d3=require(a0_0x269e('0x27'));const _0x418af9=require(a0_0x269e('0x28'));const _0x3b639c=process['env']['FILES_FOLDER']+a0_0x269e('0x29');const _0x217edf=_0x3e168d[a0_0x269e('0x1d')](_0x3b639c);console[a0_0x269e('0x1e')](a0_0x269e('0x1f'));const _0x395824=_0x217edf[a0_0x269e('0x20')](/^data:image\/(png|jpeg|jpg);base64,/,'');const _0x3d6ed8=Buffer[a0_0x269e('0x21')](_0x395824,a0_0x269e('0x22'));_0x418af9[a0_0x269e('0x2a')]({'buffer':_0x217edf,'quality':0x32,'output_format':a0_0x269e('0x2b'),'size':a0_0x269e('0x2c')},function(_0x33656d,_0x35cde5,_0x41bcf9){if(!_0x33656d){console[a0_0x269e('0x1e')](_0x41bcf9);_0x29478e[a0_0x269e('0x25')](_0x35cde5);}else{_0x29478e['json']({'Error':_0x33656d[a0_0x269e('0x2d')]});}});});exports[a0_0x269e('0x5')]=app;