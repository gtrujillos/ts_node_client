var a23_0x5270=['currentFile','playlistChanged','downloadFiles','failDownloadFiles','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','playerService','PlayerService','config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','kodiHost','checkDependencies','registerClient','getStatus','bind','getItems','then','stringify','deviceUuid','networkInterfaces','http://restapi.lulo.run/player_devices/register','catch','log','writeFileSync','player','getCurrentlyPlayingVideo','item','label','reportStatus','playingItem:\x20','post','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','loadMediaList','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','m3uFile','toString','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','checkVideo','copySync','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','error:\x20','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','host','pathname','get','\x20Progress:\x20unknown\x09','statusCode','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','error','err:\x20','finish','Downloaded\x20','\x20to\x20','headers','location','302','File\x20Not\x20Found\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','mediaType:\x20','image','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','yuv420p','scale=1920:1080','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','--format=18','Download\x20started','filename:\x20','size:\x20','complete','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','this.playListFile:\x20','newPlayList','#EXTINF:0,luloPlayList','path','substring','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Add','Playlist.Added','Player.Open','kodiCommandClient','RestartApp()','reboot','Rebooting','sudo\x20/sbin/reboot\x20-f','updateSettings','rss','enableClock','turnOnTV','CECActivateSource()','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','parseString','result:\x20%j','none','rssfeeds','set','feed','buildObject','xml:\x20%j','lookandfeel.enablerssfeeds','Settings.SetSettingValue','kodi-send\x20--action=\x22','2.0','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','apply','defineProperty','__esModule','./playerService','node-mediainfo','url','http','request','request-progress','child_process','spawn','exec','youtube-dl','uuid/v4','context.json','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt'];(function(_0x4b6eb8,_0x8f97ef){var _0x1f966e=function(_0x4ac623){while(--_0x4ac623){_0x4b6eb8['push'](_0x4b6eb8['shift']());}};_0x1f966e(++_0x8f97ef);}(a23_0x5270,0xca));var a23_0x102a=function(_0x26412e,_0x69e2e2){_0x26412e=_0x26412e-0x0;var _0x1d5812=a23_0x5270[_0x26412e];return _0x1d5812;};'use strict';var __awaiter=this&&this[a23_0x102a('0x0')]||function(_0x5c3c55,_0x6633f,_0x45b132,_0x4783b9){function _0x3e58a6(_0x28b387){return _0x28b387 instanceof _0x45b132?_0x28b387:new _0x45b132(function(_0x3681b4){_0x3681b4(_0x28b387);});}return new(_0x45b132||(_0x45b132=Promise))(function(_0x504d1c,_0x3a10a5){function _0x2532c1(_0x28854b){try{_0x47794f(_0x4783b9[a23_0x102a('0x1')](_0x28854b));}catch(_0x466b7c){_0x3a10a5(_0x466b7c);}}function _0x123d6f(_0x5049e3){try{_0x47794f(_0x4783b9[a23_0x102a('0x2')](_0x5049e3));}catch(_0x17801b){_0x3a10a5(_0x17801b);}}function _0x47794f(_0x4ad13c){_0x4ad13c[a23_0x102a('0x3')]?_0x504d1c(_0x4ad13c[a23_0x102a('0x4')]):_0x3e58a6(_0x4ad13c[a23_0x102a('0x4')])['then'](_0x2532c1,_0x123d6f);}_0x47794f((_0x4783b9=_0x4783b9[a23_0x102a('0x5')](_0x5c3c55,_0x6633f||[]))[a23_0x102a('0x1')]());});};Object[a23_0x102a('0x6')](exports,a23_0x102a('0x7'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a23_0x102a('0x8'));const mediainfo=require(a23_0x102a('0x9'));const fs=require('fs');const url=require(a23_0x102a('0xa'));const http=require(a23_0x102a('0xb'));const fsExtra=require('fs-extra');const request=require(a23_0x102a('0xc'));const progress=require(a23_0x102a('0xd'));const spawn=require(a23_0x102a('0xe'))[a23_0x102a('0xf')];const exec=require(a23_0x102a('0xe'))[a23_0x102a('0x10')];const isImage=require('is-image');const format=require('string-template');const os=require('os');const youtubedl=require(a23_0x102a('0x11'));const uuidv4=require(a23_0x102a('0x12'));const configFile='config.json';const contextFile=a23_0x102a('0x13');const urlExists=require('url-exists');const kodi_rpc=require('node-kodi');const Downloader=require(a23_0x102a('0x14'));class SyncPlaylistsService{constructor(){this[a23_0x102a('0x15')]=a23_0x102a('0x16');this[a23_0x102a('0x17')]=this[a23_0x102a('0x15')]+a23_0x102a('0x18');this[a23_0x102a('0x19')]=this[a23_0x102a('0x15')]+a23_0x102a('0x1a');this[a23_0x102a('0x1b')]=this[a23_0x102a('0x15')]+a23_0x102a('0x1c');this['m3uFile']=this[a23_0x102a('0x19')]+'lulo_playlist.m3u';this[a23_0x102a('0x1d')]=0x0;this[a23_0x102a('0x1e')]=![];this[a23_0x102a('0x1f')]=[];this[a23_0x102a('0x20')]=[];this['newPlayList']={};this['kodiHost']=a23_0x102a('0x21');this[a23_0x102a('0x22')]=a23_0x102a('0x23');this[a23_0x102a('0x24')]=a23_0x102a('0x25');this[a23_0x102a('0x26')]=![];this[a23_0x102a('0x27')]=new HttpClientService_1['HttpClientService']();this[a23_0x102a('0x28')]=new playerService_1[(a23_0x102a('0x29'))]();}['init'](){this[a23_0x102a('0x2a')]=JSON[a23_0x102a('0x2b')](fs[a23_0x102a('0x2c')](configFile));this[a23_0x102a('0x2d')]=JSON[a23_0x102a('0x2b')](fs[a23_0x102a('0x2c')](contextFile));this[a23_0x102a('0x2e')]=this[a23_0x102a('0x2a')][a23_0x102a('0x2e')];this[a23_0x102a('0x2f')]=process[a23_0x102a('0x30')][a23_0x102a('0x31')]+a23_0x102a('0x32');this[a23_0x102a('0x33')]=this['baseURL']+a23_0x102a('0x34');this[a23_0x102a('0x35')]=this[a23_0x102a('0x2f')]+a23_0x102a('0x36');this[a23_0x102a('0x37')]=new kodi_rpc({'url':this[a23_0x102a('0x38')],'user':this[a23_0x102a('0x22')],'password':this[a23_0x102a('0x24')]});this[a23_0x102a('0x39')]();this[a23_0x102a('0x3a')]();this['checkFolders']();this['loadMediaList']();this['updateSettings']();setInterval(function(){this[a23_0x102a('0x3b')]();}[a23_0x102a('0x3c')](this),0x2710);setInterval(function(){this[a23_0x102a('0x3a')]();}[a23_0x102a('0x3c')](this),0x493e0);}[a23_0x102a('0x39')](){}['registerClient'](){this[a23_0x102a('0x37')]['playlist'][a23_0x102a('0x3d')](0x1)[a23_0x102a('0x3e')](function(_0x1d2801){const _0x5821bc=JSON[a23_0x102a('0x3f')](_0x1d2801);const _0x2114e8={'player_id':this['playerId'],'device_uuid':this['config'][a23_0x102a('0x40')],'network_info':JSON[a23_0x102a('0x3f')](os[a23_0x102a('0x41')]()),'firmware_info':JSON[a23_0x102a('0x3f')](this[a23_0x102a('0x2d')]),'playlist':_0x5821bc,'playing_item':'','status':0x0};this[a23_0x102a('0x27')]['post'](a23_0x102a('0x42'),_0x2114e8,![])['then'](function(_0x346026){console['log']('register\x20response:\x20'+Date());})[a23_0x102a('0x43')](function(_0x307312){});console[a23_0x102a('0x44')](_0x2114e8);}[a23_0x102a('0x3c')](this));const _0x59cf11=this['config']['deviceUuid'];if(!_0x59cf11||_0x59cf11==''){this[a23_0x102a('0x2a')][a23_0x102a('0x40')]=uuidv4();this['config']={'deviceUuid':this['config'][a23_0x102a('0x40')],'playerId':this['config'][a23_0x102a('0x2e')]};fs[a23_0x102a('0x45')](configFile,JSON[a23_0x102a('0x3f')](this[a23_0x102a('0x2a')]));}}['getStatus'](){console[a23_0x102a('0x44')](a23_0x102a('0x3b'));this[a23_0x102a('0x37')][a23_0x102a('0x46')][a23_0x102a('0x47')]()['then'](function(_0x55d100){const _0x41b760=_0x55d100[a23_0x102a('0x48')][a23_0x102a('0x49')];this[a23_0x102a('0x4a')](_0x41b760);}[a23_0x102a('0x3c')](this))[a23_0x102a('0x43')](function(_0x2891ce){console[a23_0x102a('0x44')](_0x2891ce);this[a23_0x102a('0x4a')](JSON['stringify'](_0x2891ce));}[a23_0x102a('0x3c')](this));}[a23_0x102a('0x4a')](_0x13d1da){console['log'](a23_0x102a('0x4b')+_0x13d1da);const _0x3be80d={'player_id':this['playerId'],'device_uuid':this[a23_0x102a('0x2a')]['deviceUuid'],'status':_0x13d1da!=''&&_0x13d1da!=null?0x1:0x0,'playing_item':_0x13d1da};this[a23_0x102a('0x27')][a23_0x102a('0x4c')](a23_0x102a('0x4d'),_0x3be80d,![])[a23_0x102a('0x3e')](function(_0x2b4030){console[a23_0x102a('0x44')](a23_0x102a('0x4e')+JSON[a23_0x102a('0x3f')](_0x2b4030));})['catch'](function(_0x5520fa){});}[a23_0x102a('0x4f')](){fsExtra[a23_0x102a('0x50')](this[a23_0x102a('0x15')],_0x43bbd4=>{});fsExtra['ensureDir'](this[a23_0x102a('0x17')],_0x679d94=>{});fsExtra[a23_0x102a('0x50')](this[a23_0x102a('0x19')],_0x187abe=>{});}[a23_0x102a('0x51')](){const _0x222b31=format(this[a23_0x102a('0x33')],this[a23_0x102a('0x2e')]);console[a23_0x102a('0x44')](_0x222b31);request({'url':_0x222b31,'json':!![]},function(_0x3cf29d,_0x333b3f,_0x3bcf49){console[a23_0x102a('0x44')](a23_0x102a('0x52'));this['newPlayList']=_0x3bcf49;this[a23_0x102a('0x1e')]=this[a23_0x102a('0x53')]();fsExtra[a23_0x102a('0x54')](this[a23_0x102a('0x17')]);this[a23_0x102a('0x1f')]=[];this[a23_0x102a('0x20')]=[];this[a23_0x102a('0x1d')]=0x0;for(const _0xb993b0 in _0x3bcf49){this[a23_0x102a('0x1f')][a23_0x102a('0x55')](_0x3bcf49[_0xb993b0]);}console[a23_0x102a('0x44')](a23_0x102a('0x56')+this['downloadFiles'][a23_0x102a('0x57')]);if(this['downloadFiles'][a23_0x102a('0x57')]>0x0){this[a23_0x102a('0x58')]();}}['bind'](this));}[a23_0x102a('0x59')](){this[a23_0x102a('0x26')]=!![];if(fsExtra[a23_0x102a('0x5a')](this['tempFolder'])){fsExtra[a23_0x102a('0x54')](this['tempFolder']);}if(fsExtra[a23_0x102a('0x5a')](this['filesFolder'])){fsExtra['emptyDirSync'](this[a23_0x102a('0x19')]);}if(!fsExtra['existsSync'](this['playListFile'])){fsExtra[a23_0x102a('0x5b')](this[a23_0x102a('0x1b')]);}if(!fsExtra[a23_0x102a('0x5a')](this[a23_0x102a('0x5c')])){fsExtra[a23_0x102a('0x5b')](this[a23_0x102a('0x5c')]);}this[a23_0x102a('0x51')]();}[a23_0x102a('0x53')](){const _0x19d766=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a23_0x102a('0x5a')](this[a23_0x102a('0x1b')])){return!![];}else{const _0x2d44de=fsExtra['readFileSync'](this[a23_0x102a('0x1b')])[a23_0x102a('0x5d')]();if(_0x2d44de!=_0x19d766){return!![];}}}catch(_0x3ec4e3){console[a23_0x102a('0x44')](_0x3ec4e3);}return![];}[a23_0x102a('0x58')](){console[a23_0x102a('0x44')](a23_0x102a('0x5e')+this['currentFile']+a23_0x102a('0x5f')+this[a23_0x102a('0x1f')]['length']);if(this[a23_0x102a('0x1d')]>=this[a23_0x102a('0x1f')]['length']){this[a23_0x102a('0x60')]();return;}const _0xce2c48=String(this[a23_0x102a('0x1f')][this[a23_0x102a('0x1d')]]['path']);const _0x58609b=this[a23_0x102a('0x1f')][this[a23_0x102a('0x1d')]][a23_0x102a('0x61')];let _0x5aadfb=_0xce2c48['substring'](_0xce2c48[a23_0x102a('0x62')]('/')+0x1);const _0x28c236=_0x5aadfb[a23_0x102a('0x63')]('.')[a23_0x102a('0x64')](0x0,-0x1)[a23_0x102a('0x65')]('.');let _0x252f3f=this[a23_0x102a('0x2f')]+_0xce2c48;const _0x47a915=_0x252f3f[a23_0x102a('0x63')]('.')['slice'](0x0,-0x1)[a23_0x102a('0x65')]('.');if(_0x58609b==a23_0x102a('0x66')){_0x5aadfb=_0x5aadfb+a23_0x102a('0x67');}else if(_0x58609b=='image'){_0x5aadfb=_0x28c236+a23_0x102a('0x67');_0x252f3f=_0x47a915+a23_0x102a('0x67');}console[a23_0x102a('0x44')](a23_0x102a('0x68'));console[a23_0x102a('0x44')](_0xce2c48);console['log'](_0x58609b);console[a23_0x102a('0x44')](_0x5aadfb);console[a23_0x102a('0x44')](_0x252f3f);console[a23_0x102a('0x44')](_0x28c236);console[a23_0x102a('0x44')](_0x47a915);console[a23_0x102a('0x44')](a23_0x102a('0x68'));if(fsExtra[a23_0x102a('0x5a')](this['tempFolder']+_0x5aadfb)){this['checkVideo'](this[a23_0x102a('0x17')]+_0x5aadfb)[a23_0x102a('0x3e')](function(_0x120e63){if(_0x120e63){this[a23_0x102a('0x1d')]++;}else{this['playlistChanged']=!![];}this[a23_0x102a('0x58')]();}[a23_0x102a('0x3c')](this));}else if(fsExtra[a23_0x102a('0x5a')](this[a23_0x102a('0x19')]+_0x5aadfb)){this[a23_0x102a('0x69')](this[a23_0x102a('0x19')]+_0x5aadfb)['then'](function(_0x48198a){if(_0x48198a){fsExtra[a23_0x102a('0x6a')](this[a23_0x102a('0x19')]+_0x5aadfb,this['tempFolder']+_0x5aadfb);this['currentFile']++;}else{this[a23_0x102a('0x1e')]=!![];}this[a23_0x102a('0x58')]();}['bind'](this));}else{console[a23_0x102a('0x44')]('Downloading:\x20'+_0x252f3f);this[a23_0x102a('0x1e')]=!![];if(_0x58609b==a23_0x102a('0x66')){this[a23_0x102a('0x6b')](_0xce2c48);}else{this[a23_0x102a('0x6c')](_0x252f3f,_0x5aadfb,_0x58609b);}}}[a23_0x102a('0x69')](_0x2f6803){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0x102a('0x6d')+_0x2f6803);const _0x594007=yield mediainfo(_0x2f6803)[a23_0x102a('0x43')](_0x12058e=>{console[a23_0x102a('0x44')](_0x12058e);fsExtra[a23_0x102a('0x5b')](_0x2f6803);return![];});const _0x5cfe44=_0x594007[a23_0x102a('0x6e')][a23_0x102a('0x6f')][a23_0x102a('0x57')]>0x1&&_0x594007[a23_0x102a('0x6e')]['track'][0x1][a23_0x102a('0x70')]==a23_0x102a('0x71');if(!_0x5cfe44){fsExtra[a23_0x102a('0x5b')](_0x2f6803);}console[a23_0x102a('0x44')](a23_0x102a('0x72')+_0x5cfe44);return _0x5cfe44;});}[a23_0x102a('0x6c')](_0x8d72e6,_0x423012,_0xede7a0){const _0x1cbe58=new Downloader();console['log'](_0x8d72e6);console[a23_0x102a('0x44')](_0x423012);console[a23_0x102a('0x44')](_0xede7a0);const _0x37c88a=_0x1cbe58[a23_0x102a('0x58')](_0x8d72e6,this['tempFolder']+_0x423012);urlExists(_0x8d72e6,function(_0x4fa82c,_0x4c5a20){if(_0x4c5a20){if(this[a23_0x102a('0x20')][a23_0x102a('0x73')](this['currentFile'])){const _0x488651=this[a23_0x102a('0x20')][a23_0x102a('0x74')](this[a23_0x102a('0x1d')]);if(_0x488651>-0x1){this['failDownloadFiles'][a23_0x102a('0x75')](_0x488651,0x1);}}console[a23_0x102a('0x44')](a23_0x102a('0x76')+_0x8d72e6);_0x37c88a[a23_0x102a('0x77')]();}else{if(!this[a23_0x102a('0x20')][a23_0x102a('0x73')](this['currentFile'])){this[a23_0x102a('0x20')][a23_0x102a('0x55')](this[a23_0x102a('0x1d')]);}console[a23_0x102a('0x44')](a23_0x102a('0x78')+_0x8d72e6);this[a23_0x102a('0x1d')]++;this[a23_0x102a('0x58')]();}}[a23_0x102a('0x3c')](this));_0x37c88a['on'](a23_0x102a('0x77'),function(_0x37c88a){console['log']('start:\x20'+_0x8d72e6);});_0x37c88a['on']('error',function(_0x37c88a){console[a23_0x102a('0x44')](a23_0x102a('0x79'));this[a23_0x102a('0x58')]();}[a23_0x102a('0x3c')](this));_0x37c88a['on'](a23_0x102a('0x7a'),function(_0x37c88a){console[a23_0x102a('0x44')](a23_0x102a('0x7a'));console[a23_0x102a('0x44')](a23_0x102a('0x7b')+_0x423012);console[a23_0x102a('0x44')]('mediaType:\x20'+_0xede7a0);this[a23_0x102a('0x69')](this[a23_0x102a('0x17')]+_0x423012)[a23_0x102a('0x3e')](function(_0x492b99){if(_0x492b99){this[a23_0x102a('0x1d')]++;}this[a23_0x102a('0x58')]();}[a23_0x102a('0x3c')](this));}[a23_0x102a('0x3c')](this));_0x37c88a['on'](a23_0x102a('0x7c'),function(_0x37c88a){console['log']('stopped');});_0x37c88a['on'](a23_0x102a('0x7d'),function(_0x37c88a){console[a23_0x102a('0x44')](a23_0x102a('0x7d'));});_0x37c88a['on'](a23_0x102a('0x7e'),function(_0x37c88a){console[a23_0x102a('0x44')]('retry');});}[a23_0x102a('0x7f')](_0x5f307c,_0x5f59ee,_0x1d9fe5,_0xf1b38d){console[a23_0x102a('0x44')](a23_0x102a('0x7f'));console[a23_0x102a('0x44')](_0x5f307c);const _0x466307=!![];let _0x292a0e=0x0;const _0xa7b1e2='';console[a23_0x102a('0x44')](a23_0x102a('0x80')+_0x5f307c+'\x20to\x20'+_0x5f59ee);if(_0x292a0e){if(_0x292a0e>0x5){_0xf1b38d(a23_0x102a('0x81'),_0x5f307c,_0x1d9fe5,null);return;}}else{_0x292a0e=0x0;}const _0x301bd7=this[a23_0x102a('0x17')]+_0x5f59ee;let _0x3d0cc8;if(_0xf1b38d===undefined){console[a23_0x102a('0x44')](a23_0x102a('0x82')+_0x5f307c+'\x20to\x20'+_0x301bd7);_0xf1b38d=function(_0x38ce3e,_0x4923d7){console['log'](a23_0x102a('0x83'),_0x38ce3e,_0x4923d7);};}http[a23_0x102a('0x84')]['maxSockets']=0x64;const _0x4509aa={'host':url[a23_0x102a('0x2b')](_0x5f307c)[a23_0x102a('0x85')],'port':0x50,'path':url[a23_0x102a('0x2b')](_0x5f307c)[a23_0x102a('0x86')],'agent':![]};const _0x2a3683=http[a23_0x102a('0x87')](_0x4509aa,function(_0x1f5413){let _0x3f1ca0=0x0;let _0x106e65=0x0;function _0x1489bb(){if(_0x3f1ca0===undefined){console[a23_0x102a('0x44')](_0x5f59ee+a23_0x102a('0x88')+_0x106e65+'/'+'?');}const _0x5de309=_0x106e65/_0x3f1ca0*0x64;console[a23_0x102a('0x44')](_0x5f59ee+'\x20Progress:\x20'+_0x5de309+'%\x09'+_0x106e65+'/'+_0x3f1ca0);}console[a23_0x102a('0x44')](_0x5f59ee+'\x20'+_0x1f5413[a23_0x102a('0x89')]);switch(_0x1f5413['statusCode']){case 0xc8:_0x3f1ca0=_0x1f5413['headers']['content-length']||_0xa7b1e2;fs[a23_0x102a('0x8a')](_0x301bd7,function(_0x50f923,_0x5c5eb8){if(!_0x50f923){console[a23_0x102a('0x44')](a23_0x102a('0x8b')+_0x301bd7);if(_0x5c5eb8[a23_0x102a('0x8c')]==_0x3f1ca0){console[a23_0x102a('0x44')](a23_0x102a('0x8d')+_0x3f1ca0+')');console['log'](a23_0x102a('0x8e'));}else{console['log'](a23_0x102a('0x8f')+_0x5c5eb8[a23_0x102a('0x8c')]+a23_0x102a('0x90')+_0x3f1ca0+')');}}_0x3d0cc8=fs[a23_0x102a('0x91')](_0x301bd7);_0x1f5413[a23_0x102a('0x92')](_0x3d0cc8);_0x1f5413['on'](a23_0x102a('0x93'),function(_0x324679){_0x106e65+=_0x324679[a23_0x102a('0x57')];_0x1489bb();});_0x2a3683['on'](a23_0x102a('0x94'),function(_0x50f923){console[a23_0x102a('0x44')](a23_0x102a('0x95'));console[a23_0x102a('0x44')](_0x50f923);});_0x3d0cc8['on'](a23_0x102a('0x96'),function(){console['log'](a23_0x102a('0x97')+_0x5f307c+a23_0x102a('0x98')+_0x5f59ee);_0xf1b38d(null,_0x5f59ee,_0x1d9fe5,_0x5f59ee);}[a23_0x102a('0x3c')](this));});break;case 0x12e:const _0x3cf2b3=_0x1f5413[a23_0x102a('0x99')][a23_0x102a('0x9a')];console[a23_0x102a('0x44')]('Redirect\x20'+_0x5f307c+a23_0x102a('0x98')+_0x3cf2b3);if(_0x292a0e<0x5){this[a23_0x102a('0x7f')](_0x3cf2b3,_0x5f59ee,_0xf1b38d,_0x292a0e++);}else{console[a23_0x102a('0x94')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x5f307c+'.');_0xf1b38d(a23_0x102a('0x9b'),null,null,null);}return;case 0x194:console['log'](a23_0x102a('0x9c')+_0x5f307c);default:console['log']('Problem\x20downloading\x20'+_0x5f307c+a23_0x102a('0x9d')+_0x1f5413[a23_0x102a('0x89')]);_0x2a3683['abort']();_0xf1b38d(_0x1f5413[a23_0x102a('0x89')],null,null,null);return;}})['on'](a23_0x102a('0x94'),function(_0x14a952){console[a23_0x102a('0x44')](a23_0x102a('0x9e')+_0x5f307c+'\x20'+_0x14a952[a23_0x102a('0x9f')]);_0xf1b38d(_0x14a952,null,null,null);});}[a23_0x102a('0xa0')](_0x183754,_0x5cc54a,_0x16e8ae,_0x3a46f5){console[a23_0x102a('0x44')](a23_0x102a('0xa0'));console[a23_0x102a('0x44')](_0x183754);console[a23_0x102a('0x44')](_0x5cc54a);console[a23_0x102a('0x44')](_0x16e8ae);console[a23_0x102a('0x44')](_0x3a46f5);if(_0x16e8ae=='image'){const _0x9b373=this['downloadFiles'][this[a23_0x102a('0x1d')]][a23_0x102a('0xa1')]!=null?this['downloadFiles'][this['currentFile']]['duration']:0x1e;this[a23_0x102a('0xa2')](_0x3a46f5,_0x9b373);}else if(_0x16e8ae=='video'){if(_0x183754==null&&_0x5cc54a!=''){this[a23_0x102a('0x1d')]++;}this[a23_0x102a('0x58')]();}console['log'](this['currentFile']);}[a23_0x102a('0xa3')](_0x2b7903,_0x34741a,_0x4d2f7e){progress(request(_0x2b7903),{})['on'](a23_0x102a('0xa4'),function(_0x73a11b){console[a23_0x102a('0x44')](_0x73a11b);})['on'](a23_0x102a('0x94'),function(_0x18073f){console[a23_0x102a('0x44')](a23_0x102a('0xa5'));this[a23_0x102a('0x58')]();})['on'](a23_0x102a('0x7a'),function(){console[a23_0x102a('0x44')](a23_0x102a('0x7b')+_0x34741a);console[a23_0x102a('0x44')](a23_0x102a('0xa6')+_0x4d2f7e);if(_0x4d2f7e==a23_0x102a('0xa7')){const _0x1a0e49=this[a23_0x102a('0x1f')][this[a23_0x102a('0x1d')]][a23_0x102a('0xa1')]!=null?this[a23_0x102a('0x1f')][this[a23_0x102a('0x1d')]][a23_0x102a('0xa1')]:0x1e;this[a23_0x102a('0xa2')](_0x34741a,_0x1a0e49);}else if(_0x4d2f7e=='video'){this['currentFile']++;this[a23_0x102a('0x58')]();}}['bind'](this))[a23_0x102a('0x92')](fs[a23_0x102a('0x91')](this[a23_0x102a('0x17')]+_0x34741a));}['createImageVideo'](_0x3d9508,_0x4f3999=0x1e){const _0x3724c2=this[a23_0x102a('0x17')]+_0x3d9508;console[a23_0x102a('0x44')](_0x3724c2);console[a23_0x102a('0x44')](_0x3d9508);const _0x519dfe=_0x3d9508[a23_0x102a('0x63')]('.')[a23_0x102a('0x64')](0x0,-0x1)[a23_0x102a('0x65')]('.');const _0x2d47fe=a23_0x102a('0xa8');const _0x2474d3=['-y','-r',a23_0x102a('0xa9'),a23_0x102a('0xaa'),'1',a23_0x102a('0xab'),a23_0x102a('0xac'),'-i',_0x3724c2,'-t',String(_0x4f3999),a23_0x102a('0xad'),'libx264','-pix_fmt',a23_0x102a('0xae'),'-r','25','-vf',a23_0x102a('0xaf'),this['tempFolder']+_0x519dfe+a23_0x102a('0x67')];const _0x18b641=spawn(_0x2d47fe,_0x2474d3);_0x18b641['stdout']['on'](a23_0x102a('0x93'),function(_0x5ac628){console[a23_0x102a('0x44')](a23_0x102a('0xb0')+_0x3724c2);});_0x18b641['stderr']['on'](a23_0x102a('0x93'),function(_0x17e2a7){console[a23_0x102a('0x44')](a23_0x102a('0xb1')+_0x17e2a7);}[a23_0x102a('0x3c')](this));_0x18b641['on'](a23_0x102a('0xb2'),function(){console[a23_0x102a('0x44')](a23_0x102a('0xb3'));this[a23_0x102a('0x1d')]++;this[a23_0x102a('0x58')]();}[a23_0x102a('0x3c')](this));}[a23_0x102a('0x6b')](_0x2c3f48){const _0x2dbc5f=this[a23_0x102a('0x17')]+'/'+_0x2c3f48+a23_0x102a('0x67');const _0x31bf73=youtubedl('http://www.youtube.com/watch?v='+_0x2c3f48,[a23_0x102a('0xb4')],{'cwd':__dirname});_0x31bf73['on']('info',function(_0x320a99){console[a23_0x102a('0x44')](a23_0x102a('0xb5'));console[a23_0x102a('0x44')](a23_0x102a('0xb6')+_0x320a99['_filename']);console[a23_0x102a('0x44')](a23_0x102a('0xb7')+_0x320a99[a23_0x102a('0x8c')]);});_0x31bf73['on'](a23_0x102a('0xb8'),function complete(_0x18deeb){'use strict';console[a23_0x102a('0x44')](a23_0x102a('0xb6')+_0x18deeb[a23_0x102a('0xb9')]+a23_0x102a('0xba'));});_0x31bf73['on']('end',function(){console['log'](a23_0x102a('0xbb'));this[a23_0x102a('0x69')](_0x2dbc5f)[a23_0x102a('0x3e')](function(_0x29e14b){if(_0x29e14b){this[a23_0x102a('0x1d')]++;}this[a23_0x102a('0x58')]();}[a23_0x102a('0x3c')](this));}[a23_0x102a('0x3c')](this));_0x31bf73['pipe'](fs[a23_0x102a('0x91')](_0x2dbc5f));}[a23_0x102a('0x60')](){console['log'](a23_0x102a('0xbc'));if(this[a23_0x102a('0x1e')]){if(this[a23_0x102a('0x20')]['length']==0x0){console[a23_0x102a('0x44')](a23_0x102a('0xbd')+this['playListFile']);fs['writeFileSync'](this[a23_0x102a('0x1b')],JSON[a23_0x102a('0x3f')](this[a23_0x102a('0xbe')]));let _0x168930='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a23_0x102a('0xbf')+'\x0d\x0a';for(const _0x3d3260 in this['downloadFiles']){const _0x306e8c=this[a23_0x102a('0x1f')][_0x3d3260][a23_0x102a('0xc0')];const _0x531683=this[a23_0x102a('0x1f')][_0x3d3260][a23_0x102a('0x61')];const _0x50ccac=_0x306e8c[a23_0x102a('0xc1')](_0x306e8c[a23_0x102a('0x62')]('/')+0x1);let _0x2f5bd7=_0x50ccac[a23_0x102a('0x63')]('.')[a23_0x102a('0x64')](0x0,-0x1)[a23_0x102a('0x65')]('.');if(_0x531683==a23_0x102a('0x66')){_0x2f5bd7=_0x306e8c;}_0x168930+='/home/osmc/luloclient/media/files/'+_0x2f5bd7+'.mp4'+'\x0d\x0a';console[a23_0x102a('0x44')](a23_0x102a('0xc2')+_0x168930);}console[a23_0x102a('0x44')](a23_0x102a('0xc2')+_0x168930);fsExtra[a23_0x102a('0x54')](this[a23_0x102a('0x19')]);console[a23_0x102a('0x44')](a23_0x102a('0xc3')+this[a23_0x102a('0x17')]);fsExtra[a23_0x102a('0x6a')](this[a23_0x102a('0x17')],this['filesFolder']);console['log'](a23_0x102a('0xc4')+this[a23_0x102a('0x5c')]);fsExtra[a23_0x102a('0x45')](this[a23_0x102a('0x5c')],_0x168930);console['log'](a23_0x102a('0xc5')+this[a23_0x102a('0x17')]);fsExtra[a23_0x102a('0x54')](this[a23_0x102a('0x17')]);console[a23_0x102a('0x44')]('Rebooting..');this['reboot']();}else{console[a23_0x102a('0x44')](a23_0x102a('0xc6'));this['currentFile']=0x0;setTimeout(function(){this['download']();}[a23_0x102a('0x3c')](this),0x1388);}}else{console[a23_0x102a('0x44')](a23_0x102a('0xc7'));}}[a23_0x102a('0xc8')](){this[a23_0x102a('0xc9')]('Playlist.Clear',{'playlistid':0x1},function(_0x4fad65){console[a23_0x102a('0x44')]('Playlist.Cleared');console[a23_0x102a('0x44')](_0x4fad65);this[a23_0x102a('0xc9')](a23_0x102a('0xca'),{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x4fad65){console[a23_0x102a('0x44')](a23_0x102a('0xcb'));console[a23_0x102a('0x44')](_0x4fad65);this['jsonrpcClient'](a23_0x102a('0xcc'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x4fad65){console[a23_0x102a('0x44')]('Playlist.Opened');console['log'](_0x4fad65);this[a23_0x102a('0xcd')](a23_0x102a('0xce'));}[a23_0x102a('0x3c')](this));}[a23_0x102a('0x3c')](this));}['bind'](this));}[a23_0x102a('0xcf')](){console[a23_0x102a('0x44')](a23_0x102a('0xd0'));exec(a23_0x102a('0xd1'),function(_0x2c6b35){console['log'](_0x2c6b35);});}[a23_0x102a('0xd2')](){const _0x15f946=format(this[a23_0x102a('0x35')],this[a23_0x102a('0x2e')]);console[a23_0x102a('0x44')](_0x15f946);request({'url':_0x15f946,'json':!![]},function(_0x5b0cf5,_0x242ac1,_0xdc7406){if(_0xdc7406['length']>0x0){const _0x52fb23=_0xdc7406[0x0];const _0x5a7049=_0x52fb23[a23_0x102a('0xd3')];const _0x20b025=_0x52fb23['header_active']==0x1;this['setRss'](_0x5a7049);this[a23_0x102a('0xd4')](_0x20b025);this[a23_0x102a('0x3a')]();}console[a23_0x102a('0x44')](_0xdc7406);}[a23_0x102a('0x3c')](this));}['turnOffTV'](){this['kodiCommandClient']('CECStandby()');}[a23_0x102a('0xd5')](){this[a23_0x102a('0xcd')](a23_0x102a('0xd6'));}[a23_0x102a('0xd7')](_0x4c13de){const _0x251ebf=_0x4c13de!=null&&_0x4c13de!='';const _0x45bbec=a23_0x102a('0xd8');const _0x56762e=fsExtra['readFileSync'](_0x45bbec);console['log']('xmlContent:\x20'+_0x56762e);const _0x4c3e4b=require('xml2js');const _0x50bb64=_0x4c3e4b[a23_0x102a('0xd9')];_0x50bb64(_0x56762e,function(_0x1a1a16,_0xd53124){console[a23_0x102a('0x44')]('err:\x20%j',_0x1a1a16);console['log'](a23_0x102a('0xda'),_0xd53124);if(!_0x4c13de||_0x4c13de==null||_0x4c13de==''){_0x4c13de=a23_0x102a('0xdb');}_0xd53124[a23_0x102a('0xdc')][a23_0x102a('0xdd')][0x0][a23_0x102a('0xde')][0x0]['_']=_0x4c13de;const _0x4373f6=new _0x4c3e4b['Builder']();const _0x45181a=_0x4373f6[a23_0x102a('0xdf')](_0xd53124);console[a23_0x102a('0x44')](a23_0x102a('0xe0'),_0x45181a);fsExtra[a23_0x102a('0x45')](_0x45bbec,_0x45181a);});this['kodiCommandClient']('RefreshRSS()');this['jsonrpcClient']('Settings.SetSettingValue',{'setting':a23_0x102a('0xe1'),'value':_0x251ebf},function(_0x43f097){console[a23_0x102a('0x44')]('setRss:');console[a23_0x102a('0x44')](_0x43f097);}[a23_0x102a('0x3c')](this));}[a23_0x102a('0xd4')](_0x18bf32){this[a23_0x102a('0xc9')](a23_0x102a('0xe2'),{'setting':'videoplayer.usedisplayasclock','value':_0x18bf32},function(_0x12c930){console[a23_0x102a('0x44')]('enableClock:\x20');console[a23_0x102a('0x44')](_0x12c930);}[a23_0x102a('0x3c')](this));}[a23_0x102a('0xcd')](_0x2da286){exec(a23_0x102a('0xe3')+_0x2da286+'\x22',function(_0x55d1b4){console[a23_0x102a('0x44')](_0x55d1b4);});}[a23_0x102a('0xc9')](_0xc4d314,_0x3b58f7,_0x1fbc40){const _0x4bfdb6={'jsonrpc':a23_0x102a('0xe4'),'method':_0xc4d314,'params':_0x3b58f7,'id':0x1};this[a23_0x102a('0x27')][a23_0x102a('0x4c')](this[a23_0x102a('0x38')]+a23_0x102a('0xe5'),_0x4bfdb6,![],{'user':this[a23_0x102a('0x22')],'pass':this[a23_0x102a('0x24')]})['then'](function(_0x3f64d4){_0x1fbc40(_0x3f64d4);})[a23_0x102a('0x43')](function(_0x39b470){});}}exports[a23_0x102a('0xe6')]=SyncPlaylistsService;