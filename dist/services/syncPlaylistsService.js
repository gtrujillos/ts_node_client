var a23_0x70f3=['Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','pathname','statusCode','headers','content-length','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','pipe','data','err:\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','image','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','ffmpeg','-loop','-pattern_type','glob','-c:v','libx264','-vf','scale=1920:1080','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','Download\x20started','_filename','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','checkVideo','createWriteStream','Finishing','this.playListFile:\x20','writeFileSync','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','m3uContent:\x20','copySync:\x20','copySync','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','reboot','Rebooting','sudo\x20/sbin/reboot\x20-f','header_active','setRss','enableClock','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','set','Builder','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','/jsonrpc','kodiUser','SyncPlaylistsService','next','throw','done','value','apply','../infrastructure/HttpClientService','./playerService','url','http','fs-extra','request','request-progress','child_process','spawn','exec','string-template','youtube-dl','context.json','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiPassword','.lulo123.','forceReload','HttpClientService','playerService','config','readFileSync','context','parse','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','playerServiceURL','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','bind','playlist','getItems','deviceUuid','stringify','httpClientService','post','http://restapi.lulo.run/player_devices/register','then','log','register\x20response:\x20','catch','getStatus','player','getCurrentlyPlayingVideo','label','reportStatus','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','hasPlayListChanged','Total:\x20','length','download','reloadMediaList','emptyDirSync','existsSync','removeSync','m3uFile','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','media','track','@type','Video','mediainfo\x20check:','downloader','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile'];(function(_0x1a7a4a,_0x5fd0f2){var _0x24349b=function(_0x1ad79b){while(--_0x1ad79b){_0x1a7a4a['push'](_0x1a7a4a['shift']());}};_0x24349b(++_0x5fd0f2);}(a23_0x70f3,0x15e));var a23_0x7493=function(_0x5ce55b,_0x36f4de){_0x5ce55b=_0x5ce55b-0x0;var _0x4c6d32=a23_0x70f3[_0x5ce55b];return _0x4c6d32;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x2f5ff7,_0x5ebe96,_0x2a245b,_0x529392){function _0x2567ed(_0x459acd){return _0x459acd instanceof _0x2a245b?_0x459acd:new _0x2a245b(function(_0xacb328){_0xacb328(_0x459acd);});}return new(_0x2a245b||(_0x2a245b=Promise))(function(_0x5ddf78,_0x3c25c4){function _0x163594(_0x329076){try{_0xc5ce74(_0x529392[a23_0x7493('0x0')](_0x329076));}catch(_0x19557f){_0x3c25c4(_0x19557f);}}function _0x4d08e9(_0x1612c4){try{_0xc5ce74(_0x529392[a23_0x7493('0x1')](_0x1612c4));}catch(_0x43654a){_0x3c25c4(_0x43654a);}}function _0xc5ce74(_0x37c7a1){_0x37c7a1[a23_0x7493('0x2')]?_0x5ddf78(_0x37c7a1[a23_0x7493('0x3')]):_0x2567ed(_0x37c7a1[a23_0x7493('0x3')])['then'](_0x163594,_0x4d08e9);}_0xc5ce74((_0x529392=_0x529392[a23_0x7493('0x4')](_0x2f5ff7,_0x5ebe96||[]))[a23_0x7493('0x0')]());});};Object['defineProperty'](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a23_0x7493('0x5'));const playerService_1=require(a23_0x7493('0x6'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a23_0x7493('0x7'));const http=require(a23_0x7493('0x8'));const fsExtra=require(a23_0x7493('0x9'));const request=require(a23_0x7493('0xa'));const progress=require(a23_0x7493('0xb'));const spawn=require(a23_0x7493('0xc'))[a23_0x7493('0xd')];const exec=require(a23_0x7493('0xc'))[a23_0x7493('0xe')];const isImage=require('is-image');const format=require(a23_0x7493('0xf'));const os=require('os');const youtubedl=require(a23_0x7493('0x10'));const uuidv4=require('uuid/v4');const configFile='config.json';const contextFile=a23_0x7493('0x11');const urlExists=require('url-exists');const kodi_rpc=require(a23_0x7493('0x12'));const Downloader=require(a23_0x7493('0x13'));class SyncPlaylistsService{constructor(){this[a23_0x7493('0x14')]=a23_0x7493('0x15');this[a23_0x7493('0x16')]=this['mediaFolder']+a23_0x7493('0x17');this[a23_0x7493('0x18')]=this[a23_0x7493('0x14')]+a23_0x7493('0x19');this[a23_0x7493('0x1a')]=this[a23_0x7493('0x14')]+a23_0x7493('0x1b');this['m3uFile']=this[a23_0x7493('0x18')]+a23_0x7493('0x1c');this[a23_0x7493('0x1d')]=0x0;this[a23_0x7493('0x1e')]=![];this[a23_0x7493('0x1f')]=[];this[a23_0x7493('0x20')]=[];this[a23_0x7493('0x21')]={};this[a23_0x7493('0x22')]=a23_0x7493('0x23');this['kodiUser']='lulo';this[a23_0x7493('0x24')]=a23_0x7493('0x25');this[a23_0x7493('0x26')]=![];this['httpClientService']=new HttpClientService_1[(a23_0x7493('0x27'))]();this[a23_0x7493('0x28')]=new playerService_1['PlayerService']();}['init'](){this[a23_0x7493('0x29')]=JSON['parse'](fs[a23_0x7493('0x2a')](configFile));this[a23_0x7493('0x2b')]=JSON[a23_0x7493('0x2c')](fs[a23_0x7493('0x2a')](contextFile));this[a23_0x7493('0x2d')]=this['config'][a23_0x7493('0x2d')];this[a23_0x7493('0x2e')]=process[a23_0x7493('0x2f')][a23_0x7493('0x30')]+a23_0x7493('0x31');this[a23_0x7493('0x32')]=this['baseURL']+'api/player_playlist.php?player_id={0}';this[a23_0x7493('0x33')]=this['baseURL']+'api/player.php?player_id={0}';this[a23_0x7493('0x34')]=new kodi_rpc({'url':this['kodiHost'],'user':this['kodiUser'],'password':this[a23_0x7493('0x24')]});this[a23_0x7493('0x35')]();this[a23_0x7493('0x36')]();this[a23_0x7493('0x37')]();this[a23_0x7493('0x38')]();this[a23_0x7493('0x39')]();setInterval(function(){this['getStatus']();}[a23_0x7493('0x3a')](this),0x2710);setInterval(function(){this[a23_0x7493('0x36')]();}[a23_0x7493('0x3a')](this),0x493e0);}[a23_0x7493('0x35')](){}[a23_0x7493('0x36')](){this[a23_0x7493('0x34')][a23_0x7493('0x3b')][a23_0x7493('0x3c')](0x1)['then'](function(_0x377add){const _0x48b48b=JSON['stringify'](_0x377add);const _0x714537={'player_id':this[a23_0x7493('0x2d')],'device_uuid':this['config'][a23_0x7493('0x3d')],'network_info':JSON[a23_0x7493('0x3e')](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this['context']),'playlist':_0x48b48b,'playing_item':'','status':0x0};this[a23_0x7493('0x3f')][a23_0x7493('0x40')](a23_0x7493('0x41'),_0x714537,![])[a23_0x7493('0x42')](function(_0x58f203){console[a23_0x7493('0x43')](a23_0x7493('0x44')+Date());})[a23_0x7493('0x45')](function(_0x4de770){});console[a23_0x7493('0x43')](_0x714537);}[a23_0x7493('0x3a')](this));const _0x321eb7=this['config'][a23_0x7493('0x3d')];if(!_0x321eb7||_0x321eb7==''){this[a23_0x7493('0x29')]['deviceUuid']=uuidv4();this[a23_0x7493('0x29')]={'deviceUuid':this[a23_0x7493('0x29')][a23_0x7493('0x3d')],'playerId':this['config'][a23_0x7493('0x2d')]};fs['writeFileSync'](configFile,JSON[a23_0x7493('0x3e')](this[a23_0x7493('0x29')]));}}[a23_0x7493('0x46')](){console['log']('getStatus');this['kodi'][a23_0x7493('0x47')][a23_0x7493('0x48')]()[a23_0x7493('0x42')](function(_0x224eb3){const _0x4fbb92=_0x224eb3['item'][a23_0x7493('0x49')];this[a23_0x7493('0x4a')](_0x4fbb92);}[a23_0x7493('0x3a')](this))[a23_0x7493('0x45')](function(_0xba115a){console[a23_0x7493('0x43')](_0xba115a);this[a23_0x7493('0x4a')](JSON['stringify'](_0xba115a));}[a23_0x7493('0x3a')](this));}[a23_0x7493('0x4a')](_0x5caf76){console[a23_0x7493('0x43')]('playingItem:\x20'+_0x5caf76);const _0x5f4a0b={'player_id':this[a23_0x7493('0x2d')],'device_uuid':this[a23_0x7493('0x29')]['deviceUuid'],'status':_0x5caf76!=''&&_0x5caf76!=null?0x1:0x0,'playing_item':_0x5caf76};this[a23_0x7493('0x3f')]['post'](a23_0x7493('0x4b'),_0x5f4a0b,![])[a23_0x7493('0x42')](function(_0x1a2d11){console[a23_0x7493('0x43')](a23_0x7493('0x4c')+JSON[a23_0x7493('0x3e')](_0x1a2d11));})[a23_0x7493('0x45')](function(_0x21f204){});}['checkFolders'](){fsExtra[a23_0x7493('0x4d')](this[a23_0x7493('0x14')],_0x35c685=>{});fsExtra[a23_0x7493('0x4d')](this[a23_0x7493('0x16')],_0x1e2eb2=>{});fsExtra['ensureDir'](this['filesFolder'],_0x87e2f4=>{});}['loadMediaList'](){const _0x1ed366=format(this[a23_0x7493('0x32')],this[a23_0x7493('0x2d')]);console[a23_0x7493('0x43')](_0x1ed366);request({'url':_0x1ed366,'json':!![]},function(_0x2aac10,_0x10bf09,_0x2db8d6){console['log'](a23_0x7493('0x4e'));this['newPlayList']=_0x2db8d6;this['playlistChanged']=this[a23_0x7493('0x4f')]();fsExtra['emptyDirSync'](this['tempFolder']);this['downloadFiles']=[];this[a23_0x7493('0x20')]=[];this['currentFile']=0x0;for(const _0x46888a in _0x2db8d6){this[a23_0x7493('0x1f')]['push'](_0x2db8d6[_0x46888a]);}console['log'](a23_0x7493('0x50')+this[a23_0x7493('0x1f')][a23_0x7493('0x51')]);if(this[a23_0x7493('0x1f')][a23_0x7493('0x51')]>0x0){this[a23_0x7493('0x52')]();}}[a23_0x7493('0x3a')](this));}[a23_0x7493('0x53')](){this[a23_0x7493('0x26')]=!![];if(fsExtra['existsSync'](this[a23_0x7493('0x16')])){fsExtra[a23_0x7493('0x54')](this[a23_0x7493('0x16')]);}if(fsExtra[a23_0x7493('0x55')](this[a23_0x7493('0x18')])){fsExtra[a23_0x7493('0x54')](this['filesFolder']);}if(!fsExtra[a23_0x7493('0x55')](this[a23_0x7493('0x1a')])){fsExtra[a23_0x7493('0x56')](this[a23_0x7493('0x1a')]);}if(!fsExtra['existsSync'](this[a23_0x7493('0x57')])){fsExtra['removeSync'](this['m3uFile']);}this[a23_0x7493('0x38')]();}[a23_0x7493('0x4f')](){const _0x3e16ef=JSON['stringify'](this[a23_0x7493('0x21')]);try{if(!fsExtra[a23_0x7493('0x55')](this[a23_0x7493('0x1a')])){return!![];}else{const _0x48fa37=fsExtra[a23_0x7493('0x2a')](this[a23_0x7493('0x1a')])[a23_0x7493('0x58')]();if(_0x48fa37!=_0x3e16ef){return!![];}}}catch(_0x1378f9){console[a23_0x7493('0x43')](_0x1378f9);}return![];}[a23_0x7493('0x52')](){console[a23_0x7493('0x43')](a23_0x7493('0x59')+this['currentFile']+a23_0x7493('0x5a')+this['downloadFiles']['length']);if(this[a23_0x7493('0x1d')]>=this[a23_0x7493('0x1f')][a23_0x7493('0x51')]){this[a23_0x7493('0x5b')]();return;}const _0x14aab0=String(this[a23_0x7493('0x1f')][this[a23_0x7493('0x1d')]][a23_0x7493('0x5c')]);const _0x519e39=this[a23_0x7493('0x1f')][this[a23_0x7493('0x1d')]][a23_0x7493('0x5d')];let _0x4f9e92=_0x14aab0[a23_0x7493('0x5e')](_0x14aab0[a23_0x7493('0x5f')]('/')+0x1);const _0x4cf674=_0x4f9e92[a23_0x7493('0x60')]('.')[a23_0x7493('0x61')](0x0,-0x1)[a23_0x7493('0x62')]('.');let _0x4e5a2e=this[a23_0x7493('0x2e')]+_0x14aab0;const _0xc8e626=_0x4e5a2e['split']('.')['slice'](0x0,-0x1)[a23_0x7493('0x62')]('.');if(_0x519e39==a23_0x7493('0x63')){_0x4f9e92=_0x4f9e92+a23_0x7493('0x64');}else if(_0x519e39=='image'){_0x4f9e92=_0x4cf674+a23_0x7493('0x64');_0x4e5a2e=_0xc8e626+a23_0x7493('0x64');}console[a23_0x7493('0x43')](a23_0x7493('0x65'));console[a23_0x7493('0x43')](_0x14aab0);console['log'](_0x519e39);console[a23_0x7493('0x43')](_0x4f9e92);console['log'](_0x4e5a2e);console['log'](_0x4cf674);console[a23_0x7493('0x43')](_0xc8e626);console['log'](a23_0x7493('0x65'));if(fsExtra[a23_0x7493('0x55')](this[a23_0x7493('0x16')]+_0x4f9e92)){this['checkVideo'](this[a23_0x7493('0x16')]+_0x4f9e92)[a23_0x7493('0x42')](function(_0x36154e){if(_0x36154e){this[a23_0x7493('0x1d')]++;}else{this[a23_0x7493('0x1e')]=!![];}this[a23_0x7493('0x52')]();}[a23_0x7493('0x3a')](this));}else if(fsExtra[a23_0x7493('0x55')](this[a23_0x7493('0x18')]+_0x4f9e92)){this['checkVideo'](this[a23_0x7493('0x18')]+_0x4f9e92)[a23_0x7493('0x42')](function(_0xce10a9){if(_0xce10a9){fsExtra['copySync'](this[a23_0x7493('0x18')]+_0x4f9e92,this[a23_0x7493('0x16')]+_0x4f9e92);this[a23_0x7493('0x1d')]++;}else{this[a23_0x7493('0x1e')]=!![];}this[a23_0x7493('0x52')]();}[a23_0x7493('0x3a')](this));}else{console[a23_0x7493('0x43')]('Downloading:\x20'+_0x4e5a2e);this['playlistChanged']=!![];if(_0x519e39=='youtube_single'){this['downloadYouTube'](_0x14aab0);}else{this['downloader'](_0x4e5a2e,_0x4f9e92,_0x519e39);}}}['checkVideo'](_0x4712fa){return __awaiter(this,void 0x0,void 0x0,function*(){console['log']('videoFile:\x20'+_0x4712fa);const _0x24c6f3=yield mediainfo(_0x4712fa)[a23_0x7493('0x45')](_0x1a877b=>{console[a23_0x7493('0x43')](_0x1a877b);fsExtra['removeSync'](_0x4712fa);return![];});const _0x244d41=_0x24c6f3[a23_0x7493('0x66')][a23_0x7493('0x67')][a23_0x7493('0x51')]>0x1&&_0x24c6f3[a23_0x7493('0x66')][a23_0x7493('0x67')][0x1][a23_0x7493('0x68')]==a23_0x7493('0x69');if(!_0x244d41){fsExtra[a23_0x7493('0x56')](_0x4712fa);}console['log'](a23_0x7493('0x6a')+_0x244d41);return _0x244d41;});}[a23_0x7493('0x6b')](_0x50170f,_0x571fe3,_0x48c7af){const _0x1058a7=new Downloader();console['log'](_0x50170f);console[a23_0x7493('0x43')](_0x571fe3);console['log'](_0x48c7af);const _0x5423b6=_0x1058a7[a23_0x7493('0x52')](_0x50170f,this['tempFolder']+_0x571fe3);urlExists(_0x50170f,function(_0x10fa00,_0x33efc5){if(_0x33efc5){if(this[a23_0x7493('0x20')][a23_0x7493('0x6c')](this['currentFile'])){const _0x5be61b=this[a23_0x7493('0x20')][a23_0x7493('0x6d')](this['currentFile']);if(_0x5be61b>-0x1){this['failDownloadFiles'][a23_0x7493('0x6e')](_0x5be61b,0x1);}}console[a23_0x7493('0x43')](a23_0x7493('0x6f')+_0x50170f);_0x5423b6[a23_0x7493('0x70')]();}else{if(!this[a23_0x7493('0x20')]['includes'](this[a23_0x7493('0x1d')])){this['failDownloadFiles']['push'](this['currentFile']);}console[a23_0x7493('0x43')](a23_0x7493('0x71')+_0x50170f);this[a23_0x7493('0x1d')]++;this['download']();}}[a23_0x7493('0x3a')](this));_0x5423b6['on'](a23_0x7493('0x70'),function(_0x5423b6){console[a23_0x7493('0x43')](a23_0x7493('0x72')+_0x50170f);});_0x5423b6['on'](a23_0x7493('0x73'),function(_0x5423b6){console['log'](a23_0x7493('0x74'));this[a23_0x7493('0x52')]();}[a23_0x7493('0x3a')](this));_0x5423b6['on'](a23_0x7493('0x75'),function(_0x5423b6){console[a23_0x7493('0x43')]('end');console[a23_0x7493('0x43')](a23_0x7493('0x76')+_0x571fe3);console[a23_0x7493('0x43')](a23_0x7493('0x77')+_0x48c7af);this['checkVideo'](this[a23_0x7493('0x16')]+_0x571fe3)[a23_0x7493('0x42')](function(_0xacb10a){if(_0xacb10a){this[a23_0x7493('0x1d')]++;}this['download']();}[a23_0x7493('0x3a')](this));}['bind'](this));_0x5423b6['on'](a23_0x7493('0x78'),function(_0x5423b6){console['log'](a23_0x7493('0x78'));});_0x5423b6['on'](a23_0x7493('0x79'),function(_0x5423b6){console[a23_0x7493('0x43')](a23_0x7493('0x79'));});_0x5423b6['on'](a23_0x7493('0x7a'),function(_0x5423b6){console[a23_0x7493('0x43')](a23_0x7493('0x7a'));});}[a23_0x7493('0x7b')](_0x25a064,_0x59a30b,_0x1c5f70,_0x1b7fee){console[a23_0x7493('0x43')]('downloadHTTPFile');console['log'](_0x25a064);const _0x2eaf54=!![];let _0x39da69=0x0;const _0x59fd6a='';console[a23_0x7493('0x43')](a23_0x7493('0x7c')+_0x25a064+'\x20to\x20'+_0x59a30b);if(_0x39da69){if(_0x39da69>0x5){_0x1b7fee(a23_0x7493('0x7d'),_0x25a064,_0x1c5f70,null);return;}}else{_0x39da69=0x0;}const _0x3dd47e=this[a23_0x7493('0x16')]+_0x59a30b;let _0xe8731;if(_0x1b7fee===undefined){console[a23_0x7493('0x43')](a23_0x7493('0x7e')+_0x25a064+a23_0x7493('0x7f')+_0x3dd47e);_0x1b7fee=function(_0x1472be,_0x5c67d1){console['log'](a23_0x7493('0x80'),_0x1472be,_0x5c67d1);};}http['globalAgent'][a23_0x7493('0x81')]=0x64;const _0x44154f={'host':url[a23_0x7493('0x2c')](_0x25a064)['host'],'port':0x50,'path':url[a23_0x7493('0x2c')](_0x25a064)[a23_0x7493('0x82')],'agent':![]};const _0x2d7493=http['get'](_0x44154f,function(_0x173549){let _0x39052b=0x0;let _0x5bd574=0x0;function _0x3a93bc(){if(_0x39052b===undefined){console['log'](_0x59a30b+'\x20Progress:\x20unknown\x09'+_0x5bd574+'/'+'?');}const _0x3f6a2b=_0x5bd574/_0x39052b*0x64;console[a23_0x7493('0x43')](_0x59a30b+'\x20Progress:\x20'+_0x3f6a2b+'%\x09'+_0x5bd574+'/'+_0x39052b);}console['log'](_0x59a30b+'\x20'+_0x173549[a23_0x7493('0x83')]);switch(_0x173549[a23_0x7493('0x83')]){case 0xc8:_0x39052b=_0x173549[a23_0x7493('0x84')][a23_0x7493('0x85')]||_0x59fd6a;fs['stat'](_0x3dd47e,function(_0x9741a8,_0x3e0044){if(!_0x9741a8){console[a23_0x7493('0x43')]('Have\x20already\x20downloaded\x20'+_0x3dd47e);if(_0x3e0044[a23_0x7493('0x86')]==_0x39052b){console[a23_0x7493('0x43')](a23_0x7493('0x87')+_0x39052b+')');console['log'](a23_0x7493('0x88'));}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x3e0044[a23_0x7493('0x86')]+a23_0x7493('0x89')+_0x39052b+')');}}_0xe8731=fs['createWriteStream'](_0x3dd47e);_0x173549[a23_0x7493('0x8a')](_0xe8731);_0x173549['on'](a23_0x7493('0x8b'),function(_0x2bbca0){_0x5bd574+=_0x2bbca0['length'];_0x3a93bc();});_0x2d7493['on'](a23_0x7493('0x73'),function(_0x9741a8){console[a23_0x7493('0x43')](a23_0x7493('0x8c'));console[a23_0x7493('0x43')](_0x9741a8);});_0xe8731['on']('finish',function(){console[a23_0x7493('0x43')]('Downloaded\x20'+_0x25a064+a23_0x7493('0x7f')+_0x59a30b);_0x1b7fee(null,_0x59a30b,_0x1c5f70,_0x59a30b);}[a23_0x7493('0x3a')](this));});break;case 0x12e:const _0x12dfe8=_0x173549[a23_0x7493('0x84')][a23_0x7493('0x8d')];console[a23_0x7493('0x43')](a23_0x7493('0x8e')+_0x25a064+a23_0x7493('0x7f')+_0x12dfe8);if(_0x39da69<0x5){this[a23_0x7493('0x7b')](_0x12dfe8,_0x59a30b,_0x1b7fee,_0x39da69++);}else{console[a23_0x7493('0x73')](a23_0x7493('0x8f')+_0x25a064+'.');_0x1b7fee('302',null,null,null);}return;case 0x194:console[a23_0x7493('0x43')](a23_0x7493('0x90')+_0x25a064);default:console['log'](a23_0x7493('0x91')+_0x25a064+'\x20STATUS:\x20'+_0x173549[a23_0x7493('0x83')]);_0x2d7493[a23_0x7493('0x92')]();_0x1b7fee(_0x173549[a23_0x7493('0x83')],null,null,null);return;}})['on'](a23_0x7493('0x73'),function(_0x2dc55e){console[a23_0x7493('0x43')](a23_0x7493('0x93')+_0x25a064+'\x20'+_0x2dc55e['message']);_0x1b7fee(_0x2dc55e,null,null,null);});}[a23_0x7493('0x94')](_0x1d50db,_0x1f5e68,_0x3743fa,_0x585ce7){console[a23_0x7493('0x43')]('downloadHTTPFileCallback');console[a23_0x7493('0x43')](_0x1d50db);console[a23_0x7493('0x43')](_0x1f5e68);console[a23_0x7493('0x43')](_0x3743fa);console[a23_0x7493('0x43')](_0x585ce7);if(_0x3743fa==a23_0x7493('0x95')){const _0x497a12=this[a23_0x7493('0x1f')][this[a23_0x7493('0x1d')]]['duration']!=null?this[a23_0x7493('0x1f')][this[a23_0x7493('0x1d')]][a23_0x7493('0x96')]:0x1e;this[a23_0x7493('0x97')](_0x585ce7,_0x497a12);}else if(_0x3743fa==a23_0x7493('0x98')){if(_0x1d50db==null&&_0x1f5e68!=''){this[a23_0x7493('0x1d')]++;}this[a23_0x7493('0x52')]();}console[a23_0x7493('0x43')](this['currentFile']);}[a23_0x7493('0x99')](_0x39d3cc,_0x382970,_0x78265){progress(request(_0x39d3cc),{})['on'](a23_0x7493('0x9a'),function(_0x304cf8){console['log'](_0x304cf8);})['on']('error',function(_0x4c2790){console[a23_0x7493('0x43')](a23_0x7493('0x9b'));this['download']();})['on'](a23_0x7493('0x75'),function(){console[a23_0x7493('0x43')]('Downloaded:\x20'+_0x382970);console[a23_0x7493('0x43')](a23_0x7493('0x77')+_0x78265);if(_0x78265==a23_0x7493('0x95')){const _0x57f67=this['downloadFiles'][this[a23_0x7493('0x1d')]]['duration']!=null?this[a23_0x7493('0x1f')][this[a23_0x7493('0x1d')]][a23_0x7493('0x96')]:0x1e;this[a23_0x7493('0x97')](_0x382970,_0x57f67);}else if(_0x78265==a23_0x7493('0x98')){this[a23_0x7493('0x1d')]++;this[a23_0x7493('0x52')]();}}[a23_0x7493('0x3a')](this))[a23_0x7493('0x8a')](fs['createWriteStream'](this[a23_0x7493('0x16')]+_0x382970));}[a23_0x7493('0x97')](_0x1a3dbb,_0x516c64=0x1e){const _0x41bf5f=this[a23_0x7493('0x16')]+_0x1a3dbb;console[a23_0x7493('0x43')](_0x41bf5f);console[a23_0x7493('0x43')](_0x1a3dbb);const _0x32e445=_0x1a3dbb[a23_0x7493('0x60')]('.')[a23_0x7493('0x61')](0x0,-0x1)[a23_0x7493('0x62')]('.');const _0x287f02=a23_0x7493('0x9c');const _0x169845=['-y','-r','1/2',a23_0x7493('0x9d'),'1',a23_0x7493('0x9e'),a23_0x7493('0x9f'),'-i',_0x41bf5f,'-t',String(_0x516c64),a23_0x7493('0xa0'),a23_0x7493('0xa1'),'-pix_fmt','yuv420p','-r','25',a23_0x7493('0xa2'),a23_0x7493('0xa3'),this['tempFolder']+_0x32e445+a23_0x7493('0x64')];const _0x271091=spawn(_0x287f02,_0x169845);_0x271091['stdout']['on']('data',function(_0x5be42b){console[a23_0x7493('0x43')](a23_0x7493('0xa4')+_0x41bf5f);});_0x271091[a23_0x7493('0xa5')]['on'](a23_0x7493('0x8b'),function(_0x29880f){console[a23_0x7493('0x43')](a23_0x7493('0xa6')+_0x29880f);}[a23_0x7493('0x3a')](this));_0x271091['on'](a23_0x7493('0xa7'),function(){console[a23_0x7493('0x43')](a23_0x7493('0xa8'));this['currentFile']++;this['download']();}[a23_0x7493('0x3a')](this));}[a23_0x7493('0xa9')](_0x489404){const _0x30e8cb=this['tempFolder']+'/'+_0x489404+a23_0x7493('0x64');const _0x3353df=a23_0x7493('0xaa')+_0x489404;console[a23_0x7493('0x43')](a23_0x7493('0xab')+_0x3353df);console[a23_0x7493('0x43')](a23_0x7493('0xac')+_0x30e8cb);const _0x8cccf9=youtubedl(_0x3353df,[a23_0x7493('0xad'),'--no-check-certificate'],{'cwd':__dirname});_0x8cccf9['on']('info',function(_0x56661a){console[a23_0x7493('0x43')](a23_0x7493('0xae'));console['log']('filename:\x20'+_0x56661a[a23_0x7493('0xaf')]);console[a23_0x7493('0x43')]('size:\x20'+_0x56661a['size']);});_0x8cccf9['on'](a23_0x7493('0xb0'),function complete(_0x5129c0){'use strict';console[a23_0x7493('0x43')](a23_0x7493('0xb1')+_0x5129c0[a23_0x7493('0xaf')]+a23_0x7493('0xb2'));});_0x8cccf9['on'](a23_0x7493('0x75'),function(){console[a23_0x7493('0x43')](a23_0x7493('0xb3'));this[a23_0x7493('0xb4')](_0x30e8cb)[a23_0x7493('0x42')](function(_0x573889){if(_0x573889){this['currentFile']++;}this[a23_0x7493('0x52')]();}[a23_0x7493('0x3a')](this));}[a23_0x7493('0x3a')](this));_0x8cccf9[a23_0x7493('0x8a')](fs[a23_0x7493('0xb5')](_0x30e8cb));}[a23_0x7493('0x5b')](){console[a23_0x7493('0x43')](a23_0x7493('0xb6'));if(this[a23_0x7493('0x1e')]){if(this[a23_0x7493('0x20')][a23_0x7493('0x51')]==0x0){console[a23_0x7493('0x43')](a23_0x7493('0xb7')+this[a23_0x7493('0x1a')]);fs[a23_0x7493('0xb8')](this['playListFile'],JSON[a23_0x7493('0x3e')](this['newPlayList']));let _0x353145=a23_0x7493('0xb9')+'\x0d\x0a'+a23_0x7493('0xba')+'\x0d\x0a';for(const _0x14a0b2 in this[a23_0x7493('0x1f')]){const _0x2516da=this[a23_0x7493('0x1f')][_0x14a0b2][a23_0x7493('0x5c')];const _0x4d9689=this[a23_0x7493('0x1f')][_0x14a0b2][a23_0x7493('0x5d')];const _0x1ea27c=_0x2516da[a23_0x7493('0x5e')](_0x2516da[a23_0x7493('0x5f')]('/')+0x1);let _0xef1fba=_0x1ea27c[a23_0x7493('0x60')]('.')[a23_0x7493('0x61')](0x0,-0x1)[a23_0x7493('0x62')]('.');if(_0x4d9689==a23_0x7493('0x63')){_0xef1fba=_0x2516da;}_0x353145+='/home/osmc/luloclient/media/files/'+_0xef1fba+'.mp4'+'\x0d\x0a';console[a23_0x7493('0x43')](a23_0x7493('0xbb')+_0x353145);}console[a23_0x7493('0x43')](a23_0x7493('0xbb')+_0x353145);fsExtra[a23_0x7493('0x54')](this[a23_0x7493('0x18')]);console[a23_0x7493('0x43')](a23_0x7493('0xbc')+this[a23_0x7493('0x16')]);fsExtra[a23_0x7493('0xbd')](this['tempFolder'],this['filesFolder']);console[a23_0x7493('0x43')](a23_0x7493('0xbe')+this['m3uFile']);fsExtra[a23_0x7493('0xb8')](this['m3uFile'],_0x353145);console[a23_0x7493('0x43')](a23_0x7493('0xbf')+this['tempFolder']);fsExtra['emptyDirSync'](this[a23_0x7493('0x16')]);console[a23_0x7493('0x43')](a23_0x7493('0xc0'));this['reboot']();}else{console['log'](a23_0x7493('0xc1'));this['currentFile']=0x0;setTimeout(function(){this[a23_0x7493('0x52')]();}['bind'](this),0x1388);}}else{console[a23_0x7493('0x43')](a23_0x7493('0xc2'));}}[a23_0x7493('0xc3')](){this[a23_0x7493('0xc4')](a23_0x7493('0xc5'),{'playlistid':0x1},function(_0xb012f6){console[a23_0x7493('0x43')]('Playlist.Cleared');console[a23_0x7493('0x43')](_0xb012f6);this[a23_0x7493('0xc4')]('Playlist.Add',{'item':{'file':a23_0x7493('0xc6')},'playlistid':0x1},function(_0xb012f6){console[a23_0x7493('0x43')](a23_0x7493('0xc7'));console['log'](_0xb012f6);this[a23_0x7493('0xc4')](a23_0x7493('0xc8'),{'item':{'playlistid':0x1,'position':0x0}},function(_0xb012f6){console[a23_0x7493('0x43')](a23_0x7493('0xc9'));console[a23_0x7493('0x43')](_0xb012f6);this[a23_0x7493('0xca')](a23_0x7493('0xcb'));}[a23_0x7493('0x3a')](this));}['bind'](this));}['bind'](this));}[a23_0x7493('0xcc')](){console[a23_0x7493('0x43')](a23_0x7493('0xcd'));exec(a23_0x7493('0xce'),function(_0x232fc6){console[a23_0x7493('0x43')](_0x232fc6);});}['updateSettings'](){const _0x3774e1=format(this[a23_0x7493('0x33')],this[a23_0x7493('0x2d')]);console[a23_0x7493('0x43')](_0x3774e1);request({'url':_0x3774e1,'json':!![]},function(_0x360606,_0xb63400,_0x54eaaf){if(_0x54eaaf[a23_0x7493('0x51')]>0x0){const _0x397de7=_0x54eaaf[0x0];const _0x13ddbe=_0x397de7['rss'];const _0x1ddfe5=_0x397de7[a23_0x7493('0xcf')]==0x1;this[a23_0x7493('0xd0')](_0x13ddbe);this[a23_0x7493('0xd1')](_0x1ddfe5);this[a23_0x7493('0x36')]();}console[a23_0x7493('0x43')](_0x54eaaf);}[a23_0x7493('0x3a')](this));}[a23_0x7493('0xd2')](){this[a23_0x7493('0xca')](a23_0x7493('0xd3'));}[a23_0x7493('0xd4')](){this[a23_0x7493('0xca')](a23_0x7493('0xd5'));}['setRss'](_0x5e4f49){const _0x5ba71=_0x5e4f49!=null&&_0x5e4f49!='';const _0xb9d685=a23_0x7493('0xd6');const _0x2c4595=fsExtra[a23_0x7493('0x2a')](_0xb9d685);console[a23_0x7493('0x43')](a23_0x7493('0xd7')+_0x2c4595);const _0x5c2c5e=require(a23_0x7493('0xd8'));const _0x19cba1=_0x5c2c5e[a23_0x7493('0xd9')];_0x19cba1(_0x2c4595,function(_0x7e0e69,_0x361819){console[a23_0x7493('0x43')](a23_0x7493('0xda'),_0x7e0e69);console[a23_0x7493('0x43')](a23_0x7493('0xdb'),_0x361819);if(!_0x5e4f49||_0x5e4f49==null||_0x5e4f49==''){_0x5e4f49=a23_0x7493('0xdc');}_0x361819[a23_0x7493('0xdd')][a23_0x7493('0xde')][0x0]['feed'][0x0]['_']=_0x5e4f49;const _0xc3a194=new _0x5c2c5e[(a23_0x7493('0xdf'))]();const _0x47ca91=_0xc3a194[a23_0x7493('0xe0')](_0x361819);console[a23_0x7493('0x43')](a23_0x7493('0xe1'),_0x47ca91);fsExtra[a23_0x7493('0xb8')](_0xb9d685,_0x47ca91);});this['kodiCommandClient'](a23_0x7493('0xe2'));this[a23_0x7493('0xc4')](a23_0x7493('0xe3'),{'setting':a23_0x7493('0xe4'),'value':_0x5ba71},function(_0x1155cf){console['log'](a23_0x7493('0xe5'));console['log'](_0x1155cf);}['bind'](this));}[a23_0x7493('0xd1')](_0x552493){this['jsonrpcClient'](a23_0x7493('0xe3'),{'setting':a23_0x7493('0xe6'),'value':_0x552493},function(_0x5b241e){console['log'](a23_0x7493('0xe7'));console[a23_0x7493('0x43')](_0x5b241e);}[a23_0x7493('0x3a')](this));}[a23_0x7493('0xca')](_0x153e24){exec(a23_0x7493('0xe8')+_0x153e24+'\x22',function(_0x29d34a){console[a23_0x7493('0x43')](_0x29d34a);});}['jsonrpcClient'](_0x410d6e,_0x1d4487,_0x3bc421){const _0x3361f5={'jsonrpc':a23_0x7493('0xe9'),'method':_0x410d6e,'params':_0x1d4487,'id':0x1};this['httpClientService']['post'](this[a23_0x7493('0x22')]+a23_0x7493('0xea'),_0x3361f5,![],{'user':this[a23_0x7493('0xeb')],'pass':this[a23_0x7493('0x24')]})[a23_0x7493('0x42')](function(_0x3a11f1){_0x3bc421(_0x3a11f1);})['catch'](function(_0x396670){});}}exports[a23_0x7493('0xec')]=SyncPlaylistsService;