var a22_0x2eb9=['sudo\x20/sbin/shutdown\x20-r\x20now','toString','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','downloadYouTube','downloader','videoFile:\x20','catch','media','track','Video','removeSync','mediainfo\x20check:','includes','indexOf','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','data','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','pipe','ffmpeg','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','yuv420p','-vf','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','complete','filename:\x20','\x20already\x20downloaded.','createWriteStream','Finishing','writeFileSync','#EXTCPlayListM3U::M3U','/home/osmc/luloclient/media/files/','copySync','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','throw','done','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','url','request','request-progress','child_process','spawn','is-image','youtube-dl','uuid/v4','config.json','context.json','node-kodi','mt-files-downloader','mediaFolder','media/','temp/','filesFolder','files/','playListFile','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','newPlayList','HttpClientService','init','context','parse','readFileSync','playerId','config','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','http://localhost','.lulo123.','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','playlist','getItems','stringify','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','deviceUuid','kodi','player','getCurrentlyPlayingVideo','label','reportStatus','ensureDir','tempFolder','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','failDownloadFiles','push','Total:\x20','length','download','reloadMediaList','existsSync'];(function(_0x2c3328,_0x1c9981){var _0xeff4b3=function(_0x3fb8ed){while(--_0x3fb8ed){_0x2c3328['push'](_0x2c3328['shift']());}};_0xeff4b3(++_0x1c9981);}(a22_0x2eb9,0x6c));var a22_0x43f2=function(_0x48e7fd,_0x57f651){_0x48e7fd=_0x48e7fd-0x0;var _0xc99f3b=a22_0x2eb9[_0x48e7fd];return _0xc99f3b;};'use strict';var __awaiter=this&&this[a22_0x43f2('0x0')]||function(_0x23411e,_0x2b5620,_0x10de92,_0x308e9c){function _0x415971(_0xf5d032){return _0xf5d032 instanceof _0x10de92?_0xf5d032:new _0x10de92(function(_0x2e06eb){_0x2e06eb(_0xf5d032);});}return new(_0x10de92||(_0x10de92=Promise))(function(_0x4f926e,_0x43af58){function _0xcc3444(_0x41bf4e){try{_0x20f194(_0x308e9c['next'](_0x41bf4e));}catch(_0x161863){_0x43af58(_0x161863);}}function _0xf68d40(_0x50a4b3){try{_0x20f194(_0x308e9c[a22_0x43f2('0x1')](_0x50a4b3));}catch(_0x476b76){_0x43af58(_0x476b76);}}function _0x20f194(_0x2a50cb){_0x2a50cb[a22_0x43f2('0x2')]?_0x4f926e(_0x2a50cb[a22_0x43f2('0x3')]):_0x415971(_0x2a50cb[a22_0x43f2('0x3')])[a22_0x43f2('0x4')](_0xcc3444,_0xf68d40);}_0x20f194((_0x308e9c=_0x308e9c[a22_0x43f2('0x5')](_0x23411e,_0x2b5620||[]))['next']());});};Object[a22_0x43f2('0x6')](exports,a22_0x43f2('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x43f2('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a22_0x43f2('0x9'));const http=require('http');const fsExtra=require('fs-extra');const request=require(a22_0x43f2('0xa'));const progress=require(a22_0x43f2('0xb'));const spawn=require(a22_0x43f2('0xc'))[a22_0x43f2('0xd')];const exec=require(a22_0x43f2('0xc'))['exec'];const isImage=require(a22_0x43f2('0xe'));const format=require('string-template');const os=require('os');const youtubedl=require(a22_0x43f2('0xf'));const uuidv4=require(a22_0x43f2('0x10'));const configFile=a22_0x43f2('0x11');const contextFile=a22_0x43f2('0x12');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x43f2('0x13'));const Downloader=require(a22_0x43f2('0x14'));class SyncPlaylistsService{constructor(){this[a22_0x43f2('0x15')]=a22_0x43f2('0x16');this['tempFolder']=this[a22_0x43f2('0x15')]+a22_0x43f2('0x17');this[a22_0x43f2('0x18')]=this['mediaFolder']+a22_0x43f2('0x19');this[a22_0x43f2('0x1a')]=this['mediaFolder']+'playlist.txt';this[a22_0x43f2('0x1b')]=this['filesFolder']+a22_0x43f2('0x1c');this[a22_0x43f2('0x1d')]=0x0;this[a22_0x43f2('0x1e')]=![];this[a22_0x43f2('0x1f')]=[];this['failDownloadFiles']=[];this[a22_0x43f2('0x20')]={};this['httpClientService']=new HttpClientService_1[(a22_0x43f2('0x21'))]();}[a22_0x43f2('0x22')](){this['config']=JSON['parse'](fs['readFileSync'](configFile));this[a22_0x43f2('0x23')]=JSON[a22_0x43f2('0x24')](fs[a22_0x43f2('0x25')](contextFile));this[a22_0x43f2('0x26')]=this[a22_0x43f2('0x27')][a22_0x43f2('0x26')];this[a22_0x43f2('0x28')]=process[a22_0x43f2('0x29')][a22_0x43f2('0x2a')]+a22_0x43f2('0x2b');this[a22_0x43f2('0x2c')]=this[a22_0x43f2('0x28')]+a22_0x43f2('0x2d');this['kodi']=new kodi_rpc({'url':a22_0x43f2('0x2e'),'user':'lulo','password':a22_0x43f2('0x2f')});this[a22_0x43f2('0x30')]();this[a22_0x43f2('0x31')]();this[a22_0x43f2('0x32')]();this[a22_0x43f2('0x33')]();setInterval(function(){this[a22_0x43f2('0x34')]();}['bind'](this),0x2710);setInterval(function(){this[a22_0x43f2('0x31')]();}[a22_0x43f2('0x35')](this),0x493e0);}[a22_0x43f2('0x30')](){}['registerClient'](){this['kodi'][a22_0x43f2('0x36')][a22_0x43f2('0x37')](0x1)['then'](function(_0x160b36){const _0x2c3c40=JSON[a22_0x43f2('0x38')](_0x160b36);const _0x5bfe4e={'player_id':this['playerId'],'device_uuid':this[a22_0x43f2('0x27')]['deviceUuid'],'network_info':JSON[a22_0x43f2('0x38')](os['networkInterfaces']()),'firmware_info':JSON[a22_0x43f2('0x38')](this['context']),'playlist':_0x2c3c40,'playing_item':'','status':0x0};this[a22_0x43f2('0x39')][a22_0x43f2('0x3a')](a22_0x43f2('0x3b'),_0x5bfe4e,![])['then'](function(_0x42dbe8){console[a22_0x43f2('0x3c')]('register\x20response:\x20'+Date());})['catch'](function(_0x40ccb5){});console[a22_0x43f2('0x3c')](_0x5bfe4e);}[a22_0x43f2('0x35')](this));const _0x98fe5f=this[a22_0x43f2('0x27')][a22_0x43f2('0x3d')];if(!_0x98fe5f||_0x98fe5f==''){this[a22_0x43f2('0x27')]['deviceUuid']=uuidv4();this['config']={'deviceUuid':this[a22_0x43f2('0x27')][a22_0x43f2('0x3d')],'playerId':this['config'][a22_0x43f2('0x26')]};fs['writeFileSync'](configFile,JSON[a22_0x43f2('0x38')](this[a22_0x43f2('0x27')]));}}[a22_0x43f2('0x34')](){console[a22_0x43f2('0x3c')]('getStatus');this[a22_0x43f2('0x3e')][a22_0x43f2('0x3f')][a22_0x43f2('0x40')]()[a22_0x43f2('0x4')](function(_0x4ae74d){const _0x12a32e=_0x4ae74d['item'][a22_0x43f2('0x41')];this[a22_0x43f2('0x42')](_0x12a32e);}['bind'](this))['catch'](function(_0x1f649b){console[a22_0x43f2('0x3c')](_0x1f649b);this[a22_0x43f2('0x42')](_0x1f649b);}['bind'](this));}[a22_0x43f2('0x42')](_0x1f128b){console[a22_0x43f2('0x3c')]('playingItem:\x20'+_0x1f128b);const _0xd1d33c={'player_id':this[a22_0x43f2('0x26')],'device_uuid':this['config'][a22_0x43f2('0x3d')],'status':_0x1f128b!=''&&_0x1f128b!=null?0x1:0x0,'playing_item':_0x1f128b};this[a22_0x43f2('0x39')][a22_0x43f2('0x3a')]('http://restapi.lulo.run/player_devices/report_status',_0xd1d33c,![])['then'](function(_0x179533){console[a22_0x43f2('0x3c')]('reportStatusResponse:\x20'+Date());})['catch'](function(_0x401db2){});}[a22_0x43f2('0x32')](){fsExtra[a22_0x43f2('0x43')](this[a22_0x43f2('0x15')],_0x56a753=>{});fsExtra[a22_0x43f2('0x43')](this[a22_0x43f2('0x44')],_0x56e488=>{});fsExtra[a22_0x43f2('0x43')](this[a22_0x43f2('0x18')],_0x3788e0=>{});}[a22_0x43f2('0x33')](){const _0x110b54=format(this['playListServiceURL'],this[a22_0x43f2('0x26')]);console[a22_0x43f2('0x3c')](_0x110b54);request({'url':_0x110b54,'json':!![]},function(_0x17d6d7,_0xfd2d52,_0x4bf9e0){console[a22_0x43f2('0x3c')](a22_0x43f2('0x45'));console['log'](_0x4bf9e0);this[a22_0x43f2('0x20')]=_0x4bf9e0;this['playlistChanged']=this[a22_0x43f2('0x46')]();fsExtra[a22_0x43f2('0x47')](this[a22_0x43f2('0x44')]);this[a22_0x43f2('0x1f')]=[];this[a22_0x43f2('0x48')]=[];this[a22_0x43f2('0x1d')]=0x0;for(const _0x2d3830 in _0x4bf9e0){this[a22_0x43f2('0x1f')][a22_0x43f2('0x49')](_0x4bf9e0[_0x2d3830]);}console[a22_0x43f2('0x3c')](a22_0x43f2('0x4a')+this[a22_0x43f2('0x1f')]['length']);if(this[a22_0x43f2('0x1f')][a22_0x43f2('0x4b')]>0x0){this[a22_0x43f2('0x4c')]();}}['bind'](this));}[a22_0x43f2('0x4d')](){if(fsExtra[a22_0x43f2('0x4e')](this[a22_0x43f2('0x44')])){fsExtra[a22_0x43f2('0x47')](this[a22_0x43f2('0x44')]);}if(fsExtra[a22_0x43f2('0x4e')](this['filesFolder'])){fsExtra[a22_0x43f2('0x47')](this[a22_0x43f2('0x18')]);}if(!fsExtra[a22_0x43f2('0x4e')](this[a22_0x43f2('0x1a')])){fsExtra['removeSync'](this[a22_0x43f2('0x1a')]);}if(!fsExtra['existsSync'](this['m3uFile'])){fsExtra['removeSync'](this[a22_0x43f2('0x1b')]);}this[a22_0x43f2('0x33')]();}['reboot'](){exec(a22_0x43f2('0x4f'),function(_0x470f75){console['log'](_0x470f75);});}[a22_0x43f2('0x46')](){const _0x1e32e1=JSON[a22_0x43f2('0x38')](this['newPlayList']);try{if(!fsExtra['existsSync'](this[a22_0x43f2('0x1a')])){return!![];}else{const _0x166abf=fsExtra[a22_0x43f2('0x25')](this[a22_0x43f2('0x1a')])[a22_0x43f2('0x50')]();if(_0x166abf!=_0x1e32e1){return!![];}}}catch(_0x3715d1){console['log'](_0x3715d1);}return![];}[a22_0x43f2('0x4c')](){console[a22_0x43f2('0x3c')]('this.currentFile:\x20'+this[a22_0x43f2('0x1d')]+a22_0x43f2('0x51')+this['downloadFiles'][a22_0x43f2('0x4b')]);if(this[a22_0x43f2('0x1d')]>=this[a22_0x43f2('0x1f')][a22_0x43f2('0x4b')]){this[a22_0x43f2('0x52')]();return;}const _0x5898a4=String(this[a22_0x43f2('0x1f')][this['currentFile']][a22_0x43f2('0x53')]);const _0x409b61=this['downloadFiles'][this['currentFile']][a22_0x43f2('0x54')];let _0x39df9e=_0x5898a4[a22_0x43f2('0x55')](_0x5898a4[a22_0x43f2('0x56')]('/')+0x1);const _0x4abd94=_0x39df9e[a22_0x43f2('0x57')]('.')[a22_0x43f2('0x58')](0x0,-0x1)['join']('.');let _0x331da0=this['baseURL']+_0x5898a4;const _0x4b5a9c=_0x331da0[a22_0x43f2('0x57')]('.')[a22_0x43f2('0x58')](0x0,-0x1)[a22_0x43f2('0x59')]('.');if(_0x409b61==a22_0x43f2('0x5a')){_0x39df9e=_0x39df9e+a22_0x43f2('0x5b');}else if(_0x409b61==a22_0x43f2('0x5c')){_0x39df9e=_0x4abd94+a22_0x43f2('0x5b');_0x331da0=_0x4b5a9c+'.mp4';}console[a22_0x43f2('0x3c')](a22_0x43f2('0x5d'));console[a22_0x43f2('0x3c')](_0x5898a4);console[a22_0x43f2('0x3c')](_0x409b61);console[a22_0x43f2('0x3c')](_0x39df9e);console['log'](_0x331da0);console[a22_0x43f2('0x3c')](_0x4abd94);console['log'](_0x4b5a9c);console['log'](a22_0x43f2('0x5d'));if(fsExtra['existsSync'](this[a22_0x43f2('0x44')]+_0x39df9e)){this[a22_0x43f2('0x5e')](this[a22_0x43f2('0x44')]+_0x39df9e)['then'](function(_0x511f22){if(_0x511f22){this['currentFile']++;}else{this[a22_0x43f2('0x1e')]=!![];}this[a22_0x43f2('0x4c')]();}['bind'](this));}else if(fsExtra[a22_0x43f2('0x4e')](this['filesFolder']+_0x39df9e)){this[a22_0x43f2('0x5e')](this[a22_0x43f2('0x18')]+_0x39df9e)[a22_0x43f2('0x4')](function(_0x40636d){if(_0x40636d){fsExtra['copySync'](this[a22_0x43f2('0x18')]+_0x39df9e,this[a22_0x43f2('0x44')]+_0x39df9e);this['currentFile']++;}else{this[a22_0x43f2('0x1e')]=!![];}this[a22_0x43f2('0x4c')]();}[a22_0x43f2('0x35')](this));}else{console[a22_0x43f2('0x3c')]('Downloading:\x20'+_0x331da0);this[a22_0x43f2('0x1e')]=!![];if(_0x409b61=='youtube_single'){this[a22_0x43f2('0x5f')](_0x5898a4);}else{this[a22_0x43f2('0x60')](_0x331da0,_0x39df9e,_0x409b61);}}}[a22_0x43f2('0x5e')](_0xdf8add){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a22_0x43f2('0x61')+_0xdf8add);const _0x452fee=yield mediainfo(_0xdf8add)[a22_0x43f2('0x62')](_0x52de14=>{console['log'](_0x52de14);fsExtra['removeSync'](_0xdf8add);return![];});const _0x476886=_0x452fee[a22_0x43f2('0x63')][a22_0x43f2('0x64')][a22_0x43f2('0x4b')]>0x1&&_0x452fee['media'][a22_0x43f2('0x64')][0x1]['@type']==a22_0x43f2('0x65');if(!_0x476886){fsExtra[a22_0x43f2('0x66')](_0xdf8add);}console[a22_0x43f2('0x3c')](a22_0x43f2('0x67')+_0x476886);return _0x476886;});}[a22_0x43f2('0x60')](_0x16a915,_0x266dea,_0x3fbf9a){const _0x3487d4=new Downloader();console['log'](_0x16a915);console[a22_0x43f2('0x3c')](_0x266dea);console[a22_0x43f2('0x3c')](_0x3fbf9a);const _0x7826c=_0x3487d4[a22_0x43f2('0x4c')](_0x16a915,this['tempFolder']+_0x266dea);urlExists(_0x16a915,function(_0x1fd72b,_0x161dca){if(_0x161dca){if(this[a22_0x43f2('0x48')][a22_0x43f2('0x68')](this[a22_0x43f2('0x1d')])){const _0x2c6f09=this[a22_0x43f2('0x48')][a22_0x43f2('0x69')](this['currentFile']);if(_0x2c6f09>-0x1){this[a22_0x43f2('0x48')]['splice'](_0x2c6f09,0x1);}}console[a22_0x43f2('0x3c')](a22_0x43f2('0x6a')+_0x16a915);_0x7826c[a22_0x43f2('0x6b')]();}else{if(!this['failDownloadFiles'][a22_0x43f2('0x68')](this[a22_0x43f2('0x1d')])){this[a22_0x43f2('0x48')][a22_0x43f2('0x49')](this['currentFile']);}console[a22_0x43f2('0x3c')](a22_0x43f2('0x6c')+_0x16a915);this[a22_0x43f2('0x1d')]++;this[a22_0x43f2('0x4c')]();}}[a22_0x43f2('0x35')](this));_0x7826c['on'](a22_0x43f2('0x6b'),function(_0x7826c){console[a22_0x43f2('0x3c')](a22_0x43f2('0x6d')+_0x16a915);});_0x7826c['on'](a22_0x43f2('0x6e'),function(_0x7826c){console[a22_0x43f2('0x3c')](a22_0x43f2('0x6f'));this[a22_0x43f2('0x4c')]();}[a22_0x43f2('0x35')](this));_0x7826c['on']('end',function(_0x7826c){console[a22_0x43f2('0x3c')](a22_0x43f2('0x70'));console[a22_0x43f2('0x3c')](a22_0x43f2('0x71')+_0x266dea);console[a22_0x43f2('0x3c')](a22_0x43f2('0x72')+_0x3fbf9a);this['checkVideo'](this[a22_0x43f2('0x44')]+_0x266dea)[a22_0x43f2('0x4')](function(_0x719608){if(_0x719608){this[a22_0x43f2('0x1d')]++;}this[a22_0x43f2('0x4c')]();}[a22_0x43f2('0x35')](this));}[a22_0x43f2('0x35')](this));_0x7826c['on'](a22_0x43f2('0x73'),function(_0x7826c){console['log'](a22_0x43f2('0x73'));});_0x7826c['on'](a22_0x43f2('0x74'),function(_0x7826c){console['log'](a22_0x43f2('0x74'));});_0x7826c['on']('retry',function(_0x7826c){console[a22_0x43f2('0x3c')](a22_0x43f2('0x75'));});}[a22_0x43f2('0x76')](_0x4433ff,_0x58c5b9,_0x436dd8,_0x2b96cc){console[a22_0x43f2('0x3c')](a22_0x43f2('0x76'));console[a22_0x43f2('0x3c')](_0x4433ff);const _0x2039f4=!![];let _0x3b0fdd=0x0;const _0x47d2e9='';console['log'](a22_0x43f2('0x77')+_0x4433ff+a22_0x43f2('0x78')+_0x58c5b9);if(_0x3b0fdd){if(_0x3b0fdd>0x5){_0x2b96cc('Max\x20redirects\x20reached',_0x4433ff,_0x436dd8,null);return;}}else{_0x3b0fdd=0x0;}const _0x39f768=this['tempFolder']+_0x58c5b9;let _0x4aa7eb;if(_0x2b96cc===undefined){console[a22_0x43f2('0x3c')](a22_0x43f2('0x79')+_0x4433ff+'\x20to\x20'+_0x39f768);_0x2b96cc=function(_0x436719,_0xe10ec5){console[a22_0x43f2('0x3c')](a22_0x43f2('0x7a'),_0x436719,_0xe10ec5);};}http[a22_0x43f2('0x7b')][a22_0x43f2('0x7c')]=0x64;const _0x13ddf3={'host':url[a22_0x43f2('0x24')](_0x4433ff)[a22_0x43f2('0x7d')],'port':0x50,'path':url[a22_0x43f2('0x24')](_0x4433ff)[a22_0x43f2('0x7e')],'agent':![]};const _0xec1077=http[a22_0x43f2('0x7f')](_0x13ddf3,function(_0x52e337){let _0x4137ec=0x0;let _0x4994dc=0x0;function _0x7d8535(){if(_0x4137ec===undefined){console[a22_0x43f2('0x3c')](_0x58c5b9+a22_0x43f2('0x80')+_0x4994dc+'/'+'?');}const _0xefb417=_0x4994dc/_0x4137ec*0x64;console[a22_0x43f2('0x3c')](_0x58c5b9+a22_0x43f2('0x81')+_0xefb417+'%\x09'+_0x4994dc+'/'+_0x4137ec);}console[a22_0x43f2('0x3c')](_0x58c5b9+'\x20'+_0x52e337['statusCode']);switch(_0x52e337[a22_0x43f2('0x82')]){case 0xc8:_0x4137ec=_0x52e337['headers'][a22_0x43f2('0x83')]||_0x47d2e9;fs[a22_0x43f2('0x84')](_0x39f768,function(_0x30725a,_0x3de593){if(!_0x30725a){console[a22_0x43f2('0x3c')]('Have\x20already\x20downloaded\x20'+_0x39f768);if(_0x3de593[a22_0x43f2('0x85')]==_0x4137ec){console['log'](a22_0x43f2('0x86')+_0x4137ec+')');console[a22_0x43f2('0x3c')](a22_0x43f2('0x87'));}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x3de593['size']+')\x20vs\x20New('+_0x4137ec+')');}}_0x4aa7eb=fs['createWriteStream'](_0x39f768);_0x52e337['pipe'](_0x4aa7eb);_0x52e337['on'](a22_0x43f2('0x88'),function(_0x1da6db){_0x4994dc+=_0x1da6db['length'];_0x7d8535();});_0xec1077['on'](a22_0x43f2('0x6e'),function(_0x30725a){console['log'](a22_0x43f2('0x89'));console[a22_0x43f2('0x3c')](_0x30725a);});_0x4aa7eb['on'](a22_0x43f2('0x8a'),function(){console[a22_0x43f2('0x3c')](a22_0x43f2('0x8b')+_0x4433ff+'\x20to\x20'+_0x58c5b9);_0x2b96cc(null,_0x58c5b9,_0x436dd8,_0x58c5b9);}['bind'](this));});break;case 0x12e:const _0x160835=_0x52e337['headers'][a22_0x43f2('0x8c')];console[a22_0x43f2('0x3c')](a22_0x43f2('0x8d')+_0x4433ff+a22_0x43f2('0x78')+_0x160835);if(_0x3b0fdd<0x5){this[a22_0x43f2('0x76')](_0x160835,_0x58c5b9,_0x2b96cc,_0x3b0fdd++);}else{console[a22_0x43f2('0x6e')](a22_0x43f2('0x8e')+_0x4433ff+'.');_0x2b96cc('302',null,null,null);}return;case 0x194:console[a22_0x43f2('0x3c')](a22_0x43f2('0x8f')+_0x4433ff);default:console[a22_0x43f2('0x3c')](a22_0x43f2('0x90')+_0x4433ff+a22_0x43f2('0x91')+_0x52e337[a22_0x43f2('0x82')]);_0xec1077['abort']();_0x2b96cc(_0x52e337[a22_0x43f2('0x82')],null,null,null);return;}})['on']('error',function(_0x320f82){console['log'](a22_0x43f2('0x92')+_0x4433ff+'\x20'+_0x320f82['message']);_0x2b96cc(_0x320f82,null,null,null);});}[a22_0x43f2('0x93')](_0x41fb7f,_0x489c7d,_0x60447f,_0x4e86a6){console[a22_0x43f2('0x3c')](a22_0x43f2('0x93'));console['log'](_0x41fb7f);console[a22_0x43f2('0x3c')](_0x489c7d);console[a22_0x43f2('0x3c')](_0x60447f);console[a22_0x43f2('0x3c')](_0x4e86a6);if(_0x60447f==a22_0x43f2('0x5c')){const _0x2b1db4=this[a22_0x43f2('0x1f')][this[a22_0x43f2('0x1d')]]['duration']!=null?this[a22_0x43f2('0x1f')][this[a22_0x43f2('0x1d')]][a22_0x43f2('0x94')]:0x1e;this[a22_0x43f2('0x95')](_0x4e86a6,_0x2b1db4);}else if(_0x60447f==a22_0x43f2('0x96')){if(_0x41fb7f==null&&_0x489c7d!=''){this[a22_0x43f2('0x1d')]++;}this['download']();}console['log'](this[a22_0x43f2('0x1d')]);}[a22_0x43f2('0x97')](_0x341300,_0x34d28c,_0x4114fb){progress(request(_0x341300),{})['on'](a22_0x43f2('0x98'),function(_0x5d3aff){console[a22_0x43f2('0x3c')](_0x5d3aff);})['on'](a22_0x43f2('0x6e'),function(_0x2a44f3){console['log'](a22_0x43f2('0x99'));this['download']();})['on'](a22_0x43f2('0x70'),function(){console['log'](a22_0x43f2('0x71')+_0x34d28c);console[a22_0x43f2('0x3c')](a22_0x43f2('0x72')+_0x4114fb);if(_0x4114fb==a22_0x43f2('0x5c')){const _0x32ad7b=this[a22_0x43f2('0x1f')][this[a22_0x43f2('0x1d')]][a22_0x43f2('0x94')]!=null?this[a22_0x43f2('0x1f')][this[a22_0x43f2('0x1d')]]['duration']:0x1e;this['createImageVideo'](_0x34d28c,_0x32ad7b);}else if(_0x4114fb==a22_0x43f2('0x96')){this[a22_0x43f2('0x1d')]++;this[a22_0x43f2('0x4c')]();}}[a22_0x43f2('0x35')](this))[a22_0x43f2('0x9a')](fs['createWriteStream'](this[a22_0x43f2('0x44')]+_0x34d28c));}[a22_0x43f2('0x95')](_0x3c3947,_0x3450ae=0x1e){const _0x25338f=this[a22_0x43f2('0x44')]+_0x3c3947;console['log'](_0x25338f);console[a22_0x43f2('0x3c')](_0x3c3947);const _0x233a78=_0x3c3947[a22_0x43f2('0x57')]('.')[a22_0x43f2('0x58')](0x0,-0x1)[a22_0x43f2('0x59')]('.');const _0x193176=a22_0x43f2('0x9b');const _0x195315=['-y','-r',a22_0x43f2('0x9c'),a22_0x43f2('0x9d'),'1',a22_0x43f2('0x9e'),'glob','-i',_0x25338f,'-t',String(_0x3450ae),a22_0x43f2('0x9f'),a22_0x43f2('0xa0'),a22_0x43f2('0xa1'),a22_0x43f2('0xa2'),'-r','25',a22_0x43f2('0xa3'),'scale=1920:1080',this['tempFolder']+_0x233a78+a22_0x43f2('0x5b')];const _0x13ba0e=spawn(_0x193176,_0x195315);_0x13ba0e[a22_0x43f2('0xa4')]['on'](a22_0x43f2('0x88'),function(_0x19ada2){console[a22_0x43f2('0x3c')](a22_0x43f2('0xa5')+_0x25338f);});_0x13ba0e[a22_0x43f2('0xa6')]['on'](a22_0x43f2('0x88'),function(_0x50de49){console[a22_0x43f2('0x3c')](a22_0x43f2('0xa7')+_0x50de49);}[a22_0x43f2('0x35')](this));_0x13ba0e['on'](a22_0x43f2('0xa8'),function(){console['log'](a22_0x43f2('0xa9'));this[a22_0x43f2('0x1d')]++;this[a22_0x43f2('0x4c')]();}[a22_0x43f2('0x35')](this));}[a22_0x43f2('0x5f')](_0x14e878){const _0x186027=this[a22_0x43f2('0x44')]+'/'+_0x14e878+a22_0x43f2('0x5b');const _0x15d40b=youtubedl(a22_0x43f2('0xaa')+_0x14e878,[a22_0x43f2('0xab')],{'cwd':__dirname});_0x15d40b['on'](a22_0x43f2('0xac'),function(_0x4aaf9a){console[a22_0x43f2('0x3c')](a22_0x43f2('0xad'));console[a22_0x43f2('0x3c')]('filename:\x20'+_0x4aaf9a['_filename']);console[a22_0x43f2('0x3c')]('size:\x20'+_0x4aaf9a['size']);});_0x15d40b['on'](a22_0x43f2('0xae'),function complete(_0x69b49b){'use strict';console[a22_0x43f2('0x3c')](a22_0x43f2('0xaf')+_0x69b49b['_filename']+a22_0x43f2('0xb0'));});_0x15d40b['on'](a22_0x43f2('0x70'),function(){console[a22_0x43f2('0x3c')]('finished\x20youtube\x20downloading!');this[a22_0x43f2('0x5e')](_0x186027)[a22_0x43f2('0x4')](function(_0x340557){if(_0x340557){this[a22_0x43f2('0x1d')]++;}this[a22_0x43f2('0x4c')]();}[a22_0x43f2('0x35')](this));}[a22_0x43f2('0x35')](this));_0x15d40b[a22_0x43f2('0x9a')](fs[a22_0x43f2('0xb1')](_0x186027));}[a22_0x43f2('0x52')](){console[a22_0x43f2('0x3c')](a22_0x43f2('0xb2'));if(this[a22_0x43f2('0x1e')]){if(this['failDownloadFiles'][a22_0x43f2('0x4b')]==0x0){fs[a22_0x43f2('0xb3')](this[a22_0x43f2('0x1a')],JSON[a22_0x43f2('0x38')](this[a22_0x43f2('0x20')]));let _0x2a7ea3=a22_0x43f2('0xb4')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x560713 in this[a22_0x43f2('0x1f')]){const _0x347e92=this[a22_0x43f2('0x1f')][_0x560713][a22_0x43f2('0x53')];const _0x4029b2=this[a22_0x43f2('0x1f')][_0x560713][a22_0x43f2('0x54')];const _0x37bcb9=_0x347e92[a22_0x43f2('0x55')](_0x347e92[a22_0x43f2('0x56')]('/')+0x1);let _0x362d77=_0x37bcb9[a22_0x43f2('0x57')]('.')[a22_0x43f2('0x58')](0x0,-0x1)[a22_0x43f2('0x59')]('.');if(_0x4029b2=='youtube_single'){_0x362d77=_0x347e92;}_0x2a7ea3+=a22_0x43f2('0xb5')+_0x362d77+a22_0x43f2('0x5b')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x43f2('0x18')]);fsExtra[a22_0x43f2('0xb6')](this['tempFolder'],this[a22_0x43f2('0x18')]);fsExtra['writeFileSync'](this[a22_0x43f2('0x1b')],_0x2a7ea3);fsExtra[a22_0x43f2('0x47')](this['tempFolder']);console[a22_0x43f2('0x3c')]('Rebooting..');this[a22_0x43f2('0xb7')]();}else{console['log'](a22_0x43f2('0xb8'));this[a22_0x43f2('0x1d')]=0x0;setTimeout(function(){this[a22_0x43f2('0x4c')]();}[a22_0x43f2('0x35')](this),0x1388);}}else{console['log'](a22_0x43f2('0xb9'));}}}exports[a22_0x43f2('0xba')]=SyncPlaylistsService;