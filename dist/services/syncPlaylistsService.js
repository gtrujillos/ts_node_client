var a23_0x3598=['playlist','getItems','post','register\x20response:\x20','catch','log','bind','deviceUuid','writeFileSync','getCurrentlyPlayingVideo','item','label','reportStatus','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','loadMediaList','loadMediaList:\x20','newPlayList','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','stringify','\x20of\x20','currentFile','path','media_type','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','includes','indexOf','splice','downloading:\x20','start','error:\x20','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','size','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','pipe','data','err:\x20','finish','location','Redirect\x20','error','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','progress','mediaType:\x20','video','createWriteStream','1/2','-loop','-pattern_type','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','Converting\x20','stderr','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','Download\x20started','filename:\x20','size:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','copySync','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','Playlist.Clear','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','kodiCommandClient','RestartApp()','reboot','Rebooting','Reboot()','updateSettings','rss','header_active','setRss','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','xmlContent:\x20','xml2js','err:\x20%j','result:\x20%j','none','set','feed','Builder','xml:\x20%j','jsonrpcClient','Settings.SetSettingValue','setRss:','enableClock','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','value','then','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','request','request-progress','child_process','exec','is-image','string-template','uuid/v4','config.json','context.json','mt-files-downloader','media/','tempFolder','mediaFolder','temp/','filesFolder','files/','playListFile','m3uFile','lulo_playlist.m3u','playlistChanged','downloadFiles','failDownloadFiles','kodiHost','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','PlayerService','parse','readFileSync','context','playerId','config','baseURL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','kodiUser','checkDependencies','registerClient','getStatus'];(function(_0x417d16,_0x4a5f0f){var _0x2d056f=function(_0x25076e){while(--_0x25076e){_0x417d16['push'](_0x417d16['shift']());}};_0x2d056f(++_0x4a5f0f);}(a23_0x3598,0xa8));var a23_0x5e6e=function(_0x1844c4,_0x3a60a8){_0x1844c4=_0x1844c4-0x0;var _0x359064=a23_0x3598[_0x1844c4];return _0x359064;};'use strict';var __awaiter=this&&this[a23_0x5e6e('0x0')]||function(_0x22a4f1,_0x2cd982,_0x1d6d49,_0x58019c){function _0x2a849f(_0x592e20){return _0x592e20 instanceof _0x1d6d49?_0x592e20:new _0x1d6d49(function(_0x34faea){_0x34faea(_0x592e20);});}return new(_0x1d6d49||(_0x1d6d49=Promise))(function(_0x537cbf,_0x549ec2){function _0x4e5e0e(_0x37aca5){try{_0x5c5705(_0x58019c[a23_0x5e6e('0x1')](_0x37aca5));}catch(_0xe5b1d9){_0x549ec2(_0xe5b1d9);}}function _0x1c3e66(_0x5aa032){try{_0x5c5705(_0x58019c[a23_0x5e6e('0x2')](_0x5aa032));}catch(_0x17b7a8){_0x549ec2(_0x17b7a8);}}function _0x5c5705(_0x2caf63){_0x2caf63['done']?_0x537cbf(_0x2caf63[a23_0x5e6e('0x3')]):_0x2a849f(_0x2caf63['value'])[a23_0x5e6e('0x4')](_0x4e5e0e,_0x1c3e66);}_0x5c5705((_0x58019c=_0x58019c['apply'](_0x22a4f1,_0x2cd982||[]))[a23_0x5e6e('0x1')]());});};Object[a23_0x5e6e('0x5')](exports,a23_0x5e6e('0x6'),{'value':!![]});const HttpClientService_1=require(a23_0x5e6e('0x7'));const playerService_1=require(a23_0x5e6e('0x8'));const mediainfo=require(a23_0x5e6e('0x9'));const fs=require('fs');const url=require(a23_0x5e6e('0xa'));const http=require('http');const fsExtra=require('fs-extra');const request=require(a23_0x5e6e('0xb'));const progress=require(a23_0x5e6e('0xc'));const spawn=require(a23_0x5e6e('0xd'))['spawn'];const exec=require(a23_0x5e6e('0xd'))[a23_0x5e6e('0xe')];const isImage=require(a23_0x5e6e('0xf'));const format=require(a23_0x5e6e('0x10'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a23_0x5e6e('0x11'));const configFile=a23_0x5e6e('0x12');const contextFile=a23_0x5e6e('0x13');const urlExists=require('url-exists');const kodi_rpc=require('node-kodi');const Downloader=require(a23_0x5e6e('0x14'));class SyncPlaylistsService{constructor(){this['mediaFolder']=a23_0x5e6e('0x15');this[a23_0x5e6e('0x16')]=this[a23_0x5e6e('0x17')]+a23_0x5e6e('0x18');this[a23_0x5e6e('0x19')]=this['mediaFolder']+a23_0x5e6e('0x1a');this[a23_0x5e6e('0x1b')]=this[a23_0x5e6e('0x17')]+'playlist.txt';this[a23_0x5e6e('0x1c')]=this['filesFolder']+a23_0x5e6e('0x1d');this['currentFile']=0x0;this[a23_0x5e6e('0x1e')]=![];this[a23_0x5e6e('0x1f')]=[];this[a23_0x5e6e('0x20')]=[];this['newPlayList']={};this[a23_0x5e6e('0x21')]='http://localhost';this['kodiUser']=a23_0x5e6e('0x22');this[a23_0x5e6e('0x23')]=a23_0x5e6e('0x24');this[a23_0x5e6e('0x25')]=![];this[a23_0x5e6e('0x26')]=new HttpClientService_1[(a23_0x5e6e('0x27'))]();this[a23_0x5e6e('0x28')]=new playerService_1[(a23_0x5e6e('0x29'))]();}['init'](){this['config']=JSON[a23_0x5e6e('0x2a')](fs[a23_0x5e6e('0x2b')](configFile));this[a23_0x5e6e('0x2c')]=JSON[a23_0x5e6e('0x2a')](fs[a23_0x5e6e('0x2b')](contextFile));this[a23_0x5e6e('0x2d')]=this[a23_0x5e6e('0x2e')][a23_0x5e6e('0x2d')];this[a23_0x5e6e('0x2f')]=process['env']['WEB_SERVICE_URL']+a23_0x5e6e('0x30');this[a23_0x5e6e('0x31')]=this['baseURL']+a23_0x5e6e('0x32');this['playerServiceURL']=this[a23_0x5e6e('0x2f')]+'api/player.php?player_id={0}';this[a23_0x5e6e('0x33')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a23_0x5e6e('0x34')],'password':this[a23_0x5e6e('0x23')]});this[a23_0x5e6e('0x35')]();this[a23_0x5e6e('0x36')]();this['checkFolders']();this['loadMediaList']();this['updateSettings']();setInterval(function(){this[a23_0x5e6e('0x37')]();}['bind'](this),0x2710);setInterval(function(){this['registerClient']();}['bind'](this),0x493e0);}[a23_0x5e6e('0x35')](){}[a23_0x5e6e('0x36')](){this[a23_0x5e6e('0x33')][a23_0x5e6e('0x38')][a23_0x5e6e('0x39')](0x1)[a23_0x5e6e('0x4')](function(_0x393605){const _0x3308e0=JSON['stringify'](_0x393605);const _0xabebb3={'player_id':this[a23_0x5e6e('0x2d')],'device_uuid':this[a23_0x5e6e('0x2e')]['deviceUuid'],'network_info':JSON['stringify'](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this[a23_0x5e6e('0x2c')]),'playlist':_0x3308e0,'playing_item':'','status':0x0};this[a23_0x5e6e('0x26')][a23_0x5e6e('0x3a')]('http://restapi.lulo.run/player_devices/register',_0xabebb3,![])['then'](function(_0x1273c9){console['log'](a23_0x5e6e('0x3b')+Date());})[a23_0x5e6e('0x3c')](function(_0x319214){});console[a23_0x5e6e('0x3d')](_0xabebb3);}[a23_0x5e6e('0x3e')](this));const _0x3ed00a=this[a23_0x5e6e('0x2e')]['deviceUuid'];if(!_0x3ed00a||_0x3ed00a==''){this[a23_0x5e6e('0x2e')][a23_0x5e6e('0x3f')]=uuidv4();this[a23_0x5e6e('0x2e')]={'deviceUuid':this[a23_0x5e6e('0x2e')]['deviceUuid'],'playerId':this['config'][a23_0x5e6e('0x2d')]};fs[a23_0x5e6e('0x40')](configFile,JSON['stringify'](this[a23_0x5e6e('0x2e')]));}}[a23_0x5e6e('0x37')](){console['log'](a23_0x5e6e('0x37'));this[a23_0x5e6e('0x33')]['player'][a23_0x5e6e('0x41')]()[a23_0x5e6e('0x4')](function(_0x1b1c1c){const _0x1b8ca6=_0x1b1c1c[a23_0x5e6e('0x42')][a23_0x5e6e('0x43')];this[a23_0x5e6e('0x44')](_0x1b8ca6);}[a23_0x5e6e('0x3e')](this))[a23_0x5e6e('0x3c')](function(_0x1ff955){console[a23_0x5e6e('0x3d')](_0x1ff955);this[a23_0x5e6e('0x44')](_0x1ff955);}['bind'](this));}[a23_0x5e6e('0x44')](_0x401cc8){console[a23_0x5e6e('0x3d')]('playingItem:\x20'+_0x401cc8);const _0x5d7d30={'player_id':this[a23_0x5e6e('0x2d')],'device_uuid':this[a23_0x5e6e('0x2e')][a23_0x5e6e('0x3f')],'status':_0x401cc8!=''&&_0x401cc8!=null?0x1:0x0,'playing_item':_0x401cc8};this[a23_0x5e6e('0x26')][a23_0x5e6e('0x3a')](a23_0x5e6e('0x45'),_0x5d7d30,![])[a23_0x5e6e('0x4')](function(_0x5be4a9){console['log'](a23_0x5e6e('0x46')+Date());})['catch'](function(_0x3ce14f){});}[a23_0x5e6e('0x47')](){fsExtra[a23_0x5e6e('0x48')](this['mediaFolder'],_0x2179e9=>{});fsExtra[a23_0x5e6e('0x48')](this[a23_0x5e6e('0x16')],_0x8dacc4=>{});fsExtra['ensureDir'](this['filesFolder'],_0x2f204b=>{});}[a23_0x5e6e('0x49')](){const _0x36e46c=format(this[a23_0x5e6e('0x31')],this[a23_0x5e6e('0x2d')]);console[a23_0x5e6e('0x3d')](_0x36e46c);request({'url':_0x36e46c,'json':!![]},function(_0x485a57,_0x4f402f,_0x362fdd){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x4a'));this[a23_0x5e6e('0x4b')]=_0x362fdd;this['playlistChanged']=this[a23_0x5e6e('0x4c')]();fsExtra[a23_0x5e6e('0x4d')](this[a23_0x5e6e('0x16')]);this[a23_0x5e6e('0x1f')]=[];this[a23_0x5e6e('0x20')]=[];this['currentFile']=0x0;for(const _0x25f8fc in _0x362fdd){this[a23_0x5e6e('0x1f')][a23_0x5e6e('0x4e')](_0x362fdd[_0x25f8fc]);}console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x4f')+this[a23_0x5e6e('0x1f')]['length']);if(this[a23_0x5e6e('0x1f')][a23_0x5e6e('0x50')]>0x0){this[a23_0x5e6e('0x51')]();}}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0x52')](){this[a23_0x5e6e('0x25')]=!![];if(fsExtra[a23_0x5e6e('0x53')](this['tempFolder'])){fsExtra[a23_0x5e6e('0x4d')](this['tempFolder']);}if(fsExtra[a23_0x5e6e('0x53')](this[a23_0x5e6e('0x19')])){fsExtra[a23_0x5e6e('0x4d')](this['filesFolder']);}if(!fsExtra['existsSync'](this[a23_0x5e6e('0x1b')])){fsExtra[a23_0x5e6e('0x54')](this['playListFile']);}if(!fsExtra[a23_0x5e6e('0x53')](this['m3uFile'])){fsExtra['removeSync'](this[a23_0x5e6e('0x1c')]);}this['loadMediaList']();}[a23_0x5e6e('0x4c')](){const _0x58eda7=JSON[a23_0x5e6e('0x55')](this[a23_0x5e6e('0x4b')]);try{if(!fsExtra[a23_0x5e6e('0x53')](this[a23_0x5e6e('0x1b')])){return!![];}else{const _0x127e1b=fsExtra[a23_0x5e6e('0x2b')](this[a23_0x5e6e('0x1b')])['toString']();if(_0x127e1b!=_0x58eda7){return!![];}}}catch(_0x48ff27){console[a23_0x5e6e('0x3d')](_0x48ff27);}return![];}[a23_0x5e6e('0x51')](){console['log']('this.currentFile:\x20'+this['currentFile']+a23_0x5e6e('0x56')+this['downloadFiles'][a23_0x5e6e('0x50')]);if(this[a23_0x5e6e('0x57')]>=this['downloadFiles']['length']){this['finishProcess']();return;}const _0x409019=String(this[a23_0x5e6e('0x1f')][this[a23_0x5e6e('0x57')]][a23_0x5e6e('0x58')]);const _0x52e957=this['downloadFiles'][this['currentFile']][a23_0x5e6e('0x59')];let _0x58e194=_0x409019['substring'](_0x409019[a23_0x5e6e('0x5a')]('/')+0x1);const _0x1b90f8=_0x58e194[a23_0x5e6e('0x5b')]('.')[a23_0x5e6e('0x5c')](0x0,-0x1)[a23_0x5e6e('0x5d')]('.');let _0x1b4adc=this[a23_0x5e6e('0x2f')]+_0x409019;const _0x44ad1c=_0x1b4adc[a23_0x5e6e('0x5b')]('.')['slice'](0x0,-0x1)[a23_0x5e6e('0x5d')]('.');if(_0x52e957==a23_0x5e6e('0x5e')){_0x58e194=_0x58e194+a23_0x5e6e('0x5f');}else if(_0x52e957==a23_0x5e6e('0x60')){_0x58e194=_0x1b90f8+'.mp4';_0x1b4adc=_0x44ad1c+a23_0x5e6e('0x5f');}console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x61'));console[a23_0x5e6e('0x3d')](_0x409019);console['log'](_0x52e957);console[a23_0x5e6e('0x3d')](_0x58e194);console['log'](_0x1b4adc);console['log'](_0x1b90f8);console[a23_0x5e6e('0x3d')](_0x44ad1c);console['log'](a23_0x5e6e('0x61'));if(fsExtra[a23_0x5e6e('0x53')](this[a23_0x5e6e('0x16')]+_0x58e194)){this[a23_0x5e6e('0x62')](this[a23_0x5e6e('0x16')]+_0x58e194)[a23_0x5e6e('0x4')](function(_0x2aa195){if(_0x2aa195){this['currentFile']++;}else{this['playlistChanged']=!![];}this['download']();}['bind'](this));}else if(fsExtra[a23_0x5e6e('0x53')](this[a23_0x5e6e('0x19')]+_0x58e194)){this[a23_0x5e6e('0x62')](this['filesFolder']+_0x58e194)['then'](function(_0x343dda){if(_0x343dda){fsExtra['copySync'](this[a23_0x5e6e('0x19')]+_0x58e194,this[a23_0x5e6e('0x16')]+_0x58e194);this['currentFile']++;}else{this['playlistChanged']=!![];}this[a23_0x5e6e('0x51')]();}[a23_0x5e6e('0x3e')](this));}else{console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x63')+_0x1b4adc);this[a23_0x5e6e('0x1e')]=!![];if(_0x52e957==a23_0x5e6e('0x5e')){this[a23_0x5e6e('0x64')](_0x409019);}else{this[a23_0x5e6e('0x65')](_0x1b4adc,_0x58e194,_0x52e957);}}}[a23_0x5e6e('0x62')](_0x570e78){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0x5e6e('0x66')+_0x570e78);const _0x4b5701=yield mediainfo(_0x570e78)[a23_0x5e6e('0x3c')](_0x49e9d2=>{console['log'](_0x49e9d2);fsExtra['removeSync'](_0x570e78);return![];});const _0x15ea4f=_0x4b5701[a23_0x5e6e('0x67')][a23_0x5e6e('0x68')]['length']>0x1&&_0x4b5701[a23_0x5e6e('0x67')][a23_0x5e6e('0x68')][0x1][a23_0x5e6e('0x69')]=='Video';if(!_0x15ea4f){fsExtra[a23_0x5e6e('0x54')](_0x570e78);}console['log']('mediainfo\x20check:'+_0x15ea4f);return _0x15ea4f;});}[a23_0x5e6e('0x65')](_0x357397,_0x1f0de9,_0x277e1d){const _0xa99aa=new Downloader();console[a23_0x5e6e('0x3d')](_0x357397);console['log'](_0x1f0de9);console[a23_0x5e6e('0x3d')](_0x277e1d);const _0x2a837e=_0xa99aa[a23_0x5e6e('0x51')](_0x357397,this['tempFolder']+_0x1f0de9);urlExists(_0x357397,function(_0x570cfb,_0x3b1d2b){if(_0x3b1d2b){if(this[a23_0x5e6e('0x20')][a23_0x5e6e('0x6a')](this['currentFile'])){const _0x4293d0=this[a23_0x5e6e('0x20')][a23_0x5e6e('0x6b')](this[a23_0x5e6e('0x57')]);if(_0x4293d0>-0x1){this[a23_0x5e6e('0x20')][a23_0x5e6e('0x6c')](_0x4293d0,0x1);}}console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x6d')+_0x357397);_0x2a837e['start']();}else{if(!this[a23_0x5e6e('0x20')][a23_0x5e6e('0x6a')](this[a23_0x5e6e('0x57')])){this[a23_0x5e6e('0x20')][a23_0x5e6e('0x4e')](this[a23_0x5e6e('0x57')]);}console['log']('Error:\x20'+_0x357397);this['currentFile']++;this[a23_0x5e6e('0x51')]();}}[a23_0x5e6e('0x3e')](this));_0x2a837e['on'](a23_0x5e6e('0x6e'),function(_0x2a837e){console[a23_0x5e6e('0x3d')]('start:\x20'+_0x357397);});_0x2a837e['on']('error',function(_0x2a837e){console['log'](a23_0x5e6e('0x6f'));this[a23_0x5e6e('0x51')]();}[a23_0x5e6e('0x3e')](this));_0x2a837e['on'](a23_0x5e6e('0x70'),function(_0x2a837e){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x70'));console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x71')+_0x1f0de9);console[a23_0x5e6e('0x3d')]('mediaType:\x20'+_0x277e1d);this[a23_0x5e6e('0x62')](this[a23_0x5e6e('0x16')]+_0x1f0de9)[a23_0x5e6e('0x4')](function(_0x1e6c10){if(_0x1e6c10){this[a23_0x5e6e('0x57')]++;}this['download']();}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0x3e')](this));_0x2a837e['on'](a23_0x5e6e('0x72'),function(_0x2a837e){console[a23_0x5e6e('0x3d')]('stopped');});_0x2a837e['on'](a23_0x5e6e('0x73'),function(_0x2a837e){console[a23_0x5e6e('0x3d')]('destroyed');});_0x2a837e['on'](a23_0x5e6e('0x74'),function(_0x2a837e){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x74'));});}[a23_0x5e6e('0x75')](_0x13baf6,_0x1b19e5,_0x96b218,_0x4044a7){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x75'));console[a23_0x5e6e('0x3d')](_0x13baf6);const _0x1b04d6=!![];let _0x82438c=0x0;const _0x50cd77='';console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x76')+_0x13baf6+'\x20to\x20'+_0x1b19e5);if(_0x82438c){if(_0x82438c>0x5){_0x4044a7(a23_0x5e6e('0x77'),_0x13baf6,_0x96b218,null);return;}}else{_0x82438c=0x0;}const _0x32f07b=this[a23_0x5e6e('0x16')]+_0x1b19e5;let _0x395838;if(_0x4044a7===undefined){console['log'](a23_0x5e6e('0x78')+_0x13baf6+a23_0x5e6e('0x79')+_0x32f07b);_0x4044a7=function(_0x26a0e7,_0x268d14){console['log'](a23_0x5e6e('0x7a'),_0x26a0e7,_0x268d14);};}http['globalAgent'][a23_0x5e6e('0x7b')]=0x64;const _0x5784c3={'host':url['parse'](_0x13baf6)[a23_0x5e6e('0x7c')],'port':0x50,'path':url['parse'](_0x13baf6)[a23_0x5e6e('0x7d')],'agent':![]};const _0x467cdd=http[a23_0x5e6e('0x7e')](_0x5784c3,function(_0x37c2e9){let _0x337842=0x0;let _0x1fff9f=0x0;function _0x294499(){if(_0x337842===undefined){console[a23_0x5e6e('0x3d')](_0x1b19e5+a23_0x5e6e('0x7f')+_0x1fff9f+'/'+'?');}const _0xec1ac3=_0x1fff9f/_0x337842*0x64;console['log'](_0x1b19e5+a23_0x5e6e('0x80')+_0xec1ac3+'%\x09'+_0x1fff9f+'/'+_0x337842);}console['log'](_0x1b19e5+'\x20'+_0x37c2e9[a23_0x5e6e('0x81')]);switch(_0x37c2e9[a23_0x5e6e('0x81')]){case 0xc8:_0x337842=_0x37c2e9[a23_0x5e6e('0x82')][a23_0x5e6e('0x83')]||_0x50cd77;fs[a23_0x5e6e('0x84')](_0x32f07b,function(_0x2e8e62,_0x12e6d9){if(!_0x2e8e62){console[a23_0x5e6e('0x3d')]('Have\x20already\x20downloaded\x20'+_0x32f07b);if(_0x12e6d9[a23_0x5e6e('0x85')]==_0x337842){console[a23_0x5e6e('0x3d')]('And\x20the\x20file\x20size\x20matches\x20('+_0x337842+')');console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x86'));}else{console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x87')+_0x12e6d9[a23_0x5e6e('0x85')]+')\x20vs\x20New('+_0x337842+')');}}_0x395838=fs['createWriteStream'](_0x32f07b);_0x37c2e9[a23_0x5e6e('0x88')](_0x395838);_0x37c2e9['on'](a23_0x5e6e('0x89'),function(_0x12a49b){_0x1fff9f+=_0x12a49b[a23_0x5e6e('0x50')];_0x294499();});_0x467cdd['on']('error',function(_0x2e8e62){console['log'](a23_0x5e6e('0x8a'));console[a23_0x5e6e('0x3d')](_0x2e8e62);});_0x395838['on'](a23_0x5e6e('0x8b'),function(){console['log']('Downloaded\x20'+_0x13baf6+a23_0x5e6e('0x79')+_0x1b19e5);_0x4044a7(null,_0x1b19e5,_0x96b218,_0x1b19e5);}[a23_0x5e6e('0x3e')](this));});break;case 0x12e:const _0x154211=_0x37c2e9[a23_0x5e6e('0x82')][a23_0x5e6e('0x8c')];console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x8d')+_0x13baf6+a23_0x5e6e('0x79')+_0x154211);if(_0x82438c<0x5){this['downloadHTTPFile'](_0x154211,_0x1b19e5,_0x4044a7,_0x82438c++);}else{console[a23_0x5e6e('0x8e')](a23_0x5e6e('0x8f')+_0x13baf6+'.');_0x4044a7(a23_0x5e6e('0x90'),null,null,null);}return;case 0x194:console['log'](a23_0x5e6e('0x91')+_0x13baf6);default:console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x92')+_0x13baf6+a23_0x5e6e('0x93')+_0x37c2e9[a23_0x5e6e('0x81')]);_0x467cdd[a23_0x5e6e('0x94')]();_0x4044a7(_0x37c2e9['statusCode'],null,null,null);return;}})['on'](a23_0x5e6e('0x8e'),function(_0x183c1a){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x95')+_0x13baf6+'\x20'+_0x183c1a[a23_0x5e6e('0x96')]);_0x4044a7(_0x183c1a,null,null,null);});}[a23_0x5e6e('0x97')](_0x3aaf1d,_0xe89781,_0x44acb6,_0x18fd8b){console['log'](a23_0x5e6e('0x97'));console[a23_0x5e6e('0x3d')](_0x3aaf1d);console[a23_0x5e6e('0x3d')](_0xe89781);console[a23_0x5e6e('0x3d')](_0x44acb6);console[a23_0x5e6e('0x3d')](_0x18fd8b);if(_0x44acb6==a23_0x5e6e('0x60')){const _0x36bd87=this[a23_0x5e6e('0x1f')][this['currentFile']][a23_0x5e6e('0x98')]!=null?this[a23_0x5e6e('0x1f')][this[a23_0x5e6e('0x57')]][a23_0x5e6e('0x98')]:0x1e;this[a23_0x5e6e('0x99')](_0x18fd8b,_0x36bd87);}else if(_0x44acb6=='video'){if(_0x3aaf1d==null&&_0xe89781!=''){this[a23_0x5e6e('0x57')]++;}this[a23_0x5e6e('0x51')]();}console[a23_0x5e6e('0x3d')](this['currentFile']);}['downloadRequestFile'](_0x4e1d72,_0xcdfa7b,_0x159734){progress(request(_0x4e1d72),{})['on'](a23_0x5e6e('0x9a'),function(_0x68dc80){console[a23_0x5e6e('0x3d')](_0x68dc80);})['on'](a23_0x5e6e('0x8e'),function(_0x2eca2a){console['log']('Error\x20downloading\x20file');this['download']();})['on'](a23_0x5e6e('0x70'),function(){console[a23_0x5e6e('0x3d')]('Downloaded:\x20'+_0xcdfa7b);console[a23_0x5e6e('0x3d')](a23_0x5e6e('0x9b')+_0x159734);if(_0x159734=='image'){const _0x51465a=this[a23_0x5e6e('0x1f')][this[a23_0x5e6e('0x57')]][a23_0x5e6e('0x98')]!=null?this['downloadFiles'][this[a23_0x5e6e('0x57')]][a23_0x5e6e('0x98')]:0x1e;this[a23_0x5e6e('0x99')](_0xcdfa7b,_0x51465a);}else if(_0x159734==a23_0x5e6e('0x9c')){this['currentFile']++;this['download']();}}[a23_0x5e6e('0x3e')](this))['pipe'](fs[a23_0x5e6e('0x9d')](this[a23_0x5e6e('0x16')]+_0xcdfa7b));}[a23_0x5e6e('0x99')](_0x11ed93,_0x15218a=0x1e){const _0x250304=this[a23_0x5e6e('0x16')]+_0x11ed93;console['log'](_0x250304);console[a23_0x5e6e('0x3d')](_0x11ed93);const _0x580a5e=_0x11ed93[a23_0x5e6e('0x5b')]('.')['slice'](0x0,-0x1)[a23_0x5e6e('0x5d')]('.');const _0x27400a='ffmpeg';const _0x40c927=['-y','-r',a23_0x5e6e('0x9e'),a23_0x5e6e('0x9f'),'1',a23_0x5e6e('0xa0'),'glob','-i',_0x250304,'-t',String(_0x15218a),'-c:v',a23_0x5e6e('0xa1'),a23_0x5e6e('0xa2'),a23_0x5e6e('0xa3'),'-r','25',a23_0x5e6e('0xa4'),a23_0x5e6e('0xa5'),this[a23_0x5e6e('0x16')]+_0x580a5e+'.mp4'];const _0x353e3f=spawn(_0x27400a,_0x40c927);_0x353e3f['stdout']['on']('data',function(_0x2f63c3){console['log'](a23_0x5e6e('0xa6')+_0x250304);});_0x353e3f[a23_0x5e6e('0xa7')]['on'](a23_0x5e6e('0x89'),function(_0x9de1c0){console[a23_0x5e6e('0x3d')]('stderr:\x20'+_0x9de1c0);}[a23_0x5e6e('0x3e')](this));_0x353e3f['on'](a23_0x5e6e('0xa8'),function(){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xa9'));this[a23_0x5e6e('0x57')]++;this[a23_0x5e6e('0x51')]();}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0x64')](_0x41202f){const _0x111ce2=this[a23_0x5e6e('0x16')]+'/'+_0x41202f+'.mp4';const _0x2205cc=youtubedl(a23_0x5e6e('0xaa')+_0x41202f,[a23_0x5e6e('0xab')],{'cwd':__dirname});_0x2205cc['on']('info',function(_0x12370d){console['log'](a23_0x5e6e('0xac'));console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xad')+_0x12370d['_filename']);console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xae')+_0x12370d[a23_0x5e6e('0x85')]);});_0x2205cc['on']('complete',function complete(_0x4bf5f2){'use strict';console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xad')+_0x4bf5f2[a23_0x5e6e('0xaf')]+a23_0x5e6e('0xb0'));});_0x2205cc['on']('end',function(){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xb1'));this[a23_0x5e6e('0x62')](_0x111ce2)[a23_0x5e6e('0x4')](function(_0x3c214d){if(_0x3c214d){this[a23_0x5e6e('0x57')]++;}this[a23_0x5e6e('0x51')]();}['bind'](this));}[a23_0x5e6e('0x3e')](this));_0x2205cc[a23_0x5e6e('0x88')](fs[a23_0x5e6e('0x9d')](_0x111ce2));}['finishProcess'](){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xb2'));if(this[a23_0x5e6e('0x1e')]){if(this[a23_0x5e6e('0x20')][a23_0x5e6e('0x50')]==0x0){fs[a23_0x5e6e('0x40')](this[a23_0x5e6e('0x1b')],JSON[a23_0x5e6e('0x55')](this[a23_0x5e6e('0x4b')]));let _0x363bf5=a23_0x5e6e('0xb3')+'\x0d\x0a'+a23_0x5e6e('0xb4')+'\x0d\x0a';for(const _0x145559 in this[a23_0x5e6e('0x1f')]){const _0x2e7b57=this[a23_0x5e6e('0x1f')][_0x145559][a23_0x5e6e('0x58')];const _0x20f673=this[a23_0x5e6e('0x1f')][_0x145559][a23_0x5e6e('0x59')];const _0x17fa2c=_0x2e7b57['substring'](_0x2e7b57[a23_0x5e6e('0x5a')]('/')+0x1);let _0x1cf36f=_0x17fa2c[a23_0x5e6e('0x5b')]('.')['slice'](0x0,-0x1)[a23_0x5e6e('0x5d')]('.');if(_0x20f673=='youtube_single'){_0x1cf36f=_0x2e7b57;}_0x363bf5+=a23_0x5e6e('0xb5')+_0x1cf36f+'.mp4'+'\x0d\x0a';}fsExtra[a23_0x5e6e('0x4d')](this[a23_0x5e6e('0x19')]);fsExtra[a23_0x5e6e('0xb6')](this[a23_0x5e6e('0x16')],this[a23_0x5e6e('0x19')]);fsExtra[a23_0x5e6e('0x40')](this[a23_0x5e6e('0x1c')],_0x363bf5);fsExtra[a23_0x5e6e('0x4d')](this['tempFolder']);console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xb7'));this[a23_0x5e6e('0xb8')]();}else{console['log'](a23_0x5e6e('0xb9'));this[a23_0x5e6e('0x57')]=0x0;setTimeout(function(){this['download']();}['bind'](this),0x1388);}}else{console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xba'));}}['refreshPlayer'](){this['jsonrpcClient'](a23_0x5e6e('0xbb'),{'playlistid':0x1},function(_0x56d3df){console[a23_0x5e6e('0x3d')]('Playlist.Cleared');console['log'](_0x56d3df);this['jsonrpcClient'](a23_0x5e6e('0xbc'),{'item':{'file':a23_0x5e6e('0xbd')},'playlistid':0x1},function(_0x56d3df){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xbe'));console[a23_0x5e6e('0x3d')](_0x56d3df);this['jsonrpcClient']('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x56d3df){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xbf'));console[a23_0x5e6e('0x3d')](_0x56d3df);if(this[a23_0x5e6e('0x25')]){this[a23_0x5e6e('0x25')]=![];this[a23_0x5e6e('0xc0')](a23_0x5e6e('0xc1'));}}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0xc2')](){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xc3'));this[a23_0x5e6e('0xc0')](a23_0x5e6e('0xc4'));}[a23_0x5e6e('0xc5')](){const _0x4dcc06=format(this['playerServiceURL'],this[a23_0x5e6e('0x2d')]);console['log'](_0x4dcc06);request({'url':_0x4dcc06,'json':!![]},function(_0x21c623,_0x4a4dc1,_0x3cfafb){if(_0x3cfafb[a23_0x5e6e('0x50')]>0x0){const _0x5103d3=_0x3cfafb[0x0];const _0x25c493=_0x5103d3[a23_0x5e6e('0xc6')];const _0x3d96c1=_0x5103d3[a23_0x5e6e('0xc7')]==0x1;this[a23_0x5e6e('0xc8')](_0x25c493);this['enableClock'](_0x3d96c1);this[a23_0x5e6e('0x36')]();}console[a23_0x5e6e('0x3d')](_0x3cfafb);}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0xc9')](){this[a23_0x5e6e('0xc0')](a23_0x5e6e('0xca'));}[a23_0x5e6e('0xcb')](){this[a23_0x5e6e('0xc0')](a23_0x5e6e('0xcc'));}['setRss'](_0x2669ff){const _0x4aa7c7=_0x2669ff!=null&&_0x2669ff!='';const _0x1aad84='/home/osmc/.kodi/userdata/RssFeeds.xml';const _0x345cd0=fsExtra[a23_0x5e6e('0x2b')](_0x1aad84);console['log'](a23_0x5e6e('0xcd')+_0x345cd0);const _0x911208=require(a23_0x5e6e('0xce'));const _0x4653c3=_0x911208['parseString'];_0x4653c3(_0x345cd0,function(_0x3510fe,_0x3cdd93){console['log'](a23_0x5e6e('0xcf'),_0x3510fe);console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xd0'),_0x3cdd93);if(!_0x2669ff||_0x2669ff==null||_0x2669ff==''){_0x2669ff=a23_0x5e6e('0xd1');}_0x3cdd93['rssfeeds'][a23_0x5e6e('0xd2')][0x0][a23_0x5e6e('0xd3')][0x0]['_']=_0x2669ff;const _0x3081da=new _0x911208[(a23_0x5e6e('0xd4'))]();const _0x4c34b6=_0x3081da['buildObject'](_0x3cdd93);console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xd5'),_0x4c34b6);fsExtra[a23_0x5e6e('0x40')](_0x1aad84,_0x4c34b6);});this['kodiCommandClient']('RefreshRSS()');this[a23_0x5e6e('0xd6')](a23_0x5e6e('0xd7'),{'setting':'lookandfeel.enablerssfeeds','value':_0x4aa7c7},function(_0x22c68a){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xd8'));console['log'](_0x22c68a);}['bind'](this));}[a23_0x5e6e('0xd9')](_0x3ade24){this[a23_0x5e6e('0xd6')](a23_0x5e6e('0xd7'),{'setting':a23_0x5e6e('0xda'),'value':_0x3ade24},function(_0xc959c3){console[a23_0x5e6e('0x3d')](a23_0x5e6e('0xdb'));console[a23_0x5e6e('0x3d')](_0xc959c3);}[a23_0x5e6e('0x3e')](this));}[a23_0x5e6e('0xc0')](_0x3ca245){exec(a23_0x5e6e('0xdc')+_0x3ca245+'\x22',function(_0x48f112){console[a23_0x5e6e('0x3d')](_0x48f112);});}['jsonrpcClient'](_0x353b74,_0xc450d9,_0x551fd2){const _0x408ec8={'jsonrpc':a23_0x5e6e('0xdd'),'method':_0x353b74,'params':_0xc450d9,'id':0x1};this['httpClientService']['post'](this['kodiHost']+a23_0x5e6e('0xde'),_0x408ec8,![],{'user':this[a23_0x5e6e('0x34')],'pass':this[a23_0x5e6e('0x23')]})[a23_0x5e6e('0x4')](function(_0x2058d3){_0x551fd2(_0x2058d3);})[a23_0x5e6e('0x3c')](function(_0x4fca1a){});}}exports[a23_0x5e6e('0xdf')]=SyncPlaylistsService;