var a25_0x5388=['none','feed','buildObject','xml:\x20%j','RefreshRSS()','jsonrpcClient','lookandfeel.enablerssfeeds','enableClock','Settings.SetSettingValue','videoplayer.usedisplayasclock','2.0','jsonrpcClient\x20options','SyncPlaylistsService','__awaiter','next','throw','done','value','then','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','config.json','url-exists','node-kodi','mt-files-downloader','apiURL','API_SERVICE_URL','mediaFolder','media/','tempFolder','temp/','filesFolder','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','httpClientService','playerService','init','config','parse','context','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','updateSettings','getStatus','bind','playlist','getItems','deviceUuid','stringify','networkInterfaces','version','post','player_devices/register','log','register\x20response:\x20','catch','writeFileSync','getCurrentlyPlayingVideo','item','label','reportStatus','this.errorCounter','errorCounter','reboot','player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','playListServiceURL','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','downloadFiles','push','Total\x20to\x20download:\x20','length','download','reloadMediaList','forceReload','existsSync','removeSync','playListFile','loadMediaList','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloader','checkSchedule','m3uFileUpdate','refreshPlayer','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','splice','downloading:\x20','start','includes','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','stopped','destroyed','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','data','err:\x20','finish','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','\x20STATUS:\x20','statusCode','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','mediaType:\x20','createWriteStream','ffmpeg','1/2','-loop','-c:v','-pix_fmt','yuv420p','-vf','stdout','Converting\x20','stderr','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','--format=18','--no-check-certificate','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','this.playListFile:\x20','emptyDir','Refreshing..','Playlist\x20incomplete,\x20retry.','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','DateUtils','Parse','start_date','end_date','/home/osmc/luloclient/media/files/','trim','kodiCommandClient','PlayMedia(//home/osmc/luloclient/media/files/lulo_playlist.m3u)','Rebooting','sudo\x20/sbin/reboot\x20-f','setRss','turnOffTV','CECActivateSource()','xmlContent:\x20','err:\x20%j','result:\x20%j'];(function(_0x359349,_0x823472){var _0x2fbac6=function(_0xa0f04e){while(--_0xa0f04e){_0x359349['push'](_0x359349['shift']());}};_0x2fbac6(++_0x823472);}(a25_0x5388,0x101));var a25_0x3f6b=function(_0x1656f3,_0x4fe7cd){_0x1656f3=_0x1656f3-0x0;var _0x45a577=a25_0x5388[_0x1656f3];return _0x45a577;};'use strict';var __awaiter=this&&this[a25_0x3f6b('0x0')]||function(_0x223659,_0x5e3da5,_0x55d40d,_0xc4e8e2){function _0x455fc6(_0x428406){return _0x428406 instanceof _0x55d40d?_0x428406:new _0x55d40d(function(_0x52aaa0){_0x52aaa0(_0x428406);});}return new(_0x55d40d||(_0x55d40d=Promise))(function(_0x3fbddf,_0x170fb6){function _0x4b7649(_0x512165){try{_0x5c1193(_0xc4e8e2[a25_0x3f6b('0x1')](_0x512165));}catch(_0x3d7320){_0x170fb6(_0x3d7320);}}function _0x322751(_0x49a08b){try{_0x5c1193(_0xc4e8e2[a25_0x3f6b('0x2')](_0x49a08b));}catch(_0x446cc0){_0x170fb6(_0x446cc0);}}function _0x5c1193(_0x494d41){_0x494d41[a25_0x3f6b('0x3')]?_0x3fbddf(_0x494d41[a25_0x3f6b('0x4')]):_0x455fc6(_0x494d41[a25_0x3f6b('0x4')])[a25_0x3f6b('0x5')](_0x4b7649,_0x322751);}_0x5c1193((_0xc4e8e2=_0xc4e8e2['apply'](_0x223659,_0x5e3da5||[]))[a25_0x3f6b('0x1')]());});};Object[a25_0x3f6b('0x6')](exports,a25_0x3f6b('0x7'),{'value':!![]});const HttpClientService_1=require(a25_0x3f6b('0x8'));const playerService_1=require(a25_0x3f6b('0x9'));const dateUtils_1=require('../infrastructure/utils/dateUtils');const mediainfo=require(a25_0x3f6b('0xa'));const fs=require('fs');const url=require(a25_0x3f6b('0xb'));const http=require(a25_0x3f6b('0xc'));const fsExtra=require(a25_0x3f6b('0xd'));const request=require(a25_0x3f6b('0xe'));const progress=require(a25_0x3f6b('0xf'));const spawn=require(a25_0x3f6b('0x10'))[a25_0x3f6b('0x11')];const exec=require('child_process')['exec'];const isImage=require(a25_0x3f6b('0x12'));const format=require(a25_0x3f6b('0x13'));const os=require('os');const youtubedl=require(a25_0x3f6b('0x14'));const uuidv4=require(a25_0x3f6b('0x15'));const configFile=a25_0x3f6b('0x16');const contextFile='package.json';const urlExists=require(a25_0x3f6b('0x17'));const kodi_rpc=require(a25_0x3f6b('0x18'));const Downloader=require(a25_0x3f6b('0x19'));class SyncPlaylistsService{constructor(){this[a25_0x3f6b('0x1a')]=process['env'][a25_0x3f6b('0x1b')];this[a25_0x3f6b('0x1c')]=a25_0x3f6b('0x1d');this[a25_0x3f6b('0x1e')]=this['mediaFolder']+a25_0x3f6b('0x1f');this[a25_0x3f6b('0x20')]=this[a25_0x3f6b('0x1c')]+'files/';this['playListFile']=this['mediaFolder']+a25_0x3f6b('0x21');this[a25_0x3f6b('0x22')]=this[a25_0x3f6b('0x20')]+a25_0x3f6b('0x23');this[a25_0x3f6b('0x24')]=0x0;this['errorCounter']=0x0;this[a25_0x3f6b('0x25')]=![];this['downloadFiles']=[];this[a25_0x3f6b('0x26')]=[];this[a25_0x3f6b('0x27')]={};this[a25_0x3f6b('0x28')]=a25_0x3f6b('0x29');this[a25_0x3f6b('0x2a')]=a25_0x3f6b('0x2b');this[a25_0x3f6b('0x2c')]='.lulo123.';this['forceReload']=![];this[a25_0x3f6b('0x2d')]=new HttpClientService_1['HttpClientService']();this[a25_0x3f6b('0x2e')]=new playerService_1['PlayerService']();}[a25_0x3f6b('0x2f')](){this[a25_0x3f6b('0x30')]=JSON[a25_0x3f6b('0x31')](fs['readFileSync'](configFile));this[a25_0x3f6b('0x32')]=JSON[a25_0x3f6b('0x31')](fs[a25_0x3f6b('0x33')](contextFile));this[a25_0x3f6b('0x34')]=this[a25_0x3f6b('0x30')][a25_0x3f6b('0x34')];this[a25_0x3f6b('0x35')]=process[a25_0x3f6b('0x36')][a25_0x3f6b('0x37')]+a25_0x3f6b('0x38');this['playListServiceURL']=this[a25_0x3f6b('0x35')]+a25_0x3f6b('0x39');this[a25_0x3f6b('0x3a')]=this[a25_0x3f6b('0x35')]+a25_0x3f6b('0x3b');this[a25_0x3f6b('0x3c')]=new kodi_rpc({'url':this[a25_0x3f6b('0x28')],'user':this[a25_0x3f6b('0x2a')],'password':this['kodiPassword']});this[a25_0x3f6b('0x3d')]();this[a25_0x3f6b('0x3e')]();this['checkFolders']();this['loadMediaList']();this[a25_0x3f6b('0x3f')]();setInterval(function(){this[a25_0x3f6b('0x40')]();}['bind'](this),0x2710);setInterval(function(){this['registerClient']();}[a25_0x3f6b('0x41')](this),0x493e0);setInterval(function(){this['checkSchedule']();}['bind'](this),0x2710);}[a25_0x3f6b('0x3d')](){}[a25_0x3f6b('0x3e')](){this[a25_0x3f6b('0x3c')][a25_0x3f6b('0x42')][a25_0x3f6b('0x43')](0x1)['then'](function(_0x4177ac){const _0x125785=JSON['stringify'](_0x4177ac);const _0x3f1109={'player_id':this[a25_0x3f6b('0x34')],'device_uuid':this[a25_0x3f6b('0x30')][a25_0x3f6b('0x44')],'network_info':JSON[a25_0x3f6b('0x45')](os[a25_0x3f6b('0x46')]()),'firmware_info':JSON[a25_0x3f6b('0x45')](this[a25_0x3f6b('0x32')][a25_0x3f6b('0x47')]),'playlist':_0x125785,'playing_item':'','status':0x0};this[a25_0x3f6b('0x2d')][a25_0x3f6b('0x48')](this[a25_0x3f6b('0x1a')]+a25_0x3f6b('0x49'),_0x3f1109,![])[a25_0x3f6b('0x5')](function(_0x236639){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x4b')+Date());})[a25_0x3f6b('0x4c')](function(_0x552071){});console[a25_0x3f6b('0x4a')](_0x3f1109);}['bind'](this));const _0x1b5f7f=this[a25_0x3f6b('0x30')]['deviceUuid'];if(!_0x1b5f7f||_0x1b5f7f==''){this['config']['deviceUuid']=uuidv4();this['config']={'deviceUuid':this[a25_0x3f6b('0x30')][a25_0x3f6b('0x44')],'playerId':this[a25_0x3f6b('0x30')][a25_0x3f6b('0x34')]};fs[a25_0x3f6b('0x4d')](configFile,JSON['stringify'](this[a25_0x3f6b('0x30')]));}}[a25_0x3f6b('0x40')](){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x40'));this[a25_0x3f6b('0x3c')]['player'][a25_0x3f6b('0x4e')]()[a25_0x3f6b('0x5')](function(_0x54e1c9){const _0x45ec6d=_0x54e1c9?_0x54e1c9[a25_0x3f6b('0x4f')][a25_0x3f6b('0x50')]:'';this[a25_0x3f6b('0x51')](_0x45ec6d);}[a25_0x3f6b('0x41')](this))[a25_0x3f6b('0x4c')](function(_0x2ea2b3){console['log']('getStatus',_0x2ea2b3);console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x52'),this[a25_0x3f6b('0x53')]);this[a25_0x3f6b('0x51')](JSON['stringify'](_0x2ea2b3));if(this[a25_0x3f6b('0x53')]>0x1e){this[a25_0x3f6b('0x54')]();}this['errorCounter']++;}[a25_0x3f6b('0x41')](this));}[a25_0x3f6b('0x51')](_0x44754f){const _0x49c01c={'player_id':this[a25_0x3f6b('0x34')],'device_uuid':this['config'][a25_0x3f6b('0x44')],'status':_0x44754f!=''&&_0x44754f!=null?0x1:0x0,'playing_item':_0x44754f};console[a25_0x3f6b('0x4a')]('report_status:\x20',_0x49c01c);this['httpClientService'][a25_0x3f6b('0x48')](this['apiURL']+a25_0x3f6b('0x55'),_0x49c01c,![])[a25_0x3f6b('0x5')](function(_0x4a2918){console['log'](a25_0x3f6b('0x56')+JSON[a25_0x3f6b('0x45')](_0x4a2918));})[a25_0x3f6b('0x4c')](function(_0x16c1e7){});}[a25_0x3f6b('0x57')](){fsExtra[a25_0x3f6b('0x58')](this[a25_0x3f6b('0x1c')],_0x133bbd=>{});fsExtra[a25_0x3f6b('0x58')](this['tempFolder'],_0x24d19f=>{});fsExtra[a25_0x3f6b('0x58')](this[a25_0x3f6b('0x20')],_0x122c54=>{});}['loadMediaList'](){const _0x463170=format(this[a25_0x3f6b('0x59')],this[a25_0x3f6b('0x34')]);console['log'](_0x463170);request({'url':_0x463170,'json':!![]},function(_0x3ef48f,_0x3bda72,_0x2cde1e){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x5a'));this[a25_0x3f6b('0x27')]=_0x2cde1e;this[a25_0x3f6b('0x25')]=this[a25_0x3f6b('0x5b')]();fsExtra[a25_0x3f6b('0x5c')](this[a25_0x3f6b('0x1e')]);this[a25_0x3f6b('0x5d')]=[];this[a25_0x3f6b('0x26')]=[];this[a25_0x3f6b('0x24')]=0x0;for(const _0x2664c9 in _0x2cde1e){this[a25_0x3f6b('0x5d')][a25_0x3f6b('0x5e')](_0x2cde1e[_0x2664c9]);}console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x5f')+this[a25_0x3f6b('0x5d')][a25_0x3f6b('0x60')]);if(this[a25_0x3f6b('0x5d')][a25_0x3f6b('0x60')]>0x0){this[a25_0x3f6b('0x61')]();}}[a25_0x3f6b('0x41')](this));}[a25_0x3f6b('0x62')](){this[a25_0x3f6b('0x63')]=!![];if(fsExtra[a25_0x3f6b('0x64')](this[a25_0x3f6b('0x1e')])){fsExtra[a25_0x3f6b('0x5c')](this[a25_0x3f6b('0x1e')]);}if(fsExtra[a25_0x3f6b('0x64')](this[a25_0x3f6b('0x20')])){fsExtra[a25_0x3f6b('0x5c')](this[a25_0x3f6b('0x20')]);}if(!fsExtra['existsSync'](this['playListFile'])){fsExtra[a25_0x3f6b('0x65')](this[a25_0x3f6b('0x66')]);}if(!fsExtra[a25_0x3f6b('0x64')](this['m3uFile'])){fsExtra[a25_0x3f6b('0x65')](this[a25_0x3f6b('0x22')]);}this[a25_0x3f6b('0x67')]();}[a25_0x3f6b('0x5b')](){const _0x3bad6b=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a25_0x3f6b('0x64')](this['playListFile'])){return!![];}else{const _0x25c8e6=fsExtra['readFileSync'](this[a25_0x3f6b('0x66')])[a25_0x3f6b('0x68')]();if(_0x25c8e6!=_0x3bad6b){return!![];}}}catch(_0x20d91c){console[a25_0x3f6b('0x4a')](_0x20d91c);}return![];}['download'](){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x69')+this[a25_0x3f6b('0x24')]+a25_0x3f6b('0x6a')+this[a25_0x3f6b('0x5d')][a25_0x3f6b('0x60')]);if(this[a25_0x3f6b('0x24')]>=this[a25_0x3f6b('0x5d')][a25_0x3f6b('0x60')]){this[a25_0x3f6b('0x6b')]();return;}const _0x7176b0=String(this[a25_0x3f6b('0x5d')][this[a25_0x3f6b('0x24')]][a25_0x3f6b('0x6c')]);const _0x150ce5=this[a25_0x3f6b('0x5d')][this['currentFile']][a25_0x3f6b('0x6d')];let _0x26cd92=_0x7176b0[a25_0x3f6b('0x6e')](_0x7176b0[a25_0x3f6b('0x6f')]('/')+0x1);const _0x23d5cf=_0x26cd92[a25_0x3f6b('0x70')]('.')[a25_0x3f6b('0x71')](0x0,-0x1)[a25_0x3f6b('0x72')]('.');let _0x29f550=this[a25_0x3f6b('0x35')]+_0x7176b0;const _0x56d560=_0x29f550['split']('.')['slice'](0x0,-0x1)[a25_0x3f6b('0x72')]('.');if(_0x150ce5==a25_0x3f6b('0x73')){_0x26cd92=_0x26cd92+a25_0x3f6b('0x74');}else if(_0x150ce5==a25_0x3f6b('0x75')){_0x26cd92=_0x23d5cf+a25_0x3f6b('0x74');_0x29f550=_0x56d560+a25_0x3f6b('0x74');}console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x76'));console['log'](_0x7176b0);console[a25_0x3f6b('0x4a')](_0x150ce5);console[a25_0x3f6b('0x4a')](_0x26cd92);console[a25_0x3f6b('0x4a')](_0x29f550);console[a25_0x3f6b('0x4a')](_0x23d5cf);console[a25_0x3f6b('0x4a')](_0x56d560);console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x76'));if(fsExtra[a25_0x3f6b('0x64')](this[a25_0x3f6b('0x1e')]+_0x26cd92)){this[a25_0x3f6b('0x77')](this[a25_0x3f6b('0x1e')]+_0x26cd92)['then'](function(_0x9b0ed){if(_0x9b0ed){this['currentFile']++;}else{this[a25_0x3f6b('0x25')]=!![];}this[a25_0x3f6b('0x61')]();}[a25_0x3f6b('0x41')](this));}else if(fsExtra[a25_0x3f6b('0x64')](this[a25_0x3f6b('0x20')]+_0x26cd92)){this[a25_0x3f6b('0x77')](this[a25_0x3f6b('0x20')]+_0x26cd92)['then'](function(_0x32ae58){if(_0x32ae58){fsExtra[a25_0x3f6b('0x78')](this['filesFolder']+_0x26cd92,this[a25_0x3f6b('0x1e')]+_0x26cd92);this[a25_0x3f6b('0x24')]++;}else{this[a25_0x3f6b('0x25')]=!![];}this[a25_0x3f6b('0x61')]();}[a25_0x3f6b('0x41')](this));}else{console['log'](a25_0x3f6b('0x79')+_0x29f550);this[a25_0x3f6b('0x25')]=!![];if(_0x150ce5=='youtube_single'){this['downloadYouTube'](_0x7176b0);}else{this[a25_0x3f6b('0x7a')](_0x29f550,_0x26cd92,_0x150ce5);}}}[a25_0x3f6b('0x7b')](){const _0x19c24f=this[a25_0x3f6b('0x7c')]();console[a25_0x3f6b('0x4a')]('m3uFileUpdate',_0x19c24f);if(_0x19c24f){setTimeout(function(){this[a25_0x3f6b('0x7d')]();}[a25_0x3f6b('0x41')](this),0x3e8);}}[a25_0x3f6b('0x77')](_0x256e5a){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x7e')+_0x256e5a);const _0x2cac3e=yield mediainfo(_0x256e5a)[a25_0x3f6b('0x4c')](_0x131cbd=>{console[a25_0x3f6b('0x4a')](_0x131cbd);fsExtra[a25_0x3f6b('0x65')](_0x256e5a);return![];});const _0x132c26=_0x2cac3e[a25_0x3f6b('0x7f')][a25_0x3f6b('0x80')]['length']>0x1&&_0x2cac3e[a25_0x3f6b('0x7f')][a25_0x3f6b('0x80')][0x1][a25_0x3f6b('0x81')]==a25_0x3f6b('0x82');if(!_0x132c26){fsExtra['removeSync'](_0x256e5a);}console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x83')+_0x132c26);return _0x132c26;});}[a25_0x3f6b('0x7a')](_0x4cd524,_0x2cf3e4,_0x3a87d8){const _0x55d9aa=new Downloader();console[a25_0x3f6b('0x4a')](_0x4cd524);console[a25_0x3f6b('0x4a')](_0x2cf3e4);console[a25_0x3f6b('0x4a')](_0x3a87d8);const _0x523a0d=_0x55d9aa[a25_0x3f6b('0x61')](_0x4cd524,this['tempFolder']+_0x2cf3e4);urlExists(_0x4cd524,function(_0x127165,_0x264ffa){if(_0x264ffa){if(this[a25_0x3f6b('0x26')]['includes'](this[a25_0x3f6b('0x24')])){const _0x253988=this[a25_0x3f6b('0x26')]['indexOf'](this['currentFile']);if(_0x253988>-0x1){this[a25_0x3f6b('0x26')][a25_0x3f6b('0x84')](_0x253988,0x1);}}console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x85')+_0x4cd524);_0x523a0d[a25_0x3f6b('0x86')]();}else{if(!this[a25_0x3f6b('0x26')][a25_0x3f6b('0x87')](this['currentFile'])){this['failDownloadFiles']['push'](this['currentFile']);}console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x88')+_0x4cd524);this['currentFile']++;this[a25_0x3f6b('0x61')]();}}[a25_0x3f6b('0x41')](this));_0x523a0d['on'](a25_0x3f6b('0x86'),function(_0x523a0d){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x89')+_0x4cd524);});_0x523a0d['on'](a25_0x3f6b('0x8a'),function(_0x523a0d){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x8b'));this[a25_0x3f6b('0x61')]();}[a25_0x3f6b('0x41')](this));_0x523a0d['on'](a25_0x3f6b('0x8c'),function(_0x523a0d){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x8c'));console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x8d')+_0x2cf3e4);console[a25_0x3f6b('0x4a')]('mediaType:\x20'+_0x3a87d8);this[a25_0x3f6b('0x77')](this[a25_0x3f6b('0x1e')]+_0x2cf3e4)[a25_0x3f6b('0x5')](function(_0x150504){if(_0x150504){this['currentFile']++;}this[a25_0x3f6b('0x61')]();}['bind'](this));}[a25_0x3f6b('0x41')](this));_0x523a0d['on'](a25_0x3f6b('0x8e'),function(_0x523a0d){console[a25_0x3f6b('0x4a')]('stopped');});_0x523a0d['on']('destroyed',function(_0x523a0d){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x8f'));});_0x523a0d['on']('retry',function(_0x523a0d){console['log']('retry');});}['downloadHTTPFile'](_0x1ac340,_0x3e5bb9,_0x276a1a,_0x32fb09){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x90'));console['log'](_0x1ac340);const _0x1698b1=!![];let _0x1a5a81=0x0;const _0x2d10ab='';console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x91')+_0x1ac340+'\x20to\x20'+_0x3e5bb9);if(_0x1a5a81){if(_0x1a5a81>0x5){_0x32fb09(a25_0x3f6b('0x92'),_0x1ac340,_0x276a1a,null);return;}}else{_0x1a5a81=0x0;}const _0x293ea0=this[a25_0x3f6b('0x1e')]+_0x3e5bb9;let _0x362a41;if(_0x32fb09===undefined){console['log'](a25_0x3f6b('0x93')+_0x1ac340+a25_0x3f6b('0x94')+_0x293ea0);_0x32fb09=function(_0x168d5d,_0x588095){console[a25_0x3f6b('0x4a')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x168d5d,_0x588095);};}http[a25_0x3f6b('0x95')][a25_0x3f6b('0x96')]=0x64;const _0x14855f={'host':url[a25_0x3f6b('0x31')](_0x1ac340)[a25_0x3f6b('0x97')],'port':0x50,'path':url['parse'](_0x1ac340)[a25_0x3f6b('0x98')],'agent':![]};const _0x229502=http[a25_0x3f6b('0x99')](_0x14855f,function(_0x1537cf){let _0x325e58=0x0;let _0x7dd21e=0x0;function _0x5aaf00(){if(_0x325e58===undefined){console[a25_0x3f6b('0x4a')](_0x3e5bb9+a25_0x3f6b('0x9a')+_0x7dd21e+'/'+'?');}const _0x45ed74=_0x7dd21e/_0x325e58*0x64;console[a25_0x3f6b('0x4a')](_0x3e5bb9+'\x20Progress:\x20'+_0x45ed74+'%\x09'+_0x7dd21e+'/'+_0x325e58);}console[a25_0x3f6b('0x4a')](_0x3e5bb9+'\x20'+_0x1537cf['statusCode']);switch(_0x1537cf['statusCode']){case 0xc8:_0x325e58=_0x1537cf[a25_0x3f6b('0x9b')][a25_0x3f6b('0x9c')]||_0x2d10ab;fs[a25_0x3f6b('0x9d')](_0x293ea0,function(_0x62fd77,_0x3c8b91){if(!_0x62fd77){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0x9e')+_0x293ea0);if(_0x3c8b91[a25_0x3f6b('0x9f')]==_0x325e58){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xa0')+_0x325e58+')');console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xa1'));}else{console['log'](a25_0x3f6b('0xa2')+_0x3c8b91[a25_0x3f6b('0x9f')]+a25_0x3f6b('0xa3')+_0x325e58+')');}}_0x362a41=fs['createWriteStream'](_0x293ea0);_0x1537cf[a25_0x3f6b('0xa4')](_0x362a41);_0x1537cf['on'](a25_0x3f6b('0xa5'),function(_0x1eb2d7){_0x7dd21e+=_0x1eb2d7[a25_0x3f6b('0x60')];_0x5aaf00();});_0x229502['on']('error',function(_0x62fd77){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xa6'));console['log'](_0x62fd77);});_0x362a41['on'](a25_0x3f6b('0xa7'),function(){console[a25_0x3f6b('0x4a')]('Downloaded\x20'+_0x1ac340+'\x20to\x20'+_0x3e5bb9);_0x32fb09(null,_0x3e5bb9,_0x276a1a,_0x3e5bb9);}[a25_0x3f6b('0x41')](this));});break;case 0x12e:const _0x152304=_0x1537cf[a25_0x3f6b('0x9b')]['location'];console['log'](a25_0x3f6b('0xa8')+_0x1ac340+a25_0x3f6b('0x94')+_0x152304);if(_0x1a5a81<0x5){this[a25_0x3f6b('0x90')](_0x152304,_0x3e5bb9,_0x32fb09,_0x1a5a81++);}else{console[a25_0x3f6b('0x8a')](a25_0x3f6b('0xa9')+_0x1ac340+'.');_0x32fb09('302',null,null,null);}return;case 0x194:console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xaa')+_0x1ac340);default:console[a25_0x3f6b('0x4a')]('Problem\x20downloading\x20'+_0x1ac340+a25_0x3f6b('0xab')+_0x1537cf[a25_0x3f6b('0xac')]);_0x229502[a25_0x3f6b('0xad')]();_0x32fb09(_0x1537cf['statusCode'],null,null,null);return;}})['on'](a25_0x3f6b('0x8a'),function(_0x13b4e7){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xae')+_0x1ac340+'\x20'+_0x13b4e7[a25_0x3f6b('0xaf')]);_0x32fb09(_0x13b4e7,null,null,null);});}[a25_0x3f6b('0xb0')](_0x22ae41,_0x436d68,_0x4a097e,_0x38312e){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xb0'));console[a25_0x3f6b('0x4a')](_0x22ae41);console[a25_0x3f6b('0x4a')](_0x436d68);console[a25_0x3f6b('0x4a')](_0x4a097e);console['log'](_0x38312e);if(_0x4a097e==a25_0x3f6b('0x75')){const _0x240d5a=this['downloadFiles'][this['currentFile']][a25_0x3f6b('0xb1')]!=null?this[a25_0x3f6b('0x5d')][this[a25_0x3f6b('0x24')]][a25_0x3f6b('0xb1')]:0x1e;this[a25_0x3f6b('0xb2')](_0x38312e,_0x240d5a);}else if(_0x4a097e==a25_0x3f6b('0xb3')){if(_0x22ae41==null&&_0x436d68!=''){this[a25_0x3f6b('0x24')]++;}this['download']();}console[a25_0x3f6b('0x4a')](this[a25_0x3f6b('0x24')]);}[a25_0x3f6b('0xb4')](_0x47aeb2,_0x1dea86,_0x5b4f80){progress(request(_0x47aeb2),{})['on'](a25_0x3f6b('0xb5'),function(_0x49f3ff){console[a25_0x3f6b('0x4a')](_0x49f3ff);})['on'](a25_0x3f6b('0x8a'),function(_0x1a1834){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xb6'));this[a25_0x3f6b('0x61')]();})['on']('end',function(){console[a25_0x3f6b('0x4a')]('Downloaded:\x20'+_0x1dea86);console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xb7')+_0x5b4f80);if(_0x5b4f80=='image'){const _0x27cca7=this[a25_0x3f6b('0x5d')][this[a25_0x3f6b('0x24')]]['duration']!=null?this[a25_0x3f6b('0x5d')][this['currentFile']][a25_0x3f6b('0xb1')]:0x1e;this[a25_0x3f6b('0xb2')](_0x1dea86,_0x27cca7);}else if(_0x5b4f80=='video'){this[a25_0x3f6b('0x24')]++;this[a25_0x3f6b('0x61')]();}}[a25_0x3f6b('0x41')](this))[a25_0x3f6b('0xa4')](fs[a25_0x3f6b('0xb8')](this[a25_0x3f6b('0x1e')]+_0x1dea86));}[a25_0x3f6b('0xb2')](_0x1cf217,_0x1b1bc0=0x1e){const _0x209377=this['tempFolder']+_0x1cf217;console[a25_0x3f6b('0x4a')](_0x209377);console[a25_0x3f6b('0x4a')](_0x1cf217);const _0x52c890=_0x1cf217[a25_0x3f6b('0x70')]('.')[a25_0x3f6b('0x71')](0x0,-0x1)[a25_0x3f6b('0x72')]('.');const _0x11e548=a25_0x3f6b('0xb9');const _0x4ae661=['-y','-r',a25_0x3f6b('0xba'),a25_0x3f6b('0xbb'),'1','-pattern_type','glob','-i',_0x209377,'-t',String(_0x1b1bc0),a25_0x3f6b('0xbc'),'libx264',a25_0x3f6b('0xbd'),a25_0x3f6b('0xbe'),'-r','25',a25_0x3f6b('0xbf'),'scale=1920:1080',this[a25_0x3f6b('0x1e')]+_0x52c890+a25_0x3f6b('0x74')];const _0x576b35=spawn(_0x11e548,_0x4ae661);_0x576b35[a25_0x3f6b('0xc0')]['on'](a25_0x3f6b('0xa5'),function(_0x3dabb6){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xc1')+_0x209377);});_0x576b35[a25_0x3f6b('0xc2')]['on'](a25_0x3f6b('0xa5'),function(_0x1aeb73){console['log']('stderr:\x20'+_0x1aeb73);}[a25_0x3f6b('0x41')](this));_0x576b35['on'](a25_0x3f6b('0xc3'),function(){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xc4'));this[a25_0x3f6b('0x24')]++;this[a25_0x3f6b('0x61')]();}[a25_0x3f6b('0x41')](this));}[a25_0x3f6b('0xc5')](_0x2fea9d){const _0x5f8ab2=this[a25_0x3f6b('0x1e')]+'/'+_0x2fea9d+a25_0x3f6b('0x74');const _0x4c1399=a25_0x3f6b('0xc6')+_0x2fea9d;console[a25_0x3f6b('0x4a')]('youtubeURL:\x20'+_0x4c1399);console['log']('outFileName:\x20'+_0x5f8ab2);const _0x5928a5=youtubedl(_0x4c1399,[a25_0x3f6b('0xc7'),a25_0x3f6b('0xc8')],{'cwd':__dirname});_0x5928a5['on']('info',function(_0x20213b){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xc9'));console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xca')+_0x20213b[a25_0x3f6b('0xcb')]);console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xcc')+_0x20213b[a25_0x3f6b('0x9f')]);});_0x5928a5['on'](a25_0x3f6b('0xcd'),function complete(_0x44a2da){'use strict';console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xca')+_0x44a2da[a25_0x3f6b('0xcb')]+a25_0x3f6b('0xce'));});_0x5928a5['on'](a25_0x3f6b('0x8c'),function(){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xcf'));this[a25_0x3f6b('0x77')](_0x5f8ab2)[a25_0x3f6b('0x5')](function(_0xc02d3c){if(_0xc02d3c){this[a25_0x3f6b('0x24')]++;}this[a25_0x3f6b('0x61')]();}[a25_0x3f6b('0x41')](this));}['bind'](this));_0x5928a5['pipe'](fs[a25_0x3f6b('0xb8')](_0x5f8ab2));}[a25_0x3f6b('0x6b')](){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xd0'));if(this['playlistChanged']){if(this[a25_0x3f6b('0x26')][a25_0x3f6b('0x60')]==0x0){console['log'](a25_0x3f6b('0xd1')+this[a25_0x3f6b('0x66')]);fs[a25_0x3f6b('0x4d')](this[a25_0x3f6b('0x66')],JSON[a25_0x3f6b('0x45')](this['newPlayList']));const _0x44e51d=this[a25_0x3f6b('0x7c')]();fsExtra[a25_0x3f6b('0xd2')](this[a25_0x3f6b('0x20')])[a25_0x3f6b('0x5')](()=>{fsExtra['copy'](this[a25_0x3f6b('0x1e')],this[a25_0x3f6b('0x20')])[a25_0x3f6b('0x5')](()=>{fsExtra['emptyDir'](this['tempFolder'])[a25_0x3f6b('0x5')](()=>{console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xd3'));this[a25_0x3f6b('0x7d')]();})[a25_0x3f6b('0x4c')](_0x12f50d=>console[a25_0x3f6b('0x8a')](_0x12f50d));})['catch'](_0x2cbe5c=>console[a25_0x3f6b('0x8a')](_0x2cbe5c));})[a25_0x3f6b('0x4c')](_0x43d003=>console['error'](_0x43d003));}else{console['log'](a25_0x3f6b('0xd4'));this[a25_0x3f6b('0x24')]=0x0;setTimeout(function(){this[a25_0x3f6b('0x61')]();}[a25_0x3f6b('0x41')](this),0x1388);}}else{console[a25_0x3f6b('0x4a')]('No\x20playlist\x20changes.');}}[a25_0x3f6b('0x7c')](){let _0x577ff1=a25_0x3f6b('0xd5')+'\x0d\x0a'+a25_0x3f6b('0xd6')+'\x0d\x0a';const _0x52a824=new Date();for(const _0xac6247 in this[a25_0x3f6b('0x5d')]){const _0x2168b9=this[a25_0x3f6b('0x5d')][_0xac6247][a25_0x3f6b('0x6c')];const _0x28c98a=this[a25_0x3f6b('0x5d')][_0xac6247][a25_0x3f6b('0x6d')];const _0x30b5c0=dateUtils_1[a25_0x3f6b('0xd7')][a25_0x3f6b('0xd8')](this['downloadFiles'][_0xac6247][a25_0x3f6b('0xd9')]);const _0x781507=dateUtils_1[a25_0x3f6b('0xd7')][a25_0x3f6b('0xd8')](this[a25_0x3f6b('0x5d')][_0xac6247][a25_0x3f6b('0xda')]);const _0x455fcf=_0x2168b9[a25_0x3f6b('0x6e')](_0x2168b9[a25_0x3f6b('0x6f')]('/')+0x1);let _0x284b90=_0x455fcf[a25_0x3f6b('0x70')]('.')[a25_0x3f6b('0x71')](0x0,-0x1)[a25_0x3f6b('0x72')]('.');if(_0x28c98a==a25_0x3f6b('0x73')){_0x284b90=_0x2168b9;}if((_0x30b5c0==null||_0x30b5c0<_0x52a824)&&(_0x781507==null||_0x781507>_0x52a824)){_0x577ff1+=a25_0x3f6b('0xdb')+_0x284b90+a25_0x3f6b('0x74')+'\x0d\x0a';}}let _0x2e59d6='';if(fsExtra[a25_0x3f6b('0x64')](this[a25_0x3f6b('0x22')])){_0x2e59d6=fsExtra[a25_0x3f6b('0x33')](this[a25_0x3f6b('0x22')]);_0x2e59d6=_0x2e59d6['toString']()[a25_0x3f6b('0xdc')]();}_0x577ff1=_0x577ff1[a25_0x3f6b('0x68')]()[a25_0x3f6b('0xdc')]();if(_0x2e59d6!=_0x577ff1){fsExtra['writeFileSync'](this['m3uFile'],_0x577ff1);return!![];}return![];}[a25_0x3f6b('0x7d')](){console[a25_0x3f6b('0x4a')]('m3uFile',this[a25_0x3f6b('0x22')]);this[a25_0x3f6b('0xdd')](a25_0x3f6b('0xde'));this['kodiCommandClient']('ActivateWindow(fullscreenvideo)');}[a25_0x3f6b('0x54')](){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xdf'));exec(a25_0x3f6b('0xe0'),function(_0x1f3d9d){console[a25_0x3f6b('0x4a')](_0x1f3d9d);});}[a25_0x3f6b('0x3f')](){const _0x3bdcb2=format(this[a25_0x3f6b('0x3a')],this['playerId']);console[a25_0x3f6b('0x4a')](_0x3bdcb2);request({'url':_0x3bdcb2,'json':!![]},function(_0x40c0ff,_0x4e5927,_0x5cfdb0){if(_0x5cfdb0[a25_0x3f6b('0x60')]>0x0){const _0x5b9040=_0x5cfdb0[0x0];const _0x26c934=_0x5b9040['rss'];const _0x22113e=_0x5b9040['header_active']==0x1;this[a25_0x3f6b('0xe1')](_0x26c934);this['enableClock'](_0x22113e);this[a25_0x3f6b('0x3e')]();}console[a25_0x3f6b('0x4a')](_0x5cfdb0);}[a25_0x3f6b('0x41')](this));}[a25_0x3f6b('0xe2')](){this[a25_0x3f6b('0xdd')]('CECStandby()');}['turnOnTV'](){this[a25_0x3f6b('0xdd')](a25_0x3f6b('0xe3'));}[a25_0x3f6b('0xe1')](_0x791130){const _0x2a9ce2=_0x791130!=null&&_0x791130!='';const _0xa537d5='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra[a25_0x3f6b('0x64')](_0xa537d5)){const _0x1b07c9=fsExtra[a25_0x3f6b('0x33')](_0xa537d5);console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xe4')+_0x1b07c9);const _0x4b555c=require('xml2js');const _0x3cb24f=_0x4b555c['parseString'];_0x3cb24f(_0x1b07c9,function(_0x5200d2,_0x5481c5){console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xe5'),_0x5200d2);console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xe6'),_0x5481c5);if(!_0x791130||_0x791130==null||_0x791130==''){_0x791130=a25_0x3f6b('0xe7');}_0x5481c5['rssfeeds']['set'][0x0][a25_0x3f6b('0xe8')][0x0]['_']=_0x791130;const _0x56acc4=new _0x4b555c['Builder']();const _0x2bf08f=_0x56acc4[a25_0x3f6b('0xe9')](_0x5481c5);console['log'](a25_0x3f6b('0xea'),_0x2bf08f);fsExtra['writeFileSync'](_0xa537d5,_0x2bf08f);});this[a25_0x3f6b('0xdd')](a25_0x3f6b('0xeb'));this[a25_0x3f6b('0xec')]('Settings.SetSettingValue',{'setting':a25_0x3f6b('0xed'),'value':_0x2a9ce2},function(_0x1d06ea){console['log']('setRss:');console[a25_0x3f6b('0x4a')](_0x1d06ea);}[a25_0x3f6b('0x41')](this));}}[a25_0x3f6b('0xee')](_0x2ac1dd){this[a25_0x3f6b('0xec')](a25_0x3f6b('0xef'),{'setting':a25_0x3f6b('0xf0'),'value':_0x2ac1dd},function(_0x1c3e9a){console['log']('enableClock:\x20');console['log'](_0x1c3e9a);}[a25_0x3f6b('0x41')](this));}[a25_0x3f6b('0xdd')](_0x177b26){exec('kodi-send\x20--action=\x22'+_0x177b26+'\x22',function(_0x550333){console['log'](_0x550333);});}[a25_0x3f6b('0xec')](_0xe19922,_0x1e5972,_0x2df046){const _0x13d257={'jsonrpc':a25_0x3f6b('0xf1'),'method':_0xe19922,'params':_0x1e5972,'id':0x1};const _0x23b202={'user':this[a25_0x3f6b('0x2a')],'pass':this[a25_0x3f6b('0x2c')]};console[a25_0x3f6b('0x4a')]('jsonrpcClient\x20data',_0x13d257);console[a25_0x3f6b('0x4a')](a25_0x3f6b('0xf2'),_0x23b202);this['httpClientService'][a25_0x3f6b('0x48')](this[a25_0x3f6b('0x28')]+'/jsonrpc',_0x13d257,![],_0x23b202)[a25_0x3f6b('0x5')](function(_0x5443eb){_0x2df046(_0x5443eb);})[a25_0x3f6b('0x4c')](function(_0x5d86fa){});}}exports[a25_0x3f6b('0xf3')]=SyncPlaylistsService;