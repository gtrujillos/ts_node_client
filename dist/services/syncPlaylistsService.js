var a22_0x1252=['split','slice','join','youtube_single','image','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error:\x20','end','mediaType:\x20','stopped','destroyed','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','pipe','data','finish','location','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','Error\x20downloading\x20file','createWriteStream','ffmpeg','1/2','-loop','glob','-c:v','-pix_fmt','yuv420p','-vf','stdout','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','--format=18','info','Download\x20started','filename:\x20','_filename','size','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','writeFileSync','#EXTCPlayListM3U::M3U','lastIndexOf','/home/osmc/luloclient/media/files/','emptyDirSync','kodi-send','--action','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','throw','value','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','string-template','youtube-dl','uuid/v4','context.json','url-exists','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','downloadFiles','newPlayList','httpClientService','HttpClientService','init','config','parse','readFileSync','context','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','registerClient','checkFolders','loadMediaList','bind','checkDependencies','deviceUuid','stringify','networkInterfaces','http://restapi.lulo.run/player_devices/register','then','log','register\x20response:\x20','catch','reportStatus','post','http://restapi.lulo.run/player_devices/report_status','ensureDir','failDownloadFiles','push','length','reloadMediaList','existsSync','removeSync','error','download','this.currentFile:\x20','finishProcess','path','media_type','substring'];(function(_0x39300b,_0x2d87b4){var _0xcd1814=function(_0x5e8d5c){while(--_0x5e8d5c){_0x39300b['push'](_0x39300b['shift']());}};_0xcd1814(++_0x2d87b4);}(a22_0x1252,0x110));var a22_0x542f=function(_0x38ecc5,_0x417ddd){_0x38ecc5=_0x38ecc5-0x0;var _0x71a3e=a22_0x1252[_0x38ecc5];return _0x71a3e;};'use strict';var __awaiter=this&&this[a22_0x542f('0x0')]||function(_0x3b627c,_0x135a32,_0x2998f3,_0x3236ea){return new(_0x2998f3||(_0x2998f3=Promise))(function(_0xe7b73b,_0x5c0cd0){function _0x18baec(_0x566334){try{_0x57f0de(_0x3236ea[a22_0x542f('0x1')](_0x566334));}catch(_0x4e8776){_0x5c0cd0(_0x4e8776);}}function _0x3af859(_0x231d1b){try{_0x57f0de(_0x3236ea[a22_0x542f('0x2')](_0x231d1b));}catch(_0x105452){_0x5c0cd0(_0x105452);}}function _0x57f0de(_0x3d0988){_0x3d0988['done']?_0xe7b73b(_0x3d0988[a22_0x542f('0x3')]):new _0x2998f3(function(_0xe7b73b){_0xe7b73b(_0x3d0988[a22_0x542f('0x3')]);})['then'](_0x18baec,_0x3af859);}_0x57f0de((_0x3236ea=_0x3236ea[a22_0x542f('0x4')](_0x3b627c,_0x135a32||[]))[a22_0x542f('0x1')]());});};Object[a22_0x542f('0x5')](exports,a22_0x542f('0x6'),{'value':!![]});const HttpClientService_1=require(a22_0x542f('0x7'));const mediainfo=require(a22_0x542f('0x8'));const fs=require('fs');const url=require(a22_0x542f('0x9'));const http=require(a22_0x542f('0xa'));const fsExtra=require(a22_0x542f('0xb'));const request=require(a22_0x542f('0xc'));const progress=require(a22_0x542f('0xd'));const spawn=require(a22_0x542f('0xe'))['spawn'];const isImage=require('is-image');const format=require(a22_0x542f('0xf'));const os=require('os');const youtubedl=require(a22_0x542f('0x10'));const uuidv4=require(a22_0x542f('0x11'));const configFile='config.json';const contextFile=a22_0x542f('0x12');const urlExists=require(a22_0x542f('0x13'));const Downloader=require(a22_0x542f('0x14'));class SyncPlaylistsService{constructor(){this[a22_0x542f('0x15')]=a22_0x542f('0x16');this[a22_0x542f('0x17')]=this[a22_0x542f('0x15')]+a22_0x542f('0x18');this[a22_0x542f('0x19')]=this[a22_0x542f('0x15')]+a22_0x542f('0x1a');this[a22_0x542f('0x1b')]=this[a22_0x542f('0x15')]+a22_0x542f('0x1c');this[a22_0x542f('0x1d')]=this[a22_0x542f('0x19')]+a22_0x542f('0x1e');this[a22_0x542f('0x1f')]=0x0;this[a22_0x542f('0x20')]=[];this['failDownloadFiles']=[];this[a22_0x542f('0x21')]={};this[a22_0x542f('0x22')]=new HttpClientService_1[(a22_0x542f('0x23'))]();}[a22_0x542f('0x24')](){this[a22_0x542f('0x25')]=JSON[a22_0x542f('0x26')](fs[a22_0x542f('0x27')](configFile));this[a22_0x542f('0x28')]=JSON[a22_0x542f('0x26')](fs[a22_0x542f('0x27')](contextFile));this['playerId']=this[a22_0x542f('0x25')][a22_0x542f('0x29')];this['baseURL']=process[a22_0x542f('0x2a')][a22_0x542f('0x2b')]+a22_0x542f('0x2c');this[a22_0x542f('0x2d')]=this[a22_0x542f('0x2e')]+a22_0x542f('0x2f');this[a22_0x542f('0x30')]();this[a22_0x542f('0x31')]();this[a22_0x542f('0x32')]();setInterval(function(){this['reportStatus']();}[a22_0x542f('0x33')](this),0xea60);}[a22_0x542f('0x34')](){}[a22_0x542f('0x30')](){const _0x5568d4=this[a22_0x542f('0x25')][a22_0x542f('0x35')];if(!_0x5568d4||_0x5568d4==''){this[a22_0x542f('0x25')][a22_0x542f('0x35')]=uuidv4();this[a22_0x542f('0x25')]={'deviceUuid':this[a22_0x542f('0x25')][a22_0x542f('0x35')],'playerId':this[a22_0x542f('0x25')]['playerId']};fs['writeFileSync'](configFile,JSON[a22_0x542f('0x36')](this[a22_0x542f('0x25')]));}const _0x14b9fc={'player_id':this[a22_0x542f('0x29')],'device_uuid':this[a22_0x542f('0x25')][a22_0x542f('0x35')],'network_info':JSON[a22_0x542f('0x36')](os[a22_0x542f('0x37')]()),'firmware_info':JSON[a22_0x542f('0x36')](this[a22_0x542f('0x28')]),'status':0x1};this[a22_0x542f('0x22')]['post'](a22_0x542f('0x38'),_0x14b9fc,![])[a22_0x542f('0x39')](function(_0x474641){console[a22_0x542f('0x3a')](a22_0x542f('0x3b')+Date());})[a22_0x542f('0x3c')](function(_0x591b57){});}[a22_0x542f('0x3d')](){const _0x28882a={'player_id':this[a22_0x542f('0x29')],'device_uuid':this['config'][a22_0x542f('0x35')],'status':0x1};this['httpClientService'][a22_0x542f('0x3e')](a22_0x542f('0x3f'),_0x28882a,![])['then'](function(_0x27c353){console['log']('reportStatusResponse:\x20'+Date());})[a22_0x542f('0x3c')](function(_0x2b1dff){});}['checkFolders'](){fsExtra[a22_0x542f('0x40')](this[a22_0x542f('0x15')],_0x3a350a=>{});fsExtra[a22_0x542f('0x40')](this[a22_0x542f('0x17')],_0x2cf8ca=>{});fsExtra[a22_0x542f('0x40')](this[a22_0x542f('0x19')],_0x1603be=>{});}[a22_0x542f('0x32')](){const _0x3765a2=format(this[a22_0x542f('0x2d')],this[a22_0x542f('0x29')]);console['log'](_0x3765a2);request({'url':_0x3765a2,'json':!![]},function(_0x5656ec,_0x214bbc,_0x26fd42){this[a22_0x542f('0x21')]=_0x26fd42;fsExtra['emptyDirSync'](this[a22_0x542f('0x17')]);this[a22_0x542f('0x20')]=[];this[a22_0x542f('0x41')]=[];this[a22_0x542f('0x1f')]=0x0;for(const _0x47e7a5 in _0x26fd42){this[a22_0x542f('0x20')][a22_0x542f('0x42')](_0x26fd42[_0x47e7a5]);}console['log']('Total:\x20'+this[a22_0x542f('0x20')][a22_0x542f('0x43')]);if(this[a22_0x542f('0x20')][a22_0x542f('0x43')]>0x0){this['download']();}}[a22_0x542f('0x33')](this));}[a22_0x542f('0x44')](){if(fsExtra[a22_0x542f('0x45')](this[a22_0x542f('0x1b')])){fsExtra[a22_0x542f('0x46')](this[a22_0x542f('0x1b')]);}this[a22_0x542f('0x32')]();}['hasPlayListChanged'](){const _0x25eb59=JSON[a22_0x542f('0x36')](this[a22_0x542f('0x21')]);try{if(!fs[a22_0x542f('0x45')](this[a22_0x542f('0x1b')])){return!![];}else{const _0x554b0d=fs[a22_0x542f('0x27')](this[a22_0x542f('0x1b')])['toString']();if(_0x554b0d!=_0x25eb59){return!![];}}}catch(_0x771b1a){console[a22_0x542f('0x47')](_0x771b1a);}return![];}[a22_0x542f('0x48')](){console['log'](a22_0x542f('0x49')+this['currentFile']+'\x20of\x20'+this[a22_0x542f('0x20')][a22_0x542f('0x43')]);if(this[a22_0x542f('0x1f')]>=this[a22_0x542f('0x20')][a22_0x542f('0x43')]){this[a22_0x542f('0x4a')]();return;}const _0x31c45d=String(this[a22_0x542f('0x20')][this['currentFile']][a22_0x542f('0x4b')]);const _0x52f82e=this[a22_0x542f('0x20')][this['currentFile']][a22_0x542f('0x4c')];let _0x2b28fa=_0x31c45d[a22_0x542f('0x4d')](_0x31c45d['lastIndexOf']('/')+0x1);const _0x50ee8d=_0x2b28fa[a22_0x542f('0x4e')]('.')[a22_0x542f('0x4f')](0x0,-0x1)['join']('.');let _0x341719=this[a22_0x542f('0x2e')]+_0x31c45d;const _0x3aaef0=_0x341719['split']('.')[a22_0x542f('0x4f')](0x0,-0x1)[a22_0x542f('0x50')]('.');if(_0x52f82e==a22_0x542f('0x51')){_0x2b28fa=_0x2b28fa+'.mp4';}else if(_0x52f82e==a22_0x542f('0x52')){_0x2b28fa=_0x50ee8d+a22_0x542f('0x53');_0x341719=_0x3aaef0+'.mp4';}console[a22_0x542f('0x3a')](a22_0x542f('0x54'));console[a22_0x542f('0x3a')](_0x31c45d);console[a22_0x542f('0x3a')](_0x52f82e);console['log'](_0x2b28fa);console[a22_0x542f('0x3a')](_0x341719);console[a22_0x542f('0x3a')](_0x50ee8d);console['log'](_0x3aaef0);console[a22_0x542f('0x3a')](a22_0x542f('0x54'));if(fsExtra[a22_0x542f('0x45')](this['tempFolder']+_0x2b28fa)){this[a22_0x542f('0x55')](this[a22_0x542f('0x17')]+_0x2b28fa)[a22_0x542f('0x39')](function(_0x41811c){if(_0x41811c){this[a22_0x542f('0x1f')]++;}this[a22_0x542f('0x48')]();}['bind'](this));}else if(fsExtra['existsSync'](this[a22_0x542f('0x19')]+_0x2b28fa)){this['checkVideo'](this[a22_0x542f('0x19')]+_0x2b28fa)['then'](function(_0x4647f4){if(_0x4647f4){fsExtra[a22_0x542f('0x56')](this[a22_0x542f('0x19')]+_0x2b28fa,this[a22_0x542f('0x17')]+_0x2b28fa);this[a22_0x542f('0x1f')]++;}this[a22_0x542f('0x48')]();}[a22_0x542f('0x33')](this));}else{console[a22_0x542f('0x3a')](a22_0x542f('0x57')+_0x341719);if(_0x52f82e=='youtube_single'){this[a22_0x542f('0x58')](_0x31c45d);}else{this[a22_0x542f('0x59')](_0x341719,_0x2b28fa,_0x52f82e);}}}['checkVideo'](_0x5601d1){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x542f('0x3a')](a22_0x542f('0x5a')+_0x5601d1);const _0x38489a=yield mediainfo(_0x5601d1)['catch'](_0x3679dc=>console['log'](_0x3679dc));const _0x1b9f43=_0x38489a[a22_0x542f('0x5b')][a22_0x542f('0x5c')][a22_0x542f('0x43')]>0x1&&_0x38489a[a22_0x542f('0x5b')][a22_0x542f('0x5c')][0x1][a22_0x542f('0x5d')]==a22_0x542f('0x5e');if(!_0x1b9f43){fsExtra[a22_0x542f('0x46')](_0x5601d1);}console[a22_0x542f('0x3a')](a22_0x542f('0x5f')+_0x1b9f43);return _0x1b9f43;});}['downloader'](_0x1228f9,_0x20957d,_0x5e3cb6){const _0x62fdb2=new Downloader();console[a22_0x542f('0x3a')](_0x1228f9);console[a22_0x542f('0x3a')](_0x20957d);console['log'](_0x5e3cb6);const _0x36bcfa=_0x62fdb2[a22_0x542f('0x48')](_0x1228f9,this[a22_0x542f('0x17')]+_0x20957d);urlExists(_0x1228f9,function(_0x220fea,_0x282abd){if(_0x282abd){if(this[a22_0x542f('0x41')][a22_0x542f('0x60')](this[a22_0x542f('0x1f')])){const _0x13ee57=this[a22_0x542f('0x41')][a22_0x542f('0x61')](this[a22_0x542f('0x1f')]);if(_0x13ee57>-0x1){this[a22_0x542f('0x41')][a22_0x542f('0x62')](_0x13ee57,0x1);}}console[a22_0x542f('0x3a')](a22_0x542f('0x63')+_0x1228f9);_0x36bcfa[a22_0x542f('0x64')]();}else{if(!this['failDownloadFiles'][a22_0x542f('0x60')](this['currentFile'])){this[a22_0x542f('0x41')][a22_0x542f('0x42')](this[a22_0x542f('0x1f')]);}console[a22_0x542f('0x3a')](a22_0x542f('0x65')+_0x1228f9);this[a22_0x542f('0x1f')]++;this[a22_0x542f('0x48')]();}}[a22_0x542f('0x33')](this));_0x36bcfa['on'](a22_0x542f('0x64'),function(_0x36bcfa){console[a22_0x542f('0x3a')](a22_0x542f('0x66')+_0x1228f9);});_0x36bcfa['on'](a22_0x542f('0x47'),function(_0x36bcfa){console[a22_0x542f('0x3a')](a22_0x542f('0x67'));this[a22_0x542f('0x48')]();}['bind'](this));_0x36bcfa['on']('end',function(_0x36bcfa){console[a22_0x542f('0x3a')](a22_0x542f('0x68'));console[a22_0x542f('0x3a')]('Downloaded:\x20'+_0x20957d);console['log'](a22_0x542f('0x69')+_0x5e3cb6);this[a22_0x542f('0x55')](this[a22_0x542f('0x17')]+_0x20957d)['then'](function(_0x58d088){if(_0x58d088){this[a22_0x542f('0x1f')]++;}this['download']();}['bind'](this));}[a22_0x542f('0x33')](this));_0x36bcfa['on'](a22_0x542f('0x6a'),function(_0x36bcfa){console[a22_0x542f('0x3a')](a22_0x542f('0x6a'));});_0x36bcfa['on'](a22_0x542f('0x6b'),function(_0x36bcfa){console[a22_0x542f('0x3a')](a22_0x542f('0x6b'));});_0x36bcfa['on']('retry',function(_0x36bcfa){console[a22_0x542f('0x3a')]('retry');});}[a22_0x542f('0x6c')](_0x3d7017,_0x4b7e28,_0x2c507d,_0x380e63){console[a22_0x542f('0x3a')](a22_0x542f('0x6c'));console[a22_0x542f('0x3a')](_0x3d7017);const _0x5612a5=!![];let _0x1a00c4=0x0;const _0x1ccf11='';console['log'](a22_0x542f('0x6d')+_0x3d7017+a22_0x542f('0x6e')+_0x4b7e28);if(_0x1a00c4){if(_0x1a00c4>0x5){_0x380e63('Max\x20redirects\x20reached',_0x3d7017,_0x2c507d,null);return;}}else{_0x1a00c4=0x0;}const _0x4d3d26=this['tempFolder']+_0x4b7e28;let _0xbc3cc9;if(_0x380e63===undefined){console[a22_0x542f('0x3a')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x3d7017+a22_0x542f('0x6e')+_0x4d3d26);_0x380e63=function(_0x208eb1,_0xb7093a){console[a22_0x542f('0x3a')](a22_0x542f('0x6f'),_0x208eb1,_0xb7093a);};}http[a22_0x542f('0x70')][a22_0x542f('0x71')]=0x64;const _0x377260={'host':url[a22_0x542f('0x26')](_0x3d7017)[a22_0x542f('0x72')],'port':0x50,'path':url['parse'](_0x3d7017)[a22_0x542f('0x73')],'agent':![]};const _0x2646c1=http[a22_0x542f('0x74')](_0x377260,function(_0x3dcc87){let _0x21eae4=0x0;let _0x5c5a3f=0x0;function _0x38c475(){if(_0x21eae4===undefined){console[a22_0x542f('0x3a')](_0x4b7e28+a22_0x542f('0x75')+_0x5c5a3f+'/'+'?');}const _0x82598e=_0x5c5a3f/_0x21eae4*0x64;console[a22_0x542f('0x3a')](_0x4b7e28+a22_0x542f('0x76')+_0x82598e+'%\x09'+_0x5c5a3f+'/'+_0x21eae4);}console['log'](_0x4b7e28+'\x20'+_0x3dcc87[a22_0x542f('0x77')]);switch(_0x3dcc87[a22_0x542f('0x77')]){case 0xc8:_0x21eae4=_0x3dcc87[a22_0x542f('0x78')][a22_0x542f('0x79')]||_0x1ccf11;fs[a22_0x542f('0x7a')](_0x4d3d26,function(_0x4d505b,_0x3acaf5){if(!_0x4d505b){console[a22_0x542f('0x3a')](a22_0x542f('0x7b')+_0x4d3d26);if(_0x3acaf5['size']==_0x21eae4){console[a22_0x542f('0x3a')](a22_0x542f('0x7c')+_0x21eae4+')');console['log'](a22_0x542f('0x7d'));}else{console[a22_0x542f('0x3a')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x3acaf5['size']+')\x20vs\x20New('+_0x21eae4+')');}}_0xbc3cc9=fs['createWriteStream'](_0x4d3d26);_0x3dcc87[a22_0x542f('0x7e')](_0xbc3cc9);_0x3dcc87['on'](a22_0x542f('0x7f'),function(_0x35ddf9){_0x5c5a3f+=_0x35ddf9[a22_0x542f('0x43')];_0x38c475();});_0x2646c1['on']('error',function(_0x4d505b){console['log']('err:\x20');console['log'](_0x4d505b);});_0xbc3cc9['on'](a22_0x542f('0x80'),function(){console[a22_0x542f('0x3a')]('Downloaded\x20'+_0x3d7017+'\x20to\x20'+_0x4b7e28);_0x380e63(null,_0x4b7e28,_0x2c507d,_0x4b7e28);}['bind'](this));});break;case 0x12e:const _0x36d955=_0x3dcc87[a22_0x542f('0x78')][a22_0x542f('0x81')];console[a22_0x542f('0x3a')](a22_0x542f('0x82')+_0x3d7017+a22_0x542f('0x6e')+_0x36d955);if(_0x1a00c4<0x5){this[a22_0x542f('0x6c')](_0x36d955,_0x4b7e28,_0x380e63,_0x1a00c4++);}else{console[a22_0x542f('0x47')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x3d7017+'.');_0x380e63(a22_0x542f('0x83'),null,null,null);}return;case 0x194:console[a22_0x542f('0x3a')](a22_0x542f('0x84')+_0x3d7017);default:console['log'](a22_0x542f('0x85')+_0x3d7017+a22_0x542f('0x86')+_0x3dcc87[a22_0x542f('0x77')]);_0x2646c1['abort']();_0x380e63(_0x3dcc87[a22_0x542f('0x77')],null,null,null);return;}})['on'](a22_0x542f('0x47'),function(_0x4a0e6e){console[a22_0x542f('0x3a')](a22_0x542f('0x87')+_0x3d7017+'\x20'+_0x4a0e6e[a22_0x542f('0x88')]);_0x380e63(_0x4a0e6e,null,null,null);});}[a22_0x542f('0x89')](_0x3c3f07,_0x6f2c7f,_0x3eb045,_0x4f260b){console[a22_0x542f('0x3a')]('downloadHTTPFileCallback');console['log'](_0x3c3f07);console['log'](_0x6f2c7f);console[a22_0x542f('0x3a')](_0x3eb045);console[a22_0x542f('0x3a')](_0x4f260b);if(_0x3eb045==a22_0x542f('0x52')){const _0x5af6ee=this[a22_0x542f('0x20')][this[a22_0x542f('0x1f')]]['duration']!=null?this['downloadFiles'][this[a22_0x542f('0x1f')]][a22_0x542f('0x8a')]:0x1e;this[a22_0x542f('0x8b')](_0x4f260b,_0x5af6ee);}else if(_0x3eb045==a22_0x542f('0x8c')){if(_0x3c3f07==null&&_0x6f2c7f!=''){this[a22_0x542f('0x1f')]++;}this[a22_0x542f('0x48')]();}console[a22_0x542f('0x3a')](this[a22_0x542f('0x1f')]);}[a22_0x542f('0x8d')](_0x44e3d5,_0x40c1dd,_0x4c4961){progress(request(_0x44e3d5),{})['on']('progress',function(_0x1a443f){console[a22_0x542f('0x3a')](_0x1a443f);})['on']('error',function(_0xf20b88){console[a22_0x542f('0x3a')](a22_0x542f('0x8e'));this[a22_0x542f('0x48')]();})['on'](a22_0x542f('0x68'),function(){console['log']('Downloaded:\x20'+_0x40c1dd);console[a22_0x542f('0x3a')](a22_0x542f('0x69')+_0x4c4961);if(_0x4c4961==a22_0x542f('0x52')){const _0x381c64=this[a22_0x542f('0x20')][this[a22_0x542f('0x1f')]][a22_0x542f('0x8a')]!=null?this[a22_0x542f('0x20')][this['currentFile']][a22_0x542f('0x8a')]:0x1e;this['createImageVideo'](_0x40c1dd,_0x381c64);}else if(_0x4c4961==a22_0x542f('0x8c')){this[a22_0x542f('0x1f')]++;this[a22_0x542f('0x48')]();}}[a22_0x542f('0x33')](this))['pipe'](fs[a22_0x542f('0x8f')](this[a22_0x542f('0x17')]+_0x40c1dd));}['createImageVideo'](_0x3aa969,_0x2ef83f=0x1e){const _0xf2091d=this[a22_0x542f('0x17')]+_0x3aa969;console[a22_0x542f('0x3a')](_0xf2091d);console[a22_0x542f('0x3a')](_0x3aa969);const _0x549ee4=_0x3aa969[a22_0x542f('0x4e')]('.')[a22_0x542f('0x4f')](0x0,-0x1)['join']('.');const _0x5b960a=a22_0x542f('0x90');const _0x45d884=['-y','-r',a22_0x542f('0x91'),a22_0x542f('0x92'),'1','-pattern_type',a22_0x542f('0x93'),'-i',_0xf2091d,'-t',String(_0x2ef83f),a22_0x542f('0x94'),'libx264',a22_0x542f('0x95'),a22_0x542f('0x96'),'-r','25',a22_0x542f('0x97'),'scale=1920:1080',this[a22_0x542f('0x17')]+_0x549ee4+'.mp4'];const _0x5f4574=spawn(_0x5b960a,_0x45d884);_0x5f4574[a22_0x542f('0x98')]['on'](a22_0x542f('0x7f'),function(_0x455d60){console['log'](a22_0x542f('0x99')+_0xf2091d);});_0x5f4574['stderr']['on'](a22_0x542f('0x7f'),function(_0x5b7e95){console[a22_0x542f('0x3a')](a22_0x542f('0x9a')+_0x5b7e95);}[a22_0x542f('0x33')](this));_0x5f4574['on'](a22_0x542f('0x9b'),function(){console[a22_0x542f('0x3a')](a22_0x542f('0x9c'));this[a22_0x542f('0x1f')]++;this['download']();}[a22_0x542f('0x33')](this));}[a22_0x542f('0x58')](_0x306e63){const _0x53584f=this[a22_0x542f('0x17')]+'/'+_0x306e63+a22_0x542f('0x53');const _0x4aa94a=youtubedl('http://www.youtube.com/watch?v='+_0x306e63,[a22_0x542f('0x9d')],{'cwd':__dirname});_0x4aa94a['on'](a22_0x542f('0x9e'),function(_0x2c2f7a){console['log'](a22_0x542f('0x9f'));console[a22_0x542f('0x3a')](a22_0x542f('0xa0')+_0x2c2f7a[a22_0x542f('0xa1')]);console[a22_0x542f('0x3a')]('size:\x20'+_0x2c2f7a[a22_0x542f('0xa2')]);});_0x4aa94a['on'](a22_0x542f('0xa3'),function complete(_0x1e6439){'use strict';console[a22_0x542f('0x3a')]('filename:\x20'+_0x1e6439[a22_0x542f('0xa1')]+a22_0x542f('0xa4'));});_0x4aa94a['on']('end',function(){console[a22_0x542f('0x3a')](a22_0x542f('0xa5'));this[a22_0x542f('0x55')](_0x53584f)[a22_0x542f('0x39')](function(_0x100541){if(_0x100541){this[a22_0x542f('0x1f')]++;}this[a22_0x542f('0x48')]();}['bind'](this));}[a22_0x542f('0x33')](this));_0x4aa94a[a22_0x542f('0x7e')](fs['createWriteStream'](_0x53584f));}[a22_0x542f('0x4a')](){console[a22_0x542f('0x3a')]('Finishing');if(this['failDownloadFiles'][a22_0x542f('0x43')]==0x0){fs[a22_0x542f('0xa6')](this['playListFile'],JSON[a22_0x542f('0x36')](this[a22_0x542f('0x21')]));let _0xa8b292=a22_0x542f('0xa7')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x523a47 in this[a22_0x542f('0x20')]){const _0x1b305e=this[a22_0x542f('0x20')][_0x523a47][a22_0x542f('0x4b')];const _0x15df11=this[a22_0x542f('0x20')][_0x523a47]['media_type'];const _0x53841e=_0x1b305e[a22_0x542f('0x4d')](_0x1b305e[a22_0x542f('0xa8')]('/')+0x1);let _0x46320f=_0x53841e[a22_0x542f('0x4e')]('.')[a22_0x542f('0x4f')](0x0,-0x1)[a22_0x542f('0x50')]('.');if(_0x15df11==a22_0x542f('0x51')){_0x46320f=_0x1b305e;}_0xa8b292+=a22_0x542f('0xa9')+_0x46320f+a22_0x542f('0x53')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x542f('0x19')]);fsExtra['copySync'](this[a22_0x542f('0x17')],this[a22_0x542f('0x19')]);fs[a22_0x542f('0xa6')](this[a22_0x542f('0x1d')],_0xa8b292);fsExtra[a22_0x542f('0xaa')](this[a22_0x542f('0x17')]);console[a22_0x542f('0x3a')]('Finished');try{const _0x32591b=spawn(a22_0x542f('0xab'),[a22_0x542f('0xac'),this[a22_0x542f('0x1d')]]);}catch(_0x4c760f){}}else{console['log'](a22_0x542f('0xad'));this[a22_0x542f('0x1f')]=0x0;setTimeout(function(){this[a22_0x542f('0x48')]();}[a22_0x542f('0x33')](this),0x1388);}}}exports[a22_0x542f('0xae')]=SyncPlaylistsService;