var a26_0x163e=['url','http','request','request-progress','child_process','spawn','exec','is-image','string-template','uuid/v4','config.json','package.json','url-exists','mt-files-downloader','mediaFolder','tempFolder','filesFolder','files/','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','httpClientService','playerService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','playlist','then','stringify','deviceUuid','networkInterfaces','version','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','writeFileSync','getCurrentlyPlayingVideo','label','reportStatus','post','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','hasPlayListChanged','downloadFiles','length','download','reloadMediaList','forceReload','emptyDirSync','existsSync','playListFile','removeSync','toString','\x20of\x20','media_type','substring','lastIndexOf','split','slice','join','youtube_single','image','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','track','media','@type','Video','mediainfo\x20check:','includes','indexOf','splice','start','push','start:\x20','error','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','host','get','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','pipe','err:\x20','finish','Downloaded\x20','Redirect\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','video','ffmpeg','1/2','-loop','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','stdout','Converting\x20','stderr','data','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','outFileName:\x20','--format=18','--no-check-certificate','info','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','createWriteStream','finishProcess','Finishing','this.playListFile:\x20','#EXTCPlayListM3U::M3U','path','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','kodiCommandClient','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','updateSettings','rss','header_active','enableClock','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','setRss','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','feed','Builder','buildObject','RefreshRSS()','lookandfeel.enablerssfeeds','setRss:','Settings.SetSettingValue','enableClock:\x20','kodi-send\x20--action=\x22','jsonrpcClient\x20data','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','apply','__esModule','../infrastructure/HttpClientService','./playerService'];(function(_0x1e7be3,_0x2461dc){var _0x5a3cbc=function(_0x5308ee){while(--_0x5308ee){_0x1e7be3['push'](_0x1e7be3['shift']());}};_0x5a3cbc(++_0x2461dc);}(a26_0x163e,0xe4));var a26_0x25f0=function(_0x5de7a5,_0x2c7d6f){_0x5de7a5=_0x5de7a5-0x0;var _0x4da80e=a26_0x163e[_0x5de7a5];return _0x4da80e;};'use strict';var __awaiter=this&&this[a26_0x25f0('0x0')]||function(_0x377a55,_0x1e3cd2,_0x5468cb,_0x5dbf25){function _0x4beaf8(_0xb364b5){return _0xb364b5 instanceof _0x5468cb?_0xb364b5:new _0x5468cb(function(_0x5cc232){_0x5cc232(_0xb364b5);});}return new(_0x5468cb||(_0x5468cb=Promise))(function(_0x5f05da,_0x1834d8){function _0x22a6b0(_0x529e9e){try{_0x34dfc2(_0x5dbf25[a26_0x25f0('0x1')](_0x529e9e));}catch(_0x3325b7){_0x1834d8(_0x3325b7);}}function _0x22fc62(_0x360603){try{_0x34dfc2(_0x5dbf25[a26_0x25f0('0x2')](_0x360603));}catch(_0x1b5d42){_0x1834d8(_0x1b5d42);}}function _0x34dfc2(_0x672fab){_0x672fab[a26_0x25f0('0x3')]?_0x5f05da(_0x672fab[a26_0x25f0('0x4')]):_0x4beaf8(_0x672fab[a26_0x25f0('0x4')])['then'](_0x22a6b0,_0x22fc62);}_0x34dfc2((_0x5dbf25=_0x5dbf25[a26_0x25f0('0x5')](_0x377a55,_0x1e3cd2||[]))[a26_0x25f0('0x1')]());});};Object['defineProperty'](exports,a26_0x25f0('0x6'),{'value':!![]});const HttpClientService_1=require(a26_0x25f0('0x7'));const playerService_1=require(a26_0x25f0('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a26_0x25f0('0x9'));const http=require(a26_0x25f0('0xa'));const fsExtra=require('fs-extra');const request=require(a26_0x25f0('0xb'));const progress=require(a26_0x25f0('0xc'));const spawn=require(a26_0x25f0('0xd'))[a26_0x25f0('0xe')];const exec=require(a26_0x25f0('0xd'))[a26_0x25f0('0xf')];const isImage=require(a26_0x25f0('0x10'));const format=require(a26_0x25f0('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a26_0x25f0('0x12'));const configFile=a26_0x25f0('0x13');const contextFile=a26_0x25f0('0x14');const urlExists=require(a26_0x25f0('0x15'));const kodi_rpc=require('node-kodi');const Downloader=require(a26_0x25f0('0x16'));class SyncPlaylistsService{constructor(){this[a26_0x25f0('0x17')]='media/';this[a26_0x25f0('0x18')]=this['mediaFolder']+'temp/';this[a26_0x25f0('0x19')]=this['mediaFolder']+a26_0x25f0('0x1a');this['playListFile']=this[a26_0x25f0('0x17')]+a26_0x25f0('0x1b');this[a26_0x25f0('0x1c')]=this[a26_0x25f0('0x19')]+a26_0x25f0('0x1d');this[a26_0x25f0('0x1e')]=0x0;this[a26_0x25f0('0x1f')]=![];this['downloadFiles']=[];this[a26_0x25f0('0x20')]=[];this[a26_0x25f0('0x21')]={};this[a26_0x25f0('0x22')]=a26_0x25f0('0x23');this[a26_0x25f0('0x24')]=a26_0x25f0('0x25');this[a26_0x25f0('0x26')]=a26_0x25f0('0x27');this['forceReload']=![];this[a26_0x25f0('0x28')]=new HttpClientService_1['HttpClientService']();this[a26_0x25f0('0x29')]=new playerService_1['PlayerService']();}[a26_0x25f0('0x2a')](){this[a26_0x25f0('0x2b')]=JSON[a26_0x25f0('0x2c')](fs[a26_0x25f0('0x2d')](configFile));this[a26_0x25f0('0x2e')]=JSON[a26_0x25f0('0x2c')](fs['readFileSync'](contextFile));this[a26_0x25f0('0x2f')]=this['config'][a26_0x25f0('0x2f')];this[a26_0x25f0('0x30')]=process['env'][a26_0x25f0('0x31')]+a26_0x25f0('0x32');this['playListServiceURL']=this[a26_0x25f0('0x30')]+a26_0x25f0('0x33');this[a26_0x25f0('0x34')]=this[a26_0x25f0('0x30')]+a26_0x25f0('0x35');this[a26_0x25f0('0x36')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a26_0x25f0('0x24')],'password':this['kodiPassword']});this[a26_0x25f0('0x37')]();this[a26_0x25f0('0x38')]();this[a26_0x25f0('0x39')]();this[a26_0x25f0('0x3a')]();this['updateSettings']();setInterval(function(){this[a26_0x25f0('0x3b')]();}[a26_0x25f0('0x3c')](this),0x2710);setInterval(function(){this[a26_0x25f0('0x38')]();}['bind'](this),0x493e0);}[a26_0x25f0('0x37')](){}[a26_0x25f0('0x38')](){this['kodi'][a26_0x25f0('0x3d')]['getItems'](0x1)[a26_0x25f0('0x3e')](function(_0xe6cc2d){const _0x280681=JSON[a26_0x25f0('0x3f')](_0xe6cc2d);const _0x1f0c1f={'player_id':this[a26_0x25f0('0x2f')],'device_uuid':this[a26_0x25f0('0x2b')][a26_0x25f0('0x40')],'network_info':JSON[a26_0x25f0('0x3f')](os[a26_0x25f0('0x41')]()),'firmware_info':JSON['stringify'](this[a26_0x25f0('0x2e')][a26_0x25f0('0x42')]),'playlist':_0x280681,'playing_item':'','status':0x0};this['httpClientService']['post'](a26_0x25f0('0x43'),_0x1f0c1f,![])[a26_0x25f0('0x3e')](function(_0x3ca015){console[a26_0x25f0('0x44')](a26_0x25f0('0x45')+Date());})[a26_0x25f0('0x46')](function(_0x238734){});console['log'](_0x1f0c1f);}[a26_0x25f0('0x3c')](this));const _0x51a9d6=this[a26_0x25f0('0x2b')][a26_0x25f0('0x40')];if(!_0x51a9d6||_0x51a9d6==''){this[a26_0x25f0('0x2b')]['deviceUuid']=uuidv4();this[a26_0x25f0('0x2b')]={'deviceUuid':this['config'][a26_0x25f0('0x40')],'playerId':this['config']['playerId']};fs[a26_0x25f0('0x47')](configFile,JSON[a26_0x25f0('0x3f')](this[a26_0x25f0('0x2b')]));}}[a26_0x25f0('0x3b')](){console[a26_0x25f0('0x44')](a26_0x25f0('0x3b'));this['kodi']['player'][a26_0x25f0('0x48')]()[a26_0x25f0('0x3e')](function(_0x1ec5e3){const _0x55d3a3=_0x1ec5e3['item'][a26_0x25f0('0x49')];this['reportStatus'](_0x55d3a3);}[a26_0x25f0('0x3c')](this))[a26_0x25f0('0x46')](function(_0x88df4){console[a26_0x25f0('0x44')](_0x88df4);this['reportStatus'](JSON[a26_0x25f0('0x3f')](_0x88df4));}[a26_0x25f0('0x3c')](this));}[a26_0x25f0('0x4a')](_0x62732f){console['log']('reportStatus\x20playingItem:\x20'+_0x62732f);const _0x5cb55d={'player_id':this[a26_0x25f0('0x2f')],'device_uuid':this[a26_0x25f0('0x2b')][a26_0x25f0('0x40')],'status':_0x62732f!=''&&_0x62732f!=null?0x1:0x0,'playing_item':_0x62732f};this[a26_0x25f0('0x28')][a26_0x25f0('0x4b')](a26_0x25f0('0x4c'),_0x5cb55d,![])[a26_0x25f0('0x3e')](function(_0x4fbb3e){console[a26_0x25f0('0x44')](a26_0x25f0('0x4d'));})[a26_0x25f0('0x46')](function(_0x2b06a4){});}[a26_0x25f0('0x39')](){fsExtra[a26_0x25f0('0x4e')](this['mediaFolder'],_0x2a2745=>{});fsExtra['ensureDir'](this[a26_0x25f0('0x18')],_0x2b6aaf=>{});fsExtra[a26_0x25f0('0x4e')](this[a26_0x25f0('0x19')],_0x294e57=>{});}['loadMediaList'](){const _0x242c4b=format(this['playListServiceURL'],this[a26_0x25f0('0x2f')]);console[a26_0x25f0('0x44')](_0x242c4b);request({'url':_0x242c4b,'json':!![]},function(_0x2c85f3,_0x46408b,_0x330f10){console[a26_0x25f0('0x44')]('loadMediaList:\x20');this[a26_0x25f0('0x21')]=_0x330f10;this[a26_0x25f0('0x1f')]=this[a26_0x25f0('0x4f')]();fsExtra['emptyDirSync'](this[a26_0x25f0('0x18')]);this['downloadFiles']=[];this[a26_0x25f0('0x20')]=[];this['currentFile']=0x0;for(const _0x542797 in _0x330f10){this['downloadFiles']['push'](_0x330f10[_0x542797]);}console[a26_0x25f0('0x44')]('Total:\x20'+this[a26_0x25f0('0x50')][a26_0x25f0('0x51')]);if(this['downloadFiles'][a26_0x25f0('0x51')]>0x0){this[a26_0x25f0('0x52')]();}}[a26_0x25f0('0x3c')](this));}[a26_0x25f0('0x53')](){this[a26_0x25f0('0x54')]=!![];if(fsExtra['existsSync'](this[a26_0x25f0('0x18')])){fsExtra[a26_0x25f0('0x55')](this[a26_0x25f0('0x18')]);}if(fsExtra[a26_0x25f0('0x56')](this['filesFolder'])){fsExtra[a26_0x25f0('0x55')](this[a26_0x25f0('0x19')]);}if(!fsExtra[a26_0x25f0('0x56')](this[a26_0x25f0('0x57')])){fsExtra[a26_0x25f0('0x58')](this[a26_0x25f0('0x57')]);}if(!fsExtra[a26_0x25f0('0x56')](this[a26_0x25f0('0x1c')])){fsExtra[a26_0x25f0('0x58')](this[a26_0x25f0('0x1c')]);}this[a26_0x25f0('0x3a')]();}[a26_0x25f0('0x4f')](){const _0x499129=JSON[a26_0x25f0('0x3f')](this[a26_0x25f0('0x21')]);try{if(!fsExtra[a26_0x25f0('0x56')](this['playListFile'])){return!![];}else{const _0x17ac4d=fsExtra[a26_0x25f0('0x2d')](this[a26_0x25f0('0x57')])[a26_0x25f0('0x59')]();if(_0x17ac4d!=_0x499129){return!![];}}}catch(_0x25bdcd){console[a26_0x25f0('0x44')](_0x25bdcd);}return![];}[a26_0x25f0('0x52')](){console[a26_0x25f0('0x44')]('this.currentFile:\x20'+this[a26_0x25f0('0x1e')]+a26_0x25f0('0x5a')+this['downloadFiles'][a26_0x25f0('0x51')]);if(this[a26_0x25f0('0x1e')]>=this[a26_0x25f0('0x50')][a26_0x25f0('0x51')]){this['finishProcess']();return;}const _0x4200be=String(this[a26_0x25f0('0x50')][this[a26_0x25f0('0x1e')]]['path']);const _0x1c7c33=this['downloadFiles'][this[a26_0x25f0('0x1e')]][a26_0x25f0('0x5b')];let _0x364333=_0x4200be[a26_0x25f0('0x5c')](_0x4200be[a26_0x25f0('0x5d')]('/')+0x1);const _0x4cf4b1=_0x364333[a26_0x25f0('0x5e')]('.')[a26_0x25f0('0x5f')](0x0,-0x1)[a26_0x25f0('0x60')]('.');let _0x17e008=this[a26_0x25f0('0x30')]+_0x4200be;const _0x2da441=_0x17e008[a26_0x25f0('0x5e')]('.')[a26_0x25f0('0x5f')](0x0,-0x1)[a26_0x25f0('0x60')]('.');if(_0x1c7c33==a26_0x25f0('0x61')){_0x364333=_0x364333+'.mp4';}else if(_0x1c7c33==a26_0x25f0('0x62')){_0x364333=_0x4cf4b1+'.mp4';_0x17e008=_0x2da441+a26_0x25f0('0x63');}console[a26_0x25f0('0x44')](a26_0x25f0('0x64'));console['log'](_0x4200be);console[a26_0x25f0('0x44')](_0x1c7c33);console[a26_0x25f0('0x44')](_0x364333);console[a26_0x25f0('0x44')](_0x17e008);console[a26_0x25f0('0x44')](_0x4cf4b1);console[a26_0x25f0('0x44')](_0x2da441);console['log'](a26_0x25f0('0x64'));if(fsExtra[a26_0x25f0('0x56')](this[a26_0x25f0('0x18')]+_0x364333)){this[a26_0x25f0('0x65')](this['tempFolder']+_0x364333)[a26_0x25f0('0x3e')](function(_0xf4b966){if(_0xf4b966){this['currentFile']++;}else{this['playlistChanged']=!![];}this[a26_0x25f0('0x52')]();}[a26_0x25f0('0x3c')](this));}else if(fsExtra[a26_0x25f0('0x56')](this['filesFolder']+_0x364333)){this[a26_0x25f0('0x65')](this[a26_0x25f0('0x19')]+_0x364333)[a26_0x25f0('0x3e')](function(_0x31cfd0){if(_0x31cfd0){fsExtra[a26_0x25f0('0x66')](this[a26_0x25f0('0x19')]+_0x364333,this[a26_0x25f0('0x18')]+_0x364333);this[a26_0x25f0('0x1e')]++;}else{this[a26_0x25f0('0x1f')]=!![];}this[a26_0x25f0('0x52')]();}[a26_0x25f0('0x3c')](this));}else{console[a26_0x25f0('0x44')](a26_0x25f0('0x67')+_0x17e008);this[a26_0x25f0('0x1f')]=!![];if(_0x1c7c33==a26_0x25f0('0x61')){this[a26_0x25f0('0x68')](_0x4200be);}else{this['downloader'](_0x17e008,_0x364333,_0x1c7c33);}}}['checkVideo'](_0x1f6c19){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x25f0('0x44')]('videoFile:\x20'+_0x1f6c19);const _0x4bcd07=yield mediainfo(_0x1f6c19)[a26_0x25f0('0x46')](_0x5e6e91=>{console[a26_0x25f0('0x44')](_0x5e6e91);fsExtra[a26_0x25f0('0x58')](_0x1f6c19);return![];});const _0x19bdcb=_0x4bcd07['media'][a26_0x25f0('0x69')][a26_0x25f0('0x51')]>0x1&&_0x4bcd07[a26_0x25f0('0x6a')][a26_0x25f0('0x69')][0x1][a26_0x25f0('0x6b')]==a26_0x25f0('0x6c');if(!_0x19bdcb){fsExtra[a26_0x25f0('0x58')](_0x1f6c19);}console['log'](a26_0x25f0('0x6d')+_0x19bdcb);return _0x19bdcb;});}['downloader'](_0x4b554a,_0x26bfc1,_0x3e3159){const _0x1a0c74=new Downloader();console['log'](_0x4b554a);console[a26_0x25f0('0x44')](_0x26bfc1);console['log'](_0x3e3159);const _0xcf32fa=_0x1a0c74[a26_0x25f0('0x52')](_0x4b554a,this[a26_0x25f0('0x18')]+_0x26bfc1);urlExists(_0x4b554a,function(_0x3c7eda,_0x59313e){if(_0x59313e){if(this[a26_0x25f0('0x20')][a26_0x25f0('0x6e')](this[a26_0x25f0('0x1e')])){const _0x319108=this[a26_0x25f0('0x20')][a26_0x25f0('0x6f')](this[a26_0x25f0('0x1e')]);if(_0x319108>-0x1){this[a26_0x25f0('0x20')][a26_0x25f0('0x70')](_0x319108,0x1);}}console['log']('downloading:\x20'+_0x4b554a);_0xcf32fa[a26_0x25f0('0x71')]();}else{if(!this[a26_0x25f0('0x20')]['includes'](this['currentFile'])){this['failDownloadFiles'][a26_0x25f0('0x72')](this[a26_0x25f0('0x1e')]);}console['log']('Error:\x20'+_0x4b554a);this[a26_0x25f0('0x1e')]++;this[a26_0x25f0('0x52')]();}}[a26_0x25f0('0x3c')](this));_0xcf32fa['on'](a26_0x25f0('0x71'),function(_0xcf32fa){console[a26_0x25f0('0x44')](a26_0x25f0('0x73')+_0x4b554a);});_0xcf32fa['on'](a26_0x25f0('0x74'),function(_0xcf32fa){console[a26_0x25f0('0x44')]('error:\x20');this[a26_0x25f0('0x52')]();}[a26_0x25f0('0x3c')](this));_0xcf32fa['on'](a26_0x25f0('0x75'),function(_0xcf32fa){console[a26_0x25f0('0x44')](a26_0x25f0('0x75'));console[a26_0x25f0('0x44')](a26_0x25f0('0x76')+_0x26bfc1);console[a26_0x25f0('0x44')](a26_0x25f0('0x77')+_0x3e3159);this[a26_0x25f0('0x65')](this[a26_0x25f0('0x18')]+_0x26bfc1)['then'](function(_0x2c78d7){if(_0x2c78d7){this[a26_0x25f0('0x1e')]++;}this[a26_0x25f0('0x52')]();}[a26_0x25f0('0x3c')](this));}['bind'](this));_0xcf32fa['on'](a26_0x25f0('0x78'),function(_0xcf32fa){console[a26_0x25f0('0x44')]('stopped');});_0xcf32fa['on'](a26_0x25f0('0x79'),function(_0xcf32fa){console['log']('destroyed');});_0xcf32fa['on'](a26_0x25f0('0x7a'),function(_0xcf32fa){console[a26_0x25f0('0x44')](a26_0x25f0('0x7a'));});}[a26_0x25f0('0x7b')](_0x355139,_0x4fc121,_0xe84592,_0x37faf7){console[a26_0x25f0('0x44')](a26_0x25f0('0x7b'));console[a26_0x25f0('0x44')](_0x355139);const _0x53ed6f=!![];let _0x54fe01=0x0;const _0x4542fb='';console[a26_0x25f0('0x44')](a26_0x25f0('0x7c')+_0x355139+a26_0x25f0('0x7d')+_0x4fc121);if(_0x54fe01){if(_0x54fe01>0x5){_0x37faf7(a26_0x25f0('0x7e'),_0x355139,_0xe84592,null);return;}}else{_0x54fe01=0x0;}const _0x15ce02=this[a26_0x25f0('0x18')]+_0x4fc121;let _0x525507;if(_0x37faf7===undefined){console[a26_0x25f0('0x44')](a26_0x25f0('0x7f')+_0x355139+'\x20to\x20'+_0x15ce02);_0x37faf7=function(_0x1d66b8,_0x368ffb){console['log'](a26_0x25f0('0x80'),_0x1d66b8,_0x368ffb);};}http['globalAgent']['maxSockets']=0x64;const _0x594902={'host':url['parse'](_0x355139)[a26_0x25f0('0x81')],'port':0x50,'path':url['parse'](_0x355139)['pathname'],'agent':![]};const _0x59bb5a=http[a26_0x25f0('0x82')](_0x594902,function(_0x1f5c2c){let _0x3615c3=0x0;let _0x536299=0x0;function _0x383c6b(){if(_0x3615c3===undefined){console['log'](_0x4fc121+'\x20Progress:\x20unknown\x09'+_0x536299+'/'+'?');}const _0x26db83=_0x536299/_0x3615c3*0x64;console['log'](_0x4fc121+a26_0x25f0('0x83')+_0x26db83+'%\x09'+_0x536299+'/'+_0x3615c3);}console['log'](_0x4fc121+'\x20'+_0x1f5c2c[a26_0x25f0('0x84')]);switch(_0x1f5c2c[a26_0x25f0('0x84')]){case 0xc8:_0x3615c3=_0x1f5c2c[a26_0x25f0('0x85')][a26_0x25f0('0x86')]||_0x4542fb;fs[a26_0x25f0('0x87')](_0x15ce02,function(_0xd10e7d,_0x32d0a2){if(!_0xd10e7d){console[a26_0x25f0('0x44')](a26_0x25f0('0x88')+_0x15ce02);if(_0x32d0a2[a26_0x25f0('0x89')]==_0x3615c3){console[a26_0x25f0('0x44')](a26_0x25f0('0x8a')+_0x3615c3+')');console[a26_0x25f0('0x44')](a26_0x25f0('0x8b'));}else{console['log'](a26_0x25f0('0x8c')+_0x32d0a2['size']+')\x20vs\x20New('+_0x3615c3+')');}}_0x525507=fs['createWriteStream'](_0x15ce02);_0x1f5c2c[a26_0x25f0('0x8d')](_0x525507);_0x1f5c2c['on']('data',function(_0x3ece7e){_0x536299+=_0x3ece7e[a26_0x25f0('0x51')];_0x383c6b();});_0x59bb5a['on'](a26_0x25f0('0x74'),function(_0xd10e7d){console[a26_0x25f0('0x44')](a26_0x25f0('0x8e'));console[a26_0x25f0('0x44')](_0xd10e7d);});_0x525507['on'](a26_0x25f0('0x8f'),function(){console[a26_0x25f0('0x44')](a26_0x25f0('0x90')+_0x355139+a26_0x25f0('0x7d')+_0x4fc121);_0x37faf7(null,_0x4fc121,_0xe84592,_0x4fc121);}[a26_0x25f0('0x3c')](this));});break;case 0x12e:const _0x15790b=_0x1f5c2c['headers']['location'];console['log'](a26_0x25f0('0x91')+_0x355139+a26_0x25f0('0x7d')+_0x15790b);if(_0x54fe01<0x5){this[a26_0x25f0('0x7b')](_0x15790b,_0x4fc121,_0x37faf7,_0x54fe01++);}else{console[a26_0x25f0('0x74')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x355139+'.');_0x37faf7(a26_0x25f0('0x92'),null,null,null);}return;case 0x194:console[a26_0x25f0('0x44')]('File\x20Not\x20Found\x20'+_0x355139);default:console[a26_0x25f0('0x44')](a26_0x25f0('0x93')+_0x355139+a26_0x25f0('0x94')+_0x1f5c2c['statusCode']);_0x59bb5a[a26_0x25f0('0x95')]();_0x37faf7(_0x1f5c2c[a26_0x25f0('0x84')],null,null,null);return;}})['on'](a26_0x25f0('0x74'),function(_0x18f287){console[a26_0x25f0('0x44')](a26_0x25f0('0x96')+_0x355139+'\x20'+_0x18f287[a26_0x25f0('0x97')]);_0x37faf7(_0x18f287,null,null,null);});}[a26_0x25f0('0x98')](_0x134ca8,_0x3bd926,_0x20dd41,_0x323116){console[a26_0x25f0('0x44')](a26_0x25f0('0x98'));console['log'](_0x134ca8);console[a26_0x25f0('0x44')](_0x3bd926);console[a26_0x25f0('0x44')](_0x20dd41);console[a26_0x25f0('0x44')](_0x323116);if(_0x20dd41=='image'){const _0x30db19=this[a26_0x25f0('0x50')][this['currentFile']][a26_0x25f0('0x99')]!=null?this[a26_0x25f0('0x50')][this['currentFile']][a26_0x25f0('0x99')]:0x1e;this[a26_0x25f0('0x9a')](_0x323116,_0x30db19);}else if(_0x20dd41=='video'){if(_0x134ca8==null&&_0x3bd926!=''){this[a26_0x25f0('0x1e')]++;}this[a26_0x25f0('0x52')]();}console['log'](this['currentFile']);}[a26_0x25f0('0x9b')](_0x7d8f56,_0x2d8ecf,_0x2e77df){progress(request(_0x7d8f56),{})['on'](a26_0x25f0('0x9c'),function(_0x3ca231){console[a26_0x25f0('0x44')](_0x3ca231);})['on'](a26_0x25f0('0x74'),function(_0x286045){console['log'](a26_0x25f0('0x9d'));this[a26_0x25f0('0x52')]();})['on'](a26_0x25f0('0x75'),function(){console['log'](a26_0x25f0('0x76')+_0x2d8ecf);console[a26_0x25f0('0x44')](a26_0x25f0('0x77')+_0x2e77df);if(_0x2e77df==a26_0x25f0('0x62')){const _0x13547a=this[a26_0x25f0('0x50')][this['currentFile']][a26_0x25f0('0x99')]!=null?this[a26_0x25f0('0x50')][this['currentFile']][a26_0x25f0('0x99')]:0x1e;this['createImageVideo'](_0x2d8ecf,_0x13547a);}else if(_0x2e77df==a26_0x25f0('0x9e')){this[a26_0x25f0('0x1e')]++;this[a26_0x25f0('0x52')]();}}[a26_0x25f0('0x3c')](this))['pipe'](fs['createWriteStream'](this['tempFolder']+_0x2d8ecf));}[a26_0x25f0('0x9a')](_0x4da4e2,_0x489f8a=0x1e){const _0xaf2268=this['tempFolder']+_0x4da4e2;console[a26_0x25f0('0x44')](_0xaf2268);console[a26_0x25f0('0x44')](_0x4da4e2);const _0x392d24=_0x4da4e2['split']('.')[a26_0x25f0('0x5f')](0x0,-0x1)[a26_0x25f0('0x60')]('.');const _0x34e0c6=a26_0x25f0('0x9f');const _0xa0dc99=['-y','-r',a26_0x25f0('0xa0'),a26_0x25f0('0xa1'),'1','-pattern_type',a26_0x25f0('0xa2'),'-i',_0xaf2268,'-t',String(_0x489f8a),a26_0x25f0('0xa3'),a26_0x25f0('0xa4'),a26_0x25f0('0xa5'),a26_0x25f0('0xa6'),'-r','25',a26_0x25f0('0xa7'),'scale=1920:1080',this[a26_0x25f0('0x18')]+_0x392d24+'.mp4'];const _0x4891e1=spawn(_0x34e0c6,_0xa0dc99);_0x4891e1[a26_0x25f0('0xa8')]['on']('data',function(_0x4747be){console[a26_0x25f0('0x44')](a26_0x25f0('0xa9')+_0xaf2268);});_0x4891e1[a26_0x25f0('0xaa')]['on'](a26_0x25f0('0xab'),function(_0x4e91d5){console[a26_0x25f0('0x44')](a26_0x25f0('0xac')+_0x4e91d5);}['bind'](this));_0x4891e1['on'](a26_0x25f0('0xad'),function(){console['log'](a26_0x25f0('0xae'));this[a26_0x25f0('0x1e')]++;this[a26_0x25f0('0x52')]();}['bind'](this));}[a26_0x25f0('0x68')](_0x2d833d){const _0xef029f=this[a26_0x25f0('0x18')]+'/'+_0x2d833d+a26_0x25f0('0x63');const _0x1e4792=a26_0x25f0('0xaf')+_0x2d833d;console[a26_0x25f0('0x44')]('youtubeURL:\x20'+_0x1e4792);console[a26_0x25f0('0x44')](a26_0x25f0('0xb0')+_0xef029f);const _0x335208=youtubedl(_0x1e4792,[a26_0x25f0('0xb1'),a26_0x25f0('0xb2')],{'cwd':__dirname});_0x335208['on'](a26_0x25f0('0xb3'),function(_0x2a2c98){console['log']('Download\x20started');console[a26_0x25f0('0x44')]('filename:\x20'+_0x2a2c98[a26_0x25f0('0xb4')]);console[a26_0x25f0('0x44')]('size:\x20'+_0x2a2c98[a26_0x25f0('0x89')]);});_0x335208['on']('complete',function complete(_0x4be65b){'use strict';console[a26_0x25f0('0x44')]('filename:\x20'+_0x4be65b[a26_0x25f0('0xb4')]+a26_0x25f0('0xb5'));});_0x335208['on'](a26_0x25f0('0x75'),function(){console[a26_0x25f0('0x44')](a26_0x25f0('0xb6'));this['checkVideo'](_0xef029f)['then'](function(_0x1ec54b){if(_0x1ec54b){this[a26_0x25f0('0x1e')]++;}this[a26_0x25f0('0x52')]();}['bind'](this));}[a26_0x25f0('0x3c')](this));_0x335208[a26_0x25f0('0x8d')](fs[a26_0x25f0('0xb7')](_0xef029f));}[a26_0x25f0('0xb8')](){console['log'](a26_0x25f0('0xb9'));if(this[a26_0x25f0('0x1f')]){if(this[a26_0x25f0('0x20')]['length']==0x0){console[a26_0x25f0('0x44')](a26_0x25f0('0xba')+this[a26_0x25f0('0x57')]);fs['writeFileSync'](this[a26_0x25f0('0x57')],JSON[a26_0x25f0('0x3f')](this['newPlayList']));let _0x29c76a=a26_0x25f0('0xbb')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x5025ec in this[a26_0x25f0('0x50')]){const _0x135d14=this[a26_0x25f0('0x50')][_0x5025ec][a26_0x25f0('0xbc')];const _0x83bdb6=this[a26_0x25f0('0x50')][_0x5025ec][a26_0x25f0('0x5b')];const _0x1fd14c=_0x135d14[a26_0x25f0('0x5c')](_0x135d14[a26_0x25f0('0x5d')]('/')+0x1);let _0x4e0d07=_0x1fd14c['split']('.')[a26_0x25f0('0x5f')](0x0,-0x1)[a26_0x25f0('0x60')]('.');if(_0x83bdb6==a26_0x25f0('0x61')){_0x4e0d07=_0x135d14;}_0x29c76a+=a26_0x25f0('0xbd')+_0x4e0d07+a26_0x25f0('0x63')+'\x0d\x0a';console[a26_0x25f0('0x44')]('m3uContent:\x20'+_0x29c76a);}console[a26_0x25f0('0x44')](a26_0x25f0('0xbe')+_0x29c76a);fsExtra['emptyDirSync'](this['filesFolder']);console[a26_0x25f0('0x44')](a26_0x25f0('0xbf')+this[a26_0x25f0('0x18')]);fsExtra[a26_0x25f0('0x66')](this['tempFolder'],this['filesFolder']);console[a26_0x25f0('0x44')](a26_0x25f0('0xc0')+this[a26_0x25f0('0x1c')]);fsExtra[a26_0x25f0('0x47')](this[a26_0x25f0('0x1c')],_0x29c76a);console[a26_0x25f0('0x44')](a26_0x25f0('0xc1')+this[a26_0x25f0('0x18')]);fsExtra[a26_0x25f0('0x55')](this[a26_0x25f0('0x18')]);console['log'](a26_0x25f0('0xc2'));this[a26_0x25f0('0xc3')]();}else{console['log'](a26_0x25f0('0xc4'));this[a26_0x25f0('0x1e')]=0x0;setTimeout(function(){this[a26_0x25f0('0x52')]();}[a26_0x25f0('0x3c')](this),0x1388);}}else{console[a26_0x25f0('0x44')](a26_0x25f0('0xc5'));}}['refreshPlayer'](){this[a26_0x25f0('0xc6')](a26_0x25f0('0xc7'),{'playlistid':0x1},function(_0x2e322d){console[a26_0x25f0('0x44')](a26_0x25f0('0xc8'));console[a26_0x25f0('0x44')](_0x2e322d);this[a26_0x25f0('0xc6')](a26_0x25f0('0xc9'),{'item':{'file':a26_0x25f0('0xca')},'playlistid':0x1},function(_0x2e322d){console[a26_0x25f0('0x44')](a26_0x25f0('0xcb'));console[a26_0x25f0('0x44')](_0x2e322d);this['jsonrpcClient']('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x2e322d){console[a26_0x25f0('0x44')](a26_0x25f0('0xcc'));console[a26_0x25f0('0x44')](_0x2e322d);this[a26_0x25f0('0xcd')](a26_0x25f0('0xce'));}['bind'](this));}['bind'](this));}[a26_0x25f0('0x3c')](this));}['reboot'](){console[a26_0x25f0('0x44')](a26_0x25f0('0xcf'));exec(a26_0x25f0('0xd0'),function(_0x4d5147){console[a26_0x25f0('0x44')](_0x4d5147);});}[a26_0x25f0('0xd1')](){const _0x3fda1c=format(this['playerServiceURL'],this['playerId']);console[a26_0x25f0('0x44')](_0x3fda1c);request({'url':_0x3fda1c,'json':!![]},function(_0x2c1cf3,_0x5d233f,_0x5e7973){if(_0x5e7973[a26_0x25f0('0x51')]>0x0){const _0x590b24=_0x5e7973[0x0];const _0x4ea402=_0x590b24[a26_0x25f0('0xd2')];const _0x416be2=_0x590b24[a26_0x25f0('0xd3')]==0x1;this['setRss'](_0x4ea402);this[a26_0x25f0('0xd4')](_0x416be2);this[a26_0x25f0('0x38')]();}console[a26_0x25f0('0x44')](_0x5e7973);}[a26_0x25f0('0x3c')](this));}[a26_0x25f0('0xd5')](){this[a26_0x25f0('0xcd')](a26_0x25f0('0xd6'));}[a26_0x25f0('0xd7')](){this[a26_0x25f0('0xcd')](a26_0x25f0('0xd8'));}[a26_0x25f0('0xd9')](_0x49bf1f){const _0x21131c=_0x49bf1f!=null&&_0x49bf1f!='';const _0x35de2e='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra['existsSync'](_0x35de2e)){const _0x7314a5=fsExtra[a26_0x25f0('0x2d')](_0x35de2e);console['log'](a26_0x25f0('0xda')+_0x7314a5);const _0x42f1cf=require(a26_0x25f0('0xdb'));const _0x2c906e=_0x42f1cf[a26_0x25f0('0xdc')];_0x2c906e(_0x7314a5,function(_0x44edda,_0x571cfc){console[a26_0x25f0('0x44')](a26_0x25f0('0xdd'),_0x44edda);console['log'](a26_0x25f0('0xde'),_0x571cfc);if(!_0x49bf1f||_0x49bf1f==null||_0x49bf1f==''){_0x49bf1f=a26_0x25f0('0xdf');}_0x571cfc[a26_0x25f0('0xe0')]['set'][0x0][a26_0x25f0('0xe1')][0x0]['_']=_0x49bf1f;const _0x90d09c=new _0x42f1cf[(a26_0x25f0('0xe2'))]();const _0x441f79=_0x90d09c[a26_0x25f0('0xe3')](_0x571cfc);console[a26_0x25f0('0x44')]('xml:\x20%j',_0x441f79);fsExtra[a26_0x25f0('0x47')](_0x35de2e,_0x441f79);});this['kodiCommandClient'](a26_0x25f0('0xe4'));this['jsonrpcClient']('Settings.SetSettingValue',{'setting':a26_0x25f0('0xe5'),'value':_0x21131c},function(_0x38c561){console[a26_0x25f0('0x44')](a26_0x25f0('0xe6'));console[a26_0x25f0('0x44')](_0x38c561);}[a26_0x25f0('0x3c')](this));}}[a26_0x25f0('0xd4')](_0x1f8e99){this[a26_0x25f0('0xc6')](a26_0x25f0('0xe7'),{'setting':'videoplayer.usedisplayasclock','value':_0x1f8e99},function(_0x3d2e65){console[a26_0x25f0('0x44')](a26_0x25f0('0xe8'));console[a26_0x25f0('0x44')](_0x3d2e65);}['bind'](this));}[a26_0x25f0('0xcd')](_0x2a0a77){exec(a26_0x25f0('0xe9')+_0x2a0a77+'\x22',function(_0x39c7e6){console[a26_0x25f0('0x44')](_0x39c7e6);});}[a26_0x25f0('0xc6')](_0x5cb460,_0x5888fd,_0x50adc1){const _0x4d81e9={'jsonrpc':'2.0','method':_0x5cb460,'params':_0x5888fd,'id':0x1};const _0x5ae402={'user':this['kodiUser'],'pass':this[a26_0x25f0('0x26')]};console[a26_0x25f0('0x44')](a26_0x25f0('0xea'),_0x4d81e9);console['log']('jsonrpcClient\x20options',_0x5ae402);this['httpClientService'][a26_0x25f0('0x4b')](this[a26_0x25f0('0x22')]+a26_0x25f0('0xeb'),_0x4d81e9,![],_0x5ae402)[a26_0x25f0('0x3e')](function(_0x4e2441){_0x50adc1(_0x4e2441);})[a26_0x25f0('0x46')](function(_0x3732ca){});}}exports[a26_0x25f0('0xec')]=SyncPlaylistsService;