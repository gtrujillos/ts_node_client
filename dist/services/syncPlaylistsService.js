var a22_0x3773=['newPlayList','HttpClientService','init','config','readFileSync','parse','playerId','baseURL','env','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','http://192.168.0.114','reportStatus','checkDependencies','registerClient','deviceUuid','stringify','networkInterfaces','context','httpClientService','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','catch','log','getCurrentlyPlayingVideo','item','label','label:','checkFolders','ensureDir','loadMediaList','emptyDirSync','downloadFiles','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','hasPlayListChanged','error','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','image','.mp4','**********+','checkVideo','bind','copySync','Downloading:\x20','downloader','videoFile:\x20','track','media','@type','mediainfo\x20check:','includes','splice','downloading:\x20','start','Error:\x20','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','maxSockets','pathname','get','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','Error\x20downloading\x20file','ffmpeg','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','stderr','stderr:\x20','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','writeFileSync','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','m3uFile','Finished','Playlist\x20incomplete,\x20retry.','__awaiter','next','throw','done','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','child_process','is-image','string-template','uuid/v4','config.json','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','lulo_playlist.m3u','currentFile','failDownloadFiles'];(function(_0x30201b,_0x39a720){var _0x5cef92=function(_0x2bece0){while(--_0x2bece0){_0x30201b['push'](_0x30201b['shift']());}};_0x5cef92(++_0x39a720);}(a22_0x3773,0x95));var a22_0x2a2e=function(_0xf4232c,_0xff74e3){_0xf4232c=_0xf4232c-0x0;var _0x374345=a22_0x3773[_0xf4232c];return _0x374345;};'use strict';var __awaiter=this&&this[a22_0x2a2e('0x0')]||function(_0x2be6b0,_0x2d24d8,_0x41cbed,_0x8964e7){return new(_0x41cbed||(_0x41cbed=Promise))(function(_0x23e75b,_0x80d402){function _0x33722d(_0x42dba8){try{_0x35ef84(_0x8964e7[a22_0x2a2e('0x1')](_0x42dba8));}catch(_0x290b89){_0x80d402(_0x290b89);}}function _0x5580f8(_0x39e8ce){try{_0x35ef84(_0x8964e7[a22_0x2a2e('0x2')](_0x39e8ce));}catch(_0x1f8479){_0x80d402(_0x1f8479);}}function _0x35ef84(_0x45ce36){_0x45ce36[a22_0x2a2e('0x3')]?_0x23e75b(_0x45ce36[a22_0x2a2e('0x4')]):new _0x41cbed(function(_0x23e75b){_0x23e75b(_0x45ce36['value']);})[a22_0x2a2e('0x5')](_0x33722d,_0x5580f8);}_0x35ef84((_0x8964e7=_0x8964e7[a22_0x2a2e('0x6')](_0x2be6b0,_0x2d24d8||[]))['next']());});};Object[a22_0x2a2e('0x7')](exports,a22_0x2a2e('0x8'),{'value':!![]});const HttpClientService_1=require(a22_0x2a2e('0x9'));const mediainfo=require(a22_0x2a2e('0xa'));const fs=require('fs');const url=require(a22_0x2a2e('0xb'));const http=require(a22_0x2a2e('0xc'));const fsExtra=require(a22_0x2a2e('0xd'));const request=require(a22_0x2a2e('0xe'));const progress=require('request-progress');const spawn=require(a22_0x2a2e('0xf'))['spawn'];const isImage=require(a22_0x2a2e('0x10'));const format=require(a22_0x2a2e('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x2a2e('0x12'));const configFile=a22_0x2a2e('0x13');const contextFile='context.json';const urlExists=require('url-exists');const kodi_rpc=require('node-kodi');const Downloader=require(a22_0x2a2e('0x14'));class SyncPlaylistsService{constructor(){this[a22_0x2a2e('0x15')]=a22_0x2a2e('0x16');this[a22_0x2a2e('0x17')]=this[a22_0x2a2e('0x15')]+a22_0x2a2e('0x18');this[a22_0x2a2e('0x19')]=this[a22_0x2a2e('0x15')]+a22_0x2a2e('0x1a');this[a22_0x2a2e('0x1b')]=this['mediaFolder']+'playlist.txt';this['m3uFile']=this[a22_0x2a2e('0x19')]+a22_0x2a2e('0x1c');this[a22_0x2a2e('0x1d')]=0x0;this['downloadFiles']=[];this[a22_0x2a2e('0x1e')]=[];this[a22_0x2a2e('0x1f')]={};this['httpClientService']=new HttpClientService_1[(a22_0x2a2e('0x20'))]();}[a22_0x2a2e('0x21')](){this[a22_0x2a2e('0x22')]=JSON['parse'](fs[a22_0x2a2e('0x23')](configFile));this['context']=JSON[a22_0x2a2e('0x24')](fs['readFileSync'](contextFile));this[a22_0x2a2e('0x25')]=this[a22_0x2a2e('0x22')][a22_0x2a2e('0x25')];this[a22_0x2a2e('0x26')]=process[a22_0x2a2e('0x27')]['WEB_SERVICE_URL']+a22_0x2a2e('0x28');this[a22_0x2a2e('0x29')]=this[a22_0x2a2e('0x26')]+a22_0x2a2e('0x2a');this[a22_0x2a2e('0x2b')]=new kodi_rpc({'url':a22_0x2a2e('0x2c')});setInterval(function(){this[a22_0x2a2e('0x2d')]();}['bind'](this),0x1388);}[a22_0x2a2e('0x2e')](){}[a22_0x2a2e('0x2f')](){const _0x46748c=this[a22_0x2a2e('0x22')]['deviceUuid'];if(!_0x46748c||_0x46748c==''){this[a22_0x2a2e('0x22')]['deviceUuid']=uuidv4();this['config']={'deviceUuid':this['config'][a22_0x2a2e('0x30')],'playerId':this['config'][a22_0x2a2e('0x25')]};fs['writeFileSync'](configFile,JSON[a22_0x2a2e('0x31')](this[a22_0x2a2e('0x22')]));}const _0x57dc71={'player_id':this['playerId'],'device_uuid':this[a22_0x2a2e('0x22')][a22_0x2a2e('0x30')],'network_info':JSON[a22_0x2a2e('0x31')](os[a22_0x2a2e('0x32')]()),'firmware_info':JSON[a22_0x2a2e('0x31')](this[a22_0x2a2e('0x33')]),'status':0x1};this[a22_0x2a2e('0x34')][a22_0x2a2e('0x35')](a22_0x2a2e('0x36'),_0x57dc71,![])[a22_0x2a2e('0x5')](function(_0x4ddb92){console['log'](a22_0x2a2e('0x37')+Date());})[a22_0x2a2e('0x38')](function(_0x292456){});}[a22_0x2a2e('0x2d')](){console[a22_0x2a2e('0x39')]('reportStatus');this[a22_0x2a2e('0x2b')]['player'][a22_0x2a2e('0x3a')]()[a22_0x2a2e('0x5')](function(_0x47aba2){const _0x5f1874=_0x47aba2[a22_0x2a2e('0x3b')][a22_0x2a2e('0x3c')];console[a22_0x2a2e('0x39')](a22_0x2a2e('0x3d')+_0x5f1874);});}[a22_0x2a2e('0x3e')](){fsExtra[a22_0x2a2e('0x3f')](this[a22_0x2a2e('0x15')],_0x546db6=>{});fsExtra[a22_0x2a2e('0x3f')](this[a22_0x2a2e('0x17')],_0xa613c0=>{});fsExtra[a22_0x2a2e('0x3f')](this[a22_0x2a2e('0x19')],_0x42c8b3=>{});}[a22_0x2a2e('0x40')](){const _0x169625=format(this[a22_0x2a2e('0x29')],this['playerId']);console['log'](_0x169625);request({'url':_0x169625,'json':!![]},function(_0x54007b,_0x29f028,_0x2295bd){this['newPlayList']=_0x2295bd;fsExtra[a22_0x2a2e('0x41')](this[a22_0x2a2e('0x17')]);this['downloadFiles']=[];this['failDownloadFiles']=[];this[a22_0x2a2e('0x1d')]=0x0;for(const _0x4aa8f4 in _0x2295bd){this[a22_0x2a2e('0x42')][a22_0x2a2e('0x43')](_0x2295bd[_0x4aa8f4]);}console['log'](a22_0x2a2e('0x44')+this[a22_0x2a2e('0x42')][a22_0x2a2e('0x45')]);if(this[a22_0x2a2e('0x42')][a22_0x2a2e('0x45')]>0x0){this[a22_0x2a2e('0x46')]();}}['bind'](this));}[a22_0x2a2e('0x47')](){if(fsExtra[a22_0x2a2e('0x48')](this[a22_0x2a2e('0x1b')])){fsExtra[a22_0x2a2e('0x49')](this[a22_0x2a2e('0x1b')]);}this[a22_0x2a2e('0x40')]();}[a22_0x2a2e('0x4a')](){const _0x3e4437=JSON['stringify'](this[a22_0x2a2e('0x1f')]);try{if(!fs[a22_0x2a2e('0x48')](this[a22_0x2a2e('0x1b')])){return!![];}else{const _0x5dab60=fs[a22_0x2a2e('0x23')](this[a22_0x2a2e('0x1b')])['toString']();if(_0x5dab60!=_0x3e4437){return!![];}}}catch(_0x15ef3c){console[a22_0x2a2e('0x4b')](_0x15ef3c);}return![];}[a22_0x2a2e('0x46')](){console[a22_0x2a2e('0x39')]('this.currentFile:\x20'+this[a22_0x2a2e('0x1d')]+'\x20of\x20'+this[a22_0x2a2e('0x42')][a22_0x2a2e('0x45')]);if(this[a22_0x2a2e('0x1d')]>=this[a22_0x2a2e('0x42')][a22_0x2a2e('0x45')]){this[a22_0x2a2e('0x4c')]();return;}const _0x562d28=String(this[a22_0x2a2e('0x42')][this[a22_0x2a2e('0x1d')]][a22_0x2a2e('0x4d')]);const _0x526a4e=this['downloadFiles'][this['currentFile']][a22_0x2a2e('0x4e')];let _0x2a0e48=_0x562d28[a22_0x2a2e('0x4f')](_0x562d28[a22_0x2a2e('0x50')]('/')+0x1);const _0x429bca=_0x2a0e48[a22_0x2a2e('0x51')]('.')[a22_0x2a2e('0x52')](0x0,-0x1)[a22_0x2a2e('0x53')]('.');let _0x4fefc3=this[a22_0x2a2e('0x26')]+_0x562d28;const _0x36a4a3=_0x4fefc3[a22_0x2a2e('0x51')]('.')[a22_0x2a2e('0x52')](0x0,-0x1)[a22_0x2a2e('0x53')]('.');if(_0x526a4e==a22_0x2a2e('0x54')){_0x2a0e48=_0x2a0e48+'.mp4';}else if(_0x526a4e==a22_0x2a2e('0x55')){_0x2a0e48=_0x429bca+a22_0x2a2e('0x56');_0x4fefc3=_0x36a4a3+a22_0x2a2e('0x56');}console['log'](a22_0x2a2e('0x57'));console[a22_0x2a2e('0x39')](_0x562d28);console['log'](_0x526a4e);console['log'](_0x2a0e48);console[a22_0x2a2e('0x39')](_0x4fefc3);console[a22_0x2a2e('0x39')](_0x429bca);console[a22_0x2a2e('0x39')](_0x36a4a3);console[a22_0x2a2e('0x39')](a22_0x2a2e('0x57'));if(fsExtra[a22_0x2a2e('0x48')](this[a22_0x2a2e('0x17')]+_0x2a0e48)){this[a22_0x2a2e('0x58')](this[a22_0x2a2e('0x17')]+_0x2a0e48)[a22_0x2a2e('0x5')](function(_0x3c402a){if(_0x3c402a){this[a22_0x2a2e('0x1d')]++;}this[a22_0x2a2e('0x46')]();}[a22_0x2a2e('0x59')](this));}else if(fsExtra[a22_0x2a2e('0x48')](this['filesFolder']+_0x2a0e48)){this[a22_0x2a2e('0x58')](this[a22_0x2a2e('0x19')]+_0x2a0e48)[a22_0x2a2e('0x5')](function(_0x1e6dd2){if(_0x1e6dd2){fsExtra[a22_0x2a2e('0x5a')](this[a22_0x2a2e('0x19')]+_0x2a0e48,this[a22_0x2a2e('0x17')]+_0x2a0e48);this[a22_0x2a2e('0x1d')]++;}this[a22_0x2a2e('0x46')]();}[a22_0x2a2e('0x59')](this));}else{console[a22_0x2a2e('0x39')](a22_0x2a2e('0x5b')+_0x4fefc3);if(_0x526a4e=='youtube_single'){this['downloadYouTube'](_0x562d28);}else{this[a22_0x2a2e('0x5c')](_0x4fefc3,_0x2a0e48,_0x526a4e);}}}[a22_0x2a2e('0x58')](_0x566369){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x5d')+_0x566369);const _0x5171d4=yield mediainfo(_0x566369)[a22_0x2a2e('0x38')](_0x9b40b8=>console[a22_0x2a2e('0x39')](_0x9b40b8));const _0x40aa8d=_0x5171d4['media'][a22_0x2a2e('0x5e')][a22_0x2a2e('0x45')]>0x1&&_0x5171d4[a22_0x2a2e('0x5f')][a22_0x2a2e('0x5e')][0x1][a22_0x2a2e('0x60')]=='Video';if(!_0x40aa8d){fsExtra[a22_0x2a2e('0x49')](_0x566369);}console['log'](a22_0x2a2e('0x61')+_0x40aa8d);return _0x40aa8d;});}[a22_0x2a2e('0x5c')](_0x4dcf05,_0x4f5bbf,_0x47cb1e){const _0x46713b=new Downloader();console[a22_0x2a2e('0x39')](_0x4dcf05);console[a22_0x2a2e('0x39')](_0x4f5bbf);console[a22_0x2a2e('0x39')](_0x47cb1e);const _0x2df78f=_0x46713b[a22_0x2a2e('0x46')](_0x4dcf05,this['tempFolder']+_0x4f5bbf);urlExists(_0x4dcf05,function(_0x527a4a,_0x543855){if(_0x543855){if(this[a22_0x2a2e('0x1e')][a22_0x2a2e('0x62')](this['currentFile'])){const _0x53201a=this[a22_0x2a2e('0x1e')]['indexOf'](this[a22_0x2a2e('0x1d')]);if(_0x53201a>-0x1){this[a22_0x2a2e('0x1e')][a22_0x2a2e('0x63')](_0x53201a,0x1);}}console[a22_0x2a2e('0x39')](a22_0x2a2e('0x64')+_0x4dcf05);_0x2df78f[a22_0x2a2e('0x65')]();}else{if(!this['failDownloadFiles'][a22_0x2a2e('0x62')](this['currentFile'])){this['failDownloadFiles'][a22_0x2a2e('0x43')](this[a22_0x2a2e('0x1d')]);}console[a22_0x2a2e('0x39')](a22_0x2a2e('0x66')+_0x4dcf05);this[a22_0x2a2e('0x1d')]++;this[a22_0x2a2e('0x46')]();}}[a22_0x2a2e('0x59')](this));_0x2df78f['on']('start',function(_0x2df78f){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x67')+_0x4dcf05);});_0x2df78f['on'](a22_0x2a2e('0x4b'),function(_0x2df78f){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x68'));this[a22_0x2a2e('0x46')]();}[a22_0x2a2e('0x59')](this));_0x2df78f['on']('end',function(_0x2df78f){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x69'));console[a22_0x2a2e('0x39')](a22_0x2a2e('0x6a')+_0x4f5bbf);console[a22_0x2a2e('0x39')](a22_0x2a2e('0x6b')+_0x47cb1e);this[a22_0x2a2e('0x58')](this[a22_0x2a2e('0x17')]+_0x4f5bbf)[a22_0x2a2e('0x5')](function(_0x137af9){if(_0x137af9){this[a22_0x2a2e('0x1d')]++;}this[a22_0x2a2e('0x46')]();}[a22_0x2a2e('0x59')](this));}['bind'](this));_0x2df78f['on'](a22_0x2a2e('0x6c'),function(_0x2df78f){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x6c'));});_0x2df78f['on']('destroyed',function(_0x2df78f){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x6d'));});_0x2df78f['on'](a22_0x2a2e('0x6e'),function(_0x2df78f){console[a22_0x2a2e('0x39')]('retry');});}[a22_0x2a2e('0x6f')](_0x39373a,_0x36ebac,_0xdd4df7,_0xebd572){console['log'](a22_0x2a2e('0x6f'));console[a22_0x2a2e('0x39')](_0x39373a);const _0x48d4da=!![];let _0x24bee8=0x0;const _0x3ca61b='';console[a22_0x2a2e('0x39')](a22_0x2a2e('0x70')+_0x39373a+a22_0x2a2e('0x71')+_0x36ebac);if(_0x24bee8){if(_0x24bee8>0x5){_0xebd572(a22_0x2a2e('0x72'),_0x39373a,_0xdd4df7,null);return;}}else{_0x24bee8=0x0;}const _0x39609c=this['tempFolder']+_0x36ebac;let _0x32d348;if(_0xebd572===undefined){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x73')+_0x39373a+a22_0x2a2e('0x71')+_0x39609c);_0xebd572=function(_0x297501,_0x7dd5ae){console[a22_0x2a2e('0x39')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x297501,_0x7dd5ae);};}http['globalAgent'][a22_0x2a2e('0x74')]=0x64;const _0x2b2197={'host':url[a22_0x2a2e('0x24')](_0x39373a)['host'],'port':0x50,'path':url[a22_0x2a2e('0x24')](_0x39373a)[a22_0x2a2e('0x75')],'agent':![]};const _0x194452=http[a22_0x2a2e('0x76')](_0x2b2197,function(_0x6577a1){let _0x4210bf=0x0;let _0x2edf9e=0x0;function _0x597829(){if(_0x4210bf===undefined){console[a22_0x2a2e('0x39')](_0x36ebac+'\x20Progress:\x20unknown\x09'+_0x2edf9e+'/'+'?');}const _0x52315d=_0x2edf9e/_0x4210bf*0x64;console[a22_0x2a2e('0x39')](_0x36ebac+a22_0x2a2e('0x77')+_0x52315d+'%\x09'+_0x2edf9e+'/'+_0x4210bf);}console[a22_0x2a2e('0x39')](_0x36ebac+'\x20'+_0x6577a1['statusCode']);switch(_0x6577a1[a22_0x2a2e('0x78')]){case 0xc8:_0x4210bf=_0x6577a1[a22_0x2a2e('0x79')]['content-length']||_0x3ca61b;fs[a22_0x2a2e('0x7a')](_0x39609c,function(_0x2de650,_0x4dde49){if(!_0x2de650){console['log'](a22_0x2a2e('0x7b')+_0x39609c);if(_0x4dde49[a22_0x2a2e('0x7c')]==_0x4210bf){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x7d')+_0x4210bf+')');console[a22_0x2a2e('0x39')](a22_0x2a2e('0x7e'));}else{console[a22_0x2a2e('0x39')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x4dde49[a22_0x2a2e('0x7c')]+a22_0x2a2e('0x7f')+_0x4210bf+')');}}_0x32d348=fs[a22_0x2a2e('0x80')](_0x39609c);_0x6577a1[a22_0x2a2e('0x81')](_0x32d348);_0x6577a1['on'](a22_0x2a2e('0x82'),function(_0x3f4fbf){_0x2edf9e+=_0x3f4fbf[a22_0x2a2e('0x45')];_0x597829();});_0x194452['on'](a22_0x2a2e('0x4b'),function(_0x2de650){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x83'));console['log'](_0x2de650);});_0x32d348['on']('finish',function(){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x84')+_0x39373a+'\x20to\x20'+_0x36ebac);_0xebd572(null,_0x36ebac,_0xdd4df7,_0x36ebac);}[a22_0x2a2e('0x59')](this));});break;case 0x12e:const _0x27f8bd=_0x6577a1[a22_0x2a2e('0x79')][a22_0x2a2e('0x85')];console[a22_0x2a2e('0x39')](a22_0x2a2e('0x86')+_0x39373a+'\x20to\x20'+_0x27f8bd);if(_0x24bee8<0x5){this['downloadHTTPFile'](_0x27f8bd,_0x36ebac,_0xebd572,_0x24bee8++);}else{console['error'](a22_0x2a2e('0x87')+_0x39373a+'.');_0xebd572(a22_0x2a2e('0x88'),null,null,null);}return;case 0x194:console[a22_0x2a2e('0x39')](a22_0x2a2e('0x89')+_0x39373a);default:console[a22_0x2a2e('0x39')](a22_0x2a2e('0x8a')+_0x39373a+a22_0x2a2e('0x8b')+_0x6577a1[a22_0x2a2e('0x78')]);_0x194452[a22_0x2a2e('0x8c')]();_0xebd572(_0x6577a1['statusCode'],null,null,null);return;}})['on'](a22_0x2a2e('0x4b'),function(_0x2b2aea){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x8d')+_0x39373a+'\x20'+_0x2b2aea['message']);_0xebd572(_0x2b2aea,null,null,null);});}[a22_0x2a2e('0x8e')](_0x2f3019,_0x484b40,_0x296e04,_0x246b1a){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x8e'));console['log'](_0x2f3019);console['log'](_0x484b40);console[a22_0x2a2e('0x39')](_0x296e04);console['log'](_0x246b1a);if(_0x296e04==a22_0x2a2e('0x55')){const _0x41da16=this['downloadFiles'][this['currentFile']][a22_0x2a2e('0x8f')]!=null?this[a22_0x2a2e('0x42')][this[a22_0x2a2e('0x1d')]][a22_0x2a2e('0x8f')]:0x1e;this[a22_0x2a2e('0x90')](_0x246b1a,_0x41da16);}else if(_0x296e04==a22_0x2a2e('0x91')){if(_0x2f3019==null&&_0x484b40!=''){this[a22_0x2a2e('0x1d')]++;}this[a22_0x2a2e('0x46')]();}console[a22_0x2a2e('0x39')](this['currentFile']);}[a22_0x2a2e('0x92')](_0x5ce2d4,_0x40ba78,_0x8117e){progress(request(_0x5ce2d4),{})['on']('progress',function(_0x3b3c54){console['log'](_0x3b3c54);})['on']('error',function(_0x1e43e5){console['log'](a22_0x2a2e('0x93'));this[a22_0x2a2e('0x46')]();})['on'](a22_0x2a2e('0x69'),function(){console[a22_0x2a2e('0x39')](a22_0x2a2e('0x6a')+_0x40ba78);console[a22_0x2a2e('0x39')](a22_0x2a2e('0x6b')+_0x8117e);if(_0x8117e==a22_0x2a2e('0x55')){const _0x38d798=this['downloadFiles'][this['currentFile']]['duration']!=null?this[a22_0x2a2e('0x42')][this[a22_0x2a2e('0x1d')]][a22_0x2a2e('0x8f')]:0x1e;this[a22_0x2a2e('0x90')](_0x40ba78,_0x38d798);}else if(_0x8117e==a22_0x2a2e('0x91')){this[a22_0x2a2e('0x1d')]++;this['download']();}}[a22_0x2a2e('0x59')](this))[a22_0x2a2e('0x81')](fs[a22_0x2a2e('0x80')](this[a22_0x2a2e('0x17')]+_0x40ba78));}[a22_0x2a2e('0x90')](_0x1e6216,_0x2a6280=0x1e){const _0x260142=this['tempFolder']+_0x1e6216;console[a22_0x2a2e('0x39')](_0x260142);console['log'](_0x1e6216);const _0x2e2ede=_0x1e6216[a22_0x2a2e('0x51')]('.')[a22_0x2a2e('0x52')](0x0,-0x1)[a22_0x2a2e('0x53')]('.');const _0x204028=a22_0x2a2e('0x94');const _0x37b3d0=['-y','-r','1/2',a22_0x2a2e('0x95'),'1',a22_0x2a2e('0x96'),a22_0x2a2e('0x97'),'-i',_0x260142,'-t',String(_0x2a6280),a22_0x2a2e('0x98'),a22_0x2a2e('0x99'),a22_0x2a2e('0x9a'),a22_0x2a2e('0x9b'),'-r','25',a22_0x2a2e('0x9c'),a22_0x2a2e('0x9d'),this[a22_0x2a2e('0x17')]+_0x2e2ede+a22_0x2a2e('0x56')];const _0x5d317b=spawn(_0x204028,_0x37b3d0);_0x5d317b[a22_0x2a2e('0x9e')]['on']('data',function(_0x34f527){console['log']('Converting\x20'+_0x260142);});_0x5d317b[a22_0x2a2e('0x9f')]['on']('data',function(_0x38cc32){console[a22_0x2a2e('0x39')](a22_0x2a2e('0xa0')+_0x38cc32);}[a22_0x2a2e('0x59')](this));_0x5d317b['on']('close',function(){console[a22_0x2a2e('0x39')](a22_0x2a2e('0xa1'));this['currentFile']++;this[a22_0x2a2e('0x46')]();}['bind'](this));}[a22_0x2a2e('0xa2')](_0x229539){const _0x1328b6=this[a22_0x2a2e('0x17')]+'/'+_0x229539+a22_0x2a2e('0x56');const _0x46c29e=youtubedl(a22_0x2a2e('0xa3')+_0x229539,[a22_0x2a2e('0xa4')],{'cwd':__dirname});_0x46c29e['on'](a22_0x2a2e('0xa5'),function(_0x569d30){console[a22_0x2a2e('0x39')](a22_0x2a2e('0xa6'));console['log'](a22_0x2a2e('0xa7')+_0x569d30[a22_0x2a2e('0xa8')]);console[a22_0x2a2e('0x39')](a22_0x2a2e('0xa9')+_0x569d30[a22_0x2a2e('0x7c')]);});_0x46c29e['on'](a22_0x2a2e('0xaa'),function complete(_0x5c8e8d){'use strict';console[a22_0x2a2e('0x39')](a22_0x2a2e('0xa7')+_0x5c8e8d['_filename']+a22_0x2a2e('0xab'));});_0x46c29e['on']('end',function(){console[a22_0x2a2e('0x39')](a22_0x2a2e('0xac'));this[a22_0x2a2e('0x58')](_0x1328b6)[a22_0x2a2e('0x5')](function(_0x5c1824){if(_0x5c1824){this[a22_0x2a2e('0x1d')]++;}this[a22_0x2a2e('0x46')]();}[a22_0x2a2e('0x59')](this));}['bind'](this));_0x46c29e[a22_0x2a2e('0x81')](fs[a22_0x2a2e('0x80')](_0x1328b6));}[a22_0x2a2e('0x4c')](){console[a22_0x2a2e('0x39')]('Finishing');if(this[a22_0x2a2e('0x1e')]['length']==0x0){fs[a22_0x2a2e('0xad')](this[a22_0x2a2e('0x1b')],JSON[a22_0x2a2e('0x31')](this['newPlayList']));let _0x1bfc27=a22_0x2a2e('0xae')+'\x0d\x0a'+a22_0x2a2e('0xaf')+'\x0d\x0a';for(const _0x5120c5 in this['downloadFiles']){const _0x87eca0=this[a22_0x2a2e('0x42')][_0x5120c5][a22_0x2a2e('0x4d')];const _0x54e9d1=this[a22_0x2a2e('0x42')][_0x5120c5][a22_0x2a2e('0x4e')];const _0x271858=_0x87eca0[a22_0x2a2e('0x4f')](_0x87eca0[a22_0x2a2e('0x50')]('/')+0x1);let _0x50e762=_0x271858[a22_0x2a2e('0x51')]('.')[a22_0x2a2e('0x52')](0x0,-0x1)[a22_0x2a2e('0x53')]('.');if(_0x54e9d1==a22_0x2a2e('0x54')){_0x50e762=_0x87eca0;}_0x1bfc27+=a22_0x2a2e('0xb0')+_0x50e762+a22_0x2a2e('0x56')+'\x0d\x0a';}fsExtra[a22_0x2a2e('0x41')](this[a22_0x2a2e('0x19')]);fsExtra[a22_0x2a2e('0x5a')](this[a22_0x2a2e('0x17')],this['filesFolder']);fs[a22_0x2a2e('0xad')](this[a22_0x2a2e('0xb1')],_0x1bfc27);fsExtra['emptyDirSync'](this[a22_0x2a2e('0x17')]);console['log'](a22_0x2a2e('0xb2'));console[a22_0x2a2e('0x39')]('TODO:\x20reload\x20playlist');}else{console[a22_0x2a2e('0x39')](a22_0x2a2e('0xb3'));this[a22_0x2a2e('0x1d')]=0x0;setTimeout(function(){this['download']();}[a22_0x2a2e('0x59')](this),0x1388);}}}exports['SyncPlaylistsService']=SyncPlaylistsService;