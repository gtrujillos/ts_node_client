var a22_0x19d9=['And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','createWriteStream','pipe','finish','Downloaded\x20','headers','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','progress','Error\x20downloading\x20file','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','-vf','scale=1920:1080','stdout','data','Converting\x20','stderr:\x20','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTINF:0,luloPlayList','m3uFile','Rebooting..','shutdown','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','throw','value','then','apply','defineProperty','__esModule','url','http','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','context.json','url-exists','node-kodi','mt-files-downloader','tempFolder','mediaFolder','filesFolder','files/','playListFile','lulo_playlist.m3u','playlistChanged','downloadFiles','newPlayList','httpClientService','HttpClientService','config','parse','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','registerClient','loadMediaList','checkDependencies','getItems','stringify','deviceUuid','networkInterfaces','context','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','bind','writeFileSync','getStatus','player','item','reportStatus','playingItem:\x20','checkFolders','ensureDir','emptyDirSync','failDownloadFiles','currentFile','push','length','download','reloadMediaList','existsSync','removeSync','hasPlayListChanged','error','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','slice','join','split','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','youtube_single','downloadYouTube','downloader','track','media','@type','Video','mediainfo\x20check:','includes','indexOf','downloading:\x20','start','Error:\x20','start:\x20','end','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','globalAgent','maxSockets','pathname','get','\x20Progress:\x20','statusCode','content-length','size'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a22_0x19d9,0xe4));var a22_0x568d=function(_0x1d2076,_0x2a7e5a){_0x1d2076=_0x1d2076-0x0;var _0x6ffefc=a22_0x19d9[_0x1d2076];return _0x6ffefc;};'use strict';var __awaiter=this&&this[a22_0x568d('0x0')]||function(_0x1b11ae,_0x3d9f46,_0x1bd63d,_0x335118){function _0x1da040(_0x550c21){return _0x550c21 instanceof _0x1bd63d?_0x550c21:new _0x1bd63d(function(_0x492747){_0x492747(_0x550c21);});}return new(_0x1bd63d||(_0x1bd63d=Promise))(function(_0x283cd5,_0x2f8b3d){function _0x1d4a1b(_0xfa3b4c){try{_0x3d30d9(_0x335118[a22_0x568d('0x1')](_0xfa3b4c));}catch(_0x262aa1){_0x2f8b3d(_0x262aa1);}}function _0x110468(_0x4cecd1){try{_0x3d30d9(_0x335118[a22_0x568d('0x2')](_0x4cecd1));}catch(_0x216e2f){_0x2f8b3d(_0x216e2f);}}function _0x3d30d9(_0x55c8a1){_0x55c8a1['done']?_0x283cd5(_0x55c8a1[a22_0x568d('0x3')]):_0x1da040(_0x55c8a1[a22_0x568d('0x3')])[a22_0x568d('0x4')](_0x1d4a1b,_0x110468);}_0x3d30d9((_0x335118=_0x335118[a22_0x568d('0x5')](_0x1b11ae,_0x3d9f46||[]))['next']());});};Object[a22_0x568d('0x6')](exports,a22_0x568d('0x7'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a22_0x568d('0x8'));const http=require(a22_0x568d('0x9'));const fsExtra=require('fs-extra');const request=require(a22_0x568d('0xa'));const progress=require(a22_0x568d('0xb'));const spawn=require(a22_0x568d('0xc'))[a22_0x568d('0xd')];const isImage=require(a22_0x568d('0xe'));const format=require(a22_0x568d('0xf'));const os=require('os');const youtubedl=require(a22_0x568d('0x10'));const uuidv4=require('uuid/v4');const configFile='config.json';const contextFile=a22_0x568d('0x11');const urlExists=require(a22_0x568d('0x12'));const kodi_rpc=require(a22_0x568d('0x13'));const Downloader=require(a22_0x568d('0x14'));class SyncPlaylistsService{constructor(){this['mediaFolder']='media/';this[a22_0x568d('0x15')]=this[a22_0x568d('0x16')]+'temp/';this[a22_0x568d('0x17')]=this[a22_0x568d('0x16')]+a22_0x568d('0x18');this[a22_0x568d('0x19')]=this[a22_0x568d('0x16')]+'playlist.txt';this['m3uFile']=this[a22_0x568d('0x17')]+a22_0x568d('0x1a');this['currentFile']=0x0;this[a22_0x568d('0x1b')]=![];this[a22_0x568d('0x1c')]=[];this['failDownloadFiles']=[];this[a22_0x568d('0x1d')]={};this[a22_0x568d('0x1e')]=new HttpClientService_1[(a22_0x568d('0x1f'))]();}['init'](){this[a22_0x568d('0x20')]=JSON[a22_0x568d('0x21')](fs[a22_0x568d('0x22')](configFile));this['context']=JSON[a22_0x568d('0x21')](fs['readFileSync'](contextFile));this[a22_0x568d('0x23')]=this[a22_0x568d('0x20')][a22_0x568d('0x23')];this[a22_0x568d('0x24')]=process[a22_0x568d('0x25')][a22_0x568d('0x26')]+a22_0x568d('0x27');this[a22_0x568d('0x28')]=this[a22_0x568d('0x24')]+a22_0x568d('0x29');this[a22_0x568d('0x2a')]=new kodi_rpc({'url':'http://localhost','user':'lulo','password':'.lulo123.'});this['checkDependencies']();this[a22_0x568d('0x2b')]();this['checkFolders']();this[a22_0x568d('0x2c')]();setInterval(function(){this['getStatus']();}['bind'](this),0x2710);setInterval(function(){this[a22_0x568d('0x2b')]();}['bind'](this),0x493e0);}[a22_0x568d('0x2d')](){}[a22_0x568d('0x2b')](){this[a22_0x568d('0x2a')]['playlist'][a22_0x568d('0x2e')](0x1)[a22_0x568d('0x4')](function(_0x2cb622){const _0x563be9=JSON[a22_0x568d('0x2f')](_0x2cb622);const _0x5b649c={'player_id':this[a22_0x568d('0x23')],'device_uuid':this[a22_0x568d('0x20')][a22_0x568d('0x30')],'network_info':JSON[a22_0x568d('0x2f')](os[a22_0x568d('0x31')]()),'firmware_info':JSON[a22_0x568d('0x2f')](this[a22_0x568d('0x32')]),'playlist':_0x563be9,'playing_item':'','status':0x0};this[a22_0x568d('0x1e')]['post'](a22_0x568d('0x33'),_0x5b649c,![])['then'](function(_0x708cd7){console[a22_0x568d('0x34')](a22_0x568d('0x35')+Date());})[a22_0x568d('0x36')](function(_0x13e111){});console[a22_0x568d('0x34')](_0x5b649c);}[a22_0x568d('0x37')](this));const _0x8adcc4=this[a22_0x568d('0x20')][a22_0x568d('0x30')];if(!_0x8adcc4||_0x8adcc4==''){this['config'][a22_0x568d('0x30')]=uuidv4();this[a22_0x568d('0x20')]={'deviceUuid':this[a22_0x568d('0x20')][a22_0x568d('0x30')],'playerId':this[a22_0x568d('0x20')][a22_0x568d('0x23')]};fs[a22_0x568d('0x38')](configFile,JSON[a22_0x568d('0x2f')](this['config']));}}[a22_0x568d('0x39')](){console[a22_0x568d('0x34')](a22_0x568d('0x39'));this[a22_0x568d('0x2a')][a22_0x568d('0x3a')]['getCurrentlyPlayingVideo']()[a22_0x568d('0x4')](function(_0x18b2eb){const _0x2c3549=_0x18b2eb[a22_0x568d('0x3b')]['label'];this[a22_0x568d('0x3c')](_0x2c3549);}[a22_0x568d('0x37')](this))[a22_0x568d('0x36')](function(_0x4c3b90){console[a22_0x568d('0x34')](_0x4c3b90);this[a22_0x568d('0x3c')](_0x4c3b90);}[a22_0x568d('0x37')](this));}[a22_0x568d('0x3c')](_0x127ac4){console['log'](a22_0x568d('0x3d')+_0x127ac4);const _0x66acf={'player_id':this['playerId'],'device_uuid':this['config'][a22_0x568d('0x30')],'status':_0x127ac4!=''&&_0x127ac4!=null?0x1:0x0,'playing_item':_0x127ac4};this[a22_0x568d('0x1e')]['post']('http://restapi.lulo.run/player_devices/report_status',_0x66acf,![])['then'](function(_0x11ea01){console[a22_0x568d('0x34')]('reportStatusResponse:\x20'+Date());})[a22_0x568d('0x36')](function(_0x17bc1b){});}[a22_0x568d('0x3e')](){fsExtra[a22_0x568d('0x3f')](this[a22_0x568d('0x16')],_0x471688=>{});fsExtra[a22_0x568d('0x3f')](this[a22_0x568d('0x15')],_0x301c28=>{});fsExtra[a22_0x568d('0x3f')](this[a22_0x568d('0x17')],_0x23a3c0=>{});}[a22_0x568d('0x2c')](){const _0x37dd80=format(this['playListServiceURL'],this['playerId']);console[a22_0x568d('0x34')](_0x37dd80);request({'url':_0x37dd80,'json':!![]},function(_0x91114c,_0x146467,_0x5304cd){this[a22_0x568d('0x1d')]=_0x5304cd;this[a22_0x568d('0x1b')]=this['hasPlayListChanged']();fsExtra[a22_0x568d('0x40')](this[a22_0x568d('0x15')]);this[a22_0x568d('0x1c')]=[];this[a22_0x568d('0x41')]=[];this[a22_0x568d('0x42')]=0x0;for(const _0x14f741 in _0x5304cd){this[a22_0x568d('0x1c')][a22_0x568d('0x43')](_0x5304cd[_0x14f741]);}console[a22_0x568d('0x34')]('Total:\x20'+this[a22_0x568d('0x1c')][a22_0x568d('0x44')]);if(this['downloadFiles'][a22_0x568d('0x44')]>0x0){this[a22_0x568d('0x45')]();}}[a22_0x568d('0x37')](this));}[a22_0x568d('0x46')](){if(fsExtra[a22_0x568d('0x47')](this[a22_0x568d('0x19')])){fsExtra[a22_0x568d('0x48')](this[a22_0x568d('0x19')]);}this['loadMediaList']();}[a22_0x568d('0x49')](){const _0x446626=JSON[a22_0x568d('0x2f')](this[a22_0x568d('0x1d')]);try{if(!fs[a22_0x568d('0x47')](this['playListFile'])){return!![];}else{const _0x34392b=fs['readFileSync'](this[a22_0x568d('0x19')])['toString']();if(_0x34392b!=_0x446626){return!![];}}}catch(_0x98efb3){console[a22_0x568d('0x4a')](_0x98efb3);}return![];}['download'](){console['log'](a22_0x568d('0x4b')+this[a22_0x568d('0x42')]+a22_0x568d('0x4c')+this[a22_0x568d('0x1c')]['length']);if(this[a22_0x568d('0x42')]>=this[a22_0x568d('0x1c')]['length']){this[a22_0x568d('0x4d')]();return;}const _0x11477a=String(this[a22_0x568d('0x1c')][this['currentFile']][a22_0x568d('0x4e')]);const _0x455a5a=this[a22_0x568d('0x1c')][this[a22_0x568d('0x42')]][a22_0x568d('0x4f')];let _0x5914b1=_0x11477a[a22_0x568d('0x50')](_0x11477a[a22_0x568d('0x51')]('/')+0x1);const _0x9e0695=_0x5914b1['split']('.')[a22_0x568d('0x52')](0x0,-0x1)[a22_0x568d('0x53')]('.');let _0x504f4f=this[a22_0x568d('0x24')]+_0x11477a;const _0x150050=_0x504f4f[a22_0x568d('0x54')]('.')[a22_0x568d('0x52')](0x0,-0x1)['join']('.');if(_0x455a5a=='youtube_single'){_0x5914b1=_0x5914b1+a22_0x568d('0x55');}else if(_0x455a5a==a22_0x568d('0x56')){_0x5914b1=_0x9e0695+'.mp4';_0x504f4f=_0x150050+a22_0x568d('0x55');}console['log']('**********+');console['log'](_0x11477a);console[a22_0x568d('0x34')](_0x455a5a);console[a22_0x568d('0x34')](_0x5914b1);console[a22_0x568d('0x34')](_0x504f4f);console[a22_0x568d('0x34')](_0x9e0695);console[a22_0x568d('0x34')](_0x150050);console[a22_0x568d('0x34')](a22_0x568d('0x57'));if(fsExtra[a22_0x568d('0x47')](this['tempFolder']+_0x5914b1)){this[a22_0x568d('0x58')](this[a22_0x568d('0x15')]+_0x5914b1)['then'](function(_0x42c759){if(_0x42c759){this[a22_0x568d('0x42')]++;}else{this[a22_0x568d('0x1b')]=!![];}this['download']();}[a22_0x568d('0x37')](this));}else if(fsExtra[a22_0x568d('0x47')](this[a22_0x568d('0x17')]+_0x5914b1)){this['checkVideo'](this[a22_0x568d('0x17')]+_0x5914b1)[a22_0x568d('0x4')](function(_0x12f295){if(_0x12f295){fsExtra[a22_0x568d('0x59')](this[a22_0x568d('0x17')]+_0x5914b1,this[a22_0x568d('0x15')]+_0x5914b1);this[a22_0x568d('0x42')]++;}else{this[a22_0x568d('0x1b')]=!![];}this[a22_0x568d('0x45')]();}['bind'](this));}else{console['log'](a22_0x568d('0x5a')+_0x504f4f);this[a22_0x568d('0x1b')]=!![];if(_0x455a5a==a22_0x568d('0x5b')){this[a22_0x568d('0x5c')](_0x11477a);}else{this[a22_0x568d('0x5d')](_0x504f4f,_0x5914b1,_0x455a5a);}}}[a22_0x568d('0x58')](_0x2b0d41){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x568d('0x34')]('videoFile:\x20'+_0x2b0d41);const _0x77cdf9=yield mediainfo(_0x2b0d41)[a22_0x568d('0x36')](_0x24b054=>{console[a22_0x568d('0x34')](_0x24b054);fsExtra[a22_0x568d('0x48')](_0x2b0d41);return![];});const _0x67b876=_0x77cdf9['media'][a22_0x568d('0x5e')][a22_0x568d('0x44')]>0x1&&_0x77cdf9[a22_0x568d('0x5f')][a22_0x568d('0x5e')][0x1][a22_0x568d('0x60')]==a22_0x568d('0x61');if(!_0x67b876){fsExtra[a22_0x568d('0x48')](_0x2b0d41);}console[a22_0x568d('0x34')](a22_0x568d('0x62')+_0x67b876);return _0x67b876;});}[a22_0x568d('0x5d')](_0x47aca6,_0x42d890,_0x19c941){const _0x215bf1=new Downloader();console[a22_0x568d('0x34')](_0x47aca6);console[a22_0x568d('0x34')](_0x42d890);console[a22_0x568d('0x34')](_0x19c941);const _0x16825d=_0x215bf1['download'](_0x47aca6,this['tempFolder']+_0x42d890);urlExists(_0x47aca6,function(_0x491a57,_0x3d26f9){if(_0x3d26f9){if(this[a22_0x568d('0x41')][a22_0x568d('0x63')](this[a22_0x568d('0x42')])){const _0x320d56=this['failDownloadFiles'][a22_0x568d('0x64')](this[a22_0x568d('0x42')]);if(_0x320d56>-0x1){this[a22_0x568d('0x41')]['splice'](_0x320d56,0x1);}}console['log'](a22_0x568d('0x65')+_0x47aca6);_0x16825d[a22_0x568d('0x66')]();}else{if(!this[a22_0x568d('0x41')]['includes'](this['currentFile'])){this[a22_0x568d('0x41')][a22_0x568d('0x43')](this[a22_0x568d('0x42')]);}console[a22_0x568d('0x34')](a22_0x568d('0x67')+_0x47aca6);this[a22_0x568d('0x42')]++;this['download']();}}['bind'](this));_0x16825d['on'](a22_0x568d('0x66'),function(_0x16825d){console['log'](a22_0x568d('0x68')+_0x47aca6);});_0x16825d['on'](a22_0x568d('0x4a'),function(_0x16825d){console['log']('error:\x20');this[a22_0x568d('0x45')]();}[a22_0x568d('0x37')](this));_0x16825d['on'](a22_0x568d('0x69'),function(_0x16825d){console[a22_0x568d('0x34')](a22_0x568d('0x69'));console[a22_0x568d('0x34')]('Downloaded:\x20'+_0x42d890);console['log'](a22_0x568d('0x6a')+_0x19c941);this[a22_0x568d('0x58')](this[a22_0x568d('0x15')]+_0x42d890)[a22_0x568d('0x4')](function(_0x38cd2f){if(_0x38cd2f){this[a22_0x568d('0x42')]++;}this[a22_0x568d('0x45')]();}[a22_0x568d('0x37')](this));}[a22_0x568d('0x37')](this));_0x16825d['on'](a22_0x568d('0x6b'),function(_0x16825d){console[a22_0x568d('0x34')](a22_0x568d('0x6b'));});_0x16825d['on'](a22_0x568d('0x6c'),function(_0x16825d){console[a22_0x568d('0x34')](a22_0x568d('0x6c'));});_0x16825d['on']('retry',function(_0x16825d){console[a22_0x568d('0x34')](a22_0x568d('0x6d'));});}[a22_0x568d('0x6e')](_0x19fdf6,_0x1328b4,_0x40e99f,_0x49d58f){console[a22_0x568d('0x34')](a22_0x568d('0x6e'));console[a22_0x568d('0x34')](_0x19fdf6);const _0x1fd2c9=!![];let _0xff2348=0x0;const _0x797998='';console[a22_0x568d('0x34')](a22_0x568d('0x6f')+_0x19fdf6+'\x20to\x20'+_0x1328b4);if(_0xff2348){if(_0xff2348>0x5){_0x49d58f('Max\x20redirects\x20reached',_0x19fdf6,_0x40e99f,null);return;}}else{_0xff2348=0x0;}const _0x26e033=this[a22_0x568d('0x15')]+_0x1328b4;let _0x114fe0;if(_0x49d58f===undefined){console['log'](a22_0x568d('0x70')+_0x19fdf6+a22_0x568d('0x71')+_0x26e033);_0x49d58f=function(_0x1ee233,_0x358c55){console[a22_0x568d('0x34')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x1ee233,_0x358c55);};}http[a22_0x568d('0x72')][a22_0x568d('0x73')]=0x64;const _0x159d18={'host':url[a22_0x568d('0x21')](_0x19fdf6)['host'],'port':0x50,'path':url[a22_0x568d('0x21')](_0x19fdf6)[a22_0x568d('0x74')],'agent':![]};const _0x55f3e1=http[a22_0x568d('0x75')](_0x159d18,function(_0x3f3018){let _0x44bda4=0x0;let _0x50aad4=0x0;function _0x3db633(){if(_0x44bda4===undefined){console[a22_0x568d('0x34')](_0x1328b4+'\x20Progress:\x20unknown\x09'+_0x50aad4+'/'+'?');}const _0x358634=_0x50aad4/_0x44bda4*0x64;console[a22_0x568d('0x34')](_0x1328b4+a22_0x568d('0x76')+_0x358634+'%\x09'+_0x50aad4+'/'+_0x44bda4);}console[a22_0x568d('0x34')](_0x1328b4+'\x20'+_0x3f3018[a22_0x568d('0x77')]);switch(_0x3f3018[a22_0x568d('0x77')]){case 0xc8:_0x44bda4=_0x3f3018['headers'][a22_0x568d('0x78')]||_0x797998;fs['stat'](_0x26e033,function(_0xef9fe5,_0x17ed6f){if(!_0xef9fe5){console[a22_0x568d('0x34')]('Have\x20already\x20downloaded\x20'+_0x26e033);if(_0x17ed6f[a22_0x568d('0x79')]==_0x44bda4){console['log'](a22_0x568d('0x7a')+_0x44bda4+')');console[a22_0x568d('0x34')](a22_0x568d('0x7b'));}else{console[a22_0x568d('0x34')](a22_0x568d('0x7c')+_0x17ed6f['size']+')\x20vs\x20New('+_0x44bda4+')');}}_0x114fe0=fs[a22_0x568d('0x7d')](_0x26e033);_0x3f3018[a22_0x568d('0x7e')](_0x114fe0);_0x3f3018['on']('data',function(_0x4540ce){_0x50aad4+=_0x4540ce['length'];_0x3db633();});_0x55f3e1['on'](a22_0x568d('0x4a'),function(_0xef9fe5){console[a22_0x568d('0x34')]('err:\x20');console[a22_0x568d('0x34')](_0xef9fe5);});_0x114fe0['on'](a22_0x568d('0x7f'),function(){console['log'](a22_0x568d('0x80')+_0x19fdf6+a22_0x568d('0x71')+_0x1328b4);_0x49d58f(null,_0x1328b4,_0x40e99f,_0x1328b4);}[a22_0x568d('0x37')](this));});break;case 0x12e:const _0xc643b6=_0x3f3018[a22_0x568d('0x81')][a22_0x568d('0x82')];console[a22_0x568d('0x34')](a22_0x568d('0x83')+_0x19fdf6+a22_0x568d('0x71')+_0xc643b6);if(_0xff2348<0x5){this[a22_0x568d('0x6e')](_0xc643b6,_0x1328b4,_0x49d58f,_0xff2348++);}else{console[a22_0x568d('0x4a')](a22_0x568d('0x84')+_0x19fdf6+'.');_0x49d58f(a22_0x568d('0x85'),null,null,null);}return;case 0x194:console[a22_0x568d('0x34')]('File\x20Not\x20Found\x20'+_0x19fdf6);default:console[a22_0x568d('0x34')](a22_0x568d('0x86')+_0x19fdf6+a22_0x568d('0x87')+_0x3f3018[a22_0x568d('0x77')]);_0x55f3e1['abort']();_0x49d58f(_0x3f3018[a22_0x568d('0x77')],null,null,null);return;}})['on'](a22_0x568d('0x4a'),function(_0x4d2cab){console[a22_0x568d('0x34')](a22_0x568d('0x88')+_0x19fdf6+'\x20'+_0x4d2cab['message']);_0x49d58f(_0x4d2cab,null,null,null);});}['downloadHTTPFileCallback'](_0x2840f6,_0x167860,_0x4c8eba,_0x363359){console[a22_0x568d('0x34')](a22_0x568d('0x89'));console[a22_0x568d('0x34')](_0x2840f6);console[a22_0x568d('0x34')](_0x167860);console[a22_0x568d('0x34')](_0x4c8eba);console[a22_0x568d('0x34')](_0x363359);if(_0x4c8eba==a22_0x568d('0x56')){const _0x49dc71=this['downloadFiles'][this[a22_0x568d('0x42')]][a22_0x568d('0x8a')]!=null?this['downloadFiles'][this[a22_0x568d('0x42')]]['duration']:0x1e;this[a22_0x568d('0x8b')](_0x363359,_0x49dc71);}else if(_0x4c8eba==a22_0x568d('0x8c')){if(_0x2840f6==null&&_0x167860!=''){this[a22_0x568d('0x42')]++;}this[a22_0x568d('0x45')]();}console[a22_0x568d('0x34')](this[a22_0x568d('0x42')]);}['downloadRequestFile'](_0x17f850,_0x4c1674,_0x1e3aca){progress(request(_0x17f850),{})['on'](a22_0x568d('0x8d'),function(_0x5215ce){console[a22_0x568d('0x34')](_0x5215ce);})['on'](a22_0x568d('0x4a'),function(_0x226864){console['log'](a22_0x568d('0x8e'));this[a22_0x568d('0x45')]();})['on'](a22_0x568d('0x69'),function(){console[a22_0x568d('0x34')]('Downloaded:\x20'+_0x4c1674);console['log'](a22_0x568d('0x6a')+_0x1e3aca);if(_0x1e3aca==a22_0x568d('0x56')){const _0x51fc4c=this[a22_0x568d('0x1c')][this['currentFile']]['duration']!=null?this[a22_0x568d('0x1c')][this['currentFile']][a22_0x568d('0x8a')]:0x1e;this['createImageVideo'](_0x4c1674,_0x51fc4c);}else if(_0x1e3aca==a22_0x568d('0x8c')){this[a22_0x568d('0x42')]++;this[a22_0x568d('0x45')]();}}[a22_0x568d('0x37')](this))[a22_0x568d('0x7e')](fs[a22_0x568d('0x7d')](this[a22_0x568d('0x15')]+_0x4c1674));}['createImageVideo'](_0x3e01e8,_0x3fb209=0x1e){const _0x1ec989=this[a22_0x568d('0x15')]+_0x3e01e8;console[a22_0x568d('0x34')](_0x1ec989);console[a22_0x568d('0x34')](_0x3e01e8);const _0x58b1db=_0x3e01e8['split']('.')[a22_0x568d('0x52')](0x0,-0x1)[a22_0x568d('0x53')]('.');const _0x495d41=a22_0x568d('0x8f');const _0xa19e59=['-y','-r',a22_0x568d('0x90'),a22_0x568d('0x91'),'1',a22_0x568d('0x92'),a22_0x568d('0x93'),'-i',_0x1ec989,'-t',String(_0x3fb209),a22_0x568d('0x94'),a22_0x568d('0x95'),a22_0x568d('0x96'),'yuv420p','-r','25',a22_0x568d('0x97'),a22_0x568d('0x98'),this[a22_0x568d('0x15')]+_0x58b1db+'.mp4'];const _0x3643cc=spawn(_0x495d41,_0xa19e59);_0x3643cc[a22_0x568d('0x99')]['on'](a22_0x568d('0x9a'),function(_0xfda0ff){console[a22_0x568d('0x34')](a22_0x568d('0x9b')+_0x1ec989);});_0x3643cc['stderr']['on'](a22_0x568d('0x9a'),function(_0x5926db){console[a22_0x568d('0x34')](a22_0x568d('0x9c')+_0x5926db);}[a22_0x568d('0x37')](this));_0x3643cc['on']('close',function(){console[a22_0x568d('0x34')](a22_0x568d('0x9d'));this[a22_0x568d('0x42')]++;this[a22_0x568d('0x45')]();}[a22_0x568d('0x37')](this));}[a22_0x568d('0x5c')](_0x34dfb1){const _0x5ff224=this[a22_0x568d('0x15')]+'/'+_0x34dfb1+a22_0x568d('0x55');const _0x2e6c89=youtubedl(a22_0x568d('0x9e')+_0x34dfb1,[a22_0x568d('0x9f')],{'cwd':__dirname});_0x2e6c89['on'](a22_0x568d('0xa0'),function(_0x2a7976){console['log'](a22_0x568d('0xa1'));console[a22_0x568d('0x34')](a22_0x568d('0xa2')+_0x2a7976[a22_0x568d('0xa3')]);console[a22_0x568d('0x34')](a22_0x568d('0xa4')+_0x2a7976[a22_0x568d('0x79')]);});_0x2e6c89['on'](a22_0x568d('0xa5'),function complete(_0x32cec8){'use strict';console[a22_0x568d('0x34')]('filename:\x20'+_0x32cec8['_filename']+a22_0x568d('0xa6'));});_0x2e6c89['on'](a22_0x568d('0x69'),function(){console['log'](a22_0x568d('0xa7'));this[a22_0x568d('0x58')](_0x5ff224)[a22_0x568d('0x4')](function(_0x5eed74){if(_0x5eed74){this[a22_0x568d('0x42')]++;}this[a22_0x568d('0x45')]();}['bind'](this));}[a22_0x568d('0x37')](this));_0x2e6c89['pipe'](fs[a22_0x568d('0x7d')](_0x5ff224));}[a22_0x568d('0x4d')](){console[a22_0x568d('0x34')]('Finishing');if(this[a22_0x568d('0x1b')]){if(this[a22_0x568d('0x41')][a22_0x568d('0x44')]==0x0){fs[a22_0x568d('0x38')](this['playListFile'],JSON[a22_0x568d('0x2f')](this[a22_0x568d('0x1d')]));let _0x496089='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x568d('0xa8')+'\x0d\x0a';for(const _0x8fe577 in this[a22_0x568d('0x1c')]){const _0x589bd9=this['downloadFiles'][_0x8fe577][a22_0x568d('0x4e')];const _0x120a03=this['downloadFiles'][_0x8fe577][a22_0x568d('0x4f')];const _0x49354e=_0x589bd9['substring'](_0x589bd9[a22_0x568d('0x51')]('/')+0x1);let _0x4d1d1a=_0x49354e[a22_0x568d('0x54')]('.')[a22_0x568d('0x52')](0x0,-0x1)['join']('.');if(_0x120a03==a22_0x568d('0x5b')){_0x4d1d1a=_0x589bd9;}_0x496089+='/home/osmc/luloclient/media/files/'+_0x4d1d1a+a22_0x568d('0x55')+'\x0d\x0a';}fsExtra[a22_0x568d('0x40')](this[a22_0x568d('0x17')]);fsExtra[a22_0x568d('0x59')](this[a22_0x568d('0x15')],this[a22_0x568d('0x17')]);fsExtra[a22_0x568d('0x38')](this[a22_0x568d('0xa9')],_0x496089);fsExtra[a22_0x568d('0x40')](this['tempFolder']);console[a22_0x568d('0x34')](a22_0x568d('0xaa'));const _0x4a88b4=spawn(a22_0x568d('0xab'),['-r','now']);}else{console[a22_0x568d('0x34')](a22_0x568d('0xac'));this[a22_0x568d('0x42')]=0x0;setTimeout(function(){this[a22_0x568d('0x45')]();}[a22_0x568d('0x37')](this),0x1388);}}else{console[a22_0x568d('0x34')](a22_0x568d('0xad'));}}}exports[a22_0x568d('0xae')]=SyncPlaylistsService;