var a26_0x2f83=['loadMediaList:\x20','newPlayList','push','Total:\x20','length','download','reloadMediaList','existsSync','emptyDirSync','playListFile','removeSync','m3uFile','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','image','.mp4','**********+','checkVideo','playlistChanged','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','mediainfo\x20check:','indexOf','splice','downloading:\x20','start','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','maxSockets','host','pathname','get','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','createWriteStream','pipe','err:\x20','finish','Downloaded\x20','location','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','duration','createImageVideo','Error\x20downloading\x20file','video','ffmpeg','-loop','glob','-c:v','libx264','-pix_fmt','yuv420p','stdout','data','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','info','Download\x20started','filename:\x20','size:\x20','complete','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','Rebooting..','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','kodiCommandClient','RestartApp()','reboot','Rebooting','updateSettings','rss','header_active','setRss','enableClock','turnOffTV','CECStandby()','CECActivateSource()','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','set','feed','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','kodi-send\x20--action=\x22','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','http','fs-extra','child_process','exec','is-image','string-template','youtube-dl','uuid/v4','config.json','package.json','url-exists','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','lulo_playlist.m3u','currentFile','downloadFiles','failDownloadFiles','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','forceReload','HttpClientService','PlayerService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','checkDependencies','registerClient','loadMediaList','bind','kodi','playlist','getItems','stringify','networkInterfaces','version','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','deviceUuid','writeFileSync','getStatus','player','getCurrentlyPlayingVideo','item','reportStatus','catch','reportStatus\x20playingItem:\x20','reportStatusResponse','ensureDir'];(function(_0x2fd029,_0x27a55e){var _0x3ca7ae=function(_0x21dedc){while(--_0x21dedc){_0x2fd029['push'](_0x2fd029['shift']());}};_0x3ca7ae(++_0x27a55e);}(a26_0x2f83,0x182));var a26_0x3654=function(_0x44d921,_0x5ed60c){_0x44d921=_0x44d921-0x0;var _0x555ede=a26_0x2f83[_0x44d921];return _0x555ede;};'use strict';var __awaiter=this&&this[a26_0x3654('0x0')]||function(_0x5d3f60,_0x14406b,_0x4a5c05,_0x2d0b47){function _0x13e295(_0x1364fb){return _0x1364fb instanceof _0x4a5c05?_0x1364fb:new _0x4a5c05(function(_0x2165bd){_0x2165bd(_0x1364fb);});}return new(_0x4a5c05||(_0x4a5c05=Promise))(function(_0x376445,_0x401592){function _0x545a42(_0x457e09){try{_0x313786(_0x2d0b47[a26_0x3654('0x1')](_0x457e09));}catch(_0x555108){_0x401592(_0x555108);}}function _0x5d1e6e(_0x5e3916){try{_0x313786(_0x2d0b47[a26_0x3654('0x2')](_0x5e3916));}catch(_0x216daa){_0x401592(_0x216daa);}}function _0x313786(_0x49df59){_0x49df59[a26_0x3654('0x3')]?_0x376445(_0x49df59[a26_0x3654('0x4')]):_0x13e295(_0x49df59[a26_0x3654('0x4')])[a26_0x3654('0x5')](_0x545a42,_0x5d1e6e);}_0x313786((_0x2d0b47=_0x2d0b47[a26_0x3654('0x6')](_0x5d3f60,_0x14406b||[]))[a26_0x3654('0x1')]());});};Object['defineProperty'](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a26_0x3654('0x7'));const playerService_1=require(a26_0x3654('0x8'));const mediainfo=require(a26_0x3654('0x9'));const fs=require('fs');const url=require(a26_0x3654('0xa'));const http=require(a26_0x3654('0xb'));const fsExtra=require(a26_0x3654('0xc'));const request=require('request');const progress=require('request-progress');const spawn=require(a26_0x3654('0xd'))['spawn'];const exec=require(a26_0x3654('0xd'))[a26_0x3654('0xe')];const isImage=require(a26_0x3654('0xf'));const format=require(a26_0x3654('0x10'));const os=require('os');const youtubedl=require(a26_0x3654('0x11'));const uuidv4=require(a26_0x3654('0x12'));const configFile=a26_0x3654('0x13');const contextFile=a26_0x3654('0x14');const urlExists=require(a26_0x3654('0x15'));const kodi_rpc=require('node-kodi');const Downloader=require(a26_0x3654('0x16'));class SyncPlaylistsService{constructor(){this[a26_0x3654('0x17')]=a26_0x3654('0x18');this[a26_0x3654('0x19')]=this[a26_0x3654('0x17')]+a26_0x3654('0x1a');this[a26_0x3654('0x1b')]=this[a26_0x3654('0x17')]+a26_0x3654('0x1c');this['playListFile']=this[a26_0x3654('0x17')]+'playlist.txt';this['m3uFile']=this[a26_0x3654('0x1b')]+a26_0x3654('0x1d');this[a26_0x3654('0x1e')]=0x0;this['playlistChanged']=![];this[a26_0x3654('0x1f')]=[];this[a26_0x3654('0x20')]=[];this['newPlayList']={};this[a26_0x3654('0x21')]=a26_0x3654('0x22');this[a26_0x3654('0x23')]=a26_0x3654('0x24');this[a26_0x3654('0x25')]='.lulo123.';this[a26_0x3654('0x26')]=![];this['httpClientService']=new HttpClientService_1[(a26_0x3654('0x27'))]();this['playerService']=new playerService_1[(a26_0x3654('0x28'))]();}[a26_0x3654('0x29')](){this[a26_0x3654('0x2a')]=JSON[a26_0x3654('0x2b')](fs[a26_0x3654('0x2c')](configFile));this[a26_0x3654('0x2d')]=JSON['parse'](fs[a26_0x3654('0x2c')](contextFile));this[a26_0x3654('0x2e')]=this[a26_0x3654('0x2a')][a26_0x3654('0x2e')];this[a26_0x3654('0x2f')]=process['env'][a26_0x3654('0x30')]+a26_0x3654('0x31');this[a26_0x3654('0x32')]=this[a26_0x3654('0x2f')]+a26_0x3654('0x33');this[a26_0x3654('0x34')]=this['baseURL']+a26_0x3654('0x35');this['kodi']=new kodi_rpc({'url':this[a26_0x3654('0x21')],'user':this[a26_0x3654('0x23')],'password':this[a26_0x3654('0x25')]});this[a26_0x3654('0x36')]();this[a26_0x3654('0x37')]();this['checkFolders']();this[a26_0x3654('0x38')]();this['updateSettings']();setInterval(function(){this['getStatus']();}[a26_0x3654('0x39')](this),0x2710);setInterval(function(){this['registerClient']();}[a26_0x3654('0x39')](this),0x493e0);}[a26_0x3654('0x36')](){}[a26_0x3654('0x37')](){this[a26_0x3654('0x3a')][a26_0x3654('0x3b')][a26_0x3654('0x3c')](0x1)[a26_0x3654('0x5')](function(_0x313653){const _0x2c365f=JSON[a26_0x3654('0x3d')](_0x313653);const _0x5beaaa={'player_id':this[a26_0x3654('0x2e')],'device_uuid':this[a26_0x3654('0x2a')]['deviceUuid'],'network_info':JSON[a26_0x3654('0x3d')](os[a26_0x3654('0x3e')]()),'firmware_info':JSON[a26_0x3654('0x3d')](this[a26_0x3654('0x2d')][a26_0x3654('0x3f')]),'playlist':_0x2c365f,'playing_item':'','status':0x0};this[a26_0x3654('0x40')][a26_0x3654('0x41')](a26_0x3654('0x42'),_0x5beaaa,![])[a26_0x3654('0x5')](function(_0x465f4e){console[a26_0x3654('0x43')](a26_0x3654('0x44')+Date());})['catch'](function(_0x3eca4a){});console[a26_0x3654('0x43')](_0x5beaaa);}['bind'](this));const _0x56010b=this[a26_0x3654('0x2a')][a26_0x3654('0x45')];if(!_0x56010b||_0x56010b==''){this[a26_0x3654('0x2a')][a26_0x3654('0x45')]=uuidv4();this[a26_0x3654('0x2a')]={'deviceUuid':this['config'][a26_0x3654('0x45')],'playerId':this['config'][a26_0x3654('0x2e')]};fs[a26_0x3654('0x46')](configFile,JSON[a26_0x3654('0x3d')](this[a26_0x3654('0x2a')]));}}[a26_0x3654('0x47')](){console[a26_0x3654('0x43')](a26_0x3654('0x47'));this[a26_0x3654('0x3a')][a26_0x3654('0x48')][a26_0x3654('0x49')]()[a26_0x3654('0x5')](function(_0x4450e3){const _0x30c5e1=_0x4450e3[a26_0x3654('0x4a')]['label'];this[a26_0x3654('0x4b')](_0x30c5e1);}[a26_0x3654('0x39')](this))[a26_0x3654('0x4c')](function(_0x4ad611){console[a26_0x3654('0x43')](_0x4ad611);this[a26_0x3654('0x4b')](JSON[a26_0x3654('0x3d')](_0x4ad611));}['bind'](this));}[a26_0x3654('0x4b')](_0x1567ed){console[a26_0x3654('0x43')](a26_0x3654('0x4d')+_0x1567ed);const _0x4c5766={'player_id':this[a26_0x3654('0x2e')],'device_uuid':this[a26_0x3654('0x2a')][a26_0x3654('0x45')],'status':_0x1567ed!=''&&_0x1567ed!=null?0x1:0x0,'playing_item':_0x1567ed};this['httpClientService'][a26_0x3654('0x41')]('http://restapi.lulo.run/player_devices/report_status',_0x4c5766,![])[a26_0x3654('0x5')](function(_0x577354){console['log'](a26_0x3654('0x4e'));})[a26_0x3654('0x4c')](function(_0x128553){});}['checkFolders'](){fsExtra[a26_0x3654('0x4f')](this[a26_0x3654('0x17')],_0xe99534=>{});fsExtra['ensureDir'](this[a26_0x3654('0x19')],_0x176cda=>{});fsExtra[a26_0x3654('0x4f')](this[a26_0x3654('0x1b')],_0x3a2edc=>{});}[a26_0x3654('0x38')](){const _0x5c8cbf=format(this['playListServiceURL'],this[a26_0x3654('0x2e')]);console[a26_0x3654('0x43')](_0x5c8cbf);request({'url':_0x5c8cbf,'json':!![]},function(_0x341844,_0xd5aec7,_0x429666){console[a26_0x3654('0x43')](a26_0x3654('0x50'));this[a26_0x3654('0x51')]=_0x429666;this['playlistChanged']=this['hasPlayListChanged']();fsExtra['emptyDirSync'](this[a26_0x3654('0x19')]);this[a26_0x3654('0x1f')]=[];this['failDownloadFiles']=[];this['currentFile']=0x0;for(const _0x439ce6 in _0x429666){this['downloadFiles'][a26_0x3654('0x52')](_0x429666[_0x439ce6]);}console['log'](a26_0x3654('0x53')+this[a26_0x3654('0x1f')][a26_0x3654('0x54')]);if(this[a26_0x3654('0x1f')][a26_0x3654('0x54')]>0x0){this[a26_0x3654('0x55')]();}}[a26_0x3654('0x39')](this));}[a26_0x3654('0x56')](){this['forceReload']=!![];if(fsExtra[a26_0x3654('0x57')](this[a26_0x3654('0x19')])){fsExtra[a26_0x3654('0x58')](this[a26_0x3654('0x19')]);}if(fsExtra[a26_0x3654('0x57')](this[a26_0x3654('0x1b')])){fsExtra[a26_0x3654('0x58')](this[a26_0x3654('0x1b')]);}if(!fsExtra[a26_0x3654('0x57')](this[a26_0x3654('0x59')])){fsExtra[a26_0x3654('0x5a')](this[a26_0x3654('0x59')]);}if(!fsExtra[a26_0x3654('0x57')](this[a26_0x3654('0x5b')])){fsExtra[a26_0x3654('0x5a')](this[a26_0x3654('0x5b')]);}this[a26_0x3654('0x38')]();}['hasPlayListChanged'](){const _0x5bcace=JSON[a26_0x3654('0x3d')](this[a26_0x3654('0x51')]);try{if(!fsExtra[a26_0x3654('0x57')](this[a26_0x3654('0x59')])){return!![];}else{const _0x5b11c1=fsExtra[a26_0x3654('0x2c')](this[a26_0x3654('0x59')])[a26_0x3654('0x5c')]();if(_0x5b11c1!=_0x5bcace){return!![];}}}catch(_0x29365a){console[a26_0x3654('0x43')](_0x29365a);}return![];}[a26_0x3654('0x55')](){console['log'](a26_0x3654('0x5d')+this[a26_0x3654('0x1e')]+a26_0x3654('0x5e')+this[a26_0x3654('0x1f')][a26_0x3654('0x54')]);if(this[a26_0x3654('0x1e')]>=this[a26_0x3654('0x1f')]['length']){this[a26_0x3654('0x5f')]();return;}const _0x2f41e7=String(this[a26_0x3654('0x1f')][this['currentFile']][a26_0x3654('0x60')]);const _0x489c50=this[a26_0x3654('0x1f')][this[a26_0x3654('0x1e')]][a26_0x3654('0x61')];let _0x4d4e15=_0x2f41e7[a26_0x3654('0x62')](_0x2f41e7[a26_0x3654('0x63')]('/')+0x1);const _0x3b8494=_0x4d4e15[a26_0x3654('0x64')]('.')[a26_0x3654('0x65')](0x0,-0x1)[a26_0x3654('0x66')]('.');let _0x8332b8=this[a26_0x3654('0x2f')]+_0x2f41e7;const _0x34e768=_0x8332b8[a26_0x3654('0x64')]('.')[a26_0x3654('0x65')](0x0,-0x1)[a26_0x3654('0x66')]('.');if(_0x489c50==a26_0x3654('0x67')){_0x4d4e15=_0x4d4e15+'.mp4';}else if(_0x489c50==a26_0x3654('0x68')){_0x4d4e15=_0x3b8494+'.mp4';_0x8332b8=_0x34e768+a26_0x3654('0x69');}console[a26_0x3654('0x43')](a26_0x3654('0x6a'));console[a26_0x3654('0x43')](_0x2f41e7);console['log'](_0x489c50);console[a26_0x3654('0x43')](_0x4d4e15);console[a26_0x3654('0x43')](_0x8332b8);console[a26_0x3654('0x43')](_0x3b8494);console[a26_0x3654('0x43')](_0x34e768);console[a26_0x3654('0x43')](a26_0x3654('0x6a'));if(fsExtra[a26_0x3654('0x57')](this[a26_0x3654('0x19')]+_0x4d4e15)){this[a26_0x3654('0x6b')](this[a26_0x3654('0x19')]+_0x4d4e15)[a26_0x3654('0x5')](function(_0x3e5ac8){if(_0x3e5ac8){this[a26_0x3654('0x1e')]++;}else{this[a26_0x3654('0x6c')]=!![];}this[a26_0x3654('0x55')]();}[a26_0x3654('0x39')](this));}else if(fsExtra[a26_0x3654('0x57')](this[a26_0x3654('0x1b')]+_0x4d4e15)){this[a26_0x3654('0x6b')](this[a26_0x3654('0x1b')]+_0x4d4e15)['then'](function(_0x580d73){if(_0x580d73){fsExtra[a26_0x3654('0x6d')](this[a26_0x3654('0x1b')]+_0x4d4e15,this[a26_0x3654('0x19')]+_0x4d4e15);this[a26_0x3654('0x1e')]++;}else{this[a26_0x3654('0x6c')]=!![];}this[a26_0x3654('0x55')]();}[a26_0x3654('0x39')](this));}else{console[a26_0x3654('0x43')](a26_0x3654('0x6e')+_0x8332b8);this[a26_0x3654('0x6c')]=!![];if(_0x489c50==a26_0x3654('0x67')){this[a26_0x3654('0x6f')](_0x2f41e7);}else{this[a26_0x3654('0x70')](_0x8332b8,_0x4d4e15,_0x489c50);}}}['checkVideo'](_0x52c7ec){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x3654('0x43')](a26_0x3654('0x71')+_0x52c7ec);const _0x27469b=yield mediainfo(_0x52c7ec)[a26_0x3654('0x4c')](_0x4cb48d=>{console[a26_0x3654('0x43')](_0x4cb48d);fsExtra[a26_0x3654('0x5a')](_0x52c7ec);return![];});const _0x212156=_0x27469b[a26_0x3654('0x72')]['track'][a26_0x3654('0x54')]>0x1&&_0x27469b[a26_0x3654('0x72')][a26_0x3654('0x73')][0x1][a26_0x3654('0x74')]=='Video';if(!_0x212156){fsExtra[a26_0x3654('0x5a')](_0x52c7ec);}console[a26_0x3654('0x43')](a26_0x3654('0x75')+_0x212156);return _0x212156;});}[a26_0x3654('0x70')](_0x2d0d47,_0x207a76,_0x30fea){const _0x58385e=new Downloader();console['log'](_0x2d0d47);console[a26_0x3654('0x43')](_0x207a76);console[a26_0x3654('0x43')](_0x30fea);const _0x28df2e=_0x58385e[a26_0x3654('0x55')](_0x2d0d47,this['tempFolder']+_0x207a76);urlExists(_0x2d0d47,function(_0x150f2b,_0x10261b){if(_0x10261b){if(this['failDownloadFiles']['includes'](this[a26_0x3654('0x1e')])){const _0x2d259e=this[a26_0x3654('0x20')][a26_0x3654('0x76')](this['currentFile']);if(_0x2d259e>-0x1){this['failDownloadFiles'][a26_0x3654('0x77')](_0x2d259e,0x1);}}console[a26_0x3654('0x43')](a26_0x3654('0x78')+_0x2d0d47);_0x28df2e[a26_0x3654('0x79')]();}else{if(!this[a26_0x3654('0x20')]['includes'](this[a26_0x3654('0x1e')])){this[a26_0x3654('0x20')][a26_0x3654('0x52')](this['currentFile']);}console[a26_0x3654('0x43')]('Error:\x20'+_0x2d0d47);this[a26_0x3654('0x1e')]++;this[a26_0x3654('0x55')]();}}[a26_0x3654('0x39')](this));_0x28df2e['on'](a26_0x3654('0x79'),function(_0x28df2e){console[a26_0x3654('0x43')](a26_0x3654('0x7a')+_0x2d0d47);});_0x28df2e['on'](a26_0x3654('0x7b'),function(_0x28df2e){console[a26_0x3654('0x43')](a26_0x3654('0x7c'));this[a26_0x3654('0x55')]();}[a26_0x3654('0x39')](this));_0x28df2e['on'](a26_0x3654('0x7d'),function(_0x28df2e){console['log'](a26_0x3654('0x7d'));console[a26_0x3654('0x43')](a26_0x3654('0x7e')+_0x207a76);console['log'](a26_0x3654('0x7f')+_0x30fea);this['checkVideo'](this[a26_0x3654('0x19')]+_0x207a76)[a26_0x3654('0x5')](function(_0x3e39b2){if(_0x3e39b2){this[a26_0x3654('0x1e')]++;}this[a26_0x3654('0x55')]();}['bind'](this));}[a26_0x3654('0x39')](this));_0x28df2e['on']('stopped',function(_0x28df2e){console[a26_0x3654('0x43')](a26_0x3654('0x80'));});_0x28df2e['on'](a26_0x3654('0x81'),function(_0x28df2e){console[a26_0x3654('0x43')](a26_0x3654('0x81'));});_0x28df2e['on'](a26_0x3654('0x82'),function(_0x28df2e){console[a26_0x3654('0x43')](a26_0x3654('0x82'));});}[a26_0x3654('0x83')](_0x1ad13f,_0x21aa8e,_0x3de06e,_0x23a663){console[a26_0x3654('0x43')](a26_0x3654('0x83'));console[a26_0x3654('0x43')](_0x1ad13f);const _0x5939d6=!![];let _0xfca4a6=0x0;const _0x25964f='';console[a26_0x3654('0x43')]('Attempting\x20to\x20download\x20'+_0x1ad13f+'\x20to\x20'+_0x21aa8e);if(_0xfca4a6){if(_0xfca4a6>0x5){_0x23a663(a26_0x3654('0x84'),_0x1ad13f,_0x3de06e,null);return;}}else{_0xfca4a6=0x0;}const _0x7f822c=this[a26_0x3654('0x19')]+_0x21aa8e;let _0x2ae116;if(_0x23a663===undefined){console[a26_0x3654('0x43')](a26_0x3654('0x85')+_0x1ad13f+a26_0x3654('0x86')+_0x7f822c);_0x23a663=function(_0xe0640a,_0x4c2148){console[a26_0x3654('0x43')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0xe0640a,_0x4c2148);};}http['globalAgent'][a26_0x3654('0x87')]=0x64;const _0x1756b3={'host':url[a26_0x3654('0x2b')](_0x1ad13f)[a26_0x3654('0x88')],'port':0x50,'path':url[a26_0x3654('0x2b')](_0x1ad13f)[a26_0x3654('0x89')],'agent':![]};const _0x1160fd=http[a26_0x3654('0x8a')](_0x1756b3,function(_0x307536){let _0x5af56b=0x0;let _0x41ad3e=0x0;function _0x3a3775(){if(_0x5af56b===undefined){console[a26_0x3654('0x43')](_0x21aa8e+'\x20Progress:\x20unknown\x09'+_0x41ad3e+'/'+'?');}const _0x528d7d=_0x41ad3e/_0x5af56b*0x64;console[a26_0x3654('0x43')](_0x21aa8e+a26_0x3654('0x8b')+_0x528d7d+'%\x09'+_0x41ad3e+'/'+_0x5af56b);}console[a26_0x3654('0x43')](_0x21aa8e+'\x20'+_0x307536['statusCode']);switch(_0x307536[a26_0x3654('0x8c')]){case 0xc8:_0x5af56b=_0x307536[a26_0x3654('0x8d')][a26_0x3654('0x8e')]||_0x25964f;fs[a26_0x3654('0x8f')](_0x7f822c,function(_0xf06355,_0x54340a){if(!_0xf06355){console['log'](a26_0x3654('0x90')+_0x7f822c);if(_0x54340a[a26_0x3654('0x91')]==_0x5af56b){console[a26_0x3654('0x43')]('And\x20the\x20file\x20size\x20matches\x20('+_0x5af56b+')');console[a26_0x3654('0x43')]('Redownloading');}else{console[a26_0x3654('0x43')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x54340a[a26_0x3654('0x91')]+')\x20vs\x20New('+_0x5af56b+')');}}_0x2ae116=fs[a26_0x3654('0x92')](_0x7f822c);_0x307536[a26_0x3654('0x93')](_0x2ae116);_0x307536['on']('data',function(_0x2d70ae){_0x41ad3e+=_0x2d70ae[a26_0x3654('0x54')];_0x3a3775();});_0x1160fd['on'](a26_0x3654('0x7b'),function(_0xf06355){console[a26_0x3654('0x43')](a26_0x3654('0x94'));console[a26_0x3654('0x43')](_0xf06355);});_0x2ae116['on'](a26_0x3654('0x95'),function(){console[a26_0x3654('0x43')](a26_0x3654('0x96')+_0x1ad13f+a26_0x3654('0x86')+_0x21aa8e);_0x23a663(null,_0x21aa8e,_0x3de06e,_0x21aa8e);}[a26_0x3654('0x39')](this));});break;case 0x12e:const _0x4adee1=_0x307536['headers'][a26_0x3654('0x97')];console[a26_0x3654('0x43')](a26_0x3654('0x98')+_0x1ad13f+a26_0x3654('0x86')+_0x4adee1);if(_0xfca4a6<0x5){this[a26_0x3654('0x83')](_0x4adee1,_0x21aa8e,_0x23a663,_0xfca4a6++);}else{console[a26_0x3654('0x7b')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x1ad13f+'.');_0x23a663(a26_0x3654('0x99'),null,null,null);}return;case 0x194:console[a26_0x3654('0x43')](a26_0x3654('0x9a')+_0x1ad13f);default:console[a26_0x3654('0x43')](a26_0x3654('0x9b')+_0x1ad13f+a26_0x3654('0x9c')+_0x307536[a26_0x3654('0x8c')]);_0x1160fd['abort']();_0x23a663(_0x307536['statusCode'],null,null,null);return;}})['on'](a26_0x3654('0x7b'),function(_0x1483e7){console['log'](a26_0x3654('0x9d')+_0x1ad13f+'\x20'+_0x1483e7[a26_0x3654('0x9e')]);_0x23a663(_0x1483e7,null,null,null);});}['downloadHTTPFileCallback'](_0x42c203,_0x420b16,_0x239436,_0x433976){console[a26_0x3654('0x43')]('downloadHTTPFileCallback');console[a26_0x3654('0x43')](_0x42c203);console[a26_0x3654('0x43')](_0x420b16);console['log'](_0x239436);console[a26_0x3654('0x43')](_0x433976);if(_0x239436==a26_0x3654('0x68')){const _0x3ac01c=this[a26_0x3654('0x1f')][this['currentFile']][a26_0x3654('0x9f')]!=null?this[a26_0x3654('0x1f')][this[a26_0x3654('0x1e')]][a26_0x3654('0x9f')]:0x1e;this[a26_0x3654('0xa0')](_0x433976,_0x3ac01c);}else if(_0x239436=='video'){if(_0x42c203==null&&_0x420b16!=''){this[a26_0x3654('0x1e')]++;}this['download']();}console['log'](this['currentFile']);}['downloadRequestFile'](_0x400c8a,_0x190998,_0x5594ed){progress(request(_0x400c8a),{})['on']('progress',function(_0x10f70b){console[a26_0x3654('0x43')](_0x10f70b);})['on'](a26_0x3654('0x7b'),function(_0x516d08){console[a26_0x3654('0x43')](a26_0x3654('0xa1'));this[a26_0x3654('0x55')]();})['on']('end',function(){console[a26_0x3654('0x43')](a26_0x3654('0x7e')+_0x190998);console[a26_0x3654('0x43')](a26_0x3654('0x7f')+_0x5594ed);if(_0x5594ed==a26_0x3654('0x68')){const _0x14b464=this[a26_0x3654('0x1f')][this[a26_0x3654('0x1e')]][a26_0x3654('0x9f')]!=null?this[a26_0x3654('0x1f')][this[a26_0x3654('0x1e')]][a26_0x3654('0x9f')]:0x1e;this[a26_0x3654('0xa0')](_0x190998,_0x14b464);}else if(_0x5594ed==a26_0x3654('0xa2')){this[a26_0x3654('0x1e')]++;this['download']();}}['bind'](this))[a26_0x3654('0x93')](fs[a26_0x3654('0x92')](this[a26_0x3654('0x19')]+_0x190998));}[a26_0x3654('0xa0')](_0x114841,_0x152ee4=0x1e){const _0x4d4b4d=this[a26_0x3654('0x19')]+_0x114841;console['log'](_0x4d4b4d);console[a26_0x3654('0x43')](_0x114841);const _0x2aab32=_0x114841[a26_0x3654('0x64')]('.')[a26_0x3654('0x65')](0x0,-0x1)['join']('.');const _0x1221c7=a26_0x3654('0xa3');const _0xa52969=['-y','-r','1/2',a26_0x3654('0xa4'),'1','-pattern_type',a26_0x3654('0xa5'),'-i',_0x4d4b4d,'-t',String(_0x152ee4),a26_0x3654('0xa6'),a26_0x3654('0xa7'),a26_0x3654('0xa8'),a26_0x3654('0xa9'),'-r','25','-vf','scale=1920:1080',this['tempFolder']+_0x2aab32+a26_0x3654('0x69')];const _0x1a6f2a=spawn(_0x1221c7,_0xa52969);_0x1a6f2a[a26_0x3654('0xaa')]['on'](a26_0x3654('0xab'),function(_0xd56e29){console[a26_0x3654('0x43')](a26_0x3654('0xac')+_0x4d4b4d);});_0x1a6f2a[a26_0x3654('0xad')]['on'](a26_0x3654('0xab'),function(_0x3d43cf){console[a26_0x3654('0x43')](a26_0x3654('0xae')+_0x3d43cf);}[a26_0x3654('0x39')](this));_0x1a6f2a['on']('close',function(){console['log'](a26_0x3654('0xaf'));this['currentFile']++;this[a26_0x3654('0x55')]();}[a26_0x3654('0x39')](this));}[a26_0x3654('0x6f')](_0x4ae369){const _0x33418f=this[a26_0x3654('0x19')]+'/'+_0x4ae369+a26_0x3654('0x69');const _0x130097=a26_0x3654('0xb0')+_0x4ae369;console[a26_0x3654('0x43')](a26_0x3654('0xb1')+_0x130097);console['log'](a26_0x3654('0xb2')+_0x33418f);const _0x2007b3=youtubedl(_0x130097,[a26_0x3654('0xb3'),a26_0x3654('0xb4')],{'cwd':__dirname});_0x2007b3['on'](a26_0x3654('0xb5'),function(_0x45995e){console[a26_0x3654('0x43')](a26_0x3654('0xb6'));console['log'](a26_0x3654('0xb7')+_0x45995e['_filename']);console['log'](a26_0x3654('0xb8')+_0x45995e[a26_0x3654('0x91')]);});_0x2007b3['on'](a26_0x3654('0xb9'),function complete(_0x5cbe54){'use strict';console[a26_0x3654('0x43')](a26_0x3654('0xb7')+_0x5cbe54[a26_0x3654('0xba')]+a26_0x3654('0xbb'));});_0x2007b3['on'](a26_0x3654('0x7d'),function(){console[a26_0x3654('0x43')](a26_0x3654('0xbc'));this['checkVideo'](_0x33418f)['then'](function(_0x140e32){if(_0x140e32){this[a26_0x3654('0x1e')]++;}this[a26_0x3654('0x55')]();}['bind'](this));}['bind'](this));_0x2007b3[a26_0x3654('0x93')](fs['createWriteStream'](_0x33418f));}['finishProcess'](){console[a26_0x3654('0x43')](a26_0x3654('0xbd'));if(this[a26_0x3654('0x6c')]){if(this[a26_0x3654('0x20')][a26_0x3654('0x54')]==0x0){console['log']('this.playListFile:\x20'+this[a26_0x3654('0x59')]);fs[a26_0x3654('0x46')](this['playListFile'],JSON[a26_0x3654('0x3d')](this['newPlayList']));let _0x3a43ae=a26_0x3654('0xbe')+'\x0d\x0a'+a26_0x3654('0xbf')+'\x0d\x0a';for(const _0x47ccb7 in this[a26_0x3654('0x1f')]){const _0x3526c7=this[a26_0x3654('0x1f')][_0x47ccb7]['path'];const _0xd84c20=this[a26_0x3654('0x1f')][_0x47ccb7][a26_0x3654('0x61')];const _0x41d999=_0x3526c7[a26_0x3654('0x62')](_0x3526c7[a26_0x3654('0x63')]('/')+0x1);let _0x54b790=_0x41d999[a26_0x3654('0x64')]('.')[a26_0x3654('0x65')](0x0,-0x1)[a26_0x3654('0x66')]('.');if(_0xd84c20==a26_0x3654('0x67')){_0x54b790=_0x3526c7;}_0x3a43ae+='/home/osmc/luloclient/media/files/'+_0x54b790+a26_0x3654('0x69')+'\x0d\x0a';console[a26_0x3654('0x43')](a26_0x3654('0xc0')+_0x3a43ae);}console[a26_0x3654('0x43')](a26_0x3654('0xc0')+_0x3a43ae);fsExtra['emptyDirSync'](this[a26_0x3654('0x1b')]);console[a26_0x3654('0x43')](a26_0x3654('0xc1')+this[a26_0x3654('0x19')]);fsExtra[a26_0x3654('0x6d')](this[a26_0x3654('0x19')],this[a26_0x3654('0x1b')]);console[a26_0x3654('0x43')](a26_0x3654('0xc2')+this[a26_0x3654('0x5b')]);fsExtra['writeFileSync'](this[a26_0x3654('0x5b')],_0x3a43ae);console[a26_0x3654('0x43')]('emptyDirSync:\x20'+this[a26_0x3654('0x19')]);fsExtra['emptyDirSync'](this[a26_0x3654('0x19')]);console['log'](a26_0x3654('0xc3'));this['reboot']();}else{console['log'](a26_0x3654('0xc4'));this[a26_0x3654('0x1e')]=0x0;setTimeout(function(){this['download']();}[a26_0x3654('0x39')](this),0x1388);}}else{console[a26_0x3654('0x43')](a26_0x3654('0xc5'));}}[a26_0x3654('0xc6')](){this[a26_0x3654('0xc7')](a26_0x3654('0xc8'),{'playlistid':0x1},function(_0x52e7ad){console[a26_0x3654('0x43')](a26_0x3654('0xc9'));console[a26_0x3654('0x43')](_0x52e7ad);this['jsonrpcClient'](a26_0x3654('0xca'),{'item':{'file':a26_0x3654('0xcb')},'playlistid':0x1},function(_0x52e7ad){console[a26_0x3654('0x43')](a26_0x3654('0xcc'));console[a26_0x3654('0x43')](_0x52e7ad);this[a26_0x3654('0xc7')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x52e7ad){console[a26_0x3654('0x43')]('Playlist.Opened');console[a26_0x3654('0x43')](_0x52e7ad);this[a26_0x3654('0xcd')](a26_0x3654('0xce'));}['bind'](this));}['bind'](this));}[a26_0x3654('0x39')](this));}[a26_0x3654('0xcf')](){console['log'](a26_0x3654('0xd0'));exec('sudo\x20/sbin/reboot\x20-f',function(_0x237d0a){console[a26_0x3654('0x43')](_0x237d0a);});}[a26_0x3654('0xd1')](){const _0x2c92e4=format(this[a26_0x3654('0x34')],this[a26_0x3654('0x2e')]);console[a26_0x3654('0x43')](_0x2c92e4);request({'url':_0x2c92e4,'json':!![]},function(_0x456d27,_0x77ade2,_0x463573){if(_0x463573[a26_0x3654('0x54')]>0x0){const _0x1a72e=_0x463573[0x0];const _0x184394=_0x1a72e[a26_0x3654('0xd2')];const _0x177098=_0x1a72e[a26_0x3654('0xd3')]==0x1;this[a26_0x3654('0xd4')](_0x184394);this[a26_0x3654('0xd5')](_0x177098);this[a26_0x3654('0x37')]();}console['log'](_0x463573);}[a26_0x3654('0x39')](this));}[a26_0x3654('0xd6')](){this['kodiCommandClient'](a26_0x3654('0xd7'));}['turnOnTV'](){this[a26_0x3654('0xcd')](a26_0x3654('0xd8'));}[a26_0x3654('0xd4')](_0x421412){const _0x16c71a=_0x421412!=null&&_0x421412!='';const _0x40071c='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra['existsSync'](_0x40071c)){const _0x2ee77a=fsExtra[a26_0x3654('0x2c')](_0x40071c);console[a26_0x3654('0x43')](a26_0x3654('0xd9')+_0x2ee77a);const _0x3def83=require(a26_0x3654('0xda'));const _0x18746b=_0x3def83[a26_0x3654('0xdb')];_0x18746b(_0x2ee77a,function(_0x851c4f,_0x30fb18){console[a26_0x3654('0x43')](a26_0x3654('0xdc'),_0x851c4f);console[a26_0x3654('0x43')](a26_0x3654('0xdd'),_0x30fb18);if(!_0x421412||_0x421412==null||_0x421412==''){_0x421412=a26_0x3654('0xde');}_0x30fb18[a26_0x3654('0xdf')][a26_0x3654('0xe0')][0x0][a26_0x3654('0xe1')][0x0]['_']=_0x421412;const _0x512c0e=new _0x3def83['Builder']();const _0x26e41a=_0x512c0e[a26_0x3654('0xe2')](_0x30fb18);console['log'](a26_0x3654('0xe3'),_0x26e41a);fsExtra[a26_0x3654('0x46')](_0x40071c,_0x26e41a);});this['kodiCommandClient'](a26_0x3654('0xe4'));this['jsonrpcClient'](a26_0x3654('0xe5'),{'setting':'lookandfeel.enablerssfeeds','value':_0x16c71a},function(_0x58a0c1){console[a26_0x3654('0x43')]('setRss:');console[a26_0x3654('0x43')](_0x58a0c1);}[a26_0x3654('0x39')](this));}}[a26_0x3654('0xd5')](_0x452ec7){this['jsonrpcClient'](a26_0x3654('0xe5'),{'setting':'videoplayer.usedisplayasclock','value':_0x452ec7},function(_0x59fb62){console['log']('enableClock:\x20');console[a26_0x3654('0x43')](_0x59fb62);}[a26_0x3654('0x39')](this));}[a26_0x3654('0xcd')](_0x352f02){exec(a26_0x3654('0xe6')+_0x352f02+'\x22',function(_0x521829){console[a26_0x3654('0x43')](_0x521829);});}[a26_0x3654('0xc7')](_0x38f5a8,_0x165993,_0x3b95af){const _0x2fb01e={'jsonrpc':'2.0','method':_0x38f5a8,'params':_0x165993,'id':0x1};const _0x4c4cac={'user':this[a26_0x3654('0x23')],'pass':this['kodiPassword']};console[a26_0x3654('0x43')]('jsonrpcClient\x20data',_0x2fb01e);console[a26_0x3654('0x43')]('jsonrpcClient\x20options',_0x4c4cac);this[a26_0x3654('0x40')][a26_0x3654('0x41')](this[a26_0x3654('0x21')]+a26_0x3654('0xe7'),_0x2fb01e,![],_0x4c4cac)['then'](function(_0x29d295){_0x3b95af(_0x29d295);})[a26_0x3654('0x4c')](function(_0x45831c){});}}exports[a26_0x3654('0xe8')]=SyncPlaylistsService;