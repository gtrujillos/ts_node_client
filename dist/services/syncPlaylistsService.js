var a22_0x5282=['end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','host','get','\x20Progress:\x20unknown\x09','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','downloadRequestFile','progress','createImageVideo','ffmpeg','-loop','-pattern_type','glob','libx264','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','filename:\x20','_filename','size:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','writeFileSync','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','Rebooting..','shutdown','now','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','__esModule','../infrastructure/HttpClientService','http','fs-extra','request','child_process','spawn','string-template','youtube-dl','config.json','url-exists','node-kodi','tempFolder','mediaFolder','temp/','filesFolder','files/','playListFile','playlist.txt','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','HttpClientService','init','config','parse','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','lulo','.lulo123.','checkDependencies','registerClient','checkFolders','loadMediaList','bind','playlist','getItems','stringify','networkInterfaces','context','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','deviceUuid','getStatus','player','reportStatus','playingItem:\x20','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','m3uFile','toString','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','removeSync','media','track','Video','mediainfo\x20check:','includes','indexOf','downloading:\x20','start','Error:\x20','error','error:\x20'];(function(_0x378431,_0x19355c){var _0x3db4f1=function(_0x519f00){while(--_0x519f00){_0x378431['push'](_0x378431['shift']());}};_0x3db4f1(++_0x19355c);}(a22_0x5282,0xfb));var a22_0x17b8=function(_0x4085a4,_0x5c35fd){_0x4085a4=_0x4085a4-0x0;var _0xa9a9d5=a22_0x5282[_0x4085a4];return _0xa9a9d5;};'use strict';var __awaiter=this&&this[a22_0x17b8('0x0')]||function(_0x5d0a94,_0x4b2f8d,_0x2b3501,_0x1bebd5){function _0x5b880c(_0x4430b0){return _0x4430b0 instanceof _0x2b3501?_0x4430b0:new _0x2b3501(function(_0x3711bc){_0x3711bc(_0x4430b0);});}return new(_0x2b3501||(_0x2b3501=Promise))(function(_0xfb4714,_0x54f020){function _0x378d78(_0x303c37){try{_0xeccdaf(_0x1bebd5[a22_0x17b8('0x1')](_0x303c37));}catch(_0x9f3e64){_0x54f020(_0x9f3e64);}}function _0x2afd1f(_0x2db5b0){try{_0xeccdaf(_0x1bebd5[a22_0x17b8('0x2')](_0x2db5b0));}catch(_0x546ac1){_0x54f020(_0x546ac1);}}function _0xeccdaf(_0x51da16){_0x51da16[a22_0x17b8('0x3')]?_0xfb4714(_0x51da16['value']):_0x5b880c(_0x51da16[a22_0x17b8('0x4')])[a22_0x17b8('0x5')](_0x378d78,_0x2afd1f);}_0xeccdaf((_0x1bebd5=_0x1bebd5[a22_0x17b8('0x6')](_0x5d0a94,_0x4b2f8d||[]))[a22_0x17b8('0x1')]());});};Object['defineProperty'](exports,a22_0x17b8('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x17b8('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require('url');const http=require(a22_0x17b8('0x9'));const fsExtra=require(a22_0x17b8('0xa'));const request=require(a22_0x17b8('0xb'));const progress=require('request-progress');const spawn=require(a22_0x17b8('0xc'))[a22_0x17b8('0xd')];const isImage=require('is-image');const format=require(a22_0x17b8('0xe'));const os=require('os');const youtubedl=require(a22_0x17b8('0xf'));const uuidv4=require('uuid/v4');const configFile=a22_0x17b8('0x10');const contextFile='context.json';const urlExists=require(a22_0x17b8('0x11'));const kodi_rpc=require(a22_0x17b8('0x12'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']='media/';this[a22_0x17b8('0x13')]=this[a22_0x17b8('0x14')]+a22_0x17b8('0x15');this[a22_0x17b8('0x16')]=this[a22_0x17b8('0x14')]+a22_0x17b8('0x17');this[a22_0x17b8('0x18')]=this[a22_0x17b8('0x14')]+a22_0x17b8('0x19');this['m3uFile']=this[a22_0x17b8('0x16')]+'lulo_playlist.m3u';this[a22_0x17b8('0x1a')]=0x0;this[a22_0x17b8('0x1b')]=![];this[a22_0x17b8('0x1c')]=[];this[a22_0x17b8('0x1d')]=[];this[a22_0x17b8('0x1e')]={};this['httpClientService']=new HttpClientService_1[(a22_0x17b8('0x1f'))]();}[a22_0x17b8('0x20')](){this[a22_0x17b8('0x21')]=JSON[a22_0x17b8('0x22')](fs[a22_0x17b8('0x23')](configFile));this['context']=JSON[a22_0x17b8('0x22')](fs[a22_0x17b8('0x23')](contextFile));this[a22_0x17b8('0x24')]=this['config']['playerId'];this[a22_0x17b8('0x25')]=process[a22_0x17b8('0x26')][a22_0x17b8('0x27')]+a22_0x17b8('0x28');this[a22_0x17b8('0x29')]=this[a22_0x17b8('0x25')]+a22_0x17b8('0x2a');this[a22_0x17b8('0x2b')]=new kodi_rpc({'url':'http://localhost','user':a22_0x17b8('0x2c'),'password':a22_0x17b8('0x2d')});this[a22_0x17b8('0x2e')]();this[a22_0x17b8('0x2f')]();this[a22_0x17b8('0x30')]();this[a22_0x17b8('0x31')]();setInterval(function(){this['getStatus']();}['bind'](this),0x2710);setInterval(function(){this[a22_0x17b8('0x2f')]();}[a22_0x17b8('0x32')](this),0x493e0);}[a22_0x17b8('0x2e')](){}[a22_0x17b8('0x2f')](){this[a22_0x17b8('0x2b')][a22_0x17b8('0x33')][a22_0x17b8('0x34')](0x1)['then'](function(_0x5bdc00){const _0x3dccae=JSON[a22_0x17b8('0x35')](_0x5bdc00);const _0x392757={'player_id':this['playerId'],'device_uuid':this[a22_0x17b8('0x21')]['deviceUuid'],'network_info':JSON[a22_0x17b8('0x35')](os[a22_0x17b8('0x36')]()),'firmware_info':JSON[a22_0x17b8('0x35')](this[a22_0x17b8('0x37')]),'playlist':_0x3dccae,'playing_item':'','status':0x0};this[a22_0x17b8('0x38')][a22_0x17b8('0x39')](a22_0x17b8('0x3a'),_0x392757,![])[a22_0x17b8('0x5')](function(_0x2f5ca5){console[a22_0x17b8('0x3b')](a22_0x17b8('0x3c')+Date());})[a22_0x17b8('0x3d')](function(_0x223113){});console[a22_0x17b8('0x3b')](_0x392757);}['bind'](this));const _0x5dc917=this[a22_0x17b8('0x21')]['deviceUuid'];if(!_0x5dc917||_0x5dc917==''){this[a22_0x17b8('0x21')][a22_0x17b8('0x3e')]=uuidv4();this[a22_0x17b8('0x21')]={'deviceUuid':this[a22_0x17b8('0x21')][a22_0x17b8('0x3e')],'playerId':this[a22_0x17b8('0x21')][a22_0x17b8('0x24')]};fs['writeFileSync'](configFile,JSON[a22_0x17b8('0x35')](this[a22_0x17b8('0x21')]));}}[a22_0x17b8('0x3f')](){console[a22_0x17b8('0x3b')]('getStatus');this[a22_0x17b8('0x2b')][a22_0x17b8('0x40')]['getCurrentlyPlayingVideo']()[a22_0x17b8('0x5')](function(_0x1764c5){const _0x1ac7be=_0x1764c5['item']['label'];this['reportStatus'](_0x1ac7be);}[a22_0x17b8('0x32')](this))['catch'](function(_0x5a84e0){console[a22_0x17b8('0x3b')](_0x5a84e0);this[a22_0x17b8('0x41')](_0x5a84e0);}[a22_0x17b8('0x32')](this));}[a22_0x17b8('0x41')](_0x14936b){console[a22_0x17b8('0x3b')](a22_0x17b8('0x42')+_0x14936b);const _0x3a889d={'player_id':this[a22_0x17b8('0x24')],'device_uuid':this[a22_0x17b8('0x21')][a22_0x17b8('0x3e')],'status':_0x14936b!=''&&_0x14936b!=null?0x1:0x0,'playing_item':_0x14936b};this[a22_0x17b8('0x38')]['post']('http://restapi.lulo.run/player_devices/report_status',_0x3a889d,![])[a22_0x17b8('0x5')](function(_0xec0905){console[a22_0x17b8('0x3b')](a22_0x17b8('0x43')+Date());})['catch'](function(_0x195006){});}[a22_0x17b8('0x30')](){fsExtra[a22_0x17b8('0x44')](this[a22_0x17b8('0x14')],_0x572e31=>{});fsExtra[a22_0x17b8('0x44')](this['tempFolder'],_0x310736=>{});fsExtra[a22_0x17b8('0x44')](this[a22_0x17b8('0x16')],_0x54e88c=>{});}[a22_0x17b8('0x31')](){const _0x2ba22e=format(this[a22_0x17b8('0x29')],this[a22_0x17b8('0x24')]);console['log'](_0x2ba22e);request({'url':_0x2ba22e,'json':!![]},function(_0x1a75f1,_0x835b64,_0xfb8282){console[a22_0x17b8('0x3b')](a22_0x17b8('0x45'));console[a22_0x17b8('0x3b')](_0xfb8282);this[a22_0x17b8('0x1e')]=_0xfb8282;this['playlistChanged']=this[a22_0x17b8('0x46')]();fsExtra[a22_0x17b8('0x47')](this[a22_0x17b8('0x13')]);this[a22_0x17b8('0x1c')]=[];this[a22_0x17b8('0x1d')]=[];this[a22_0x17b8('0x1a')]=0x0;for(const _0x24feb0 in _0xfb8282){this[a22_0x17b8('0x1c')][a22_0x17b8('0x48')](_0xfb8282[_0x24feb0]);}console[a22_0x17b8('0x3b')](a22_0x17b8('0x49')+this[a22_0x17b8('0x1c')][a22_0x17b8('0x4a')]);if(this[a22_0x17b8('0x1c')][a22_0x17b8('0x4a')]>0x0){this[a22_0x17b8('0x4b')]();}}['bind'](this));}[a22_0x17b8('0x4c')](){if(fsExtra[a22_0x17b8('0x4d')](this[a22_0x17b8('0x13')])){fsExtra[a22_0x17b8('0x47')](this[a22_0x17b8('0x13')]);}if(fsExtra[a22_0x17b8('0x4d')](this['playListFile'])){fsExtra['emptyDirSync'](this['playListFile']);}if(!fsExtra[a22_0x17b8('0x4d')](this[a22_0x17b8('0x18')])){fsExtra['removeSync'](this[a22_0x17b8('0x18')]);}if(!fsExtra[a22_0x17b8('0x4d')](this[a22_0x17b8('0x4e')])){fsExtra['removeSync'](this[a22_0x17b8('0x4e')]);}this['loadMediaList']();}['reboot'](){this[a22_0x17b8('0x2b')]['System']['Shutdown']();}[a22_0x17b8('0x46')](){const _0x4ec950=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a22_0x17b8('0x4d')](this[a22_0x17b8('0x18')])){return!![];}else{const _0xaeea0e=fsExtra['readFileSync'](this[a22_0x17b8('0x18')])[a22_0x17b8('0x4f')]();if(_0xaeea0e!=_0x4ec950){return!![];}}}catch(_0x4c3eb8){console[a22_0x17b8('0x3b')](_0x4c3eb8);}return![];}[a22_0x17b8('0x4b')](){console[a22_0x17b8('0x3b')]('this.currentFile:\x20'+this[a22_0x17b8('0x1a')]+a22_0x17b8('0x50')+this[a22_0x17b8('0x1c')][a22_0x17b8('0x4a')]);if(this[a22_0x17b8('0x1a')]>=this[a22_0x17b8('0x1c')][a22_0x17b8('0x4a')]){this[a22_0x17b8('0x51')]();return;}const _0x26ec46=String(this[a22_0x17b8('0x1c')][this[a22_0x17b8('0x1a')]][a22_0x17b8('0x52')]);const _0x48de12=this[a22_0x17b8('0x1c')][this[a22_0x17b8('0x1a')]][a22_0x17b8('0x53')];let _0x120e8a=_0x26ec46[a22_0x17b8('0x54')](_0x26ec46[a22_0x17b8('0x55')]('/')+0x1);const _0x3e06e8=_0x120e8a[a22_0x17b8('0x56')]('.')[a22_0x17b8('0x57')](0x0,-0x1)[a22_0x17b8('0x58')]('.');let _0x292c9d=this[a22_0x17b8('0x25')]+_0x26ec46;const _0x16df7b=_0x292c9d['split']('.')[a22_0x17b8('0x57')](0x0,-0x1)['join']('.');if(_0x48de12==a22_0x17b8('0x59')){_0x120e8a=_0x120e8a+a22_0x17b8('0x5a');}else if(_0x48de12==a22_0x17b8('0x5b')){_0x120e8a=_0x3e06e8+a22_0x17b8('0x5a');_0x292c9d=_0x16df7b+a22_0x17b8('0x5a');}console[a22_0x17b8('0x3b')](a22_0x17b8('0x5c'));console[a22_0x17b8('0x3b')](_0x26ec46);console['log'](_0x48de12);console[a22_0x17b8('0x3b')](_0x120e8a);console[a22_0x17b8('0x3b')](_0x292c9d);console['log'](_0x3e06e8);console[a22_0x17b8('0x3b')](_0x16df7b);console[a22_0x17b8('0x3b')](a22_0x17b8('0x5c'));if(fsExtra[a22_0x17b8('0x4d')](this['tempFolder']+_0x120e8a)){this[a22_0x17b8('0x5d')](this['tempFolder']+_0x120e8a)[a22_0x17b8('0x5')](function(_0x18a94b){if(_0x18a94b){this[a22_0x17b8('0x1a')]++;}else{this['playlistChanged']=!![];}this[a22_0x17b8('0x4b')]();}[a22_0x17b8('0x32')](this));}else if(fsExtra[a22_0x17b8('0x4d')](this['filesFolder']+_0x120e8a)){this['checkVideo'](this[a22_0x17b8('0x16')]+_0x120e8a)['then'](function(_0x500955){if(_0x500955){fsExtra[a22_0x17b8('0x5e')](this[a22_0x17b8('0x16')]+_0x120e8a,this[a22_0x17b8('0x13')]+_0x120e8a);this[a22_0x17b8('0x1a')]++;}else{this[a22_0x17b8('0x1b')]=!![];}this['download']();}[a22_0x17b8('0x32')](this));}else{console[a22_0x17b8('0x3b')](a22_0x17b8('0x5f')+_0x292c9d);this[a22_0x17b8('0x1b')]=!![];if(_0x48de12==a22_0x17b8('0x59')){this[a22_0x17b8('0x60')](_0x26ec46);}else{this[a22_0x17b8('0x61')](_0x292c9d,_0x120e8a,_0x48de12);}}}[a22_0x17b8('0x5d')](_0x26e126){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x17b8('0x3b')](a22_0x17b8('0x62')+_0x26e126);const _0x2b4c08=yield mediainfo(_0x26e126)['catch'](_0x47d60c=>{console[a22_0x17b8('0x3b')](_0x47d60c);fsExtra[a22_0x17b8('0x63')](_0x26e126);return![];});const _0x2aa374=_0x2b4c08[a22_0x17b8('0x64')][a22_0x17b8('0x65')]['length']>0x1&&_0x2b4c08[a22_0x17b8('0x64')][a22_0x17b8('0x65')][0x1]['@type']==a22_0x17b8('0x66');if(!_0x2aa374){fsExtra[a22_0x17b8('0x63')](_0x26e126);}console['log'](a22_0x17b8('0x67')+_0x2aa374);return _0x2aa374;});}[a22_0x17b8('0x61')](_0x424693,_0x36db7a,_0x130b68){const _0x127b8e=new Downloader();console[a22_0x17b8('0x3b')](_0x424693);console[a22_0x17b8('0x3b')](_0x36db7a);console[a22_0x17b8('0x3b')](_0x130b68);const _0x470765=_0x127b8e['download'](_0x424693,this[a22_0x17b8('0x13')]+_0x36db7a);urlExists(_0x424693,function(_0x5efe01,_0x402a45){if(_0x402a45){if(this['failDownloadFiles'][a22_0x17b8('0x68')](this[a22_0x17b8('0x1a')])){const _0x3833a1=this['failDownloadFiles'][a22_0x17b8('0x69')](this['currentFile']);if(_0x3833a1>-0x1){this[a22_0x17b8('0x1d')]['splice'](_0x3833a1,0x1);}}console[a22_0x17b8('0x3b')](a22_0x17b8('0x6a')+_0x424693);_0x470765[a22_0x17b8('0x6b')]();}else{if(!this[a22_0x17b8('0x1d')]['includes'](this[a22_0x17b8('0x1a')])){this[a22_0x17b8('0x1d')][a22_0x17b8('0x48')](this[a22_0x17b8('0x1a')]);}console[a22_0x17b8('0x3b')](a22_0x17b8('0x6c')+_0x424693);this[a22_0x17b8('0x1a')]++;this[a22_0x17b8('0x4b')]();}}[a22_0x17b8('0x32')](this));_0x470765['on']('start',function(_0x470765){console['log']('start:\x20'+_0x424693);});_0x470765['on'](a22_0x17b8('0x6d'),function(_0x470765){console[a22_0x17b8('0x3b')](a22_0x17b8('0x6e'));this[a22_0x17b8('0x4b')]();}[a22_0x17b8('0x32')](this));_0x470765['on'](a22_0x17b8('0x6f'),function(_0x470765){console[a22_0x17b8('0x3b')]('end');console[a22_0x17b8('0x3b')](a22_0x17b8('0x70')+_0x36db7a);console['log'](a22_0x17b8('0x71')+_0x130b68);this[a22_0x17b8('0x5d')](this['tempFolder']+_0x36db7a)[a22_0x17b8('0x5')](function(_0x59714c){if(_0x59714c){this[a22_0x17b8('0x1a')]++;}this[a22_0x17b8('0x4b')]();}[a22_0x17b8('0x32')](this));}['bind'](this));_0x470765['on'](a22_0x17b8('0x72'),function(_0x470765){console[a22_0x17b8('0x3b')](a22_0x17b8('0x72'));});_0x470765['on'](a22_0x17b8('0x73'),function(_0x470765){console[a22_0x17b8('0x3b')](a22_0x17b8('0x73'));});_0x470765['on']('retry',function(_0x470765){console[a22_0x17b8('0x3b')](a22_0x17b8('0x74'));});}[a22_0x17b8('0x75')](_0x50001c,_0x1a0eec,_0x55312e,_0x55d0ae){console[a22_0x17b8('0x3b')](a22_0x17b8('0x75'));console[a22_0x17b8('0x3b')](_0x50001c);const _0x553138=!![];let _0x36ddae=0x0;const _0x3b69f5='';console[a22_0x17b8('0x3b')]('Attempting\x20to\x20download\x20'+_0x50001c+a22_0x17b8('0x76')+_0x1a0eec);if(_0x36ddae){if(_0x36ddae>0x5){_0x55d0ae('Max\x20redirects\x20reached',_0x50001c,_0x55312e,null);return;}}else{_0x36ddae=0x0;}const _0x19567f=this[a22_0x17b8('0x13')]+_0x1a0eec;let _0x477581;if(_0x55d0ae===undefined){console['log'](a22_0x17b8('0x77')+_0x50001c+'\x20to\x20'+_0x19567f);_0x55d0ae=function(_0x507109,_0x39906c){console[a22_0x17b8('0x3b')](a22_0x17b8('0x78'),_0x507109,_0x39906c);};}http['globalAgent']['maxSockets']=0x64;const _0x5621a2={'host':url['parse'](_0x50001c)[a22_0x17b8('0x79')],'port':0x50,'path':url[a22_0x17b8('0x22')](_0x50001c)['pathname'],'agent':![]};const _0x3b2ecd=http[a22_0x17b8('0x7a')](_0x5621a2,function(_0xe56aab){let _0x2a9d46=0x0;let _0x177b13=0x0;function _0x30c50b(){if(_0x2a9d46===undefined){console[a22_0x17b8('0x3b')](_0x1a0eec+a22_0x17b8('0x7b')+_0x177b13+'/'+'?');}const _0x14c004=_0x177b13/_0x2a9d46*0x64;console['log'](_0x1a0eec+'\x20Progress:\x20'+_0x14c004+'%\x09'+_0x177b13+'/'+_0x2a9d46);}console['log'](_0x1a0eec+'\x20'+_0xe56aab[a22_0x17b8('0x7c')]);switch(_0xe56aab[a22_0x17b8('0x7c')]){case 0xc8:_0x2a9d46=_0xe56aab[a22_0x17b8('0x7d')][a22_0x17b8('0x7e')]||_0x3b69f5;fs[a22_0x17b8('0x7f')](_0x19567f,function(_0x632a85,_0x32d550){if(!_0x632a85){console[a22_0x17b8('0x3b')](a22_0x17b8('0x80')+_0x19567f);if(_0x32d550[a22_0x17b8('0x81')]==_0x2a9d46){console[a22_0x17b8('0x3b')](a22_0x17b8('0x82')+_0x2a9d46+')');console[a22_0x17b8('0x3b')](a22_0x17b8('0x83'));}else{console['log'](a22_0x17b8('0x84')+_0x32d550[a22_0x17b8('0x81')]+a22_0x17b8('0x85')+_0x2a9d46+')');}}_0x477581=fs[a22_0x17b8('0x86')](_0x19567f);_0xe56aab[a22_0x17b8('0x87')](_0x477581);_0xe56aab['on'](a22_0x17b8('0x88'),function(_0x16c309){_0x177b13+=_0x16c309[a22_0x17b8('0x4a')];_0x30c50b();});_0x3b2ecd['on'](a22_0x17b8('0x6d'),function(_0x632a85){console[a22_0x17b8('0x3b')](a22_0x17b8('0x89'));console[a22_0x17b8('0x3b')](_0x632a85);});_0x477581['on'](a22_0x17b8('0x8a'),function(){console[a22_0x17b8('0x3b')](a22_0x17b8('0x8b')+_0x50001c+a22_0x17b8('0x76')+_0x1a0eec);_0x55d0ae(null,_0x1a0eec,_0x55312e,_0x1a0eec);}[a22_0x17b8('0x32')](this));});break;case 0x12e:const _0x8a7fae=_0xe56aab['headers']['location'];console[a22_0x17b8('0x3b')](a22_0x17b8('0x8c')+_0x50001c+'\x20to\x20'+_0x8a7fae);if(_0x36ddae<0x5){this[a22_0x17b8('0x75')](_0x8a7fae,_0x1a0eec,_0x55d0ae,_0x36ddae++);}else{console[a22_0x17b8('0x6d')](a22_0x17b8('0x8d')+_0x50001c+'.');_0x55d0ae(a22_0x17b8('0x8e'),null,null,null);}return;case 0x194:console[a22_0x17b8('0x3b')](a22_0x17b8('0x8f')+_0x50001c);default:console['log'](a22_0x17b8('0x90')+_0x50001c+a22_0x17b8('0x91')+_0xe56aab[a22_0x17b8('0x7c')]);_0x3b2ecd['abort']();_0x55d0ae(_0xe56aab[a22_0x17b8('0x7c')],null,null,null);return;}})['on'](a22_0x17b8('0x6d'),function(_0x13642b){console[a22_0x17b8('0x3b')](a22_0x17b8('0x92')+_0x50001c+'\x20'+_0x13642b[a22_0x17b8('0x93')]);_0x55d0ae(_0x13642b,null,null,null);});}[a22_0x17b8('0x94')](_0x35af5b,_0x111644,_0x5f11b5,_0x34ebc1){console[a22_0x17b8('0x3b')](a22_0x17b8('0x94'));console['log'](_0x35af5b);console[a22_0x17b8('0x3b')](_0x111644);console[a22_0x17b8('0x3b')](_0x5f11b5);console[a22_0x17b8('0x3b')](_0x34ebc1);if(_0x5f11b5==a22_0x17b8('0x5b')){const _0x518d57=this[a22_0x17b8('0x1c')][this[a22_0x17b8('0x1a')]][a22_0x17b8('0x95')]!=null?this[a22_0x17b8('0x1c')][this[a22_0x17b8('0x1a')]][a22_0x17b8('0x95')]:0x1e;this['createImageVideo'](_0x34ebc1,_0x518d57);}else if(_0x5f11b5=='video'){if(_0x35af5b==null&&_0x111644!=''){this[a22_0x17b8('0x1a')]++;}this[a22_0x17b8('0x4b')]();}console[a22_0x17b8('0x3b')](this[a22_0x17b8('0x1a')]);}[a22_0x17b8('0x96')](_0x5adb92,_0x532299,_0x2d5b4b){progress(request(_0x5adb92),{})['on'](a22_0x17b8('0x97'),function(_0x537e1f){console[a22_0x17b8('0x3b')](_0x537e1f);})['on'](a22_0x17b8('0x6d'),function(_0x33b417){console[a22_0x17b8('0x3b')]('Error\x20downloading\x20file');this[a22_0x17b8('0x4b')]();})['on'](a22_0x17b8('0x6f'),function(){console[a22_0x17b8('0x3b')](a22_0x17b8('0x70')+_0x532299);console[a22_0x17b8('0x3b')](a22_0x17b8('0x71')+_0x2d5b4b);if(_0x2d5b4b==a22_0x17b8('0x5b')){const _0x37b2d4=this['downloadFiles'][this[a22_0x17b8('0x1a')]][a22_0x17b8('0x95')]!=null?this['downloadFiles'][this[a22_0x17b8('0x1a')]][a22_0x17b8('0x95')]:0x1e;this[a22_0x17b8('0x98')](_0x532299,_0x37b2d4);}else if(_0x2d5b4b=='video'){this[a22_0x17b8('0x1a')]++;this['download']();}}[a22_0x17b8('0x32')](this))[a22_0x17b8('0x87')](fs[a22_0x17b8('0x86')](this['tempFolder']+_0x532299));}[a22_0x17b8('0x98')](_0x77d0f0,_0x5910d2=0x1e){const _0x393976=this[a22_0x17b8('0x13')]+_0x77d0f0;console[a22_0x17b8('0x3b')](_0x393976);console[a22_0x17b8('0x3b')](_0x77d0f0);const _0x1a319b=_0x77d0f0[a22_0x17b8('0x56')]('.')['slice'](0x0,-0x1)[a22_0x17b8('0x58')]('.');const _0x32e4aa=a22_0x17b8('0x99');const _0x4a52c8=['-y','-r','1/2',a22_0x17b8('0x9a'),'1',a22_0x17b8('0x9b'),a22_0x17b8('0x9c'),'-i',_0x393976,'-t',String(_0x5910d2),'-c:v',a22_0x17b8('0x9d'),'-pix_fmt',a22_0x17b8('0x9e'),'-r','25',a22_0x17b8('0x9f'),a22_0x17b8('0xa0'),this[a22_0x17b8('0x13')]+_0x1a319b+a22_0x17b8('0x5a')];const _0x17dedc=spawn(_0x32e4aa,_0x4a52c8);_0x17dedc[a22_0x17b8('0xa1')]['on']('data',function(_0xaa226f){console[a22_0x17b8('0x3b')](a22_0x17b8('0xa2')+_0x393976);});_0x17dedc[a22_0x17b8('0xa3')]['on'](a22_0x17b8('0x88'),function(_0x254f03){console['log']('stderr:\x20'+_0x254f03);}[a22_0x17b8('0x32')](this));_0x17dedc['on'](a22_0x17b8('0xa4'),function(){console['log'](a22_0x17b8('0xa5'));this['currentFile']++;this['download']();}['bind'](this));}['downloadYouTube'](_0x48747c){const _0x5734bb=this['tempFolder']+'/'+_0x48747c+'.mp4';const _0x254077=youtubedl(a22_0x17b8('0xa6')+_0x48747c,[a22_0x17b8('0xa7')],{'cwd':__dirname});_0x254077['on']('info',function(_0x40d9de){console[a22_0x17b8('0x3b')]('Download\x20started');console['log'](a22_0x17b8('0xa8')+_0x40d9de[a22_0x17b8('0xa9')]);console[a22_0x17b8('0x3b')](a22_0x17b8('0xaa')+_0x40d9de[a22_0x17b8('0x81')]);});_0x254077['on']('complete',function complete(_0x15d12c){'use strict';console[a22_0x17b8('0x3b')](a22_0x17b8('0xa8')+_0x15d12c[a22_0x17b8('0xa9')]+a22_0x17b8('0xab'));});_0x254077['on'](a22_0x17b8('0x6f'),function(){console[a22_0x17b8('0x3b')](a22_0x17b8('0xac'));this[a22_0x17b8('0x5d')](_0x5734bb)[a22_0x17b8('0x5')](function(_0x484ec6){if(_0x484ec6){this[a22_0x17b8('0x1a')]++;}this[a22_0x17b8('0x4b')]();}[a22_0x17b8('0x32')](this));}[a22_0x17b8('0x32')](this));_0x254077['pipe'](fs[a22_0x17b8('0x86')](_0x5734bb));}[a22_0x17b8('0x51')](){console[a22_0x17b8('0x3b')]('Finishing');if(this[a22_0x17b8('0x1b')]){if(this[a22_0x17b8('0x1d')][a22_0x17b8('0x4a')]==0x0){fs[a22_0x17b8('0xad')](this[a22_0x17b8('0x18')],JSON['stringify'](this['newPlayList']));let _0x295441='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x17b8('0xae')+'\x0d\x0a';for(const _0x13f6e5 in this['downloadFiles']){const _0x3324c3=this['downloadFiles'][_0x13f6e5][a22_0x17b8('0x52')];const _0x105ace=this[a22_0x17b8('0x1c')][_0x13f6e5][a22_0x17b8('0x53')];const _0x265b01=_0x3324c3[a22_0x17b8('0x54')](_0x3324c3['lastIndexOf']('/')+0x1);let _0x372aa=_0x265b01['split']('.')['slice'](0x0,-0x1)[a22_0x17b8('0x58')]('.');if(_0x105ace==a22_0x17b8('0x59')){_0x372aa=_0x3324c3;}_0x295441+=a22_0x17b8('0xaf')+_0x372aa+a22_0x17b8('0x5a')+'\x0d\x0a';}fsExtra['emptyDirSync'](this['filesFolder']);fsExtra[a22_0x17b8('0x5e')](this[a22_0x17b8('0x13')],this['filesFolder']);fsExtra[a22_0x17b8('0xad')](this['m3uFile'],_0x295441);fsExtra[a22_0x17b8('0x47')](this[a22_0x17b8('0x13')]);console[a22_0x17b8('0x3b')](a22_0x17b8('0xb0'));const _0x51bdf5=spawn(a22_0x17b8('0xb1'),['-r',a22_0x17b8('0xb2')]);}else{console[a22_0x17b8('0x3b')]('Playlist\x20incomplete,\x20retry.');this[a22_0x17b8('0x1a')]=0x0;setTimeout(function(){this[a22_0x17b8('0x4b')]();}[a22_0x17b8('0x32')](this),0x1388);}}else{console['log'](a22_0x17b8('0xb3'));}}}exports[a22_0x17b8('0xb4')]=SyncPlaylistsService;