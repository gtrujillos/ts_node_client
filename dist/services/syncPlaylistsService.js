var a22_0x71fd=['length','download','reloadMediaList','existsSync','playListFile','removeSync','reboot','System','Shutdown','readFileSync','this.currentFile:\x20','\x20of\x20','media_type','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','copySync','Downloading:\x20','downloadYouTube','videoFile:\x20','track','media','@type','Video','mediainfo\x20check:','downloader','includes','splice','downloading:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','Have\x20already\x20downloaded\x20','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','size','createWriteStream','pipe','data','finish','Downloaded\x20','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','ffmpeg','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','stdout','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','filename:\x20','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','finishProcess','Finishing','#EXTINF:0,luloPlayList','substring','/home/osmc/luloclient/media/files/','Rebooting..','shutdown','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','next','throw','done','value','apply','node-mediainfo','url','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','config.json','context.json','url-exists','node-kodi','mt-files-downloader','media/','tempFolder','mediaFolder','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','currentFile','downloadFiles','failDownloadFiles','httpClientService','HttpClientService','init','config','parse','context','playerId','baseURL','env','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','http://localhost','lulo','loadMediaList','bind','registerClient','playlist','getItems','then','stringify','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','deviceUuid','writeFileSync','getStatus','kodi','getCurrentlyPlayingVideo','item','label','reportStatus','post','http://restapi.lulo.run/player_devices/report_status','ensureDir','loadMediaList:\x20','newPlayList','playlistChanged','hasPlayListChanged','push','Total:\x20'];(function(_0x3e44b5,_0x229a66){var _0x2739a5=function(_0x5465d9){while(--_0x5465d9){_0x3e44b5['push'](_0x3e44b5['shift']());}};_0x2739a5(++_0x229a66);}(a22_0x71fd,0x6d));var a22_0x17e1=function(_0x5cff6a,_0x149432){_0x5cff6a=_0x5cff6a-0x0;var _0x5603a5=a22_0x71fd[_0x5cff6a];return _0x5603a5;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0xf31ed9,_0x33bf8a,_0x19fe11,_0x52025b){function _0x2ad059(_0x17ba86){return _0x17ba86 instanceof _0x19fe11?_0x17ba86:new _0x19fe11(function(_0x138509){_0x138509(_0x17ba86);});}return new(_0x19fe11||(_0x19fe11=Promise))(function(_0x48e65c,_0x308b1c){function _0x4b7ba3(_0x3a0ab6){try{_0x140de5(_0x52025b[a22_0x17e1('0x0')](_0x3a0ab6));}catch(_0x6de907){_0x308b1c(_0x6de907);}}function _0x58f700(_0x14b562){try{_0x140de5(_0x52025b[a22_0x17e1('0x1')](_0x14b562));}catch(_0x104aa3){_0x308b1c(_0x104aa3);}}function _0x140de5(_0x2070bf){_0x2070bf[a22_0x17e1('0x2')]?_0x48e65c(_0x2070bf[a22_0x17e1('0x3')]):_0x2ad059(_0x2070bf[a22_0x17e1('0x3')])['then'](_0x4b7ba3,_0x58f700);}_0x140de5((_0x52025b=_0x52025b[a22_0x17e1('0x4')](_0xf31ed9,_0x33bf8a||[]))[a22_0x17e1('0x0')]());});};Object['defineProperty'](exports,'__esModule',{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const mediainfo=require(a22_0x17e1('0x5'));const fs=require('fs');const url=require(a22_0x17e1('0x6'));const http=require('http');const fsExtra=require('fs-extra');const request=require(a22_0x17e1('0x7'));const progress=require(a22_0x17e1('0x8'));const spawn=require(a22_0x17e1('0x9'))[a22_0x17e1('0xa')];const isImage=require(a22_0x17e1('0xb'));const format=require(a22_0x17e1('0xc'));const os=require('os');const youtubedl=require(a22_0x17e1('0xd'));const uuidv4=require(a22_0x17e1('0xe'));const configFile=a22_0x17e1('0xf');const contextFile=a22_0x17e1('0x10');const urlExists=require(a22_0x17e1('0x11'));const kodi_rpc=require(a22_0x17e1('0x12'));const Downloader=require(a22_0x17e1('0x13'));class SyncPlaylistsService{constructor(){this['mediaFolder']=a22_0x17e1('0x14');this[a22_0x17e1('0x15')]=this[a22_0x17e1('0x16')]+'temp/';this['filesFolder']=this[a22_0x17e1('0x16')]+'files/';this['playListFile']=this[a22_0x17e1('0x16')]+a22_0x17e1('0x17');this[a22_0x17e1('0x18')]=this[a22_0x17e1('0x19')]+a22_0x17e1('0x1a');this[a22_0x17e1('0x1b')]=0x0;this['playlistChanged']=![];this[a22_0x17e1('0x1c')]=[];this[a22_0x17e1('0x1d')]=[];this['newPlayList']={};this[a22_0x17e1('0x1e')]=new HttpClientService_1[(a22_0x17e1('0x1f'))]();}[a22_0x17e1('0x20')](){this[a22_0x17e1('0x21')]=JSON[a22_0x17e1('0x22')](fs['readFileSync'](configFile));this[a22_0x17e1('0x23')]=JSON[a22_0x17e1('0x22')](fs['readFileSync'](contextFile));this[a22_0x17e1('0x24')]=this[a22_0x17e1('0x21')][a22_0x17e1('0x24')];this[a22_0x17e1('0x25')]=process[a22_0x17e1('0x26')]['WEB_SERVICE_URL']+a22_0x17e1('0x27');this[a22_0x17e1('0x28')]=this[a22_0x17e1('0x25')]+a22_0x17e1('0x29');this['kodi']=new kodi_rpc({'url':a22_0x17e1('0x2a'),'user':a22_0x17e1('0x2b'),'password':'.lulo123.'});this['checkDependencies']();this['registerClient']();this['checkFolders']();this[a22_0x17e1('0x2c')]();setInterval(function(){this['getStatus']();}[a22_0x17e1('0x2d')](this),0x2710);setInterval(function(){this[a22_0x17e1('0x2e')]();}[a22_0x17e1('0x2d')](this),0x493e0);}['checkDependencies'](){}[a22_0x17e1('0x2e')](){this['kodi'][a22_0x17e1('0x2f')][a22_0x17e1('0x30')](0x1)[a22_0x17e1('0x31')](function(_0x94042b){const _0x2a3a80=JSON[a22_0x17e1('0x32')](_0x94042b);const _0x42430b={'player_id':this[a22_0x17e1('0x24')],'device_uuid':this[a22_0x17e1('0x21')]['deviceUuid'],'network_info':JSON[a22_0x17e1('0x32')](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this['context']),'playlist':_0x2a3a80,'playing_item':'','status':0x0};this[a22_0x17e1('0x1e')]['post'](a22_0x17e1('0x33'),_0x42430b,![])['then'](function(_0x45d777){console[a22_0x17e1('0x34')](a22_0x17e1('0x35')+Date());})[a22_0x17e1('0x36')](function(_0x4a29ba){});console['log'](_0x42430b);}[a22_0x17e1('0x2d')](this));const _0xa0e60a=this['config']['deviceUuid'];if(!_0xa0e60a||_0xa0e60a==''){this[a22_0x17e1('0x21')][a22_0x17e1('0x37')]=uuidv4();this[a22_0x17e1('0x21')]={'deviceUuid':this[a22_0x17e1('0x21')][a22_0x17e1('0x37')],'playerId':this['config']['playerId']};fs[a22_0x17e1('0x38')](configFile,JSON[a22_0x17e1('0x32')](this[a22_0x17e1('0x21')]));}}[a22_0x17e1('0x39')](){console['log']('getStatus');this[a22_0x17e1('0x3a')]['player'][a22_0x17e1('0x3b')]()['then'](function(_0x24ba6e){const _0x5d022a=_0x24ba6e[a22_0x17e1('0x3c')][a22_0x17e1('0x3d')];this['reportStatus'](_0x5d022a);}[a22_0x17e1('0x2d')](this))['catch'](function(_0x33bb89){console[a22_0x17e1('0x34')](_0x33bb89);this['reportStatus'](_0x33bb89);}[a22_0x17e1('0x2d')](this));}[a22_0x17e1('0x3e')](_0x6b1250){console['log']('playingItem:\x20'+_0x6b1250);const _0x29a724={'player_id':this[a22_0x17e1('0x24')],'device_uuid':this[a22_0x17e1('0x21')][a22_0x17e1('0x37')],'status':_0x6b1250!=''&&_0x6b1250!=null?0x1:0x0,'playing_item':_0x6b1250};this['httpClientService'][a22_0x17e1('0x3f')](a22_0x17e1('0x40'),_0x29a724,![])[a22_0x17e1('0x31')](function(_0x3b8292){console[a22_0x17e1('0x34')]('reportStatusResponse:\x20'+Date());})[a22_0x17e1('0x36')](function(_0x490dce){});}['checkFolders'](){fsExtra[a22_0x17e1('0x41')](this[a22_0x17e1('0x16')],_0x57b686=>{});fsExtra[a22_0x17e1('0x41')](this[a22_0x17e1('0x15')],_0x2bd1d9=>{});fsExtra['ensureDir'](this[a22_0x17e1('0x19')],_0x5e7195=>{});}['loadMediaList'](){const _0x5a0492=format(this[a22_0x17e1('0x28')],this[a22_0x17e1('0x24')]);console[a22_0x17e1('0x34')](_0x5a0492);request({'url':_0x5a0492,'json':!![]},function(_0xdd2bbe,_0x5acd89,_0x426754){console['log'](a22_0x17e1('0x42'));console[a22_0x17e1('0x34')](_0x426754);this[a22_0x17e1('0x43')]=_0x426754;this[a22_0x17e1('0x44')]=this[a22_0x17e1('0x45')]();fsExtra['emptyDirSync'](this['tempFolder']);this[a22_0x17e1('0x1c')]=[];this[a22_0x17e1('0x1d')]=[];this[a22_0x17e1('0x1b')]=0x0;for(const _0x1d4580 in _0x426754){this[a22_0x17e1('0x1c')][a22_0x17e1('0x46')](_0x426754[_0x1d4580]);}console['log'](a22_0x17e1('0x47')+this[a22_0x17e1('0x1c')][a22_0x17e1('0x48')]);if(this[a22_0x17e1('0x1c')][a22_0x17e1('0x48')]>0x0){this[a22_0x17e1('0x49')]();}}[a22_0x17e1('0x2d')](this));}[a22_0x17e1('0x4a')](){if(fsExtra[a22_0x17e1('0x4b')](this[a22_0x17e1('0x15')])){fsExtra['emptyDirSync'](this[a22_0x17e1('0x15')]);}if(fsExtra[a22_0x17e1('0x4b')](this[a22_0x17e1('0x4c')])){fsExtra['emptyDirSync'](this[a22_0x17e1('0x4c')]);}if(!fsExtra['existsSync'](this[a22_0x17e1('0x4c')])){fsExtra[a22_0x17e1('0x4d')](this[a22_0x17e1('0x4c')]);}if(!fsExtra[a22_0x17e1('0x4b')](this[a22_0x17e1('0x18')])){fsExtra[a22_0x17e1('0x4d')](this[a22_0x17e1('0x18')]);}this[a22_0x17e1('0x2c')]();}[a22_0x17e1('0x4e')](){this['kodi'][a22_0x17e1('0x4f')][a22_0x17e1('0x50')]();}[a22_0x17e1('0x45')](){const _0xa88798=JSON[a22_0x17e1('0x32')](this[a22_0x17e1('0x43')]);try{if(!fsExtra['existsSync'](this[a22_0x17e1('0x4c')])){return!![];}else{const _0x383834=fsExtra[a22_0x17e1('0x51')](this[a22_0x17e1('0x4c')])['toString']();if(_0x383834!=_0xa88798){return!![];}}}catch(_0x501ab3){console[a22_0x17e1('0x34')](_0x501ab3);}return![];}[a22_0x17e1('0x49')](){console[a22_0x17e1('0x34')](a22_0x17e1('0x52')+this[a22_0x17e1('0x1b')]+a22_0x17e1('0x53')+this['downloadFiles'][a22_0x17e1('0x48')]);if(this[a22_0x17e1('0x1b')]>=this['downloadFiles'][a22_0x17e1('0x48')]){this['finishProcess']();return;}const _0x5e52f3=String(this['downloadFiles'][this[a22_0x17e1('0x1b')]]['path']);const _0x163c63=this[a22_0x17e1('0x1c')][this['currentFile']][a22_0x17e1('0x54')];let _0x648393=_0x5e52f3['substring'](_0x5e52f3[a22_0x17e1('0x55')]('/')+0x1);const _0x1c4cc6=_0x648393[a22_0x17e1('0x56')]('.')[a22_0x17e1('0x57')](0x0,-0x1)[a22_0x17e1('0x58')]('.');let _0x55debb=this[a22_0x17e1('0x25')]+_0x5e52f3;const _0x4699e3=_0x55debb[a22_0x17e1('0x56')]('.')[a22_0x17e1('0x57')](0x0,-0x1)['join']('.');if(_0x163c63==a22_0x17e1('0x59')){_0x648393=_0x648393+a22_0x17e1('0x5a');}else if(_0x163c63==a22_0x17e1('0x5b')){_0x648393=_0x1c4cc6+a22_0x17e1('0x5a');_0x55debb=_0x4699e3+a22_0x17e1('0x5a');}console[a22_0x17e1('0x34')]('**********+');console[a22_0x17e1('0x34')](_0x5e52f3);console[a22_0x17e1('0x34')](_0x163c63);console['log'](_0x648393);console['log'](_0x55debb);console[a22_0x17e1('0x34')](_0x1c4cc6);console[a22_0x17e1('0x34')](_0x4699e3);console[a22_0x17e1('0x34')](a22_0x17e1('0x5c'));if(fsExtra[a22_0x17e1('0x4b')](this[a22_0x17e1('0x15')]+_0x648393)){this['checkVideo'](this[a22_0x17e1('0x15')]+_0x648393)[a22_0x17e1('0x31')](function(_0x23a752){if(_0x23a752){this['currentFile']++;}else{this[a22_0x17e1('0x44')]=!![];}this[a22_0x17e1('0x49')]();}[a22_0x17e1('0x2d')](this));}else if(fsExtra[a22_0x17e1('0x4b')](this[a22_0x17e1('0x19')]+_0x648393)){this['checkVideo'](this[a22_0x17e1('0x19')]+_0x648393)[a22_0x17e1('0x31')](function(_0x436fb0){if(_0x436fb0){fsExtra[a22_0x17e1('0x5d')](this[a22_0x17e1('0x19')]+_0x648393,this[a22_0x17e1('0x15')]+_0x648393);this[a22_0x17e1('0x1b')]++;}else{this[a22_0x17e1('0x44')]=!![];}this[a22_0x17e1('0x49')]();}['bind'](this));}else{console['log'](a22_0x17e1('0x5e')+_0x55debb);this[a22_0x17e1('0x44')]=!![];if(_0x163c63==a22_0x17e1('0x59')){this[a22_0x17e1('0x5f')](_0x5e52f3);}else{this['downloader'](_0x55debb,_0x648393,_0x163c63);}}}['checkVideo'](_0x522cc7){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a22_0x17e1('0x60')+_0x522cc7);const _0xbbbe02=yield mediainfo(_0x522cc7)['catch'](_0x5f877e=>{console[a22_0x17e1('0x34')](_0x5f877e);fsExtra[a22_0x17e1('0x4d')](_0x522cc7);return![];});const _0x24b729=_0xbbbe02['media'][a22_0x17e1('0x61')][a22_0x17e1('0x48')]>0x1&&_0xbbbe02[a22_0x17e1('0x62')][a22_0x17e1('0x61')][0x1][a22_0x17e1('0x63')]==a22_0x17e1('0x64');if(!_0x24b729){fsExtra[a22_0x17e1('0x4d')](_0x522cc7);}console['log'](a22_0x17e1('0x65')+_0x24b729);return _0x24b729;});}[a22_0x17e1('0x66')](_0x180bfc,_0x58c9c6,_0x29669f){const _0x36498a=new Downloader();console[a22_0x17e1('0x34')](_0x180bfc);console[a22_0x17e1('0x34')](_0x58c9c6);console[a22_0x17e1('0x34')](_0x29669f);const _0x1b4faa=_0x36498a[a22_0x17e1('0x49')](_0x180bfc,this['tempFolder']+_0x58c9c6);urlExists(_0x180bfc,function(_0x4f0802,_0x28320e){if(_0x28320e){if(this[a22_0x17e1('0x1d')][a22_0x17e1('0x67')](this['currentFile'])){const _0x3ba93b=this[a22_0x17e1('0x1d')]['indexOf'](this['currentFile']);if(_0x3ba93b>-0x1){this[a22_0x17e1('0x1d')][a22_0x17e1('0x68')](_0x3ba93b,0x1);}}console[a22_0x17e1('0x34')](a22_0x17e1('0x69')+_0x180bfc);_0x1b4faa['start']();}else{if(!this[a22_0x17e1('0x1d')][a22_0x17e1('0x67')](this[a22_0x17e1('0x1b')])){this[a22_0x17e1('0x1d')][a22_0x17e1('0x46')](this[a22_0x17e1('0x1b')]);}console[a22_0x17e1('0x34')]('Error:\x20'+_0x180bfc);this[a22_0x17e1('0x1b')]++;this['download']();}}[a22_0x17e1('0x2d')](this));_0x1b4faa['on']('start',function(_0x1b4faa){console[a22_0x17e1('0x34')]('start:\x20'+_0x180bfc);});_0x1b4faa['on'](a22_0x17e1('0x6a'),function(_0x1b4faa){console[a22_0x17e1('0x34')](a22_0x17e1('0x6b'));this[a22_0x17e1('0x49')]();}[a22_0x17e1('0x2d')](this));_0x1b4faa['on'](a22_0x17e1('0x6c'),function(_0x1b4faa){console[a22_0x17e1('0x34')](a22_0x17e1('0x6c'));console[a22_0x17e1('0x34')](a22_0x17e1('0x6d')+_0x58c9c6);console[a22_0x17e1('0x34')](a22_0x17e1('0x6e')+_0x29669f);this['checkVideo'](this['tempFolder']+_0x58c9c6)[a22_0x17e1('0x31')](function(_0x32eeee){if(_0x32eeee){this[a22_0x17e1('0x1b')]++;}this[a22_0x17e1('0x49')]();}['bind'](this));}[a22_0x17e1('0x2d')](this));_0x1b4faa['on'](a22_0x17e1('0x6f'),function(_0x1b4faa){console[a22_0x17e1('0x34')]('stopped');});_0x1b4faa['on'](a22_0x17e1('0x70'),function(_0x1b4faa){console[a22_0x17e1('0x34')](a22_0x17e1('0x70'));});_0x1b4faa['on']('retry',function(_0x1b4faa){console[a22_0x17e1('0x34')](a22_0x17e1('0x71'));});}[a22_0x17e1('0x72')](_0x488f13,_0x38d74a,_0x50a082,_0x3c8361){console[a22_0x17e1('0x34')](a22_0x17e1('0x72'));console[a22_0x17e1('0x34')](_0x488f13);const _0xc1a9dc=!![];let _0x14f3b8=0x0;const _0x58d810='';console[a22_0x17e1('0x34')]('Attempting\x20to\x20download\x20'+_0x488f13+a22_0x17e1('0x73')+_0x38d74a);if(_0x14f3b8){if(_0x14f3b8>0x5){_0x3c8361(a22_0x17e1('0x74'),_0x488f13,_0x50a082,null);return;}}else{_0x14f3b8=0x0;}const _0x2c015c=this['tempFolder']+_0x38d74a;let _0x468ecd;if(_0x3c8361===undefined){console[a22_0x17e1('0x34')](a22_0x17e1('0x75')+_0x488f13+a22_0x17e1('0x73')+_0x2c015c);_0x3c8361=function(_0x597689,_0x510638){console[a22_0x17e1('0x34')](a22_0x17e1('0x76'),_0x597689,_0x510638);};}http[a22_0x17e1('0x77')][a22_0x17e1('0x78')]=0x64;const _0x2c307f={'host':url[a22_0x17e1('0x22')](_0x488f13)['host'],'port':0x50,'path':url[a22_0x17e1('0x22')](_0x488f13)[a22_0x17e1('0x79')],'agent':![]};const _0x569913=http[a22_0x17e1('0x7a')](_0x2c307f,function(_0x33908e){let _0x1d6b48=0x0;let _0x7423de=0x0;function _0x5cffe3(){if(_0x1d6b48===undefined){console[a22_0x17e1('0x34')](_0x38d74a+a22_0x17e1('0x7b')+_0x7423de+'/'+'?');}const _0x525edc=_0x7423de/_0x1d6b48*0x64;console['log'](_0x38d74a+a22_0x17e1('0x7c')+_0x525edc+'%\x09'+_0x7423de+'/'+_0x1d6b48);}console['log'](_0x38d74a+'\x20'+_0x33908e[a22_0x17e1('0x7d')]);switch(_0x33908e[a22_0x17e1('0x7d')]){case 0xc8:_0x1d6b48=_0x33908e[a22_0x17e1('0x7e')][a22_0x17e1('0x7f')]||_0x58d810;fs['stat'](_0x2c015c,function(_0x5e09fc,_0x4d7e45){if(!_0x5e09fc){console[a22_0x17e1('0x34')](a22_0x17e1('0x80')+_0x2c015c);if(_0x4d7e45['size']==_0x1d6b48){console[a22_0x17e1('0x34')]('And\x20the\x20file\x20size\x20matches\x20('+_0x1d6b48+')');console[a22_0x17e1('0x34')]('Redownloading');}else{console[a22_0x17e1('0x34')](a22_0x17e1('0x81')+_0x4d7e45[a22_0x17e1('0x82')]+')\x20vs\x20New('+_0x1d6b48+')');}}_0x468ecd=fs[a22_0x17e1('0x83')](_0x2c015c);_0x33908e[a22_0x17e1('0x84')](_0x468ecd);_0x33908e['on'](a22_0x17e1('0x85'),function(_0x5278fb){_0x7423de+=_0x5278fb[a22_0x17e1('0x48')];_0x5cffe3();});_0x569913['on']('error',function(_0x5e09fc){console[a22_0x17e1('0x34')]('err:\x20');console['log'](_0x5e09fc);});_0x468ecd['on'](a22_0x17e1('0x86'),function(){console['log'](a22_0x17e1('0x87')+_0x488f13+'\x20to\x20'+_0x38d74a);_0x3c8361(null,_0x38d74a,_0x50a082,_0x38d74a);}[a22_0x17e1('0x2d')](this));});break;case 0x12e:const _0x4ca449=_0x33908e[a22_0x17e1('0x7e')]['location'];console[a22_0x17e1('0x34')](a22_0x17e1('0x88')+_0x488f13+a22_0x17e1('0x73')+_0x4ca449);if(_0x14f3b8<0x5){this[a22_0x17e1('0x72')](_0x4ca449,_0x38d74a,_0x3c8361,_0x14f3b8++);}else{console[a22_0x17e1('0x6a')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x488f13+'.');_0x3c8361(a22_0x17e1('0x89'),null,null,null);}return;case 0x194:console[a22_0x17e1('0x34')](a22_0x17e1('0x8a')+_0x488f13);default:console[a22_0x17e1('0x34')](a22_0x17e1('0x8b')+_0x488f13+a22_0x17e1('0x8c')+_0x33908e[a22_0x17e1('0x7d')]);_0x569913[a22_0x17e1('0x8d')]();_0x3c8361(_0x33908e[a22_0x17e1('0x7d')],null,null,null);return;}})['on']('error',function(_0x391094){console[a22_0x17e1('0x34')]('Error\x20Downloading:\x20'+_0x488f13+'\x20'+_0x391094[a22_0x17e1('0x8e')]);_0x3c8361(_0x391094,null,null,null);});}[a22_0x17e1('0x8f')](_0x339a74,_0x4cc975,_0x48ecd6,_0x5f218e){console[a22_0x17e1('0x34')](a22_0x17e1('0x8f'));console[a22_0x17e1('0x34')](_0x339a74);console[a22_0x17e1('0x34')](_0x4cc975);console['log'](_0x48ecd6);console[a22_0x17e1('0x34')](_0x5f218e);if(_0x48ecd6==a22_0x17e1('0x5b')){const _0x38dc39=this[a22_0x17e1('0x1c')][this[a22_0x17e1('0x1b')]][a22_0x17e1('0x90')]!=null?this[a22_0x17e1('0x1c')][this[a22_0x17e1('0x1b')]][a22_0x17e1('0x90')]:0x1e;this[a22_0x17e1('0x91')](_0x5f218e,_0x38dc39);}else if(_0x48ecd6==a22_0x17e1('0x92')){if(_0x339a74==null&&_0x4cc975!=''){this[a22_0x17e1('0x1b')]++;}this[a22_0x17e1('0x49')]();}console[a22_0x17e1('0x34')](this['currentFile']);}[a22_0x17e1('0x93')](_0x5e5107,_0x3e0a1d,_0x26d1b1){progress(request(_0x5e5107),{})['on'](a22_0x17e1('0x94'),function(_0x482934){console[a22_0x17e1('0x34')](_0x482934);})['on'](a22_0x17e1('0x6a'),function(_0x434f91){console['log'](a22_0x17e1('0x95'));this['download']();})['on'](a22_0x17e1('0x6c'),function(){console[a22_0x17e1('0x34')](a22_0x17e1('0x6d')+_0x3e0a1d);console[a22_0x17e1('0x34')]('mediaType:\x20'+_0x26d1b1);if(_0x26d1b1==a22_0x17e1('0x5b')){const _0x5dd511=this[a22_0x17e1('0x1c')][this[a22_0x17e1('0x1b')]][a22_0x17e1('0x90')]!=null?this['downloadFiles'][this[a22_0x17e1('0x1b')]]['duration']:0x1e;this['createImageVideo'](_0x3e0a1d,_0x5dd511);}else if(_0x26d1b1==a22_0x17e1('0x92')){this[a22_0x17e1('0x1b')]++;this[a22_0x17e1('0x49')]();}}[a22_0x17e1('0x2d')](this))[a22_0x17e1('0x84')](fs['createWriteStream'](this[a22_0x17e1('0x15')]+_0x3e0a1d));}[a22_0x17e1('0x91')](_0x149031,_0x2a6324=0x1e){const _0x11e278=this[a22_0x17e1('0x15')]+_0x149031;console[a22_0x17e1('0x34')](_0x11e278);console[a22_0x17e1('0x34')](_0x149031);const _0x5e3a65=_0x149031['split']('.')['slice'](0x0,-0x1)[a22_0x17e1('0x58')]('.');const _0xd262b4=a22_0x17e1('0x96');const _0x465854=['-y','-r','1/2',a22_0x17e1('0x97'),'1',a22_0x17e1('0x98'),a22_0x17e1('0x99'),'-i',_0x11e278,'-t',String(_0x2a6324),a22_0x17e1('0x9a'),'libx264',a22_0x17e1('0x9b'),a22_0x17e1('0x9c'),'-r','25',a22_0x17e1('0x9d'),'scale=1920:1080',this[a22_0x17e1('0x15')]+_0x5e3a65+'.mp4'];const _0x1b1d6=spawn(_0xd262b4,_0x465854);_0x1b1d6[a22_0x17e1('0x9e')]['on'](a22_0x17e1('0x85'),function(_0x1f6bde){console[a22_0x17e1('0x34')]('Converting\x20'+_0x11e278);});_0x1b1d6[a22_0x17e1('0x9f')]['on']('data',function(_0x342cc5){console['log'](a22_0x17e1('0xa0')+_0x342cc5);}['bind'](this));_0x1b1d6['on'](a22_0x17e1('0xa1'),function(){console[a22_0x17e1('0x34')](a22_0x17e1('0xa2'));this[a22_0x17e1('0x1b')]++;this['download']();}[a22_0x17e1('0x2d')](this));}[a22_0x17e1('0x5f')](_0xbe031d){const _0x528ce7=this['tempFolder']+'/'+_0xbe031d+'.mp4';const _0x5ea914=youtubedl(a22_0x17e1('0xa3')+_0xbe031d,[a22_0x17e1('0xa4')],{'cwd':__dirname});_0x5ea914['on'](a22_0x17e1('0xa5'),function(_0x59dba6){console['log']('Download\x20started');console[a22_0x17e1('0x34')](a22_0x17e1('0xa6')+_0x59dba6['_filename']);console[a22_0x17e1('0x34')](a22_0x17e1('0xa7')+_0x59dba6[a22_0x17e1('0x82')]);});_0x5ea914['on'](a22_0x17e1('0xa8'),function complete(_0x957777){'use strict';console[a22_0x17e1('0x34')]('filename:\x20'+_0x957777['_filename']+a22_0x17e1('0xa9'));});_0x5ea914['on']('end',function(){console[a22_0x17e1('0x34')](a22_0x17e1('0xaa'));this['checkVideo'](_0x528ce7)['then'](function(_0x472653){if(_0x472653){this[a22_0x17e1('0x1b')]++;}this[a22_0x17e1('0x49')]();}[a22_0x17e1('0x2d')](this));}[a22_0x17e1('0x2d')](this));_0x5ea914[a22_0x17e1('0x84')](fs[a22_0x17e1('0x83')](_0x528ce7));}[a22_0x17e1('0xab')](){console[a22_0x17e1('0x34')](a22_0x17e1('0xac'));if(this[a22_0x17e1('0x44')]){if(this[a22_0x17e1('0x1d')][a22_0x17e1('0x48')]==0x0){fs[a22_0x17e1('0x38')](this[a22_0x17e1('0x4c')],JSON[a22_0x17e1('0x32')](this['newPlayList']));let _0x577bee='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x17e1('0xad')+'\x0d\x0a';for(const _0xf724c in this['downloadFiles']){const _0x1abbf8=this[a22_0x17e1('0x1c')][_0xf724c]['path'];const _0x4f31f8=this[a22_0x17e1('0x1c')][_0xf724c]['media_type'];const _0x4288e0=_0x1abbf8[a22_0x17e1('0xae')](_0x1abbf8[a22_0x17e1('0x55')]('/')+0x1);let _0x145bb7=_0x4288e0['split']('.')[a22_0x17e1('0x57')](0x0,-0x1)[a22_0x17e1('0x58')]('.');if(_0x4f31f8=='youtube_single'){_0x145bb7=_0x1abbf8;}_0x577bee+=a22_0x17e1('0xaf')+_0x145bb7+a22_0x17e1('0x5a')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x17e1('0x19')]);fsExtra['copySync'](this[a22_0x17e1('0x15')],this['filesFolder']);fsExtra[a22_0x17e1('0x38')](this[a22_0x17e1('0x18')],_0x577bee);fsExtra['emptyDirSync'](this[a22_0x17e1('0x15')]);console[a22_0x17e1('0x34')](a22_0x17e1('0xb0'));const _0x465301=spawn(a22_0x17e1('0xb1'),['-r','now']);}else{console['log'](a22_0x17e1('0xb2'));this[a22_0x17e1('0x1b')]=0x0;setTimeout(function(){this['download']();}[a22_0x17e1('0x2d')](this),0x1388);}}else{console['log'](a22_0x17e1('0xb3'));}}}exports[a22_0x17e1('0xb4')]=SyncPlaylistsService;