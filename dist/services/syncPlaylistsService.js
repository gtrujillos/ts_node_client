var a23_0x25fc=['end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','parse','get','\x20Progress:\x20','statusCode','headers','content-length','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','size',')\x20vs\x20New(','data','err:\x20','finish','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','error','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','video','pipe','ffmpeg','1/2','-loop','-pattern_type','-c:v','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','_filename','size:\x20','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','createWriteStream','Finishing','#EXTCPlayListM3U::M3U','lastIndexOf','/home/osmc/luloclient/media/files/','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','jsonrpcClient','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','Rebooting','sudo\x20reboot','updateSettings','rss','header_active','setRss','enableClock','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','feed','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','kodi-send\x20--action=\x22','2.0','kodiHost','/jsonrpc','SyncPlaylistsService','next','done','value','then','apply','defineProperty','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request-progress','child_process','spawn','is-image','string-template','youtube-dl','config.json','context.json','url-exists','node-kodi','mediaFolder','tempFolder','temp/','playListFile','m3uFile','filesFolder','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','init','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','playlist','stringify','config','deviceUuid','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','writeFileSync','player','item','label','reportStatus','reportStatusResponse:\x20','ensureDir','hasPlayListChanged','emptyDirSync','push','length','existsSync','removeSync','toString','finishProcess','path','media_type','substring','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','download','copySync','Downloading:\x20','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','error:\x20'];(function(_0x4bda95,_0xa90bd){var _0x419376=function(_0x3dcafd){while(--_0x3dcafd){_0x4bda95['push'](_0x4bda95['shift']());}};_0x419376(++_0xa90bd);}(a23_0x25fc,0x145));var a23_0x1041=function(_0x5486ab,_0x48e128){_0x5486ab=_0x5486ab-0x0;var _0x203baf=a23_0x25fc[_0x5486ab];return _0x203baf;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x266082,_0x10b40a,_0x9ad107,_0x399661){function _0x536e6c(_0x959ad4){return _0x959ad4 instanceof _0x9ad107?_0x959ad4:new _0x9ad107(function(_0x123a79){_0x123a79(_0x959ad4);});}return new(_0x9ad107||(_0x9ad107=Promise))(function(_0x427a74,_0x368a51){function _0x30042d(_0x471a7f){try{_0x1d1581(_0x399661[a23_0x1041('0x0')](_0x471a7f));}catch(_0x59c4b6){_0x368a51(_0x59c4b6);}}function _0x10e2d5(_0x587d50){try{_0x1d1581(_0x399661['throw'](_0x587d50));}catch(_0x4185fd){_0x368a51(_0x4185fd);}}function _0x1d1581(_0x2799c9){_0x2799c9[a23_0x1041('0x1')]?_0x427a74(_0x2799c9[a23_0x1041('0x2')]):_0x536e6c(_0x2799c9['value'])[a23_0x1041('0x3')](_0x30042d,_0x10e2d5);}_0x1d1581((_0x399661=_0x399661[a23_0x1041('0x4')](_0x266082,_0x10b40a||[]))[a23_0x1041('0x0')]());});};Object[a23_0x1041('0x5')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a23_0x1041('0x6'));const playerService_1=require('./playerService');const mediainfo=require(a23_0x1041('0x7'));const fs=require('fs');const url=require(a23_0x1041('0x8'));const http=require(a23_0x1041('0x9'));const fsExtra=require(a23_0x1041('0xa'));const request=require('request');const progress=require(a23_0x1041('0xb'));const spawn=require(a23_0x1041('0xc'))[a23_0x1041('0xd')];const exec=require('child_process')['exec'];const isImage=require(a23_0x1041('0xe'));const format=require(a23_0x1041('0xf'));const os=require('os');const youtubedl=require(a23_0x1041('0x10'));const uuidv4=require('uuid/v4');const configFile=a23_0x1041('0x11');const contextFile=a23_0x1041('0x12');const urlExists=require(a23_0x1041('0x13'));const kodi_rpc=require(a23_0x1041('0x14'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a23_0x1041('0x15')]='media/';this[a23_0x1041('0x16')]=this[a23_0x1041('0x15')]+a23_0x1041('0x17');this['filesFolder']=this['mediaFolder']+'files/';this[a23_0x1041('0x18')]=this[a23_0x1041('0x15')]+'playlist.txt';this[a23_0x1041('0x19')]=this[a23_0x1041('0x1a')]+'lulo_playlist.m3u';this[a23_0x1041('0x1b')]=0x0;this[a23_0x1041('0x1c')]=![];this[a23_0x1041('0x1d')]=[];this[a23_0x1041('0x1e')]=[];this[a23_0x1041('0x1f')]={};this['kodiHost']='http://localhost';this[a23_0x1041('0x20')]=a23_0x1041('0x21');this[a23_0x1041('0x22')]=a23_0x1041('0x23');this[a23_0x1041('0x24')]=![];this[a23_0x1041('0x25')]=new HttpClientService_1[(a23_0x1041('0x26'))]();this[a23_0x1041('0x27')]=new playerService_1['PlayerService']();}[a23_0x1041('0x28')](){this['config']=JSON['parse'](fs[a23_0x1041('0x29')](configFile));this[a23_0x1041('0x2a')]=JSON['parse'](fs[a23_0x1041('0x29')](contextFile));this[a23_0x1041('0x2b')]=this['config'][a23_0x1041('0x2b')];this[a23_0x1041('0x2c')]=process[a23_0x1041('0x2d')][a23_0x1041('0x2e')]+a23_0x1041('0x2f');this[a23_0x1041('0x30')]=this['baseURL']+a23_0x1041('0x31');this[a23_0x1041('0x32')]=this[a23_0x1041('0x2c')]+'api/player.php?player_id={0}';this[a23_0x1041('0x33')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a23_0x1041('0x20')],'password':this[a23_0x1041('0x22')]});this[a23_0x1041('0x34')]();this[a23_0x1041('0x35')]();this[a23_0x1041('0x36')]();this[a23_0x1041('0x37')]();setInterval(function(){this[a23_0x1041('0x38')]();}[a23_0x1041('0x39')](this),0x2710);setInterval(function(){this[a23_0x1041('0x35')]();}[a23_0x1041('0x39')](this),0x493e0);}[a23_0x1041('0x34')](){}['registerClient'](){this['kodi'][a23_0x1041('0x3a')]['getItems'](0x1)[a23_0x1041('0x3')](function(_0x6edd10){const _0x497a96=JSON[a23_0x1041('0x3b')](_0x6edd10);const _0x390e06={'player_id':this[a23_0x1041('0x2b')],'device_uuid':this[a23_0x1041('0x3c')][a23_0x1041('0x3d')],'network_info':JSON[a23_0x1041('0x3b')](os[a23_0x1041('0x3e')]()),'firmware_info':JSON['stringify'](this[a23_0x1041('0x2a')]),'playlist':_0x497a96,'playing_item':'','status':0x0};this['httpClientService'][a23_0x1041('0x3f')](a23_0x1041('0x40'),_0x390e06,![])[a23_0x1041('0x3')](function(_0x228424){console[a23_0x1041('0x41')](a23_0x1041('0x42')+Date());})[a23_0x1041('0x43')](function(_0x22e8d9){});console[a23_0x1041('0x41')](_0x390e06);}[a23_0x1041('0x39')](this));const _0x6dfb6b=this[a23_0x1041('0x3c')][a23_0x1041('0x3d')];if(!_0x6dfb6b||_0x6dfb6b==''){this[a23_0x1041('0x3c')]['deviceUuid']=uuidv4();this[a23_0x1041('0x3c')]={'deviceUuid':this[a23_0x1041('0x3c')][a23_0x1041('0x3d')],'playerId':this[a23_0x1041('0x3c')]['playerId']};fs[a23_0x1041('0x44')](configFile,JSON[a23_0x1041('0x3b')](this[a23_0x1041('0x3c')]));}}[a23_0x1041('0x38')](){console[a23_0x1041('0x41')](a23_0x1041('0x38'));this[a23_0x1041('0x33')][a23_0x1041('0x45')]['getCurrentlyPlayingVideo']()[a23_0x1041('0x3')](function(_0x2adf6d){const _0x2cc32c=_0x2adf6d[a23_0x1041('0x46')][a23_0x1041('0x47')];this[a23_0x1041('0x48')](_0x2cc32c);}['bind'](this))[a23_0x1041('0x43')](function(_0x4bf28a){console[a23_0x1041('0x41')](_0x4bf28a);this['reportStatus'](_0x4bf28a);}[a23_0x1041('0x39')](this));}['reportStatus'](_0x138198){console[a23_0x1041('0x41')]('playingItem:\x20'+_0x138198);const _0x3cd2fb={'player_id':this[a23_0x1041('0x2b')],'device_uuid':this[a23_0x1041('0x3c')][a23_0x1041('0x3d')],'status':_0x138198!=''&&_0x138198!=null?0x1:0x0,'playing_item':_0x138198};this[a23_0x1041('0x25')][a23_0x1041('0x3f')]('http://restapi.lulo.run/player_devices/report_status',_0x3cd2fb,![])[a23_0x1041('0x3')](function(_0x15decc){console['log'](a23_0x1041('0x49')+Date());})[a23_0x1041('0x43')](function(_0x356f44){});}['checkFolders'](){fsExtra['ensureDir'](this[a23_0x1041('0x15')],_0x3e1fc5=>{});fsExtra[a23_0x1041('0x4a')](this[a23_0x1041('0x16')],_0x18a618=>{});fsExtra['ensureDir'](this[a23_0x1041('0x1a')],_0x38b74f=>{});}[a23_0x1041('0x37')](){const _0x3fce9b=format(this['playListServiceURL'],this[a23_0x1041('0x2b')]);console['log'](_0x3fce9b);request({'url':_0x3fce9b,'json':!![]},function(_0x52eb44,_0x594e38,_0x143294){console[a23_0x1041('0x41')]('loadMediaList:\x20');this['newPlayList']=_0x143294;this[a23_0x1041('0x1c')]=this[a23_0x1041('0x4b')]();fsExtra[a23_0x1041('0x4c')](this[a23_0x1041('0x16')]);this['downloadFiles']=[];this[a23_0x1041('0x1e')]=[];this[a23_0x1041('0x1b')]=0x0;for(const _0x14634a in _0x143294){this[a23_0x1041('0x1d')][a23_0x1041('0x4d')](_0x143294[_0x14634a]);}console[a23_0x1041('0x41')]('Total:\x20'+this['downloadFiles'][a23_0x1041('0x4e')]);if(this[a23_0x1041('0x1d')]['length']>0x0){this['download']();}}[a23_0x1041('0x39')](this));}['reloadMediaList'](){this[a23_0x1041('0x24')]=!![];if(fsExtra['existsSync'](this[a23_0x1041('0x16')])){fsExtra[a23_0x1041('0x4c')](this[a23_0x1041('0x16')]);}if(fsExtra[a23_0x1041('0x4f')](this[a23_0x1041('0x1a')])){fsExtra[a23_0x1041('0x4c')](this[a23_0x1041('0x1a')]);}if(!fsExtra[a23_0x1041('0x4f')](this[a23_0x1041('0x18')])){fsExtra['removeSync'](this[a23_0x1041('0x18')]);}if(!fsExtra[a23_0x1041('0x4f')](this[a23_0x1041('0x19')])){fsExtra[a23_0x1041('0x50')](this[a23_0x1041('0x19')]);}this['loadMediaList']();}[a23_0x1041('0x4b')](){const _0x5a1698=JSON[a23_0x1041('0x3b')](this[a23_0x1041('0x1f')]);try{if(!fsExtra[a23_0x1041('0x4f')](this['playListFile'])){return!![];}else{const _0x2dd872=fsExtra['readFileSync'](this[a23_0x1041('0x18')])[a23_0x1041('0x51')]();if(_0x2dd872!=_0x5a1698){return!![];}}}catch(_0x4aeb4e){console['log'](_0x4aeb4e);}return![];}['download'](){console[a23_0x1041('0x41')]('this.currentFile:\x20'+this[a23_0x1041('0x1b')]+'\x20of\x20'+this[a23_0x1041('0x1d')]['length']);if(this[a23_0x1041('0x1b')]>=this[a23_0x1041('0x1d')][a23_0x1041('0x4e')]){this[a23_0x1041('0x52')]();return;}const _0xcbdc9f=String(this[a23_0x1041('0x1d')][this[a23_0x1041('0x1b')]][a23_0x1041('0x53')]);const _0x5d7614=this[a23_0x1041('0x1d')][this[a23_0x1041('0x1b')]][a23_0x1041('0x54')];let _0x36c5c6=_0xcbdc9f[a23_0x1041('0x55')](_0xcbdc9f['lastIndexOf']('/')+0x1);const _0x488c96=_0x36c5c6[a23_0x1041('0x56')]('.')['slice'](0x0,-0x1)['join']('.');let _0x3ec3bd=this['baseURL']+_0xcbdc9f;const _0x2dea7=_0x3ec3bd['split']('.')[a23_0x1041('0x57')](0x0,-0x1)[a23_0x1041('0x58')]('.');if(_0x5d7614==a23_0x1041('0x59')){_0x36c5c6=_0x36c5c6+a23_0x1041('0x5a');}else if(_0x5d7614==a23_0x1041('0x5b')){_0x36c5c6=_0x488c96+a23_0x1041('0x5a');_0x3ec3bd=_0x2dea7+a23_0x1041('0x5a');}console[a23_0x1041('0x41')](a23_0x1041('0x5c'));console['log'](_0xcbdc9f);console[a23_0x1041('0x41')](_0x5d7614);console['log'](_0x36c5c6);console[a23_0x1041('0x41')](_0x3ec3bd);console[a23_0x1041('0x41')](_0x488c96);console[a23_0x1041('0x41')](_0x2dea7);console[a23_0x1041('0x41')](a23_0x1041('0x5c'));if(fsExtra[a23_0x1041('0x4f')](this[a23_0x1041('0x16')]+_0x36c5c6)){this[a23_0x1041('0x5d')](this['tempFolder']+_0x36c5c6)[a23_0x1041('0x3')](function(_0x306663){if(_0x306663){this[a23_0x1041('0x1b')]++;}else{this[a23_0x1041('0x1c')]=!![];}this[a23_0x1041('0x5e')]();}['bind'](this));}else if(fsExtra[a23_0x1041('0x4f')](this[a23_0x1041('0x1a')]+_0x36c5c6)){this[a23_0x1041('0x5d')](this[a23_0x1041('0x1a')]+_0x36c5c6)[a23_0x1041('0x3')](function(_0x41e979){if(_0x41e979){fsExtra[a23_0x1041('0x5f')](this[a23_0x1041('0x1a')]+_0x36c5c6,this[a23_0x1041('0x16')]+_0x36c5c6);this['currentFile']++;}else{this[a23_0x1041('0x1c')]=!![];}this['download']();}[a23_0x1041('0x39')](this));}else{console['log'](a23_0x1041('0x60')+_0x3ec3bd);this[a23_0x1041('0x1c')]=!![];if(_0x5d7614==a23_0x1041('0x59')){this['downloadYouTube'](_0xcbdc9f);}else{this[a23_0x1041('0x61')](_0x3ec3bd,_0x36c5c6,_0x5d7614);}}}[a23_0x1041('0x5d')](_0x495c3a){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0x1041('0x62')+_0x495c3a);const _0x193502=yield mediainfo(_0x495c3a)['catch'](_0x20a683=>{console['log'](_0x20a683);fsExtra[a23_0x1041('0x50')](_0x495c3a);return![];});const _0x36e543=_0x193502[a23_0x1041('0x63')]['track'][a23_0x1041('0x4e')]>0x1&&_0x193502['media'][a23_0x1041('0x64')][0x1][a23_0x1041('0x65')]==a23_0x1041('0x66');if(!_0x36e543){fsExtra[a23_0x1041('0x50')](_0x495c3a);}console[a23_0x1041('0x41')](a23_0x1041('0x67')+_0x36e543);return _0x36e543;});}[a23_0x1041('0x61')](_0x1d4c52,_0xef95b4,_0x22a5af){const _0x2bbc55=new Downloader();console[a23_0x1041('0x41')](_0x1d4c52);console[a23_0x1041('0x41')](_0xef95b4);console['log'](_0x22a5af);const _0x4e914c=_0x2bbc55[a23_0x1041('0x5e')](_0x1d4c52,this[a23_0x1041('0x16')]+_0xef95b4);urlExists(_0x1d4c52,function(_0x11bfe9,_0x5e211f){if(_0x5e211f){if(this[a23_0x1041('0x1e')][a23_0x1041('0x68')](this['currentFile'])){const _0x380e4c=this['failDownloadFiles'][a23_0x1041('0x69')](this['currentFile']);if(_0x380e4c>-0x1){this[a23_0x1041('0x1e')][a23_0x1041('0x6a')](_0x380e4c,0x1);}}console[a23_0x1041('0x41')](a23_0x1041('0x6b')+_0x1d4c52);_0x4e914c[a23_0x1041('0x6c')]();}else{if(!this[a23_0x1041('0x1e')][a23_0x1041('0x68')](this['currentFile'])){this[a23_0x1041('0x1e')][a23_0x1041('0x4d')](this[a23_0x1041('0x1b')]);}console[a23_0x1041('0x41')](a23_0x1041('0x6d')+_0x1d4c52);this['currentFile']++;this[a23_0x1041('0x5e')]();}}[a23_0x1041('0x39')](this));_0x4e914c['on'](a23_0x1041('0x6c'),function(_0x4e914c){console[a23_0x1041('0x41')]('start:\x20'+_0x1d4c52);});_0x4e914c['on']('error',function(_0x4e914c){console['log'](a23_0x1041('0x6e'));this[a23_0x1041('0x5e')]();}[a23_0x1041('0x39')](this));_0x4e914c['on'](a23_0x1041('0x6f'),function(_0x4e914c){console[a23_0x1041('0x41')](a23_0x1041('0x6f'));console[a23_0x1041('0x41')](a23_0x1041('0x70')+_0xef95b4);console[a23_0x1041('0x41')](a23_0x1041('0x71')+_0x22a5af);this[a23_0x1041('0x5d')](this['tempFolder']+_0xef95b4)[a23_0x1041('0x3')](function(_0x332124){if(_0x332124){this[a23_0x1041('0x1b')]++;}this[a23_0x1041('0x5e')]();}[a23_0x1041('0x39')](this));}[a23_0x1041('0x39')](this));_0x4e914c['on'](a23_0x1041('0x72'),function(_0x4e914c){console[a23_0x1041('0x41')](a23_0x1041('0x72'));});_0x4e914c['on']('destroyed',function(_0x4e914c){console[a23_0x1041('0x41')](a23_0x1041('0x73'));});_0x4e914c['on']('retry',function(_0x4e914c){console[a23_0x1041('0x41')]('retry');});}[a23_0x1041('0x74')](_0x33cada,_0x2ecc3a,_0x450853,_0x20e5fc){console['log'](a23_0x1041('0x74'));console[a23_0x1041('0x41')](_0x33cada);const _0x32ee62=!![];let _0x15eeb3=0x0;const _0x4b9e1c='';console['log'](a23_0x1041('0x75')+_0x33cada+a23_0x1041('0x76')+_0x2ecc3a);if(_0x15eeb3){if(_0x15eeb3>0x5){_0x20e5fc(a23_0x1041('0x77'),_0x33cada,_0x450853,null);return;}}else{_0x15eeb3=0x0;}const _0x34aa53=this[a23_0x1041('0x16')]+_0x2ecc3a;let _0x2bf4f6;if(_0x20e5fc===undefined){console[a23_0x1041('0x41')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x33cada+a23_0x1041('0x76')+_0x34aa53);_0x20e5fc=function(_0x348dd7,_0x3907bc){console[a23_0x1041('0x41')](a23_0x1041('0x78'),_0x348dd7,_0x3907bc);};}http[a23_0x1041('0x79')][a23_0x1041('0x7a')]=0x64;const _0xced6ac={'host':url[a23_0x1041('0x7b')](_0x33cada)['host'],'port':0x50,'path':url[a23_0x1041('0x7b')](_0x33cada)['pathname'],'agent':![]};const _0x3b75b2=http[a23_0x1041('0x7c')](_0xced6ac,function(_0x23c78b){let _0x5dcccc=0x0;let _0x18b328=0x0;function _0x139994(){if(_0x5dcccc===undefined){console[a23_0x1041('0x41')](_0x2ecc3a+'\x20Progress:\x20unknown\x09'+_0x18b328+'/'+'?');}const _0x58c41=_0x18b328/_0x5dcccc*0x64;console[a23_0x1041('0x41')](_0x2ecc3a+a23_0x1041('0x7d')+_0x58c41+'%\x09'+_0x18b328+'/'+_0x5dcccc);}console[a23_0x1041('0x41')](_0x2ecc3a+'\x20'+_0x23c78b[a23_0x1041('0x7e')]);switch(_0x23c78b[a23_0x1041('0x7e')]){case 0xc8:_0x5dcccc=_0x23c78b[a23_0x1041('0x7f')][a23_0x1041('0x80')]||_0x4b9e1c;fs['stat'](_0x34aa53,function(_0x5d0977,_0x6a07e9){if(!_0x5d0977){console[a23_0x1041('0x41')](a23_0x1041('0x81')+_0x34aa53);if(_0x6a07e9['size']==_0x5dcccc){console['log'](a23_0x1041('0x82')+_0x5dcccc+')');console[a23_0x1041('0x41')](a23_0x1041('0x83'));}else{console[a23_0x1041('0x41')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x6a07e9[a23_0x1041('0x84')]+a23_0x1041('0x85')+_0x5dcccc+')');}}_0x2bf4f6=fs['createWriteStream'](_0x34aa53);_0x23c78b['pipe'](_0x2bf4f6);_0x23c78b['on'](a23_0x1041('0x86'),function(_0x281bb0){_0x18b328+=_0x281bb0[a23_0x1041('0x4e')];_0x139994();});_0x3b75b2['on']('error',function(_0x5d0977){console[a23_0x1041('0x41')](a23_0x1041('0x87'));console[a23_0x1041('0x41')](_0x5d0977);});_0x2bf4f6['on'](a23_0x1041('0x88'),function(){console[a23_0x1041('0x41')]('Downloaded\x20'+_0x33cada+a23_0x1041('0x76')+_0x2ecc3a);_0x20e5fc(null,_0x2ecc3a,_0x450853,_0x2ecc3a);}[a23_0x1041('0x39')](this));});break;case 0x12e:const _0x1208c1=_0x23c78b[a23_0x1041('0x7f')][a23_0x1041('0x89')];console[a23_0x1041('0x41')](a23_0x1041('0x8a')+_0x33cada+a23_0x1041('0x76')+_0x1208c1);if(_0x15eeb3<0x5){this[a23_0x1041('0x74')](_0x1208c1,_0x2ecc3a,_0x20e5fc,_0x15eeb3++);}else{console['error'](a23_0x1041('0x8b')+_0x33cada+'.');_0x20e5fc('302',null,null,null);}return;case 0x194:console['log'](a23_0x1041('0x8c')+_0x33cada);default:console[a23_0x1041('0x41')](a23_0x1041('0x8d')+_0x33cada+a23_0x1041('0x8e')+_0x23c78b['statusCode']);_0x3b75b2[a23_0x1041('0x8f')]();_0x20e5fc(_0x23c78b['statusCode'],null,null,null);return;}})['on'](a23_0x1041('0x90'),function(_0x1b4f85){console[a23_0x1041('0x41')]('Error\x20Downloading:\x20'+_0x33cada+'\x20'+_0x1b4f85[a23_0x1041('0x91')]);_0x20e5fc(_0x1b4f85,null,null,null);});}['downloadHTTPFileCallback'](_0x273828,_0x36d128,_0x3a1991,_0x129790){console[a23_0x1041('0x41')](a23_0x1041('0x92'));console['log'](_0x273828);console[a23_0x1041('0x41')](_0x36d128);console[a23_0x1041('0x41')](_0x3a1991);console['log'](_0x129790);if(_0x3a1991==a23_0x1041('0x5b')){const _0x280bbe=this['downloadFiles'][this[a23_0x1041('0x1b')]][a23_0x1041('0x93')]!=null?this['downloadFiles'][this[a23_0x1041('0x1b')]]['duration']:0x1e;this[a23_0x1041('0x94')](_0x129790,_0x280bbe);}else if(_0x3a1991=='video'){if(_0x273828==null&&_0x36d128!=''){this[a23_0x1041('0x1b')]++;}this[a23_0x1041('0x5e')]();}console[a23_0x1041('0x41')](this[a23_0x1041('0x1b')]);}[a23_0x1041('0x95')](_0xaaa216,_0x114d07,_0x459b5e){progress(request(_0xaaa216),{})['on'](a23_0x1041('0x96'),function(_0x37fd2f){console[a23_0x1041('0x41')](_0x37fd2f);})['on'](a23_0x1041('0x90'),function(_0x24ad62){console[a23_0x1041('0x41')](a23_0x1041('0x97'));this[a23_0x1041('0x5e')]();})['on'](a23_0x1041('0x6f'),function(){console[a23_0x1041('0x41')]('Downloaded:\x20'+_0x114d07);console[a23_0x1041('0x41')]('mediaType:\x20'+_0x459b5e);if(_0x459b5e==a23_0x1041('0x5b')){const _0x1d172e=this['downloadFiles'][this['currentFile']][a23_0x1041('0x93')]!=null?this[a23_0x1041('0x1d')][this[a23_0x1041('0x1b')]]['duration']:0x1e;this['createImageVideo'](_0x114d07,_0x1d172e);}else if(_0x459b5e==a23_0x1041('0x98')){this[a23_0x1041('0x1b')]++;this['download']();}}[a23_0x1041('0x39')](this))[a23_0x1041('0x99')](fs['createWriteStream'](this['tempFolder']+_0x114d07));}[a23_0x1041('0x94')](_0x3a3b21,_0x27c905=0x1e){const _0xb2b1b=this[a23_0x1041('0x16')]+_0x3a3b21;console[a23_0x1041('0x41')](_0xb2b1b);console[a23_0x1041('0x41')](_0x3a3b21);const _0x5531fc=_0x3a3b21[a23_0x1041('0x56')]('.')[a23_0x1041('0x57')](0x0,-0x1)[a23_0x1041('0x58')]('.');const _0x21c788=a23_0x1041('0x9a');const _0x294a15=['-y','-r',a23_0x1041('0x9b'),a23_0x1041('0x9c'),'1',a23_0x1041('0x9d'),'glob','-i',_0xb2b1b,'-t',String(_0x27c905),a23_0x1041('0x9e'),'libx264',a23_0x1041('0x9f'),a23_0x1041('0xa0'),'-r','25',a23_0x1041('0xa1'),a23_0x1041('0xa2'),this[a23_0x1041('0x16')]+_0x5531fc+'.mp4'];const _0xb82a90=spawn(_0x21c788,_0x294a15);_0xb82a90[a23_0x1041('0xa3')]['on'](a23_0x1041('0x86'),function(_0x733b53){console[a23_0x1041('0x41')](a23_0x1041('0xa4')+_0xb2b1b);});_0xb82a90[a23_0x1041('0xa5')]['on'](a23_0x1041('0x86'),function(_0x3710fb){console[a23_0x1041('0x41')](a23_0x1041('0xa6')+_0x3710fb);}[a23_0x1041('0x39')](this));_0xb82a90['on']('close',function(){console[a23_0x1041('0x41')]('finished\x20mp4\x20convert');this[a23_0x1041('0x1b')]++;this[a23_0x1041('0x5e')]();}[a23_0x1041('0x39')](this));}['downloadYouTube'](_0x50dc19){const _0x1ab846=this[a23_0x1041('0x16')]+'/'+_0x50dc19+a23_0x1041('0x5a');const _0x558dfa=youtubedl(a23_0x1041('0xa7')+_0x50dc19,[a23_0x1041('0xa8')],{'cwd':__dirname});_0x558dfa['on'](a23_0x1041('0xa9'),function(_0x2e586a){console[a23_0x1041('0x41')](a23_0x1041('0xaa'));console[a23_0x1041('0x41')]('filename:\x20'+_0x2e586a[a23_0x1041('0xab')]);console[a23_0x1041('0x41')](a23_0x1041('0xac')+_0x2e586a[a23_0x1041('0x84')]);});_0x558dfa['on']('complete',function complete(_0x5d502a){'use strict';console[a23_0x1041('0x41')](a23_0x1041('0xad')+_0x5d502a[a23_0x1041('0xab')]+a23_0x1041('0xae'));});_0x558dfa['on'](a23_0x1041('0x6f'),function(){console[a23_0x1041('0x41')](a23_0x1041('0xaf'));this[a23_0x1041('0x5d')](_0x1ab846)['then'](function(_0x26119d){if(_0x26119d){this[a23_0x1041('0x1b')]++;}this['download']();}['bind'](this));}[a23_0x1041('0x39')](this));_0x558dfa[a23_0x1041('0x99')](fs[a23_0x1041('0xb0')](_0x1ab846));}[a23_0x1041('0x52')](){console['log'](a23_0x1041('0xb1'));if(this[a23_0x1041('0x1c')]){if(this[a23_0x1041('0x1e')]['length']==0x0){fs[a23_0x1041('0x44')](this[a23_0x1041('0x18')],JSON[a23_0x1041('0x3b')](this[a23_0x1041('0x1f')]));let _0x5dc376=a23_0x1041('0xb2')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x8a3bf1 in this[a23_0x1041('0x1d')]){const _0x2e08f2=this[a23_0x1041('0x1d')][_0x8a3bf1]['path'];const _0x2f78a7=this[a23_0x1041('0x1d')][_0x8a3bf1][a23_0x1041('0x54')];const _0x6694c8=_0x2e08f2[a23_0x1041('0x55')](_0x2e08f2[a23_0x1041('0xb3')]('/')+0x1);let _0x545a79=_0x6694c8['split']('.')[a23_0x1041('0x57')](0x0,-0x1)['join']('.');if(_0x2f78a7==a23_0x1041('0x59')){_0x545a79=_0x2e08f2;}_0x5dc376+=a23_0x1041('0xb4')+_0x545a79+a23_0x1041('0x5a')+'\x0d\x0a';}fsExtra[a23_0x1041('0x4c')](this[a23_0x1041('0x1a')]);fsExtra[a23_0x1041('0x5f')](this[a23_0x1041('0x16')],this[a23_0x1041('0x1a')]);fsExtra[a23_0x1041('0x44')](this[a23_0x1041('0x19')],_0x5dc376);fsExtra[a23_0x1041('0x4c')](this['tempFolder']);console[a23_0x1041('0x41')](a23_0x1041('0xb5'));this[a23_0x1041('0xb6')]();}else{console['log'](a23_0x1041('0xb7'));this[a23_0x1041('0x1b')]=0x0;setTimeout(function(){this[a23_0x1041('0x5e')]();}['bind'](this),0x1388);}}else{console['log']('No\x20playlist\x20changes.');}}[a23_0x1041('0xb6')](){this[a23_0x1041('0xb8')]('Playlist.Clear',{'playlistid':0x1},function(_0x3737cf){console[a23_0x1041('0x41')](a23_0x1041('0xb9'));console[a23_0x1041('0x41')](_0x3737cf);this[a23_0x1041('0xb8')](a23_0x1041('0xba'),{'item':{'file':a23_0x1041('0xbb')},'playlistid':0x1},function(_0x3737cf){console[a23_0x1041('0x41')](a23_0x1041('0xbc'));console['log'](_0x3737cf);this[a23_0x1041('0xb8')](a23_0x1041('0xbd'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x3737cf){console[a23_0x1041('0x41')](a23_0x1041('0xbe'));console[a23_0x1041('0x41')](_0x3737cf);if(this[a23_0x1041('0x24')]){this[a23_0x1041('0x24')]=![];this['kodiCommandClient']('RestartApp()');}}[a23_0x1041('0x39')](this));}[a23_0x1041('0x39')](this));}[a23_0x1041('0x39')](this));}['reboot'](){console[a23_0x1041('0x41')](a23_0x1041('0xbf'));exec(a23_0x1041('0xc0'),function(_0x3f9eed){console[a23_0x1041('0x41')](_0x3f9eed);});}[a23_0x1041('0xc1')](){const _0x4f7891=format(this[a23_0x1041('0x32')],this[a23_0x1041('0x2b')]);console[a23_0x1041('0x41')](_0x4f7891);request({'url':_0x4f7891,'json':!![]},function(_0xc510bf,_0x224912,_0x536dac){if(_0x536dac[a23_0x1041('0x4e')]>0x0){const _0x12284a=_0x536dac[0x0];const _0x32e5c4=_0x12284a[a23_0x1041('0xc2')];const _0x785dd=_0x12284a[a23_0x1041('0xc3')]==0x1;this[a23_0x1041('0xc4')](_0x32e5c4);this[a23_0x1041('0xc5')](_0x785dd);}console[a23_0x1041('0x41')](_0x536dac);}[a23_0x1041('0x39')](this));}['setRss'](_0x1e1e2e){const _0x413322=_0x1e1e2e!=null&&_0x1e1e2e!='';const _0x2b6e2a=a23_0x1041('0xc6');const _0x4b1981=fsExtra[a23_0x1041('0x29')](_0x2b6e2a);console[a23_0x1041('0x41')](a23_0x1041('0xc7')+_0x4b1981);const _0x49f85b=require(a23_0x1041('0xc8'));const _0x281f32=_0x49f85b[a23_0x1041('0xc9')];_0x281f32(_0x4b1981,function(_0x1fd3a1,_0x4c3786){console['log'](a23_0x1041('0xca'),_0x1fd3a1);console[a23_0x1041('0x41')](a23_0x1041('0xcb'),_0x4c3786);if(!_0x1e1e2e||_0x1e1e2e==null||_0x1e1e2e==''){_0x1e1e2e=a23_0x1041('0xcc');}_0x4c3786[a23_0x1041('0xcd')]['set'][0x0][a23_0x1041('0xce')][0x0]['_']=_0x1e1e2e;const _0x25d568=new _0x49f85b['Builder']();const _0x414d44=_0x25d568['buildObject'](_0x4c3786);console[a23_0x1041('0x41')](a23_0x1041('0xcf'),_0x414d44);fsExtra[a23_0x1041('0x44')](_0x2b6e2a,_0x414d44);});this['kodiCommandClient'](a23_0x1041('0xd0'));this[a23_0x1041('0xb8')](a23_0x1041('0xd1'),{'setting':a23_0x1041('0xd2'),'value':_0x413322},function(_0x56c07d){console[a23_0x1041('0x41')](a23_0x1041('0xd3'));console[a23_0x1041('0x41')](_0x56c07d);}['bind'](this));}['enableClock'](_0x5da2f8){this['jsonrpcClient'](a23_0x1041('0xd1'),{'setting':a23_0x1041('0xd4'),'value':_0x5da2f8},function(_0x1c4d3d){console[a23_0x1041('0x41')]('enableClock:\x20');console[a23_0x1041('0x41')](_0x1c4d3d);}[a23_0x1041('0x39')](this));}['kodiCommandClient'](_0x5e2a0f){exec(a23_0x1041('0xd5')+_0x5e2a0f+'\x22',function(_0x39a20a){console[a23_0x1041('0x41')](_0x39a20a);});}[a23_0x1041('0xb8')](_0x2f8ff4,_0x4b7ed1,_0x5640d5){const _0x1c96bb={'jsonrpc':a23_0x1041('0xd6'),'method':_0x2f8ff4,'params':_0x4b7ed1,'id':0x1};this[a23_0x1041('0x25')][a23_0x1041('0x3f')](this[a23_0x1041('0xd7')]+a23_0x1041('0xd8'),_0x1c96bb,![],{'user':this[a23_0x1041('0x20')],'pass':this[a23_0x1041('0x22')]})[a23_0x1041('0x3')](function(_0x2dc5b9){_0x5640d5(_0x2dc5b9);})['catch'](function(_0x42faa8){});}}exports[a23_0x1041('0xd9')]=SyncPlaylistsService;