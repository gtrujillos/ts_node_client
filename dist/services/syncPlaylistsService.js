var a22_0x3dbc=['Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','finish','Downloaded\x20','location','302','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','video','downloadRequestFile','progress','createImageVideo','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','Converting\x20','stderr','data','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','pipe','/home/osmc/luloclient/media/files/','Finished','Playlist\x20incomplete,\x20retry.','__awaiter','next','throw','value','then','apply','defineProperty','../infrastructure/HttpClientService','node-mediainfo','url','http','request-progress','child_process','spawn','is-image','string-template','uuid/v4','config.json','context.json','url-exists','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','downloadFiles','failDownloadFiles','newPlayList','httpClientService','HttpClientService','init','config','parse','readFileSync','context','playerId','baseURL','deploy/','playListServiceURL','checkDependencies','system-installer','mediainfo','log','mediainfo:\x20','catch','registerClient','deviceUuid','writeFileSync','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','reportStatus','reportStatusResponse:\x20','checkFolders','ensureDir','emptyDirSync','currentFile','push','Total:\x20','length','download','bind','reloadMediaList','existsSync','removeSync','loadMediaList','hasPlayListChanged','error','this.currentFile:\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','checkVideo','copySync','downloadYouTube','downloader','videoFile:\x20','media','track','@type','includes','indexOf','splice','downloading:\x20','start','error:\x20','end'];(function(_0x4e9d33,_0xd5d107){var _0x2eda1f=function(_0x406a05){while(--_0x406a05){_0x4e9d33['push'](_0x4e9d33['shift']());}};_0x2eda1f(++_0xd5d107);}(a22_0x3dbc,0xec));var a22_0x4c77=function(_0x4b7003,_0x4da476){_0x4b7003=_0x4b7003-0x0;var _0x20259c=a22_0x3dbc[_0x4b7003];return _0x20259c;};'use strict';var __awaiter=this&&this[a22_0x4c77('0x0')]||function(_0x592c3,_0x1962f6,_0x4645cd,_0x5b4b34){return new(_0x4645cd||(_0x4645cd=Promise))(function(_0x40510d,_0x2e539d){function _0x55ec1f(_0xa82de2){try{_0xd1480(_0x5b4b34[a22_0x4c77('0x1')](_0xa82de2));}catch(_0x21ea13){_0x2e539d(_0x21ea13);}}function _0x25467e(_0x50ac7d){try{_0xd1480(_0x5b4b34[a22_0x4c77('0x2')](_0x50ac7d));}catch(_0x64ebf2){_0x2e539d(_0x64ebf2);}}function _0xd1480(_0x107a8c){_0x107a8c['done']?_0x40510d(_0x107a8c[a22_0x4c77('0x3')]):new _0x4645cd(function(_0x40510d){_0x40510d(_0x107a8c[a22_0x4c77('0x3')]);})[a22_0x4c77('0x4')](_0x55ec1f,_0x25467e);}_0xd1480((_0x5b4b34=_0x5b4b34[a22_0x4c77('0x5')](_0x592c3,_0x1962f6||[]))['next']());});};Object[a22_0x4c77('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a22_0x4c77('0x7'));const mediainfo=require(a22_0x4c77('0x8'));const fs=require('fs');const url=require(a22_0x4c77('0x9'));const http=require(a22_0x4c77('0xa'));const fsExtra=require('fs-extra');const request=require('request');const progress=require(a22_0x4c77('0xb'));const spawn=require(a22_0x4c77('0xc'))[a22_0x4c77('0xd')];const isImage=require(a22_0x4c77('0xe'));const format=require(a22_0x4c77('0xf'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x4c77('0x10'));const configFile=a22_0x4c77('0x11');const contextFile=a22_0x4c77('0x12');const urlExists=require(a22_0x4c77('0x13'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a22_0x4c77('0x14')]=a22_0x4c77('0x15');this[a22_0x4c77('0x16')]=this[a22_0x4c77('0x14')]+a22_0x4c77('0x17');this[a22_0x4c77('0x18')]=this[a22_0x4c77('0x14')]+a22_0x4c77('0x19');this[a22_0x4c77('0x1a')]=this['mediaFolder']+a22_0x4c77('0x1b');this[a22_0x4c77('0x1c')]=this['filesFolder']+a22_0x4c77('0x1d');this['currentFile']=0x0;this[a22_0x4c77('0x1e')]=[];this[a22_0x4c77('0x1f')]=[];this[a22_0x4c77('0x20')]={};this[a22_0x4c77('0x21')]=new HttpClientService_1[(a22_0x4c77('0x22'))]();}[a22_0x4c77('0x23')](){this[a22_0x4c77('0x24')]=JSON[a22_0x4c77('0x25')](fs[a22_0x4c77('0x26')](configFile));this[a22_0x4c77('0x27')]=JSON[a22_0x4c77('0x25')](fs[a22_0x4c77('0x26')](contextFile));this[a22_0x4c77('0x28')]=this[a22_0x4c77('0x24')][a22_0x4c77('0x28')];this[a22_0x4c77('0x29')]=process['env']['WEB_SERVICE_URL']+a22_0x4c77('0x2a');this[a22_0x4c77('0x2b')]=this[a22_0x4c77('0x29')]+'api/player_playlist.php?player_id={0}';this[a22_0x4c77('0x2c')]();}[a22_0x4c77('0x2c')](){const _0x557c9b=require(a22_0x4c77('0x2d'))['installer'];_0x557c9b(a22_0x4c77('0x2e'))[a22_0x4c77('0x4')](function(_0x5dbe1c){console[a22_0x4c77('0x2f')](a22_0x4c77('0x30'));console['log'](_0x5dbe1c);})[a22_0x4c77('0x31')](function(_0x402070){console[a22_0x4c77('0x2f')]('ErrorX:\x20');console[a22_0x4c77('0x2f')](_0x402070);});}[a22_0x4c77('0x32')](){const _0x5ecb16=this[a22_0x4c77('0x24')]['deviceUuid'];if(!_0x5ecb16||_0x5ecb16==''){this[a22_0x4c77('0x24')][a22_0x4c77('0x33')]=uuidv4();this[a22_0x4c77('0x24')]={'deviceUuid':this[a22_0x4c77('0x24')][a22_0x4c77('0x33')],'playerId':this[a22_0x4c77('0x24')][a22_0x4c77('0x28')]};fs[a22_0x4c77('0x34')](configFile,JSON['stringify'](this[a22_0x4c77('0x24')]));}const _0x1982d3={'player_id':this['playerId'],'device_uuid':this[a22_0x4c77('0x24')][a22_0x4c77('0x33')],'network_info':JSON[a22_0x4c77('0x35')](os[a22_0x4c77('0x36')]()),'firmware_info':JSON[a22_0x4c77('0x35')](this[a22_0x4c77('0x27')]),'status':0x1};this[a22_0x4c77('0x21')][a22_0x4c77('0x37')](a22_0x4c77('0x38'),_0x1982d3,![])[a22_0x4c77('0x4')](function(_0x1dff9b){console[a22_0x4c77('0x2f')](a22_0x4c77('0x39')+Date());})[a22_0x4c77('0x31')](function(_0xbdd223){});}[a22_0x4c77('0x3a')](){const _0x31c493={'player_id':this[a22_0x4c77('0x28')],'device_uuid':this[a22_0x4c77('0x24')][a22_0x4c77('0x33')],'status':0x1};this[a22_0x4c77('0x21')][a22_0x4c77('0x37')]('http://restapi.lulo.run/player_devices/report_status',_0x31c493,![])[a22_0x4c77('0x4')](function(_0x4ed523){console['log'](a22_0x4c77('0x3b')+Date());})[a22_0x4c77('0x31')](function(_0x12a6fa){});}[a22_0x4c77('0x3c')](){fsExtra[a22_0x4c77('0x3d')](this['mediaFolder'],_0x15d856=>{});fsExtra['ensureDir'](this[a22_0x4c77('0x16')],_0xbe1408=>{});fsExtra[a22_0x4c77('0x3d')](this[a22_0x4c77('0x18')],_0x518751=>{});}['loadMediaList'](){const _0x47b33d=format(this[a22_0x4c77('0x2b')],this[a22_0x4c77('0x28')]);console['log'](_0x47b33d);request({'url':_0x47b33d,'json':!![]},function(_0x1d200a,_0x581e32,_0x507f66){this[a22_0x4c77('0x20')]=_0x507f66;fsExtra[a22_0x4c77('0x3e')](this[a22_0x4c77('0x16')]);this[a22_0x4c77('0x1e')]=[];this[a22_0x4c77('0x1f')]=[];this[a22_0x4c77('0x3f')]=0x0;for(const _0x4fd4db in _0x507f66){this['downloadFiles'][a22_0x4c77('0x40')](_0x507f66[_0x4fd4db]);}console[a22_0x4c77('0x2f')](a22_0x4c77('0x41')+this['downloadFiles']['length']);if(this[a22_0x4c77('0x1e')][a22_0x4c77('0x42')]>0x0){this[a22_0x4c77('0x43')]();}}[a22_0x4c77('0x44')](this));}[a22_0x4c77('0x45')](){if(fsExtra[a22_0x4c77('0x46')](this[a22_0x4c77('0x1a')])){fsExtra[a22_0x4c77('0x47')](this['playListFile']);}this[a22_0x4c77('0x48')]();}[a22_0x4c77('0x49')](){const _0x1e3c8a=JSON[a22_0x4c77('0x35')](this['newPlayList']);try{if(!fs[a22_0x4c77('0x46')](this[a22_0x4c77('0x1a')])){return!![];}else{const _0x30d1ba=fs[a22_0x4c77('0x26')](this[a22_0x4c77('0x1a')])['toString']();if(_0x30d1ba!=_0x1e3c8a){return!![];}}}catch(_0x332809){console[a22_0x4c77('0x4a')](_0x332809);}return![];}[a22_0x4c77('0x43')](){console['log'](a22_0x4c77('0x4b')+this[a22_0x4c77('0x3f')]+'\x20of\x20'+this['downloadFiles'][a22_0x4c77('0x42')]);if(this[a22_0x4c77('0x3f')]>=this[a22_0x4c77('0x1e')]['length']){this[a22_0x4c77('0x4c')]();return;}const _0x2d32f0=String(this['downloadFiles'][this[a22_0x4c77('0x3f')]][a22_0x4c77('0x4d')]);const _0x2930c5=this[a22_0x4c77('0x1e')][this['currentFile']][a22_0x4c77('0x4e')];let _0x3d547b=_0x2d32f0[a22_0x4c77('0x4f')](_0x2d32f0[a22_0x4c77('0x50')]('/')+0x1);const _0x472ad7=_0x3d547b[a22_0x4c77('0x51')]('.')[a22_0x4c77('0x52')](0x0,-0x1)[a22_0x4c77('0x53')]('.');let _0x5badbd=this[a22_0x4c77('0x29')]+_0x2d32f0;const _0x3d42ca=_0x5badbd['split']('.')[a22_0x4c77('0x52')](0x0,-0x1)[a22_0x4c77('0x53')]('.');if(_0x2930c5==a22_0x4c77('0x54')){_0x3d547b=_0x3d547b+a22_0x4c77('0x55');}else if(_0x2930c5=='image'){_0x3d547b=_0x472ad7+a22_0x4c77('0x55');_0x5badbd=_0x3d42ca+a22_0x4c77('0x55');}console['log']('**********+');console[a22_0x4c77('0x2f')](_0x2d32f0);console['log'](_0x2930c5);console[a22_0x4c77('0x2f')](_0x3d547b);console[a22_0x4c77('0x2f')](_0x5badbd);console[a22_0x4c77('0x2f')](_0x472ad7);console['log'](_0x3d42ca);console[a22_0x4c77('0x2f')](a22_0x4c77('0x56'));if(fsExtra[a22_0x4c77('0x46')](this[a22_0x4c77('0x16')]+_0x3d547b)){this[a22_0x4c77('0x57')](this['tempFolder']+_0x3d547b)[a22_0x4c77('0x4')](function(_0x5189a7){if(_0x5189a7){this[a22_0x4c77('0x3f')]++;}this[a22_0x4c77('0x43')]();}[a22_0x4c77('0x44')](this));}else if(fsExtra[a22_0x4c77('0x46')](this['filesFolder']+_0x3d547b)){this['checkVideo'](this[a22_0x4c77('0x18')]+_0x3d547b)[a22_0x4c77('0x4')](function(_0x56904a){if(_0x56904a){fsExtra[a22_0x4c77('0x58')](this['filesFolder']+_0x3d547b,this[a22_0x4c77('0x16')]+_0x3d547b);this[a22_0x4c77('0x3f')]++;}this[a22_0x4c77('0x43')]();}[a22_0x4c77('0x44')](this));}else{console[a22_0x4c77('0x2f')]('Downloading:\x20'+_0x5badbd);if(_0x2930c5==a22_0x4c77('0x54')){this[a22_0x4c77('0x59')](_0x2d32f0);}else{this[a22_0x4c77('0x5a')](_0x5badbd,_0x3d547b,_0x2930c5);}}}[a22_0x4c77('0x57')](_0x2a1058){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x4c77('0x2f')](a22_0x4c77('0x5b')+_0x2a1058);const _0x152ef1=yield mediainfo(_0x2a1058)['catch'](_0x10be69=>console[a22_0x4c77('0x2f')](_0x10be69));const _0x469e92=_0x152ef1[a22_0x4c77('0x5c')][a22_0x4c77('0x5d')][a22_0x4c77('0x42')]>0x1&&_0x152ef1[a22_0x4c77('0x5c')][a22_0x4c77('0x5d')][0x1][a22_0x4c77('0x5e')]=='Video';if(!_0x469e92){fsExtra[a22_0x4c77('0x47')](_0x2a1058);}console['log']('mediainfo\x20check:'+_0x469e92);return _0x469e92;});}[a22_0x4c77('0x5a')](_0x55fd25,_0x539ef1,_0x28c3c4){const _0x2d39a2=new Downloader();console[a22_0x4c77('0x2f')](_0x55fd25);console['log'](_0x539ef1);console[a22_0x4c77('0x2f')](_0x28c3c4);const _0x3d839d=_0x2d39a2[a22_0x4c77('0x43')](_0x55fd25,this['tempFolder']+_0x539ef1);urlExists(_0x55fd25,function(_0x9cab15,_0x357193){if(_0x357193){if(this['failDownloadFiles'][a22_0x4c77('0x5f')](this[a22_0x4c77('0x3f')])){const _0x5573fc=this[a22_0x4c77('0x1f')][a22_0x4c77('0x60')](this[a22_0x4c77('0x3f')]);if(_0x5573fc>-0x1){this[a22_0x4c77('0x1f')][a22_0x4c77('0x61')](_0x5573fc,0x1);}}console['log'](a22_0x4c77('0x62')+_0x55fd25);_0x3d839d[a22_0x4c77('0x63')]();}else{if(!this['failDownloadFiles'][a22_0x4c77('0x5f')](this[a22_0x4c77('0x3f')])){this[a22_0x4c77('0x1f')]['push'](this[a22_0x4c77('0x3f')]);}console['log']('Error:\x20'+_0x55fd25);this['currentFile']++;this['download']();}}[a22_0x4c77('0x44')](this));_0x3d839d['on'](a22_0x4c77('0x63'),function(_0x3d839d){console[a22_0x4c77('0x2f')]('start:\x20'+_0x55fd25);});_0x3d839d['on'](a22_0x4c77('0x4a'),function(_0x3d839d){console[a22_0x4c77('0x2f')](a22_0x4c77('0x64'));this[a22_0x4c77('0x43')]();}['bind'](this));_0x3d839d['on'](a22_0x4c77('0x65'),function(_0x3d839d){console[a22_0x4c77('0x2f')](a22_0x4c77('0x65'));console['log'](a22_0x4c77('0x66')+_0x539ef1);console[a22_0x4c77('0x2f')](a22_0x4c77('0x67')+_0x28c3c4);this['checkVideo'](this[a22_0x4c77('0x16')]+_0x539ef1)[a22_0x4c77('0x4')](function(_0x1fee47){if(_0x1fee47){this[a22_0x4c77('0x3f')]++;}this['download']();}[a22_0x4c77('0x44')](this));}[a22_0x4c77('0x44')](this));_0x3d839d['on'](a22_0x4c77('0x68'),function(_0x3d839d){console['log']('stopped');});_0x3d839d['on']('destroyed',function(_0x3d839d){console[a22_0x4c77('0x2f')](a22_0x4c77('0x69'));});_0x3d839d['on'](a22_0x4c77('0x6a'),function(_0x3d839d){console[a22_0x4c77('0x2f')](a22_0x4c77('0x6a'));});}[a22_0x4c77('0x6b')](_0x1b298a,_0x1ce601,_0x5ad146,_0x55f96e){console[a22_0x4c77('0x2f')]('downloadHTTPFile');console[a22_0x4c77('0x2f')](_0x1b298a);const _0x3a85bd=!![];let _0x30349d=0x0;const _0x3dbeb5='';console[a22_0x4c77('0x2f')](a22_0x4c77('0x6c')+_0x1b298a+a22_0x4c77('0x6d')+_0x1ce601);if(_0x30349d){if(_0x30349d>0x5){_0x55f96e('Max\x20redirects\x20reached',_0x1b298a,_0x5ad146,null);return;}}else{_0x30349d=0x0;}const _0x3c8a3e=this[a22_0x4c77('0x16')]+_0x1ce601;let _0x40cdae;if(_0x55f96e===undefined){console['log'](a22_0x4c77('0x6e')+_0x1b298a+a22_0x4c77('0x6d')+_0x3c8a3e);_0x55f96e=function(_0x4f3dd9,_0xad50ac){console[a22_0x4c77('0x2f')](a22_0x4c77('0x6f'),_0x4f3dd9,_0xad50ac);};}http[a22_0x4c77('0x70')][a22_0x4c77('0x71')]=0x64;const _0x2ff8b6={'host':url[a22_0x4c77('0x25')](_0x1b298a)[a22_0x4c77('0x72')],'port':0x50,'path':url[a22_0x4c77('0x25')](_0x1b298a)['pathname'],'agent':![]};const _0x2e657b=http[a22_0x4c77('0x73')](_0x2ff8b6,function(_0x24aa32){let _0x46cfba=0x0;let _0x5f1321=0x0;function _0x211a50(){if(_0x46cfba===undefined){console[a22_0x4c77('0x2f')](_0x1ce601+a22_0x4c77('0x74')+_0x5f1321+'/'+'?');}const _0x3e74eb=_0x5f1321/_0x46cfba*0x64;console[a22_0x4c77('0x2f')](_0x1ce601+a22_0x4c77('0x75')+_0x3e74eb+'%\x09'+_0x5f1321+'/'+_0x46cfba);}console[a22_0x4c77('0x2f')](_0x1ce601+'\x20'+_0x24aa32[a22_0x4c77('0x76')]);switch(_0x24aa32[a22_0x4c77('0x76')]){case 0xc8:_0x46cfba=_0x24aa32[a22_0x4c77('0x77')]['content-length']||_0x3dbeb5;fs[a22_0x4c77('0x78')](_0x3c8a3e,function(_0x16c255,_0x1dc77c){if(!_0x16c255){console['log'](a22_0x4c77('0x79')+_0x3c8a3e);if(_0x1dc77c[a22_0x4c77('0x7a')]==_0x46cfba){console[a22_0x4c77('0x2f')](a22_0x4c77('0x7b')+_0x46cfba+')');console[a22_0x4c77('0x2f')](a22_0x4c77('0x7c'));}else{console[a22_0x4c77('0x2f')](a22_0x4c77('0x7d')+_0x1dc77c[a22_0x4c77('0x7a')]+a22_0x4c77('0x7e')+_0x46cfba+')');}}_0x40cdae=fs[a22_0x4c77('0x7f')](_0x3c8a3e);_0x24aa32['pipe'](_0x40cdae);_0x24aa32['on']('data',function(_0xba0bbb){_0x5f1321+=_0xba0bbb[a22_0x4c77('0x42')];_0x211a50();});_0x2e657b['on'](a22_0x4c77('0x4a'),function(_0x16c255){console[a22_0x4c77('0x2f')]('err:\x20');console[a22_0x4c77('0x2f')](_0x16c255);});_0x40cdae['on'](a22_0x4c77('0x80'),function(){console['log'](a22_0x4c77('0x81')+_0x1b298a+'\x20to\x20'+_0x1ce601);_0x55f96e(null,_0x1ce601,_0x5ad146,_0x1ce601);}[a22_0x4c77('0x44')](this));});break;case 0x12e:const _0x2298f3=_0x24aa32[a22_0x4c77('0x77')][a22_0x4c77('0x82')];console[a22_0x4c77('0x2f')]('Redirect\x20'+_0x1b298a+'\x20to\x20'+_0x2298f3);if(_0x30349d<0x5){this[a22_0x4c77('0x6b')](_0x2298f3,_0x1ce601,_0x55f96e,_0x30349d++);}else{console[a22_0x4c77('0x4a')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x1b298a+'.');_0x55f96e(a22_0x4c77('0x83'),null,null,null);}return;case 0x194:console['log']('File\x20Not\x20Found\x20'+_0x1b298a);default:console[a22_0x4c77('0x2f')]('Problem\x20downloading\x20'+_0x1b298a+'\x20STATUS:\x20'+_0x24aa32['statusCode']);_0x2e657b['abort']();_0x55f96e(_0x24aa32[a22_0x4c77('0x76')],null,null,null);return;}})['on'](a22_0x4c77('0x4a'),function(_0x3891d4){console[a22_0x4c77('0x2f')](a22_0x4c77('0x84')+_0x1b298a+'\x20'+_0x3891d4[a22_0x4c77('0x85')]);_0x55f96e(_0x3891d4,null,null,null);});}[a22_0x4c77('0x86')](_0x381f88,_0x282af5,_0x531c0c,_0x34d83e){console['log']('downloadHTTPFileCallback');console[a22_0x4c77('0x2f')](_0x381f88);console[a22_0x4c77('0x2f')](_0x282af5);console[a22_0x4c77('0x2f')](_0x531c0c);console['log'](_0x34d83e);if(_0x531c0c==a22_0x4c77('0x87')){const _0x2d8fdc=this[a22_0x4c77('0x1e')][this[a22_0x4c77('0x3f')]][a22_0x4c77('0x88')]!=null?this[a22_0x4c77('0x1e')][this[a22_0x4c77('0x3f')]][a22_0x4c77('0x88')]:0x1e;this['createImageVideo'](_0x34d83e,_0x2d8fdc);}else if(_0x531c0c==a22_0x4c77('0x89')){if(_0x381f88==null&&_0x282af5!=''){this[a22_0x4c77('0x3f')]++;}this['download']();}console[a22_0x4c77('0x2f')](this[a22_0x4c77('0x3f')]);}[a22_0x4c77('0x8a')](_0x175ba6,_0x403698,_0x96fc03){progress(request(_0x175ba6),{})['on'](a22_0x4c77('0x8b'),function(_0x51aa88){console[a22_0x4c77('0x2f')](_0x51aa88);})['on'](a22_0x4c77('0x4a'),function(_0x5c3659){console['log']('Error\x20downloading\x20file');this['download']();})['on'](a22_0x4c77('0x65'),function(){console[a22_0x4c77('0x2f')](a22_0x4c77('0x66')+_0x403698);console[a22_0x4c77('0x2f')](a22_0x4c77('0x67')+_0x96fc03);if(_0x96fc03==a22_0x4c77('0x87')){const _0x4b5139=this[a22_0x4c77('0x1e')][this[a22_0x4c77('0x3f')]][a22_0x4c77('0x88')]!=null?this[a22_0x4c77('0x1e')][this['currentFile']][a22_0x4c77('0x88')]:0x1e;this['createImageVideo'](_0x403698,_0x4b5139);}else if(_0x96fc03==a22_0x4c77('0x89')){this['currentFile']++;this[a22_0x4c77('0x43')]();}}[a22_0x4c77('0x44')](this))['pipe'](fs[a22_0x4c77('0x7f')](this[a22_0x4c77('0x16')]+_0x403698));}[a22_0x4c77('0x8c')](_0x3ac31d,_0x32bc20=0x1e){const _0x3d167c=this[a22_0x4c77('0x16')]+_0x3ac31d;console[a22_0x4c77('0x2f')](_0x3d167c);console[a22_0x4c77('0x2f')](_0x3ac31d);const _0x2c277f=_0x3ac31d[a22_0x4c77('0x51')]('.')[a22_0x4c77('0x52')](0x0,-0x1)[a22_0x4c77('0x53')]('.');const _0x150e4c='ffmpeg';const _0x119865=['-y','-r',a22_0x4c77('0x8d'),a22_0x4c77('0x8e'),'1',a22_0x4c77('0x8f'),a22_0x4c77('0x90'),'-i',_0x3d167c,'-t',String(_0x32bc20),a22_0x4c77('0x91'),a22_0x4c77('0x92'),a22_0x4c77('0x93'),a22_0x4c77('0x94'),'-r','25',a22_0x4c77('0x95'),a22_0x4c77('0x96'),this[a22_0x4c77('0x16')]+_0x2c277f+a22_0x4c77('0x55')];const _0x1e8e6a=spawn(_0x150e4c,_0x119865);_0x1e8e6a['stdout']['on']('data',function(_0x2638c3){console[a22_0x4c77('0x2f')](a22_0x4c77('0x97')+_0x3d167c);});_0x1e8e6a[a22_0x4c77('0x98')]['on'](a22_0x4c77('0x99'),function(_0x592ecb){console[a22_0x4c77('0x2f')](a22_0x4c77('0x9a')+_0x592ecb);}[a22_0x4c77('0x44')](this));_0x1e8e6a['on'](a22_0x4c77('0x9b'),function(){console['log'](a22_0x4c77('0x9c'));this[a22_0x4c77('0x3f')]++;this[a22_0x4c77('0x43')]();}[a22_0x4c77('0x44')](this));}[a22_0x4c77('0x59')](_0x229631){const _0x50d310=this['tempFolder']+'/'+_0x229631+a22_0x4c77('0x55');const _0x5b26ca=youtubedl(a22_0x4c77('0x9d')+_0x229631,['--format=18'],{'cwd':__dirname});_0x5b26ca['on'](a22_0x4c77('0x9e'),function(_0x33b8d5){console['log'](a22_0x4c77('0x9f'));console['log'](a22_0x4c77('0xa0')+_0x33b8d5[a22_0x4c77('0xa1')]);console[a22_0x4c77('0x2f')](a22_0x4c77('0xa2')+_0x33b8d5['size']);});_0x5b26ca['on'](a22_0x4c77('0xa3'),function complete(_0xda41d6){'use strict';console[a22_0x4c77('0x2f')]('filename:\x20'+_0xda41d6[a22_0x4c77('0xa1')]+a22_0x4c77('0xa4'));});_0x5b26ca['on'](a22_0x4c77('0x65'),function(){console['log']('finished\x20youtube\x20downloading!');this[a22_0x4c77('0x57')](_0x50d310)[a22_0x4c77('0x4')](function(_0x42b756){if(_0x42b756){this['currentFile']++;}this[a22_0x4c77('0x43')]();}[a22_0x4c77('0x44')](this));}[a22_0x4c77('0x44')](this));_0x5b26ca[a22_0x4c77('0xa5')](fs[a22_0x4c77('0x7f')](_0x50d310));}[a22_0x4c77('0x4c')](){console[a22_0x4c77('0x2f')]('Finishing');if(this[a22_0x4c77('0x1f')]['length']==0x0){fs[a22_0x4c77('0x34')](this[a22_0x4c77('0x1a')],JSON[a22_0x4c77('0x35')](this['newPlayList']));let _0x19088c='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x306e30 in this[a22_0x4c77('0x1e')]){const _0xb846dc=this['downloadFiles'][_0x306e30][a22_0x4c77('0x4d')];const _0x55dfe3=this['downloadFiles'][_0x306e30][a22_0x4c77('0x4e')];const _0x4338df=_0xb846dc[a22_0x4c77('0x4f')](_0xb846dc[a22_0x4c77('0x50')]('/')+0x1);let _0x32ccf6=_0x4338df[a22_0x4c77('0x51')]('.')['slice'](0x0,-0x1)[a22_0x4c77('0x53')]('.');if(_0x55dfe3=='youtube_single'){_0x32ccf6=_0xb846dc;}_0x19088c+=a22_0x4c77('0xa6')+_0x32ccf6+'.mp4'+'\x0d\x0a';}fsExtra[a22_0x4c77('0x3e')](this[a22_0x4c77('0x18')]);fsExtra['copySync'](this[a22_0x4c77('0x16')],this[a22_0x4c77('0x18')]);fs[a22_0x4c77('0x34')](this[a22_0x4c77('0x1c')],_0x19088c);fsExtra[a22_0x4c77('0x3e')](this[a22_0x4c77('0x16')]);console[a22_0x4c77('0x2f')](a22_0x4c77('0xa7'));}else{console['log'](a22_0x4c77('0xa8'));this[a22_0x4c77('0x3f')]=0x0;setTimeout(function(){this['download']();}[a22_0x4c77('0x44')](this),0x1388);}}}exports['SyncPlaylistsService']=SyncPlaylistsService;