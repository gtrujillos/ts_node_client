var a28_0x24f7=['\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','host','pathname','get','\x20Progress:\x20unknown\x09','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','Downloaded\x20','location','Redirect\x20','downloadHTTPFile','302','Problem\x20downloading\x20','\x20STATUS:\x20','statusCode','message','downloadHTTPFileCallback','duration','createImageVideo','video','progress','Error\x20downloading\x20file','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','stderr','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','--format=18','--no-check-certificate','info','Download\x20started','filename:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','checkVideo','Finishing','this.playListFile:\x20','emptyDir','copy','Refreshing..','No\x20playlist\x20changes.','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','DateUtils','Parse','start_date','end_date','/home/osmc/luloclient/media/files/','trim','kodiCommandClient','PlayMedia(//home/osmc/luloclient/media/files/lulo_playlist.m3u)','Rebooting','sudo\x20/sbin/reboot\x20-f','rss','enableClock','turnOffTV','turnOnTV','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','parseString','result:\x20%j','none','set','feed','Builder','xml:\x20%j','RefreshRSS()','jsonrpcClient','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','SyncPlaylistsService','__awaiter','done','value','then','apply','next','../infrastructure/HttpClientService','./playerService','../infrastructure/utils/dateUtils','node-mediainfo','http','fs-extra','request','request-progress','child_process','spawn','string-template','youtube-dl','uuid/v4','config.json','package.json','url-exists','mt-files-downloader','apiURL','env','API_SERVICE_URL','mediaFolder','media/','tempFolder','temp/','filesFolder','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','errorCounter','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','lulo','kodiPassword','.lulo123.','httpClientService','HttpClientService','playerService','config','context','parse','readFileSync','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player.php?player_id={0}','kodi','kodiUser','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','checkSchedule','checkDependencies','playlist','getItems','deviceUuid','stringify','version','post','register\x20response:\x20','catch','log','writeFileSync','player','reportStatus','reboot','report_status:\x20','player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','push','Total\x20to\x20download:\x20','download','reloadMediaList','existsSync','removeSync','toString','this.currentFile:\x20','length','finishProcess','path','media_type','substring','lastIndexOf','split','join','slice','youtube_single','image','.mp4','**********+','copySync','Downloading:\x20','downloadYouTube','downloader','m3uFileUpdate','refreshPlayer','media','track','@type','includes','indexOf','splice','downloading:\x20','start','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'];(function(_0x5e410a,_0x3cad18){var _0x300cba=function(_0x8ff067){while(--_0x8ff067){_0x5e410a['push'](_0x5e410a['shift']());}};_0x300cba(++_0x3cad18);}(a28_0x24f7,0x155));var a28_0x536f=function(_0x135811,_0x194b39){_0x135811=_0x135811-0x0;var _0x963e91=a28_0x24f7[_0x135811];return _0x963e91;};'use strict';var __awaiter=this&&this[a28_0x536f('0x0')]||function(_0x1c1ad4,_0x1734a6,_0xec30a4,_0xcd745a){function _0xc8ef71(_0xa9b818){return _0xa9b818 instanceof _0xec30a4?_0xa9b818:new _0xec30a4(function(_0x338405){_0x338405(_0xa9b818);});}return new(_0xec30a4||(_0xec30a4=Promise))(function(_0x46b943,_0xed222e){function _0x4442ce(_0x1baead){try{_0x86d786(_0xcd745a['next'](_0x1baead));}catch(_0x52a6b0){_0xed222e(_0x52a6b0);}}function _0x313713(_0xd970ed){try{_0x86d786(_0xcd745a['throw'](_0xd970ed));}catch(_0x10d071){_0xed222e(_0x10d071);}}function _0x86d786(_0x3a3174){_0x3a3174[a28_0x536f('0x1')]?_0x46b943(_0x3a3174[a28_0x536f('0x2')]):_0xc8ef71(_0x3a3174[a28_0x536f('0x2')])[a28_0x536f('0x3')](_0x4442ce,_0x313713);}_0x86d786((_0xcd745a=_0xcd745a[a28_0x536f('0x4')](_0x1c1ad4,_0x1734a6||[]))[a28_0x536f('0x5')]());});};Object['defineProperty'](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a28_0x536f('0x6'));const playerService_1=require(a28_0x536f('0x7'));const dateUtils_1=require(a28_0x536f('0x8'));const mediainfo=require(a28_0x536f('0x9'));const fs=require('fs');const url=require('url');const http=require(a28_0x536f('0xa'));const fsExtra=require(a28_0x536f('0xb'));const request=require(a28_0x536f('0xc'));const progress=require(a28_0x536f('0xd'));const spawn=require(a28_0x536f('0xe'))[a28_0x536f('0xf')];const exec=require(a28_0x536f('0xe'))['exec'];const isImage=require('is-image');const format=require(a28_0x536f('0x10'));const os=require('os');const youtubedl=require(a28_0x536f('0x11'));const uuidv4=require(a28_0x536f('0x12'));const configFile=a28_0x536f('0x13');const contextFile=a28_0x536f('0x14');const urlExists=require(a28_0x536f('0x15'));const kodi_rpc=require('node-kodi');const Downloader=require(a28_0x536f('0x16'));class SyncPlaylistsService{constructor(){this[a28_0x536f('0x17')]=process[a28_0x536f('0x18')][a28_0x536f('0x19')];this[a28_0x536f('0x1a')]=a28_0x536f('0x1b');this[a28_0x536f('0x1c')]=this[a28_0x536f('0x1a')]+a28_0x536f('0x1d');this[a28_0x536f('0x1e')]=this[a28_0x536f('0x1a')]+'files/';this[a28_0x536f('0x1f')]=this[a28_0x536f('0x1a')]+a28_0x536f('0x20');this[a28_0x536f('0x21')]=this['filesFolder']+a28_0x536f('0x22');this[a28_0x536f('0x23')]=0x0;this[a28_0x536f('0x24')]=0x0;this[a28_0x536f('0x25')]=![];this[a28_0x536f('0x26')]=[];this[a28_0x536f('0x27')]=[];this[a28_0x536f('0x28')]={};this[a28_0x536f('0x29')]='http://localhost';this['kodiUser']=a28_0x536f('0x2a');this[a28_0x536f('0x2b')]=a28_0x536f('0x2c');this['forceReload']=![];this[a28_0x536f('0x2d')]=new HttpClientService_1[(a28_0x536f('0x2e'))]();this[a28_0x536f('0x2f')]=new playerService_1['PlayerService']();}['init'](){this[a28_0x536f('0x30')]=JSON['parse'](fs['readFileSync'](configFile));this[a28_0x536f('0x31')]=JSON[a28_0x536f('0x32')](fs[a28_0x536f('0x33')](contextFile));this[a28_0x536f('0x34')]=this[a28_0x536f('0x30')][a28_0x536f('0x34')];this[a28_0x536f('0x35')]=process[a28_0x536f('0x18')][a28_0x536f('0x36')]+a28_0x536f('0x37');this[a28_0x536f('0x38')]=this[a28_0x536f('0x35')]+'api/player_playlist.php?player_id={0}';this['playerServiceURL']=this[a28_0x536f('0x35')]+a28_0x536f('0x39');this[a28_0x536f('0x3a')]=new kodi_rpc({'url':this[a28_0x536f('0x29')],'user':this[a28_0x536f('0x3b')],'password':this[a28_0x536f('0x2b')]});this['checkDependencies']();this[a28_0x536f('0x3c')]();this[a28_0x536f('0x3d')]();this[a28_0x536f('0x3e')]();this[a28_0x536f('0x3f')]();setInterval(function(){this[a28_0x536f('0x40')]();}[a28_0x536f('0x41')](this),0x2710);setInterval(function(){this['registerClient']();}[a28_0x536f('0x41')](this),0x493e0);setInterval(function(){this[a28_0x536f('0x42')]();}[a28_0x536f('0x41')](this),0x2710);}[a28_0x536f('0x43')](){}[a28_0x536f('0x3c')](){this[a28_0x536f('0x3a')][a28_0x536f('0x44')][a28_0x536f('0x45')](0x1)['then'](function(_0x2665d1){const _0x463052=JSON['stringify'](_0x2665d1);const _0x3d18cc={'player_id':this['playerId'],'device_uuid':this[a28_0x536f('0x30')][a28_0x536f('0x46')],'network_info':JSON[a28_0x536f('0x47')](os['networkInterfaces']()),'firmware_info':JSON[a28_0x536f('0x47')](this['context'][a28_0x536f('0x48')]),'playlist':_0x463052,'playing_item':'','status':0x0};this[a28_0x536f('0x2d')][a28_0x536f('0x49')](this[a28_0x536f('0x17')]+'player_devices/register',_0x3d18cc,![])[a28_0x536f('0x3')](function(_0x2d0d78){console['log'](a28_0x536f('0x4a')+Date());})[a28_0x536f('0x4b')](function(_0xb48825){});console[a28_0x536f('0x4c')](_0x3d18cc);}[a28_0x536f('0x41')](this));const _0xb602ea=this['config']['deviceUuid'];if(!_0xb602ea||_0xb602ea==''){this['config'][a28_0x536f('0x46')]=uuidv4();this[a28_0x536f('0x30')]={'deviceUuid':this[a28_0x536f('0x30')][a28_0x536f('0x46')],'playerId':this['config'][a28_0x536f('0x34')]};fs[a28_0x536f('0x4d')](configFile,JSON['stringify'](this[a28_0x536f('0x30')]));}}['getStatus'](){console[a28_0x536f('0x4c')](a28_0x536f('0x40'));this['kodi'][a28_0x536f('0x4e')]['getCurrentlyPlayingVideo']()['then'](function(_0x18a349){const _0x1a28ea=_0x18a349?_0x18a349['item']['label']:'';this[a28_0x536f('0x4f')](_0x1a28ea);}[a28_0x536f('0x41')](this))[a28_0x536f('0x4b')](function(_0x566a16){console[a28_0x536f('0x4c')](a28_0x536f('0x40'),_0x566a16);console[a28_0x536f('0x4c')]('this.errorCounter',this['errorCounter']);this[a28_0x536f('0x4f')](JSON['stringify'](_0x566a16));if(this['errorCounter']>0x1e){this[a28_0x536f('0x50')]();}this[a28_0x536f('0x24')]++;}['bind'](this));}[a28_0x536f('0x4f')](_0x597eff){const _0x33d633={'player_id':this['playerId'],'device_uuid':this[a28_0x536f('0x30')][a28_0x536f('0x46')],'status':_0x597eff!=''&&_0x597eff!=null?0x1:0x0,'playing_item':_0x597eff};console[a28_0x536f('0x4c')](a28_0x536f('0x51'),_0x33d633);this[a28_0x536f('0x2d')][a28_0x536f('0x49')](this[a28_0x536f('0x17')]+a28_0x536f('0x52'),_0x33d633,![])[a28_0x536f('0x3')](function(_0x40cc46){console[a28_0x536f('0x4c')](a28_0x536f('0x53')+JSON[a28_0x536f('0x47')](_0x40cc46));})['catch'](function(_0x2310c9){});}['checkFolders'](){fsExtra['ensureDir'](this[a28_0x536f('0x1a')],_0xa10fb1=>{});fsExtra[a28_0x536f('0x54')](this[a28_0x536f('0x1c')],_0x523219=>{});fsExtra[a28_0x536f('0x54')](this[a28_0x536f('0x1e')],_0x3dbf0b=>{});}[a28_0x536f('0x3e')](){const _0x1164af=format(this[a28_0x536f('0x38')],this[a28_0x536f('0x34')]);console[a28_0x536f('0x4c')](_0x1164af);request({'url':_0x1164af,'json':!![]},function(_0x114aa0,_0x402727,_0x27a7c4){console[a28_0x536f('0x4c')](a28_0x536f('0x55'));this['newPlayList']=_0x27a7c4;this[a28_0x536f('0x25')]=this[a28_0x536f('0x56')]();fsExtra[a28_0x536f('0x57')](this[a28_0x536f('0x1c')]);this['downloadFiles']=[];this[a28_0x536f('0x27')]=[];this[a28_0x536f('0x23')]=0x0;for(const _0x1c224e in _0x27a7c4){this[a28_0x536f('0x26')][a28_0x536f('0x58')](_0x27a7c4[_0x1c224e]);}console['log'](a28_0x536f('0x59')+this['downloadFiles']['length']);if(this[a28_0x536f('0x26')]['length']>0x0){this[a28_0x536f('0x5a')]();}}[a28_0x536f('0x41')](this));}[a28_0x536f('0x5b')](){this['forceReload']=!![];if(fsExtra[a28_0x536f('0x5c')](this['tempFolder'])){fsExtra['emptyDirSync'](this[a28_0x536f('0x1c')]);}if(fsExtra['existsSync'](this['filesFolder'])){fsExtra[a28_0x536f('0x57')](this[a28_0x536f('0x1e')]);}if(!fsExtra[a28_0x536f('0x5c')](this[a28_0x536f('0x1f')])){fsExtra[a28_0x536f('0x5d')](this['playListFile']);}if(!fsExtra[a28_0x536f('0x5c')](this[a28_0x536f('0x21')])){fsExtra[a28_0x536f('0x5d')](this['m3uFile']);}this[a28_0x536f('0x3e')]();}[a28_0x536f('0x56')](){const _0x23f60d=JSON[a28_0x536f('0x47')](this[a28_0x536f('0x28')]);try{if(!fsExtra[a28_0x536f('0x5c')](this[a28_0x536f('0x1f')])){return!![];}else{const _0x490c90=fsExtra[a28_0x536f('0x33')](this['playListFile'])[a28_0x536f('0x5e')]();if(_0x490c90!=_0x23f60d){return!![];}}}catch(_0x33b056){console[a28_0x536f('0x4c')](_0x33b056);}return![];}[a28_0x536f('0x5a')](){console['log'](a28_0x536f('0x5f')+this[a28_0x536f('0x23')]+'\x20of\x20'+this[a28_0x536f('0x26')][a28_0x536f('0x60')]);if(this[a28_0x536f('0x23')]>=this['downloadFiles'][a28_0x536f('0x60')]){this[a28_0x536f('0x61')]();return;}const _0x1a8fe8=String(this['downloadFiles'][this[a28_0x536f('0x23')]][a28_0x536f('0x62')]);const _0x4d94e4=this[a28_0x536f('0x26')][this[a28_0x536f('0x23')]][a28_0x536f('0x63')];let _0x5360ab=_0x1a8fe8[a28_0x536f('0x64')](_0x1a8fe8[a28_0x536f('0x65')]('/')+0x1);const _0x33f871=_0x5360ab[a28_0x536f('0x66')]('.')['slice'](0x0,-0x1)[a28_0x536f('0x67')]('.');let _0x5e0cac=this['baseURL']+_0x1a8fe8;const _0x354aec=_0x5e0cac[a28_0x536f('0x66')]('.')[a28_0x536f('0x68')](0x0,-0x1)[a28_0x536f('0x67')]('.');if(_0x4d94e4==a28_0x536f('0x69')){_0x5360ab=_0x5360ab+'.mp4';}else if(_0x4d94e4==a28_0x536f('0x6a')){_0x5360ab=_0x33f871+'.mp4';_0x5e0cac=_0x354aec+a28_0x536f('0x6b');}console['log'](a28_0x536f('0x6c'));console['log'](_0x1a8fe8);console[a28_0x536f('0x4c')](_0x4d94e4);console[a28_0x536f('0x4c')](_0x5360ab);console[a28_0x536f('0x4c')](_0x5e0cac);console[a28_0x536f('0x4c')](_0x33f871);console[a28_0x536f('0x4c')](_0x354aec);console[a28_0x536f('0x4c')]('**********+');if(fsExtra['existsSync'](this['tempFolder']+_0x5360ab)){this['checkVideo'](this[a28_0x536f('0x1c')]+_0x5360ab)[a28_0x536f('0x3')](function(_0x142a77){if(_0x142a77){this[a28_0x536f('0x23')]++;}else{this[a28_0x536f('0x25')]=!![];}this[a28_0x536f('0x5a')]();}[a28_0x536f('0x41')](this));}else if(fsExtra[a28_0x536f('0x5c')](this[a28_0x536f('0x1e')]+_0x5360ab)){this['checkVideo'](this[a28_0x536f('0x1e')]+_0x5360ab)[a28_0x536f('0x3')](function(_0x4c41e0){if(_0x4c41e0){fsExtra[a28_0x536f('0x6d')](this[a28_0x536f('0x1e')]+_0x5360ab,this[a28_0x536f('0x1c')]+_0x5360ab);this['currentFile']++;}else{this[a28_0x536f('0x25')]=!![];}this[a28_0x536f('0x5a')]();}[a28_0x536f('0x41')](this));}else{console['log'](a28_0x536f('0x6e')+_0x5e0cac);this[a28_0x536f('0x25')]=!![];if(_0x4d94e4==a28_0x536f('0x69')){this[a28_0x536f('0x6f')](_0x1a8fe8);}else{this[a28_0x536f('0x70')](_0x5e0cac,_0x5360ab,_0x4d94e4);}}}[a28_0x536f('0x42')](){const _0x10112c=this['m3uFileUpdate']();console[a28_0x536f('0x4c')](a28_0x536f('0x71'),_0x10112c);if(_0x10112c){setTimeout(function(){this[a28_0x536f('0x72')]();}[a28_0x536f('0x41')](this),0x3e8);}}['checkVideo'](_0x2b6eb3){return __awaiter(this,void 0x0,void 0x0,function*(){console[a28_0x536f('0x4c')]('videoFile:\x20'+_0x2b6eb3);const _0x35edc0=yield mediainfo(_0x2b6eb3)['catch'](_0x22a61c=>{console[a28_0x536f('0x4c')](_0x22a61c);fsExtra[a28_0x536f('0x5d')](_0x2b6eb3);return![];});const _0x16db01=_0x35edc0[a28_0x536f('0x73')][a28_0x536f('0x74')][a28_0x536f('0x60')]>0x1&&_0x35edc0[a28_0x536f('0x73')]['track'][0x1][a28_0x536f('0x75')]=='Video';if(!_0x16db01){fsExtra['removeSync'](_0x2b6eb3);}console[a28_0x536f('0x4c')]('mediainfo\x20check:'+_0x16db01);return _0x16db01;});}['downloader'](_0x5dbba6,_0x521759,_0x29e05e){const _0x317dd7=new Downloader();console[a28_0x536f('0x4c')](_0x5dbba6);console['log'](_0x521759);console[a28_0x536f('0x4c')](_0x29e05e);const _0x51d72b=_0x317dd7['download'](_0x5dbba6,this[a28_0x536f('0x1c')]+_0x521759);urlExists(_0x5dbba6,function(_0x418d53,_0x4352c2){if(_0x4352c2){if(this[a28_0x536f('0x27')][a28_0x536f('0x76')](this[a28_0x536f('0x23')])){const _0x3dfdb7=this[a28_0x536f('0x27')][a28_0x536f('0x77')](this[a28_0x536f('0x23')]);if(_0x3dfdb7>-0x1){this[a28_0x536f('0x27')][a28_0x536f('0x78')](_0x3dfdb7,0x1);}}console['log'](a28_0x536f('0x79')+_0x5dbba6);_0x51d72b[a28_0x536f('0x7a')]();}else{if(!this[a28_0x536f('0x27')][a28_0x536f('0x76')](this[a28_0x536f('0x23')])){this[a28_0x536f('0x27')][a28_0x536f('0x58')](this['currentFile']);}console[a28_0x536f('0x4c')]('Error:\x20'+_0x5dbba6);this['currentFile']++;this[a28_0x536f('0x5a')]();}}[a28_0x536f('0x41')](this));_0x51d72b['on'](a28_0x536f('0x7a'),function(_0x51d72b){console[a28_0x536f('0x4c')](a28_0x536f('0x7b')+_0x5dbba6);});_0x51d72b['on'](a28_0x536f('0x7c'),function(_0x51d72b){console[a28_0x536f('0x4c')](a28_0x536f('0x7d'));this['download']();}['bind'](this));_0x51d72b['on'](a28_0x536f('0x7e'),function(_0x51d72b){console[a28_0x536f('0x4c')](a28_0x536f('0x7e'));console['log'](a28_0x536f('0x7f')+_0x521759);console[a28_0x536f('0x4c')](a28_0x536f('0x80')+_0x29e05e);this['checkVideo'](this[a28_0x536f('0x1c')]+_0x521759)[a28_0x536f('0x3')](function(_0x271bdb){if(_0x271bdb){this['currentFile']++;}this[a28_0x536f('0x5a')]();}['bind'](this));}[a28_0x536f('0x41')](this));_0x51d72b['on']('stopped',function(_0x51d72b){console[a28_0x536f('0x4c')](a28_0x536f('0x81'));});_0x51d72b['on'](a28_0x536f('0x82'),function(_0x51d72b){console[a28_0x536f('0x4c')]('destroyed');});_0x51d72b['on']('retry',function(_0x51d72b){console[a28_0x536f('0x4c')](a28_0x536f('0x83'));});}['downloadHTTPFile'](_0x3baf97,_0x2aa4f1,_0x247452,_0x184eb8){console['log']('downloadHTTPFile');console['log'](_0x3baf97);const _0x3f0718=!![];let _0x1dc67f=0x0;const _0x237971='';console[a28_0x536f('0x4c')](a28_0x536f('0x84')+_0x3baf97+'\x20to\x20'+_0x2aa4f1);if(_0x1dc67f){if(_0x1dc67f>0x5){_0x184eb8(a28_0x536f('0x85'),_0x3baf97,_0x247452,null);return;}}else{_0x1dc67f=0x0;}const _0x3c06ff=this['tempFolder']+_0x2aa4f1;let _0x35c9f7;if(_0x184eb8===undefined){console[a28_0x536f('0x4c')](a28_0x536f('0x86')+_0x3baf97+a28_0x536f('0x87')+_0x3c06ff);_0x184eb8=function(_0x7c5178,_0x3f7cdb){console[a28_0x536f('0x4c')](a28_0x536f('0x88'),_0x7c5178,_0x3f7cdb);};}http[a28_0x536f('0x89')]['maxSockets']=0x64;const _0x2ea3ca={'host':url[a28_0x536f('0x32')](_0x3baf97)[a28_0x536f('0x8a')],'port':0x50,'path':url[a28_0x536f('0x32')](_0x3baf97)[a28_0x536f('0x8b')],'agent':![]};const _0x2b8864=http[a28_0x536f('0x8c')](_0x2ea3ca,function(_0x46a003){let _0x58aa54=0x0;let _0x48076e=0x0;function _0x5536cb(){if(_0x58aa54===undefined){console[a28_0x536f('0x4c')](_0x2aa4f1+a28_0x536f('0x8d')+_0x48076e+'/'+'?');}const _0x16ae27=_0x48076e/_0x58aa54*0x64;console[a28_0x536f('0x4c')](_0x2aa4f1+'\x20Progress:\x20'+_0x16ae27+'%\x09'+_0x48076e+'/'+_0x58aa54);}console[a28_0x536f('0x4c')](_0x2aa4f1+'\x20'+_0x46a003['statusCode']);switch(_0x46a003['statusCode']){case 0xc8:_0x58aa54=_0x46a003[a28_0x536f('0x8e')][a28_0x536f('0x8f')]||_0x237971;fs[a28_0x536f('0x90')](_0x3c06ff,function(_0x1a1486,_0x160e59){if(!_0x1a1486){console[a28_0x536f('0x4c')](a28_0x536f('0x91')+_0x3c06ff);if(_0x160e59[a28_0x536f('0x92')]==_0x58aa54){console['log'](a28_0x536f('0x93')+_0x58aa54+')');console[a28_0x536f('0x4c')](a28_0x536f('0x94'));}else{console[a28_0x536f('0x4c')](a28_0x536f('0x95')+_0x160e59[a28_0x536f('0x92')]+a28_0x536f('0x96')+_0x58aa54+')');}}_0x35c9f7=fs[a28_0x536f('0x97')](_0x3c06ff);_0x46a003[a28_0x536f('0x98')](_0x35c9f7);_0x46a003['on'](a28_0x536f('0x99'),function(_0x770eb4){_0x48076e+=_0x770eb4[a28_0x536f('0x60')];_0x5536cb();});_0x2b8864['on'](a28_0x536f('0x7c'),function(_0x1a1486){console[a28_0x536f('0x4c')](a28_0x536f('0x9a'));console[a28_0x536f('0x4c')](_0x1a1486);});_0x35c9f7['on']('finish',function(){console[a28_0x536f('0x4c')](a28_0x536f('0x9b')+_0x3baf97+a28_0x536f('0x87')+_0x2aa4f1);_0x184eb8(null,_0x2aa4f1,_0x247452,_0x2aa4f1);}['bind'](this));});break;case 0x12e:const _0x1ba2da=_0x46a003['headers'][a28_0x536f('0x9c')];console[a28_0x536f('0x4c')](a28_0x536f('0x9d')+_0x3baf97+a28_0x536f('0x87')+_0x1ba2da);if(_0x1dc67f<0x5){this[a28_0x536f('0x9e')](_0x1ba2da,_0x2aa4f1,_0x184eb8,_0x1dc67f++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x3baf97+'.');_0x184eb8(a28_0x536f('0x9f'),null,null,null);}return;case 0x194:console[a28_0x536f('0x4c')]('File\x20Not\x20Found\x20'+_0x3baf97);default:console[a28_0x536f('0x4c')](a28_0x536f('0xa0')+_0x3baf97+a28_0x536f('0xa1')+_0x46a003[a28_0x536f('0xa2')]);_0x2b8864['abort']();_0x184eb8(_0x46a003['statusCode'],null,null,null);return;}})['on'](a28_0x536f('0x7c'),function(_0x229a11){console['log']('Error\x20Downloading:\x20'+_0x3baf97+'\x20'+_0x229a11[a28_0x536f('0xa3')]);_0x184eb8(_0x229a11,null,null,null);});}[a28_0x536f('0xa4')](_0x2c149a,_0x5382fe,_0x2349f3,_0x5e0949){console[a28_0x536f('0x4c')]('downloadHTTPFileCallback');console[a28_0x536f('0x4c')](_0x2c149a);console[a28_0x536f('0x4c')](_0x5382fe);console['log'](_0x2349f3);console['log'](_0x5e0949);if(_0x2349f3==a28_0x536f('0x6a')){const _0x448624=this[a28_0x536f('0x26')][this[a28_0x536f('0x23')]]['duration']!=null?this[a28_0x536f('0x26')][this[a28_0x536f('0x23')]][a28_0x536f('0xa5')]:0x1e;this[a28_0x536f('0xa6')](_0x5e0949,_0x448624);}else if(_0x2349f3==a28_0x536f('0xa7')){if(_0x2c149a==null&&_0x5382fe!=''){this[a28_0x536f('0x23')]++;}this[a28_0x536f('0x5a')]();}console[a28_0x536f('0x4c')](this[a28_0x536f('0x23')]);}['downloadRequestFile'](_0xd10f27,_0xc07055,_0x53be57){progress(request(_0xd10f27),{})['on'](a28_0x536f('0xa8'),function(_0x3a2d84){console['log'](_0x3a2d84);})['on']('error',function(_0x58031b){console[a28_0x536f('0x4c')](a28_0x536f('0xa9'));this[a28_0x536f('0x5a')]();})['on'](a28_0x536f('0x7e'),function(){console[a28_0x536f('0x4c')](a28_0x536f('0x7f')+_0xc07055);console[a28_0x536f('0x4c')](a28_0x536f('0x80')+_0x53be57);if(_0x53be57==a28_0x536f('0x6a')){const _0x49c2a3=this['downloadFiles'][this[a28_0x536f('0x23')]]['duration']!=null?this[a28_0x536f('0x26')][this[a28_0x536f('0x23')]][a28_0x536f('0xa5')]:0x1e;this['createImageVideo'](_0xc07055,_0x49c2a3);}else if(_0x53be57==a28_0x536f('0xa7')){this[a28_0x536f('0x23')]++;this['download']();}}[a28_0x536f('0x41')](this))[a28_0x536f('0x98')](fs[a28_0x536f('0x97')](this['tempFolder']+_0xc07055));}[a28_0x536f('0xa6')](_0x1f6520,_0x3f2131=0x1e){const _0x124cb4=this[a28_0x536f('0x1c')]+_0x1f6520;console[a28_0x536f('0x4c')](_0x124cb4);console['log'](_0x1f6520);const _0x5b3bba=_0x1f6520[a28_0x536f('0x66')]('.')[a28_0x536f('0x68')](0x0,-0x1)[a28_0x536f('0x67')]('.');const _0x268e22=a28_0x536f('0xaa');const _0x2c37be=['-y','-r',a28_0x536f('0xab'),a28_0x536f('0xac'),'1',a28_0x536f('0xad'),a28_0x536f('0xae'),'-i',_0x124cb4,'-t',String(_0x3f2131),a28_0x536f('0xaf'),a28_0x536f('0xb0'),a28_0x536f('0xb1'),a28_0x536f('0xb2'),'-r','25',a28_0x536f('0xb3'),a28_0x536f('0xb4'),this[a28_0x536f('0x1c')]+_0x5b3bba+'.mp4'];const _0x525b54=spawn(_0x268e22,_0x2c37be);_0x525b54[a28_0x536f('0xb5')]['on']('data',function(_0x331700){console[a28_0x536f('0x4c')]('Converting\x20'+_0x124cb4);});_0x525b54[a28_0x536f('0xb6')]['on']('data',function(_0x22d69e){console['log']('stderr:\x20'+_0x22d69e);}[a28_0x536f('0x41')](this));_0x525b54['on'](a28_0x536f('0xb7'),function(){console[a28_0x536f('0x4c')](a28_0x536f('0xb8'));this[a28_0x536f('0x23')]++;this[a28_0x536f('0x5a')]();}['bind'](this));}[a28_0x536f('0x6f')](_0x49d30a){const _0x33ff0a=this[a28_0x536f('0x1c')]+'/'+_0x49d30a+a28_0x536f('0x6b');const _0x14cc7b=a28_0x536f('0xb9')+_0x49d30a;console[a28_0x536f('0x4c')](a28_0x536f('0xba')+_0x14cc7b);console['log']('outFileName:\x20'+_0x33ff0a);const _0x3d18b5=youtubedl(_0x14cc7b,[a28_0x536f('0xbb'),a28_0x536f('0xbc')],{'cwd':__dirname});_0x3d18b5['on'](a28_0x536f('0xbd'),function(_0x27407d){console['log'](a28_0x536f('0xbe'));console[a28_0x536f('0x4c')](a28_0x536f('0xbf')+_0x27407d[a28_0x536f('0xc0')]);console[a28_0x536f('0x4c')]('size:\x20'+_0x27407d[a28_0x536f('0x92')]);});_0x3d18b5['on']('complete',function complete(_0x5bd5fc){'use strict';console[a28_0x536f('0x4c')]('filename:\x20'+_0x5bd5fc['_filename']+a28_0x536f('0xc1'));});_0x3d18b5['on']('end',function(){console[a28_0x536f('0x4c')](a28_0x536f('0xc2'));this[a28_0x536f('0xc3')](_0x33ff0a)[a28_0x536f('0x3')](function(_0x4bba0b){if(_0x4bba0b){this[a28_0x536f('0x23')]++;}this[a28_0x536f('0x5a')]();}[a28_0x536f('0x41')](this));}[a28_0x536f('0x41')](this));_0x3d18b5[a28_0x536f('0x98')](fs[a28_0x536f('0x97')](_0x33ff0a));}['finishProcess'](){console[a28_0x536f('0x4c')](a28_0x536f('0xc4'));if(this[a28_0x536f('0x25')]){if(this[a28_0x536f('0x27')]['length']==0x0){console[a28_0x536f('0x4c')](a28_0x536f('0xc5')+this[a28_0x536f('0x1f')]);fs[a28_0x536f('0x4d')](this['playListFile'],JSON[a28_0x536f('0x47')](this[a28_0x536f('0x28')]));const _0x26f5ab=this[a28_0x536f('0x71')]();fsExtra[a28_0x536f('0xc6')](this[a28_0x536f('0x1e')])[a28_0x536f('0x3')](()=>{fsExtra[a28_0x536f('0xc7')](this[a28_0x536f('0x1c')],this['filesFolder'])[a28_0x536f('0x3')](()=>{fsExtra[a28_0x536f('0xc6')](this[a28_0x536f('0x1c')])[a28_0x536f('0x3')](()=>{console[a28_0x536f('0x4c')](a28_0x536f('0xc8'));this[a28_0x536f('0x72')]();})[a28_0x536f('0x4b')](_0xd1f3a1=>console[a28_0x536f('0x7c')](_0xd1f3a1));})[a28_0x536f('0x4b')](_0x35aebf=>console[a28_0x536f('0x7c')](_0x35aebf));})[a28_0x536f('0x4b')](_0x408d40=>console[a28_0x536f('0x7c')](_0x408d40));}else{console[a28_0x536f('0x4c')]('Playlist\x20incomplete,\x20retry.');this['currentFile']=0x0;setTimeout(function(){this[a28_0x536f('0x5a')]();}[a28_0x536f('0x41')](this),0x1388);}}else{console[a28_0x536f('0x4c')](a28_0x536f('0xc9'));}}[a28_0x536f('0x71')](){let _0x366a27=a28_0x536f('0xca')+'\x0d\x0a'+a28_0x536f('0xcb')+'\x0d\x0a';const _0x5f27b9=new Date();for(const _0x53ede5 in this[a28_0x536f('0x26')]){const _0x4c3015=this['downloadFiles'][_0x53ede5][a28_0x536f('0x62')];const _0x5b1f87=this[a28_0x536f('0x26')][_0x53ede5]['media_type'];const _0x4aecdb=dateUtils_1[a28_0x536f('0xcc')][a28_0x536f('0xcd')](this['downloadFiles'][_0x53ede5][a28_0x536f('0xce')]);const _0x4c9159=dateUtils_1['DateUtils'][a28_0x536f('0xcd')](this['downloadFiles'][_0x53ede5][a28_0x536f('0xcf')]);const _0x2fd9d7=_0x4c3015[a28_0x536f('0x64')](_0x4c3015[a28_0x536f('0x65')]('/')+0x1);let _0x39be89=_0x2fd9d7['split']('.')[a28_0x536f('0x68')](0x0,-0x1)['join']('.');if(_0x5b1f87==a28_0x536f('0x69')){_0x39be89=_0x4c3015;}if((_0x4aecdb==null||_0x4aecdb<_0x5f27b9)&&(_0x4c9159==null||_0x4c9159>_0x5f27b9)){_0x366a27+=a28_0x536f('0xd0')+_0x39be89+a28_0x536f('0x6b')+'\x0d\x0a';}}let _0x531d4e='';if(fsExtra['existsSync'](this['m3uFile'])){_0x531d4e=fsExtra[a28_0x536f('0x33')](this[a28_0x536f('0x21')]);_0x531d4e=_0x531d4e[a28_0x536f('0x5e')]()[a28_0x536f('0xd1')]();}_0x366a27=_0x366a27[a28_0x536f('0x5e')]()[a28_0x536f('0xd1')]();if(_0x531d4e!=_0x366a27){fsExtra['writeFileSync'](this[a28_0x536f('0x21')],_0x366a27);return!![];}return![];}[a28_0x536f('0x72')](){console[a28_0x536f('0x4c')](a28_0x536f('0x21'),this['m3uFile']);this[a28_0x536f('0xd2')](a28_0x536f('0xd3'));this[a28_0x536f('0xd2')]('ActivateWindow(fullscreenvideo)');}[a28_0x536f('0x50')](){console[a28_0x536f('0x4c')](a28_0x536f('0xd4'));exec(a28_0x536f('0xd5'),function(_0x3ea6f3){console['log'](_0x3ea6f3);});}['updateSettings'](){const _0x1caf07=format(this['playerServiceURL'],this['playerId']);console[a28_0x536f('0x4c')](_0x1caf07);request({'url':_0x1caf07,'json':!![]},function(_0x4946e6,_0x53d052,_0x13737d){if(_0x13737d[a28_0x536f('0x60')]>0x0){const _0x2c3438=_0x13737d[0x0];const _0x278b86=_0x2c3438[a28_0x536f('0xd6')];const _0x20aaaa=_0x2c3438['header_active']==0x1;this['setRss'](_0x278b86);this[a28_0x536f('0xd7')](_0x20aaaa);this[a28_0x536f('0x3c')]();}console[a28_0x536f('0x4c')](_0x13737d);}[a28_0x536f('0x41')](this));}[a28_0x536f('0xd8')](){this['kodiCommandClient']('CECStandby()');}[a28_0x536f('0xd9')](){this[a28_0x536f('0xd2')]('CECActivateSource()');}[a28_0x536f('0xda')](_0x2cad3f){const _0x4070f8=_0x2cad3f!=null&&_0x2cad3f!='';const _0x2b31f4=a28_0x536f('0xdb');if(fsExtra['existsSync'](_0x2b31f4)){const _0x40cb3e=fsExtra[a28_0x536f('0x33')](_0x2b31f4);console[a28_0x536f('0x4c')](a28_0x536f('0xdc')+_0x40cb3e);const _0xfbbb35=require('xml2js');const _0x3979e6=_0xfbbb35[a28_0x536f('0xdd')];_0x3979e6(_0x40cb3e,function(_0xdfc0a9,_0x5bc7c8){console[a28_0x536f('0x4c')]('err:\x20%j',_0xdfc0a9);console['log'](a28_0x536f('0xde'),_0x5bc7c8);if(!_0x2cad3f||_0x2cad3f==null||_0x2cad3f==''){_0x2cad3f=a28_0x536f('0xdf');}_0x5bc7c8['rssfeeds'][a28_0x536f('0xe0')][0x0][a28_0x536f('0xe1')][0x0]['_']=_0x2cad3f;const _0x3803b2=new _0xfbbb35[(a28_0x536f('0xe2'))]();const _0x3eab50=_0x3803b2['buildObject'](_0x5bc7c8);console[a28_0x536f('0x4c')](a28_0x536f('0xe3'),_0x3eab50);fsExtra[a28_0x536f('0x4d')](_0x2b31f4,_0x3eab50);});this[a28_0x536f('0xd2')](a28_0x536f('0xe4'));this[a28_0x536f('0xe5')](a28_0x536f('0xe6'),{'setting':a28_0x536f('0xe7'),'value':_0x4070f8},function(_0x19b542){console['log'](a28_0x536f('0xe8'));console['log'](_0x19b542);}[a28_0x536f('0x41')](this));}}[a28_0x536f('0xd7')](_0x306605){this[a28_0x536f('0xe5')]('Settings.SetSettingValue',{'setting':'videoplayer.usedisplayasclock','value':_0x306605},function(_0x4294b5){console[a28_0x536f('0x4c')](a28_0x536f('0xe9'));console['log'](_0x4294b5);}[a28_0x536f('0x41')](this));}[a28_0x536f('0xd2')](_0x4c434d){exec(a28_0x536f('0xea')+_0x4c434d+'\x22',function(_0x5d0143){console[a28_0x536f('0x4c')](_0x5d0143);});}['jsonrpcClient'](_0x56e1fc,_0x1b45c4,_0x455a15){const _0x5a8395={'jsonrpc':a28_0x536f('0xeb'),'method':_0x56e1fc,'params':_0x1b45c4,'id':0x1};const _0x385971={'user':this['kodiUser'],'pass':this[a28_0x536f('0x2b')]};console['log'](a28_0x536f('0xec'),_0x5a8395);console[a28_0x536f('0x4c')]('jsonrpcClient\x20options',_0x385971);this[a28_0x536f('0x2d')]['post'](this[a28_0x536f('0x29')]+'/jsonrpc',_0x5a8395,![],_0x385971)[a28_0x536f('0x3')](function(_0x4680bf){_0x455a15(_0x4680bf);})[a28_0x536f('0x4b')](function(_0xee57ab){});}}exports[a28_0x536f('0xed')]=SyncPlaylistsService;