var a23_0x1e35=['Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','Playlist.Added','kodiCommandClient','Rebooting','sudo\x20/sbin/reboot\x20-f','rss','header_active','setRss','turnOffTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xml2js','parseString','err:\x20%j','result:\x20%j','feed','xml:\x20%j','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','enableClock','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','/jsonrpc','kodiPassword','SyncPlaylistsService','__awaiter','next','done','value','then','apply','defineProperty','__esModule','./playerService','node-mediainfo','http','fs-extra','request','request-progress','child_process','spawn','is-image','string-template','uuid/v4','config.json','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','temp/','filesFolder','files/','playListFile','playlist.txt','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','lulo','forceReload','httpClientService','playerService','config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','playerServiceURL','api/player.php?player_id={0}','kodi','kodiUser','checkDependencies','checkFolders','loadMediaList','updateSettings','getStatus','bind','registerClient','playlist','stringify','deviceUuid','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','catch','writeFileSync','log','player','getCurrentlyPlayingVideo','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','existsSync','tempFolder','removeSync','m3uFile','toString','\x20of\x20','finishProcess','path','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','statusCode','headers','content-length','stat','size','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','data','err:\x20','Downloaded\x20','location','Redirect\x20limit\x20encountered\x20for\x20','302','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','mediaType:\x20','pipe','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','stderr','stderr:\x20','https://www.youtube.com/watch?v=','--format=18','Download\x20started','size:\x20','complete','filename:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','media_type','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20'];(function(_0x515fad,_0x485a37){var _0x260d7b=function(_0x2f7a8a){while(--_0x2f7a8a){_0x515fad['push'](_0x515fad['shift']());}};_0x260d7b(++_0x485a37);}(a23_0x1e35,0x1e1));var a23_0x5a05=function(_0x3015af,_0xaa1d3){_0x3015af=_0x3015af-0x0;var _0x413378=a23_0x1e35[_0x3015af];return _0x413378;};'use strict';var __awaiter=this&&this[a23_0x5a05('0x0')]||function(_0x22c9c8,_0x35aedc,_0xa9c080,_0xfd277a){function _0x2048b2(_0x39f824){return _0x39f824 instanceof _0xa9c080?_0x39f824:new _0xa9c080(function(_0x23f64f){_0x23f64f(_0x39f824);});}return new(_0xa9c080||(_0xa9c080=Promise))(function(_0x172f59,_0x5489f2){function _0x2ca197(_0x211fa3){try{_0x3c58eb(_0xfd277a[a23_0x5a05('0x1')](_0x211fa3));}catch(_0x1feb4e){_0x5489f2(_0x1feb4e);}}function _0x2722a3(_0x10a05d){try{_0x3c58eb(_0xfd277a['throw'](_0x10a05d));}catch(_0x86c128){_0x5489f2(_0x86c128);}}function _0x3c58eb(_0x1902b4){_0x1902b4[a23_0x5a05('0x2')]?_0x172f59(_0x1902b4['value']):_0x2048b2(_0x1902b4[a23_0x5a05('0x3')])[a23_0x5a05('0x4')](_0x2ca197,_0x2722a3);}_0x3c58eb((_0xfd277a=_0xfd277a[a23_0x5a05('0x5')](_0x22c9c8,_0x35aedc||[]))[a23_0x5a05('0x1')]());});};Object[a23_0x5a05('0x6')](exports,a23_0x5a05('0x7'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a23_0x5a05('0x8'));const mediainfo=require(a23_0x5a05('0x9'));const fs=require('fs');const url=require('url');const http=require(a23_0x5a05('0xa'));const fsExtra=require(a23_0x5a05('0xb'));const request=require(a23_0x5a05('0xc'));const progress=require(a23_0x5a05('0xd'));const spawn=require(a23_0x5a05('0xe'))[a23_0x5a05('0xf')];const exec=require(a23_0x5a05('0xe'))['exec'];const isImage=require(a23_0x5a05('0x10'));const format=require(a23_0x5a05('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a23_0x5a05('0x12'));const configFile=a23_0x5a05('0x13');const contextFile=a23_0x5a05('0x14');const urlExists=require(a23_0x5a05('0x15'));const kodi_rpc=require(a23_0x5a05('0x16'));const Downloader=require(a23_0x5a05('0x17'));class SyncPlaylistsService{constructor(){this[a23_0x5a05('0x18')]='media/';this['tempFolder']=this[a23_0x5a05('0x18')]+a23_0x5a05('0x19');this[a23_0x5a05('0x1a')]=this[a23_0x5a05('0x18')]+a23_0x5a05('0x1b');this[a23_0x5a05('0x1c')]=this[a23_0x5a05('0x18')]+a23_0x5a05('0x1d');this['m3uFile']=this[a23_0x5a05('0x1a')]+'lulo_playlist.m3u';this[a23_0x5a05('0x1e')]=0x0;this[a23_0x5a05('0x1f')]=![];this[a23_0x5a05('0x20')]=[];this[a23_0x5a05('0x21')]=[];this[a23_0x5a05('0x22')]={};this[a23_0x5a05('0x23')]='http://localhost';this['kodiUser']=a23_0x5a05('0x24');this['kodiPassword']='.lulo123.';this[a23_0x5a05('0x25')]=![];this[a23_0x5a05('0x26')]=new HttpClientService_1['HttpClientService']();this[a23_0x5a05('0x27')]=new playerService_1['PlayerService']();}['init'](){this[a23_0x5a05('0x28')]=JSON[a23_0x5a05('0x29')](fs[a23_0x5a05('0x2a')](configFile));this[a23_0x5a05('0x2b')]=JSON[a23_0x5a05('0x29')](fs[a23_0x5a05('0x2a')](contextFile));this['playerId']=this[a23_0x5a05('0x28')][a23_0x5a05('0x2c')];this[a23_0x5a05('0x2d')]=process[a23_0x5a05('0x2e')][a23_0x5a05('0x2f')]+a23_0x5a05('0x30');this[a23_0x5a05('0x31')]=this[a23_0x5a05('0x2d')]+'api/player_playlist.php?player_id={0}';this[a23_0x5a05('0x32')]=this[a23_0x5a05('0x2d')]+a23_0x5a05('0x33');this[a23_0x5a05('0x34')]=new kodi_rpc({'url':this[a23_0x5a05('0x23')],'user':this[a23_0x5a05('0x35')],'password':this['kodiPassword']});this[a23_0x5a05('0x36')]();this['registerClient']();this[a23_0x5a05('0x37')]();this[a23_0x5a05('0x38')]();this[a23_0x5a05('0x39')]();setInterval(function(){this[a23_0x5a05('0x3a')]();}[a23_0x5a05('0x3b')](this),0x2710);setInterval(function(){this['registerClient']();}[a23_0x5a05('0x3b')](this),0x493e0);}['checkDependencies'](){}[a23_0x5a05('0x3c')](){this[a23_0x5a05('0x34')][a23_0x5a05('0x3d')]['getItems'](0x1)['then'](function(_0x48e573){const _0x3573be=JSON[a23_0x5a05('0x3e')](_0x48e573);const _0x327a81={'player_id':this[a23_0x5a05('0x2c')],'device_uuid':this[a23_0x5a05('0x28')][a23_0x5a05('0x3f')],'network_info':JSON['stringify'](os['networkInterfaces']()),'firmware_info':JSON[a23_0x5a05('0x3e')](this['context']),'playlist':_0x3573be,'playing_item':'','status':0x0};this[a23_0x5a05('0x26')][a23_0x5a05('0x40')](a23_0x5a05('0x41'),_0x327a81,![])[a23_0x5a05('0x4')](function(_0x1f7d27){console['log'](a23_0x5a05('0x42')+Date());})[a23_0x5a05('0x43')](function(_0x5dd802){});console['log'](_0x327a81);}['bind'](this));const _0x45bc5e=this[a23_0x5a05('0x28')]['deviceUuid'];if(!_0x45bc5e||_0x45bc5e==''){this[a23_0x5a05('0x28')]['deviceUuid']=uuidv4();this[a23_0x5a05('0x28')]={'deviceUuid':this[a23_0x5a05('0x28')][a23_0x5a05('0x3f')],'playerId':this['config']['playerId']};fs[a23_0x5a05('0x44')](configFile,JSON['stringify'](this['config']));}}[a23_0x5a05('0x3a')](){console[a23_0x5a05('0x45')]('getStatus');this[a23_0x5a05('0x34')][a23_0x5a05('0x46')][a23_0x5a05('0x47')]()[a23_0x5a05('0x4')](function(_0x1e3dbf){const _0x53002a=_0x1e3dbf[a23_0x5a05('0x48')][a23_0x5a05('0x49')];this[a23_0x5a05('0x4a')](_0x53002a);}[a23_0x5a05('0x3b')](this))['catch'](function(_0x2be2c0){console[a23_0x5a05('0x45')](_0x2be2c0);this[a23_0x5a05('0x4a')](JSON[a23_0x5a05('0x3e')](_0x2be2c0));}[a23_0x5a05('0x3b')](this));}[a23_0x5a05('0x4a')](_0x5688a1){console[a23_0x5a05('0x45')](a23_0x5a05('0x4b')+_0x5688a1);const _0x8a1be0={'player_id':this[a23_0x5a05('0x2c')],'device_uuid':this[a23_0x5a05('0x28')][a23_0x5a05('0x3f')],'status':_0x5688a1!=''&&_0x5688a1!=null?0x1:0x0,'playing_item':_0x5688a1};this[a23_0x5a05('0x26')][a23_0x5a05('0x40')](a23_0x5a05('0x4c'),_0x8a1be0,![])[a23_0x5a05('0x4')](function(_0x6fe77b){console[a23_0x5a05('0x45')](a23_0x5a05('0x4d')+JSON['stringify'](_0x6fe77b));})['catch'](function(_0x334dff){});}[a23_0x5a05('0x37')](){fsExtra['ensureDir'](this['mediaFolder'],_0x3f8522=>{});fsExtra['ensureDir'](this['tempFolder'],_0x23da6b=>{});fsExtra[a23_0x5a05('0x4e')](this[a23_0x5a05('0x1a')],_0x576b96=>{});}[a23_0x5a05('0x38')](){const _0x5e85b9=format(this[a23_0x5a05('0x31')],this['playerId']);console['log'](_0x5e85b9);request({'url':_0x5e85b9,'json':!![]},function(_0x39c5b8,_0x403f54,_0xc04e5){console[a23_0x5a05('0x45')]('loadMediaList:\x20');this[a23_0x5a05('0x22')]=_0xc04e5;this[a23_0x5a05('0x1f')]=this[a23_0x5a05('0x4f')]();fsExtra[a23_0x5a05('0x50')](this['tempFolder']);this['downloadFiles']=[];this[a23_0x5a05('0x21')]=[];this['currentFile']=0x0;for(const _0x23c41d in _0xc04e5){this['downloadFiles'][a23_0x5a05('0x51')](_0xc04e5[_0x23c41d]);}console['log'](a23_0x5a05('0x52')+this[a23_0x5a05('0x20')]['length']);if(this[a23_0x5a05('0x20')][a23_0x5a05('0x53')]>0x0){this[a23_0x5a05('0x54')]();}}[a23_0x5a05('0x3b')](this));}['reloadMediaList'](){this[a23_0x5a05('0x25')]=!![];if(fsExtra[a23_0x5a05('0x55')](this[a23_0x5a05('0x56')])){fsExtra['emptyDirSync'](this[a23_0x5a05('0x56')]);}if(fsExtra[a23_0x5a05('0x55')](this[a23_0x5a05('0x1a')])){fsExtra[a23_0x5a05('0x50')](this[a23_0x5a05('0x1a')]);}if(!fsExtra['existsSync'](this[a23_0x5a05('0x1c')])){fsExtra[a23_0x5a05('0x57')](this['playListFile']);}if(!fsExtra[a23_0x5a05('0x55')](this['m3uFile'])){fsExtra[a23_0x5a05('0x57')](this[a23_0x5a05('0x58')]);}this[a23_0x5a05('0x38')]();}[a23_0x5a05('0x4f')](){const _0xddf537=JSON[a23_0x5a05('0x3e')](this[a23_0x5a05('0x22')]);try{if(!fsExtra['existsSync'](this[a23_0x5a05('0x1c')])){return!![];}else{const _0x32f4be=fsExtra[a23_0x5a05('0x2a')](this['playListFile'])[a23_0x5a05('0x59')]();if(_0x32f4be!=_0xddf537){return!![];}}}catch(_0x1fe77e){console[a23_0x5a05('0x45')](_0x1fe77e);}return![];}['download'](){console['log']('this.currentFile:\x20'+this[a23_0x5a05('0x1e')]+a23_0x5a05('0x5a')+this['downloadFiles'][a23_0x5a05('0x53')]);if(this[a23_0x5a05('0x1e')]>=this[a23_0x5a05('0x20')][a23_0x5a05('0x53')]){this[a23_0x5a05('0x5b')]();return;}const _0x528c8e=String(this[a23_0x5a05('0x20')][this['currentFile']][a23_0x5a05('0x5c')]);const _0x33c801=this[a23_0x5a05('0x20')][this['currentFile']]['media_type'];let _0x54e2b1=_0x528c8e['substring'](_0x528c8e[a23_0x5a05('0x5d')]('/')+0x1);const _0x3709de=_0x54e2b1[a23_0x5a05('0x5e')]('.')[a23_0x5a05('0x5f')](0x0,-0x1)[a23_0x5a05('0x60')]('.');let _0x357e60=this[a23_0x5a05('0x2d')]+_0x528c8e;const _0xda6ce8=_0x357e60[a23_0x5a05('0x5e')]('.')[a23_0x5a05('0x5f')](0x0,-0x1)[a23_0x5a05('0x60')]('.');if(_0x33c801==a23_0x5a05('0x61')){_0x54e2b1=_0x54e2b1+a23_0x5a05('0x62');}else if(_0x33c801==a23_0x5a05('0x63')){_0x54e2b1=_0x3709de+a23_0x5a05('0x62');_0x357e60=_0xda6ce8+a23_0x5a05('0x62');}console[a23_0x5a05('0x45')](a23_0x5a05('0x64'));console[a23_0x5a05('0x45')](_0x528c8e);console['log'](_0x33c801);console[a23_0x5a05('0x45')](_0x54e2b1);console[a23_0x5a05('0x45')](_0x357e60);console[a23_0x5a05('0x45')](_0x3709de);console[a23_0x5a05('0x45')](_0xda6ce8);console['log']('**********+');if(fsExtra[a23_0x5a05('0x55')](this[a23_0x5a05('0x56')]+_0x54e2b1)){this[a23_0x5a05('0x65')](this[a23_0x5a05('0x56')]+_0x54e2b1)['then'](function(_0x13cd7b){if(_0x13cd7b){this[a23_0x5a05('0x1e')]++;}else{this[a23_0x5a05('0x1f')]=!![];}this[a23_0x5a05('0x54')]();}['bind'](this));}else if(fsExtra['existsSync'](this[a23_0x5a05('0x1a')]+_0x54e2b1)){this[a23_0x5a05('0x65')](this[a23_0x5a05('0x1a')]+_0x54e2b1)[a23_0x5a05('0x4')](function(_0x37072){if(_0x37072){fsExtra[a23_0x5a05('0x66')](this[a23_0x5a05('0x1a')]+_0x54e2b1,this[a23_0x5a05('0x56')]+_0x54e2b1);this[a23_0x5a05('0x1e')]++;}else{this['playlistChanged']=!![];}this[a23_0x5a05('0x54')]();}[a23_0x5a05('0x3b')](this));}else{console[a23_0x5a05('0x45')](a23_0x5a05('0x67')+_0x357e60);this['playlistChanged']=!![];if(_0x33c801=='youtube_single'){this[a23_0x5a05('0x68')](_0x528c8e);}else{this[a23_0x5a05('0x69')](_0x357e60,_0x54e2b1,_0x33c801);}}}['checkVideo'](_0x971a23){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0x5a05('0x45')](a23_0x5a05('0x6a')+_0x971a23);const _0x57727e=yield mediainfo(_0x971a23)[a23_0x5a05('0x43')](_0x4ed662=>{console[a23_0x5a05('0x45')](_0x4ed662);fsExtra['removeSync'](_0x971a23);return![];});const _0x3e0a46=_0x57727e[a23_0x5a05('0x6b')][a23_0x5a05('0x6c')][a23_0x5a05('0x53')]>0x1&&_0x57727e[a23_0x5a05('0x6b')][a23_0x5a05('0x6c')][0x1][a23_0x5a05('0x6d')]==a23_0x5a05('0x6e');if(!_0x3e0a46){fsExtra[a23_0x5a05('0x57')](_0x971a23);}console[a23_0x5a05('0x45')](a23_0x5a05('0x6f')+_0x3e0a46);return _0x3e0a46;});}[a23_0x5a05('0x69')](_0x56eb85,_0x45351d,_0x23bbc1){const _0x293480=new Downloader();console[a23_0x5a05('0x45')](_0x56eb85);console[a23_0x5a05('0x45')](_0x45351d);console['log'](_0x23bbc1);const _0x4b54f2=_0x293480[a23_0x5a05('0x54')](_0x56eb85,this[a23_0x5a05('0x56')]+_0x45351d);urlExists(_0x56eb85,function(_0x221542,_0xae6166){if(_0xae6166){if(this['failDownloadFiles'][a23_0x5a05('0x70')](this['currentFile'])){const _0x5df621=this[a23_0x5a05('0x21')][a23_0x5a05('0x71')](this[a23_0x5a05('0x1e')]);if(_0x5df621>-0x1){this[a23_0x5a05('0x21')][a23_0x5a05('0x72')](_0x5df621,0x1);}}console[a23_0x5a05('0x45')](a23_0x5a05('0x73')+_0x56eb85);_0x4b54f2[a23_0x5a05('0x74')]();}else{if(!this[a23_0x5a05('0x21')][a23_0x5a05('0x70')](this['currentFile'])){this[a23_0x5a05('0x21')][a23_0x5a05('0x51')](this[a23_0x5a05('0x1e')]);}console['log'](a23_0x5a05('0x75')+_0x56eb85);this[a23_0x5a05('0x1e')]++;this[a23_0x5a05('0x54')]();}}[a23_0x5a05('0x3b')](this));_0x4b54f2['on'](a23_0x5a05('0x74'),function(_0x4b54f2){console[a23_0x5a05('0x45')](a23_0x5a05('0x76')+_0x56eb85);});_0x4b54f2['on'](a23_0x5a05('0x77'),function(_0x4b54f2){console[a23_0x5a05('0x45')]('error:\x20');this['download']();}[a23_0x5a05('0x3b')](this));_0x4b54f2['on'](a23_0x5a05('0x78'),function(_0x4b54f2){console[a23_0x5a05('0x45')]('end');console[a23_0x5a05('0x45')](a23_0x5a05('0x79')+_0x45351d);console['log']('mediaType:\x20'+_0x23bbc1);this[a23_0x5a05('0x65')](this[a23_0x5a05('0x56')]+_0x45351d)['then'](function(_0x228de1){if(_0x228de1){this['currentFile']++;}this[a23_0x5a05('0x54')]();}[a23_0x5a05('0x3b')](this));}['bind'](this));_0x4b54f2['on']('stopped',function(_0x4b54f2){console['log'](a23_0x5a05('0x7a'));});_0x4b54f2['on'](a23_0x5a05('0x7b'),function(_0x4b54f2){console[a23_0x5a05('0x45')](a23_0x5a05('0x7b'));});_0x4b54f2['on'](a23_0x5a05('0x7c'),function(_0x4b54f2){console[a23_0x5a05('0x45')](a23_0x5a05('0x7c'));});}[a23_0x5a05('0x7d')](_0x1ab590,_0x16108c,_0x10a2f5,_0x1ff436){console[a23_0x5a05('0x45')](a23_0x5a05('0x7d'));console[a23_0x5a05('0x45')](_0x1ab590);const _0x251490=!![];let _0x2ff7ba=0x0;const _0xa2fc8e='';console[a23_0x5a05('0x45')](a23_0x5a05('0x7e')+_0x1ab590+a23_0x5a05('0x7f')+_0x16108c);if(_0x2ff7ba){if(_0x2ff7ba>0x5){_0x1ff436(a23_0x5a05('0x80'),_0x1ab590,_0x10a2f5,null);return;}}else{_0x2ff7ba=0x0;}const _0x260ef1=this[a23_0x5a05('0x56')]+_0x16108c;let _0x2f7f51;if(_0x1ff436===undefined){console[a23_0x5a05('0x45')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x1ab590+a23_0x5a05('0x7f')+_0x260ef1);_0x1ff436=function(_0x10f4ca,_0x5683b2){console['log'](a23_0x5a05('0x81'),_0x10f4ca,_0x5683b2);};}http[a23_0x5a05('0x82')][a23_0x5a05('0x83')]=0x64;const _0x38acda={'host':url[a23_0x5a05('0x29')](_0x1ab590)[a23_0x5a05('0x84')],'port':0x50,'path':url['parse'](_0x1ab590)[a23_0x5a05('0x85')],'agent':![]};const _0xb68962=http[a23_0x5a05('0x86')](_0x38acda,function(_0x77b03f){let _0x7d9c6e=0x0;let _0x3f0bff=0x0;function _0x151d99(){if(_0x7d9c6e===undefined){console[a23_0x5a05('0x45')](_0x16108c+'\x20Progress:\x20unknown\x09'+_0x3f0bff+'/'+'?');}const _0x1c8e7d=_0x3f0bff/_0x7d9c6e*0x64;console[a23_0x5a05('0x45')](_0x16108c+'\x20Progress:\x20'+_0x1c8e7d+'%\x09'+_0x3f0bff+'/'+_0x7d9c6e);}console['log'](_0x16108c+'\x20'+_0x77b03f[a23_0x5a05('0x87')]);switch(_0x77b03f[a23_0x5a05('0x87')]){case 0xc8:_0x7d9c6e=_0x77b03f[a23_0x5a05('0x88')][a23_0x5a05('0x89')]||_0xa2fc8e;fs[a23_0x5a05('0x8a')](_0x260ef1,function(_0x4a02ea,_0x35f6cb){if(!_0x4a02ea){console[a23_0x5a05('0x45')]('Have\x20already\x20downloaded\x20'+_0x260ef1);if(_0x35f6cb[a23_0x5a05('0x8b')]==_0x7d9c6e){console[a23_0x5a05('0x45')]('And\x20the\x20file\x20size\x20matches\x20('+_0x7d9c6e+')');console[a23_0x5a05('0x45')]('Redownloading');}else{console[a23_0x5a05('0x45')](a23_0x5a05('0x8c')+_0x35f6cb[a23_0x5a05('0x8b')]+a23_0x5a05('0x8d')+_0x7d9c6e+')');}}_0x2f7f51=fs[a23_0x5a05('0x8e')](_0x260ef1);_0x77b03f['pipe'](_0x2f7f51);_0x77b03f['on'](a23_0x5a05('0x8f'),function(_0x345080){_0x3f0bff+=_0x345080[a23_0x5a05('0x53')];_0x151d99();});_0xb68962['on']('error',function(_0x4a02ea){console[a23_0x5a05('0x45')](a23_0x5a05('0x90'));console[a23_0x5a05('0x45')](_0x4a02ea);});_0x2f7f51['on']('finish',function(){console[a23_0x5a05('0x45')](a23_0x5a05('0x91')+_0x1ab590+a23_0x5a05('0x7f')+_0x16108c);_0x1ff436(null,_0x16108c,_0x10a2f5,_0x16108c);}['bind'](this));});break;case 0x12e:const _0x5358d4=_0x77b03f[a23_0x5a05('0x88')][a23_0x5a05('0x92')];console['log']('Redirect\x20'+_0x1ab590+a23_0x5a05('0x7f')+_0x5358d4);if(_0x2ff7ba<0x5){this[a23_0x5a05('0x7d')](_0x5358d4,_0x16108c,_0x1ff436,_0x2ff7ba++);}else{console[a23_0x5a05('0x77')](a23_0x5a05('0x93')+_0x1ab590+'.');_0x1ff436(a23_0x5a05('0x94'),null,null,null);}return;case 0x194:console['log']('File\x20Not\x20Found\x20'+_0x1ab590);default:console[a23_0x5a05('0x45')]('Problem\x20downloading\x20'+_0x1ab590+'\x20STATUS:\x20'+_0x77b03f[a23_0x5a05('0x87')]);_0xb68962[a23_0x5a05('0x95')]();_0x1ff436(_0x77b03f[a23_0x5a05('0x87')],null,null,null);return;}})['on']('error',function(_0x3b1309){console[a23_0x5a05('0x45')](a23_0x5a05('0x96')+_0x1ab590+'\x20'+_0x3b1309[a23_0x5a05('0x97')]);_0x1ff436(_0x3b1309,null,null,null);});}[a23_0x5a05('0x98')](_0x5799d1,_0x279037,_0x41d9d1,_0x1a2d6a){console[a23_0x5a05('0x45')]('downloadHTTPFileCallback');console[a23_0x5a05('0x45')](_0x5799d1);console[a23_0x5a05('0x45')](_0x279037);console['log'](_0x41d9d1);console[a23_0x5a05('0x45')](_0x1a2d6a);if(_0x41d9d1==a23_0x5a05('0x63')){const _0x5b1528=this[a23_0x5a05('0x20')][this['currentFile']][a23_0x5a05('0x99')]!=null?this['downloadFiles'][this[a23_0x5a05('0x1e')]]['duration']:0x1e;this[a23_0x5a05('0x9a')](_0x1a2d6a,_0x5b1528);}else if(_0x41d9d1==a23_0x5a05('0x9b')){if(_0x5799d1==null&&_0x279037!=''){this['currentFile']++;}this[a23_0x5a05('0x54')]();}console['log'](this['currentFile']);}[a23_0x5a05('0x9c')](_0x14812d,_0x784492,_0xb7c078){progress(request(_0x14812d),{})['on']('progress',function(_0x1ea76d){console[a23_0x5a05('0x45')](_0x1ea76d);})['on']('error',function(_0x4ca4b2){console[a23_0x5a05('0x45')]('Error\x20downloading\x20file');this[a23_0x5a05('0x54')]();})['on'](a23_0x5a05('0x78'),function(){console[a23_0x5a05('0x45')]('Downloaded:\x20'+_0x784492);console['log'](a23_0x5a05('0x9d')+_0xb7c078);if(_0xb7c078=='image'){const _0x12e9d9=this[a23_0x5a05('0x20')][this[a23_0x5a05('0x1e')]][a23_0x5a05('0x99')]!=null?this['downloadFiles'][this['currentFile']]['duration']:0x1e;this[a23_0x5a05('0x9a')](_0x784492,_0x12e9d9);}else if(_0xb7c078==a23_0x5a05('0x9b')){this[a23_0x5a05('0x1e')]++;this[a23_0x5a05('0x54')]();}}[a23_0x5a05('0x3b')](this))[a23_0x5a05('0x9e')](fs['createWriteStream'](this['tempFolder']+_0x784492));}[a23_0x5a05('0x9a')](_0x5254e4,_0x4cfd78=0x1e){const _0x17d00f=this['tempFolder']+_0x5254e4;console['log'](_0x17d00f);console[a23_0x5a05('0x45')](_0x5254e4);const _0x3541d7=_0x5254e4[a23_0x5a05('0x5e')]('.')['slice'](0x0,-0x1)[a23_0x5a05('0x60')]('.');const _0xf604d9=a23_0x5a05('0x9f');const _0x340f6d=['-y','-r',a23_0x5a05('0xa0'),a23_0x5a05('0xa1'),'1',a23_0x5a05('0xa2'),a23_0x5a05('0xa3'),'-i',_0x17d00f,'-t',String(_0x4cfd78),a23_0x5a05('0xa4'),'libx264',a23_0x5a05('0xa5'),a23_0x5a05('0xa6'),'-r','25',a23_0x5a05('0xa7'),a23_0x5a05('0xa8'),this[a23_0x5a05('0x56')]+_0x3541d7+'.mp4'];const _0x1ea316=spawn(_0xf604d9,_0x340f6d);_0x1ea316[a23_0x5a05('0xa9')]['on'](a23_0x5a05('0x8f'),function(_0x58ca6f){console['log']('Converting\x20'+_0x17d00f);});_0x1ea316[a23_0x5a05('0xaa')]['on'](a23_0x5a05('0x8f'),function(_0x9daa49){console[a23_0x5a05('0x45')](a23_0x5a05('0xab')+_0x9daa49);}[a23_0x5a05('0x3b')](this));_0x1ea316['on']('close',function(){console[a23_0x5a05('0x45')]('finished\x20mp4\x20convert');this[a23_0x5a05('0x1e')]++;this[a23_0x5a05('0x54')]();}[a23_0x5a05('0x3b')](this));}[a23_0x5a05('0x68')](_0x162993){const _0x24ac44=this[a23_0x5a05('0x56')]+'/'+_0x162993+a23_0x5a05('0x62');const _0x245821=youtubedl(a23_0x5a05('0xac')+_0x162993,[a23_0x5a05('0xad')],{'cwd':__dirname});_0x245821['on']('info',function(_0x14be9f){console['log'](a23_0x5a05('0xae'));console[a23_0x5a05('0x45')]('filename:\x20'+_0x14be9f['_filename']);console[a23_0x5a05('0x45')](a23_0x5a05('0xaf')+_0x14be9f[a23_0x5a05('0x8b')]);});_0x245821['on'](a23_0x5a05('0xb0'),function complete(_0x260d46){'use strict';console[a23_0x5a05('0x45')](a23_0x5a05('0xb1')+_0x260d46[a23_0x5a05('0xb2')]+a23_0x5a05('0xb3'));});_0x245821['on'](a23_0x5a05('0x78'),function(){console[a23_0x5a05('0x45')](a23_0x5a05('0xb4'));this['checkVideo'](_0x24ac44)['then'](function(_0x41b0d5){if(_0x41b0d5){this[a23_0x5a05('0x1e')]++;}this[a23_0x5a05('0x54')]();}[a23_0x5a05('0x3b')](this));}[a23_0x5a05('0x3b')](this));_0x245821['pipe'](fs[a23_0x5a05('0x8e')](_0x24ac44));}[a23_0x5a05('0x5b')](){console['log'](a23_0x5a05('0xb5'));if(this['playlistChanged']){if(this[a23_0x5a05('0x21')][a23_0x5a05('0x53')]==0x0){console[a23_0x5a05('0x45')]('this.playListFile:\x20'+this[a23_0x5a05('0x1c')]);fs[a23_0x5a05('0x44')](this[a23_0x5a05('0x1c')],JSON[a23_0x5a05('0x3e')](this[a23_0x5a05('0x22')]));let _0x8a5aa8=a23_0x5a05('0xb6')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x4c0a67 in this['downloadFiles']){const _0x406f82=this[a23_0x5a05('0x20')][_0x4c0a67]['path'];const _0x4eb988=this[a23_0x5a05('0x20')][_0x4c0a67][a23_0x5a05('0xb7')];const _0x48d4a7=_0x406f82['substring'](_0x406f82['lastIndexOf']('/')+0x1);let _0x5b591b=_0x48d4a7[a23_0x5a05('0x5e')]('.')[a23_0x5a05('0x5f')](0x0,-0x1)[a23_0x5a05('0x60')]('.');if(_0x4eb988==a23_0x5a05('0x61')){_0x5b591b=_0x406f82;}_0x8a5aa8+='/home/osmc/luloclient/media/files/'+_0x5b591b+a23_0x5a05('0x62')+'\x0d\x0a';console[a23_0x5a05('0x45')]('m3uContent:\x20'+_0x8a5aa8);}console[a23_0x5a05('0x45')](a23_0x5a05('0xb8')+_0x8a5aa8);fsExtra[a23_0x5a05('0x50')](this['filesFolder']);console[a23_0x5a05('0x45')](a23_0x5a05('0xb9')+this['tempFolder']);fsExtra[a23_0x5a05('0x66')](this[a23_0x5a05('0x56')],this[a23_0x5a05('0x1a')]);console[a23_0x5a05('0x45')](a23_0x5a05('0xba')+this[a23_0x5a05('0x58')]);fsExtra[a23_0x5a05('0x44')](this[a23_0x5a05('0x58')],_0x8a5aa8);console[a23_0x5a05('0x45')](a23_0x5a05('0xbb')+this[a23_0x5a05('0x56')]);fsExtra[a23_0x5a05('0x50')](this[a23_0x5a05('0x56')]);console['log'](a23_0x5a05('0xbc'));this[a23_0x5a05('0xbd')]();}else{console[a23_0x5a05('0x45')](a23_0x5a05('0xbe'));this['currentFile']=0x0;setTimeout(function(){this[a23_0x5a05('0x54')]();}[a23_0x5a05('0x3b')](this),0x1388);}}else{console[a23_0x5a05('0x45')]('No\x20playlist\x20changes.');}}[a23_0x5a05('0xbf')](){this[a23_0x5a05('0xc0')](a23_0x5a05('0xc1'),{'playlistid':0x1},function(_0x413c96){console[a23_0x5a05('0x45')](a23_0x5a05('0xc2'));console[a23_0x5a05('0x45')](_0x413c96);this['jsonrpcClient'](a23_0x5a05('0xc3'),{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x413c96){console[a23_0x5a05('0x45')](a23_0x5a05('0xc4'));console['log'](_0x413c96);this[a23_0x5a05('0xc0')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x413c96){console['log']('Playlist.Opened');console[a23_0x5a05('0x45')](_0x413c96);this[a23_0x5a05('0xc5')]('RestartApp()');}[a23_0x5a05('0x3b')](this));}[a23_0x5a05('0x3b')](this));}['bind'](this));}[a23_0x5a05('0xbd')](){console[a23_0x5a05('0x45')](a23_0x5a05('0xc6'));exec(a23_0x5a05('0xc7'),function(_0x443863){console['log'](_0x443863);});}[a23_0x5a05('0x39')](){const _0x1df81d=format(this[a23_0x5a05('0x32')],this[a23_0x5a05('0x2c')]);console['log'](_0x1df81d);request({'url':_0x1df81d,'json':!![]},function(_0x428d5a,_0x217ed4,_0x2fde1f){if(_0x2fde1f[a23_0x5a05('0x53')]>0x0){const _0x370bd9=_0x2fde1f[0x0];const _0x217bb6=_0x370bd9[a23_0x5a05('0xc8')];const _0x13d473=_0x370bd9[a23_0x5a05('0xc9')]==0x1;this[a23_0x5a05('0xca')](_0x217bb6);this['enableClock'](_0x13d473);this[a23_0x5a05('0x3c')]();}console['log'](_0x2fde1f);}[a23_0x5a05('0x3b')](this));}[a23_0x5a05('0xcb')](){this[a23_0x5a05('0xc5')]('CECStandby()');}['turnOnTV'](){this[a23_0x5a05('0xc5')](a23_0x5a05('0xcc'));}['setRss'](_0x15ed0f){const _0x5f1abc=_0x15ed0f!=null&&_0x15ed0f!='';const _0x43de18=a23_0x5a05('0xcd');const _0x27b1c2=fsExtra[a23_0x5a05('0x2a')](_0x43de18);console['log']('xmlContent:\x20'+_0x27b1c2);const _0x3f57dd=require(a23_0x5a05('0xce'));const _0x365318=_0x3f57dd[a23_0x5a05('0xcf')];_0x365318(_0x27b1c2,function(_0x5e7f82,_0x99e31d){console[a23_0x5a05('0x45')](a23_0x5a05('0xd0'),_0x5e7f82);console[a23_0x5a05('0x45')](a23_0x5a05('0xd1'),_0x99e31d);if(!_0x15ed0f||_0x15ed0f==null||_0x15ed0f==''){_0x15ed0f='none';}_0x99e31d['rssfeeds']['set'][0x0][a23_0x5a05('0xd2')][0x0]['_']=_0x15ed0f;const _0x24a3cf=new _0x3f57dd['Builder']();const _0x1889a1=_0x24a3cf['buildObject'](_0x99e31d);console[a23_0x5a05('0x45')](a23_0x5a05('0xd3'),_0x1889a1);fsExtra[a23_0x5a05('0x44')](_0x43de18,_0x1889a1);});this[a23_0x5a05('0xc5')]('RefreshRSS()');this[a23_0x5a05('0xc0')](a23_0x5a05('0xd4'),{'setting':a23_0x5a05('0xd5'),'value':_0x5f1abc},function(_0x1d7866){console[a23_0x5a05('0x45')](a23_0x5a05('0xd6'));console[a23_0x5a05('0x45')](_0x1d7866);}[a23_0x5a05('0x3b')](this));}[a23_0x5a05('0xd7')](_0x32e5f6){this[a23_0x5a05('0xc0')](a23_0x5a05('0xd4'),{'setting':a23_0x5a05('0xd8'),'value':_0x32e5f6},function(_0x2122af){console['log'](a23_0x5a05('0xd9'));console['log'](_0x2122af);}[a23_0x5a05('0x3b')](this));}[a23_0x5a05('0xc5')](_0x5cf7b2){exec(a23_0x5a05('0xda')+_0x5cf7b2+'\x22',function(_0x55dc6c){console[a23_0x5a05('0x45')](_0x55dc6c);});}[a23_0x5a05('0xc0')](_0x4ea477,_0x4985f3,_0x58142c){const _0x8f5ecd={'jsonrpc':a23_0x5a05('0xdb'),'method':_0x4ea477,'params':_0x4985f3,'id':0x1};this[a23_0x5a05('0x26')][a23_0x5a05('0x40')](this['kodiHost']+a23_0x5a05('0xdc'),_0x8f5ecd,![],{'user':this[a23_0x5a05('0x35')],'pass':this[a23_0x5a05('0xdd')]})[a23_0x5a05('0x4')](function(_0x29c109){_0x58142c(_0x29c109);})[a23_0x5a05('0x43')](function(_0x3e8479){});}}exports[a23_0x5a05('0xde')]=SyncPlaylistsService;