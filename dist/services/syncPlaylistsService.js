var a23_0x550c=['copySync','writeFileSync','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','reboot','Reboot()','updateSettings','setRss','enableClock','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','none','rssfeeds','set','feed','Builder','buildObject','xml:\x20%j','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','2.0','SyncPlaylistsService','__awaiter','next','done','value','then','defineProperty','__esModule','node-mediainfo','fs-extra','request','request-progress','child_process','spawn','uuid/v4','config.json','context.json','url-exists','node-kodi','mt-files-downloader','media/','tempFolder','mediaFolder','temp/','filesFolder','playListFile','playlist.txt','lulo_playlist.m3u','playlistChanged','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','init','config','readFileSync','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','registerClient','loadMediaList','getStatus','bind','checkDependencies','playlist','stringify','deviceUuid','networkInterfaces','context','post','log','register\x20response:\x20','catch','player','getCurrentlyPlayingVideo','item','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','checkFolders','ensureDir','loadMediaList:\x20','emptyDirSync','downloadFiles','currentFile','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','m3uFile','toString','\x20of\x20','finishProcess','substring','split','join','youtube_single','.mp4','**********+','checkVideo','downloader','videoFile:\x20','media','track','@type','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','globalAgent','maxSockets','parse','pathname','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','pipe','data','headers','location','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','video','downloadRequestFile','progress','Error\x20downloading\x20file','createImageVideo','createWriteStream','slice','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr','downloadYouTube','http://www.youtube.com/watch?v=','--format=18','Download\x20started','filename:\x20','_filename','size:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','path','lastIndexOf','/home/osmc/luloclient/media/files/'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a23_0x550c,0x1e6));var a23_0x56ae=function(_0x116768,_0x53268f){_0x116768=_0x116768-0x0;var _0x25d499=a23_0x550c[_0x116768];return _0x25d499;};'use strict';var __awaiter=this&&this[a23_0x56ae('0x0')]||function(_0x34a12b,_0x36c6a6,_0x33748d,_0x3e4c21){function _0x5c685e(_0x3e3156){return _0x3e3156 instanceof _0x33748d?_0x3e3156:new _0x33748d(function(_0x1e9e81){_0x1e9e81(_0x3e3156);});}return new(_0x33748d||(_0x33748d=Promise))(function(_0x292610,_0x151bd2){function _0x558098(_0xd7aec1){try{_0x4ce2f1(_0x3e4c21[a23_0x56ae('0x1')](_0xd7aec1));}catch(_0x948b6c){_0x151bd2(_0x948b6c);}}function _0x29929c(_0x5dd881){try{_0x4ce2f1(_0x3e4c21['throw'](_0x5dd881));}catch(_0x18d5c9){_0x151bd2(_0x18d5c9);}}function _0x4ce2f1(_0x333808){_0x333808[a23_0x56ae('0x2')]?_0x292610(_0x333808[a23_0x56ae('0x3')]):_0x5c685e(_0x333808[a23_0x56ae('0x3')])[a23_0x56ae('0x4')](_0x558098,_0x29929c);}_0x4ce2f1((_0x3e4c21=_0x3e4c21['apply'](_0x34a12b,_0x36c6a6||[]))[a23_0x56ae('0x1')]());});};Object[a23_0x56ae('0x5')](exports,a23_0x56ae('0x6'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require('./playerService');const mediainfo=require(a23_0x56ae('0x7'));const fs=require('fs');const url=require('url');const http=require('http');const fsExtra=require(a23_0x56ae('0x8'));const request=require(a23_0x56ae('0x9'));const progress=require(a23_0x56ae('0xa'));const spawn=require(a23_0x56ae('0xb'))[a23_0x56ae('0xc')];const exec=require(a23_0x56ae('0xb'))['exec'];const isImage=require('is-image');const format=require('string-template');const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a23_0x56ae('0xd'));const configFile=a23_0x56ae('0xe');const contextFile=a23_0x56ae('0xf');const urlExists=require(a23_0x56ae('0x10'));const kodi_rpc=require(a23_0x56ae('0x11'));const Downloader=require(a23_0x56ae('0x12'));class SyncPlaylistsService{constructor(){this['mediaFolder']=a23_0x56ae('0x13');this[a23_0x56ae('0x14')]=this[a23_0x56ae('0x15')]+a23_0x56ae('0x16');this[a23_0x56ae('0x17')]=this[a23_0x56ae('0x15')]+'files/';this[a23_0x56ae('0x18')]=this['mediaFolder']+a23_0x56ae('0x19');this['m3uFile']=this[a23_0x56ae('0x17')]+a23_0x56ae('0x1a');this['currentFile']=0x0;this[a23_0x56ae('0x1b')]=![];this['downloadFiles']=[];this[a23_0x56ae('0x1c')]=[];this[a23_0x56ae('0x1d')]={};this[a23_0x56ae('0x1e')]=a23_0x56ae('0x1f');this[a23_0x56ae('0x20')]=a23_0x56ae('0x21');this[a23_0x56ae('0x22')]=a23_0x56ae('0x23');this[a23_0x56ae('0x24')]=![];this[a23_0x56ae('0x25')]=new HttpClientService_1[(a23_0x56ae('0x26'))]();this[a23_0x56ae('0x27')]=new playerService_1['PlayerService']();}[a23_0x56ae('0x28')](){this[a23_0x56ae('0x29')]=JSON['parse'](fs[a23_0x56ae('0x2a')](configFile));this['context']=JSON['parse'](fs[a23_0x56ae('0x2a')](contextFile));this[a23_0x56ae('0x2b')]=this[a23_0x56ae('0x29')][a23_0x56ae('0x2b')];this['baseURL']=process[a23_0x56ae('0x2c')][a23_0x56ae('0x2d')]+a23_0x56ae('0x2e');this[a23_0x56ae('0x2f')]=this[a23_0x56ae('0x30')]+a23_0x56ae('0x31');this[a23_0x56ae('0x32')]=this['baseURL']+'api/player.php?player_id={0}';this[a23_0x56ae('0x33')]=new kodi_rpc({'url':this[a23_0x56ae('0x1e')],'user':this[a23_0x56ae('0x20')],'password':this[a23_0x56ae('0x22')]});this['checkDependencies']();this[a23_0x56ae('0x34')]();this['checkFolders']();this[a23_0x56ae('0x35')]();this['updateSettings']();setInterval(function(){this[a23_0x56ae('0x36')]();}[a23_0x56ae('0x37')](this),0x2710);setInterval(function(){this[a23_0x56ae('0x34')]();}[a23_0x56ae('0x37')](this),0x493e0);}[a23_0x56ae('0x38')](){}[a23_0x56ae('0x34')](){this[a23_0x56ae('0x33')][a23_0x56ae('0x39')]['getItems'](0x1)[a23_0x56ae('0x4')](function(_0x468813){const _0x2b1f27=JSON[a23_0x56ae('0x3a')](_0x468813);const _0x5c877d={'player_id':this[a23_0x56ae('0x2b')],'device_uuid':this[a23_0x56ae('0x29')][a23_0x56ae('0x3b')],'network_info':JSON[a23_0x56ae('0x3a')](os[a23_0x56ae('0x3c')]()),'firmware_info':JSON[a23_0x56ae('0x3a')](this[a23_0x56ae('0x3d')]),'playlist':_0x2b1f27,'playing_item':'','status':0x0};this[a23_0x56ae('0x25')][a23_0x56ae('0x3e')]('http://restapi.lulo.run/player_devices/register',_0x5c877d,![])[a23_0x56ae('0x4')](function(_0x5d1e0e){console[a23_0x56ae('0x3f')](a23_0x56ae('0x40')+Date());})[a23_0x56ae('0x41')](function(_0x33bdb7){});console[a23_0x56ae('0x3f')](_0x5c877d);}['bind'](this));const _0x66c1d2=this[a23_0x56ae('0x29')][a23_0x56ae('0x3b')];if(!_0x66c1d2||_0x66c1d2==''){this[a23_0x56ae('0x29')][a23_0x56ae('0x3b')]=uuidv4();this[a23_0x56ae('0x29')]={'deviceUuid':this[a23_0x56ae('0x29')][a23_0x56ae('0x3b')],'playerId':this['config'][a23_0x56ae('0x2b')]};fs['writeFileSync'](configFile,JSON[a23_0x56ae('0x3a')](this[a23_0x56ae('0x29')]));}}[a23_0x56ae('0x36')](){console[a23_0x56ae('0x3f')]('getStatus');this[a23_0x56ae('0x33')][a23_0x56ae('0x42')][a23_0x56ae('0x43')]()[a23_0x56ae('0x4')](function(_0x4853b1){const _0x54135e=_0x4853b1[a23_0x56ae('0x44')]['label'];this[a23_0x56ae('0x45')](_0x54135e);}[a23_0x56ae('0x37')](this))[a23_0x56ae('0x41')](function(_0x1ef87a){console['log'](_0x1ef87a);this[a23_0x56ae('0x45')](_0x1ef87a);}[a23_0x56ae('0x37')](this));}[a23_0x56ae('0x45')](_0x533942){console[a23_0x56ae('0x3f')](a23_0x56ae('0x46')+_0x533942);const _0x289467={'player_id':this['playerId'],'device_uuid':this['config'][a23_0x56ae('0x3b')],'status':_0x533942!=''&&_0x533942!=null?0x1:0x0,'playing_item':_0x533942};this[a23_0x56ae('0x25')]['post'](a23_0x56ae('0x47'),_0x289467,![])[a23_0x56ae('0x4')](function(_0x2e1b3a){console[a23_0x56ae('0x3f')]('reportStatusResponse:\x20'+Date());})['catch'](function(_0x15e37d){});}[a23_0x56ae('0x48')](){fsExtra['ensureDir'](this[a23_0x56ae('0x15')],_0x1dec2e=>{});fsExtra[a23_0x56ae('0x49')](this['tempFolder'],_0x316c8f=>{});fsExtra[a23_0x56ae('0x49')](this[a23_0x56ae('0x17')],_0x43dd5b=>{});}[a23_0x56ae('0x35')](){const _0xeaa5e5=format(this[a23_0x56ae('0x2f')],this[a23_0x56ae('0x2b')]);console[a23_0x56ae('0x3f')](_0xeaa5e5);request({'url':_0xeaa5e5,'json':!![]},function(_0x3da2cd,_0x2c3711,_0x148007){console[a23_0x56ae('0x3f')](a23_0x56ae('0x4a'));this[a23_0x56ae('0x1d')]=_0x148007;this['playlistChanged']=this['hasPlayListChanged']();fsExtra[a23_0x56ae('0x4b')](this[a23_0x56ae('0x14')]);this[a23_0x56ae('0x4c')]=[];this[a23_0x56ae('0x1c')]=[];this[a23_0x56ae('0x4d')]=0x0;for(const _0xc9a702 in _0x148007){this[a23_0x56ae('0x4c')][a23_0x56ae('0x4e')](_0x148007[_0xc9a702]);}console[a23_0x56ae('0x3f')](a23_0x56ae('0x4f')+this[a23_0x56ae('0x4c')][a23_0x56ae('0x50')]);if(this['downloadFiles'][a23_0x56ae('0x50')]>0x0){this[a23_0x56ae('0x51')]();}}[a23_0x56ae('0x37')](this));}[a23_0x56ae('0x52')](){this[a23_0x56ae('0x24')]=!![];if(fsExtra[a23_0x56ae('0x53')](this[a23_0x56ae('0x14')])){fsExtra[a23_0x56ae('0x4b')](this['tempFolder']);}if(fsExtra[a23_0x56ae('0x53')](this['filesFolder'])){fsExtra[a23_0x56ae('0x4b')](this[a23_0x56ae('0x17')]);}if(!fsExtra[a23_0x56ae('0x53')](this['playListFile'])){fsExtra[a23_0x56ae('0x54')](this[a23_0x56ae('0x18')]);}if(!fsExtra[a23_0x56ae('0x53')](this[a23_0x56ae('0x55')])){fsExtra[a23_0x56ae('0x54')](this[a23_0x56ae('0x55')]);}this[a23_0x56ae('0x35')]();}['hasPlayListChanged'](){const _0x13f44d=JSON[a23_0x56ae('0x3a')](this[a23_0x56ae('0x1d')]);try{if(!fsExtra[a23_0x56ae('0x53')](this[a23_0x56ae('0x18')])){return!![];}else{const _0x992c77=fsExtra[a23_0x56ae('0x2a')](this[a23_0x56ae('0x18')])[a23_0x56ae('0x56')]();if(_0x992c77!=_0x13f44d){return!![];}}}catch(_0x58a5c2){console[a23_0x56ae('0x3f')](_0x58a5c2);}return![];}[a23_0x56ae('0x51')](){console['log']('this.currentFile:\x20'+this['currentFile']+a23_0x56ae('0x57')+this[a23_0x56ae('0x4c')][a23_0x56ae('0x50')]);if(this[a23_0x56ae('0x4d')]>=this[a23_0x56ae('0x4c')][a23_0x56ae('0x50')]){this[a23_0x56ae('0x58')]();return;}const _0x375c18=String(this['downloadFiles'][this['currentFile']]['path']);const _0x39d77d=this[a23_0x56ae('0x4c')][this[a23_0x56ae('0x4d')]]['media_type'];let _0x2b69d9=_0x375c18[a23_0x56ae('0x59')](_0x375c18['lastIndexOf']('/')+0x1);const _0x5a88da=_0x2b69d9[a23_0x56ae('0x5a')]('.')['slice'](0x0,-0x1)[a23_0x56ae('0x5b')]('.');let _0x4c3845=this[a23_0x56ae('0x30')]+_0x375c18;const _0x3c20b2=_0x4c3845[a23_0x56ae('0x5a')]('.')['slice'](0x0,-0x1)[a23_0x56ae('0x5b')]('.');if(_0x39d77d==a23_0x56ae('0x5c')){_0x2b69d9=_0x2b69d9+'.mp4';}else if(_0x39d77d=='image'){_0x2b69d9=_0x5a88da+a23_0x56ae('0x5d');_0x4c3845=_0x3c20b2+a23_0x56ae('0x5d');}console['log'](a23_0x56ae('0x5e'));console['log'](_0x375c18);console[a23_0x56ae('0x3f')](_0x39d77d);console['log'](_0x2b69d9);console[a23_0x56ae('0x3f')](_0x4c3845);console['log'](_0x5a88da);console['log'](_0x3c20b2);console['log'](a23_0x56ae('0x5e'));if(fsExtra['existsSync'](this[a23_0x56ae('0x14')]+_0x2b69d9)){this[a23_0x56ae('0x5f')](this[a23_0x56ae('0x14')]+_0x2b69d9)[a23_0x56ae('0x4')](function(_0x232830){if(_0x232830){this[a23_0x56ae('0x4d')]++;}else{this[a23_0x56ae('0x1b')]=!![];}this[a23_0x56ae('0x51')]();}['bind'](this));}else if(fsExtra[a23_0x56ae('0x53')](this[a23_0x56ae('0x17')]+_0x2b69d9)){this[a23_0x56ae('0x5f')](this[a23_0x56ae('0x17')]+_0x2b69d9)[a23_0x56ae('0x4')](function(_0x156662){if(_0x156662){fsExtra['copySync'](this[a23_0x56ae('0x17')]+_0x2b69d9,this[a23_0x56ae('0x14')]+_0x2b69d9);this['currentFile']++;}else{this[a23_0x56ae('0x1b')]=!![];}this['download']();}[a23_0x56ae('0x37')](this));}else{console['log']('Downloading:\x20'+_0x4c3845);this['playlistChanged']=!![];if(_0x39d77d==a23_0x56ae('0x5c')){this['downloadYouTube'](_0x375c18);}else{this[a23_0x56ae('0x60')](_0x4c3845,_0x2b69d9,_0x39d77d);}}}[a23_0x56ae('0x5f')](_0x261adb){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0x56ae('0x3f')](a23_0x56ae('0x61')+_0x261adb);const _0x26d7db=yield mediainfo(_0x261adb)['catch'](_0x1627a7=>{console['log'](_0x1627a7);fsExtra[a23_0x56ae('0x54')](_0x261adb);return![];});const _0x1f07cb=_0x26d7db[a23_0x56ae('0x62')]['track'][a23_0x56ae('0x50')]>0x1&&_0x26d7db[a23_0x56ae('0x62')][a23_0x56ae('0x63')][0x1][a23_0x56ae('0x64')]=='Video';if(!_0x1f07cb){fsExtra[a23_0x56ae('0x54')](_0x261adb);}console[a23_0x56ae('0x3f')]('mediainfo\x20check:'+_0x1f07cb);return _0x1f07cb;});}[a23_0x56ae('0x60')](_0x17e88c,_0x88dcbf,_0x409b29){const _0x401837=new Downloader();console['log'](_0x17e88c);console[a23_0x56ae('0x3f')](_0x88dcbf);console[a23_0x56ae('0x3f')](_0x409b29);const _0x281c7d=_0x401837['download'](_0x17e88c,this[a23_0x56ae('0x14')]+_0x88dcbf);urlExists(_0x17e88c,function(_0x4f1e60,_0x5211e3){if(_0x5211e3){if(this[a23_0x56ae('0x1c')][a23_0x56ae('0x65')](this[a23_0x56ae('0x4d')])){const _0x19c995=this[a23_0x56ae('0x1c')][a23_0x56ae('0x66')](this[a23_0x56ae('0x4d')]);if(_0x19c995>-0x1){this[a23_0x56ae('0x1c')][a23_0x56ae('0x67')](_0x19c995,0x1);}}console[a23_0x56ae('0x3f')](a23_0x56ae('0x68')+_0x17e88c);_0x281c7d[a23_0x56ae('0x69')]();}else{if(!this[a23_0x56ae('0x1c')][a23_0x56ae('0x65')](this[a23_0x56ae('0x4d')])){this[a23_0x56ae('0x1c')][a23_0x56ae('0x4e')](this[a23_0x56ae('0x4d')]);}console['log'](a23_0x56ae('0x6a')+_0x17e88c);this[a23_0x56ae('0x4d')]++;this[a23_0x56ae('0x51')]();}}['bind'](this));_0x281c7d['on'](a23_0x56ae('0x69'),function(_0x281c7d){console['log'](a23_0x56ae('0x6b')+_0x17e88c);});_0x281c7d['on'](a23_0x56ae('0x6c'),function(_0x281c7d){console[a23_0x56ae('0x3f')](a23_0x56ae('0x6d'));this['download']();}['bind'](this));_0x281c7d['on']('end',function(_0x281c7d){console[a23_0x56ae('0x3f')](a23_0x56ae('0x6e'));console[a23_0x56ae('0x3f')](a23_0x56ae('0x6f')+_0x88dcbf);console[a23_0x56ae('0x3f')](a23_0x56ae('0x70')+_0x409b29);this[a23_0x56ae('0x5f')](this['tempFolder']+_0x88dcbf)[a23_0x56ae('0x4')](function(_0xcbc8b2){if(_0xcbc8b2){this[a23_0x56ae('0x4d')]++;}this['download']();}[a23_0x56ae('0x37')](this));}['bind'](this));_0x281c7d['on'](a23_0x56ae('0x71'),function(_0x281c7d){console['log'](a23_0x56ae('0x71'));});_0x281c7d['on'](a23_0x56ae('0x72'),function(_0x281c7d){console[a23_0x56ae('0x3f')]('destroyed');});_0x281c7d['on'](a23_0x56ae('0x73'),function(_0x281c7d){console[a23_0x56ae('0x3f')](a23_0x56ae('0x73'));});}['downloadHTTPFile'](_0x109ccb,_0x3d91db,_0x2d5506,_0x361b21){console['log'](a23_0x56ae('0x74'));console[a23_0x56ae('0x3f')](_0x109ccb);const _0x30a4c7=!![];let _0xf410e5=0x0;const _0x332367='';console[a23_0x56ae('0x3f')](a23_0x56ae('0x75')+_0x109ccb+a23_0x56ae('0x76')+_0x3d91db);if(_0xf410e5){if(_0xf410e5>0x5){_0x361b21(a23_0x56ae('0x77'),_0x109ccb,_0x2d5506,null);return;}}else{_0xf410e5=0x0;}const _0x336dc3=this[a23_0x56ae('0x14')]+_0x3d91db;let _0x1f10ef;if(_0x361b21===undefined){console[a23_0x56ae('0x3f')](a23_0x56ae('0x78')+_0x109ccb+'\x20to\x20'+_0x336dc3);_0x361b21=function(_0xf4120f,_0x11da9c){console[a23_0x56ae('0x3f')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0xf4120f,_0x11da9c);};}http[a23_0x56ae('0x79')][a23_0x56ae('0x7a')]=0x64;const _0x8cea96={'host':url[a23_0x56ae('0x7b')](_0x109ccb)['host'],'port':0x50,'path':url['parse'](_0x109ccb)[a23_0x56ae('0x7c')],'agent':![]};const _0x2bbdb5=http['get'](_0x8cea96,function(_0x45108c){let _0x53a6a1=0x0;let _0x260f4b=0x0;function _0x8ebf02(){if(_0x53a6a1===undefined){console['log'](_0x3d91db+a23_0x56ae('0x7d')+_0x260f4b+'/'+'?');}const _0x41cf12=_0x260f4b/_0x53a6a1*0x64;console[a23_0x56ae('0x3f')](_0x3d91db+a23_0x56ae('0x7e')+_0x41cf12+'%\x09'+_0x260f4b+'/'+_0x53a6a1);}console[a23_0x56ae('0x3f')](_0x3d91db+'\x20'+_0x45108c[a23_0x56ae('0x7f')]);switch(_0x45108c[a23_0x56ae('0x7f')]){case 0xc8:_0x53a6a1=_0x45108c['headers'][a23_0x56ae('0x80')]||_0x332367;fs[a23_0x56ae('0x81')](_0x336dc3,function(_0x45c109,_0x16e5b9){if(!_0x45c109){console['log'](a23_0x56ae('0x82')+_0x336dc3);if(_0x16e5b9[a23_0x56ae('0x83')]==_0x53a6a1){console['log'](a23_0x56ae('0x84')+_0x53a6a1+')');console['log'](a23_0x56ae('0x85'));}else{console[a23_0x56ae('0x3f')](a23_0x56ae('0x86')+_0x16e5b9[a23_0x56ae('0x83')]+')\x20vs\x20New('+_0x53a6a1+')');}}_0x1f10ef=fs['createWriteStream'](_0x336dc3);_0x45108c[a23_0x56ae('0x87')](_0x1f10ef);_0x45108c['on'](a23_0x56ae('0x88'),function(_0x94dcf5){_0x260f4b+=_0x94dcf5['length'];_0x8ebf02();});_0x2bbdb5['on'](a23_0x56ae('0x6c'),function(_0x45c109){console['log']('err:\x20');console[a23_0x56ae('0x3f')](_0x45c109);});_0x1f10ef['on']('finish',function(){console['log']('Downloaded\x20'+_0x109ccb+a23_0x56ae('0x76')+_0x3d91db);_0x361b21(null,_0x3d91db,_0x2d5506,_0x3d91db);}[a23_0x56ae('0x37')](this));});break;case 0x12e:const _0x9044fe=_0x45108c[a23_0x56ae('0x89')][a23_0x56ae('0x8a')];console[a23_0x56ae('0x3f')]('Redirect\x20'+_0x109ccb+a23_0x56ae('0x76')+_0x9044fe);if(_0xf410e5<0x5){this['downloadHTTPFile'](_0x9044fe,_0x3d91db,_0x361b21,_0xf410e5++);}else{console[a23_0x56ae('0x6c')](a23_0x56ae('0x8b')+_0x109ccb+'.');_0x361b21(a23_0x56ae('0x8c'),null,null,null);}return;case 0x194:console[a23_0x56ae('0x3f')]('File\x20Not\x20Found\x20'+_0x109ccb);default:console[a23_0x56ae('0x3f')](a23_0x56ae('0x8d')+_0x109ccb+a23_0x56ae('0x8e')+_0x45108c['statusCode']);_0x2bbdb5[a23_0x56ae('0x8f')]();_0x361b21(_0x45108c[a23_0x56ae('0x7f')],null,null,null);return;}})['on'](a23_0x56ae('0x6c'),function(_0x22063c){console[a23_0x56ae('0x3f')](a23_0x56ae('0x90')+_0x109ccb+'\x20'+_0x22063c[a23_0x56ae('0x91')]);_0x361b21(_0x22063c,null,null,null);});}[a23_0x56ae('0x92')](_0x509efe,_0x2645d6,_0x3325c5,_0x589ff3){console[a23_0x56ae('0x3f')](a23_0x56ae('0x92'));console[a23_0x56ae('0x3f')](_0x509efe);console['log'](_0x2645d6);console[a23_0x56ae('0x3f')](_0x3325c5);console['log'](_0x589ff3);if(_0x3325c5==a23_0x56ae('0x93')){const _0x2b5148=this[a23_0x56ae('0x4c')][this[a23_0x56ae('0x4d')]][a23_0x56ae('0x94')]!=null?this[a23_0x56ae('0x4c')][this[a23_0x56ae('0x4d')]][a23_0x56ae('0x94')]:0x1e;this['createImageVideo'](_0x589ff3,_0x2b5148);}else if(_0x3325c5==a23_0x56ae('0x95')){if(_0x509efe==null&&_0x2645d6!=''){this[a23_0x56ae('0x4d')]++;}this[a23_0x56ae('0x51')]();}console[a23_0x56ae('0x3f')](this[a23_0x56ae('0x4d')]);}[a23_0x56ae('0x96')](_0x6803d6,_0x33f0c9,_0x1808ba){progress(request(_0x6803d6),{})['on'](a23_0x56ae('0x97'),function(_0x151956){console[a23_0x56ae('0x3f')](_0x151956);})['on'](a23_0x56ae('0x6c'),function(_0x4989f9){console[a23_0x56ae('0x3f')](a23_0x56ae('0x98'));this[a23_0x56ae('0x51')]();})['on'](a23_0x56ae('0x6e'),function(){console[a23_0x56ae('0x3f')]('Downloaded:\x20'+_0x33f0c9);console[a23_0x56ae('0x3f')](a23_0x56ae('0x70')+_0x1808ba);if(_0x1808ba=='image'){const _0x23b447=this['downloadFiles'][this[a23_0x56ae('0x4d')]][a23_0x56ae('0x94')]!=null?this[a23_0x56ae('0x4c')][this[a23_0x56ae('0x4d')]]['duration']:0x1e;this[a23_0x56ae('0x99')](_0x33f0c9,_0x23b447);}else if(_0x1808ba=='video'){this[a23_0x56ae('0x4d')]++;this[a23_0x56ae('0x51')]();}}['bind'](this))[a23_0x56ae('0x87')](fs[a23_0x56ae('0x9a')](this[a23_0x56ae('0x14')]+_0x33f0c9));}['createImageVideo'](_0x4c788f,_0x1b82b7=0x1e){const _0x6ba2be=this[a23_0x56ae('0x14')]+_0x4c788f;console[a23_0x56ae('0x3f')](_0x6ba2be);console[a23_0x56ae('0x3f')](_0x4c788f);const _0x2450a8=_0x4c788f[a23_0x56ae('0x5a')]('.')[a23_0x56ae('0x9b')](0x0,-0x1)[a23_0x56ae('0x5b')]('.');const _0x586510=a23_0x56ae('0x9c');const _0x517081=['-y','-r',a23_0x56ae('0x9d'),a23_0x56ae('0x9e'),'1',a23_0x56ae('0x9f'),a23_0x56ae('0xa0'),'-i',_0x6ba2be,'-t',String(_0x1b82b7),a23_0x56ae('0xa1'),'libx264',a23_0x56ae('0xa2'),a23_0x56ae('0xa3'),'-r','25',a23_0x56ae('0xa4'),a23_0x56ae('0xa5'),this[a23_0x56ae('0x14')]+_0x2450a8+'.mp4'];const _0x4f074c=spawn(_0x586510,_0x517081);_0x4f074c[a23_0x56ae('0xa6')]['on']('data',function(_0x25eae0){console[a23_0x56ae('0x3f')](a23_0x56ae('0xa7')+_0x6ba2be);});_0x4f074c[a23_0x56ae('0xa8')]['on'](a23_0x56ae('0x88'),function(_0x213e5d){console['log']('stderr:\x20'+_0x213e5d);}[a23_0x56ae('0x37')](this));_0x4f074c['on']('close',function(){console[a23_0x56ae('0x3f')]('finished\x20mp4\x20convert');this[a23_0x56ae('0x4d')]++;this['download']();}['bind'](this));}[a23_0x56ae('0xa9')](_0xb8db59){const _0x5e9b0b=this[a23_0x56ae('0x14')]+'/'+_0xb8db59+a23_0x56ae('0x5d');const _0x15c6b9=youtubedl(a23_0x56ae('0xaa')+_0xb8db59,[a23_0x56ae('0xab')],{'cwd':__dirname});_0x15c6b9['on']('info',function(_0x5505f4){console[a23_0x56ae('0x3f')](a23_0x56ae('0xac'));console[a23_0x56ae('0x3f')](a23_0x56ae('0xad')+_0x5505f4[a23_0x56ae('0xae')]);console['log'](a23_0x56ae('0xaf')+_0x5505f4[a23_0x56ae('0x83')]);});_0x15c6b9['on']('complete',function complete(_0x3c313d){'use strict';console[a23_0x56ae('0x3f')](a23_0x56ae('0xad')+_0x3c313d[a23_0x56ae('0xae')]+a23_0x56ae('0xb0'));});_0x15c6b9['on'](a23_0x56ae('0x6e'),function(){console[a23_0x56ae('0x3f')](a23_0x56ae('0xb1'));this[a23_0x56ae('0x5f')](_0x5e9b0b)[a23_0x56ae('0x4')](function(_0x4bdebb){if(_0x4bdebb){this[a23_0x56ae('0x4d')]++;}this[a23_0x56ae('0x51')]();}[a23_0x56ae('0x37')](this));}[a23_0x56ae('0x37')](this));_0x15c6b9[a23_0x56ae('0x87')](fs['createWriteStream'](_0x5e9b0b));}['finishProcess'](){console[a23_0x56ae('0x3f')](a23_0x56ae('0xb2'));if(this[a23_0x56ae('0x1b')]){if(this[a23_0x56ae('0x1c')][a23_0x56ae('0x50')]==0x0){fs['writeFileSync'](this[a23_0x56ae('0x18')],JSON[a23_0x56ae('0x3a')](this[a23_0x56ae('0x1d')]));let _0x52b661=a23_0x56ae('0xb3')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x2144ca in this['downloadFiles']){const _0x25b745=this[a23_0x56ae('0x4c')][_0x2144ca][a23_0x56ae('0xb4')];const _0x5c500c=this[a23_0x56ae('0x4c')][_0x2144ca]['media_type'];const _0x4383da=_0x25b745[a23_0x56ae('0x59')](_0x25b745[a23_0x56ae('0xb5')]('/')+0x1);let _0x6c47cd=_0x4383da[a23_0x56ae('0x5a')]('.')[a23_0x56ae('0x9b')](0x0,-0x1)[a23_0x56ae('0x5b')]('.');if(_0x5c500c==a23_0x56ae('0x5c')){_0x6c47cd=_0x25b745;}_0x52b661+=a23_0x56ae('0xb6')+_0x6c47cd+a23_0x56ae('0x5d')+'\x0d\x0a';}fsExtra[a23_0x56ae('0x4b')](this[a23_0x56ae('0x17')]);fsExtra[a23_0x56ae('0xb7')](this[a23_0x56ae('0x14')],this[a23_0x56ae('0x17')]);fsExtra[a23_0x56ae('0xb8')](this['m3uFile'],_0x52b661);fsExtra['emptyDirSync'](this[a23_0x56ae('0x14')]);console['log'](a23_0x56ae('0xb9'));this[a23_0x56ae('0xba')]();}else{console['log'](a23_0x56ae('0xbb'));this[a23_0x56ae('0x4d')]=0x0;setTimeout(function(){this[a23_0x56ae('0x51')]();}[a23_0x56ae('0x37')](this),0x1388);}}else{console['log'](a23_0x56ae('0xbc'));}}[a23_0x56ae('0xba')](){this[a23_0x56ae('0xbd')](a23_0x56ae('0xbe'),{'playlistid':0x1},function(_0x5d0e1f){console[a23_0x56ae('0x3f')](a23_0x56ae('0xbf'));console[a23_0x56ae('0x3f')](_0x5d0e1f);this['jsonrpcClient'](a23_0x56ae('0xc0'),{'item':{'file':a23_0x56ae('0xc1')},'playlistid':0x1},function(_0x5d0e1f){console['log'](a23_0x56ae('0xc2'));console[a23_0x56ae('0x3f')](_0x5d0e1f);this[a23_0x56ae('0xbd')](a23_0x56ae('0xc3'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x5d0e1f){console['log'](a23_0x56ae('0xc4'));console[a23_0x56ae('0x3f')](_0x5d0e1f);if(this['forceReload']){this[a23_0x56ae('0x24')]=![];this[a23_0x56ae('0xc5')](a23_0x56ae('0xc6'));}}['bind'](this));}['bind'](this));}['bind'](this));}[a23_0x56ae('0xc7')](){console[a23_0x56ae('0x3f')]('Rebooting');this[a23_0x56ae('0xc5')](a23_0x56ae('0xc8'));}[a23_0x56ae('0xc9')](){const _0x54ce11=format(this[a23_0x56ae('0x32')],this[a23_0x56ae('0x2b')]);console[a23_0x56ae('0x3f')](_0x54ce11);request({'url':_0x54ce11,'json':!![]},function(_0x30b3b8,_0x46956b,_0x24e584){if(_0x24e584[a23_0x56ae('0x50')]>0x0){const _0x328ec5=_0x24e584[0x0];const _0x3b5bda=_0x328ec5['rss'];const _0x43c397=_0x328ec5['header_active']==0x1;this[a23_0x56ae('0xca')](_0x3b5bda);this[a23_0x56ae('0xcb')](_0x43c397);}console[a23_0x56ae('0x3f')](_0x24e584);}[a23_0x56ae('0x37')](this));}[a23_0x56ae('0xca')](_0x344cd4){const _0x53d9fc=_0x344cd4!=null&&_0x344cd4!='';const _0x1a0314=a23_0x56ae('0xcc');const _0xe25eb5=fsExtra[a23_0x56ae('0x2a')](_0x1a0314);console['log'](a23_0x56ae('0xcd')+_0xe25eb5);const _0x3c9135=require(a23_0x56ae('0xce'));const _0x1c9539=_0x3c9135[a23_0x56ae('0xcf')];_0x1c9539(_0xe25eb5,function(_0x2be526,_0x238c24){console[a23_0x56ae('0x3f')](a23_0x56ae('0xd0'),_0x2be526);console[a23_0x56ae('0x3f')]('result:\x20%j',_0x238c24);if(!_0x344cd4||_0x344cd4==null||_0x344cd4==''){_0x344cd4=a23_0x56ae('0xd1');}_0x238c24[a23_0x56ae('0xd2')][a23_0x56ae('0xd3')][0x0][a23_0x56ae('0xd4')][0x0]['_']=_0x344cd4;const _0xea8bd1=new _0x3c9135[(a23_0x56ae('0xd5'))]();const _0x2895c5=_0xea8bd1[a23_0x56ae('0xd6')](_0x238c24);console['log'](a23_0x56ae('0xd7'),_0x2895c5);fsExtra[a23_0x56ae('0xb8')](_0x1a0314,_0x2895c5);});this[a23_0x56ae('0xc5')]('RefreshRSS()');this[a23_0x56ae('0xbd')](a23_0x56ae('0xd8'),{'setting':a23_0x56ae('0xd9'),'value':_0x53d9fc},function(_0x97d5b5){console[a23_0x56ae('0x3f')](a23_0x56ae('0xda'));console[a23_0x56ae('0x3f')](_0x97d5b5);}[a23_0x56ae('0x37')](this));}[a23_0x56ae('0xcb')](_0x451010){this['jsonrpcClient'](a23_0x56ae('0xd8'),{'setting':a23_0x56ae('0xdb'),'value':_0x451010},function(_0x15a9ed){console[a23_0x56ae('0x3f')](a23_0x56ae('0xdc'));console[a23_0x56ae('0x3f')](_0x15a9ed);}['bind'](this));}[a23_0x56ae('0xc5')](_0x4f854b){exec('kodi-send\x20--action=\x22'+_0x4f854b+'\x22',function(_0x573df6){console[a23_0x56ae('0x3f')](_0x573df6);});}[a23_0x56ae('0xbd')](_0x426cb4,_0x2a07d0,_0x4d99a8){const _0x4156a5={'jsonrpc':a23_0x56ae('0xdd'),'method':_0x426cb4,'params':_0x2a07d0,'id':0x1};this[a23_0x56ae('0x25')][a23_0x56ae('0x3e')](this[a23_0x56ae('0x1e')]+'/jsonrpc',_0x4156a5,![],{'user':this['kodiUser'],'pass':this[a23_0x56ae('0x22')]})[a23_0x56ae('0x4')](function(_0x2a293f){_0x4d99a8(_0x2a293f);})['catch'](function(_0x319752){});}}exports[a23_0x56ae('0xde')]=SyncPlaylistsService;