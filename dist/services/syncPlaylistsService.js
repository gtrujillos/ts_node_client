var a23_0x8ec6=['Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','pathname','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','video','downloadRequestFile','progress','Error\x20downloading\x20file','image','createImageVideo','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','scale=1920:1080','stdout','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','substring','/home/osmc/luloclient/media/files/','Refreshing..','Playlist\x20incomplete,\x20retry.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Opened','kodiCommandClient','RestartApp()','reboot','Rebooting','Reboot()','rss','setRss','enableClock','turnOnTV','turnOffTV','xmlContent:\x20','xml2js','parseString','result:\x20%j','rssfeeds','set','feed','Builder','RefreshRSS()','Settings.SetSettingValue','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','/jsonrpc','next','throw','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','url','http','fs-extra','request','request-progress','child_process','spawn','exec','is-image','string-template','youtube-dl','uuid/v4','config.json','url-exists','node-kodi','mediaFolder','media/','tempFolder','temp/','filesFolder','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','PlayerService','init','config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','checkFolders','loadMediaList','updateSettings','getStatus','bind','deviceUuid','writeFileSync','stringify','playlist','sendDeviceRegistration','networkInterfaces','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','player','item','label','reportStatus','playingItem:\x20','post','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','hasPlayListChanged','downloadFiles','push','length','download','reloadMediaList','existsSync','emptyDirSync','removeSync','playListFile','toString','\x20of\x20','finishProcess','media_type','lastIndexOf','split','join','slice','youtube_single','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','indexOf','start','includes','Error:\x20','error','end'];(function(_0x18e57e,_0x104ecf){var _0x148da1=function(_0x2a4553){while(--_0x2a4553){_0x18e57e['push'](_0x18e57e['shift']());}};_0x148da1(++_0x104ecf);}(a23_0x8ec6,0x6e));var a23_0xdcd7=function(_0x14655c,_0xf4472f){_0x14655c=_0x14655c-0x0;var _0x4c1a26=a23_0x8ec6[_0x14655c];return _0x4c1a26;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x28cf3c,_0x379256,_0xe5e9ae,_0x192fc4){function _0x1e7309(_0x28fd21){return _0x28fd21 instanceof _0xe5e9ae?_0x28fd21:new _0xe5e9ae(function(_0x317d09){_0x317d09(_0x28fd21);});}return new(_0xe5e9ae||(_0xe5e9ae=Promise))(function(_0x277da9,_0x377ccb){function _0x1aac3b(_0x44fffe){try{_0x571335(_0x192fc4[a23_0xdcd7('0x0')](_0x44fffe));}catch(_0x572a39){_0x377ccb(_0x572a39);}}function _0x5bad57(_0x43246d){try{_0x571335(_0x192fc4[a23_0xdcd7('0x1')](_0x43246d));}catch(_0x44d1de){_0x377ccb(_0x44d1de);}}function _0x571335(_0x3c03b2){_0x3c03b2['done']?_0x277da9(_0x3c03b2[a23_0xdcd7('0x2')]):_0x1e7309(_0x3c03b2['value'])[a23_0xdcd7('0x3')](_0x1aac3b,_0x5bad57);}_0x571335((_0x192fc4=_0x192fc4[a23_0xdcd7('0x4')](_0x28cf3c,_0x379256||[]))[a23_0xdcd7('0x0')]());});};Object[a23_0xdcd7('0x5')](exports,a23_0xdcd7('0x6'),{'value':!![]});const HttpClientService_1=require(a23_0xdcd7('0x7'));const playerService_1=require(a23_0xdcd7('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a23_0xdcd7('0x9'));const http=require(a23_0xdcd7('0xa'));const fsExtra=require(a23_0xdcd7('0xb'));const request=require(a23_0xdcd7('0xc'));const progress=require(a23_0xdcd7('0xd'));const spawn=require(a23_0xdcd7('0xe'))[a23_0xdcd7('0xf')];const exec=require('child_process')[a23_0xdcd7('0x10')];const isImage=require(a23_0xdcd7('0x11'));const format=require(a23_0xdcd7('0x12'));const os=require('os');const youtubedl=require(a23_0xdcd7('0x13'));const uuidv4=require(a23_0xdcd7('0x14'));const configFile=a23_0xdcd7('0x15');const contextFile='context.json';const urlExists=require(a23_0xdcd7('0x16'));const kodi_rpc=require(a23_0xdcd7('0x17'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a23_0xdcd7('0x18')]=a23_0xdcd7('0x19');this[a23_0xdcd7('0x1a')]=this[a23_0xdcd7('0x18')]+a23_0xdcd7('0x1b');this[a23_0xdcd7('0x1c')]=this['mediaFolder']+'files/';this['playListFile']=this[a23_0xdcd7('0x18')]+a23_0xdcd7('0x1d');this[a23_0xdcd7('0x1e')]=this[a23_0xdcd7('0x1c')]+a23_0xdcd7('0x1f');this[a23_0xdcd7('0x20')]=0x0;this[a23_0xdcd7('0x21')]=![];this['downloadFiles']=[];this[a23_0xdcd7('0x22')]=[];this[a23_0xdcd7('0x23')]={};this[a23_0xdcd7('0x24')]=a23_0xdcd7('0x25');this[a23_0xdcd7('0x26')]=a23_0xdcd7('0x27');this[a23_0xdcd7('0x28')]=a23_0xdcd7('0x29');this[a23_0xdcd7('0x2a')]=![];this[a23_0xdcd7('0x2b')]=new HttpClientService_1[(a23_0xdcd7('0x2c'))]();this['playerService']=new playerService_1[(a23_0xdcd7('0x2d'))]();}[a23_0xdcd7('0x2e')](){this[a23_0xdcd7('0x2f')]=JSON[a23_0xdcd7('0x30')](fs[a23_0xdcd7('0x31')](configFile));this[a23_0xdcd7('0x32')]=JSON['parse'](fs[a23_0xdcd7('0x31')](contextFile));this[a23_0xdcd7('0x33')]=this['config']['playerId'];this[a23_0xdcd7('0x34')]=process[a23_0xdcd7('0x35')][a23_0xdcd7('0x36')]+a23_0xdcd7('0x37');this[a23_0xdcd7('0x38')]=this['baseURL']+a23_0xdcd7('0x39');this[a23_0xdcd7('0x3a')]=this[a23_0xdcd7('0x34')]+a23_0xdcd7('0x3b');this[a23_0xdcd7('0x3c')]=new kodi_rpc({'url':this[a23_0xdcd7('0x24')],'user':this[a23_0xdcd7('0x26')],'password':this[a23_0xdcd7('0x28')]});this['checkDependencies']();this['registerClient']();this[a23_0xdcd7('0x3d')]();this[a23_0xdcd7('0x3e')]();this[a23_0xdcd7('0x3f')]();setInterval(function(){this[a23_0xdcd7('0x40')]();}['bind'](this),0x2710);setInterval(function(){this['registerClient']();}[a23_0xdcd7('0x41')](this),0x493e0);}['checkDependencies'](){}['registerClient'](){const _0x141e78=this[a23_0xdcd7('0x2f')]['deviceUuid'];if(!_0x141e78||_0x141e78==''){this[a23_0xdcd7('0x2f')][a23_0xdcd7('0x42')]=uuidv4();this[a23_0xdcd7('0x2f')]={'deviceUuid':this[a23_0xdcd7('0x2f')]['deviceUuid'],'playerId':this[a23_0xdcd7('0x2f')][a23_0xdcd7('0x33')]};fs[a23_0xdcd7('0x43')](configFile,JSON[a23_0xdcd7('0x44')](this['config']));}if(this[a23_0xdcd7('0x3c')]&&this[a23_0xdcd7('0x3c')][a23_0xdcd7('0x45')]){this[a23_0xdcd7('0x3c')]['playlist']['getItems'](0x1)['then'](function(_0x56dd6a){this['currentPlaylist']=JSON[a23_0xdcd7('0x44')](_0x56dd6a);this[a23_0xdcd7('0x46')]();}[a23_0xdcd7('0x41')](this));}else{this['sendDeviceRegistration']();}}[a23_0xdcd7('0x46')](){const _0x731414={'player_id':this[a23_0xdcd7('0x33')],'device_uuid':this[a23_0xdcd7('0x2f')]['deviceUuid'],'network_info':JSON[a23_0xdcd7('0x44')](os[a23_0xdcd7('0x47')]()),'firmware_info':JSON[a23_0xdcd7('0x44')](this[a23_0xdcd7('0x32')]),'playlist':this['currentPlaylist'],'playing_item':'','status':0x0};this[a23_0xdcd7('0x2b')]['post'](a23_0xdcd7('0x48'),_0x731414,![])['then'](function(_0x51a6e6){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x4a')+Date());})[a23_0xdcd7('0x4b')](function(_0x79c65c){});console['log'](_0x731414);}['getStatus'](){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x40'));this['kodi'][a23_0xdcd7('0x4c')]['getCurrentlyPlayingVideo']()[a23_0xdcd7('0x3')](function(_0x47c6af){const _0x1ada8b=_0x47c6af[a23_0xdcd7('0x4d')][a23_0xdcd7('0x4e')];this[a23_0xdcd7('0x4f')](_0x1ada8b);}[a23_0xdcd7('0x41')](this))[a23_0xdcd7('0x4b')](function(_0x45e77b){console[a23_0xdcd7('0x49')](_0x45e77b);this['reportStatus'](_0x45e77b);}[a23_0xdcd7('0x41')](this));}['reportStatus'](_0x57186c){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x50')+_0x57186c);const _0x52cc41={'player_id':this[a23_0xdcd7('0x33')],'device_uuid':this['config'][a23_0xdcd7('0x42')],'status':_0x57186c!=''&&_0x57186c!=null?0x1:0x0,'playing_item':_0x57186c};this[a23_0xdcd7('0x2b')][a23_0xdcd7('0x51')](a23_0xdcd7('0x52'),_0x52cc41,![])['then'](function(_0x4d19e7){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x53')+Date());})[a23_0xdcd7('0x4b')](function(_0x3423e2){});}[a23_0xdcd7('0x3d')](){fsExtra['ensureDir'](this[a23_0xdcd7('0x18')],_0x2ffdfc=>{});fsExtra['ensureDir'](this[a23_0xdcd7('0x1a')],_0x3b60db=>{});fsExtra[a23_0xdcd7('0x54')](this[a23_0xdcd7('0x1c')],_0x1c516e=>{});}[a23_0xdcd7('0x3e')](){const _0x258c76=format(this[a23_0xdcd7('0x38')],this[a23_0xdcd7('0x33')]);console['log'](_0x258c76);request({'url':_0x258c76,'json':!![]},function(_0x193aaf,_0x4221ed,_0x243661){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x55'));this[a23_0xdcd7('0x23')]=_0x243661;this[a23_0xdcd7('0x21')]=this[a23_0xdcd7('0x56')]();fsExtra['emptyDirSync'](this['tempFolder']);this[a23_0xdcd7('0x57')]=[];this[a23_0xdcd7('0x22')]=[];this[a23_0xdcd7('0x20')]=0x0;for(const _0x31edd4 in _0x243661){this[a23_0xdcd7('0x57')][a23_0xdcd7('0x58')](_0x243661[_0x31edd4]);}console[a23_0xdcd7('0x49')]('Total:\x20'+this['downloadFiles'][a23_0xdcd7('0x59')]);if(this[a23_0xdcd7('0x57')]['length']>0x0){this[a23_0xdcd7('0x5a')]();}}[a23_0xdcd7('0x41')](this));}[a23_0xdcd7('0x5b')](){this[a23_0xdcd7('0x2a')]=!![];if(fsExtra[a23_0xdcd7('0x5c')](this[a23_0xdcd7('0x1a')])){fsExtra[a23_0xdcd7('0x5d')](this['tempFolder']);}if(fsExtra[a23_0xdcd7('0x5c')](this[a23_0xdcd7('0x1c')])){fsExtra[a23_0xdcd7('0x5d')](this['filesFolder']);}if(!fsExtra[a23_0xdcd7('0x5c')](this['playListFile'])){fsExtra[a23_0xdcd7('0x5e')](this['playListFile']);}if(!fsExtra['existsSync'](this['m3uFile'])){fsExtra[a23_0xdcd7('0x5e')](this[a23_0xdcd7('0x1e')]);}this[a23_0xdcd7('0x3e')]();}['hasPlayListChanged'](){const _0x27bc13=JSON['stringify'](this[a23_0xdcd7('0x23')]);try{if(!fsExtra[a23_0xdcd7('0x5c')](this[a23_0xdcd7('0x5f')])){return!![];}else{const _0x18602d=fsExtra[a23_0xdcd7('0x31')](this[a23_0xdcd7('0x5f')])[a23_0xdcd7('0x60')]();if(_0x18602d!=_0x27bc13){return!![];}}}catch(_0x3be8c6){console[a23_0xdcd7('0x49')](_0x3be8c6);}return![];}[a23_0xdcd7('0x5a')](){console[a23_0xdcd7('0x49')]('this.currentFile:\x20'+this[a23_0xdcd7('0x20')]+a23_0xdcd7('0x61')+this[a23_0xdcd7('0x57')][a23_0xdcd7('0x59')]);if(this[a23_0xdcd7('0x20')]>=this['downloadFiles'][a23_0xdcd7('0x59')]){this[a23_0xdcd7('0x62')]();return;}const _0x312c96=String(this['downloadFiles'][this['currentFile']]['path']);const _0x4bcb4e=this[a23_0xdcd7('0x57')][this[a23_0xdcd7('0x20')]][a23_0xdcd7('0x63')];let _0x49a5bc=_0x312c96['substring'](_0x312c96[a23_0xdcd7('0x64')]('/')+0x1);const _0x2cbf30=_0x49a5bc[a23_0xdcd7('0x65')]('.')['slice'](0x0,-0x1)[a23_0xdcd7('0x66')]('.');let _0x57880d=this[a23_0xdcd7('0x34')]+_0x312c96;const _0x40077c=_0x57880d[a23_0xdcd7('0x65')]('.')[a23_0xdcd7('0x67')](0x0,-0x1)['join']('.');if(_0x4bcb4e==a23_0xdcd7('0x68')){_0x49a5bc=_0x49a5bc+'.mp4';}else if(_0x4bcb4e=='image'){_0x49a5bc=_0x2cbf30+a23_0xdcd7('0x69');_0x57880d=_0x40077c+a23_0xdcd7('0x69');}console[a23_0xdcd7('0x49')](a23_0xdcd7('0x6a'));console['log'](_0x312c96);console[a23_0xdcd7('0x49')](_0x4bcb4e);console[a23_0xdcd7('0x49')](_0x49a5bc);console[a23_0xdcd7('0x49')](_0x57880d);console[a23_0xdcd7('0x49')](_0x2cbf30);console[a23_0xdcd7('0x49')](_0x40077c);console[a23_0xdcd7('0x49')](a23_0xdcd7('0x6a'));if(fsExtra[a23_0xdcd7('0x5c')](this[a23_0xdcd7('0x1a')]+_0x49a5bc)){this[a23_0xdcd7('0x6b')](this[a23_0xdcd7('0x1a')]+_0x49a5bc)[a23_0xdcd7('0x3')](function(_0xd201c2){if(_0xd201c2){this[a23_0xdcd7('0x20')]++;}else{this[a23_0xdcd7('0x21')]=!![];}this[a23_0xdcd7('0x5a')]();}['bind'](this));}else if(fsExtra[a23_0xdcd7('0x5c')](this[a23_0xdcd7('0x1c')]+_0x49a5bc)){this[a23_0xdcd7('0x6b')](this[a23_0xdcd7('0x1c')]+_0x49a5bc)[a23_0xdcd7('0x3')](function(_0x139144){if(_0x139144){fsExtra[a23_0xdcd7('0x6c')](this[a23_0xdcd7('0x1c')]+_0x49a5bc,this[a23_0xdcd7('0x1a')]+_0x49a5bc);this[a23_0xdcd7('0x20')]++;}else{this[a23_0xdcd7('0x21')]=!![];}this[a23_0xdcd7('0x5a')]();}[a23_0xdcd7('0x41')](this));}else{console[a23_0xdcd7('0x49')](a23_0xdcd7('0x6d')+_0x57880d);this[a23_0xdcd7('0x21')]=!![];if(_0x4bcb4e=='youtube_single'){this[a23_0xdcd7('0x6e')](_0x312c96);}else{this[a23_0xdcd7('0x6f')](_0x57880d,_0x49a5bc,_0x4bcb4e);}}}[a23_0xdcd7('0x6b')](_0x3b0f3b){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x70')+_0x3b0f3b);const _0x4f090c=yield mediainfo(_0x3b0f3b)['catch'](_0x509fe3=>{console[a23_0xdcd7('0x49')](_0x509fe3);fsExtra[a23_0xdcd7('0x5e')](_0x3b0f3b);return![];});const _0x55251d=_0x4f090c[a23_0xdcd7('0x71')][a23_0xdcd7('0x72')][a23_0xdcd7('0x59')]>0x1&&_0x4f090c['media'][a23_0xdcd7('0x72')][0x1][a23_0xdcd7('0x73')]==a23_0xdcd7('0x74');if(!_0x55251d){fsExtra[a23_0xdcd7('0x5e')](_0x3b0f3b);}console[a23_0xdcd7('0x49')]('mediainfo\x20check:'+_0x55251d);return _0x55251d;});}['downloader'](_0x14b4cc,_0x231f12,_0x47d420){const _0x1be579=new Downloader();console[a23_0xdcd7('0x49')](_0x14b4cc);console[a23_0xdcd7('0x49')](_0x231f12);console[a23_0xdcd7('0x49')](_0x47d420);const _0x24b1df=_0x1be579[a23_0xdcd7('0x5a')](_0x14b4cc,this[a23_0xdcd7('0x1a')]+_0x231f12);urlExists(_0x14b4cc,function(_0x4bdaae,_0x901463){if(_0x901463){if(this['failDownloadFiles']['includes'](this[a23_0xdcd7('0x20')])){const _0x30bed2=this[a23_0xdcd7('0x22')][a23_0xdcd7('0x75')](this[a23_0xdcd7('0x20')]);if(_0x30bed2>-0x1){this[a23_0xdcd7('0x22')]['splice'](_0x30bed2,0x1);}}console[a23_0xdcd7('0x49')]('downloading:\x20'+_0x14b4cc);_0x24b1df[a23_0xdcd7('0x76')]();}else{if(!this[a23_0xdcd7('0x22')][a23_0xdcd7('0x77')](this[a23_0xdcd7('0x20')])){this[a23_0xdcd7('0x22')]['push'](this['currentFile']);}console[a23_0xdcd7('0x49')](a23_0xdcd7('0x78')+_0x14b4cc);this[a23_0xdcd7('0x20')]++;this['download']();}}[a23_0xdcd7('0x41')](this));_0x24b1df['on'](a23_0xdcd7('0x76'),function(_0x24b1df){console[a23_0xdcd7('0x49')]('start:\x20'+_0x14b4cc);});_0x24b1df['on'](a23_0xdcd7('0x79'),function(_0x24b1df){console[a23_0xdcd7('0x49')]('error:\x20');this[a23_0xdcd7('0x5a')]();}['bind'](this));_0x24b1df['on'](a23_0xdcd7('0x7a'),function(_0x24b1df){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x7a'));console[a23_0xdcd7('0x49')](a23_0xdcd7('0x7b')+_0x231f12);console[a23_0xdcd7('0x49')]('mediaType:\x20'+_0x47d420);this['checkVideo'](this[a23_0xdcd7('0x1a')]+_0x231f12)[a23_0xdcd7('0x3')](function(_0xe2759d){if(_0xe2759d){this['currentFile']++;}this[a23_0xdcd7('0x5a')]();}[a23_0xdcd7('0x41')](this));}[a23_0xdcd7('0x41')](this));_0x24b1df['on'](a23_0xdcd7('0x7c'),function(_0x24b1df){console[a23_0xdcd7('0x49')]('stopped');});_0x24b1df['on']('destroyed',function(_0x24b1df){console['log'](a23_0xdcd7('0x7d'));});_0x24b1df['on'](a23_0xdcd7('0x7e'),function(_0x24b1df){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x7e'));});}[a23_0xdcd7('0x7f')](_0x362d16,_0x50da8f,_0x5482b9,_0x3d1069){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x7f'));console['log'](_0x362d16);const _0x481230=!![];let _0x59a16f=0x0;const _0x5519cc='';console[a23_0xdcd7('0x49')](a23_0xdcd7('0x80')+_0x362d16+a23_0xdcd7('0x81')+_0x50da8f);if(_0x59a16f){if(_0x59a16f>0x5){_0x3d1069(a23_0xdcd7('0x82'),_0x362d16,_0x5482b9,null);return;}}else{_0x59a16f=0x0;}const _0x4e9be8=this[a23_0xdcd7('0x1a')]+_0x50da8f;let _0x52e2c7;if(_0x3d1069===undefined){console['log'](a23_0xdcd7('0x83')+_0x362d16+a23_0xdcd7('0x81')+_0x4e9be8);_0x3d1069=function(_0x44fe6a,_0x527a99){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x84'),_0x44fe6a,_0x527a99);};}http['globalAgent'][a23_0xdcd7('0x85')]=0x64;const _0x5d97d4={'host':url[a23_0xdcd7('0x30')](_0x362d16)[a23_0xdcd7('0x86')],'port':0x50,'path':url[a23_0xdcd7('0x30')](_0x362d16)[a23_0xdcd7('0x87')],'agent':![]};const _0x21484a=http['get'](_0x5d97d4,function(_0x337ebd){let _0x50d51d=0x0;let _0x277b58=0x0;function _0x2c72d8(){if(_0x50d51d===undefined){console[a23_0xdcd7('0x49')](_0x50da8f+'\x20Progress:\x20unknown\x09'+_0x277b58+'/'+'?');}const _0x5b687b=_0x277b58/_0x50d51d*0x64;console[a23_0xdcd7('0x49')](_0x50da8f+a23_0xdcd7('0x88')+_0x5b687b+'%\x09'+_0x277b58+'/'+_0x50d51d);}console[a23_0xdcd7('0x49')](_0x50da8f+'\x20'+_0x337ebd[a23_0xdcd7('0x89')]);switch(_0x337ebd[a23_0xdcd7('0x89')]){case 0xc8:_0x50d51d=_0x337ebd[a23_0xdcd7('0x8a')][a23_0xdcd7('0x8b')]||_0x5519cc;fs[a23_0xdcd7('0x8c')](_0x4e9be8,function(_0x5ed025,_0x389755){if(!_0x5ed025){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x8d')+_0x4e9be8);if(_0x389755[a23_0xdcd7('0x8e')]==_0x50d51d){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x8f')+_0x50d51d+')');console[a23_0xdcd7('0x49')](a23_0xdcd7('0x90'));}else{console[a23_0xdcd7('0x49')](a23_0xdcd7('0x91')+_0x389755['size']+a23_0xdcd7('0x92')+_0x50d51d+')');}}_0x52e2c7=fs[a23_0xdcd7('0x93')](_0x4e9be8);_0x337ebd[a23_0xdcd7('0x94')](_0x52e2c7);_0x337ebd['on'](a23_0xdcd7('0x95'),function(_0x471049){_0x277b58+=_0x471049[a23_0xdcd7('0x59')];_0x2c72d8();});_0x21484a['on']('error',function(_0x5ed025){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x96'));console['log'](_0x5ed025);});_0x52e2c7['on'](a23_0xdcd7('0x97'),function(){console['log'](a23_0xdcd7('0x98')+_0x362d16+a23_0xdcd7('0x81')+_0x50da8f);_0x3d1069(null,_0x50da8f,_0x5482b9,_0x50da8f);}[a23_0xdcd7('0x41')](this));});break;case 0x12e:const _0x4db96a=_0x337ebd[a23_0xdcd7('0x8a')]['location'];console[a23_0xdcd7('0x49')]('Redirect\x20'+_0x362d16+'\x20to\x20'+_0x4db96a);if(_0x59a16f<0x5){this[a23_0xdcd7('0x7f')](_0x4db96a,_0x50da8f,_0x3d1069,_0x59a16f++);}else{console[a23_0xdcd7('0x79')](a23_0xdcd7('0x99')+_0x362d16+'.');_0x3d1069(a23_0xdcd7('0x9a'),null,null,null);}return;case 0x194:console[a23_0xdcd7('0x49')]('File\x20Not\x20Found\x20'+_0x362d16);default:console[a23_0xdcd7('0x49')](a23_0xdcd7('0x9b')+_0x362d16+a23_0xdcd7('0x9c')+_0x337ebd[a23_0xdcd7('0x89')]);_0x21484a[a23_0xdcd7('0x9d')]();_0x3d1069(_0x337ebd[a23_0xdcd7('0x89')],null,null,null);return;}})['on']('error',function(_0x18cb5a){console[a23_0xdcd7('0x49')](a23_0xdcd7('0x9e')+_0x362d16+'\x20'+_0x18cb5a[a23_0xdcd7('0x9f')]);_0x3d1069(_0x18cb5a,null,null,null);});}['downloadHTTPFileCallback'](_0x11f4e4,_0x5accb7,_0x17a146,_0x54a9c0){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xa0'));console[a23_0xdcd7('0x49')](_0x11f4e4);console['log'](_0x5accb7);console[a23_0xdcd7('0x49')](_0x17a146);console[a23_0xdcd7('0x49')](_0x54a9c0);if(_0x17a146=='image'){const _0xaba8ca=this['downloadFiles'][this[a23_0xdcd7('0x20')]][a23_0xdcd7('0xa1')]!=null?this[a23_0xdcd7('0x57')][this['currentFile']][a23_0xdcd7('0xa1')]:0x1e;this['createImageVideo'](_0x54a9c0,_0xaba8ca);}else if(_0x17a146==a23_0xdcd7('0xa2')){if(_0x11f4e4==null&&_0x5accb7!=''){this['currentFile']++;}this[a23_0xdcd7('0x5a')]();}console[a23_0xdcd7('0x49')](this['currentFile']);}[a23_0xdcd7('0xa3')](_0x4558ea,_0x50be27,_0x42ff01){progress(request(_0x4558ea),{})['on'](a23_0xdcd7('0xa4'),function(_0x460a10){console[a23_0xdcd7('0x49')](_0x460a10);})['on'](a23_0xdcd7('0x79'),function(_0x3f35d6){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xa5'));this['download']();})['on'](a23_0xdcd7('0x7a'),function(){console['log'](a23_0xdcd7('0x7b')+_0x50be27);console['log']('mediaType:\x20'+_0x42ff01);if(_0x42ff01==a23_0xdcd7('0xa6')){const _0x327de1=this['downloadFiles'][this[a23_0xdcd7('0x20')]]['duration']!=null?this['downloadFiles'][this[a23_0xdcd7('0x20')]][a23_0xdcd7('0xa1')]:0x1e;this[a23_0xdcd7('0xa7')](_0x50be27,_0x327de1);}else if(_0x42ff01==a23_0xdcd7('0xa2')){this[a23_0xdcd7('0x20')]++;this[a23_0xdcd7('0x5a')]();}}[a23_0xdcd7('0x41')](this))[a23_0xdcd7('0x94')](fs[a23_0xdcd7('0x93')](this['tempFolder']+_0x50be27));}[a23_0xdcd7('0xa7')](_0x5f57a8,_0x5d2077=0x1e){const _0x50a198=this[a23_0xdcd7('0x1a')]+_0x5f57a8;console[a23_0xdcd7('0x49')](_0x50a198);console[a23_0xdcd7('0x49')](_0x5f57a8);const _0x331ccd=_0x5f57a8[a23_0xdcd7('0x65')]('.')[a23_0xdcd7('0x67')](0x0,-0x1)[a23_0xdcd7('0x66')]('.');const _0x3b4fe4=a23_0xdcd7('0xa8');const _0x377b88=['-y','-r',a23_0xdcd7('0xa9'),a23_0xdcd7('0xaa'),'1',a23_0xdcd7('0xab'),a23_0xdcd7('0xac'),'-i',_0x50a198,'-t',String(_0x5d2077),a23_0xdcd7('0xad'),a23_0xdcd7('0xae'),a23_0xdcd7('0xaf'),'yuv420p','-r','25','-vf',a23_0xdcd7('0xb0'),this[a23_0xdcd7('0x1a')]+_0x331ccd+'.mp4'];const _0x55fcb4=spawn(_0x3b4fe4,_0x377b88);_0x55fcb4[a23_0xdcd7('0xb1')]['on'](a23_0xdcd7('0x95'),function(_0x445e83){console[a23_0xdcd7('0x49')]('Converting\x20'+_0x50a198);});_0x55fcb4[a23_0xdcd7('0xb2')]['on'](a23_0xdcd7('0x95'),function(_0x1ddc6f){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xb3')+_0x1ddc6f);}[a23_0xdcd7('0x41')](this));_0x55fcb4['on'](a23_0xdcd7('0xb4'),function(){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xb5'));this[a23_0xdcd7('0x20')]++;this[a23_0xdcd7('0x5a')]();}['bind'](this));}[a23_0xdcd7('0x6e')](_0x3cbc76){const _0x18153b=this['tempFolder']+'/'+_0x3cbc76+a23_0xdcd7('0x69');const _0x1abfda=youtubedl(a23_0xdcd7('0xb6')+_0x3cbc76,[a23_0xdcd7('0xb7')],{'cwd':__dirname});_0x1abfda['on'](a23_0xdcd7('0xb8'),function(_0x4d8b9f){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xb9'));console[a23_0xdcd7('0x49')](a23_0xdcd7('0xba')+_0x4d8b9f[a23_0xdcd7('0xbb')]);console[a23_0xdcd7('0x49')](a23_0xdcd7('0xbc')+_0x4d8b9f[a23_0xdcd7('0x8e')]);});_0x1abfda['on'](a23_0xdcd7('0xbd'),function complete(_0xf3b678){'use strict';console[a23_0xdcd7('0x49')](a23_0xdcd7('0xba')+_0xf3b678[a23_0xdcd7('0xbb')]+a23_0xdcd7('0xbe'));});_0x1abfda['on'](a23_0xdcd7('0x7a'),function(){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xbf'));this[a23_0xdcd7('0x6b')](_0x18153b)['then'](function(_0x50e0e7){if(_0x50e0e7){this[a23_0xdcd7('0x20')]++;}this['download']();}[a23_0xdcd7('0x41')](this));}['bind'](this));_0x1abfda['pipe'](fs[a23_0xdcd7('0x93')](_0x18153b));}[a23_0xdcd7('0x62')](){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xc0'));if(this['playlistChanged']){if(this['failDownloadFiles'][a23_0xdcd7('0x59')]==0x0){fs[a23_0xdcd7('0x43')](this[a23_0xdcd7('0x5f')],JSON[a23_0xdcd7('0x44')](this['newPlayList']));let _0x2b8914=a23_0xdcd7('0xc1')+'\x0d\x0a'+a23_0xdcd7('0xc2')+'\x0d\x0a';for(const _0x5de503 in this[a23_0xdcd7('0x57')]){const _0x513e76=this[a23_0xdcd7('0x57')][_0x5de503][a23_0xdcd7('0xc3')];const _0x39eb2f=this[a23_0xdcd7('0x57')][_0x5de503][a23_0xdcd7('0x63')];const _0x2e7f0c=_0x513e76[a23_0xdcd7('0xc4')](_0x513e76[a23_0xdcd7('0x64')]('/')+0x1);let _0x10e55e=_0x2e7f0c[a23_0xdcd7('0x65')]('.')[a23_0xdcd7('0x67')](0x0,-0x1)[a23_0xdcd7('0x66')]('.');if(_0x39eb2f=='youtube_single'){_0x10e55e=_0x513e76;}_0x2b8914+=a23_0xdcd7('0xc5')+_0x10e55e+a23_0xdcd7('0x69')+'\x0d\x0a';}fsExtra[a23_0xdcd7('0x5d')](this[a23_0xdcd7('0x1c')]);fsExtra[a23_0xdcd7('0x6c')](this[a23_0xdcd7('0x1a')],this[a23_0xdcd7('0x1c')]);fsExtra[a23_0xdcd7('0x43')](this[a23_0xdcd7('0x1e')],_0x2b8914);fsExtra[a23_0xdcd7('0x5d')](this['tempFolder']);console['log'](a23_0xdcd7('0xc6'));this['refreshPlayer']();}else{console[a23_0xdcd7('0x49')](a23_0xdcd7('0xc7'));this[a23_0xdcd7('0x20')]=0x0;setTimeout(function(){this[a23_0xdcd7('0x5a')]();}['bind'](this),0x1388);}}else{console['log']('No\x20playlist\x20changes.');}}[a23_0xdcd7('0xc8')](){this[a23_0xdcd7('0xc9')](a23_0xdcd7('0xca'),{'playlistid':0x1},function(_0x4721d8){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xcb'));console['log'](_0x4721d8);this[a23_0xdcd7('0xc9')](a23_0xdcd7('0xcc'),{'item':{'file':a23_0xdcd7('0xcd')},'playlistid':0x1},function(_0x4721d8){console[a23_0xdcd7('0x49')]('Playlist.Added');console[a23_0xdcd7('0x49')](_0x4721d8);this[a23_0xdcd7('0xc9')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x4721d8){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xce'));console[a23_0xdcd7('0x49')](_0x4721d8);if(this[a23_0xdcd7('0x2a')]){this['forceReload']=![];this[a23_0xdcd7('0xcf')](a23_0xdcd7('0xd0'));}}[a23_0xdcd7('0x41')](this));}[a23_0xdcd7('0x41')](this));}[a23_0xdcd7('0x41')](this));}[a23_0xdcd7('0xd1')](){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xd2'));this[a23_0xdcd7('0xcf')](a23_0xdcd7('0xd3'));}[a23_0xdcd7('0x3f')](){const _0x1370f4=format(this['playerServiceURL'],this[a23_0xdcd7('0x33')]);console['log'](_0x1370f4);request({'url':_0x1370f4,'json':!![]},function(_0x3827bb,_0x1b8b9d,_0x3affd1){if(_0x3affd1[a23_0xdcd7('0x59')]>0x0){const _0xb91c44=_0x3affd1[0x0];const _0x152165=_0xb91c44[a23_0xdcd7('0xd4')];const _0x399328=_0xb91c44['header_active']==0x1;this[a23_0xdcd7('0xd5')](_0x152165);this[a23_0xdcd7('0xd6')](_0x399328);}console[a23_0xdcd7('0x49')](_0x3affd1);}['bind'](this));}[a23_0xdcd7('0xd7')](){this[a23_0xdcd7('0xcf')]('CECActivateSource()');}[a23_0xdcd7('0xd8')](){this[a23_0xdcd7('0xcf')]('CECStandby()');}[a23_0xdcd7('0xd5')](_0x204800){const _0x3571fa=_0x204800!=null&&_0x204800!='';const _0x384a2d='/home/osmc/.kodi/userdata/RssFeeds.xml';const _0x4c70a7=fsExtra[a23_0xdcd7('0x31')](_0x384a2d);console[a23_0xdcd7('0x49')](a23_0xdcd7('0xd9')+_0x4c70a7);const _0x2973a8=require(a23_0xdcd7('0xda'));const _0x3cb8a0=_0x2973a8[a23_0xdcd7('0xdb')];_0x3cb8a0(_0x4c70a7,function(_0x5645a0,_0x448663){console[a23_0xdcd7('0x49')]('err:\x20%j',_0x5645a0);console[a23_0xdcd7('0x49')](a23_0xdcd7('0xdc'),_0x448663);if(!_0x204800||_0x204800==null||_0x204800==''){_0x204800='none';}_0x448663[a23_0xdcd7('0xdd')][a23_0xdcd7('0xde')][0x0][a23_0xdcd7('0xdf')][0x0]['_']=_0x204800;const _0x14e50f=new _0x2973a8[(a23_0xdcd7('0xe0'))]();const _0x1a6da2=_0x14e50f['buildObject'](_0x448663);console[a23_0xdcd7('0x49')]('xml:\x20%j',_0x1a6da2);fsExtra[a23_0xdcd7('0x43')](_0x384a2d,_0x1a6da2);});this[a23_0xdcd7('0xcf')](a23_0xdcd7('0xe1'));this[a23_0xdcd7('0xc9')](a23_0xdcd7('0xe2'),{'setting':'lookandfeel.enablerssfeeds','value':_0x3571fa},function(_0xa8e76f){console[a23_0xdcd7('0x49')](a23_0xdcd7('0xe3'));console[a23_0xdcd7('0x49')](_0xa8e76f);}[a23_0xdcd7('0x41')](this));}[a23_0xdcd7('0xd6')](_0x55adf8){this[a23_0xdcd7('0xc9')]('Settings.SetSettingValue',{'setting':a23_0xdcd7('0xe4'),'value':_0x55adf8},function(_0x7e7768){console['log'](a23_0xdcd7('0xe5'));console[a23_0xdcd7('0x49')](_0x7e7768);}[a23_0xdcd7('0x41')](this));}[a23_0xdcd7('0xcf')](_0x5ad176){exec(a23_0xdcd7('0xe6')+_0x5ad176+'\x22',function(_0x3ed2dd){console[a23_0xdcd7('0x49')](_0x3ed2dd);});}[a23_0xdcd7('0xc9')](_0x43e9f0,_0x3cd6ba,_0x161a8d){const _0x3feb6a={'jsonrpc':a23_0xdcd7('0xe7'),'method':_0x43e9f0,'params':_0x3cd6ba,'id':0x1};this[a23_0xdcd7('0x2b')][a23_0xdcd7('0x51')](this[a23_0xdcd7('0x24')]+a23_0xdcd7('0xe8'),_0x3feb6a,![],{'user':this[a23_0xdcd7('0x26')],'pass':this[a23_0xdcd7('0x28')]})[a23_0xdcd7('0x3')](function(_0x25ae2f){_0x161a8d(_0x25ae2f);})[a23_0xdcd7('0x4b')](function(_0x3442bc){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;