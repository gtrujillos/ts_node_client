var a22_0x7103=['uuid/v4','config.json','context.json','node-kodi','mediaFolder','temp/','files/','playListFile','playlist.txt','m3uFile','currentFile','playlistChanged','downloadFiles','failDownloadFiles','kodiHost','http://localhost','kodiUser','httpClientService','HttpClientService','init','readFileSync','context','parse','config','baseURL','env','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','api/player.php?player_id={0}','kodi','kodiPassword','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','getItems','stringify','playerId','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','catch','log','deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','label','reportStatus','playingItem:\x20','ensureDir','tempFolder','filesFolder','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','downloadYouTube','downloader','videoFile:\x20','media','track','@type','indexOf','downloading:\x20','start','includes','Error:\x20','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(',')\x20vs\x20New(','pipe','data','error','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','video','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','-vf','scale=1920:1080','stdout','stderr','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','info','Download\x20started','filename:\x20','_filename','size:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','createWriteStream','Finishing','newPlayList','substring','lastIndexOf','/home/osmc/luloclient/media/files/','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','reboot','sudo\x20/sbin/shutdown\x20-r\x20now','updateSettings','playerServiceURL','header_active','setRss','enableClock','/home/osmc/.kodi/userdata/RssFeeds.xml','xml2js','result:\x20%j','set','feed','Builder','buildObject','xml:\x20%j','kodi-send\x20--action=\x22RefreshRSS()\x22','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','2.0','/jsonrpc','SyncPlaylistsService','__awaiter','throw','done','value','then','apply','next','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','request-progress','spawn','child_process','is-image','string-template'];(function(_0x2f14aa,_0x35bec7){var _0x2f57ae=function(_0x695f45){while(--_0x695f45){_0x2f14aa['push'](_0x2f14aa['shift']());}};_0x2f57ae(++_0x35bec7);}(a22_0x7103,0x19f));var a22_0x3c12=function(_0x339c0e,_0x2aa379){_0x339c0e=_0x339c0e-0x0;var _0x4db5a8=a22_0x7103[_0x339c0e];return _0x4db5a8;};'use strict';var __awaiter=this&&this[a22_0x3c12('0x0')]||function(_0x50585b,_0x7cc7fd,_0x5496a4,_0x38cb37){function _0x3feb26(_0x35d7c9){return _0x35d7c9 instanceof _0x5496a4?_0x35d7c9:new _0x5496a4(function(_0x3beba7){_0x3beba7(_0x35d7c9);});}return new(_0x5496a4||(_0x5496a4=Promise))(function(_0xc9761b,_0x334497){function _0x36c49d(_0x2ef025){try{_0x108c7b(_0x38cb37['next'](_0x2ef025));}catch(_0x1df856){_0x334497(_0x1df856);}}function _0x45e588(_0x375e5b){try{_0x108c7b(_0x38cb37[a22_0x3c12('0x1')](_0x375e5b));}catch(_0x346103){_0x334497(_0x346103);}}function _0x108c7b(_0x103ecd){_0x103ecd[a22_0x3c12('0x2')]?_0xc9761b(_0x103ecd['value']):_0x3feb26(_0x103ecd[a22_0x3c12('0x3')])[a22_0x3c12('0x4')](_0x36c49d,_0x45e588);}_0x108c7b((_0x38cb37=_0x38cb37[a22_0x3c12('0x5')](_0x50585b,_0x7cc7fd||[]))[a22_0x3c12('0x6')]());});};Object['defineProperty'](exports,a22_0x3c12('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x3c12('0x8'));const mediainfo=require(a22_0x3c12('0x9'));const fs=require('fs');const url=require(a22_0x3c12('0xa'));const http=require(a22_0x3c12('0xb'));const fsExtra=require(a22_0x3c12('0xc'));const request=require(a22_0x3c12('0xd'));const progress=require(a22_0x3c12('0xe'));const spawn=require('child_process')[a22_0x3c12('0xf')];const exec=require(a22_0x3c12('0x10'))['exec'];const isImage=require(a22_0x3c12('0x11'));const format=require(a22_0x3c12('0x12'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x3c12('0x13'));const configFile=a22_0x3c12('0x14');const contextFile=a22_0x3c12('0x15');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x3c12('0x16'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a22_0x3c12('0x17')]='media/';this['tempFolder']=this[a22_0x3c12('0x17')]+a22_0x3c12('0x18');this['filesFolder']=this[a22_0x3c12('0x17')]+a22_0x3c12('0x19');this[a22_0x3c12('0x1a')]=this[a22_0x3c12('0x17')]+a22_0x3c12('0x1b');this[a22_0x3c12('0x1c')]=this['filesFolder']+'lulo_playlist.m3u';this[a22_0x3c12('0x1d')]=0x0;this[a22_0x3c12('0x1e')]=![];this[a22_0x3c12('0x1f')]=[];this[a22_0x3c12('0x20')]=[];this['newPlayList']={};this[a22_0x3c12('0x21')]=a22_0x3c12('0x22');this[a22_0x3c12('0x23')]='lulo';this['kodiPassword']='.lulo123.';this[a22_0x3c12('0x24')]=new HttpClientService_1[(a22_0x3c12('0x25'))]();}[a22_0x3c12('0x26')](){this['config']=JSON['parse'](fs[a22_0x3c12('0x27')](configFile));this[a22_0x3c12('0x28')]=JSON[a22_0x3c12('0x29')](fs[a22_0x3c12('0x27')](contextFile));this['playerId']=this[a22_0x3c12('0x2a')]['playerId'];this[a22_0x3c12('0x2b')]=process[a22_0x3c12('0x2c')]['WEB_SERVICE_URL']+a22_0x3c12('0x2d');this[a22_0x3c12('0x2e')]=this[a22_0x3c12('0x2b')]+a22_0x3c12('0x2f');this['playerServiceURL']=this[a22_0x3c12('0x2b')]+a22_0x3c12('0x30');this[a22_0x3c12('0x31')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a22_0x3c12('0x23')],'password':this[a22_0x3c12('0x32')]});this[a22_0x3c12('0x33')]();this[a22_0x3c12('0x34')]();this[a22_0x3c12('0x35')]();this[a22_0x3c12('0x36')]();setInterval(function(){this[a22_0x3c12('0x37')]();}['bind'](this),0x2710);setInterval(function(){this[a22_0x3c12('0x34')]();}[a22_0x3c12('0x38')](this),0x493e0);}[a22_0x3c12('0x33')](){}[a22_0x3c12('0x34')](){this['kodi']['playlist'][a22_0x3c12('0x39')](0x1)[a22_0x3c12('0x4')](function(_0x594bc2){const _0x240d1f=JSON[a22_0x3c12('0x3a')](_0x594bc2);const _0x52b7ca={'player_id':this[a22_0x3c12('0x3b')],'device_uuid':this['config']['deviceUuid'],'network_info':JSON[a22_0x3c12('0x3a')](os[a22_0x3c12('0x3c')]()),'firmware_info':JSON[a22_0x3c12('0x3a')](this[a22_0x3c12('0x28')]),'playlist':_0x240d1f,'playing_item':'','status':0x0};this[a22_0x3c12('0x24')][a22_0x3c12('0x3d')](a22_0x3c12('0x3e'),_0x52b7ca,![])[a22_0x3c12('0x4')](function(_0x2465ff){console['log']('register\x20response:\x20'+Date());})[a22_0x3c12('0x3f')](function(_0x1bb765){});console[a22_0x3c12('0x40')](_0x52b7ca);}[a22_0x3c12('0x38')](this));const _0x121605=this[a22_0x3c12('0x2a')][a22_0x3c12('0x41')];if(!_0x121605||_0x121605==''){this[a22_0x3c12('0x2a')]['deviceUuid']=uuidv4();this[a22_0x3c12('0x2a')]={'deviceUuid':this[a22_0x3c12('0x2a')]['deviceUuid'],'playerId':this['config'][a22_0x3c12('0x3b')]};fs[a22_0x3c12('0x42')](configFile,JSON[a22_0x3c12('0x3a')](this[a22_0x3c12('0x2a')]));}}[a22_0x3c12('0x37')](){console[a22_0x3c12('0x40')](a22_0x3c12('0x37'));this['kodi'][a22_0x3c12('0x43')][a22_0x3c12('0x44')]()['then'](function(_0x1f5bb1){const _0x108f1f=_0x1f5bb1['item'][a22_0x3c12('0x45')];this[a22_0x3c12('0x46')](_0x108f1f);}[a22_0x3c12('0x38')](this))[a22_0x3c12('0x3f')](function(_0x5d4fa1){console[a22_0x3c12('0x40')](_0x5d4fa1);this[a22_0x3c12('0x46')](_0x5d4fa1);}['bind'](this));}[a22_0x3c12('0x46')](_0x4e65da){console[a22_0x3c12('0x40')](a22_0x3c12('0x47')+_0x4e65da);const _0x2399a2={'player_id':this[a22_0x3c12('0x3b')],'device_uuid':this[a22_0x3c12('0x2a')][a22_0x3c12('0x41')],'status':_0x4e65da!=''&&_0x4e65da!=null?0x1:0x0,'playing_item':_0x4e65da};this[a22_0x3c12('0x24')][a22_0x3c12('0x3d')]('http://restapi.lulo.run/player_devices/report_status',_0x2399a2,![])[a22_0x3c12('0x4')](function(_0xde07ba){console['log']('reportStatusResponse:\x20'+Date());})[a22_0x3c12('0x3f')](function(_0x5b96a5){});}['checkFolders'](){fsExtra[a22_0x3c12('0x48')](this[a22_0x3c12('0x17')],_0x123de2=>{});fsExtra['ensureDir'](this[a22_0x3c12('0x49')],_0x358851=>{});fsExtra['ensureDir'](this[a22_0x3c12('0x4a')],_0x5ddfc4=>{});}[a22_0x3c12('0x36')](){const _0x2d87ba=format(this[a22_0x3c12('0x2e')],this[a22_0x3c12('0x3b')]);console[a22_0x3c12('0x40')](_0x2d87ba);request({'url':_0x2d87ba,'json':!![]},function(_0x537987,_0x427fee,_0x229f3d){console[a22_0x3c12('0x40')](a22_0x3c12('0x4b'));console[a22_0x3c12('0x40')](_0x229f3d);this['newPlayList']=_0x229f3d;this[a22_0x3c12('0x1e')]=this[a22_0x3c12('0x4c')]();fsExtra[a22_0x3c12('0x4d')](this[a22_0x3c12('0x49')]);this[a22_0x3c12('0x1f')]=[];this[a22_0x3c12('0x20')]=[];this['currentFile']=0x0;for(const _0xdb60f5 in _0x229f3d){this[a22_0x3c12('0x1f')][a22_0x3c12('0x4e')](_0x229f3d[_0xdb60f5]);}console[a22_0x3c12('0x40')](a22_0x3c12('0x4f')+this['downloadFiles'][a22_0x3c12('0x50')]);if(this['downloadFiles'][a22_0x3c12('0x50')]>0x0){this[a22_0x3c12('0x51')]();}}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0x52')](){if(fsExtra['existsSync'](this[a22_0x3c12('0x49')])){fsExtra[a22_0x3c12('0x4d')](this[a22_0x3c12('0x49')]);}if(fsExtra[a22_0x3c12('0x53')](this[a22_0x3c12('0x4a')])){fsExtra[a22_0x3c12('0x4d')](this[a22_0x3c12('0x4a')]);}if(!fsExtra['existsSync'](this['playListFile'])){fsExtra[a22_0x3c12('0x54')](this[a22_0x3c12('0x1a')]);}if(!fsExtra[a22_0x3c12('0x53')](this[a22_0x3c12('0x1c')])){fsExtra[a22_0x3c12('0x54')](this[a22_0x3c12('0x1c')]);}this[a22_0x3c12('0x36')]();}['hasPlayListChanged'](){const _0x17b45e=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a22_0x3c12('0x53')](this['playListFile'])){return!![];}else{const _0x5a871f=fsExtra[a22_0x3c12('0x27')](this[a22_0x3c12('0x1a')])['toString']();if(_0x5a871f!=_0x17b45e){return!![];}}}catch(_0x145d33){console[a22_0x3c12('0x40')](_0x145d33);}return![];}[a22_0x3c12('0x51')](){console[a22_0x3c12('0x40')](a22_0x3c12('0x55')+this[a22_0x3c12('0x1d')]+a22_0x3c12('0x56')+this[a22_0x3c12('0x1f')]['length']);if(this['currentFile']>=this[a22_0x3c12('0x1f')][a22_0x3c12('0x50')]){this[a22_0x3c12('0x57')]();return;}const _0x378f63=String(this[a22_0x3c12('0x1f')][this[a22_0x3c12('0x1d')]][a22_0x3c12('0x58')]);const _0x370662=this[a22_0x3c12('0x1f')][this[a22_0x3c12('0x1d')]][a22_0x3c12('0x59')];let _0x2fd909=_0x378f63['substring'](_0x378f63['lastIndexOf']('/')+0x1);const _0x58a6c9=_0x2fd909[a22_0x3c12('0x5a')]('.')[a22_0x3c12('0x5b')](0x0,-0x1)[a22_0x3c12('0x5c')]('.');let _0x4b4791=this['baseURL']+_0x378f63;const _0x33e498=_0x4b4791['split']('.')['slice'](0x0,-0x1)[a22_0x3c12('0x5c')]('.');if(_0x370662==a22_0x3c12('0x5d')){_0x2fd909=_0x2fd909+a22_0x3c12('0x5e');}else if(_0x370662==a22_0x3c12('0x5f')){_0x2fd909=_0x58a6c9+'.mp4';_0x4b4791=_0x33e498+a22_0x3c12('0x5e');}console[a22_0x3c12('0x40')](a22_0x3c12('0x60'));console[a22_0x3c12('0x40')](_0x378f63);console[a22_0x3c12('0x40')](_0x370662);console[a22_0x3c12('0x40')](_0x2fd909);console[a22_0x3c12('0x40')](_0x4b4791);console[a22_0x3c12('0x40')](_0x58a6c9);console[a22_0x3c12('0x40')](_0x33e498);console[a22_0x3c12('0x40')]('**********+');if(fsExtra[a22_0x3c12('0x53')](this['tempFolder']+_0x2fd909)){this[a22_0x3c12('0x61')](this['tempFolder']+_0x2fd909)['then'](function(_0x2969cb){if(_0x2969cb){this['currentFile']++;}else{this[a22_0x3c12('0x1e')]=!![];}this['download']();}['bind'](this));}else if(fsExtra[a22_0x3c12('0x53')](this[a22_0x3c12('0x4a')]+_0x2fd909)){this[a22_0x3c12('0x61')](this['filesFolder']+_0x2fd909)[a22_0x3c12('0x4')](function(_0x80c045){if(_0x80c045){fsExtra['copySync'](this['filesFolder']+_0x2fd909,this[a22_0x3c12('0x49')]+_0x2fd909);this['currentFile']++;}else{this[a22_0x3c12('0x1e')]=!![];}this[a22_0x3c12('0x51')]();}[a22_0x3c12('0x38')](this));}else{console[a22_0x3c12('0x40')]('Downloading:\x20'+_0x4b4791);this['playlistChanged']=!![];if(_0x370662==a22_0x3c12('0x5d')){this[a22_0x3c12('0x62')](_0x378f63);}else{this[a22_0x3c12('0x63')](_0x4b4791,_0x2fd909,_0x370662);}}}[a22_0x3c12('0x61')](_0x4f7458){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x3c12('0x40')](a22_0x3c12('0x64')+_0x4f7458);const _0x2226a1=yield mediainfo(_0x4f7458)[a22_0x3c12('0x3f')](_0x4e0c95=>{console[a22_0x3c12('0x40')](_0x4e0c95);fsExtra[a22_0x3c12('0x54')](_0x4f7458);return![];});const _0x9920e2=_0x2226a1[a22_0x3c12('0x65')][a22_0x3c12('0x66')][a22_0x3c12('0x50')]>0x1&&_0x2226a1[a22_0x3c12('0x65')][a22_0x3c12('0x66')][0x1][a22_0x3c12('0x67')]=='Video';if(!_0x9920e2){fsExtra[a22_0x3c12('0x54')](_0x4f7458);}console[a22_0x3c12('0x40')]('mediainfo\x20check:'+_0x9920e2);return _0x9920e2;});}['downloader'](_0x3dca73,_0x525d28,_0x2623a1){const _0x310ee6=new Downloader();console[a22_0x3c12('0x40')](_0x3dca73);console[a22_0x3c12('0x40')](_0x525d28);console[a22_0x3c12('0x40')](_0x2623a1);const _0x49b8c9=_0x310ee6['download'](_0x3dca73,this[a22_0x3c12('0x49')]+_0x525d28);urlExists(_0x3dca73,function(_0x5c1342,_0x5bd419){if(_0x5bd419){if(this[a22_0x3c12('0x20')]['includes'](this[a22_0x3c12('0x1d')])){const _0x2f2410=this[a22_0x3c12('0x20')][a22_0x3c12('0x68')](this[a22_0x3c12('0x1d')]);if(_0x2f2410>-0x1){this[a22_0x3c12('0x20')]['splice'](_0x2f2410,0x1);}}console['log'](a22_0x3c12('0x69')+_0x3dca73);_0x49b8c9[a22_0x3c12('0x6a')]();}else{if(!this['failDownloadFiles'][a22_0x3c12('0x6b')](this[a22_0x3c12('0x1d')])){this[a22_0x3c12('0x20')][a22_0x3c12('0x4e')](this[a22_0x3c12('0x1d')]);}console[a22_0x3c12('0x40')](a22_0x3c12('0x6c')+_0x3dca73);this[a22_0x3c12('0x1d')]++;this[a22_0x3c12('0x51')]();}}[a22_0x3c12('0x38')](this));_0x49b8c9['on'](a22_0x3c12('0x6a'),function(_0x49b8c9){console[a22_0x3c12('0x40')](a22_0x3c12('0x6d')+_0x3dca73);});_0x49b8c9['on']('error',function(_0x49b8c9){console[a22_0x3c12('0x40')](a22_0x3c12('0x6e'));this['download']();}[a22_0x3c12('0x38')](this));_0x49b8c9['on'](a22_0x3c12('0x6f'),function(_0x49b8c9){console[a22_0x3c12('0x40')](a22_0x3c12('0x6f'));console[a22_0x3c12('0x40')](a22_0x3c12('0x70')+_0x525d28);console[a22_0x3c12('0x40')](a22_0x3c12('0x71')+_0x2623a1);this[a22_0x3c12('0x61')](this[a22_0x3c12('0x49')]+_0x525d28)[a22_0x3c12('0x4')](function(_0x5162df){if(_0x5162df){this['currentFile']++;}this[a22_0x3c12('0x51')]();}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0x38')](this));_0x49b8c9['on'](a22_0x3c12('0x72'),function(_0x49b8c9){console[a22_0x3c12('0x40')](a22_0x3c12('0x72'));});_0x49b8c9['on'](a22_0x3c12('0x73'),function(_0x49b8c9){console[a22_0x3c12('0x40')](a22_0x3c12('0x73'));});_0x49b8c9['on'](a22_0x3c12('0x74'),function(_0x49b8c9){console['log'](a22_0x3c12('0x74'));});}['downloadHTTPFile'](_0xfbe5a2,_0x30a6c3,_0x2239df,_0x3f8455){console[a22_0x3c12('0x40')](a22_0x3c12('0x75'));console[a22_0x3c12('0x40')](_0xfbe5a2);const _0x93eb49=!![];let _0x3688d0=0x0;const _0x516c79='';console[a22_0x3c12('0x40')]('Attempting\x20to\x20download\x20'+_0xfbe5a2+a22_0x3c12('0x76')+_0x30a6c3);if(_0x3688d0){if(_0x3688d0>0x5){_0x3f8455(a22_0x3c12('0x77'),_0xfbe5a2,_0x2239df,null);return;}}else{_0x3688d0=0x0;}const _0x5c56c5=this['tempFolder']+_0x30a6c3;let _0x575e5b;if(_0x3f8455===undefined){console[a22_0x3c12('0x40')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0xfbe5a2+a22_0x3c12('0x76')+_0x5c56c5);_0x3f8455=function(_0x198e14,_0x47f809){console[a22_0x3c12('0x40')](a22_0x3c12('0x78'),_0x198e14,_0x47f809);};}http[a22_0x3c12('0x79')][a22_0x3c12('0x7a')]=0x64;const _0x4084fe={'host':url[a22_0x3c12('0x29')](_0xfbe5a2)[a22_0x3c12('0x7b')],'port':0x50,'path':url['parse'](_0xfbe5a2)[a22_0x3c12('0x7c')],'agent':![]};const _0x2927cd=http[a22_0x3c12('0x7d')](_0x4084fe,function(_0x8b8c06){let _0x4c5e27=0x0;let _0x14e89d=0x0;function _0x2c0b92(){if(_0x4c5e27===undefined){console[a22_0x3c12('0x40')](_0x30a6c3+a22_0x3c12('0x7e')+_0x14e89d+'/'+'?');}const _0x32e351=_0x14e89d/_0x4c5e27*0x64;console['log'](_0x30a6c3+a22_0x3c12('0x7f')+_0x32e351+'%\x09'+_0x14e89d+'/'+_0x4c5e27);}console[a22_0x3c12('0x40')](_0x30a6c3+'\x20'+_0x8b8c06[a22_0x3c12('0x80')]);switch(_0x8b8c06[a22_0x3c12('0x80')]){case 0xc8:_0x4c5e27=_0x8b8c06['headers']['content-length']||_0x516c79;fs[a22_0x3c12('0x81')](_0x5c56c5,function(_0x537d69,_0xd4368){if(!_0x537d69){console[a22_0x3c12('0x40')](a22_0x3c12('0x82')+_0x5c56c5);if(_0xd4368[a22_0x3c12('0x83')]==_0x4c5e27){console[a22_0x3c12('0x40')](a22_0x3c12('0x84')+_0x4c5e27+')');console[a22_0x3c12('0x40')]('Redownloading');}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0xd4368[a22_0x3c12('0x83')]+a22_0x3c12('0x85')+_0x4c5e27+')');}}_0x575e5b=fs['createWriteStream'](_0x5c56c5);_0x8b8c06[a22_0x3c12('0x86')](_0x575e5b);_0x8b8c06['on'](a22_0x3c12('0x87'),function(_0x4df0d2){_0x14e89d+=_0x4df0d2['length'];_0x2c0b92();});_0x2927cd['on'](a22_0x3c12('0x88'),function(_0x537d69){console[a22_0x3c12('0x40')](a22_0x3c12('0x89'));console['log'](_0x537d69);});_0x575e5b['on'](a22_0x3c12('0x8a'),function(){console['log'](a22_0x3c12('0x8b')+_0xfbe5a2+a22_0x3c12('0x76')+_0x30a6c3);_0x3f8455(null,_0x30a6c3,_0x2239df,_0x30a6c3);}['bind'](this));});break;case 0x12e:const _0x25d8fa=_0x8b8c06['headers'][a22_0x3c12('0x8c')];console['log'](a22_0x3c12('0x8d')+_0xfbe5a2+a22_0x3c12('0x76')+_0x25d8fa);if(_0x3688d0<0x5){this[a22_0x3c12('0x75')](_0x25d8fa,_0x30a6c3,_0x3f8455,_0x3688d0++);}else{console[a22_0x3c12('0x88')](a22_0x3c12('0x8e')+_0xfbe5a2+'.');_0x3f8455(a22_0x3c12('0x8f'),null,null,null);}return;case 0x194:console[a22_0x3c12('0x40')]('File\x20Not\x20Found\x20'+_0xfbe5a2);default:console[a22_0x3c12('0x40')](a22_0x3c12('0x90')+_0xfbe5a2+'\x20STATUS:\x20'+_0x8b8c06[a22_0x3c12('0x80')]);_0x2927cd[a22_0x3c12('0x91')]();_0x3f8455(_0x8b8c06[a22_0x3c12('0x80')],null,null,null);return;}})['on'](a22_0x3c12('0x88'),function(_0xd7b47d){console[a22_0x3c12('0x40')](a22_0x3c12('0x92')+_0xfbe5a2+'\x20'+_0xd7b47d[a22_0x3c12('0x93')]);_0x3f8455(_0xd7b47d,null,null,null);});}[a22_0x3c12('0x94')](_0x1ce0db,_0x302283,_0xb82e3c,_0x426f88){console[a22_0x3c12('0x40')](a22_0x3c12('0x94'));console[a22_0x3c12('0x40')](_0x1ce0db);console[a22_0x3c12('0x40')](_0x302283);console[a22_0x3c12('0x40')](_0xb82e3c);console[a22_0x3c12('0x40')](_0x426f88);if(_0xb82e3c==a22_0x3c12('0x5f')){const _0x7337ce=this[a22_0x3c12('0x1f')][this['currentFile']][a22_0x3c12('0x95')]!=null?this[a22_0x3c12('0x1f')][this['currentFile']]['duration']:0x1e;this[a22_0x3c12('0x96')](_0x426f88,_0x7337ce);}else if(_0xb82e3c=='video'){if(_0x1ce0db==null&&_0x302283!=''){this[a22_0x3c12('0x1d')]++;}this['download']();}console[a22_0x3c12('0x40')](this[a22_0x3c12('0x1d')]);}[a22_0x3c12('0x97')](_0x322a8c,_0x1ccf93,_0x52fbab){progress(request(_0x322a8c),{})['on'](a22_0x3c12('0x98'),function(_0x1c29a1){console[a22_0x3c12('0x40')](_0x1c29a1);})['on'](a22_0x3c12('0x88'),function(_0x4c94aa){console[a22_0x3c12('0x40')](a22_0x3c12('0x99'));this[a22_0x3c12('0x51')]();})['on'](a22_0x3c12('0x6f'),function(){console[a22_0x3c12('0x40')]('Downloaded:\x20'+_0x1ccf93);console['log'](a22_0x3c12('0x71')+_0x52fbab);if(_0x52fbab==a22_0x3c12('0x5f')){const _0x23b475=this['downloadFiles'][this['currentFile']]['duration']!=null?this[a22_0x3c12('0x1f')][this[a22_0x3c12('0x1d')]][a22_0x3c12('0x95')]:0x1e;this[a22_0x3c12('0x96')](_0x1ccf93,_0x23b475);}else if(_0x52fbab==a22_0x3c12('0x9a')){this[a22_0x3c12('0x1d')]++;this[a22_0x3c12('0x51')]();}}['bind'](this))[a22_0x3c12('0x86')](fs['createWriteStream'](this[a22_0x3c12('0x49')]+_0x1ccf93));}[a22_0x3c12('0x96')](_0xee50d2,_0x9bf935=0x1e){const _0x20ddfb=this[a22_0x3c12('0x49')]+_0xee50d2;console[a22_0x3c12('0x40')](_0x20ddfb);console[a22_0x3c12('0x40')](_0xee50d2);const _0x3e7902=_0xee50d2[a22_0x3c12('0x5a')]('.')[a22_0x3c12('0x5b')](0x0,-0x1)[a22_0x3c12('0x5c')]('.');const _0xd5590e=a22_0x3c12('0x9b');const _0x5a2896=['-y','-r',a22_0x3c12('0x9c'),a22_0x3c12('0x9d'),'1',a22_0x3c12('0x9e'),a22_0x3c12('0x9f'),'-i',_0x20ddfb,'-t',String(_0x9bf935),a22_0x3c12('0xa0'),a22_0x3c12('0xa1'),a22_0x3c12('0xa2'),'yuv420p','-r','25',a22_0x3c12('0xa3'),a22_0x3c12('0xa4'),this[a22_0x3c12('0x49')]+_0x3e7902+a22_0x3c12('0x5e')];const _0x2cc3e4=spawn(_0xd5590e,_0x5a2896);_0x2cc3e4[a22_0x3c12('0xa5')]['on'](a22_0x3c12('0x87'),function(_0x2a7fb6){console[a22_0x3c12('0x40')]('Converting\x20'+_0x20ddfb);});_0x2cc3e4[a22_0x3c12('0xa6')]['on'](a22_0x3c12('0x87'),function(_0x3da29f){console[a22_0x3c12('0x40')]('stderr:\x20'+_0x3da29f);}[a22_0x3c12('0x38')](this));_0x2cc3e4['on']('close',function(){console[a22_0x3c12('0x40')](a22_0x3c12('0xa7'));this[a22_0x3c12('0x1d')]++;this[a22_0x3c12('0x51')]();}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0x62')](_0x5ed44a){const _0x2a5d6d=this[a22_0x3c12('0x49')]+'/'+_0x5ed44a+a22_0x3c12('0x5e');const _0x1d0ef0=youtubedl(a22_0x3c12('0xa8')+_0x5ed44a,['--format=18'],{'cwd':__dirname});_0x1d0ef0['on'](a22_0x3c12('0xa9'),function(_0x2d68dc){console[a22_0x3c12('0x40')](a22_0x3c12('0xaa'));console[a22_0x3c12('0x40')](a22_0x3c12('0xab')+_0x2d68dc[a22_0x3c12('0xac')]);console[a22_0x3c12('0x40')](a22_0x3c12('0xad')+_0x2d68dc[a22_0x3c12('0x83')]);});_0x1d0ef0['on']('complete',function complete(_0x162a5f){'use strict';console[a22_0x3c12('0x40')](a22_0x3c12('0xab')+_0x162a5f[a22_0x3c12('0xac')]+a22_0x3c12('0xae'));});_0x1d0ef0['on'](a22_0x3c12('0x6f'),function(){console['log'](a22_0x3c12('0xaf'));this[a22_0x3c12('0x61')](_0x2a5d6d)[a22_0x3c12('0x4')](function(_0x449119){if(_0x449119){this[a22_0x3c12('0x1d')]++;}this['download']();}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0x38')](this));_0x1d0ef0['pipe'](fs[a22_0x3c12('0xb0')](_0x2a5d6d));}[a22_0x3c12('0x57')](){console['log'](a22_0x3c12('0xb1'));if(this['playlistChanged']){if(this['failDownloadFiles'][a22_0x3c12('0x50')]==0x0){fs['writeFileSync'](this['playListFile'],JSON[a22_0x3c12('0x3a')](this[a22_0x3c12('0xb2')]));let _0x593962='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x2573ab in this['downloadFiles']){const _0x44a092=this[a22_0x3c12('0x1f')][_0x2573ab][a22_0x3c12('0x58')];const _0x81b25e=this[a22_0x3c12('0x1f')][_0x2573ab]['media_type'];const _0x334037=_0x44a092[a22_0x3c12('0xb3')](_0x44a092[a22_0x3c12('0xb4')]('/')+0x1);let _0x3830b3=_0x334037[a22_0x3c12('0x5a')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x81b25e==a22_0x3c12('0x5d')){_0x3830b3=_0x44a092;}_0x593962+=a22_0x3c12('0xb5')+_0x3830b3+a22_0x3c12('0x5e')+'\x0d\x0a';}fsExtra[a22_0x3c12('0x4d')](this['filesFolder']);fsExtra['copySync'](this[a22_0x3c12('0x49')],this[a22_0x3c12('0x4a')]);fsExtra['writeFileSync'](this['m3uFile'],_0x593962);fsExtra[a22_0x3c12('0x4d')](this[a22_0x3c12('0x49')]);console[a22_0x3c12('0x40')]('Refreshing..');this[a22_0x3c12('0xb6')]();}else{console[a22_0x3c12('0x40')](a22_0x3c12('0xb7'));this[a22_0x3c12('0x1d')]=0x0;setTimeout(function(){this[a22_0x3c12('0x51')]();}[a22_0x3c12('0x38')](this),0x1388);}}else{console[a22_0x3c12('0x40')](a22_0x3c12('0xb8'));}}['refreshPlayer'](){this[a22_0x3c12('0xb9')](a22_0x3c12('0xba'),{'playlistid':0x1},function(_0x2a0c1e){console[a22_0x3c12('0x40')](a22_0x3c12('0xbb'));console['log'](_0x2a0c1e);this[a22_0x3c12('0xb9')](a22_0x3c12('0xbc'),{'item':{'file':a22_0x3c12('0xbd')},'playlistid':0x1},function(_0x2a0c1e){console[a22_0x3c12('0x40')](a22_0x3c12('0xbe'));console[a22_0x3c12('0x40')](_0x2a0c1e);this[a22_0x3c12('0xb9')](a22_0x3c12('0xbf'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x2a0c1e){console[a22_0x3c12('0x40')](a22_0x3c12('0xc0'));console[a22_0x3c12('0x40')](_0x2a0c1e);}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0xc1')](){exec(a22_0x3c12('0xc2'),function(_0x5eb4f6){console[a22_0x3c12('0x40')](_0x5eb4f6);});}[a22_0x3c12('0xc3')](){const _0x477a3e=format(this[a22_0x3c12('0xc4')],this[a22_0x3c12('0x3b')]);console[a22_0x3c12('0x40')](_0x477a3e);request({'url':_0x477a3e,'json':!![]},function(_0xaf6292,_0x595a8e,_0xb58e9e){if(_0xb58e9e['length']>0x0){const _0x1b3d9b=_0xb58e9e[0x0];const _0x365954=_0x1b3d9b['rss'];const _0x4c6890=_0x1b3d9b[a22_0x3c12('0xc5')]==0x1;this[a22_0x3c12('0xc6')](_0x365954);this[a22_0x3c12('0xc7')](_0x4c6890);}console[a22_0x3c12('0x40')](_0xb58e9e);}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0xc6')](_0x4f9436){const _0x251101=_0x4f9436!=null&&_0x4f9436!='';const _0x5ca56a=a22_0x3c12('0xc8');const _0x170699=fsExtra[a22_0x3c12('0x27')](_0x5ca56a);console[a22_0x3c12('0x40')]('xmlContent:\x20'+_0x170699);const _0x3b053a=require(a22_0x3c12('0xc9'));const _0x4f5777=_0x3b053a['parseString'];_0x4f5777(_0x170699,function(_0x104dec,_0x1dc903){console['log'](a22_0x3c12('0xca'),_0x1dc903);_0x1dc903['rssfeeds'][a22_0x3c12('0xcb')][0x0][a22_0x3c12('0xcc')][0x0]['_']=_0x4f9436;const _0x22eb87=new _0x3b053a[(a22_0x3c12('0xcd'))]();const _0x5aaf87=_0x22eb87[a22_0x3c12('0xce')](_0x1dc903);console[a22_0x3c12('0x40')](a22_0x3c12('0xcf'),_0x5aaf87);fsExtra[a22_0x3c12('0x42')](_0x5ca56a,_0x5aaf87);});exec(a22_0x3c12('0xd0'),function(_0x12c3fb){console[a22_0x3c12('0x40')](_0x12c3fb);});this[a22_0x3c12('0xb9')](a22_0x3c12('0xd1'),{'setting':a22_0x3c12('0xd2'),'value':_0x251101},function(_0x4547c7){console[a22_0x3c12('0x40')](a22_0x3c12('0xd3'));console[a22_0x3c12('0x40')](_0x4547c7);}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0xc7')](_0x37884b){this[a22_0x3c12('0xb9')](a22_0x3c12('0xd1'),{'setting':a22_0x3c12('0xd4'),'value':_0x37884b},function(_0x44eafa){console[a22_0x3c12('0x40')](a22_0x3c12('0xd5'));console[a22_0x3c12('0x40')](_0x44eafa);}[a22_0x3c12('0x38')](this));}[a22_0x3c12('0xb9')](_0x50a780,_0x32315b,_0x2a5974){const _0x33db15={'jsonrpc':a22_0x3c12('0xd6'),'method':_0x50a780,'params':_0x32315b,'id':0x1};this[a22_0x3c12('0x24')][a22_0x3c12('0x3d')](this[a22_0x3c12('0x21')]+a22_0x3c12('0xd7'),_0x33db15,![],{'user':this[a22_0x3c12('0x23')],'pass':this[a22_0x3c12('0x32')]})['then'](function(_0x6b0eac){_0x2a5974(_0x6b0eac);})['catch'](function(_0xcf3053){});}}exports[a22_0x3c12('0xd8')]=SyncPlaylistsService;