var a26_0x4b06=['loadMediaList:\x20','hasPlayListChanged','emptyDirSync','currentFile','push','Total:\x20','length','reloadMediaList','existsSync','removeSync','m3uFile','download','\x20of\x20','finishProcess','path','media_type','substring','split','slice','join','.mp4','**********+','checkVideo','copySync','youtube_single','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','failDownloadFiles','splice','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','get','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','data','Downloaded\x20','headers','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','ffmpeg','1/2','-loop','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','youtubeURL:\x20','--format=18','--no-check-certificate','Download\x20started','filename:\x20','_filename','size:\x20','complete','finished\x20youtube\x20downloading!','Finishing','this.playListFile:\x20','writeFileSync','#EXTCPlayListM3U::M3U','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Cleared','Playlist.Add','Playlist.Added','Player.Open','kodiCommandClient','RestartApp()','Rebooting','rss','header_active','setRss','enableClock','turnOffTV','turnOnTV','CECActivateSource()','xmlContent:\x20','xml2js','parseString','result:\x20%j','none','rssfeeds','set','feed','buildObject','xml:\x20%j','RefreshRSS()','lookandfeel.enablerssfeeds','Settings.SetSettingValue','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','next','throw','done','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','request','request-progress','child_process','spawn','exec','is-image','string-template','youtube-dl','uuid/v4','config.json','package.json','url-exists','media/','mediaFolder','playListFile','playlist.txt','filesFolder','lulo_playlist.m3u','playlistChanged','downloadFiles','http://localhost','kodiUser','lulo','kodiPassword','forceReload','httpClientService','HttpClientService','PlayerService','init','config','parse','context','readFileSync','playerId','baseURL','deploy/','playListServiceURL','playerServiceURL','kodi','kodiHost','checkDependencies','registerClient','updateSettings','bind','playlist','getItems','stringify','deviceUuid','networkInterfaces','version','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','getStatus','player','getCurrentlyPlayingVideo','item','label','reportStatus\x20playingItem:\x20','reportStatusResponse','checkFolders','ensureDir','tempFolder','loadMediaList'];(function(_0x28ee37,_0x3e850f){var _0x11c261=function(_0x2d00b4){while(--_0x2d00b4){_0x28ee37['push'](_0x28ee37['shift']());}};_0x11c261(++_0x3e850f);}(a26_0x4b06,0xa2));var a26_0x2ded=function(_0x2f6e77,_0x5d1f6e){_0x2f6e77=_0x2f6e77-0x0;var _0x2380bc=a26_0x4b06[_0x2f6e77];return _0x2380bc;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x953841,_0x59d526,_0x43d432,_0x3e9f1c){function _0x49abff(_0x488871){return _0x488871 instanceof _0x43d432?_0x488871:new _0x43d432(function(_0x5266fb){_0x5266fb(_0x488871);});}return new(_0x43d432||(_0x43d432=Promise))(function(_0x53d63a,_0x276566){function _0x2df13f(_0x541b3d){try{_0x9eb159(_0x3e9f1c[a26_0x2ded('0x0')](_0x541b3d));}catch(_0x4fdd3b){_0x276566(_0x4fdd3b);}}function _0x49d852(_0x2f4577){try{_0x9eb159(_0x3e9f1c[a26_0x2ded('0x1')](_0x2f4577));}catch(_0x57d86a){_0x276566(_0x57d86a);}}function _0x9eb159(_0x2308e9){_0x2308e9[a26_0x2ded('0x2')]?_0x53d63a(_0x2308e9[a26_0x2ded('0x3')]):_0x49abff(_0x2308e9[a26_0x2ded('0x3')])[a26_0x2ded('0x4')](_0x2df13f,_0x49d852);}_0x9eb159((_0x3e9f1c=_0x3e9f1c[a26_0x2ded('0x5')](_0x953841,_0x59d526||[]))[a26_0x2ded('0x0')]());});};Object[a26_0x2ded('0x6')](exports,a26_0x2ded('0x7'),{'value':!![]});const HttpClientService_1=require(a26_0x2ded('0x8'));const playerService_1=require('./playerService');const mediainfo=require(a26_0x2ded('0x9'));const fs=require('fs');const url=require(a26_0x2ded('0xa'));const http=require(a26_0x2ded('0xb'));const fsExtra=require('fs-extra');const request=require(a26_0x2ded('0xc'));const progress=require(a26_0x2ded('0xd'));const spawn=require(a26_0x2ded('0xe'))[a26_0x2ded('0xf')];const exec=require(a26_0x2ded('0xe'))[a26_0x2ded('0x10')];const isImage=require(a26_0x2ded('0x11'));const format=require(a26_0x2ded('0x12'));const os=require('os');const youtubedl=require(a26_0x2ded('0x13'));const uuidv4=require(a26_0x2ded('0x14'));const configFile=a26_0x2ded('0x15');const contextFile=a26_0x2ded('0x16');const urlExists=require(a26_0x2ded('0x17'));const kodi_rpc=require('node-kodi');const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']=a26_0x2ded('0x18');this['tempFolder']=this[a26_0x2ded('0x19')]+'temp/';this['filesFolder']=this[a26_0x2ded('0x19')]+'files/';this[a26_0x2ded('0x1a')]=this[a26_0x2ded('0x19')]+a26_0x2ded('0x1b');this['m3uFile']=this[a26_0x2ded('0x1c')]+a26_0x2ded('0x1d');this['currentFile']=0x0;this[a26_0x2ded('0x1e')]=![];this[a26_0x2ded('0x1f')]=[];this['failDownloadFiles']=[];this['newPlayList']={};this['kodiHost']=a26_0x2ded('0x20');this[a26_0x2ded('0x21')]=a26_0x2ded('0x22');this[a26_0x2ded('0x23')]='.lulo123.';this[a26_0x2ded('0x24')]=![];this[a26_0x2ded('0x25')]=new HttpClientService_1[(a26_0x2ded('0x26'))]();this['playerService']=new playerService_1[(a26_0x2ded('0x27'))]();}[a26_0x2ded('0x28')](){this[a26_0x2ded('0x29')]=JSON[a26_0x2ded('0x2a')](fs['readFileSync'](configFile));this[a26_0x2ded('0x2b')]=JSON[a26_0x2ded('0x2a')](fs[a26_0x2ded('0x2c')](contextFile));this[a26_0x2ded('0x2d')]=this[a26_0x2ded('0x29')][a26_0x2ded('0x2d')];this[a26_0x2ded('0x2e')]=process['env']['WEB_SERVICE_URL']+a26_0x2ded('0x2f');this[a26_0x2ded('0x30')]=this[a26_0x2ded('0x2e')]+'api/player_playlist.php?player_id={0}';this[a26_0x2ded('0x31')]=this[a26_0x2ded('0x2e')]+'api/player.php?player_id={0}';this[a26_0x2ded('0x32')]=new kodi_rpc({'url':this[a26_0x2ded('0x33')],'user':this['kodiUser'],'password':this[a26_0x2ded('0x23')]});this[a26_0x2ded('0x34')]();this[a26_0x2ded('0x35')]();this['checkFolders']();this['loadMediaList']();this[a26_0x2ded('0x36')]();setInterval(function(){this['getStatus']();}[a26_0x2ded('0x37')](this),0x2710);setInterval(function(){this[a26_0x2ded('0x35')]();}['bind'](this),0x493e0);}['checkDependencies'](){}[a26_0x2ded('0x35')](){this[a26_0x2ded('0x32')][a26_0x2ded('0x38')][a26_0x2ded('0x39')](0x1)['then'](function(_0x46fe4a){const _0x544dd7=JSON[a26_0x2ded('0x3a')](_0x46fe4a);const _0x5a7ba7={'player_id':this[a26_0x2ded('0x2d')],'device_uuid':this[a26_0x2ded('0x29')][a26_0x2ded('0x3b')],'network_info':JSON[a26_0x2ded('0x3a')](os[a26_0x2ded('0x3c')]()),'firmware_info':JSON[a26_0x2ded('0x3a')](this[a26_0x2ded('0x2b')][a26_0x2ded('0x3d')]),'playlist':_0x544dd7,'playing_item':'','status':0x0};this[a26_0x2ded('0x25')][a26_0x2ded('0x3e')](a26_0x2ded('0x3f'),_0x5a7ba7,![])[a26_0x2ded('0x4')](function(_0x1128ae){console[a26_0x2ded('0x40')](a26_0x2ded('0x41')+Date());})[a26_0x2ded('0x42')](function(_0x8f56f){});console[a26_0x2ded('0x40')](_0x5a7ba7);}['bind'](this));const _0x3f8d14=this['config']['deviceUuid'];if(!_0x3f8d14||_0x3f8d14==''){this[a26_0x2ded('0x29')][a26_0x2ded('0x3b')]=uuidv4();this[a26_0x2ded('0x29')]={'deviceUuid':this['config']['deviceUuid'],'playerId':this[a26_0x2ded('0x29')][a26_0x2ded('0x2d')]};fs['writeFileSync'](configFile,JSON[a26_0x2ded('0x3a')](this[a26_0x2ded('0x29')]));}}[a26_0x2ded('0x43')](){console[a26_0x2ded('0x40')](a26_0x2ded('0x43'));this['kodi'][a26_0x2ded('0x44')][a26_0x2ded('0x45')]()[a26_0x2ded('0x4')](function(_0x482cd9){const _0x4148a6=_0x482cd9[a26_0x2ded('0x46')][a26_0x2ded('0x47')];this['reportStatus'](_0x4148a6);}[a26_0x2ded('0x37')](this))[a26_0x2ded('0x42')](function(_0x2ab128){console['log'](_0x2ab128);this['reportStatus'](JSON[a26_0x2ded('0x3a')](_0x2ab128));}[a26_0x2ded('0x37')](this));}['reportStatus'](_0x21546b){console[a26_0x2ded('0x40')](a26_0x2ded('0x48')+_0x21546b);const _0x464a94={'player_id':this[a26_0x2ded('0x2d')],'device_uuid':this['config'][a26_0x2ded('0x3b')],'status':_0x21546b!=''&&_0x21546b!=null?0x1:0x0,'playing_item':_0x21546b};this[a26_0x2ded('0x25')][a26_0x2ded('0x3e')]('http://restapi.lulo.run/player_devices/report_status',_0x464a94,![])['then'](function(_0x5e1ce1){console[a26_0x2ded('0x40')](a26_0x2ded('0x49'));})[a26_0x2ded('0x42')](function(_0xbac54c){});}[a26_0x2ded('0x4a')](){fsExtra[a26_0x2ded('0x4b')](this['mediaFolder'],_0x53c4e7=>{});fsExtra['ensureDir'](this[a26_0x2ded('0x4c')],_0x44738d=>{});fsExtra['ensureDir'](this[a26_0x2ded('0x1c')],_0x2c7838=>{});}[a26_0x2ded('0x4d')](){const _0x192c16=format(this['playListServiceURL'],this[a26_0x2ded('0x2d')]);console[a26_0x2ded('0x40')](_0x192c16);request({'url':_0x192c16,'json':!![]},function(_0x239d0a,_0x239ba9,_0x3d6f13){console[a26_0x2ded('0x40')](a26_0x2ded('0x4e'));this['newPlayList']=_0x3d6f13;this[a26_0x2ded('0x1e')]=this[a26_0x2ded('0x4f')]();fsExtra[a26_0x2ded('0x50')](this['tempFolder']);this[a26_0x2ded('0x1f')]=[];this['failDownloadFiles']=[];this[a26_0x2ded('0x51')]=0x0;for(const _0x1df384 in _0x3d6f13){this[a26_0x2ded('0x1f')][a26_0x2ded('0x52')](_0x3d6f13[_0x1df384]);}console[a26_0x2ded('0x40')](a26_0x2ded('0x53')+this[a26_0x2ded('0x1f')]['length']);if(this[a26_0x2ded('0x1f')][a26_0x2ded('0x54')]>0x0){this['download']();}}[a26_0x2ded('0x37')](this));}[a26_0x2ded('0x55')](){this['forceReload']=!![];if(fsExtra[a26_0x2ded('0x56')](this[a26_0x2ded('0x4c')])){fsExtra[a26_0x2ded('0x50')](this[a26_0x2ded('0x4c')]);}if(fsExtra[a26_0x2ded('0x56')](this[a26_0x2ded('0x1c')])){fsExtra[a26_0x2ded('0x50')](this[a26_0x2ded('0x1c')]);}if(!fsExtra[a26_0x2ded('0x56')](this[a26_0x2ded('0x1a')])){fsExtra[a26_0x2ded('0x57')](this[a26_0x2ded('0x1a')]);}if(!fsExtra[a26_0x2ded('0x56')](this[a26_0x2ded('0x58')])){fsExtra[a26_0x2ded('0x57')](this[a26_0x2ded('0x58')]);}this[a26_0x2ded('0x4d')]();}[a26_0x2ded('0x4f')](){const _0x227e22=JSON[a26_0x2ded('0x3a')](this['newPlayList']);try{if(!fsExtra[a26_0x2ded('0x56')](this[a26_0x2ded('0x1a')])){return!![];}else{const _0x1ec7af=fsExtra[a26_0x2ded('0x2c')](this[a26_0x2ded('0x1a')])['toString']();if(_0x1ec7af!=_0x227e22){return!![];}}}catch(_0x5e4df7){console[a26_0x2ded('0x40')](_0x5e4df7);}return![];}[a26_0x2ded('0x59')](){console['log']('this.currentFile:\x20'+this['currentFile']+a26_0x2ded('0x5a')+this[a26_0x2ded('0x1f')]['length']);if(this[a26_0x2ded('0x51')]>=this['downloadFiles']['length']){this[a26_0x2ded('0x5b')]();return;}const _0x7243f=String(this[a26_0x2ded('0x1f')][this[a26_0x2ded('0x51')]][a26_0x2ded('0x5c')]);const _0x5c81e3=this[a26_0x2ded('0x1f')][this[a26_0x2ded('0x51')]][a26_0x2ded('0x5d')];let _0x14972d=_0x7243f[a26_0x2ded('0x5e')](_0x7243f['lastIndexOf']('/')+0x1);const _0x657a89=_0x14972d[a26_0x2ded('0x5f')]('.')[a26_0x2ded('0x60')](0x0,-0x1)[a26_0x2ded('0x61')]('.');let _0x181cc8=this[a26_0x2ded('0x2e')]+_0x7243f;const _0x4b3650=_0x181cc8[a26_0x2ded('0x5f')]('.')[a26_0x2ded('0x60')](0x0,-0x1)[a26_0x2ded('0x61')]('.');if(_0x5c81e3=='youtube_single'){_0x14972d=_0x14972d+a26_0x2ded('0x62');}else if(_0x5c81e3=='image'){_0x14972d=_0x657a89+'.mp4';_0x181cc8=_0x4b3650+'.mp4';}console['log'](a26_0x2ded('0x63'));console['log'](_0x7243f);console[a26_0x2ded('0x40')](_0x5c81e3);console[a26_0x2ded('0x40')](_0x14972d);console[a26_0x2ded('0x40')](_0x181cc8);console[a26_0x2ded('0x40')](_0x657a89);console[a26_0x2ded('0x40')](_0x4b3650);console[a26_0x2ded('0x40')](a26_0x2ded('0x63'));if(fsExtra[a26_0x2ded('0x56')](this['tempFolder']+_0x14972d)){this[a26_0x2ded('0x64')](this[a26_0x2ded('0x4c')]+_0x14972d)[a26_0x2ded('0x4')](function(_0x412578){if(_0x412578){this['currentFile']++;}else{this[a26_0x2ded('0x1e')]=!![];}this[a26_0x2ded('0x59')]();}['bind'](this));}else if(fsExtra[a26_0x2ded('0x56')](this[a26_0x2ded('0x1c')]+_0x14972d)){this[a26_0x2ded('0x64')](this['filesFolder']+_0x14972d)[a26_0x2ded('0x4')](function(_0x41c633){if(_0x41c633){fsExtra[a26_0x2ded('0x65')](this[a26_0x2ded('0x1c')]+_0x14972d,this[a26_0x2ded('0x4c')]+_0x14972d);this[a26_0x2ded('0x51')]++;}else{this[a26_0x2ded('0x1e')]=!![];}this[a26_0x2ded('0x59')]();}[a26_0x2ded('0x37')](this));}else{console['log']('Downloading:\x20'+_0x181cc8);this[a26_0x2ded('0x1e')]=!![];if(_0x5c81e3==a26_0x2ded('0x66')){this['downloadYouTube'](_0x7243f);}else{this[a26_0x2ded('0x67')](_0x181cc8,_0x14972d,_0x5c81e3);}}}[a26_0x2ded('0x64')](_0xd08ca4){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x2ded('0x40')](a26_0x2ded('0x68')+_0xd08ca4);const _0x58f429=yield mediainfo(_0xd08ca4)[a26_0x2ded('0x42')](_0x40cfa4=>{console[a26_0x2ded('0x40')](_0x40cfa4);fsExtra['removeSync'](_0xd08ca4);return![];});const _0x3f9945=_0x58f429[a26_0x2ded('0x69')][a26_0x2ded('0x6a')][a26_0x2ded('0x54')]>0x1&&_0x58f429['media']['track'][0x1]['@type']==a26_0x2ded('0x6b');if(!_0x3f9945){fsExtra[a26_0x2ded('0x57')](_0xd08ca4);}console[a26_0x2ded('0x40')](a26_0x2ded('0x6c')+_0x3f9945);return _0x3f9945;});}[a26_0x2ded('0x67')](_0x51f5e4,_0x352090,_0x21004d){const _0x1531e6=new Downloader();console[a26_0x2ded('0x40')](_0x51f5e4);console[a26_0x2ded('0x40')](_0x352090);console[a26_0x2ded('0x40')](_0x21004d);const _0x5e5509=_0x1531e6[a26_0x2ded('0x59')](_0x51f5e4,this['tempFolder']+_0x352090);urlExists(_0x51f5e4,function(_0x4df3c3,_0x2b521b){if(_0x2b521b){if(this[a26_0x2ded('0x6d')]['includes'](this['currentFile'])){const _0x42da6f=this['failDownloadFiles']['indexOf'](this[a26_0x2ded('0x51')]);if(_0x42da6f>-0x1){this[a26_0x2ded('0x6d')][a26_0x2ded('0x6e')](_0x42da6f,0x1);}}console[a26_0x2ded('0x40')]('downloading:\x20'+_0x51f5e4);_0x5e5509[a26_0x2ded('0x6f')]();}else{if(!this[a26_0x2ded('0x6d')]['includes'](this['currentFile'])){this[a26_0x2ded('0x6d')][a26_0x2ded('0x52')](this[a26_0x2ded('0x51')]);}console[a26_0x2ded('0x40')](a26_0x2ded('0x70')+_0x51f5e4);this[a26_0x2ded('0x51')]++;this[a26_0x2ded('0x59')]();}}[a26_0x2ded('0x37')](this));_0x5e5509['on'](a26_0x2ded('0x6f'),function(_0x5e5509){console[a26_0x2ded('0x40')](a26_0x2ded('0x71')+_0x51f5e4);});_0x5e5509['on'](a26_0x2ded('0x72'),function(_0x5e5509){console['log'](a26_0x2ded('0x73'));this[a26_0x2ded('0x59')]();}[a26_0x2ded('0x37')](this));_0x5e5509['on'](a26_0x2ded('0x74'),function(_0x5e5509){console[a26_0x2ded('0x40')](a26_0x2ded('0x74'));console[a26_0x2ded('0x40')](a26_0x2ded('0x75')+_0x352090);console[a26_0x2ded('0x40')](a26_0x2ded('0x76')+_0x21004d);this['checkVideo'](this[a26_0x2ded('0x4c')]+_0x352090)[a26_0x2ded('0x4')](function(_0x4c47ea){if(_0x4c47ea){this[a26_0x2ded('0x51')]++;}this[a26_0x2ded('0x59')]();}['bind'](this));}[a26_0x2ded('0x37')](this));_0x5e5509['on'](a26_0x2ded('0x77'),function(_0x5e5509){console['log'](a26_0x2ded('0x77'));});_0x5e5509['on'](a26_0x2ded('0x78'),function(_0x5e5509){console[a26_0x2ded('0x40')](a26_0x2ded('0x78'));});_0x5e5509['on'](a26_0x2ded('0x79'),function(_0x5e5509){console['log'](a26_0x2ded('0x79'));});}['downloadHTTPFile'](_0x29859e,_0x68944c,_0xf69533,_0x3e6040){console['log'](a26_0x2ded('0x7a'));console[a26_0x2ded('0x40')](_0x29859e);const _0x7d199a=!![];let _0x11dbfd=0x0;const _0x46117e='';console['log'](a26_0x2ded('0x7b')+_0x29859e+a26_0x2ded('0x7c')+_0x68944c);if(_0x11dbfd){if(_0x11dbfd>0x5){_0x3e6040(a26_0x2ded('0x7d'),_0x29859e,_0xf69533,null);return;}}else{_0x11dbfd=0x0;}const _0x35e96=this[a26_0x2ded('0x4c')]+_0x68944c;let _0x56519c;if(_0x3e6040===undefined){console[a26_0x2ded('0x40')](a26_0x2ded('0x7e')+_0x29859e+a26_0x2ded('0x7c')+_0x35e96);_0x3e6040=function(_0x5abcda,_0x4e719f){console['log'](a26_0x2ded('0x7f'),_0x5abcda,_0x4e719f);};}http[a26_0x2ded('0x80')][a26_0x2ded('0x81')]=0x64;const _0x2c2c1b={'host':url['parse'](_0x29859e)[a26_0x2ded('0x82')],'port':0x50,'path':url['parse'](_0x29859e)['pathname'],'agent':![]};const _0x32ffdb=http[a26_0x2ded('0x83')](_0x2c2c1b,function(_0x296692){let _0x5e0698=0x0;let _0x46bfe9=0x0;function _0x43a2f5(){if(_0x5e0698===undefined){console[a26_0x2ded('0x40')](_0x68944c+'\x20Progress:\x20unknown\x09'+_0x46bfe9+'/'+'?');}const _0x4cdc6b=_0x46bfe9/_0x5e0698*0x64;console[a26_0x2ded('0x40')](_0x68944c+a26_0x2ded('0x84')+_0x4cdc6b+'%\x09'+_0x46bfe9+'/'+_0x5e0698);}console[a26_0x2ded('0x40')](_0x68944c+'\x20'+_0x296692[a26_0x2ded('0x85')]);switch(_0x296692['statusCode']){case 0xc8:_0x5e0698=_0x296692['headers'][a26_0x2ded('0x86')]||_0x46117e;fs[a26_0x2ded('0x87')](_0x35e96,function(_0x193534,_0x56348b){if(!_0x193534){console['log'](a26_0x2ded('0x88')+_0x35e96);if(_0x56348b[a26_0x2ded('0x89')]==_0x5e0698){console[a26_0x2ded('0x40')](a26_0x2ded('0x8a')+_0x5e0698+')');console[a26_0x2ded('0x40')](a26_0x2ded('0x8b'));}else{console[a26_0x2ded('0x40')](a26_0x2ded('0x8c')+_0x56348b[a26_0x2ded('0x89')]+a26_0x2ded('0x8d')+_0x5e0698+')');}}_0x56519c=fs['createWriteStream'](_0x35e96);_0x296692[a26_0x2ded('0x8e')](_0x56519c);_0x296692['on'](a26_0x2ded('0x8f'),function(_0x27759b){_0x46bfe9+=_0x27759b['length'];_0x43a2f5();});_0x32ffdb['on'](a26_0x2ded('0x72'),function(_0x193534){console[a26_0x2ded('0x40')]('err:\x20');console[a26_0x2ded('0x40')](_0x193534);});_0x56519c['on']('finish',function(){console[a26_0x2ded('0x40')](a26_0x2ded('0x90')+_0x29859e+'\x20to\x20'+_0x68944c);_0x3e6040(null,_0x68944c,_0xf69533,_0x68944c);}[a26_0x2ded('0x37')](this));});break;case 0x12e:const _0x4c4aa4=_0x296692[a26_0x2ded('0x91')][a26_0x2ded('0x92')];console[a26_0x2ded('0x40')](a26_0x2ded('0x93')+_0x29859e+'\x20to\x20'+_0x4c4aa4);if(_0x11dbfd<0x5){this[a26_0x2ded('0x7a')](_0x4c4aa4,_0x68944c,_0x3e6040,_0x11dbfd++);}else{console[a26_0x2ded('0x72')](a26_0x2ded('0x94')+_0x29859e+'.');_0x3e6040(a26_0x2ded('0x95'),null,null,null);}return;case 0x194:console[a26_0x2ded('0x40')](a26_0x2ded('0x96')+_0x29859e);default:console['log'](a26_0x2ded('0x97')+_0x29859e+a26_0x2ded('0x98')+_0x296692[a26_0x2ded('0x85')]);_0x32ffdb[a26_0x2ded('0x99')]();_0x3e6040(_0x296692[a26_0x2ded('0x85')],null,null,null);return;}})['on'](a26_0x2ded('0x72'),function(_0x81a742){console['log'](a26_0x2ded('0x9a')+_0x29859e+'\x20'+_0x81a742[a26_0x2ded('0x9b')]);_0x3e6040(_0x81a742,null,null,null);});}[a26_0x2ded('0x9c')](_0x797fcd,_0x2265c4,_0x46ded6,_0x390343){console['log']('downloadHTTPFileCallback');console['log'](_0x797fcd);console[a26_0x2ded('0x40')](_0x2265c4);console[a26_0x2ded('0x40')](_0x46ded6);console[a26_0x2ded('0x40')](_0x390343);if(_0x46ded6==a26_0x2ded('0x9d')){const _0x1b2180=this['downloadFiles'][this[a26_0x2ded('0x51')]][a26_0x2ded('0x9e')]!=null?this[a26_0x2ded('0x1f')][this['currentFile']][a26_0x2ded('0x9e')]:0x1e;this[a26_0x2ded('0x9f')](_0x390343,_0x1b2180);}else if(_0x46ded6==a26_0x2ded('0xa0')){if(_0x797fcd==null&&_0x2265c4!=''){this[a26_0x2ded('0x51')]++;}this['download']();}console[a26_0x2ded('0x40')](this[a26_0x2ded('0x51')]);}[a26_0x2ded('0xa1')](_0x2c3c52,_0x5de63d,_0xffe800){progress(request(_0x2c3c52),{})['on'](a26_0x2ded('0xa2'),function(_0xb2ded6){console[a26_0x2ded('0x40')](_0xb2ded6);})['on']('error',function(_0x31d28a){console['log'](a26_0x2ded('0xa3'));this[a26_0x2ded('0x59')]();})['on'](a26_0x2ded('0x74'),function(){console['log'](a26_0x2ded('0x75')+_0x5de63d);console['log']('mediaType:\x20'+_0xffe800);if(_0xffe800==a26_0x2ded('0x9d')){const _0x3ca285=this[a26_0x2ded('0x1f')][this['currentFile']]['duration']!=null?this[a26_0x2ded('0x1f')][this['currentFile']]['duration']:0x1e;this[a26_0x2ded('0x9f')](_0x5de63d,_0x3ca285);}else if(_0xffe800=='video'){this[a26_0x2ded('0x51')]++;this[a26_0x2ded('0x59')]();}}[a26_0x2ded('0x37')](this))[a26_0x2ded('0x8e')](fs['createWriteStream'](this[a26_0x2ded('0x4c')]+_0x5de63d));}[a26_0x2ded('0x9f')](_0x5ef683,_0x4569a6=0x1e){const _0x35249c=this['tempFolder']+_0x5ef683;console[a26_0x2ded('0x40')](_0x35249c);console[a26_0x2ded('0x40')](_0x5ef683);const _0x28f152=_0x5ef683[a26_0x2ded('0x5f')]('.')[a26_0x2ded('0x60')](0x0,-0x1)[a26_0x2ded('0x61')]('.');const _0x16f995=a26_0x2ded('0xa4');const _0x3aba50=['-y','-r',a26_0x2ded('0xa5'),a26_0x2ded('0xa6'),'1','-pattern_type',a26_0x2ded('0xa7'),'-i',_0x35249c,'-t',String(_0x4569a6),a26_0x2ded('0xa8'),a26_0x2ded('0xa9'),a26_0x2ded('0xaa'),a26_0x2ded('0xab'),'-r','25',a26_0x2ded('0xac'),a26_0x2ded('0xad'),this['tempFolder']+_0x28f152+'.mp4'];const _0x5d447a=spawn(_0x16f995,_0x3aba50);_0x5d447a[a26_0x2ded('0xae')]['on'](a26_0x2ded('0x8f'),function(_0x59cb2f){console['log'](a26_0x2ded('0xaf')+_0x35249c);});_0x5d447a[a26_0x2ded('0xb0')]['on'](a26_0x2ded('0x8f'),function(_0x3eb691){console[a26_0x2ded('0x40')](a26_0x2ded('0xb1')+_0x3eb691);}[a26_0x2ded('0x37')](this));_0x5d447a['on'](a26_0x2ded('0xb2'),function(){console[a26_0x2ded('0x40')](a26_0x2ded('0xb3'));this[a26_0x2ded('0x51')]++;this['download']();}[a26_0x2ded('0x37')](this));}[a26_0x2ded('0xb4')](_0x129246){const _0x4cd4c8=this['tempFolder']+'/'+_0x129246+a26_0x2ded('0x62');const _0x5c3c11=a26_0x2ded('0xb5')+_0x129246;console[a26_0x2ded('0x40')](a26_0x2ded('0xb6')+_0x5c3c11);console[a26_0x2ded('0x40')]('outFileName:\x20'+_0x4cd4c8);const _0x3257db=youtubedl(_0x5c3c11,[a26_0x2ded('0xb7'),a26_0x2ded('0xb8')],{'cwd':__dirname});_0x3257db['on']('info',function(_0x33be0b){console[a26_0x2ded('0x40')](a26_0x2ded('0xb9'));console[a26_0x2ded('0x40')](a26_0x2ded('0xba')+_0x33be0b[a26_0x2ded('0xbb')]);console[a26_0x2ded('0x40')](a26_0x2ded('0xbc')+_0x33be0b[a26_0x2ded('0x89')]);});_0x3257db['on'](a26_0x2ded('0xbd'),function complete(_0x48ff16){'use strict';console[a26_0x2ded('0x40')](a26_0x2ded('0xba')+_0x48ff16[a26_0x2ded('0xbb')]+'\x20already\x20downloaded.');});_0x3257db['on']('end',function(){console[a26_0x2ded('0x40')](a26_0x2ded('0xbe'));this[a26_0x2ded('0x64')](_0x4cd4c8)[a26_0x2ded('0x4')](function(_0x21778e){if(_0x21778e){this['currentFile']++;}this[a26_0x2ded('0x59')]();}[a26_0x2ded('0x37')](this));}[a26_0x2ded('0x37')](this));_0x3257db[a26_0x2ded('0x8e')](fs['createWriteStream'](_0x4cd4c8));}[a26_0x2ded('0x5b')](){console['log'](a26_0x2ded('0xbf'));if(this[a26_0x2ded('0x1e')]){if(this[a26_0x2ded('0x6d')][a26_0x2ded('0x54')]==0x0){console[a26_0x2ded('0x40')](a26_0x2ded('0xc0')+this[a26_0x2ded('0x1a')]);fs[a26_0x2ded('0xc1')](this[a26_0x2ded('0x1a')],JSON[a26_0x2ded('0x3a')](this['newPlayList']));let _0xc874cc=a26_0x2ded('0xc2')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x28155a in this[a26_0x2ded('0x1f')]){const _0x3e011c=this[a26_0x2ded('0x1f')][_0x28155a][a26_0x2ded('0x5c')];const _0x22929a=this[a26_0x2ded('0x1f')][_0x28155a][a26_0x2ded('0x5d')];const _0x41758d=_0x3e011c[a26_0x2ded('0x5e')](_0x3e011c['lastIndexOf']('/')+0x1);let _0x21beba=_0x41758d[a26_0x2ded('0x5f')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x22929a=='youtube_single'){_0x21beba=_0x3e011c;}_0xc874cc+=a26_0x2ded('0xc3')+_0x21beba+a26_0x2ded('0x62')+'\x0d\x0a';console[a26_0x2ded('0x40')](a26_0x2ded('0xc4')+_0xc874cc);}console[a26_0x2ded('0x40')](a26_0x2ded('0xc4')+_0xc874cc);fsExtra['emptyDirSync'](this[a26_0x2ded('0x1c')]);console['log'](a26_0x2ded('0xc5')+this[a26_0x2ded('0x4c')]);fsExtra[a26_0x2ded('0x65')](this[a26_0x2ded('0x4c')],this[a26_0x2ded('0x1c')]);console[a26_0x2ded('0x40')](a26_0x2ded('0xc6')+this[a26_0x2ded('0x58')]);fsExtra[a26_0x2ded('0xc1')](this['m3uFile'],_0xc874cc);console[a26_0x2ded('0x40')](a26_0x2ded('0xc7')+this[a26_0x2ded('0x4c')]);fsExtra['emptyDirSync'](this[a26_0x2ded('0x4c')]);console['log'](a26_0x2ded('0xc8'));this[a26_0x2ded('0xc9')]();}else{console[a26_0x2ded('0x40')](a26_0x2ded('0xca'));this[a26_0x2ded('0x51')]=0x0;setTimeout(function(){this[a26_0x2ded('0x59')]();}[a26_0x2ded('0x37')](this),0x1388);}}else{console['log'](a26_0x2ded('0xcb'));}}[a26_0x2ded('0xcc')](){this[a26_0x2ded('0xcd')]('Playlist.Clear',{'playlistid':0x1},function(_0x1a391a){console['log'](a26_0x2ded('0xce'));console['log'](_0x1a391a);this['jsonrpcClient'](a26_0x2ded('0xcf'),{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x1a391a){console[a26_0x2ded('0x40')](a26_0x2ded('0xd0'));console[a26_0x2ded('0x40')](_0x1a391a);this['jsonrpcClient'](a26_0x2ded('0xd1'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x1a391a){console[a26_0x2ded('0x40')]('Playlist.Opened');console[a26_0x2ded('0x40')](_0x1a391a);this[a26_0x2ded('0xd2')](a26_0x2ded('0xd3'));}[a26_0x2ded('0x37')](this));}[a26_0x2ded('0x37')](this));}['bind'](this));}[a26_0x2ded('0xc9')](){console['log'](a26_0x2ded('0xd4'));exec('sudo\x20/sbin/reboot\x20-f',function(_0x295a15){console[a26_0x2ded('0x40')](_0x295a15);});}[a26_0x2ded('0x36')](){const _0x540eb9=format(this[a26_0x2ded('0x31')],this[a26_0x2ded('0x2d')]);console[a26_0x2ded('0x40')](_0x540eb9);request({'url':_0x540eb9,'json':!![]},function(_0x49f795,_0x584a68,_0x532df0){if(_0x532df0['length']>0x0){const _0x298d86=_0x532df0[0x0];const _0x455a01=_0x298d86[a26_0x2ded('0xd5')];const _0x4e8f90=_0x298d86[a26_0x2ded('0xd6')]==0x1;this[a26_0x2ded('0xd7')](_0x455a01);this[a26_0x2ded('0xd8')](_0x4e8f90);this[a26_0x2ded('0x35')]();}console[a26_0x2ded('0x40')](_0x532df0);}['bind'](this));}[a26_0x2ded('0xd9')](){this[a26_0x2ded('0xd2')]('CECStandby()');}[a26_0x2ded('0xda')](){this[a26_0x2ded('0xd2')](a26_0x2ded('0xdb'));}[a26_0x2ded('0xd7')](_0x11262b){const _0x207651=_0x11262b!=null&&_0x11262b!='';const _0x186615='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra[a26_0x2ded('0x56')](_0x186615)){const _0x35c8bc=fsExtra['readFileSync'](_0x186615);console[a26_0x2ded('0x40')](a26_0x2ded('0xdc')+_0x35c8bc);const _0x36ac0c=require(a26_0x2ded('0xdd'));const _0x4d16b0=_0x36ac0c[a26_0x2ded('0xde')];_0x4d16b0(_0x35c8bc,function(_0x325cee,_0x1f6dd0){console[a26_0x2ded('0x40')]('err:\x20%j',_0x325cee);console[a26_0x2ded('0x40')](a26_0x2ded('0xdf'),_0x1f6dd0);if(!_0x11262b||_0x11262b==null||_0x11262b==''){_0x11262b=a26_0x2ded('0xe0');}_0x1f6dd0[a26_0x2ded('0xe1')][a26_0x2ded('0xe2')][0x0][a26_0x2ded('0xe3')][0x0]['_']=_0x11262b;const _0x7fbfbf=new _0x36ac0c['Builder']();const _0x4a304b=_0x7fbfbf[a26_0x2ded('0xe4')](_0x1f6dd0);console[a26_0x2ded('0x40')](a26_0x2ded('0xe5'),_0x4a304b);fsExtra[a26_0x2ded('0xc1')](_0x186615,_0x4a304b);});this[a26_0x2ded('0xd2')](a26_0x2ded('0xe6'));this[a26_0x2ded('0xcd')]('Settings.SetSettingValue',{'setting':a26_0x2ded('0xe7'),'value':_0x207651},function(_0x2ea001){console[a26_0x2ded('0x40')]('setRss:');console[a26_0x2ded('0x40')](_0x2ea001);}[a26_0x2ded('0x37')](this));}}[a26_0x2ded('0xd8')](_0x5768c3){this[a26_0x2ded('0xcd')](a26_0x2ded('0xe8'),{'setting':a26_0x2ded('0xe9'),'value':_0x5768c3},function(_0x1bf782){console[a26_0x2ded('0x40')](a26_0x2ded('0xea'));console[a26_0x2ded('0x40')](_0x1bf782);}[a26_0x2ded('0x37')](this));}[a26_0x2ded('0xd2')](_0x49a265){exec(a26_0x2ded('0xeb')+_0x49a265+'\x22',function(_0x52fabc){console[a26_0x2ded('0x40')](_0x52fabc);});}[a26_0x2ded('0xcd')](_0x508be9,_0x5dd82a,_0x5734c1){const _0x2240da={'jsonrpc':a26_0x2ded('0xec'),'method':_0x508be9,'params':_0x5dd82a,'id':0x1};const _0x25bb5c={'user':this['kodiUser'],'pass':this[a26_0x2ded('0x23')]};console[a26_0x2ded('0x40')]('jsonrpcClient\x20data',_0x2240da);console[a26_0x2ded('0x40')](a26_0x2ded('0xed'),_0x25bb5c);this[a26_0x2ded('0x25')][a26_0x2ded('0x3e')](this[a26_0x2ded('0x33')]+a26_0x2ded('0xee'),_0x2240da,![],_0x25bb5c)[a26_0x2ded('0x4')](function(_0x4df14d){_0x5734c1(_0x4df14d);})[a26_0x2ded('0x42')](function(_0x401dc8){});}}exports[a26_0x2ded('0xef')]=SyncPlaylistsService;