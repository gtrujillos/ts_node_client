var a25_0x29c2=['destroyed','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','host','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','error','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','progress','ffmpeg','1/2','-loop','-pattern_type','glob','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','Download\x20started','filename:\x20','size:\x20','complete','_filename','\x20already\x20downloaded.','finishProcess','Finishing','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','path','DateUtils','start_date','end_date','substring','/home/osmc/luloclient/media/files/','toString','trim','refreshPlayer','Playlist.Cleared','jsonrpcClient','Playlist.Added','Player.Open','Playlist.Opened','Rebooting','rss','header_active','enableClock','turnOffTV','CECStandby()','turnOnTV','kodiCommandClient','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','set','Builder','buildObject','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','enableClock:\x20','2.0','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','__awaiter','next','done','value','then','defineProperty','../infrastructure/HttpClientService','../infrastructure/utils/dateUtils','node-mediainfo','http','request','request-progress','child_process','spawn','is-image','string-template','config.json','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','downloadFiles','failDownloadFiles','http://192.168.0.109','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','PlayerService','init','config','parse','readFileSync','playerId','baseURL','WEB_SERVICE_URL','playListServiceURL','playerServiceURL','api/player.php?player_id={0}','kodi','kodiHost','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','checkSchedule','checkDependencies','playlist','stringify','networkInterfaces','version','post','http://restapi.lulo.run/player_devices/register','log','deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','item','label','reportStatus','catch','reportStatus\x20playingItem:\x20','ensureDir','newPlayList','hasPlayListChanged','emptyDirSync','push','Total\x20to\x20download:\x20','length','download','reloadMediaList','existsSync','removeSync','this.currentFile:\x20','media_type','lastIndexOf','split','join','slice','youtube_single','.mp4','image','**********+','checkVideo','playlistChanged','copySync','downloadYouTube','m3uFileUpdate','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','downloader','includes','splice','downloading:\x20','start','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped'];(function(_0x3f3bb2,_0x3b7c1a){var _0x59814b=function(_0x100c85){while(--_0x100c85){_0x3f3bb2['push'](_0x3f3bb2['shift']());}};_0x59814b(++_0x3b7c1a);}(a25_0x29c2,0x154));var a25_0x45c2=function(_0x2f49c4,_0xd2635f){_0x2f49c4=_0x2f49c4-0x0;var _0x31c7c6=a25_0x29c2[_0x2f49c4];return _0x31c7c6;};'use strict';var __awaiter=this&&this[a25_0x45c2('0x0')]||function(_0x51b12a,_0x33abcc,_0x2a1a79,_0x9dcc53){function _0x25b822(_0x597679){return _0x597679 instanceof _0x2a1a79?_0x597679:new _0x2a1a79(function(_0x4ef60a){_0x4ef60a(_0x597679);});}return new(_0x2a1a79||(_0x2a1a79=Promise))(function(_0x88e733,_0x4c44f0){function _0x260e45(_0x5bb9eb){try{_0x45f3ce(_0x9dcc53[a25_0x45c2('0x1')](_0x5bb9eb));}catch(_0x2009bc){_0x4c44f0(_0x2009bc);}}function _0x437535(_0x463587){try{_0x45f3ce(_0x9dcc53['throw'](_0x463587));}catch(_0x427062){_0x4c44f0(_0x427062);}}function _0x45f3ce(_0x4bf748){_0x4bf748[a25_0x45c2('0x2')]?_0x88e733(_0x4bf748[a25_0x45c2('0x3')]):_0x25b822(_0x4bf748['value'])[a25_0x45c2('0x4')](_0x260e45,_0x437535);}_0x45f3ce((_0x9dcc53=_0x9dcc53['apply'](_0x51b12a,_0x33abcc||[]))[a25_0x45c2('0x1')]());});};Object[a25_0x45c2('0x5')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a25_0x45c2('0x6'));const playerService_1=require('./playerService');const dateUtils_1=require(a25_0x45c2('0x7'));const mediainfo=require(a25_0x45c2('0x8'));const fs=require('fs');const url=require('url');const http=require(a25_0x45c2('0x9'));const fsExtra=require('fs-extra');const request=require(a25_0x45c2('0xa'));const progress=require(a25_0x45c2('0xb'));const spawn=require(a25_0x45c2('0xc'))[a25_0x45c2('0xd')];const exec=require(a25_0x45c2('0xc'))['exec'];const isImage=require(a25_0x45c2('0xe'));const format=require(a25_0x45c2('0xf'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require('uuid/v4');const configFile=a25_0x45c2('0x10');const contextFile='package.json';const urlExists=require('url-exists');const kodi_rpc=require('node-kodi');const Downloader=require(a25_0x45c2('0x11'));class SyncPlaylistsService{constructor(){this[a25_0x45c2('0x12')]=a25_0x45c2('0x13');this[a25_0x45c2('0x14')]=this[a25_0x45c2('0x12')]+a25_0x45c2('0x15');this[a25_0x45c2('0x16')]=this[a25_0x45c2('0x12')]+a25_0x45c2('0x17');this[a25_0x45c2('0x18')]=this[a25_0x45c2('0x12')]+a25_0x45c2('0x19');this[a25_0x45c2('0x1a')]=this[a25_0x45c2('0x16')]+a25_0x45c2('0x1b');this[a25_0x45c2('0x1c')]=0x0;this['playlistChanged']=![];this[a25_0x45c2('0x1d')]=[];this[a25_0x45c2('0x1e')]=[];this['newPlayList']={};this['kodiHost']=a25_0x45c2('0x1f');this[a25_0x45c2('0x20')]=a25_0x45c2('0x21');this[a25_0x45c2('0x22')]=a25_0x45c2('0x23');this[a25_0x45c2('0x24')]=![];this[a25_0x45c2('0x25')]=new HttpClientService_1['HttpClientService']();this['playerService']=new playerService_1[(a25_0x45c2('0x26'))]();}[a25_0x45c2('0x27')](){this[a25_0x45c2('0x28')]=JSON[a25_0x45c2('0x29')](fs[a25_0x45c2('0x2a')](configFile));this['context']=JSON[a25_0x45c2('0x29')](fs['readFileSync'](contextFile));this['playerId']=this[a25_0x45c2('0x28')][a25_0x45c2('0x2b')];this[a25_0x45c2('0x2c')]=process['env'][a25_0x45c2('0x2d')]+'deploy/';this[a25_0x45c2('0x2e')]=this['baseURL']+'api/player_playlist.php?player_id={0}';this[a25_0x45c2('0x2f')]=this[a25_0x45c2('0x2c')]+a25_0x45c2('0x30');this[a25_0x45c2('0x31')]=new kodi_rpc({'url':this[a25_0x45c2('0x32')],'user':this[a25_0x45c2('0x20')],'password':this[a25_0x45c2('0x22')]});this['checkDependencies']();this[a25_0x45c2('0x33')]();this[a25_0x45c2('0x34')]();this[a25_0x45c2('0x35')]();this[a25_0x45c2('0x36')]();setInterval(function(){this[a25_0x45c2('0x37')]();}[a25_0x45c2('0x38')](this),0x2710);setInterval(function(){this['registerClient']();}[a25_0x45c2('0x38')](this),0x493e0);setInterval(function(){this[a25_0x45c2('0x39')]();}['bind'](this),0x2710);}[a25_0x45c2('0x3a')](){}[a25_0x45c2('0x33')](){this[a25_0x45c2('0x31')][a25_0x45c2('0x3b')]['getItems'](0x1)[a25_0x45c2('0x4')](function(_0x34c6a3){const _0x226fd0=JSON[a25_0x45c2('0x3c')](_0x34c6a3);const _0xa40803={'player_id':this[a25_0x45c2('0x2b')],'device_uuid':this[a25_0x45c2('0x28')]['deviceUuid'],'network_info':JSON[a25_0x45c2('0x3c')](os[a25_0x45c2('0x3d')]()),'firmware_info':JSON[a25_0x45c2('0x3c')](this['context'][a25_0x45c2('0x3e')]),'playlist':_0x226fd0,'playing_item':'','status':0x0};this[a25_0x45c2('0x25')][a25_0x45c2('0x3f')](a25_0x45c2('0x40'),_0xa40803,![])[a25_0x45c2('0x4')](function(_0x24e058){console[a25_0x45c2('0x41')]('register\x20response:\x20'+Date());})['catch'](function(_0x24e472){});console[a25_0x45c2('0x41')](_0xa40803);}[a25_0x45c2('0x38')](this));const _0xb813d2=this[a25_0x45c2('0x28')][a25_0x45c2('0x42')];if(!_0xb813d2||_0xb813d2==''){this[a25_0x45c2('0x28')][a25_0x45c2('0x42')]=uuidv4();this[a25_0x45c2('0x28')]={'deviceUuid':this[a25_0x45c2('0x28')][a25_0x45c2('0x42')],'playerId':this[a25_0x45c2('0x28')]['playerId']};fs[a25_0x45c2('0x43')](configFile,JSON['stringify'](this[a25_0x45c2('0x28')]));}}['getStatus'](){console['log'](a25_0x45c2('0x37'));this['kodi'][a25_0x45c2('0x44')][a25_0x45c2('0x45')]()[a25_0x45c2('0x4')](function(_0x1de534){const _0x1c29ff=_0x1de534[a25_0x45c2('0x46')][a25_0x45c2('0x47')];this[a25_0x45c2('0x48')](_0x1c29ff);}['bind'](this))[a25_0x45c2('0x49')](function(_0x3f66b8){console[a25_0x45c2('0x41')](_0x3f66b8);this['reportStatus'](JSON['stringify'](_0x3f66b8));}[a25_0x45c2('0x38')](this));}[a25_0x45c2('0x48')](_0x3e3a10){console[a25_0x45c2('0x41')](a25_0x45c2('0x4a')+_0x3e3a10);const _0x23bbd8={'player_id':this[a25_0x45c2('0x2b')],'device_uuid':this[a25_0x45c2('0x28')]['deviceUuid'],'status':_0x3e3a10!=''&&_0x3e3a10!=null?0x1:0x0,'playing_item':_0x3e3a10};this[a25_0x45c2('0x25')][a25_0x45c2('0x3f')]('http://restapi.lulo.run/player_devices/report_status',_0x23bbd8,![])[a25_0x45c2('0x4')](function(_0x24dd6e){console[a25_0x45c2('0x41')]('reportStatusResponse');})['catch'](function(_0x2f78fa){});}[a25_0x45c2('0x34')](){fsExtra[a25_0x45c2('0x4b')](this[a25_0x45c2('0x12')],_0x52a4a6=>{});fsExtra[a25_0x45c2('0x4b')](this[a25_0x45c2('0x14')],_0x3f3cac=>{});fsExtra[a25_0x45c2('0x4b')](this[a25_0x45c2('0x16')],_0x457122=>{});}[a25_0x45c2('0x35')](){const _0x524bbb=format(this[a25_0x45c2('0x2e')],this[a25_0x45c2('0x2b')]);console[a25_0x45c2('0x41')](_0x524bbb);request({'url':_0x524bbb,'json':!![]},function(_0x561649,_0x41febf,_0x5b6216){console[a25_0x45c2('0x41')]('loadMediaList:\x20');this[a25_0x45c2('0x4c')]=_0x5b6216;this['playlistChanged']=this[a25_0x45c2('0x4d')]();fsExtra[a25_0x45c2('0x4e')](this['tempFolder']);this[a25_0x45c2('0x1d')]=[];this[a25_0x45c2('0x1e')]=[];this[a25_0x45c2('0x1c')]=0x0;for(const _0x1862b6 in _0x5b6216){this['downloadFiles'][a25_0x45c2('0x4f')](_0x5b6216[_0x1862b6]);}console[a25_0x45c2('0x41')](a25_0x45c2('0x50')+this[a25_0x45c2('0x1d')][a25_0x45c2('0x51')]);if(this[a25_0x45c2('0x1d')][a25_0x45c2('0x51')]>0x0){this[a25_0x45c2('0x52')]();}}[a25_0x45c2('0x38')](this));}[a25_0x45c2('0x53')](){this[a25_0x45c2('0x24')]=!![];if(fsExtra[a25_0x45c2('0x54')](this[a25_0x45c2('0x14')])){fsExtra[a25_0x45c2('0x4e')](this[a25_0x45c2('0x14')]);}if(fsExtra[a25_0x45c2('0x54')](this[a25_0x45c2('0x16')])){fsExtra[a25_0x45c2('0x4e')](this[a25_0x45c2('0x16')]);}if(!fsExtra[a25_0x45c2('0x54')](this[a25_0x45c2('0x18')])){fsExtra[a25_0x45c2('0x55')](this[a25_0x45c2('0x18')]);}if(!fsExtra['existsSync'](this[a25_0x45c2('0x1a')])){fsExtra[a25_0x45c2('0x55')](this[a25_0x45c2('0x1a')]);}this[a25_0x45c2('0x35')]();}[a25_0x45c2('0x4d')](){const _0x383091=JSON[a25_0x45c2('0x3c')](this['newPlayList']);try{if(!fsExtra[a25_0x45c2('0x54')](this[a25_0x45c2('0x18')])){return!![];}else{const _0x41204a=fsExtra['readFileSync'](this[a25_0x45c2('0x18')])['toString']();if(_0x41204a!=_0x383091){return!![];}}}catch(_0x2f0b5f){console[a25_0x45c2('0x41')](_0x2f0b5f);}return![];}[a25_0x45c2('0x52')](){console[a25_0x45c2('0x41')](a25_0x45c2('0x56')+this[a25_0x45c2('0x1c')]+'\x20of\x20'+this[a25_0x45c2('0x1d')][a25_0x45c2('0x51')]);if(this[a25_0x45c2('0x1c')]>=this['downloadFiles'][a25_0x45c2('0x51')]){this['finishProcess']();return;}const _0x129f53=String(this[a25_0x45c2('0x1d')][this[a25_0x45c2('0x1c')]]['path']);const _0x2f4acd=this[a25_0x45c2('0x1d')][this[a25_0x45c2('0x1c')]][a25_0x45c2('0x57')];let _0x3abc6f=_0x129f53['substring'](_0x129f53[a25_0x45c2('0x58')]('/')+0x1);const _0xd8ee04=_0x3abc6f[a25_0x45c2('0x59')]('.')['slice'](0x0,-0x1)[a25_0x45c2('0x5a')]('.');let _0x5afa38=this['baseURL']+_0x129f53;const _0x568758=_0x5afa38[a25_0x45c2('0x59')]('.')[a25_0x45c2('0x5b')](0x0,-0x1)['join']('.');if(_0x2f4acd==a25_0x45c2('0x5c')){_0x3abc6f=_0x3abc6f+a25_0x45c2('0x5d');}else if(_0x2f4acd==a25_0x45c2('0x5e')){_0x3abc6f=_0xd8ee04+a25_0x45c2('0x5d');_0x5afa38=_0x568758+a25_0x45c2('0x5d');}console[a25_0x45c2('0x41')](a25_0x45c2('0x5f'));console['log'](_0x129f53);console[a25_0x45c2('0x41')](_0x2f4acd);console[a25_0x45c2('0x41')](_0x3abc6f);console[a25_0x45c2('0x41')](_0x5afa38);console[a25_0x45c2('0x41')](_0xd8ee04);console['log'](_0x568758);console[a25_0x45c2('0x41')](a25_0x45c2('0x5f'));if(fsExtra['existsSync'](this[a25_0x45c2('0x14')]+_0x3abc6f)){this[a25_0x45c2('0x60')](this[a25_0x45c2('0x14')]+_0x3abc6f)[a25_0x45c2('0x4')](function(_0xdc5789){if(_0xdc5789){this[a25_0x45c2('0x1c')]++;}else{this[a25_0x45c2('0x61')]=!![];}this['download']();}['bind'](this));}else if(fsExtra['existsSync'](this[a25_0x45c2('0x16')]+_0x3abc6f)){this['checkVideo'](this[a25_0x45c2('0x16')]+_0x3abc6f)[a25_0x45c2('0x4')](function(_0x21b529){if(_0x21b529){fsExtra[a25_0x45c2('0x62')](this[a25_0x45c2('0x16')]+_0x3abc6f,this[a25_0x45c2('0x14')]+_0x3abc6f);this['currentFile']++;}else{this[a25_0x45c2('0x61')]=!![];}this[a25_0x45c2('0x52')]();}[a25_0x45c2('0x38')](this));}else{console[a25_0x45c2('0x41')]('Downloading:\x20'+_0x5afa38);this['playlistChanged']=!![];if(_0x2f4acd==a25_0x45c2('0x5c')){this[a25_0x45c2('0x63')](_0x129f53);}else{this['downloader'](_0x5afa38,_0x3abc6f,_0x2f4acd);}}}['checkSchedule'](){const _0x3aba5c=this[a25_0x45c2('0x64')]();console[a25_0x45c2('0x41')]('m3uFileUpdate',_0x3aba5c);if(_0x3aba5c){this['refreshPlayer']();}}[a25_0x45c2('0x60')](_0x397695){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a25_0x45c2('0x65')+_0x397695);const _0x248b5f=yield mediainfo(_0x397695)[a25_0x45c2('0x49')](_0x51f0b4=>{console[a25_0x45c2('0x41')](_0x51f0b4);fsExtra['removeSync'](_0x397695);return![];});const _0x4f692a=_0x248b5f[a25_0x45c2('0x66')][a25_0x45c2('0x67')][a25_0x45c2('0x51')]>0x1&&_0x248b5f['media'][a25_0x45c2('0x67')][0x1][a25_0x45c2('0x68')]==a25_0x45c2('0x69');if(!_0x4f692a){fsExtra[a25_0x45c2('0x55')](_0x397695);}console[a25_0x45c2('0x41')](a25_0x45c2('0x6a')+_0x4f692a);return _0x4f692a;});}[a25_0x45c2('0x6b')](_0x10008a,_0x50a3cc,_0x306c88){const _0x26ad5e=new Downloader();console['log'](_0x10008a);console['log'](_0x50a3cc);console['log'](_0x306c88);const _0x1f91d3=_0x26ad5e['download'](_0x10008a,this[a25_0x45c2('0x14')]+_0x50a3cc);urlExists(_0x10008a,function(_0x2a1163,_0x461cad){if(_0x461cad){if(this[a25_0x45c2('0x1e')][a25_0x45c2('0x6c')](this['currentFile'])){const _0x1f9f54=this['failDownloadFiles']['indexOf'](this[a25_0x45c2('0x1c')]);if(_0x1f9f54>-0x1){this[a25_0x45c2('0x1e')][a25_0x45c2('0x6d')](_0x1f9f54,0x1);}}console[a25_0x45c2('0x41')](a25_0x45c2('0x6e')+_0x10008a);_0x1f91d3[a25_0x45c2('0x6f')]();}else{if(!this['failDownloadFiles'][a25_0x45c2('0x6c')](this[a25_0x45c2('0x1c')])){this[a25_0x45c2('0x1e')][a25_0x45c2('0x4f')](this[a25_0x45c2('0x1c')]);}console[a25_0x45c2('0x41')]('Error:\x20'+_0x10008a);this['currentFile']++;this['download']();}}[a25_0x45c2('0x38')](this));_0x1f91d3['on'](a25_0x45c2('0x6f'),function(_0x1f91d3){console[a25_0x45c2('0x41')](a25_0x45c2('0x70')+_0x10008a);});_0x1f91d3['on']('error',function(_0x1f91d3){console[a25_0x45c2('0x41')](a25_0x45c2('0x71'));this[a25_0x45c2('0x52')]();}[a25_0x45c2('0x38')](this));_0x1f91d3['on'](a25_0x45c2('0x72'),function(_0x1f91d3){console[a25_0x45c2('0x41')]('end');console['log'](a25_0x45c2('0x73')+_0x50a3cc);console['log'](a25_0x45c2('0x74')+_0x306c88);this[a25_0x45c2('0x60')](this[a25_0x45c2('0x14')]+_0x50a3cc)[a25_0x45c2('0x4')](function(_0x5301ee){if(_0x5301ee){this[a25_0x45c2('0x1c')]++;}this[a25_0x45c2('0x52')]();}[a25_0x45c2('0x38')](this));}['bind'](this));_0x1f91d3['on']('stopped',function(_0x1f91d3){console[a25_0x45c2('0x41')](a25_0x45c2('0x75'));});_0x1f91d3['on']('destroyed',function(_0x1f91d3){console[a25_0x45c2('0x41')](a25_0x45c2('0x76'));});_0x1f91d3['on'](a25_0x45c2('0x77'),function(_0x1f91d3){console[a25_0x45c2('0x41')](a25_0x45c2('0x77'));});}[a25_0x45c2('0x78')](_0x296ded,_0x4f4d1e,_0x20fbce,_0x41cec8){console['log'](a25_0x45c2('0x78'));console[a25_0x45c2('0x41')](_0x296ded);const _0x40574c=!![];let _0x173dca=0x0;const _0x5e6d28='';console['log']('Attempting\x20to\x20download\x20'+_0x296ded+a25_0x45c2('0x79')+_0x4f4d1e);if(_0x173dca){if(_0x173dca>0x5){_0x41cec8(a25_0x45c2('0x7a'),_0x296ded,_0x20fbce,null);return;}}else{_0x173dca=0x0;}const _0x24c30f=this['tempFolder']+_0x4f4d1e;let _0x4b97bf;if(_0x41cec8===undefined){console[a25_0x45c2('0x41')](a25_0x45c2('0x7b')+_0x296ded+a25_0x45c2('0x79')+_0x24c30f);_0x41cec8=function(_0x23626b,_0x107ac0){console[a25_0x45c2('0x41')](a25_0x45c2('0x7c'),_0x23626b,_0x107ac0);};}http['globalAgent']['maxSockets']=0x64;const _0x10113b={'host':url[a25_0x45c2('0x29')](_0x296ded)[a25_0x45c2('0x7d')],'port':0x50,'path':url[a25_0x45c2('0x29')](_0x296ded)['pathname'],'agent':![]};const _0x22fb2c=http[a25_0x45c2('0x7e')](_0x10113b,function(_0x144a6c){let _0x31c503=0x0;let _0x2c99d0=0x0;function _0x28ffaf(){if(_0x31c503===undefined){console['log'](_0x4f4d1e+a25_0x45c2('0x7f')+_0x2c99d0+'/'+'?');}const _0x3a4002=_0x2c99d0/_0x31c503*0x64;console[a25_0x45c2('0x41')](_0x4f4d1e+a25_0x45c2('0x80')+_0x3a4002+'%\x09'+_0x2c99d0+'/'+_0x31c503);}console[a25_0x45c2('0x41')](_0x4f4d1e+'\x20'+_0x144a6c[a25_0x45c2('0x81')]);switch(_0x144a6c[a25_0x45c2('0x81')]){case 0xc8:_0x31c503=_0x144a6c[a25_0x45c2('0x82')][a25_0x45c2('0x83')]||_0x5e6d28;fs['stat'](_0x24c30f,function(_0x27e97f,_0x3e0a18){if(!_0x27e97f){console['log'](a25_0x45c2('0x84')+_0x24c30f);if(_0x3e0a18[a25_0x45c2('0x85')]==_0x31c503){console[a25_0x45c2('0x41')](a25_0x45c2('0x86')+_0x31c503+')');console[a25_0x45c2('0x41')](a25_0x45c2('0x87'));}else{console['log'](a25_0x45c2('0x88')+_0x3e0a18[a25_0x45c2('0x85')]+a25_0x45c2('0x89')+_0x31c503+')');}}_0x4b97bf=fs[a25_0x45c2('0x8a')](_0x24c30f);_0x144a6c[a25_0x45c2('0x8b')](_0x4b97bf);_0x144a6c['on']('data',function(_0x49738d){_0x2c99d0+=_0x49738d['length'];_0x28ffaf();});_0x22fb2c['on'](a25_0x45c2('0x8c'),function(_0x27e97f){console[a25_0x45c2('0x41')](a25_0x45c2('0x8d'));console[a25_0x45c2('0x41')](_0x27e97f);});_0x4b97bf['on'](a25_0x45c2('0x8e'),function(){console[a25_0x45c2('0x41')](a25_0x45c2('0x8f')+_0x296ded+a25_0x45c2('0x79')+_0x4f4d1e);_0x41cec8(null,_0x4f4d1e,_0x20fbce,_0x4f4d1e);}['bind'](this));});break;case 0x12e:const _0x586913=_0x144a6c[a25_0x45c2('0x82')][a25_0x45c2('0x90')];console[a25_0x45c2('0x41')](a25_0x45c2('0x91')+_0x296ded+a25_0x45c2('0x79')+_0x586913);if(_0x173dca<0x5){this[a25_0x45c2('0x78')](_0x586913,_0x4f4d1e,_0x41cec8,_0x173dca++);}else{console['error'](a25_0x45c2('0x92')+_0x296ded+'.');_0x41cec8(a25_0x45c2('0x93'),null,null,null);}return;case 0x194:console[a25_0x45c2('0x41')]('File\x20Not\x20Found\x20'+_0x296ded);default:console['log'](a25_0x45c2('0x94')+_0x296ded+'\x20STATUS:\x20'+_0x144a6c[a25_0x45c2('0x81')]);_0x22fb2c[a25_0x45c2('0x95')]();_0x41cec8(_0x144a6c['statusCode'],null,null,null);return;}})['on']('error',function(_0x37bf4f){console[a25_0x45c2('0x41')](a25_0x45c2('0x96')+_0x296ded+'\x20'+_0x37bf4f[a25_0x45c2('0x97')]);_0x41cec8(_0x37bf4f,null,null,null);});}[a25_0x45c2('0x98')](_0x2c7325,_0x2af110,_0x3fc47a,_0x1097ec){console[a25_0x45c2('0x41')](a25_0x45c2('0x98'));console[a25_0x45c2('0x41')](_0x2c7325);console['log'](_0x2af110);console[a25_0x45c2('0x41')](_0x3fc47a);console[a25_0x45c2('0x41')](_0x1097ec);if(_0x3fc47a==a25_0x45c2('0x5e')){const _0x44609d=this[a25_0x45c2('0x1d')][this[a25_0x45c2('0x1c')]][a25_0x45c2('0x99')]!=null?this['downloadFiles'][this[a25_0x45c2('0x1c')]][a25_0x45c2('0x99')]:0x1e;this[a25_0x45c2('0x9a')](_0x1097ec,_0x44609d);}else if(_0x3fc47a==a25_0x45c2('0x9b')){if(_0x2c7325==null&&_0x2af110!=''){this[a25_0x45c2('0x1c')]++;}this[a25_0x45c2('0x52')]();}console[a25_0x45c2('0x41')](this[a25_0x45c2('0x1c')]);}['downloadRequestFile'](_0x19d91d,_0x2f898d,_0x58d70b){progress(request(_0x19d91d),{})['on'](a25_0x45c2('0x9c'),function(_0x1e174d){console[a25_0x45c2('0x41')](_0x1e174d);})['on'](a25_0x45c2('0x8c'),function(_0xac704a){console[a25_0x45c2('0x41')]('Error\x20downloading\x20file');this['download']();})['on']('end',function(){console[a25_0x45c2('0x41')]('Downloaded:\x20'+_0x2f898d);console[a25_0x45c2('0x41')](a25_0x45c2('0x74')+_0x58d70b);if(_0x58d70b==a25_0x45c2('0x5e')){const _0x5ee772=this[a25_0x45c2('0x1d')][this['currentFile']][a25_0x45c2('0x99')]!=null?this['downloadFiles'][this[a25_0x45c2('0x1c')]][a25_0x45c2('0x99')]:0x1e;this[a25_0x45c2('0x9a')](_0x2f898d,_0x5ee772);}else if(_0x58d70b==a25_0x45c2('0x9b')){this[a25_0x45c2('0x1c')]++;this[a25_0x45c2('0x52')]();}}[a25_0x45c2('0x38')](this))[a25_0x45c2('0x8b')](fs[a25_0x45c2('0x8a')](this[a25_0x45c2('0x14')]+_0x2f898d));}[a25_0x45c2('0x9a')](_0x5c137b,_0x23b4fe=0x1e){const _0x3e6495=this[a25_0x45c2('0x14')]+_0x5c137b;console[a25_0x45c2('0x41')](_0x3e6495);console[a25_0x45c2('0x41')](_0x5c137b);const _0x249d56=_0x5c137b[a25_0x45c2('0x59')]('.')['slice'](0x0,-0x1)[a25_0x45c2('0x5a')]('.');const _0x53f659=a25_0x45c2('0x9d');const _0x3ab79a=['-y','-r',a25_0x45c2('0x9e'),a25_0x45c2('0x9f'),'1',a25_0x45c2('0xa0'),a25_0x45c2('0xa1'),'-i',_0x3e6495,'-t',String(_0x23b4fe),'-c:v','libx264',a25_0x45c2('0xa2'),a25_0x45c2('0xa3'),'-r','25',a25_0x45c2('0xa4'),a25_0x45c2('0xa5'),this[a25_0x45c2('0x14')]+_0x249d56+a25_0x45c2('0x5d')];const _0x167ef6=spawn(_0x53f659,_0x3ab79a);_0x167ef6[a25_0x45c2('0xa6')]['on'](a25_0x45c2('0xa7'),function(_0xcbb687){console[a25_0x45c2('0x41')]('Converting\x20'+_0x3e6495);});_0x167ef6['stderr']['on'](a25_0x45c2('0xa7'),function(_0x51e05e){console['log'](a25_0x45c2('0xa8')+_0x51e05e);}['bind'](this));_0x167ef6['on'](a25_0x45c2('0xa9'),function(){console[a25_0x45c2('0x41')](a25_0x45c2('0xaa'));this[a25_0x45c2('0x1c')]++;this[a25_0x45c2('0x52')]();}[a25_0x45c2('0x38')](this));}[a25_0x45c2('0x63')](_0x35102e){const _0x747f78=this[a25_0x45c2('0x14')]+'/'+_0x35102e+a25_0x45c2('0x5d');const _0x42179f=a25_0x45c2('0xab')+_0x35102e;console[a25_0x45c2('0x41')](a25_0x45c2('0xac')+_0x42179f);console[a25_0x45c2('0x41')](a25_0x45c2('0xad')+_0x747f78);const _0x258404=youtubedl(_0x42179f,[a25_0x45c2('0xae'),'--no-check-certificate'],{'cwd':__dirname});_0x258404['on']('info',function(_0x2b79f6){console['log'](a25_0x45c2('0xaf'));console['log'](a25_0x45c2('0xb0')+_0x2b79f6['_filename']);console[a25_0x45c2('0x41')](a25_0x45c2('0xb1')+_0x2b79f6[a25_0x45c2('0x85')]);});_0x258404['on'](a25_0x45c2('0xb2'),function complete(_0x31af32){'use strict';console['log'](a25_0x45c2('0xb0')+_0x31af32[a25_0x45c2('0xb3')]+a25_0x45c2('0xb4'));});_0x258404['on'](a25_0x45c2('0x72'),function(){console[a25_0x45c2('0x41')]('finished\x20youtube\x20downloading!');this[a25_0x45c2('0x60')](_0x747f78)[a25_0x45c2('0x4')](function(_0x5b2ab0){if(_0x5b2ab0){this['currentFile']++;}this[a25_0x45c2('0x52')]();}[a25_0x45c2('0x38')](this));}[a25_0x45c2('0x38')](this));_0x258404[a25_0x45c2('0x8b')](fs[a25_0x45c2('0x8a')](_0x747f78));}[a25_0x45c2('0xb5')](){console[a25_0x45c2('0x41')](a25_0x45c2('0xb6'));if(this[a25_0x45c2('0x61')]){if(this[a25_0x45c2('0x1e')]['length']==0x0){console['log']('this.playListFile:\x20'+this['playListFile']);fs[a25_0x45c2('0x43')](this[a25_0x45c2('0x18')],JSON[a25_0x45c2('0x3c')](this[a25_0x45c2('0x4c')]));fsExtra['emptyDirSync'](this[a25_0x45c2('0x16')]);fsExtra['copySync'](this[a25_0x45c2('0x14')],this[a25_0x45c2('0x16')]);fsExtra['emptyDirSync'](this[a25_0x45c2('0x14')]);const _0x3c665a=this[a25_0x45c2('0x64')]();console[a25_0x45c2('0x41')]('Rebooting..');this[a25_0x45c2('0xb7')]();}else{console[a25_0x45c2('0x41')](a25_0x45c2('0xb8'));this[a25_0x45c2('0x1c')]=0x0;setTimeout(function(){this['download']();}[a25_0x45c2('0x38')](this),0x1388);}}else{console['log'](a25_0x45c2('0xb9'));}}[a25_0x45c2('0x64')](){let _0x2f3cf4='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';const _0x15051f=new Date();for(const _0xf021c0 in this[a25_0x45c2('0x1d')]){const _0x548783=this[a25_0x45c2('0x1d')][_0xf021c0][a25_0x45c2('0xba')];const _0x1a30fd=this['downloadFiles'][_0xf021c0][a25_0x45c2('0x57')];const _0x449f4d=dateUtils_1[a25_0x45c2('0xbb')]['Parse'](this[a25_0x45c2('0x1d')][_0xf021c0][a25_0x45c2('0xbc')]);const _0x126648=dateUtils_1[a25_0x45c2('0xbb')]['Parse'](this['downloadFiles'][_0xf021c0][a25_0x45c2('0xbd')]);const _0x14f57f=_0x548783[a25_0x45c2('0xbe')](_0x548783[a25_0x45c2('0x58')]('/')+0x1);let _0x14d5dd=_0x14f57f['split']('.')[a25_0x45c2('0x5b')](0x0,-0x1)['join']('.');if(_0x1a30fd=='youtube_single'){_0x14d5dd=_0x548783;}if((_0x449f4d==null||_0x449f4d<_0x15051f)&&(_0x126648==null||_0x126648>_0x15051f)){_0x2f3cf4+=a25_0x45c2('0xbf')+_0x14d5dd+a25_0x45c2('0x5d')+'\x0d\x0a';}}let _0x298bf2='';if(fsExtra[a25_0x45c2('0x54')](this[a25_0x45c2('0x1a')])){_0x298bf2=fsExtra[a25_0x45c2('0x2a')](this[a25_0x45c2('0x1a')]);_0x298bf2=_0x298bf2[a25_0x45c2('0xc0')]()[a25_0x45c2('0xc1')]();}_0x2f3cf4=_0x2f3cf4['toString']()[a25_0x45c2('0xc1')]();if(_0x298bf2!=_0x2f3cf4){fsExtra[a25_0x45c2('0x43')](this['m3uFile'],_0x2f3cf4);return!![];}return![];}[a25_0x45c2('0xc2')](){this['jsonrpcClient']('Playlist.Clear',{'playlistid':0x1},function(_0x187b48){console['log'](a25_0x45c2('0xc3'));console[a25_0x45c2('0x41')](_0x187b48);this[a25_0x45c2('0xc4')]('Playlist.Add',{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x187b48){console[a25_0x45c2('0x41')](a25_0x45c2('0xc5'));console[a25_0x45c2('0x41')](_0x187b48);this[a25_0x45c2('0xc4')](a25_0x45c2('0xc6'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x187b48){console[a25_0x45c2('0x41')](a25_0x45c2('0xc7'));console[a25_0x45c2('0x41')](_0x187b48);}[a25_0x45c2('0x38')](this));}['bind'](this));}[a25_0x45c2('0x38')](this));}[a25_0x45c2('0xb7')](){console[a25_0x45c2('0x41')](a25_0x45c2('0xc8'));exec('sudo\x20/sbin/reboot\x20-f',function(_0x1d7d1f){console[a25_0x45c2('0x41')](_0x1d7d1f);});}['updateSettings'](){const _0x4b72e4=format(this[a25_0x45c2('0x2f')],this[a25_0x45c2('0x2b')]);console[a25_0x45c2('0x41')](_0x4b72e4);request({'url':_0x4b72e4,'json':!![]},function(_0x2af6b0,_0x4fc3fa,_0x51ad44){if(_0x51ad44[a25_0x45c2('0x51')]>0x0){const _0x939079=_0x51ad44[0x0];const _0x2c7021=_0x939079[a25_0x45c2('0xc9')];const _0x2c7e97=_0x939079[a25_0x45c2('0xca')]==0x1;this['setRss'](_0x2c7021);this[a25_0x45c2('0xcb')](_0x2c7e97);this[a25_0x45c2('0x33')]();}console[a25_0x45c2('0x41')](_0x51ad44);}[a25_0x45c2('0x38')](this));}[a25_0x45c2('0xcc')](){this['kodiCommandClient'](a25_0x45c2('0xcd'));}[a25_0x45c2('0xce')](){this[a25_0x45c2('0xcf')]('CECActivateSource()');}[a25_0x45c2('0xd0')](_0xd0c59c){const _0x2417f1=_0xd0c59c!=null&&_0xd0c59c!='';const _0x31e865=a25_0x45c2('0xd1');if(fsExtra[a25_0x45c2('0x54')](_0x31e865)){const _0x4724c7=fsExtra[a25_0x45c2('0x2a')](_0x31e865);console['log'](a25_0x45c2('0xd2')+_0x4724c7);const _0x2de35a=require(a25_0x45c2('0xd3'));const _0x503810=_0x2de35a[a25_0x45c2('0xd4')];_0x503810(_0x4724c7,function(_0x1f3f3e,_0x23191a){console['log'](a25_0x45c2('0xd5'),_0x1f3f3e);console['log'](a25_0x45c2('0xd6'),_0x23191a);if(!_0xd0c59c||_0xd0c59c==null||_0xd0c59c==''){_0xd0c59c=a25_0x45c2('0xd7');}_0x23191a[a25_0x45c2('0xd8')][a25_0x45c2('0xd9')][0x0]['feed'][0x0]['_']=_0xd0c59c;const _0x1b75fb=new _0x2de35a[(a25_0x45c2('0xda'))]();const _0x1789a0=_0x1b75fb[a25_0x45c2('0xdb')](_0x23191a);console[a25_0x45c2('0x41')]('xml:\x20%j',_0x1789a0);fsExtra[a25_0x45c2('0x43')](_0x31e865,_0x1789a0);});this[a25_0x45c2('0xcf')](a25_0x45c2('0xdc'));this[a25_0x45c2('0xc4')](a25_0x45c2('0xdd'),{'setting':a25_0x45c2('0xde'),'value':_0x2417f1},function(_0x1a281f){console['log'](a25_0x45c2('0xdf'));console[a25_0x45c2('0x41')](_0x1a281f);}['bind'](this));}}[a25_0x45c2('0xcb')](_0x2e75a8){this[a25_0x45c2('0xc4')]('Settings.SetSettingValue',{'setting':'videoplayer.usedisplayasclock','value':_0x2e75a8},function(_0x312584){console[a25_0x45c2('0x41')](a25_0x45c2('0xe0'));console[a25_0x45c2('0x41')](_0x312584);}[a25_0x45c2('0x38')](this));}['kodiCommandClient'](_0x8fb6a9){exec('kodi-send\x20--action=\x22'+_0x8fb6a9+'\x22',function(_0x319f3f){console[a25_0x45c2('0x41')](_0x319f3f);});}[a25_0x45c2('0xc4')](_0x325ffa,_0x56c9dd,_0x546e91){const _0x53d982={'jsonrpc':a25_0x45c2('0xe1'),'method':_0x325ffa,'params':_0x56c9dd,'id':0x1};const _0x40b5c2={'user':this['kodiUser'],'pass':this[a25_0x45c2('0x22')]};console[a25_0x45c2('0x41')]('jsonrpcClient\x20data',_0x53d982);console['log'](a25_0x45c2('0xe2'),_0x40b5c2);this['httpClientService'][a25_0x45c2('0x3f')](this[a25_0x45c2('0x32')]+a25_0x45c2('0xe3'),_0x53d982,![],_0x40b5c2)[a25_0x45c2('0x4')](function(_0x2fbe8d){_0x546e91(_0x2fbe8d);})['catch'](function(_0x5eaaa3){});}}exports[a25_0x45c2('0xe4')]=SyncPlaylistsService;