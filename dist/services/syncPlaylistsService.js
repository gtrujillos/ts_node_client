var a22_0x2ebe=['host','get','\x20Progress:\x20unknown\x09','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','createWriteStream','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','pipe','ffmpeg','1/2','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','info','Download\x20started','filename:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','writeFileSync','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','media_type','youtube_single','/home/osmc/luloclient/media/files/','m3uFile','Finished','shutdown','now','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','next','done','value','then','apply','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','context.json','url-exists','mediaFolder','media/','tempFolder','filesFolder','files/','playListFile','playlist.txt','currentFile','downloadFiles','newPlayList','httpClientService','HttpClientService','config','parse','readFileSync','context','playerId','baseURL','env','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','registerClient','checkFolders','loadMediaList','reportStatus','checkDependencies','deviceUuid','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','catch','log','reportStatusResponse:\x20','ensureDir','emptyDirSync','failDownloadFiles','push','Total:\x20','length','bind','existsSync','removeSync','hasPlayListChanged','toString','error','download','this.currentFile:\x20','\x20of\x20','finishProcess','path','substring','lastIndexOf','slice','join','split','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','videoFile:\x20','track','media','Video','mediainfo\x20check:','downloader','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20'];(function(_0x5256b5,_0x2adc01){var _0x1b1586=function(_0x2d74d7){while(--_0x2d74d7){_0x5256b5['push'](_0x5256b5['shift']());}};_0x1b1586(++_0x2adc01);}(a22_0x2ebe,0xe7));var a22_0x4635=function(_0x392f18,_0x10d8bf){_0x392f18=_0x392f18-0x0;var _0x579fe5=a22_0x2ebe[_0x392f18];return _0x579fe5;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x4ae9aa,_0x4a3f86,_0x489bbe,_0x1e73b7){return new(_0x489bbe||(_0x489bbe=Promise))(function(_0x28dc1c,_0xbab2a3){function _0x282c25(_0x128fcc){try{_0x325bbd(_0x1e73b7[a22_0x4635('0x0')](_0x128fcc));}catch(_0x1e5f66){_0xbab2a3(_0x1e5f66);}}function _0x61e0aa(_0x31aa76){try{_0x325bbd(_0x1e73b7['throw'](_0x31aa76));}catch(_0x6d0fb7){_0xbab2a3(_0x6d0fb7);}}function _0x325bbd(_0x534b13){_0x534b13[a22_0x4635('0x1')]?_0x28dc1c(_0x534b13[a22_0x4635('0x2')]):new _0x489bbe(function(_0x28dc1c){_0x28dc1c(_0x534b13[a22_0x4635('0x2')]);})[a22_0x4635('0x3')](_0x282c25,_0x61e0aa);}_0x325bbd((_0x1e73b7=_0x1e73b7[a22_0x4635('0x4')](_0x4ae9aa,_0x4a3f86||[]))['next']());});};Object['defineProperty'](exports,a22_0x4635('0x5'),{'value':!![]});const HttpClientService_1=require(a22_0x4635('0x6'));const mediainfo=require(a22_0x4635('0x7'));const fs=require('fs');const url=require(a22_0x4635('0x8'));const http=require(a22_0x4635('0x9'));const fsExtra=require('fs-extra');const request=require(a22_0x4635('0xa'));const progress=require(a22_0x4635('0xb'));const spawn=require(a22_0x4635('0xc'))[a22_0x4635('0xd')];const isImage=require(a22_0x4635('0xe'));const format=require(a22_0x4635('0xf'));const os=require('os');const youtubedl=require(a22_0x4635('0x10'));const uuidv4=require(a22_0x4635('0x11'));const configFile='config.json';const contextFile=a22_0x4635('0x12');const urlExists=require(a22_0x4635('0x13'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a22_0x4635('0x14')]=a22_0x4635('0x15');this[a22_0x4635('0x16')]=this[a22_0x4635('0x14')]+'temp/';this[a22_0x4635('0x17')]=this['mediaFolder']+a22_0x4635('0x18');this[a22_0x4635('0x19')]=this[a22_0x4635('0x14')]+a22_0x4635('0x1a');this['m3uFile']=this[a22_0x4635('0x17')]+'lulo_playlist.m3u';this[a22_0x4635('0x1b')]=0x0;this[a22_0x4635('0x1c')]=[];this['failDownloadFiles']=[];this[a22_0x4635('0x1d')]={};this[a22_0x4635('0x1e')]=new HttpClientService_1[(a22_0x4635('0x1f'))]();}['init'](){this[a22_0x4635('0x20')]=JSON[a22_0x4635('0x21')](fs[a22_0x4635('0x22')](configFile));this[a22_0x4635('0x23')]=JSON['parse'](fs[a22_0x4635('0x22')](contextFile));this[a22_0x4635('0x24')]=this[a22_0x4635('0x20')][a22_0x4635('0x24')];this[a22_0x4635('0x25')]=process[a22_0x4635('0x26')]['WEB_SERVICE_URL']+a22_0x4635('0x27');this[a22_0x4635('0x28')]=this['baseURL']+a22_0x4635('0x29');this[a22_0x4635('0x2a')]();this[a22_0x4635('0x2b')]();this[a22_0x4635('0x2c')]();setInterval(function(){this[a22_0x4635('0x2d')]();}['bind'](this),0xea60);}[a22_0x4635('0x2e')](){}[a22_0x4635('0x2a')](){const _0x77a27d=this[a22_0x4635('0x20')][a22_0x4635('0x2f')];if(!_0x77a27d||_0x77a27d==''){this['config'][a22_0x4635('0x2f')]=uuidv4();this[a22_0x4635('0x20')]={'deviceUuid':this['config'][a22_0x4635('0x2f')],'playerId':this[a22_0x4635('0x20')][a22_0x4635('0x24')]};fs['writeFileSync'](configFile,JSON[a22_0x4635('0x30')](this['config']));}const _0x4d9fca={'player_id':this['playerId'],'device_uuid':this[a22_0x4635('0x20')][a22_0x4635('0x2f')],'network_info':JSON['stringify'](os[a22_0x4635('0x31')]()),'firmware_info':JSON[a22_0x4635('0x30')](this[a22_0x4635('0x23')]),'status':0x1};this['httpClientService'][a22_0x4635('0x32')](a22_0x4635('0x33'),_0x4d9fca,![])[a22_0x4635('0x3')](function(_0x24eecb){console['log'](a22_0x4635('0x34')+Date());})[a22_0x4635('0x35')](function(_0x56fc9b){});}['reportStatus'](){const _0x47e887={'player_id':this[a22_0x4635('0x24')],'device_uuid':this[a22_0x4635('0x20')][a22_0x4635('0x2f')],'status':0x1};this['httpClientService'][a22_0x4635('0x32')]('http://restapi.lulo.run/player_devices/report_status',_0x47e887,![])[a22_0x4635('0x3')](function(_0x13e4d1){console[a22_0x4635('0x36')](a22_0x4635('0x37')+Date());})[a22_0x4635('0x35')](function(_0x207266){});}['checkFolders'](){fsExtra['ensureDir'](this[a22_0x4635('0x14')],_0x354e54=>{});fsExtra[a22_0x4635('0x38')](this[a22_0x4635('0x16')],_0x3a4ed3=>{});fsExtra[a22_0x4635('0x38')](this[a22_0x4635('0x17')],_0x180091=>{});}[a22_0x4635('0x2c')](){const _0x4406fb=format(this[a22_0x4635('0x28')],this[a22_0x4635('0x24')]);console[a22_0x4635('0x36')](_0x4406fb);request({'url':_0x4406fb,'json':!![]},function(_0x5380a1,_0x15a973,_0x12ce33){this[a22_0x4635('0x1d')]=_0x12ce33;fsExtra[a22_0x4635('0x39')](this['tempFolder']);this['downloadFiles']=[];this[a22_0x4635('0x3a')]=[];this[a22_0x4635('0x1b')]=0x0;for(const _0x30ee8e in _0x12ce33){this[a22_0x4635('0x1c')][a22_0x4635('0x3b')](_0x12ce33[_0x30ee8e]);}console[a22_0x4635('0x36')](a22_0x4635('0x3c')+this['downloadFiles'][a22_0x4635('0x3d')]);if(this[a22_0x4635('0x1c')][a22_0x4635('0x3d')]>0x0){this['download']();}}[a22_0x4635('0x3e')](this));}['reloadMediaList'](){if(fsExtra[a22_0x4635('0x3f')](this['playListFile'])){fsExtra[a22_0x4635('0x40')](this[a22_0x4635('0x19')]);}this[a22_0x4635('0x2c')]();}[a22_0x4635('0x41')](){const _0x7b490b=JSON['stringify'](this[a22_0x4635('0x1d')]);try{if(!fs['existsSync'](this['playListFile'])){return!![];}else{const _0x27d773=fs['readFileSync'](this[a22_0x4635('0x19')])[a22_0x4635('0x42')]();if(_0x27d773!=_0x7b490b){return!![];}}}catch(_0x3a8961){console[a22_0x4635('0x43')](_0x3a8961);}return![];}[a22_0x4635('0x44')](){console['log'](a22_0x4635('0x45')+this[a22_0x4635('0x1b')]+a22_0x4635('0x46')+this[a22_0x4635('0x1c')]['length']);if(this[a22_0x4635('0x1b')]>=this['downloadFiles'][a22_0x4635('0x3d')]){this[a22_0x4635('0x47')]();return;}const _0x43c5a5=String(this['downloadFiles'][this[a22_0x4635('0x1b')]][a22_0x4635('0x48')]);const _0xaf8e71=this[a22_0x4635('0x1c')][this[a22_0x4635('0x1b')]]['media_type'];let _0x570602=_0x43c5a5[a22_0x4635('0x49')](_0x43c5a5[a22_0x4635('0x4a')]('/')+0x1);const _0xd988e0=_0x570602['split']('.')[a22_0x4635('0x4b')](0x0,-0x1)[a22_0x4635('0x4c')]('.');let _0x4e89b1=this[a22_0x4635('0x25')]+_0x43c5a5;const _0x55bbec=_0x4e89b1[a22_0x4635('0x4d')]('.')[a22_0x4635('0x4b')](0x0,-0x1)['join']('.');if(_0xaf8e71=='youtube_single'){_0x570602=_0x570602+a22_0x4635('0x4e');}else if(_0xaf8e71==a22_0x4635('0x4f')){_0x570602=_0xd988e0+a22_0x4635('0x4e');_0x4e89b1=_0x55bbec+'.mp4';}console[a22_0x4635('0x36')](a22_0x4635('0x50'));console[a22_0x4635('0x36')](_0x43c5a5);console[a22_0x4635('0x36')](_0xaf8e71);console[a22_0x4635('0x36')](_0x570602);console[a22_0x4635('0x36')](_0x4e89b1);console['log'](_0xd988e0);console[a22_0x4635('0x36')](_0x55bbec);console[a22_0x4635('0x36')](a22_0x4635('0x50'));if(fsExtra[a22_0x4635('0x3f')](this[a22_0x4635('0x16')]+_0x570602)){this[a22_0x4635('0x51')](this['tempFolder']+_0x570602)[a22_0x4635('0x3')](function(_0x6482ed){if(_0x6482ed){this['currentFile']++;}this['download']();}[a22_0x4635('0x3e')](this));}else if(fsExtra[a22_0x4635('0x3f')](this[a22_0x4635('0x17')]+_0x570602)){this[a22_0x4635('0x51')](this['filesFolder']+_0x570602)[a22_0x4635('0x3')](function(_0x37f7f3){if(_0x37f7f3){fsExtra[a22_0x4635('0x52')](this[a22_0x4635('0x17')]+_0x570602,this[a22_0x4635('0x16')]+_0x570602);this[a22_0x4635('0x1b')]++;}this[a22_0x4635('0x44')]();}[a22_0x4635('0x3e')](this));}else{console[a22_0x4635('0x36')](a22_0x4635('0x53')+_0x4e89b1);if(_0xaf8e71=='youtube_single'){this[a22_0x4635('0x54')](_0x43c5a5);}else{this['downloader'](_0x4e89b1,_0x570602,_0xaf8e71);}}}[a22_0x4635('0x51')](_0xdd3a2e){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x4635('0x36')](a22_0x4635('0x55')+_0xdd3a2e);const _0x494575=yield mediainfo(_0xdd3a2e)[a22_0x4635('0x35')](_0x258249=>console[a22_0x4635('0x36')](_0x258249));const _0x43a70a=_0x494575['media'][a22_0x4635('0x56')][a22_0x4635('0x3d')]>0x1&&_0x494575[a22_0x4635('0x57')][a22_0x4635('0x56')][0x1]['@type']==a22_0x4635('0x58');if(!_0x43a70a){fsExtra[a22_0x4635('0x40')](_0xdd3a2e);}console[a22_0x4635('0x36')](a22_0x4635('0x59')+_0x43a70a);return _0x43a70a;});}[a22_0x4635('0x5a')](_0x491e21,_0x2b16d8,_0x10c63b){const _0x3dae1f=new Downloader();console[a22_0x4635('0x36')](_0x491e21);console[a22_0x4635('0x36')](_0x2b16d8);console['log'](_0x10c63b);const _0x2809ba=_0x3dae1f[a22_0x4635('0x44')](_0x491e21,this[a22_0x4635('0x16')]+_0x2b16d8);urlExists(_0x491e21,function(_0x27bcdc,_0x56330a){if(_0x56330a){if(this[a22_0x4635('0x3a')][a22_0x4635('0x5b')](this[a22_0x4635('0x1b')])){const _0x51e37c=this['failDownloadFiles'][a22_0x4635('0x5c')](this[a22_0x4635('0x1b')]);if(_0x51e37c>-0x1){this['failDownloadFiles'][a22_0x4635('0x5d')](_0x51e37c,0x1);}}console['log'](a22_0x4635('0x5e')+_0x491e21);_0x2809ba[a22_0x4635('0x5f')]();}else{if(!this[a22_0x4635('0x3a')]['includes'](this[a22_0x4635('0x1b')])){this[a22_0x4635('0x3a')][a22_0x4635('0x3b')](this['currentFile']);}console[a22_0x4635('0x36')](a22_0x4635('0x60')+_0x491e21);this[a22_0x4635('0x1b')]++;this[a22_0x4635('0x44')]();}}[a22_0x4635('0x3e')](this));_0x2809ba['on'](a22_0x4635('0x5f'),function(_0x2809ba){console['log'](a22_0x4635('0x61')+_0x491e21);});_0x2809ba['on'](a22_0x4635('0x43'),function(_0x2809ba){console['log'](a22_0x4635('0x62'));this[a22_0x4635('0x44')]();}['bind'](this));_0x2809ba['on'](a22_0x4635('0x63'),function(_0x2809ba){console[a22_0x4635('0x36')](a22_0x4635('0x63'));console[a22_0x4635('0x36')](a22_0x4635('0x64')+_0x2b16d8);console[a22_0x4635('0x36')](a22_0x4635('0x65')+_0x10c63b);this['checkVideo'](this[a22_0x4635('0x16')]+_0x2b16d8)[a22_0x4635('0x3')](function(_0x4cca20){if(_0x4cca20){this[a22_0x4635('0x1b')]++;}this['download']();}[a22_0x4635('0x3e')](this));}['bind'](this));_0x2809ba['on']('stopped',function(_0x2809ba){console[a22_0x4635('0x36')](a22_0x4635('0x66'));});_0x2809ba['on'](a22_0x4635('0x67'),function(_0x2809ba){console['log']('destroyed');});_0x2809ba['on']('retry',function(_0x2809ba){console['log'](a22_0x4635('0x68'));});}[a22_0x4635('0x69')](_0x15c140,_0x4178b7,_0xaeffcd,_0x75a2dc){console['log'](a22_0x4635('0x69'));console[a22_0x4635('0x36')](_0x15c140);const _0x12153a=!![];let _0x2b00ba=0x0;const _0x20828b='';console[a22_0x4635('0x36')](a22_0x4635('0x6a')+_0x15c140+a22_0x4635('0x6b')+_0x4178b7);if(_0x2b00ba){if(_0x2b00ba>0x5){_0x75a2dc('Max\x20redirects\x20reached',_0x15c140,_0xaeffcd,null);return;}}else{_0x2b00ba=0x0;}const _0x41bf0e=this['tempFolder']+_0x4178b7;let _0x3c9bee;if(_0x75a2dc===undefined){console[a22_0x4635('0x36')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x15c140+a22_0x4635('0x6b')+_0x41bf0e);_0x75a2dc=function(_0x1b89a2,_0x217d24){console['log'](a22_0x4635('0x6c'),_0x1b89a2,_0x217d24);};}http['globalAgent']['maxSockets']=0x64;const _0x2c4f78={'host':url['parse'](_0x15c140)[a22_0x4635('0x6d')],'port':0x50,'path':url['parse'](_0x15c140)['pathname'],'agent':![]};const _0x50ad45=http[a22_0x4635('0x6e')](_0x2c4f78,function(_0x35fb47){let _0x172951=0x0;let _0x3716ba=0x0;function _0x51b66a(){if(_0x172951===undefined){console['log'](_0x4178b7+a22_0x4635('0x6f')+_0x3716ba+'/'+'?');}const _0x1bb256=_0x3716ba/_0x172951*0x64;console['log'](_0x4178b7+'\x20Progress:\x20'+_0x1bb256+'%\x09'+_0x3716ba+'/'+_0x172951);}console[a22_0x4635('0x36')](_0x4178b7+'\x20'+_0x35fb47[a22_0x4635('0x70')]);switch(_0x35fb47['statusCode']){case 0xc8:_0x172951=_0x35fb47[a22_0x4635('0x71')]['content-length']||_0x20828b;fs[a22_0x4635('0x72')](_0x41bf0e,function(_0xdafef3,_0x3631dd){if(!_0xdafef3){console[a22_0x4635('0x36')](a22_0x4635('0x73')+_0x41bf0e);if(_0x3631dd[a22_0x4635('0x74')]==_0x172951){console['log']('And\x20the\x20file\x20size\x20matches\x20('+_0x172951+')');console[a22_0x4635('0x36')]('Redownloading');}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x3631dd[a22_0x4635('0x74')]+')\x20vs\x20New('+_0x172951+')');}}_0x3c9bee=fs[a22_0x4635('0x75')](_0x41bf0e);_0x35fb47['pipe'](_0x3c9bee);_0x35fb47['on']('data',function(_0x3f64db){_0x3716ba+=_0x3f64db['length'];_0x51b66a();});_0x50ad45['on'](a22_0x4635('0x43'),function(_0xdafef3){console[a22_0x4635('0x36')]('err:\x20');console[a22_0x4635('0x36')](_0xdafef3);});_0x3c9bee['on']('finish',function(){console['log']('Downloaded\x20'+_0x15c140+'\x20to\x20'+_0x4178b7);_0x75a2dc(null,_0x4178b7,_0xaeffcd,_0x4178b7);}[a22_0x4635('0x3e')](this));});break;case 0x12e:const _0x4f095f=_0x35fb47['headers']['location'];console[a22_0x4635('0x36')](a22_0x4635('0x76')+_0x15c140+a22_0x4635('0x6b')+_0x4f095f);if(_0x2b00ba<0x5){this[a22_0x4635('0x69')](_0x4f095f,_0x4178b7,_0x75a2dc,_0x2b00ba++);}else{console['error'](a22_0x4635('0x77')+_0x15c140+'.');_0x75a2dc(a22_0x4635('0x78'),null,null,null);}return;case 0x194:console['log'](a22_0x4635('0x79')+_0x15c140);default:console[a22_0x4635('0x36')](a22_0x4635('0x7a')+_0x15c140+a22_0x4635('0x7b')+_0x35fb47['statusCode']);_0x50ad45[a22_0x4635('0x7c')]();_0x75a2dc(_0x35fb47['statusCode'],null,null,null);return;}})['on'](a22_0x4635('0x43'),function(_0x5ba303){console[a22_0x4635('0x36')](a22_0x4635('0x7d')+_0x15c140+'\x20'+_0x5ba303[a22_0x4635('0x7e')]);_0x75a2dc(_0x5ba303,null,null,null);});}[a22_0x4635('0x7f')](_0x2d211a,_0x5b06f1,_0x2448bf,_0x69c741){console[a22_0x4635('0x36')](a22_0x4635('0x7f'));console[a22_0x4635('0x36')](_0x2d211a);console[a22_0x4635('0x36')](_0x5b06f1);console[a22_0x4635('0x36')](_0x2448bf);console[a22_0x4635('0x36')](_0x69c741);if(_0x2448bf==a22_0x4635('0x4f')){const _0x3f770f=this[a22_0x4635('0x1c')][this['currentFile']][a22_0x4635('0x80')]!=null?this[a22_0x4635('0x1c')][this[a22_0x4635('0x1b')]][a22_0x4635('0x80')]:0x1e;this[a22_0x4635('0x81')](_0x69c741,_0x3f770f);}else if(_0x2448bf==a22_0x4635('0x82')){if(_0x2d211a==null&&_0x5b06f1!=''){this[a22_0x4635('0x1b')]++;}this[a22_0x4635('0x44')]();}console['log'](this[a22_0x4635('0x1b')]);}[a22_0x4635('0x83')](_0x3d9ee1,_0x3278a6,_0x2f5095){progress(request(_0x3d9ee1),{})['on'](a22_0x4635('0x84'),function(_0x244a97){console[a22_0x4635('0x36')](_0x244a97);})['on'](a22_0x4635('0x43'),function(_0x5d9a8f){console[a22_0x4635('0x36')](a22_0x4635('0x85'));this[a22_0x4635('0x44')]();})['on'](a22_0x4635('0x63'),function(){console[a22_0x4635('0x36')](a22_0x4635('0x64')+_0x3278a6);console[a22_0x4635('0x36')](a22_0x4635('0x65')+_0x2f5095);if(_0x2f5095==a22_0x4635('0x4f')){const _0x310cf3=this['downloadFiles'][this[a22_0x4635('0x1b')]][a22_0x4635('0x80')]!=null?this[a22_0x4635('0x1c')][this[a22_0x4635('0x1b')]][a22_0x4635('0x80')]:0x1e;this[a22_0x4635('0x81')](_0x3278a6,_0x310cf3);}else if(_0x2f5095==a22_0x4635('0x82')){this[a22_0x4635('0x1b')]++;this[a22_0x4635('0x44')]();}}['bind'](this))[a22_0x4635('0x86')](fs[a22_0x4635('0x75')](this['tempFolder']+_0x3278a6));}[a22_0x4635('0x81')](_0x4cedb1,_0xd3ec9a=0x1e){const _0x1502ef=this['tempFolder']+_0x4cedb1;console[a22_0x4635('0x36')](_0x1502ef);console['log'](_0x4cedb1);const _0x5c94ed=_0x4cedb1[a22_0x4635('0x4d')]('.')['slice'](0x0,-0x1)['join']('.');const _0x451fa7=a22_0x4635('0x87');const _0xf400e0=['-y','-r',a22_0x4635('0x88'),'-loop','1','-pattern_type',a22_0x4635('0x89'),'-i',_0x1502ef,'-t',String(_0xd3ec9a),a22_0x4635('0x8a'),a22_0x4635('0x8b'),a22_0x4635('0x8c'),a22_0x4635('0x8d'),'-r','25',a22_0x4635('0x8e'),a22_0x4635('0x8f'),this[a22_0x4635('0x16')]+_0x5c94ed+'.mp4'];const _0x1b9f53=spawn(_0x451fa7,_0xf400e0);_0x1b9f53[a22_0x4635('0x90')]['on'](a22_0x4635('0x91'),function(_0x5c99f3){console['log'](a22_0x4635('0x92')+_0x1502ef);});_0x1b9f53[a22_0x4635('0x93')]['on'](a22_0x4635('0x91'),function(_0x2b4e2){console[a22_0x4635('0x36')](a22_0x4635('0x94')+_0x2b4e2);}[a22_0x4635('0x3e')](this));_0x1b9f53['on'](a22_0x4635('0x95'),function(){console['log'](a22_0x4635('0x96'));this[a22_0x4635('0x1b')]++;this['download']();}[a22_0x4635('0x3e')](this));}[a22_0x4635('0x54')](_0x684828){const _0x2af30b=this[a22_0x4635('0x16')]+'/'+_0x684828+a22_0x4635('0x4e');const _0x54f476=youtubedl(a22_0x4635('0x97')+_0x684828,['--format=18'],{'cwd':__dirname});_0x54f476['on'](a22_0x4635('0x98'),function(_0x63525c){console['log'](a22_0x4635('0x99'));console[a22_0x4635('0x36')](a22_0x4635('0x9a')+_0x63525c[a22_0x4635('0x9b')]);console[a22_0x4635('0x36')]('size:\x20'+_0x63525c[a22_0x4635('0x74')]);});_0x54f476['on']('complete',function complete(_0x450a19){'use strict';console[a22_0x4635('0x36')](a22_0x4635('0x9a')+_0x450a19['_filename']+a22_0x4635('0x9c'));});_0x54f476['on'](a22_0x4635('0x63'),function(){console[a22_0x4635('0x36')](a22_0x4635('0x9d'));this[a22_0x4635('0x51')](_0x2af30b)['then'](function(_0x4ed9ff){if(_0x4ed9ff){this[a22_0x4635('0x1b')]++;}this[a22_0x4635('0x44')]();}[a22_0x4635('0x3e')](this));}[a22_0x4635('0x3e')](this));_0x54f476[a22_0x4635('0x86')](fs[a22_0x4635('0x75')](_0x2af30b));}[a22_0x4635('0x47')](){console[a22_0x4635('0x36')]('Finishing');if(this[a22_0x4635('0x3a')][a22_0x4635('0x3d')]==0x0){fs[a22_0x4635('0x9e')](this[a22_0x4635('0x19')],JSON[a22_0x4635('0x30')](this[a22_0x4635('0x1d')]));let _0x356221=a22_0x4635('0x9f')+'\x0d\x0a'+a22_0x4635('0xa0')+'\x0d\x0a';for(const _0x217749 in this['downloadFiles']){const _0x5cf3e1=this[a22_0x4635('0x1c')][_0x217749][a22_0x4635('0x48')];const _0x572a9c=this[a22_0x4635('0x1c')][_0x217749][a22_0x4635('0xa1')];const _0x236547=_0x5cf3e1[a22_0x4635('0x49')](_0x5cf3e1[a22_0x4635('0x4a')]('/')+0x1);let _0x4147fa=_0x236547[a22_0x4635('0x4d')]('.')[a22_0x4635('0x4b')](0x0,-0x1)[a22_0x4635('0x4c')]('.');if(_0x572a9c==a22_0x4635('0xa2')){_0x4147fa=_0x5cf3e1;}_0x356221+=a22_0x4635('0xa3')+_0x4147fa+'.mp4'+'\x0d\x0a';}fsExtra[a22_0x4635('0x39')](this[a22_0x4635('0x17')]);fsExtra['copySync'](this[a22_0x4635('0x16')],this['filesFolder']);fs[a22_0x4635('0x9e')](this[a22_0x4635('0xa4')],_0x356221);fsExtra[a22_0x4635('0x39')](this[a22_0x4635('0x16')]);console[a22_0x4635('0x36')](a22_0x4635('0xa5'));const _0xa869cc=spawn(a22_0x4635('0xa6'),['-r',a22_0x4635('0xa7')]);}else{console[a22_0x4635('0x36')](a22_0x4635('0xa8'));this[a22_0x4635('0x1b')]=0x0;setTimeout(function(){this[a22_0x4635('0x44')]();}[a22_0x4635('0x3e')](this),0x1388);}}}exports[a22_0x4635('0xa9')]=SyncPlaylistsService;