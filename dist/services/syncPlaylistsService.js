var a25_0x49e8=['\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','mediaType:\x20','image','pipe','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','stdout','Converting\x20','stderr:\x20','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','info','Download\x20started','filename:\x20','_filename','size:\x20','\x20already\x20downloaded.','Finishing','this.playListFile:\x20','writeFileSync','copySync','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','#EXTINF:0,luloPlayList','DateUtils','Parse','end_date','/home/osmc/luloclient/media/files/','trim','kodiCommandClient','PlayMedia(//home/osmc/luloclient/media/files/lulo_playlist.m3u)','Rebooting','sudo\x20/sbin/reboot\x20-f','rss','header_active','enableClock','turnOffTV','CECActivateSource()','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','rssfeeds','set','buildObject','xml:\x20%j','RefreshRSS()','jsonrpcClient','setRss:','Settings.SetSettingValue','videoplayer.usedisplayasclock','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','defineProperty','../infrastructure/HttpClientService','./playerService','../infrastructure/utils/dateUtils','node-mediainfo','http','child_process','spawn','exec','is-image','string-template','uuid/v4','config.json','package.json','url-exists','node-kodi','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','http://192.168.0.109','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','PlayerService','init','readFileSync','context','parse','playerId','config','baseURL','env','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','kodiHost','kodiUser','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','getItems','stringify','deviceUuid','networkInterfaces','version','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','player','getCurrentlyPlayingVideo','item','reportStatus','reportStatus\x20playingItem:\x20','post','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','loadMediaList:\x20','newPlayList','hasPlayListChanged','emptyDirSync','Total\x20to\x20download:\x20','length','download','reloadMediaList','existsSync','removeSync','m3uFile','toString','this.currentFile:\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','checkVideo','downloader','m3uFileUpdate','videoFile:\x20','media','track','@type','Video','indexOf','downloading:\x20','start','includes','push','Error:\x20','error','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','data','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20'];(function(_0x41b830,_0x592ae8){var _0x5ab6dd=function(_0x554ad0){while(--_0x554ad0){_0x41b830['push'](_0x41b830['shift']());}};_0x5ab6dd(++_0x592ae8);}(a25_0x49e8,0x13e));var a25_0x33c5=function(_0x2ce25d,_0xf90531){_0x2ce25d=_0x2ce25d-0x0;var _0x1475ec=a25_0x49e8[_0x2ce25d];return _0x1475ec;};'use strict';var __awaiter=this&&this[a25_0x33c5('0x0')]||function(_0x3c2430,_0x42cb95,_0x5c647,_0x24e5da){function _0x383126(_0x1f83a6){return _0x1f83a6 instanceof _0x5c647?_0x1f83a6:new _0x5c647(function(_0x1158a1){_0x1158a1(_0x1f83a6);});}return new(_0x5c647||(_0x5c647=Promise))(function(_0x5b23cb,_0x506c8e){function _0x150d78(_0x47934e){try{_0x23c281(_0x24e5da[a25_0x33c5('0x1')](_0x47934e));}catch(_0x19fb51){_0x506c8e(_0x19fb51);}}function _0x5f9570(_0x5475ee){try{_0x23c281(_0x24e5da[a25_0x33c5('0x2')](_0x5475ee));}catch(_0x352a51){_0x506c8e(_0x352a51);}}function _0x23c281(_0x44f02e){_0x44f02e[a25_0x33c5('0x3')]?_0x5b23cb(_0x44f02e[a25_0x33c5('0x4')]):_0x383126(_0x44f02e[a25_0x33c5('0x4')])[a25_0x33c5('0x5')](_0x150d78,_0x5f9570);}_0x23c281((_0x24e5da=_0x24e5da[a25_0x33c5('0x6')](_0x3c2430,_0x42cb95||[]))[a25_0x33c5('0x1')]());});};Object[a25_0x33c5('0x7')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a25_0x33c5('0x8'));const playerService_1=require(a25_0x33c5('0x9'));const dateUtils_1=require(a25_0x33c5('0xa'));const mediainfo=require(a25_0x33c5('0xb'));const fs=require('fs');const url=require('url');const http=require(a25_0x33c5('0xc'));const fsExtra=require('fs-extra');const request=require('request');const progress=require('request-progress');const spawn=require(a25_0x33c5('0xd'))[a25_0x33c5('0xe')];const exec=require(a25_0x33c5('0xd'))[a25_0x33c5('0xf')];const isImage=require(a25_0x33c5('0x10'));const format=require(a25_0x33c5('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a25_0x33c5('0x12'));const configFile=a25_0x33c5('0x13');const contextFile=a25_0x33c5('0x14');const urlExists=require(a25_0x33c5('0x15'));const kodi_rpc=require(a25_0x33c5('0x16'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a25_0x33c5('0x17')]=a25_0x33c5('0x18');this[a25_0x33c5('0x19')]=this['mediaFolder']+a25_0x33c5('0x1a');this[a25_0x33c5('0x1b')]=this['mediaFolder']+a25_0x33c5('0x1c');this[a25_0x33c5('0x1d')]=this[a25_0x33c5('0x17')]+a25_0x33c5('0x1e');this['m3uFile']=this[a25_0x33c5('0x1b')]+a25_0x33c5('0x1f');this[a25_0x33c5('0x20')]=0x0;this[a25_0x33c5('0x21')]=![];this[a25_0x33c5('0x22')]=[];this[a25_0x33c5('0x23')]=[];this['newPlayList']={};this['kodiHost']=a25_0x33c5('0x24');this['kodiUser']='lulo';this[a25_0x33c5('0x25')]=a25_0x33c5('0x26');this[a25_0x33c5('0x27')]=![];this[a25_0x33c5('0x28')]=new HttpClientService_1[(a25_0x33c5('0x29'))]();this[a25_0x33c5('0x2a')]=new playerService_1[(a25_0x33c5('0x2b'))]();}[a25_0x33c5('0x2c')](){this['config']=JSON['parse'](fs[a25_0x33c5('0x2d')](configFile));this[a25_0x33c5('0x2e')]=JSON[a25_0x33c5('0x2f')](fs[a25_0x33c5('0x2d')](contextFile));this[a25_0x33c5('0x30')]=this[a25_0x33c5('0x31')][a25_0x33c5('0x30')];this[a25_0x33c5('0x32')]=process[a25_0x33c5('0x33')]['WEB_SERVICE_URL']+'deploy/';this[a25_0x33c5('0x34')]=this[a25_0x33c5('0x32')]+a25_0x33c5('0x35');this[a25_0x33c5('0x36')]=this['baseURL']+'api/player.php?player_id={0}';this[a25_0x33c5('0x37')]=new kodi_rpc({'url':this[a25_0x33c5('0x38')],'user':this[a25_0x33c5('0x39')],'password':this[a25_0x33c5('0x25')]});this[a25_0x33c5('0x3a')]();this[a25_0x33c5('0x3b')]();this[a25_0x33c5('0x3c')]();this[a25_0x33c5('0x3d')]();this[a25_0x33c5('0x3e')]();setInterval(function(){this[a25_0x33c5('0x3f')]();}[a25_0x33c5('0x40')](this),0x2710);setInterval(function(){this['registerClient']();}[a25_0x33c5('0x40')](this),0x493e0);setInterval(function(){this['checkSchedule']();}[a25_0x33c5('0x40')](this),0x2710);}[a25_0x33c5('0x3a')](){}['registerClient'](){this[a25_0x33c5('0x37')]['playlist'][a25_0x33c5('0x41')](0x1)['then'](function(_0x2cc539){const _0x49748d=JSON[a25_0x33c5('0x42')](_0x2cc539);const _0x2e4e5c={'player_id':this[a25_0x33c5('0x30')],'device_uuid':this[a25_0x33c5('0x31')][a25_0x33c5('0x43')],'network_info':JSON[a25_0x33c5('0x42')](os[a25_0x33c5('0x44')]()),'firmware_info':JSON[a25_0x33c5('0x42')](this['context'][a25_0x33c5('0x45')]),'playlist':_0x49748d,'playing_item':'','status':0x0};this[a25_0x33c5('0x28')]['post'](a25_0x33c5('0x46'),_0x2e4e5c,![])[a25_0x33c5('0x5')](function(_0x1c8d89){console[a25_0x33c5('0x47')](a25_0x33c5('0x48')+Date());})[a25_0x33c5('0x49')](function(_0x25ba43){});console[a25_0x33c5('0x47')](_0x2e4e5c);}['bind'](this));const _0x46c690=this[a25_0x33c5('0x31')][a25_0x33c5('0x43')];if(!_0x46c690||_0x46c690==''){this[a25_0x33c5('0x31')]['deviceUuid']=uuidv4();this[a25_0x33c5('0x31')]={'deviceUuid':this[a25_0x33c5('0x31')][a25_0x33c5('0x43')],'playerId':this[a25_0x33c5('0x31')][a25_0x33c5('0x30')]};fs['writeFileSync'](configFile,JSON[a25_0x33c5('0x42')](this[a25_0x33c5('0x31')]));}}[a25_0x33c5('0x3f')](){console['log'](a25_0x33c5('0x3f'));this[a25_0x33c5('0x37')][a25_0x33c5('0x4a')][a25_0x33c5('0x4b')]()[a25_0x33c5('0x5')](function(_0x247b39){const _0xb9721d=_0x247b39[a25_0x33c5('0x4c')]['label'];this[a25_0x33c5('0x4d')](_0xb9721d);}[a25_0x33c5('0x40')](this))['catch'](function(_0x3ca0a9){console[a25_0x33c5('0x47')](_0x3ca0a9);this['reportStatus'](JSON['stringify'](_0x3ca0a9));}[a25_0x33c5('0x40')](this));}[a25_0x33c5('0x4d')](_0x3f5dc9){console[a25_0x33c5('0x47')](a25_0x33c5('0x4e')+_0x3f5dc9);const _0x4e25fb={'player_id':this[a25_0x33c5('0x30')],'device_uuid':this[a25_0x33c5('0x31')]['deviceUuid'],'status':_0x3f5dc9!=''&&_0x3f5dc9!=null?0x1:0x0,'playing_item':_0x3f5dc9};this['httpClientService'][a25_0x33c5('0x4f')](a25_0x33c5('0x50'),_0x4e25fb,![])['then'](function(_0x23f9ba){console[a25_0x33c5('0x47')](a25_0x33c5('0x51'));})[a25_0x33c5('0x49')](function(_0x440ef9){});}[a25_0x33c5('0x3c')](){fsExtra['ensureDir'](this[a25_0x33c5('0x17')],_0x2f124b=>{});fsExtra[a25_0x33c5('0x52')](this[a25_0x33c5('0x19')],_0x50582b=>{});fsExtra[a25_0x33c5('0x52')](this['filesFolder'],_0xb1377b=>{});}[a25_0x33c5('0x3d')](){const _0x228dd6=format(this['playListServiceURL'],this[a25_0x33c5('0x30')]);console[a25_0x33c5('0x47')](_0x228dd6);request({'url':_0x228dd6,'json':!![]},function(_0x25ec0b,_0x57947d,_0x1a3d6f){console[a25_0x33c5('0x47')](a25_0x33c5('0x53'));this[a25_0x33c5('0x54')]=_0x1a3d6f;this[a25_0x33c5('0x21')]=this[a25_0x33c5('0x55')]();fsExtra[a25_0x33c5('0x56')](this[a25_0x33c5('0x19')]);this[a25_0x33c5('0x22')]=[];this[a25_0x33c5('0x23')]=[];this[a25_0x33c5('0x20')]=0x0;for(const _0x50194f in _0x1a3d6f){this[a25_0x33c5('0x22')]['push'](_0x1a3d6f[_0x50194f]);}console[a25_0x33c5('0x47')](a25_0x33c5('0x57')+this[a25_0x33c5('0x22')][a25_0x33c5('0x58')]);if(this[a25_0x33c5('0x22')][a25_0x33c5('0x58')]>0x0){this[a25_0x33c5('0x59')]();}}[a25_0x33c5('0x40')](this));}[a25_0x33c5('0x5a')](){this[a25_0x33c5('0x27')]=!![];if(fsExtra[a25_0x33c5('0x5b')](this[a25_0x33c5('0x19')])){fsExtra[a25_0x33c5('0x56')](this['tempFolder']);}if(fsExtra['existsSync'](this[a25_0x33c5('0x1b')])){fsExtra['emptyDirSync'](this[a25_0x33c5('0x1b')]);}if(!fsExtra[a25_0x33c5('0x5b')](this['playListFile'])){fsExtra[a25_0x33c5('0x5c')](this['playListFile']);}if(!fsExtra['existsSync'](this[a25_0x33c5('0x5d')])){fsExtra['removeSync'](this['m3uFile']);}this[a25_0x33c5('0x3d')]();}[a25_0x33c5('0x55')](){const _0x220001=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a25_0x33c5('0x5b')](this[a25_0x33c5('0x1d')])){return!![];}else{const _0xddf9bf=fsExtra['readFileSync'](this[a25_0x33c5('0x1d')])[a25_0x33c5('0x5e')]();if(_0xddf9bf!=_0x220001){return!![];}}}catch(_0x17abd6){console['log'](_0x17abd6);}return![];}[a25_0x33c5('0x59')](){console['log'](a25_0x33c5('0x5f')+this[a25_0x33c5('0x20')]+'\x20of\x20'+this[a25_0x33c5('0x22')][a25_0x33c5('0x58')]);if(this[a25_0x33c5('0x20')]>=this['downloadFiles'][a25_0x33c5('0x58')]){this[a25_0x33c5('0x60')]();return;}const _0xcdb9ee=String(this[a25_0x33c5('0x22')][this[a25_0x33c5('0x20')]][a25_0x33c5('0x61')]);const _0x4676fd=this['downloadFiles'][this[a25_0x33c5('0x20')]][a25_0x33c5('0x62')];let _0xb9ede8=_0xcdb9ee[a25_0x33c5('0x63')](_0xcdb9ee[a25_0x33c5('0x64')]('/')+0x1);const _0x4684db=_0xb9ede8[a25_0x33c5('0x65')]('.')[a25_0x33c5('0x66')](0x0,-0x1)[a25_0x33c5('0x67')]('.');let _0x3d82d9=this['baseURL']+_0xcdb9ee;const _0x4650a8=_0x3d82d9[a25_0x33c5('0x65')]('.')[a25_0x33c5('0x66')](0x0,-0x1)[a25_0x33c5('0x67')]('.');if(_0x4676fd==a25_0x33c5('0x68')){_0xb9ede8=_0xb9ede8+a25_0x33c5('0x69');}else if(_0x4676fd=='image'){_0xb9ede8=_0x4684db+a25_0x33c5('0x69');_0x3d82d9=_0x4650a8+a25_0x33c5('0x69');}console[a25_0x33c5('0x47')]('**********+');console[a25_0x33c5('0x47')](_0xcdb9ee);console[a25_0x33c5('0x47')](_0x4676fd);console[a25_0x33c5('0x47')](_0xb9ede8);console[a25_0x33c5('0x47')](_0x3d82d9);console[a25_0x33c5('0x47')](_0x4684db);console['log'](_0x4650a8);console[a25_0x33c5('0x47')](a25_0x33c5('0x6a'));if(fsExtra['existsSync'](this[a25_0x33c5('0x19')]+_0xb9ede8)){this[a25_0x33c5('0x6b')](this[a25_0x33c5('0x19')]+_0xb9ede8)['then'](function(_0xf461e){if(_0xf461e){this['currentFile']++;}else{this['playlistChanged']=!![];}this[a25_0x33c5('0x59')]();}['bind'](this));}else if(fsExtra[a25_0x33c5('0x5b')](this['filesFolder']+_0xb9ede8)){this[a25_0x33c5('0x6b')](this[a25_0x33c5('0x1b')]+_0xb9ede8)[a25_0x33c5('0x5')](function(_0x3c7940){if(_0x3c7940){fsExtra['copySync'](this[a25_0x33c5('0x1b')]+_0xb9ede8,this[a25_0x33c5('0x19')]+_0xb9ede8);this[a25_0x33c5('0x20')]++;}else{this[a25_0x33c5('0x21')]=!![];}this[a25_0x33c5('0x59')]();}['bind'](this));}else{console[a25_0x33c5('0x47')]('Downloading:\x20'+_0x3d82d9);this[a25_0x33c5('0x21')]=!![];if(_0x4676fd=='youtube_single'){this['downloadYouTube'](_0xcdb9ee);}else{this[a25_0x33c5('0x6c')](_0x3d82d9,_0xb9ede8,_0x4676fd);}}}['checkSchedule'](){const _0x3ac26e=this['m3uFileUpdate']();console[a25_0x33c5('0x47')](a25_0x33c5('0x6d'),_0x3ac26e);if(_0x3ac26e){this['refreshPlayer']();}}[a25_0x33c5('0x6b')](_0x31f38a){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x33c5('0x47')](a25_0x33c5('0x6e')+_0x31f38a);const _0x1af554=yield mediainfo(_0x31f38a)['catch'](_0x2baab7=>{console['log'](_0x2baab7);fsExtra[a25_0x33c5('0x5c')](_0x31f38a);return![];});const _0x590841=_0x1af554[a25_0x33c5('0x6f')][a25_0x33c5('0x70')]['length']>0x1&&_0x1af554['media'][a25_0x33c5('0x70')][0x1][a25_0x33c5('0x71')]==a25_0x33c5('0x72');if(!_0x590841){fsExtra[a25_0x33c5('0x5c')](_0x31f38a);}console[a25_0x33c5('0x47')]('mediainfo\x20check:'+_0x590841);return _0x590841;});}[a25_0x33c5('0x6c')](_0x38eca9,_0x269a31,_0x435886){const _0x1bbb37=new Downloader();console['log'](_0x38eca9);console[a25_0x33c5('0x47')](_0x269a31);console[a25_0x33c5('0x47')](_0x435886);const _0x2c6cbc=_0x1bbb37[a25_0x33c5('0x59')](_0x38eca9,this[a25_0x33c5('0x19')]+_0x269a31);urlExists(_0x38eca9,function(_0x2be9d9,_0x20c61a){if(_0x20c61a){if(this[a25_0x33c5('0x23')]['includes'](this['currentFile'])){const _0x360f33=this[a25_0x33c5('0x23')][a25_0x33c5('0x73')](this['currentFile']);if(_0x360f33>-0x1){this[a25_0x33c5('0x23')]['splice'](_0x360f33,0x1);}}console['log'](a25_0x33c5('0x74')+_0x38eca9);_0x2c6cbc[a25_0x33c5('0x75')]();}else{if(!this[a25_0x33c5('0x23')][a25_0x33c5('0x76')](this[a25_0x33c5('0x20')])){this[a25_0x33c5('0x23')][a25_0x33c5('0x77')](this[a25_0x33c5('0x20')]);}console[a25_0x33c5('0x47')](a25_0x33c5('0x78')+_0x38eca9);this[a25_0x33c5('0x20')]++;this[a25_0x33c5('0x59')]();}}['bind'](this));_0x2c6cbc['on'](a25_0x33c5('0x75'),function(_0x2c6cbc){console[a25_0x33c5('0x47')]('start:\x20'+_0x38eca9);});_0x2c6cbc['on'](a25_0x33c5('0x79'),function(_0x2c6cbc){console[a25_0x33c5('0x47')]('error:\x20');this[a25_0x33c5('0x59')]();}[a25_0x33c5('0x40')](this));_0x2c6cbc['on']('end',function(_0x2c6cbc){console[a25_0x33c5('0x47')](a25_0x33c5('0x7a'));console[a25_0x33c5('0x47')](a25_0x33c5('0x7b')+_0x269a31);console[a25_0x33c5('0x47')]('mediaType:\x20'+_0x435886);this[a25_0x33c5('0x6b')](this[a25_0x33c5('0x19')]+_0x269a31)[a25_0x33c5('0x5')](function(_0x1544b5){if(_0x1544b5){this[a25_0x33c5('0x20')]++;}this[a25_0x33c5('0x59')]();}['bind'](this));}[a25_0x33c5('0x40')](this));_0x2c6cbc['on']('stopped',function(_0x2c6cbc){console['log'](a25_0x33c5('0x7c'));});_0x2c6cbc['on'](a25_0x33c5('0x7d'),function(_0x2c6cbc){console['log'](a25_0x33c5('0x7d'));});_0x2c6cbc['on'](a25_0x33c5('0x7e'),function(_0x2c6cbc){console[a25_0x33c5('0x47')](a25_0x33c5('0x7e'));});}[a25_0x33c5('0x7f')](_0x1fa1f7,_0xfaf631,_0x198ff8,_0x5ad62f){console[a25_0x33c5('0x47')](a25_0x33c5('0x7f'));console[a25_0x33c5('0x47')](_0x1fa1f7);const _0xfee626=!![];let _0x14c360=0x0;const _0x2b502a='';console[a25_0x33c5('0x47')](a25_0x33c5('0x80')+_0x1fa1f7+a25_0x33c5('0x81')+_0xfaf631);if(_0x14c360){if(_0x14c360>0x5){_0x5ad62f(a25_0x33c5('0x82'),_0x1fa1f7,_0x198ff8,null);return;}}else{_0x14c360=0x0;}const _0x2c2238=this['tempFolder']+_0xfaf631;let _0x11627b;if(_0x5ad62f===undefined){console[a25_0x33c5('0x47')](a25_0x33c5('0x83')+_0x1fa1f7+'\x20to\x20'+_0x2c2238);_0x5ad62f=function(_0x250dd4,_0x2bb22c){console[a25_0x33c5('0x47')](a25_0x33c5('0x84'),_0x250dd4,_0x2bb22c);};}http[a25_0x33c5('0x85')][a25_0x33c5('0x86')]=0x64;const _0x187bec={'host':url[a25_0x33c5('0x2f')](_0x1fa1f7)[a25_0x33c5('0x87')],'port':0x50,'path':url[a25_0x33c5('0x2f')](_0x1fa1f7)[a25_0x33c5('0x88')],'agent':![]};const _0xc98403=http[a25_0x33c5('0x89')](_0x187bec,function(_0x37c4cb){let _0x16c866=0x0;let _0x2d19ef=0x0;function _0x19f20f(){if(_0x16c866===undefined){console[a25_0x33c5('0x47')](_0xfaf631+'\x20Progress:\x20unknown\x09'+_0x2d19ef+'/'+'?');}const _0x36841b=_0x2d19ef/_0x16c866*0x64;console[a25_0x33c5('0x47')](_0xfaf631+a25_0x33c5('0x8a')+_0x36841b+'%\x09'+_0x2d19ef+'/'+_0x16c866);}console['log'](_0xfaf631+'\x20'+_0x37c4cb[a25_0x33c5('0x8b')]);switch(_0x37c4cb[a25_0x33c5('0x8b')]){case 0xc8:_0x16c866=_0x37c4cb[a25_0x33c5('0x8c')][a25_0x33c5('0x8d')]||_0x2b502a;fs[a25_0x33c5('0x8e')](_0x2c2238,function(_0x2650aa,_0x5a716b){if(!_0x2650aa){console[a25_0x33c5('0x47')](a25_0x33c5('0x8f')+_0x2c2238);if(_0x5a716b[a25_0x33c5('0x90')]==_0x16c866){console[a25_0x33c5('0x47')](a25_0x33c5('0x91')+_0x16c866+')');console[a25_0x33c5('0x47')]('Redownloading');}else{console[a25_0x33c5('0x47')](a25_0x33c5('0x92')+_0x5a716b[a25_0x33c5('0x90')]+a25_0x33c5('0x93')+_0x16c866+')');}}_0x11627b=fs[a25_0x33c5('0x94')](_0x2c2238);_0x37c4cb['pipe'](_0x11627b);_0x37c4cb['on'](a25_0x33c5('0x95'),function(_0xd46f75){_0x2d19ef+=_0xd46f75[a25_0x33c5('0x58')];_0x19f20f();});_0xc98403['on'](a25_0x33c5('0x79'),function(_0x2650aa){console[a25_0x33c5('0x47')]('err:\x20');console[a25_0x33c5('0x47')](_0x2650aa);});_0x11627b['on'](a25_0x33c5('0x96'),function(){console['log'](a25_0x33c5('0x97')+_0x1fa1f7+a25_0x33c5('0x81')+_0xfaf631);_0x5ad62f(null,_0xfaf631,_0x198ff8,_0xfaf631);}[a25_0x33c5('0x40')](this));});break;case 0x12e:const _0x425f43=_0x37c4cb[a25_0x33c5('0x8c')][a25_0x33c5('0x98')];console[a25_0x33c5('0x47')](a25_0x33c5('0x99')+_0x1fa1f7+a25_0x33c5('0x81')+_0x425f43);if(_0x14c360<0x5){this[a25_0x33c5('0x7f')](_0x425f43,_0xfaf631,_0x5ad62f,_0x14c360++);}else{console[a25_0x33c5('0x79')](a25_0x33c5('0x9a')+_0x1fa1f7+'.');_0x5ad62f(a25_0x33c5('0x9b'),null,null,null);}return;case 0x194:console[a25_0x33c5('0x47')](a25_0x33c5('0x9c')+_0x1fa1f7);default:console[a25_0x33c5('0x47')](a25_0x33c5('0x9d')+_0x1fa1f7+a25_0x33c5('0x9e')+_0x37c4cb['statusCode']);_0xc98403[a25_0x33c5('0x9f')]();_0x5ad62f(_0x37c4cb['statusCode'],null,null,null);return;}})['on'](a25_0x33c5('0x79'),function(_0x1e901f){console['log'](a25_0x33c5('0xa0')+_0x1fa1f7+'\x20'+_0x1e901f['message']);_0x5ad62f(_0x1e901f,null,null,null);});}[a25_0x33c5('0xa1')](_0x193a38,_0x349c53,_0x26515d,_0x2a9038){console[a25_0x33c5('0x47')](a25_0x33c5('0xa1'));console[a25_0x33c5('0x47')](_0x193a38);console[a25_0x33c5('0x47')](_0x349c53);console['log'](_0x26515d);console[a25_0x33c5('0x47')](_0x2a9038);if(_0x26515d=='image'){const _0x5734d2=this['downloadFiles'][this['currentFile']][a25_0x33c5('0xa2')]!=null?this[a25_0x33c5('0x22')][this[a25_0x33c5('0x20')]][a25_0x33c5('0xa2')]:0x1e;this[a25_0x33c5('0xa3')](_0x2a9038,_0x5734d2);}else if(_0x26515d==a25_0x33c5('0xa4')){if(_0x193a38==null&&_0x349c53!=''){this[a25_0x33c5('0x20')]++;}this[a25_0x33c5('0x59')]();}console[a25_0x33c5('0x47')](this[a25_0x33c5('0x20')]);}[a25_0x33c5('0xa5')](_0x3c3a6d,_0x1f5ca1,_0x6781ed){progress(request(_0x3c3a6d),{})['on'](a25_0x33c5('0xa6'),function(_0x25cdd2){console[a25_0x33c5('0x47')](_0x25cdd2);})['on'](a25_0x33c5('0x79'),function(_0x570822){console[a25_0x33c5('0x47')](a25_0x33c5('0xa7'));this[a25_0x33c5('0x59')]();})['on'](a25_0x33c5('0x7a'),function(){console[a25_0x33c5('0x47')](a25_0x33c5('0x7b')+_0x1f5ca1);console['log'](a25_0x33c5('0xa8')+_0x6781ed);if(_0x6781ed==a25_0x33c5('0xa9')){const _0x431518=this[a25_0x33c5('0x22')][this['currentFile']][a25_0x33c5('0xa2')]!=null?this[a25_0x33c5('0x22')][this[a25_0x33c5('0x20')]]['duration']:0x1e;this[a25_0x33c5('0xa3')](_0x1f5ca1,_0x431518);}else if(_0x6781ed=='video'){this[a25_0x33c5('0x20')]++;this['download']();}}[a25_0x33c5('0x40')](this))[a25_0x33c5('0xaa')](fs[a25_0x33c5('0x94')](this['tempFolder']+_0x1f5ca1));}['createImageVideo'](_0x18b065,_0x453439=0x1e){const _0x5d9108=this['tempFolder']+_0x18b065;console['log'](_0x5d9108);console[a25_0x33c5('0x47')](_0x18b065);const _0x5dadd8=_0x18b065[a25_0x33c5('0x65')]('.')[a25_0x33c5('0x66')](0x0,-0x1)[a25_0x33c5('0x67')]('.');const _0x236e52=a25_0x33c5('0xab');const _0x3abd8c=['-y','-r',a25_0x33c5('0xac'),a25_0x33c5('0xad'),'1',a25_0x33c5('0xae'),a25_0x33c5('0xaf'),'-i',_0x5d9108,'-t',String(_0x453439),a25_0x33c5('0xb0'),a25_0x33c5('0xb1'),a25_0x33c5('0xb2'),a25_0x33c5('0xb3'),'-r','25','-vf','scale=1920:1080',this[a25_0x33c5('0x19')]+_0x5dadd8+a25_0x33c5('0x69')];const _0x54472f=spawn(_0x236e52,_0x3abd8c);_0x54472f[a25_0x33c5('0xb4')]['on']('data',function(_0x42dcd2){console['log'](a25_0x33c5('0xb5')+_0x5d9108);});_0x54472f['stderr']['on'](a25_0x33c5('0x95'),function(_0x1c8ecd){console['log'](a25_0x33c5('0xb6')+_0x1c8ecd);}[a25_0x33c5('0x40')](this));_0x54472f['on']('close',function(){console[a25_0x33c5('0x47')](a25_0x33c5('0xb7'));this[a25_0x33c5('0x20')]++;this[a25_0x33c5('0x59')]();}[a25_0x33c5('0x40')](this));}[a25_0x33c5('0xb8')](_0x3b4ea0){const _0x3194f8=this[a25_0x33c5('0x19')]+'/'+_0x3b4ea0+a25_0x33c5('0x69');const _0x1d4e9b=a25_0x33c5('0xb9')+_0x3b4ea0;console['log'](a25_0x33c5('0xba')+_0x1d4e9b);console[a25_0x33c5('0x47')](a25_0x33c5('0xbb')+_0x3194f8);const _0x506554=youtubedl(_0x1d4e9b,[a25_0x33c5('0xbc'),a25_0x33c5('0xbd')],{'cwd':__dirname});_0x506554['on'](a25_0x33c5('0xbe'),function(_0x20e7ac){console[a25_0x33c5('0x47')](a25_0x33c5('0xbf'));console[a25_0x33c5('0x47')](a25_0x33c5('0xc0')+_0x20e7ac[a25_0x33c5('0xc1')]);console[a25_0x33c5('0x47')](a25_0x33c5('0xc2')+_0x20e7ac[a25_0x33c5('0x90')]);});_0x506554['on']('complete',function complete(_0x26d2cb){'use strict';console[a25_0x33c5('0x47')](a25_0x33c5('0xc0')+_0x26d2cb[a25_0x33c5('0xc1')]+a25_0x33c5('0xc3'));});_0x506554['on']('end',function(){console[a25_0x33c5('0x47')]('finished\x20youtube\x20downloading!');this[a25_0x33c5('0x6b')](_0x3194f8)[a25_0x33c5('0x5')](function(_0x17bf35){if(_0x17bf35){this['currentFile']++;}this[a25_0x33c5('0x59')]();}[a25_0x33c5('0x40')](this));}['bind'](this));_0x506554[a25_0x33c5('0xaa')](fs[a25_0x33c5('0x94')](_0x3194f8));}[a25_0x33c5('0x60')](){console[a25_0x33c5('0x47')](a25_0x33c5('0xc4'));if(this[a25_0x33c5('0x21')]){if(this['failDownloadFiles'][a25_0x33c5('0x58')]==0x0){console[a25_0x33c5('0x47')](a25_0x33c5('0xc5')+this[a25_0x33c5('0x1d')]);fs[a25_0x33c5('0xc6')](this[a25_0x33c5('0x1d')],JSON['stringify'](this[a25_0x33c5('0x54')]));fsExtra['emptyDirSync'](this[a25_0x33c5('0x1b')]);fsExtra[a25_0x33c5('0xc7')](this[a25_0x33c5('0x19')],this['filesFolder']);fsExtra['emptyDirSync'](this[a25_0x33c5('0x19')]);const _0x1c8f24=this[a25_0x33c5('0x6d')]();console[a25_0x33c5('0x47')](a25_0x33c5('0xc8'));this[a25_0x33c5('0xc9')]();}else{console[a25_0x33c5('0x47')](a25_0x33c5('0xca'));this[a25_0x33c5('0x20')]=0x0;setTimeout(function(){this[a25_0x33c5('0x59')]();}[a25_0x33c5('0x40')](this),0x1388);}}else{console[a25_0x33c5('0x47')](a25_0x33c5('0xcb'));}}[a25_0x33c5('0x6d')](){let _0x298280='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a25_0x33c5('0xcc')+'\x0d\x0a';const _0x36e6a8=new Date();for(const _0x37e040 in this['downloadFiles']){const _0x38938f=this[a25_0x33c5('0x22')][_0x37e040][a25_0x33c5('0x61')];const _0x617623=this[a25_0x33c5('0x22')][_0x37e040][a25_0x33c5('0x62')];const _0x137a37=dateUtils_1[a25_0x33c5('0xcd')][a25_0x33c5('0xce')](this[a25_0x33c5('0x22')][_0x37e040]['start_date']);const _0x236e24=dateUtils_1[a25_0x33c5('0xcd')]['Parse'](this[a25_0x33c5('0x22')][_0x37e040][a25_0x33c5('0xcf')]);const _0x715305=_0x38938f['substring'](_0x38938f[a25_0x33c5('0x64')]('/')+0x1);let _0xa462b2=_0x715305[a25_0x33c5('0x65')]('.')['slice'](0x0,-0x1)[a25_0x33c5('0x67')]('.');if(_0x617623==a25_0x33c5('0x68')){_0xa462b2=_0x38938f;}if((_0x137a37==null||_0x137a37<_0x36e6a8)&&(_0x236e24==null||_0x236e24>_0x36e6a8)){_0x298280+=a25_0x33c5('0xd0')+_0xa462b2+'.mp4'+'\x0d\x0a';}}let _0x4d6309='';if(fsExtra[a25_0x33c5('0x5b')](this[a25_0x33c5('0x5d')])){_0x4d6309=fsExtra['readFileSync'](this[a25_0x33c5('0x5d')]);_0x4d6309=_0x4d6309[a25_0x33c5('0x5e')]()[a25_0x33c5('0xd1')]();}_0x298280=_0x298280['toString']()[a25_0x33c5('0xd1')]();if(_0x4d6309!=_0x298280){fsExtra[a25_0x33c5('0xc6')](this[a25_0x33c5('0x5d')],_0x298280);return!![];}return![];}['refreshPlayer'](){console['log'](a25_0x33c5('0x5d'),this[a25_0x33c5('0x5d')]);this[a25_0x33c5('0xd2')](a25_0x33c5('0xd3'));}[a25_0x33c5('0xc9')](){console[a25_0x33c5('0x47')](a25_0x33c5('0xd4'));exec(a25_0x33c5('0xd5'),function(_0x3599a4){console[a25_0x33c5('0x47')](_0x3599a4);});}[a25_0x33c5('0x3e')](){const _0x5db6=format(this['playerServiceURL'],this[a25_0x33c5('0x30')]);console[a25_0x33c5('0x47')](_0x5db6);request({'url':_0x5db6,'json':!![]},function(_0x102790,_0x1216d5,_0x14ab3a){if(_0x14ab3a[a25_0x33c5('0x58')]>0x0){const _0x28ab68=_0x14ab3a[0x0];const _0x138a8e=_0x28ab68[a25_0x33c5('0xd6')];const _0x5d9dfc=_0x28ab68[a25_0x33c5('0xd7')]==0x1;this['setRss'](_0x138a8e);this[a25_0x33c5('0xd8')](_0x5d9dfc);this['registerClient']();}console[a25_0x33c5('0x47')](_0x14ab3a);}[a25_0x33c5('0x40')](this));}[a25_0x33c5('0xd9')](){this['kodiCommandClient']('CECStandby()');}['turnOnTV'](){this['kodiCommandClient'](a25_0x33c5('0xda'));}[a25_0x33c5('0xdb')](_0x208a8e){const _0x5465d2=_0x208a8e!=null&&_0x208a8e!='';const _0x3b8570=a25_0x33c5('0xdc');if(fsExtra[a25_0x33c5('0x5b')](_0x3b8570)){const _0x2d8f94=fsExtra[a25_0x33c5('0x2d')](_0x3b8570);console['log'](a25_0x33c5('0xdd')+_0x2d8f94);const _0x1f9dfe=require(a25_0x33c5('0xde'));const _0x3de71d=_0x1f9dfe[a25_0x33c5('0xdf')];_0x3de71d(_0x2d8f94,function(_0x409107,_0x29e9b8){console[a25_0x33c5('0x47')]('err:\x20%j',_0x409107);console['log']('result:\x20%j',_0x29e9b8);if(!_0x208a8e||_0x208a8e==null||_0x208a8e==''){_0x208a8e='none';}_0x29e9b8[a25_0x33c5('0xe0')][a25_0x33c5('0xe1')][0x0]['feed'][0x0]['_']=_0x208a8e;const _0x2e1b65=new _0x1f9dfe['Builder']();const _0x246687=_0x2e1b65[a25_0x33c5('0xe2')](_0x29e9b8);console[a25_0x33c5('0x47')](a25_0x33c5('0xe3'),_0x246687);fsExtra['writeFileSync'](_0x3b8570,_0x246687);});this[a25_0x33c5('0xd2')](a25_0x33c5('0xe4'));this[a25_0x33c5('0xe5')]('Settings.SetSettingValue',{'setting':'lookandfeel.enablerssfeeds','value':_0x5465d2},function(_0x1bd23d){console[a25_0x33c5('0x47')](a25_0x33c5('0xe6'));console[a25_0x33c5('0x47')](_0x1bd23d);}['bind'](this));}}['enableClock'](_0x4f7bb6){this[a25_0x33c5('0xe5')](a25_0x33c5('0xe7'),{'setting':a25_0x33c5('0xe8'),'value':_0x4f7bb6},function(_0x3ecfa4){console[a25_0x33c5('0x47')]('enableClock:\x20');console['log'](_0x3ecfa4);}[a25_0x33c5('0x40')](this));}[a25_0x33c5('0xd2')](_0x249c80){exec(a25_0x33c5('0xe9')+_0x249c80+'\x22',function(_0x20e595){console[a25_0x33c5('0x47')](_0x20e595);});}[a25_0x33c5('0xe5')](_0x29632d,_0x3f47c6,_0x2ba33e){const _0x1e5d3c={'jsonrpc':a25_0x33c5('0xea'),'method':_0x29632d,'params':_0x3f47c6,'id':0x1};const _0x1f8a33={'user':this[a25_0x33c5('0x39')],'pass':this[a25_0x33c5('0x25')]};console['log'](a25_0x33c5('0xeb'),_0x1e5d3c);console[a25_0x33c5('0x47')]('jsonrpcClient\x20options',_0x1f8a33);this[a25_0x33c5('0x28')][a25_0x33c5('0x4f')](this[a25_0x33c5('0x38')]+a25_0x33c5('0xec'),_0x1e5d3c,![],_0x1f8a33)['then'](function(_0x3a2253){_0x2ba33e(_0x3a2253);})[a25_0x33c5('0x49')](function(_0x378836){});}}exports[a25_0x33c5('0xed')]=SyncPlaylistsService;