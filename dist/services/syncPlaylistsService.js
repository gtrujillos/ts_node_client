var a23_0x4eb3=['removeSync','toString','download','this.currentFile:\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','.mp4','**********+','checkVideo','copySync','Downloading:\x20','youtube_single','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','start','push','Error:\x20','start:\x20','error:\x20','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','pathname','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','pipe','data','err:\x20','finish','Downloaded\x20','headers','location','Redirect\x20','error','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','image','duration','createImageVideo','video','progress','Error\x20downloading\x20file','mediaType:\x20','createWriteStream','1/2','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','stdout','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','filename:\x20','_filename','complete','\x20already\x20downloaded.','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','kodiCommandClient','RestartApp()','reboot','Reboot()','updateSettings','rss','header_active','setRss','enableClock','turnOnTV','CECActivateSource()','turnOffTV','CECStandby()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','rssfeeds','set','feed','Builder','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','2.0','/jsonrpc','SyncPlaylistsService','next','throw','done','value','then','apply','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','spawn','exec','is-image','string-template','youtube-dl','config.json','context.json','url-exists','node-kodi','mediaFolder','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','downloadFiles','failDownloadFiles','kodiHost','http://localhost','lulo','kodiPassword','forceReload','httpClientService','HttpClientService','playerService','PlayerService','config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','kodiUser','registerClient','checkFolders','loadMediaList','bind','deviceUuid','writeFileSync','log','registerClient\x20deviceUuid:\x20','playlist','currentPlaylist','sendDeviceRegistration','stringify','register\x20response:\x20','catch','getStatus','player','getCurrentlyPlayingVideo','item','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','newPlayList','playlistChanged','hasPlayListChanged','emptyDirSync','length','existsSync'];(function(_0x56d62d,_0x133abe){var _0x36cf5a=function(_0x20c5ba){while(--_0x20c5ba){_0x56d62d['push'](_0x56d62d['shift']());}};_0x36cf5a(++_0x133abe);}(a23_0x4eb3,0x17c));var a23_0x5df3=function(_0x3ff712,_0x7cbd1){_0x3ff712=_0x3ff712-0x0;var _0xbbc73b=a23_0x4eb3[_0x3ff712];return _0xbbc73b;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x42ddf2,_0x516d83,_0x39d6ad,_0x42bcb6){function _0x1162cd(_0x2bb105){return _0x2bb105 instanceof _0x39d6ad?_0x2bb105:new _0x39d6ad(function(_0x4a7f5f){_0x4a7f5f(_0x2bb105);});}return new(_0x39d6ad||(_0x39d6ad=Promise))(function(_0x4f99e6,_0x585f6e){function _0x4f229e(_0x1139e2){try{_0x5393d2(_0x42bcb6[a23_0x5df3('0x0')](_0x1139e2));}catch(_0x4f7db8){_0x585f6e(_0x4f7db8);}}function _0x5059e7(_0x904890){try{_0x5393d2(_0x42bcb6[a23_0x5df3('0x1')](_0x904890));}catch(_0x2a3109){_0x585f6e(_0x2a3109);}}function _0x5393d2(_0x29a7f3){_0x29a7f3[a23_0x5df3('0x2')]?_0x4f99e6(_0x29a7f3[a23_0x5df3('0x3')]):_0x1162cd(_0x29a7f3['value'])[a23_0x5df3('0x4')](_0x4f229e,_0x5059e7);}_0x5393d2((_0x42bcb6=_0x42bcb6[a23_0x5df3('0x5')](_0x42ddf2,_0x516d83||[]))[a23_0x5df3('0x0')]());});};Object['defineProperty'](exports,a23_0x5df3('0x6'),{'value':!![]});const HttpClientService_1=require(a23_0x5df3('0x7'));const playerService_1=require(a23_0x5df3('0x8'));const mediainfo=require(a23_0x5df3('0x9'));const fs=require('fs');const url=require(a23_0x5df3('0xa'));const http=require(a23_0x5df3('0xb'));const fsExtra=require(a23_0x5df3('0xc'));const request=require(a23_0x5df3('0xd'));const progress=require(a23_0x5df3('0xe'));const spawn=require(a23_0x5df3('0xf'))[a23_0x5df3('0x10')];const exec=require(a23_0x5df3('0xf'))[a23_0x5df3('0x11')];const isImage=require(a23_0x5df3('0x12'));const format=require(a23_0x5df3('0x13'));const os=require('os');const youtubedl=require(a23_0x5df3('0x14'));const uuidv4=require('uuid/v4');const configFile=a23_0x5df3('0x15');const contextFile=a23_0x5df3('0x16');const urlExists=require(a23_0x5df3('0x17'));const kodi_rpc=require(a23_0x5df3('0x18'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a23_0x5df3('0x19')]='media/';this[a23_0x5df3('0x1a')]=this['mediaFolder']+a23_0x5df3('0x1b');this[a23_0x5df3('0x1c')]=this[a23_0x5df3('0x19')]+a23_0x5df3('0x1d');this[a23_0x5df3('0x1e')]=this[a23_0x5df3('0x19')]+a23_0x5df3('0x1f');this[a23_0x5df3('0x20')]=this[a23_0x5df3('0x1c')]+a23_0x5df3('0x21');this[a23_0x5df3('0x22')]=0x0;this['playlistChanged']=![];this[a23_0x5df3('0x23')]=[];this[a23_0x5df3('0x24')]=[];this['newPlayList']={};this[a23_0x5df3('0x25')]=a23_0x5df3('0x26');this['kodiUser']=a23_0x5df3('0x27');this[a23_0x5df3('0x28')]='.lulo123.';this[a23_0x5df3('0x29')]=![];this[a23_0x5df3('0x2a')]=new HttpClientService_1[(a23_0x5df3('0x2b'))]();this[a23_0x5df3('0x2c')]=new playerService_1[(a23_0x5df3('0x2d'))]();}['init'](){this[a23_0x5df3('0x2e')]=JSON[a23_0x5df3('0x2f')](fs[a23_0x5df3('0x30')](configFile));this[a23_0x5df3('0x31')]=JSON['parse'](fs[a23_0x5df3('0x30')](contextFile));this[a23_0x5df3('0x32')]=this[a23_0x5df3('0x2e')][a23_0x5df3('0x32')];this[a23_0x5df3('0x33')]=process[a23_0x5df3('0x34')][a23_0x5df3('0x35')]+a23_0x5df3('0x36');this['playListServiceURL']=this[a23_0x5df3('0x33')]+a23_0x5df3('0x37');this[a23_0x5df3('0x38')]=this[a23_0x5df3('0x33')]+a23_0x5df3('0x39');this[a23_0x5df3('0x3a')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a23_0x5df3('0x3b')],'password':this[a23_0x5df3('0x28')]});this['checkDependencies']();this[a23_0x5df3('0x3c')]();this[a23_0x5df3('0x3d')]();this[a23_0x5df3('0x3e')]();this['updateSettings']();setInterval(function(){this['getStatus']();}[a23_0x5df3('0x3f')](this),0x2710);setInterval(function(){this[a23_0x5df3('0x3c')]();}[a23_0x5df3('0x3f')](this),0x493e0);}['checkDependencies'](){}[a23_0x5df3('0x3c')](){const _0x1aac67=this[a23_0x5df3('0x2e')][a23_0x5df3('0x40')];if(!_0x1aac67||_0x1aac67==''){this[a23_0x5df3('0x2e')][a23_0x5df3('0x40')]=uuidv4();this['config']={'deviceUuid':this['config'][a23_0x5df3('0x40')],'playerId':this[a23_0x5df3('0x2e')]['playerId']};fs[a23_0x5df3('0x41')](configFile,JSON['stringify'](this[a23_0x5df3('0x2e')]));}console[a23_0x5df3('0x42')](a23_0x5df3('0x43')+_0x1aac67);if(this[a23_0x5df3('0x3a')]&&this[a23_0x5df3('0x3a')]['playlist']){this['kodi'][a23_0x5df3('0x44')]['getItems'](0x1)[a23_0x5df3('0x4')](function(_0x3a0152){console[a23_0x5df3('0x42')]('this.kodi.playlist.getItems:\x20'+_0x3a0152);if(_0x3a0152&&_0x3a0152!=''){this[a23_0x5df3('0x45')]=JSON['stringify'](_0x3a0152);}this['sendDeviceRegistration']();}[a23_0x5df3('0x3f')](this));}else{this[a23_0x5df3('0x46')]();}}[a23_0x5df3('0x46')](){console[a23_0x5df3('0x42')]('sendDeviceRegistration:\x20');const _0x3a80bb={'player_id':this['playerId'],'device_uuid':this['config'][a23_0x5df3('0x40')],'network_info':JSON[a23_0x5df3('0x47')](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this[a23_0x5df3('0x31')]),'playlist':this[a23_0x5df3('0x45')],'playing_item':'','status':0x0};console[a23_0x5df3('0x42')](_0x3a80bb);this[a23_0x5df3('0x2a')]['post']('http://restapi.lulo.run/player_devices/register',_0x3a80bb,![])[a23_0x5df3('0x4')](function(_0x14fa85){console[a23_0x5df3('0x42')](a23_0x5df3('0x48')+Date());})[a23_0x5df3('0x49')](function(_0x3256f1){});}[a23_0x5df3('0x4a')](){console[a23_0x5df3('0x42')](a23_0x5df3('0x4a'));this[a23_0x5df3('0x3a')][a23_0x5df3('0x4b')][a23_0x5df3('0x4c')]()[a23_0x5df3('0x4')](function(_0x35c689){const _0x598c7f=_0x35c689[a23_0x5df3('0x4d')]['label'];this[a23_0x5df3('0x4e')](_0x598c7f);}['bind'](this))[a23_0x5df3('0x49')](function(_0x2a7ac4){console[a23_0x5df3('0x42')](_0x2a7ac4);this['reportStatus'](_0x2a7ac4);}['bind'](this));}[a23_0x5df3('0x4e')](_0x144fc0){console[a23_0x5df3('0x42')](a23_0x5df3('0x4f')+_0x144fc0);const _0x5af5d7={'player_id':this[a23_0x5df3('0x32')],'device_uuid':this[a23_0x5df3('0x2e')]['deviceUuid'],'status':_0x144fc0!=''&&_0x144fc0!=null?0x1:0x0,'playing_item':_0x144fc0};this[a23_0x5df3('0x2a')]['post'](a23_0x5df3('0x50'),_0x5af5d7,![])[a23_0x5df3('0x4')](function(_0xdaead7){console[a23_0x5df3('0x42')](a23_0x5df3('0x51')+Date());})[a23_0x5df3('0x49')](function(_0x596563){});}['checkFolders'](){fsExtra['ensureDir'](this[a23_0x5df3('0x19')],_0x12fe99=>{});fsExtra[a23_0x5df3('0x52')](this[a23_0x5df3('0x1a')],_0x6db941=>{});fsExtra[a23_0x5df3('0x52')](this[a23_0x5df3('0x1c')],_0x2feeef=>{});}[a23_0x5df3('0x3e')](){const _0x20966a=format(this['playListServiceURL'],this[a23_0x5df3('0x32')]);console[a23_0x5df3('0x42')](_0x20966a);request({'url':_0x20966a,'json':!![]},function(_0x1adc79,_0x86e8c,_0x2d8560){console['log'](a23_0x5df3('0x53'));this[a23_0x5df3('0x54')]=_0x2d8560;this[a23_0x5df3('0x55')]=this[a23_0x5df3('0x56')]();fsExtra[a23_0x5df3('0x57')](this[a23_0x5df3('0x1a')]);this[a23_0x5df3('0x23')]=[];this[a23_0x5df3('0x24')]=[];this[a23_0x5df3('0x22')]=0x0;for(const _0x12eba2 in _0x2d8560){this['downloadFiles']['push'](_0x2d8560[_0x12eba2]);}console[a23_0x5df3('0x42')]('Total:\x20'+this[a23_0x5df3('0x23')]['length']);if(this[a23_0x5df3('0x23')][a23_0x5df3('0x58')]>0x0){this['download']();}}[a23_0x5df3('0x3f')](this));}['reloadMediaList'](){this[a23_0x5df3('0x29')]=!![];if(fsExtra[a23_0x5df3('0x59')](this[a23_0x5df3('0x1a')])){fsExtra[a23_0x5df3('0x57')](this[a23_0x5df3('0x1a')]);}if(fsExtra[a23_0x5df3('0x59')](this[a23_0x5df3('0x1c')])){fsExtra['emptyDirSync'](this[a23_0x5df3('0x1c')]);}if(!fsExtra['existsSync'](this[a23_0x5df3('0x1e')])){fsExtra[a23_0x5df3('0x5a')](this[a23_0x5df3('0x1e')]);}if(!fsExtra[a23_0x5df3('0x59')](this[a23_0x5df3('0x20')])){fsExtra[a23_0x5df3('0x5a')](this[a23_0x5df3('0x20')]);}this[a23_0x5df3('0x3e')]();}['hasPlayListChanged'](){const _0x2ec08a=JSON[a23_0x5df3('0x47')](this[a23_0x5df3('0x54')]);try{if(!fsExtra['existsSync'](this[a23_0x5df3('0x1e')])){return!![];}else{const _0x2e269d=fsExtra[a23_0x5df3('0x30')](this[a23_0x5df3('0x1e')])[a23_0x5df3('0x5b')]();if(_0x2e269d!=_0x2ec08a){return!![];}}}catch(_0x9c683c){console[a23_0x5df3('0x42')](_0x9c683c);}return![];}[a23_0x5df3('0x5c')](){console[a23_0x5df3('0x42')](a23_0x5df3('0x5d')+this['currentFile']+'\x20of\x20'+this[a23_0x5df3('0x23')][a23_0x5df3('0x58')]);if(this[a23_0x5df3('0x22')]>=this[a23_0x5df3('0x23')][a23_0x5df3('0x58')]){this[a23_0x5df3('0x5e')]();return;}const _0x22d062=String(this[a23_0x5df3('0x23')][this[a23_0x5df3('0x22')]][a23_0x5df3('0x5f')]);const _0x315980=this['downloadFiles'][this[a23_0x5df3('0x22')]][a23_0x5df3('0x60')];let _0x50e485=_0x22d062[a23_0x5df3('0x61')](_0x22d062[a23_0x5df3('0x62')]('/')+0x1);const _0x34e29c=_0x50e485[a23_0x5df3('0x63')]('.')[a23_0x5df3('0x64')](0x0,-0x1)[a23_0x5df3('0x65')]('.');let _0x2d0383=this[a23_0x5df3('0x33')]+_0x22d062;const _0x25e496=_0x2d0383['split']('.')[a23_0x5df3('0x64')](0x0,-0x1)[a23_0x5df3('0x65')]('.');if(_0x315980=='youtube_single'){_0x50e485=_0x50e485+a23_0x5df3('0x66');}else if(_0x315980=='image'){_0x50e485=_0x34e29c+a23_0x5df3('0x66');_0x2d0383=_0x25e496+a23_0x5df3('0x66');}console[a23_0x5df3('0x42')](a23_0x5df3('0x67'));console[a23_0x5df3('0x42')](_0x22d062);console[a23_0x5df3('0x42')](_0x315980);console['log'](_0x50e485);console[a23_0x5df3('0x42')](_0x2d0383);console[a23_0x5df3('0x42')](_0x34e29c);console[a23_0x5df3('0x42')](_0x25e496);console[a23_0x5df3('0x42')](a23_0x5df3('0x67'));if(fsExtra[a23_0x5df3('0x59')](this[a23_0x5df3('0x1a')]+_0x50e485)){this[a23_0x5df3('0x68')](this[a23_0x5df3('0x1a')]+_0x50e485)[a23_0x5df3('0x4')](function(_0x382808){if(_0x382808){this['currentFile']++;}else{this['playlistChanged']=!![];}this['download']();}[a23_0x5df3('0x3f')](this));}else if(fsExtra[a23_0x5df3('0x59')](this['filesFolder']+_0x50e485)){this[a23_0x5df3('0x68')](this['filesFolder']+_0x50e485)[a23_0x5df3('0x4')](function(_0x1ab212){if(_0x1ab212){fsExtra[a23_0x5df3('0x69')](this['filesFolder']+_0x50e485,this[a23_0x5df3('0x1a')]+_0x50e485);this[a23_0x5df3('0x22')]++;}else{this[a23_0x5df3('0x55')]=!![];}this[a23_0x5df3('0x5c')]();}[a23_0x5df3('0x3f')](this));}else{console['log'](a23_0x5df3('0x6a')+_0x2d0383);this[a23_0x5df3('0x55')]=!![];if(_0x315980==a23_0x5df3('0x6b')){this[a23_0x5df3('0x6c')](_0x22d062);}else{this[a23_0x5df3('0x6d')](_0x2d0383,_0x50e485,_0x315980);}}}[a23_0x5df3('0x68')](_0x4523de){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0x5df3('0x6e')+_0x4523de);const _0x2c0e0f=yield mediainfo(_0x4523de)[a23_0x5df3('0x49')](_0x42cd08=>{console[a23_0x5df3('0x42')](_0x42cd08);fsExtra[a23_0x5df3('0x5a')](_0x4523de);return![];});const _0x1a1e36=_0x2c0e0f[a23_0x5df3('0x6f')][a23_0x5df3('0x70')]['length']>0x1&&_0x2c0e0f[a23_0x5df3('0x6f')][a23_0x5df3('0x70')][0x1][a23_0x5df3('0x71')]==a23_0x5df3('0x72');if(!_0x1a1e36){fsExtra[a23_0x5df3('0x5a')](_0x4523de);}console['log'](a23_0x5df3('0x73')+_0x1a1e36);return _0x1a1e36;});}['downloader'](_0x247adf,_0x45c18d,_0x18b24d){const _0x5cf961=new Downloader();console[a23_0x5df3('0x42')](_0x247adf);console[a23_0x5df3('0x42')](_0x45c18d);console[a23_0x5df3('0x42')](_0x18b24d);const _0x5ad30e=_0x5cf961[a23_0x5df3('0x5c')](_0x247adf,this[a23_0x5df3('0x1a')]+_0x45c18d);urlExists(_0x247adf,function(_0x3475ac,_0x5adc33){if(_0x5adc33){if(this[a23_0x5df3('0x24')][a23_0x5df3('0x74')](this[a23_0x5df3('0x22')])){const _0xb934e0=this[a23_0x5df3('0x24')][a23_0x5df3('0x75')](this['currentFile']);if(_0xb934e0>-0x1){this['failDownloadFiles'][a23_0x5df3('0x76')](_0xb934e0,0x1);}}console[a23_0x5df3('0x42')]('downloading:\x20'+_0x247adf);_0x5ad30e[a23_0x5df3('0x77')]();}else{if(!this[a23_0x5df3('0x24')][a23_0x5df3('0x74')](this['currentFile'])){this[a23_0x5df3('0x24')][a23_0x5df3('0x78')](this[a23_0x5df3('0x22')]);}console[a23_0x5df3('0x42')](a23_0x5df3('0x79')+_0x247adf);this['currentFile']++;this['download']();}}['bind'](this));_0x5ad30e['on'](a23_0x5df3('0x77'),function(_0x5ad30e){console['log'](a23_0x5df3('0x7a')+_0x247adf);});_0x5ad30e['on']('error',function(_0x5ad30e){console['log'](a23_0x5df3('0x7b'));this[a23_0x5df3('0x5c')]();}[a23_0x5df3('0x3f')](this));_0x5ad30e['on']('end',function(_0x5ad30e){console[a23_0x5df3('0x42')](a23_0x5df3('0x7c'));console[a23_0x5df3('0x42')](a23_0x5df3('0x7d')+_0x45c18d);console[a23_0x5df3('0x42')]('mediaType:\x20'+_0x18b24d);this[a23_0x5df3('0x68')](this[a23_0x5df3('0x1a')]+_0x45c18d)[a23_0x5df3('0x4')](function(_0x654995){if(_0x654995){this[a23_0x5df3('0x22')]++;}this[a23_0x5df3('0x5c')]();}['bind'](this));}[a23_0x5df3('0x3f')](this));_0x5ad30e['on'](a23_0x5df3('0x7e'),function(_0x5ad30e){console['log']('stopped');});_0x5ad30e['on'](a23_0x5df3('0x7f'),function(_0x5ad30e){console[a23_0x5df3('0x42')](a23_0x5df3('0x7f'));});_0x5ad30e['on'](a23_0x5df3('0x80'),function(_0x5ad30e){console[a23_0x5df3('0x42')](a23_0x5df3('0x80'));});}[a23_0x5df3('0x81')](_0x90361,_0xaf0fbc,_0x41b833,_0x1985d8){console['log'](a23_0x5df3('0x81'));console[a23_0x5df3('0x42')](_0x90361);const _0x236756=!![];let _0x3bc91d=0x0;const _0x3794a7='';console[a23_0x5df3('0x42')]('Attempting\x20to\x20download\x20'+_0x90361+a23_0x5df3('0x82')+_0xaf0fbc);if(_0x3bc91d){if(_0x3bc91d>0x5){_0x1985d8('Max\x20redirects\x20reached',_0x90361,_0x41b833,null);return;}}else{_0x3bc91d=0x0;}const _0x403738=this['tempFolder']+_0xaf0fbc;let _0x51a470;if(_0x1985d8===undefined){console[a23_0x5df3('0x42')](a23_0x5df3('0x83')+_0x90361+a23_0x5df3('0x82')+_0x403738);_0x1985d8=function(_0x4e1409,_0x1493b6){console[a23_0x5df3('0x42')](a23_0x5df3('0x84'),_0x4e1409,_0x1493b6);};}http['globalAgent'][a23_0x5df3('0x85')]=0x64;const _0x5cdfcf={'host':url[a23_0x5df3('0x2f')](_0x90361)[a23_0x5df3('0x86')],'port':0x50,'path':url[a23_0x5df3('0x2f')](_0x90361)[a23_0x5df3('0x87')],'agent':![]};const _0x37601d=http['get'](_0x5cdfcf,function(_0x26b4d4){let _0x53a656=0x0;let _0x22d381=0x0;function _0x10ccc4(){if(_0x53a656===undefined){console[a23_0x5df3('0x42')](_0xaf0fbc+a23_0x5df3('0x88')+_0x22d381+'/'+'?');}const _0x1560f0=_0x22d381/_0x53a656*0x64;console[a23_0x5df3('0x42')](_0xaf0fbc+a23_0x5df3('0x89')+_0x1560f0+'%\x09'+_0x22d381+'/'+_0x53a656);}console[a23_0x5df3('0x42')](_0xaf0fbc+'\x20'+_0x26b4d4['statusCode']);switch(_0x26b4d4[a23_0x5df3('0x8a')]){case 0xc8:_0x53a656=_0x26b4d4['headers'][a23_0x5df3('0x8b')]||_0x3794a7;fs['stat'](_0x403738,function(_0x5e1cc3,_0x402e40){if(!_0x5e1cc3){console[a23_0x5df3('0x42')](a23_0x5df3('0x8c')+_0x403738);if(_0x402e40[a23_0x5df3('0x8d')]==_0x53a656){console['log'](a23_0x5df3('0x8e')+_0x53a656+')');console[a23_0x5df3('0x42')](a23_0x5df3('0x8f'));}else{console[a23_0x5df3('0x42')](a23_0x5df3('0x90')+_0x402e40[a23_0x5df3('0x8d')]+')\x20vs\x20New('+_0x53a656+')');}}_0x51a470=fs['createWriteStream'](_0x403738);_0x26b4d4[a23_0x5df3('0x91')](_0x51a470);_0x26b4d4['on'](a23_0x5df3('0x92'),function(_0x95e2be){_0x22d381+=_0x95e2be['length'];_0x10ccc4();});_0x37601d['on']('error',function(_0x5e1cc3){console['log'](a23_0x5df3('0x93'));console[a23_0x5df3('0x42')](_0x5e1cc3);});_0x51a470['on'](a23_0x5df3('0x94'),function(){console[a23_0x5df3('0x42')](a23_0x5df3('0x95')+_0x90361+a23_0x5df3('0x82')+_0xaf0fbc);_0x1985d8(null,_0xaf0fbc,_0x41b833,_0xaf0fbc);}[a23_0x5df3('0x3f')](this));});break;case 0x12e:const _0x3873cb=_0x26b4d4[a23_0x5df3('0x96')][a23_0x5df3('0x97')];console[a23_0x5df3('0x42')](a23_0x5df3('0x98')+_0x90361+a23_0x5df3('0x82')+_0x3873cb);if(_0x3bc91d<0x5){this['downloadHTTPFile'](_0x3873cb,_0xaf0fbc,_0x1985d8,_0x3bc91d++);}else{console[a23_0x5df3('0x99')](a23_0x5df3('0x9a')+_0x90361+'.');_0x1985d8('302',null,null,null);}return;case 0x194:console[a23_0x5df3('0x42')](a23_0x5df3('0x9b')+_0x90361);default:console[a23_0x5df3('0x42')](a23_0x5df3('0x9c')+_0x90361+a23_0x5df3('0x9d')+_0x26b4d4[a23_0x5df3('0x8a')]);_0x37601d[a23_0x5df3('0x9e')]();_0x1985d8(_0x26b4d4[a23_0x5df3('0x8a')],null,null,null);return;}})['on'](a23_0x5df3('0x99'),function(_0xb4ed9){console[a23_0x5df3('0x42')]('Error\x20Downloading:\x20'+_0x90361+'\x20'+_0xb4ed9['message']);_0x1985d8(_0xb4ed9,null,null,null);});}['downloadHTTPFileCallback'](_0x4d6036,_0x274693,_0x18394a,_0x2485e6){console['log']('downloadHTTPFileCallback');console['log'](_0x4d6036);console[a23_0x5df3('0x42')](_0x274693);console[a23_0x5df3('0x42')](_0x18394a);console[a23_0x5df3('0x42')](_0x2485e6);if(_0x18394a==a23_0x5df3('0x9f')){const _0x4947a4=this[a23_0x5df3('0x23')][this[a23_0x5df3('0x22')]][a23_0x5df3('0xa0')]!=null?this[a23_0x5df3('0x23')][this[a23_0x5df3('0x22')]][a23_0x5df3('0xa0')]:0x1e;this[a23_0x5df3('0xa1')](_0x2485e6,_0x4947a4);}else if(_0x18394a==a23_0x5df3('0xa2')){if(_0x4d6036==null&&_0x274693!=''){this[a23_0x5df3('0x22')]++;}this[a23_0x5df3('0x5c')]();}console[a23_0x5df3('0x42')](this[a23_0x5df3('0x22')]);}['downloadRequestFile'](_0x3be6d1,_0x1a3a58,_0x1a1c92){progress(request(_0x3be6d1),{})['on'](a23_0x5df3('0xa3'),function(_0x13cf55){console[a23_0x5df3('0x42')](_0x13cf55);})['on'](a23_0x5df3('0x99'),function(_0x3c384f){console[a23_0x5df3('0x42')](a23_0x5df3('0xa4'));this[a23_0x5df3('0x5c')]();})['on'](a23_0x5df3('0x7c'),function(){console[a23_0x5df3('0x42')](a23_0x5df3('0x7d')+_0x1a3a58);console['log'](a23_0x5df3('0xa5')+_0x1a1c92);if(_0x1a1c92==a23_0x5df3('0x9f')){const _0x16009c=this[a23_0x5df3('0x23')][this[a23_0x5df3('0x22')]][a23_0x5df3('0xa0')]!=null?this[a23_0x5df3('0x23')][this[a23_0x5df3('0x22')]]['duration']:0x1e;this[a23_0x5df3('0xa1')](_0x1a3a58,_0x16009c);}else if(_0x1a1c92==a23_0x5df3('0xa2')){this[a23_0x5df3('0x22')]++;this['download']();}}[a23_0x5df3('0x3f')](this))[a23_0x5df3('0x91')](fs[a23_0x5df3('0xa6')](this[a23_0x5df3('0x1a')]+_0x1a3a58));}[a23_0x5df3('0xa1')](_0x35f67b,_0x266dd5=0x1e){const _0x2ad983=this['tempFolder']+_0x35f67b;console['log'](_0x2ad983);console['log'](_0x35f67b);const _0x28265a=_0x35f67b['split']('.')['slice'](0x0,-0x1)[a23_0x5df3('0x65')]('.');const _0x5aff1d='ffmpeg';const _0x482877=['-y','-r',a23_0x5df3('0xa7'),'-loop','1',a23_0x5df3('0xa8'),a23_0x5df3('0xa9'),'-i',_0x2ad983,'-t',String(_0x266dd5),a23_0x5df3('0xaa'),a23_0x5df3('0xab'),a23_0x5df3('0xac'),a23_0x5df3('0xad'),'-r','25',a23_0x5df3('0xae'),'scale=1920:1080',this[a23_0x5df3('0x1a')]+_0x28265a+a23_0x5df3('0x66')];const _0x49d61a=spawn(_0x5aff1d,_0x482877);_0x49d61a[a23_0x5df3('0xaf')]['on']('data',function(_0x5c8691){console['log'](a23_0x5df3('0xb0')+_0x2ad983);});_0x49d61a[a23_0x5df3('0xb1')]['on'](a23_0x5df3('0x92'),function(_0x56704f){console[a23_0x5df3('0x42')](a23_0x5df3('0xb2')+_0x56704f);}[a23_0x5df3('0x3f')](this));_0x49d61a['on']('close',function(){console['log'](a23_0x5df3('0xb3'));this[a23_0x5df3('0x22')]++;this['download']();}[a23_0x5df3('0x3f')](this));}['downloadYouTube'](_0x4d173b){const _0x2d8b94=this[a23_0x5df3('0x1a')]+'/'+_0x4d173b+a23_0x5df3('0x66');const _0x175de8=youtubedl(a23_0x5df3('0xb4')+_0x4d173b,[a23_0x5df3('0xb5')],{'cwd':__dirname});_0x175de8['on'](a23_0x5df3('0xb6'),function(_0x2e7d59){console[a23_0x5df3('0x42')]('Download\x20started');console[a23_0x5df3('0x42')](a23_0x5df3('0xb7')+_0x2e7d59[a23_0x5df3('0xb8')]);console[a23_0x5df3('0x42')]('size:\x20'+_0x2e7d59[a23_0x5df3('0x8d')]);});_0x175de8['on'](a23_0x5df3('0xb9'),function complete(_0x5dd9ff){'use strict';console[a23_0x5df3('0x42')]('filename:\x20'+_0x5dd9ff[a23_0x5df3('0xb8')]+a23_0x5df3('0xba'));});_0x175de8['on'](a23_0x5df3('0x7c'),function(){console[a23_0x5df3('0x42')]('finished\x20youtube\x20downloading!');this[a23_0x5df3('0x68')](_0x2d8b94)[a23_0x5df3('0x4')](function(_0x3bd177){if(_0x3bd177){this[a23_0x5df3('0x22')]++;}this['download']();}[a23_0x5df3('0x3f')](this));}['bind'](this));_0x175de8[a23_0x5df3('0x91')](fs[a23_0x5df3('0xa6')](_0x2d8b94));}[a23_0x5df3('0x5e')](){console[a23_0x5df3('0x42')](a23_0x5df3('0xbb'));if(this[a23_0x5df3('0x55')]){if(this[a23_0x5df3('0x24')][a23_0x5df3('0x58')]==0x0){fs[a23_0x5df3('0x41')](this[a23_0x5df3('0x1e')],JSON[a23_0x5df3('0x47')](this[a23_0x5df3('0x54')]));let _0x5b9c31=a23_0x5df3('0xbc')+'\x0d\x0a'+a23_0x5df3('0xbd')+'\x0d\x0a';for(const _0x5b19f1 in this[a23_0x5df3('0x23')]){const _0x1708ee=this[a23_0x5df3('0x23')][_0x5b19f1][a23_0x5df3('0x5f')];const _0x5218e9=this['downloadFiles'][_0x5b19f1][a23_0x5df3('0x60')];const _0x205611=_0x1708ee[a23_0x5df3('0x61')](_0x1708ee[a23_0x5df3('0x62')]('/')+0x1);let _0x472e2e=_0x205611['split']('.')[a23_0x5df3('0x64')](0x0,-0x1)['join']('.');if(_0x5218e9==a23_0x5df3('0x6b')){_0x472e2e=_0x1708ee;}_0x5b9c31+=a23_0x5df3('0xbe')+_0x472e2e+a23_0x5df3('0x66')+'\x0d\x0a';}fsExtra[a23_0x5df3('0x57')](this[a23_0x5df3('0x1c')]);fsExtra['copySync'](this['tempFolder'],this[a23_0x5df3('0x1c')]);fsExtra['writeFileSync'](this['m3uFile'],_0x5b9c31);fsExtra[a23_0x5df3('0x57')](this[a23_0x5df3('0x1a')]);console[a23_0x5df3('0x42')](a23_0x5df3('0xbf'));this[a23_0x5df3('0xc0')]();}else{console[a23_0x5df3('0x42')](a23_0x5df3('0xc1'));this[a23_0x5df3('0x22')]=0x0;setTimeout(function(){this[a23_0x5df3('0x5c')]();}[a23_0x5df3('0x3f')](this),0x1388);}}else{console[a23_0x5df3('0x42')](a23_0x5df3('0xc2'));}}[a23_0x5df3('0xc0')](){this[a23_0x5df3('0xc3')](a23_0x5df3('0xc4'),{'playlistid':0x1},function(_0x4b6cb9){console[a23_0x5df3('0x42')](a23_0x5df3('0xc5'));console['log'](_0x4b6cb9);this['jsonrpcClient'](a23_0x5df3('0xc6'),{'item':{'file':a23_0x5df3('0xc7')},'playlistid':0x1},function(_0x4b6cb9){console[a23_0x5df3('0x42')](a23_0x5df3('0xc8'));console[a23_0x5df3('0x42')](_0x4b6cb9);this['jsonrpcClient'](a23_0x5df3('0xc9'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x4b6cb9){console[a23_0x5df3('0x42')]('Playlist.Opened');console[a23_0x5df3('0x42')](_0x4b6cb9);if(this[a23_0x5df3('0x29')]){this['forceReload']=![];this[a23_0x5df3('0xca')](a23_0x5df3('0xcb'));}}[a23_0x5df3('0x3f')](this));}[a23_0x5df3('0x3f')](this));}[a23_0x5df3('0x3f')](this));}[a23_0x5df3('0xcc')](){console[a23_0x5df3('0x42')]('Rebooting');this[a23_0x5df3('0xca')](a23_0x5df3('0xcd'));}[a23_0x5df3('0xce')](){const _0x21ea95=format(this['playerServiceURL'],this[a23_0x5df3('0x32')]);console['log'](_0x21ea95);request({'url':_0x21ea95,'json':!![]},function(_0x9b2f2c,_0xea248b,_0x184d43){if(_0x184d43[a23_0x5df3('0x58')]>0x0){const _0x5ae09f=_0x184d43[0x0];const _0x503675=_0x5ae09f[a23_0x5df3('0xcf')];const _0x5c4b59=_0x5ae09f[a23_0x5df3('0xd0')]==0x1;this[a23_0x5df3('0xd1')](_0x503675);this[a23_0x5df3('0xd2')](_0x5c4b59);}console[a23_0x5df3('0x42')](_0x184d43);}[a23_0x5df3('0x3f')](this));}[a23_0x5df3('0xd3')](){this[a23_0x5df3('0xca')](a23_0x5df3('0xd4'));}[a23_0x5df3('0xd5')](){this[a23_0x5df3('0xca')](a23_0x5df3('0xd6'));}['setRss'](_0x4af26d){const _0x4a1b20=_0x4af26d!=null&&_0x4af26d!='';const _0x33eeb9=a23_0x5df3('0xd7');const _0x3f551f=fsExtra['readFileSync'](_0x33eeb9);console[a23_0x5df3('0x42')](a23_0x5df3('0xd8')+_0x3f551f);const _0x5d8e29=require(a23_0x5df3('0xd9'));const _0x4c6703=_0x5d8e29[a23_0x5df3('0xda')];_0x4c6703(_0x3f551f,function(_0x3740db,_0xcf3159){console['log'](a23_0x5df3('0xdb'),_0x3740db);console[a23_0x5df3('0x42')](a23_0x5df3('0xdc'),_0xcf3159);if(!_0x4af26d||_0x4af26d==null||_0x4af26d==''){_0x4af26d='none';}_0xcf3159[a23_0x5df3('0xdd')][a23_0x5df3('0xde')][0x0][a23_0x5df3('0xdf')][0x0]['_']=_0x4af26d;const _0xdb915d=new _0x5d8e29[(a23_0x5df3('0xe0'))]();const _0x2fb2e1=_0xdb915d['buildObject'](_0xcf3159);console['log'](a23_0x5df3('0xe1'),_0x2fb2e1);fsExtra[a23_0x5df3('0x41')](_0x33eeb9,_0x2fb2e1);});this[a23_0x5df3('0xca')](a23_0x5df3('0xe2'));this['jsonrpcClient'](a23_0x5df3('0xe3'),{'setting':a23_0x5df3('0xe4'),'value':_0x4a1b20},function(_0x20a4df){console[a23_0x5df3('0x42')](a23_0x5df3('0xe5'));console['log'](_0x20a4df);}['bind'](this));}[a23_0x5df3('0xd2')](_0x5ad9e4){this[a23_0x5df3('0xc3')]('Settings.SetSettingValue',{'setting':a23_0x5df3('0xe6'),'value':_0x5ad9e4},function(_0x1cf27e){console[a23_0x5df3('0x42')](a23_0x5df3('0xe7'));console[a23_0x5df3('0x42')](_0x1cf27e);}['bind'](this));}[a23_0x5df3('0xca')](_0x46135b){exec('kodi-send\x20--action=\x22'+_0x46135b+'\x22',function(_0x20dd1b){console['log'](_0x20dd1b);});}[a23_0x5df3('0xc3')](_0x29f611,_0x20b2fc,_0x338479){const _0x53d5be={'jsonrpc':a23_0x5df3('0xe8'),'method':_0x29f611,'params':_0x20b2fc,'id':0x1};this['httpClientService']['post'](this['kodiHost']+a23_0x5df3('0xe9'),_0x53d5be,![],{'user':this['kodiUser'],'pass':this['kodiPassword']})[a23_0x5df3('0x4')](function(_0x15afe0){_0x338479(_0x15afe0);})['catch'](function(_0x15d80c){});}}exports[a23_0x5df3('0xea')]=SyncPlaylistsService;