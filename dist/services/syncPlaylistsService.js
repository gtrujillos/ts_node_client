var a23_0x12af=['mediaType:\x20','stopped','destroyed','retry','Attempting\x20to\x20download\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','size','createWriteStream','err:\x20','finish','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','pipe','1/2','-pattern_type','libx264','-pix_fmt','-vf','scale=1920:1080','stdout','data','stderr','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Cleared','Playlist.Add','Playlist.Opened','RestartApp()','reboot','Rebooting','kodiCommandClient','Reboot()','rss','header_active','setRss','enableClock','turnOnTV','CECActivateSource()','turnOffTV','CECStandby()','xml2js','parseString','err:\x20%j','rssfeeds','feed','Builder','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','enableClock:\x20','kodi-send\x20--action=\x22','2.0','SyncPlaylistsService','__awaiter','next','done','value','then','__esModule','./playerService','url','request','request-progress','spawn','child_process','is-image','string-template','youtube-dl','uuid/v4','config.json','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','filesFolder','playListFile','m3uFile','currentFile','playlistChanged','failDownloadFiles','newPlayList','kodiHost','kodiUser','lulo','kodiPassword','forceReload','httpClientService','HttpClientService','init','config','readFileSync','context','parse','playerId','baseURL','WEB_SERVICE_URL','deploy/','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','checkDependencies','deviceUuid','writeFileSync','stringify','log','registerClient\x20deviceUuid:\x20','playlist','getItems','currentPlaylist','sendDeviceRegistration','sendDeviceRegistration:\x20','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','catch','getCurrentlyPlayingVideo','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','tempFolder','playListServiceURL','hasPlayListChanged','emptyDirSync','downloadFiles','length','download','reloadMediaList','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','youtube_single','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','start','push','error','error:\x20','end','Downloaded:\x20'];(function(_0xd17210,_0x5bb1d9){var _0x4e13d8=function(_0x205b8a){while(--_0x205b8a){_0xd17210['push'](_0xd17210['shift']());}};_0x4e13d8(++_0x5bb1d9);}(a23_0x12af,0x13c));var a23_0x15b2=function(_0x7f39a2,_0x5a5132){_0x7f39a2=_0x7f39a2-0x0;var _0xda827f=a23_0x12af[_0x7f39a2];return _0xda827f;};'use strict';var __awaiter=this&&this[a23_0x15b2('0x0')]||function(_0x4fdf5a,_0x3f8899,_0x374388,_0x1a8a99){function _0x59a19f(_0x17c7bb){return _0x17c7bb instanceof _0x374388?_0x17c7bb:new _0x374388(function(_0x3a3ceb){_0x3a3ceb(_0x17c7bb);});}return new(_0x374388||(_0x374388=Promise))(function(_0x2e8e2c,_0xe9b8f7){function _0x52a18(_0x17bc60){try{_0x4e24dd(_0x1a8a99[a23_0x15b2('0x1')](_0x17bc60));}catch(_0x84b0c1){_0xe9b8f7(_0x84b0c1);}}function _0x53d9d7(_0x186bdc){try{_0x4e24dd(_0x1a8a99['throw'](_0x186bdc));}catch(_0x50358f){_0xe9b8f7(_0x50358f);}}function _0x4e24dd(_0x3cb094){_0x3cb094[a23_0x15b2('0x2')]?_0x2e8e2c(_0x3cb094[a23_0x15b2('0x3')]):_0x59a19f(_0x3cb094[a23_0x15b2('0x3')])[a23_0x15b2('0x4')](_0x52a18,_0x53d9d7);}_0x4e24dd((_0x1a8a99=_0x1a8a99['apply'](_0x4fdf5a,_0x3f8899||[]))[a23_0x15b2('0x1')]());});};Object['defineProperty'](exports,a23_0x15b2('0x5'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a23_0x15b2('0x6'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a23_0x15b2('0x7'));const http=require('http');const fsExtra=require('fs-extra');const request=require(a23_0x15b2('0x8'));const progress=require(a23_0x15b2('0x9'));const spawn=require('child_process')[a23_0x15b2('0xa')];const exec=require(a23_0x15b2('0xb'))['exec'];const isImage=require(a23_0x15b2('0xc'));const format=require(a23_0x15b2('0xd'));const os=require('os');const youtubedl=require(a23_0x15b2('0xe'));const uuidv4=require(a23_0x15b2('0xf'));const configFile=a23_0x15b2('0x10');const contextFile=a23_0x15b2('0x11');const urlExists=require(a23_0x15b2('0x12'));const kodi_rpc=require(a23_0x15b2('0x13'));const Downloader=require(a23_0x15b2('0x14'));class SyncPlaylistsService{constructor(){this[a23_0x15b2('0x15')]=a23_0x15b2('0x16');this['tempFolder']=this[a23_0x15b2('0x15')]+'temp/';this[a23_0x15b2('0x17')]=this[a23_0x15b2('0x15')]+'files/';this[a23_0x15b2('0x18')]=this[a23_0x15b2('0x15')]+'playlist.txt';this[a23_0x15b2('0x19')]=this[a23_0x15b2('0x17')]+'lulo_playlist.m3u';this[a23_0x15b2('0x1a')]=0x0;this[a23_0x15b2('0x1b')]=![];this['downloadFiles']=[];this[a23_0x15b2('0x1c')]=[];this[a23_0x15b2('0x1d')]={};this[a23_0x15b2('0x1e')]='http://localhost';this[a23_0x15b2('0x1f')]=a23_0x15b2('0x20');this[a23_0x15b2('0x21')]='.lulo123.';this[a23_0x15b2('0x22')]=![];this[a23_0x15b2('0x23')]=new HttpClientService_1[(a23_0x15b2('0x24'))]();this['playerService']=new playerService_1['PlayerService']();}[a23_0x15b2('0x25')](){this[a23_0x15b2('0x26')]=JSON['parse'](fs[a23_0x15b2('0x27')](configFile));this[a23_0x15b2('0x28')]=JSON[a23_0x15b2('0x29')](fs[a23_0x15b2('0x27')](contextFile));this[a23_0x15b2('0x2a')]=this[a23_0x15b2('0x26')]['playerId'];this[a23_0x15b2('0x2b')]=process['env'][a23_0x15b2('0x2c')]+a23_0x15b2('0x2d');this['playListServiceURL']=this[a23_0x15b2('0x2b')]+a23_0x15b2('0x2e');this[a23_0x15b2('0x2f')]=this[a23_0x15b2('0x2b')]+'api/player.php?player_id={0}';this[a23_0x15b2('0x30')]=new kodi_rpc({'url':this[a23_0x15b2('0x1e')],'user':this['kodiUser'],'password':this[a23_0x15b2('0x21')]});this['checkDependencies']();this[a23_0x15b2('0x31')]();this[a23_0x15b2('0x32')]();this[a23_0x15b2('0x33')]();this[a23_0x15b2('0x34')]();setInterval(function(){this[a23_0x15b2('0x35')]();}['bind'](this),0x2710);setInterval(function(){this[a23_0x15b2('0x31')]();}[a23_0x15b2('0x36')](this),0x493e0);}[a23_0x15b2('0x37')](){}[a23_0x15b2('0x31')](){const _0x523714=this[a23_0x15b2('0x26')][a23_0x15b2('0x38')];if(!_0x523714||_0x523714==''){this[a23_0x15b2('0x26')]['deviceUuid']=uuidv4();this[a23_0x15b2('0x26')]={'deviceUuid':this[a23_0x15b2('0x26')][a23_0x15b2('0x38')],'playerId':this[a23_0x15b2('0x26')][a23_0x15b2('0x2a')]};fs[a23_0x15b2('0x39')](configFile,JSON[a23_0x15b2('0x3a')](this['config']));}console[a23_0x15b2('0x3b')](a23_0x15b2('0x3c')+_0x523714);if(this[a23_0x15b2('0x30')]&&this[a23_0x15b2('0x30')][a23_0x15b2('0x3d')]){this[a23_0x15b2('0x30')][a23_0x15b2('0x3d')][a23_0x15b2('0x3e')](0x1)[a23_0x15b2('0x4')](function(_0x100d64){this[a23_0x15b2('0x3f')]=JSON[a23_0x15b2('0x3a')](_0x100d64);this['sendDeviceRegistration']();}[a23_0x15b2('0x36')](this));}else{this['sendDeviceRegistration']();}}[a23_0x15b2('0x40')](){console['log'](a23_0x15b2('0x41'));const _0x58df0={'player_id':this[a23_0x15b2('0x2a')],'device_uuid':this[a23_0x15b2('0x26')]['deviceUuid'],'network_info':JSON[a23_0x15b2('0x3a')](os[a23_0x15b2('0x42')]()),'firmware_info':JSON[a23_0x15b2('0x3a')](this['context']),'playlist':this[a23_0x15b2('0x3f')],'playing_item':'','status':0x0};console[a23_0x15b2('0x3b')](_0x58df0);this[a23_0x15b2('0x23')][a23_0x15b2('0x43')](a23_0x15b2('0x44'),_0x58df0,![])['then'](function(_0x3f3526){console[a23_0x15b2('0x3b')]('register\x20response:\x20'+Date());})[a23_0x15b2('0x45')](function(_0x15be7a){});}[a23_0x15b2('0x35')](){console[a23_0x15b2('0x3b')](a23_0x15b2('0x35'));this[a23_0x15b2('0x30')]['player'][a23_0x15b2('0x46')]()[a23_0x15b2('0x4')](function(_0x2357d1){const _0x1e444c=_0x2357d1[a23_0x15b2('0x47')][a23_0x15b2('0x48')];this['reportStatus'](_0x1e444c);}['bind'](this))['catch'](function(_0xdb9a89){console[a23_0x15b2('0x3b')](_0xdb9a89);this[a23_0x15b2('0x49')](_0xdb9a89);}[a23_0x15b2('0x36')](this));}[a23_0x15b2('0x49')](_0x11a96f){console[a23_0x15b2('0x3b')](a23_0x15b2('0x4a')+_0x11a96f);const _0x1e166e={'player_id':this[a23_0x15b2('0x2a')],'device_uuid':this[a23_0x15b2('0x26')][a23_0x15b2('0x38')],'status':_0x11a96f!=''&&_0x11a96f!=null?0x1:0x0,'playing_item':_0x11a96f};this['httpClientService'][a23_0x15b2('0x43')](a23_0x15b2('0x4b'),_0x1e166e,![])['then'](function(_0x57042e){console[a23_0x15b2('0x3b')](a23_0x15b2('0x4c')+Date());})['catch'](function(_0x2d8a9e){});}[a23_0x15b2('0x32')](){fsExtra[a23_0x15b2('0x4d')](this[a23_0x15b2('0x15')],_0x89a473=>{});fsExtra[a23_0x15b2('0x4d')](this[a23_0x15b2('0x4e')],_0x5d1cd3=>{});fsExtra[a23_0x15b2('0x4d')](this[a23_0x15b2('0x17')],_0x21d17e=>{});}[a23_0x15b2('0x33')](){const _0x843796=format(this[a23_0x15b2('0x4f')],this[a23_0x15b2('0x2a')]);console['log'](_0x843796);request({'url':_0x843796,'json':!![]},function(_0x32f8e0,_0x2f5121,_0x299a06){console['log']('loadMediaList:\x20');this[a23_0x15b2('0x1d')]=_0x299a06;this[a23_0x15b2('0x1b')]=this[a23_0x15b2('0x50')]();fsExtra[a23_0x15b2('0x51')](this[a23_0x15b2('0x4e')]);this[a23_0x15b2('0x52')]=[];this['failDownloadFiles']=[];this[a23_0x15b2('0x1a')]=0x0;for(const _0x198d24 in _0x299a06){this[a23_0x15b2('0x52')]['push'](_0x299a06[_0x198d24]);}console[a23_0x15b2('0x3b')]('Total:\x20'+this[a23_0x15b2('0x52')][a23_0x15b2('0x53')]);if(this[a23_0x15b2('0x52')]['length']>0x0){this[a23_0x15b2('0x54')]();}}[a23_0x15b2('0x36')](this));}[a23_0x15b2('0x55')](){this[a23_0x15b2('0x22')]=!![];if(fsExtra[a23_0x15b2('0x56')](this[a23_0x15b2('0x4e')])){fsExtra[a23_0x15b2('0x51')](this[a23_0x15b2('0x4e')]);}if(fsExtra[a23_0x15b2('0x56')](this[a23_0x15b2('0x17')])){fsExtra[a23_0x15b2('0x51')](this['filesFolder']);}if(!fsExtra[a23_0x15b2('0x56')](this[a23_0x15b2('0x18')])){fsExtra[a23_0x15b2('0x57')](this[a23_0x15b2('0x18')]);}if(!fsExtra['existsSync'](this[a23_0x15b2('0x19')])){fsExtra[a23_0x15b2('0x57')](this[a23_0x15b2('0x19')]);}this[a23_0x15b2('0x33')]();}[a23_0x15b2('0x50')](){const _0x4465e1=JSON['stringify'](this[a23_0x15b2('0x1d')]);try{if(!fsExtra[a23_0x15b2('0x56')](this[a23_0x15b2('0x18')])){return!![];}else{const _0x390f78=fsExtra[a23_0x15b2('0x27')](this[a23_0x15b2('0x18')])[a23_0x15b2('0x58')]();if(_0x390f78!=_0x4465e1){return!![];}}}catch(_0x32e17d){console[a23_0x15b2('0x3b')](_0x32e17d);}return![];}[a23_0x15b2('0x54')](){console[a23_0x15b2('0x3b')](a23_0x15b2('0x59')+this['currentFile']+a23_0x15b2('0x5a')+this[a23_0x15b2('0x52')][a23_0x15b2('0x53')]);if(this[a23_0x15b2('0x1a')]>=this['downloadFiles']['length']){this[a23_0x15b2('0x5b')]();return;}const _0xd6d3a9=String(this[a23_0x15b2('0x52')][this[a23_0x15b2('0x1a')]][a23_0x15b2('0x5c')]);const _0x4f3a7b=this[a23_0x15b2('0x52')][this[a23_0x15b2('0x1a')]][a23_0x15b2('0x5d')];let _0x1feb88=_0xd6d3a9[a23_0x15b2('0x5e')](_0xd6d3a9[a23_0x15b2('0x5f')]('/')+0x1);const _0x4787a4=_0x1feb88[a23_0x15b2('0x60')]('.')['slice'](0x0,-0x1)['join']('.');let _0x348e47=this[a23_0x15b2('0x2b')]+_0xd6d3a9;const _0x27f028=_0x348e47['split']('.')[a23_0x15b2('0x61')](0x0,-0x1)[a23_0x15b2('0x62')]('.');if(_0x4f3a7b=='youtube_single'){_0x1feb88=_0x1feb88+a23_0x15b2('0x63');}else if(_0x4f3a7b==a23_0x15b2('0x64')){_0x1feb88=_0x4787a4+a23_0x15b2('0x63');_0x348e47=_0x27f028+a23_0x15b2('0x63');}console[a23_0x15b2('0x3b')](a23_0x15b2('0x65'));console['log'](_0xd6d3a9);console[a23_0x15b2('0x3b')](_0x4f3a7b);console[a23_0x15b2('0x3b')](_0x1feb88);console['log'](_0x348e47);console[a23_0x15b2('0x3b')](_0x4787a4);console[a23_0x15b2('0x3b')](_0x27f028);console[a23_0x15b2('0x3b')]('**********+');if(fsExtra[a23_0x15b2('0x56')](this[a23_0x15b2('0x4e')]+_0x1feb88)){this[a23_0x15b2('0x66')](this[a23_0x15b2('0x4e')]+_0x1feb88)[a23_0x15b2('0x4')](function(_0x294737){if(_0x294737){this[a23_0x15b2('0x1a')]++;}else{this[a23_0x15b2('0x1b')]=!![];}this[a23_0x15b2('0x54')]();}[a23_0x15b2('0x36')](this));}else if(fsExtra[a23_0x15b2('0x56')](this[a23_0x15b2('0x17')]+_0x1feb88)){this[a23_0x15b2('0x66')](this['filesFolder']+_0x1feb88)[a23_0x15b2('0x4')](function(_0x4a69bc){if(_0x4a69bc){fsExtra[a23_0x15b2('0x67')](this['filesFolder']+_0x1feb88,this[a23_0x15b2('0x4e')]+_0x1feb88);this[a23_0x15b2('0x1a')]++;}else{this[a23_0x15b2('0x1b')]=!![];}this[a23_0x15b2('0x54')]();}[a23_0x15b2('0x36')](this));}else{console[a23_0x15b2('0x3b')](a23_0x15b2('0x68')+_0x348e47);this[a23_0x15b2('0x1b')]=!![];if(_0x4f3a7b==a23_0x15b2('0x69')){this['downloadYouTube'](_0xd6d3a9);}else{this[a23_0x15b2('0x6a')](_0x348e47,_0x1feb88,_0x4f3a7b);}}}[a23_0x15b2('0x66')](_0xf2cd14){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0x15b2('0x6b')+_0xf2cd14);const _0x5d2f8e=yield mediainfo(_0xf2cd14)[a23_0x15b2('0x45')](_0x443aaa=>{console[a23_0x15b2('0x3b')](_0x443aaa);fsExtra[a23_0x15b2('0x57')](_0xf2cd14);return![];});const _0x546aa0=_0x5d2f8e[a23_0x15b2('0x6c')][a23_0x15b2('0x6d')][a23_0x15b2('0x53')]>0x1&&_0x5d2f8e[a23_0x15b2('0x6c')][a23_0x15b2('0x6d')][0x1]['@type']==a23_0x15b2('0x6e');if(!_0x546aa0){fsExtra[a23_0x15b2('0x57')](_0xf2cd14);}console[a23_0x15b2('0x3b')](a23_0x15b2('0x6f')+_0x546aa0);return _0x546aa0;});}[a23_0x15b2('0x6a')](_0x2d1937,_0x5dea37,_0xca45d7){const _0x4097ea=new Downloader();console[a23_0x15b2('0x3b')](_0x2d1937);console[a23_0x15b2('0x3b')](_0x5dea37);console[a23_0x15b2('0x3b')](_0xca45d7);const _0x3752ba=_0x4097ea[a23_0x15b2('0x54')](_0x2d1937,this[a23_0x15b2('0x4e')]+_0x5dea37);urlExists(_0x2d1937,function(_0x1f10c3,_0x430df8){if(_0x430df8){if(this['failDownloadFiles']['includes'](this[a23_0x15b2('0x1a')])){const _0x36dcc6=this['failDownloadFiles']['indexOf'](this[a23_0x15b2('0x1a')]);if(_0x36dcc6>-0x1){this[a23_0x15b2('0x1c')]['splice'](_0x36dcc6,0x1);}}console[a23_0x15b2('0x3b')]('downloading:\x20'+_0x2d1937);_0x3752ba[a23_0x15b2('0x70')]();}else{if(!this['failDownloadFiles']['includes'](this[a23_0x15b2('0x1a')])){this[a23_0x15b2('0x1c')][a23_0x15b2('0x71')](this[a23_0x15b2('0x1a')]);}console[a23_0x15b2('0x3b')]('Error:\x20'+_0x2d1937);this[a23_0x15b2('0x1a')]++;this[a23_0x15b2('0x54')]();}}[a23_0x15b2('0x36')](this));_0x3752ba['on'](a23_0x15b2('0x70'),function(_0x3752ba){console[a23_0x15b2('0x3b')]('start:\x20'+_0x2d1937);});_0x3752ba['on'](a23_0x15b2('0x72'),function(_0x3752ba){console['log'](a23_0x15b2('0x73'));this[a23_0x15b2('0x54')]();}[a23_0x15b2('0x36')](this));_0x3752ba['on'](a23_0x15b2('0x74'),function(_0x3752ba){console[a23_0x15b2('0x3b')](a23_0x15b2('0x74'));console[a23_0x15b2('0x3b')](a23_0x15b2('0x75')+_0x5dea37);console['log'](a23_0x15b2('0x76')+_0xca45d7);this[a23_0x15b2('0x66')](this[a23_0x15b2('0x4e')]+_0x5dea37)[a23_0x15b2('0x4')](function(_0x31f01a){if(_0x31f01a){this[a23_0x15b2('0x1a')]++;}this[a23_0x15b2('0x54')]();}[a23_0x15b2('0x36')](this));}[a23_0x15b2('0x36')](this));_0x3752ba['on'](a23_0x15b2('0x77'),function(_0x3752ba){console[a23_0x15b2('0x3b')](a23_0x15b2('0x77'));});_0x3752ba['on'](a23_0x15b2('0x78'),function(_0x3752ba){console[a23_0x15b2('0x3b')]('destroyed');});_0x3752ba['on']('retry',function(_0x3752ba){console[a23_0x15b2('0x3b')](a23_0x15b2('0x79'));});}['downloadHTTPFile'](_0x4b91f0,_0x5c4753,_0x311759,_0x56cd54){console[a23_0x15b2('0x3b')]('downloadHTTPFile');console[a23_0x15b2('0x3b')](_0x4b91f0);const _0x27ff65=!![];let _0x43850d=0x0;const _0x30bcd9='';console[a23_0x15b2('0x3b')](a23_0x15b2('0x7a')+_0x4b91f0+a23_0x15b2('0x7b')+_0x5c4753);if(_0x43850d){if(_0x43850d>0x5){_0x56cd54('Max\x20redirects\x20reached',_0x4b91f0,_0x311759,null);return;}}else{_0x43850d=0x0;}const _0x408aeb=this[a23_0x15b2('0x4e')]+_0x5c4753;let _0x578251;if(_0x56cd54===undefined){console['log']('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x4b91f0+a23_0x15b2('0x7b')+_0x408aeb);_0x56cd54=function(_0x23040c,_0x3278bd){console[a23_0x15b2('0x3b')](a23_0x15b2('0x7c'),_0x23040c,_0x3278bd);};}http[a23_0x15b2('0x7d')][a23_0x15b2('0x7e')]=0x64;const _0x3ca3db={'host':url[a23_0x15b2('0x29')](_0x4b91f0)[a23_0x15b2('0x7f')],'port':0x50,'path':url['parse'](_0x4b91f0)[a23_0x15b2('0x80')],'agent':![]};const _0x543fef=http[a23_0x15b2('0x81')](_0x3ca3db,function(_0x7f5674){let _0x5bb1f0=0x0;let _0xcff66e=0x0;function _0x255173(){if(_0x5bb1f0===undefined){console[a23_0x15b2('0x3b')](_0x5c4753+'\x20Progress:\x20unknown\x09'+_0xcff66e+'/'+'?');}const _0x3d20b6=_0xcff66e/_0x5bb1f0*0x64;console[a23_0x15b2('0x3b')](_0x5c4753+a23_0x15b2('0x82')+_0x3d20b6+'%\x09'+_0xcff66e+'/'+_0x5bb1f0);}console[a23_0x15b2('0x3b')](_0x5c4753+'\x20'+_0x7f5674[a23_0x15b2('0x83')]);switch(_0x7f5674['statusCode']){case 0xc8:_0x5bb1f0=_0x7f5674[a23_0x15b2('0x84')][a23_0x15b2('0x85')]||_0x30bcd9;fs[a23_0x15b2('0x86')](_0x408aeb,function(_0x55c531,_0x51eb72){if(!_0x55c531){console[a23_0x15b2('0x3b')](a23_0x15b2('0x87')+_0x408aeb);if(_0x51eb72['size']==_0x5bb1f0){console[a23_0x15b2('0x3b')](a23_0x15b2('0x88')+_0x5bb1f0+')');console[a23_0x15b2('0x3b')](a23_0x15b2('0x89'));}else{console[a23_0x15b2('0x3b')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x51eb72[a23_0x15b2('0x8a')]+')\x20vs\x20New('+_0x5bb1f0+')');}}_0x578251=fs[a23_0x15b2('0x8b')](_0x408aeb);_0x7f5674['pipe'](_0x578251);_0x7f5674['on']('data',function(_0x2693e0){_0xcff66e+=_0x2693e0['length'];_0x255173();});_0x543fef['on'](a23_0x15b2('0x72'),function(_0x55c531){console[a23_0x15b2('0x3b')](a23_0x15b2('0x8c'));console[a23_0x15b2('0x3b')](_0x55c531);});_0x578251['on'](a23_0x15b2('0x8d'),function(){console[a23_0x15b2('0x3b')]('Downloaded\x20'+_0x4b91f0+'\x20to\x20'+_0x5c4753);_0x56cd54(null,_0x5c4753,_0x311759,_0x5c4753);}['bind'](this));});break;case 0x12e:const _0x4412b9=_0x7f5674[a23_0x15b2('0x84')][a23_0x15b2('0x8e')];console[a23_0x15b2('0x3b')](a23_0x15b2('0x8f')+_0x4b91f0+a23_0x15b2('0x7b')+_0x4412b9);if(_0x43850d<0x5){this['downloadHTTPFile'](_0x4412b9,_0x5c4753,_0x56cd54,_0x43850d++);}else{console[a23_0x15b2('0x72')](a23_0x15b2('0x90')+_0x4b91f0+'.');_0x56cd54(a23_0x15b2('0x91'),null,null,null);}return;case 0x194:console[a23_0x15b2('0x3b')]('File\x20Not\x20Found\x20'+_0x4b91f0);default:console[a23_0x15b2('0x3b')](a23_0x15b2('0x92')+_0x4b91f0+'\x20STATUS:\x20'+_0x7f5674[a23_0x15b2('0x83')]);_0x543fef[a23_0x15b2('0x93')]();_0x56cd54(_0x7f5674[a23_0x15b2('0x83')],null,null,null);return;}})['on'](a23_0x15b2('0x72'),function(_0xde2d85){console['log'](a23_0x15b2('0x94')+_0x4b91f0+'\x20'+_0xde2d85[a23_0x15b2('0x95')]);_0x56cd54(_0xde2d85,null,null,null);});}[a23_0x15b2('0x96')](_0x5c9a02,_0x10ab00,_0x5978b1,_0x36738c){console[a23_0x15b2('0x3b')](a23_0x15b2('0x96'));console[a23_0x15b2('0x3b')](_0x5c9a02);console[a23_0x15b2('0x3b')](_0x10ab00);console[a23_0x15b2('0x3b')](_0x5978b1);console['log'](_0x36738c);if(_0x5978b1==a23_0x15b2('0x64')){const _0x15987b=this[a23_0x15b2('0x52')][this['currentFile']]['duration']!=null?this[a23_0x15b2('0x52')][this[a23_0x15b2('0x1a')]][a23_0x15b2('0x97')]:0x1e;this[a23_0x15b2('0x98')](_0x36738c,_0x15987b);}else if(_0x5978b1==a23_0x15b2('0x99')){if(_0x5c9a02==null&&_0x10ab00!=''){this[a23_0x15b2('0x1a')]++;}this[a23_0x15b2('0x54')]();}console['log'](this[a23_0x15b2('0x1a')]);}[a23_0x15b2('0x9a')](_0x52946a,_0xeaba2b,_0x1799a9){progress(request(_0x52946a),{})['on'](a23_0x15b2('0x9b'),function(_0x32252b){console[a23_0x15b2('0x3b')](_0x32252b);})['on'](a23_0x15b2('0x72'),function(_0x87f2a2){console[a23_0x15b2('0x3b')]('Error\x20downloading\x20file');this[a23_0x15b2('0x54')]();})['on'](a23_0x15b2('0x74'),function(){console[a23_0x15b2('0x3b')](a23_0x15b2('0x75')+_0xeaba2b);console[a23_0x15b2('0x3b')](a23_0x15b2('0x76')+_0x1799a9);if(_0x1799a9==a23_0x15b2('0x64')){const _0x34a09e=this[a23_0x15b2('0x52')][this['currentFile']][a23_0x15b2('0x97')]!=null?this[a23_0x15b2('0x52')][this[a23_0x15b2('0x1a')]][a23_0x15b2('0x97')]:0x1e;this[a23_0x15b2('0x98')](_0xeaba2b,_0x34a09e);}else if(_0x1799a9==a23_0x15b2('0x99')){this['currentFile']++;this[a23_0x15b2('0x54')]();}}[a23_0x15b2('0x36')](this))[a23_0x15b2('0x9c')](fs[a23_0x15b2('0x8b')](this['tempFolder']+_0xeaba2b));}['createImageVideo'](_0x14b1d5,_0x19f90f=0x1e){const _0x342ded=this[a23_0x15b2('0x4e')]+_0x14b1d5;console[a23_0x15b2('0x3b')](_0x342ded);console['log'](_0x14b1d5);const _0x2a0c53=_0x14b1d5['split']('.')[a23_0x15b2('0x61')](0x0,-0x1)[a23_0x15b2('0x62')]('.');const _0x1b63d1='ffmpeg';const _0x23fa6a=['-y','-r',a23_0x15b2('0x9d'),'-loop','1',a23_0x15b2('0x9e'),'glob','-i',_0x342ded,'-t',String(_0x19f90f),'-c:v',a23_0x15b2('0x9f'),a23_0x15b2('0xa0'),'yuv420p','-r','25',a23_0x15b2('0xa1'),a23_0x15b2('0xa2'),this[a23_0x15b2('0x4e')]+_0x2a0c53+'.mp4'];const _0xe4ff3f=spawn(_0x1b63d1,_0x23fa6a);_0xe4ff3f[a23_0x15b2('0xa3')]['on'](a23_0x15b2('0xa4'),function(_0x53211f){console[a23_0x15b2('0x3b')]('Converting\x20'+_0x342ded);});_0xe4ff3f[a23_0x15b2('0xa5')]['on'](a23_0x15b2('0xa4'),function(_0x1963c3){console[a23_0x15b2('0x3b')](a23_0x15b2('0xa6')+_0x1963c3);}[a23_0x15b2('0x36')](this));_0xe4ff3f['on'](a23_0x15b2('0xa7'),function(){console[a23_0x15b2('0x3b')](a23_0x15b2('0xa8'));this[a23_0x15b2('0x1a')]++;this[a23_0x15b2('0x54')]();}['bind'](this));}[a23_0x15b2('0xa9')](_0x170926){const _0x10da85=this[a23_0x15b2('0x4e')]+'/'+_0x170926+a23_0x15b2('0x63');const _0x4ad855=youtubedl(a23_0x15b2('0xaa')+_0x170926,[a23_0x15b2('0xab')],{'cwd':__dirname});_0x4ad855['on'](a23_0x15b2('0xac'),function(_0x45d28e){console['log'](a23_0x15b2('0xad'));console[a23_0x15b2('0x3b')](a23_0x15b2('0xae')+_0x45d28e[a23_0x15b2('0xaf')]);console[a23_0x15b2('0x3b')]('size:\x20'+_0x45d28e[a23_0x15b2('0x8a')]);});_0x4ad855['on'](a23_0x15b2('0xb0'),function complete(_0x4f8853){'use strict';console[a23_0x15b2('0x3b')](a23_0x15b2('0xae')+_0x4f8853[a23_0x15b2('0xaf')]+a23_0x15b2('0xb1'));});_0x4ad855['on'](a23_0x15b2('0x74'),function(){console[a23_0x15b2('0x3b')](a23_0x15b2('0xb2'));this[a23_0x15b2('0x66')](_0x10da85)[a23_0x15b2('0x4')](function(_0x39afd4){if(_0x39afd4){this[a23_0x15b2('0x1a')]++;}this[a23_0x15b2('0x54')]();}[a23_0x15b2('0x36')](this));}[a23_0x15b2('0x36')](this));_0x4ad855[a23_0x15b2('0x9c')](fs[a23_0x15b2('0x8b')](_0x10da85));}[a23_0x15b2('0x5b')](){console[a23_0x15b2('0x3b')]('Finishing');if(this[a23_0x15b2('0x1b')]){if(this[a23_0x15b2('0x1c')][a23_0x15b2('0x53')]==0x0){fs[a23_0x15b2('0x39')](this[a23_0x15b2('0x18')],JSON[a23_0x15b2('0x3a')](this[a23_0x15b2('0x1d')]));let _0x113b70=a23_0x15b2('0xb3')+'\x0d\x0a'+a23_0x15b2('0xb4')+'\x0d\x0a';for(const _0x56f3eb in this[a23_0x15b2('0x52')]){const _0x111ac2=this[a23_0x15b2('0x52')][_0x56f3eb][a23_0x15b2('0x5c')];const _0x12260d=this[a23_0x15b2('0x52')][_0x56f3eb][a23_0x15b2('0x5d')];const _0x352eb3=_0x111ac2['substring'](_0x111ac2[a23_0x15b2('0x5f')]('/')+0x1);let _0x12445d=_0x352eb3['split']('.')[a23_0x15b2('0x61')](0x0,-0x1)[a23_0x15b2('0x62')]('.');if(_0x12260d=='youtube_single'){_0x12445d=_0x111ac2;}_0x113b70+=a23_0x15b2('0xb5')+_0x12445d+a23_0x15b2('0x63')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a23_0x15b2('0x17')]);fsExtra[a23_0x15b2('0x67')](this[a23_0x15b2('0x4e')],this[a23_0x15b2('0x17')]);fsExtra[a23_0x15b2('0x39')](this[a23_0x15b2('0x19')],_0x113b70);fsExtra['emptyDirSync'](this[a23_0x15b2('0x4e')]);console[a23_0x15b2('0x3b')](a23_0x15b2('0xb6'));this[a23_0x15b2('0xb7')]();}else{console[a23_0x15b2('0x3b')](a23_0x15b2('0xb8'));this[a23_0x15b2('0x1a')]=0x0;setTimeout(function(){this[a23_0x15b2('0x54')]();}[a23_0x15b2('0x36')](this),0x1388);}}else{console[a23_0x15b2('0x3b')](a23_0x15b2('0xb9'));}}[a23_0x15b2('0xb7')](){this[a23_0x15b2('0xba')]('Playlist.Clear',{'playlistid':0x1},function(_0x5b9dd8){console[a23_0x15b2('0x3b')](a23_0x15b2('0xbb'));console[a23_0x15b2('0x3b')](_0x5b9dd8);this[a23_0x15b2('0xba')](a23_0x15b2('0xbc'),{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x5b9dd8){console[a23_0x15b2('0x3b')]('Playlist.Added');console['log'](_0x5b9dd8);this[a23_0x15b2('0xba')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x5b9dd8){console[a23_0x15b2('0x3b')](a23_0x15b2('0xbd'));console[a23_0x15b2('0x3b')](_0x5b9dd8);if(this['forceReload']){this[a23_0x15b2('0x22')]=![];this['kodiCommandClient'](a23_0x15b2('0xbe'));}}[a23_0x15b2('0x36')](this));}[a23_0x15b2('0x36')](this));}['bind'](this));}[a23_0x15b2('0xbf')](){console['log'](a23_0x15b2('0xc0'));this[a23_0x15b2('0xc1')](a23_0x15b2('0xc2'));}['updateSettings'](){const _0x424e5a=format(this[a23_0x15b2('0x2f')],this[a23_0x15b2('0x2a')]);console[a23_0x15b2('0x3b')](_0x424e5a);request({'url':_0x424e5a,'json':!![]},function(_0x45a165,_0x3e6d5e,_0x364c2c){if(_0x364c2c[a23_0x15b2('0x53')]>0x0){const _0x2cfde8=_0x364c2c[0x0];const _0x1064bb=_0x2cfde8[a23_0x15b2('0xc3')];const _0x244567=_0x2cfde8[a23_0x15b2('0xc4')]==0x1;this[a23_0x15b2('0xc5')](_0x1064bb);this[a23_0x15b2('0xc6')](_0x244567);}console[a23_0x15b2('0x3b')](_0x364c2c);}['bind'](this));}[a23_0x15b2('0xc7')](){this[a23_0x15b2('0xc1')](a23_0x15b2('0xc8'));}[a23_0x15b2('0xc9')](){this[a23_0x15b2('0xc1')](a23_0x15b2('0xca'));}[a23_0x15b2('0xc5')](_0x9e1d65){const _0x4c0b36=_0x9e1d65!=null&&_0x9e1d65!='';const _0x2e20c7='/home/osmc/.kodi/userdata/RssFeeds.xml';const _0x1fdd68=fsExtra[a23_0x15b2('0x27')](_0x2e20c7);console[a23_0x15b2('0x3b')]('xmlContent:\x20'+_0x1fdd68);const _0x329d82=require(a23_0x15b2('0xcb'));const _0x493717=_0x329d82[a23_0x15b2('0xcc')];_0x493717(_0x1fdd68,function(_0x356b05,_0x2f4ad0){console['log'](a23_0x15b2('0xcd'),_0x356b05);console[a23_0x15b2('0x3b')]('result:\x20%j',_0x2f4ad0);if(!_0x9e1d65||_0x9e1d65==null||_0x9e1d65==''){_0x9e1d65='none';}_0x2f4ad0[a23_0x15b2('0xce')]['set'][0x0][a23_0x15b2('0xcf')][0x0]['_']=_0x9e1d65;const _0x3b6971=new _0x329d82[(a23_0x15b2('0xd0'))]();const _0x2e4175=_0x3b6971['buildObject'](_0x2f4ad0);console[a23_0x15b2('0x3b')](a23_0x15b2('0xd1'),_0x2e4175);fsExtra[a23_0x15b2('0x39')](_0x2e20c7,_0x2e4175);});this[a23_0x15b2('0xc1')](a23_0x15b2('0xd2'));this[a23_0x15b2('0xba')](a23_0x15b2('0xd3'),{'setting':a23_0x15b2('0xd4'),'value':_0x4c0b36},function(_0x59792b){console[a23_0x15b2('0x3b')]('setRss:');console[a23_0x15b2('0x3b')](_0x59792b);}['bind'](this));}[a23_0x15b2('0xc6')](_0x513bef){this[a23_0x15b2('0xba')](a23_0x15b2('0xd3'),{'setting':'videoplayer.usedisplayasclock','value':_0x513bef},function(_0x26209c){console[a23_0x15b2('0x3b')](a23_0x15b2('0xd5'));console[a23_0x15b2('0x3b')](_0x26209c);}[a23_0x15b2('0x36')](this));}[a23_0x15b2('0xc1')](_0x4ec11c){exec(a23_0x15b2('0xd6')+_0x4ec11c+'\x22',function(_0x344bd2){console[a23_0x15b2('0x3b')](_0x344bd2);});}[a23_0x15b2('0xba')](_0x19ca51,_0x3c07b8,_0x220ff7){const _0x3870a7={'jsonrpc':a23_0x15b2('0xd7'),'method':_0x19ca51,'params':_0x3c07b8,'id':0x1};this[a23_0x15b2('0x23')][a23_0x15b2('0x43')](this[a23_0x15b2('0x1e')]+'/jsonrpc',_0x3870a7,![],{'user':this[a23_0x15b2('0x1f')],'pass':this[a23_0x15b2('0x21')]})[a23_0x15b2('0x4')](function(_0x17b602){_0x220ff7(_0x17b602);})['catch'](function(_0x501923){});}}exports[a23_0x15b2('0xd8')]=SyncPlaylistsService;