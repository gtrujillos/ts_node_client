var a22_0x2d14=['content-length','stat','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','data','err:\x20','finish','headers','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','message','downloadHTTPFileCallback','duration','downloadRequestFile','Error\x20downloading\x20file','Downloaded:\x20','createImageVideo','video','ffmpeg','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','yuv420p','-vf','stdout','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','--format=18','Download\x20started','filename:\x20','_filename','size:\x20','size','complete','finished\x20youtube\x20downloading!','pipe','createWriteStream','finishProcess','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','copySync','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','throw','done','value','then','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request-progress','child_process','spawn','is-image','string-template','uuid/v4','config.json','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','newPlayList','httpClientService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','checkDependencies','loadMediaList','bind','registerClient','getItems','stringify','networkInterfaces','log','register\x20response:\x20','deviceUuid','writeFileSync','reportStatus','getCurrentlyPlayingVideo','item','label','post','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','hasPlayListChanged','emptyDirSync','downloadFiles','push','Total:\x20','length','reloadMediaList','existsSync','playListFile','removeSync','toString','error','download','\x20of\x20','path','media_type','substring','lastIndexOf','slice','join','split','.mp4','image','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','catch','media','track','@type','Video','mediainfo\x20check:','includes','failDownloadFiles','indexOf','splice','downloading:\x20','start','start:\x20','error:\x20','end','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode'];(function(_0x17047d,_0x29e4f4){var _0x167821=function(_0x4fe7a6){while(--_0x4fe7a6){_0x17047d['push'](_0x17047d['shift']());}};_0x167821(++_0x29e4f4);}(a22_0x2d14,0xf3));var a22_0xeeeb=function(_0x5cf2e4,_0x1cc16c){_0x5cf2e4=_0x5cf2e4-0x0;var _0x10c954=a22_0x2d14[_0x5cf2e4];return _0x10c954;};'use strict';var __awaiter=this&&this[a22_0xeeeb('0x0')]||function(_0x8790d0,_0x4fd79c,_0x14f376,_0x5cfbc1){return new(_0x14f376||(_0x14f376=Promise))(function(_0x2ad9bd,_0x553385){function _0xd7791d(_0x1d6087){try{_0x3ba51d(_0x5cfbc1[a22_0xeeeb('0x1')](_0x1d6087));}catch(_0x370059){_0x553385(_0x370059);}}function _0x9a2c7f(_0x2a9d76){try{_0x3ba51d(_0x5cfbc1[a22_0xeeeb('0x2')](_0x2a9d76));}catch(_0x1946a1){_0x553385(_0x1946a1);}}function _0x3ba51d(_0x2336f1){_0x2336f1[a22_0xeeeb('0x3')]?_0x2ad9bd(_0x2336f1[a22_0xeeeb('0x4')]):new _0x14f376(function(_0x2ad9bd){_0x2ad9bd(_0x2336f1[a22_0xeeeb('0x4')]);})[a22_0xeeeb('0x5')](_0xd7791d,_0x9a2c7f);}_0x3ba51d((_0x5cfbc1=_0x5cfbc1['apply'](_0x8790d0,_0x4fd79c||[]))['next']());});};Object[a22_0xeeeb('0x6')](exports,a22_0xeeeb('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0xeeeb('0x8'));const mediainfo=require(a22_0xeeeb('0x9'));const fs=require('fs');const url=require(a22_0xeeeb('0xa'));const http=require(a22_0xeeeb('0xb'));const fsExtra=require(a22_0xeeeb('0xc'));const request=require('request');const progress=require(a22_0xeeeb('0xd'));const spawn=require(a22_0xeeeb('0xe'))[a22_0xeeeb('0xf')];const isImage=require(a22_0xeeeb('0x10'));const format=require(a22_0xeeeb('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0xeeeb('0x12'));const configFile=a22_0xeeeb('0x13');const contextFile=a22_0xeeeb('0x14');const urlExists=require(a22_0xeeeb('0x15'));const kodi_rpc=require(a22_0xeeeb('0x16'));const Downloader=require(a22_0xeeeb('0x17'));class SyncPlaylistsService{constructor(){this[a22_0xeeeb('0x18')]=a22_0xeeeb('0x19');this[a22_0xeeeb('0x1a')]=this[a22_0xeeeb('0x18')]+a22_0xeeeb('0x1b');this[a22_0xeeeb('0x1c')]=this[a22_0xeeeb('0x18')]+a22_0xeeeb('0x1d');this['playListFile']=this['mediaFolder']+a22_0xeeeb('0x1e');this[a22_0xeeeb('0x1f')]=this['filesFolder']+a22_0xeeeb('0x20');this[a22_0xeeeb('0x21')]=0x0;this[a22_0xeeeb('0x22')]=![];this['downloadFiles']=[];this['failDownloadFiles']=[];this[a22_0xeeeb('0x23')]={};this[a22_0xeeeb('0x24')]=new HttpClientService_1['HttpClientService']();}[a22_0xeeeb('0x25')](){this[a22_0xeeeb('0x26')]=JSON[a22_0xeeeb('0x27')](fs[a22_0xeeeb('0x28')](configFile));this[a22_0xeeeb('0x29')]=JSON[a22_0xeeeb('0x27')](fs['readFileSync'](contextFile));this[a22_0xeeeb('0x2a')]=this[a22_0xeeeb('0x26')][a22_0xeeeb('0x2a')];this[a22_0xeeeb('0x2b')]=process['env'][a22_0xeeeb('0x2c')]+a22_0xeeeb('0x2d');this[a22_0xeeeb('0x2e')]=this[a22_0xeeeb('0x2b')]+a22_0xeeeb('0x2f');this[a22_0xeeeb('0x30')]=new kodi_rpc({'url':'http://localhost'});this[a22_0xeeeb('0x31')]();this['registerClient']();this['checkFolders']();this[a22_0xeeeb('0x32')]();setInterval(function(){this['reportStatus']();}[a22_0xeeeb('0x33')](this),0x2710);setInterval(function(){this['registerClient']();}[a22_0xeeeb('0x33')](this),0xea60);}['checkDependencies'](){}[a22_0xeeeb('0x34')](){this[a22_0xeeeb('0x30')]['playlist'][a22_0xeeeb('0x35')](0x1)[a22_0xeeeb('0x5')](function(_0x393312){const _0x3cadb9=JSON[a22_0xeeeb('0x36')](_0x393312);const _0x493465={'player_id':this['playerId'],'device_uuid':this[a22_0xeeeb('0x26')]['deviceUuid'],'network_info':JSON[a22_0xeeeb('0x36')](os[a22_0xeeeb('0x37')]()),'firmware_info':JSON[a22_0xeeeb('0x36')](this[a22_0xeeeb('0x29')]),'playlist':_0x3cadb9,'playing_item':'','status':0x0};this['httpClientService']['post']('http://restapi.lulo.run/player_devices/register',_0x493465,![])[a22_0xeeeb('0x5')](function(_0xabe5da){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x39')+Date());})['catch'](function(_0x26ddb3){});console[a22_0xeeeb('0x38')](_0x493465);}[a22_0xeeeb('0x33')](this));const _0x5f3c5c=this[a22_0xeeeb('0x26')][a22_0xeeeb('0x3a')];if(!_0x5f3c5c||_0x5f3c5c==''){this[a22_0xeeeb('0x26')][a22_0xeeeb('0x3a')]=uuidv4();this['config']={'deviceUuid':this[a22_0xeeeb('0x26')][a22_0xeeeb('0x3a')],'playerId':this['config'][a22_0xeeeb('0x2a')]};fs[a22_0xeeeb('0x3b')](configFile,JSON[a22_0xeeeb('0x36')](this[a22_0xeeeb('0x26')]));}}['reportStatus'](){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x3c'));this[a22_0xeeeb('0x30')]['player'][a22_0xeeeb('0x3d')]()[a22_0xeeeb('0x5')](function(_0x16ef80){const _0x44fd61=_0x16ef80[a22_0xeeeb('0x3e')][a22_0xeeeb('0x3f')];const _0x4b3ab2={'player_id':this['playerId'],'device_uuid':this['config'][a22_0xeeeb('0x3a')],'status':_0x44fd61!=''&&_0x44fd61!=null?0x1:0x0,'playing_item':_0x44fd61};this['httpClientService'][a22_0xeeeb('0x40')](a22_0xeeeb('0x41'),_0x4b3ab2,![])['then'](function(_0x2a92a8){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x42')+Date());})['catch'](function(_0x320e7d){});}[a22_0xeeeb('0x33')](this));}[a22_0xeeeb('0x43')](){fsExtra['ensureDir'](this[a22_0xeeeb('0x18')],_0x3fce2e=>{});fsExtra[a22_0xeeeb('0x44')](this[a22_0xeeeb('0x1a')],_0x317037=>{});fsExtra[a22_0xeeeb('0x44')](this[a22_0xeeeb('0x1c')],_0x39a5f3=>{});}[a22_0xeeeb('0x32')](){const _0x418466=format(this[a22_0xeeeb('0x2e')],this['playerId']);console[a22_0xeeeb('0x38')](_0x418466);request({'url':_0x418466,'json':!![]},function(_0x23c8f1,_0x199019,_0xb7679d){this[a22_0xeeeb('0x23')]=_0xb7679d;this[a22_0xeeeb('0x22')]=this[a22_0xeeeb('0x45')]();fsExtra[a22_0xeeeb('0x46')](this['tempFolder']);this[a22_0xeeeb('0x47')]=[];this['failDownloadFiles']=[];this[a22_0xeeeb('0x21')]=0x0;for(const _0x344108 in _0xb7679d){this[a22_0xeeeb('0x47')][a22_0xeeeb('0x48')](_0xb7679d[_0x344108]);}console[a22_0xeeeb('0x38')](a22_0xeeeb('0x49')+this[a22_0xeeeb('0x47')]['length']);if(this[a22_0xeeeb('0x47')][a22_0xeeeb('0x4a')]>0x0){this['download']();}}['bind'](this));}[a22_0xeeeb('0x4b')](){if(fsExtra[a22_0xeeeb('0x4c')](this[a22_0xeeeb('0x4d')])){fsExtra[a22_0xeeeb('0x4e')](this[a22_0xeeeb('0x4d')]);}this[a22_0xeeeb('0x32')]();}['hasPlayListChanged'](){const _0x3c2108=JSON[a22_0xeeeb('0x36')](this['newPlayList']);try{if(!fs[a22_0xeeeb('0x4c')](this[a22_0xeeeb('0x4d')])){return!![];}else{const _0xbdb51b=fs[a22_0xeeeb('0x28')](this[a22_0xeeeb('0x4d')])[a22_0xeeeb('0x4f')]();if(_0xbdb51b!=_0x3c2108){return!![];}}}catch(_0x5c20f1){console[a22_0xeeeb('0x50')](_0x5c20f1);}return![];}[a22_0xeeeb('0x51')](){console[a22_0xeeeb('0x38')]('this.currentFile:\x20'+this[a22_0xeeeb('0x21')]+a22_0xeeeb('0x52')+this[a22_0xeeeb('0x47')][a22_0xeeeb('0x4a')]);if(this['currentFile']>=this[a22_0xeeeb('0x47')][a22_0xeeeb('0x4a')]){this['finishProcess']();return;}const _0x22869d=String(this[a22_0xeeeb('0x47')][this['currentFile']][a22_0xeeeb('0x53')]);const _0x509fd0=this[a22_0xeeeb('0x47')][this[a22_0xeeeb('0x21')]][a22_0xeeeb('0x54')];let _0x3cc94e=_0x22869d[a22_0xeeeb('0x55')](_0x22869d[a22_0xeeeb('0x56')]('/')+0x1);const _0x563f68=_0x3cc94e['split']('.')[a22_0xeeeb('0x57')](0x0,-0x1)[a22_0xeeeb('0x58')]('.');let _0x1aae95=this[a22_0xeeeb('0x2b')]+_0x22869d;const _0x373707=_0x1aae95[a22_0xeeeb('0x59')]('.')[a22_0xeeeb('0x57')](0x0,-0x1)[a22_0xeeeb('0x58')]('.');if(_0x509fd0=='youtube_single'){_0x3cc94e=_0x3cc94e+a22_0xeeeb('0x5a');}else if(_0x509fd0==a22_0xeeeb('0x5b')){_0x3cc94e=_0x563f68+'.mp4';_0x1aae95=_0x373707+a22_0xeeeb('0x5a');}console['log'](a22_0xeeeb('0x5c'));console[a22_0xeeeb('0x38')](_0x22869d);console['log'](_0x509fd0);console[a22_0xeeeb('0x38')](_0x3cc94e);console[a22_0xeeeb('0x38')](_0x1aae95);console[a22_0xeeeb('0x38')](_0x563f68);console[a22_0xeeeb('0x38')](_0x373707);console[a22_0xeeeb('0x38')]('**********+');if(fsExtra['existsSync'](this[a22_0xeeeb('0x1a')]+_0x3cc94e)){this[a22_0xeeeb('0x5d')](this[a22_0xeeeb('0x1a')]+_0x3cc94e)[a22_0xeeeb('0x5')](function(_0x3df7e7){if(_0x3df7e7){this[a22_0xeeeb('0x21')]++;}else{this[a22_0xeeeb('0x22')]=!![];}this[a22_0xeeeb('0x51')]();}[a22_0xeeeb('0x33')](this));}else if(fsExtra['existsSync'](this[a22_0xeeeb('0x1c')]+_0x3cc94e)){this['checkVideo'](this[a22_0xeeeb('0x1c')]+_0x3cc94e)[a22_0xeeeb('0x5')](function(_0x1f8598){if(_0x1f8598){fsExtra['copySync'](this[a22_0xeeeb('0x1c')]+_0x3cc94e,this['tempFolder']+_0x3cc94e);this[a22_0xeeeb('0x21')]++;}else{this['playlistChanged']=!![];}this['download']();}[a22_0xeeeb('0x33')](this));}else{console['log'](a22_0xeeeb('0x5e')+_0x1aae95);this[a22_0xeeeb('0x22')]=!![];if(_0x509fd0=='youtube_single'){this[a22_0xeeeb('0x5f')](_0x22869d);}else{this[a22_0xeeeb('0x60')](_0x1aae95,_0x3cc94e,_0x509fd0);}}}[a22_0xeeeb('0x5d')](_0x1c6f34){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x61')+_0x1c6f34);const _0x74fc77=yield mediainfo(_0x1c6f34)[a22_0xeeeb('0x62')](_0x5e1a95=>{console[a22_0xeeeb('0x38')](_0x5e1a95);fsExtra[a22_0xeeeb('0x4e')](_0x1c6f34);return![];});const _0x18ead4=_0x74fc77[a22_0xeeeb('0x63')][a22_0xeeeb('0x64')][a22_0xeeeb('0x4a')]>0x1&&_0x74fc77[a22_0xeeeb('0x63')][a22_0xeeeb('0x64')][0x1][a22_0xeeeb('0x65')]==a22_0xeeeb('0x66');if(!_0x18ead4){fsExtra[a22_0xeeeb('0x4e')](_0x1c6f34);}console[a22_0xeeeb('0x38')](a22_0xeeeb('0x67')+_0x18ead4);return _0x18ead4;});}[a22_0xeeeb('0x60')](_0x4e56c0,_0x5b9c37,_0x13ec0f){const _0x4d4575=new Downloader();console['log'](_0x4e56c0);console[a22_0xeeeb('0x38')](_0x5b9c37);console[a22_0xeeeb('0x38')](_0x13ec0f);const _0x371e6=_0x4d4575['download'](_0x4e56c0,this[a22_0xeeeb('0x1a')]+_0x5b9c37);urlExists(_0x4e56c0,function(_0x1eabd0,_0xbe0c3b){if(_0xbe0c3b){if(this['failDownloadFiles'][a22_0xeeeb('0x68')](this['currentFile'])){const _0x579318=this[a22_0xeeeb('0x69')][a22_0xeeeb('0x6a')](this[a22_0xeeeb('0x21')]);if(_0x579318>-0x1){this[a22_0xeeeb('0x69')][a22_0xeeeb('0x6b')](_0x579318,0x1);}}console[a22_0xeeeb('0x38')](a22_0xeeeb('0x6c')+_0x4e56c0);_0x371e6[a22_0xeeeb('0x6d')]();}else{if(!this[a22_0xeeeb('0x69')][a22_0xeeeb('0x68')](this[a22_0xeeeb('0x21')])){this[a22_0xeeeb('0x69')][a22_0xeeeb('0x48')](this[a22_0xeeeb('0x21')]);}console['log']('Error:\x20'+_0x4e56c0);this[a22_0xeeeb('0x21')]++;this[a22_0xeeeb('0x51')]();}}['bind'](this));_0x371e6['on'](a22_0xeeeb('0x6d'),function(_0x371e6){console['log'](a22_0xeeeb('0x6e')+_0x4e56c0);});_0x371e6['on'](a22_0xeeeb('0x50'),function(_0x371e6){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x6f'));this[a22_0xeeeb('0x51')]();}['bind'](this));_0x371e6['on'](a22_0xeeeb('0x70'),function(_0x371e6){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x70'));console[a22_0xeeeb('0x38')]('Downloaded:\x20'+_0x5b9c37);console[a22_0xeeeb('0x38')](a22_0xeeeb('0x71')+_0x13ec0f);this[a22_0xeeeb('0x5d')](this[a22_0xeeeb('0x1a')]+_0x5b9c37)['then'](function(_0x5988c2){if(_0x5988c2){this['currentFile']++;}this[a22_0xeeeb('0x51')]();}[a22_0xeeeb('0x33')](this));}[a22_0xeeeb('0x33')](this));_0x371e6['on']('stopped',function(_0x371e6){console['log'](a22_0xeeeb('0x72'));});_0x371e6['on'](a22_0xeeeb('0x73'),function(_0x371e6){console[a22_0xeeeb('0x38')]('destroyed');});_0x371e6['on'](a22_0xeeeb('0x74'),function(_0x371e6){console[a22_0xeeeb('0x38')]('retry');});}['downloadHTTPFile'](_0x3aa2d8,_0x220449,_0x5570aa,_0x2f4d24){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x75'));console[a22_0xeeeb('0x38')](_0x3aa2d8);const _0x45fe5b=!![];let _0x5499fb=0x0;const _0x4f0d7f='';console[a22_0xeeeb('0x38')](a22_0xeeeb('0x76')+_0x3aa2d8+'\x20to\x20'+_0x220449);if(_0x5499fb){if(_0x5499fb>0x5){_0x2f4d24('Max\x20redirects\x20reached',_0x3aa2d8,_0x5570aa,null);return;}}else{_0x5499fb=0x0;}const _0xd588df=this['tempFolder']+_0x220449;let _0x1b0ccd;if(_0x2f4d24===undefined){console[a22_0xeeeb('0x38')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x3aa2d8+a22_0xeeeb('0x77')+_0xd588df);_0x2f4d24=function(_0x297b6f,_0x3db51e){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x78'),_0x297b6f,_0x3db51e);};}http[a22_0xeeeb('0x79')][a22_0xeeeb('0x7a')]=0x64;const _0x443b40={'host':url['parse'](_0x3aa2d8)[a22_0xeeeb('0x7b')],'port':0x50,'path':url['parse'](_0x3aa2d8)['pathname'],'agent':![]};const _0x2ffdc4=http['get'](_0x443b40,function(_0x4932ff){let _0x3769ff=0x0;let _0x16669b=0x0;function _0x8fcddc(){if(_0x3769ff===undefined){console[a22_0xeeeb('0x38')](_0x220449+a22_0xeeeb('0x7c')+_0x16669b+'/'+'?');}const _0x58c36a=_0x16669b/_0x3769ff*0x64;console[a22_0xeeeb('0x38')](_0x220449+a22_0xeeeb('0x7d')+_0x58c36a+'%\x09'+_0x16669b+'/'+_0x3769ff);}console[a22_0xeeeb('0x38')](_0x220449+'\x20'+_0x4932ff[a22_0xeeeb('0x7e')]);switch(_0x4932ff[a22_0xeeeb('0x7e')]){case 0xc8:_0x3769ff=_0x4932ff['headers'][a22_0xeeeb('0x7f')]||_0x4f0d7f;fs[a22_0xeeeb('0x80')](_0xd588df,function(_0x4156df,_0x24b94a){if(!_0x4156df){console[a22_0xeeeb('0x38')]('Have\x20already\x20downloaded\x20'+_0xd588df);if(_0x24b94a['size']==_0x3769ff){console[a22_0xeeeb('0x38')]('And\x20the\x20file\x20size\x20matches\x20('+_0x3769ff+')');console['log'](a22_0xeeeb('0x81'));}else{console['log'](a22_0xeeeb('0x82')+_0x24b94a['size']+')\x20vs\x20New('+_0x3769ff+')');}}_0x1b0ccd=fs['createWriteStream'](_0xd588df);_0x4932ff['pipe'](_0x1b0ccd);_0x4932ff['on'](a22_0xeeeb('0x83'),function(_0x46bd04){_0x16669b+=_0x46bd04[a22_0xeeeb('0x4a')];_0x8fcddc();});_0x2ffdc4['on'](a22_0xeeeb('0x50'),function(_0x4156df){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x84'));console[a22_0xeeeb('0x38')](_0x4156df);});_0x1b0ccd['on'](a22_0xeeeb('0x85'),function(){console[a22_0xeeeb('0x38')]('Downloaded\x20'+_0x3aa2d8+a22_0xeeeb('0x77')+_0x220449);_0x2f4d24(null,_0x220449,_0x5570aa,_0x220449);}[a22_0xeeeb('0x33')](this));});break;case 0x12e:const _0x44e34a=_0x4932ff[a22_0xeeeb('0x86')][a22_0xeeeb('0x87')];console['log'](a22_0xeeeb('0x88')+_0x3aa2d8+a22_0xeeeb('0x77')+_0x44e34a);if(_0x5499fb<0x5){this[a22_0xeeeb('0x75')](_0x44e34a,_0x220449,_0x2f4d24,_0x5499fb++);}else{console['error'](a22_0xeeeb('0x89')+_0x3aa2d8+'.');_0x2f4d24('302',null,null,null);}return;case 0x194:console[a22_0xeeeb('0x38')]('File\x20Not\x20Found\x20'+_0x3aa2d8);default:console[a22_0xeeeb('0x38')](a22_0xeeeb('0x8a')+_0x3aa2d8+a22_0xeeeb('0x8b')+_0x4932ff[a22_0xeeeb('0x7e')]);_0x2ffdc4[a22_0xeeeb('0x8c')]();_0x2f4d24(_0x4932ff['statusCode'],null,null,null);return;}})['on'](a22_0xeeeb('0x50'),function(_0x308b40){console['log']('Error\x20Downloading:\x20'+_0x3aa2d8+'\x20'+_0x308b40[a22_0xeeeb('0x8d')]);_0x2f4d24(_0x308b40,null,null,null);});}[a22_0xeeeb('0x8e')](_0x2ebfc3,_0x3ec1a2,_0x53e078,_0x2eb5b4){console[a22_0xeeeb('0x38')]('downloadHTTPFileCallback');console[a22_0xeeeb('0x38')](_0x2ebfc3);console['log'](_0x3ec1a2);console['log'](_0x53e078);console[a22_0xeeeb('0x38')](_0x2eb5b4);if(_0x53e078=='image'){const _0xcf005f=this[a22_0xeeeb('0x47')][this[a22_0xeeeb('0x21')]][a22_0xeeeb('0x8f')]!=null?this[a22_0xeeeb('0x47')][this['currentFile']]['duration']:0x1e;this['createImageVideo'](_0x2eb5b4,_0xcf005f);}else if(_0x53e078=='video'){if(_0x2ebfc3==null&&_0x3ec1a2!=''){this['currentFile']++;}this[a22_0xeeeb('0x51')]();}console['log'](this[a22_0xeeeb('0x21')]);}[a22_0xeeeb('0x90')](_0x1ff2aa,_0x51e522,_0xd36f5d){progress(request(_0x1ff2aa),{})['on']('progress',function(_0x4a8d8a){console[a22_0xeeeb('0x38')](_0x4a8d8a);})['on'](a22_0xeeeb('0x50'),function(_0x4fd43d){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x91'));this[a22_0xeeeb('0x51')]();})['on'](a22_0xeeeb('0x70'),function(){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x92')+_0x51e522);console['log']('mediaType:\x20'+_0xd36f5d);if(_0xd36f5d==a22_0xeeeb('0x5b')){const _0x37e9f8=this['downloadFiles'][this[a22_0xeeeb('0x21')]][a22_0xeeeb('0x8f')]!=null?this[a22_0xeeeb('0x47')][this['currentFile']][a22_0xeeeb('0x8f')]:0x1e;this[a22_0xeeeb('0x93')](_0x51e522,_0x37e9f8);}else if(_0xd36f5d==a22_0xeeeb('0x94')){this[a22_0xeeeb('0x21')]++;this['download']();}}[a22_0xeeeb('0x33')](this))['pipe'](fs['createWriteStream'](this[a22_0xeeeb('0x1a')]+_0x51e522));}[a22_0xeeeb('0x93')](_0x5bf4dc,_0x51f3a8=0x1e){const _0x3a96a8=this[a22_0xeeeb('0x1a')]+_0x5bf4dc;console[a22_0xeeeb('0x38')](_0x3a96a8);console['log'](_0x5bf4dc);const _0x25d83c=_0x5bf4dc[a22_0xeeeb('0x59')]('.')[a22_0xeeeb('0x57')](0x0,-0x1)['join']('.');const _0x43526f=a22_0xeeeb('0x95');const _0x2ce242=['-y','-r',a22_0xeeeb('0x96'),a22_0xeeeb('0x97'),'1',a22_0xeeeb('0x98'),'glob','-i',_0x3a96a8,'-t',String(_0x51f3a8),a22_0xeeeb('0x99'),a22_0xeeeb('0x9a'),a22_0xeeeb('0x9b'),a22_0xeeeb('0x9c'),'-r','25',a22_0xeeeb('0x9d'),'scale=1920:1080',this[a22_0xeeeb('0x1a')]+_0x25d83c+a22_0xeeeb('0x5a')];const _0x4ba358=spawn(_0x43526f,_0x2ce242);_0x4ba358[a22_0xeeeb('0x9e')]['on'](a22_0xeeeb('0x83'),function(_0x5dcf14){console[a22_0xeeeb('0x38')](a22_0xeeeb('0x9f')+_0x3a96a8);});_0x4ba358[a22_0xeeeb('0xa0')]['on'](a22_0xeeeb('0x83'),function(_0x2d5fd1){console['log'](a22_0xeeeb('0xa1')+_0x2d5fd1);}['bind'](this));_0x4ba358['on']('close',function(){console[a22_0xeeeb('0x38')](a22_0xeeeb('0xa2'));this[a22_0xeeeb('0x21')]++;this['download']();}['bind'](this));}[a22_0xeeeb('0x5f')](_0x232ba5){const _0x489089=this['tempFolder']+'/'+_0x232ba5+a22_0xeeeb('0x5a');const _0x5c05dd=youtubedl('http://www.youtube.com/watch?v='+_0x232ba5,[a22_0xeeeb('0xa3')],{'cwd':__dirname});_0x5c05dd['on']('info',function(_0x4c9d6f){console[a22_0xeeeb('0x38')](a22_0xeeeb('0xa4'));console[a22_0xeeeb('0x38')](a22_0xeeeb('0xa5')+_0x4c9d6f[a22_0xeeeb('0xa6')]);console[a22_0xeeeb('0x38')](a22_0xeeeb('0xa7')+_0x4c9d6f[a22_0xeeeb('0xa8')]);});_0x5c05dd['on'](a22_0xeeeb('0xa9'),function complete(_0x593c35){'use strict';console[a22_0xeeeb('0x38')](a22_0xeeeb('0xa5')+_0x593c35[a22_0xeeeb('0xa6')]+'\x20already\x20downloaded.');});_0x5c05dd['on']('end',function(){console[a22_0xeeeb('0x38')](a22_0xeeeb('0xaa'));this[a22_0xeeeb('0x5d')](_0x489089)[a22_0xeeeb('0x5')](function(_0x32f78a){if(_0x32f78a){this[a22_0xeeeb('0x21')]++;}this[a22_0xeeeb('0x51')]();}[a22_0xeeeb('0x33')](this));}[a22_0xeeeb('0x33')](this));_0x5c05dd[a22_0xeeeb('0xab')](fs[a22_0xeeeb('0xac')](_0x489089));}[a22_0xeeeb('0xad')](){console[a22_0xeeeb('0x38')](a22_0xeeeb('0xae'));if(this['playlistChanged']){if(this[a22_0xeeeb('0x69')][a22_0xeeeb('0x4a')]==0x0){fs[a22_0xeeeb('0x3b')](this['playListFile'],JSON[a22_0xeeeb('0x36')](this['newPlayList']));let _0x24e976=a22_0xeeeb('0xaf')+'\x0d\x0a'+a22_0xeeeb('0xb0')+'\x0d\x0a';for(const _0xf1ed3e in this['downloadFiles']){const _0x2c2b9b=this[a22_0xeeeb('0x47')][_0xf1ed3e][a22_0xeeeb('0x53')];const _0x50ea77=this[a22_0xeeeb('0x47')][_0xf1ed3e][a22_0xeeeb('0x54')];const _0x2f0f05=_0x2c2b9b[a22_0xeeeb('0x55')](_0x2c2b9b['lastIndexOf']('/')+0x1);let _0x313bbe=_0x2f0f05[a22_0xeeeb('0x59')]('.')[a22_0xeeeb('0x57')](0x0,-0x1)[a22_0xeeeb('0x58')]('.');if(_0x50ea77=='youtube_single'){_0x313bbe=_0x2c2b9b;}_0x24e976+=a22_0xeeeb('0xb1')+_0x313bbe+'.mp4'+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0xeeeb('0x1c')]);fsExtra[a22_0xeeeb('0xb2')](this[a22_0xeeeb('0x1a')],this[a22_0xeeeb('0x1c')]);fsExtra[a22_0xeeeb('0x3b')](this['m3uFile'],_0x24e976);fsExtra[a22_0xeeeb('0x46')](this[a22_0xeeeb('0x1a')]);console[a22_0xeeeb('0x38')](a22_0xeeeb('0xb3'));const _0x41f9a2=spawn(a22_0xeeeb('0xb4'),['-r',a22_0xeeeb('0xb5')]);}else{console[a22_0xeeeb('0x38')](a22_0xeeeb('0xb6'));this[a22_0xeeeb('0x21')]=0x0;setTimeout(function(){this[a22_0xeeeb('0x51')]();}['bind'](this),0x1388);}}else{console[a22_0xeeeb('0x38')](a22_0xeeeb('0xb7'));}}}exports[a22_0xeeeb('0xb8')]=SyncPlaylistsService;