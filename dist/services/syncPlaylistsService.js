var a26_0xe432=['complete','finished\x20youtube\x20downloading!','Finishing','this.playListFile:\x20','#EXTCPlayListM3U::M3U','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','emptyDirSync:\x20','reboot','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Player.Open','Playlist.Opened','kodiCommandClient','Rebooting','header_active','setRss','enableClock','turnOffTV','CECStandby()','CECActivateSource()','xmlContent:\x20','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','set','feed','Builder','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','2.0','kodiUser','jsonrpcClient\x20data','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','http','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','package.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://localhost','lulo','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','PlayerService','readFileSync','context','parse','playerId','config','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','kodiPassword','registerClient','loadMediaList','updateSettings','getStatus','bind','checkDependencies','playlist','getItems','stringify','deviceUuid','networkInterfaces','version','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','log','writeFileSync','player','label','reportStatus','catch','reportStatus\x20playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','toString','\x20of\x20','finishProcess','path','media_type','substring','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','Downloading:\x20','downloader','videoFile:\x20','media','track','@type','mediainfo\x20check:','includes','indexOf','downloading:\x20','start','Error:\x20','error','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','progress','Error\x20downloading\x20file','-loop','-pattern_type','libx264','-vf','stdout','data','stderr:\x20','close','finished\x20mp4\x20convert','youtubeURL:\x20','--format=18','--no-check-certificate','info','filename:\x20','_filename','size:\x20','size'];(function(_0x29e69b,_0x4844e3){var _0x34ff37=function(_0x91a59b){while(--_0x91a59b){_0x29e69b['push'](_0x29e69b['shift']());}};_0x34ff37(++_0x4844e3);}(a26_0xe432,0x1f0));var a26_0x42f3=function(_0x4e5320,_0x1eb832){_0x4e5320=_0x4e5320-0x0;var _0x524230=a26_0xe432[_0x4e5320];return _0x524230;};'use strict';var __awaiter=this&&this[a26_0x42f3('0x0')]||function(_0x48dd6b,_0x483058,_0x2d1878,_0x3eb142){function _0x450cf7(_0x25994b){return _0x25994b instanceof _0x2d1878?_0x25994b:new _0x2d1878(function(_0x413799){_0x413799(_0x25994b);});}return new(_0x2d1878||(_0x2d1878=Promise))(function(_0x15e3fc,_0x51281b){function _0x568e0c(_0x5743d8){try{_0x582f36(_0x3eb142[a26_0x42f3('0x1')](_0x5743d8));}catch(_0x4a0168){_0x51281b(_0x4a0168);}}function _0x1fa7a1(_0x517c2c){try{_0x582f36(_0x3eb142[a26_0x42f3('0x2')](_0x517c2c));}catch(_0x458101){_0x51281b(_0x458101);}}function _0x582f36(_0x92bc66){_0x92bc66['done']?_0x15e3fc(_0x92bc66[a26_0x42f3('0x3')]):_0x450cf7(_0x92bc66['value'])[a26_0x42f3('0x4')](_0x568e0c,_0x1fa7a1);}_0x582f36((_0x3eb142=_0x3eb142[a26_0x42f3('0x5')](_0x48dd6b,_0x483058||[]))[a26_0x42f3('0x1')]());});};Object[a26_0x42f3('0x6')](exports,a26_0x42f3('0x7'),{'value':!![]});const HttpClientService_1=require(a26_0x42f3('0x8'));const playerService_1=require(a26_0x42f3('0x9'));const mediainfo=require(a26_0x42f3('0xa'));const fs=require('fs');const url=require('url');const http=require(a26_0x42f3('0xb'));const fsExtra=require('fs-extra');const request=require(a26_0x42f3('0xc'));const progress=require(a26_0x42f3('0xd'));const spawn=require(a26_0x42f3('0xe'))[a26_0x42f3('0xf')];const exec=require(a26_0x42f3('0xe'))['exec'];const isImage=require(a26_0x42f3('0x10'));const format=require(a26_0x42f3('0x11'));const os=require('os');const youtubedl=require(a26_0x42f3('0x12'));const uuidv4=require(a26_0x42f3('0x13'));const configFile='config.json';const contextFile=a26_0x42f3('0x14');const urlExists=require(a26_0x42f3('0x15'));const kodi_rpc=require(a26_0x42f3('0x16'));const Downloader=require(a26_0x42f3('0x17'));class SyncPlaylistsService{constructor(){this[a26_0x42f3('0x18')]=a26_0x42f3('0x19');this[a26_0x42f3('0x1a')]=this[a26_0x42f3('0x18')]+a26_0x42f3('0x1b');this[a26_0x42f3('0x1c')]=this[a26_0x42f3('0x18')]+a26_0x42f3('0x1d');this[a26_0x42f3('0x1e')]=this[a26_0x42f3('0x18')]+a26_0x42f3('0x1f');this[a26_0x42f3('0x20')]=this['filesFolder']+a26_0x42f3('0x21');this[a26_0x42f3('0x22')]=0x0;this[a26_0x42f3('0x23')]=![];this[a26_0x42f3('0x24')]=[];this[a26_0x42f3('0x25')]=[];this[a26_0x42f3('0x26')]={};this[a26_0x42f3('0x27')]=a26_0x42f3('0x28');this['kodiUser']=a26_0x42f3('0x29');this['kodiPassword']=a26_0x42f3('0x2a');this[a26_0x42f3('0x2b')]=![];this[a26_0x42f3('0x2c')]=new HttpClientService_1[(a26_0x42f3('0x2d'))]();this[a26_0x42f3('0x2e')]=new playerService_1[(a26_0x42f3('0x2f'))]();}['init'](){this['config']=JSON['parse'](fs[a26_0x42f3('0x30')](configFile));this[a26_0x42f3('0x31')]=JSON[a26_0x42f3('0x32')](fs[a26_0x42f3('0x30')](contextFile));this[a26_0x42f3('0x33')]=this[a26_0x42f3('0x34')][a26_0x42f3('0x33')];this[a26_0x42f3('0x35')]=process[a26_0x42f3('0x36')][a26_0x42f3('0x37')]+a26_0x42f3('0x38');this[a26_0x42f3('0x39')]=this['baseURL']+a26_0x42f3('0x3a');this[a26_0x42f3('0x3b')]=this['baseURL']+a26_0x42f3('0x3c');this[a26_0x42f3('0x3d')]=new kodi_rpc({'url':this[a26_0x42f3('0x27')],'user':this['kodiUser'],'password':this[a26_0x42f3('0x3e')]});this['checkDependencies']();this[a26_0x42f3('0x3f')]();this['checkFolders']();this[a26_0x42f3('0x40')]();this[a26_0x42f3('0x41')]();setInterval(function(){this[a26_0x42f3('0x42')]();}[a26_0x42f3('0x43')](this),0x2710);setInterval(function(){this[a26_0x42f3('0x3f')]();}[a26_0x42f3('0x43')](this),0x493e0);}[a26_0x42f3('0x44')](){}['registerClient'](){this[a26_0x42f3('0x3d')][a26_0x42f3('0x45')][a26_0x42f3('0x46')](0x1)[a26_0x42f3('0x4')](function(_0x3c1ec1){const _0x4e40a=JSON[a26_0x42f3('0x47')](_0x3c1ec1);const _0x2e3c7d={'player_id':this[a26_0x42f3('0x33')],'device_uuid':this[a26_0x42f3('0x34')][a26_0x42f3('0x48')],'network_info':JSON[a26_0x42f3('0x47')](os[a26_0x42f3('0x49')]()),'firmware_info':JSON[a26_0x42f3('0x47')](this[a26_0x42f3('0x31')][a26_0x42f3('0x4a')]),'playlist':_0x4e40a,'playing_item':'','status':0x0};this[a26_0x42f3('0x2c')][a26_0x42f3('0x4b')](a26_0x42f3('0x4c'),_0x2e3c7d,![])['then'](function(_0x425dea){console['log'](a26_0x42f3('0x4d')+Date());})['catch'](function(_0x323701){});console[a26_0x42f3('0x4e')](_0x2e3c7d);}['bind'](this));const _0x29e678=this[a26_0x42f3('0x34')]['deviceUuid'];if(!_0x29e678||_0x29e678==''){this[a26_0x42f3('0x34')][a26_0x42f3('0x48')]=uuidv4();this[a26_0x42f3('0x34')]={'deviceUuid':this[a26_0x42f3('0x34')][a26_0x42f3('0x48')],'playerId':this[a26_0x42f3('0x34')][a26_0x42f3('0x33')]};fs[a26_0x42f3('0x4f')](configFile,JSON['stringify'](this[a26_0x42f3('0x34')]));}}[a26_0x42f3('0x42')](){console[a26_0x42f3('0x4e')](a26_0x42f3('0x42'));this[a26_0x42f3('0x3d')][a26_0x42f3('0x50')]['getCurrentlyPlayingVideo']()['then'](function(_0x4d320b){const _0x25a06e=_0x4d320b['item'][a26_0x42f3('0x51')];this[a26_0x42f3('0x52')](_0x25a06e);}['bind'](this))[a26_0x42f3('0x53')](function(_0x23a337){console['log'](_0x23a337);this['reportStatus'](JSON[a26_0x42f3('0x47')](_0x23a337));}[a26_0x42f3('0x43')](this));}[a26_0x42f3('0x52')](_0xa1dc53){console['log'](a26_0x42f3('0x54')+_0xa1dc53);const _0x1c344d={'player_id':this['playerId'],'device_uuid':this[a26_0x42f3('0x34')][a26_0x42f3('0x48')],'status':_0xa1dc53!=''&&_0xa1dc53!=null?0x1:0x0,'playing_item':_0xa1dc53};this[a26_0x42f3('0x2c')]['post'](a26_0x42f3('0x55'),_0x1c344d,![])['then'](function(_0x2ef19d){console[a26_0x42f3('0x4e')](a26_0x42f3('0x56'));})['catch'](function(_0x511339){});}['checkFolders'](){fsExtra['ensureDir'](this[a26_0x42f3('0x18')],_0x220959=>{});fsExtra[a26_0x42f3('0x57')](this[a26_0x42f3('0x1a')],_0x35e507=>{});fsExtra[a26_0x42f3('0x57')](this['filesFolder'],_0x4ff03f=>{});}[a26_0x42f3('0x40')](){const _0x44c8be=format(this[a26_0x42f3('0x39')],this[a26_0x42f3('0x33')]);console[a26_0x42f3('0x4e')](_0x44c8be);request({'url':_0x44c8be,'json':!![]},function(_0xbb043a,_0x3a8e86,_0x2a288e){console[a26_0x42f3('0x4e')]('loadMediaList:\x20');this[a26_0x42f3('0x26')]=_0x2a288e;this[a26_0x42f3('0x23')]=this[a26_0x42f3('0x58')]();fsExtra[a26_0x42f3('0x59')](this[a26_0x42f3('0x1a')]);this[a26_0x42f3('0x24')]=[];this[a26_0x42f3('0x25')]=[];this[a26_0x42f3('0x22')]=0x0;for(const _0x4c77fb in _0x2a288e){this[a26_0x42f3('0x24')][a26_0x42f3('0x5a')](_0x2a288e[_0x4c77fb]);}console[a26_0x42f3('0x4e')](a26_0x42f3('0x5b')+this['downloadFiles']['length']);if(this[a26_0x42f3('0x24')][a26_0x42f3('0x5c')]>0x0){this[a26_0x42f3('0x5d')]();}}['bind'](this));}[a26_0x42f3('0x5e')](){this[a26_0x42f3('0x2b')]=!![];if(fsExtra[a26_0x42f3('0x5f')](this['tempFolder'])){fsExtra['emptyDirSync'](this[a26_0x42f3('0x1a')]);}if(fsExtra[a26_0x42f3('0x5f')](this[a26_0x42f3('0x1c')])){fsExtra[a26_0x42f3('0x59')](this['filesFolder']);}if(!fsExtra[a26_0x42f3('0x5f')](this[a26_0x42f3('0x1e')])){fsExtra['removeSync'](this['playListFile']);}if(!fsExtra[a26_0x42f3('0x5f')](this[a26_0x42f3('0x20')])){fsExtra[a26_0x42f3('0x60')](this[a26_0x42f3('0x20')]);}this[a26_0x42f3('0x40')]();}[a26_0x42f3('0x58')](){const _0x481681=JSON['stringify'](this[a26_0x42f3('0x26')]);try{if(!fsExtra['existsSync'](this['playListFile'])){return!![];}else{const _0x5630d8=fsExtra[a26_0x42f3('0x30')](this[a26_0x42f3('0x1e')])[a26_0x42f3('0x61')]();if(_0x5630d8!=_0x481681){return!![];}}}catch(_0x3b318f){console[a26_0x42f3('0x4e')](_0x3b318f);}return![];}[a26_0x42f3('0x5d')](){console[a26_0x42f3('0x4e')]('this.currentFile:\x20'+this[a26_0x42f3('0x22')]+a26_0x42f3('0x62')+this[a26_0x42f3('0x24')][a26_0x42f3('0x5c')]);if(this[a26_0x42f3('0x22')]>=this[a26_0x42f3('0x24')][a26_0x42f3('0x5c')]){this[a26_0x42f3('0x63')]();return;}const _0x307103=String(this[a26_0x42f3('0x24')][this['currentFile']][a26_0x42f3('0x64')]);const _0x5b69db=this['downloadFiles'][this[a26_0x42f3('0x22')]][a26_0x42f3('0x65')];let _0x57ff80=_0x307103[a26_0x42f3('0x66')](_0x307103['lastIndexOf']('/')+0x1);const _0x3d3f22=_0x57ff80[a26_0x42f3('0x67')]('.')[a26_0x42f3('0x68')](0x0,-0x1)['join']('.');let _0x44a343=this[a26_0x42f3('0x35')]+_0x307103;const _0x1919b5=_0x44a343[a26_0x42f3('0x67')]('.')[a26_0x42f3('0x68')](0x0,-0x1)[a26_0x42f3('0x69')]('.');if(_0x5b69db==a26_0x42f3('0x6a')){_0x57ff80=_0x57ff80+a26_0x42f3('0x6b');}else if(_0x5b69db==a26_0x42f3('0x6c')){_0x57ff80=_0x3d3f22+a26_0x42f3('0x6b');_0x44a343=_0x1919b5+'.mp4';}console[a26_0x42f3('0x4e')](a26_0x42f3('0x6d'));console['log'](_0x307103);console['log'](_0x5b69db);console['log'](_0x57ff80);console[a26_0x42f3('0x4e')](_0x44a343);console[a26_0x42f3('0x4e')](_0x3d3f22);console[a26_0x42f3('0x4e')](_0x1919b5);console[a26_0x42f3('0x4e')](a26_0x42f3('0x6d'));if(fsExtra['existsSync'](this['tempFolder']+_0x57ff80)){this[a26_0x42f3('0x6e')](this[a26_0x42f3('0x1a')]+_0x57ff80)[a26_0x42f3('0x4')](function(_0x1123c0){if(_0x1123c0){this[a26_0x42f3('0x22')]++;}else{this[a26_0x42f3('0x23')]=!![];}this[a26_0x42f3('0x5d')]();}[a26_0x42f3('0x43')](this));}else if(fsExtra[a26_0x42f3('0x5f')](this[a26_0x42f3('0x1c')]+_0x57ff80)){this[a26_0x42f3('0x6e')](this['filesFolder']+_0x57ff80)[a26_0x42f3('0x4')](function(_0x1f01e3){if(_0x1f01e3){fsExtra['copySync'](this['filesFolder']+_0x57ff80,this[a26_0x42f3('0x1a')]+_0x57ff80);this[a26_0x42f3('0x22')]++;}else{this[a26_0x42f3('0x23')]=!![];}this['download']();}[a26_0x42f3('0x43')](this));}else{console[a26_0x42f3('0x4e')](a26_0x42f3('0x6f')+_0x44a343);this['playlistChanged']=!![];if(_0x5b69db==a26_0x42f3('0x6a')){this['downloadYouTube'](_0x307103);}else{this[a26_0x42f3('0x70')](_0x44a343,_0x57ff80,_0x5b69db);}}}[a26_0x42f3('0x6e')](_0x5f1e22){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a26_0x42f3('0x71')+_0x5f1e22);const _0x579a44=yield mediainfo(_0x5f1e22)[a26_0x42f3('0x53')](_0x3edf3d=>{console['log'](_0x3edf3d);fsExtra[a26_0x42f3('0x60')](_0x5f1e22);return![];});const _0x5cb9d0=_0x579a44[a26_0x42f3('0x72')][a26_0x42f3('0x73')][a26_0x42f3('0x5c')]>0x1&&_0x579a44[a26_0x42f3('0x72')][a26_0x42f3('0x73')][0x1][a26_0x42f3('0x74')]=='Video';if(!_0x5cb9d0){fsExtra[a26_0x42f3('0x60')](_0x5f1e22);}console['log'](a26_0x42f3('0x75')+_0x5cb9d0);return _0x5cb9d0;});}[a26_0x42f3('0x70')](_0x1cfc58,_0x566ca0,_0x3f5ce3){const _0xbe14c3=new Downloader();console[a26_0x42f3('0x4e')](_0x1cfc58);console[a26_0x42f3('0x4e')](_0x566ca0);console[a26_0x42f3('0x4e')](_0x3f5ce3);const _0x82cea5=_0xbe14c3['download'](_0x1cfc58,this[a26_0x42f3('0x1a')]+_0x566ca0);urlExists(_0x1cfc58,function(_0x2a6d68,_0x554d12){if(_0x554d12){if(this[a26_0x42f3('0x25')][a26_0x42f3('0x76')](this['currentFile'])){const _0x2272cb=this[a26_0x42f3('0x25')][a26_0x42f3('0x77')](this[a26_0x42f3('0x22')]);if(_0x2272cb>-0x1){this[a26_0x42f3('0x25')]['splice'](_0x2272cb,0x1);}}console[a26_0x42f3('0x4e')](a26_0x42f3('0x78')+_0x1cfc58);_0x82cea5[a26_0x42f3('0x79')]();}else{if(!this[a26_0x42f3('0x25')]['includes'](this[a26_0x42f3('0x22')])){this['failDownloadFiles'][a26_0x42f3('0x5a')](this[a26_0x42f3('0x22')]);}console[a26_0x42f3('0x4e')](a26_0x42f3('0x7a')+_0x1cfc58);this['currentFile']++;this[a26_0x42f3('0x5d')]();}}[a26_0x42f3('0x43')](this));_0x82cea5['on'](a26_0x42f3('0x79'),function(_0x82cea5){console[a26_0x42f3('0x4e')]('start:\x20'+_0x1cfc58);});_0x82cea5['on'](a26_0x42f3('0x7b'),function(_0x82cea5){console['log']('error:\x20');this[a26_0x42f3('0x5d')]();}[a26_0x42f3('0x43')](this));_0x82cea5['on'](a26_0x42f3('0x7c'),function(_0x82cea5){console[a26_0x42f3('0x4e')](a26_0x42f3('0x7c'));console[a26_0x42f3('0x4e')](a26_0x42f3('0x7d')+_0x566ca0);console[a26_0x42f3('0x4e')](a26_0x42f3('0x7e')+_0x3f5ce3);this[a26_0x42f3('0x6e')](this['tempFolder']+_0x566ca0)[a26_0x42f3('0x4')](function(_0x4464a5){if(_0x4464a5){this[a26_0x42f3('0x22')]++;}this['download']();}['bind'](this));}[a26_0x42f3('0x43')](this));_0x82cea5['on'](a26_0x42f3('0x7f'),function(_0x82cea5){console[a26_0x42f3('0x4e')]('stopped');});_0x82cea5['on']('destroyed',function(_0x82cea5){console['log'](a26_0x42f3('0x80'));});_0x82cea5['on'](a26_0x42f3('0x81'),function(_0x82cea5){console[a26_0x42f3('0x4e')]('retry');});}[a26_0x42f3('0x82')](_0x385153,_0x59dd04,_0x139e17,_0x141f67){console['log'](a26_0x42f3('0x82'));console[a26_0x42f3('0x4e')](_0x385153);const _0x568368=!![];let _0x4ec7b1=0x0;const _0x458684='';console['log']('Attempting\x20to\x20download\x20'+_0x385153+a26_0x42f3('0x83')+_0x59dd04);if(_0x4ec7b1){if(_0x4ec7b1>0x5){_0x141f67(a26_0x42f3('0x84'),_0x385153,_0x139e17,null);return;}}else{_0x4ec7b1=0x0;}const _0x276c5f=this['tempFolder']+_0x59dd04;let _0x351607;if(_0x141f67===undefined){console[a26_0x42f3('0x4e')](a26_0x42f3('0x85')+_0x385153+a26_0x42f3('0x83')+_0x276c5f);_0x141f67=function(_0x164888,_0x4c2a1c){console[a26_0x42f3('0x4e')](a26_0x42f3('0x86'),_0x164888,_0x4c2a1c);};}http[a26_0x42f3('0x87')][a26_0x42f3('0x88')]=0x64;const _0x3b686b={'host':url[a26_0x42f3('0x32')](_0x385153)[a26_0x42f3('0x89')],'port':0x50,'path':url[a26_0x42f3('0x32')](_0x385153)['pathname'],'agent':![]};const _0x7d9a17=http['get'](_0x3b686b,function(_0x197607){let _0x48d6a3=0x0;let _0x4e26a5=0x0;function _0x475c4a(){if(_0x48d6a3===undefined){console[a26_0x42f3('0x4e')](_0x59dd04+a26_0x42f3('0x8a')+_0x4e26a5+'/'+'?');}const _0x2ae434=_0x4e26a5/_0x48d6a3*0x64;console[a26_0x42f3('0x4e')](_0x59dd04+a26_0x42f3('0x8b')+_0x2ae434+'%\x09'+_0x4e26a5+'/'+_0x48d6a3);}console[a26_0x42f3('0x4e')](_0x59dd04+'\x20'+_0x197607[a26_0x42f3('0x8c')]);switch(_0x197607[a26_0x42f3('0x8c')]){case 0xc8:_0x48d6a3=_0x197607[a26_0x42f3('0x8d')]['content-length']||_0x458684;fs[a26_0x42f3('0x8e')](_0x276c5f,function(_0x42d4df,_0x338420){if(!_0x42d4df){console[a26_0x42f3('0x4e')]('Have\x20already\x20downloaded\x20'+_0x276c5f);if(_0x338420['size']==_0x48d6a3){console[a26_0x42f3('0x4e')](a26_0x42f3('0x8f')+_0x48d6a3+')');console[a26_0x42f3('0x4e')]('Redownloading');}else{console['log'](a26_0x42f3('0x90')+_0x338420['size']+a26_0x42f3('0x91')+_0x48d6a3+')');}}_0x351607=fs[a26_0x42f3('0x92')](_0x276c5f);_0x197607[a26_0x42f3('0x93')](_0x351607);_0x197607['on']('data',function(_0x408a23){_0x4e26a5+=_0x408a23[a26_0x42f3('0x5c')];_0x475c4a();});_0x7d9a17['on'](a26_0x42f3('0x7b'),function(_0x42d4df){console[a26_0x42f3('0x4e')]('err:\x20');console[a26_0x42f3('0x4e')](_0x42d4df);});_0x351607['on'](a26_0x42f3('0x94'),function(){console['log'](a26_0x42f3('0x95')+_0x385153+a26_0x42f3('0x83')+_0x59dd04);_0x141f67(null,_0x59dd04,_0x139e17,_0x59dd04);}['bind'](this));});break;case 0x12e:const _0x1e5a41=_0x197607[a26_0x42f3('0x8d')][a26_0x42f3('0x96')];console['log'](a26_0x42f3('0x97')+_0x385153+'\x20to\x20'+_0x1e5a41);if(_0x4ec7b1<0x5){this['downloadHTTPFile'](_0x1e5a41,_0x59dd04,_0x141f67,_0x4ec7b1++);}else{console['error'](a26_0x42f3('0x98')+_0x385153+'.');_0x141f67(a26_0x42f3('0x99'),null,null,null);}return;case 0x194:console[a26_0x42f3('0x4e')](a26_0x42f3('0x9a')+_0x385153);default:console['log'](a26_0x42f3('0x9b')+_0x385153+a26_0x42f3('0x9c')+_0x197607[a26_0x42f3('0x8c')]);_0x7d9a17[a26_0x42f3('0x9d')]();_0x141f67(_0x197607[a26_0x42f3('0x8c')],null,null,null);return;}})['on'](a26_0x42f3('0x7b'),function(_0x11d983){console[a26_0x42f3('0x4e')](a26_0x42f3('0x9e')+_0x385153+'\x20'+_0x11d983['message']);_0x141f67(_0x11d983,null,null,null);});}[a26_0x42f3('0x9f')](_0x2bba5e,_0x34f813,_0x5c2ac4,_0x146699){console[a26_0x42f3('0x4e')](a26_0x42f3('0x9f'));console['log'](_0x2bba5e);console[a26_0x42f3('0x4e')](_0x34f813);console['log'](_0x5c2ac4);console[a26_0x42f3('0x4e')](_0x146699);if(_0x5c2ac4==a26_0x42f3('0x6c')){const _0x4385fc=this[a26_0x42f3('0x24')][this[a26_0x42f3('0x22')]][a26_0x42f3('0xa0')]!=null?this['downloadFiles'][this[a26_0x42f3('0x22')]][a26_0x42f3('0xa0')]:0x1e;this[a26_0x42f3('0xa1')](_0x146699,_0x4385fc);}else if(_0x5c2ac4==a26_0x42f3('0xa2')){if(_0x2bba5e==null&&_0x34f813!=''){this[a26_0x42f3('0x22')]++;}this[a26_0x42f3('0x5d')]();}console[a26_0x42f3('0x4e')](this[a26_0x42f3('0x22')]);}['downloadRequestFile'](_0x444c98,_0x55745f,_0x31a3f1){progress(request(_0x444c98),{})['on'](a26_0x42f3('0xa3'),function(_0x51e1da){console[a26_0x42f3('0x4e')](_0x51e1da);})['on'](a26_0x42f3('0x7b'),function(_0x2f3197){console['log'](a26_0x42f3('0xa4'));this[a26_0x42f3('0x5d')]();})['on'](a26_0x42f3('0x7c'),function(){console[a26_0x42f3('0x4e')](a26_0x42f3('0x7d')+_0x55745f);console[a26_0x42f3('0x4e')](a26_0x42f3('0x7e')+_0x31a3f1);if(_0x31a3f1==a26_0x42f3('0x6c')){const _0x482011=this[a26_0x42f3('0x24')][this[a26_0x42f3('0x22')]][a26_0x42f3('0xa0')]!=null?this[a26_0x42f3('0x24')][this[a26_0x42f3('0x22')]][a26_0x42f3('0xa0')]:0x1e;this['createImageVideo'](_0x55745f,_0x482011);}else if(_0x31a3f1==a26_0x42f3('0xa2')){this['currentFile']++;this[a26_0x42f3('0x5d')]();}}[a26_0x42f3('0x43')](this))[a26_0x42f3('0x93')](fs[a26_0x42f3('0x92')](this[a26_0x42f3('0x1a')]+_0x55745f));}['createImageVideo'](_0x4ee6bf,_0x30ab55=0x1e){const _0x34e909=this[a26_0x42f3('0x1a')]+_0x4ee6bf;console[a26_0x42f3('0x4e')](_0x34e909);console[a26_0x42f3('0x4e')](_0x4ee6bf);const _0x488cb6=_0x4ee6bf[a26_0x42f3('0x67')]('.')['slice'](0x0,-0x1)['join']('.');const _0x1a2b7b='ffmpeg';const _0x727ad=['-y','-r','1/2',a26_0x42f3('0xa5'),'1',a26_0x42f3('0xa6'),'glob','-i',_0x34e909,'-t',String(_0x30ab55),'-c:v',a26_0x42f3('0xa7'),'-pix_fmt','yuv420p','-r','25',a26_0x42f3('0xa8'),'scale=1920:1080',this['tempFolder']+_0x488cb6+a26_0x42f3('0x6b')];const _0x561fe5=spawn(_0x1a2b7b,_0x727ad);_0x561fe5[a26_0x42f3('0xa9')]['on'](a26_0x42f3('0xaa'),function(_0x163cec){console[a26_0x42f3('0x4e')]('Converting\x20'+_0x34e909);});_0x561fe5['stderr']['on']('data',function(_0x384f64){console['log'](a26_0x42f3('0xab')+_0x384f64);}[a26_0x42f3('0x43')](this));_0x561fe5['on'](a26_0x42f3('0xac'),function(){console[a26_0x42f3('0x4e')](a26_0x42f3('0xad'));this[a26_0x42f3('0x22')]++;this[a26_0x42f3('0x5d')]();}[a26_0x42f3('0x43')](this));}['downloadYouTube'](_0x1a1a8d){const _0xd96a7c=this[a26_0x42f3('0x1a')]+'/'+_0x1a1a8d+'.mp4';const _0x55f6a4='http://www.youtube.com/watch?v='+_0x1a1a8d;console['log'](a26_0x42f3('0xae')+_0x55f6a4);console[a26_0x42f3('0x4e')]('outFileName:\x20'+_0xd96a7c);const _0x34047e=youtubedl(_0x55f6a4,[a26_0x42f3('0xaf'),a26_0x42f3('0xb0')],{'cwd':__dirname});_0x34047e['on'](a26_0x42f3('0xb1'),function(_0x2c40a2){console['log']('Download\x20started');console[a26_0x42f3('0x4e')](a26_0x42f3('0xb2')+_0x2c40a2[a26_0x42f3('0xb3')]);console[a26_0x42f3('0x4e')](a26_0x42f3('0xb4')+_0x2c40a2[a26_0x42f3('0xb5')]);});_0x34047e['on'](a26_0x42f3('0xb6'),function complete(_0x40180d){'use strict';console[a26_0x42f3('0x4e')]('filename:\x20'+_0x40180d[a26_0x42f3('0xb3')]+'\x20already\x20downloaded.');});_0x34047e['on'](a26_0x42f3('0x7c'),function(){console['log'](a26_0x42f3('0xb7'));this[a26_0x42f3('0x6e')](_0xd96a7c)['then'](function(_0x3044eb){if(_0x3044eb){this[a26_0x42f3('0x22')]++;}this['download']();}[a26_0x42f3('0x43')](this));}[a26_0x42f3('0x43')](this));_0x34047e[a26_0x42f3('0x93')](fs['createWriteStream'](_0xd96a7c));}[a26_0x42f3('0x63')](){console[a26_0x42f3('0x4e')](a26_0x42f3('0xb8'));if(this[a26_0x42f3('0x23')]){if(this[a26_0x42f3('0x25')]['length']==0x0){console[a26_0x42f3('0x4e')](a26_0x42f3('0xb9')+this[a26_0x42f3('0x1e')]);fs['writeFileSync'](this[a26_0x42f3('0x1e')],JSON['stringify'](this[a26_0x42f3('0x26')]));let _0x45e53a=a26_0x42f3('0xba')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x403c9b in this[a26_0x42f3('0x24')]){const _0x165fde=this[a26_0x42f3('0x24')][_0x403c9b][a26_0x42f3('0x64')];const _0x3385df=this[a26_0x42f3('0x24')][_0x403c9b][a26_0x42f3('0x65')];const _0xd227d=_0x165fde[a26_0x42f3('0x66')](_0x165fde['lastIndexOf']('/')+0x1);let _0x59f35c=_0xd227d[a26_0x42f3('0x67')]('.')[a26_0x42f3('0x68')](0x0,-0x1)['join']('.');if(_0x3385df=='youtube_single'){_0x59f35c=_0x165fde;}_0x45e53a+=a26_0x42f3('0xbb')+_0x59f35c+a26_0x42f3('0x6b')+'\x0d\x0a';console[a26_0x42f3('0x4e')](a26_0x42f3('0xbc')+_0x45e53a);}console['log'](a26_0x42f3('0xbc')+_0x45e53a);fsExtra[a26_0x42f3('0x59')](this[a26_0x42f3('0x1c')]);console[a26_0x42f3('0x4e')](a26_0x42f3('0xbd')+this[a26_0x42f3('0x1a')]);fsExtra['copySync'](this[a26_0x42f3('0x1a')],this[a26_0x42f3('0x1c')]);console[a26_0x42f3('0x4e')]('writeFileSync:\x20'+this[a26_0x42f3('0x20')]);fsExtra[a26_0x42f3('0x4f')](this[a26_0x42f3('0x20')],_0x45e53a);console[a26_0x42f3('0x4e')](a26_0x42f3('0xbe')+this[a26_0x42f3('0x1a')]);fsExtra[a26_0x42f3('0x59')](this['tempFolder']);console[a26_0x42f3('0x4e')]('Rebooting..');this[a26_0x42f3('0xbf')]();}else{console[a26_0x42f3('0x4e')]('Playlist\x20incomplete,\x20retry.');this[a26_0x42f3('0x22')]=0x0;setTimeout(function(){this[a26_0x42f3('0x5d')]();}[a26_0x42f3('0x43')](this),0x1388);}}else{console[a26_0x42f3('0x4e')](a26_0x42f3('0xc0'));}}['refreshPlayer'](){this[a26_0x42f3('0xc1')]('Playlist.Clear',{'playlistid':0x1},function(_0x23902d){console[a26_0x42f3('0x4e')]('Playlist.Cleared');console['log'](_0x23902d);this[a26_0x42f3('0xc1')](a26_0x42f3('0xc2'),{'item':{'file':a26_0x42f3('0xc3')},'playlistid':0x1},function(_0x23902d){console[a26_0x42f3('0x4e')]('Playlist.Added');console['log'](_0x23902d);this['jsonrpcClient'](a26_0x42f3('0xc4'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x23902d){console[a26_0x42f3('0x4e')](a26_0x42f3('0xc5'));console[a26_0x42f3('0x4e')](_0x23902d);this[a26_0x42f3('0xc6')]('RestartApp()');}[a26_0x42f3('0x43')](this));}[a26_0x42f3('0x43')](this));}[a26_0x42f3('0x43')](this));}[a26_0x42f3('0xbf')](){console[a26_0x42f3('0x4e')](a26_0x42f3('0xc7'));exec('sudo\x20/sbin/reboot\x20-f',function(_0x1704c9){console[a26_0x42f3('0x4e')](_0x1704c9);});}[a26_0x42f3('0x41')](){const _0x4dda01=format(this['playerServiceURL'],this[a26_0x42f3('0x33')]);console[a26_0x42f3('0x4e')](_0x4dda01);request({'url':_0x4dda01,'json':!![]},function(_0xb99386,_0x35bfc9,_0x3cd651){if(_0x3cd651[a26_0x42f3('0x5c')]>0x0){const _0x196e39=_0x3cd651[0x0];const _0xbe4f8c=_0x196e39['rss'];const _0x3ff1ff=_0x196e39[a26_0x42f3('0xc8')]==0x1;this[a26_0x42f3('0xc9')](_0xbe4f8c);this[a26_0x42f3('0xca')](_0x3ff1ff);this['registerClient']();}console[a26_0x42f3('0x4e')](_0x3cd651);}['bind'](this));}[a26_0x42f3('0xcb')](){this['kodiCommandClient'](a26_0x42f3('0xcc'));}['turnOnTV'](){this['kodiCommandClient'](a26_0x42f3('0xcd'));}[a26_0x42f3('0xc9')](_0x2f2c42){const _0x127111=_0x2f2c42!=null&&_0x2f2c42!='';const _0x2b4ec9='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra[a26_0x42f3('0x5f')](_0x2b4ec9)){const _0x1fcd9c=fsExtra[a26_0x42f3('0x30')](_0x2b4ec9);console[a26_0x42f3('0x4e')](a26_0x42f3('0xce')+_0x1fcd9c);const _0x2918fd=require('xml2js');const _0x428ccb=_0x2918fd[a26_0x42f3('0xcf')];_0x428ccb(_0x1fcd9c,function(_0xfe0a40,_0x2ebd19){console[a26_0x42f3('0x4e')](a26_0x42f3('0xd0'),_0xfe0a40);console[a26_0x42f3('0x4e')](a26_0x42f3('0xd1'),_0x2ebd19);if(!_0x2f2c42||_0x2f2c42==null||_0x2f2c42==''){_0x2f2c42=a26_0x42f3('0xd2');}_0x2ebd19[a26_0x42f3('0xd3')][a26_0x42f3('0xd4')][0x0][a26_0x42f3('0xd5')][0x0]['_']=_0x2f2c42;const _0x3cd618=new _0x2918fd[(a26_0x42f3('0xd6'))]();const _0x1971e9=_0x3cd618['buildObject'](_0x2ebd19);console['log']('xml:\x20%j',_0x1971e9);fsExtra[a26_0x42f3('0x4f')](_0x2b4ec9,_0x1971e9);});this['kodiCommandClient'](a26_0x42f3('0xd7'));this['jsonrpcClient'](a26_0x42f3('0xd8'),{'setting':a26_0x42f3('0xd9'),'value':_0x127111},function(_0x4a411d){console['log'](a26_0x42f3('0xda'));console[a26_0x42f3('0x4e')](_0x4a411d);}[a26_0x42f3('0x43')](this));}}[a26_0x42f3('0xca')](_0x446fe3){this[a26_0x42f3('0xc1')](a26_0x42f3('0xd8'),{'setting':a26_0x42f3('0xdb'),'value':_0x446fe3},function(_0x4e2163){console[a26_0x42f3('0x4e')]('enableClock:\x20');console['log'](_0x4e2163);}[a26_0x42f3('0x43')](this));}['kodiCommandClient'](_0x2eb499){exec('kodi-send\x20--action=\x22'+_0x2eb499+'\x22',function(_0x5cb179){console['log'](_0x5cb179);});}[a26_0x42f3('0xc1')](_0x8b8313,_0x5ada57,_0x12c60b){const _0xff1bf3={'jsonrpc':a26_0x42f3('0xdc'),'method':_0x8b8313,'params':_0x5ada57,'id':0x1};const _0xc12e82={'user':this[a26_0x42f3('0xdd')],'pass':this[a26_0x42f3('0x3e')]};console[a26_0x42f3('0x4e')](a26_0x42f3('0xde'),_0xff1bf3);console[a26_0x42f3('0x4e')](a26_0x42f3('0xdf'),_0xc12e82);this[a26_0x42f3('0x2c')][a26_0x42f3('0x4b')](this[a26_0x42f3('0x27')]+a26_0x42f3('0xe0'),_0xff1bf3,![],_0xc12e82)[a26_0x42f3('0x4')](function(_0x39936c){_0x12c60b(_0x39936c);})[a26_0x42f3('0x53')](function(_0x4a2621){});}}exports[a26_0x42f3('0xe1')]=SyncPlaylistsService;