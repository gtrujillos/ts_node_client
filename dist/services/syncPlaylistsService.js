var a22_0x1ac9=['retry','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','createWriteStream','pipe','data','error','Downloaded\x20','\x20to\x20','Redirect\x20','302','File\x20Not\x20Found\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','Downloaded:\x20','video','ffmpeg','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','Converting\x20','stderr:\x20','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','_filename','size:\x20','complete','filename:\x20','\x20already\x20downloaded.','Finishing','newPlayList','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','/home/osmc/luloclient/media/files/','Refreshing..','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','Playlist.Clear','Playlist.Cleared','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','jsonrpcClient','Player.Open','Playlist.Opened','reboot','sudo\x20/sbin/shutdown\x20-r\x20now','updateSettings','playerServiceURL','rss','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','parseString','err:\x20%j','result:\x20%j','rssfeeds','set','feed','Builder','xml:\x20%j','kodi-send\x20--action=\x22RefreshRSS()\x22','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','enableClock','videoplayer.usedisplayasclock','enableClock:\x20','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','defineProperty','../infrastructure/HttpClientService','url','http','fs-extra','request','child_process','exec','string-template','youtube-dl','uuid/v4','config.json','context.json','node-kodi','mediaFolder','media/','tempFolder','files/','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','httpClientService','HttpClientService','init','parse','context','readFileSync','playerId','config','baseURL','WEB_SERVICE_URL','playListServiceURL','api/player_playlist.php?player_id={0}','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','loadMediaList','bind','playlist','getItems','deviceUuid','networkInterfaces','post','register\x20response:\x20','log','writeFileSync','getStatus','player','item','label','reportStatus','catch','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','filesFolder','loadMediaList:\x20','hasPlayListChanged','Total:\x20','length','reloadMediaList','emptyDirSync','existsSync','playListFile','removeSync','stringify','toString','download','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','substring','lastIndexOf','split','slice','join','image','.mp4','**********+','checkVideo','copySync','Downloading:\x20','youtube_single','downloadYouTube','downloader','videoFile:\x20','media','track','@type','mediainfo\x20check:','indexOf','splice','downloading:\x20','start','includes','push','Error:\x20','start:\x20','error:\x20','end','mediaType:\x20','stopped','destroyed'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a22_0x1ac9,0x64));var a22_0x3939=function(_0xb67384,_0x27295a){_0xb67384=_0xb67384-0x0;var _0x156d7c=a22_0x1ac9[_0xb67384];return _0x156d7c;};'use strict';var __awaiter=this&&this[a22_0x3939('0x0')]||function(_0x349241,_0x2689fb,_0x240604,_0x1d0975){function _0x259067(_0x2dd04f){return _0x2dd04f instanceof _0x240604?_0x2dd04f:new _0x240604(function(_0x18156c){_0x18156c(_0x2dd04f);});}return new(_0x240604||(_0x240604=Promise))(function(_0x2dc3aa,_0x230f3a){function _0x45af9b(_0x15cd8a){try{_0x51b27e(_0x1d0975[a22_0x3939('0x1')](_0x15cd8a));}catch(_0x4e59e1){_0x230f3a(_0x4e59e1);}}function _0x3073e7(_0x4cf123){try{_0x51b27e(_0x1d0975[a22_0x3939('0x2')](_0x4cf123));}catch(_0x276cf9){_0x230f3a(_0x276cf9);}}function _0x51b27e(_0x3cb628){_0x3cb628[a22_0x3939('0x3')]?_0x2dc3aa(_0x3cb628[a22_0x3939('0x4')]):_0x259067(_0x3cb628[a22_0x3939('0x4')])[a22_0x3939('0x5')](_0x45af9b,_0x3073e7);}_0x51b27e((_0x1d0975=_0x1d0975[a22_0x3939('0x6')](_0x349241,_0x2689fb||[]))[a22_0x3939('0x1')]());});};Object[a22_0x3939('0x7')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a22_0x3939('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a22_0x3939('0x9'));const http=require(a22_0x3939('0xa'));const fsExtra=require(a22_0x3939('0xb'));const request=require(a22_0x3939('0xc'));const progress=require('request-progress');const spawn=require('child_process')['spawn'];const exec=require(a22_0x3939('0xd'))[a22_0x3939('0xe')];const isImage=require('is-image');const format=require(a22_0x3939('0xf'));const os=require('os');const youtubedl=require(a22_0x3939('0x10'));const uuidv4=require(a22_0x3939('0x11'));const configFile=a22_0x3939('0x12');const contextFile=a22_0x3939('0x13');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x3939('0x14'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a22_0x3939('0x15')]=a22_0x3939('0x16');this[a22_0x3939('0x17')]=this[a22_0x3939('0x15')]+'temp/';this['filesFolder']=this[a22_0x3939('0x15')]+a22_0x3939('0x18');this['playListFile']=this[a22_0x3939('0x15')]+a22_0x3939('0x19');this[a22_0x3939('0x1a')]=this['filesFolder']+a22_0x3939('0x1b');this[a22_0x3939('0x1c')]=0x0;this[a22_0x3939('0x1d')]=![];this[a22_0x3939('0x1e')]=[];this[a22_0x3939('0x1f')]=[];this['newPlayList']={};this[a22_0x3939('0x20')]=a22_0x3939('0x21');this[a22_0x3939('0x22')]=a22_0x3939('0x23');this[a22_0x3939('0x24')]=a22_0x3939('0x25');this[a22_0x3939('0x26')]=new HttpClientService_1[(a22_0x3939('0x27'))]();}[a22_0x3939('0x28')](){this['config']=JSON[a22_0x3939('0x29')](fs['readFileSync'](configFile));this[a22_0x3939('0x2a')]=JSON[a22_0x3939('0x29')](fs[a22_0x3939('0x2b')](contextFile));this[a22_0x3939('0x2c')]=this[a22_0x3939('0x2d')]['playerId'];this[a22_0x3939('0x2e')]=process['env'][a22_0x3939('0x2f')]+'deploy/';this[a22_0x3939('0x30')]=this['baseURL']+a22_0x3939('0x31');this['playerServiceURL']=this['baseURL']+a22_0x3939('0x32');this[a22_0x3939('0x33')]=new kodi_rpc({'url':this[a22_0x3939('0x20')],'user':this['kodiUser'],'password':this[a22_0x3939('0x24')]});this[a22_0x3939('0x34')]();this[a22_0x3939('0x35')]();this['checkFolders']();this[a22_0x3939('0x36')]();setInterval(function(){this['getStatus']();}[a22_0x3939('0x37')](this),0x2710);setInterval(function(){this[a22_0x3939('0x35')]();}[a22_0x3939('0x37')](this),0x493e0);}[a22_0x3939('0x34')](){}['registerClient'](){this['kodi'][a22_0x3939('0x38')][a22_0x3939('0x39')](0x1)['then'](function(_0x3db834){const _0x5294e5=JSON['stringify'](_0x3db834);const _0x6949f1={'player_id':this[a22_0x3939('0x2c')],'device_uuid':this[a22_0x3939('0x2d')][a22_0x3939('0x3a')],'network_info':JSON['stringify'](os[a22_0x3939('0x3b')]()),'firmware_info':JSON['stringify'](this[a22_0x3939('0x2a')]),'playlist':_0x5294e5,'playing_item':'','status':0x0};this[a22_0x3939('0x26')][a22_0x3939('0x3c')]('http://restapi.lulo.run/player_devices/register',_0x6949f1,![])['then'](function(_0x13935){console['log'](a22_0x3939('0x3d')+Date());})['catch'](function(_0x17eeaa){});console[a22_0x3939('0x3e')](_0x6949f1);}['bind'](this));const _0x28b803=this[a22_0x3939('0x2d')]['deviceUuid'];if(!_0x28b803||_0x28b803==''){this['config'][a22_0x3939('0x3a')]=uuidv4();this[a22_0x3939('0x2d')]={'deviceUuid':this['config'][a22_0x3939('0x3a')],'playerId':this[a22_0x3939('0x2d')][a22_0x3939('0x2c')]};fs[a22_0x3939('0x3f')](configFile,JSON['stringify'](this['config']));}}[a22_0x3939('0x40')](){console['log']('getStatus');this[a22_0x3939('0x33')][a22_0x3939('0x41')]['getCurrentlyPlayingVideo']()[a22_0x3939('0x5')](function(_0x177140){const _0x2d08f7=_0x177140[a22_0x3939('0x42')][a22_0x3939('0x43')];this[a22_0x3939('0x44')](_0x2d08f7);}[a22_0x3939('0x37')](this))[a22_0x3939('0x45')](function(_0x1c4c59){console[a22_0x3939('0x3e')](_0x1c4c59);this[a22_0x3939('0x44')](_0x1c4c59);}[a22_0x3939('0x37')](this));}[a22_0x3939('0x44')](_0x2f5036){console[a22_0x3939('0x3e')](a22_0x3939('0x46')+_0x2f5036);const _0x1a4233={'player_id':this['playerId'],'device_uuid':this[a22_0x3939('0x2d')][a22_0x3939('0x3a')],'status':_0x2f5036!=''&&_0x2f5036!=null?0x1:0x0,'playing_item':_0x2f5036};this['httpClientService'][a22_0x3939('0x3c')](a22_0x3939('0x47'),_0x1a4233,![])[a22_0x3939('0x5')](function(_0x230f68){console[a22_0x3939('0x3e')](a22_0x3939('0x48')+Date());})[a22_0x3939('0x45')](function(_0x536d09){});}['checkFolders'](){fsExtra['ensureDir'](this[a22_0x3939('0x15')],_0x2a0866=>{});fsExtra[a22_0x3939('0x49')](this['tempFolder'],_0x4d7462=>{});fsExtra[a22_0x3939('0x49')](this[a22_0x3939('0x4a')],_0x3c51fe=>{});}[a22_0x3939('0x36')](){const _0x4fbfe8=format(this['playListServiceURL'],this[a22_0x3939('0x2c')]);console[a22_0x3939('0x3e')](_0x4fbfe8);request({'url':_0x4fbfe8,'json':!![]},function(_0x46faf4,_0x3a2931,_0x282db2){console[a22_0x3939('0x3e')](a22_0x3939('0x4b'));console[a22_0x3939('0x3e')](_0x282db2);this['newPlayList']=_0x282db2;this[a22_0x3939('0x1d')]=this[a22_0x3939('0x4c')]();fsExtra['emptyDirSync'](this[a22_0x3939('0x17')]);this[a22_0x3939('0x1e')]=[];this[a22_0x3939('0x1f')]=[];this[a22_0x3939('0x1c')]=0x0;for(const _0x140338 in _0x282db2){this[a22_0x3939('0x1e')]['push'](_0x282db2[_0x140338]);}console[a22_0x3939('0x3e')](a22_0x3939('0x4d')+this['downloadFiles'][a22_0x3939('0x4e')]);if(this['downloadFiles'][a22_0x3939('0x4e')]>0x0){this['download']();}}[a22_0x3939('0x37')](this));}[a22_0x3939('0x4f')](){if(fsExtra['existsSync'](this[a22_0x3939('0x17')])){fsExtra[a22_0x3939('0x50')](this['tempFolder']);}if(fsExtra[a22_0x3939('0x51')](this[a22_0x3939('0x4a')])){fsExtra['emptyDirSync'](this[a22_0x3939('0x4a')]);}if(!fsExtra['existsSync'](this[a22_0x3939('0x52')])){fsExtra['removeSync'](this[a22_0x3939('0x52')]);}if(!fsExtra[a22_0x3939('0x51')](this[a22_0x3939('0x1a')])){fsExtra[a22_0x3939('0x53')](this[a22_0x3939('0x1a')]);}this[a22_0x3939('0x36')]();}['hasPlayListChanged'](){const _0x22a39a=JSON[a22_0x3939('0x54')](this['newPlayList']);try{if(!fsExtra[a22_0x3939('0x51')](this['playListFile'])){return!![];}else{const _0x290edf=fsExtra[a22_0x3939('0x2b')](this[a22_0x3939('0x52')])[a22_0x3939('0x55')]();if(_0x290edf!=_0x22a39a){return!![];}}}catch(_0x3ed4ae){console['log'](_0x3ed4ae);}return![];}[a22_0x3939('0x56')](){console[a22_0x3939('0x3e')](a22_0x3939('0x57')+this[a22_0x3939('0x1c')]+a22_0x3939('0x58')+this[a22_0x3939('0x1e')][a22_0x3939('0x4e')]);if(this[a22_0x3939('0x1c')]>=this['downloadFiles']['length']){this[a22_0x3939('0x59')]();return;}const _0x27e16a=String(this[a22_0x3939('0x1e')][this[a22_0x3939('0x1c')]]['path']);const _0x418675=this[a22_0x3939('0x1e')][this[a22_0x3939('0x1c')]][a22_0x3939('0x5a')];let _0x290dcf=_0x27e16a[a22_0x3939('0x5b')](_0x27e16a[a22_0x3939('0x5c')]('/')+0x1);const _0xdf62f0=_0x290dcf[a22_0x3939('0x5d')]('.')[a22_0x3939('0x5e')](0x0,-0x1)[a22_0x3939('0x5f')]('.');let _0x107d2f=this['baseURL']+_0x27e16a;const _0xb41adb=_0x107d2f[a22_0x3939('0x5d')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x418675=='youtube_single'){_0x290dcf=_0x290dcf+'.mp4';}else if(_0x418675==a22_0x3939('0x60')){_0x290dcf=_0xdf62f0+a22_0x3939('0x61');_0x107d2f=_0xb41adb+a22_0x3939('0x61');}console['log'](a22_0x3939('0x62'));console[a22_0x3939('0x3e')](_0x27e16a);console[a22_0x3939('0x3e')](_0x418675);console[a22_0x3939('0x3e')](_0x290dcf);console[a22_0x3939('0x3e')](_0x107d2f);console[a22_0x3939('0x3e')](_0xdf62f0);console['log'](_0xb41adb);console[a22_0x3939('0x3e')](a22_0x3939('0x62'));if(fsExtra[a22_0x3939('0x51')](this['tempFolder']+_0x290dcf)){this[a22_0x3939('0x63')](this[a22_0x3939('0x17')]+_0x290dcf)[a22_0x3939('0x5')](function(_0x45a4ac){if(_0x45a4ac){this[a22_0x3939('0x1c')]++;}else{this[a22_0x3939('0x1d')]=!![];}this['download']();}[a22_0x3939('0x37')](this));}else if(fsExtra[a22_0x3939('0x51')](this['filesFolder']+_0x290dcf)){this[a22_0x3939('0x63')](this[a22_0x3939('0x4a')]+_0x290dcf)['then'](function(_0x2da5c2){if(_0x2da5c2){fsExtra[a22_0x3939('0x64')](this[a22_0x3939('0x4a')]+_0x290dcf,this[a22_0x3939('0x17')]+_0x290dcf);this[a22_0x3939('0x1c')]++;}else{this[a22_0x3939('0x1d')]=!![];}this[a22_0x3939('0x56')]();}[a22_0x3939('0x37')](this));}else{console[a22_0x3939('0x3e')](a22_0x3939('0x65')+_0x107d2f);this[a22_0x3939('0x1d')]=!![];if(_0x418675==a22_0x3939('0x66')){this[a22_0x3939('0x67')](_0x27e16a);}else{this[a22_0x3939('0x68')](_0x107d2f,_0x290dcf,_0x418675);}}}[a22_0x3939('0x63')](_0x37aa45){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x3939('0x3e')](a22_0x3939('0x69')+_0x37aa45);const _0x1992f8=yield mediainfo(_0x37aa45)[a22_0x3939('0x45')](_0xf897b8=>{console[a22_0x3939('0x3e')](_0xf897b8);fsExtra['removeSync'](_0x37aa45);return![];});const _0xa33442=_0x1992f8[a22_0x3939('0x6a')][a22_0x3939('0x6b')][a22_0x3939('0x4e')]>0x1&&_0x1992f8[a22_0x3939('0x6a')][a22_0x3939('0x6b')][0x1][a22_0x3939('0x6c')]=='Video';if(!_0xa33442){fsExtra[a22_0x3939('0x53')](_0x37aa45);}console['log'](a22_0x3939('0x6d')+_0xa33442);return _0xa33442;});}[a22_0x3939('0x68')](_0x2d9807,_0x5c8bc4,_0x3da96e){const _0x98888c=new Downloader();console[a22_0x3939('0x3e')](_0x2d9807);console[a22_0x3939('0x3e')](_0x5c8bc4);console[a22_0x3939('0x3e')](_0x3da96e);const _0x555f20=_0x98888c[a22_0x3939('0x56')](_0x2d9807,this[a22_0x3939('0x17')]+_0x5c8bc4);urlExists(_0x2d9807,function(_0x47257d,_0x1ef8eb){if(_0x1ef8eb){if(this['failDownloadFiles']['includes'](this[a22_0x3939('0x1c')])){const _0x4ba3bd=this[a22_0x3939('0x1f')][a22_0x3939('0x6e')](this[a22_0x3939('0x1c')]);if(_0x4ba3bd>-0x1){this['failDownloadFiles'][a22_0x3939('0x6f')](_0x4ba3bd,0x1);}}console[a22_0x3939('0x3e')](a22_0x3939('0x70')+_0x2d9807);_0x555f20[a22_0x3939('0x71')]();}else{if(!this[a22_0x3939('0x1f')][a22_0x3939('0x72')](this['currentFile'])){this[a22_0x3939('0x1f')][a22_0x3939('0x73')](this['currentFile']);}console[a22_0x3939('0x3e')](a22_0x3939('0x74')+_0x2d9807);this[a22_0x3939('0x1c')]++;this[a22_0x3939('0x56')]();}}['bind'](this));_0x555f20['on'](a22_0x3939('0x71'),function(_0x555f20){console['log'](a22_0x3939('0x75')+_0x2d9807);});_0x555f20['on']('error',function(_0x555f20){console[a22_0x3939('0x3e')](a22_0x3939('0x76'));this[a22_0x3939('0x56')]();}['bind'](this));_0x555f20['on'](a22_0x3939('0x77'),function(_0x555f20){console[a22_0x3939('0x3e')](a22_0x3939('0x77'));console['log']('Downloaded:\x20'+_0x5c8bc4);console[a22_0x3939('0x3e')](a22_0x3939('0x78')+_0x3da96e);this[a22_0x3939('0x63')](this[a22_0x3939('0x17')]+_0x5c8bc4)[a22_0x3939('0x5')](function(_0x295a57){if(_0x295a57){this[a22_0x3939('0x1c')]++;}this[a22_0x3939('0x56')]();}[a22_0x3939('0x37')](this));}[a22_0x3939('0x37')](this));_0x555f20['on'](a22_0x3939('0x79'),function(_0x555f20){console[a22_0x3939('0x3e')](a22_0x3939('0x79'));});_0x555f20['on']('destroyed',function(_0x555f20){console[a22_0x3939('0x3e')](a22_0x3939('0x7a'));});_0x555f20['on'](a22_0x3939('0x7b'),function(_0x555f20){console[a22_0x3939('0x3e')](a22_0x3939('0x7b'));});}[a22_0x3939('0x7c')](_0x631fa1,_0x2be459,_0xc72756,_0x257cb3){console[a22_0x3939('0x3e')]('downloadHTTPFile');console['log'](_0x631fa1);const _0x5545f7=!![];let _0x21ffd2=0x0;const _0x1c7063='';console[a22_0x3939('0x3e')](a22_0x3939('0x7d')+_0x631fa1+'\x20to\x20'+_0x2be459);if(_0x21ffd2){if(_0x21ffd2>0x5){_0x257cb3(a22_0x3939('0x7e'),_0x631fa1,_0xc72756,null);return;}}else{_0x21ffd2=0x0;}const _0x27044a=this[a22_0x3939('0x17')]+_0x2be459;let _0x369691;if(_0x257cb3===undefined){console['log']('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x631fa1+'\x20to\x20'+_0x27044a);_0x257cb3=function(_0x519588,_0x20d3f7){console[a22_0x3939('0x3e')](a22_0x3939('0x7f'),_0x519588,_0x20d3f7);};}http[a22_0x3939('0x80')][a22_0x3939('0x81')]=0x64;const _0x1b8672={'host':url[a22_0x3939('0x29')](_0x631fa1)[a22_0x3939('0x82')],'port':0x50,'path':url[a22_0x3939('0x29')](_0x631fa1)[a22_0x3939('0x83')],'agent':![]};const _0x3d3ade=http['get'](_0x1b8672,function(_0x30215d){let _0x4ee07b=0x0;let _0x29062e=0x0;function _0x346b12(){if(_0x4ee07b===undefined){console[a22_0x3939('0x3e')](_0x2be459+a22_0x3939('0x84')+_0x29062e+'/'+'?');}const _0x3143a0=_0x29062e/_0x4ee07b*0x64;console[a22_0x3939('0x3e')](_0x2be459+a22_0x3939('0x85')+_0x3143a0+'%\x09'+_0x29062e+'/'+_0x4ee07b);}console[a22_0x3939('0x3e')](_0x2be459+'\x20'+_0x30215d['statusCode']);switch(_0x30215d[a22_0x3939('0x86')]){case 0xc8:_0x4ee07b=_0x30215d[a22_0x3939('0x87')][a22_0x3939('0x88')]||_0x1c7063;fs[a22_0x3939('0x89')](_0x27044a,function(_0x231112,_0x73b557){if(!_0x231112){console[a22_0x3939('0x3e')](a22_0x3939('0x8a')+_0x27044a);if(_0x73b557[a22_0x3939('0x8b')]==_0x4ee07b){console['log'](a22_0x3939('0x8c')+_0x4ee07b+')');console[a22_0x3939('0x3e')](a22_0x3939('0x8d'));}else{console[a22_0x3939('0x3e')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x73b557['size']+')\x20vs\x20New('+_0x4ee07b+')');}}_0x369691=fs[a22_0x3939('0x8e')](_0x27044a);_0x30215d[a22_0x3939('0x8f')](_0x369691);_0x30215d['on'](a22_0x3939('0x90'),function(_0x49588c){_0x29062e+=_0x49588c[a22_0x3939('0x4e')];_0x346b12();});_0x3d3ade['on'](a22_0x3939('0x91'),function(_0x231112){console['log']('err:\x20');console[a22_0x3939('0x3e')](_0x231112);});_0x369691['on']('finish',function(){console[a22_0x3939('0x3e')](a22_0x3939('0x92')+_0x631fa1+a22_0x3939('0x93')+_0x2be459);_0x257cb3(null,_0x2be459,_0xc72756,_0x2be459);}[a22_0x3939('0x37')](this));});break;case 0x12e:const _0x1f016e=_0x30215d[a22_0x3939('0x87')]['location'];console[a22_0x3939('0x3e')](a22_0x3939('0x94')+_0x631fa1+'\x20to\x20'+_0x1f016e);if(_0x21ffd2<0x5){this[a22_0x3939('0x7c')](_0x1f016e,_0x2be459,_0x257cb3,_0x21ffd2++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x631fa1+'.');_0x257cb3(a22_0x3939('0x95'),null,null,null);}return;case 0x194:console[a22_0x3939('0x3e')](a22_0x3939('0x96')+_0x631fa1);default:console[a22_0x3939('0x3e')]('Problem\x20downloading\x20'+_0x631fa1+a22_0x3939('0x97')+_0x30215d[a22_0x3939('0x86')]);_0x3d3ade['abort']();_0x257cb3(_0x30215d[a22_0x3939('0x86')],null,null,null);return;}})['on'](a22_0x3939('0x91'),function(_0x5eb862){console[a22_0x3939('0x3e')](a22_0x3939('0x98')+_0x631fa1+'\x20'+_0x5eb862[a22_0x3939('0x99')]);_0x257cb3(_0x5eb862,null,null,null);});}[a22_0x3939('0x9a')](_0x200b2a,_0x7d40a3,_0x2728b9,_0x591980){console['log']('downloadHTTPFileCallback');console['log'](_0x200b2a);console[a22_0x3939('0x3e')](_0x7d40a3);console[a22_0x3939('0x3e')](_0x2728b9);console[a22_0x3939('0x3e')](_0x591980);if(_0x2728b9==a22_0x3939('0x60')){const _0x48fba1=this[a22_0x3939('0x1e')][this[a22_0x3939('0x1c')]][a22_0x3939('0x9b')]!=null?this[a22_0x3939('0x1e')][this['currentFile']]['duration']:0x1e;this[a22_0x3939('0x9c')](_0x591980,_0x48fba1);}else if(_0x2728b9=='video'){if(_0x200b2a==null&&_0x7d40a3!=''){this[a22_0x3939('0x1c')]++;}this[a22_0x3939('0x56')]();}console[a22_0x3939('0x3e')](this[a22_0x3939('0x1c')]);}[a22_0x3939('0x9d')](_0x589ce4,_0x3d7e3c,_0x1da84f){progress(request(_0x589ce4),{})['on'](a22_0x3939('0x9e'),function(_0x2c0121){console['log'](_0x2c0121);})['on'](a22_0x3939('0x91'),function(_0xc17f3e){console[a22_0x3939('0x3e')](a22_0x3939('0x9f'));this[a22_0x3939('0x56')]();})['on']('end',function(){console['log'](a22_0x3939('0xa0')+_0x3d7e3c);console[a22_0x3939('0x3e')](a22_0x3939('0x78')+_0x1da84f);if(_0x1da84f==a22_0x3939('0x60')){const _0x1d1ef6=this[a22_0x3939('0x1e')][this['currentFile']]['duration']!=null?this[a22_0x3939('0x1e')][this[a22_0x3939('0x1c')]]['duration']:0x1e;this[a22_0x3939('0x9c')](_0x3d7e3c,_0x1d1ef6);}else if(_0x1da84f==a22_0x3939('0xa1')){this[a22_0x3939('0x1c')]++;this[a22_0x3939('0x56')]();}}['bind'](this))[a22_0x3939('0x8f')](fs[a22_0x3939('0x8e')](this[a22_0x3939('0x17')]+_0x3d7e3c));}[a22_0x3939('0x9c')](_0x3f9b41,_0x4441e9=0x1e){const _0x45175e=this[a22_0x3939('0x17')]+_0x3f9b41;console[a22_0x3939('0x3e')](_0x45175e);console['log'](_0x3f9b41);const _0x53bc3b=_0x3f9b41['split']('.')[a22_0x3939('0x5e')](0x0,-0x1)[a22_0x3939('0x5f')]('.');const _0x509dc9=a22_0x3939('0xa2');const _0x43deb2=['-y','-r','1/2',a22_0x3939('0xa3'),'1',a22_0x3939('0xa4'),a22_0x3939('0xa5'),'-i',_0x45175e,'-t',String(_0x4441e9),a22_0x3939('0xa6'),a22_0x3939('0xa7'),a22_0x3939('0xa8'),a22_0x3939('0xa9'),'-r','25','-vf','scale=1920:1080',this[a22_0x3939('0x17')]+_0x53bc3b+a22_0x3939('0x61')];const _0x566019=spawn(_0x509dc9,_0x43deb2);_0x566019['stdout']['on'](a22_0x3939('0x90'),function(_0x2f8486){console[a22_0x3939('0x3e')](a22_0x3939('0xaa')+_0x45175e);});_0x566019['stderr']['on'](a22_0x3939('0x90'),function(_0x4670e3){console['log'](a22_0x3939('0xab')+_0x4670e3);}[a22_0x3939('0x37')](this));_0x566019['on']('close',function(){console[a22_0x3939('0x3e')](a22_0x3939('0xac'));this[a22_0x3939('0x1c')]++;this[a22_0x3939('0x56')]();}['bind'](this));}[a22_0x3939('0x67')](_0x5b84e9){const _0x40967b=this[a22_0x3939('0x17')]+'/'+_0x5b84e9+'.mp4';const _0x459df0=youtubedl(a22_0x3939('0xad')+_0x5b84e9,[a22_0x3939('0xae')],{'cwd':__dirname});_0x459df0['on'](a22_0x3939('0xaf'),function(_0x47056d){console[a22_0x3939('0x3e')]('Download\x20started');console[a22_0x3939('0x3e')]('filename:\x20'+_0x47056d[a22_0x3939('0xb0')]);console[a22_0x3939('0x3e')](a22_0x3939('0xb1')+_0x47056d[a22_0x3939('0x8b')]);});_0x459df0['on'](a22_0x3939('0xb2'),function complete(_0x1c5a98){'use strict';console[a22_0x3939('0x3e')](a22_0x3939('0xb3')+_0x1c5a98['_filename']+a22_0x3939('0xb4'));});_0x459df0['on'](a22_0x3939('0x77'),function(){console[a22_0x3939('0x3e')]('finished\x20youtube\x20downloading!');this[a22_0x3939('0x63')](_0x40967b)[a22_0x3939('0x5')](function(_0x40e4e6){if(_0x40e4e6){this[a22_0x3939('0x1c')]++;}this[a22_0x3939('0x56')]();}['bind'](this));}[a22_0x3939('0x37')](this));_0x459df0[a22_0x3939('0x8f')](fs[a22_0x3939('0x8e')](_0x40967b));}[a22_0x3939('0x59')](){console[a22_0x3939('0x3e')](a22_0x3939('0xb5'));if(this[a22_0x3939('0x1d')]){if(this[a22_0x3939('0x1f')][a22_0x3939('0x4e')]==0x0){fs[a22_0x3939('0x3f')](this[a22_0x3939('0x52')],JSON[a22_0x3939('0x54')](this[a22_0x3939('0xb6')]));let _0x44860f=a22_0x3939('0xb7')+'\x0d\x0a'+a22_0x3939('0xb8')+'\x0d\x0a';for(const _0x3deb4b in this[a22_0x3939('0x1e')]){const _0x1a83bc=this[a22_0x3939('0x1e')][_0x3deb4b][a22_0x3939('0xb9')];const _0x46e883=this['downloadFiles'][_0x3deb4b][a22_0x3939('0x5a')];const _0x1eea4d=_0x1a83bc['substring'](_0x1a83bc[a22_0x3939('0x5c')]('/')+0x1);let _0x2c1300=_0x1eea4d[a22_0x3939('0x5d')]('.')['slice'](0x0,-0x1)[a22_0x3939('0x5f')]('.');if(_0x46e883=='youtube_single'){_0x2c1300=_0x1a83bc;}_0x44860f+=a22_0x3939('0xba')+_0x2c1300+'.mp4'+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x3939('0x4a')]);fsExtra['copySync'](this['tempFolder'],this[a22_0x3939('0x4a')]);fsExtra[a22_0x3939('0x3f')](this[a22_0x3939('0x1a')],_0x44860f);fsExtra[a22_0x3939('0x50')](this[a22_0x3939('0x17')]);console[a22_0x3939('0x3e')](a22_0x3939('0xbb'));this['refreshPlayer']();}else{console['log'](a22_0x3939('0xbc'));this['currentFile']=0x0;setTimeout(function(){this[a22_0x3939('0x56')]();}[a22_0x3939('0x37')](this),0x1388);}}else{console[a22_0x3939('0x3e')](a22_0x3939('0xbd'));}}[a22_0x3939('0xbe')](){this['jsonrpcClient'](a22_0x3939('0xbf'),{'playlistid':0x1},function(_0x3bb63c){console['log'](a22_0x3939('0xc0'));console['log'](_0x3bb63c);this['jsonrpcClient']('Playlist.Add',{'item':{'file':a22_0x3939('0xc1')},'playlistid':0x1},function(_0x3bb63c){console['log'](a22_0x3939('0xc2'));console['log'](_0x3bb63c);this[a22_0x3939('0xc3')](a22_0x3939('0xc4'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x3bb63c){console[a22_0x3939('0x3e')](a22_0x3939('0xc5'));console[a22_0x3939('0x3e')](_0x3bb63c);}[a22_0x3939('0x37')](this));}[a22_0x3939('0x37')](this));}[a22_0x3939('0x37')](this));}[a22_0x3939('0xc6')](){exec(a22_0x3939('0xc7'),function(_0x4d199b){console[a22_0x3939('0x3e')](_0x4d199b);});}[a22_0x3939('0xc8')](){const _0xdc2f38=format(this[a22_0x3939('0xc9')],this[a22_0x3939('0x2c')]);console['log'](_0xdc2f38);request({'url':_0xdc2f38,'json':!![]},function(_0x348735,_0xb8e62b,_0x264e6f){if(_0x264e6f['length']>0x0){const _0x73bab6=_0x264e6f[0x0];const _0x120a5d=_0x73bab6[a22_0x3939('0xca')];const _0xeb1c05=_0x73bab6['header_active']==0x1;this[a22_0x3939('0xcb')](_0x120a5d);this['enableClock'](_0xeb1c05);}console[a22_0x3939('0x3e')](_0x264e6f);}[a22_0x3939('0x37')](this));}[a22_0x3939('0xcb')](_0x4a37bc){const _0x58d015=_0x4a37bc!=null&&_0x4a37bc!='';const _0x456e51=a22_0x3939('0xcc');const _0x3c452b=fsExtra[a22_0x3939('0x2b')](_0x456e51);console[a22_0x3939('0x3e')](a22_0x3939('0xcd')+_0x3c452b);const _0x448950=require('xml2js');const _0x3aac5c=_0x448950[a22_0x3939('0xce')];_0x3aac5c(_0x3c452b,function(_0x423b1c,_0x11ab43){console[a22_0x3939('0x3e')](a22_0x3939('0xcf'),_0x423b1c);console['log'](a22_0x3939('0xd0'),_0x11ab43);_0x11ab43[a22_0x3939('0xd1')][a22_0x3939('0xd2')][0x0][a22_0x3939('0xd3')][0x0]['_']=_0x4a37bc;const _0x316455=new _0x448950[(a22_0x3939('0xd4'))]();const _0x9493f5=_0x316455['buildObject'](_0x11ab43);console[a22_0x3939('0x3e')](a22_0x3939('0xd5'),_0x9493f5);fsExtra[a22_0x3939('0x3f')](_0x456e51,_0x9493f5);});exec(a22_0x3939('0xd6'),function(_0x4e120a){console[a22_0x3939('0x3e')](_0x4e120a);});this[a22_0x3939('0xc3')](a22_0x3939('0xd7'),{'setting':a22_0x3939('0xd8'),'value':_0x58d015},function(_0x50bc05){console[a22_0x3939('0x3e')](a22_0x3939('0xd9'));console[a22_0x3939('0x3e')](_0x50bc05);}[a22_0x3939('0x37')](this));}[a22_0x3939('0xda')](_0x5bc61e){this[a22_0x3939('0xc3')]('Settings.SetSettingValue',{'setting':a22_0x3939('0xdb'),'value':_0x5bc61e},function(_0x2fa882){console[a22_0x3939('0x3e')](a22_0x3939('0xdc'));console[a22_0x3939('0x3e')](_0x2fa882);}[a22_0x3939('0x37')](this));}['jsonrpcClient'](_0x32484f,_0x217145,_0x45910c){const _0x34720e={'jsonrpc':'2.0','method':_0x32484f,'params':_0x217145,'id':0x1};this[a22_0x3939('0x26')][a22_0x3939('0x3c')](this['kodiHost']+a22_0x3939('0xdd'),_0x34720e,![],{'user':this[a22_0x3939('0x22')],'pass':this[a22_0x3939('0x24')]})[a22_0x3939('0x5')](function(_0x107537){_0x45910c(_0x107537);})[a22_0x3939('0x45')](function(_0x110f53){});}}exports[a22_0x3939('0xde')]=SyncPlaylistsService;