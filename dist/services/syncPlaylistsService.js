var a25_0x30a3=['duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','image','video','createWriteStream','1/2','-loop','glob','-c:v','libx264','yuv420p','scale=1920:1080','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','info','_filename','size:\x20','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','finishProcess','Finishing','this.playListFile:\x20','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','refreshPlayer','jsonrpcClient','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','rss','setRss','turnOffTV','CECStandby()','turnOnTV','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','feed','Builder','buildObject','xml:\x20%j','writeFileSync','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','enableClock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','jsonrpcClient\x20options','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','defineProperty','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','fs-extra','request-progress','child_process','spawn','exec','is-image','string-template','youtube-dl','config.json','package.json','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','downloadFiles','failDownloadFiles','newPlayList','kodiHost','kodiUser','lulo','.lulo123.','forceReload','httpClientService','playerService','PlayerService','init','config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodiPassword','checkDependencies','registerClient','updateSettings','getStatus','bind','kodi','playlist','getItems','deviceUuid','stringify','version','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','player','getCurrentlyPlayingVideo','item','label','reportStatus','reportStatus\x20playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','loadMediaList','playListServiceURL','loadMediaList:\x20','playlistChanged','hasPlayListChanged','emptyDirSync','push','length','download','existsSync','playListFile','removeSync','\x20of\x20','media_type','substring','lastIndexOf','slice','join','split','youtube_single','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','media','track','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','data','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback'];(function(_0x514b6e,_0x4065e4){var _0x13595b=function(_0x135acb){while(--_0x135acb){_0x514b6e['push'](_0x514b6e['shift']());}};_0x13595b(++_0x4065e4);}(a25_0x30a3,0x145));var a25_0x570d=function(_0x58f1c5,_0xda2e08){_0x58f1c5=_0x58f1c5-0x0;var _0x4e57ea=a25_0x30a3[_0x58f1c5];return _0x4e57ea;};'use strict';var __awaiter=this&&this[a25_0x570d('0x0')]||function(_0x588de8,_0x31a78a,_0x33a39a,_0x550537){function _0x406c22(_0xcb3904){return _0xcb3904 instanceof _0x33a39a?_0xcb3904:new _0x33a39a(function(_0x1d9d4d){_0x1d9d4d(_0xcb3904);});}return new(_0x33a39a||(_0x33a39a=Promise))(function(_0x40fc6d,_0x2d9aa3){function _0x17921f(_0x557640){try{_0x598176(_0x550537[a25_0x570d('0x1')](_0x557640));}catch(_0x1a18a5){_0x2d9aa3(_0x1a18a5);}}function _0x2f4dc8(_0x5c38f7){try{_0x598176(_0x550537[a25_0x570d('0x2')](_0x5c38f7));}catch(_0x52cbc8){_0x2d9aa3(_0x52cbc8);}}function _0x598176(_0x459e6d){_0x459e6d[a25_0x570d('0x3')]?_0x40fc6d(_0x459e6d[a25_0x570d('0x4')]):_0x406c22(_0x459e6d[a25_0x570d('0x4')])[a25_0x570d('0x5')](_0x17921f,_0x2f4dc8);}_0x598176((_0x550537=_0x550537[a25_0x570d('0x6')](_0x588de8,_0x31a78a||[]))[a25_0x570d('0x1')]());});};Object[a25_0x570d('0x7')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a25_0x570d('0x8'));const playerService_1=require(a25_0x570d('0x9'));const mediainfo=require(a25_0x570d('0xa'));const fs=require('fs');const url=require(a25_0x570d('0xb'));const http=require('http');const fsExtra=require(a25_0x570d('0xc'));const request=require('request');const progress=require(a25_0x570d('0xd'));const spawn=require(a25_0x570d('0xe'))[a25_0x570d('0xf')];const exec=require(a25_0x570d('0xe'))[a25_0x570d('0x10')];const isImage=require(a25_0x570d('0x11'));const format=require(a25_0x570d('0x12'));const os=require('os');const youtubedl=require(a25_0x570d('0x13'));const uuidv4=require('uuid/v4');const configFile=a25_0x570d('0x14');const contextFile=a25_0x570d('0x15');const urlExists=require('url-exists');const kodi_rpc=require(a25_0x570d('0x16'));const Downloader=require(a25_0x570d('0x17'));class SyncPlaylistsService{constructor(){this[a25_0x570d('0x18')]=a25_0x570d('0x19');this[a25_0x570d('0x1a')]=this['mediaFolder']+a25_0x570d('0x1b');this[a25_0x570d('0x1c')]=this[a25_0x570d('0x18')]+'files/';this['playListFile']=this[a25_0x570d('0x18')]+a25_0x570d('0x1d');this[a25_0x570d('0x1e')]=this[a25_0x570d('0x1c')]+a25_0x570d('0x1f');this[a25_0x570d('0x20')]=0x0;this['playlistChanged']=![];this[a25_0x570d('0x21')]=[];this[a25_0x570d('0x22')]=[];this[a25_0x570d('0x23')]={};this[a25_0x570d('0x24')]='http://localhost';this[a25_0x570d('0x25')]=a25_0x570d('0x26');this['kodiPassword']=a25_0x570d('0x27');this[a25_0x570d('0x28')]=![];this[a25_0x570d('0x29')]=new HttpClientService_1['HttpClientService']();this[a25_0x570d('0x2a')]=new playerService_1[(a25_0x570d('0x2b'))]();}[a25_0x570d('0x2c')](){this[a25_0x570d('0x2d')]=JSON[a25_0x570d('0x2e')](fs[a25_0x570d('0x2f')](configFile));this[a25_0x570d('0x30')]=JSON[a25_0x570d('0x2e')](fs[a25_0x570d('0x2f')](contextFile));this['playerId']=this[a25_0x570d('0x2d')][a25_0x570d('0x31')];this[a25_0x570d('0x32')]=process[a25_0x570d('0x33')][a25_0x570d('0x34')]+a25_0x570d('0x35');this['playListServiceURL']=this[a25_0x570d('0x32')]+a25_0x570d('0x36');this[a25_0x570d('0x37')]=this['baseURL']+a25_0x570d('0x38');this['kodi']=new kodi_rpc({'url':this['kodiHost'],'user':this['kodiUser'],'password':this[a25_0x570d('0x39')]});this[a25_0x570d('0x3a')]();this[a25_0x570d('0x3b')]();this['checkFolders']();this['loadMediaList']();this[a25_0x570d('0x3c')]();setInterval(function(){this[a25_0x570d('0x3d')]();}[a25_0x570d('0x3e')](this),0x2710);setInterval(function(){this[a25_0x570d('0x3b')]();}[a25_0x570d('0x3e')](this),0x493e0);}[a25_0x570d('0x3a')](){}[a25_0x570d('0x3b')](){this[a25_0x570d('0x3f')][a25_0x570d('0x40')][a25_0x570d('0x41')](0x1)[a25_0x570d('0x5')](function(_0x36bfbe){const _0x47eadb=JSON['stringify'](_0x36bfbe);const _0x2f82a1={'player_id':this[a25_0x570d('0x31')],'device_uuid':this[a25_0x570d('0x2d')][a25_0x570d('0x42')],'network_info':JSON['stringify'](os['networkInterfaces']()),'firmware_info':JSON[a25_0x570d('0x43')](this[a25_0x570d('0x30')][a25_0x570d('0x44')]),'playlist':_0x47eadb,'playing_item':'','status':0x0};this[a25_0x570d('0x29')][a25_0x570d('0x45')](a25_0x570d('0x46'),_0x2f82a1,![])[a25_0x570d('0x5')](function(_0x5292d5){console[a25_0x570d('0x47')](a25_0x570d('0x48')+Date());})[a25_0x570d('0x49')](function(_0x43504b){});console[a25_0x570d('0x47')](_0x2f82a1);}[a25_0x570d('0x3e')](this));const _0x155fb0=this['config']['deviceUuid'];if(!_0x155fb0||_0x155fb0==''){this[a25_0x570d('0x2d')][a25_0x570d('0x42')]=uuidv4();this['config']={'deviceUuid':this[a25_0x570d('0x2d')][a25_0x570d('0x42')],'playerId':this['config'][a25_0x570d('0x31')]};fs['writeFileSync'](configFile,JSON[a25_0x570d('0x43')](this[a25_0x570d('0x2d')]));}}[a25_0x570d('0x3d')](){console[a25_0x570d('0x47')](a25_0x570d('0x3d'));this[a25_0x570d('0x3f')][a25_0x570d('0x4a')][a25_0x570d('0x4b')]()[a25_0x570d('0x5')](function(_0x512a5f){const _0xb83542=_0x512a5f[a25_0x570d('0x4c')][a25_0x570d('0x4d')];this[a25_0x570d('0x4e')](_0xb83542);}[a25_0x570d('0x3e')](this))[a25_0x570d('0x49')](function(_0x2d21c7){console['log'](_0x2d21c7);this[a25_0x570d('0x4e')](JSON[a25_0x570d('0x43')](_0x2d21c7));}['bind'](this));}[a25_0x570d('0x4e')](_0x3a45b6){console['log'](a25_0x570d('0x4f')+_0x3a45b6);const _0x4a673c={'player_id':this[a25_0x570d('0x31')],'device_uuid':this[a25_0x570d('0x2d')][a25_0x570d('0x42')],'status':_0x3a45b6!=''&&_0x3a45b6!=null?0x1:0x0,'playing_item':_0x3a45b6};this[a25_0x570d('0x29')][a25_0x570d('0x45')](a25_0x570d('0x50'),_0x4a673c,![])['then'](function(_0x567a02){console[a25_0x570d('0x47')](a25_0x570d('0x51'));})['catch'](function(_0x4ea39a){});}['checkFolders'](){fsExtra['ensureDir'](this['mediaFolder'],_0x172397=>{});fsExtra[a25_0x570d('0x52')](this[a25_0x570d('0x1a')],_0x4524d6=>{});fsExtra[a25_0x570d('0x52')](this[a25_0x570d('0x1c')],_0x58746f=>{});}[a25_0x570d('0x53')](){const _0x9d9406=format(this[a25_0x570d('0x54')],this[a25_0x570d('0x31')]);console[a25_0x570d('0x47')](_0x9d9406);request({'url':_0x9d9406,'json':!![]},function(_0x3dd4fd,_0x417b3a,_0x50c655){console['log'](a25_0x570d('0x55'));this[a25_0x570d('0x23')]=_0x50c655;this[a25_0x570d('0x56')]=this[a25_0x570d('0x57')]();fsExtra[a25_0x570d('0x58')](this[a25_0x570d('0x1a')]);this[a25_0x570d('0x21')]=[];this['failDownloadFiles']=[];this[a25_0x570d('0x20')]=0x0;for(const _0x14443a in _0x50c655){this[a25_0x570d('0x21')][a25_0x570d('0x59')](_0x50c655[_0x14443a]);}console[a25_0x570d('0x47')]('Total:\x20'+this[a25_0x570d('0x21')]['length']);if(this[a25_0x570d('0x21')][a25_0x570d('0x5a')]>0x0){this[a25_0x570d('0x5b')]();}}['bind'](this));}['reloadMediaList'](){this[a25_0x570d('0x28')]=!![];if(fsExtra[a25_0x570d('0x5c')](this[a25_0x570d('0x1a')])){fsExtra['emptyDirSync'](this[a25_0x570d('0x1a')]);}if(fsExtra[a25_0x570d('0x5c')](this[a25_0x570d('0x1c')])){fsExtra[a25_0x570d('0x58')](this['filesFolder']);}if(!fsExtra['existsSync'](this[a25_0x570d('0x5d')])){fsExtra[a25_0x570d('0x5e')](this[a25_0x570d('0x5d')]);}if(!fsExtra[a25_0x570d('0x5c')](this[a25_0x570d('0x1e')])){fsExtra[a25_0x570d('0x5e')](this[a25_0x570d('0x1e')]);}this['loadMediaList']();}[a25_0x570d('0x57')](){const _0x2226e2=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a25_0x570d('0x5c')](this['playListFile'])){return!![];}else{const _0x1bf2ff=fsExtra['readFileSync'](this[a25_0x570d('0x5d')])['toString']();if(_0x1bf2ff!=_0x2226e2){return!![];}}}catch(_0x4fa7b5){console[a25_0x570d('0x47')](_0x4fa7b5);}return![];}['download'](){console[a25_0x570d('0x47')]('this.currentFile:\x20'+this[a25_0x570d('0x20')]+a25_0x570d('0x5f')+this[a25_0x570d('0x21')][a25_0x570d('0x5a')]);if(this[a25_0x570d('0x20')]>=this[a25_0x570d('0x21')]['length']){this['finishProcess']();return;}const _0x255f35=String(this['downloadFiles'][this[a25_0x570d('0x20')]]['path']);const _0x556ae3=this[a25_0x570d('0x21')][this[a25_0x570d('0x20')]][a25_0x570d('0x60')];let _0x23bb8c=_0x255f35[a25_0x570d('0x61')](_0x255f35[a25_0x570d('0x62')]('/')+0x1);const _0x2abd79=_0x23bb8c['split']('.')[a25_0x570d('0x63')](0x0,-0x1)[a25_0x570d('0x64')]('.');let _0x3d9ae6=this['baseURL']+_0x255f35;const _0x1f0812=_0x3d9ae6[a25_0x570d('0x65')]('.')[a25_0x570d('0x63')](0x0,-0x1)[a25_0x570d('0x64')]('.');if(_0x556ae3==a25_0x570d('0x66')){_0x23bb8c=_0x23bb8c+'.mp4';}else if(_0x556ae3=='image'){_0x23bb8c=_0x2abd79+a25_0x570d('0x67');_0x3d9ae6=_0x1f0812+'.mp4';}console[a25_0x570d('0x47')](a25_0x570d('0x68'));console[a25_0x570d('0x47')](_0x255f35);console[a25_0x570d('0x47')](_0x556ae3);console[a25_0x570d('0x47')](_0x23bb8c);console['log'](_0x3d9ae6);console['log'](_0x2abd79);console[a25_0x570d('0x47')](_0x1f0812);console[a25_0x570d('0x47')]('**********+');if(fsExtra['existsSync'](this[a25_0x570d('0x1a')]+_0x23bb8c)){this['checkVideo'](this[a25_0x570d('0x1a')]+_0x23bb8c)['then'](function(_0x3f5df6){if(_0x3f5df6){this['currentFile']++;}else{this[a25_0x570d('0x56')]=!![];}this[a25_0x570d('0x5b')]();}[a25_0x570d('0x3e')](this));}else if(fsExtra[a25_0x570d('0x5c')](this['filesFolder']+_0x23bb8c)){this[a25_0x570d('0x69')](this[a25_0x570d('0x1c')]+_0x23bb8c)[a25_0x570d('0x5')](function(_0x1f1df6){if(_0x1f1df6){fsExtra[a25_0x570d('0x6a')](this[a25_0x570d('0x1c')]+_0x23bb8c,this[a25_0x570d('0x1a')]+_0x23bb8c);this[a25_0x570d('0x20')]++;}else{this['playlistChanged']=!![];}this['download']();}[a25_0x570d('0x3e')](this));}else{console[a25_0x570d('0x47')](a25_0x570d('0x6b')+_0x3d9ae6);this['playlistChanged']=!![];if(_0x556ae3==a25_0x570d('0x66')){this[a25_0x570d('0x6c')](_0x255f35);}else{this[a25_0x570d('0x6d')](_0x3d9ae6,_0x23bb8c,_0x556ae3);}}}[a25_0x570d('0x69')](_0x5e7158){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x570d('0x47')]('videoFile:\x20'+_0x5e7158);const _0x2fe243=yield mediainfo(_0x5e7158)[a25_0x570d('0x49')](_0x602cc6=>{console[a25_0x570d('0x47')](_0x602cc6);fsExtra['removeSync'](_0x5e7158);return![];});const _0x5bfc7a=_0x2fe243[a25_0x570d('0x6e')]['track'][a25_0x570d('0x5a')]>0x1&&_0x2fe243[a25_0x570d('0x6e')][a25_0x570d('0x6f')][0x1]['@type']==a25_0x570d('0x70');if(!_0x5bfc7a){fsExtra[a25_0x570d('0x5e')](_0x5e7158);}console[a25_0x570d('0x47')](a25_0x570d('0x71')+_0x5bfc7a);return _0x5bfc7a;});}['downloader'](_0xccf513,_0x4dfe29,_0x3837eb){const _0x52c3ee=new Downloader();console['log'](_0xccf513);console[a25_0x570d('0x47')](_0x4dfe29);console['log'](_0x3837eb);const _0x2a18fd=_0x52c3ee['download'](_0xccf513,this['tempFolder']+_0x4dfe29);urlExists(_0xccf513,function(_0x5f3e79,_0x3effb2){if(_0x3effb2){if(this[a25_0x570d('0x22')][a25_0x570d('0x72')](this['currentFile'])){const _0x51ca93=this[a25_0x570d('0x22')][a25_0x570d('0x73')](this[a25_0x570d('0x20')]);if(_0x51ca93>-0x1){this[a25_0x570d('0x22')][a25_0x570d('0x74')](_0x51ca93,0x1);}}console['log'](a25_0x570d('0x75')+_0xccf513);_0x2a18fd[a25_0x570d('0x76')]();}else{if(!this['failDownloadFiles'][a25_0x570d('0x72')](this[a25_0x570d('0x20')])){this[a25_0x570d('0x22')][a25_0x570d('0x59')](this[a25_0x570d('0x20')]);}console[a25_0x570d('0x47')](a25_0x570d('0x77')+_0xccf513);this['currentFile']++;this[a25_0x570d('0x5b')]();}}[a25_0x570d('0x3e')](this));_0x2a18fd['on'](a25_0x570d('0x76'),function(_0x2a18fd){console[a25_0x570d('0x47')](a25_0x570d('0x78')+_0xccf513);});_0x2a18fd['on'](a25_0x570d('0x79'),function(_0x2a18fd){console[a25_0x570d('0x47')](a25_0x570d('0x7a'));this[a25_0x570d('0x5b')]();}[a25_0x570d('0x3e')](this));_0x2a18fd['on']('end',function(_0x2a18fd){console[a25_0x570d('0x47')](a25_0x570d('0x7b'));console['log'](a25_0x570d('0x7c')+_0x4dfe29);console[a25_0x570d('0x47')](a25_0x570d('0x7d')+_0x3837eb);this[a25_0x570d('0x69')](this[a25_0x570d('0x1a')]+_0x4dfe29)[a25_0x570d('0x5')](function(_0x31b34a){if(_0x31b34a){this[a25_0x570d('0x20')]++;}this['download']();}[a25_0x570d('0x3e')](this));}[a25_0x570d('0x3e')](this));_0x2a18fd['on'](a25_0x570d('0x7e'),function(_0x2a18fd){console[a25_0x570d('0x47')](a25_0x570d('0x7e'));});_0x2a18fd['on'](a25_0x570d('0x7f'),function(_0x2a18fd){console[a25_0x570d('0x47')](a25_0x570d('0x7f'));});_0x2a18fd['on']('retry',function(_0x2a18fd){console[a25_0x570d('0x47')](a25_0x570d('0x80'));});}[a25_0x570d('0x81')](_0x419850,_0x34d86f,_0x212f9a,_0x4b46ec){console['log'](a25_0x570d('0x81'));console[a25_0x570d('0x47')](_0x419850);const _0x56328b=!![];let _0x135f12=0x0;const _0x7f71f3='';console['log'](a25_0x570d('0x82')+_0x419850+a25_0x570d('0x83')+_0x34d86f);if(_0x135f12){if(_0x135f12>0x5){_0x4b46ec(a25_0x570d('0x84'),_0x419850,_0x212f9a,null);return;}}else{_0x135f12=0x0;}const _0x4bec93=this['tempFolder']+_0x34d86f;let _0x2b0b46;if(_0x4b46ec===undefined){console['log'](a25_0x570d('0x85')+_0x419850+a25_0x570d('0x83')+_0x4bec93);_0x4b46ec=function(_0x25bc3a,_0x28abfe){console[a25_0x570d('0x47')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x25bc3a,_0x28abfe);};}http[a25_0x570d('0x86')][a25_0x570d('0x87')]=0x64;const _0x401203={'host':url[a25_0x570d('0x2e')](_0x419850)[a25_0x570d('0x88')],'port':0x50,'path':url[a25_0x570d('0x2e')](_0x419850)[a25_0x570d('0x89')],'agent':![]};const _0x30a704=http[a25_0x570d('0x8a')](_0x401203,function(_0x2d6e02){let _0x494b98=0x0;let _0x496dbb=0x0;function _0x94f098(){if(_0x494b98===undefined){console[a25_0x570d('0x47')](_0x34d86f+a25_0x570d('0x8b')+_0x496dbb+'/'+'?');}const _0x495315=_0x496dbb/_0x494b98*0x64;console['log'](_0x34d86f+a25_0x570d('0x8c')+_0x495315+'%\x09'+_0x496dbb+'/'+_0x494b98);}console[a25_0x570d('0x47')](_0x34d86f+'\x20'+_0x2d6e02[a25_0x570d('0x8d')]);switch(_0x2d6e02[a25_0x570d('0x8d')]){case 0xc8:_0x494b98=_0x2d6e02[a25_0x570d('0x8e')][a25_0x570d('0x8f')]||_0x7f71f3;fs[a25_0x570d('0x90')](_0x4bec93,function(_0x5d7d28,_0x2a4792){if(!_0x5d7d28){console[a25_0x570d('0x47')](a25_0x570d('0x91')+_0x4bec93);if(_0x2a4792[a25_0x570d('0x92')]==_0x494b98){console[a25_0x570d('0x47')](a25_0x570d('0x93')+_0x494b98+')');console['log'](a25_0x570d('0x94'));}else{console['log'](a25_0x570d('0x95')+_0x2a4792[a25_0x570d('0x92')]+a25_0x570d('0x96')+_0x494b98+')');}}_0x2b0b46=fs['createWriteStream'](_0x4bec93);_0x2d6e02[a25_0x570d('0x97')](_0x2b0b46);_0x2d6e02['on'](a25_0x570d('0x98'),function(_0x751e01){_0x496dbb+=_0x751e01[a25_0x570d('0x5a')];_0x94f098();});_0x30a704['on'](a25_0x570d('0x79'),function(_0x5d7d28){console[a25_0x570d('0x47')](a25_0x570d('0x99'));console[a25_0x570d('0x47')](_0x5d7d28);});_0x2b0b46['on'](a25_0x570d('0x9a'),function(){console[a25_0x570d('0x47')](a25_0x570d('0x9b')+_0x419850+a25_0x570d('0x83')+_0x34d86f);_0x4b46ec(null,_0x34d86f,_0x212f9a,_0x34d86f);}['bind'](this));});break;case 0x12e:const _0x102e21=_0x2d6e02[a25_0x570d('0x8e')][a25_0x570d('0x9c')];console[a25_0x570d('0x47')](a25_0x570d('0x9d')+_0x419850+a25_0x570d('0x83')+_0x102e21);if(_0x135f12<0x5){this['downloadHTTPFile'](_0x102e21,_0x34d86f,_0x4b46ec,_0x135f12++);}else{console[a25_0x570d('0x79')](a25_0x570d('0x9e')+_0x419850+'.');_0x4b46ec(a25_0x570d('0x9f'),null,null,null);}return;case 0x194:console[a25_0x570d('0x47')]('File\x20Not\x20Found\x20'+_0x419850);default:console[a25_0x570d('0x47')](a25_0x570d('0xa0')+_0x419850+a25_0x570d('0xa1')+_0x2d6e02[a25_0x570d('0x8d')]);_0x30a704[a25_0x570d('0xa2')]();_0x4b46ec(_0x2d6e02[a25_0x570d('0x8d')],null,null,null);return;}})['on'](a25_0x570d('0x79'),function(_0x35c01b){console[a25_0x570d('0x47')](a25_0x570d('0xa3')+_0x419850+'\x20'+_0x35c01b['message']);_0x4b46ec(_0x35c01b,null,null,null);});}[a25_0x570d('0xa4')](_0x42366f,_0x439223,_0x88f5cd,_0x4515e4){console[a25_0x570d('0x47')](a25_0x570d('0xa4'));console[a25_0x570d('0x47')](_0x42366f);console[a25_0x570d('0x47')](_0x439223);console[a25_0x570d('0x47')](_0x88f5cd);console[a25_0x570d('0x47')](_0x4515e4);if(_0x88f5cd=='image'){const _0x5841f1=this[a25_0x570d('0x21')][this[a25_0x570d('0x20')]]['duration']!=null?this['downloadFiles'][this[a25_0x570d('0x20')]][a25_0x570d('0xa5')]:0x1e;this[a25_0x570d('0xa6')](_0x4515e4,_0x5841f1);}else if(_0x88f5cd=='video'){if(_0x42366f==null&&_0x439223!=''){this['currentFile']++;}this[a25_0x570d('0x5b')]();}console[a25_0x570d('0x47')](this[a25_0x570d('0x20')]);}[a25_0x570d('0xa7')](_0x3f2887,_0x145507,_0x328906){progress(request(_0x3f2887),{})['on'](a25_0x570d('0xa8'),function(_0x2c13d7){console[a25_0x570d('0x47')](_0x2c13d7);})['on']('error',function(_0x148800){console['log'](a25_0x570d('0xa9'));this[a25_0x570d('0x5b')]();})['on'](a25_0x570d('0x7b'),function(){console[a25_0x570d('0x47')](a25_0x570d('0x7c')+_0x145507);console[a25_0x570d('0x47')]('mediaType:\x20'+_0x328906);if(_0x328906==a25_0x570d('0xaa')){const _0x4b068f=this[a25_0x570d('0x21')][this[a25_0x570d('0x20')]][a25_0x570d('0xa5')]!=null?this[a25_0x570d('0x21')][this[a25_0x570d('0x20')]][a25_0x570d('0xa5')]:0x1e;this[a25_0x570d('0xa6')](_0x145507,_0x4b068f);}else if(_0x328906==a25_0x570d('0xab')){this[a25_0x570d('0x20')]++;this[a25_0x570d('0x5b')]();}}['bind'](this))['pipe'](fs[a25_0x570d('0xac')](this[a25_0x570d('0x1a')]+_0x145507));}[a25_0x570d('0xa6')](_0x6ef82,_0x58466e=0x1e){const _0x1f1feb=this[a25_0x570d('0x1a')]+_0x6ef82;console[a25_0x570d('0x47')](_0x1f1feb);console['log'](_0x6ef82);const _0x277c10=_0x6ef82[a25_0x570d('0x65')]('.')['slice'](0x0,-0x1)['join']('.');const _0x4f20d0='ffmpeg';const _0x13a5f7=['-y','-r',a25_0x570d('0xad'),a25_0x570d('0xae'),'1','-pattern_type',a25_0x570d('0xaf'),'-i',_0x1f1feb,'-t',String(_0x58466e),a25_0x570d('0xb0'),a25_0x570d('0xb1'),'-pix_fmt',a25_0x570d('0xb2'),'-r','25','-vf',a25_0x570d('0xb3'),this[a25_0x570d('0x1a')]+_0x277c10+'.mp4'];const _0x215e5e=spawn(_0x4f20d0,_0x13a5f7);_0x215e5e['stdout']['on'](a25_0x570d('0x98'),function(_0x14c061){console['log']('Converting\x20'+_0x1f1feb);});_0x215e5e['stderr']['on'](a25_0x570d('0x98'),function(_0x3b99cd){console[a25_0x570d('0x47')]('stderr:\x20'+_0x3b99cd);}[a25_0x570d('0x3e')](this));_0x215e5e['on'](a25_0x570d('0xb4'),function(){console['log'](a25_0x570d('0xb5'));this['currentFile']++;this[a25_0x570d('0x5b')]();}['bind'](this));}[a25_0x570d('0x6c')](_0x476790){const _0x184427=this[a25_0x570d('0x1a')]+'/'+_0x476790+'.mp4';const _0x366af6=a25_0x570d('0xb6')+_0x476790;console['log'](a25_0x570d('0xb7')+_0x366af6);console[a25_0x570d('0x47')](a25_0x570d('0xb8')+_0x184427);const _0x1e0a28=youtubedl(_0x366af6,[a25_0x570d('0xb9'),'--no-check-certificate'],{'cwd':__dirname});_0x1e0a28['on'](a25_0x570d('0xba'),function(_0x1b1421){console[a25_0x570d('0x47')]('Download\x20started');console[a25_0x570d('0x47')]('filename:\x20'+_0x1b1421[a25_0x570d('0xbb')]);console['log'](a25_0x570d('0xbc')+_0x1b1421[a25_0x570d('0x92')]);});_0x1e0a28['on'](a25_0x570d('0xbd'),function complete(_0x1657a9){'use strict';console[a25_0x570d('0x47')](a25_0x570d('0xbe')+_0x1657a9[a25_0x570d('0xbb')]+a25_0x570d('0xbf'));});_0x1e0a28['on'](a25_0x570d('0x7b'),function(){console[a25_0x570d('0x47')](a25_0x570d('0xc0'));this[a25_0x570d('0x69')](_0x184427)[a25_0x570d('0x5')](function(_0x4a2dfc){if(_0x4a2dfc){this[a25_0x570d('0x20')]++;}this[a25_0x570d('0x5b')]();}[a25_0x570d('0x3e')](this));}[a25_0x570d('0x3e')](this));_0x1e0a28[a25_0x570d('0x97')](fs[a25_0x570d('0xac')](_0x184427));}[a25_0x570d('0xc1')](){console[a25_0x570d('0x47')](a25_0x570d('0xc2'));if(this[a25_0x570d('0x56')]){if(this[a25_0x570d('0x22')][a25_0x570d('0x5a')]==0x0){console[a25_0x570d('0x47')](a25_0x570d('0xc3')+this[a25_0x570d('0x5d')]);fs['writeFileSync'](this[a25_0x570d('0x5d')],JSON[a25_0x570d('0x43')](this['newPlayList']));let _0x2c7ad0=a25_0x570d('0xc4')+'\x0d\x0a'+a25_0x570d('0xc5')+'\x0d\x0a';for(const _0x3a51cf in this['downloadFiles']){const _0x5d4421=this['downloadFiles'][_0x3a51cf][a25_0x570d('0xc6')];const _0x2a1a4a=this[a25_0x570d('0x21')][_0x3a51cf]['media_type'];const _0x4ad559=_0x5d4421[a25_0x570d('0x61')](_0x5d4421['lastIndexOf']('/')+0x1);let _0x53e766=_0x4ad559[a25_0x570d('0x65')]('.')[a25_0x570d('0x63')](0x0,-0x1)[a25_0x570d('0x64')]('.');if(_0x2a1a4a=='youtube_single'){_0x53e766=_0x5d4421;}_0x2c7ad0+=a25_0x570d('0xc7')+_0x53e766+a25_0x570d('0x67')+'\x0d\x0a';console[a25_0x570d('0x47')](a25_0x570d('0xc8')+_0x2c7ad0);}console['log']('m3uContent:\x20'+_0x2c7ad0);fsExtra['emptyDirSync'](this[a25_0x570d('0x1c')]);console['log'](a25_0x570d('0xc9')+this[a25_0x570d('0x1a')]);fsExtra[a25_0x570d('0x6a')](this['tempFolder'],this[a25_0x570d('0x1c')]);console[a25_0x570d('0x47')](a25_0x570d('0xca')+this[a25_0x570d('0x1e')]);fsExtra['writeFileSync'](this[a25_0x570d('0x1e')],_0x2c7ad0);console['log'](a25_0x570d('0xcb')+this['tempFolder']);fsExtra['emptyDirSync'](this[a25_0x570d('0x1a')]);console[a25_0x570d('0x47')](a25_0x570d('0xcc'));this[a25_0x570d('0xcd')]();}else{console[a25_0x570d('0x47')](a25_0x570d('0xce'));this[a25_0x570d('0x20')]=0x0;setTimeout(function(){this[a25_0x570d('0x5b')]();}[a25_0x570d('0x3e')](this),0x1388);}}else{console[a25_0x570d('0x47')]('No\x20playlist\x20changes.');}}[a25_0x570d('0xcf')](){this[a25_0x570d('0xd0')]('Playlist.Clear',{'playlistid':0x1},function(_0x415907){console['log'](a25_0x570d('0xd1'));console[a25_0x570d('0x47')](_0x415907);this[a25_0x570d('0xd0')](a25_0x570d('0xd2'),{'item':{'file':a25_0x570d('0xd3')},'playlistid':0x1},function(_0x415907){console[a25_0x570d('0x47')]('Playlist.Added');console[a25_0x570d('0x47')](_0x415907);this[a25_0x570d('0xd0')](a25_0x570d('0xd4'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x415907){console[a25_0x570d('0x47')](a25_0x570d('0xd5'));console[a25_0x570d('0x47')](_0x415907);this[a25_0x570d('0xd6')](a25_0x570d('0xd7'));}['bind'](this));}[a25_0x570d('0x3e')](this));}[a25_0x570d('0x3e')](this));}[a25_0x570d('0xcd')](){console['log'](a25_0x570d('0xd8'));exec(a25_0x570d('0xd9'),function(_0x4e7faa){console[a25_0x570d('0x47')](_0x4e7faa);});}['updateSettings'](){const _0x2cff2e=format(this[a25_0x570d('0x37')],this[a25_0x570d('0x31')]);console[a25_0x570d('0x47')](_0x2cff2e);request({'url':_0x2cff2e,'json':!![]},function(_0x2fdbf4,_0x1c29d7,_0x37f3e5){if(_0x37f3e5[a25_0x570d('0x5a')]>0x0){const _0x51d88b=_0x37f3e5[0x0];const _0xc417f0=_0x51d88b[a25_0x570d('0xda')];const _0x18da16=_0x51d88b['header_active']==0x1;this[a25_0x570d('0xdb')](_0xc417f0);this['enableClock'](_0x18da16);this['registerClient']();}console[a25_0x570d('0x47')](_0x37f3e5);}[a25_0x570d('0x3e')](this));}[a25_0x570d('0xdc')](){this['kodiCommandClient'](a25_0x570d('0xdd'));}[a25_0x570d('0xde')](){this['kodiCommandClient']('CECActivateSource()');}[a25_0x570d('0xdb')](_0x2d1f86){const _0xfaa419=_0x2d1f86!=null&&_0x2d1f86!='';const _0x2d2033=a25_0x570d('0xdf');if(fsExtra['existsSync'](_0x2d2033)){const _0xe0f650=fsExtra[a25_0x570d('0x2f')](_0x2d2033);console[a25_0x570d('0x47')](a25_0x570d('0xe0')+_0xe0f650);const _0x132e7e=require('xml2js');const _0x58c845=_0x132e7e[a25_0x570d('0xe1')];_0x58c845(_0xe0f650,function(_0x2ad916,_0x294b33){console[a25_0x570d('0x47')](a25_0x570d('0xe2'),_0x2ad916);console['log'](a25_0x570d('0xe3'),_0x294b33);if(!_0x2d1f86||_0x2d1f86==null||_0x2d1f86==''){_0x2d1f86=a25_0x570d('0xe4');}_0x294b33[a25_0x570d('0xe5')]['set'][0x0][a25_0x570d('0xe6')][0x0]['_']=_0x2d1f86;const _0x29d7f5=new _0x132e7e[(a25_0x570d('0xe7'))]();const _0x550974=_0x29d7f5[a25_0x570d('0xe8')](_0x294b33);console[a25_0x570d('0x47')](a25_0x570d('0xe9'),_0x550974);fsExtra[a25_0x570d('0xea')](_0x2d2033,_0x550974);});this[a25_0x570d('0xd6')](a25_0x570d('0xeb'));this[a25_0x570d('0xd0')](a25_0x570d('0xec'),{'setting':a25_0x570d('0xed'),'value':_0xfaa419},function(_0x3ef085){console['log']('setRss:');console[a25_0x570d('0x47')](_0x3ef085);}[a25_0x570d('0x3e')](this));}}[a25_0x570d('0xee')](_0x5376fa){this[a25_0x570d('0xd0')]('Settings.SetSettingValue',{'setting':'videoplayer.usedisplayasclock','value':_0x5376fa},function(_0x45c01f){console[a25_0x570d('0x47')](a25_0x570d('0xef'));console['log'](_0x45c01f);}[a25_0x570d('0x3e')](this));}[a25_0x570d('0xd6')](_0x353d1f){exec(a25_0x570d('0xf0')+_0x353d1f+'\x22',function(_0x2ef4d9){console[a25_0x570d('0x47')](_0x2ef4d9);});}[a25_0x570d('0xd0')](_0x1b988e,_0x217d60,_0x539398){const _0x561489={'jsonrpc':a25_0x570d('0xf1'),'method':_0x1b988e,'params':_0x217d60,'id':0x1};const _0x2273d6={'user':this[a25_0x570d('0x25')],'pass':this[a25_0x570d('0x39')]};console[a25_0x570d('0x47')](a25_0x570d('0xf2'),_0x561489);console[a25_0x570d('0x47')](a25_0x570d('0xf3'),_0x2273d6);this[a25_0x570d('0x29')][a25_0x570d('0x45')](this[a25_0x570d('0x24')]+'/jsonrpc',_0x561489,![],_0x2273d6)[a25_0x570d('0x5')](function(_0x2b149){_0x539398(_0x2b149);})[a25_0x570d('0x49')](function(_0x114b1f){});}}exports[a25_0x570d('0xf4')]=SyncPlaylistsService;