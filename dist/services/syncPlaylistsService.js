var a22_0x40d3=['downloadHTTPFileCallback','image','duration','createImageVideo','video','progress','Error\x20downloading\x20file','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','-vf','scale=1920:1080','stdout','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','Download\x20started','filename:\x20','_filename','size:\x20','size','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','substring','youtube_single','/home/osmc/luloclient/media/files/','Refreshing..','refreshPlaylist','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','http://localhost/jsonrpc','SyncPlaylistsService','__awaiter','next','done','value','then','apply','defineProperty','../infrastructure/HttpClientService','node-mediainfo','http','fs-extra','request','child_process','string-template','uuid/v4','config.json','context.json','url-exists','node-kodi','tempFolder','mediaFolder','filesFolder','files/','playListFile','playlist.txt','m3uFile','playlistChanged','downloadFiles','httpClientService','init','parse','readFileSync','context','playerId','config','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','http://192.168.0.102','lulo','.lulo123.','checkFolders','getStatus','bind','checkDependencies','registerClient','playlist','getItems','deviceUuid','stringify','post','log','register\x20response:\x20','catch','writeFileSync','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList','loadMediaList:\x20','newPlayList','failDownloadFiles','push','length','download','reloadMediaList','existsSync','emptyDirSync','removeSync','reboot','toString','currentFile','\x20of\x20','finishProcess','path','media_type','lastIndexOf','split','slice','join','.mp4','**********+','checkVideo','copySync','downloadYouTube','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','splice','start','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','globalAgent','maxSockets','host','get','\x20Progress:\x20unknown\x09','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','pipe','data','error','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message'];(function(_0x19b14c,_0x11c81a){var _0x117d4f=function(_0x1739e1){while(--_0x1739e1){_0x19b14c['push'](_0x19b14c['shift']());}};_0x117d4f(++_0x11c81a);}(a22_0x40d3,0x1a1));var a22_0x51bd=function(_0x564f7a,_0x4d0e35){_0x564f7a=_0x564f7a-0x0;var _0x5ec8e8=a22_0x40d3[_0x564f7a];return _0x5ec8e8;};'use strict';var __awaiter=this&&this[a22_0x51bd('0x0')]||function(_0x3760c9,_0x58c597,_0x5b8e4,_0xe066aa){function _0x1bca1d(_0x57f8a){return _0x57f8a instanceof _0x5b8e4?_0x57f8a:new _0x5b8e4(function(_0x332445){_0x332445(_0x57f8a);});}return new(_0x5b8e4||(_0x5b8e4=Promise))(function(_0x4a89d4,_0x45490c){function _0x33b7c7(_0x606aa5){try{_0x18e3c3(_0xe066aa[a22_0x51bd('0x1')](_0x606aa5));}catch(_0x534cc7){_0x45490c(_0x534cc7);}}function _0x1fafc0(_0x4ae0fc){try{_0x18e3c3(_0xe066aa['throw'](_0x4ae0fc));}catch(_0x2f5652){_0x45490c(_0x2f5652);}}function _0x18e3c3(_0x4777de){_0x4777de[a22_0x51bd('0x2')]?_0x4a89d4(_0x4777de['value']):_0x1bca1d(_0x4777de[a22_0x51bd('0x3')])[a22_0x51bd('0x4')](_0x33b7c7,_0x1fafc0);}_0x18e3c3((_0xe066aa=_0xe066aa[a22_0x51bd('0x5')](_0x3760c9,_0x58c597||[]))[a22_0x51bd('0x1')]());});};Object[a22_0x51bd('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a22_0x51bd('0x7'));const mediainfo=require(a22_0x51bd('0x8'));const fs=require('fs');const url=require('url');const http=require(a22_0x51bd('0x9'));const fsExtra=require(a22_0x51bd('0xa'));const request=require(a22_0x51bd('0xb'));const progress=require('request-progress');const spawn=require(a22_0x51bd('0xc'))['spawn'];const exec=require(a22_0x51bd('0xc'))['exec'];const isImage=require('is-image');const format=require(a22_0x51bd('0xd'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x51bd('0xe'));const configFile=a22_0x51bd('0xf');const contextFile=a22_0x51bd('0x10');const urlExists=require(a22_0x51bd('0x11'));const kodi_rpc=require(a22_0x51bd('0x12'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']='media/';this[a22_0x51bd('0x13')]=this[a22_0x51bd('0x14')]+'temp/';this[a22_0x51bd('0x15')]=this[a22_0x51bd('0x14')]+a22_0x51bd('0x16');this[a22_0x51bd('0x17')]=this['mediaFolder']+a22_0x51bd('0x18');this[a22_0x51bd('0x19')]=this[a22_0x51bd('0x15')]+'lulo_playlist.m3u';this['currentFile']=0x0;this[a22_0x51bd('0x1a')]=![];this[a22_0x51bd('0x1b')]=[];this['failDownloadFiles']=[];this['newPlayList']={};this[a22_0x51bd('0x1c')]=new HttpClientService_1['HttpClientService']();}[a22_0x51bd('0x1d')](){this['config']=JSON[a22_0x51bd('0x1e')](fs[a22_0x51bd('0x1f')](configFile));this[a22_0x51bd('0x20')]=JSON['parse'](fs[a22_0x51bd('0x1f')](contextFile));this[a22_0x51bd('0x21')]=this[a22_0x51bd('0x22')][a22_0x51bd('0x21')];this[a22_0x51bd('0x23')]=process[a22_0x51bd('0x24')][a22_0x51bd('0x25')]+a22_0x51bd('0x26');this[a22_0x51bd('0x27')]=this[a22_0x51bd('0x23')]+a22_0x51bd('0x28');this[a22_0x51bd('0x29')]=new kodi_rpc({'url':a22_0x51bd('0x2a'),'user':a22_0x51bd('0x2b'),'password':a22_0x51bd('0x2c')});this['checkDependencies']();this['registerClient']();this[a22_0x51bd('0x2d')]();this['loadMediaList']();setInterval(function(){this[a22_0x51bd('0x2e')]();}[a22_0x51bd('0x2f')](this),0x2710);setInterval(function(){this['registerClient']();}['bind'](this),0x493e0);}[a22_0x51bd('0x30')](){}[a22_0x51bd('0x31')](){this[a22_0x51bd('0x29')][a22_0x51bd('0x32')][a22_0x51bd('0x33')](0x1)[a22_0x51bd('0x4')](function(_0x5dedfe){const _0xb2b42b=JSON['stringify'](_0x5dedfe);const _0x43c79={'player_id':this[a22_0x51bd('0x21')],'device_uuid':this[a22_0x51bd('0x22')][a22_0x51bd('0x34')],'network_info':JSON[a22_0x51bd('0x35')](os['networkInterfaces']()),'firmware_info':JSON[a22_0x51bd('0x35')](this[a22_0x51bd('0x20')]),'playlist':_0xb2b42b,'playing_item':'','status':0x0};this[a22_0x51bd('0x1c')][a22_0x51bd('0x36')]('http://restapi.lulo.run/player_devices/register',_0x43c79,![])[a22_0x51bd('0x4')](function(_0x548efb){console[a22_0x51bd('0x37')](a22_0x51bd('0x38')+Date());})[a22_0x51bd('0x39')](function(_0x2a37c2){});console[a22_0x51bd('0x37')](_0x43c79);}[a22_0x51bd('0x2f')](this));const _0x130a1f=this[a22_0x51bd('0x22')][a22_0x51bd('0x34')];if(!_0x130a1f||_0x130a1f==''){this['config'][a22_0x51bd('0x34')]=uuidv4();this[a22_0x51bd('0x22')]={'deviceUuid':this[a22_0x51bd('0x22')]['deviceUuid'],'playerId':this[a22_0x51bd('0x22')][a22_0x51bd('0x21')]};fs[a22_0x51bd('0x3a')](configFile,JSON[a22_0x51bd('0x35')](this[a22_0x51bd('0x22')]));}}['getStatus'](){console[a22_0x51bd('0x37')](a22_0x51bd('0x2e'));this[a22_0x51bd('0x29')]['player']['getCurrentlyPlayingVideo']()[a22_0x51bd('0x4')](function(_0x21f99b){const _0x51c8d4=_0x21f99b['item'][a22_0x51bd('0x3b')];this[a22_0x51bd('0x3c')](_0x51c8d4);}[a22_0x51bd('0x2f')](this))[a22_0x51bd('0x39')](function(_0x4a0bf4){console[a22_0x51bd('0x37')](_0x4a0bf4);this[a22_0x51bd('0x3c')](_0x4a0bf4);}[a22_0x51bd('0x2f')](this));}['reportStatus'](_0xc59089){console[a22_0x51bd('0x37')](a22_0x51bd('0x3d')+_0xc59089);const _0x50d31e={'player_id':this[a22_0x51bd('0x21')],'device_uuid':this[a22_0x51bd('0x22')][a22_0x51bd('0x34')],'status':_0xc59089!=''&&_0xc59089!=null?0x1:0x0,'playing_item':_0xc59089};this[a22_0x51bd('0x1c')]['post'](a22_0x51bd('0x3e'),_0x50d31e,![])[a22_0x51bd('0x4')](function(_0x22d652){console['log'](a22_0x51bd('0x3f')+Date());})[a22_0x51bd('0x39')](function(_0x314035){});}['checkFolders'](){fsExtra[a22_0x51bd('0x40')](this[a22_0x51bd('0x14')],_0x567331=>{});fsExtra[a22_0x51bd('0x40')](this[a22_0x51bd('0x13')],_0x517a7a=>{});fsExtra[a22_0x51bd('0x40')](this[a22_0x51bd('0x15')],_0x1c5809=>{});}[a22_0x51bd('0x41')](){const _0x4d6ccf=format(this[a22_0x51bd('0x27')],this[a22_0x51bd('0x21')]);console['log'](_0x4d6ccf);request({'url':_0x4d6ccf,'json':!![]},function(_0x2e2d43,_0x524cdc,_0x12f922){console['log'](a22_0x51bd('0x42'));console[a22_0x51bd('0x37')](_0x12f922);this[a22_0x51bd('0x43')]=_0x12f922;this[a22_0x51bd('0x1a')]=this['hasPlayListChanged']();fsExtra['emptyDirSync'](this[a22_0x51bd('0x13')]);this['downloadFiles']=[];this[a22_0x51bd('0x44')]=[];this['currentFile']=0x0;for(const _0x505117 in _0x12f922){this[a22_0x51bd('0x1b')][a22_0x51bd('0x45')](_0x12f922[_0x505117]);}console[a22_0x51bd('0x37')]('Total:\x20'+this[a22_0x51bd('0x1b')]['length']);if(this[a22_0x51bd('0x1b')][a22_0x51bd('0x46')]>0x0){this[a22_0x51bd('0x47')]();}}['bind'](this));}[a22_0x51bd('0x48')](){if(fsExtra[a22_0x51bd('0x49')](this[a22_0x51bd('0x13')])){fsExtra[a22_0x51bd('0x4a')](this[a22_0x51bd('0x13')]);}if(fsExtra['existsSync'](this[a22_0x51bd('0x15')])){fsExtra[a22_0x51bd('0x4a')](this[a22_0x51bd('0x15')]);}if(!fsExtra[a22_0x51bd('0x49')](this['playListFile'])){fsExtra[a22_0x51bd('0x4b')](this[a22_0x51bd('0x17')]);}if(!fsExtra[a22_0x51bd('0x49')](this[a22_0x51bd('0x19')])){fsExtra[a22_0x51bd('0x4b')](this['m3uFile']);}this[a22_0x51bd('0x41')]();}[a22_0x51bd('0x4c')](){exec('sudo\x20/sbin/shutdown\x20-r\x20now',function(_0x4ca81a){console['log'](_0x4ca81a);});}['hasPlayListChanged'](){const _0x17a815=JSON[a22_0x51bd('0x35')](this['newPlayList']);try{if(!fsExtra[a22_0x51bd('0x49')](this['playListFile'])){return!![];}else{const _0x2e1144=fsExtra['readFileSync'](this[a22_0x51bd('0x17')])[a22_0x51bd('0x4d')]();if(_0x2e1144!=_0x17a815){return!![];}}}catch(_0x5add77){console['log'](_0x5add77);}return![];}['download'](){console[a22_0x51bd('0x37')]('this.currentFile:\x20'+this[a22_0x51bd('0x4e')]+a22_0x51bd('0x4f')+this['downloadFiles'][a22_0x51bd('0x46')]);if(this['currentFile']>=this['downloadFiles'][a22_0x51bd('0x46')]){this[a22_0x51bd('0x50')]();return;}const _0x4db651=String(this[a22_0x51bd('0x1b')][this['currentFile']][a22_0x51bd('0x51')]);const _0x1fae1d=this['downloadFiles'][this[a22_0x51bd('0x4e')]][a22_0x51bd('0x52')];let _0x1ed380=_0x4db651['substring'](_0x4db651[a22_0x51bd('0x53')]('/')+0x1);const _0x1b05bd=_0x1ed380[a22_0x51bd('0x54')]('.')[a22_0x51bd('0x55')](0x0,-0x1)[a22_0x51bd('0x56')]('.');let _0x4a5a5c=this[a22_0x51bd('0x23')]+_0x4db651;const _0x2e8127=_0x4a5a5c[a22_0x51bd('0x54')]('.')[a22_0x51bd('0x55')](0x0,-0x1)[a22_0x51bd('0x56')]('.');if(_0x1fae1d=='youtube_single'){_0x1ed380=_0x1ed380+a22_0x51bd('0x57');}else if(_0x1fae1d=='image'){_0x1ed380=_0x1b05bd+'.mp4';_0x4a5a5c=_0x2e8127+a22_0x51bd('0x57');}console[a22_0x51bd('0x37')](a22_0x51bd('0x58'));console['log'](_0x4db651);console[a22_0x51bd('0x37')](_0x1fae1d);console[a22_0x51bd('0x37')](_0x1ed380);console[a22_0x51bd('0x37')](_0x4a5a5c);console['log'](_0x1b05bd);console[a22_0x51bd('0x37')](_0x2e8127);console['log'](a22_0x51bd('0x58'));if(fsExtra[a22_0x51bd('0x49')](this[a22_0x51bd('0x13')]+_0x1ed380)){this[a22_0x51bd('0x59')](this[a22_0x51bd('0x13')]+_0x1ed380)[a22_0x51bd('0x4')](function(_0xa0d995){if(_0xa0d995){this[a22_0x51bd('0x4e')]++;}else{this[a22_0x51bd('0x1a')]=!![];}this['download']();}[a22_0x51bd('0x2f')](this));}else if(fsExtra[a22_0x51bd('0x49')](this['filesFolder']+_0x1ed380)){this[a22_0x51bd('0x59')](this[a22_0x51bd('0x15')]+_0x1ed380)[a22_0x51bd('0x4')](function(_0x3576cc){if(_0x3576cc){fsExtra[a22_0x51bd('0x5a')](this[a22_0x51bd('0x15')]+_0x1ed380,this['tempFolder']+_0x1ed380);this[a22_0x51bd('0x4e')]++;}else{this['playlistChanged']=!![];}this['download']();}[a22_0x51bd('0x2f')](this));}else{console[a22_0x51bd('0x37')]('Downloading:\x20'+_0x4a5a5c);this[a22_0x51bd('0x1a')]=!![];if(_0x1fae1d=='youtube_single'){this[a22_0x51bd('0x5b')](_0x4db651);}else{this['downloader'](_0x4a5a5c,_0x1ed380,_0x1fae1d);}}}[a22_0x51bd('0x59')](_0x50757d){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x51bd('0x37')](a22_0x51bd('0x5c')+_0x50757d);const _0x2a0b7e=yield mediainfo(_0x50757d)[a22_0x51bd('0x39')](_0x3017f6=>{console[a22_0x51bd('0x37')](_0x3017f6);fsExtra[a22_0x51bd('0x4b')](_0x50757d);return![];});const _0x10a9fc=_0x2a0b7e[a22_0x51bd('0x5d')][a22_0x51bd('0x5e')][a22_0x51bd('0x46')]>0x1&&_0x2a0b7e['media'][a22_0x51bd('0x5e')][0x1][a22_0x51bd('0x5f')]==a22_0x51bd('0x60');if(!_0x10a9fc){fsExtra[a22_0x51bd('0x4b')](_0x50757d);}console[a22_0x51bd('0x37')](a22_0x51bd('0x61')+_0x10a9fc);return _0x10a9fc;});}['downloader'](_0xa7b9e6,_0x3c14c3,_0x38ab5b){const _0x2282e9=new Downloader();console[a22_0x51bd('0x37')](_0xa7b9e6);console[a22_0x51bd('0x37')](_0x3c14c3);console[a22_0x51bd('0x37')](_0x38ab5b);const _0x1c802f=_0x2282e9[a22_0x51bd('0x47')](_0xa7b9e6,this['tempFolder']+_0x3c14c3);urlExists(_0xa7b9e6,function(_0x16177e,_0x3a05ed){if(_0x3a05ed){if(this[a22_0x51bd('0x44')][a22_0x51bd('0x62')](this[a22_0x51bd('0x4e')])){const _0x12e6c0=this[a22_0x51bd('0x44')]['indexOf'](this['currentFile']);if(_0x12e6c0>-0x1){this['failDownloadFiles'][a22_0x51bd('0x63')](_0x12e6c0,0x1);}}console[a22_0x51bd('0x37')]('downloading:\x20'+_0xa7b9e6);_0x1c802f[a22_0x51bd('0x64')]();}else{if(!this[a22_0x51bd('0x44')]['includes'](this[a22_0x51bd('0x4e')])){this[a22_0x51bd('0x44')][a22_0x51bd('0x45')](this[a22_0x51bd('0x4e')]);}console[a22_0x51bd('0x37')]('Error:\x20'+_0xa7b9e6);this[a22_0x51bd('0x4e')]++;this[a22_0x51bd('0x47')]();}}[a22_0x51bd('0x2f')](this));_0x1c802f['on'](a22_0x51bd('0x64'),function(_0x1c802f){console[a22_0x51bd('0x37')]('start:\x20'+_0xa7b9e6);});_0x1c802f['on']('error',function(_0x1c802f){console['log'](a22_0x51bd('0x65'));this['download']();}[a22_0x51bd('0x2f')](this));_0x1c802f['on'](a22_0x51bd('0x66'),function(_0x1c802f){console[a22_0x51bd('0x37')](a22_0x51bd('0x66'));console[a22_0x51bd('0x37')](a22_0x51bd('0x67')+_0x3c14c3);console['log'](a22_0x51bd('0x68')+_0x38ab5b);this[a22_0x51bd('0x59')](this[a22_0x51bd('0x13')]+_0x3c14c3)['then'](function(_0x22b0c2){if(_0x22b0c2){this[a22_0x51bd('0x4e')]++;}this[a22_0x51bd('0x47')]();}[a22_0x51bd('0x2f')](this));}[a22_0x51bd('0x2f')](this));_0x1c802f['on'](a22_0x51bd('0x69'),function(_0x1c802f){console['log']('stopped');});_0x1c802f['on']('destroyed',function(_0x1c802f){console['log'](a22_0x51bd('0x6a'));});_0x1c802f['on'](a22_0x51bd('0x6b'),function(_0x1c802f){console[a22_0x51bd('0x37')](a22_0x51bd('0x6b'));});}[a22_0x51bd('0x6c')](_0x269a97,_0x59e228,_0x4111ef,_0x59fb4b){console['log'](a22_0x51bd('0x6c'));console['log'](_0x269a97);const _0x409401=!![];let _0x10228e=0x0;const _0x1a8902='';console['log'](a22_0x51bd('0x6d')+_0x269a97+a22_0x51bd('0x6e')+_0x59e228);if(_0x10228e){if(_0x10228e>0x5){_0x59fb4b(a22_0x51bd('0x6f'),_0x269a97,_0x4111ef,null);return;}}else{_0x10228e=0x0;}const _0xe1db02=this['tempFolder']+_0x59e228;let _0x112661;if(_0x59fb4b===undefined){console[a22_0x51bd('0x37')](a22_0x51bd('0x70')+_0x269a97+a22_0x51bd('0x6e')+_0xe1db02);_0x59fb4b=function(_0x4c4423,_0x38c32f){console[a22_0x51bd('0x37')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x4c4423,_0x38c32f);};}http[a22_0x51bd('0x71')][a22_0x51bd('0x72')]=0x64;const _0x16ccb7={'host':url[a22_0x51bd('0x1e')](_0x269a97)[a22_0x51bd('0x73')],'port':0x50,'path':url['parse'](_0x269a97)['pathname'],'agent':![]};const _0x68509b=http[a22_0x51bd('0x74')](_0x16ccb7,function(_0x5a7c3b){let _0x232a78=0x0;let _0x44e85e=0x0;function _0x124d63(){if(_0x232a78===undefined){console['log'](_0x59e228+a22_0x51bd('0x75')+_0x44e85e+'/'+'?');}const _0x4e47db=_0x44e85e/_0x232a78*0x64;console[a22_0x51bd('0x37')](_0x59e228+'\x20Progress:\x20'+_0x4e47db+'%\x09'+_0x44e85e+'/'+_0x232a78);}console[a22_0x51bd('0x37')](_0x59e228+'\x20'+_0x5a7c3b['statusCode']);switch(_0x5a7c3b[a22_0x51bd('0x76')]){case 0xc8:_0x232a78=_0x5a7c3b[a22_0x51bd('0x77')][a22_0x51bd('0x78')]||_0x1a8902;fs[a22_0x51bd('0x79')](_0xe1db02,function(_0x212573,_0x3b383d){if(!_0x212573){console['log'](a22_0x51bd('0x7a')+_0xe1db02);if(_0x3b383d['size']==_0x232a78){console[a22_0x51bd('0x37')](a22_0x51bd('0x7b')+_0x232a78+')');console['log'](a22_0x51bd('0x7c'));}else{console[a22_0x51bd('0x37')](a22_0x51bd('0x7d')+_0x3b383d['size']+')\x20vs\x20New('+_0x232a78+')');}}_0x112661=fs['createWriteStream'](_0xe1db02);_0x5a7c3b[a22_0x51bd('0x7e')](_0x112661);_0x5a7c3b['on'](a22_0x51bd('0x7f'),function(_0x490295){_0x44e85e+=_0x490295['length'];_0x124d63();});_0x68509b['on'](a22_0x51bd('0x80'),function(_0x212573){console['log'](a22_0x51bd('0x81'));console['log'](_0x212573);});_0x112661['on'](a22_0x51bd('0x82'),function(){console[a22_0x51bd('0x37')](a22_0x51bd('0x83')+_0x269a97+a22_0x51bd('0x6e')+_0x59e228);_0x59fb4b(null,_0x59e228,_0x4111ef,_0x59e228);}['bind'](this));});break;case 0x12e:const _0x496d57=_0x5a7c3b['headers'][a22_0x51bd('0x84')];console[a22_0x51bd('0x37')](a22_0x51bd('0x85')+_0x269a97+a22_0x51bd('0x6e')+_0x496d57);if(_0x10228e<0x5){this[a22_0x51bd('0x6c')](_0x496d57,_0x59e228,_0x59fb4b,_0x10228e++);}else{console[a22_0x51bd('0x80')](a22_0x51bd('0x86')+_0x269a97+'.');_0x59fb4b('302',null,null,null);}return;case 0x194:console['log'](a22_0x51bd('0x87')+_0x269a97);default:console[a22_0x51bd('0x37')](a22_0x51bd('0x88')+_0x269a97+a22_0x51bd('0x89')+_0x5a7c3b[a22_0x51bd('0x76')]);_0x68509b[a22_0x51bd('0x8a')]();_0x59fb4b(_0x5a7c3b[a22_0x51bd('0x76')],null,null,null);return;}})['on'](a22_0x51bd('0x80'),function(_0x23995e){console[a22_0x51bd('0x37')](a22_0x51bd('0x8b')+_0x269a97+'\x20'+_0x23995e[a22_0x51bd('0x8c')]);_0x59fb4b(_0x23995e,null,null,null);});}[a22_0x51bd('0x8d')](_0x4b58c2,_0x501352,_0x2f2571,_0x5bb25e){console['log']('downloadHTTPFileCallback');console['log'](_0x4b58c2);console[a22_0x51bd('0x37')](_0x501352);console[a22_0x51bd('0x37')](_0x2f2571);console[a22_0x51bd('0x37')](_0x5bb25e);if(_0x2f2571==a22_0x51bd('0x8e')){const _0x3e0ed7=this[a22_0x51bd('0x1b')][this[a22_0x51bd('0x4e')]][a22_0x51bd('0x8f')]!=null?this[a22_0x51bd('0x1b')][this[a22_0x51bd('0x4e')]][a22_0x51bd('0x8f')]:0x1e;this[a22_0x51bd('0x90')](_0x5bb25e,_0x3e0ed7);}else if(_0x2f2571==a22_0x51bd('0x91')){if(_0x4b58c2==null&&_0x501352!=''){this[a22_0x51bd('0x4e')]++;}this['download']();}console[a22_0x51bd('0x37')](this[a22_0x51bd('0x4e')]);}['downloadRequestFile'](_0x2f361f,_0x2b566b,_0x588de5){progress(request(_0x2f361f),{})['on'](a22_0x51bd('0x92'),function(_0x3b8a2d){console[a22_0x51bd('0x37')](_0x3b8a2d);})['on'](a22_0x51bd('0x80'),function(_0x5aa4d4){console[a22_0x51bd('0x37')](a22_0x51bd('0x93'));this[a22_0x51bd('0x47')]();})['on'](a22_0x51bd('0x66'),function(){console[a22_0x51bd('0x37')](a22_0x51bd('0x67')+_0x2b566b);console[a22_0x51bd('0x37')](a22_0x51bd('0x68')+_0x588de5);if(_0x588de5==a22_0x51bd('0x8e')){const _0x500f56=this['downloadFiles'][this[a22_0x51bd('0x4e')]]['duration']!=null?this['downloadFiles'][this['currentFile']][a22_0x51bd('0x8f')]:0x1e;this['createImageVideo'](_0x2b566b,_0x500f56);}else if(_0x588de5==a22_0x51bd('0x91')){this[a22_0x51bd('0x4e')]++;this[a22_0x51bd('0x47')]();}}[a22_0x51bd('0x2f')](this))['pipe'](fs['createWriteStream'](this[a22_0x51bd('0x13')]+_0x2b566b));}[a22_0x51bd('0x90')](_0x2ef49b,_0x184176=0x1e){const _0x50c2e1=this[a22_0x51bd('0x13')]+_0x2ef49b;console[a22_0x51bd('0x37')](_0x50c2e1);console[a22_0x51bd('0x37')](_0x2ef49b);const _0x13b18b=_0x2ef49b[a22_0x51bd('0x54')]('.')[a22_0x51bd('0x55')](0x0,-0x1)[a22_0x51bd('0x56')]('.');const _0xbc068e=a22_0x51bd('0x94');const _0xeb3c3c=['-y','-r',a22_0x51bd('0x95'),a22_0x51bd('0x96'),'1',a22_0x51bd('0x97'),a22_0x51bd('0x98'),'-i',_0x50c2e1,'-t',String(_0x184176),a22_0x51bd('0x99'),'libx264',a22_0x51bd('0x9a'),'yuv420p','-r','25',a22_0x51bd('0x9b'),a22_0x51bd('0x9c'),this[a22_0x51bd('0x13')]+_0x13b18b+a22_0x51bd('0x57')];const _0x2bc06e=spawn(_0xbc068e,_0xeb3c3c);_0x2bc06e[a22_0x51bd('0x9d')]['on'](a22_0x51bd('0x7f'),function(_0x475f36){console['log']('Converting\x20'+_0x50c2e1);});_0x2bc06e[a22_0x51bd('0x9e')]['on'](a22_0x51bd('0x7f'),function(_0x2ba0af){console[a22_0x51bd('0x37')](a22_0x51bd('0x9f')+_0x2ba0af);}[a22_0x51bd('0x2f')](this));_0x2bc06e['on'](a22_0x51bd('0xa0'),function(){console[a22_0x51bd('0x37')](a22_0x51bd('0xa1'));this[a22_0x51bd('0x4e')]++;this['download']();}[a22_0x51bd('0x2f')](this));}[a22_0x51bd('0x5b')](_0x28e069){const _0xfe9e80=this[a22_0x51bd('0x13')]+'/'+_0x28e069+'.mp4';const _0xf52dde=youtubedl(a22_0x51bd('0xa2')+_0x28e069,[a22_0x51bd('0xa3')],{'cwd':__dirname});_0xf52dde['on']('info',function(_0xddec6a){console[a22_0x51bd('0x37')](a22_0x51bd('0xa4'));console[a22_0x51bd('0x37')](a22_0x51bd('0xa5')+_0xddec6a[a22_0x51bd('0xa6')]);console[a22_0x51bd('0x37')](a22_0x51bd('0xa7')+_0xddec6a[a22_0x51bd('0xa8')]);});_0xf52dde['on']('complete',function complete(_0x1c71a6){'use strict';console[a22_0x51bd('0x37')](a22_0x51bd('0xa5')+_0x1c71a6['_filename']+'\x20already\x20downloaded.');});_0xf52dde['on'](a22_0x51bd('0x66'),function(){console[a22_0x51bd('0x37')](a22_0x51bd('0xa9'));this[a22_0x51bd('0x59')](_0xfe9e80)[a22_0x51bd('0x4')](function(_0x35a3d6){if(_0x35a3d6){this[a22_0x51bd('0x4e')]++;}this[a22_0x51bd('0x47')]();}['bind'](this));}['bind'](this));_0xf52dde[a22_0x51bd('0x7e')](fs['createWriteStream'](_0xfe9e80));}['finishProcess'](){console[a22_0x51bd('0x37')](a22_0x51bd('0xaa'));this[a22_0x51bd('0x1a')]=!![];if(this[a22_0x51bd('0x1a')]){if(this[a22_0x51bd('0x44')][a22_0x51bd('0x46')]==0x0){fs['writeFileSync'](this[a22_0x51bd('0x17')],JSON[a22_0x51bd('0x35')](this['newPlayList']));let _0x1d39f3=a22_0x51bd('0xab')+'\x0d\x0a'+a22_0x51bd('0xac')+'\x0d\x0a';for(const _0xd82b26 in this[a22_0x51bd('0x1b')]){const _0xd913a2=this[a22_0x51bd('0x1b')][_0xd82b26][a22_0x51bd('0x51')];const _0x5f0956=this['downloadFiles'][_0xd82b26][a22_0x51bd('0x52')];const _0x3a3513=_0xd913a2[a22_0x51bd('0xad')](_0xd913a2[a22_0x51bd('0x53')]('/')+0x1);let _0x951260=_0x3a3513[a22_0x51bd('0x54')]('.')[a22_0x51bd('0x55')](0x0,-0x1)['join']('.');if(_0x5f0956==a22_0x51bd('0xae')){_0x951260=_0xd913a2;}_0x1d39f3+=a22_0x51bd('0xaf')+_0x951260+a22_0x51bd('0x57')+'\x0d\x0a';}fsExtra[a22_0x51bd('0x4a')](this[a22_0x51bd('0x15')]);fsExtra['copySync'](this[a22_0x51bd('0x13')],this[a22_0x51bd('0x15')]);fsExtra['writeFileSync'](this[a22_0x51bd('0x19')],_0x1d39f3);fsExtra[a22_0x51bd('0x4a')](this[a22_0x51bd('0x13')]);console['log'](a22_0x51bd('0xb0'));this[a22_0x51bd('0xb1')]();}else{console[a22_0x51bd('0x37')](a22_0x51bd('0xb2'));this[a22_0x51bd('0x4e')]=0x0;setTimeout(function(){this[a22_0x51bd('0x47')]();}[a22_0x51bd('0x2f')](this),0x1388);}}else{console[a22_0x51bd('0x37')](a22_0x51bd('0xb3'));}}['refreshPlaylist'](){this[a22_0x51bd('0xb4')]('Playlist.Clear',{'playlistid':0x1},function(_0xb6c81d){console['log']('Playlist.Cleared');console['log'](_0xb6c81d);this[a22_0x51bd('0xb4')]('Playlist.Add',{'item':{'file':a22_0x51bd('0xb5')},'playlistid':0x1},function(_0xb6c81d){console[a22_0x51bd('0x37')](a22_0x51bd('0xb6'));console[a22_0x51bd('0x37')](_0xb6c81d);this[a22_0x51bd('0xb4')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0xb6c81d){console[a22_0x51bd('0x37')](a22_0x51bd('0xb7'));console['log'](_0xb6c81d);}[a22_0x51bd('0x2f')](this));}[a22_0x51bd('0x2f')](this));}[a22_0x51bd('0x2f')](this));}[a22_0x51bd('0xb4')](_0x212372,_0x5e1b75,_0x3dfbd6){const _0x2d76ea={'jsonrpc':'2.0','method':_0x212372,'params':_0x5e1b75,'id':0x1};this[a22_0x51bd('0x1c')][a22_0x51bd('0x36')](a22_0x51bd('0xb8'),_0x2d76ea,![],{'user':a22_0x51bd('0x2b'),'pass':'.lulo123.'})['then'](function(_0x370d19){_0x3dfbd6(_0x370d19);})[a22_0x51bd('0x39')](function(_0x5ac0fe){});}}exports[a22_0x51bd('0xb9')]=SyncPlaylistsService;