var a22_0x4b41=['info','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTINF:0,luloPlayList','emptyDirSync','Finished','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','throw','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','context.json','mt-files-downloader','mediaFolder','media/','tempFolder','files/','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','downloadFiles','failDownloadFiles','HttpClientService','config','parse','readFileSync','context','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','baseURL','loadMediaList','reportStatus','bind','checkDependencies','registerClient','deviceUuid','writeFileSync','stringify','post','log','register\x20response:\x20','catch','httpClientService','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','newPlayList','Total:\x20','length','reloadMediaList','existsSync','playListFile','removeSync','hasPlayListChanged','toString','\x20of\x20','finishProcess','media_type','substring','lastIndexOf','slice','join','split','youtube_single','.mp4','image','**********+','checkVideo','filesFolder','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','download','includes','splice','start','push','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','err:\x20','finish','Downloaded\x20','location','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','Error\x20downloading\x20file','mediaType:\x20','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','close','http://www.youtube.com/watch?v=','--format=18'];(function(_0x51dc39,_0x30d7c1){var _0x417832=function(_0x320d82){while(--_0x320d82){_0x51dc39['push'](_0x51dc39['shift']());}};_0x417832(++_0x30d7c1);}(a22_0x4b41,0x169));var a22_0x1206=function(_0x5a2075,_0x7b75c7){_0x5a2075=_0x5a2075-0x0;var _0xf718d3=a22_0x4b41[_0x5a2075];return _0xf718d3;};'use strict';var __awaiter=this&&this[a22_0x1206('0x0')]||function(_0x208624,_0x4ba2ac,_0x43c424,_0x1e00fc){return new(_0x43c424||(_0x43c424=Promise))(function(_0x5eb808,_0x47817f){function _0x2f0b43(_0x1d3d2f){try{_0x4b8c63(_0x1e00fc[a22_0x1206('0x1')](_0x1d3d2f));}catch(_0x22237e){_0x47817f(_0x22237e);}}function _0x200067(_0x496040){try{_0x4b8c63(_0x1e00fc[a22_0x1206('0x2')](_0x496040));}catch(_0x24c860){_0x47817f(_0x24c860);}}function _0x4b8c63(_0x27d1bb){_0x27d1bb['done']?_0x5eb808(_0x27d1bb[a22_0x1206('0x3')]):new _0x43c424(function(_0x5eb808){_0x5eb808(_0x27d1bb[a22_0x1206('0x3')]);})[a22_0x1206('0x4')](_0x2f0b43,_0x200067);}_0x4b8c63((_0x1e00fc=_0x1e00fc[a22_0x1206('0x5')](_0x208624,_0x4ba2ac||[]))['next']());});};Object[a22_0x1206('0x6')](exports,a22_0x1206('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x1206('0x8'));const mediainfo=require(a22_0x1206('0x9'));const fs=require('fs');const url=require('url');const http=require('http');const fsExtra=require('fs-extra');const request=require(a22_0x1206('0xa'));const progress=require(a22_0x1206('0xb'));const spawn=require(a22_0x1206('0xc'))[a22_0x1206('0xd')];const isImage=require(a22_0x1206('0xe'));const format=require(a22_0x1206('0xf'));const os=require('os');const youtubedl=require(a22_0x1206('0x10'));const uuidv4=require('uuid/v4');const configFile='config.json';const contextFile=a22_0x1206('0x11');const urlExists=require('url-exists');const Downloader=require(a22_0x1206('0x12'));class SyncPlaylistsService{constructor(){this[a22_0x1206('0x13')]=a22_0x1206('0x14');this[a22_0x1206('0x15')]=this[a22_0x1206('0x13')]+'temp/';this['filesFolder']=this[a22_0x1206('0x13')]+a22_0x1206('0x16');this['playListFile']=this[a22_0x1206('0x13')]+a22_0x1206('0x17');this[a22_0x1206('0x18')]=this['filesFolder']+a22_0x1206('0x19');this[a22_0x1206('0x1a')]=0x0;this[a22_0x1206('0x1b')]=[];this[a22_0x1206('0x1c')]=[];this['newPlayList']={};this['httpClientService']=new HttpClientService_1[(a22_0x1206('0x1d'))]();}['init'](){this[a22_0x1206('0x1e')]=JSON[a22_0x1206('0x1f')](fs[a22_0x1206('0x20')](configFile));this[a22_0x1206('0x21')]=JSON['parse'](fs[a22_0x1206('0x20')](contextFile));this['playerId']=this[a22_0x1206('0x1e')][a22_0x1206('0x22')];this['baseURL']=process[a22_0x1206('0x23')][a22_0x1206('0x24')]+a22_0x1206('0x25');this[a22_0x1206('0x26')]=this[a22_0x1206('0x27')]+'api/player_playlist.php?player_id={0}';this['registerClient']();this['checkFolders']();this[a22_0x1206('0x28')]();setInterval(function(){this[a22_0x1206('0x29')]();}[a22_0x1206('0x2a')](this),0xea60);}[a22_0x1206('0x2b')](){}[a22_0x1206('0x2c')](){const _0x550385=this[a22_0x1206('0x1e')][a22_0x1206('0x2d')];if(!_0x550385||_0x550385==''){this[a22_0x1206('0x1e')]['deviceUuid']=uuidv4();this[a22_0x1206('0x1e')]={'deviceUuid':this[a22_0x1206('0x1e')]['deviceUuid'],'playerId':this[a22_0x1206('0x1e')][a22_0x1206('0x22')]};fs[a22_0x1206('0x2e')](configFile,JSON[a22_0x1206('0x2f')](this[a22_0x1206('0x1e')]));}const _0x422414={'player_id':this['playerId'],'device_uuid':this[a22_0x1206('0x1e')][a22_0x1206('0x2d')],'network_info':JSON[a22_0x1206('0x2f')](os['networkInterfaces']()),'firmware_info':JSON[a22_0x1206('0x2f')](this[a22_0x1206('0x21')]),'status':0x1};this['httpClientService'][a22_0x1206('0x30')]('http://restapi.lulo.run/player_devices/register',_0x422414,![])[a22_0x1206('0x4')](function(_0x517322){console[a22_0x1206('0x31')](a22_0x1206('0x32')+Date());})[a22_0x1206('0x33')](function(_0xdb53d0){});}[a22_0x1206('0x29')](){const _0x1f4e1f={'player_id':this[a22_0x1206('0x22')],'device_uuid':this[a22_0x1206('0x1e')][a22_0x1206('0x2d')],'status':0x1};this[a22_0x1206('0x34')][a22_0x1206('0x30')](a22_0x1206('0x35'),_0x1f4e1f,![])[a22_0x1206('0x4')](function(_0x234042){console[a22_0x1206('0x31')](a22_0x1206('0x36')+Date());})['catch'](function(_0x65a762){});}[a22_0x1206('0x37')](){fsExtra[a22_0x1206('0x38')](this[a22_0x1206('0x13')],_0x5958d5=>{});fsExtra['ensureDir'](this['tempFolder'],_0x229dfa=>{});fsExtra[a22_0x1206('0x38')](this['filesFolder'],_0x400189=>{});}[a22_0x1206('0x28')](){const _0x3c4486=format(this[a22_0x1206('0x26')],this[a22_0x1206('0x22')]);console[a22_0x1206('0x31')](_0x3c4486);request({'url':_0x3c4486,'json':!![]},function(_0x4517aa,_0x4a1358,_0x967e1d){this[a22_0x1206('0x39')]=_0x967e1d;fsExtra['emptyDirSync'](this[a22_0x1206('0x15')]);this[a22_0x1206('0x1b')]=[];this[a22_0x1206('0x1c')]=[];this[a22_0x1206('0x1a')]=0x0;for(const _0x416b17 in _0x967e1d){this[a22_0x1206('0x1b')]['push'](_0x967e1d[_0x416b17]);}console[a22_0x1206('0x31')](a22_0x1206('0x3a')+this[a22_0x1206('0x1b')][a22_0x1206('0x3b')]);if(this['downloadFiles'][a22_0x1206('0x3b')]>0x0){this['download']();}}[a22_0x1206('0x2a')](this));}[a22_0x1206('0x3c')](){if(fsExtra[a22_0x1206('0x3d')](this[a22_0x1206('0x3e')])){fsExtra[a22_0x1206('0x3f')](this[a22_0x1206('0x3e')]);}this['loadMediaList']();}[a22_0x1206('0x40')](){const _0x24e445=JSON['stringify'](this[a22_0x1206('0x39')]);try{if(!fs[a22_0x1206('0x3d')](this[a22_0x1206('0x3e')])){return!![];}else{const _0xeb0bd9=fs['readFileSync'](this[a22_0x1206('0x3e')])[a22_0x1206('0x41')]();if(_0xeb0bd9!=_0x24e445){return!![];}}}catch(_0x6d7227){console['error'](_0x6d7227);}return![];}['download'](){console[a22_0x1206('0x31')]('this.currentFile:\x20'+this[a22_0x1206('0x1a')]+a22_0x1206('0x42')+this[a22_0x1206('0x1b')][a22_0x1206('0x3b')]);if(this[a22_0x1206('0x1a')]>=this[a22_0x1206('0x1b')][a22_0x1206('0x3b')]){this[a22_0x1206('0x43')]();return;}const _0x1da0e6=String(this['downloadFiles'][this['currentFile']]['path']);const _0x1c9383=this[a22_0x1206('0x1b')][this[a22_0x1206('0x1a')]][a22_0x1206('0x44')];let _0x43df6d=_0x1da0e6[a22_0x1206('0x45')](_0x1da0e6[a22_0x1206('0x46')]('/')+0x1);const _0x3006ab=_0x43df6d['split']('.')[a22_0x1206('0x47')](0x0,-0x1)[a22_0x1206('0x48')]('.');let _0x204056=this[a22_0x1206('0x27')]+_0x1da0e6;const _0x217d73=_0x204056[a22_0x1206('0x49')]('.')[a22_0x1206('0x47')](0x0,-0x1)[a22_0x1206('0x48')]('.');if(_0x1c9383==a22_0x1206('0x4a')){_0x43df6d=_0x43df6d+a22_0x1206('0x4b');}else if(_0x1c9383==a22_0x1206('0x4c')){_0x43df6d=_0x3006ab+a22_0x1206('0x4b');_0x204056=_0x217d73+a22_0x1206('0x4b');}console[a22_0x1206('0x31')](a22_0x1206('0x4d'));console[a22_0x1206('0x31')](_0x1da0e6);console['log'](_0x1c9383);console[a22_0x1206('0x31')](_0x43df6d);console[a22_0x1206('0x31')](_0x204056);console[a22_0x1206('0x31')](_0x3006ab);console[a22_0x1206('0x31')](_0x217d73);console[a22_0x1206('0x31')](a22_0x1206('0x4d'));if(fsExtra[a22_0x1206('0x3d')](this[a22_0x1206('0x15')]+_0x43df6d)){this[a22_0x1206('0x4e')](this[a22_0x1206('0x15')]+_0x43df6d)[a22_0x1206('0x4')](function(_0x49f313){if(_0x49f313){this[a22_0x1206('0x1a')]++;}this['download']();}[a22_0x1206('0x2a')](this));}else if(fsExtra[a22_0x1206('0x3d')](this[a22_0x1206('0x4f')]+_0x43df6d)){this[a22_0x1206('0x4e')](this['filesFolder']+_0x43df6d)[a22_0x1206('0x4')](function(_0x2c57b3){if(_0x2c57b3){fsExtra[a22_0x1206('0x50')](this[a22_0x1206('0x4f')]+_0x43df6d,this['tempFolder']+_0x43df6d);this[a22_0x1206('0x1a')]++;}this['download']();}[a22_0x1206('0x2a')](this));}else{console[a22_0x1206('0x31')](a22_0x1206('0x51')+_0x204056);if(_0x1c9383==a22_0x1206('0x4a')){this[a22_0x1206('0x52')](_0x1da0e6);}else{this[a22_0x1206('0x53')](_0x204056,_0x43df6d,_0x1c9383);}}}[a22_0x1206('0x4e')](_0x1ed52b){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x1206('0x31')](a22_0x1206('0x54')+_0x1ed52b);const _0x2bc77b=yield mediainfo(_0x1ed52b)[a22_0x1206('0x33')](_0x5416d7=>console[a22_0x1206('0x31')](_0x5416d7));const _0x489c0f=_0x2bc77b[a22_0x1206('0x55')]['track'][a22_0x1206('0x3b')]>0x1&&_0x2bc77b['media'][a22_0x1206('0x56')][0x1][a22_0x1206('0x57')]==a22_0x1206('0x58');if(!_0x489c0f){fsExtra[a22_0x1206('0x3f')](_0x1ed52b);}console[a22_0x1206('0x31')](a22_0x1206('0x59')+_0x489c0f);return _0x489c0f;});}['downloader'](_0x2c512a,_0x1932a1,_0x56c964){const _0x19d465=new Downloader();console['log'](_0x2c512a);console[a22_0x1206('0x31')](_0x1932a1);console['log'](_0x56c964);const _0x4f143b=_0x19d465[a22_0x1206('0x5a')](_0x2c512a,this['tempFolder']+_0x1932a1);urlExists(_0x2c512a,function(_0x4d2bf8,_0x1af752){if(_0x1af752){if(this[a22_0x1206('0x1c')][a22_0x1206('0x5b')](this[a22_0x1206('0x1a')])){const _0xee223f=this[a22_0x1206('0x1c')]['indexOf'](this[a22_0x1206('0x1a')]);if(_0xee223f>-0x1){this[a22_0x1206('0x1c')][a22_0x1206('0x5c')](_0xee223f,0x1);}}console[a22_0x1206('0x31')]('downloading:\x20'+_0x2c512a);_0x4f143b[a22_0x1206('0x5d')]();}else{if(!this['failDownloadFiles'][a22_0x1206('0x5b')](this[a22_0x1206('0x1a')])){this[a22_0x1206('0x1c')][a22_0x1206('0x5e')](this[a22_0x1206('0x1a')]);}console[a22_0x1206('0x31')](a22_0x1206('0x5f')+_0x2c512a);this['currentFile']++;this[a22_0x1206('0x5a')]();}}[a22_0x1206('0x2a')](this));_0x4f143b['on'](a22_0x1206('0x5d'),function(_0x4f143b){console['log'](a22_0x1206('0x60')+_0x2c512a);});_0x4f143b['on'](a22_0x1206('0x61'),function(_0x4f143b){console['log'](a22_0x1206('0x62'));this[a22_0x1206('0x5a')]();}[a22_0x1206('0x2a')](this));_0x4f143b['on'](a22_0x1206('0x63'),function(_0x4f143b){console['log'](a22_0x1206('0x63'));console[a22_0x1206('0x31')](a22_0x1206('0x64')+_0x1932a1);console[a22_0x1206('0x31')]('mediaType:\x20'+_0x56c964);this[a22_0x1206('0x4e')](this['tempFolder']+_0x1932a1)['then'](function(_0x209623){if(_0x209623){this[a22_0x1206('0x1a')]++;}this[a22_0x1206('0x5a')]();}[a22_0x1206('0x2a')](this));}['bind'](this));_0x4f143b['on']('stopped',function(_0x4f143b){console[a22_0x1206('0x31')](a22_0x1206('0x65'));});_0x4f143b['on'](a22_0x1206('0x66'),function(_0x4f143b){console[a22_0x1206('0x31')]('destroyed');});_0x4f143b['on']('retry',function(_0x4f143b){console['log'](a22_0x1206('0x67'));});}[a22_0x1206('0x68')](_0x2e80bc,_0x4caabb,_0x379980,_0x547606){console[a22_0x1206('0x31')](a22_0x1206('0x68'));console[a22_0x1206('0x31')](_0x2e80bc);const _0x5afd28=!![];let _0x51a766=0x0;const _0x3f2bc8='';console[a22_0x1206('0x31')](a22_0x1206('0x69')+_0x2e80bc+a22_0x1206('0x6a')+_0x4caabb);if(_0x51a766){if(_0x51a766>0x5){_0x547606(a22_0x1206('0x6b'),_0x2e80bc,_0x379980,null);return;}}else{_0x51a766=0x0;}const _0x3307b6=this['tempFolder']+_0x4caabb;let _0x26dc83;if(_0x547606===undefined){console['log']('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x2e80bc+'\x20to\x20'+_0x3307b6);_0x547606=function(_0xb599bb,_0x595da6){console[a22_0x1206('0x31')](a22_0x1206('0x6c'),_0xb599bb,_0x595da6);};}http['globalAgent'][a22_0x1206('0x6d')]=0x64;const _0x556a0e={'host':url[a22_0x1206('0x1f')](_0x2e80bc)[a22_0x1206('0x6e')],'port':0x50,'path':url[a22_0x1206('0x1f')](_0x2e80bc)[a22_0x1206('0x6f')],'agent':![]};const _0x4753f2=http[a22_0x1206('0x70')](_0x556a0e,function(_0x429308){let _0x2aa83d=0x0;let _0x27ce6c=0x0;function _0xb7c44c(){if(_0x2aa83d===undefined){console[a22_0x1206('0x31')](_0x4caabb+a22_0x1206('0x71')+_0x27ce6c+'/'+'?');}const _0x316383=_0x27ce6c/_0x2aa83d*0x64;console[a22_0x1206('0x31')](_0x4caabb+a22_0x1206('0x72')+_0x316383+'%\x09'+_0x27ce6c+'/'+_0x2aa83d);}console[a22_0x1206('0x31')](_0x4caabb+'\x20'+_0x429308[a22_0x1206('0x73')]);switch(_0x429308['statusCode']){case 0xc8:_0x2aa83d=_0x429308[a22_0x1206('0x74')]['content-length']||_0x3f2bc8;fs[a22_0x1206('0x75')](_0x3307b6,function(_0xd54e94,_0x12a351){if(!_0xd54e94){console['log'](a22_0x1206('0x76')+_0x3307b6);if(_0x12a351[a22_0x1206('0x77')]==_0x2aa83d){console[a22_0x1206('0x31')](a22_0x1206('0x78')+_0x2aa83d+')');console['log']('Redownloading');}else{console[a22_0x1206('0x31')](a22_0x1206('0x79')+_0x12a351[a22_0x1206('0x77')]+a22_0x1206('0x7a')+_0x2aa83d+')');}}_0x26dc83=fs[a22_0x1206('0x7b')](_0x3307b6);_0x429308[a22_0x1206('0x7c')](_0x26dc83);_0x429308['on']('data',function(_0x4cd39c){_0x27ce6c+=_0x4cd39c[a22_0x1206('0x3b')];_0xb7c44c();});_0x4753f2['on']('error',function(_0xd54e94){console[a22_0x1206('0x31')](a22_0x1206('0x7d'));console[a22_0x1206('0x31')](_0xd54e94);});_0x26dc83['on'](a22_0x1206('0x7e'),function(){console['log'](a22_0x1206('0x7f')+_0x2e80bc+a22_0x1206('0x6a')+_0x4caabb);_0x547606(null,_0x4caabb,_0x379980,_0x4caabb);}[a22_0x1206('0x2a')](this));});break;case 0x12e:const _0x5336cd=_0x429308[a22_0x1206('0x74')][a22_0x1206('0x80')];console[a22_0x1206('0x31')]('Redirect\x20'+_0x2e80bc+a22_0x1206('0x6a')+_0x5336cd);if(_0x51a766<0x5){this['downloadHTTPFile'](_0x5336cd,_0x4caabb,_0x547606,_0x51a766++);}else{console[a22_0x1206('0x61')](a22_0x1206('0x81')+_0x2e80bc+'.');_0x547606(a22_0x1206('0x82'),null,null,null);}return;case 0x194:console[a22_0x1206('0x31')](a22_0x1206('0x83')+_0x2e80bc);default:console['log'](a22_0x1206('0x84')+_0x2e80bc+a22_0x1206('0x85')+_0x429308[a22_0x1206('0x73')]);_0x4753f2[a22_0x1206('0x86')]();_0x547606(_0x429308[a22_0x1206('0x73')],null,null,null);return;}})['on'](a22_0x1206('0x61'),function(_0x15c16f){console['log'](a22_0x1206('0x87')+_0x2e80bc+'\x20'+_0x15c16f[a22_0x1206('0x88')]);_0x547606(_0x15c16f,null,null,null);});}[a22_0x1206('0x89')](_0x457974,_0x4288c1,_0x147870,_0x565db6){console[a22_0x1206('0x31')](a22_0x1206('0x89'));console[a22_0x1206('0x31')](_0x457974);console[a22_0x1206('0x31')](_0x4288c1);console[a22_0x1206('0x31')](_0x147870);console[a22_0x1206('0x31')](_0x565db6);if(_0x147870==a22_0x1206('0x4c')){const _0x2ada17=this[a22_0x1206('0x1b')][this[a22_0x1206('0x1a')]]['duration']!=null?this[a22_0x1206('0x1b')][this[a22_0x1206('0x1a')]][a22_0x1206('0x8a')]:0x1e;this[a22_0x1206('0x8b')](_0x565db6,_0x2ada17);}else if(_0x147870=='video'){if(_0x457974==null&&_0x4288c1!=''){this[a22_0x1206('0x1a')]++;}this['download']();}console[a22_0x1206('0x31')](this['currentFile']);}[a22_0x1206('0x8c')](_0x38caa2,_0x421de1,_0x563d75){progress(request(_0x38caa2),{})['on']('progress',function(_0xb601e3){console[a22_0x1206('0x31')](_0xb601e3);})['on'](a22_0x1206('0x61'),function(_0x5ad583){console[a22_0x1206('0x31')](a22_0x1206('0x8d'));this[a22_0x1206('0x5a')]();})['on']('end',function(){console[a22_0x1206('0x31')]('Downloaded:\x20'+_0x421de1);console[a22_0x1206('0x31')](a22_0x1206('0x8e')+_0x563d75);if(_0x563d75==a22_0x1206('0x4c')){const _0x1405ba=this[a22_0x1206('0x1b')][this['currentFile']][a22_0x1206('0x8a')]!=null?this[a22_0x1206('0x1b')][this[a22_0x1206('0x1a')]][a22_0x1206('0x8a')]:0x1e;this[a22_0x1206('0x8b')](_0x421de1,_0x1405ba);}else if(_0x563d75=='video'){this['currentFile']++;this[a22_0x1206('0x5a')]();}}[a22_0x1206('0x2a')](this))[a22_0x1206('0x7c')](fs['createWriteStream'](this['tempFolder']+_0x421de1));}[a22_0x1206('0x8b')](_0x1d40f5,_0x28ec81=0x1e){const _0x5008b0=this['tempFolder']+_0x1d40f5;console[a22_0x1206('0x31')](_0x5008b0);console[a22_0x1206('0x31')](_0x1d40f5);const _0x11bfe3=_0x1d40f5[a22_0x1206('0x49')]('.')[a22_0x1206('0x47')](0x0,-0x1)['join']('.');const _0x115bc7='ffmpeg';const _0x277029=['-y','-r',a22_0x1206('0x8f'),a22_0x1206('0x90'),'1',a22_0x1206('0x91'),a22_0x1206('0x92'),'-i',_0x5008b0,'-t',String(_0x28ec81),a22_0x1206('0x93'),a22_0x1206('0x94'),a22_0x1206('0x95'),a22_0x1206('0x96'),'-r','25',a22_0x1206('0x97'),a22_0x1206('0x98'),this['tempFolder']+_0x11bfe3+a22_0x1206('0x4b')];const _0x33868d=spawn(_0x115bc7,_0x277029);_0x33868d[a22_0x1206('0x99')]['on'](a22_0x1206('0x9a'),function(_0x218036){console[a22_0x1206('0x31')](a22_0x1206('0x9b')+_0x5008b0);});_0x33868d[a22_0x1206('0x9c')]['on'](a22_0x1206('0x9a'),function(_0x4cb6e6){console['log'](a22_0x1206('0x9d')+_0x4cb6e6);}['bind'](this));_0x33868d['on'](a22_0x1206('0x9e'),function(){console[a22_0x1206('0x31')]('finished\x20mp4\x20convert');this[a22_0x1206('0x1a')]++;this[a22_0x1206('0x5a')]();}[a22_0x1206('0x2a')](this));}[a22_0x1206('0x52')](_0xc9b80d){const _0x25a726=this[a22_0x1206('0x15')]+'/'+_0xc9b80d+a22_0x1206('0x4b');const _0x178014=youtubedl(a22_0x1206('0x9f')+_0xc9b80d,[a22_0x1206('0xa0')],{'cwd':__dirname});_0x178014['on'](a22_0x1206('0xa1'),function(_0x46f061){console[a22_0x1206('0x31')](a22_0x1206('0xa2'));console[a22_0x1206('0x31')](a22_0x1206('0xa3')+_0x46f061[a22_0x1206('0xa4')]);console[a22_0x1206('0x31')](a22_0x1206('0xa5')+_0x46f061[a22_0x1206('0x77')]);});_0x178014['on'](a22_0x1206('0xa6'),function complete(_0x47d0a5){'use strict';console['log']('filename:\x20'+_0x47d0a5['_filename']+a22_0x1206('0xa7'));});_0x178014['on'](a22_0x1206('0x63'),function(){console[a22_0x1206('0x31')](a22_0x1206('0xa8'));this['checkVideo'](_0x25a726)[a22_0x1206('0x4')](function(_0x4cab33){if(_0x4cab33){this['currentFile']++;}this['download']();}['bind'](this));}['bind'](this));_0x178014[a22_0x1206('0x7c')](fs[a22_0x1206('0x7b')](_0x25a726));}['finishProcess'](){console[a22_0x1206('0x31')]('Finishing');if(this['failDownloadFiles'][a22_0x1206('0x3b')]==0x0){fs[a22_0x1206('0x2e')](this[a22_0x1206('0x3e')],JSON[a22_0x1206('0x2f')](this['newPlayList']));let _0x5b5814='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x1206('0xa9')+'\x0d\x0a';for(const _0x5f1fec in this['downloadFiles']){const _0x406ca6=this['downloadFiles'][_0x5f1fec]['path'];const _0x4671e2=this['downloadFiles'][_0x5f1fec][a22_0x1206('0x44')];const _0x2fe04c=_0x406ca6[a22_0x1206('0x45')](_0x406ca6[a22_0x1206('0x46')]('/')+0x1);let _0x56e403=_0x2fe04c[a22_0x1206('0x49')]('.')[a22_0x1206('0x47')](0x0,-0x1)[a22_0x1206('0x48')]('.');if(_0x4671e2==a22_0x1206('0x4a')){_0x56e403=_0x406ca6;}_0x5b5814+='/home/osmc/luloclient/media/files/'+_0x56e403+a22_0x1206('0x4b')+'\x0d\x0a';}fsExtra[a22_0x1206('0xaa')](this['filesFolder']);fsExtra['copySync'](this['tempFolder'],this[a22_0x1206('0x4f')]);fs['writeFileSync'](this[a22_0x1206('0x18')],_0x5b5814);fsExtra[a22_0x1206('0xaa')](this[a22_0x1206('0x15')]);console[a22_0x1206('0x31')](a22_0x1206('0xab'));}else{console[a22_0x1206('0x31')](a22_0x1206('0xac'));this['currentFile']=0x0;setTimeout(function(){this[a22_0x1206('0x5a')]();}['bind'](this),0x1388);}}}exports[a22_0x1206('0xad')]=SyncPlaylistsService;