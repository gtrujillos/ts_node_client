var a22_0x5e24=['currentFile','playlistChanged','failDownloadFiles','newPlayList','httpClientService','init','config','parse','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','kodi','http://localhost','registerClient','loadMediaList','reportStatus','bind','checkDependencies','playlist','getItems','stringify','networkInterfaces','context','post','register\x20response:\x20','catch','log','deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','item','label','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','hasPlayListChanged','emptyDirSync','downloadFiles','push','length','download','reloadMediaList','existsSync','playListFile','toString','error','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','slice','join','split','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','removeSync','track','@type','Video','mediainfo\x20check:','includes','splice','Error:\x20','start','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','pathname','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','createWriteStream','pipe','data','finish','Downloaded\x20','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','downloadRequestFile','progress','Error\x20downloading\x20file','createImageVideo','ffmpeg','1/2','-pattern_type','libx264','yuv420p','scale=1920:1080','stdout','Converting\x20','close','finished\x20mp4\x20convert','--format=18','info','Download\x20started','filename:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTCPlayListM3U::M3U','/home/osmc/luloclient/media/files/','shutdown','now','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','spawn','youtube-dl','uuid/v4','config.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','tempFolder','temp/','filesFolder','playlist.txt','m3uFile','lulo_playlist.m3u'];(function(_0x147779,_0x15ca3a){var _0xb66e18=function(_0x3af634){while(--_0x3af634){_0x147779['push'](_0x147779['shift']());}};_0xb66e18(++_0x15ca3a);}(a22_0x5e24,0x92));var a22_0x59ad=function(_0x1d98e9,_0x2ce37a){_0x1d98e9=_0x1d98e9-0x0;var _0x3609cf=a22_0x5e24[_0x1d98e9];return _0x3609cf;};'use strict';var __awaiter=this&&this[a22_0x59ad('0x0')]||function(_0x495918,_0x2a6e4b,_0x4b28ea,_0x564af1){return new(_0x4b28ea||(_0x4b28ea=Promise))(function(_0x273e59,_0x5e2b2c){function _0x30b4d1(_0x1489cd){try{_0xc79e0b(_0x564af1[a22_0x59ad('0x1')](_0x1489cd));}catch(_0x40c865){_0x5e2b2c(_0x40c865);}}function _0x44eb1d(_0x58a58d){try{_0xc79e0b(_0x564af1[a22_0x59ad('0x2')](_0x58a58d));}catch(_0x4defda){_0x5e2b2c(_0x4defda);}}function _0xc79e0b(_0x4c63ca){_0x4c63ca[a22_0x59ad('0x3')]?_0x273e59(_0x4c63ca[a22_0x59ad('0x4')]):new _0x4b28ea(function(_0x273e59){_0x273e59(_0x4c63ca[a22_0x59ad('0x4')]);})[a22_0x59ad('0x5')](_0x30b4d1,_0x44eb1d);}_0xc79e0b((_0x564af1=_0x564af1[a22_0x59ad('0x6')](_0x495918,_0x2a6e4b||[]))[a22_0x59ad('0x1')]());});};Object['defineProperty'](exports,a22_0x59ad('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x59ad('0x8'));const mediainfo=require(a22_0x59ad('0x9'));const fs=require('fs');const url=require(a22_0x59ad('0xa'));const http=require(a22_0x59ad('0xb'));const fsExtra=require(a22_0x59ad('0xc'));const request=require(a22_0x59ad('0xd'));const progress=require(a22_0x59ad('0xe'));const spawn=require(a22_0x59ad('0xf'))[a22_0x59ad('0x10')];const isImage=require('is-image');const format=require('string-template');const os=require('os');const youtubedl=require(a22_0x59ad('0x11'));const uuidv4=require(a22_0x59ad('0x12'));const configFile=a22_0x59ad('0x13');const contextFile='context.json';const urlExists=require(a22_0x59ad('0x14'));const kodi_rpc=require(a22_0x59ad('0x15'));const Downloader=require(a22_0x59ad('0x16'));class SyncPlaylistsService{constructor(){this[a22_0x59ad('0x17')]='media/';this[a22_0x59ad('0x18')]=this['mediaFolder']+a22_0x59ad('0x19');this[a22_0x59ad('0x1a')]=this[a22_0x59ad('0x17')]+'files/';this['playListFile']=this[a22_0x59ad('0x17')]+a22_0x59ad('0x1b');this[a22_0x59ad('0x1c')]=this[a22_0x59ad('0x1a')]+a22_0x59ad('0x1d');this[a22_0x59ad('0x1e')]=0x0;this[a22_0x59ad('0x1f')]=![];this['downloadFiles']=[];this[a22_0x59ad('0x20')]=[];this[a22_0x59ad('0x21')]={};this[a22_0x59ad('0x22')]=new HttpClientService_1['HttpClientService']();}[a22_0x59ad('0x23')](){this[a22_0x59ad('0x24')]=JSON[a22_0x59ad('0x25')](fs[a22_0x59ad('0x26')](configFile));this['context']=JSON[a22_0x59ad('0x25')](fs['readFileSync'](contextFile));this[a22_0x59ad('0x27')]=this['config'][a22_0x59ad('0x27')];this[a22_0x59ad('0x28')]=process[a22_0x59ad('0x29')][a22_0x59ad('0x2a')]+a22_0x59ad('0x2b');this[a22_0x59ad('0x2c')]=this[a22_0x59ad('0x28')]+'api/player_playlist.php?player_id={0}';this[a22_0x59ad('0x2d')]=new kodi_rpc({'url':a22_0x59ad('0x2e')});this['checkDependencies']();this[a22_0x59ad('0x2f')]();this['checkFolders']();this[a22_0x59ad('0x30')]();setInterval(function(){this[a22_0x59ad('0x31')]();}[a22_0x59ad('0x32')](this),0x2710);setInterval(function(){this[a22_0x59ad('0x2f')]();}['bind'](this),0xea60);}[a22_0x59ad('0x33')](){}[a22_0x59ad('0x2f')](){this[a22_0x59ad('0x2d')][a22_0x59ad('0x34')][a22_0x59ad('0x35')](0x1)[a22_0x59ad('0x5')](function(_0x399f3c){const _0x43ea90=JSON[a22_0x59ad('0x36')](_0x399f3c);const _0x5987af={'player_id':this[a22_0x59ad('0x27')],'device_uuid':this[a22_0x59ad('0x24')]['deviceUuid'],'network_info':JSON[a22_0x59ad('0x36')](os[a22_0x59ad('0x37')]()),'firmware_info':JSON[a22_0x59ad('0x36')](this[a22_0x59ad('0x38')]),'playlist':_0x43ea90,'playing_item':'','status':0x0};this[a22_0x59ad('0x22')][a22_0x59ad('0x39')]('http://restapi.lulo.run/player_devices/register',_0x5987af,![])['then'](function(_0x1de54c){console['log'](a22_0x59ad('0x3a')+Date());})[a22_0x59ad('0x3b')](function(_0x27f80c){});console[a22_0x59ad('0x3c')](_0x5987af);}[a22_0x59ad('0x32')](this));const _0x509e36=this['config'][a22_0x59ad('0x3d')];if(!_0x509e36||_0x509e36==''){this[a22_0x59ad('0x24')][a22_0x59ad('0x3d')]=uuidv4();this[a22_0x59ad('0x24')]={'deviceUuid':this[a22_0x59ad('0x24')][a22_0x59ad('0x3d')],'playerId':this[a22_0x59ad('0x24')][a22_0x59ad('0x27')]};fs[a22_0x59ad('0x3e')](configFile,JSON['stringify'](this[a22_0x59ad('0x24')]));}}[a22_0x59ad('0x31')](){console[a22_0x59ad('0x3c')]('reportStatus');this['kodi'][a22_0x59ad('0x3f')][a22_0x59ad('0x40')]()[a22_0x59ad('0x5')](function(_0x3ed60a){const _0x1dda43=_0x3ed60a[a22_0x59ad('0x41')][a22_0x59ad('0x42')];const _0x1c6173={'player_id':this[a22_0x59ad('0x27')],'device_uuid':this[a22_0x59ad('0x24')][a22_0x59ad('0x3d')],'status':_0x1dda43!=''&&_0x1dda43!=null?0x1:0x0,'playing_item':_0x1dda43};this[a22_0x59ad('0x22')][a22_0x59ad('0x39')](a22_0x59ad('0x43'),_0x1c6173,![])[a22_0x59ad('0x5')](function(_0x8ff624){console[a22_0x59ad('0x3c')](a22_0x59ad('0x44')+Date());})['catch'](function(_0x3f3cf5){});}[a22_0x59ad('0x32')](this));}['checkFolders'](){fsExtra[a22_0x59ad('0x45')](this[a22_0x59ad('0x17')],_0x4c7d47=>{});fsExtra['ensureDir'](this[a22_0x59ad('0x18')],_0xdf43b9=>{});fsExtra['ensureDir'](this[a22_0x59ad('0x1a')],_0x3ea705=>{});}[a22_0x59ad('0x30')](){const _0x5b894a=format(this[a22_0x59ad('0x2c')],this['playerId']);console[a22_0x59ad('0x3c')](_0x5b894a);request({'url':_0x5b894a,'json':!![]},function(_0x42238a,_0x63d67c,_0x1366f2){this['newPlayList']=_0x1366f2;this[a22_0x59ad('0x1f')]=this[a22_0x59ad('0x46')]();fsExtra[a22_0x59ad('0x47')](this[a22_0x59ad('0x18')]);this[a22_0x59ad('0x48')]=[];this[a22_0x59ad('0x20')]=[];this[a22_0x59ad('0x1e')]=0x0;for(const _0xacfd19 in _0x1366f2){this[a22_0x59ad('0x48')][a22_0x59ad('0x49')](_0x1366f2[_0xacfd19]);}console['log']('Total:\x20'+this[a22_0x59ad('0x48')]['length']);if(this[a22_0x59ad('0x48')][a22_0x59ad('0x4a')]>0x0){this[a22_0x59ad('0x4b')]();}}['bind'](this));}[a22_0x59ad('0x4c')](){if(fsExtra[a22_0x59ad('0x4d')](this[a22_0x59ad('0x4e')])){fsExtra['removeSync'](this[a22_0x59ad('0x4e')]);}this[a22_0x59ad('0x30')]();}[a22_0x59ad('0x46')](){const _0x388132=JSON[a22_0x59ad('0x36')](this[a22_0x59ad('0x21')]);try{if(!fs[a22_0x59ad('0x4d')](this[a22_0x59ad('0x4e')])){return!![];}else{const _0xe3f0c0=fs[a22_0x59ad('0x26')](this[a22_0x59ad('0x4e')])[a22_0x59ad('0x4f')]();if(_0xe3f0c0!=_0x388132){return!![];}}}catch(_0x2d4e62){console[a22_0x59ad('0x50')](_0x2d4e62);}return![];}[a22_0x59ad('0x4b')](){console['log']('this.currentFile:\x20'+this[a22_0x59ad('0x1e')]+a22_0x59ad('0x51')+this[a22_0x59ad('0x48')]['length']);if(this['currentFile']>=this[a22_0x59ad('0x48')][a22_0x59ad('0x4a')]){this[a22_0x59ad('0x52')]();return;}const _0x15da40=String(this[a22_0x59ad('0x48')][this[a22_0x59ad('0x1e')]][a22_0x59ad('0x53')]);const _0x512899=this[a22_0x59ad('0x48')][this['currentFile']][a22_0x59ad('0x54')];let _0x2277f9=_0x15da40[a22_0x59ad('0x55')](_0x15da40[a22_0x59ad('0x56')]('/')+0x1);const _0x74ea23=_0x2277f9['split']('.')[a22_0x59ad('0x57')](0x0,-0x1)[a22_0x59ad('0x58')]('.');let _0xe14fa4=this['baseURL']+_0x15da40;const _0xff4e14=_0xe14fa4[a22_0x59ad('0x59')]('.')[a22_0x59ad('0x57')](0x0,-0x1)['join']('.');if(_0x512899==a22_0x59ad('0x5a')){_0x2277f9=_0x2277f9+a22_0x59ad('0x5b');}else if(_0x512899==a22_0x59ad('0x5c')){_0x2277f9=_0x74ea23+a22_0x59ad('0x5b');_0xe14fa4=_0xff4e14+a22_0x59ad('0x5b');}console['log'](a22_0x59ad('0x5d'));console['log'](_0x15da40);console[a22_0x59ad('0x3c')](_0x512899);console[a22_0x59ad('0x3c')](_0x2277f9);console[a22_0x59ad('0x3c')](_0xe14fa4);console[a22_0x59ad('0x3c')](_0x74ea23);console[a22_0x59ad('0x3c')](_0xff4e14);console['log'](a22_0x59ad('0x5d'));if(fsExtra['existsSync'](this[a22_0x59ad('0x18')]+_0x2277f9)){this[a22_0x59ad('0x5e')](this['tempFolder']+_0x2277f9)['then'](function(_0x1ce539){if(_0x1ce539){this['currentFile']++;}else{this[a22_0x59ad('0x1f')]=!![];}this['download']();}[a22_0x59ad('0x32')](this));}else if(fsExtra[a22_0x59ad('0x4d')](this['filesFolder']+_0x2277f9)){this[a22_0x59ad('0x5e')](this['filesFolder']+_0x2277f9)[a22_0x59ad('0x5')](function(_0x2d9a94){if(_0x2d9a94){fsExtra[a22_0x59ad('0x5f')](this['filesFolder']+_0x2277f9,this[a22_0x59ad('0x18')]+_0x2277f9);this[a22_0x59ad('0x1e')]++;}else{this[a22_0x59ad('0x1f')]=!![];}this[a22_0x59ad('0x4b')]();}['bind'](this));}else{console['log'](a22_0x59ad('0x60')+_0xe14fa4);this['playlistChanged']=!![];if(_0x512899==a22_0x59ad('0x5a')){this[a22_0x59ad('0x61')](_0x15da40);}else{this[a22_0x59ad('0x62')](_0xe14fa4,_0x2277f9,_0x512899);}}}[a22_0x59ad('0x5e')](_0x159f68){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x59ad('0x3c')](a22_0x59ad('0x63')+_0x159f68);const _0x3381ee=yield mediainfo(_0x159f68)[a22_0x59ad('0x3b')](_0x3be526=>{console[a22_0x59ad('0x3c')](_0x3be526);fsExtra[a22_0x59ad('0x64')](_0x159f68);return![];});const _0x51500d=_0x3381ee['media']['track'][a22_0x59ad('0x4a')]>0x1&&_0x3381ee['media'][a22_0x59ad('0x65')][0x1][a22_0x59ad('0x66')]==a22_0x59ad('0x67');if(!_0x51500d){fsExtra[a22_0x59ad('0x64')](_0x159f68);}console[a22_0x59ad('0x3c')](a22_0x59ad('0x68')+_0x51500d);return _0x51500d;});}[a22_0x59ad('0x62')](_0x46797c,_0x61b691,_0x57f24e){const _0x242f9f=new Downloader();console[a22_0x59ad('0x3c')](_0x46797c);console[a22_0x59ad('0x3c')](_0x61b691);console[a22_0x59ad('0x3c')](_0x57f24e);const _0x4d58c1=_0x242f9f[a22_0x59ad('0x4b')](_0x46797c,this[a22_0x59ad('0x18')]+_0x61b691);urlExists(_0x46797c,function(_0x34bd38,_0x4e05f0){if(_0x4e05f0){if(this[a22_0x59ad('0x20')][a22_0x59ad('0x69')](this[a22_0x59ad('0x1e')])){const _0xfe82f7=this['failDownloadFiles']['indexOf'](this[a22_0x59ad('0x1e')]);if(_0xfe82f7>-0x1){this[a22_0x59ad('0x20')][a22_0x59ad('0x6a')](_0xfe82f7,0x1);}}console[a22_0x59ad('0x3c')]('downloading:\x20'+_0x46797c);_0x4d58c1['start']();}else{if(!this[a22_0x59ad('0x20')][a22_0x59ad('0x69')](this[a22_0x59ad('0x1e')])){this[a22_0x59ad('0x20')][a22_0x59ad('0x49')](this[a22_0x59ad('0x1e')]);}console['log'](a22_0x59ad('0x6b')+_0x46797c);this['currentFile']++;this[a22_0x59ad('0x4b')]();}}[a22_0x59ad('0x32')](this));_0x4d58c1['on'](a22_0x59ad('0x6c'),function(_0x4d58c1){console['log'](a22_0x59ad('0x6d')+_0x46797c);});_0x4d58c1['on'](a22_0x59ad('0x50'),function(_0x4d58c1){console['log'](a22_0x59ad('0x6e'));this[a22_0x59ad('0x4b')]();}[a22_0x59ad('0x32')](this));_0x4d58c1['on'](a22_0x59ad('0x6f'),function(_0x4d58c1){console[a22_0x59ad('0x3c')](a22_0x59ad('0x6f'));console[a22_0x59ad('0x3c')](a22_0x59ad('0x70')+_0x61b691);console[a22_0x59ad('0x3c')](a22_0x59ad('0x71')+_0x57f24e);this[a22_0x59ad('0x5e')](this['tempFolder']+_0x61b691)[a22_0x59ad('0x5')](function(_0x9d0603){if(_0x9d0603){this['currentFile']++;}this[a22_0x59ad('0x4b')]();}[a22_0x59ad('0x32')](this));}['bind'](this));_0x4d58c1['on']('stopped',function(_0x4d58c1){console[a22_0x59ad('0x3c')]('stopped');});_0x4d58c1['on']('destroyed',function(_0x4d58c1){console[a22_0x59ad('0x3c')]('destroyed');});_0x4d58c1['on']('retry',function(_0x4d58c1){console['log'](a22_0x59ad('0x72'));});}[a22_0x59ad('0x73')](_0x2ed5f2,_0x4947b0,_0x3d4dd1,_0x250e48){console[a22_0x59ad('0x3c')](a22_0x59ad('0x73'));console['log'](_0x2ed5f2);const _0x2656e9=!![];let _0x10ef2b=0x0;const _0x11ebcb='';console['log']('Attempting\x20to\x20download\x20'+_0x2ed5f2+a22_0x59ad('0x74')+_0x4947b0);if(_0x10ef2b){if(_0x10ef2b>0x5){_0x250e48(a22_0x59ad('0x75'),_0x2ed5f2,_0x3d4dd1,null);return;}}else{_0x10ef2b=0x0;}const _0x1f41fc=this[a22_0x59ad('0x18')]+_0x4947b0;let _0x5bea46;if(_0x250e48===undefined){console[a22_0x59ad('0x3c')](a22_0x59ad('0x76')+_0x2ed5f2+a22_0x59ad('0x74')+_0x1f41fc);_0x250e48=function(_0x578e85,_0x3c1763){console[a22_0x59ad('0x3c')](a22_0x59ad('0x77'),_0x578e85,_0x3c1763);};}http[a22_0x59ad('0x78')][a22_0x59ad('0x79')]=0x64;const _0x5d7257={'host':url[a22_0x59ad('0x25')](_0x2ed5f2)['host'],'port':0x50,'path':url['parse'](_0x2ed5f2)[a22_0x59ad('0x7a')],'agent':![]};const _0x4496e3=http['get'](_0x5d7257,function(_0x1a6bf9){let _0x2d1e63=0x0;let _0x1c6644=0x0;function _0x292faf(){if(_0x2d1e63===undefined){console['log'](_0x4947b0+a22_0x59ad('0x7b')+_0x1c6644+'/'+'?');}const _0x41fb41=_0x1c6644/_0x2d1e63*0x64;console['log'](_0x4947b0+a22_0x59ad('0x7c')+_0x41fb41+'%\x09'+_0x1c6644+'/'+_0x2d1e63);}console[a22_0x59ad('0x3c')](_0x4947b0+'\x20'+_0x1a6bf9[a22_0x59ad('0x7d')]);switch(_0x1a6bf9[a22_0x59ad('0x7d')]){case 0xc8:_0x2d1e63=_0x1a6bf9[a22_0x59ad('0x7e')][a22_0x59ad('0x7f')]||_0x11ebcb;fs[a22_0x59ad('0x80')](_0x1f41fc,function(_0x5e127b,_0x1b0929){if(!_0x5e127b){console[a22_0x59ad('0x3c')](a22_0x59ad('0x81')+_0x1f41fc);if(_0x1b0929[a22_0x59ad('0x82')]==_0x2d1e63){console[a22_0x59ad('0x3c')](a22_0x59ad('0x83')+_0x2d1e63+')');console[a22_0x59ad('0x3c')](a22_0x59ad('0x84'));}else{console[a22_0x59ad('0x3c')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x1b0929[a22_0x59ad('0x82')]+a22_0x59ad('0x85')+_0x2d1e63+')');}}_0x5bea46=fs[a22_0x59ad('0x86')](_0x1f41fc);_0x1a6bf9[a22_0x59ad('0x87')](_0x5bea46);_0x1a6bf9['on'](a22_0x59ad('0x88'),function(_0x7354df){_0x1c6644+=_0x7354df[a22_0x59ad('0x4a')];_0x292faf();});_0x4496e3['on']('error',function(_0x5e127b){console[a22_0x59ad('0x3c')]('err:\x20');console[a22_0x59ad('0x3c')](_0x5e127b);});_0x5bea46['on'](a22_0x59ad('0x89'),function(){console[a22_0x59ad('0x3c')](a22_0x59ad('0x8a')+_0x2ed5f2+a22_0x59ad('0x74')+_0x4947b0);_0x250e48(null,_0x4947b0,_0x3d4dd1,_0x4947b0);}[a22_0x59ad('0x32')](this));});break;case 0x12e:const _0x28331d=_0x1a6bf9['headers']['location'];console[a22_0x59ad('0x3c')](a22_0x59ad('0x8b')+_0x2ed5f2+a22_0x59ad('0x74')+_0x28331d);if(_0x10ef2b<0x5){this[a22_0x59ad('0x73')](_0x28331d,_0x4947b0,_0x250e48,_0x10ef2b++);}else{console[a22_0x59ad('0x50')](a22_0x59ad('0x8c')+_0x2ed5f2+'.');_0x250e48(a22_0x59ad('0x8d'),null,null,null);}return;case 0x194:console['log'](a22_0x59ad('0x8e')+_0x2ed5f2);default:console[a22_0x59ad('0x3c')](a22_0x59ad('0x8f')+_0x2ed5f2+a22_0x59ad('0x90')+_0x1a6bf9[a22_0x59ad('0x7d')]);_0x4496e3[a22_0x59ad('0x91')]();_0x250e48(_0x1a6bf9[a22_0x59ad('0x7d')],null,null,null);return;}})['on']('error',function(_0x55aacf){console['log'](a22_0x59ad('0x92')+_0x2ed5f2+'\x20'+_0x55aacf['message']);_0x250e48(_0x55aacf,null,null,null);});}['downloadHTTPFileCallback'](_0x524210,_0x1037ff,_0x402ab2,_0xf170d4){console[a22_0x59ad('0x3c')](a22_0x59ad('0x93'));console[a22_0x59ad('0x3c')](_0x524210);console[a22_0x59ad('0x3c')](_0x1037ff);console[a22_0x59ad('0x3c')](_0x402ab2);console[a22_0x59ad('0x3c')](_0xf170d4);if(_0x402ab2=='image'){const _0x2f6466=this['downloadFiles'][this[a22_0x59ad('0x1e')]][a22_0x59ad('0x94')]!=null?this[a22_0x59ad('0x48')][this[a22_0x59ad('0x1e')]][a22_0x59ad('0x94')]:0x1e;this['createImageVideo'](_0xf170d4,_0x2f6466);}else if(_0x402ab2=='video'){if(_0x524210==null&&_0x1037ff!=''){this['currentFile']++;}this[a22_0x59ad('0x4b')]();}console[a22_0x59ad('0x3c')](this['currentFile']);}[a22_0x59ad('0x95')](_0x121f2f,_0x2bf2f0,_0x3be126){progress(request(_0x121f2f),{})['on'](a22_0x59ad('0x96'),function(_0x58c1e5){console[a22_0x59ad('0x3c')](_0x58c1e5);})['on'](a22_0x59ad('0x50'),function(_0x2c83fc){console[a22_0x59ad('0x3c')](a22_0x59ad('0x97'));this[a22_0x59ad('0x4b')]();})['on'](a22_0x59ad('0x6f'),function(){console[a22_0x59ad('0x3c')](a22_0x59ad('0x70')+_0x2bf2f0);console[a22_0x59ad('0x3c')]('mediaType:\x20'+_0x3be126);if(_0x3be126=='image'){const _0x5a3a71=this['downloadFiles'][this[a22_0x59ad('0x1e')]][a22_0x59ad('0x94')]!=null?this[a22_0x59ad('0x48')][this['currentFile']][a22_0x59ad('0x94')]:0x1e;this[a22_0x59ad('0x98')](_0x2bf2f0,_0x5a3a71);}else if(_0x3be126=='video'){this['currentFile']++;this[a22_0x59ad('0x4b')]();}}[a22_0x59ad('0x32')](this))[a22_0x59ad('0x87')](fs[a22_0x59ad('0x86')](this[a22_0x59ad('0x18')]+_0x2bf2f0));}['createImageVideo'](_0x5bd400,_0x499771=0x1e){const _0x223f56=this[a22_0x59ad('0x18')]+_0x5bd400;console[a22_0x59ad('0x3c')](_0x223f56);console[a22_0x59ad('0x3c')](_0x5bd400);const _0x1880e7=_0x5bd400[a22_0x59ad('0x59')]('.')[a22_0x59ad('0x57')](0x0,-0x1)[a22_0x59ad('0x58')]('.');const _0x2fae04=a22_0x59ad('0x99');const _0x59a31e=['-y','-r',a22_0x59ad('0x9a'),'-loop','1',a22_0x59ad('0x9b'),'glob','-i',_0x223f56,'-t',String(_0x499771),'-c:v',a22_0x59ad('0x9c'),'-pix_fmt',a22_0x59ad('0x9d'),'-r','25','-vf',a22_0x59ad('0x9e'),this[a22_0x59ad('0x18')]+_0x1880e7+a22_0x59ad('0x5b')];const _0x3d6def=spawn(_0x2fae04,_0x59a31e);_0x3d6def[a22_0x59ad('0x9f')]['on'](a22_0x59ad('0x88'),function(_0x59c8af){console[a22_0x59ad('0x3c')](a22_0x59ad('0xa0')+_0x223f56);});_0x3d6def['stderr']['on'](a22_0x59ad('0x88'),function(_0x180117){console[a22_0x59ad('0x3c')]('stderr:\x20'+_0x180117);}[a22_0x59ad('0x32')](this));_0x3d6def['on'](a22_0x59ad('0xa1'),function(){console[a22_0x59ad('0x3c')](a22_0x59ad('0xa2'));this[a22_0x59ad('0x1e')]++;this['download']();}[a22_0x59ad('0x32')](this));}[a22_0x59ad('0x61')](_0x591c5f){const _0x352a21=this[a22_0x59ad('0x18')]+'/'+_0x591c5f+a22_0x59ad('0x5b');const _0x4d9717=youtubedl('http://www.youtube.com/watch?v='+_0x591c5f,[a22_0x59ad('0xa3')],{'cwd':__dirname});_0x4d9717['on'](a22_0x59ad('0xa4'),function(_0x209899){console[a22_0x59ad('0x3c')](a22_0x59ad('0xa5'));console[a22_0x59ad('0x3c')](a22_0x59ad('0xa6')+_0x209899['_filename']);console[a22_0x59ad('0x3c')]('size:\x20'+_0x209899[a22_0x59ad('0x82')]);});_0x4d9717['on'](a22_0x59ad('0xa7'),function complete(_0x11ac8d){'use strict';console['log'](a22_0x59ad('0xa6')+_0x11ac8d['_filename']+a22_0x59ad('0xa8'));});_0x4d9717['on'](a22_0x59ad('0x6f'),function(){console[a22_0x59ad('0x3c')](a22_0x59ad('0xa9'));this[a22_0x59ad('0x5e')](_0x352a21)[a22_0x59ad('0x5')](function(_0x4f6a50){if(_0x4f6a50){this[a22_0x59ad('0x1e')]++;}this[a22_0x59ad('0x4b')]();}[a22_0x59ad('0x32')](this));}[a22_0x59ad('0x32')](this));_0x4d9717['pipe'](fs[a22_0x59ad('0x86')](_0x352a21));}[a22_0x59ad('0x52')](){console[a22_0x59ad('0x3c')]('Finishing');if(this[a22_0x59ad('0x1f')]){if(this[a22_0x59ad('0x20')]['length']==0x0){fs['writeFileSync'](this['playListFile'],JSON['stringify'](this[a22_0x59ad('0x21')]));let _0x3b32a9=a22_0x59ad('0xaa')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x3ad63e in this[a22_0x59ad('0x48')]){const _0x51fab7=this[a22_0x59ad('0x48')][_0x3ad63e][a22_0x59ad('0x53')];const _0x3fed2e=this[a22_0x59ad('0x48')][_0x3ad63e][a22_0x59ad('0x54')];const _0x5eee5c=_0x51fab7[a22_0x59ad('0x55')](_0x51fab7[a22_0x59ad('0x56')]('/')+0x1);let _0x5cc2ff=_0x5eee5c['split']('.')['slice'](0x0,-0x1)['join']('.');if(_0x3fed2e==a22_0x59ad('0x5a')){_0x5cc2ff=_0x51fab7;}_0x3b32a9+=a22_0x59ad('0xab')+_0x5cc2ff+a22_0x59ad('0x5b')+'\x0d\x0a';}fsExtra[a22_0x59ad('0x47')](this['filesFolder']);fsExtra['copySync'](this[a22_0x59ad('0x18')],this[a22_0x59ad('0x1a')]);fsExtra[a22_0x59ad('0x3e')](this['m3uFile'],_0x3b32a9);fsExtra[a22_0x59ad('0x47')](this[a22_0x59ad('0x18')]);console['log']('Rebooting..');const _0x12af3d=spawn(a22_0x59ad('0xac'),['-r',a22_0x59ad('0xad')]);}else{console[a22_0x59ad('0x3c')](a22_0x59ad('0xae'));this[a22_0x59ad('0x1e')]=0x0;setTimeout(function(){this[a22_0x59ad('0x4b')]();}[a22_0x59ad('0x32')](this),0x1388);}}else{console[a22_0x59ad('0x3c')]('No\x20playlist\x20changes.');}}}exports[a22_0x59ad('0xaf')]=SyncPlaylistsService;