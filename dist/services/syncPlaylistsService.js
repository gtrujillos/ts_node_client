var a25_0x3373=['config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','kodiHost','checkDependencies','registerClient','checkFolders','getStatus','bind','playlist','then','stringify','networkInterfaces','version','httpClientService','post','log','register\x20response:\x20','catch','deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','label','reportStatus','reportStatus\x20playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','loadMediaList','loadMediaList:\x20','newPlayList','hasPlayListChanged','emptyDirSync','currentFile','push','length','download','reloadMediaList','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','**********+','playlistChanged','copySync','Downloading:\x20','downloadYouTube','downloader','checkVideo','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','indexOf','splice','downloading:\x20','start','start:\x20','error:\x20','end','Downloaded:\x20','stopped','destroyed','retry','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','size','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','data','err:\x20','Downloaded\x20','location','Redirect\x20','error','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','video','Error\x20downloading\x20file','mediaType:\x20','image','duration','createImageVideo','pipe','createWriteStream','ffmpeg','1/2','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','.mp4','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--no-check-certificate','Download\x20started','filename:\x20','size:\x20','complete','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','m3uContent:\x20','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','updateSettings','header_active','setRss','enableClock','kodiCommandClient','CECStandby()','turnOnTV','CECActivateSource()','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','set','Builder','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','kodi-send\x20--action=\x22','jsonrpcClient\x20data','/jsonrpc','SyncPlaylistsService','done','value','apply','next','__esModule','./playerService','http','request','request-progress','child_process','is-image','string-template','youtube-dl','uuid/v4','config.json','package.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','filesFolder','files/','playListFile','m3uFile','downloadFiles','failDownloadFiles','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','HttpClientService','playerService'];(function(_0x4dd0bb,_0x265c1a){var _0x3d5548=function(_0x559af2){while(--_0x559af2){_0x4dd0bb['push'](_0x4dd0bb['shift']());}};_0x3d5548(++_0x265c1a);}(a25_0x3373,0x1ae));var a25_0x16f1=function(_0x4b5525,_0x266292){_0x4b5525=_0x4b5525-0x0;var _0x214cf6=a25_0x3373[_0x4b5525];return _0x214cf6;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x27c5a0,_0x521936,_0x5569c8,_0x4850de){function _0x5c01dc(_0xe3fe00){return _0xe3fe00 instanceof _0x5569c8?_0xe3fe00:new _0x5569c8(function(_0x3a7e32){_0x3a7e32(_0xe3fe00);});}return new(_0x5569c8||(_0x5569c8=Promise))(function(_0x2830a1,_0x22d2d){function _0x20c23a(_0x579a29){try{_0x5c9f09(_0x4850de['next'](_0x579a29));}catch(_0x105cb2){_0x22d2d(_0x105cb2);}}function _0x5bf33e(_0xe72e89){try{_0x5c9f09(_0x4850de['throw'](_0xe72e89));}catch(_0x44f280){_0x22d2d(_0x44f280);}}function _0x5c9f09(_0x476846){_0x476846[a25_0x16f1('0x0')]?_0x2830a1(_0x476846[a25_0x16f1('0x1')]):_0x5c01dc(_0x476846[a25_0x16f1('0x1')])['then'](_0x20c23a,_0x5bf33e);}_0x5c9f09((_0x4850de=_0x4850de[a25_0x16f1('0x2')](_0x27c5a0,_0x521936||[]))[a25_0x16f1('0x3')]());});};Object['defineProperty'](exports,a25_0x16f1('0x4'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a25_0x16f1('0x5'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require('url');const http=require(a25_0x16f1('0x6'));const fsExtra=require('fs-extra');const request=require(a25_0x16f1('0x7'));const progress=require(a25_0x16f1('0x8'));const spawn=require(a25_0x16f1('0x9'))['spawn'];const exec=require(a25_0x16f1('0x9'))['exec'];const isImage=require(a25_0x16f1('0xa'));const format=require(a25_0x16f1('0xb'));const os=require('os');const youtubedl=require(a25_0x16f1('0xc'));const uuidv4=require(a25_0x16f1('0xd'));const configFile=a25_0x16f1('0xe');const contextFile=a25_0x16f1('0xf');const urlExists=require(a25_0x16f1('0x10'));const kodi_rpc=require(a25_0x16f1('0x11'));const Downloader=require(a25_0x16f1('0x12'));class SyncPlaylistsService{constructor(){this[a25_0x16f1('0x13')]=a25_0x16f1('0x14');this[a25_0x16f1('0x15')]=this[a25_0x16f1('0x13')]+'temp/';this[a25_0x16f1('0x16')]=this[a25_0x16f1('0x13')]+a25_0x16f1('0x17');this[a25_0x16f1('0x18')]=this[a25_0x16f1('0x13')]+'playlist.txt';this[a25_0x16f1('0x19')]=this[a25_0x16f1('0x16')]+'lulo_playlist.m3u';this['currentFile']=0x0;this['playlistChanged']=![];this[a25_0x16f1('0x1a')]=[];this[a25_0x16f1('0x1b')]=[];this['newPlayList']={};this['kodiHost']=a25_0x16f1('0x1c');this[a25_0x16f1('0x1d')]=a25_0x16f1('0x1e');this[a25_0x16f1('0x1f')]=a25_0x16f1('0x20');this[a25_0x16f1('0x21')]=![];this['httpClientService']=new HttpClientService_1[(a25_0x16f1('0x22'))]();this[a25_0x16f1('0x23')]=new playerService_1['PlayerService']();}['init'](){this[a25_0x16f1('0x24')]=JSON[a25_0x16f1('0x25')](fs[a25_0x16f1('0x26')](configFile));this[a25_0x16f1('0x27')]=JSON[a25_0x16f1('0x25')](fs['readFileSync'](contextFile));this[a25_0x16f1('0x28')]=this[a25_0x16f1('0x24')][a25_0x16f1('0x28')];this[a25_0x16f1('0x29')]=process[a25_0x16f1('0x2a')][a25_0x16f1('0x2b')]+a25_0x16f1('0x2c');this[a25_0x16f1('0x2d')]=this['baseURL']+a25_0x16f1('0x2e');this[a25_0x16f1('0x2f')]=this['baseURL']+'api/player.php?player_id={0}';this[a25_0x16f1('0x30')]=new kodi_rpc({'url':this[a25_0x16f1('0x31')],'user':this[a25_0x16f1('0x1d')],'password':this[a25_0x16f1('0x1f')]});this[a25_0x16f1('0x32')]();this[a25_0x16f1('0x33')]();this[a25_0x16f1('0x34')]();this['loadMediaList']();this['updateSettings']();setInterval(function(){this[a25_0x16f1('0x35')]();}[a25_0x16f1('0x36')](this),0x2710);setInterval(function(){this['registerClient']();}['bind'](this),0x493e0);}[a25_0x16f1('0x32')](){}[a25_0x16f1('0x33')](){this[a25_0x16f1('0x30')][a25_0x16f1('0x37')]['getItems'](0x1)[a25_0x16f1('0x38')](function(_0x243246){const _0x2e93ff=JSON[a25_0x16f1('0x39')](_0x243246);const _0x137f15={'player_id':this[a25_0x16f1('0x28')],'device_uuid':this[a25_0x16f1('0x24')]['deviceUuid'],'network_info':JSON[a25_0x16f1('0x39')](os[a25_0x16f1('0x3a')]()),'firmware_info':JSON['stringify'](this[a25_0x16f1('0x27')][a25_0x16f1('0x3b')]),'playlist':_0x2e93ff,'playing_item':'','status':0x0};this[a25_0x16f1('0x3c')][a25_0x16f1('0x3d')]('http://restapi.lulo.run/player_devices/register',_0x137f15,![])[a25_0x16f1('0x38')](function(_0x2335ac){console[a25_0x16f1('0x3e')](a25_0x16f1('0x3f')+Date());})[a25_0x16f1('0x40')](function(_0x1d2a43){});console['log'](_0x137f15);}[a25_0x16f1('0x36')](this));const _0x346bb7=this[a25_0x16f1('0x24')][a25_0x16f1('0x41')];if(!_0x346bb7||_0x346bb7==''){this['config'][a25_0x16f1('0x41')]=uuidv4();this[a25_0x16f1('0x24')]={'deviceUuid':this[a25_0x16f1('0x24')][a25_0x16f1('0x41')],'playerId':this[a25_0x16f1('0x24')][a25_0x16f1('0x28')]};fs[a25_0x16f1('0x42')](configFile,JSON[a25_0x16f1('0x39')](this[a25_0x16f1('0x24')]));}}['getStatus'](){console[a25_0x16f1('0x3e')]('getStatus');this['kodi'][a25_0x16f1('0x43')][a25_0x16f1('0x44')]()[a25_0x16f1('0x38')](function(_0x3d6534){const _0x8b082e=_0x3d6534['item'][a25_0x16f1('0x45')];this[a25_0x16f1('0x46')](_0x8b082e);}[a25_0x16f1('0x36')](this))[a25_0x16f1('0x40')](function(_0xc4bb09){console[a25_0x16f1('0x3e')](_0xc4bb09);this[a25_0x16f1('0x46')](JSON[a25_0x16f1('0x39')](_0xc4bb09));}[a25_0x16f1('0x36')](this));}[a25_0x16f1('0x46')](_0x51e1ca){console[a25_0x16f1('0x3e')](a25_0x16f1('0x47')+_0x51e1ca);const _0x45c3b6={'player_id':this[a25_0x16f1('0x28')],'device_uuid':this[a25_0x16f1('0x24')][a25_0x16f1('0x41')],'status':_0x51e1ca!=''&&_0x51e1ca!=null?0x1:0x0,'playing_item':_0x51e1ca};this[a25_0x16f1('0x3c')][a25_0x16f1('0x3d')](a25_0x16f1('0x48'),_0x45c3b6,![])[a25_0x16f1('0x38')](function(_0x4198de){console[a25_0x16f1('0x3e')](a25_0x16f1('0x49'));})[a25_0x16f1('0x40')](function(_0x53e0a8){});}[a25_0x16f1('0x34')](){fsExtra['ensureDir'](this[a25_0x16f1('0x13')],_0x436d61=>{});fsExtra[a25_0x16f1('0x4a')](this['tempFolder'],_0x3f0ff7=>{});fsExtra[a25_0x16f1('0x4a')](this['filesFolder'],_0x301a71=>{});}[a25_0x16f1('0x4b')](){const _0x4c8725=format(this[a25_0x16f1('0x2d')],this[a25_0x16f1('0x28')]);console[a25_0x16f1('0x3e')](_0x4c8725);request({'url':_0x4c8725,'json':!![]},function(_0x12b1d2,_0xc86dc5,_0x1af04a){console['log'](a25_0x16f1('0x4c'));this[a25_0x16f1('0x4d')]=_0x1af04a;this['playlistChanged']=this[a25_0x16f1('0x4e')]();fsExtra[a25_0x16f1('0x4f')](this[a25_0x16f1('0x15')]);this[a25_0x16f1('0x1a')]=[];this[a25_0x16f1('0x1b')]=[];this[a25_0x16f1('0x50')]=0x0;for(const _0xcc63cc in _0x1af04a){this['downloadFiles'][a25_0x16f1('0x51')](_0x1af04a[_0xcc63cc]);}console[a25_0x16f1('0x3e')]('Total:\x20'+this['downloadFiles'][a25_0x16f1('0x52')]);if(this['downloadFiles'][a25_0x16f1('0x52')]>0x0){this[a25_0x16f1('0x53')]();}}[a25_0x16f1('0x36')](this));}[a25_0x16f1('0x54')](){this[a25_0x16f1('0x21')]=!![];if(fsExtra[a25_0x16f1('0x55')](this[a25_0x16f1('0x15')])){fsExtra[a25_0x16f1('0x4f')](this['tempFolder']);}if(fsExtra[a25_0x16f1('0x55')](this[a25_0x16f1('0x16')])){fsExtra[a25_0x16f1('0x4f')](this['filesFolder']);}if(!fsExtra[a25_0x16f1('0x55')](this[a25_0x16f1('0x18')])){fsExtra[a25_0x16f1('0x56')](this[a25_0x16f1('0x18')]);}if(!fsExtra[a25_0x16f1('0x55')](this['m3uFile'])){fsExtra[a25_0x16f1('0x56')](this[a25_0x16f1('0x19')]);}this[a25_0x16f1('0x4b')]();}[a25_0x16f1('0x4e')](){const _0x3692d3=JSON[a25_0x16f1('0x39')](this['newPlayList']);try{if(!fsExtra[a25_0x16f1('0x55')](this['playListFile'])){return!![];}else{const _0x88efd1=fsExtra[a25_0x16f1('0x26')](this[a25_0x16f1('0x18')])[a25_0x16f1('0x57')]();if(_0x88efd1!=_0x3692d3){return!![];}}}catch(_0x3bd87e){console[a25_0x16f1('0x3e')](_0x3bd87e);}return![];}[a25_0x16f1('0x53')](){console[a25_0x16f1('0x3e')](a25_0x16f1('0x58')+this[a25_0x16f1('0x50')]+a25_0x16f1('0x59')+this['downloadFiles']['length']);if(this[a25_0x16f1('0x50')]>=this['downloadFiles'][a25_0x16f1('0x52')]){this[a25_0x16f1('0x5a')]();return;}const _0x6cb87c=String(this[a25_0x16f1('0x1a')][this[a25_0x16f1('0x50')]][a25_0x16f1('0x5b')]);const _0x28b95f=this[a25_0x16f1('0x1a')][this[a25_0x16f1('0x50')]][a25_0x16f1('0x5c')];let _0x2d7ee1=_0x6cb87c[a25_0x16f1('0x5d')](_0x6cb87c[a25_0x16f1('0x5e')]('/')+0x1);const _0x20de28=_0x2d7ee1[a25_0x16f1('0x5f')]('.')[a25_0x16f1('0x60')](0x0,-0x1)[a25_0x16f1('0x61')]('.');let _0x37d52d=this['baseURL']+_0x6cb87c;const _0x5adda4=_0x37d52d[a25_0x16f1('0x5f')]('.')['slice'](0x0,-0x1)[a25_0x16f1('0x61')]('.');if(_0x28b95f==a25_0x16f1('0x62')){_0x2d7ee1=_0x2d7ee1+'.mp4';}else if(_0x28b95f=='image'){_0x2d7ee1=_0x20de28+'.mp4';_0x37d52d=_0x5adda4+'.mp4';}console[a25_0x16f1('0x3e')](a25_0x16f1('0x63'));console[a25_0x16f1('0x3e')](_0x6cb87c);console[a25_0x16f1('0x3e')](_0x28b95f);console[a25_0x16f1('0x3e')](_0x2d7ee1);console[a25_0x16f1('0x3e')](_0x37d52d);console[a25_0x16f1('0x3e')](_0x20de28);console['log'](_0x5adda4);console[a25_0x16f1('0x3e')](a25_0x16f1('0x63'));if(fsExtra[a25_0x16f1('0x55')](this['tempFolder']+_0x2d7ee1)){this['checkVideo'](this[a25_0x16f1('0x15')]+_0x2d7ee1)[a25_0x16f1('0x38')](function(_0x2e6f39){if(_0x2e6f39){this[a25_0x16f1('0x50')]++;}else{this[a25_0x16f1('0x64')]=!![];}this[a25_0x16f1('0x53')]();}[a25_0x16f1('0x36')](this));}else if(fsExtra[a25_0x16f1('0x55')](this['filesFolder']+_0x2d7ee1)){this['checkVideo'](this[a25_0x16f1('0x16')]+_0x2d7ee1)['then'](function(_0x4c9efd){if(_0x4c9efd){fsExtra[a25_0x16f1('0x65')](this[a25_0x16f1('0x16')]+_0x2d7ee1,this['tempFolder']+_0x2d7ee1);this[a25_0x16f1('0x50')]++;}else{this[a25_0x16f1('0x64')]=!![];}this[a25_0x16f1('0x53')]();}[a25_0x16f1('0x36')](this));}else{console[a25_0x16f1('0x3e')](a25_0x16f1('0x66')+_0x37d52d);this['playlistChanged']=!![];if(_0x28b95f=='youtube_single'){this[a25_0x16f1('0x67')](_0x6cb87c);}else{this[a25_0x16f1('0x68')](_0x37d52d,_0x2d7ee1,_0x28b95f);}}}[a25_0x16f1('0x69')](_0x3f9edd){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x16f1('0x3e')](a25_0x16f1('0x6a')+_0x3f9edd);const _0x4e56f7=yield mediainfo(_0x3f9edd)[a25_0x16f1('0x40')](_0x1c2fcc=>{console[a25_0x16f1('0x3e')](_0x1c2fcc);fsExtra['removeSync'](_0x3f9edd);return![];});const _0x3c9c3d=_0x4e56f7[a25_0x16f1('0x6b')]['track'][a25_0x16f1('0x52')]>0x1&&_0x4e56f7[a25_0x16f1('0x6b')][a25_0x16f1('0x6c')][0x1][a25_0x16f1('0x6d')]==a25_0x16f1('0x6e');if(!_0x3c9c3d){fsExtra['removeSync'](_0x3f9edd);}console[a25_0x16f1('0x3e')](a25_0x16f1('0x6f')+_0x3c9c3d);return _0x3c9c3d;});}[a25_0x16f1('0x68')](_0x3119c3,_0x17923f,_0x19d2ca){const _0x362559=new Downloader();console['log'](_0x3119c3);console[a25_0x16f1('0x3e')](_0x17923f);console['log'](_0x19d2ca);const _0x1ca89e=_0x362559[a25_0x16f1('0x53')](_0x3119c3,this[a25_0x16f1('0x15')]+_0x17923f);urlExists(_0x3119c3,function(_0x325c54,_0x33ef25){if(_0x33ef25){if(this[a25_0x16f1('0x1b')]['includes'](this[a25_0x16f1('0x50')])){const _0x4c7096=this[a25_0x16f1('0x1b')][a25_0x16f1('0x70')](this[a25_0x16f1('0x50')]);if(_0x4c7096>-0x1){this[a25_0x16f1('0x1b')][a25_0x16f1('0x71')](_0x4c7096,0x1);}}console['log'](a25_0x16f1('0x72')+_0x3119c3);_0x1ca89e[a25_0x16f1('0x73')]();}else{if(!this[a25_0x16f1('0x1b')]['includes'](this['currentFile'])){this[a25_0x16f1('0x1b')][a25_0x16f1('0x51')](this[a25_0x16f1('0x50')]);}console[a25_0x16f1('0x3e')]('Error:\x20'+_0x3119c3);this['currentFile']++;this['download']();}}['bind'](this));_0x1ca89e['on']('start',function(_0x1ca89e){console[a25_0x16f1('0x3e')](a25_0x16f1('0x74')+_0x3119c3);});_0x1ca89e['on']('error',function(_0x1ca89e){console[a25_0x16f1('0x3e')](a25_0x16f1('0x75'));this[a25_0x16f1('0x53')]();}[a25_0x16f1('0x36')](this));_0x1ca89e['on'](a25_0x16f1('0x76'),function(_0x1ca89e){console[a25_0x16f1('0x3e')](a25_0x16f1('0x76'));console[a25_0x16f1('0x3e')](a25_0x16f1('0x77')+_0x17923f);console[a25_0x16f1('0x3e')]('mediaType:\x20'+_0x19d2ca);this[a25_0x16f1('0x69')](this[a25_0x16f1('0x15')]+_0x17923f)[a25_0x16f1('0x38')](function(_0xc6cb3d){if(_0xc6cb3d){this[a25_0x16f1('0x50')]++;}this[a25_0x16f1('0x53')]();}[a25_0x16f1('0x36')](this));}[a25_0x16f1('0x36')](this));_0x1ca89e['on'](a25_0x16f1('0x78'),function(_0x1ca89e){console[a25_0x16f1('0x3e')](a25_0x16f1('0x78'));});_0x1ca89e['on'](a25_0x16f1('0x79'),function(_0x1ca89e){console[a25_0x16f1('0x3e')](a25_0x16f1('0x79'));});_0x1ca89e['on'](a25_0x16f1('0x7a'),function(_0x1ca89e){console[a25_0x16f1('0x3e')](a25_0x16f1('0x7a'));});}['downloadHTTPFile'](_0x3cf99f,_0x48b48b,_0x13b88a,_0x1b9b02){console[a25_0x16f1('0x3e')]('downloadHTTPFile');console[a25_0x16f1('0x3e')](_0x3cf99f);const _0x77e5ed=!![];let _0xcdeaa5=0x0;const _0x436366='';console[a25_0x16f1('0x3e')](a25_0x16f1('0x7b')+_0x3cf99f+'\x20to\x20'+_0x48b48b);if(_0xcdeaa5){if(_0xcdeaa5>0x5){_0x1b9b02(a25_0x16f1('0x7c'),_0x3cf99f,_0x13b88a,null);return;}}else{_0xcdeaa5=0x0;}const _0x22dbb6=this[a25_0x16f1('0x15')]+_0x48b48b;let _0x2a7aba;if(_0x1b9b02===undefined){console[a25_0x16f1('0x3e')](a25_0x16f1('0x7d')+_0x3cf99f+a25_0x16f1('0x7e')+_0x22dbb6);_0x1b9b02=function(_0x4fb582,_0xe10904){console[a25_0x16f1('0x3e')](a25_0x16f1('0x7f'),_0x4fb582,_0xe10904);};}http[a25_0x16f1('0x80')][a25_0x16f1('0x81')]=0x64;const _0x536c0a={'host':url['parse'](_0x3cf99f)[a25_0x16f1('0x82')],'port':0x50,'path':url[a25_0x16f1('0x25')](_0x3cf99f)[a25_0x16f1('0x83')],'agent':![]};const _0x2d3265=http[a25_0x16f1('0x84')](_0x536c0a,function(_0x24b05a){let _0x1109a8=0x0;let _0x313417=0x0;function _0x472233(){if(_0x1109a8===undefined){console['log'](_0x48b48b+a25_0x16f1('0x85')+_0x313417+'/'+'?');}const _0x1e6169=_0x313417/_0x1109a8*0x64;console[a25_0x16f1('0x3e')](_0x48b48b+a25_0x16f1('0x86')+_0x1e6169+'%\x09'+_0x313417+'/'+_0x1109a8);}console[a25_0x16f1('0x3e')](_0x48b48b+'\x20'+_0x24b05a[a25_0x16f1('0x87')]);switch(_0x24b05a[a25_0x16f1('0x87')]){case 0xc8:_0x1109a8=_0x24b05a['headers']['content-length']||_0x436366;fs['stat'](_0x22dbb6,function(_0x22889c,_0x232501){if(!_0x22889c){console[a25_0x16f1('0x3e')]('Have\x20already\x20downloaded\x20'+_0x22dbb6);if(_0x232501[a25_0x16f1('0x88')]==_0x1109a8){console['log']('And\x20the\x20file\x20size\x20matches\x20('+_0x1109a8+')');console[a25_0x16f1('0x3e')](a25_0x16f1('0x89'));}else{console['log'](a25_0x16f1('0x8a')+_0x232501[a25_0x16f1('0x88')]+')\x20vs\x20New('+_0x1109a8+')');}}_0x2a7aba=fs['createWriteStream'](_0x22dbb6);_0x24b05a['pipe'](_0x2a7aba);_0x24b05a['on'](a25_0x16f1('0x8b'),function(_0x362ab1){_0x313417+=_0x362ab1[a25_0x16f1('0x52')];_0x472233();});_0x2d3265['on']('error',function(_0x22889c){console[a25_0x16f1('0x3e')](a25_0x16f1('0x8c'));console['log'](_0x22889c);});_0x2a7aba['on']('finish',function(){console['log'](a25_0x16f1('0x8d')+_0x3cf99f+a25_0x16f1('0x7e')+_0x48b48b);_0x1b9b02(null,_0x48b48b,_0x13b88a,_0x48b48b);}[a25_0x16f1('0x36')](this));});break;case 0x12e:const _0x3adde8=_0x24b05a['headers'][a25_0x16f1('0x8e')];console[a25_0x16f1('0x3e')](a25_0x16f1('0x8f')+_0x3cf99f+a25_0x16f1('0x7e')+_0x3adde8);if(_0xcdeaa5<0x5){this['downloadHTTPFile'](_0x3adde8,_0x48b48b,_0x1b9b02,_0xcdeaa5++);}else{console[a25_0x16f1('0x90')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x3cf99f+'.');_0x1b9b02(a25_0x16f1('0x91'),null,null,null);}return;case 0x194:console[a25_0x16f1('0x3e')]('File\x20Not\x20Found\x20'+_0x3cf99f);default:console[a25_0x16f1('0x3e')](a25_0x16f1('0x92')+_0x3cf99f+a25_0x16f1('0x93')+_0x24b05a[a25_0x16f1('0x87')]);_0x2d3265[a25_0x16f1('0x94')]();_0x1b9b02(_0x24b05a[a25_0x16f1('0x87')],null,null,null);return;}})['on'](a25_0x16f1('0x90'),function(_0x30d910){console[a25_0x16f1('0x3e')](a25_0x16f1('0x95')+_0x3cf99f+'\x20'+_0x30d910['message']);_0x1b9b02(_0x30d910,null,null,null);});}[a25_0x16f1('0x96')](_0x294bc3,_0x1060cf,_0x4690bc,_0x41129c){console[a25_0x16f1('0x3e')](a25_0x16f1('0x96'));console[a25_0x16f1('0x3e')](_0x294bc3);console[a25_0x16f1('0x3e')](_0x1060cf);console[a25_0x16f1('0x3e')](_0x4690bc);console[a25_0x16f1('0x3e')](_0x41129c);if(_0x4690bc=='image'){const _0x450435=this[a25_0x16f1('0x1a')][this[a25_0x16f1('0x50')]]['duration']!=null?this['downloadFiles'][this[a25_0x16f1('0x50')]]['duration']:0x1e;this['createImageVideo'](_0x41129c,_0x450435);}else if(_0x4690bc==a25_0x16f1('0x97')){if(_0x294bc3==null&&_0x1060cf!=''){this[a25_0x16f1('0x50')]++;}this[a25_0x16f1('0x53')]();}console[a25_0x16f1('0x3e')](this[a25_0x16f1('0x50')]);}['downloadRequestFile'](_0x112edc,_0x1b5abf,_0x329356){progress(request(_0x112edc),{})['on']('progress',function(_0x554f32){console[a25_0x16f1('0x3e')](_0x554f32);})['on'](a25_0x16f1('0x90'),function(_0x2554a8){console[a25_0x16f1('0x3e')](a25_0x16f1('0x98'));this[a25_0x16f1('0x53')]();})['on'](a25_0x16f1('0x76'),function(){console[a25_0x16f1('0x3e')]('Downloaded:\x20'+_0x1b5abf);console['log'](a25_0x16f1('0x99')+_0x329356);if(_0x329356==a25_0x16f1('0x9a')){const _0x2fc5e0=this[a25_0x16f1('0x1a')][this[a25_0x16f1('0x50')]][a25_0x16f1('0x9b')]!=null?this[a25_0x16f1('0x1a')][this['currentFile']][a25_0x16f1('0x9b')]:0x1e;this[a25_0x16f1('0x9c')](_0x1b5abf,_0x2fc5e0);}else if(_0x329356==a25_0x16f1('0x97')){this[a25_0x16f1('0x50')]++;this[a25_0x16f1('0x53')]();}}[a25_0x16f1('0x36')](this))[a25_0x16f1('0x9d')](fs[a25_0x16f1('0x9e')](this[a25_0x16f1('0x15')]+_0x1b5abf));}['createImageVideo'](_0x151fbb,_0xbb739d=0x1e){const _0x5deff7=this[a25_0x16f1('0x15')]+_0x151fbb;console[a25_0x16f1('0x3e')](_0x5deff7);console[a25_0x16f1('0x3e')](_0x151fbb);const _0x260f91=_0x151fbb[a25_0x16f1('0x5f')]('.')['slice'](0x0,-0x1)[a25_0x16f1('0x61')]('.');const _0x15bd4e=a25_0x16f1('0x9f');const _0x33f075=['-y','-r',a25_0x16f1('0xa0'),'-loop','1',a25_0x16f1('0xa1'),a25_0x16f1('0xa2'),'-i',_0x5deff7,'-t',String(_0xbb739d),a25_0x16f1('0xa3'),a25_0x16f1('0xa4'),a25_0x16f1('0xa5'),a25_0x16f1('0xa6'),'-r','25',a25_0x16f1('0xa7'),a25_0x16f1('0xa8'),this['tempFolder']+_0x260f91+a25_0x16f1('0xa9')];const _0x2327c8=spawn(_0x15bd4e,_0x33f075);_0x2327c8['stdout']['on'](a25_0x16f1('0x8b'),function(_0x340e9e){console[a25_0x16f1('0x3e')]('Converting\x20'+_0x5deff7);});_0x2327c8[a25_0x16f1('0xaa')]['on'](a25_0x16f1('0x8b'),function(_0x1de9f2){console[a25_0x16f1('0x3e')](a25_0x16f1('0xab')+_0x1de9f2);}[a25_0x16f1('0x36')](this));_0x2327c8['on'](a25_0x16f1('0xac'),function(){console[a25_0x16f1('0x3e')](a25_0x16f1('0xad'));this[a25_0x16f1('0x50')]++;this['download']();}['bind'](this));}['downloadYouTube'](_0x2ce5fd){const _0x26b230=this[a25_0x16f1('0x15')]+'/'+_0x2ce5fd+'.mp4';const _0x249093=a25_0x16f1('0xae')+_0x2ce5fd;console['log'](a25_0x16f1('0xaf')+_0x249093);console['log'](a25_0x16f1('0xb0')+_0x26b230);const _0x209e29=youtubedl(_0x249093,['--format=18',a25_0x16f1('0xb1')],{'cwd':__dirname});_0x209e29['on']('info',function(_0x3e9f4c){console[a25_0x16f1('0x3e')](a25_0x16f1('0xb2'));console[a25_0x16f1('0x3e')](a25_0x16f1('0xb3')+_0x3e9f4c['_filename']);console[a25_0x16f1('0x3e')](a25_0x16f1('0xb4')+_0x3e9f4c[a25_0x16f1('0x88')]);});_0x209e29['on'](a25_0x16f1('0xb5'),function complete(_0x35974e){'use strict';console[a25_0x16f1('0x3e')](a25_0x16f1('0xb3')+_0x35974e[a25_0x16f1('0xb6')]+a25_0x16f1('0xb7'));});_0x209e29['on'](a25_0x16f1('0x76'),function(){console[a25_0x16f1('0x3e')](a25_0x16f1('0xb8'));this[a25_0x16f1('0x69')](_0x26b230)[a25_0x16f1('0x38')](function(_0x27409b){if(_0x27409b){this[a25_0x16f1('0x50')]++;}this[a25_0x16f1('0x53')]();}[a25_0x16f1('0x36')](this));}[a25_0x16f1('0x36')](this));_0x209e29[a25_0x16f1('0x9d')](fs[a25_0x16f1('0x9e')](_0x26b230));}['finishProcess'](){console[a25_0x16f1('0x3e')](a25_0x16f1('0xb9'));if(this['playlistChanged']){if(this[a25_0x16f1('0x1b')][a25_0x16f1('0x52')]==0x0){console[a25_0x16f1('0x3e')]('this.playListFile:\x20'+this[a25_0x16f1('0x18')]);fs[a25_0x16f1('0x42')](this[a25_0x16f1('0x18')],JSON[a25_0x16f1('0x39')](this['newPlayList']));let _0x58a34e=a25_0x16f1('0xba')+'\x0d\x0a'+a25_0x16f1('0xbb')+'\x0d\x0a';for(const _0xe35509 in this[a25_0x16f1('0x1a')]){const _0xad101b=this[a25_0x16f1('0x1a')][_0xe35509][a25_0x16f1('0x5b')];const _0x1d865b=this[a25_0x16f1('0x1a')][_0xe35509]['media_type'];const _0x3ce21f=_0xad101b[a25_0x16f1('0x5d')](_0xad101b['lastIndexOf']('/')+0x1);let _0x6d1fff=_0x3ce21f[a25_0x16f1('0x5f')]('.')[a25_0x16f1('0x60')](0x0,-0x1)['join']('.');if(_0x1d865b==a25_0x16f1('0x62')){_0x6d1fff=_0xad101b;}_0x58a34e+=a25_0x16f1('0xbc')+_0x6d1fff+a25_0x16f1('0xa9')+'\x0d\x0a';console[a25_0x16f1('0x3e')](a25_0x16f1('0xbd')+_0x58a34e);}console['log'](a25_0x16f1('0xbd')+_0x58a34e);fsExtra['emptyDirSync'](this[a25_0x16f1('0x16')]);console['log']('copySync:\x20'+this[a25_0x16f1('0x15')]);fsExtra[a25_0x16f1('0x65')](this[a25_0x16f1('0x15')],this[a25_0x16f1('0x16')]);console[a25_0x16f1('0x3e')](a25_0x16f1('0xbe')+this['m3uFile']);fsExtra[a25_0x16f1('0x42')](this[a25_0x16f1('0x19')],_0x58a34e);console[a25_0x16f1('0x3e')](a25_0x16f1('0xbf')+this[a25_0x16f1('0x15')]);fsExtra['emptyDirSync'](this[a25_0x16f1('0x15')]);console[a25_0x16f1('0x3e')](a25_0x16f1('0xc0'));this[a25_0x16f1('0xc1')]();}else{console[a25_0x16f1('0x3e')](a25_0x16f1('0xc2'));this[a25_0x16f1('0x50')]=0x0;setTimeout(function(){this[a25_0x16f1('0x53')]();}[a25_0x16f1('0x36')](this),0x1388);}}else{console[a25_0x16f1('0x3e')](a25_0x16f1('0xc3'));}}[a25_0x16f1('0xc4')](){this[a25_0x16f1('0xc5')]('Playlist.Clear',{'playlistid':0x1},function(_0x4716bb){console['log'](a25_0x16f1('0xc6'));console['log'](_0x4716bb);this[a25_0x16f1('0xc5')](a25_0x16f1('0xc7'),{'item':{'file':a25_0x16f1('0xc8')},'playlistid':0x1},function(_0x4716bb){console[a25_0x16f1('0x3e')](a25_0x16f1('0xc9'));console[a25_0x16f1('0x3e')](_0x4716bb);this[a25_0x16f1('0xc5')](a25_0x16f1('0xca'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x4716bb){console[a25_0x16f1('0x3e')](a25_0x16f1('0xcb'));console[a25_0x16f1('0x3e')](_0x4716bb);this['kodiCommandClient'](a25_0x16f1('0xcc'));}[a25_0x16f1('0x36')](this));}[a25_0x16f1('0x36')](this));}[a25_0x16f1('0x36')](this));}['reboot'](){console['log'](a25_0x16f1('0xcd'));exec(a25_0x16f1('0xce'),function(_0x8c4b25){console[a25_0x16f1('0x3e')](_0x8c4b25);});}[a25_0x16f1('0xcf')](){const _0x3595a4=format(this[a25_0x16f1('0x2f')],this[a25_0x16f1('0x28')]);console['log'](_0x3595a4);request({'url':_0x3595a4,'json':!![]},function(_0xa967f7,_0x170828,_0x37ae72){if(_0x37ae72[a25_0x16f1('0x52')]>0x0){const _0x45d421=_0x37ae72[0x0];const _0x258a0b=_0x45d421['rss'];const _0x46afe3=_0x45d421[a25_0x16f1('0xd0')]==0x1;this[a25_0x16f1('0xd1')](_0x258a0b);this[a25_0x16f1('0xd2')](_0x46afe3);this['registerClient']();}console[a25_0x16f1('0x3e')](_0x37ae72);}[a25_0x16f1('0x36')](this));}['turnOffTV'](){this[a25_0x16f1('0xd3')](a25_0x16f1('0xd4'));}[a25_0x16f1('0xd5')](){this[a25_0x16f1('0xd3')](a25_0x16f1('0xd6'));}[a25_0x16f1('0xd1')](_0x25a42a){const _0x48a254=_0x25a42a!=null&&_0x25a42a!='';const _0x56f25b='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra['existsSync'](_0x56f25b)){const _0x40898e=fsExtra[a25_0x16f1('0x26')](_0x56f25b);console[a25_0x16f1('0x3e')](a25_0x16f1('0xd7')+_0x40898e);const _0x2dc81a=require(a25_0x16f1('0xd8'));const _0x27bec2=_0x2dc81a[a25_0x16f1('0xd9')];_0x27bec2(_0x40898e,function(_0x1d3a4f,_0x10d4ca){console[a25_0x16f1('0x3e')](a25_0x16f1('0xda'),_0x1d3a4f);console[a25_0x16f1('0x3e')](a25_0x16f1('0xdb'),_0x10d4ca);if(!_0x25a42a||_0x25a42a==null||_0x25a42a==''){_0x25a42a=a25_0x16f1('0xdc');}_0x10d4ca[a25_0x16f1('0xdd')][a25_0x16f1('0xde')][0x0]['feed'][0x0]['_']=_0x25a42a;const _0x3c0870=new _0x2dc81a[(a25_0x16f1('0xdf'))]();const _0xa904bd=_0x3c0870['buildObject'](_0x10d4ca);console[a25_0x16f1('0x3e')](a25_0x16f1('0xe0'),_0xa904bd);fsExtra[a25_0x16f1('0x42')](_0x56f25b,_0xa904bd);});this[a25_0x16f1('0xd3')](a25_0x16f1('0xe1'));this[a25_0x16f1('0xc5')](a25_0x16f1('0xe2'),{'setting':a25_0x16f1('0xe3'),'value':_0x48a254},function(_0x1577ea){console[a25_0x16f1('0x3e')](a25_0x16f1('0xe4'));console[a25_0x16f1('0x3e')](_0x1577ea);}['bind'](this));}}[a25_0x16f1('0xd2')](_0x4e4c9b){this[a25_0x16f1('0xc5')](a25_0x16f1('0xe2'),{'setting':'videoplayer.usedisplayasclock','value':_0x4e4c9b},function(_0x251d76){console[a25_0x16f1('0x3e')]('enableClock:\x20');console[a25_0x16f1('0x3e')](_0x251d76);}[a25_0x16f1('0x36')](this));}[a25_0x16f1('0xd3')](_0x382086){exec(a25_0x16f1('0xe5')+_0x382086+'\x22',function(_0x1fe9b7){console[a25_0x16f1('0x3e')](_0x1fe9b7);});}['jsonrpcClient'](_0x5e0a67,_0x24a486,_0x3b3778){const _0x2874b9={'jsonrpc':'2.0','method':_0x5e0a67,'params':_0x24a486,'id':0x1};const _0x30798f={'user':this['kodiUser'],'pass':this['kodiPassword']};console[a25_0x16f1('0x3e')](a25_0x16f1('0xe6'),_0x2874b9);console[a25_0x16f1('0x3e')]('jsonrpcClient\x20options',_0x30798f);this[a25_0x16f1('0x3c')][a25_0x16f1('0x3d')](this[a25_0x16f1('0x31')]+a25_0x16f1('0xe7'),_0x2874b9,![],_0x30798f)[a25_0x16f1('0x38')](function(_0x1299f0){_0x3b3778(_0x1299f0);})[a25_0x16f1('0x40')](function(_0x4e0140){});}}exports[a25_0x16f1('0xe8')]=SyncPlaylistsService;