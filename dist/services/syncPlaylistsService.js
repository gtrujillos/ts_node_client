var a23_0x57fb=['pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','stat','Have\x20already\x20downloaded\x20','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','size',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','headers','location','downloadHTTPFile','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','downloadHTTPFileCallback','duration','video','downloadRequestFile','progress','Error\x20downloading\x20file','createImageVideo','1/2','-loop','glob','libx264','-pix_fmt','-vf','scale=1920:1080','stdout','Converting\x20','stderr:\x20','finished\x20mp4\x20convert','--format=18','Download\x20started','filename:\x20','_filename','size:\x20','complete','finished\x20youtube\x20downloading!','finishProcess','#EXTCPlayListM3U::M3U','path','substring','lastIndexOf','/home/osmc/luloclient/media/files/','copySync','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Added','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','reboot','Rebooting','rss','header_active','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xml2js','parseString','err:\x20%j','result:\x20%j','rssfeeds','feed','Builder','buildObject','RefreshRSS()','Settings.SetSettingValue','setRss:','enableClock','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','/jsonrpc','__awaiter','next','throw','value','then','apply','defineProperty','../infrastructure/HttpClientService','./playerService','node-mediainfo','http','fs-extra','request','request-progress','child_process','spawn','exec','is-image','youtube-dl','uuid/v4','config.json','context.json','url-exists','node-kodi','media/','tempFolder','mediaFolder','temp/','playListFile','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','init','config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','playlist','getItems','stringify','deviceUuid','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','writeFileSync','player','getCurrentlyPlayingVideo','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','hasPlayListChanged','emptyDirSync','push','length','download','existsSync','removeSync','this.currentFile:\x20','\x20of\x20','media_type','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host'];(function(_0x368cb3,_0x2b793c){var _0x27862c=function(_0x505686){while(--_0x505686){_0x368cb3['push'](_0x368cb3['shift']());}};_0x27862c(++_0x2b793c);}(a23_0x57fb,0x13c));var a23_0x3cc3=function(_0xd0190f,_0x356df2){_0xd0190f=_0xd0190f-0x0;var _0x206a90=a23_0x57fb[_0xd0190f];return _0x206a90;};'use strict';var __awaiter=this&&this[a23_0x3cc3('0x0')]||function(_0x2773f9,_0x1a6ed5,_0x2bf0cb,_0x4677ee){function _0x3a895f(_0x23faa2){return _0x23faa2 instanceof _0x2bf0cb?_0x23faa2:new _0x2bf0cb(function(_0x32848d){_0x32848d(_0x23faa2);});}return new(_0x2bf0cb||(_0x2bf0cb=Promise))(function(_0x53c317,_0x23a724){function _0x1945bc(_0x3d6ce6){try{_0x565e2d(_0x4677ee[a23_0x3cc3('0x1')](_0x3d6ce6));}catch(_0x16afe9){_0x23a724(_0x16afe9);}}function _0x15e601(_0x2c3efe){try{_0x565e2d(_0x4677ee[a23_0x3cc3('0x2')](_0x2c3efe));}catch(_0x3c12d9){_0x23a724(_0x3c12d9);}}function _0x565e2d(_0x17fd2f){_0x17fd2f['done']?_0x53c317(_0x17fd2f['value']):_0x3a895f(_0x17fd2f[a23_0x3cc3('0x3')])[a23_0x3cc3('0x4')](_0x1945bc,_0x15e601);}_0x565e2d((_0x4677ee=_0x4677ee[a23_0x3cc3('0x5')](_0x2773f9,_0x1a6ed5||[]))[a23_0x3cc3('0x1')]());});};Object[a23_0x3cc3('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a23_0x3cc3('0x7'));const playerService_1=require(a23_0x3cc3('0x8'));const mediainfo=require(a23_0x3cc3('0x9'));const fs=require('fs');const url=require('url');const http=require(a23_0x3cc3('0xa'));const fsExtra=require(a23_0x3cc3('0xb'));const request=require(a23_0x3cc3('0xc'));const progress=require(a23_0x3cc3('0xd'));const spawn=require(a23_0x3cc3('0xe'))[a23_0x3cc3('0xf')];const exec=require('child_process')[a23_0x3cc3('0x10')];const isImage=require(a23_0x3cc3('0x11'));const format=require('string-template');const os=require('os');const youtubedl=require(a23_0x3cc3('0x12'));const uuidv4=require(a23_0x3cc3('0x13'));const configFile=a23_0x3cc3('0x14');const contextFile=a23_0x3cc3('0x15');const urlExists=require(a23_0x3cc3('0x16'));const kodi_rpc=require(a23_0x3cc3('0x17'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']=a23_0x3cc3('0x18');this[a23_0x3cc3('0x19')]=this[a23_0x3cc3('0x1a')]+a23_0x3cc3('0x1b');this['filesFolder']=this[a23_0x3cc3('0x1a')]+'files/';this[a23_0x3cc3('0x1c')]=this[a23_0x3cc3('0x1a')]+a23_0x3cc3('0x1d');this[a23_0x3cc3('0x1e')]=this[a23_0x3cc3('0x1f')]+a23_0x3cc3('0x20');this[a23_0x3cc3('0x21')]=0x0;this[a23_0x3cc3('0x22')]=![];this[a23_0x3cc3('0x23')]=[];this[a23_0x3cc3('0x24')]=[];this[a23_0x3cc3('0x25')]={};this[a23_0x3cc3('0x26')]=a23_0x3cc3('0x27');this[a23_0x3cc3('0x28')]=a23_0x3cc3('0x29');this[a23_0x3cc3('0x2a')]=a23_0x3cc3('0x2b');this[a23_0x3cc3('0x2c')]=![];this[a23_0x3cc3('0x2d')]=new HttpClientService_1[(a23_0x3cc3('0x2e'))]();this[a23_0x3cc3('0x2f')]=new playerService_1['PlayerService']();}[a23_0x3cc3('0x30')](){this[a23_0x3cc3('0x31')]=JSON[a23_0x3cc3('0x32')](fs[a23_0x3cc3('0x33')](configFile));this[a23_0x3cc3('0x34')]=JSON[a23_0x3cc3('0x32')](fs[a23_0x3cc3('0x33')](contextFile));this['playerId']=this[a23_0x3cc3('0x31')][a23_0x3cc3('0x35')];this[a23_0x3cc3('0x36')]=process[a23_0x3cc3('0x37')][a23_0x3cc3('0x38')]+a23_0x3cc3('0x39');this[a23_0x3cc3('0x3a')]=this[a23_0x3cc3('0x36')]+a23_0x3cc3('0x3b');this[a23_0x3cc3('0x3c')]=this['baseURL']+'api/player.php?player_id={0}';this[a23_0x3cc3('0x3d')]=new kodi_rpc({'url':this[a23_0x3cc3('0x26')],'user':this[a23_0x3cc3('0x28')],'password':this[a23_0x3cc3('0x2a')]});this[a23_0x3cc3('0x3e')]();this[a23_0x3cc3('0x3f')]();this[a23_0x3cc3('0x40')]();this[a23_0x3cc3('0x41')]();this[a23_0x3cc3('0x42')]();setInterval(function(){this[a23_0x3cc3('0x43')]();}[a23_0x3cc3('0x44')](this),0x2710);setInterval(function(){this[a23_0x3cc3('0x3f')]();}[a23_0x3cc3('0x44')](this),0x493e0);}['checkDependencies'](){}[a23_0x3cc3('0x3f')](){this[a23_0x3cc3('0x3d')][a23_0x3cc3('0x45')][a23_0x3cc3('0x46')](0x1)[a23_0x3cc3('0x4')](function(_0x546658){const _0xf60a2c=JSON[a23_0x3cc3('0x47')](_0x546658);const _0x23aa82={'player_id':this[a23_0x3cc3('0x35')],'device_uuid':this[a23_0x3cc3('0x31')][a23_0x3cc3('0x48')],'network_info':JSON[a23_0x3cc3('0x47')](os[a23_0x3cc3('0x49')]()),'firmware_info':JSON[a23_0x3cc3('0x47')](this[a23_0x3cc3('0x34')]),'playlist':_0xf60a2c,'playing_item':'','status':0x0};this[a23_0x3cc3('0x2d')][a23_0x3cc3('0x4a')](a23_0x3cc3('0x4b'),_0x23aa82,![])[a23_0x3cc3('0x4')](function(_0x39b1f9){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x4d')+Date());})[a23_0x3cc3('0x4e')](function(_0x12490b){});console[a23_0x3cc3('0x4c')](_0x23aa82);}[a23_0x3cc3('0x44')](this));const _0x55c3b3=this[a23_0x3cc3('0x31')][a23_0x3cc3('0x48')];if(!_0x55c3b3||_0x55c3b3==''){this[a23_0x3cc3('0x31')][a23_0x3cc3('0x48')]=uuidv4();this[a23_0x3cc3('0x31')]={'deviceUuid':this['config'][a23_0x3cc3('0x48')],'playerId':this[a23_0x3cc3('0x31')][a23_0x3cc3('0x35')]};fs[a23_0x3cc3('0x4f')](configFile,JSON[a23_0x3cc3('0x47')](this[a23_0x3cc3('0x31')]));}}[a23_0x3cc3('0x43')](){console['log'](a23_0x3cc3('0x43'));this['kodi'][a23_0x3cc3('0x50')][a23_0x3cc3('0x51')]()[a23_0x3cc3('0x4')](function(_0xefa7bb){const _0x34808e=_0xefa7bb['item'][a23_0x3cc3('0x52')];this[a23_0x3cc3('0x53')](_0x34808e);}[a23_0x3cc3('0x44')](this))[a23_0x3cc3('0x4e')](function(_0x232a9a){console[a23_0x3cc3('0x4c')](_0x232a9a);this[a23_0x3cc3('0x53')](_0x232a9a);}['bind'](this));}[a23_0x3cc3('0x53')](_0x3773d6){console['log'](a23_0x3cc3('0x54')+_0x3773d6);const _0x551c61={'player_id':this['playerId'],'device_uuid':this['config'][a23_0x3cc3('0x48')],'status':_0x3773d6!=''&&_0x3773d6!=null?0x1:0x0,'playing_item':_0x3773d6};this[a23_0x3cc3('0x2d')][a23_0x3cc3('0x4a')](a23_0x3cc3('0x55'),_0x551c61,![])[a23_0x3cc3('0x4')](function(_0x2f392c){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x56')+Date());})[a23_0x3cc3('0x4e')](function(_0x1cf6c9){});}['checkFolders'](){fsExtra['ensureDir'](this[a23_0x3cc3('0x1a')],_0xfe014e=>{});fsExtra[a23_0x3cc3('0x57')](this['tempFolder'],_0x4cd33c=>{});fsExtra[a23_0x3cc3('0x57')](this[a23_0x3cc3('0x1f')],_0x3c8ae0=>{});}[a23_0x3cc3('0x41')](){const _0x59abe2=format(this['playListServiceURL'],this[a23_0x3cc3('0x35')]);console[a23_0x3cc3('0x4c')](_0x59abe2);request({'url':_0x59abe2,'json':!![]},function(_0x20c205,_0x26511b,_0x530566){console[a23_0x3cc3('0x4c')]('loadMediaList:\x20');this[a23_0x3cc3('0x25')]=_0x530566;this['playlistChanged']=this[a23_0x3cc3('0x58')]();fsExtra[a23_0x3cc3('0x59')](this[a23_0x3cc3('0x19')]);this[a23_0x3cc3('0x23')]=[];this[a23_0x3cc3('0x24')]=[];this['currentFile']=0x0;for(const _0x41ffea in _0x530566){this['downloadFiles'][a23_0x3cc3('0x5a')](_0x530566[_0x41ffea]);}console[a23_0x3cc3('0x4c')]('Total:\x20'+this['downloadFiles']['length']);if(this[a23_0x3cc3('0x23')][a23_0x3cc3('0x5b')]>0x0){this[a23_0x3cc3('0x5c')]();}}[a23_0x3cc3('0x44')](this));}['reloadMediaList'](){this['forceReload']=!![];if(fsExtra[a23_0x3cc3('0x5d')](this[a23_0x3cc3('0x19')])){fsExtra[a23_0x3cc3('0x59')](this[a23_0x3cc3('0x19')]);}if(fsExtra['existsSync'](this[a23_0x3cc3('0x1f')])){fsExtra[a23_0x3cc3('0x59')](this[a23_0x3cc3('0x1f')]);}if(!fsExtra[a23_0x3cc3('0x5d')](this['playListFile'])){fsExtra[a23_0x3cc3('0x5e')](this['playListFile']);}if(!fsExtra[a23_0x3cc3('0x5d')](this[a23_0x3cc3('0x1e')])){fsExtra[a23_0x3cc3('0x5e')](this[a23_0x3cc3('0x1e')]);}this[a23_0x3cc3('0x41')]();}[a23_0x3cc3('0x58')](){const _0x1b1135=JSON[a23_0x3cc3('0x47')](this[a23_0x3cc3('0x25')]);try{if(!fsExtra[a23_0x3cc3('0x5d')](this['playListFile'])){return!![];}else{const _0x3fd722=fsExtra[a23_0x3cc3('0x33')](this[a23_0x3cc3('0x1c')])['toString']();if(_0x3fd722!=_0x1b1135){return!![];}}}catch(_0x541227){console['log'](_0x541227);}return![];}[a23_0x3cc3('0x5c')](){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x5f')+this[a23_0x3cc3('0x21')]+a23_0x3cc3('0x60')+this[a23_0x3cc3('0x23')][a23_0x3cc3('0x5b')]);if(this['currentFile']>=this['downloadFiles'][a23_0x3cc3('0x5b')]){this['finishProcess']();return;}const _0x204d05=String(this[a23_0x3cc3('0x23')][this['currentFile']]['path']);const _0x1859cb=this['downloadFiles'][this[a23_0x3cc3('0x21')]][a23_0x3cc3('0x61')];let _0x2e1746=_0x204d05['substring'](_0x204d05['lastIndexOf']('/')+0x1);const _0x29a908=_0x2e1746[a23_0x3cc3('0x62')]('.')[a23_0x3cc3('0x63')](0x0,-0x1)[a23_0x3cc3('0x64')]('.');let _0x47e313=this[a23_0x3cc3('0x36')]+_0x204d05;const _0x47b009=_0x47e313[a23_0x3cc3('0x62')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x1859cb==a23_0x3cc3('0x65')){_0x2e1746=_0x2e1746+a23_0x3cc3('0x66');}else if(_0x1859cb==a23_0x3cc3('0x67')){_0x2e1746=_0x29a908+'.mp4';_0x47e313=_0x47b009+a23_0x3cc3('0x66');}console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x68'));console['log'](_0x204d05);console[a23_0x3cc3('0x4c')](_0x1859cb);console['log'](_0x2e1746);console[a23_0x3cc3('0x4c')](_0x47e313);console[a23_0x3cc3('0x4c')](_0x29a908);console['log'](_0x47b009);console['log']('**********+');if(fsExtra[a23_0x3cc3('0x5d')](this[a23_0x3cc3('0x19')]+_0x2e1746)){this['checkVideo'](this['tempFolder']+_0x2e1746)[a23_0x3cc3('0x4')](function(_0x332c02){if(_0x332c02){this['currentFile']++;}else{this[a23_0x3cc3('0x22')]=!![];}this[a23_0x3cc3('0x5c')]();}[a23_0x3cc3('0x44')](this));}else if(fsExtra[a23_0x3cc3('0x5d')](this[a23_0x3cc3('0x1f')]+_0x2e1746)){this[a23_0x3cc3('0x69')](this[a23_0x3cc3('0x1f')]+_0x2e1746)[a23_0x3cc3('0x4')](function(_0x2ea55a){if(_0x2ea55a){fsExtra['copySync'](this[a23_0x3cc3('0x1f')]+_0x2e1746,this[a23_0x3cc3('0x19')]+_0x2e1746);this[a23_0x3cc3('0x21')]++;}else{this[a23_0x3cc3('0x22')]=!![];}this[a23_0x3cc3('0x5c')]();}['bind'](this));}else{console['log'](a23_0x3cc3('0x6a')+_0x47e313);this[a23_0x3cc3('0x22')]=!![];if(_0x1859cb==a23_0x3cc3('0x65')){this[a23_0x3cc3('0x6b')](_0x204d05);}else{this[a23_0x3cc3('0x6c')](_0x47e313,_0x2e1746,_0x1859cb);}}}[a23_0x3cc3('0x69')](_0x5b02fd){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0x3cc3('0x6d')+_0x5b02fd);const _0x560ebe=yield mediainfo(_0x5b02fd)[a23_0x3cc3('0x4e')](_0x352f7c=>{console[a23_0x3cc3('0x4c')](_0x352f7c);fsExtra['removeSync'](_0x5b02fd);return![];});const _0xc2b89a=_0x560ebe[a23_0x3cc3('0x6e')][a23_0x3cc3('0x6f')][a23_0x3cc3('0x5b')]>0x1&&_0x560ebe['media'][a23_0x3cc3('0x6f')][0x1]['@type']==a23_0x3cc3('0x70');if(!_0xc2b89a){fsExtra[a23_0x3cc3('0x5e')](_0x5b02fd);}console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x71')+_0xc2b89a);return _0xc2b89a;});}[a23_0x3cc3('0x6c')](_0x315731,_0x19e0d5,_0x4aa4d6){const _0x596211=new Downloader();console['log'](_0x315731);console['log'](_0x19e0d5);console[a23_0x3cc3('0x4c')](_0x4aa4d6);const _0x29943a=_0x596211[a23_0x3cc3('0x5c')](_0x315731,this[a23_0x3cc3('0x19')]+_0x19e0d5);urlExists(_0x315731,function(_0x387a2b,_0xf147e0){if(_0xf147e0){if(this[a23_0x3cc3('0x24')][a23_0x3cc3('0x72')](this[a23_0x3cc3('0x21')])){const _0x338551=this[a23_0x3cc3('0x24')][a23_0x3cc3('0x73')](this['currentFile']);if(_0x338551>-0x1){this[a23_0x3cc3('0x24')][a23_0x3cc3('0x74')](_0x338551,0x1);}}console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x75')+_0x315731);_0x29943a[a23_0x3cc3('0x76')]();}else{if(!this['failDownloadFiles'][a23_0x3cc3('0x72')](this[a23_0x3cc3('0x21')])){this[a23_0x3cc3('0x24')][a23_0x3cc3('0x5a')](this[a23_0x3cc3('0x21')]);}console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x77')+_0x315731);this[a23_0x3cc3('0x21')]++;this['download']();}}[a23_0x3cc3('0x44')](this));_0x29943a['on'](a23_0x3cc3('0x76'),function(_0x29943a){console['log'](a23_0x3cc3('0x78')+_0x315731);});_0x29943a['on'](a23_0x3cc3('0x79'),function(_0x29943a){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x7a'));this['download']();}[a23_0x3cc3('0x44')](this));_0x29943a['on'](a23_0x3cc3('0x7b'),function(_0x29943a){console['log']('end');console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x7c')+_0x19e0d5);console['log'](a23_0x3cc3('0x7d')+_0x4aa4d6);this[a23_0x3cc3('0x69')](this[a23_0x3cc3('0x19')]+_0x19e0d5)['then'](function(_0x3a68c2){if(_0x3a68c2){this[a23_0x3cc3('0x21')]++;}this[a23_0x3cc3('0x5c')]();}['bind'](this));}[a23_0x3cc3('0x44')](this));_0x29943a['on'](a23_0x3cc3('0x7e'),function(_0x29943a){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x7e'));});_0x29943a['on']('destroyed',function(_0x29943a){console['log'](a23_0x3cc3('0x7f'));});_0x29943a['on']('retry',function(_0x29943a){console[a23_0x3cc3('0x4c')]('retry');});}['downloadHTTPFile'](_0x6a813d,_0x5db88e,_0xb43e46,_0xa489f5){console[a23_0x3cc3('0x4c')]('downloadHTTPFile');console['log'](_0x6a813d);const _0x3700f6=!![];let _0x170e53=0x0;const _0x4912ee='';console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x80')+_0x6a813d+a23_0x3cc3('0x81')+_0x5db88e);if(_0x170e53){if(_0x170e53>0x5){_0xa489f5(a23_0x3cc3('0x82'),_0x6a813d,_0xb43e46,null);return;}}else{_0x170e53=0x0;}const _0x3d131d=this[a23_0x3cc3('0x19')]+_0x5db88e;let _0x1356ca;if(_0xa489f5===undefined){console['log'](a23_0x3cc3('0x83')+_0x6a813d+a23_0x3cc3('0x81')+_0x3d131d);_0xa489f5=function(_0xff185d,_0x2335b0){console['log'](a23_0x3cc3('0x84'),_0xff185d,_0x2335b0);};}http[a23_0x3cc3('0x85')][a23_0x3cc3('0x86')]=0x64;const _0x2c7af1={'host':url[a23_0x3cc3('0x32')](_0x6a813d)[a23_0x3cc3('0x87')],'port':0x50,'path':url[a23_0x3cc3('0x32')](_0x6a813d)[a23_0x3cc3('0x88')],'agent':![]};const _0x5393c3=http[a23_0x3cc3('0x89')](_0x2c7af1,function(_0x3ae085){let _0x1ac70d=0x0;let _0x485afc=0x0;function _0x5da45(){if(_0x1ac70d===undefined){console[a23_0x3cc3('0x4c')](_0x5db88e+a23_0x3cc3('0x8a')+_0x485afc+'/'+'?');}const _0x5d054e=_0x485afc/_0x1ac70d*0x64;console[a23_0x3cc3('0x4c')](_0x5db88e+a23_0x3cc3('0x8b')+_0x5d054e+'%\x09'+_0x485afc+'/'+_0x1ac70d);}console[a23_0x3cc3('0x4c')](_0x5db88e+'\x20'+_0x3ae085[a23_0x3cc3('0x8c')]);switch(_0x3ae085[a23_0x3cc3('0x8c')]){case 0xc8:_0x1ac70d=_0x3ae085['headers']['content-length']||_0x4912ee;fs[a23_0x3cc3('0x8d')](_0x3d131d,function(_0xec1f64,_0x17dd6b){if(!_0xec1f64){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x8e')+_0x3d131d);if(_0x17dd6b['size']==_0x1ac70d){console['log']('And\x20the\x20file\x20size\x20matches\x20('+_0x1ac70d+')');console['log'](a23_0x3cc3('0x8f'));}else{console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x90')+_0x17dd6b[a23_0x3cc3('0x91')]+a23_0x3cc3('0x92')+_0x1ac70d+')');}}_0x1356ca=fs[a23_0x3cc3('0x93')](_0x3d131d);_0x3ae085[a23_0x3cc3('0x94')](_0x1356ca);_0x3ae085['on'](a23_0x3cc3('0x95'),function(_0xb6d96){_0x485afc+=_0xb6d96[a23_0x3cc3('0x5b')];_0x5da45();});_0x5393c3['on'](a23_0x3cc3('0x79'),function(_0xec1f64){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x96'));console[a23_0x3cc3('0x4c')](_0xec1f64);});_0x1356ca['on'](a23_0x3cc3('0x97'),function(){console[a23_0x3cc3('0x4c')]('Downloaded\x20'+_0x6a813d+'\x20to\x20'+_0x5db88e);_0xa489f5(null,_0x5db88e,_0xb43e46,_0x5db88e);}[a23_0x3cc3('0x44')](this));});break;case 0x12e:const _0x500ba9=_0x3ae085[a23_0x3cc3('0x98')][a23_0x3cc3('0x99')];console[a23_0x3cc3('0x4c')]('Redirect\x20'+_0x6a813d+a23_0x3cc3('0x81')+_0x500ba9);if(_0x170e53<0x5){this[a23_0x3cc3('0x9a')](_0x500ba9,_0x5db88e,_0xa489f5,_0x170e53++);}else{console[a23_0x3cc3('0x79')](a23_0x3cc3('0x9b')+_0x6a813d+'.');_0xa489f5(a23_0x3cc3('0x9c'),null,null,null);}return;case 0x194:console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x9d')+_0x6a813d);default:console[a23_0x3cc3('0x4c')](a23_0x3cc3('0x9e')+_0x6a813d+a23_0x3cc3('0x9f')+_0x3ae085[a23_0x3cc3('0x8c')]);_0x5393c3['abort']();_0xa489f5(_0x3ae085['statusCode'],null,null,null);return;}})['on'](a23_0x3cc3('0x79'),function(_0x2ffbef){console[a23_0x3cc3('0x4c')]('Error\x20Downloading:\x20'+_0x6a813d+'\x20'+_0x2ffbef['message']);_0xa489f5(_0x2ffbef,null,null,null);});}[a23_0x3cc3('0xa0')](_0x33a6a0,_0x5ef6dd,_0x59d93b,_0x217b7a){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xa0'));console[a23_0x3cc3('0x4c')](_0x33a6a0);console[a23_0x3cc3('0x4c')](_0x5ef6dd);console['log'](_0x59d93b);console[a23_0x3cc3('0x4c')](_0x217b7a);if(_0x59d93b==a23_0x3cc3('0x67')){const _0xfdb47=this[a23_0x3cc3('0x23')][this['currentFile']][a23_0x3cc3('0xa1')]!=null?this[a23_0x3cc3('0x23')][this[a23_0x3cc3('0x21')]][a23_0x3cc3('0xa1')]:0x1e;this['createImageVideo'](_0x217b7a,_0xfdb47);}else if(_0x59d93b==a23_0x3cc3('0xa2')){if(_0x33a6a0==null&&_0x5ef6dd!=''){this[a23_0x3cc3('0x21')]++;}this[a23_0x3cc3('0x5c')]();}console[a23_0x3cc3('0x4c')](this[a23_0x3cc3('0x21')]);}[a23_0x3cc3('0xa3')](_0x2d31b6,_0x213147,_0xb94dab){progress(request(_0x2d31b6),{})['on'](a23_0x3cc3('0xa4'),function(_0x41fddd){console[a23_0x3cc3('0x4c')](_0x41fddd);})['on'](a23_0x3cc3('0x79'),function(_0x1dc006){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xa5'));this['download']();})['on'](a23_0x3cc3('0x7b'),function(){console[a23_0x3cc3('0x4c')]('Downloaded:\x20'+_0x213147);console['log']('mediaType:\x20'+_0xb94dab);if(_0xb94dab==a23_0x3cc3('0x67')){const _0x5e603e=this[a23_0x3cc3('0x23')][this[a23_0x3cc3('0x21')]][a23_0x3cc3('0xa1')]!=null?this[a23_0x3cc3('0x23')][this[a23_0x3cc3('0x21')]][a23_0x3cc3('0xa1')]:0x1e;this[a23_0x3cc3('0xa6')](_0x213147,_0x5e603e);}else if(_0xb94dab==a23_0x3cc3('0xa2')){this[a23_0x3cc3('0x21')]++;this[a23_0x3cc3('0x5c')]();}}['bind'](this))[a23_0x3cc3('0x94')](fs[a23_0x3cc3('0x93')](this[a23_0x3cc3('0x19')]+_0x213147));}['createImageVideo'](_0x2f0694,_0x53ea91=0x1e){const _0x4e254a=this[a23_0x3cc3('0x19')]+_0x2f0694;console[a23_0x3cc3('0x4c')](_0x4e254a);console[a23_0x3cc3('0x4c')](_0x2f0694);const _0x2a3ea7=_0x2f0694[a23_0x3cc3('0x62')]('.')[a23_0x3cc3('0x63')](0x0,-0x1)['join']('.');const _0x5bbad2='ffmpeg';const _0x2ed442=['-y','-r',a23_0x3cc3('0xa7'),a23_0x3cc3('0xa8'),'1','-pattern_type',a23_0x3cc3('0xa9'),'-i',_0x4e254a,'-t',String(_0x53ea91),'-c:v',a23_0x3cc3('0xaa'),a23_0x3cc3('0xab'),'yuv420p','-r','25',a23_0x3cc3('0xac'),a23_0x3cc3('0xad'),this[a23_0x3cc3('0x19')]+_0x2a3ea7+'.mp4'];const _0x5b624a=spawn(_0x5bbad2,_0x2ed442);_0x5b624a[a23_0x3cc3('0xae')]['on'](a23_0x3cc3('0x95'),function(_0x58bb50){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xaf')+_0x4e254a);});_0x5b624a['stderr']['on'](a23_0x3cc3('0x95'),function(_0x4587fb){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xb0')+_0x4587fb);}[a23_0x3cc3('0x44')](this));_0x5b624a['on']('close',function(){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xb1'));this[a23_0x3cc3('0x21')]++;this['download']();}[a23_0x3cc3('0x44')](this));}[a23_0x3cc3('0x6b')](_0x1aae1e){const _0x48d767=this['tempFolder']+'/'+_0x1aae1e+a23_0x3cc3('0x66');const _0x548407=youtubedl('http://www.youtube.com/watch?v='+_0x1aae1e,[a23_0x3cc3('0xb2')],{'cwd':__dirname});_0x548407['on']('info',function(_0x10aa50){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xb3'));console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xb4')+_0x10aa50[a23_0x3cc3('0xb5')]);console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xb6')+_0x10aa50['size']);});_0x548407['on'](a23_0x3cc3('0xb7'),function complete(_0x4d6410){'use strict';console['log'](a23_0x3cc3('0xb4')+_0x4d6410[a23_0x3cc3('0xb5')]+'\x20already\x20downloaded.');});_0x548407['on'](a23_0x3cc3('0x7b'),function(){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xb8'));this[a23_0x3cc3('0x69')](_0x48d767)[a23_0x3cc3('0x4')](function(_0x3d7ca6){if(_0x3d7ca6){this[a23_0x3cc3('0x21')]++;}this[a23_0x3cc3('0x5c')]();}[a23_0x3cc3('0x44')](this));}[a23_0x3cc3('0x44')](this));_0x548407[a23_0x3cc3('0x94')](fs[a23_0x3cc3('0x93')](_0x48d767));}[a23_0x3cc3('0xb9')](){console[a23_0x3cc3('0x4c')]('Finishing');if(this['playlistChanged']){if(this['failDownloadFiles'][a23_0x3cc3('0x5b')]==0x0){fs[a23_0x3cc3('0x4f')](this[a23_0x3cc3('0x1c')],JSON[a23_0x3cc3('0x47')](this[a23_0x3cc3('0x25')]));let _0x494458=a23_0x3cc3('0xba')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x4d487e in this[a23_0x3cc3('0x23')]){const _0x876e66=this[a23_0x3cc3('0x23')][_0x4d487e][a23_0x3cc3('0xbb')];const _0x38cbeb=this[a23_0x3cc3('0x23')][_0x4d487e][a23_0x3cc3('0x61')];const _0x1f2b18=_0x876e66[a23_0x3cc3('0xbc')](_0x876e66[a23_0x3cc3('0xbd')]('/')+0x1);let _0x57d627=_0x1f2b18[a23_0x3cc3('0x62')]('.')[a23_0x3cc3('0x63')](0x0,-0x1)[a23_0x3cc3('0x64')]('.');if(_0x38cbeb==a23_0x3cc3('0x65')){_0x57d627=_0x876e66;}_0x494458+=a23_0x3cc3('0xbe')+_0x57d627+a23_0x3cc3('0x66')+'\x0d\x0a';}fsExtra[a23_0x3cc3('0x59')](this[a23_0x3cc3('0x1f')]);fsExtra[a23_0x3cc3('0xbf')](this['tempFolder'],this['filesFolder']);fsExtra[a23_0x3cc3('0x4f')](this[a23_0x3cc3('0x1e')],_0x494458);fsExtra['emptyDirSync'](this[a23_0x3cc3('0x19')]);console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xc0'));this[a23_0x3cc3('0xc1')]();}else{console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xc2'));this[a23_0x3cc3('0x21')]=0x0;setTimeout(function(){this[a23_0x3cc3('0x5c')]();}[a23_0x3cc3('0x44')](this),0x1388);}}else{console[a23_0x3cc3('0x4c')]('No\x20playlist\x20changes.');}}[a23_0x3cc3('0xc1')](){this[a23_0x3cc3('0xc3')](a23_0x3cc3('0xc4'),{'playlistid':0x1},function(_0x41a6a2){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xc5'));console[a23_0x3cc3('0x4c')](_0x41a6a2);this[a23_0x3cc3('0xc3')]('Playlist.Add',{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x41a6a2){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xc6'));console['log'](_0x41a6a2);this[a23_0x3cc3('0xc3')](a23_0x3cc3('0xc7'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x41a6a2){console['log'](a23_0x3cc3('0xc8'));console['log'](_0x41a6a2);if(this['forceReload']){this[a23_0x3cc3('0x2c')]=![];this[a23_0x3cc3('0xc9')](a23_0x3cc3('0xca'));}}[a23_0x3cc3('0x44')](this));}[a23_0x3cc3('0x44')](this));}[a23_0x3cc3('0x44')](this));}[a23_0x3cc3('0xcb')](){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xcc'));this[a23_0x3cc3('0xc9')]('Reboot()');}['updateSettings'](){const _0x930a7c=format(this[a23_0x3cc3('0x3c')],this[a23_0x3cc3('0x35')]);console[a23_0x3cc3('0x4c')](_0x930a7c);request({'url':_0x930a7c,'json':!![]},function(_0x448383,_0x16bff5,_0x5cd1b6){if(_0x5cd1b6[a23_0x3cc3('0x5b')]>0x0){const _0x105c23=_0x5cd1b6[0x0];const _0x96e0f1=_0x105c23[a23_0x3cc3('0xcd')];const _0x3a44ba=_0x105c23[a23_0x3cc3('0xce')]==0x1;this[a23_0x3cc3('0xcf')](_0x96e0f1);this['enableClock'](_0x3a44ba);this[a23_0x3cc3('0x3f')]();}console[a23_0x3cc3('0x4c')](_0x5cd1b6);}[a23_0x3cc3('0x44')](this));}[a23_0x3cc3('0xcf')](_0x52e50){const _0x25edfa=_0x52e50!=null&&_0x52e50!='';const _0x257e90=a23_0x3cc3('0xd0');const _0x40afb0=fsExtra[a23_0x3cc3('0x33')](_0x257e90);console['log']('xmlContent:\x20'+_0x40afb0);const _0x12b440=require(a23_0x3cc3('0xd1'));const _0x39666f=_0x12b440[a23_0x3cc3('0xd2')];_0x39666f(_0x40afb0,function(_0x7ef74c,_0x5a7655){console[a23_0x3cc3('0x4c')](a23_0x3cc3('0xd3'),_0x7ef74c);console['log'](a23_0x3cc3('0xd4'),_0x5a7655);if(!_0x52e50||_0x52e50==null||_0x52e50==''){_0x52e50='none';}_0x5a7655[a23_0x3cc3('0xd5')]['set'][0x0][a23_0x3cc3('0xd6')][0x0]['_']=_0x52e50;const _0x1cdf02=new _0x12b440[(a23_0x3cc3('0xd7'))]();const _0x1e371f=_0x1cdf02[a23_0x3cc3('0xd8')](_0x5a7655);console[a23_0x3cc3('0x4c')]('xml:\x20%j',_0x1e371f);fsExtra[a23_0x3cc3('0x4f')](_0x257e90,_0x1e371f);});this[a23_0x3cc3('0xc9')](a23_0x3cc3('0xd9'));this['jsonrpcClient'](a23_0x3cc3('0xda'),{'setting':'lookandfeel.enablerssfeeds','value':_0x25edfa},function(_0x52b582){console['log'](a23_0x3cc3('0xdb'));console['log'](_0x52b582);}[a23_0x3cc3('0x44')](this));}[a23_0x3cc3('0xdc')](_0xd09474){this['jsonrpcClient'](a23_0x3cc3('0xda'),{'setting':a23_0x3cc3('0xdd'),'value':_0xd09474},function(_0x43511a){console['log'](a23_0x3cc3('0xde'));console['log'](_0x43511a);}[a23_0x3cc3('0x44')](this));}['kodiCommandClient'](_0x2259c5){exec(a23_0x3cc3('0xdf')+_0x2259c5+'\x22',function(_0x1c4ef4){console['log'](_0x1c4ef4);});}[a23_0x3cc3('0xc3')](_0x2dca5f,_0x2c541a,_0x5c201d){const _0x35ab73={'jsonrpc':a23_0x3cc3('0xe0'),'method':_0x2dca5f,'params':_0x2c541a,'id':0x1};this[a23_0x3cc3('0x2d')][a23_0x3cc3('0x4a')](this[a23_0x3cc3('0x26')]+a23_0x3cc3('0xe1'),_0x35ab73,![],{'user':this[a23_0x3cc3('0x28')],'pass':this[a23_0x3cc3('0x2a')]})['then'](function(_0xa64f9c){_0x5c201d(_0xa64f9c);})['catch'](function(_0x4c14e9){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;