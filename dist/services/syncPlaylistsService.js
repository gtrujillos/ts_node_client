var a26_0x300a=['videoFile:\x20','media','track','@type','mediainfo\x20check:','includes','indexOf','splice','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','pathname','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','Redownloading',')\x20vs\x20New(','createWriteStream','pipe','finish','Downloaded\x20','location','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','message','downloadHTTPFileCallback','duration','video','downloadRequestFile','progress','Error\x20downloading\x20file','mediaType:\x20','createImageVideo','ffmpeg','1/2','-loop','glob','libx264','-pix_fmt','yuv420p','stdout','data','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','this.playListFile:\x20','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','reboot','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','kodiCommandClient','Rebooting','updateSettings','rss','header_active','setRss','turnOffTV','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','parseString','err:\x20%j','none','rssfeeds','set','feed','Builder','RefreshRSS()','lookandfeel.enablerssfeeds','setRss:','Settings.SetSettingValue','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','defineProperty','__esModule','./playerService','node-mediainfo','url','fs-extra','request','request-progress','child_process','string-template','youtube-dl','uuid/v4','config.json','package.json','url-exists','node-kodi','media/','mediaFolder','temp/','files/','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','PlayerService','init','config','parse','readFileSync','context','playerId','baseURL','deploy/','playListServiceURL','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','bind','stringify','deviceUuid','networkInterfaces','version','post','http://restapi.lulo.run/player_devices/register','log','catch','writeFileSync','getStatus','player','getCurrentlyPlayingVideo','then','item','label','reportStatus','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','loadMediaList:\x20','newPlayList','hasPlayListChanged','emptyDirSync','tempFolder','push','length','download','reloadMediaList','existsSync','playListFile','removeSync','toString','\x20of\x20','finishProcess','media_type','substring','lastIndexOf','slice','split','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader'];(function(_0xa28565,_0x2de7be){var _0x2c9da1=function(_0x515b2b){while(--_0x515b2b){_0xa28565['push'](_0xa28565['shift']());}};_0x2c9da1(++_0x2de7be);}(a26_0x300a,0x7f));var a26_0x497b=function(_0x1e8db5,_0x5aac2b){_0x1e8db5=_0x1e8db5-0x0;var _0x4213f5=a26_0x300a[_0x1e8db5];return _0x4213f5;};'use strict';var __awaiter=this&&this[a26_0x497b('0x0')]||function(_0x257c41,_0x594bcf,_0x590d9c,_0x3d4f7a){function _0x4e862f(_0x402fe9){return _0x402fe9 instanceof _0x590d9c?_0x402fe9:new _0x590d9c(function(_0x591b93){_0x591b93(_0x402fe9);});}return new(_0x590d9c||(_0x590d9c=Promise))(function(_0xca9b4e,_0x3a50c7){function _0x3644dd(_0x5ecd4f){try{_0x3a714d(_0x3d4f7a[a26_0x497b('0x1')](_0x5ecd4f));}catch(_0x5ab4d7){_0x3a50c7(_0x5ab4d7);}}function _0x3538ff(_0xc4d1ca){try{_0x3a714d(_0x3d4f7a[a26_0x497b('0x2')](_0xc4d1ca));}catch(_0x14ba9d){_0x3a50c7(_0x14ba9d);}}function _0x3a714d(_0x5684a7){_0x5684a7[a26_0x497b('0x3')]?_0xca9b4e(_0x5684a7[a26_0x497b('0x4')]):_0x4e862f(_0x5684a7[a26_0x497b('0x4')])['then'](_0x3644dd,_0x3538ff);}_0x3a714d((_0x3d4f7a=_0x3d4f7a['apply'](_0x257c41,_0x594bcf||[]))[a26_0x497b('0x1')]());});};Object[a26_0x497b('0x5')](exports,a26_0x497b('0x6'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a26_0x497b('0x7'));const mediainfo=require(a26_0x497b('0x8'));const fs=require('fs');const url=require(a26_0x497b('0x9'));const http=require('http');const fsExtra=require(a26_0x497b('0xa'));const request=require(a26_0x497b('0xb'));const progress=require(a26_0x497b('0xc'));const spawn=require(a26_0x497b('0xd'))['spawn'];const exec=require('child_process')['exec'];const isImage=require('is-image');const format=require(a26_0x497b('0xe'));const os=require('os');const youtubedl=require(a26_0x497b('0xf'));const uuidv4=require(a26_0x497b('0x10'));const configFile=a26_0x497b('0x11');const contextFile=a26_0x497b('0x12');const urlExists=require(a26_0x497b('0x13'));const kodi_rpc=require(a26_0x497b('0x14'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']=a26_0x497b('0x15');this['tempFolder']=this[a26_0x497b('0x16')]+a26_0x497b('0x17');this['filesFolder']=this[a26_0x497b('0x16')]+a26_0x497b('0x18');this['playListFile']=this['mediaFolder']+a26_0x497b('0x19');this[a26_0x497b('0x1a')]=this[a26_0x497b('0x1b')]+a26_0x497b('0x1c');this[a26_0x497b('0x1d')]=0x0;this[a26_0x497b('0x1e')]=![];this[a26_0x497b('0x1f')]=[];this[a26_0x497b('0x20')]=[];this['newPlayList']={};this[a26_0x497b('0x21')]=a26_0x497b('0x22');this[a26_0x497b('0x23')]=a26_0x497b('0x24');this[a26_0x497b('0x25')]=a26_0x497b('0x26');this[a26_0x497b('0x27')]=![];this[a26_0x497b('0x28')]=new HttpClientService_1[(a26_0x497b('0x29'))]();this[a26_0x497b('0x2a')]=new playerService_1[(a26_0x497b('0x2b'))]();}[a26_0x497b('0x2c')](){this[a26_0x497b('0x2d')]=JSON[a26_0x497b('0x2e')](fs[a26_0x497b('0x2f')](configFile));this[a26_0x497b('0x30')]=JSON['parse'](fs[a26_0x497b('0x2f')](contextFile));this[a26_0x497b('0x31')]=this[a26_0x497b('0x2d')]['playerId'];this[a26_0x497b('0x32')]=process['env']['WEB_SERVICE_URL']+a26_0x497b('0x33');this[a26_0x497b('0x34')]=this['baseURL']+'api/player_playlist.php?player_id={0}';this['playerServiceURL']=this['baseURL']+a26_0x497b('0x35');this[a26_0x497b('0x36')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a26_0x497b('0x23')],'password':this[a26_0x497b('0x25')]});this[a26_0x497b('0x37')]();this[a26_0x497b('0x38')]();this[a26_0x497b('0x39')]();this[a26_0x497b('0x3a')]();this['updateSettings']();setInterval(function(){this['getStatus']();}[a26_0x497b('0x3b')](this),0x2710);setInterval(function(){this['registerClient']();}[a26_0x497b('0x3b')](this),0x493e0);}[a26_0x497b('0x37')](){}['registerClient'](){this['kodi']['playlist']['getItems'](0x1)['then'](function(_0xb20495){const _0x3d2e29=JSON[a26_0x497b('0x3c')](_0xb20495);const _0x47e334={'player_id':this[a26_0x497b('0x31')],'device_uuid':this['config'][a26_0x497b('0x3d')],'network_info':JSON[a26_0x497b('0x3c')](os[a26_0x497b('0x3e')]()),'firmware_info':JSON[a26_0x497b('0x3c')](this[a26_0x497b('0x30')][a26_0x497b('0x3f')]),'playlist':_0x3d2e29,'playing_item':'','status':0x0};this[a26_0x497b('0x28')][a26_0x497b('0x40')](a26_0x497b('0x41'),_0x47e334,![])['then'](function(_0x5f37da){console[a26_0x497b('0x42')]('register\x20response:\x20'+Date());})[a26_0x497b('0x43')](function(_0x1a1bc1){});console['log'](_0x47e334);}['bind'](this));const _0x22ac44=this[a26_0x497b('0x2d')][a26_0x497b('0x3d')];if(!_0x22ac44||_0x22ac44==''){this[a26_0x497b('0x2d')][a26_0x497b('0x3d')]=uuidv4();this[a26_0x497b('0x2d')]={'deviceUuid':this[a26_0x497b('0x2d')][a26_0x497b('0x3d')],'playerId':this[a26_0x497b('0x2d')]['playerId']};fs[a26_0x497b('0x44')](configFile,JSON[a26_0x497b('0x3c')](this['config']));}}[a26_0x497b('0x45')](){console[a26_0x497b('0x42')](a26_0x497b('0x45'));this[a26_0x497b('0x36')][a26_0x497b('0x46')][a26_0x497b('0x47')]()[a26_0x497b('0x48')](function(_0x4b2bc2){const _0x134583=_0x4b2bc2[a26_0x497b('0x49')][a26_0x497b('0x4a')];this[a26_0x497b('0x4b')](_0x134583);}['bind'](this))[a26_0x497b('0x43')](function(_0x27cb72){console[a26_0x497b('0x42')](_0x27cb72);this['reportStatus'](JSON['stringify'](_0x27cb72));}[a26_0x497b('0x3b')](this));}[a26_0x497b('0x4b')](_0x5dbfa4){console[a26_0x497b('0x42')]('reportStatus\x20playingItem:\x20'+_0x5dbfa4);const _0x55f553={'player_id':this[a26_0x497b('0x31')],'device_uuid':this[a26_0x497b('0x2d')]['deviceUuid'],'status':_0x5dbfa4!=''&&_0x5dbfa4!=null?0x1:0x0,'playing_item':_0x5dbfa4};this[a26_0x497b('0x28')][a26_0x497b('0x40')](a26_0x497b('0x4c'),_0x55f553,![])[a26_0x497b('0x48')](function(_0x263d10){console['log'](a26_0x497b('0x4d'));})[a26_0x497b('0x43')](function(_0x1164cb){});}[a26_0x497b('0x39')](){fsExtra[a26_0x497b('0x4e')](this[a26_0x497b('0x16')],_0x2f9983=>{});fsExtra[a26_0x497b('0x4e')](this['tempFolder'],_0x59d2e1=>{});fsExtra[a26_0x497b('0x4e')](this[a26_0x497b('0x1b')],_0x262694=>{});}[a26_0x497b('0x3a')](){const _0x58fad1=format(this[a26_0x497b('0x34')],this[a26_0x497b('0x31')]);console['log'](_0x58fad1);request({'url':_0x58fad1,'json':!![]},function(_0x1dbf59,_0x2833fa,_0x45bc20){console[a26_0x497b('0x42')](a26_0x497b('0x4f'));this[a26_0x497b('0x50')]=_0x45bc20;this[a26_0x497b('0x1e')]=this[a26_0x497b('0x51')]();fsExtra[a26_0x497b('0x52')](this[a26_0x497b('0x53')]);this[a26_0x497b('0x1f')]=[];this[a26_0x497b('0x20')]=[];this['currentFile']=0x0;for(const _0x2c6686 in _0x45bc20){this[a26_0x497b('0x1f')][a26_0x497b('0x54')](_0x45bc20[_0x2c6686]);}console[a26_0x497b('0x42')]('Total:\x20'+this[a26_0x497b('0x1f')]['length']);if(this['downloadFiles'][a26_0x497b('0x55')]>0x0){this[a26_0x497b('0x56')]();}}[a26_0x497b('0x3b')](this));}[a26_0x497b('0x57')](){this[a26_0x497b('0x27')]=!![];if(fsExtra['existsSync'](this[a26_0x497b('0x53')])){fsExtra[a26_0x497b('0x52')](this[a26_0x497b('0x53')]);}if(fsExtra[a26_0x497b('0x58')](this[a26_0x497b('0x1b')])){fsExtra[a26_0x497b('0x52')](this['filesFolder']);}if(!fsExtra[a26_0x497b('0x58')](this[a26_0x497b('0x59')])){fsExtra[a26_0x497b('0x5a')](this[a26_0x497b('0x59')]);}if(!fsExtra[a26_0x497b('0x58')](this[a26_0x497b('0x1a')])){fsExtra['removeSync'](this[a26_0x497b('0x1a')]);}this[a26_0x497b('0x3a')]();}['hasPlayListChanged'](){const _0x8fe408=JSON[a26_0x497b('0x3c')](this[a26_0x497b('0x50')]);try{if(!fsExtra['existsSync'](this[a26_0x497b('0x59')])){return!![];}else{const _0x1c4a96=fsExtra[a26_0x497b('0x2f')](this[a26_0x497b('0x59')])[a26_0x497b('0x5b')]();if(_0x1c4a96!=_0x8fe408){return!![];}}}catch(_0x467da4){console['log'](_0x467da4);}return![];}['download'](){console[a26_0x497b('0x42')]('this.currentFile:\x20'+this[a26_0x497b('0x1d')]+a26_0x497b('0x5c')+this['downloadFiles'][a26_0x497b('0x55')]);if(this[a26_0x497b('0x1d')]>=this[a26_0x497b('0x1f')]['length']){this[a26_0x497b('0x5d')]();return;}const _0x439018=String(this[a26_0x497b('0x1f')][this[a26_0x497b('0x1d')]]['path']);const _0x174ee1=this[a26_0x497b('0x1f')][this[a26_0x497b('0x1d')]][a26_0x497b('0x5e')];let _0x751e27=_0x439018[a26_0x497b('0x5f')](_0x439018[a26_0x497b('0x60')]('/')+0x1);const _0x379f29=_0x751e27['split']('.')[a26_0x497b('0x61')](0x0,-0x1)['join']('.');let _0x400908=this['baseURL']+_0x439018;const _0x129fd6=_0x400908[a26_0x497b('0x62')]('.')[a26_0x497b('0x61')](0x0,-0x1)[a26_0x497b('0x63')]('.');if(_0x174ee1==a26_0x497b('0x64')){_0x751e27=_0x751e27+a26_0x497b('0x65');}else if(_0x174ee1==a26_0x497b('0x66')){_0x751e27=_0x379f29+a26_0x497b('0x65');_0x400908=_0x129fd6+a26_0x497b('0x65');}console[a26_0x497b('0x42')](a26_0x497b('0x67'));console['log'](_0x439018);console[a26_0x497b('0x42')](_0x174ee1);console['log'](_0x751e27);console[a26_0x497b('0x42')](_0x400908);console[a26_0x497b('0x42')](_0x379f29);console[a26_0x497b('0x42')](_0x129fd6);console[a26_0x497b('0x42')](a26_0x497b('0x67'));if(fsExtra['existsSync'](this['tempFolder']+_0x751e27)){this[a26_0x497b('0x68')](this[a26_0x497b('0x53')]+_0x751e27)[a26_0x497b('0x48')](function(_0x16659a){if(_0x16659a){this['currentFile']++;}else{this[a26_0x497b('0x1e')]=!![];}this[a26_0x497b('0x56')]();}[a26_0x497b('0x3b')](this));}else if(fsExtra[a26_0x497b('0x58')](this['filesFolder']+_0x751e27)){this[a26_0x497b('0x68')](this['filesFolder']+_0x751e27)[a26_0x497b('0x48')](function(_0x5c4735){if(_0x5c4735){fsExtra[a26_0x497b('0x69')](this[a26_0x497b('0x1b')]+_0x751e27,this[a26_0x497b('0x53')]+_0x751e27);this[a26_0x497b('0x1d')]++;}else{this['playlistChanged']=!![];}this[a26_0x497b('0x56')]();}['bind'](this));}else{console[a26_0x497b('0x42')](a26_0x497b('0x6a')+_0x400908);this[a26_0x497b('0x1e')]=!![];if(_0x174ee1==a26_0x497b('0x64')){this[a26_0x497b('0x6b')](_0x439018);}else{this[a26_0x497b('0x6c')](_0x400908,_0x751e27,_0x174ee1);}}}[a26_0x497b('0x68')](_0x2439cf){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x497b('0x42')](a26_0x497b('0x6d')+_0x2439cf);const _0x3005bb=yield mediainfo(_0x2439cf)[a26_0x497b('0x43')](_0x2e7ef4=>{console[a26_0x497b('0x42')](_0x2e7ef4);fsExtra[a26_0x497b('0x5a')](_0x2439cf);return![];});const _0xedd6bd=_0x3005bb[a26_0x497b('0x6e')][a26_0x497b('0x6f')][a26_0x497b('0x55')]>0x1&&_0x3005bb[a26_0x497b('0x6e')][a26_0x497b('0x6f')][0x1][a26_0x497b('0x70')]=='Video';if(!_0xedd6bd){fsExtra['removeSync'](_0x2439cf);}console['log'](a26_0x497b('0x71')+_0xedd6bd);return _0xedd6bd;});}[a26_0x497b('0x6c')](_0x46d5ee,_0x39cd59,_0x545a65){const _0x261b8e=new Downloader();console[a26_0x497b('0x42')](_0x46d5ee);console[a26_0x497b('0x42')](_0x39cd59);console[a26_0x497b('0x42')](_0x545a65);const _0x2a9400=_0x261b8e['download'](_0x46d5ee,this[a26_0x497b('0x53')]+_0x39cd59);urlExists(_0x46d5ee,function(_0x14e905,_0x49035c){if(_0x49035c){if(this['failDownloadFiles'][a26_0x497b('0x72')](this[a26_0x497b('0x1d')])){const _0x352bb4=this['failDownloadFiles'][a26_0x497b('0x73')](this[a26_0x497b('0x1d')]);if(_0x352bb4>-0x1){this[a26_0x497b('0x20')][a26_0x497b('0x74')](_0x352bb4,0x1);}}console[a26_0x497b('0x42')]('downloading:\x20'+_0x46d5ee);_0x2a9400[a26_0x497b('0x75')]();}else{if(!this['failDownloadFiles'][a26_0x497b('0x72')](this[a26_0x497b('0x1d')])){this[a26_0x497b('0x20')][a26_0x497b('0x54')](this[a26_0x497b('0x1d')]);}console[a26_0x497b('0x42')](a26_0x497b('0x76')+_0x46d5ee);this[a26_0x497b('0x1d')]++;this[a26_0x497b('0x56')]();}}[a26_0x497b('0x3b')](this));_0x2a9400['on'](a26_0x497b('0x75'),function(_0x2a9400){console[a26_0x497b('0x42')](a26_0x497b('0x77')+_0x46d5ee);});_0x2a9400['on'](a26_0x497b('0x78'),function(_0x2a9400){console[a26_0x497b('0x42')](a26_0x497b('0x79'));this[a26_0x497b('0x56')]();}[a26_0x497b('0x3b')](this));_0x2a9400['on']('end',function(_0x2a9400){console[a26_0x497b('0x42')](a26_0x497b('0x7a'));console[a26_0x497b('0x42')](a26_0x497b('0x7b')+_0x39cd59);console[a26_0x497b('0x42')]('mediaType:\x20'+_0x545a65);this[a26_0x497b('0x68')](this['tempFolder']+_0x39cd59)[a26_0x497b('0x48')](function(_0x37de71){if(_0x37de71){this[a26_0x497b('0x1d')]++;}this['download']();}[a26_0x497b('0x3b')](this));}[a26_0x497b('0x3b')](this));_0x2a9400['on']('stopped',function(_0x2a9400){console['log'](a26_0x497b('0x7c'));});_0x2a9400['on'](a26_0x497b('0x7d'),function(_0x2a9400){console['log'](a26_0x497b('0x7d'));});_0x2a9400['on'](a26_0x497b('0x7e'),function(_0x2a9400){console['log'](a26_0x497b('0x7e'));});}[a26_0x497b('0x7f')](_0x2c335b,_0xe8f9e8,_0x1adc04,_0x59c713){console[a26_0x497b('0x42')](a26_0x497b('0x7f'));console['log'](_0x2c335b);const _0x3fb123=!![];let _0x39f80b=0x0;const _0x3f15c0='';console[a26_0x497b('0x42')](a26_0x497b('0x80')+_0x2c335b+a26_0x497b('0x81')+_0xe8f9e8);if(_0x39f80b){if(_0x39f80b>0x5){_0x59c713(a26_0x497b('0x82'),_0x2c335b,_0x1adc04,null);return;}}else{_0x39f80b=0x0;}const _0x156c56=this[a26_0x497b('0x53')]+_0xe8f9e8;let _0x253431;if(_0x59c713===undefined){console[a26_0x497b('0x42')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x2c335b+a26_0x497b('0x81')+_0x156c56);_0x59c713=function(_0xe4f546,_0x120a11){console[a26_0x497b('0x42')](a26_0x497b('0x83'),_0xe4f546,_0x120a11);};}http['globalAgent'][a26_0x497b('0x84')]=0x64;const _0x1e6ade={'host':url[a26_0x497b('0x2e')](_0x2c335b)['host'],'port':0x50,'path':url['parse'](_0x2c335b)[a26_0x497b('0x85')],'agent':![]};const _0x2d25e1=http['get'](_0x1e6ade,function(_0x1b1c3e){let _0x24d326=0x0;let _0xbde3fb=0x0;function _0x3c34ca(){if(_0x24d326===undefined){console[a26_0x497b('0x42')](_0xe8f9e8+'\x20Progress:\x20unknown\x09'+_0xbde3fb+'/'+'?');}const _0x1158cc=_0xbde3fb/_0x24d326*0x64;console[a26_0x497b('0x42')](_0xe8f9e8+a26_0x497b('0x86')+_0x1158cc+'%\x09'+_0xbde3fb+'/'+_0x24d326);}console[a26_0x497b('0x42')](_0xe8f9e8+'\x20'+_0x1b1c3e[a26_0x497b('0x87')]);switch(_0x1b1c3e[a26_0x497b('0x87')]){case 0xc8:_0x24d326=_0x1b1c3e[a26_0x497b('0x88')][a26_0x497b('0x89')]||_0x3f15c0;fs[a26_0x497b('0x8a')](_0x156c56,function(_0x4071c9,_0x27a8a5){if(!_0x4071c9){console[a26_0x497b('0x42')](a26_0x497b('0x8b')+_0x156c56);if(_0x27a8a5[a26_0x497b('0x8c')]==_0x24d326){console['log']('And\x20the\x20file\x20size\x20matches\x20('+_0x24d326+')');console[a26_0x497b('0x42')](a26_0x497b('0x8d'));}else{console[a26_0x497b('0x42')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x27a8a5['size']+a26_0x497b('0x8e')+_0x24d326+')');}}_0x253431=fs[a26_0x497b('0x8f')](_0x156c56);_0x1b1c3e[a26_0x497b('0x90')](_0x253431);_0x1b1c3e['on']('data',function(_0x4b51da){_0xbde3fb+=_0x4b51da[a26_0x497b('0x55')];_0x3c34ca();});_0x2d25e1['on']('error',function(_0x4071c9){console['log']('err:\x20');console[a26_0x497b('0x42')](_0x4071c9);});_0x253431['on'](a26_0x497b('0x91'),function(){console['log'](a26_0x497b('0x92')+_0x2c335b+a26_0x497b('0x81')+_0xe8f9e8);_0x59c713(null,_0xe8f9e8,_0x1adc04,_0xe8f9e8);}[a26_0x497b('0x3b')](this));});break;case 0x12e:const _0x2c9361=_0x1b1c3e[a26_0x497b('0x88')][a26_0x497b('0x93')];console[a26_0x497b('0x42')](a26_0x497b('0x94')+_0x2c335b+a26_0x497b('0x81')+_0x2c9361);if(_0x39f80b<0x5){this[a26_0x497b('0x7f')](_0x2c9361,_0xe8f9e8,_0x59c713,_0x39f80b++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x2c335b+'.');_0x59c713(a26_0x497b('0x95'),null,null,null);}return;case 0x194:console[a26_0x497b('0x42')](a26_0x497b('0x96')+_0x2c335b);default:console['log'](a26_0x497b('0x97')+_0x2c335b+a26_0x497b('0x98')+_0x1b1c3e[a26_0x497b('0x87')]);_0x2d25e1['abort']();_0x59c713(_0x1b1c3e[a26_0x497b('0x87')],null,null,null);return;}})['on'](a26_0x497b('0x78'),function(_0x527c91){console[a26_0x497b('0x42')]('Error\x20Downloading:\x20'+_0x2c335b+'\x20'+_0x527c91[a26_0x497b('0x99')]);_0x59c713(_0x527c91,null,null,null);});}[a26_0x497b('0x9a')](_0x290c2b,_0x3dbd46,_0x59fe4f,_0x440c92){console[a26_0x497b('0x42')](a26_0x497b('0x9a'));console[a26_0x497b('0x42')](_0x290c2b);console[a26_0x497b('0x42')](_0x3dbd46);console[a26_0x497b('0x42')](_0x59fe4f);console[a26_0x497b('0x42')](_0x440c92);if(_0x59fe4f=='image'){const _0x3327fe=this[a26_0x497b('0x1f')][this[a26_0x497b('0x1d')]]['duration']!=null?this['downloadFiles'][this['currentFile']][a26_0x497b('0x9b')]:0x1e;this['createImageVideo'](_0x440c92,_0x3327fe);}else if(_0x59fe4f==a26_0x497b('0x9c')){if(_0x290c2b==null&&_0x3dbd46!=''){this[a26_0x497b('0x1d')]++;}this[a26_0x497b('0x56')]();}console['log'](this[a26_0x497b('0x1d')]);}[a26_0x497b('0x9d')](_0x2d907a,_0x3d11a2,_0x5397c0){progress(request(_0x2d907a),{})['on'](a26_0x497b('0x9e'),function(_0xcedb7){console[a26_0x497b('0x42')](_0xcedb7);})['on']('error',function(_0xdc919e){console[a26_0x497b('0x42')](a26_0x497b('0x9f'));this[a26_0x497b('0x56')]();})['on'](a26_0x497b('0x7a'),function(){console[a26_0x497b('0x42')](a26_0x497b('0x7b')+_0x3d11a2);console['log'](a26_0x497b('0xa0')+_0x5397c0);if(_0x5397c0==a26_0x497b('0x66')){const _0x268bb5=this[a26_0x497b('0x1f')][this[a26_0x497b('0x1d')]][a26_0x497b('0x9b')]!=null?this[a26_0x497b('0x1f')][this[a26_0x497b('0x1d')]][a26_0x497b('0x9b')]:0x1e;this[a26_0x497b('0xa1')](_0x3d11a2,_0x268bb5);}else if(_0x5397c0==a26_0x497b('0x9c')){this[a26_0x497b('0x1d')]++;this['download']();}}[a26_0x497b('0x3b')](this))[a26_0x497b('0x90')](fs[a26_0x497b('0x8f')](this[a26_0x497b('0x53')]+_0x3d11a2));}[a26_0x497b('0xa1')](_0x20e6b9,_0x55f03f=0x1e){const _0x41c494=this[a26_0x497b('0x53')]+_0x20e6b9;console[a26_0x497b('0x42')](_0x41c494);console['log'](_0x20e6b9);const _0x4ca344=_0x20e6b9[a26_0x497b('0x62')]('.')['slice'](0x0,-0x1)[a26_0x497b('0x63')]('.');const _0x244946=a26_0x497b('0xa2');const _0x485cf4=['-y','-r',a26_0x497b('0xa3'),a26_0x497b('0xa4'),'1','-pattern_type',a26_0x497b('0xa5'),'-i',_0x41c494,'-t',String(_0x55f03f),'-c:v',a26_0x497b('0xa6'),a26_0x497b('0xa7'),a26_0x497b('0xa8'),'-r','25','-vf','scale=1920:1080',this[a26_0x497b('0x53')]+_0x4ca344+a26_0x497b('0x65')];const _0x8869dd=spawn(_0x244946,_0x485cf4);_0x8869dd[a26_0x497b('0xa9')]['on'](a26_0x497b('0xaa'),function(_0x5382b8){console[a26_0x497b('0x42')](a26_0x497b('0xab')+_0x41c494);});_0x8869dd[a26_0x497b('0xac')]['on'](a26_0x497b('0xaa'),function(_0x2ac7e4){console[a26_0x497b('0x42')](a26_0x497b('0xad')+_0x2ac7e4);}[a26_0x497b('0x3b')](this));_0x8869dd['on'](a26_0x497b('0xae'),function(){console['log'](a26_0x497b('0xaf'));this[a26_0x497b('0x1d')]++;this[a26_0x497b('0x56')]();}['bind'](this));}[a26_0x497b('0x6b')](_0x4997c8){const _0x5bd24f=this[a26_0x497b('0x53')]+'/'+_0x4997c8+a26_0x497b('0x65');const _0x299379=a26_0x497b('0xb0')+_0x4997c8;console[a26_0x497b('0x42')](a26_0x497b('0xb1')+_0x299379);console[a26_0x497b('0x42')](a26_0x497b('0xb2')+_0x5bd24f);const _0x349ab=youtubedl(_0x299379,[a26_0x497b('0xb3'),a26_0x497b('0xb4')],{'cwd':__dirname});_0x349ab['on'](a26_0x497b('0xb5'),function(_0x33126c){console[a26_0x497b('0x42')](a26_0x497b('0xb6'));console[a26_0x497b('0x42')](a26_0x497b('0xb7')+_0x33126c[a26_0x497b('0xb8')]);console[a26_0x497b('0x42')](a26_0x497b('0xb9')+_0x33126c[a26_0x497b('0x8c')]);});_0x349ab['on'](a26_0x497b('0xba'),function complete(_0xe01c15){'use strict';console[a26_0x497b('0x42')](a26_0x497b('0xb7')+_0xe01c15['_filename']+a26_0x497b('0xbb'));});_0x349ab['on'](a26_0x497b('0x7a'),function(){console[a26_0x497b('0x42')](a26_0x497b('0xbc'));this[a26_0x497b('0x68')](_0x5bd24f)[a26_0x497b('0x48')](function(_0xb9de42){if(_0xb9de42){this[a26_0x497b('0x1d')]++;}this[a26_0x497b('0x56')]();}[a26_0x497b('0x3b')](this));}[a26_0x497b('0x3b')](this));_0x349ab[a26_0x497b('0x90')](fs[a26_0x497b('0x8f')](_0x5bd24f));}['finishProcess'](){console[a26_0x497b('0x42')](a26_0x497b('0xbd'));if(this[a26_0x497b('0x1e')]){if(this[a26_0x497b('0x20')]['length']==0x0){console[a26_0x497b('0x42')](a26_0x497b('0xbe')+this['playListFile']);fs[a26_0x497b('0x44')](this[a26_0x497b('0x59')],JSON['stringify'](this[a26_0x497b('0x50')]));let _0x318122=a26_0x497b('0xbf')+'\x0d\x0a'+a26_0x497b('0xc0')+'\x0d\x0a';for(const _0xc70a33 in this[a26_0x497b('0x1f')]){const _0x5481da=this[a26_0x497b('0x1f')][_0xc70a33][a26_0x497b('0xc1')];const _0x3f2e6d=this['downloadFiles'][_0xc70a33]['media_type'];const _0x23e2d0=_0x5481da['substring'](_0x5481da['lastIndexOf']('/')+0x1);let _0x3da599=_0x23e2d0[a26_0x497b('0x62')]('.')[a26_0x497b('0x61')](0x0,-0x1)[a26_0x497b('0x63')]('.');if(_0x3f2e6d==a26_0x497b('0x64')){_0x3da599=_0x5481da;}_0x318122+=a26_0x497b('0xc2')+_0x3da599+'.mp4'+'\x0d\x0a';console[a26_0x497b('0x42')](a26_0x497b('0xc3')+_0x318122);}console[a26_0x497b('0x42')](a26_0x497b('0xc3')+_0x318122);fsExtra[a26_0x497b('0x52')](this[a26_0x497b('0x1b')]);console['log'](a26_0x497b('0xc4')+this[a26_0x497b('0x53')]);fsExtra[a26_0x497b('0x69')](this[a26_0x497b('0x53')],this[a26_0x497b('0x1b')]);console[a26_0x497b('0x42')](a26_0x497b('0xc5')+this['m3uFile']);fsExtra[a26_0x497b('0x44')](this[a26_0x497b('0x1a')],_0x318122);console['log'](a26_0x497b('0xc6')+this[a26_0x497b('0x53')]);fsExtra['emptyDirSync'](this[a26_0x497b('0x53')]);console['log'](a26_0x497b('0xc7'));this[a26_0x497b('0xc8')]();}else{console[a26_0x497b('0x42')]('Playlist\x20incomplete,\x20retry.');this['currentFile']=0x0;setTimeout(function(){this[a26_0x497b('0x56')]();}[a26_0x497b('0x3b')](this),0x1388);}}else{console[a26_0x497b('0x42')]('No\x20playlist\x20changes.');}}[a26_0x497b('0xc9')](){this[a26_0x497b('0xca')](a26_0x497b('0xcb'),{'playlistid':0x1},function(_0x39ba54){console[a26_0x497b('0x42')](a26_0x497b('0xcc'));console[a26_0x497b('0x42')](_0x39ba54);this[a26_0x497b('0xca')]('Playlist.Add',{'item':{'file':a26_0x497b('0xcd')},'playlistid':0x1},function(_0x39ba54){console['log'](a26_0x497b('0xce'));console['log'](_0x39ba54);this[a26_0x497b('0xca')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x39ba54){console[a26_0x497b('0x42')](a26_0x497b('0xcf'));console['log'](_0x39ba54);this[a26_0x497b('0xd0')]('RestartApp()');}['bind'](this));}[a26_0x497b('0x3b')](this));}[a26_0x497b('0x3b')](this));}['reboot'](){console[a26_0x497b('0x42')](a26_0x497b('0xd1'));exec('sudo\x20/sbin/reboot\x20-f',function(_0x385de6){console[a26_0x497b('0x42')](_0x385de6);});}[a26_0x497b('0xd2')](){const _0x3c7d1c=format(this['playerServiceURL'],this[a26_0x497b('0x31')]);console['log'](_0x3c7d1c);request({'url':_0x3c7d1c,'json':!![]},function(_0x535d57,_0x291467,_0x40dbba){if(_0x40dbba[a26_0x497b('0x55')]>0x0){const _0x311fce=_0x40dbba[0x0];const _0x2edd14=_0x311fce[a26_0x497b('0xd3')];const _0x464448=_0x311fce[a26_0x497b('0xd4')]==0x1;this[a26_0x497b('0xd5')](_0x2edd14);this['enableClock'](_0x464448);this[a26_0x497b('0x38')]();}console[a26_0x497b('0x42')](_0x40dbba);}[a26_0x497b('0x3b')](this));}[a26_0x497b('0xd6')](){this[a26_0x497b('0xd0')]('CECStandby()');}[a26_0x497b('0xd7')](){this[a26_0x497b('0xd0')](a26_0x497b('0xd8'));}[a26_0x497b('0xd5')](_0xf3b40d){const _0x3282ca=_0xf3b40d!=null&&_0xf3b40d!='';const _0x45e97b=a26_0x497b('0xd9');if(fsExtra[a26_0x497b('0x58')](_0x45e97b)){const _0x55c73c=fsExtra[a26_0x497b('0x2f')](_0x45e97b);console['log'](a26_0x497b('0xda')+_0x55c73c);const _0x3e2dec=require('xml2js');const _0x53d2ed=_0x3e2dec[a26_0x497b('0xdb')];_0x53d2ed(_0x55c73c,function(_0x17f53a,_0x59e47e){console[a26_0x497b('0x42')](a26_0x497b('0xdc'),_0x17f53a);console['log']('result:\x20%j',_0x59e47e);if(!_0xf3b40d||_0xf3b40d==null||_0xf3b40d==''){_0xf3b40d=a26_0x497b('0xdd');}_0x59e47e[a26_0x497b('0xde')][a26_0x497b('0xdf')][0x0][a26_0x497b('0xe0')][0x0]['_']=_0xf3b40d;const _0x11653a=new _0x3e2dec[(a26_0x497b('0xe1'))]();const _0x40a5c8=_0x11653a['buildObject'](_0x59e47e);console[a26_0x497b('0x42')]('xml:\x20%j',_0x40a5c8);fsExtra['writeFileSync'](_0x45e97b,_0x40a5c8);});this['kodiCommandClient'](a26_0x497b('0xe2'));this[a26_0x497b('0xca')]('Settings.SetSettingValue',{'setting':a26_0x497b('0xe3'),'value':_0x3282ca},function(_0x328216){console[a26_0x497b('0x42')](a26_0x497b('0xe4'));console[a26_0x497b('0x42')](_0x328216);}[a26_0x497b('0x3b')](this));}}['enableClock'](_0x3fc8e2){this[a26_0x497b('0xca')](a26_0x497b('0xe5'),{'setting':a26_0x497b('0xe6'),'value':_0x3fc8e2},function(_0x26841c){console[a26_0x497b('0x42')](a26_0x497b('0xe7'));console[a26_0x497b('0x42')](_0x26841c);}[a26_0x497b('0x3b')](this));}[a26_0x497b('0xd0')](_0x1f90d9){exec(a26_0x497b('0xe8')+_0x1f90d9+'\x22',function(_0x449a17){console[a26_0x497b('0x42')](_0x449a17);});}[a26_0x497b('0xca')](_0x384d9f,_0x252bea,_0x4609f5){const _0x16d05e={'jsonrpc':a26_0x497b('0xe9'),'method':_0x384d9f,'params':_0x252bea,'id':0x1};const _0x52539f={'user':this[a26_0x497b('0x23')],'pass':this[a26_0x497b('0x25')]};console[a26_0x497b('0x42')]('jsonrpcClient\x20data',_0x16d05e);console[a26_0x497b('0x42')]('jsonrpcClient\x20options',_0x52539f);this['httpClientService'][a26_0x497b('0x40')](this[a26_0x497b('0x21')]+a26_0x497b('0xea'),_0x16d05e,![],_0x52539f)[a26_0x497b('0x48')](function(_0x52d154){_0x4609f5(_0x52d154);})[a26_0x497b('0x43')](function(_0x4a21ec){});}}exports[a26_0x497b('0xeb')]=SyncPlaylistsService;