var a22_0x1905=['currentFile','playlistChanged','downloadFiles','httpClientService','init','config','parse','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','lulo','.lulo123.','checkDependencies','registerClient','checkFolders','getStatus','playlist','then','stringify','deviceUuid','networkInterfaces','context','post','log','register\x20response:\x20','catch','writeFileSync','player','getCurrentlyPlayingVideo','item','label','reportStatus','bind','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList','loadMediaList:\x20','emptyDirSync','failDownloadFiles','push','Total:\x20','length','download','reloadMediaList','existsSync','playListFile','m3uFile','removeSync','reboot','System','Shutdown','hasPlayListChanged','newPlayList','toString','this.currentFile:\x20','finishProcess','substring','split','slice','join','.mp4','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','track','media','@type','includes','start','Error:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','pathname','get','\x20Progress:\x20','headers','content-length','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','createWriteStream','data','err:\x20','finish','Downloaded\x20','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','\x20STATUS:\x20','statusCode','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','createImageVideo','video','downloadRequestFile','Error\x20downloading\x20file','ffmpeg','1/2','-loop','-pattern_type','libx264','-pix_fmt','-vf','scale=1920:1080','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','info','Download\x20started','_filename','size:\x20','filename:\x20','\x20already\x20downloaded.','pipe','path','media_type','lastIndexOf','youtube_single','/home/osmc/luloclient/media/files/','copySync','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','throw','done','value','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','http','fs-extra','request','request-progress','child_process','spawn','is-image','string-template','uuid/v4','config.json','url-exists','mt-files-downloader','mediaFolder','tempFolder','temp/','files/','playlist.txt','filesFolder'];(function(_0x2f3e31,_0x3a89c9){var _0x2c6db2=function(_0x1fa352){while(--_0x1fa352){_0x2f3e31['push'](_0x2f3e31['shift']());}};_0x2c6db2(++_0x3a89c9);}(a22_0x1905,0x14e));var a22_0x3986=function(_0x56e3e0,_0x220e34){_0x56e3e0=_0x56e3e0-0x0;var _0x4cd0b1=a22_0x1905[_0x56e3e0];return _0x4cd0b1;};'use strict';var __awaiter=this&&this[a22_0x3986('0x0')]||function(_0x22d0bc,_0x16fc00,_0x4cc463,_0x5216fc){function _0x353f8a(_0x5126eb){return _0x5126eb instanceof _0x4cc463?_0x5126eb:new _0x4cc463(function(_0x3025ee){_0x3025ee(_0x5126eb);});}return new(_0x4cc463||(_0x4cc463=Promise))(function(_0x52a6f5,_0x870bc7){function _0x334bff(_0x376503){try{_0x4425c4(_0x5216fc[a22_0x3986('0x1')](_0x376503));}catch(_0x1b7b8f){_0x870bc7(_0x1b7b8f);}}function _0x315c2d(_0x1dc540){try{_0x4425c4(_0x5216fc[a22_0x3986('0x2')](_0x1dc540));}catch(_0x4227cf){_0x870bc7(_0x4227cf);}}function _0x4425c4(_0x44e56f){_0x44e56f[a22_0x3986('0x3')]?_0x52a6f5(_0x44e56f[a22_0x3986('0x4')]):_0x353f8a(_0x44e56f['value'])['then'](_0x334bff,_0x315c2d);}_0x4425c4((_0x5216fc=_0x5216fc[a22_0x3986('0x5')](_0x22d0bc,_0x16fc00||[]))[a22_0x3986('0x1')]());});};Object[a22_0x3986('0x6')](exports,a22_0x3986('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x3986('0x8'));const mediainfo=require(a22_0x3986('0x9'));const fs=require('fs');const url=require('url');const http=require(a22_0x3986('0xa'));const fsExtra=require(a22_0x3986('0xb'));const request=require(a22_0x3986('0xc'));const progress=require(a22_0x3986('0xd'));const spawn=require(a22_0x3986('0xe'))[a22_0x3986('0xf')];const isImage=require(a22_0x3986('0x10'));const format=require(a22_0x3986('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x3986('0x12'));const configFile=a22_0x3986('0x13');const contextFile='context.json';const urlExists=require(a22_0x3986('0x14'));const kodi_rpc=require('node-kodi');const Downloader=require(a22_0x3986('0x15'));class SyncPlaylistsService{constructor(){this[a22_0x3986('0x16')]='media/';this[a22_0x3986('0x17')]=this[a22_0x3986('0x16')]+a22_0x3986('0x18');this['filesFolder']=this[a22_0x3986('0x16')]+a22_0x3986('0x19');this['playListFile']=this[a22_0x3986('0x16')]+a22_0x3986('0x1a');this['m3uFile']=this[a22_0x3986('0x1b')]+'lulo_playlist.m3u';this[a22_0x3986('0x1c')]=0x0;this[a22_0x3986('0x1d')]=![];this[a22_0x3986('0x1e')]=[];this['failDownloadFiles']=[];this['newPlayList']={};this[a22_0x3986('0x1f')]=new HttpClientService_1['HttpClientService']();}[a22_0x3986('0x20')](){this[a22_0x3986('0x21')]=JSON[a22_0x3986('0x22')](fs['readFileSync'](configFile));this['context']=JSON[a22_0x3986('0x22')](fs[a22_0x3986('0x23')](contextFile));this[a22_0x3986('0x24')]=this[a22_0x3986('0x21')][a22_0x3986('0x24')];this[a22_0x3986('0x25')]=process[a22_0x3986('0x26')][a22_0x3986('0x27')]+a22_0x3986('0x28');this[a22_0x3986('0x29')]=this[a22_0x3986('0x25')]+a22_0x3986('0x2a');this[a22_0x3986('0x2b')]=new kodi_rpc({'url':'http://localhost','user':a22_0x3986('0x2c'),'password':a22_0x3986('0x2d')});this[a22_0x3986('0x2e')]();this[a22_0x3986('0x2f')]();this[a22_0x3986('0x30')]();this['loadMediaList']();setInterval(function(){this[a22_0x3986('0x31')]();}['bind'](this),0x2710);setInterval(function(){this['registerClient']();}['bind'](this),0x493e0);}['checkDependencies'](){}[a22_0x3986('0x2f')](){this[a22_0x3986('0x2b')][a22_0x3986('0x32')]['getItems'](0x1)[a22_0x3986('0x33')](function(_0x3dcb01){const _0x3734ed=JSON[a22_0x3986('0x34')](_0x3dcb01);const _0x593582={'player_id':this['playerId'],'device_uuid':this[a22_0x3986('0x21')][a22_0x3986('0x35')],'network_info':JSON['stringify'](os[a22_0x3986('0x36')]()),'firmware_info':JSON[a22_0x3986('0x34')](this[a22_0x3986('0x37')]),'playlist':_0x3734ed,'playing_item':'','status':0x0};this[a22_0x3986('0x1f')][a22_0x3986('0x38')]('http://restapi.lulo.run/player_devices/register',_0x593582,![])[a22_0x3986('0x33')](function(_0x4d1c52){console[a22_0x3986('0x39')](a22_0x3986('0x3a')+Date());})[a22_0x3986('0x3b')](function(_0x1322fc){});console[a22_0x3986('0x39')](_0x593582);}['bind'](this));const _0x4cf0c1=this[a22_0x3986('0x21')][a22_0x3986('0x35')];if(!_0x4cf0c1||_0x4cf0c1==''){this[a22_0x3986('0x21')]['deviceUuid']=uuidv4();this[a22_0x3986('0x21')]={'deviceUuid':this[a22_0x3986('0x21')]['deviceUuid'],'playerId':this[a22_0x3986('0x21')][a22_0x3986('0x24')]};fs[a22_0x3986('0x3c')](configFile,JSON['stringify'](this[a22_0x3986('0x21')]));}}[a22_0x3986('0x31')](){console['log'](a22_0x3986('0x31'));this[a22_0x3986('0x2b')][a22_0x3986('0x3d')][a22_0x3986('0x3e')]()['then'](function(_0x4f9d99){const _0x22bc77=_0x4f9d99[a22_0x3986('0x3f')][a22_0x3986('0x40')];this[a22_0x3986('0x41')](_0x22bc77);}[a22_0x3986('0x42')](this))['catch'](function(_0x1c9b21){console[a22_0x3986('0x39')](_0x1c9b21);this[a22_0x3986('0x41')](_0x1c9b21);}[a22_0x3986('0x42')](this));}[a22_0x3986('0x41')](_0x28b6ea){console['log'](a22_0x3986('0x43')+_0x28b6ea);const _0x1c22f6={'player_id':this['playerId'],'device_uuid':this[a22_0x3986('0x21')][a22_0x3986('0x35')],'status':_0x28b6ea!=''&&_0x28b6ea!=null?0x1:0x0,'playing_item':_0x28b6ea};this[a22_0x3986('0x1f')]['post'](a22_0x3986('0x44'),_0x1c22f6,![])['then'](function(_0x54092c){console[a22_0x3986('0x39')](a22_0x3986('0x45')+Date());})['catch'](function(_0x5726f0){});}[a22_0x3986('0x30')](){fsExtra[a22_0x3986('0x46')](this['mediaFolder'],_0x12f394=>{});fsExtra['ensureDir'](this[a22_0x3986('0x17')],_0x2557f8=>{});fsExtra['ensureDir'](this[a22_0x3986('0x1b')],_0x3cebc2=>{});}[a22_0x3986('0x47')](){const _0x58e1e6=format(this['playListServiceURL'],this[a22_0x3986('0x24')]);console['log'](_0x58e1e6);request({'url':_0x58e1e6,'json':!![]},function(_0x1d6e06,_0x5a75a1,_0x27dfa2){console[a22_0x3986('0x39')](a22_0x3986('0x48'));console[a22_0x3986('0x39')](_0x27dfa2);this['newPlayList']=_0x27dfa2;this[a22_0x3986('0x1d')]=this['hasPlayListChanged']();fsExtra[a22_0x3986('0x49')](this['tempFolder']);this[a22_0x3986('0x1e')]=[];this[a22_0x3986('0x4a')]=[];this[a22_0x3986('0x1c')]=0x0;for(const _0x295066 in _0x27dfa2){this[a22_0x3986('0x1e')][a22_0x3986('0x4b')](_0x27dfa2[_0x295066]);}console[a22_0x3986('0x39')](a22_0x3986('0x4c')+this[a22_0x3986('0x1e')][a22_0x3986('0x4d')]);if(this[a22_0x3986('0x1e')][a22_0x3986('0x4d')]>0x0){this[a22_0x3986('0x4e')]();}}[a22_0x3986('0x42')](this));}[a22_0x3986('0x4f')](){if(fsExtra['existsSync'](this['tempFolder'])){fsExtra['emptyDirSync'](this[a22_0x3986('0x17')]);}if(fsExtra[a22_0x3986('0x50')](this['playListFile'])){fsExtra['emptyDirSync'](this[a22_0x3986('0x51')]);}if(!fsExtra[a22_0x3986('0x50')](this[a22_0x3986('0x51')])){fsExtra['removeSync'](this[a22_0x3986('0x51')]);}if(!fsExtra['existsSync'](this[a22_0x3986('0x52')])){fsExtra[a22_0x3986('0x53')](this[a22_0x3986('0x52')]);}this[a22_0x3986('0x47')]();}[a22_0x3986('0x54')](){this[a22_0x3986('0x2b')][a22_0x3986('0x55')][a22_0x3986('0x56')]();}[a22_0x3986('0x57')](){const _0x2e799a=JSON[a22_0x3986('0x34')](this[a22_0x3986('0x58')]);try{if(!fsExtra[a22_0x3986('0x50')](this[a22_0x3986('0x51')])){return!![];}else{const _0x5b2dde=fsExtra[a22_0x3986('0x23')](this[a22_0x3986('0x51')])[a22_0x3986('0x59')]();if(_0x5b2dde!=_0x2e799a){return!![];}}}catch(_0x45113e){console[a22_0x3986('0x39')](_0x45113e);}return![];}[a22_0x3986('0x4e')](){console[a22_0x3986('0x39')](a22_0x3986('0x5a')+this['currentFile']+'\x20of\x20'+this[a22_0x3986('0x1e')][a22_0x3986('0x4d')]);if(this[a22_0x3986('0x1c')]>=this[a22_0x3986('0x1e')][a22_0x3986('0x4d')]){this[a22_0x3986('0x5b')]();return;}const _0x521145=String(this[a22_0x3986('0x1e')][this[a22_0x3986('0x1c')]]['path']);const _0x35ec98=this[a22_0x3986('0x1e')][this[a22_0x3986('0x1c')]]['media_type'];let _0x2f6e8e=_0x521145[a22_0x3986('0x5c')](_0x521145['lastIndexOf']('/')+0x1);const _0x43db7e=_0x2f6e8e[a22_0x3986('0x5d')]('.')[a22_0x3986('0x5e')](0x0,-0x1)[a22_0x3986('0x5f')]('.');let _0x217cb9=this['baseURL']+_0x521145;const _0x1d62da=_0x217cb9['split']('.')[a22_0x3986('0x5e')](0x0,-0x1)[a22_0x3986('0x5f')]('.');if(_0x35ec98=='youtube_single'){_0x2f6e8e=_0x2f6e8e+a22_0x3986('0x60');}else if(_0x35ec98=='image'){_0x2f6e8e=_0x43db7e+a22_0x3986('0x60');_0x217cb9=_0x1d62da+a22_0x3986('0x60');}console[a22_0x3986('0x39')]('**********+');console[a22_0x3986('0x39')](_0x521145);console[a22_0x3986('0x39')](_0x35ec98);console[a22_0x3986('0x39')](_0x2f6e8e);console[a22_0x3986('0x39')](_0x217cb9);console[a22_0x3986('0x39')](_0x43db7e);console[a22_0x3986('0x39')](_0x1d62da);console[a22_0x3986('0x39')](a22_0x3986('0x61'));if(fsExtra['existsSync'](this['tempFolder']+_0x2f6e8e)){this[a22_0x3986('0x62')](this[a22_0x3986('0x17')]+_0x2f6e8e)[a22_0x3986('0x33')](function(_0x540c64){if(_0x540c64){this[a22_0x3986('0x1c')]++;}else{this[a22_0x3986('0x1d')]=!![];}this[a22_0x3986('0x4e')]();}[a22_0x3986('0x42')](this));}else if(fsExtra[a22_0x3986('0x50')](this[a22_0x3986('0x1b')]+_0x2f6e8e)){this[a22_0x3986('0x62')](this['filesFolder']+_0x2f6e8e)[a22_0x3986('0x33')](function(_0x48bdbe){if(_0x48bdbe){fsExtra['copySync'](this[a22_0x3986('0x1b')]+_0x2f6e8e,this[a22_0x3986('0x17')]+_0x2f6e8e);this[a22_0x3986('0x1c')]++;}else{this[a22_0x3986('0x1d')]=!![];}this[a22_0x3986('0x4e')]();}[a22_0x3986('0x42')](this));}else{console['log'](a22_0x3986('0x63')+_0x217cb9);this[a22_0x3986('0x1d')]=!![];if(_0x35ec98=='youtube_single'){this[a22_0x3986('0x64')](_0x521145);}else{this[a22_0x3986('0x65')](_0x217cb9,_0x2f6e8e,_0x35ec98);}}}['checkVideo'](_0x5391fd){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x3986('0x39')]('videoFile:\x20'+_0x5391fd);const _0x5832e2=yield mediainfo(_0x5391fd)[a22_0x3986('0x3b')](_0x1b69a9=>{console['log'](_0x1b69a9);fsExtra[a22_0x3986('0x53')](_0x5391fd);return![];});const _0x53f4f6=_0x5832e2['media'][a22_0x3986('0x66')][a22_0x3986('0x4d')]>0x1&&_0x5832e2[a22_0x3986('0x67')][a22_0x3986('0x66')][0x1][a22_0x3986('0x68')]=='Video';if(!_0x53f4f6){fsExtra['removeSync'](_0x5391fd);}console['log']('mediainfo\x20check:'+_0x53f4f6);return _0x53f4f6;});}[a22_0x3986('0x65')](_0x57d922,_0x55f30f,_0x1718c1){const _0x5ba5f5=new Downloader();console[a22_0x3986('0x39')](_0x57d922);console[a22_0x3986('0x39')](_0x55f30f);console[a22_0x3986('0x39')](_0x1718c1);const _0x52135f=_0x5ba5f5['download'](_0x57d922,this[a22_0x3986('0x17')]+_0x55f30f);urlExists(_0x57d922,function(_0x343109,_0x28c226){if(_0x28c226){if(this['failDownloadFiles'][a22_0x3986('0x69')](this['currentFile'])){const _0x14a4e4=this['failDownloadFiles']['indexOf'](this[a22_0x3986('0x1c')]);if(_0x14a4e4>-0x1){this['failDownloadFiles']['splice'](_0x14a4e4,0x1);}}console[a22_0x3986('0x39')]('downloading:\x20'+_0x57d922);_0x52135f[a22_0x3986('0x6a')]();}else{if(!this[a22_0x3986('0x4a')]['includes'](this['currentFile'])){this['failDownloadFiles'][a22_0x3986('0x4b')](this[a22_0x3986('0x1c')]);}console[a22_0x3986('0x39')](a22_0x3986('0x6b')+_0x57d922);this[a22_0x3986('0x1c')]++;this[a22_0x3986('0x4e')]();}}[a22_0x3986('0x42')](this));_0x52135f['on'](a22_0x3986('0x6a'),function(_0x52135f){console[a22_0x3986('0x39')]('start:\x20'+_0x57d922);});_0x52135f['on'](a22_0x3986('0x6c'),function(_0x52135f){console[a22_0x3986('0x39')](a22_0x3986('0x6d'));this[a22_0x3986('0x4e')]();}[a22_0x3986('0x42')](this));_0x52135f['on'](a22_0x3986('0x6e'),function(_0x52135f){console[a22_0x3986('0x39')](a22_0x3986('0x6e'));console[a22_0x3986('0x39')](a22_0x3986('0x6f')+_0x55f30f);console[a22_0x3986('0x39')](a22_0x3986('0x70')+_0x1718c1);this[a22_0x3986('0x62')](this['tempFolder']+_0x55f30f)[a22_0x3986('0x33')](function(_0x11fa33){if(_0x11fa33){this['currentFile']++;}this[a22_0x3986('0x4e')]();}['bind'](this));}['bind'](this));_0x52135f['on'](a22_0x3986('0x71'),function(_0x52135f){console['log'](a22_0x3986('0x71'));});_0x52135f['on'](a22_0x3986('0x72'),function(_0x52135f){console[a22_0x3986('0x39')](a22_0x3986('0x72'));});_0x52135f['on']('retry',function(_0x52135f){console[a22_0x3986('0x39')](a22_0x3986('0x73'));});}[a22_0x3986('0x74')](_0x5ad9b3,_0x2ba35,_0x4f092d,_0x156325){console[a22_0x3986('0x39')]('downloadHTTPFile');console['log'](_0x5ad9b3);const _0x39aa4f=!![];let _0x3590cc=0x0;const _0x3ad3ae='';console[a22_0x3986('0x39')]('Attempting\x20to\x20download\x20'+_0x5ad9b3+a22_0x3986('0x75')+_0x2ba35);if(_0x3590cc){if(_0x3590cc>0x5){_0x156325('Max\x20redirects\x20reached',_0x5ad9b3,_0x4f092d,null);return;}}else{_0x3590cc=0x0;}const _0x1bdd51=this[a22_0x3986('0x17')]+_0x2ba35;let _0x4ccc86;if(_0x156325===undefined){console['log'](a22_0x3986('0x76')+_0x5ad9b3+a22_0x3986('0x75')+_0x1bdd51);_0x156325=function(_0x24e5b8,_0xb4efb3){console[a22_0x3986('0x39')](a22_0x3986('0x77'),_0x24e5b8,_0xb4efb3);};}http[a22_0x3986('0x78')][a22_0x3986('0x79')]=0x64;const _0xa2ff54={'host':url[a22_0x3986('0x22')](_0x5ad9b3)['host'],'port':0x50,'path':url[a22_0x3986('0x22')](_0x5ad9b3)[a22_0x3986('0x7a')],'agent':![]};const _0x237547=http[a22_0x3986('0x7b')](_0xa2ff54,function(_0x3643dc){let _0x4ca377=0x0;let _0xf8797b=0x0;function _0x445ec5(){if(_0x4ca377===undefined){console['log'](_0x2ba35+'\x20Progress:\x20unknown\x09'+_0xf8797b+'/'+'?');}const _0x34ee9c=_0xf8797b/_0x4ca377*0x64;console[a22_0x3986('0x39')](_0x2ba35+a22_0x3986('0x7c')+_0x34ee9c+'%\x09'+_0xf8797b+'/'+_0x4ca377);}console[a22_0x3986('0x39')](_0x2ba35+'\x20'+_0x3643dc['statusCode']);switch(_0x3643dc['statusCode']){case 0xc8:_0x4ca377=_0x3643dc[a22_0x3986('0x7d')][a22_0x3986('0x7e')]||_0x3ad3ae;fs['stat'](_0x1bdd51,function(_0x72ea85,_0x1c6113){if(!_0x72ea85){console[a22_0x3986('0x39')](a22_0x3986('0x7f')+_0x1bdd51);if(_0x1c6113[a22_0x3986('0x80')]==_0x4ca377){console[a22_0x3986('0x39')](a22_0x3986('0x81')+_0x4ca377+')');console[a22_0x3986('0x39')]('Redownloading');}else{console[a22_0x3986('0x39')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x1c6113[a22_0x3986('0x80')]+')\x20vs\x20New('+_0x4ca377+')');}}_0x4ccc86=fs[a22_0x3986('0x82')](_0x1bdd51);_0x3643dc['pipe'](_0x4ccc86);_0x3643dc['on'](a22_0x3986('0x83'),function(_0x563f2b){_0xf8797b+=_0x563f2b[a22_0x3986('0x4d')];_0x445ec5();});_0x237547['on'](a22_0x3986('0x6c'),function(_0x72ea85){console['log'](a22_0x3986('0x84'));console[a22_0x3986('0x39')](_0x72ea85);});_0x4ccc86['on'](a22_0x3986('0x85'),function(){console[a22_0x3986('0x39')](a22_0x3986('0x86')+_0x5ad9b3+a22_0x3986('0x75')+_0x2ba35);_0x156325(null,_0x2ba35,_0x4f092d,_0x2ba35);}[a22_0x3986('0x42')](this));});break;case 0x12e:const _0x11f5c7=_0x3643dc[a22_0x3986('0x7d')]['location'];console[a22_0x3986('0x39')](a22_0x3986('0x87')+_0x5ad9b3+a22_0x3986('0x75')+_0x11f5c7);if(_0x3590cc<0x5){this[a22_0x3986('0x74')](_0x11f5c7,_0x2ba35,_0x156325,_0x3590cc++);}else{console['error'](a22_0x3986('0x88')+_0x5ad9b3+'.');_0x156325(a22_0x3986('0x89'),null,null,null);}return;case 0x194:console[a22_0x3986('0x39')]('File\x20Not\x20Found\x20'+_0x5ad9b3);default:console[a22_0x3986('0x39')]('Problem\x20downloading\x20'+_0x5ad9b3+a22_0x3986('0x8a')+_0x3643dc[a22_0x3986('0x8b')]);_0x237547[a22_0x3986('0x8c')]();_0x156325(_0x3643dc[a22_0x3986('0x8b')],null,null,null);return;}})['on'](a22_0x3986('0x6c'),function(_0x1a65e9){console['log'](a22_0x3986('0x8d')+_0x5ad9b3+'\x20'+_0x1a65e9[a22_0x3986('0x8e')]);_0x156325(_0x1a65e9,null,null,null);});}['downloadHTTPFileCallback'](_0x538c4a,_0x3b7a0b,_0x2b1dfd,_0x891e9e){console[a22_0x3986('0x39')](a22_0x3986('0x8f'));console[a22_0x3986('0x39')](_0x538c4a);console['log'](_0x3b7a0b);console['log'](_0x2b1dfd);console[a22_0x3986('0x39')](_0x891e9e);if(_0x2b1dfd==a22_0x3986('0x90')){const _0x13ace0=this[a22_0x3986('0x1e')][this[a22_0x3986('0x1c')]][a22_0x3986('0x91')]!=null?this[a22_0x3986('0x1e')][this[a22_0x3986('0x1c')]][a22_0x3986('0x91')]:0x1e;this[a22_0x3986('0x92')](_0x891e9e,_0x13ace0);}else if(_0x2b1dfd==a22_0x3986('0x93')){if(_0x538c4a==null&&_0x3b7a0b!=''){this[a22_0x3986('0x1c')]++;}this[a22_0x3986('0x4e')]();}console[a22_0x3986('0x39')](this[a22_0x3986('0x1c')]);}[a22_0x3986('0x94')](_0x400cdd,_0x5c9830,_0x465dfc){progress(request(_0x400cdd),{})['on']('progress',function(_0xfbd8ca){console['log'](_0xfbd8ca);})['on'](a22_0x3986('0x6c'),function(_0x4d0320){console['log'](a22_0x3986('0x95'));this['download']();})['on'](a22_0x3986('0x6e'),function(){console[a22_0x3986('0x39')](a22_0x3986('0x6f')+_0x5c9830);console[a22_0x3986('0x39')](a22_0x3986('0x70')+_0x465dfc);if(_0x465dfc==a22_0x3986('0x90')){const _0x4ba5d5=this[a22_0x3986('0x1e')][this[a22_0x3986('0x1c')]][a22_0x3986('0x91')]!=null?this[a22_0x3986('0x1e')][this[a22_0x3986('0x1c')]][a22_0x3986('0x91')]:0x1e;this[a22_0x3986('0x92')](_0x5c9830,_0x4ba5d5);}else if(_0x465dfc=='video'){this[a22_0x3986('0x1c')]++;this[a22_0x3986('0x4e')]();}}['bind'](this))['pipe'](fs[a22_0x3986('0x82')](this[a22_0x3986('0x17')]+_0x5c9830));}[a22_0x3986('0x92')](_0x5cde5b,_0x280616=0x1e){const _0x5d308d=this[a22_0x3986('0x17')]+_0x5cde5b;console[a22_0x3986('0x39')](_0x5d308d);console[a22_0x3986('0x39')](_0x5cde5b);const _0x5a8bbc=_0x5cde5b[a22_0x3986('0x5d')]('.')[a22_0x3986('0x5e')](0x0,-0x1)[a22_0x3986('0x5f')]('.');const _0x578760=a22_0x3986('0x96');const _0x282901=['-y','-r',a22_0x3986('0x97'),a22_0x3986('0x98'),'1',a22_0x3986('0x99'),'glob','-i',_0x5d308d,'-t',String(_0x280616),'-c:v',a22_0x3986('0x9a'),a22_0x3986('0x9b'),'yuv420p','-r','25',a22_0x3986('0x9c'),a22_0x3986('0x9d'),this['tempFolder']+_0x5a8bbc+a22_0x3986('0x60')];const _0x5b4687=spawn(_0x578760,_0x282901);_0x5b4687['stdout']['on']('data',function(_0x2e2222){console[a22_0x3986('0x39')](a22_0x3986('0x9e')+_0x5d308d);});_0x5b4687['stderr']['on']('data',function(_0x44d10a){console[a22_0x3986('0x39')](a22_0x3986('0x9f')+_0x44d10a);}[a22_0x3986('0x42')](this));_0x5b4687['on'](a22_0x3986('0xa0'),function(){console[a22_0x3986('0x39')](a22_0x3986('0xa1'));this[a22_0x3986('0x1c')]++;this['download']();}[a22_0x3986('0x42')](this));}[a22_0x3986('0x64')](_0x18dd08){const _0x51e3e2=this['tempFolder']+'/'+_0x18dd08+a22_0x3986('0x60');const _0x55f537=youtubedl(a22_0x3986('0xa2')+_0x18dd08,['--format=18'],{'cwd':__dirname});_0x55f537['on'](a22_0x3986('0xa3'),function(_0x18750d){console['log'](a22_0x3986('0xa4'));console[a22_0x3986('0x39')]('filename:\x20'+_0x18750d[a22_0x3986('0xa5')]);console[a22_0x3986('0x39')](a22_0x3986('0xa6')+_0x18750d[a22_0x3986('0x80')]);});_0x55f537['on']('complete',function complete(_0x4fb8eb){'use strict';console['log'](a22_0x3986('0xa7')+_0x4fb8eb[a22_0x3986('0xa5')]+a22_0x3986('0xa8'));});_0x55f537['on'](a22_0x3986('0x6e'),function(){console['log']('finished\x20youtube\x20downloading!');this[a22_0x3986('0x62')](_0x51e3e2)[a22_0x3986('0x33')](function(_0x21a5f7){if(_0x21a5f7){this[a22_0x3986('0x1c')]++;}this[a22_0x3986('0x4e')]();}[a22_0x3986('0x42')](this));}[a22_0x3986('0x42')](this));_0x55f537[a22_0x3986('0xa9')](fs[a22_0x3986('0x82')](_0x51e3e2));}[a22_0x3986('0x5b')](){console[a22_0x3986('0x39')]('Finishing');if(this[a22_0x3986('0x1d')]){if(this[a22_0x3986('0x4a')][a22_0x3986('0x4d')]==0x0){fs[a22_0x3986('0x3c')](this[a22_0x3986('0x51')],JSON[a22_0x3986('0x34')](this[a22_0x3986('0x58')]));let _0x508633='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x549fd5 in this[a22_0x3986('0x1e')]){const _0x509ef1=this[a22_0x3986('0x1e')][_0x549fd5][a22_0x3986('0xaa')];const _0x5c1cde=this[a22_0x3986('0x1e')][_0x549fd5][a22_0x3986('0xab')];const _0x330f2f=_0x509ef1[a22_0x3986('0x5c')](_0x509ef1[a22_0x3986('0xac')]('/')+0x1);let _0x1aaae9=_0x330f2f[a22_0x3986('0x5d')]('.')[a22_0x3986('0x5e')](0x0,-0x1)['join']('.');if(_0x5c1cde==a22_0x3986('0xad')){_0x1aaae9=_0x509ef1;}_0x508633+=a22_0x3986('0xae')+_0x1aaae9+a22_0x3986('0x60')+'\x0d\x0a';}fsExtra[a22_0x3986('0x49')](this[a22_0x3986('0x1b')]);fsExtra[a22_0x3986('0xaf')](this[a22_0x3986('0x17')],this[a22_0x3986('0x1b')]);fsExtra[a22_0x3986('0x3c')](this[a22_0x3986('0x52')],_0x508633);fsExtra['emptyDirSync'](this[a22_0x3986('0x17')]);console[a22_0x3986('0x39')](a22_0x3986('0xb0'));const _0x596d21=spawn(a22_0x3986('0xb1'),['-r',a22_0x3986('0xb2')]);}else{console[a22_0x3986('0x39')](a22_0x3986('0xb3'));this['currentFile']=0x0;setTimeout(function(){this['download']();}['bind'](this),0x1388);}}else{console[a22_0x3986('0x39')]('No\x20playlist\x20changes.');}}}exports[a22_0x3986('0xb4')]=SyncPlaylistsService;