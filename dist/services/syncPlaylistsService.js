var a22_0xed80=['Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','1/2','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','filename:\x20','_filename','complete','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','/home/osmc/luloclient/media/files/','copySync','Refreshing..','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Player.Open','Playlist.Opened','reboot','sudo\x20/sbin/shutdown\x20-r\x20now','updateSettings','playerServiceURL','rss','header_active','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','result:\x20%j','rssfeeds','set','feed','Builder','buildObject','kodi-send\x20--action=\x22RefreshRSS()\x22','Settings.SetSettingValue','lookandfeel.enablerssfeeds','enableClock','videoplayer.usedisplayasclock','enableClock:\x20','httpClientService','SyncPlaylistsService','__awaiter','throw','done','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','child_process','spawn','exec','is-image','string-template','youtube-dl','uuid/v4','context.json','node-kodi','mt-files-downloader','mediaFolder','tempFolder','temp/','filesFolder','files/','playListFile','lulo_playlist.m3u','failDownloadFiles','newPlayList','kodiHost','kodiUser','lulo','HttpClientService','init','config','parse','readFileSync','context','playerId','WEB_SERVICE_URL','playListServiceURL','baseURL','api/player.php?player_id={0}','kodi','kodiPassword','registerClient','checkFolders','loadMediaList','getStatus','bind','checkDependencies','playlist','getItems','then','stringify','deviceUuid','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','writeFileSync','player','item','label','reportStatus','catch','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','playlistChanged','hasPlayListChanged','emptyDirSync','downloadFiles','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','m3uFile','toString','this.currentFile:\x20','currentFile','\x20of\x20','finishProcess','substring','lastIndexOf','split','slice','join','youtube_single','image','.mp4','**********+','checkVideo','downloadYouTube','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','pathname','\x20Progress:\x20','statusCode','headers','content-length','stat'];(function(_0x400d06,_0x37736e){var _0x323f8b=function(_0x28d123){while(--_0x28d123){_0x400d06['push'](_0x400d06['shift']());}};_0x323f8b(++_0x37736e);}(a22_0xed80,0x12f));var a22_0x14d4=function(_0x4c0c41,_0x8347ce){_0x4c0c41=_0x4c0c41-0x0;var _0x18fd5f=a22_0xed80[_0x4c0c41];return _0x18fd5f;};'use strict';var __awaiter=this&&this[a22_0x14d4('0x0')]||function(_0x4f3dd9,_0x261b23,_0x2edbd2,_0x296ef2){function _0x3bc904(_0x58fde2){return _0x58fde2 instanceof _0x2edbd2?_0x58fde2:new _0x2edbd2(function(_0x3fc5ad){_0x3fc5ad(_0x58fde2);});}return new(_0x2edbd2||(_0x2edbd2=Promise))(function(_0x789518,_0x98f62e){function _0x3717c4(_0x4ec185){try{_0x2235d0(_0x296ef2['next'](_0x4ec185));}catch(_0x1d3c10){_0x98f62e(_0x1d3c10);}}function _0x8c6407(_0x29027f){try{_0x2235d0(_0x296ef2[a22_0x14d4('0x1')](_0x29027f));}catch(_0xce39d4){_0x98f62e(_0xce39d4);}}function _0x2235d0(_0x1d3c11){_0x1d3c11[a22_0x14d4('0x2')]?_0x789518(_0x1d3c11['value']):_0x3bc904(_0x1d3c11['value'])['then'](_0x3717c4,_0x8c6407);}_0x2235d0((_0x296ef2=_0x296ef2[a22_0x14d4('0x3')](_0x4f3dd9,_0x261b23||[]))['next']());});};Object[a22_0x14d4('0x4')](exports,a22_0x14d4('0x5'),{'value':!![]});const HttpClientService_1=require(a22_0x14d4('0x6'));const mediainfo=require(a22_0x14d4('0x7'));const fs=require('fs');const url=require(a22_0x14d4('0x8'));const http=require(a22_0x14d4('0x9'));const fsExtra=require(a22_0x14d4('0xa'));const request=require(a22_0x14d4('0xb'));const progress=require('request-progress');const spawn=require(a22_0x14d4('0xc'))[a22_0x14d4('0xd')];const exec=require(a22_0x14d4('0xc'))[a22_0x14d4('0xe')];const isImage=require(a22_0x14d4('0xf'));const format=require(a22_0x14d4('0x10'));const os=require('os');const youtubedl=require(a22_0x14d4('0x11'));const uuidv4=require(a22_0x14d4('0x12'));const configFile='config.json';const contextFile=a22_0x14d4('0x13');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x14d4('0x14'));const Downloader=require(a22_0x14d4('0x15'));class SyncPlaylistsService{constructor(){this[a22_0x14d4('0x16')]='media/';this[a22_0x14d4('0x17')]=this[a22_0x14d4('0x16')]+a22_0x14d4('0x18');this[a22_0x14d4('0x19')]=this[a22_0x14d4('0x16')]+a22_0x14d4('0x1a');this[a22_0x14d4('0x1b')]=this[a22_0x14d4('0x16')]+'playlist.txt';this['m3uFile']=this[a22_0x14d4('0x19')]+a22_0x14d4('0x1c');this['currentFile']=0x0;this['playlistChanged']=![];this['downloadFiles']=[];this[a22_0x14d4('0x1d')]=[];this[a22_0x14d4('0x1e')]={};this[a22_0x14d4('0x1f')]='http://localhost';this[a22_0x14d4('0x20')]=a22_0x14d4('0x21');this['kodiPassword']='.lulo123.';this['httpClientService']=new HttpClientService_1[(a22_0x14d4('0x22'))]();}[a22_0x14d4('0x23')](){this[a22_0x14d4('0x24')]=JSON[a22_0x14d4('0x25')](fs[a22_0x14d4('0x26')](configFile));this[a22_0x14d4('0x27')]=JSON[a22_0x14d4('0x25')](fs[a22_0x14d4('0x26')](contextFile));this[a22_0x14d4('0x28')]=this[a22_0x14d4('0x24')]['playerId'];this['baseURL']=process['env'][a22_0x14d4('0x29')]+'deploy/';this[a22_0x14d4('0x2a')]=this[a22_0x14d4('0x2b')]+'api/player_playlist.php?player_id={0}';this['playerServiceURL']=this[a22_0x14d4('0x2b')]+a22_0x14d4('0x2c');this[a22_0x14d4('0x2d')]=new kodi_rpc({'url':this[a22_0x14d4('0x1f')],'user':this[a22_0x14d4('0x20')],'password':this[a22_0x14d4('0x2e')]});this['checkDependencies']();this[a22_0x14d4('0x2f')]();this[a22_0x14d4('0x30')]();this[a22_0x14d4('0x31')]();setInterval(function(){this[a22_0x14d4('0x32')]();}['bind'](this),0x2710);setInterval(function(){this[a22_0x14d4('0x2f')]();}[a22_0x14d4('0x33')](this),0x493e0);}[a22_0x14d4('0x34')](){}['registerClient'](){this[a22_0x14d4('0x2d')][a22_0x14d4('0x35')][a22_0x14d4('0x36')](0x1)[a22_0x14d4('0x37')](function(_0x130b38){const _0x55ca63=JSON[a22_0x14d4('0x38')](_0x130b38);const _0x17b699={'player_id':this[a22_0x14d4('0x28')],'device_uuid':this[a22_0x14d4('0x24')][a22_0x14d4('0x39')],'network_info':JSON[a22_0x14d4('0x38')](os[a22_0x14d4('0x3a')]()),'firmware_info':JSON[a22_0x14d4('0x38')](this['context']),'playlist':_0x55ca63,'playing_item':'','status':0x0};this['httpClientService'][a22_0x14d4('0x3b')](a22_0x14d4('0x3c'),_0x17b699,![])[a22_0x14d4('0x37')](function(_0x4f3e0a){console[a22_0x14d4('0x3d')](a22_0x14d4('0x3e')+Date());})['catch'](function(_0x19dc2e){});console[a22_0x14d4('0x3d')](_0x17b699);}[a22_0x14d4('0x33')](this));const _0x4a92ab=this['config'][a22_0x14d4('0x39')];if(!_0x4a92ab||_0x4a92ab==''){this[a22_0x14d4('0x24')][a22_0x14d4('0x39')]=uuidv4();this[a22_0x14d4('0x24')]={'deviceUuid':this[a22_0x14d4('0x24')][a22_0x14d4('0x39')],'playerId':this[a22_0x14d4('0x24')][a22_0x14d4('0x28')]};fs[a22_0x14d4('0x3f')](configFile,JSON['stringify'](this[a22_0x14d4('0x24')]));}}[a22_0x14d4('0x32')](){console[a22_0x14d4('0x3d')]('getStatus');this[a22_0x14d4('0x2d')][a22_0x14d4('0x40')]['getCurrentlyPlayingVideo']()[a22_0x14d4('0x37')](function(_0x314421){const _0x1804c7=_0x314421[a22_0x14d4('0x41')][a22_0x14d4('0x42')];this[a22_0x14d4('0x43')](_0x1804c7);}[a22_0x14d4('0x33')](this))[a22_0x14d4('0x44')](function(_0x4dd99a){console[a22_0x14d4('0x3d')](_0x4dd99a);this[a22_0x14d4('0x43')](_0x4dd99a);}[a22_0x14d4('0x33')](this));}[a22_0x14d4('0x43')](_0x5edc02){console[a22_0x14d4('0x3d')](a22_0x14d4('0x45')+_0x5edc02);const _0x10cd62={'player_id':this[a22_0x14d4('0x28')],'device_uuid':this['config'][a22_0x14d4('0x39')],'status':_0x5edc02!=''&&_0x5edc02!=null?0x1:0x0,'playing_item':_0x5edc02};this['httpClientService']['post'](a22_0x14d4('0x46'),_0x10cd62,![])[a22_0x14d4('0x37')](function(_0xa3376b){console[a22_0x14d4('0x3d')](a22_0x14d4('0x47')+Date());})[a22_0x14d4('0x44')](function(_0x502255){});}['checkFolders'](){fsExtra[a22_0x14d4('0x48')](this[a22_0x14d4('0x16')],_0x476de8=>{});fsExtra[a22_0x14d4('0x48')](this['tempFolder'],_0x4c5369=>{});fsExtra[a22_0x14d4('0x48')](this['filesFolder'],_0x4c962b=>{});}[a22_0x14d4('0x31')](){const _0x4720d3=format(this['playListServiceURL'],this[a22_0x14d4('0x28')]);console[a22_0x14d4('0x3d')](_0x4720d3);request({'url':_0x4720d3,'json':!![]},function(_0x51484c,_0x21b963,_0x10c5ee){console[a22_0x14d4('0x3d')]('loadMediaList:\x20');console['log'](_0x10c5ee);this[a22_0x14d4('0x1e')]=_0x10c5ee;this[a22_0x14d4('0x49')]=this[a22_0x14d4('0x4a')]();fsExtra[a22_0x14d4('0x4b')](this[a22_0x14d4('0x17')]);this['downloadFiles']=[];this[a22_0x14d4('0x1d')]=[];this['currentFile']=0x0;for(const _0x279c59 in _0x10c5ee){this[a22_0x14d4('0x4c')]['push'](_0x10c5ee[_0x279c59]);}console['log'](a22_0x14d4('0x4d')+this[a22_0x14d4('0x4c')][a22_0x14d4('0x4e')]);if(this[a22_0x14d4('0x4c')]['length']>0x0){this[a22_0x14d4('0x4f')]();}}['bind'](this));}[a22_0x14d4('0x50')](){if(fsExtra['existsSync'](this[a22_0x14d4('0x17')])){fsExtra[a22_0x14d4('0x4b')](this['tempFolder']);}if(fsExtra[a22_0x14d4('0x51')](this[a22_0x14d4('0x19')])){fsExtra['emptyDirSync'](this['filesFolder']);}if(!fsExtra['existsSync'](this[a22_0x14d4('0x1b')])){fsExtra[a22_0x14d4('0x52')](this[a22_0x14d4('0x1b')]);}if(!fsExtra[a22_0x14d4('0x51')](this[a22_0x14d4('0x53')])){fsExtra[a22_0x14d4('0x52')](this['m3uFile']);}this[a22_0x14d4('0x31')]();}['hasPlayListChanged'](){const _0x549573=JSON['stringify'](this[a22_0x14d4('0x1e')]);try{if(!fsExtra['existsSync'](this['playListFile'])){return!![];}else{const _0x5ed7c3=fsExtra[a22_0x14d4('0x26')](this[a22_0x14d4('0x1b')])[a22_0x14d4('0x54')]();if(_0x5ed7c3!=_0x549573){return!![];}}}catch(_0x180568){console[a22_0x14d4('0x3d')](_0x180568);}return![];}[a22_0x14d4('0x4f')](){console[a22_0x14d4('0x3d')](a22_0x14d4('0x55')+this[a22_0x14d4('0x56')]+a22_0x14d4('0x57')+this[a22_0x14d4('0x4c')][a22_0x14d4('0x4e')]);if(this[a22_0x14d4('0x56')]>=this[a22_0x14d4('0x4c')][a22_0x14d4('0x4e')]){this[a22_0x14d4('0x58')]();return;}const _0x398d73=String(this[a22_0x14d4('0x4c')][this['currentFile']]['path']);const _0x4708e2=this[a22_0x14d4('0x4c')][this[a22_0x14d4('0x56')]]['media_type'];let _0x21eea9=_0x398d73[a22_0x14d4('0x59')](_0x398d73[a22_0x14d4('0x5a')]('/')+0x1);const _0x5b11a8=_0x21eea9[a22_0x14d4('0x5b')]('.')[a22_0x14d4('0x5c')](0x0,-0x1)[a22_0x14d4('0x5d')]('.');let _0x55a38c=this['baseURL']+_0x398d73;const _0x284432=_0x55a38c[a22_0x14d4('0x5b')]('.')[a22_0x14d4('0x5c')](0x0,-0x1)[a22_0x14d4('0x5d')]('.');if(_0x4708e2==a22_0x14d4('0x5e')){_0x21eea9=_0x21eea9+'.mp4';}else if(_0x4708e2==a22_0x14d4('0x5f')){_0x21eea9=_0x5b11a8+a22_0x14d4('0x60');_0x55a38c=_0x284432+a22_0x14d4('0x60');}console[a22_0x14d4('0x3d')](a22_0x14d4('0x61'));console['log'](_0x398d73);console[a22_0x14d4('0x3d')](_0x4708e2);console['log'](_0x21eea9);console[a22_0x14d4('0x3d')](_0x55a38c);console[a22_0x14d4('0x3d')](_0x5b11a8);console[a22_0x14d4('0x3d')](_0x284432);console[a22_0x14d4('0x3d')](a22_0x14d4('0x61'));if(fsExtra[a22_0x14d4('0x51')](this[a22_0x14d4('0x17')]+_0x21eea9)){this[a22_0x14d4('0x62')](this[a22_0x14d4('0x17')]+_0x21eea9)[a22_0x14d4('0x37')](function(_0xe10af2){if(_0xe10af2){this[a22_0x14d4('0x56')]++;}else{this['playlistChanged']=!![];}this[a22_0x14d4('0x4f')]();}[a22_0x14d4('0x33')](this));}else if(fsExtra[a22_0x14d4('0x51')](this[a22_0x14d4('0x19')]+_0x21eea9)){this[a22_0x14d4('0x62')](this[a22_0x14d4('0x19')]+_0x21eea9)[a22_0x14d4('0x37')](function(_0x37fc28){if(_0x37fc28){fsExtra['copySync'](this[a22_0x14d4('0x19')]+_0x21eea9,this[a22_0x14d4('0x17')]+_0x21eea9);this[a22_0x14d4('0x56')]++;}else{this['playlistChanged']=!![];}this['download']();}['bind'](this));}else{console[a22_0x14d4('0x3d')]('Downloading:\x20'+_0x55a38c);this[a22_0x14d4('0x49')]=!![];if(_0x4708e2==a22_0x14d4('0x5e')){this[a22_0x14d4('0x63')](_0x398d73);}else{this[a22_0x14d4('0x64')](_0x55a38c,_0x21eea9,_0x4708e2);}}}[a22_0x14d4('0x62')](_0x2387ca){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x14d4('0x3d')](a22_0x14d4('0x65')+_0x2387ca);const _0x4eef99=yield mediainfo(_0x2387ca)['catch'](_0x27706e=>{console[a22_0x14d4('0x3d')](_0x27706e);fsExtra['removeSync'](_0x2387ca);return![];});const _0x5ee150=_0x4eef99[a22_0x14d4('0x66')][a22_0x14d4('0x67')][a22_0x14d4('0x4e')]>0x1&&_0x4eef99[a22_0x14d4('0x66')][a22_0x14d4('0x67')][0x1]['@type']==a22_0x14d4('0x68');if(!_0x5ee150){fsExtra[a22_0x14d4('0x52')](_0x2387ca);}console['log'](a22_0x14d4('0x69')+_0x5ee150);return _0x5ee150;});}['downloader'](_0x509023,_0x5b2581,_0x372ab1){const _0x9d5304=new Downloader();console[a22_0x14d4('0x3d')](_0x509023);console[a22_0x14d4('0x3d')](_0x5b2581);console[a22_0x14d4('0x3d')](_0x372ab1);const _0x4f443c=_0x9d5304[a22_0x14d4('0x4f')](_0x509023,this['tempFolder']+_0x5b2581);urlExists(_0x509023,function(_0x376a3c,_0x328330){if(_0x328330){if(this['failDownloadFiles'][a22_0x14d4('0x6a')](this[a22_0x14d4('0x56')])){const _0x5cd60f=this[a22_0x14d4('0x1d')][a22_0x14d4('0x6b')](this[a22_0x14d4('0x56')]);if(_0x5cd60f>-0x1){this[a22_0x14d4('0x1d')][a22_0x14d4('0x6c')](_0x5cd60f,0x1);}}console[a22_0x14d4('0x3d')](a22_0x14d4('0x6d')+_0x509023);_0x4f443c[a22_0x14d4('0x6e')]();}else{if(!this[a22_0x14d4('0x1d')][a22_0x14d4('0x6a')](this['currentFile'])){this[a22_0x14d4('0x1d')]['push'](this[a22_0x14d4('0x56')]);}console[a22_0x14d4('0x3d')]('Error:\x20'+_0x509023);this[a22_0x14d4('0x56')]++;this['download']();}}[a22_0x14d4('0x33')](this));_0x4f443c['on']('start',function(_0x4f443c){console[a22_0x14d4('0x3d')](a22_0x14d4('0x6f')+_0x509023);});_0x4f443c['on'](a22_0x14d4('0x70'),function(_0x4f443c){console[a22_0x14d4('0x3d')](a22_0x14d4('0x71'));this[a22_0x14d4('0x4f')]();}['bind'](this));_0x4f443c['on']('end',function(_0x4f443c){console[a22_0x14d4('0x3d')](a22_0x14d4('0x72'));console[a22_0x14d4('0x3d')](a22_0x14d4('0x73')+_0x5b2581);console[a22_0x14d4('0x3d')](a22_0x14d4('0x74')+_0x372ab1);this[a22_0x14d4('0x62')](this['tempFolder']+_0x5b2581)[a22_0x14d4('0x37')](function(_0x19d0f3){if(_0x19d0f3){this[a22_0x14d4('0x56')]++;}this[a22_0x14d4('0x4f')]();}[a22_0x14d4('0x33')](this));}['bind'](this));_0x4f443c['on'](a22_0x14d4('0x75'),function(_0x4f443c){console[a22_0x14d4('0x3d')](a22_0x14d4('0x75'));});_0x4f443c['on'](a22_0x14d4('0x76'),function(_0x4f443c){console[a22_0x14d4('0x3d')]('destroyed');});_0x4f443c['on']('retry',function(_0x4f443c){console['log'](a22_0x14d4('0x77'));});}[a22_0x14d4('0x78')](_0x360250,_0x1d0786,_0x40692a,_0x2a5ac9){console[a22_0x14d4('0x3d')](a22_0x14d4('0x78'));console[a22_0x14d4('0x3d')](_0x360250);const _0x17441c=!![];let _0x5507a4=0x0;const _0x3c7de5='';console[a22_0x14d4('0x3d')](a22_0x14d4('0x79')+_0x360250+a22_0x14d4('0x7a')+_0x1d0786);if(_0x5507a4){if(_0x5507a4>0x5){_0x2a5ac9(a22_0x14d4('0x7b'),_0x360250,_0x40692a,null);return;}}else{_0x5507a4=0x0;}const _0x3c6b58=this[a22_0x14d4('0x17')]+_0x1d0786;let _0x3fea96;if(_0x2a5ac9===undefined){console[a22_0x14d4('0x3d')](a22_0x14d4('0x7c')+_0x360250+a22_0x14d4('0x7a')+_0x3c6b58);_0x2a5ac9=function(_0x3d027d,_0x29e197){console[a22_0x14d4('0x3d')](a22_0x14d4('0x7d'),_0x3d027d,_0x29e197);};}http[a22_0x14d4('0x7e')]['maxSockets']=0x64;const _0x5840ef={'host':url[a22_0x14d4('0x25')](_0x360250)['host'],'port':0x50,'path':url['parse'](_0x360250)[a22_0x14d4('0x7f')],'agent':![]};const _0x1172d8=http['get'](_0x5840ef,function(_0x3c7184){let _0x39d64b=0x0;let _0x1ac686=0x0;function _0x4d3bcc(){if(_0x39d64b===undefined){console[a22_0x14d4('0x3d')](_0x1d0786+'\x20Progress:\x20unknown\x09'+_0x1ac686+'/'+'?');}const _0x2cd43e=_0x1ac686/_0x39d64b*0x64;console[a22_0x14d4('0x3d')](_0x1d0786+a22_0x14d4('0x80')+_0x2cd43e+'%\x09'+_0x1ac686+'/'+_0x39d64b);}console[a22_0x14d4('0x3d')](_0x1d0786+'\x20'+_0x3c7184[a22_0x14d4('0x81')]);switch(_0x3c7184['statusCode']){case 0xc8:_0x39d64b=_0x3c7184[a22_0x14d4('0x82')][a22_0x14d4('0x83')]||_0x3c7de5;fs[a22_0x14d4('0x84')](_0x3c6b58,function(_0x30475a,_0x3025a0){if(!_0x30475a){console[a22_0x14d4('0x3d')](a22_0x14d4('0x85')+_0x3c6b58);if(_0x3025a0[a22_0x14d4('0x86')]==_0x39d64b){console[a22_0x14d4('0x3d')](a22_0x14d4('0x87')+_0x39d64b+')');console['log'](a22_0x14d4('0x88'));}else{console['log'](a22_0x14d4('0x89')+_0x3025a0['size']+a22_0x14d4('0x8a')+_0x39d64b+')');}}_0x3fea96=fs[a22_0x14d4('0x8b')](_0x3c6b58);_0x3c7184[a22_0x14d4('0x8c')](_0x3fea96);_0x3c7184['on'](a22_0x14d4('0x8d'),function(_0x1687d4){_0x1ac686+=_0x1687d4[a22_0x14d4('0x4e')];_0x4d3bcc();});_0x1172d8['on'](a22_0x14d4('0x70'),function(_0x30475a){console[a22_0x14d4('0x3d')](a22_0x14d4('0x8e'));console[a22_0x14d4('0x3d')](_0x30475a);});_0x3fea96['on'](a22_0x14d4('0x8f'),function(){console[a22_0x14d4('0x3d')](a22_0x14d4('0x90')+_0x360250+a22_0x14d4('0x7a')+_0x1d0786);_0x2a5ac9(null,_0x1d0786,_0x40692a,_0x1d0786);}[a22_0x14d4('0x33')](this));});break;case 0x12e:const _0x2a58cb=_0x3c7184[a22_0x14d4('0x82')][a22_0x14d4('0x91')];console[a22_0x14d4('0x3d')](a22_0x14d4('0x92')+_0x360250+a22_0x14d4('0x7a')+_0x2a58cb);if(_0x5507a4<0x5){this[a22_0x14d4('0x78')](_0x2a58cb,_0x1d0786,_0x2a5ac9,_0x5507a4++);}else{console[a22_0x14d4('0x70')](a22_0x14d4('0x93')+_0x360250+'.');_0x2a5ac9(a22_0x14d4('0x94'),null,null,null);}return;case 0x194:console[a22_0x14d4('0x3d')](a22_0x14d4('0x95')+_0x360250);default:console['log'](a22_0x14d4('0x96')+_0x360250+a22_0x14d4('0x97')+_0x3c7184[a22_0x14d4('0x81')]);_0x1172d8[a22_0x14d4('0x98')]();_0x2a5ac9(_0x3c7184['statusCode'],null,null,null);return;}})['on'](a22_0x14d4('0x70'),function(_0x390eae){console[a22_0x14d4('0x3d')](a22_0x14d4('0x99')+_0x360250+'\x20'+_0x390eae[a22_0x14d4('0x9a')]);_0x2a5ac9(_0x390eae,null,null,null);});}[a22_0x14d4('0x9b')](_0x50b4a9,_0x4ac6dc,_0x5daaf7,_0x439b16){console[a22_0x14d4('0x3d')](a22_0x14d4('0x9b'));console['log'](_0x50b4a9);console[a22_0x14d4('0x3d')](_0x4ac6dc);console[a22_0x14d4('0x3d')](_0x5daaf7);console[a22_0x14d4('0x3d')](_0x439b16);if(_0x5daaf7==a22_0x14d4('0x5f')){const _0x2d5ff5=this['downloadFiles'][this[a22_0x14d4('0x56')]][a22_0x14d4('0x9c')]!=null?this['downloadFiles'][this[a22_0x14d4('0x56')]][a22_0x14d4('0x9c')]:0x1e;this[a22_0x14d4('0x9d')](_0x439b16,_0x2d5ff5);}else if(_0x5daaf7==a22_0x14d4('0x9e')){if(_0x50b4a9==null&&_0x4ac6dc!=''){this[a22_0x14d4('0x56')]++;}this[a22_0x14d4('0x4f')]();}console[a22_0x14d4('0x3d')](this[a22_0x14d4('0x56')]);}[a22_0x14d4('0x9f')](_0x4e5ae2,_0x3f3e13,_0x30ab01){progress(request(_0x4e5ae2),{})['on'](a22_0x14d4('0xa0'),function(_0x48712e){console[a22_0x14d4('0x3d')](_0x48712e);})['on'](a22_0x14d4('0x70'),function(_0x3ddfd3){console[a22_0x14d4('0x3d')](a22_0x14d4('0xa1'));this['download']();})['on'](a22_0x14d4('0x72'),function(){console[a22_0x14d4('0x3d')](a22_0x14d4('0x73')+_0x3f3e13);console[a22_0x14d4('0x3d')]('mediaType:\x20'+_0x30ab01);if(_0x30ab01=='image'){const _0x5a7e54=this['downloadFiles'][this[a22_0x14d4('0x56')]][a22_0x14d4('0x9c')]!=null?this[a22_0x14d4('0x4c')][this[a22_0x14d4('0x56')]]['duration']:0x1e;this[a22_0x14d4('0x9d')](_0x3f3e13,_0x5a7e54);}else if(_0x30ab01=='video'){this[a22_0x14d4('0x56')]++;this[a22_0x14d4('0x4f')]();}}[a22_0x14d4('0x33')](this))['pipe'](fs['createWriteStream'](this[a22_0x14d4('0x17')]+_0x3f3e13));}[a22_0x14d4('0x9d')](_0x4dd3c9,_0x6cdc9c=0x1e){const _0xb6d101=this[a22_0x14d4('0x17')]+_0x4dd3c9;console[a22_0x14d4('0x3d')](_0xb6d101);console[a22_0x14d4('0x3d')](_0x4dd3c9);const _0x22b2c3=_0x4dd3c9[a22_0x14d4('0x5b')]('.')[a22_0x14d4('0x5c')](0x0,-0x1)[a22_0x14d4('0x5d')]('.');const _0x3e877d='ffmpeg';const _0x19a2a1=['-y','-r',a22_0x14d4('0xa2'),'-loop','1',a22_0x14d4('0xa3'),a22_0x14d4('0xa4'),'-i',_0xb6d101,'-t',String(_0x6cdc9c),a22_0x14d4('0xa5'),'libx264',a22_0x14d4('0xa6'),a22_0x14d4('0xa7'),'-r','25',a22_0x14d4('0xa8'),'scale=1920:1080',this['tempFolder']+_0x22b2c3+a22_0x14d4('0x60')];const _0x454ac4=spawn(_0x3e877d,_0x19a2a1);_0x454ac4['stdout']['on'](a22_0x14d4('0x8d'),function(_0x1fe292){console[a22_0x14d4('0x3d')](a22_0x14d4('0xa9')+_0xb6d101);});_0x454ac4[a22_0x14d4('0xaa')]['on']('data',function(_0x256297){console[a22_0x14d4('0x3d')](a22_0x14d4('0xab')+_0x256297);}['bind'](this));_0x454ac4['on']('close',function(){console[a22_0x14d4('0x3d')](a22_0x14d4('0xac'));this[a22_0x14d4('0x56')]++;this[a22_0x14d4('0x4f')]();}[a22_0x14d4('0x33')](this));}[a22_0x14d4('0x63')](_0x5e41ca){const _0x58d938=this[a22_0x14d4('0x17')]+'/'+_0x5e41ca+a22_0x14d4('0x60');const _0x15334a=youtubedl(a22_0x14d4('0xad')+_0x5e41ca,[a22_0x14d4('0xae')],{'cwd':__dirname});_0x15334a['on']('info',function(_0xb67131){console['log']('Download\x20started');console[a22_0x14d4('0x3d')](a22_0x14d4('0xaf')+_0xb67131[a22_0x14d4('0xb0')]);console[a22_0x14d4('0x3d')]('size:\x20'+_0xb67131[a22_0x14d4('0x86')]);});_0x15334a['on'](a22_0x14d4('0xb1'),function complete(_0x3976fe){'use strict';console['log'](a22_0x14d4('0xaf')+_0x3976fe[a22_0x14d4('0xb0')]+'\x20already\x20downloaded.');});_0x15334a['on']('end',function(){console[a22_0x14d4('0x3d')]('finished\x20youtube\x20downloading!');this[a22_0x14d4('0x62')](_0x58d938)[a22_0x14d4('0x37')](function(_0x511064){if(_0x511064){this[a22_0x14d4('0x56')]++;}this[a22_0x14d4('0x4f')]();}['bind'](this));}['bind'](this));_0x15334a[a22_0x14d4('0x8c')](fs[a22_0x14d4('0x8b')](_0x58d938));}[a22_0x14d4('0x58')](){console['log'](a22_0x14d4('0xb2'));if(this[a22_0x14d4('0x49')]){if(this[a22_0x14d4('0x1d')]['length']==0x0){fs[a22_0x14d4('0x3f')](this['playListFile'],JSON[a22_0x14d4('0x38')](this[a22_0x14d4('0x1e')]));let _0x98fd4c=a22_0x14d4('0xb3')+'\x0d\x0a'+a22_0x14d4('0xb4')+'\x0d\x0a';for(const _0x2e0376 in this['downloadFiles']){const _0x302e8d=this[a22_0x14d4('0x4c')][_0x2e0376][a22_0x14d4('0xb5')];const _0x17dbb2=this[a22_0x14d4('0x4c')][_0x2e0376]['media_type'];const _0x4028f0=_0x302e8d['substring'](_0x302e8d[a22_0x14d4('0x5a')]('/')+0x1);let _0x4153fe=_0x4028f0[a22_0x14d4('0x5b')]('.')[a22_0x14d4('0x5c')](0x0,-0x1)[a22_0x14d4('0x5d')]('.');if(_0x17dbb2==a22_0x14d4('0x5e')){_0x4153fe=_0x302e8d;}_0x98fd4c+=a22_0x14d4('0xb6')+_0x4153fe+a22_0x14d4('0x60')+'\x0d\x0a';}fsExtra['emptyDirSync'](this['filesFolder']);fsExtra[a22_0x14d4('0xb7')](this['tempFolder'],this[a22_0x14d4('0x19')]);fsExtra[a22_0x14d4('0x3f')](this[a22_0x14d4('0x53')],_0x98fd4c);fsExtra[a22_0x14d4('0x4b')](this[a22_0x14d4('0x17')]);console[a22_0x14d4('0x3d')](a22_0x14d4('0xb8'));this['refreshPlayer']();}else{console[a22_0x14d4('0x3d')]('Playlist\x20incomplete,\x20retry.');this['currentFile']=0x0;setTimeout(function(){this['download']();}[a22_0x14d4('0x33')](this),0x1388);}}else{console[a22_0x14d4('0x3d')](a22_0x14d4('0xb9'));}}[a22_0x14d4('0xba')](){this[a22_0x14d4('0xbb')](a22_0x14d4('0xbc'),{'playlistid':0x1},function(_0x32867c){console[a22_0x14d4('0x3d')](a22_0x14d4('0xbd'));console[a22_0x14d4('0x3d')](_0x32867c);this[a22_0x14d4('0xbb')]('Playlist.Add',{'item':{'file':a22_0x14d4('0xbe')},'playlistid':0x1},function(_0x32867c){console['log']('Playlist.Added');console[a22_0x14d4('0x3d')](_0x32867c);this[a22_0x14d4('0xbb')](a22_0x14d4('0xbf'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x32867c){console[a22_0x14d4('0x3d')](a22_0x14d4('0xc0'));console[a22_0x14d4('0x3d')](_0x32867c);}[a22_0x14d4('0x33')](this));}[a22_0x14d4('0x33')](this));}[a22_0x14d4('0x33')](this));}[a22_0x14d4('0xc1')](){exec(a22_0x14d4('0xc2'),function(_0x5dcb7b){console[a22_0x14d4('0x3d')](_0x5dcb7b);});}[a22_0x14d4('0xc3')](){const _0x246a9b=format(this[a22_0x14d4('0xc4')],this[a22_0x14d4('0x28')]);console[a22_0x14d4('0x3d')](_0x246a9b);request({'url':_0x246a9b,'json':!![]},function(_0x3e9bd4,_0x5ed3ce,_0x117f1f){if(_0x117f1f[a22_0x14d4('0x4e')]>0x0){const _0x2266fd=_0x117f1f[0x0];const _0x1e8274=_0x2266fd[a22_0x14d4('0xc5')];const _0x40d686=_0x2266fd[a22_0x14d4('0xc6')]==0x1;this[a22_0x14d4('0xc7')](_0x1e8274);this['enableClock'](_0x40d686);}console[a22_0x14d4('0x3d')](_0x117f1f);}[a22_0x14d4('0x33')](this));}[a22_0x14d4('0xc7')](_0x15bc12){const _0x166a1e=_0x15bc12!=null&&_0x15bc12!='';const _0x131578=a22_0x14d4('0xc8');const _0x5d1953=fsExtra[a22_0x14d4('0x26')](_0x131578);console[a22_0x14d4('0x3d')](a22_0x14d4('0xc9')+_0x5d1953);const _0x1f15e0=require(a22_0x14d4('0xca'));const _0x3fa356=_0x1f15e0[a22_0x14d4('0xcb')];_0x3fa356(_0x5d1953,function(_0x4fa792,_0x3c5e15){console[a22_0x14d4('0x3d')]('err:\x20%j',_0x4fa792);console[a22_0x14d4('0x3d')](a22_0x14d4('0xcc'),_0x3c5e15);_0x3c5e15[a22_0x14d4('0xcd')][a22_0x14d4('0xce')][0x0][a22_0x14d4('0xcf')][0x0]['_']=_0x15bc12;const _0x3839fb=new _0x1f15e0[(a22_0x14d4('0xd0'))]();const _0x4db433=_0x3839fb[a22_0x14d4('0xd1')](_0x3c5e15);console[a22_0x14d4('0x3d')]('xml:\x20%j',_0x4db433);fsExtra[a22_0x14d4('0x3f')](_0x131578,_0x4db433);});exec(a22_0x14d4('0xd2'),function(_0x775ef6){console['log'](_0x775ef6);});this[a22_0x14d4('0xbb')](a22_0x14d4('0xd3'),{'setting':a22_0x14d4('0xd4'),'value':_0x166a1e},function(_0x49fae6){console[a22_0x14d4('0x3d')]('setRss:');console['log'](_0x49fae6);}[a22_0x14d4('0x33')](this));}[a22_0x14d4('0xd5')](_0x3d8cc0){this[a22_0x14d4('0xbb')](a22_0x14d4('0xd3'),{'setting':a22_0x14d4('0xd6'),'value':_0x3d8cc0},function(_0x3912a4){console['log'](a22_0x14d4('0xd7'));console[a22_0x14d4('0x3d')](_0x3912a4);}['bind'](this));}['jsonrpcClient'](_0x39ec04,_0x132435,_0x2e8294){const _0x28f58b={'jsonrpc':'2.0','method':_0x39ec04,'params':_0x132435,'id':0x1};this[a22_0x14d4('0xd8')]['post'](this[a22_0x14d4('0x1f')]+'/jsonrpc',_0x28f58b,![],{'user':this[a22_0x14d4('0x20')],'pass':this['kodiPassword']})[a22_0x14d4('0x37')](function(_0x4248a1){_0x2e8294(_0x4248a1);})[a22_0x14d4('0x44')](function(_0x3ac61b){});}}exports[a22_0x14d4('0xd9')]=SyncPlaylistsService;