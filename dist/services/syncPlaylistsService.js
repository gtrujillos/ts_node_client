var a22_0x5e6f=['failDownloadFiles','HttpClientService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','registerClient','checkFolders','reportStatus','bind','checkDependencies','installer','mediainfo','log','mediainfo:\x20','ErrorX:\x20','deviceUuid','stringify','networkInterfaces','httpClientService','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','catch','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','newPlayList','emptyDirSync','push','length','download','reloadMediaList','existsSync','removeSync','loadMediaList','hasPlayListChanged','error','this.currentFile:\x20','\x20of\x20','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloader','videoFile:\x20','track','media','@type','Video','includes','indexOf','splice','downloading:\x20','start','Error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','globalAgent','host','pathname','get','\x20Progress:\x20','statusCode','headers','content-length','stat','size','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','finish','Downloaded\x20','location','Redirect\x20','302','File\x20Not\x20Found\x20','Error\x20Downloading:\x20','createImageVideo','video','downloadRequestFile','Error\x20downloading\x20file','duration','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','finishProcess','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','/home/osmc/luloclient/media/files/','writeFileSync','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','__esModule','node-mediainfo','http','fs-extra','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','config.json','context.json','mt-files-downloader','mediaFolder','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','downloadFiles'];(function(_0x39ff61,_0x38347d){var _0xee2797=function(_0x570b87){while(--_0x570b87){_0x39ff61['push'](_0x39ff61['shift']());}};_0xee2797(++_0x38347d);}(a22_0x5e6f,0x1f2));var a22_0x57d6=function(_0x477c78,_0x12a8ca){_0x477c78=_0x477c78-0x0;var _0x335231=a22_0x5e6f[_0x477c78];return _0x335231;};'use strict';var __awaiter=this&&this[a22_0x57d6('0x0')]||function(_0x19b05b,_0x214425,_0x20bd6f,_0x185690){return new(_0x20bd6f||(_0x20bd6f=Promise))(function(_0x202d7b,_0x5ef689){function _0x10994f(_0x4a929e){try{_0x3492b5(_0x185690[a22_0x57d6('0x1')](_0x4a929e));}catch(_0x4b4b51){_0x5ef689(_0x4b4b51);}}function _0x235461(_0x1b411c){try{_0x3492b5(_0x185690[a22_0x57d6('0x2')](_0x1b411c));}catch(_0x3fc0bf){_0x5ef689(_0x3fc0bf);}}function _0x3492b5(_0x5ba335){_0x5ba335[a22_0x57d6('0x3')]?_0x202d7b(_0x5ba335[a22_0x57d6('0x4')]):new _0x20bd6f(function(_0x202d7b){_0x202d7b(_0x5ba335[a22_0x57d6('0x4')]);})[a22_0x57d6('0x5')](_0x10994f,_0x235461);}_0x3492b5((_0x185690=_0x185690[a22_0x57d6('0x6')](_0x19b05b,_0x214425||[]))[a22_0x57d6('0x1')]());});};Object['defineProperty'](exports,a22_0x57d6('0x7'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const mediainfo=require(a22_0x57d6('0x8'));const fs=require('fs');const url=require('url');const http=require(a22_0x57d6('0x9'));const fsExtra=require(a22_0x57d6('0xa'));const request=require(a22_0x57d6('0xb'));const progress=require(a22_0x57d6('0xc'));const spawn=require(a22_0x57d6('0xd'))[a22_0x57d6('0xe')];const isImage=require(a22_0x57d6('0xf'));const format=require(a22_0x57d6('0x10'));const os=require('os');const youtubedl=require(a22_0x57d6('0x11'));const uuidv4=require(a22_0x57d6('0x12'));const configFile=a22_0x57d6('0x13');const contextFile=a22_0x57d6('0x14');const urlExists=require('url-exists');const Downloader=require(a22_0x57d6('0x15'));class SyncPlaylistsService{constructor(){this[a22_0x57d6('0x16')]='media/';this[a22_0x57d6('0x17')]=this[a22_0x57d6('0x16')]+a22_0x57d6('0x18');this[a22_0x57d6('0x19')]=this['mediaFolder']+a22_0x57d6('0x1a');this[a22_0x57d6('0x1b')]=this[a22_0x57d6('0x16')]+a22_0x57d6('0x1c');this[a22_0x57d6('0x1d')]=this[a22_0x57d6('0x19')]+a22_0x57d6('0x1e');this[a22_0x57d6('0x1f')]=0x0;this[a22_0x57d6('0x20')]=[];this[a22_0x57d6('0x21')]=[];this['newPlayList']={};this['httpClientService']=new HttpClientService_1[(a22_0x57d6('0x22'))]();}[a22_0x57d6('0x23')](){this[a22_0x57d6('0x24')]=JSON[a22_0x57d6('0x25')](fs[a22_0x57d6('0x26')](configFile));this[a22_0x57d6('0x27')]=JSON[a22_0x57d6('0x25')](fs[a22_0x57d6('0x26')](contextFile));this[a22_0x57d6('0x28')]=this[a22_0x57d6('0x24')][a22_0x57d6('0x28')];this[a22_0x57d6('0x29')]=process['env'][a22_0x57d6('0x2a')]+a22_0x57d6('0x2b');this[a22_0x57d6('0x2c')]=this[a22_0x57d6('0x29')]+a22_0x57d6('0x2d');this[a22_0x57d6('0x2e')]();this[a22_0x57d6('0x2f')]();this['loadMediaList']();setInterval(function(){this[a22_0x57d6('0x30')]();}[a22_0x57d6('0x31')](this),0x2710);}[a22_0x57d6('0x32')](){const _0x289cc8=require('system-installer')[a22_0x57d6('0x33')];_0x289cc8(a22_0x57d6('0x34'))['then'](function(_0x4775b2){console[a22_0x57d6('0x35')](a22_0x57d6('0x36'));console[a22_0x57d6('0x35')](_0x4775b2);})['catch'](function(_0x245dee){console[a22_0x57d6('0x35')](a22_0x57d6('0x37'));console[a22_0x57d6('0x35')](_0x245dee);});}[a22_0x57d6('0x2e')](){const _0x618791=this[a22_0x57d6('0x24')][a22_0x57d6('0x38')];if(!_0x618791||_0x618791==''){this[a22_0x57d6('0x24')][a22_0x57d6('0x38')]=uuidv4();this[a22_0x57d6('0x24')]={'deviceUuid':this['config']['deviceUuid'],'playerId':this[a22_0x57d6('0x24')]['playerId']};fs['writeFileSync'](configFile,JSON[a22_0x57d6('0x39')](this['config']));}const _0x4177eb={'player_id':this[a22_0x57d6('0x28')],'device_uuid':this['config']['deviceUuid'],'network_info':JSON[a22_0x57d6('0x39')](os[a22_0x57d6('0x3a')]()),'firmware_info':JSON[a22_0x57d6('0x39')](this[a22_0x57d6('0x27')]),'status':0x1};this[a22_0x57d6('0x3b')][a22_0x57d6('0x3c')](a22_0x57d6('0x3d'),_0x4177eb,![])[a22_0x57d6('0x5')](function(_0x3f7316){console['log'](a22_0x57d6('0x3e')+Date());})[a22_0x57d6('0x3f')](function(_0x552ebe){});}[a22_0x57d6('0x30')](){const _0x4b297b={'player_id':this[a22_0x57d6('0x28')],'device_uuid':this[a22_0x57d6('0x24')]['deviceUuid'],'status':0x1};this[a22_0x57d6('0x3b')][a22_0x57d6('0x3c')](a22_0x57d6('0x40'),_0x4b297b,![])['then'](function(_0x4dc116){console['log'](a22_0x57d6('0x41')+Date());})['catch'](function(_0x131442){});}[a22_0x57d6('0x2f')](){fsExtra[a22_0x57d6('0x42')](this[a22_0x57d6('0x16')],_0xeae74c=>{});fsExtra['ensureDir'](this[a22_0x57d6('0x17')],_0x1d556a=>{});fsExtra['ensureDir'](this[a22_0x57d6('0x19')],_0x43e3fe=>{});}['loadMediaList'](){const _0x2f4d09=format(this[a22_0x57d6('0x2c')],this[a22_0x57d6('0x28')]);console[a22_0x57d6('0x35')](_0x2f4d09);request({'url':_0x2f4d09,'json':!![]},function(_0x4f60eb,_0x42adb8,_0x2af144){this[a22_0x57d6('0x43')]=_0x2af144;fsExtra[a22_0x57d6('0x44')](this[a22_0x57d6('0x17')]);this[a22_0x57d6('0x20')]=[];this[a22_0x57d6('0x21')]=[];this[a22_0x57d6('0x1f')]=0x0;for(const _0x2dce3d in _0x2af144){this[a22_0x57d6('0x20')][a22_0x57d6('0x45')](_0x2af144[_0x2dce3d]);}console[a22_0x57d6('0x35')]('Total:\x20'+this[a22_0x57d6('0x20')][a22_0x57d6('0x46')]);if(this[a22_0x57d6('0x20')]['length']>0x0){this[a22_0x57d6('0x47')]();}}['bind'](this));}[a22_0x57d6('0x48')](){if(fsExtra[a22_0x57d6('0x49')](this['playListFile'])){fsExtra[a22_0x57d6('0x4a')](this[a22_0x57d6('0x1b')]);}this[a22_0x57d6('0x4b')]();}[a22_0x57d6('0x4c')](){const _0x4d53c8=JSON[a22_0x57d6('0x39')](this[a22_0x57d6('0x43')]);try{if(!fs[a22_0x57d6('0x49')](this[a22_0x57d6('0x1b')])){return!![];}else{const _0x452741=fs['readFileSync'](this['playListFile'])['toString']();if(_0x452741!=_0x4d53c8){return!![];}}}catch(_0x425437){console[a22_0x57d6('0x4d')](_0x425437);}return![];}[a22_0x57d6('0x47')](){console['log'](a22_0x57d6('0x4e')+this['currentFile']+a22_0x57d6('0x4f')+this['downloadFiles'][a22_0x57d6('0x46')]);if(this[a22_0x57d6('0x1f')]>=this['downloadFiles'][a22_0x57d6('0x46')]){this['finishProcess']();return;}const _0x3121fc=String(this[a22_0x57d6('0x20')][this[a22_0x57d6('0x1f')]]['path']);const _0xe599d6=this[a22_0x57d6('0x20')][this[a22_0x57d6('0x1f')]][a22_0x57d6('0x50')];let _0xb269a2=_0x3121fc[a22_0x57d6('0x51')](_0x3121fc[a22_0x57d6('0x52')]('/')+0x1);const _0x877dcd=_0xb269a2[a22_0x57d6('0x53')]('.')[a22_0x57d6('0x54')](0x0,-0x1)[a22_0x57d6('0x55')]('.');let _0x23f2d2=this[a22_0x57d6('0x29')]+_0x3121fc;const _0x4a1fdf=_0x23f2d2[a22_0x57d6('0x53')]('.')[a22_0x57d6('0x54')](0x0,-0x1)[a22_0x57d6('0x55')]('.');if(_0xe599d6==a22_0x57d6('0x56')){_0xb269a2=_0xb269a2+a22_0x57d6('0x57');}else if(_0xe599d6==a22_0x57d6('0x58')){_0xb269a2=_0x877dcd+a22_0x57d6('0x57');_0x23f2d2=_0x4a1fdf+a22_0x57d6('0x57');}console[a22_0x57d6('0x35')](a22_0x57d6('0x59'));console['log'](_0x3121fc);console['log'](_0xe599d6);console[a22_0x57d6('0x35')](_0xb269a2);console[a22_0x57d6('0x35')](_0x23f2d2);console['log'](_0x877dcd);console[a22_0x57d6('0x35')](_0x4a1fdf);console[a22_0x57d6('0x35')](a22_0x57d6('0x59'));if(fsExtra[a22_0x57d6('0x49')](this['tempFolder']+_0xb269a2)){this[a22_0x57d6('0x5a')](this['tempFolder']+_0xb269a2)['then'](function(_0x37e6b9){if(_0x37e6b9){this[a22_0x57d6('0x1f')]++;}this[a22_0x57d6('0x47')]();}['bind'](this));}else if(fsExtra[a22_0x57d6('0x49')](this['filesFolder']+_0xb269a2)){this['checkVideo'](this[a22_0x57d6('0x19')]+_0xb269a2)[a22_0x57d6('0x5')](function(_0x5ad5b0){if(_0x5ad5b0){fsExtra[a22_0x57d6('0x5b')](this['filesFolder']+_0xb269a2,this[a22_0x57d6('0x17')]+_0xb269a2);this[a22_0x57d6('0x1f')]++;}this['download']();}[a22_0x57d6('0x31')](this));}else{console['log'](a22_0x57d6('0x5c')+_0x23f2d2);if(_0xe599d6=='youtube_single'){this['downloadYouTube'](_0x3121fc);}else{this[a22_0x57d6('0x5d')](_0x23f2d2,_0xb269a2,_0xe599d6);}}}[a22_0x57d6('0x5a')](_0x42c90b){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a22_0x57d6('0x5e')+_0x42c90b);const _0x244813=yield mediainfo(_0x42c90b)[a22_0x57d6('0x3f')](_0x49cf53=>console[a22_0x57d6('0x35')](_0x49cf53));const _0x4db3c6=_0x244813['media'][a22_0x57d6('0x5f')][a22_0x57d6('0x46')]>0x1&&_0x244813[a22_0x57d6('0x60')][a22_0x57d6('0x5f')][0x1][a22_0x57d6('0x61')]==a22_0x57d6('0x62');if(!_0x4db3c6){fsExtra[a22_0x57d6('0x4a')](_0x42c90b);}console[a22_0x57d6('0x35')]('mediainfo\x20check:'+_0x4db3c6);return _0x4db3c6;});}[a22_0x57d6('0x5d')](_0x2dff4d,_0x2faf72,_0x113033){const _0x37816b=new Downloader();console[a22_0x57d6('0x35')](_0x2dff4d);console[a22_0x57d6('0x35')](_0x2faf72);console[a22_0x57d6('0x35')](_0x113033);const _0x16e5cb=_0x37816b['download'](_0x2dff4d,this['tempFolder']+_0x2faf72);urlExists(_0x2dff4d,function(_0x69410,_0x231169){if(_0x231169){if(this[a22_0x57d6('0x21')][a22_0x57d6('0x63')](this['currentFile'])){const _0x50002f=this[a22_0x57d6('0x21')][a22_0x57d6('0x64')](this[a22_0x57d6('0x1f')]);if(_0x50002f>-0x1){this[a22_0x57d6('0x21')][a22_0x57d6('0x65')](_0x50002f,0x1);}}console[a22_0x57d6('0x35')](a22_0x57d6('0x66')+_0x2dff4d);_0x16e5cb[a22_0x57d6('0x67')]();}else{if(!this[a22_0x57d6('0x21')][a22_0x57d6('0x63')](this[a22_0x57d6('0x1f')])){this[a22_0x57d6('0x21')][a22_0x57d6('0x45')](this[a22_0x57d6('0x1f')]);}console[a22_0x57d6('0x35')](a22_0x57d6('0x68')+_0x2dff4d);this[a22_0x57d6('0x1f')]++;this[a22_0x57d6('0x47')]();}}[a22_0x57d6('0x31')](this));_0x16e5cb['on']('start',function(_0x16e5cb){console[a22_0x57d6('0x35')]('start:\x20'+_0x2dff4d);});_0x16e5cb['on'](a22_0x57d6('0x4d'),function(_0x16e5cb){console[a22_0x57d6('0x35')]('error:\x20');this[a22_0x57d6('0x47')]();}[a22_0x57d6('0x31')](this));_0x16e5cb['on'](a22_0x57d6('0x69'),function(_0x16e5cb){console[a22_0x57d6('0x35')](a22_0x57d6('0x69'));console[a22_0x57d6('0x35')](a22_0x57d6('0x6a')+_0x2faf72);console[a22_0x57d6('0x35')](a22_0x57d6('0x6b')+_0x113033);this['checkVideo'](this['tempFolder']+_0x2faf72)[a22_0x57d6('0x5')](function(_0x4a8021){if(_0x4a8021){this[a22_0x57d6('0x1f')]++;}this[a22_0x57d6('0x47')]();}[a22_0x57d6('0x31')](this));}[a22_0x57d6('0x31')](this));_0x16e5cb['on'](a22_0x57d6('0x6c'),function(_0x16e5cb){console[a22_0x57d6('0x35')](a22_0x57d6('0x6c'));});_0x16e5cb['on'](a22_0x57d6('0x6d'),function(_0x16e5cb){console[a22_0x57d6('0x35')]('destroyed');});_0x16e5cb['on'](a22_0x57d6('0x6e'),function(_0x16e5cb){console[a22_0x57d6('0x35')](a22_0x57d6('0x6e'));});}['downloadHTTPFile'](_0x3bdeee,_0x1be3b1,_0x499a89,_0x2ea1ba){console[a22_0x57d6('0x35')](a22_0x57d6('0x6f'));console[a22_0x57d6('0x35')](_0x3bdeee);const _0x3181a4=!![];let _0xea0b98=0x0;const _0x49fcac='';console[a22_0x57d6('0x35')](a22_0x57d6('0x70')+_0x3bdeee+'\x20to\x20'+_0x1be3b1);if(_0xea0b98){if(_0xea0b98>0x5){_0x2ea1ba('Max\x20redirects\x20reached',_0x3bdeee,_0x499a89,null);return;}}else{_0xea0b98=0x0;}const _0x280d78=this[a22_0x57d6('0x17')]+_0x1be3b1;let _0x306b84;if(_0x2ea1ba===undefined){console['log'](a22_0x57d6('0x71')+_0x3bdeee+a22_0x57d6('0x72')+_0x280d78);_0x2ea1ba=function(_0x5d5bd4,_0x5b8cce){console[a22_0x57d6('0x35')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x5d5bd4,_0x5b8cce);};}http[a22_0x57d6('0x73')]['maxSockets']=0x64;const _0x1e82e4={'host':url['parse'](_0x3bdeee)[a22_0x57d6('0x74')],'port':0x50,'path':url['parse'](_0x3bdeee)[a22_0x57d6('0x75')],'agent':![]};const _0x3e10b7=http[a22_0x57d6('0x76')](_0x1e82e4,function(_0x416d1a){let _0x270825=0x0;let _0x16e25d=0x0;function _0x5da34d(){if(_0x270825===undefined){console[a22_0x57d6('0x35')](_0x1be3b1+'\x20Progress:\x20unknown\x09'+_0x16e25d+'/'+'?');}const _0x17a0c9=_0x16e25d/_0x270825*0x64;console['log'](_0x1be3b1+a22_0x57d6('0x77')+_0x17a0c9+'%\x09'+_0x16e25d+'/'+_0x270825);}console[a22_0x57d6('0x35')](_0x1be3b1+'\x20'+_0x416d1a[a22_0x57d6('0x78')]);switch(_0x416d1a['statusCode']){case 0xc8:_0x270825=_0x416d1a[a22_0x57d6('0x79')][a22_0x57d6('0x7a')]||_0x49fcac;fs[a22_0x57d6('0x7b')](_0x280d78,function(_0x2c8d41,_0x82cfee){if(!_0x2c8d41){console[a22_0x57d6('0x35')]('Have\x20already\x20downloaded\x20'+_0x280d78);if(_0x82cfee[a22_0x57d6('0x7c')]==_0x270825){console['log'](a22_0x57d6('0x7d')+_0x270825+')');console[a22_0x57d6('0x35')]('Redownloading');}else{console[a22_0x57d6('0x35')](a22_0x57d6('0x7e')+_0x82cfee[a22_0x57d6('0x7c')]+a22_0x57d6('0x7f')+_0x270825+')');}}_0x306b84=fs[a22_0x57d6('0x80')](_0x280d78);_0x416d1a[a22_0x57d6('0x81')](_0x306b84);_0x416d1a['on'](a22_0x57d6('0x82'),function(_0x3d4862){_0x16e25d+=_0x3d4862[a22_0x57d6('0x46')];_0x5da34d();});_0x3e10b7['on'](a22_0x57d6('0x4d'),function(_0x2c8d41){console[a22_0x57d6('0x35')]('err:\x20');console[a22_0x57d6('0x35')](_0x2c8d41);});_0x306b84['on'](a22_0x57d6('0x83'),function(){console[a22_0x57d6('0x35')](a22_0x57d6('0x84')+_0x3bdeee+a22_0x57d6('0x72')+_0x1be3b1);_0x2ea1ba(null,_0x1be3b1,_0x499a89,_0x1be3b1);}['bind'](this));});break;case 0x12e:const _0x596407=_0x416d1a[a22_0x57d6('0x79')][a22_0x57d6('0x85')];console[a22_0x57d6('0x35')](a22_0x57d6('0x86')+_0x3bdeee+a22_0x57d6('0x72')+_0x596407);if(_0xea0b98<0x5){this[a22_0x57d6('0x6f')](_0x596407,_0x1be3b1,_0x2ea1ba,_0xea0b98++);}else{console[a22_0x57d6('0x4d')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x3bdeee+'.');_0x2ea1ba(a22_0x57d6('0x87'),null,null,null);}return;case 0x194:console[a22_0x57d6('0x35')](a22_0x57d6('0x88')+_0x3bdeee);default:console['log']('Problem\x20downloading\x20'+_0x3bdeee+'\x20STATUS:\x20'+_0x416d1a[a22_0x57d6('0x78')]);_0x3e10b7['abort']();_0x2ea1ba(_0x416d1a['statusCode'],null,null,null);return;}})['on'](a22_0x57d6('0x4d'),function(_0x1a98ee){console[a22_0x57d6('0x35')](a22_0x57d6('0x89')+_0x3bdeee+'\x20'+_0x1a98ee['message']);_0x2ea1ba(_0x1a98ee,null,null,null);});}['downloadHTTPFileCallback'](_0x371bee,_0x5fed67,_0x87383b,_0x93b3b8){console[a22_0x57d6('0x35')]('downloadHTTPFileCallback');console['log'](_0x371bee);console[a22_0x57d6('0x35')](_0x5fed67);console[a22_0x57d6('0x35')](_0x87383b);console[a22_0x57d6('0x35')](_0x93b3b8);if(_0x87383b==a22_0x57d6('0x58')){const _0x26ecb7=this[a22_0x57d6('0x20')][this[a22_0x57d6('0x1f')]]['duration']!=null?this[a22_0x57d6('0x20')][this[a22_0x57d6('0x1f')]]['duration']:0x1e;this[a22_0x57d6('0x8a')](_0x93b3b8,_0x26ecb7);}else if(_0x87383b==a22_0x57d6('0x8b')){if(_0x371bee==null&&_0x5fed67!=''){this[a22_0x57d6('0x1f')]++;}this[a22_0x57d6('0x47')]();}console[a22_0x57d6('0x35')](this[a22_0x57d6('0x1f')]);}[a22_0x57d6('0x8c')](_0x2e5952,_0x451635,_0x436071){progress(request(_0x2e5952),{})['on']('progress',function(_0x238474){console['log'](_0x238474);})['on'](a22_0x57d6('0x4d'),function(_0x132f7a){console[a22_0x57d6('0x35')](a22_0x57d6('0x8d'));this[a22_0x57d6('0x47')]();})['on'](a22_0x57d6('0x69'),function(){console[a22_0x57d6('0x35')]('Downloaded:\x20'+_0x451635);console[a22_0x57d6('0x35')](a22_0x57d6('0x6b')+_0x436071);if(_0x436071=='image'){const _0x3fabbc=this[a22_0x57d6('0x20')][this[a22_0x57d6('0x1f')]][a22_0x57d6('0x8e')]!=null?this[a22_0x57d6('0x20')][this[a22_0x57d6('0x1f')]][a22_0x57d6('0x8e')]:0x1e;this[a22_0x57d6('0x8a')](_0x451635,_0x3fabbc);}else if(_0x436071==a22_0x57d6('0x8b')){this[a22_0x57d6('0x1f')]++;this[a22_0x57d6('0x47')]();}}[a22_0x57d6('0x31')](this))['pipe'](fs['createWriteStream'](this[a22_0x57d6('0x17')]+_0x451635));}[a22_0x57d6('0x8a')](_0x10c5ca,_0x17295c=0x1e){const _0x5adb57=this['tempFolder']+_0x10c5ca;console[a22_0x57d6('0x35')](_0x5adb57);console[a22_0x57d6('0x35')](_0x10c5ca);const _0x123c64=_0x10c5ca[a22_0x57d6('0x53')]('.')['slice'](0x0,-0x1)[a22_0x57d6('0x55')]('.');const _0x3f494a='ffmpeg';const _0x2f9e3a=['-y','-r',a22_0x57d6('0x8f'),a22_0x57d6('0x90'),'1',a22_0x57d6('0x91'),a22_0x57d6('0x92'),'-i',_0x5adb57,'-t',String(_0x17295c),a22_0x57d6('0x93'),a22_0x57d6('0x94'),a22_0x57d6('0x95'),a22_0x57d6('0x96'),'-r','25',a22_0x57d6('0x97'),a22_0x57d6('0x98'),this['tempFolder']+_0x123c64+'.mp4'];const _0x15e696=spawn(_0x3f494a,_0x2f9e3a);_0x15e696[a22_0x57d6('0x99')]['on'](a22_0x57d6('0x82'),function(_0x273466){console[a22_0x57d6('0x35')](a22_0x57d6('0x9a')+_0x5adb57);});_0x15e696['stderr']['on'](a22_0x57d6('0x82'),function(_0x5ae250){console['log'](a22_0x57d6('0x9b')+_0x5ae250);}['bind'](this));_0x15e696['on'](a22_0x57d6('0x9c'),function(){console[a22_0x57d6('0x35')](a22_0x57d6('0x9d'));this[a22_0x57d6('0x1f')]++;this[a22_0x57d6('0x47')]();}[a22_0x57d6('0x31')](this));}['downloadYouTube'](_0x3e486a){const _0x5f2a32=this[a22_0x57d6('0x17')]+'/'+_0x3e486a+a22_0x57d6('0x57');const _0x5831eb=youtubedl(a22_0x57d6('0x9e')+_0x3e486a,[a22_0x57d6('0x9f')],{'cwd':__dirname});_0x5831eb['on'](a22_0x57d6('0xa0'),function(_0x33a8f1){console[a22_0x57d6('0x35')](a22_0x57d6('0xa1'));console[a22_0x57d6('0x35')](a22_0x57d6('0xa2')+_0x33a8f1[a22_0x57d6('0xa3')]);console['log'](a22_0x57d6('0xa4')+_0x33a8f1[a22_0x57d6('0x7c')]);});_0x5831eb['on'](a22_0x57d6('0xa5'),function complete(_0x3b2534){'use strict';console[a22_0x57d6('0x35')]('filename:\x20'+_0x3b2534['_filename']+a22_0x57d6('0xa6'));});_0x5831eb['on']('end',function(){console[a22_0x57d6('0x35')](a22_0x57d6('0xa7'));this[a22_0x57d6('0x5a')](_0x5f2a32)['then'](function(_0x17c913){if(_0x17c913){this[a22_0x57d6('0x1f')]++;}this[a22_0x57d6('0x47')]();}[a22_0x57d6('0x31')](this));}['bind'](this));_0x5831eb[a22_0x57d6('0x81')](fs[a22_0x57d6('0x80')](_0x5f2a32));}[a22_0x57d6('0xa8')](){console[a22_0x57d6('0x35')](a22_0x57d6('0xa9'));if(this[a22_0x57d6('0x21')][a22_0x57d6('0x46')]==0x0){fs['writeFileSync'](this['playListFile'],JSON[a22_0x57d6('0x39')](this[a22_0x57d6('0x43')]));let _0x27c84d=a22_0x57d6('0xaa')+'\x0d\x0a'+a22_0x57d6('0xab')+'\x0d\x0a';for(const _0x3e98b3 in this[a22_0x57d6('0x20')]){const _0x322395=this['downloadFiles'][_0x3e98b3][a22_0x57d6('0xac')];const _0x25fd05=this['downloadFiles'][_0x3e98b3][a22_0x57d6('0x50')];const _0xc87fae=_0x322395[a22_0x57d6('0x51')](_0x322395[a22_0x57d6('0x52')]('/')+0x1);let _0x517da4=_0xc87fae['split']('.')['slice'](0x0,-0x1)[a22_0x57d6('0x55')]('.');if(_0x25fd05=='youtube_single'){_0x517da4=_0x322395;}_0x27c84d+=a22_0x57d6('0xad')+_0x517da4+a22_0x57d6('0x57')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x57d6('0x19')]);fsExtra[a22_0x57d6('0x5b')](this[a22_0x57d6('0x17')],this[a22_0x57d6('0x19')]);fs[a22_0x57d6('0xae')](this[a22_0x57d6('0x1d')],_0x27c84d);fsExtra[a22_0x57d6('0x44')](this[a22_0x57d6('0x17')]);console['log']('Finished');}else{console[a22_0x57d6('0x35')](a22_0x57d6('0xaf'));this[a22_0x57d6('0x1f')]=0x0;setTimeout(function(){this[a22_0x57d6('0x47')]();}[a22_0x57d6('0x31')](this),0x1388);}}}exports[a22_0x57d6('0xb0')]=SyncPlaylistsService;