var a23_0x1c47=['playerServiceURL','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','playlist','getItems','stringify','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','log','deviceUuid','writeFileSync','player','item','label','catch','reportStatus','reportStatusResponse:\x20','ensureDir','tempFolder','loadMediaList:\x20','playlistChanged','hasPlayListChanged','emptyDirSync','failDownloadFiles','push','Total:\x20','length','download','existsSync','toString','this.currentFile:\x20','finishProcess','path','substring','lastIndexOf','slice','join','split','youtube_single','.mp4','**********+','checkVideo','downloader','videoFile:\x20','media','track','@type','Video','removeSync','mediainfo\x20check:','downloading:\x20','start','includes','Error:\x20','start:\x20','error','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','globalAgent','maxSockets','parse','pathname','get','\x20Progress:\x20unknown\x09','statusCode','headers','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','createWriteStream','data','err:\x20','finish','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','image','duration','createImageVideo','video','progress','pipe','ffmpeg','1/2','-loop','glob','-c:v','-pix_fmt','-vf','scale=1920:1080','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','_filename','complete','filename:\x20','\x20already\x20downloaded.','Finishing','this.playListFile:\x20','#EXTINF:0,luloPlayList','media_type','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','Playlist.Clear','jsonrpcClient','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Player.Open','kodiCommandClient','RestartApp()','sudo\x20/sbin/reboot\x20-f','rss','header_active','setRss','enableClock','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','parseString','result:\x20%j','none','rssfeeds','feed','Builder','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','setRss:','enableClock:\x20','kodi-send\x20--action=\x22','2.0','SyncPlaylistsService','next','throw','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','http','fs-extra','request','request-progress','child_process','spawn','exec','is-image','string-template','youtube-dl','uuid/v4','config.json','mt-files-downloader','mediaFolder','media/','files/','playListFile','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','currentFile','downloadFiles','newPlayList','kodiHost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','PlayerService','init','config','readFileSync','context','playerId','baseURL','env','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}'];(function(_0x3f44af,_0x31fd17){var _0x1126b6=function(_0x17df8a){while(--_0x17df8a){_0x3f44af['push'](_0x3f44af['shift']());}};_0x1126b6(++_0x31fd17);}(a23_0x1c47,0x183));var a23_0x5ec2=function(_0xce41eb,_0x1a77e3){_0xce41eb=_0xce41eb-0x0;var _0x2608d7=a23_0x1c47[_0xce41eb];return _0x2608d7;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x51fe42,_0x4e3a61,_0x50f900,_0x2b60c3){function _0x1e5323(_0x1cedcf){return _0x1cedcf instanceof _0x50f900?_0x1cedcf:new _0x50f900(function(_0x496673){_0x496673(_0x1cedcf);});}return new(_0x50f900||(_0x50f900=Promise))(function(_0x3f2e31,_0x57dd37){function _0x2f5261(_0x371199){try{_0x3079b4(_0x2b60c3[a23_0x5ec2('0x0')](_0x371199));}catch(_0x374077){_0x57dd37(_0x374077);}}function _0x519e66(_0x44a925){try{_0x3079b4(_0x2b60c3[a23_0x5ec2('0x1')](_0x44a925));}catch(_0xa48257){_0x57dd37(_0xa48257);}}function _0x3079b4(_0x30f7c5){_0x30f7c5['done']?_0x3f2e31(_0x30f7c5[a23_0x5ec2('0x2')]):_0x1e5323(_0x30f7c5['value'])[a23_0x5ec2('0x3')](_0x2f5261,_0x519e66);}_0x3079b4((_0x2b60c3=_0x2b60c3[a23_0x5ec2('0x4')](_0x51fe42,_0x4e3a61||[]))[a23_0x5ec2('0x0')]());});};Object[a23_0x5ec2('0x5')](exports,a23_0x5ec2('0x6'),{'value':!![]});const HttpClientService_1=require(a23_0x5ec2('0x7'));const playerService_1=require(a23_0x5ec2('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require('url');const http=require(a23_0x5ec2('0x9'));const fsExtra=require(a23_0x5ec2('0xa'));const request=require(a23_0x5ec2('0xb'));const progress=require(a23_0x5ec2('0xc'));const spawn=require(a23_0x5ec2('0xd'))[a23_0x5ec2('0xe')];const exec=require(a23_0x5ec2('0xd'))[a23_0x5ec2('0xf')];const isImage=require(a23_0x5ec2('0x10'));const format=require(a23_0x5ec2('0x11'));const os=require('os');const youtubedl=require(a23_0x5ec2('0x12'));const uuidv4=require(a23_0x5ec2('0x13'));const configFile=a23_0x5ec2('0x14');const contextFile='context.json';const urlExists=require('url-exists');const kodi_rpc=require('node-kodi');const Downloader=require(a23_0x5ec2('0x15'));class SyncPlaylistsService{constructor(){this[a23_0x5ec2('0x16')]=a23_0x5ec2('0x17');this['tempFolder']=this[a23_0x5ec2('0x16')]+'temp/';this['filesFolder']=this['mediaFolder']+a23_0x5ec2('0x18');this[a23_0x5ec2('0x19')]=this[a23_0x5ec2('0x16')]+a23_0x5ec2('0x1a');this[a23_0x5ec2('0x1b')]=this[a23_0x5ec2('0x1c')]+a23_0x5ec2('0x1d');this[a23_0x5ec2('0x1e')]=0x0;this['playlistChanged']=![];this[a23_0x5ec2('0x1f')]=[];this['failDownloadFiles']=[];this[a23_0x5ec2('0x20')]={};this[a23_0x5ec2('0x21')]='http://localhost';this[a23_0x5ec2('0x22')]=a23_0x5ec2('0x23');this[a23_0x5ec2('0x24')]=a23_0x5ec2('0x25');this[a23_0x5ec2('0x26')]=![];this[a23_0x5ec2('0x27')]=new HttpClientService_1['HttpClientService']();this['playerService']=new playerService_1[(a23_0x5ec2('0x28'))]();}[a23_0x5ec2('0x29')](){this[a23_0x5ec2('0x2a')]=JSON['parse'](fs[a23_0x5ec2('0x2b')](configFile));this[a23_0x5ec2('0x2c')]=JSON['parse'](fs[a23_0x5ec2('0x2b')](contextFile));this[a23_0x5ec2('0x2d')]=this['config']['playerId'];this[a23_0x5ec2('0x2e')]=process[a23_0x5ec2('0x2f')]['WEB_SERVICE_URL']+a23_0x5ec2('0x30');this[a23_0x5ec2('0x31')]=this[a23_0x5ec2('0x2e')]+a23_0x5ec2('0x32');this[a23_0x5ec2('0x33')]=this[a23_0x5ec2('0x2e')]+'api/player.php?player_id={0}';this[a23_0x5ec2('0x34')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a23_0x5ec2('0x22')],'password':this[a23_0x5ec2('0x24')]});this[a23_0x5ec2('0x35')]();this[a23_0x5ec2('0x36')]();this[a23_0x5ec2('0x37')]();this[a23_0x5ec2('0x38')]();this[a23_0x5ec2('0x39')]();setInterval(function(){this[a23_0x5ec2('0x3a')]();}[a23_0x5ec2('0x3b')](this),0x2710);setInterval(function(){this[a23_0x5ec2('0x36')]();}['bind'](this),0x493e0);}['checkDependencies'](){}[a23_0x5ec2('0x36')](){this['kodi'][a23_0x5ec2('0x3c')][a23_0x5ec2('0x3d')](0x1)['then'](function(_0x23bdbf){const _0x3d4711=JSON[a23_0x5ec2('0x3e')](_0x23bdbf);const _0x374c77={'player_id':this[a23_0x5ec2('0x2d')],'device_uuid':this['config']['deviceUuid'],'network_info':JSON[a23_0x5ec2('0x3e')](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this[a23_0x5ec2('0x2c')]),'playlist':_0x3d4711,'playing_item':'','status':0x0};this[a23_0x5ec2('0x27')][a23_0x5ec2('0x3f')](a23_0x5ec2('0x40'),_0x374c77,![])[a23_0x5ec2('0x3')](function(_0x11fddf){console['log'](a23_0x5ec2('0x41')+Date());})['catch'](function(_0x489502){});console[a23_0x5ec2('0x42')](_0x374c77);}[a23_0x5ec2('0x3b')](this));const _0x1dbee3=this[a23_0x5ec2('0x2a')][a23_0x5ec2('0x43')];if(!_0x1dbee3||_0x1dbee3==''){this[a23_0x5ec2('0x2a')][a23_0x5ec2('0x43')]=uuidv4();this[a23_0x5ec2('0x2a')]={'deviceUuid':this['config']['deviceUuid'],'playerId':this[a23_0x5ec2('0x2a')][a23_0x5ec2('0x2d')]};fs[a23_0x5ec2('0x44')](configFile,JSON[a23_0x5ec2('0x3e')](this[a23_0x5ec2('0x2a')]));}}['getStatus'](){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x3a'));this[a23_0x5ec2('0x34')][a23_0x5ec2('0x45')]['getCurrentlyPlayingVideo']()[a23_0x5ec2('0x3')](function(_0xf2693f){const _0x3cbc0a=_0xf2693f[a23_0x5ec2('0x46')][a23_0x5ec2('0x47')];this['reportStatus'](_0x3cbc0a);}[a23_0x5ec2('0x3b')](this))[a23_0x5ec2('0x48')](function(_0x39af1e){console[a23_0x5ec2('0x42')](_0x39af1e);this[a23_0x5ec2('0x49')](JSON[a23_0x5ec2('0x3e')](_0x39af1e));}[a23_0x5ec2('0x3b')](this));}[a23_0x5ec2('0x49')](_0x2378df){console[a23_0x5ec2('0x42')]('playingItem:\x20'+_0x2378df);const _0x34ff45={'player_id':this[a23_0x5ec2('0x2d')],'device_uuid':this[a23_0x5ec2('0x2a')]['deviceUuid'],'status':_0x2378df!=''&&_0x2378df!=null?0x1:0x0,'playing_item':_0x2378df};this[a23_0x5ec2('0x27')][a23_0x5ec2('0x3f')]('http://restapi.lulo.run/player_devices/report_status',_0x34ff45,![])['then'](function(_0x53710e){console['log'](a23_0x5ec2('0x4a')+JSON['stringify'](_0x53710e));})[a23_0x5ec2('0x48')](function(_0x59d562){});}[a23_0x5ec2('0x37')](){fsExtra[a23_0x5ec2('0x4b')](this[a23_0x5ec2('0x16')],_0x1af779=>{});fsExtra[a23_0x5ec2('0x4b')](this[a23_0x5ec2('0x4c')],_0x1320a0=>{});fsExtra[a23_0x5ec2('0x4b')](this['filesFolder'],_0x10e4ee=>{});}[a23_0x5ec2('0x38')](){const _0x2720c3=format(this['playListServiceURL'],this['playerId']);console['log'](_0x2720c3);request({'url':_0x2720c3,'json':!![]},function(_0x469035,_0x1b41d0,_0x3bd5dc){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x4d'));this['newPlayList']=_0x3bd5dc;this[a23_0x5ec2('0x4e')]=this[a23_0x5ec2('0x4f')]();fsExtra[a23_0x5ec2('0x50')](this[a23_0x5ec2('0x4c')]);this[a23_0x5ec2('0x1f')]=[];this[a23_0x5ec2('0x51')]=[];this[a23_0x5ec2('0x1e')]=0x0;for(const _0x118c09 in _0x3bd5dc){this[a23_0x5ec2('0x1f')][a23_0x5ec2('0x52')](_0x3bd5dc[_0x118c09]);}console[a23_0x5ec2('0x42')](a23_0x5ec2('0x53')+this[a23_0x5ec2('0x1f')][a23_0x5ec2('0x54')]);if(this[a23_0x5ec2('0x1f')][a23_0x5ec2('0x54')]>0x0){this[a23_0x5ec2('0x55')]();}}['bind'](this));}['reloadMediaList'](){this['forceReload']=!![];if(fsExtra[a23_0x5ec2('0x56')](this[a23_0x5ec2('0x4c')])){fsExtra[a23_0x5ec2('0x50')](this[a23_0x5ec2('0x4c')]);}if(fsExtra['existsSync'](this[a23_0x5ec2('0x1c')])){fsExtra[a23_0x5ec2('0x50')](this[a23_0x5ec2('0x1c')]);}if(!fsExtra[a23_0x5ec2('0x56')](this[a23_0x5ec2('0x19')])){fsExtra['removeSync'](this[a23_0x5ec2('0x19')]);}if(!fsExtra[a23_0x5ec2('0x56')](this[a23_0x5ec2('0x1b')])){fsExtra['removeSync'](this[a23_0x5ec2('0x1b')]);}this['loadMediaList']();}[a23_0x5ec2('0x4f')](){const _0x26e79b=JSON[a23_0x5ec2('0x3e')](this['newPlayList']);try{if(!fsExtra[a23_0x5ec2('0x56')](this['playListFile'])){return!![];}else{const _0x179997=fsExtra[a23_0x5ec2('0x2b')](this[a23_0x5ec2('0x19')])[a23_0x5ec2('0x57')]();if(_0x179997!=_0x26e79b){return!![];}}}catch(_0x472d96){console['log'](_0x472d96);}return![];}[a23_0x5ec2('0x55')](){console['log'](a23_0x5ec2('0x58')+this[a23_0x5ec2('0x1e')]+'\x20of\x20'+this[a23_0x5ec2('0x1f')]['length']);if(this[a23_0x5ec2('0x1e')]>=this[a23_0x5ec2('0x1f')][a23_0x5ec2('0x54')]){this[a23_0x5ec2('0x59')]();return;}const _0x1ff342=String(this[a23_0x5ec2('0x1f')][this[a23_0x5ec2('0x1e')]][a23_0x5ec2('0x5a')]);const _0x39e0b6=this['downloadFiles'][this[a23_0x5ec2('0x1e')]]['media_type'];let _0x9c407e=_0x1ff342[a23_0x5ec2('0x5b')](_0x1ff342[a23_0x5ec2('0x5c')]('/')+0x1);const _0x4bad4f=_0x9c407e['split']('.')[a23_0x5ec2('0x5d')](0x0,-0x1)[a23_0x5ec2('0x5e')]('.');let _0x108df9=this[a23_0x5ec2('0x2e')]+_0x1ff342;const _0x4a61e7=_0x108df9[a23_0x5ec2('0x5f')]('.')[a23_0x5ec2('0x5d')](0x0,-0x1)['join']('.');if(_0x39e0b6==a23_0x5ec2('0x60')){_0x9c407e=_0x9c407e+a23_0x5ec2('0x61');}else if(_0x39e0b6=='image'){_0x9c407e=_0x4bad4f+a23_0x5ec2('0x61');_0x108df9=_0x4a61e7+'.mp4';}console['log']('**********+');console[a23_0x5ec2('0x42')](_0x1ff342);console[a23_0x5ec2('0x42')](_0x39e0b6);console[a23_0x5ec2('0x42')](_0x9c407e);console[a23_0x5ec2('0x42')](_0x108df9);console['log'](_0x4bad4f);console[a23_0x5ec2('0x42')](_0x4a61e7);console['log'](a23_0x5ec2('0x62'));if(fsExtra[a23_0x5ec2('0x56')](this[a23_0x5ec2('0x4c')]+_0x9c407e)){this[a23_0x5ec2('0x63')](this[a23_0x5ec2('0x4c')]+_0x9c407e)[a23_0x5ec2('0x3')](function(_0x485e67){if(_0x485e67){this['currentFile']++;}else{this[a23_0x5ec2('0x4e')]=!![];}this[a23_0x5ec2('0x55')]();}[a23_0x5ec2('0x3b')](this));}else if(fsExtra[a23_0x5ec2('0x56')](this[a23_0x5ec2('0x1c')]+_0x9c407e)){this['checkVideo'](this[a23_0x5ec2('0x1c')]+_0x9c407e)[a23_0x5ec2('0x3')](function(_0x28aaf0){if(_0x28aaf0){fsExtra['copySync'](this[a23_0x5ec2('0x1c')]+_0x9c407e,this[a23_0x5ec2('0x4c')]+_0x9c407e);this[a23_0x5ec2('0x1e')]++;}else{this[a23_0x5ec2('0x4e')]=!![];}this[a23_0x5ec2('0x55')]();}[a23_0x5ec2('0x3b')](this));}else{console[a23_0x5ec2('0x42')]('Downloading:\x20'+_0x108df9);this['playlistChanged']=!![];if(_0x39e0b6==a23_0x5ec2('0x60')){this['downloadYouTube'](_0x1ff342);}else{this[a23_0x5ec2('0x64')](_0x108df9,_0x9c407e,_0x39e0b6);}}}[a23_0x5ec2('0x63')](_0x1ea51b){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x65')+_0x1ea51b);const _0x3859e2=yield mediainfo(_0x1ea51b)[a23_0x5ec2('0x48')](_0x358c8b=>{console[a23_0x5ec2('0x42')](_0x358c8b);fsExtra['removeSync'](_0x1ea51b);return![];});const _0x30cde9=_0x3859e2[a23_0x5ec2('0x66')]['track'][a23_0x5ec2('0x54')]>0x1&&_0x3859e2[a23_0x5ec2('0x66')][a23_0x5ec2('0x67')][0x1][a23_0x5ec2('0x68')]==a23_0x5ec2('0x69');if(!_0x30cde9){fsExtra[a23_0x5ec2('0x6a')](_0x1ea51b);}console['log'](a23_0x5ec2('0x6b')+_0x30cde9);return _0x30cde9;});}['downloader'](_0x1cc86b,_0x59957d,_0x3c8430){const _0x4626bc=new Downloader();console['log'](_0x1cc86b);console[a23_0x5ec2('0x42')](_0x59957d);console[a23_0x5ec2('0x42')](_0x3c8430);const _0x29b99c=_0x4626bc[a23_0x5ec2('0x55')](_0x1cc86b,this[a23_0x5ec2('0x4c')]+_0x59957d);urlExists(_0x1cc86b,function(_0x31cd4e,_0xb8e7f1){if(_0xb8e7f1){if(this[a23_0x5ec2('0x51')]['includes'](this['currentFile'])){const _0x513dd9=this[a23_0x5ec2('0x51')]['indexOf'](this[a23_0x5ec2('0x1e')]);if(_0x513dd9>-0x1){this[a23_0x5ec2('0x51')]['splice'](_0x513dd9,0x1);}}console['log'](a23_0x5ec2('0x6c')+_0x1cc86b);_0x29b99c[a23_0x5ec2('0x6d')]();}else{if(!this[a23_0x5ec2('0x51')][a23_0x5ec2('0x6e')](this[a23_0x5ec2('0x1e')])){this['failDownloadFiles'][a23_0x5ec2('0x52')](this['currentFile']);}console[a23_0x5ec2('0x42')](a23_0x5ec2('0x6f')+_0x1cc86b);this[a23_0x5ec2('0x1e')]++;this['download']();}}[a23_0x5ec2('0x3b')](this));_0x29b99c['on'](a23_0x5ec2('0x6d'),function(_0x29b99c){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x70')+_0x1cc86b);});_0x29b99c['on'](a23_0x5ec2('0x71'),function(_0x29b99c){console[a23_0x5ec2('0x42')]('error:\x20');this[a23_0x5ec2('0x55')]();}['bind'](this));_0x29b99c['on'](a23_0x5ec2('0x72'),function(_0x29b99c){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x72'));console[a23_0x5ec2('0x42')](a23_0x5ec2('0x73')+_0x59957d);console[a23_0x5ec2('0x42')](a23_0x5ec2('0x74')+_0x3c8430);this[a23_0x5ec2('0x63')](this['tempFolder']+_0x59957d)['then'](function(_0x349bf9){if(_0x349bf9){this['currentFile']++;}this[a23_0x5ec2('0x55')]();}[a23_0x5ec2('0x3b')](this));}[a23_0x5ec2('0x3b')](this));_0x29b99c['on'](a23_0x5ec2('0x75'),function(_0x29b99c){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x75'));});_0x29b99c['on'](a23_0x5ec2('0x76'),function(_0x29b99c){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x76'));});_0x29b99c['on'](a23_0x5ec2('0x77'),function(_0x29b99c){console['log'](a23_0x5ec2('0x77'));});}[a23_0x5ec2('0x78')](_0x11155c,_0x384697,_0x10039e,_0x34948c){console['log'](a23_0x5ec2('0x78'));console[a23_0x5ec2('0x42')](_0x11155c);const _0x34e103=!![];let _0x19ea43=0x0;const _0x2d54ba='';console[a23_0x5ec2('0x42')]('Attempting\x20to\x20download\x20'+_0x11155c+'\x20to\x20'+_0x384697);if(_0x19ea43){if(_0x19ea43>0x5){_0x34948c('Max\x20redirects\x20reached',_0x11155c,_0x10039e,null);return;}}else{_0x19ea43=0x0;}const _0x3842be=this['tempFolder']+_0x384697;let _0x4b1cba;if(_0x34948c===undefined){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x79')+_0x11155c+a23_0x5ec2('0x7a')+_0x3842be);_0x34948c=function(_0x2a2fdb,_0x97d275){console['log']('downloadFile\x20callback\x20result\x20undefined:\x20',_0x2a2fdb,_0x97d275);};}http[a23_0x5ec2('0x7b')][a23_0x5ec2('0x7c')]=0x64;const _0x203931={'host':url[a23_0x5ec2('0x7d')](_0x11155c)['host'],'port':0x50,'path':url[a23_0x5ec2('0x7d')](_0x11155c)[a23_0x5ec2('0x7e')],'agent':![]};const _0x9cdbae=http[a23_0x5ec2('0x7f')](_0x203931,function(_0x43b7e0){let _0x5eb83a=0x0;let _0x5c60cb=0x0;function _0xf2e01c(){if(_0x5eb83a===undefined){console['log'](_0x384697+a23_0x5ec2('0x80')+_0x5c60cb+'/'+'?');}const _0x158185=_0x5c60cb/_0x5eb83a*0x64;console[a23_0x5ec2('0x42')](_0x384697+'\x20Progress:\x20'+_0x158185+'%\x09'+_0x5c60cb+'/'+_0x5eb83a);}console[a23_0x5ec2('0x42')](_0x384697+'\x20'+_0x43b7e0['statusCode']);switch(_0x43b7e0[a23_0x5ec2('0x81')]){case 0xc8:_0x5eb83a=_0x43b7e0[a23_0x5ec2('0x82')]['content-length']||_0x2d54ba;fs['stat'](_0x3842be,function(_0x5f2995,_0x4a9f13){if(!_0x5f2995){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x83')+_0x3842be);if(_0x4a9f13[a23_0x5ec2('0x84')]==_0x5eb83a){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x85')+_0x5eb83a+')');console['log'](a23_0x5ec2('0x86'));}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x4a9f13[a23_0x5ec2('0x84')]+a23_0x5ec2('0x87')+_0x5eb83a+')');}}_0x4b1cba=fs[a23_0x5ec2('0x88')](_0x3842be);_0x43b7e0['pipe'](_0x4b1cba);_0x43b7e0['on'](a23_0x5ec2('0x89'),function(_0x51a2ba){_0x5c60cb+=_0x51a2ba[a23_0x5ec2('0x54')];_0xf2e01c();});_0x9cdbae['on'](a23_0x5ec2('0x71'),function(_0x5f2995){console['log'](a23_0x5ec2('0x8a'));console[a23_0x5ec2('0x42')](_0x5f2995);});_0x4b1cba['on'](a23_0x5ec2('0x8b'),function(){console[a23_0x5ec2('0x42')]('Downloaded\x20'+_0x11155c+a23_0x5ec2('0x7a')+_0x384697);_0x34948c(null,_0x384697,_0x10039e,_0x384697);}[a23_0x5ec2('0x3b')](this));});break;case 0x12e:const _0x4dd810=_0x43b7e0[a23_0x5ec2('0x82')]['location'];console[a23_0x5ec2('0x42')](a23_0x5ec2('0x8c')+_0x11155c+a23_0x5ec2('0x7a')+_0x4dd810);if(_0x19ea43<0x5){this['downloadHTTPFile'](_0x4dd810,_0x384697,_0x34948c,_0x19ea43++);}else{console[a23_0x5ec2('0x71')](a23_0x5ec2('0x8d')+_0x11155c+'.');_0x34948c('302',null,null,null);}return;case 0x194:console[a23_0x5ec2('0x42')](a23_0x5ec2('0x8e')+_0x11155c);default:console[a23_0x5ec2('0x42')](a23_0x5ec2('0x8f')+_0x11155c+a23_0x5ec2('0x90')+_0x43b7e0[a23_0x5ec2('0x81')]);_0x9cdbae[a23_0x5ec2('0x91')]();_0x34948c(_0x43b7e0[a23_0x5ec2('0x81')],null,null,null);return;}})['on'](a23_0x5ec2('0x71'),function(_0x5b6ccb){console[a23_0x5ec2('0x42')](a23_0x5ec2('0x92')+_0x11155c+'\x20'+_0x5b6ccb['message']);_0x34948c(_0x5b6ccb,null,null,null);});}[a23_0x5ec2('0x93')](_0x5227f4,_0x4fbefb,_0x5297cf,_0xc2e51){console['log']('downloadHTTPFileCallback');console[a23_0x5ec2('0x42')](_0x5227f4);console[a23_0x5ec2('0x42')](_0x4fbefb);console['log'](_0x5297cf);console['log'](_0xc2e51);if(_0x5297cf==a23_0x5ec2('0x94')){const _0xc0da40=this[a23_0x5ec2('0x1f')][this['currentFile']][a23_0x5ec2('0x95')]!=null?this['downloadFiles'][this['currentFile']][a23_0x5ec2('0x95')]:0x1e;this[a23_0x5ec2('0x96')](_0xc2e51,_0xc0da40);}else if(_0x5297cf==a23_0x5ec2('0x97')){if(_0x5227f4==null&&_0x4fbefb!=''){this['currentFile']++;}this[a23_0x5ec2('0x55')]();}console[a23_0x5ec2('0x42')](this[a23_0x5ec2('0x1e')]);}['downloadRequestFile'](_0x2b4e65,_0x9207c3,_0x1500cf){progress(request(_0x2b4e65),{})['on'](a23_0x5ec2('0x98'),function(_0x5a0ed1){console[a23_0x5ec2('0x42')](_0x5a0ed1);})['on'](a23_0x5ec2('0x71'),function(_0x71d394){console[a23_0x5ec2('0x42')]('Error\x20downloading\x20file');this['download']();})['on']('end',function(){console['log'](a23_0x5ec2('0x73')+_0x9207c3);console[a23_0x5ec2('0x42')]('mediaType:\x20'+_0x1500cf);if(_0x1500cf=='image'){const _0x1e8d61=this[a23_0x5ec2('0x1f')][this[a23_0x5ec2('0x1e')]]['duration']!=null?this[a23_0x5ec2('0x1f')][this[a23_0x5ec2('0x1e')]]['duration']:0x1e;this[a23_0x5ec2('0x96')](_0x9207c3,_0x1e8d61);}else if(_0x1500cf==a23_0x5ec2('0x97')){this[a23_0x5ec2('0x1e')]++;this[a23_0x5ec2('0x55')]();}}[a23_0x5ec2('0x3b')](this))[a23_0x5ec2('0x99')](fs[a23_0x5ec2('0x88')](this[a23_0x5ec2('0x4c')]+_0x9207c3));}[a23_0x5ec2('0x96')](_0x1c645e,_0x46b186=0x1e){const _0x2041c3=this['tempFolder']+_0x1c645e;console['log'](_0x2041c3);console[a23_0x5ec2('0x42')](_0x1c645e);const _0x8fd5fb=_0x1c645e[a23_0x5ec2('0x5f')]('.')[a23_0x5ec2('0x5d')](0x0,-0x1)[a23_0x5ec2('0x5e')]('.');const _0xdf58d8=a23_0x5ec2('0x9a');const _0x5ae184=['-y','-r',a23_0x5ec2('0x9b'),a23_0x5ec2('0x9c'),'1','-pattern_type',a23_0x5ec2('0x9d'),'-i',_0x2041c3,'-t',String(_0x46b186),a23_0x5ec2('0x9e'),'libx264',a23_0x5ec2('0x9f'),'yuv420p','-r','25',a23_0x5ec2('0xa0'),a23_0x5ec2('0xa1'),this[a23_0x5ec2('0x4c')]+_0x8fd5fb+a23_0x5ec2('0x61')];const _0x595620=spawn(_0xdf58d8,_0x5ae184);_0x595620['stdout']['on'](a23_0x5ec2('0x89'),function(_0x59c90c){console['log'](a23_0x5ec2('0xa2')+_0x2041c3);});_0x595620['stderr']['on'](a23_0x5ec2('0x89'),function(_0x70347f){console[a23_0x5ec2('0x42')](a23_0x5ec2('0xa3')+_0x70347f);}[a23_0x5ec2('0x3b')](this));_0x595620['on'](a23_0x5ec2('0xa4'),function(){console[a23_0x5ec2('0x42')](a23_0x5ec2('0xa5'));this[a23_0x5ec2('0x1e')]++;this[a23_0x5ec2('0x55')]();}['bind'](this));}[a23_0x5ec2('0xa6')](_0x48699f){const _0x1e0dd5=this[a23_0x5ec2('0x4c')]+'/'+_0x48699f+a23_0x5ec2('0x61');const _0x543739=youtubedl(a23_0x5ec2('0xa7')+_0x48699f,['--format=18'],{'cwd':__dirname});_0x543739['on']('info',function(_0x3f64df){console[a23_0x5ec2('0x42')]('Download\x20started');console[a23_0x5ec2('0x42')]('filename:\x20'+_0x3f64df[a23_0x5ec2('0xa8')]);console[a23_0x5ec2('0x42')]('size:\x20'+_0x3f64df['size']);});_0x543739['on'](a23_0x5ec2('0xa9'),function complete(_0x4687d4){'use strict';console[a23_0x5ec2('0x42')](a23_0x5ec2('0xaa')+_0x4687d4[a23_0x5ec2('0xa8')]+a23_0x5ec2('0xab'));});_0x543739['on'](a23_0x5ec2('0x72'),function(){console[a23_0x5ec2('0x42')]('finished\x20youtube\x20downloading!');this[a23_0x5ec2('0x63')](_0x1e0dd5)[a23_0x5ec2('0x3')](function(_0x550db1){if(_0x550db1){this[a23_0x5ec2('0x1e')]++;}this[a23_0x5ec2('0x55')]();}[a23_0x5ec2('0x3b')](this));}[a23_0x5ec2('0x3b')](this));_0x543739[a23_0x5ec2('0x99')](fs['createWriteStream'](_0x1e0dd5));}[a23_0x5ec2('0x59')](){console[a23_0x5ec2('0x42')](a23_0x5ec2('0xac'));if(this[a23_0x5ec2('0x4e')]){if(this[a23_0x5ec2('0x51')][a23_0x5ec2('0x54')]==0x0){console['log'](a23_0x5ec2('0xad')+this[a23_0x5ec2('0x19')]);fs['writeFileSync'](this['playListFile'],JSON['stringify'](this[a23_0x5ec2('0x20')]));let _0x5e31b4='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a23_0x5ec2('0xae')+'\x0d\x0a';for(const _0xf1c6 in this[a23_0x5ec2('0x1f')]){const _0x1b53bf=this[a23_0x5ec2('0x1f')][_0xf1c6]['path'];const _0x5a4b5e=this[a23_0x5ec2('0x1f')][_0xf1c6][a23_0x5ec2('0xaf')];const _0x42e2b4=_0x1b53bf[a23_0x5ec2('0x5b')](_0x1b53bf[a23_0x5ec2('0x5c')]('/')+0x1);let _0x19a1da=_0x42e2b4[a23_0x5ec2('0x5f')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x5a4b5e==a23_0x5ec2('0x60')){_0x19a1da=_0x1b53bf;}_0x5e31b4+=a23_0x5ec2('0xb0')+_0x19a1da+a23_0x5ec2('0x61')+'\x0d\x0a';console[a23_0x5ec2('0x42')](a23_0x5ec2('0xb1')+_0x5e31b4);}console[a23_0x5ec2('0x42')]('m3uContent:\x20'+_0x5e31b4);fsExtra[a23_0x5ec2('0x50')](this[a23_0x5ec2('0x1c')]);console[a23_0x5ec2('0x42')]('copySync:\x20'+this[a23_0x5ec2('0x4c')]);fsExtra[a23_0x5ec2('0xb2')](this[a23_0x5ec2('0x4c')],this[a23_0x5ec2('0x1c')]);console[a23_0x5ec2('0x42')](a23_0x5ec2('0xb3')+this['m3uFile']);fsExtra[a23_0x5ec2('0x44')](this[a23_0x5ec2('0x1b')],_0x5e31b4);console['log'](a23_0x5ec2('0xb4')+this[a23_0x5ec2('0x4c')]);fsExtra[a23_0x5ec2('0x50')](this[a23_0x5ec2('0x4c')]);console[a23_0x5ec2('0x42')](a23_0x5ec2('0xb5'));this[a23_0x5ec2('0xb6')]();}else{console[a23_0x5ec2('0x42')](a23_0x5ec2('0xb7'));this['currentFile']=0x0;setTimeout(function(){this['download']();}[a23_0x5ec2('0x3b')](this),0x1388);}}else{console['log'](a23_0x5ec2('0xb8'));}}[a23_0x5ec2('0xb9')](){this['jsonrpcClient'](a23_0x5ec2('0xba'),{'playlistid':0x1},function(_0x42357d){console[a23_0x5ec2('0x42')]('Playlist.Cleared');console['log'](_0x42357d);this[a23_0x5ec2('0xbb')](a23_0x5ec2('0xbc'),{'item':{'file':a23_0x5ec2('0xbd')},'playlistid':0x1},function(_0x42357d){console[a23_0x5ec2('0x42')]('Playlist.Added');console['log'](_0x42357d);this[a23_0x5ec2('0xbb')](a23_0x5ec2('0xbe'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x42357d){console[a23_0x5ec2('0x42')]('Playlist.Opened');console['log'](_0x42357d);this[a23_0x5ec2('0xbf')](a23_0x5ec2('0xc0'));}[a23_0x5ec2('0x3b')](this));}[a23_0x5ec2('0x3b')](this));}[a23_0x5ec2('0x3b')](this));}['reboot'](){console[a23_0x5ec2('0x42')]('Rebooting');exec(a23_0x5ec2('0xc1'),function(_0x2d5715){console[a23_0x5ec2('0x42')](_0x2d5715);});}[a23_0x5ec2('0x39')](){const _0x2c89e1=format(this['playerServiceURL'],this[a23_0x5ec2('0x2d')]);console['log'](_0x2c89e1);request({'url':_0x2c89e1,'json':!![]},function(_0x40c765,_0x4b312c,_0x39bd80){if(_0x39bd80[a23_0x5ec2('0x54')]>0x0){const _0x4fb649=_0x39bd80[0x0];const _0x3e8082=_0x4fb649[a23_0x5ec2('0xc2')];const _0x523fdd=_0x4fb649[a23_0x5ec2('0xc3')]==0x1;this[a23_0x5ec2('0xc4')](_0x3e8082);this[a23_0x5ec2('0xc5')](_0x523fdd);this[a23_0x5ec2('0x36')]();}console['log'](_0x39bd80);}[a23_0x5ec2('0x3b')](this));}[a23_0x5ec2('0xc6')](){this['kodiCommandClient'](a23_0x5ec2('0xc7'));}[a23_0x5ec2('0xc8')](){this['kodiCommandClient'](a23_0x5ec2('0xc9'));}[a23_0x5ec2('0xc4')](_0x1c1318){const _0x5e8eae=_0x1c1318!=null&&_0x1c1318!='';const _0x161251=a23_0x5ec2('0xca');const _0x34cd39=fsExtra[a23_0x5ec2('0x2b')](_0x161251);console[a23_0x5ec2('0x42')](a23_0x5ec2('0xcb')+_0x34cd39);const _0x572b7a=require('xml2js');const _0x4bf0e7=_0x572b7a[a23_0x5ec2('0xcc')];_0x4bf0e7(_0x34cd39,function(_0x31c393,_0x4354f6){console[a23_0x5ec2('0x42')]('err:\x20%j',_0x31c393);console[a23_0x5ec2('0x42')](a23_0x5ec2('0xcd'),_0x4354f6);if(!_0x1c1318||_0x1c1318==null||_0x1c1318==''){_0x1c1318=a23_0x5ec2('0xce');}_0x4354f6[a23_0x5ec2('0xcf')]['set'][0x0][a23_0x5ec2('0xd0')][0x0]['_']=_0x1c1318;const _0x553519=new _0x572b7a[(a23_0x5ec2('0xd1'))]();const _0x1a4aa8=_0x553519[a23_0x5ec2('0xd2')](_0x4354f6);console[a23_0x5ec2('0x42')](a23_0x5ec2('0xd3'),_0x1a4aa8);fsExtra[a23_0x5ec2('0x44')](_0x161251,_0x1a4aa8);});this[a23_0x5ec2('0xbf')](a23_0x5ec2('0xd4'));this[a23_0x5ec2('0xbb')](a23_0x5ec2('0xd5'),{'setting':'lookandfeel.enablerssfeeds','value':_0x5e8eae},function(_0x154d54){console['log'](a23_0x5ec2('0xd6'));console['log'](_0x154d54);}['bind'](this));}[a23_0x5ec2('0xc5')](_0x20b310){this['jsonrpcClient'](a23_0x5ec2('0xd5'),{'setting':'videoplayer.usedisplayasclock','value':_0x20b310},function(_0x2364f8){console[a23_0x5ec2('0x42')](a23_0x5ec2('0xd7'));console['log'](_0x2364f8);}[a23_0x5ec2('0x3b')](this));}['kodiCommandClient'](_0x196a28){exec(a23_0x5ec2('0xd8')+_0x196a28+'\x22',function(_0x1ce5bb){console['log'](_0x1ce5bb);});}[a23_0x5ec2('0xbb')](_0x373bf0,_0xb56bff,_0x7e7fc6){const _0x3e7171={'jsonrpc':a23_0x5ec2('0xd9'),'method':_0x373bf0,'params':_0xb56bff,'id':0x1};this[a23_0x5ec2('0x27')][a23_0x5ec2('0x3f')](this[a23_0x5ec2('0x21')]+'/jsonrpc',_0x3e7171,![],{'user':this[a23_0x5ec2('0x22')],'pass':this[a23_0x5ec2('0x24')]})[a23_0x5ec2('0x3')](function(_0x23022b){_0x7e7fc6(_0x23022b);})['catch'](function(_0x2498d3){});}}exports[a23_0x5ec2('0xda')]=SyncPlaylistsService;