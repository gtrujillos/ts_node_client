var a22_0xd6ad=['getItems','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','deviceUuid','writeFileSync','player','item','label','reportStatus','catch','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','hasPlayListChanged','downloadFiles','failDownloadFiles','Total:\x20','length','download','emptyDirSync','existsSync','m3uFile','removeSync','reboot','System','Shutdown','newPlayList','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','split','slice','join','youtube_single','image','.mp4','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','track','media','@type','Video','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','pipe','err:\x20','location','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','video','downloadRequestFile','progress','createImageVideo','createWriteStream','ffmpeg','1/2','-loop','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','lastIndexOf','/home/osmc/luloclient/media/files/','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','next','throw','done','value','then','defineProperty','__esModule','../infrastructure/HttpClientService','url','fs-extra','request','child_process','is-image','uuid/v4','config.json','context.json','url-exists','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','playListFile','playlist.txt','lulo_playlist.m3u','currentFile','playlistChanged','httpClientService','HttpClientService','init','parse','context','readFileSync','playerId','config','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','http://localhost','lulo','.lulo123.','checkDependencies','loadMediaList','getStatus','bind','playlist'];(function(_0x1ea562,_0x2108fe){var _0x452df2=function(_0x1435ff){while(--_0x1435ff){_0x1ea562['push'](_0x1ea562['shift']());}};_0x452df2(++_0x2108fe);}(a22_0xd6ad,0x148));var a22_0x5859=function(_0x4b4f87,_0x39c793){_0x4b4f87=_0x4b4f87-0x0;var _0xd1487d=a22_0xd6ad[_0x4b4f87];return _0xd1487d;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x24daff,_0x2606f7,_0x3cb349,_0x407727){function _0x4dbda7(_0x15b876){return _0x15b876 instanceof _0x3cb349?_0x15b876:new _0x3cb349(function(_0x1fc94f){_0x1fc94f(_0x15b876);});}return new(_0x3cb349||(_0x3cb349=Promise))(function(_0x288678,_0x5c05ce){function _0x19e231(_0x58e9d7){try{_0x10cb0d(_0x407727[a22_0x5859('0x0')](_0x58e9d7));}catch(_0x220698){_0x5c05ce(_0x220698);}}function _0x10a1b5(_0x3337b8){try{_0x10cb0d(_0x407727[a22_0x5859('0x1')](_0x3337b8));}catch(_0x36bbc0){_0x5c05ce(_0x36bbc0);}}function _0x10cb0d(_0x4bc7b3){_0x4bc7b3[a22_0x5859('0x2')]?_0x288678(_0x4bc7b3['value']):_0x4dbda7(_0x4bc7b3[a22_0x5859('0x3')])[a22_0x5859('0x4')](_0x19e231,_0x10a1b5);}_0x10cb0d((_0x407727=_0x407727['apply'](_0x24daff,_0x2606f7||[]))[a22_0x5859('0x0')]());});};Object[a22_0x5859('0x5')](exports,a22_0x5859('0x6'),{'value':!![]});const HttpClientService_1=require(a22_0x5859('0x7'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a22_0x5859('0x8'));const http=require('http');const fsExtra=require(a22_0x5859('0x9'));const request=require(a22_0x5859('0xa'));const progress=require('request-progress');const spawn=require(a22_0x5859('0xb'))['spawn'];const isImage=require(a22_0x5859('0xc'));const format=require('string-template');const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x5859('0xd'));const configFile=a22_0x5859('0xe');const contextFile=a22_0x5859('0xf');const urlExists=require(a22_0x5859('0x10'));const kodi_rpc=require('node-kodi');const Downloader=require(a22_0x5859('0x11'));class SyncPlaylistsService{constructor(){this[a22_0x5859('0x12')]=a22_0x5859('0x13');this[a22_0x5859('0x14')]=this['mediaFolder']+a22_0x5859('0x15');this[a22_0x5859('0x16')]=this[a22_0x5859('0x12')]+'files/';this[a22_0x5859('0x17')]=this[a22_0x5859('0x12')]+a22_0x5859('0x18');this['m3uFile']=this['filesFolder']+a22_0x5859('0x19');this[a22_0x5859('0x1a')]=0x0;this[a22_0x5859('0x1b')]=![];this['downloadFiles']=[];this['failDownloadFiles']=[];this['newPlayList']={};this[a22_0x5859('0x1c')]=new HttpClientService_1[(a22_0x5859('0x1d'))]();}[a22_0x5859('0x1e')](){this['config']=JSON[a22_0x5859('0x1f')](fs['readFileSync'](configFile));this[a22_0x5859('0x20')]=JSON[a22_0x5859('0x1f')](fs[a22_0x5859('0x21')](contextFile));this[a22_0x5859('0x22')]=this[a22_0x5859('0x23')][a22_0x5859('0x22')];this[a22_0x5859('0x24')]=process['env'][a22_0x5859('0x25')]+a22_0x5859('0x26');this[a22_0x5859('0x27')]=this[a22_0x5859('0x24')]+a22_0x5859('0x28');this[a22_0x5859('0x29')]=new kodi_rpc({'url':a22_0x5859('0x2a'),'user':a22_0x5859('0x2b'),'password':a22_0x5859('0x2c')});this[a22_0x5859('0x2d')]();this['registerClient']();this['checkFolders']();this[a22_0x5859('0x2e')]();setInterval(function(){this[a22_0x5859('0x2f')]();}['bind'](this),0x2710);setInterval(function(){this['registerClient']();}[a22_0x5859('0x30')](this),0x493e0);}['checkDependencies'](){}['registerClient'](){this[a22_0x5859('0x29')][a22_0x5859('0x31')][a22_0x5859('0x32')](0x1)[a22_0x5859('0x4')](function(_0x587dae){const _0x11391d=JSON[a22_0x5859('0x33')](_0x587dae);const _0x4767f7={'player_id':this[a22_0x5859('0x22')],'device_uuid':this[a22_0x5859('0x23')]['deviceUuid'],'network_info':JSON[a22_0x5859('0x33')](os[a22_0x5859('0x34')]()),'firmware_info':JSON[a22_0x5859('0x33')](this[a22_0x5859('0x20')]),'playlist':_0x11391d,'playing_item':'','status':0x0};this[a22_0x5859('0x1c')][a22_0x5859('0x35')](a22_0x5859('0x36'),_0x4767f7,![])[a22_0x5859('0x4')](function(_0x496401){console[a22_0x5859('0x37')](a22_0x5859('0x38')+Date());})['catch'](function(_0x3e9be7){});console['log'](_0x4767f7);}[a22_0x5859('0x30')](this));const _0x3c7a66=this[a22_0x5859('0x23')]['deviceUuid'];if(!_0x3c7a66||_0x3c7a66==''){this[a22_0x5859('0x23')][a22_0x5859('0x39')]=uuidv4();this['config']={'deviceUuid':this['config']['deviceUuid'],'playerId':this[a22_0x5859('0x23')][a22_0x5859('0x22')]};fs[a22_0x5859('0x3a')](configFile,JSON[a22_0x5859('0x33')](this[a22_0x5859('0x23')]));}}[a22_0x5859('0x2f')](){console[a22_0x5859('0x37')]('getStatus');this[a22_0x5859('0x29')][a22_0x5859('0x3b')]['getCurrentlyPlayingVideo']()['then'](function(_0x45dcf0){const _0x1527de=_0x45dcf0[a22_0x5859('0x3c')][a22_0x5859('0x3d')];this[a22_0x5859('0x3e')](_0x1527de);}['bind'](this))[a22_0x5859('0x3f')](function(_0x59e215){console[a22_0x5859('0x37')](_0x59e215);this[a22_0x5859('0x3e')](_0x59e215);}[a22_0x5859('0x30')](this));}[a22_0x5859('0x3e')](_0x1e4eaf){console['log']('playingItem:\x20'+_0x1e4eaf);const _0x28c8b0={'player_id':this[a22_0x5859('0x22')],'device_uuid':this['config'][a22_0x5859('0x39')],'status':_0x1e4eaf!=''&&_0x1e4eaf!=null?0x1:0x0,'playing_item':_0x1e4eaf};this[a22_0x5859('0x1c')][a22_0x5859('0x35')](a22_0x5859('0x40'),_0x28c8b0,![])[a22_0x5859('0x4')](function(_0x1225ce){console[a22_0x5859('0x37')](a22_0x5859('0x41')+Date());})[a22_0x5859('0x3f')](function(_0x597da6){});}[a22_0x5859('0x42')](){fsExtra[a22_0x5859('0x43')](this[a22_0x5859('0x12')],_0x29b7ce=>{});fsExtra[a22_0x5859('0x43')](this['tempFolder'],_0x4e5293=>{});fsExtra[a22_0x5859('0x43')](this[a22_0x5859('0x16')],_0x183327=>{});}[a22_0x5859('0x2e')](){const _0x37c694=format(this[a22_0x5859('0x27')],this['playerId']);console[a22_0x5859('0x37')](_0x37c694);request({'url':_0x37c694,'json':!![]},function(_0x106ed1,_0x5e2dd8,_0x3b4e15){console[a22_0x5859('0x37')]('loadMediaList:\x20');console[a22_0x5859('0x37')](_0x3b4e15);this['newPlayList']=_0x3b4e15;this['playlistChanged']=this[a22_0x5859('0x44')]();fsExtra['emptyDirSync'](this[a22_0x5859('0x14')]);this[a22_0x5859('0x45')]=[];this[a22_0x5859('0x46')]=[];this[a22_0x5859('0x1a')]=0x0;for(const _0x980056 in _0x3b4e15){this['downloadFiles']['push'](_0x3b4e15[_0x980056]);}console[a22_0x5859('0x37')](a22_0x5859('0x47')+this[a22_0x5859('0x45')][a22_0x5859('0x48')]);if(this[a22_0x5859('0x45')][a22_0x5859('0x48')]>0x0){this[a22_0x5859('0x49')]();}}[a22_0x5859('0x30')](this));}['reloadMediaList'](){if(fsExtra['existsSync'](this[a22_0x5859('0x14')])){fsExtra[a22_0x5859('0x4a')](this[a22_0x5859('0x14')]);}if(fsExtra[a22_0x5859('0x4b')](this[a22_0x5859('0x17')])){fsExtra[a22_0x5859('0x4a')](this['playListFile']);}if(!fsExtra[a22_0x5859('0x4b')](this[a22_0x5859('0x17')])){fsExtra['removeSync'](this[a22_0x5859('0x17')]);}if(!fsExtra[a22_0x5859('0x4b')](this[a22_0x5859('0x4c')])){fsExtra[a22_0x5859('0x4d')](this['m3uFile']);}this[a22_0x5859('0x2e')]();}[a22_0x5859('0x4e')](){this[a22_0x5859('0x29')][a22_0x5859('0x4f')][a22_0x5859('0x50')]();}['hasPlayListChanged'](){const _0x6527f1=JSON[a22_0x5859('0x33')](this[a22_0x5859('0x51')]);try{if(!fsExtra[a22_0x5859('0x4b')](this[a22_0x5859('0x17')])){return!![];}else{const _0x4931f9=fsExtra[a22_0x5859('0x21')](this[a22_0x5859('0x17')])[a22_0x5859('0x52')]();if(_0x4931f9!=_0x6527f1){return!![];}}}catch(_0x309294){console[a22_0x5859('0x37')](_0x309294);}return![];}[a22_0x5859('0x49')](){console['log'](a22_0x5859('0x53')+this[a22_0x5859('0x1a')]+a22_0x5859('0x54')+this[a22_0x5859('0x45')][a22_0x5859('0x48')]);if(this[a22_0x5859('0x1a')]>=this[a22_0x5859('0x45')][a22_0x5859('0x48')]){this[a22_0x5859('0x55')]();return;}const _0x58a0d7=String(this[a22_0x5859('0x45')][this[a22_0x5859('0x1a')]][a22_0x5859('0x56')]);const _0x1c08ac=this[a22_0x5859('0x45')][this[a22_0x5859('0x1a')]][a22_0x5859('0x57')];let _0x20ee94=_0x58a0d7[a22_0x5859('0x58')](_0x58a0d7['lastIndexOf']('/')+0x1);const _0x420eed=_0x20ee94[a22_0x5859('0x59')]('.')[a22_0x5859('0x5a')](0x0,-0x1)[a22_0x5859('0x5b')]('.');let _0x3c213b=this[a22_0x5859('0x24')]+_0x58a0d7;const _0x320109=_0x3c213b[a22_0x5859('0x59')]('.')[a22_0x5859('0x5a')](0x0,-0x1)[a22_0x5859('0x5b')]('.');if(_0x1c08ac==a22_0x5859('0x5c')){_0x20ee94=_0x20ee94+'.mp4';}else if(_0x1c08ac==a22_0x5859('0x5d')){_0x20ee94=_0x420eed+a22_0x5859('0x5e');_0x3c213b=_0x320109+a22_0x5859('0x5e');}console['log']('**********+');console[a22_0x5859('0x37')](_0x58a0d7);console['log'](_0x1c08ac);console[a22_0x5859('0x37')](_0x20ee94);console[a22_0x5859('0x37')](_0x3c213b);console[a22_0x5859('0x37')](_0x420eed);console[a22_0x5859('0x37')](_0x320109);console[a22_0x5859('0x37')]('**********+');if(fsExtra['existsSync'](this[a22_0x5859('0x14')]+_0x20ee94)){this[a22_0x5859('0x5f')](this[a22_0x5859('0x14')]+_0x20ee94)[a22_0x5859('0x4')](function(_0x42f1b7){if(_0x42f1b7){this[a22_0x5859('0x1a')]++;}else{this['playlistChanged']=!![];}this[a22_0x5859('0x49')]();}['bind'](this));}else if(fsExtra[a22_0x5859('0x4b')](this[a22_0x5859('0x16')]+_0x20ee94)){this['checkVideo'](this[a22_0x5859('0x16')]+_0x20ee94)[a22_0x5859('0x4')](function(_0x9c14ba){if(_0x9c14ba){fsExtra[a22_0x5859('0x60')](this[a22_0x5859('0x16')]+_0x20ee94,this['tempFolder']+_0x20ee94);this[a22_0x5859('0x1a')]++;}else{this[a22_0x5859('0x1b')]=!![];}this['download']();}[a22_0x5859('0x30')](this));}else{console[a22_0x5859('0x37')](a22_0x5859('0x61')+_0x3c213b);this['playlistChanged']=!![];if(_0x1c08ac==a22_0x5859('0x5c')){this[a22_0x5859('0x62')](_0x58a0d7);}else{this[a22_0x5859('0x63')](_0x3c213b,_0x20ee94,_0x1c08ac);}}}[a22_0x5859('0x5f')](_0x473778){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x5859('0x37')](a22_0x5859('0x64')+_0x473778);const _0x33b0b4=yield mediainfo(_0x473778)[a22_0x5859('0x3f')](_0x52248e=>{console['log'](_0x52248e);fsExtra['removeSync'](_0x473778);return![];});const _0x1ec82f=_0x33b0b4['media'][a22_0x5859('0x65')]['length']>0x1&&_0x33b0b4[a22_0x5859('0x66')][a22_0x5859('0x65')][0x1][a22_0x5859('0x67')]==a22_0x5859('0x68');if(!_0x1ec82f){fsExtra[a22_0x5859('0x4d')](_0x473778);}console[a22_0x5859('0x37')]('mediainfo\x20check:'+_0x1ec82f);return _0x1ec82f;});}[a22_0x5859('0x63')](_0x1655fe,_0x4f2e81,_0x30243c){const _0x4aa204=new Downloader();console[a22_0x5859('0x37')](_0x1655fe);console[a22_0x5859('0x37')](_0x4f2e81);console['log'](_0x30243c);const _0x33f9fa=_0x4aa204[a22_0x5859('0x49')](_0x1655fe,this[a22_0x5859('0x14')]+_0x4f2e81);urlExists(_0x1655fe,function(_0x4bf8d4,_0x4ab15a){if(_0x4ab15a){if(this[a22_0x5859('0x46')][a22_0x5859('0x69')](this[a22_0x5859('0x1a')])){const _0x4c821e=this['failDownloadFiles'][a22_0x5859('0x6a')](this[a22_0x5859('0x1a')]);if(_0x4c821e>-0x1){this['failDownloadFiles'][a22_0x5859('0x6b')](_0x4c821e,0x1);}}console[a22_0x5859('0x37')](a22_0x5859('0x6c')+_0x1655fe);_0x33f9fa[a22_0x5859('0x6d')]();}else{if(!this['failDownloadFiles'][a22_0x5859('0x69')](this[a22_0x5859('0x1a')])){this['failDownloadFiles']['push'](this[a22_0x5859('0x1a')]);}console[a22_0x5859('0x37')](a22_0x5859('0x6e')+_0x1655fe);this[a22_0x5859('0x1a')]++;this[a22_0x5859('0x49')]();}}[a22_0x5859('0x30')](this));_0x33f9fa['on'](a22_0x5859('0x6d'),function(_0x33f9fa){console[a22_0x5859('0x37')](a22_0x5859('0x6f')+_0x1655fe);});_0x33f9fa['on'](a22_0x5859('0x70'),function(_0x33f9fa){console['log'](a22_0x5859('0x71'));this['download']();}[a22_0x5859('0x30')](this));_0x33f9fa['on']('end',function(_0x33f9fa){console[a22_0x5859('0x37')](a22_0x5859('0x72'));console[a22_0x5859('0x37')](a22_0x5859('0x73')+_0x4f2e81);console[a22_0x5859('0x37')](a22_0x5859('0x74')+_0x30243c);this['checkVideo'](this[a22_0x5859('0x14')]+_0x4f2e81)['then'](function(_0x1b6751){if(_0x1b6751){this[a22_0x5859('0x1a')]++;}this[a22_0x5859('0x49')]();}[a22_0x5859('0x30')](this));}[a22_0x5859('0x30')](this));_0x33f9fa['on'](a22_0x5859('0x75'),function(_0x33f9fa){console[a22_0x5859('0x37')](a22_0x5859('0x75'));});_0x33f9fa['on'](a22_0x5859('0x76'),function(_0x33f9fa){console[a22_0x5859('0x37')](a22_0x5859('0x76'));});_0x33f9fa['on']('retry',function(_0x33f9fa){console[a22_0x5859('0x37')]('retry');});}[a22_0x5859('0x77')](_0x25ca29,_0x3016a7,_0x589d60,_0x26da7d){console[a22_0x5859('0x37')]('downloadHTTPFile');console[a22_0x5859('0x37')](_0x25ca29);const _0x231a1a=!![];let _0x45bd0c=0x0;const _0x2d1f93='';console[a22_0x5859('0x37')](a22_0x5859('0x78')+_0x25ca29+a22_0x5859('0x79')+_0x3016a7);if(_0x45bd0c){if(_0x45bd0c>0x5){_0x26da7d(a22_0x5859('0x7a'),_0x25ca29,_0x589d60,null);return;}}else{_0x45bd0c=0x0;}const _0x292021=this[a22_0x5859('0x14')]+_0x3016a7;let _0x221042;if(_0x26da7d===undefined){console[a22_0x5859('0x37')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x25ca29+a22_0x5859('0x79')+_0x292021);_0x26da7d=function(_0x1a8743,_0x38c8a8){console[a22_0x5859('0x37')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x1a8743,_0x38c8a8);};}http[a22_0x5859('0x7b')][a22_0x5859('0x7c')]=0x64;const _0x2d1658={'host':url[a22_0x5859('0x1f')](_0x25ca29)[a22_0x5859('0x7d')],'port':0x50,'path':url['parse'](_0x25ca29)[a22_0x5859('0x7e')],'agent':![]};const _0x257dd9=http[a22_0x5859('0x7f')](_0x2d1658,function(_0x4f497f){let _0x57cdab=0x0;let _0x5c47b1=0x0;function _0x18e743(){if(_0x57cdab===undefined){console[a22_0x5859('0x37')](_0x3016a7+a22_0x5859('0x80')+_0x5c47b1+'/'+'?');}const _0x401d3a=_0x5c47b1/_0x57cdab*0x64;console[a22_0x5859('0x37')](_0x3016a7+a22_0x5859('0x81')+_0x401d3a+'%\x09'+_0x5c47b1+'/'+_0x57cdab);}console[a22_0x5859('0x37')](_0x3016a7+'\x20'+_0x4f497f[a22_0x5859('0x82')]);switch(_0x4f497f['statusCode']){case 0xc8:_0x57cdab=_0x4f497f[a22_0x5859('0x83')][a22_0x5859('0x84')]||_0x2d1f93;fs[a22_0x5859('0x85')](_0x292021,function(_0x56d03b,_0x3bbce8){if(!_0x56d03b){console[a22_0x5859('0x37')](a22_0x5859('0x86')+_0x292021);if(_0x3bbce8[a22_0x5859('0x87')]==_0x57cdab){console[a22_0x5859('0x37')](a22_0x5859('0x88')+_0x57cdab+')');console[a22_0x5859('0x37')](a22_0x5859('0x89'));}else{console[a22_0x5859('0x37')](a22_0x5859('0x8a')+_0x3bbce8[a22_0x5859('0x87')]+')\x20vs\x20New('+_0x57cdab+')');}}_0x221042=fs['createWriteStream'](_0x292021);_0x4f497f[a22_0x5859('0x8b')](_0x221042);_0x4f497f['on']('data',function(_0x2d6a2d){_0x5c47b1+=_0x2d6a2d[a22_0x5859('0x48')];_0x18e743();});_0x257dd9['on'](a22_0x5859('0x70'),function(_0x56d03b){console['log'](a22_0x5859('0x8c'));console[a22_0x5859('0x37')](_0x56d03b);});_0x221042['on']('finish',function(){console[a22_0x5859('0x37')]('Downloaded\x20'+_0x25ca29+a22_0x5859('0x79')+_0x3016a7);_0x26da7d(null,_0x3016a7,_0x589d60,_0x3016a7);}[a22_0x5859('0x30')](this));});break;case 0x12e:const _0x3d64a1=_0x4f497f['headers'][a22_0x5859('0x8d')];console[a22_0x5859('0x37')]('Redirect\x20'+_0x25ca29+a22_0x5859('0x79')+_0x3d64a1);if(_0x45bd0c<0x5){this[a22_0x5859('0x77')](_0x3d64a1,_0x3016a7,_0x26da7d,_0x45bd0c++);}else{console['error'](a22_0x5859('0x8e')+_0x25ca29+'.');_0x26da7d(a22_0x5859('0x8f'),null,null,null);}return;case 0x194:console[a22_0x5859('0x37')]('File\x20Not\x20Found\x20'+_0x25ca29);default:console[a22_0x5859('0x37')](a22_0x5859('0x90')+_0x25ca29+a22_0x5859('0x91')+_0x4f497f[a22_0x5859('0x82')]);_0x257dd9[a22_0x5859('0x92')]();_0x26da7d(_0x4f497f[a22_0x5859('0x82')],null,null,null);return;}})['on']('error',function(_0x49a812){console[a22_0x5859('0x37')](a22_0x5859('0x93')+_0x25ca29+'\x20'+_0x49a812['message']);_0x26da7d(_0x49a812,null,null,null);});}[a22_0x5859('0x94')](_0xff7f2a,_0x3bb83d,_0x3eb709,_0x656415){console[a22_0x5859('0x37')](a22_0x5859('0x94'));console[a22_0x5859('0x37')](_0xff7f2a);console[a22_0x5859('0x37')](_0x3bb83d);console[a22_0x5859('0x37')](_0x3eb709);console[a22_0x5859('0x37')](_0x656415);if(_0x3eb709==a22_0x5859('0x5d')){const _0x124dea=this[a22_0x5859('0x45')][this[a22_0x5859('0x1a')]][a22_0x5859('0x95')]!=null?this[a22_0x5859('0x45')][this[a22_0x5859('0x1a')]][a22_0x5859('0x95')]:0x1e;this['createImageVideo'](_0x656415,_0x124dea);}else if(_0x3eb709==a22_0x5859('0x96')){if(_0xff7f2a==null&&_0x3bb83d!=''){this[a22_0x5859('0x1a')]++;}this[a22_0x5859('0x49')]();}console[a22_0x5859('0x37')](this[a22_0x5859('0x1a')]);}[a22_0x5859('0x97')](_0x4a3808,_0x4535f6,_0x48d0d0){progress(request(_0x4a3808),{})['on'](a22_0x5859('0x98'),function(_0x3b6773){console[a22_0x5859('0x37')](_0x3b6773);})['on'](a22_0x5859('0x70'),function(_0x24074a){console[a22_0x5859('0x37')]('Error\x20downloading\x20file');this[a22_0x5859('0x49')]();})['on'](a22_0x5859('0x72'),function(){console[a22_0x5859('0x37')](a22_0x5859('0x73')+_0x4535f6);console['log'](a22_0x5859('0x74')+_0x48d0d0);if(_0x48d0d0==a22_0x5859('0x5d')){const _0x6fa68a=this['downloadFiles'][this[a22_0x5859('0x1a')]][a22_0x5859('0x95')]!=null?this[a22_0x5859('0x45')][this[a22_0x5859('0x1a')]][a22_0x5859('0x95')]:0x1e;this[a22_0x5859('0x99')](_0x4535f6,_0x6fa68a);}else if(_0x48d0d0==a22_0x5859('0x96')){this[a22_0x5859('0x1a')]++;this[a22_0x5859('0x49')]();}}[a22_0x5859('0x30')](this))[a22_0x5859('0x8b')](fs[a22_0x5859('0x9a')](this[a22_0x5859('0x14')]+_0x4535f6));}[a22_0x5859('0x99')](_0x292b54,_0x5f3508=0x1e){const _0x342cfe=this[a22_0x5859('0x14')]+_0x292b54;console[a22_0x5859('0x37')](_0x342cfe);console[a22_0x5859('0x37')](_0x292b54);const _0x5665e4=_0x292b54['split']('.')[a22_0x5859('0x5a')](0x0,-0x1)[a22_0x5859('0x5b')]('.');const _0x487f42=a22_0x5859('0x9b');const _0x4d10d7=['-y','-r',a22_0x5859('0x9c'),a22_0x5859('0x9d'),'1','-pattern_type',a22_0x5859('0x9e'),'-i',_0x342cfe,'-t',String(_0x5f3508),a22_0x5859('0x9f'),a22_0x5859('0xa0'),a22_0x5859('0xa1'),a22_0x5859('0xa2'),'-r','25',a22_0x5859('0xa3'),a22_0x5859('0xa4'),this[a22_0x5859('0x14')]+_0x5665e4+a22_0x5859('0x5e')];const _0x3adbfe=spawn(_0x487f42,_0x4d10d7);_0x3adbfe[a22_0x5859('0xa5')]['on'](a22_0x5859('0xa6'),function(_0x3ebced){console[a22_0x5859('0x37')]('Converting\x20'+_0x342cfe);});_0x3adbfe[a22_0x5859('0xa7')]['on'](a22_0x5859('0xa6'),function(_0x907984){console[a22_0x5859('0x37')](a22_0x5859('0xa8')+_0x907984);}[a22_0x5859('0x30')](this));_0x3adbfe['on'](a22_0x5859('0xa9'),function(){console[a22_0x5859('0x37')](a22_0x5859('0xaa'));this[a22_0x5859('0x1a')]++;this['download']();}[a22_0x5859('0x30')](this));}['downloadYouTube'](_0x1c3379){const _0x2c70c5=this[a22_0x5859('0x14')]+'/'+_0x1c3379+'.mp4';const _0x49e362=youtubedl(a22_0x5859('0xab')+_0x1c3379,[a22_0x5859('0xac')],{'cwd':__dirname});_0x49e362['on'](a22_0x5859('0xad'),function(_0x4d0a63){console[a22_0x5859('0x37')](a22_0x5859('0xae'));console[a22_0x5859('0x37')](a22_0x5859('0xaf')+_0x4d0a63[a22_0x5859('0xb0')]);console['log']('size:\x20'+_0x4d0a63[a22_0x5859('0x87')]);});_0x49e362['on'](a22_0x5859('0xb1'),function complete(_0x4e85f9){'use strict';console[a22_0x5859('0x37')](a22_0x5859('0xaf')+_0x4e85f9[a22_0x5859('0xb0')]+a22_0x5859('0xb2'));});_0x49e362['on'](a22_0x5859('0x72'),function(){console[a22_0x5859('0x37')](a22_0x5859('0xb3'));this[a22_0x5859('0x5f')](_0x2c70c5)[a22_0x5859('0x4')](function(_0x3ae282){if(_0x3ae282){this[a22_0x5859('0x1a')]++;}this[a22_0x5859('0x49')]();}['bind'](this));}[a22_0x5859('0x30')](this));_0x49e362['pipe'](fs[a22_0x5859('0x9a')](_0x2c70c5));}[a22_0x5859('0x55')](){console[a22_0x5859('0x37')]('Finishing');if(this['playlistChanged']){if(this[a22_0x5859('0x46')]['length']==0x0){fs[a22_0x5859('0x3a')](this['playListFile'],JSON['stringify'](this[a22_0x5859('0x51')]));let _0x5cb3df=a22_0x5859('0xb4')+'\x0d\x0a'+a22_0x5859('0xb5')+'\x0d\x0a';for(const _0x563f55 in this[a22_0x5859('0x45')]){const _0x38d693=this[a22_0x5859('0x45')][_0x563f55][a22_0x5859('0x56')];const _0x479323=this['downloadFiles'][_0x563f55]['media_type'];const _0x1551a7=_0x38d693[a22_0x5859('0x58')](_0x38d693[a22_0x5859('0xb6')]('/')+0x1);let _0x4ec266=_0x1551a7[a22_0x5859('0x59')]('.')[a22_0x5859('0x5a')](0x0,-0x1)[a22_0x5859('0x5b')]('.');if(_0x479323==a22_0x5859('0x5c')){_0x4ec266=_0x38d693;}_0x5cb3df+=a22_0x5859('0xb7')+_0x4ec266+a22_0x5859('0x5e')+'\x0d\x0a';}fsExtra[a22_0x5859('0x4a')](this[a22_0x5859('0x16')]);fsExtra[a22_0x5859('0x60')](this['tempFolder'],this[a22_0x5859('0x16')]);fsExtra[a22_0x5859('0x3a')](this[a22_0x5859('0x4c')],_0x5cb3df);fsExtra[a22_0x5859('0x4a')](this['tempFolder']);console[a22_0x5859('0x37')](a22_0x5859('0xb8'));const _0x256e5b=spawn(a22_0x5859('0xb9'),['-r',a22_0x5859('0xba')]);}else{console[a22_0x5859('0x37')](a22_0x5859('0xbb'));this[a22_0x5859('0x1a')]=0x0;setTimeout(function(){this['download']();}[a22_0x5859('0x30')](this),0x1388);}}else{console[a22_0x5859('0x37')]('No\x20playlist\x20changes.');}}}exports[a22_0x5859('0xbc')]=SyncPlaylistsService;