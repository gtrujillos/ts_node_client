var a22_0x4c26=['track','@type','Video','mediainfo\x20check:','failDownloadFiles','includes','indexOf','splice','downloading:\x20','start','Error:\x20','error:\x20','end','mediaType:\x20','checkVideo','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','host','\x20Progress:\x20unknown\x09','statusCode','headers','content-length','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','\x20to\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','video','downloadRequestFile','progress','Error\x20downloading\x20file','Downloaded:\x20','createImageVideo','slice','1/2','-pattern_type','glob','-c:v','-pix_fmt','-vf','scale=1920:1080','stdout','Converting\x20','stderr','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','_filename','size:\x20','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','writeFileSync','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','Rebooting..','shutdown','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','throw','value','then','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request-progress','child_process','spawn','is-image','youtube-dl','uuid/v4','config.json','context.json','url-exists','node-kodi','mediaFolder','tempFolder','temp/','files/','playListFile','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','HttpClientService','init','config','parse','context','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','reportStatus','bind','stringify','deviceUuid','networkInterfaces','httpClientService','log','register\x20response:\x20','catch','player','item','label','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','newPlayList','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','existsSync','removeSync','error','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','join','youtube_single','.mp4','image','**********+','copySync','Downloading:\x20','downloadYouTube','downloader','media'];(function(_0x26911f,_0x42ef24){var _0x3703e8=function(_0x2fab33){while(--_0x2fab33){_0x26911f['push'](_0x26911f['shift']());}};_0x3703e8(++_0x42ef24);}(a22_0x4c26,0x1c1));var a22_0x298d=function(_0x3fa046,_0x261fde){_0x3fa046=_0x3fa046-0x0;var _0x1054a9=a22_0x4c26[_0x3fa046];return _0x1054a9;};'use strict';var __awaiter=this&&this[a22_0x298d('0x0')]||function(_0x1eef05,_0xbdb7b3,_0x5e327e,_0x419827){return new(_0x5e327e||(_0x5e327e=Promise))(function(_0x484926,_0x47857d){function _0x3ff5ef(_0x5a962b){try{_0x358375(_0x419827[a22_0x298d('0x1')](_0x5a962b));}catch(_0x3b3c98){_0x47857d(_0x3b3c98);}}function _0x48c780(_0xdf1fed){try{_0x358375(_0x419827[a22_0x298d('0x2')](_0xdf1fed));}catch(_0x876bb9){_0x47857d(_0x876bb9);}}function _0x358375(_0x4a6f42){_0x4a6f42['done']?_0x484926(_0x4a6f42['value']):new _0x5e327e(function(_0x484926){_0x484926(_0x4a6f42[a22_0x298d('0x3')]);})[a22_0x298d('0x4')](_0x3ff5ef,_0x48c780);}_0x358375((_0x419827=_0x419827['apply'](_0x1eef05,_0xbdb7b3||[]))['next']());});};Object['defineProperty'](exports,a22_0x298d('0x5'),{'value':!![]});const HttpClientService_1=require(a22_0x298d('0x6'));const mediainfo=require(a22_0x298d('0x7'));const fs=require('fs');const url=require(a22_0x298d('0x8'));const http=require(a22_0x298d('0x9'));const fsExtra=require(a22_0x298d('0xa'));const request=require('request');const progress=require(a22_0x298d('0xb'));const spawn=require(a22_0x298d('0xc'))[a22_0x298d('0xd')];const isImage=require(a22_0x298d('0xe'));const format=require('string-template');const os=require('os');const youtubedl=require(a22_0x298d('0xf'));const uuidv4=require(a22_0x298d('0x10'));const configFile=a22_0x298d('0x11');const contextFile=a22_0x298d('0x12');const urlExists=require(a22_0x298d('0x13'));const kodi_rpc=require(a22_0x298d('0x14'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a22_0x298d('0x15')]='media/';this[a22_0x298d('0x16')]=this['mediaFolder']+a22_0x298d('0x17');this['filesFolder']=this[a22_0x298d('0x15')]+a22_0x298d('0x18');this[a22_0x298d('0x19')]=this[a22_0x298d('0x15')]+a22_0x298d('0x1a');this[a22_0x298d('0x1b')]=this[a22_0x298d('0x1c')]+a22_0x298d('0x1d');this[a22_0x298d('0x1e')]=0x0;this[a22_0x298d('0x1f')]=![];this[a22_0x298d('0x20')]=[];this['failDownloadFiles']=[];this['newPlayList']={};this['httpClientService']=new HttpClientService_1[(a22_0x298d('0x21'))]();}[a22_0x298d('0x22')](){this[a22_0x298d('0x23')]=JSON[a22_0x298d('0x24')](fs['readFileSync'](configFile));this[a22_0x298d('0x25')]=JSON[a22_0x298d('0x24')](fs[a22_0x298d('0x26')](contextFile));this['playerId']=this[a22_0x298d('0x23')][a22_0x298d('0x27')];this[a22_0x298d('0x28')]=process[a22_0x298d('0x29')][a22_0x298d('0x2a')]+a22_0x298d('0x2b');this[a22_0x298d('0x2c')]=this[a22_0x298d('0x28')]+a22_0x298d('0x2d');this[a22_0x298d('0x2e')]=new kodi_rpc({'url':'http://localhost'});this[a22_0x298d('0x2f')]();this[a22_0x298d('0x30')]();this[a22_0x298d('0x31')]();this[a22_0x298d('0x32')]();setInterval(function(){this[a22_0x298d('0x33')]();}[a22_0x298d('0x34')](this),0x2710);setInterval(function(){this['registerClient']();}['bind'](this),0xea60);}[a22_0x298d('0x2f')](){}['registerClient'](){this['kodi']['playlist']['getItems'](0x1)['then'](function(_0x50795f){const _0x23537f=JSON[a22_0x298d('0x35')](_0x50795f);const _0x5bd226={'player_id':this[a22_0x298d('0x27')],'device_uuid':this[a22_0x298d('0x23')][a22_0x298d('0x36')],'network_info':JSON['stringify'](os[a22_0x298d('0x37')]()),'firmware_info':JSON['stringify'](this[a22_0x298d('0x25')]),'playlist':_0x23537f,'playing_item':'','status':0x0};this[a22_0x298d('0x38')]['post']('http://restapi.lulo.run/player_devices/register',_0x5bd226,![])[a22_0x298d('0x4')](function(_0x859ed8){console[a22_0x298d('0x39')](a22_0x298d('0x3a')+Date());})[a22_0x298d('0x3b')](function(_0x185a3f){});console[a22_0x298d('0x39')](_0x5bd226);}[a22_0x298d('0x34')](this));const _0x5c04fe=this[a22_0x298d('0x23')][a22_0x298d('0x36')];if(!_0x5c04fe||_0x5c04fe==''){this['config']['deviceUuid']=uuidv4();this[a22_0x298d('0x23')]={'deviceUuid':this['config'][a22_0x298d('0x36')],'playerId':this[a22_0x298d('0x23')][a22_0x298d('0x27')]};fs['writeFileSync'](configFile,JSON['stringify'](this[a22_0x298d('0x23')]));}}[a22_0x298d('0x33')](){console['log'](a22_0x298d('0x33'));this[a22_0x298d('0x2e')][a22_0x298d('0x3c')]['getCurrentlyPlayingVideo']()[a22_0x298d('0x4')](function(_0x4997a8){const _0x497a04=_0x4997a8[a22_0x298d('0x3d')][a22_0x298d('0x3e')];const _0xd2323f={'player_id':this['playerId'],'device_uuid':this[a22_0x298d('0x23')][a22_0x298d('0x36')],'status':_0x497a04!=''&&_0x497a04!=null?0x1:0x0,'playing_item':_0x497a04};this[a22_0x298d('0x38')]['post'](a22_0x298d('0x3f'),_0xd2323f,![])[a22_0x298d('0x4')](function(_0x46a384){console[a22_0x298d('0x39')](a22_0x298d('0x40')+Date());})[a22_0x298d('0x3b')](function(_0x48723a){});}[a22_0x298d('0x34')](this));}[a22_0x298d('0x31')](){fsExtra[a22_0x298d('0x41')](this['mediaFolder'],_0x3d8054=>{});fsExtra[a22_0x298d('0x41')](this[a22_0x298d('0x16')],_0xc348b1=>{});fsExtra[a22_0x298d('0x41')](this['filesFolder'],_0x2b7cc3=>{});}['loadMediaList'](){const _0x2c20a5=format(this[a22_0x298d('0x2c')],this[a22_0x298d('0x27')]);console[a22_0x298d('0x39')](_0x2c20a5);request({'url':_0x2c20a5,'json':!![]},function(_0x40f991,_0x2e200c,_0x18af3c){this[a22_0x298d('0x42')]=_0x18af3c;this[a22_0x298d('0x1f')]=this[a22_0x298d('0x43')]();fsExtra[a22_0x298d('0x44')](this[a22_0x298d('0x16')]);this[a22_0x298d('0x20')]=[];this['failDownloadFiles']=[];this[a22_0x298d('0x1e')]=0x0;for(const _0x577c87 in _0x18af3c){this[a22_0x298d('0x20')][a22_0x298d('0x45')](_0x18af3c[_0x577c87]);}console[a22_0x298d('0x39')](a22_0x298d('0x46')+this['downloadFiles'][a22_0x298d('0x47')]);if(this[a22_0x298d('0x20')][a22_0x298d('0x47')]>0x0){this[a22_0x298d('0x48')]();}}[a22_0x298d('0x34')](this));}['reloadMediaList'](){if(fsExtra[a22_0x298d('0x49')](this['playListFile'])){fsExtra[a22_0x298d('0x4a')](this[a22_0x298d('0x19')]);}this[a22_0x298d('0x32')]();}[a22_0x298d('0x43')](){const _0x2da5cb=JSON[a22_0x298d('0x35')](this[a22_0x298d('0x42')]);try{if(!fs[a22_0x298d('0x49')](this[a22_0x298d('0x19')])){return!![];}else{const _0x2d3ffe=fs[a22_0x298d('0x26')](this['playListFile'])['toString']();if(_0x2d3ffe!=_0x2da5cb){return!![];}}}catch(_0x113617){console[a22_0x298d('0x4b')](_0x113617);}return![];}[a22_0x298d('0x48')](){console[a22_0x298d('0x39')](a22_0x298d('0x4c')+this['currentFile']+a22_0x298d('0x4d')+this[a22_0x298d('0x20')][a22_0x298d('0x47')]);if(this[a22_0x298d('0x1e')]>=this[a22_0x298d('0x20')]['length']){this[a22_0x298d('0x4e')]();return;}const _0x498b5f=String(this['downloadFiles'][this[a22_0x298d('0x1e')]][a22_0x298d('0x4f')]);const _0x4e6934=this['downloadFiles'][this[a22_0x298d('0x1e')]][a22_0x298d('0x50')];let _0x1d0759=_0x498b5f[a22_0x298d('0x51')](_0x498b5f[a22_0x298d('0x52')]('/')+0x1);const _0x1eec23=_0x1d0759[a22_0x298d('0x53')]('.')['slice'](0x0,-0x1)[a22_0x298d('0x54')]('.');let _0x570964=this[a22_0x298d('0x28')]+_0x498b5f;const _0xa41447=_0x570964[a22_0x298d('0x53')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x4e6934==a22_0x298d('0x55')){_0x1d0759=_0x1d0759+a22_0x298d('0x56');}else if(_0x4e6934==a22_0x298d('0x57')){_0x1d0759=_0x1eec23+'.mp4';_0x570964=_0xa41447+a22_0x298d('0x56');}console[a22_0x298d('0x39')](a22_0x298d('0x58'));console[a22_0x298d('0x39')](_0x498b5f);console[a22_0x298d('0x39')](_0x4e6934);console[a22_0x298d('0x39')](_0x1d0759);console[a22_0x298d('0x39')](_0x570964);console[a22_0x298d('0x39')](_0x1eec23);console[a22_0x298d('0x39')](_0xa41447);console['log'](a22_0x298d('0x58'));if(fsExtra['existsSync'](this[a22_0x298d('0x16')]+_0x1d0759)){this['checkVideo'](this[a22_0x298d('0x16')]+_0x1d0759)[a22_0x298d('0x4')](function(_0x22e72a){if(_0x22e72a){this[a22_0x298d('0x1e')]++;}else{this['playlistChanged']=!![];}this[a22_0x298d('0x48')]();}[a22_0x298d('0x34')](this));}else if(fsExtra[a22_0x298d('0x49')](this['filesFolder']+_0x1d0759)){this['checkVideo'](this[a22_0x298d('0x1c')]+_0x1d0759)[a22_0x298d('0x4')](function(_0x13e452){if(_0x13e452){fsExtra[a22_0x298d('0x59')](this[a22_0x298d('0x1c')]+_0x1d0759,this['tempFolder']+_0x1d0759);this[a22_0x298d('0x1e')]++;}else{this[a22_0x298d('0x1f')]=!![];}this[a22_0x298d('0x48')]();}[a22_0x298d('0x34')](this));}else{console[a22_0x298d('0x39')](a22_0x298d('0x5a')+_0x570964);this[a22_0x298d('0x1f')]=!![];if(_0x4e6934==a22_0x298d('0x55')){this[a22_0x298d('0x5b')](_0x498b5f);}else{this[a22_0x298d('0x5c')](_0x570964,_0x1d0759,_0x4e6934);}}}['checkVideo'](_0x250294){return __awaiter(this,void 0x0,void 0x0,function*(){console['log']('videoFile:\x20'+_0x250294);const _0x7e317a=yield mediainfo(_0x250294)[a22_0x298d('0x3b')](_0x9dfd46=>{console['log'](_0x9dfd46);fsExtra[a22_0x298d('0x4a')](_0x250294);return![];});const _0x37e892=_0x7e317a[a22_0x298d('0x5d')]['track'][a22_0x298d('0x47')]>0x1&&_0x7e317a['media'][a22_0x298d('0x5e')][0x1][a22_0x298d('0x5f')]==a22_0x298d('0x60');if(!_0x37e892){fsExtra[a22_0x298d('0x4a')](_0x250294);}console[a22_0x298d('0x39')](a22_0x298d('0x61')+_0x37e892);return _0x37e892;});}[a22_0x298d('0x5c')](_0x20957f,_0x834c65,_0x3c0389){const _0xc54e77=new Downloader();console[a22_0x298d('0x39')](_0x20957f);console[a22_0x298d('0x39')](_0x834c65);console[a22_0x298d('0x39')](_0x3c0389);const _0x9a824b=_0xc54e77[a22_0x298d('0x48')](_0x20957f,this[a22_0x298d('0x16')]+_0x834c65);urlExists(_0x20957f,function(_0x21ac98,_0x275631){if(_0x275631){if(this[a22_0x298d('0x62')][a22_0x298d('0x63')](this[a22_0x298d('0x1e')])){const _0xce6a6d=this[a22_0x298d('0x62')][a22_0x298d('0x64')](this[a22_0x298d('0x1e')]);if(_0xce6a6d>-0x1){this['failDownloadFiles'][a22_0x298d('0x65')](_0xce6a6d,0x1);}}console[a22_0x298d('0x39')](a22_0x298d('0x66')+_0x20957f);_0x9a824b[a22_0x298d('0x67')]();}else{if(!this[a22_0x298d('0x62')]['includes'](this[a22_0x298d('0x1e')])){this['failDownloadFiles'][a22_0x298d('0x45')](this[a22_0x298d('0x1e')]);}console[a22_0x298d('0x39')](a22_0x298d('0x68')+_0x20957f);this[a22_0x298d('0x1e')]++;this[a22_0x298d('0x48')]();}}['bind'](this));_0x9a824b['on'](a22_0x298d('0x67'),function(_0x9a824b){console[a22_0x298d('0x39')]('start:\x20'+_0x20957f);});_0x9a824b['on'](a22_0x298d('0x4b'),function(_0x9a824b){console[a22_0x298d('0x39')](a22_0x298d('0x69'));this[a22_0x298d('0x48')]();}[a22_0x298d('0x34')](this));_0x9a824b['on'](a22_0x298d('0x6a'),function(_0x9a824b){console[a22_0x298d('0x39')](a22_0x298d('0x6a'));console[a22_0x298d('0x39')]('Downloaded:\x20'+_0x834c65);console['log'](a22_0x298d('0x6b')+_0x3c0389);this[a22_0x298d('0x6c')](this['tempFolder']+_0x834c65)['then'](function(_0x1688b4){if(_0x1688b4){this[a22_0x298d('0x1e')]++;}this[a22_0x298d('0x48')]();}[a22_0x298d('0x34')](this));}[a22_0x298d('0x34')](this));_0x9a824b['on']('stopped',function(_0x9a824b){console[a22_0x298d('0x39')](a22_0x298d('0x6d'));});_0x9a824b['on'](a22_0x298d('0x6e'),function(_0x9a824b){console[a22_0x298d('0x39')](a22_0x298d('0x6e'));});_0x9a824b['on'](a22_0x298d('0x6f'),function(_0x9a824b){console[a22_0x298d('0x39')]('retry');});}[a22_0x298d('0x70')](_0x509fd5,_0x4c0335,_0x1f5a37,_0xdf2d54){console[a22_0x298d('0x39')](a22_0x298d('0x70'));console[a22_0x298d('0x39')](_0x509fd5);const _0x300b92=!![];let _0x31a0e2=0x0;const _0x148dd4='';console[a22_0x298d('0x39')](a22_0x298d('0x71')+_0x509fd5+'\x20to\x20'+_0x4c0335);if(_0x31a0e2){if(_0x31a0e2>0x5){_0xdf2d54(a22_0x298d('0x72'),_0x509fd5,_0x1f5a37,null);return;}}else{_0x31a0e2=0x0;}const _0x1c054f=this[a22_0x298d('0x16')]+_0x4c0335;let _0x654c64;if(_0xdf2d54===undefined){console[a22_0x298d('0x39')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x509fd5+'\x20to\x20'+_0x1c054f);_0xdf2d54=function(_0xeb62b7,_0xbf46c9){console[a22_0x298d('0x39')](a22_0x298d('0x73'),_0xeb62b7,_0xbf46c9);};}http['globalAgent']['maxSockets']=0x64;const _0x40a351={'host':url[a22_0x298d('0x24')](_0x509fd5)[a22_0x298d('0x74')],'port':0x50,'path':url[a22_0x298d('0x24')](_0x509fd5)['pathname'],'agent':![]};const _0x5adfcb=http['get'](_0x40a351,function(_0x41d356){let _0x1a6025=0x0;let _0x1444fa=0x0;function _0x455ba1(){if(_0x1a6025===undefined){console[a22_0x298d('0x39')](_0x4c0335+a22_0x298d('0x75')+_0x1444fa+'/'+'?');}const _0x3fd893=_0x1444fa/_0x1a6025*0x64;console['log'](_0x4c0335+'\x20Progress:\x20'+_0x3fd893+'%\x09'+_0x1444fa+'/'+_0x1a6025);}console[a22_0x298d('0x39')](_0x4c0335+'\x20'+_0x41d356[a22_0x298d('0x76')]);switch(_0x41d356[a22_0x298d('0x76')]){case 0xc8:_0x1a6025=_0x41d356[a22_0x298d('0x77')][a22_0x298d('0x78')]||_0x148dd4;fs['stat'](_0x1c054f,function(_0x3be285,_0x552415){if(!_0x3be285){console['log'](a22_0x298d('0x79')+_0x1c054f);if(_0x552415[a22_0x298d('0x7a')]==_0x1a6025){console[a22_0x298d('0x39')](a22_0x298d('0x7b')+_0x1a6025+')');console['log']('Redownloading');}else{console[a22_0x298d('0x39')](a22_0x298d('0x7c')+_0x552415['size']+a22_0x298d('0x7d')+_0x1a6025+')');}}_0x654c64=fs[a22_0x298d('0x7e')](_0x1c054f);_0x41d356[a22_0x298d('0x7f')](_0x654c64);_0x41d356['on'](a22_0x298d('0x80'),function(_0x54f94c){_0x1444fa+=_0x54f94c[a22_0x298d('0x47')];_0x455ba1();});_0x5adfcb['on'](a22_0x298d('0x4b'),function(_0x3be285){console[a22_0x298d('0x39')](a22_0x298d('0x81'));console['log'](_0x3be285);});_0x654c64['on'](a22_0x298d('0x82'),function(){console[a22_0x298d('0x39')](a22_0x298d('0x83')+_0x509fd5+a22_0x298d('0x84')+_0x4c0335);_0xdf2d54(null,_0x4c0335,_0x1f5a37,_0x4c0335);}[a22_0x298d('0x34')](this));});break;case 0x12e:const _0x5e1243=_0x41d356[a22_0x298d('0x77')][a22_0x298d('0x85')];console['log'](a22_0x298d('0x86')+_0x509fd5+a22_0x298d('0x84')+_0x5e1243);if(_0x31a0e2<0x5){this[a22_0x298d('0x70')](_0x5e1243,_0x4c0335,_0xdf2d54,_0x31a0e2++);}else{console[a22_0x298d('0x4b')](a22_0x298d('0x87')+_0x509fd5+'.');_0xdf2d54(a22_0x298d('0x88'),null,null,null);}return;case 0x194:console[a22_0x298d('0x39')](a22_0x298d('0x89')+_0x509fd5);default:console[a22_0x298d('0x39')]('Problem\x20downloading\x20'+_0x509fd5+a22_0x298d('0x8a')+_0x41d356['statusCode']);_0x5adfcb[a22_0x298d('0x8b')]();_0xdf2d54(_0x41d356[a22_0x298d('0x76')],null,null,null);return;}})['on'](a22_0x298d('0x4b'),function(_0x507668){console[a22_0x298d('0x39')](a22_0x298d('0x8c')+_0x509fd5+'\x20'+_0x507668['message']);_0xdf2d54(_0x507668,null,null,null);});}[a22_0x298d('0x8d')](_0x34f87f,_0x2fef46,_0xd795b9,_0x13f1da){console[a22_0x298d('0x39')](a22_0x298d('0x8d'));console['log'](_0x34f87f);console[a22_0x298d('0x39')](_0x2fef46);console['log'](_0xd795b9);console[a22_0x298d('0x39')](_0x13f1da);if(_0xd795b9==a22_0x298d('0x57')){const _0x3a548f=this[a22_0x298d('0x20')][this[a22_0x298d('0x1e')]][a22_0x298d('0x8e')]!=null?this[a22_0x298d('0x20')][this['currentFile']][a22_0x298d('0x8e')]:0x1e;this['createImageVideo'](_0x13f1da,_0x3a548f);}else if(_0xd795b9==a22_0x298d('0x8f')){if(_0x34f87f==null&&_0x2fef46!=''){this['currentFile']++;}this[a22_0x298d('0x48')]();}console[a22_0x298d('0x39')](this['currentFile']);}[a22_0x298d('0x90')](_0xef254f,_0x18d38e,_0x4a4f07){progress(request(_0xef254f),{})['on'](a22_0x298d('0x91'),function(_0x1eaad5){console[a22_0x298d('0x39')](_0x1eaad5);})['on'](a22_0x298d('0x4b'),function(_0x8fabcc){console[a22_0x298d('0x39')](a22_0x298d('0x92'));this[a22_0x298d('0x48')]();})['on'](a22_0x298d('0x6a'),function(){console[a22_0x298d('0x39')](a22_0x298d('0x93')+_0x18d38e);console[a22_0x298d('0x39')](a22_0x298d('0x6b')+_0x4a4f07);if(_0x4a4f07==a22_0x298d('0x57')){const _0x5b26ed=this[a22_0x298d('0x20')][this[a22_0x298d('0x1e')]]['duration']!=null?this[a22_0x298d('0x20')][this[a22_0x298d('0x1e')]][a22_0x298d('0x8e')]:0x1e;this['createImageVideo'](_0x18d38e,_0x5b26ed);}else if(_0x4a4f07==a22_0x298d('0x8f')){this[a22_0x298d('0x1e')]++;this[a22_0x298d('0x48')]();}}[a22_0x298d('0x34')](this))[a22_0x298d('0x7f')](fs[a22_0x298d('0x7e')](this[a22_0x298d('0x16')]+_0x18d38e));}[a22_0x298d('0x94')](_0x25fafa,_0xcfd6bd=0x1e){const _0x24318c=this['tempFolder']+_0x25fafa;console[a22_0x298d('0x39')](_0x24318c);console[a22_0x298d('0x39')](_0x25fafa);const _0xba4665=_0x25fafa[a22_0x298d('0x53')]('.')[a22_0x298d('0x95')](0x0,-0x1)[a22_0x298d('0x54')]('.');const _0x3ac9e2='ffmpeg';const _0x1673a3=['-y','-r',a22_0x298d('0x96'),'-loop','1',a22_0x298d('0x97'),a22_0x298d('0x98'),'-i',_0x24318c,'-t',String(_0xcfd6bd),a22_0x298d('0x99'),'libx264',a22_0x298d('0x9a'),'yuv420p','-r','25',a22_0x298d('0x9b'),a22_0x298d('0x9c'),this[a22_0x298d('0x16')]+_0xba4665+a22_0x298d('0x56')];const _0x546f73=spawn(_0x3ac9e2,_0x1673a3);_0x546f73[a22_0x298d('0x9d')]['on'](a22_0x298d('0x80'),function(_0x525e65){console[a22_0x298d('0x39')](a22_0x298d('0x9e')+_0x24318c);});_0x546f73[a22_0x298d('0x9f')]['on'](a22_0x298d('0x80'),function(_0xefac10){console[a22_0x298d('0x39')]('stderr:\x20'+_0xefac10);}[a22_0x298d('0x34')](this));_0x546f73['on'](a22_0x298d('0xa0'),function(){console['log'](a22_0x298d('0xa1'));this[a22_0x298d('0x1e')]++;this[a22_0x298d('0x48')]();}[a22_0x298d('0x34')](this));}[a22_0x298d('0x5b')](_0x428e26){const _0x3a3b44=this[a22_0x298d('0x16')]+'/'+_0x428e26+a22_0x298d('0x56');const _0x40d9bf=youtubedl(a22_0x298d('0xa2')+_0x428e26,[a22_0x298d('0xa3')],{'cwd':__dirname});_0x40d9bf['on'](a22_0x298d('0xa4'),function(_0x499b21){console[a22_0x298d('0x39')](a22_0x298d('0xa5'));console[a22_0x298d('0x39')]('filename:\x20'+_0x499b21[a22_0x298d('0xa6')]);console['log'](a22_0x298d('0xa7')+_0x499b21[a22_0x298d('0x7a')]);});_0x40d9bf['on'](a22_0x298d('0xa8'),function complete(_0x5bec11){'use strict';console[a22_0x298d('0x39')](a22_0x298d('0xa9')+_0x5bec11['_filename']+a22_0x298d('0xaa'));});_0x40d9bf['on'](a22_0x298d('0x6a'),function(){console[a22_0x298d('0x39')](a22_0x298d('0xab'));this['checkVideo'](_0x3a3b44)[a22_0x298d('0x4')](function(_0x1df57f){if(_0x1df57f){this['currentFile']++;}this[a22_0x298d('0x48')]();}[a22_0x298d('0x34')](this));}[a22_0x298d('0x34')](this));_0x40d9bf[a22_0x298d('0x7f')](fs['createWriteStream'](_0x3a3b44));}[a22_0x298d('0x4e')](){console[a22_0x298d('0x39')](a22_0x298d('0xac'));if(this[a22_0x298d('0x1f')]){if(this[a22_0x298d('0x62')][a22_0x298d('0x47')]==0x0){fs[a22_0x298d('0xad')](this[a22_0x298d('0x19')],JSON[a22_0x298d('0x35')](this[a22_0x298d('0x42')]));let _0x43ee80='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x298d('0xae')+'\x0d\x0a';for(const _0x493517 in this[a22_0x298d('0x20')]){const _0x496b80=this[a22_0x298d('0x20')][_0x493517]['path'];const _0x2783df=this[a22_0x298d('0x20')][_0x493517]['media_type'];const _0x4d356b=_0x496b80[a22_0x298d('0x51')](_0x496b80['lastIndexOf']('/')+0x1);let _0x3ad3e1=_0x4d356b[a22_0x298d('0x53')]('.')[a22_0x298d('0x95')](0x0,-0x1)[a22_0x298d('0x54')]('.');if(_0x2783df=='youtube_single'){_0x3ad3e1=_0x496b80;}_0x43ee80+=a22_0x298d('0xaf')+_0x3ad3e1+a22_0x298d('0x56')+'\x0d\x0a';}fsExtra[a22_0x298d('0x44')](this['filesFolder']);fsExtra[a22_0x298d('0x59')](this[a22_0x298d('0x16')],this[a22_0x298d('0x1c')]);fsExtra[a22_0x298d('0xad')](this[a22_0x298d('0x1b')],_0x43ee80);fsExtra['emptyDirSync'](this[a22_0x298d('0x16')]);console[a22_0x298d('0x39')](a22_0x298d('0xb0'));const _0x11b57b=spawn(a22_0x298d('0xb1'),['-r','now']);}else{console[a22_0x298d('0x39')](a22_0x298d('0xb2'));this['currentFile']=0x0;setTimeout(function(){this['download']();}['bind'](this),0x1388);}}else{console[a22_0x298d('0x39')](a22_0x298d('0xb3'));}}}exports[a22_0x298d('0xb4')]=SyncPlaylistsService;