var a22_0x3c82=['Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','createWriteStream','pipe','data','error','err:\x20','finish','Downloaded\x20','headers','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','video','downloadRequestFile','progress','Error\x20downloading\x20file','duration','createImageVideo','-loop','-pattern_type','-c:v','libx264','-vf','scale=1920:1080','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','size','complete','\x20already\x20downloaded.','Finishing','#EXTCPlayListM3U::M3U','media_type','/home/osmc/luloclient/media/files/','copySync','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','Playlist.Cleared','jsonrpcClient','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Player.Open','reboot','sudo\x20/sbin/shutdown\x20-r\x20now','rss','enableClock','/home/osmc/.kodi/userdata/RssFeeds_copy.xml','parseString','err:\x20%j','result:\x20%j','rssfeeds','set','xml:\x20%j','kodi-send\x20--action=\x22RefreshRSS()\x22','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','2.0','post','/jsonrpc','__awaiter','next','throw','done','value','then','defineProperty','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','exec','is-image','string-template','uuid/v4','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','httpClientService','HttpClientService','init','config','parse','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','checkFolders','getStatus','bind','getItems','stringify','context','register\x20response:\x20','catch','log','deviceUuid','writeFileSync','getCurrentlyPlayingVideo','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','ensureDir','tempFolder','loadMediaList','loadMediaList:\x20','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','hasPlayListChanged','toString','\x20of\x20','finishProcess','path','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','Downloading:\x20','downloadYouTube','videoFile:\x20','media','Video','mediainfo\x20check:','includes','splice','downloading:\x20','start','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile'];(function(_0x3dcf29,_0x20626e){var _0x43b296=function(_0x5bdf4c){while(--_0x5bdf4c){_0x3dcf29['push'](_0x3dcf29['shift']());}};_0x43b296(++_0x20626e);}(a22_0x3c82,0x12b));var a22_0xa087=function(_0x440e93,_0x1be3f0){_0x440e93=_0x440e93-0x0;var _0x14adc3=a22_0x3c82[_0x440e93];return _0x14adc3;};'use strict';var __awaiter=this&&this[a22_0xa087('0x0')]||function(_0x291ebd,_0x2d0e6a,_0x6e77c2,_0x230109){function _0x4c9db8(_0x439300){return _0x439300 instanceof _0x6e77c2?_0x439300:new _0x6e77c2(function(_0x1a9870){_0x1a9870(_0x439300);});}return new(_0x6e77c2||(_0x6e77c2=Promise))(function(_0x16d43f,_0x3e08c5){function _0x296519(_0x3db635){try{_0x4541ae(_0x230109[a22_0xa087('0x1')](_0x3db635));}catch(_0x4bb7bb){_0x3e08c5(_0x4bb7bb);}}function _0x390ae2(_0x35bc5f){try{_0x4541ae(_0x230109[a22_0xa087('0x2')](_0x35bc5f));}catch(_0x4d688c){_0x3e08c5(_0x4d688c);}}function _0x4541ae(_0x9bbed){_0x9bbed[a22_0xa087('0x3')]?_0x16d43f(_0x9bbed[a22_0xa087('0x4')]):_0x4c9db8(_0x9bbed[a22_0xa087('0x4')])[a22_0xa087('0x5')](_0x296519,_0x390ae2);}_0x4541ae((_0x230109=_0x230109['apply'](_0x291ebd,_0x2d0e6a||[]))[a22_0xa087('0x1')]());});};Object[a22_0xa087('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a22_0xa087('0x7'));const mediainfo=require(a22_0xa087('0x8'));const fs=require('fs');const url=require(a22_0xa087('0x9'));const http=require(a22_0xa087('0xa'));const fsExtra=require(a22_0xa087('0xb'));const request=require(a22_0xa087('0xc'));const progress=require(a22_0xa087('0xd'));const spawn=require(a22_0xa087('0xe'))['spawn'];const exec=require('child_process')[a22_0xa087('0xf')];const isImage=require(a22_0xa087('0x10'));const format=require(a22_0xa087('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0xa087('0x12'));const configFile='config.json';const contextFile=a22_0xa087('0x13');const urlExists=require(a22_0xa087('0x14'));const kodi_rpc=require(a22_0xa087('0x15'));const Downloader=require(a22_0xa087('0x16'));class SyncPlaylistsService{constructor(){this[a22_0xa087('0x17')]=a22_0xa087('0x18');this['tempFolder']=this[a22_0xa087('0x17')]+a22_0xa087('0x19');this[a22_0xa087('0x1a')]=this[a22_0xa087('0x17')]+a22_0xa087('0x1b');this[a22_0xa087('0x1c')]=this[a22_0xa087('0x17')]+a22_0xa087('0x1d');this[a22_0xa087('0x1e')]=this[a22_0xa087('0x1a')]+'lulo_playlist.m3u';this[a22_0xa087('0x1f')]=0x0;this[a22_0xa087('0x20')]=![];this[a22_0xa087('0x21')]=[];this[a22_0xa087('0x22')]=[];this[a22_0xa087('0x23')]={};this[a22_0xa087('0x24')]=a22_0xa087('0x25');this[a22_0xa087('0x26')]=a22_0xa087('0x27');this[a22_0xa087('0x28')]='.lulo123.';this[a22_0xa087('0x29')]=new HttpClientService_1[(a22_0xa087('0x2a'))]();}[a22_0xa087('0x2b')](){this[a22_0xa087('0x2c')]=JSON[a22_0xa087('0x2d')](fs[a22_0xa087('0x2e')](configFile));this['context']=JSON[a22_0xa087('0x2d')](fs[a22_0xa087('0x2e')](contextFile));this['playerId']=this['config'][a22_0xa087('0x2f')];this[a22_0xa087('0x30')]=process[a22_0xa087('0x31')][a22_0xa087('0x32')]+a22_0xa087('0x33');this[a22_0xa087('0x34')]=this[a22_0xa087('0x30')]+a22_0xa087('0x35');this[a22_0xa087('0x36')]=this[a22_0xa087('0x30')]+a22_0xa087('0x37');this[a22_0xa087('0x38')]=new kodi_rpc({'url':this['kodiHost'],'user':this['kodiUser'],'password':this['kodiPassword']});this[a22_0xa087('0x39')]();this[a22_0xa087('0x3a')]();this[a22_0xa087('0x3b')]();this['loadMediaList']();setInterval(function(){this[a22_0xa087('0x3c')]();}[a22_0xa087('0x3d')](this),0x2710);setInterval(function(){this[a22_0xa087('0x3a')]();}[a22_0xa087('0x3d')](this),0x493e0);}[a22_0xa087('0x39')](){}[a22_0xa087('0x3a')](){this[a22_0xa087('0x38')]['playlist'][a22_0xa087('0x3e')](0x1)[a22_0xa087('0x5')](function(_0xfc3595){const _0x2e0249=JSON[a22_0xa087('0x3f')](_0xfc3595);const _0x2ff4c1={'player_id':this['playerId'],'device_uuid':this[a22_0xa087('0x2c')]['deviceUuid'],'network_info':JSON[a22_0xa087('0x3f')](os['networkInterfaces']()),'firmware_info':JSON[a22_0xa087('0x3f')](this[a22_0xa087('0x40')]),'playlist':_0x2e0249,'playing_item':'','status':0x0};this[a22_0xa087('0x29')]['post']('http://restapi.lulo.run/player_devices/register',_0x2ff4c1,![])[a22_0xa087('0x5')](function(_0x34f65e){console['log'](a22_0xa087('0x41')+Date());})[a22_0xa087('0x42')](function(_0x2f653f){});console[a22_0xa087('0x43')](_0x2ff4c1);}[a22_0xa087('0x3d')](this));const _0x138bc6=this[a22_0xa087('0x2c')]['deviceUuid'];if(!_0x138bc6||_0x138bc6==''){this[a22_0xa087('0x2c')][a22_0xa087('0x44')]=uuidv4();this[a22_0xa087('0x2c')]={'deviceUuid':this[a22_0xa087('0x2c')][a22_0xa087('0x44')],'playerId':this[a22_0xa087('0x2c')][a22_0xa087('0x2f')]};fs[a22_0xa087('0x45')](configFile,JSON[a22_0xa087('0x3f')](this['config']));}}[a22_0xa087('0x3c')](){console[a22_0xa087('0x43')](a22_0xa087('0x3c'));this[a22_0xa087('0x38')]['player'][a22_0xa087('0x46')]()['then'](function(_0x4e2754){const _0x3eb3cc=_0x4e2754[a22_0xa087('0x47')][a22_0xa087('0x48')];this[a22_0xa087('0x49')](_0x3eb3cc);}[a22_0xa087('0x3d')](this))[a22_0xa087('0x42')](function(_0x547062){console[a22_0xa087('0x43')](_0x547062);this[a22_0xa087('0x49')](_0x547062);}['bind'](this));}['reportStatus'](_0x5cd55f){console[a22_0xa087('0x43')](a22_0xa087('0x4a')+_0x5cd55f);const _0x2b658a={'player_id':this['playerId'],'device_uuid':this[a22_0xa087('0x2c')][a22_0xa087('0x44')],'status':_0x5cd55f!=''&&_0x5cd55f!=null?0x1:0x0,'playing_item':_0x5cd55f};this[a22_0xa087('0x29')]['post'](a22_0xa087('0x4b'),_0x2b658a,![])[a22_0xa087('0x5')](function(_0x1dcd38){console[a22_0xa087('0x43')]('reportStatusResponse:\x20'+Date());})[a22_0xa087('0x42')](function(_0x110eb5){});}['checkFolders'](){fsExtra[a22_0xa087('0x4c')](this[a22_0xa087('0x17')],_0x44d6ae=>{});fsExtra[a22_0xa087('0x4c')](this[a22_0xa087('0x4d')],_0x185a52=>{});fsExtra['ensureDir'](this[a22_0xa087('0x1a')],_0x1c7fae=>{});}[a22_0xa087('0x4e')](){const _0x3d3c41=format(this['playListServiceURL'],this[a22_0xa087('0x2f')]);console[a22_0xa087('0x43')](_0x3d3c41);request({'url':_0x3d3c41,'json':!![]},function(_0x23dc18,_0x403beb,_0x5e2cfa){console[a22_0xa087('0x43')](a22_0xa087('0x4f'));console['log'](_0x5e2cfa);this['newPlayList']=_0x5e2cfa;this[a22_0xa087('0x20')]=this['hasPlayListChanged']();fsExtra[a22_0xa087('0x50')](this[a22_0xa087('0x4d')]);this['downloadFiles']=[];this[a22_0xa087('0x22')]=[];this[a22_0xa087('0x1f')]=0x0;for(const _0x474e99 in _0x5e2cfa){this['downloadFiles'][a22_0xa087('0x51')](_0x5e2cfa[_0x474e99]);}console[a22_0xa087('0x43')](a22_0xa087('0x52')+this[a22_0xa087('0x21')][a22_0xa087('0x53')]);if(this[a22_0xa087('0x21')][a22_0xa087('0x53')]>0x0){this[a22_0xa087('0x54')]();}}[a22_0xa087('0x3d')](this));}[a22_0xa087('0x55')](){if(fsExtra[a22_0xa087('0x56')](this[a22_0xa087('0x4d')])){fsExtra['emptyDirSync'](this[a22_0xa087('0x4d')]);}if(fsExtra[a22_0xa087('0x56')](this['filesFolder'])){fsExtra[a22_0xa087('0x50')](this[a22_0xa087('0x1a')]);}if(!fsExtra[a22_0xa087('0x56')](this[a22_0xa087('0x1c')])){fsExtra[a22_0xa087('0x57')](this[a22_0xa087('0x1c')]);}if(!fsExtra[a22_0xa087('0x56')](this['m3uFile'])){fsExtra['removeSync'](this[a22_0xa087('0x1e')]);}this[a22_0xa087('0x4e')]();}[a22_0xa087('0x58')](){const _0x57d2c0=JSON['stringify'](this[a22_0xa087('0x23')]);try{if(!fsExtra[a22_0xa087('0x56')](this[a22_0xa087('0x1c')])){return!![];}else{const _0xf820fe=fsExtra[a22_0xa087('0x2e')](this[a22_0xa087('0x1c')])[a22_0xa087('0x59')]();if(_0xf820fe!=_0x57d2c0){return!![];}}}catch(_0x460788){console[a22_0xa087('0x43')](_0x460788);}return![];}[a22_0xa087('0x54')](){console['log']('this.currentFile:\x20'+this[a22_0xa087('0x1f')]+a22_0xa087('0x5a')+this[a22_0xa087('0x21')][a22_0xa087('0x53')]);if(this[a22_0xa087('0x1f')]>=this[a22_0xa087('0x21')][a22_0xa087('0x53')]){this[a22_0xa087('0x5b')]();return;}const _0x1c0d8f=String(this[a22_0xa087('0x21')][this[a22_0xa087('0x1f')]][a22_0xa087('0x5c')]);const _0x61e689=this[a22_0xa087('0x21')][this[a22_0xa087('0x1f')]]['media_type'];let _0x124052=_0x1c0d8f['substring'](_0x1c0d8f[a22_0xa087('0x5d')]('/')+0x1);const _0x2e21a0=_0x124052[a22_0xa087('0x5e')]('.')[a22_0xa087('0x5f')](0x0,-0x1)[a22_0xa087('0x60')]('.');let _0x32d8e9=this[a22_0xa087('0x30')]+_0x1c0d8f;const _0x44eec1=_0x32d8e9[a22_0xa087('0x5e')]('.')[a22_0xa087('0x5f')](0x0,-0x1)[a22_0xa087('0x60')]('.');if(_0x61e689==a22_0xa087('0x61')){_0x124052=_0x124052+a22_0xa087('0x62');}else if(_0x61e689==a22_0xa087('0x63')){_0x124052=_0x2e21a0+a22_0xa087('0x62');_0x32d8e9=_0x44eec1+'.mp4';}console[a22_0xa087('0x43')](a22_0xa087('0x64'));console[a22_0xa087('0x43')](_0x1c0d8f);console[a22_0xa087('0x43')](_0x61e689);console[a22_0xa087('0x43')](_0x124052);console[a22_0xa087('0x43')](_0x32d8e9);console['log'](_0x2e21a0);console[a22_0xa087('0x43')](_0x44eec1);console[a22_0xa087('0x43')](a22_0xa087('0x64'));if(fsExtra[a22_0xa087('0x56')](this[a22_0xa087('0x4d')]+_0x124052)){this[a22_0xa087('0x65')](this[a22_0xa087('0x4d')]+_0x124052)[a22_0xa087('0x5')](function(_0x205e01){if(_0x205e01){this[a22_0xa087('0x1f')]++;}else{this[a22_0xa087('0x20')]=!![];}this[a22_0xa087('0x54')]();}[a22_0xa087('0x3d')](this));}else if(fsExtra['existsSync'](this['filesFolder']+_0x124052)){this[a22_0xa087('0x65')](this[a22_0xa087('0x1a')]+_0x124052)[a22_0xa087('0x5')](function(_0x8b0a7d){if(_0x8b0a7d){fsExtra['copySync'](this['filesFolder']+_0x124052,this[a22_0xa087('0x4d')]+_0x124052);this[a22_0xa087('0x1f')]++;}else{this[a22_0xa087('0x20')]=!![];}this[a22_0xa087('0x54')]();}[a22_0xa087('0x3d')](this));}else{console[a22_0xa087('0x43')](a22_0xa087('0x66')+_0x32d8e9);this['playlistChanged']=!![];if(_0x61e689==a22_0xa087('0x61')){this[a22_0xa087('0x67')](_0x1c0d8f);}else{this['downloader'](_0x32d8e9,_0x124052,_0x61e689);}}}['checkVideo'](_0x5a231f){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0xa087('0x43')](a22_0xa087('0x68')+_0x5a231f);const _0x155dc5=yield mediainfo(_0x5a231f)['catch'](_0x4e6e7c=>{console['log'](_0x4e6e7c);fsExtra[a22_0xa087('0x57')](_0x5a231f);return![];});const _0x249b33=_0x155dc5[a22_0xa087('0x69')]['track'][a22_0xa087('0x53')]>0x1&&_0x155dc5[a22_0xa087('0x69')]['track'][0x1]['@type']==a22_0xa087('0x6a');if(!_0x249b33){fsExtra[a22_0xa087('0x57')](_0x5a231f);}console[a22_0xa087('0x43')](a22_0xa087('0x6b')+_0x249b33);return _0x249b33;});}['downloader'](_0x43eaec,_0xec48ac,_0xa7179d){const _0x5202d7=new Downloader();console[a22_0xa087('0x43')](_0x43eaec);console[a22_0xa087('0x43')](_0xec48ac);console[a22_0xa087('0x43')](_0xa7179d);const _0x5b2bd4=_0x5202d7[a22_0xa087('0x54')](_0x43eaec,this[a22_0xa087('0x4d')]+_0xec48ac);urlExists(_0x43eaec,function(_0x3b0f08,_0x37b65f){if(_0x37b65f){if(this['failDownloadFiles'][a22_0xa087('0x6c')](this[a22_0xa087('0x1f')])){const _0x108e5b=this[a22_0xa087('0x22')]['indexOf'](this[a22_0xa087('0x1f')]);if(_0x108e5b>-0x1){this[a22_0xa087('0x22')][a22_0xa087('0x6d')](_0x108e5b,0x1);}}console[a22_0xa087('0x43')](a22_0xa087('0x6e')+_0x43eaec);_0x5b2bd4[a22_0xa087('0x6f')]();}else{if(!this[a22_0xa087('0x22')]['includes'](this['currentFile'])){this['failDownloadFiles'][a22_0xa087('0x51')](this[a22_0xa087('0x1f')]);}console[a22_0xa087('0x43')]('Error:\x20'+_0x43eaec);this['currentFile']++;this[a22_0xa087('0x54')]();}}[a22_0xa087('0x3d')](this));_0x5b2bd4['on'](a22_0xa087('0x6f'),function(_0x5b2bd4){console[a22_0xa087('0x43')](a22_0xa087('0x70')+_0x43eaec);});_0x5b2bd4['on']('error',function(_0x5b2bd4){console[a22_0xa087('0x43')](a22_0xa087('0x71'));this[a22_0xa087('0x54')]();}[a22_0xa087('0x3d')](this));_0x5b2bd4['on']('end',function(_0x5b2bd4){console['log'](a22_0xa087('0x72'));console[a22_0xa087('0x43')](a22_0xa087('0x73')+_0xec48ac);console[a22_0xa087('0x43')](a22_0xa087('0x74')+_0xa7179d);this[a22_0xa087('0x65')](this['tempFolder']+_0xec48ac)[a22_0xa087('0x5')](function(_0x4bc316){if(_0x4bc316){this['currentFile']++;}this['download']();}[a22_0xa087('0x3d')](this));}[a22_0xa087('0x3d')](this));_0x5b2bd4['on'](a22_0xa087('0x75'),function(_0x5b2bd4){console['log'](a22_0xa087('0x75'));});_0x5b2bd4['on']('destroyed',function(_0x5b2bd4){console[a22_0xa087('0x43')](a22_0xa087('0x76'));});_0x5b2bd4['on'](a22_0xa087('0x77'),function(_0x5b2bd4){console[a22_0xa087('0x43')]('retry');});}[a22_0xa087('0x78')](_0x19fcec,_0x2c6429,_0x3f3d38,_0x43cdb7){console[a22_0xa087('0x43')](a22_0xa087('0x78'));console['log'](_0x19fcec);const _0x387b10=!![];let _0x1f648a=0x0;const _0x30f3ea='';console[a22_0xa087('0x43')](a22_0xa087('0x79')+_0x19fcec+a22_0xa087('0x7a')+_0x2c6429);if(_0x1f648a){if(_0x1f648a>0x5){_0x43cdb7(a22_0xa087('0x7b'),_0x19fcec,_0x3f3d38,null);return;}}else{_0x1f648a=0x0;}const _0x312a08=this['tempFolder']+_0x2c6429;let _0x428146;if(_0x43cdb7===undefined){console[a22_0xa087('0x43')](a22_0xa087('0x7c')+_0x19fcec+'\x20to\x20'+_0x312a08);_0x43cdb7=function(_0x4ee101,_0x4b923a){console[a22_0xa087('0x43')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x4ee101,_0x4b923a);};}http['globalAgent'][a22_0xa087('0x7d')]=0x64;const _0x3ee56b={'host':url[a22_0xa087('0x2d')](_0x19fcec)[a22_0xa087('0x7e')],'port':0x50,'path':url[a22_0xa087('0x2d')](_0x19fcec)[a22_0xa087('0x7f')],'agent':![]};const _0x33116=http[a22_0xa087('0x80')](_0x3ee56b,function(_0x188b97){let _0x5206e1=0x0;let _0x318a14=0x0;function _0x1351eb(){if(_0x5206e1===undefined){console[a22_0xa087('0x43')](_0x2c6429+a22_0xa087('0x81')+_0x318a14+'/'+'?');}const _0x5c8eb8=_0x318a14/_0x5206e1*0x64;console['log'](_0x2c6429+a22_0xa087('0x82')+_0x5c8eb8+'%\x09'+_0x318a14+'/'+_0x5206e1);}console[a22_0xa087('0x43')](_0x2c6429+'\x20'+_0x188b97[a22_0xa087('0x83')]);switch(_0x188b97[a22_0xa087('0x83')]){case 0xc8:_0x5206e1=_0x188b97['headers'][a22_0xa087('0x84')]||_0x30f3ea;fs[a22_0xa087('0x85')](_0x312a08,function(_0x3f0d74,_0xf7b3e1){if(!_0x3f0d74){console[a22_0xa087('0x43')]('Have\x20already\x20downloaded\x20'+_0x312a08);if(_0xf7b3e1['size']==_0x5206e1){console[a22_0xa087('0x43')](a22_0xa087('0x86')+_0x5206e1+')');console[a22_0xa087('0x43')]('Redownloading');}else{console[a22_0xa087('0x43')](a22_0xa087('0x87')+_0xf7b3e1['size']+')\x20vs\x20New('+_0x5206e1+')');}}_0x428146=fs[a22_0xa087('0x88')](_0x312a08);_0x188b97[a22_0xa087('0x89')](_0x428146);_0x188b97['on'](a22_0xa087('0x8a'),function(_0x4d64ff){_0x318a14+=_0x4d64ff[a22_0xa087('0x53')];_0x1351eb();});_0x33116['on'](a22_0xa087('0x8b'),function(_0x3f0d74){console[a22_0xa087('0x43')](a22_0xa087('0x8c'));console[a22_0xa087('0x43')](_0x3f0d74);});_0x428146['on'](a22_0xa087('0x8d'),function(){console[a22_0xa087('0x43')](a22_0xa087('0x8e')+_0x19fcec+'\x20to\x20'+_0x2c6429);_0x43cdb7(null,_0x2c6429,_0x3f3d38,_0x2c6429);}[a22_0xa087('0x3d')](this));});break;case 0x12e:const _0x28cc46=_0x188b97[a22_0xa087('0x8f')][a22_0xa087('0x90')];console[a22_0xa087('0x43')](a22_0xa087('0x91')+_0x19fcec+a22_0xa087('0x7a')+_0x28cc46);if(_0x1f648a<0x5){this[a22_0xa087('0x78')](_0x28cc46,_0x2c6429,_0x43cdb7,_0x1f648a++);}else{console[a22_0xa087('0x8b')](a22_0xa087('0x92')+_0x19fcec+'.');_0x43cdb7(a22_0xa087('0x93'),null,null,null);}return;case 0x194:console[a22_0xa087('0x43')]('File\x20Not\x20Found\x20'+_0x19fcec);default:console['log'](a22_0xa087('0x94')+_0x19fcec+a22_0xa087('0x95')+_0x188b97[a22_0xa087('0x83')]);_0x33116[a22_0xa087('0x96')]();_0x43cdb7(_0x188b97[a22_0xa087('0x83')],null,null,null);return;}})['on']('error',function(_0x2749a7){console[a22_0xa087('0x43')](a22_0xa087('0x97')+_0x19fcec+'\x20'+_0x2749a7[a22_0xa087('0x98')]);_0x43cdb7(_0x2749a7,null,null,null);});}[a22_0xa087('0x99')](_0x379d49,_0x546db5,_0xb25e71,_0x742e10){console['log'](a22_0xa087('0x99'));console['log'](_0x379d49);console[a22_0xa087('0x43')](_0x546db5);console[a22_0xa087('0x43')](_0xb25e71);console[a22_0xa087('0x43')](_0x742e10);if(_0xb25e71==a22_0xa087('0x63')){const _0x3a4a6e=this['downloadFiles'][this[a22_0xa087('0x1f')]]['duration']!=null?this[a22_0xa087('0x21')][this[a22_0xa087('0x1f')]]['duration']:0x1e;this['createImageVideo'](_0x742e10,_0x3a4a6e);}else if(_0xb25e71==a22_0xa087('0x9a')){if(_0x379d49==null&&_0x546db5!=''){this[a22_0xa087('0x1f')]++;}this[a22_0xa087('0x54')]();}console[a22_0xa087('0x43')](this[a22_0xa087('0x1f')]);}[a22_0xa087('0x9b')](_0x1b6ebc,_0x25b4ef,_0x252ab8){progress(request(_0x1b6ebc),{})['on'](a22_0xa087('0x9c'),function(_0x2bf9dd){console['log'](_0x2bf9dd);})['on'](a22_0xa087('0x8b'),function(_0x3eeceb){console[a22_0xa087('0x43')](a22_0xa087('0x9d'));this[a22_0xa087('0x54')]();})['on'](a22_0xa087('0x72'),function(){console[a22_0xa087('0x43')](a22_0xa087('0x73')+_0x25b4ef);console[a22_0xa087('0x43')](a22_0xa087('0x74')+_0x252ab8);if(_0x252ab8==a22_0xa087('0x63')){const _0x2d3e98=this['downloadFiles'][this[a22_0xa087('0x1f')]]['duration']!=null?this[a22_0xa087('0x21')][this[a22_0xa087('0x1f')]][a22_0xa087('0x9e')]:0x1e;this[a22_0xa087('0x9f')](_0x25b4ef,_0x2d3e98);}else if(_0x252ab8==a22_0xa087('0x9a')){this['currentFile']++;this[a22_0xa087('0x54')]();}}[a22_0xa087('0x3d')](this))[a22_0xa087('0x89')](fs[a22_0xa087('0x88')](this[a22_0xa087('0x4d')]+_0x25b4ef));}[a22_0xa087('0x9f')](_0x4970fe,_0x4bd470=0x1e){const _0x5cc9d7=this[a22_0xa087('0x4d')]+_0x4970fe;console[a22_0xa087('0x43')](_0x5cc9d7);console['log'](_0x4970fe);const _0x124b32=_0x4970fe[a22_0xa087('0x5e')]('.')['slice'](0x0,-0x1)[a22_0xa087('0x60')]('.');const _0xaede56='ffmpeg';const _0xdd3c7e=['-y','-r','1/2',a22_0xa087('0xa0'),'1',a22_0xa087('0xa1'),'glob','-i',_0x5cc9d7,'-t',String(_0x4bd470),a22_0xa087('0xa2'),a22_0xa087('0xa3'),'-pix_fmt','yuv420p','-r','25',a22_0xa087('0xa4'),a22_0xa087('0xa5'),this[a22_0xa087('0x4d')]+_0x124b32+a22_0xa087('0x62')];const _0x3ceb77=spawn(_0xaede56,_0xdd3c7e);_0x3ceb77['stdout']['on'](a22_0xa087('0x8a'),function(_0x9f2e0f){console[a22_0xa087('0x43')]('Converting\x20'+_0x5cc9d7);});_0x3ceb77[a22_0xa087('0xa6')]['on'](a22_0xa087('0x8a'),function(_0x248887){console[a22_0xa087('0x43')](a22_0xa087('0xa7')+_0x248887);}[a22_0xa087('0x3d')](this));_0x3ceb77['on'](a22_0xa087('0xa8'),function(){console[a22_0xa087('0x43')](a22_0xa087('0xa9'));this['currentFile']++;this['download']();}[a22_0xa087('0x3d')](this));}[a22_0xa087('0x67')](_0x293f3f){const _0x44f097=this[a22_0xa087('0x4d')]+'/'+_0x293f3f+a22_0xa087('0x62');const _0x1cccec=youtubedl(a22_0xa087('0xaa')+_0x293f3f,[a22_0xa087('0xab')],{'cwd':__dirname});_0x1cccec['on'](a22_0xa087('0xac'),function(_0xcbaf69){console[a22_0xa087('0x43')](a22_0xa087('0xad'));console['log'](a22_0xa087('0xae')+_0xcbaf69[a22_0xa087('0xaf')]);console[a22_0xa087('0x43')](a22_0xa087('0xb0')+_0xcbaf69[a22_0xa087('0xb1')]);});_0x1cccec['on'](a22_0xa087('0xb2'),function complete(_0x4258fc){'use strict';console[a22_0xa087('0x43')](a22_0xa087('0xae')+_0x4258fc[a22_0xa087('0xaf')]+a22_0xa087('0xb3'));});_0x1cccec['on']('end',function(){console[a22_0xa087('0x43')]('finished\x20youtube\x20downloading!');this[a22_0xa087('0x65')](_0x44f097)[a22_0xa087('0x5')](function(_0x25b1b3){if(_0x25b1b3){this[a22_0xa087('0x1f')]++;}this[a22_0xa087('0x54')]();}[a22_0xa087('0x3d')](this));}['bind'](this));_0x1cccec[a22_0xa087('0x89')](fs['createWriteStream'](_0x44f097));}[a22_0xa087('0x5b')](){console[a22_0xa087('0x43')](a22_0xa087('0xb4'));if(this[a22_0xa087('0x20')]){if(this[a22_0xa087('0x22')][a22_0xa087('0x53')]==0x0){fs[a22_0xa087('0x45')](this[a22_0xa087('0x1c')],JSON[a22_0xa087('0x3f')](this[a22_0xa087('0x23')]));let _0x13efa1=a22_0xa087('0xb5')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x3696b3 in this['downloadFiles']){const _0xe70161=this[a22_0xa087('0x21')][_0x3696b3][a22_0xa087('0x5c')];const _0x7673a0=this[a22_0xa087('0x21')][_0x3696b3][a22_0xa087('0xb6')];const _0x185ec9=_0xe70161['substring'](_0xe70161[a22_0xa087('0x5d')]('/')+0x1);let _0x5ca9a0=_0x185ec9['split']('.')[a22_0xa087('0x5f')](0x0,-0x1)[a22_0xa087('0x60')]('.');if(_0x7673a0==a22_0xa087('0x61')){_0x5ca9a0=_0xe70161;}_0x13efa1+=a22_0xa087('0xb7')+_0x5ca9a0+a22_0xa087('0x62')+'\x0d\x0a';}fsExtra[a22_0xa087('0x50')](this['filesFolder']);fsExtra[a22_0xa087('0xb8')](this[a22_0xa087('0x4d')],this[a22_0xa087('0x1a')]);fsExtra[a22_0xa087('0x45')](this[a22_0xa087('0x1e')],_0x13efa1);fsExtra[a22_0xa087('0x50')](this['tempFolder']);console[a22_0xa087('0x43')](a22_0xa087('0xb9'));this[a22_0xa087('0xba')]();}else{console[a22_0xa087('0x43')](a22_0xa087('0xbb'));this[a22_0xa087('0x1f')]=0x0;setTimeout(function(){this[a22_0xa087('0x54')]();}['bind'](this),0x1388);}}else{console[a22_0xa087('0x43')]('No\x20playlist\x20changes.');}}[a22_0xa087('0xba')](){this['jsonrpcClient']('Playlist.Clear',{'playlistid':0x1},function(_0x32183f){console[a22_0xa087('0x43')](a22_0xa087('0xbc'));console[a22_0xa087('0x43')](_0x32183f);this[a22_0xa087('0xbd')]('Playlist.Add',{'item':{'file':a22_0xa087('0xbe')},'playlistid':0x1},function(_0x32183f){console['log']('Playlist.Added');console[a22_0xa087('0x43')](_0x32183f);this[a22_0xa087('0xbd')](a22_0xa087('0xbf'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x32183f){console[a22_0xa087('0x43')]('Playlist.Opened');console[a22_0xa087('0x43')](_0x32183f);}[a22_0xa087('0x3d')](this));}[a22_0xa087('0x3d')](this));}[a22_0xa087('0x3d')](this));}[a22_0xa087('0xc0')](){exec(a22_0xa087('0xc1'),function(_0x2ef6ee){console['log'](_0x2ef6ee);});}['updateSettings'](){const _0x584a62=format(this[a22_0xa087('0x36')],this[a22_0xa087('0x2f')]);console[a22_0xa087('0x43')](_0x584a62);request({'url':_0x584a62,'json':!![]},function(_0x3125c3,_0x25cba1,_0x2261aa){if(_0x2261aa[a22_0xa087('0x53')]>0x0){const _0x423628=_0x2261aa[0x0];const _0x340d70=_0x423628[a22_0xa087('0xc2')];const _0x4cc8d4=_0x423628['header_active']==0x1;this['setRss'](_0x340d70);this[a22_0xa087('0xc3')](_0x4cc8d4);}console[a22_0xa087('0x43')](_0x2261aa);}[a22_0xa087('0x3d')](this));}['setRss'](_0x2bfa8e){const _0x2f6be3=_0x2bfa8e!=null&&_0x2bfa8e!='';const _0x2c638d=a22_0xa087('0xc4');const _0x2a6589=fsExtra[a22_0xa087('0x2e')](_0x2c638d);console['log']('xmlContent:\x20'+_0x2a6589);const _0x356660=require('xml2js');const _0x370215=_0x356660[a22_0xa087('0xc5')];_0x370215(_0x2a6589,function(_0x152ca9,_0x15dcde){console[a22_0xa087('0x43')](a22_0xa087('0xc6'),_0x152ca9);console[a22_0xa087('0x43')](a22_0xa087('0xc7'),_0x15dcde);_0x15dcde[a22_0xa087('0xc8')][a22_0xa087('0xc9')][0x0]['feed'][0x0]['_']=_0x2bfa8e;const _0x343c5f=new _0x356660['Builder']();const _0x27bed2=_0x343c5f['buildObject'](_0x15dcde);console[a22_0xa087('0x43')](a22_0xa087('0xca'),_0x27bed2);fsExtra[a22_0xa087('0x45')](_0x2c638d,_0x27bed2);});exec(a22_0xa087('0xcb'),function(_0x5ee229){console[a22_0xa087('0x43')](_0x5ee229);});this['jsonrpcClient'](a22_0xa087('0xcc'),{'setting':a22_0xa087('0xcd'),'value':_0x2f6be3},function(_0xcdaf04){console['log'](a22_0xa087('0xce'));console[a22_0xa087('0x43')](_0xcdaf04);}[a22_0xa087('0x3d')](this));}[a22_0xa087('0xc3')](_0x11d31b){this[a22_0xa087('0xbd')]('Settings.SetSettingValue',{'setting':'videoplayer.usedisplayasclock','value':_0x11d31b},function(_0x522a88){console[a22_0xa087('0x43')]('enableClock:\x20');console[a22_0xa087('0x43')](_0x522a88);}['bind'](this));}[a22_0xa087('0xbd')](_0x34ce1b,_0x385ad3,_0x5d5288){const _0x4b5364={'jsonrpc':a22_0xa087('0xcf'),'method':_0x34ce1b,'params':_0x385ad3,'id':0x1};this[a22_0xa087('0x29')][a22_0xa087('0xd0')](this['kodiHost']+a22_0xa087('0xd1'),_0x4b5364,![],{'user':this[a22_0xa087('0x26')],'pass':this[a22_0xa087('0x28')]})['then'](function(_0x47d144){_0x5d5288(_0x47d144);})['catch'](function(_0x2980b7){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;