var a22_0x3449=['failDownloadFiles','httpClientService','HttpClientService','readFileSync','playerId','baseURL','env','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','http://localhost','lulo','checkDependencies','registerClient','loadMediaList','getStatus','bind','playlist','getItems','stringify','config','networkInterfaces','context','post','http://restapi.lulo.run/player_devices/register','log','catch','deviceUuid','writeFileSync','player','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','ensureDir','tempFolder','newPlayList','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','reboot','System','this.currentFile:\x20','finishProcess','path','media_type','lastIndexOf','split','join','youtube_single','.mp4','image','**********+','playlistChanged','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','includes','splice','downloading:\x20','Error:\x20','start','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','checkVideo','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','parse','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','size','Redownloading',')\x20vs\x20New(','createWriteStream','pipe','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','duration','video','downloadRequestFile','progress','createImageVideo','slice','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','yuv420p','-vf','scale=1920:1080','data','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','Rebooting..','now','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','fs-extra','request','child_process','spawn','string-template','uuid/v4','config.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','temp/','files/','playListFile','playlist.txt','m3uFile','filesFolder','currentFile','downloadFiles'];(function(_0x5b5b66,_0x23c84f){var _0x405844=function(_0x23a60b){while(--_0x23a60b){_0x5b5b66['push'](_0x5b5b66['shift']());}};_0x405844(++_0x23c84f);}(a22_0x3449,0x97));var a22_0x2685=function(_0x500e16,_0x51085e){_0x500e16=_0x500e16-0x0;var _0x380b61=a22_0x3449[_0x500e16];return _0x380b61;};'use strict';var __awaiter=this&&this[a22_0x2685('0x0')]||function(_0x417b8c,_0x48e477,_0x289668,_0x692719){function _0x1bf221(_0xd3e083){return _0xd3e083 instanceof _0x289668?_0xd3e083:new _0x289668(function(_0x2d80c6){_0x2d80c6(_0xd3e083);});}return new(_0x289668||(_0x289668=Promise))(function(_0x206a48,_0x90a06f){function _0x51506c(_0x301928){try{_0x473c52(_0x692719[a22_0x2685('0x1')](_0x301928));}catch(_0x2f2cc4){_0x90a06f(_0x2f2cc4);}}function _0x393875(_0x2c69f0){try{_0x473c52(_0x692719['throw'](_0x2c69f0));}catch(_0x3d1fec){_0x90a06f(_0x3d1fec);}}function _0x473c52(_0x10101a){_0x10101a['done']?_0x206a48(_0x10101a[a22_0x2685('0x2')]):_0x1bf221(_0x10101a[a22_0x2685('0x2')])[a22_0x2685('0x3')](_0x51506c,_0x393875);}_0x473c52((_0x692719=_0x692719[a22_0x2685('0x4')](_0x417b8c,_0x48e477||[]))[a22_0x2685('0x1')]());});};Object[a22_0x2685('0x5')](exports,a22_0x2685('0x6'),{'value':!![]});const HttpClientService_1=require(a22_0x2685('0x7'));const mediainfo=require(a22_0x2685('0x8'));const fs=require('fs');const url=require('url');const http=require('http');const fsExtra=require(a22_0x2685('0x9'));const request=require(a22_0x2685('0xa'));const progress=require('request-progress');const spawn=require(a22_0x2685('0xb'))[a22_0x2685('0xc')];const isImage=require('is-image');const format=require(a22_0x2685('0xd'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x2685('0xe'));const configFile=a22_0x2685('0xf');const contextFile='context.json';const urlExists=require(a22_0x2685('0x10'));const kodi_rpc=require(a22_0x2685('0x11'));const Downloader=require(a22_0x2685('0x12'));class SyncPlaylistsService{constructor(){this[a22_0x2685('0x13')]=a22_0x2685('0x14');this['tempFolder']=this['mediaFolder']+a22_0x2685('0x15');this['filesFolder']=this[a22_0x2685('0x13')]+a22_0x2685('0x16');this[a22_0x2685('0x17')]=this[a22_0x2685('0x13')]+a22_0x2685('0x18');this[a22_0x2685('0x19')]=this[a22_0x2685('0x1a')]+'lulo_playlist.m3u';this[a22_0x2685('0x1b')]=0x0;this['playlistChanged']=![];this[a22_0x2685('0x1c')]=[];this[a22_0x2685('0x1d')]=[];this['newPlayList']={};this[a22_0x2685('0x1e')]=new HttpClientService_1[(a22_0x2685('0x1f'))]();}['init'](){this['config']=JSON['parse'](fs[a22_0x2685('0x20')](configFile));this['context']=JSON['parse'](fs[a22_0x2685('0x20')](contextFile));this[a22_0x2685('0x21')]=this['config'][a22_0x2685('0x21')];this[a22_0x2685('0x22')]=process[a22_0x2685('0x23')]['WEB_SERVICE_URL']+a22_0x2685('0x24');this[a22_0x2685('0x25')]=this[a22_0x2685('0x22')]+a22_0x2685('0x26');this[a22_0x2685('0x27')]=new kodi_rpc({'url':a22_0x2685('0x28'),'user':a22_0x2685('0x29'),'password':'.lulo123.'});this[a22_0x2685('0x2a')]();this[a22_0x2685('0x2b')]();this['checkFolders']();this[a22_0x2685('0x2c')]();setInterval(function(){this[a22_0x2685('0x2d')]();}[a22_0x2685('0x2e')](this),0x2710);setInterval(function(){this[a22_0x2685('0x2b')]();}[a22_0x2685('0x2e')](this),0x493e0);}[a22_0x2685('0x2a')](){}[a22_0x2685('0x2b')](){this[a22_0x2685('0x27')][a22_0x2685('0x2f')][a22_0x2685('0x30')](0x1)['then'](function(_0x2c63f9){const _0x1a7281=JSON[a22_0x2685('0x31')](_0x2c63f9);const _0x2ba60b={'player_id':this[a22_0x2685('0x21')],'device_uuid':this[a22_0x2685('0x32')]['deviceUuid'],'network_info':JSON[a22_0x2685('0x31')](os[a22_0x2685('0x33')]()),'firmware_info':JSON['stringify'](this[a22_0x2685('0x34')]),'playlist':_0x1a7281,'playing_item':'','status':0x0};this[a22_0x2685('0x1e')][a22_0x2685('0x35')](a22_0x2685('0x36'),_0x2ba60b,![])[a22_0x2685('0x3')](function(_0x12ed35){console[a22_0x2685('0x37')]('register\x20response:\x20'+Date());})[a22_0x2685('0x38')](function(_0x17a157){});console[a22_0x2685('0x37')](_0x2ba60b);}['bind'](this));const _0x1c0566=this[a22_0x2685('0x32')]['deviceUuid'];if(!_0x1c0566||_0x1c0566==''){this[a22_0x2685('0x32')][a22_0x2685('0x39')]=uuidv4();this[a22_0x2685('0x32')]={'deviceUuid':this['config'][a22_0x2685('0x39')],'playerId':this['config'][a22_0x2685('0x21')]};fs[a22_0x2685('0x3a')](configFile,JSON[a22_0x2685('0x31')](this[a22_0x2685('0x32')]));}}[a22_0x2685('0x2d')](){console[a22_0x2685('0x37')]('getStatus');this[a22_0x2685('0x27')][a22_0x2685('0x3b')]['getCurrentlyPlayingVideo']()[a22_0x2685('0x3')](function(_0x311e0f){const _0x428cfa=_0x311e0f['item'][a22_0x2685('0x3c')];this[a22_0x2685('0x3d')](_0x428cfa);}[a22_0x2685('0x2e')](this))[a22_0x2685('0x38')](function(_0x1942fd){console['log'](_0x1942fd);this['reportStatus'](_0x1942fd);}['bind'](this));}[a22_0x2685('0x3d')](_0x566bd9){console['log'](a22_0x2685('0x3e')+_0x566bd9);const _0x4fe16d={'player_id':this[a22_0x2685('0x21')],'device_uuid':this['config'][a22_0x2685('0x39')],'status':_0x566bd9!=''&&_0x566bd9!=null?0x1:0x0,'playing_item':_0x566bd9};this[a22_0x2685('0x1e')][a22_0x2685('0x35')](a22_0x2685('0x3f'),_0x4fe16d,![])[a22_0x2685('0x3')](function(_0x3541f9){console[a22_0x2685('0x37')]('reportStatusResponse:\x20'+Date());})[a22_0x2685('0x38')](function(_0x2193bd){});}['checkFolders'](){fsExtra[a22_0x2685('0x40')](this[a22_0x2685('0x13')],_0x8c66c3=>{});fsExtra[a22_0x2685('0x40')](this[a22_0x2685('0x41')],_0x4faf8f=>{});fsExtra[a22_0x2685('0x40')](this[a22_0x2685('0x1a')],_0x512479=>{});}[a22_0x2685('0x2c')](){const _0x315fd1=format(this[a22_0x2685('0x25')],this[a22_0x2685('0x21')]);console[a22_0x2685('0x37')](_0x315fd1);request({'url':_0x315fd1,'json':!![]},function(_0x2192c4,_0x1b8256,_0x52c08c){console[a22_0x2685('0x37')]('loadMediaList:\x20');console[a22_0x2685('0x37')](_0x52c08c);this[a22_0x2685('0x42')]=_0x52c08c;this['playlistChanged']=this[a22_0x2685('0x43')]();fsExtra[a22_0x2685('0x44')](this[a22_0x2685('0x41')]);this['downloadFiles']=[];this[a22_0x2685('0x1d')]=[];this[a22_0x2685('0x1b')]=0x0;for(const _0x5245f0 in _0x52c08c){this[a22_0x2685('0x1c')][a22_0x2685('0x45')](_0x52c08c[_0x5245f0]);}console['log'](a22_0x2685('0x46')+this[a22_0x2685('0x1c')][a22_0x2685('0x47')]);if(this[a22_0x2685('0x1c')][a22_0x2685('0x47')]>0x0){this[a22_0x2685('0x48')]();}}[a22_0x2685('0x2e')](this));}[a22_0x2685('0x49')](){if(fsExtra[a22_0x2685('0x4a')](this[a22_0x2685('0x41')])){fsExtra[a22_0x2685('0x44')](this[a22_0x2685('0x41')]);}if(fsExtra[a22_0x2685('0x4a')](this[a22_0x2685('0x17')])){fsExtra[a22_0x2685('0x44')](this[a22_0x2685('0x17')]);}if(!fsExtra[a22_0x2685('0x4a')](this[a22_0x2685('0x17')])){fsExtra[a22_0x2685('0x4b')](this[a22_0x2685('0x17')]);}if(!fsExtra[a22_0x2685('0x4a')](this[a22_0x2685('0x19')])){fsExtra[a22_0x2685('0x4b')](this[a22_0x2685('0x19')]);}this[a22_0x2685('0x2c')]();}[a22_0x2685('0x4c')](){this['kodi'][a22_0x2685('0x4d')]['Shutdown']();}['hasPlayListChanged'](){const _0x2bf2b8=JSON[a22_0x2685('0x31')](this[a22_0x2685('0x42')]);try{if(!fsExtra[a22_0x2685('0x4a')](this['playListFile'])){return!![];}else{const _0x33199e=fsExtra[a22_0x2685('0x20')](this['playListFile'])['toString']();if(_0x33199e!=_0x2bf2b8){return!![];}}}catch(_0x394087){console[a22_0x2685('0x37')](_0x394087);}return![];}[a22_0x2685('0x48')](){console[a22_0x2685('0x37')](a22_0x2685('0x4e')+this['currentFile']+'\x20of\x20'+this[a22_0x2685('0x1c')][a22_0x2685('0x47')]);if(this['currentFile']>=this[a22_0x2685('0x1c')][a22_0x2685('0x47')]){this[a22_0x2685('0x4f')]();return;}const _0x35016b=String(this[a22_0x2685('0x1c')][this[a22_0x2685('0x1b')]][a22_0x2685('0x50')]);const _0x1876b0=this[a22_0x2685('0x1c')][this[a22_0x2685('0x1b')]][a22_0x2685('0x51')];let _0x121fc9=_0x35016b['substring'](_0x35016b[a22_0x2685('0x52')]('/')+0x1);const _0x3daca7=_0x121fc9[a22_0x2685('0x53')]('.')['slice'](0x0,-0x1)[a22_0x2685('0x54')]('.');let _0x6f4b58=this[a22_0x2685('0x22')]+_0x35016b;const _0x404bb7=_0x6f4b58[a22_0x2685('0x53')]('.')['slice'](0x0,-0x1)[a22_0x2685('0x54')]('.');if(_0x1876b0==a22_0x2685('0x55')){_0x121fc9=_0x121fc9+a22_0x2685('0x56');}else if(_0x1876b0==a22_0x2685('0x57')){_0x121fc9=_0x3daca7+a22_0x2685('0x56');_0x6f4b58=_0x404bb7+a22_0x2685('0x56');}console[a22_0x2685('0x37')](a22_0x2685('0x58'));console[a22_0x2685('0x37')](_0x35016b);console[a22_0x2685('0x37')](_0x1876b0);console[a22_0x2685('0x37')](_0x121fc9);console[a22_0x2685('0x37')](_0x6f4b58);console[a22_0x2685('0x37')](_0x3daca7);console['log'](_0x404bb7);console[a22_0x2685('0x37')](a22_0x2685('0x58'));if(fsExtra[a22_0x2685('0x4a')](this['tempFolder']+_0x121fc9)){this['checkVideo'](this[a22_0x2685('0x41')]+_0x121fc9)[a22_0x2685('0x3')](function(_0x248b14){if(_0x248b14){this['currentFile']++;}else{this[a22_0x2685('0x59')]=!![];}this[a22_0x2685('0x48')]();}['bind'](this));}else if(fsExtra[a22_0x2685('0x4a')](this['filesFolder']+_0x121fc9)){this['checkVideo'](this[a22_0x2685('0x1a')]+_0x121fc9)[a22_0x2685('0x3')](function(_0x288f23){if(_0x288f23){fsExtra[a22_0x2685('0x5a')](this[a22_0x2685('0x1a')]+_0x121fc9,this[a22_0x2685('0x41')]+_0x121fc9);this['currentFile']++;}else{this[a22_0x2685('0x59')]=!![];}this['download']();}['bind'](this));}else{console[a22_0x2685('0x37')](a22_0x2685('0x5b')+_0x6f4b58);this[a22_0x2685('0x59')]=!![];if(_0x1876b0==a22_0x2685('0x55')){this[a22_0x2685('0x5c')](_0x35016b);}else{this[a22_0x2685('0x5d')](_0x6f4b58,_0x121fc9,_0x1876b0);}}}['checkVideo'](_0x5dc2d5){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x2685('0x37')](a22_0x2685('0x5e')+_0x5dc2d5);const _0x90f331=yield mediainfo(_0x5dc2d5)['catch'](_0x586eef=>{console[a22_0x2685('0x37')](_0x586eef);fsExtra['removeSync'](_0x5dc2d5);return![];});const _0x47756c=_0x90f331[a22_0x2685('0x5f')][a22_0x2685('0x60')][a22_0x2685('0x47')]>0x1&&_0x90f331[a22_0x2685('0x5f')][a22_0x2685('0x60')][0x1][a22_0x2685('0x61')]==a22_0x2685('0x62');if(!_0x47756c){fsExtra[a22_0x2685('0x4b')](_0x5dc2d5);}console[a22_0x2685('0x37')]('mediainfo\x20check:'+_0x47756c);return _0x47756c;});}[a22_0x2685('0x5d')](_0x869c62,_0x205de6,_0x390210){const _0x702eb1=new Downloader();console[a22_0x2685('0x37')](_0x869c62);console[a22_0x2685('0x37')](_0x205de6);console[a22_0x2685('0x37')](_0x390210);const _0xdec244=_0x702eb1[a22_0x2685('0x48')](_0x869c62,this[a22_0x2685('0x41')]+_0x205de6);urlExists(_0x869c62,function(_0x4d3265,_0x529b44){if(_0x529b44){if(this[a22_0x2685('0x1d')][a22_0x2685('0x63')](this['currentFile'])){const _0x3ec5fe=this['failDownloadFiles']['indexOf'](this['currentFile']);if(_0x3ec5fe>-0x1){this[a22_0x2685('0x1d')][a22_0x2685('0x64')](_0x3ec5fe,0x1);}}console[a22_0x2685('0x37')](a22_0x2685('0x65')+_0x869c62);_0xdec244['start']();}else{if(!this[a22_0x2685('0x1d')]['includes'](this[a22_0x2685('0x1b')])){this[a22_0x2685('0x1d')][a22_0x2685('0x45')](this['currentFile']);}console[a22_0x2685('0x37')](a22_0x2685('0x66')+_0x869c62);this[a22_0x2685('0x1b')]++;this[a22_0x2685('0x48')]();}}[a22_0x2685('0x2e')](this));_0xdec244['on'](a22_0x2685('0x67'),function(_0xdec244){console['log']('start:\x20'+_0x869c62);});_0xdec244['on'](a22_0x2685('0x68'),function(_0xdec244){console['log'](a22_0x2685('0x69'));this[a22_0x2685('0x48')]();}[a22_0x2685('0x2e')](this));_0xdec244['on'](a22_0x2685('0x6a'),function(_0xdec244){console['log'](a22_0x2685('0x6a'));console[a22_0x2685('0x37')](a22_0x2685('0x6b')+_0x205de6);console[a22_0x2685('0x37')](a22_0x2685('0x6c')+_0x390210);this[a22_0x2685('0x6d')](this[a22_0x2685('0x41')]+_0x205de6)[a22_0x2685('0x3')](function(_0x232279){if(_0x232279){this[a22_0x2685('0x1b')]++;}this[a22_0x2685('0x48')]();}[a22_0x2685('0x2e')](this));}[a22_0x2685('0x2e')](this));_0xdec244['on'](a22_0x2685('0x6e'),function(_0xdec244){console[a22_0x2685('0x37')](a22_0x2685('0x6e'));});_0xdec244['on'](a22_0x2685('0x6f'),function(_0xdec244){console['log'](a22_0x2685('0x6f'));});_0xdec244['on']('retry',function(_0xdec244){console[a22_0x2685('0x37')](a22_0x2685('0x70'));});}[a22_0x2685('0x71')](_0x1ceaf4,_0x242c61,_0x3a2dee,_0x5973ee){console[a22_0x2685('0x37')](a22_0x2685('0x71'));console[a22_0x2685('0x37')](_0x1ceaf4);const _0x12c1bb=!![];let _0x5cf097=0x0;const _0x5b1795='';console[a22_0x2685('0x37')]('Attempting\x20to\x20download\x20'+_0x1ceaf4+a22_0x2685('0x72')+_0x242c61);if(_0x5cf097){if(_0x5cf097>0x5){_0x5973ee(a22_0x2685('0x73'),_0x1ceaf4,_0x3a2dee,null);return;}}else{_0x5cf097=0x0;}const _0x31f687=this['tempFolder']+_0x242c61;let _0x3d7330;if(_0x5973ee===undefined){console['log']('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x1ceaf4+a22_0x2685('0x72')+_0x31f687);_0x5973ee=function(_0x243f21,_0xfdfec9){console[a22_0x2685('0x37')](a22_0x2685('0x74'),_0x243f21,_0xfdfec9);};}http[a22_0x2685('0x75')][a22_0x2685('0x76')]=0x64;const _0x26197a={'host':url['parse'](_0x1ceaf4)['host'],'port':0x50,'path':url[a22_0x2685('0x77')](_0x1ceaf4)[a22_0x2685('0x78')],'agent':![]};const _0x2a6e35=http[a22_0x2685('0x79')](_0x26197a,function(_0x3dc29f){let _0x5279d6=0x0;let _0x1502e0=0x0;function _0x3dcfd5(){if(_0x5279d6===undefined){console[a22_0x2685('0x37')](_0x242c61+a22_0x2685('0x7a')+_0x1502e0+'/'+'?');}const _0x205f1e=_0x1502e0/_0x5279d6*0x64;console['log'](_0x242c61+a22_0x2685('0x7b')+_0x205f1e+'%\x09'+_0x1502e0+'/'+_0x5279d6);}console['log'](_0x242c61+'\x20'+_0x3dc29f[a22_0x2685('0x7c')]);switch(_0x3dc29f[a22_0x2685('0x7c')]){case 0xc8:_0x5279d6=_0x3dc29f[a22_0x2685('0x7d')]['content-length']||_0x5b1795;fs[a22_0x2685('0x7e')](_0x31f687,function(_0x27c620,_0x40d3f0){if(!_0x27c620){console[a22_0x2685('0x37')]('Have\x20already\x20downloaded\x20'+_0x31f687);if(_0x40d3f0[a22_0x2685('0x7f')]==_0x5279d6){console[a22_0x2685('0x37')]('And\x20the\x20file\x20size\x20matches\x20('+_0x5279d6+')');console['log'](a22_0x2685('0x80'));}else{console[a22_0x2685('0x37')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x40d3f0[a22_0x2685('0x7f')]+a22_0x2685('0x81')+_0x5279d6+')');}}_0x3d7330=fs[a22_0x2685('0x82')](_0x31f687);_0x3dc29f[a22_0x2685('0x83')](_0x3d7330);_0x3dc29f['on']('data',function(_0xdd815e){_0x1502e0+=_0xdd815e[a22_0x2685('0x47')];_0x3dcfd5();});_0x2a6e35['on'](a22_0x2685('0x68'),function(_0x27c620){console['log'](a22_0x2685('0x84'));console['log'](_0x27c620);});_0x3d7330['on'](a22_0x2685('0x85'),function(){console[a22_0x2685('0x37')](a22_0x2685('0x86')+_0x1ceaf4+a22_0x2685('0x72')+_0x242c61);_0x5973ee(null,_0x242c61,_0x3a2dee,_0x242c61);}[a22_0x2685('0x2e')](this));});break;case 0x12e:const _0x1c90df=_0x3dc29f['headers'][a22_0x2685('0x87')];console['log'](a22_0x2685('0x88')+_0x1ceaf4+a22_0x2685('0x72')+_0x1c90df);if(_0x5cf097<0x5){this['downloadHTTPFile'](_0x1c90df,_0x242c61,_0x5973ee,_0x5cf097++);}else{console['error'](a22_0x2685('0x89')+_0x1ceaf4+'.');_0x5973ee(a22_0x2685('0x8a'),null,null,null);}return;case 0x194:console[a22_0x2685('0x37')](a22_0x2685('0x8b')+_0x1ceaf4);default:console[a22_0x2685('0x37')](a22_0x2685('0x8c')+_0x1ceaf4+a22_0x2685('0x8d')+_0x3dc29f[a22_0x2685('0x7c')]);_0x2a6e35[a22_0x2685('0x8e')]();_0x5973ee(_0x3dc29f[a22_0x2685('0x7c')],null,null,null);return;}})['on'](a22_0x2685('0x68'),function(_0x1aa06f){console[a22_0x2685('0x37')]('Error\x20Downloading:\x20'+_0x1ceaf4+'\x20'+_0x1aa06f['message']);_0x5973ee(_0x1aa06f,null,null,null);});}['downloadHTTPFileCallback'](_0x2793ee,_0x31d247,_0x5ad1a1,_0x1c2699){console[a22_0x2685('0x37')]('downloadHTTPFileCallback');console[a22_0x2685('0x37')](_0x2793ee);console['log'](_0x31d247);console[a22_0x2685('0x37')](_0x5ad1a1);console[a22_0x2685('0x37')](_0x1c2699);if(_0x5ad1a1=='image'){const _0x262796=this[a22_0x2685('0x1c')][this[a22_0x2685('0x1b')]][a22_0x2685('0x8f')]!=null?this[a22_0x2685('0x1c')][this[a22_0x2685('0x1b')]]['duration']:0x1e;this['createImageVideo'](_0x1c2699,_0x262796);}else if(_0x5ad1a1==a22_0x2685('0x90')){if(_0x2793ee==null&&_0x31d247!=''){this[a22_0x2685('0x1b')]++;}this[a22_0x2685('0x48')]();}console['log'](this['currentFile']);}[a22_0x2685('0x91')](_0x4b55ec,_0x163bb7,_0x2f33b3){progress(request(_0x4b55ec),{})['on'](a22_0x2685('0x92'),function(_0x5f2677){console[a22_0x2685('0x37')](_0x5f2677);})['on']('error',function(_0x1f7b49){console[a22_0x2685('0x37')]('Error\x20downloading\x20file');this[a22_0x2685('0x48')]();})['on'](a22_0x2685('0x6a'),function(){console[a22_0x2685('0x37')](a22_0x2685('0x6b')+_0x163bb7);console['log'](a22_0x2685('0x6c')+_0x2f33b3);if(_0x2f33b3==a22_0x2685('0x57')){const _0x95ef09=this[a22_0x2685('0x1c')][this[a22_0x2685('0x1b')]][a22_0x2685('0x8f')]!=null?this['downloadFiles'][this[a22_0x2685('0x1b')]]['duration']:0x1e;this[a22_0x2685('0x93')](_0x163bb7,_0x95ef09);}else if(_0x2f33b3==a22_0x2685('0x90')){this[a22_0x2685('0x1b')]++;this[a22_0x2685('0x48')]();}}[a22_0x2685('0x2e')](this))[a22_0x2685('0x83')](fs['createWriteStream'](this[a22_0x2685('0x41')]+_0x163bb7));}[a22_0x2685('0x93')](_0x44de0a,_0x2e4029=0x1e){const _0x38c0b9=this[a22_0x2685('0x41')]+_0x44de0a;console[a22_0x2685('0x37')](_0x38c0b9);console[a22_0x2685('0x37')](_0x44de0a);const _0x4f9861=_0x44de0a[a22_0x2685('0x53')]('.')[a22_0x2685('0x94')](0x0,-0x1)[a22_0x2685('0x54')]('.');const _0x5d09de=a22_0x2685('0x95');const _0x1e9792=['-y','-r',a22_0x2685('0x96'),a22_0x2685('0x97'),'1',a22_0x2685('0x98'),a22_0x2685('0x99'),'-i',_0x38c0b9,'-t',String(_0x2e4029),a22_0x2685('0x9a'),a22_0x2685('0x9b'),'-pix_fmt',a22_0x2685('0x9c'),'-r','25',a22_0x2685('0x9d'),a22_0x2685('0x9e'),this[a22_0x2685('0x41')]+_0x4f9861+'.mp4'];const _0x23f620=spawn(_0x5d09de,_0x1e9792);_0x23f620['stdout']['on'](a22_0x2685('0x9f'),function(_0x3ba473){console[a22_0x2685('0x37')](a22_0x2685('0xa0')+_0x38c0b9);});_0x23f620['stderr']['on'](a22_0x2685('0x9f'),function(_0x2de68b){console[a22_0x2685('0x37')](a22_0x2685('0xa1')+_0x2de68b);}[a22_0x2685('0x2e')](this));_0x23f620['on'](a22_0x2685('0xa2'),function(){console['log'](a22_0x2685('0xa3'));this[a22_0x2685('0x1b')]++;this[a22_0x2685('0x48')]();}[a22_0x2685('0x2e')](this));}[a22_0x2685('0x5c')](_0x1b5a04){const _0x3fafb3=this[a22_0x2685('0x41')]+'/'+_0x1b5a04+'.mp4';const _0x2f16f2=youtubedl(a22_0x2685('0xa4')+_0x1b5a04,[a22_0x2685('0xa5')],{'cwd':__dirname});_0x2f16f2['on']('info',function(_0xf8b736){console[a22_0x2685('0x37')](a22_0x2685('0xa6'));console[a22_0x2685('0x37')](a22_0x2685('0xa7')+_0xf8b736[a22_0x2685('0xa8')]);console['log'](a22_0x2685('0xa9')+_0xf8b736['size']);});_0x2f16f2['on'](a22_0x2685('0xaa'),function complete(_0x525dee){'use strict';console[a22_0x2685('0x37')](a22_0x2685('0xa7')+_0x525dee[a22_0x2685('0xa8')]+a22_0x2685('0xab'));});_0x2f16f2['on'](a22_0x2685('0x6a'),function(){console[a22_0x2685('0x37')](a22_0x2685('0xac'));this[a22_0x2685('0x6d')](_0x3fafb3)[a22_0x2685('0x3')](function(_0x29bec2){if(_0x29bec2){this[a22_0x2685('0x1b')]++;}this[a22_0x2685('0x48')]();}[a22_0x2685('0x2e')](this));}[a22_0x2685('0x2e')](this));_0x2f16f2[a22_0x2685('0x83')](fs[a22_0x2685('0x82')](_0x3fafb3));}[a22_0x2685('0x4f')](){console['log']('Finishing');if(this['playlistChanged']){if(this[a22_0x2685('0x1d')][a22_0x2685('0x47')]==0x0){fs[a22_0x2685('0x3a')](this[a22_0x2685('0x17')],JSON[a22_0x2685('0x31')](this[a22_0x2685('0x42')]));let _0x27bbce=a22_0x2685('0xad')+'\x0d\x0a'+a22_0x2685('0xae')+'\x0d\x0a';for(const _0x5965c4 in this[a22_0x2685('0x1c')]){const _0x374c08=this[a22_0x2685('0x1c')][_0x5965c4][a22_0x2685('0x50')];const _0x4aee2b=this['downloadFiles'][_0x5965c4][a22_0x2685('0x51')];const _0xdcbd09=_0x374c08['substring'](_0x374c08[a22_0x2685('0x52')]('/')+0x1);let _0x13264e=_0xdcbd09['split']('.')[a22_0x2685('0x94')](0x0,-0x1)['join']('.');if(_0x4aee2b=='youtube_single'){_0x13264e=_0x374c08;}_0x27bbce+=a22_0x2685('0xaf')+_0x13264e+'.mp4'+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x2685('0x1a')]);fsExtra[a22_0x2685('0x5a')](this['tempFolder'],this[a22_0x2685('0x1a')]);fsExtra[a22_0x2685('0x3a')](this[a22_0x2685('0x19')],_0x27bbce);fsExtra[a22_0x2685('0x44')](this[a22_0x2685('0x41')]);console[a22_0x2685('0x37')](a22_0x2685('0xb0'));const _0x53ca2d=spawn('shutdown',['-r',a22_0x2685('0xb1')]);}else{console[a22_0x2685('0x37')](a22_0x2685('0xb2'));this[a22_0x2685('0x1b')]=0x0;setTimeout(function(){this[a22_0x2685('0x48')]();}['bind'](this),0x1388);}}else{console['log']('No\x20playlist\x20changes.');}}}exports[a22_0x2685('0xb3')]=SyncPlaylistsService;