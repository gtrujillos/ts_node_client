var a22_0x550c=['hasPlayListChanged','emptyDirSync','failDownloadFiles','currentFile','push','Total:\x20','length','reloadMediaList','existsSync','removeSync','toString','download','this.currentFile:\x20','finishProcess','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','Downloading:\x20','downloadYouTube','downloader','checkVideo','media','@type','Video','mediainfo\x20check:','includes','indexOf','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','data','Downloaded\x20','location','Redirect\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','image','duration','createImageVideo','downloadRequestFile','progress','Downloaded:\x20','video','createWriteStream','1/2','-loop','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','Download\x20started','filename:\x20','size:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','media_type','/home/osmc/luloclient/media/files/','copySync','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','done','value','then','defineProperty','__esModule','url','request','request-progress','child_process','spawn','is-image','string-template','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','m3uFile','lulo_playlist.m3u','playlistChanged','downloadFiles','newPlayList','HttpClientService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','http://localhost','lulo','.lulo123.','checkDependencies','checkFolders','loadMediaList','getStatus','bind','registerClient','playlist','getItems','stringify','deviceUuid','networkInterfaces','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','writeFileSync','kodi','player','getCurrentlyPlayingVideo','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','playListServiceURL','loadMediaList:\x20'];(function(_0x40e76c,_0x40c1d2){var _0x30e9a8=function(_0x2b2c52){while(--_0x2b2c52){_0x40e76c['push'](_0x40e76c['shift']());}};_0x30e9a8(++_0x40c1d2);}(a22_0x550c,0x1e6));var a22_0x56ae=function(_0xf34179,_0x5b6b9b){_0xf34179=_0xf34179-0x0;var _0x554d0e=a22_0x550c[_0xf34179];return _0x554d0e;};'use strict';var __awaiter=this&&this[a22_0x56ae('0x0')]||function(_0x34a12b,_0x36c6a6,_0x33748d,_0x3e4c21){function _0x5c685e(_0x3e3156){return _0x3e3156 instanceof _0x33748d?_0x3e3156:new _0x33748d(function(_0x1e9e81){_0x1e9e81(_0x3e3156);});}return new(_0x33748d||(_0x33748d=Promise))(function(_0x292610,_0x151bd2){function _0x558098(_0xd7aec1){try{_0x4ce2f1(_0x3e4c21[a22_0x56ae('0x1')](_0xd7aec1));}catch(_0x948b6c){_0x151bd2(_0x948b6c);}}function _0x29929c(_0x5dd881){try{_0x4ce2f1(_0x3e4c21['throw'](_0x5dd881));}catch(_0x18d5c9){_0x151bd2(_0x18d5c9);}}function _0x4ce2f1(_0x333808){_0x333808[a22_0x56ae('0x2')]?_0x292610(_0x333808[a22_0x56ae('0x3')]):_0x5c685e(_0x333808[a22_0x56ae('0x3')])[a22_0x56ae('0x4')](_0x558098,_0x29929c);}_0x4ce2f1((_0x3e4c21=_0x3e4c21['apply'](_0x34a12b,_0x36c6a6||[]))[a22_0x56ae('0x1')]());});};Object[a22_0x56ae('0x5')](exports,a22_0x56ae('0x6'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a22_0x56ae('0x7'));const http=require('http');const fsExtra=require('fs-extra');const request=require(a22_0x56ae('0x8'));const progress=require(a22_0x56ae('0x9'));const spawn=require(a22_0x56ae('0xa'))[a22_0x56ae('0xb')];const isImage=require(a22_0x56ae('0xc'));const format=require(a22_0x56ae('0xd'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require('uuid/v4');const configFile='config.json';const contextFile='context.json';const urlExists=require(a22_0x56ae('0xe'));const kodi_rpc=require(a22_0x56ae('0xf'));const Downloader=require(a22_0x56ae('0x10'));class SyncPlaylistsService{constructor(){this[a22_0x56ae('0x11')]=a22_0x56ae('0x12');this[a22_0x56ae('0x13')]=this['mediaFolder']+a22_0x56ae('0x14');this[a22_0x56ae('0x15')]=this[a22_0x56ae('0x11')]+a22_0x56ae('0x16');this[a22_0x56ae('0x17')]=this[a22_0x56ae('0x11')]+'playlist.txt';this[a22_0x56ae('0x18')]=this['filesFolder']+a22_0x56ae('0x19');this['currentFile']=0x0;this[a22_0x56ae('0x1a')]=![];this[a22_0x56ae('0x1b')]=[];this['failDownloadFiles']=[];this[a22_0x56ae('0x1c')]={};this['httpClientService']=new HttpClientService_1[(a22_0x56ae('0x1d'))]();}[a22_0x56ae('0x1e')](){this[a22_0x56ae('0x1f')]=JSON[a22_0x56ae('0x20')](fs[a22_0x56ae('0x21')](configFile));this[a22_0x56ae('0x22')]=JSON[a22_0x56ae('0x20')](fs[a22_0x56ae('0x21')](contextFile));this[a22_0x56ae('0x23')]=this[a22_0x56ae('0x1f')][a22_0x56ae('0x23')];this[a22_0x56ae('0x24')]=process['env'][a22_0x56ae('0x25')]+a22_0x56ae('0x26');this['playListServiceURL']=this[a22_0x56ae('0x24')]+'api/player_playlist.php?player_id={0}';this['kodi']=new kodi_rpc({'url':a22_0x56ae('0x27'),'user':a22_0x56ae('0x28'),'password':a22_0x56ae('0x29')});this[a22_0x56ae('0x2a')]();this['registerClient']();this[a22_0x56ae('0x2b')]();this[a22_0x56ae('0x2c')]();setInterval(function(){this[a22_0x56ae('0x2d')]();}[a22_0x56ae('0x2e')](this),0x2710);setInterval(function(){this[a22_0x56ae('0x2f')]();}[a22_0x56ae('0x2e')](this),0x493e0);}[a22_0x56ae('0x2a')](){}['registerClient'](){this['kodi'][a22_0x56ae('0x30')][a22_0x56ae('0x31')](0x1)[a22_0x56ae('0x4')](function(_0x33161b){const _0x526cf3=JSON[a22_0x56ae('0x32')](_0x33161b);const _0x479bc4={'player_id':this[a22_0x56ae('0x23')],'device_uuid':this['config'][a22_0x56ae('0x33')],'network_info':JSON[a22_0x56ae('0x32')](os[a22_0x56ae('0x34')]()),'firmware_info':JSON[a22_0x56ae('0x32')](this[a22_0x56ae('0x22')]),'playlist':_0x526cf3,'playing_item':'','status':0x0};this[a22_0x56ae('0x35')][a22_0x56ae('0x36')](a22_0x56ae('0x37'),_0x479bc4,![])['then'](function(_0x3652a7){console[a22_0x56ae('0x38')](a22_0x56ae('0x39')+Date());})[a22_0x56ae('0x3a')](function(_0x5c877d){});console[a22_0x56ae('0x38')](_0x479bc4);}[a22_0x56ae('0x2e')](this));const _0x1843b2=this[a22_0x56ae('0x1f')][a22_0x56ae('0x33')];if(!_0x1843b2||_0x1843b2==''){this[a22_0x56ae('0x1f')][a22_0x56ae('0x33')]=uuidv4();this[a22_0x56ae('0x1f')]={'deviceUuid':this[a22_0x56ae('0x1f')]['deviceUuid'],'playerId':this[a22_0x56ae('0x1f')]['playerId']};fs[a22_0x56ae('0x3b')](configFile,JSON[a22_0x56ae('0x32')](this[a22_0x56ae('0x1f')]));}}[a22_0x56ae('0x2d')](){console[a22_0x56ae('0x38')]('getStatus');this[a22_0x56ae('0x3c')][a22_0x56ae('0x3d')][a22_0x56ae('0x3e')]()[a22_0x56ae('0x4')](function(_0x2b45ea){const _0x409319=_0x2b45ea[a22_0x56ae('0x3f')][a22_0x56ae('0x40')];this['reportStatus'](_0x409319);}[a22_0x56ae('0x2e')](this))['catch'](function(_0x2cc7a0){console[a22_0x56ae('0x38')](_0x2cc7a0);this[a22_0x56ae('0x41')](_0x2cc7a0);}[a22_0x56ae('0x2e')](this));}['reportStatus'](_0x191e91){console[a22_0x56ae('0x38')](a22_0x56ae('0x42')+_0x191e91);const _0x15de0e={'player_id':this['playerId'],'device_uuid':this['config'][a22_0x56ae('0x33')],'status':_0x191e91!=''&&_0x191e91!=null?0x1:0x0,'playing_item':_0x191e91};this['httpClientService'][a22_0x56ae('0x36')](a22_0x56ae('0x43'),_0x15de0e,![])[a22_0x56ae('0x4')](function(_0x1ef87a){console['log'](a22_0x56ae('0x44')+Date());})[a22_0x56ae('0x3a')](function(_0x3cae){});}['checkFolders'](){fsExtra[a22_0x56ae('0x45')](this[a22_0x56ae('0x11')],_0x289467=>{});fsExtra['ensureDir'](this['tempFolder'],_0x11b61d=>{});fsExtra[a22_0x56ae('0x45')](this['filesFolder'],_0x2b814e=>{});}[a22_0x56ae('0x2c')](){const _0x2e1b3a=format(this[a22_0x56ae('0x46')],this['playerId']);console['log'](_0x2e1b3a);request({'url':_0x2e1b3a,'json':!![]},function(_0x15e37d,_0x45b3d0,_0x53f3ee){console[a22_0x56ae('0x38')](a22_0x56ae('0x47'));console[a22_0x56ae('0x38')](_0x53f3ee);this['newPlayList']=_0x53f3ee;this[a22_0x56ae('0x1a')]=this[a22_0x56ae('0x48')]();fsExtra[a22_0x56ae('0x49')](this[a22_0x56ae('0x13')]);this[a22_0x56ae('0x1b')]=[];this[a22_0x56ae('0x4a')]=[];this[a22_0x56ae('0x4b')]=0x0;for(const _0x45a9b8 in _0x53f3ee){this[a22_0x56ae('0x1b')][a22_0x56ae('0x4c')](_0x53f3ee[_0x45a9b8]);}console[a22_0x56ae('0x38')](a22_0x56ae('0x4d')+this[a22_0x56ae('0x1b')][a22_0x56ae('0x4e')]);if(this[a22_0x56ae('0x1b')]['length']>0x0){this['download']();}}[a22_0x56ae('0x2e')](this));}[a22_0x56ae('0x4f')](){if(fsExtra[a22_0x56ae('0x50')](this[a22_0x56ae('0x13')])){fsExtra[a22_0x56ae('0x49')](this[a22_0x56ae('0x13')]);}if(fsExtra[a22_0x56ae('0x50')](this[a22_0x56ae('0x17')])){fsExtra[a22_0x56ae('0x49')](this[a22_0x56ae('0x17')]);}if(!fsExtra[a22_0x56ae('0x50')](this[a22_0x56ae('0x17')])){fsExtra['removeSync'](this[a22_0x56ae('0x17')]);}if(!fsExtra[a22_0x56ae('0x50')](this[a22_0x56ae('0x18')])){fsExtra[a22_0x56ae('0x51')](this[a22_0x56ae('0x18')]);}this[a22_0x56ae('0x2c')]();}[a22_0x56ae('0x48')](){const _0x44dd99=JSON['stringify'](this[a22_0x56ae('0x1c')]);try{if(!fsExtra['existsSync'](this[a22_0x56ae('0x17')])){return!![];}else{const _0x476688=fsExtra[a22_0x56ae('0x21')](this['playListFile'])[a22_0x56ae('0x52')]();if(_0x476688!=_0x44dd99){return!![];}}}catch(_0x7f6eb1){console[a22_0x56ae('0x38')](_0x7f6eb1);}return![];}[a22_0x56ae('0x53')](){console[a22_0x56ae('0x38')](a22_0x56ae('0x54')+this[a22_0x56ae('0x4b')]+'\x20of\x20'+this[a22_0x56ae('0x1b')][a22_0x56ae('0x4e')]);if(this[a22_0x56ae('0x4b')]>=this[a22_0x56ae('0x1b')][a22_0x56ae('0x4e')]){this[a22_0x56ae('0x55')]();return;}const _0x6054ee=String(this[a22_0x56ae('0x1b')][this[a22_0x56ae('0x4b')]]['path']);const _0xe401a=this[a22_0x56ae('0x1b')][this['currentFile']]['media_type'];let _0x5ddf84=_0x6054ee[a22_0x56ae('0x56')](_0x6054ee[a22_0x56ae('0x57')]('/')+0x1);const _0x37edaa=_0x5ddf84[a22_0x56ae('0x58')]('.')[a22_0x56ae('0x59')](0x0,-0x1)[a22_0x56ae('0x5a')]('.');let _0x2e5165=this[a22_0x56ae('0x24')]+_0x6054ee;const _0x5d38ae=_0x2e5165['split']('.')['slice'](0x0,-0x1)[a22_0x56ae('0x5a')]('.');if(_0xe401a==a22_0x56ae('0x5b')){_0x5ddf84=_0x5ddf84+a22_0x56ae('0x5c');}else if(_0xe401a=='image'){_0x5ddf84=_0x37edaa+a22_0x56ae('0x5c');_0x2e5165=_0x5d38ae+a22_0x56ae('0x5c');}console['log']('**********+');console[a22_0x56ae('0x38')](_0x6054ee);console['log'](_0xe401a);console[a22_0x56ae('0x38')](_0x5ddf84);console['log'](_0x2e5165);console[a22_0x56ae('0x38')](_0x37edaa);console[a22_0x56ae('0x38')](_0x5d38ae);console[a22_0x56ae('0x38')]('**********+');if(fsExtra[a22_0x56ae('0x50')](this[a22_0x56ae('0x13')]+_0x5ddf84)){this['checkVideo'](this['tempFolder']+_0x5ddf84)[a22_0x56ae('0x4')](function(_0x3aedd0){if(_0x3aedd0){this['currentFile']++;}else{this[a22_0x56ae('0x1a')]=!![];}this['download']();}[a22_0x56ae('0x2e')](this));}else if(fsExtra['existsSync'](this[a22_0x56ae('0x15')]+_0x5ddf84)){this['checkVideo'](this['filesFolder']+_0x5ddf84)['then'](function(_0x2da03c){if(_0x2da03c){fsExtra['copySync'](this[a22_0x56ae('0x15')]+_0x5ddf84,this[a22_0x56ae('0x13')]+_0x5ddf84);this[a22_0x56ae('0x4b')]++;}else{this[a22_0x56ae('0x1a')]=!![];}this[a22_0x56ae('0x53')]();}[a22_0x56ae('0x2e')](this));}else{console[a22_0x56ae('0x38')](a22_0x56ae('0x5d')+_0x2e5165);this['playlistChanged']=!![];if(_0xe401a==a22_0x56ae('0x5b')){this[a22_0x56ae('0x5e')](_0x6054ee);}else{this[a22_0x56ae('0x5f')](_0x2e5165,_0x5ddf84,_0xe401a);}}}[a22_0x56ae('0x60')](_0xb83dfd){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x56ae('0x38')]('videoFile:\x20'+_0xb83dfd);const _0x956fbe=yield mediainfo(_0xb83dfd)[a22_0x56ae('0x3a')](_0x5239ef=>{console[a22_0x56ae('0x38')](_0x5239ef);fsExtra['removeSync'](_0xb83dfd);return![];});const _0x20c668=_0x956fbe['media']['track']['length']>0x1&&_0x956fbe[a22_0x56ae('0x61')]['track'][0x1][a22_0x56ae('0x62')]==a22_0x56ae('0x63');if(!_0x20c668){fsExtra[a22_0x56ae('0x51')](_0xb83dfd);}console[a22_0x56ae('0x38')](a22_0x56ae('0x64')+_0x20c668);return _0x20c668;});}[a22_0x56ae('0x5f')](_0x49eed0,_0x1627a7,_0x5854cc){const _0xca4ade=new Downloader();console[a22_0x56ae('0x38')](_0x49eed0);console[a22_0x56ae('0x38')](_0x1627a7);console['log'](_0x5854cc);const _0x453360=_0xca4ade[a22_0x56ae('0x53')](_0x49eed0,this[a22_0x56ae('0x13')]+_0x1627a7);urlExists(_0x49eed0,function(_0x32e134,_0x497d91){if(_0x497d91){if(this[a22_0x56ae('0x4a')][a22_0x56ae('0x65')](this['currentFile'])){const _0x797b45=this[a22_0x56ae('0x4a')][a22_0x56ae('0x66')](this[a22_0x56ae('0x4b')]);if(_0x797b45>-0x1){this[a22_0x56ae('0x4a')]['splice'](_0x797b45,0x1);}}console[a22_0x56ae('0x38')](a22_0x56ae('0x67')+_0x49eed0);_0x453360[a22_0x56ae('0x68')]();}else{if(!this['failDownloadFiles'][a22_0x56ae('0x65')](this['currentFile'])){this['failDownloadFiles'][a22_0x56ae('0x4c')](this[a22_0x56ae('0x4b')]);}console[a22_0x56ae('0x38')](a22_0x56ae('0x69')+_0x49eed0);this[a22_0x56ae('0x4b')]++;this[a22_0x56ae('0x53')]();}}[a22_0x56ae('0x2e')](this));_0x453360['on'](a22_0x56ae('0x68'),function(_0x453360){console[a22_0x56ae('0x38')](a22_0x56ae('0x6a')+_0x49eed0);});_0x453360['on'](a22_0x56ae('0x6b'),function(_0x453360){console[a22_0x56ae('0x38')](a22_0x56ae('0x6c'));this[a22_0x56ae('0x53')]();}[a22_0x56ae('0x2e')](this));_0x453360['on'](a22_0x56ae('0x6d'),function(_0x453360){console[a22_0x56ae('0x38')](a22_0x56ae('0x6d'));console[a22_0x56ae('0x38')]('Downloaded:\x20'+_0x1627a7);console[a22_0x56ae('0x38')](a22_0x56ae('0x6e')+_0x5854cc);this['checkVideo'](this[a22_0x56ae('0x13')]+_0x1627a7)[a22_0x56ae('0x4')](function(_0x3ef315){if(_0x3ef315){this[a22_0x56ae('0x4b')]++;}this[a22_0x56ae('0x53')]();}['bind'](this));}['bind'](this));_0x453360['on']('stopped',function(_0x453360){console[a22_0x56ae('0x38')](a22_0x56ae('0x6f'));});_0x453360['on'](a22_0x56ae('0x70'),function(_0x453360){console[a22_0x56ae('0x38')](a22_0x56ae('0x70'));});_0x453360['on'](a22_0x56ae('0x71'),function(_0x453360){console[a22_0x56ae('0x38')](a22_0x56ae('0x71'));});}[a22_0x56ae('0x72')](_0x4a4fc7,_0x2bdc44,_0x583b2e,_0x4437ff){console[a22_0x56ae('0x38')]('downloadHTTPFile');console[a22_0x56ae('0x38')](_0x4a4fc7);const _0x75912a=!![];let _0x2cc7a7=0x0;const _0x317c0c='';console['log'](a22_0x56ae('0x73')+_0x4a4fc7+a22_0x56ae('0x74')+_0x2bdc44);if(_0x2cc7a7){if(_0x2cc7a7>0x5){_0x4437ff(a22_0x56ae('0x75'),_0x4a4fc7,_0x583b2e,null);return;}}else{_0x2cc7a7=0x0;}const _0x278ab4=this['tempFolder']+_0x2bdc44;let _0x109ccb;if(_0x4437ff===undefined){console[a22_0x56ae('0x38')](a22_0x56ae('0x76')+_0x4a4fc7+a22_0x56ae('0x74')+_0x278ab4);_0x4437ff=function(_0x4abc8f,_0x290d43){console[a22_0x56ae('0x38')](a22_0x56ae('0x77'),_0x4abc8f,_0x290d43);};}http[a22_0x56ae('0x78')][a22_0x56ae('0x79')]=0x64;const _0xdb98ca={'host':url[a22_0x56ae('0x20')](_0x4a4fc7)[a22_0x56ae('0x7a')],'port':0x50,'path':url[a22_0x56ae('0x20')](_0x4a4fc7)[a22_0x56ae('0x7b')],'agent':![]};const _0xc4c230=http[a22_0x56ae('0x7c')](_0xdb98ca,function(_0x25744a){let _0xe0749e=0x0;let _0x5b35db=0x0;function _0xf4120f(){if(_0xe0749e===undefined){console[a22_0x56ae('0x38')](_0x2bdc44+a22_0x56ae('0x7d')+_0x5b35db+'/'+'?');}const _0x563627=_0x5b35db/_0xe0749e*0x64;console[a22_0x56ae('0x38')](_0x2bdc44+a22_0x56ae('0x7e')+_0x563627+'%\x09'+_0x5b35db+'/'+_0xe0749e);}console[a22_0x56ae('0x38')](_0x2bdc44+'\x20'+_0x25744a[a22_0x56ae('0x7f')]);switch(_0x25744a['statusCode']){case 0xc8:_0xe0749e=_0x25744a['headers'][a22_0x56ae('0x80')]||_0x317c0c;fs[a22_0x56ae('0x81')](_0x278ab4,function(_0x4c54fa,_0x45108c){if(!_0x4c54fa){console['log'](a22_0x56ae('0x82')+_0x278ab4);if(_0x45108c[a22_0x56ae('0x83')]==_0xe0749e){console['log'](a22_0x56ae('0x84')+_0xe0749e+')');console[a22_0x56ae('0x38')](a22_0x56ae('0x85'));}else{console[a22_0x56ae('0x38')](a22_0x56ae('0x86')+_0x45108c[a22_0x56ae('0x83')]+a22_0x56ae('0x87')+_0xe0749e+')');}}_0x109ccb=fs['createWriteStream'](_0x278ab4);_0x25744a[a22_0x56ae('0x88')](_0x109ccb);_0x25744a['on'](a22_0x56ae('0x89'),function(_0x45c109){_0x5b35db+=_0x45c109[a22_0x56ae('0x4e')];_0xf4120f();});_0xc4c230['on']('error',function(_0x4c54fa){console[a22_0x56ae('0x38')]('err:\x20');console[a22_0x56ae('0x38')](_0x4c54fa);});_0x109ccb['on']('finish',function(){console[a22_0x56ae('0x38')](a22_0x56ae('0x8a')+_0x4a4fc7+a22_0x56ae('0x74')+_0x2bdc44);_0x4437ff(null,_0x2bdc44,_0x583b2e,_0x2bdc44);}[a22_0x56ae('0x2e')](this));});break;case 0x12e:const _0x5af453=_0x25744a['headers'][a22_0x56ae('0x8b')];console[a22_0x56ae('0x38')](a22_0x56ae('0x8c')+_0x4a4fc7+'\x20to\x20'+_0x5af453);if(_0x2cc7a7<0x5){this[a22_0x56ae('0x72')](_0x5af453,_0x2bdc44,_0x4437ff,_0x2cc7a7++);}else{console[a22_0x56ae('0x6b')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x4a4fc7+'.');_0x4437ff('302',null,null,null);}return;case 0x194:console[a22_0x56ae('0x38')]('File\x20Not\x20Found\x20'+_0x4a4fc7);default:console['log']('Problem\x20downloading\x20'+_0x4a4fc7+a22_0x56ae('0x8d')+_0x25744a[a22_0x56ae('0x7f')]);_0xc4c230[a22_0x56ae('0x8e')]();_0x4437ff(_0x25744a[a22_0x56ae('0x7f')],null,null,null);return;}})['on'](a22_0x56ae('0x6b'),function(_0x2600de){console['log'](a22_0x56ae('0x8f')+_0x4a4fc7+'\x20'+_0x2600de['message']);_0x4437ff(_0x2600de,null,null,null);});}[a22_0x56ae('0x90')](_0x2aabab,_0x18ad56,_0x4566b0,_0x50f8d7){console[a22_0x56ae('0x38')](a22_0x56ae('0x90'));console[a22_0x56ae('0x38')](_0x2aabab);console['log'](_0x18ad56);console[a22_0x56ae('0x38')](_0x4566b0);console[a22_0x56ae('0x38')](_0x50f8d7);if(_0x4566b0==a22_0x56ae('0x91')){const _0x22063c=this[a22_0x56ae('0x1b')][this[a22_0x56ae('0x4b')]][a22_0x56ae('0x92')]!=null?this[a22_0x56ae('0x1b')][this['currentFile']][a22_0x56ae('0x92')]:0x1e;this[a22_0x56ae('0x93')](_0x50f8d7,_0x22063c);}else if(_0x4566b0=='video'){if(_0x2aabab==null&&_0x18ad56!=''){this[a22_0x56ae('0x4b')]++;}this[a22_0x56ae('0x53')]();}console[a22_0x56ae('0x38')](this['currentFile']);}[a22_0x56ae('0x94')](_0x52ec10,_0x8c8fbe,_0x2b5148){progress(request(_0x52ec10),{})['on'](a22_0x56ae('0x95'),function(_0x1f29bd){console[a22_0x56ae('0x38')](_0x1f29bd);})['on'](a22_0x56ae('0x6b'),function(_0x16a039){console[a22_0x56ae('0x38')]('Error\x20downloading\x20file');this[a22_0x56ae('0x53')]();})['on'](a22_0x56ae('0x6d'),function(){console[a22_0x56ae('0x38')](a22_0x56ae('0x96')+_0x8c8fbe);console[a22_0x56ae('0x38')](a22_0x56ae('0x6e')+_0x2b5148);if(_0x2b5148==a22_0x56ae('0x91')){const _0x33f0c9=this[a22_0x56ae('0x1b')][this[a22_0x56ae('0x4b')]][a22_0x56ae('0x92')]!=null?this[a22_0x56ae('0x1b')][this[a22_0x56ae('0x4b')]]['duration']:0x1e;this[a22_0x56ae('0x93')](_0x8c8fbe,_0x33f0c9);}else if(_0x2b5148==a22_0x56ae('0x97')){this[a22_0x56ae('0x4b')]++;this[a22_0x56ae('0x53')]();}}[a22_0x56ae('0x2e')](this))['pipe'](fs[a22_0x56ae('0x98')](this[a22_0x56ae('0x13')]+_0x8c8fbe));}['createImageVideo'](_0x23b447,_0x5e725e=0x1e){const _0x45d113=this[a22_0x56ae('0x13')]+_0x23b447;console[a22_0x56ae('0x38')](_0x45d113);console[a22_0x56ae('0x38')](_0x23b447);const _0x4f4d2d=_0x23b447[a22_0x56ae('0x58')]('.')['slice'](0x0,-0x1)[a22_0x56ae('0x5a')]('.');const _0x3d0a77='ffmpeg';const _0x231c6a=['-y','-r',a22_0x56ae('0x99'),a22_0x56ae('0x9a'),'1','-pattern_type','glob','-i',_0x45d113,'-t',String(_0x5e725e),a22_0x56ae('0x9b'),a22_0x56ae('0x9c'),a22_0x56ae('0x9d'),a22_0x56ae('0x9e'),'-r','25',a22_0x56ae('0x9f'),a22_0x56ae('0xa0'),this[a22_0x56ae('0x13')]+_0x4f4d2d+a22_0x56ae('0x5c')];const _0x3f8124=spawn(_0x3d0a77,_0x231c6a);_0x3f8124['stdout']['on'](a22_0x56ae('0x89'),function(_0x517081){console[a22_0x56ae('0x38')](a22_0x56ae('0xa1')+_0x45d113);});_0x3f8124[a22_0x56ae('0xa2')]['on'](a22_0x56ae('0x89'),function(_0x1b61d5){console['log'](a22_0x56ae('0xa3')+_0x1b61d5);}[a22_0x56ae('0x2e')](this));_0x3f8124['on'](a22_0x56ae('0xa4'),function(){console[a22_0x56ae('0x38')](a22_0x56ae('0xa5'));this['currentFile']++;this['download']();}[a22_0x56ae('0x2e')](this));}['downloadYouTube'](_0x25eae0){const _0x4658df=this[a22_0x56ae('0x13')]+'/'+_0x25eae0+a22_0x56ae('0x5c');const _0x2ad54b=youtubedl(a22_0x56ae('0xa6')+_0x25eae0,['--format=18'],{'cwd':__dirname});_0x2ad54b['on']('info',function(_0x1889ed){console['log'](a22_0x56ae('0xa7'));console['log'](a22_0x56ae('0xa8')+_0x1889ed['_filename']);console['log'](a22_0x56ae('0xa9')+_0x1889ed[a22_0x56ae('0x83')]);});_0x2ad54b['on']('complete',function complete(_0x170af6){'use strict';console[a22_0x56ae('0x38')](a22_0x56ae('0xa8')+_0x170af6[a22_0x56ae('0xaa')]+a22_0x56ae('0xab'));});_0x2ad54b['on']('end',function(){console['log'](a22_0x56ae('0xac'));this[a22_0x56ae('0x60')](_0x4658df)[a22_0x56ae('0x4')](function(_0x24beb6){if(_0x24beb6){this[a22_0x56ae('0x4b')]++;}this['download']();}[a22_0x56ae('0x2e')](this));}[a22_0x56ae('0x2e')](this));_0x2ad54b['pipe'](fs[a22_0x56ae('0x98')](_0x4658df));}[a22_0x56ae('0x55')](){console[a22_0x56ae('0x38')](a22_0x56ae('0xad'));if(this[a22_0x56ae('0x1a')]){if(this[a22_0x56ae('0x4a')][a22_0x56ae('0x4e')]==0x0){fs[a22_0x56ae('0x3b')](this[a22_0x56ae('0x17')],JSON[a22_0x56ae('0x32')](this['newPlayList']));let _0x1065a7=a22_0x56ae('0xae')+'\x0d\x0a'+a22_0x56ae('0xaf')+'\x0d\x0a';for(const _0x1c4232 in this[a22_0x56ae('0x1b')]){const _0x547e37=this['downloadFiles'][_0x1c4232][a22_0x56ae('0xb0')];const _0x16ae1a=this[a22_0x56ae('0x1b')][_0x1c4232][a22_0x56ae('0xb1')];const _0x34f7b5=_0x547e37['substring'](_0x547e37[a22_0x56ae('0x57')]('/')+0x1);let _0x3c775a=_0x34f7b5[a22_0x56ae('0x58')]('.')['slice'](0x0,-0x1)[a22_0x56ae('0x5a')]('.');if(_0x16ae1a=='youtube_single'){_0x3c775a=_0x547e37;}_0x1065a7+=a22_0x56ae('0xb2')+_0x3c775a+'.mp4'+'\x0d\x0a';}fsExtra[a22_0x56ae('0x49')](this[a22_0x56ae('0x15')]);fsExtra[a22_0x56ae('0xb3')](this['tempFolder'],this[a22_0x56ae('0x15')]);fsExtra['writeFileSync'](this[a22_0x56ae('0x18')],_0x1065a7);fsExtra[a22_0x56ae('0x49')](this[a22_0x56ae('0x13')]);console[a22_0x56ae('0x38')](a22_0x56ae('0xb4'));const _0x1bee04=spawn(a22_0x56ae('0xb5'),['-r',a22_0x56ae('0xb6')]);}else{console[a22_0x56ae('0x38')](a22_0x56ae('0xb7'));this[a22_0x56ae('0x4b')]=0x0;setTimeout(function(){this[a22_0x56ae('0x53')]();}[a22_0x56ae('0x2e')](this),0x1388);}}else{console[a22_0x56ae('0x38')](a22_0x56ae('0xb8'));}}}exports[a22_0x56ae('0xb9')]=SyncPlaylistsService;