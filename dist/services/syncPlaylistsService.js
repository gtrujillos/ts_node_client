var a24_0xb1f4=['\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','data','finish','Downloaded\x20','location','302','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Downloaded:\x20','video','pipe','ffmpeg','1/2','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','scale=1920:1080','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','youtubeURL:\x20','outFileName:\x20','--format=18','info','Download\x20started','filename:\x20','_filename','\x20already\x20downloaded.','finishProcess','writeFileSync','#EXTINF:0,luloPlayList','youtube_single','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Cleared','Playlist.Add','Playlist.Added','Player.Open','kodiCommandClient','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','rss','header_active','turnOffTV','CECStandby()','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','parseString','err:\x20%j','result:\x20%j','none','set','feed','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','enableClock','videoplayer.usedisplayasclock','kodi-send\x20--action=\x22','SyncPlaylistsService','throw','done','value','then','apply','next','defineProperty','__esModule','./playerService','node-mediainfo','url','http','fs-extra','request-progress','child_process','spawn','is-image','string-template','uuid/v4','config.json','context.json','url-exists','node-kodi','mediaFolder','tempFolder','temp/','files/','playListFile','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','HttpClientService','playerService','config','parse','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','bind','kodi','getItems','stringify','deviceUuid','networkInterfaces','context','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','player','item','reportStatus','catch','playingItem:\x20','ensureDir','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','currentFile','Total:\x20','download','reloadMediaList','forceReload','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','length','path','media_type','substring','lastIndexOf','split','slice','join','image','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','videoFile:\x20','media','track','@type','mediainfo\x20check:','downloader','indexOf','splice','downloading:\x20','start','includes','Error:\x20','start:\x20','error','error:\x20','end','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','get','\x20Progress:\x20unknown\x09'];(function(_0x2ec932,_0x5d3a3b){var _0x139a62=function(_0x553f79){while(--_0x553f79){_0x2ec932['push'](_0x2ec932['shift']());}};_0x139a62(++_0x5d3a3b);}(a24_0xb1f4,0x13c));var a24_0xfdab=function(_0x4d697b,_0x412f5d){_0x4d697b=_0x4d697b-0x0;var _0x13a220=a24_0xb1f4[_0x4d697b];return _0x13a220;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0xc3803,_0x354e70,_0x2cdb96,_0x4e2cef){function _0xa89a62(_0x4089a5){return _0x4089a5 instanceof _0x2cdb96?_0x4089a5:new _0x2cdb96(function(_0x333a77){_0x333a77(_0x4089a5);});}return new(_0x2cdb96||(_0x2cdb96=Promise))(function(_0x301552,_0x1bc982){function _0x1fd1c1(_0x10d1fd){try{_0x3af221(_0x4e2cef['next'](_0x10d1fd));}catch(_0x2484be){_0x1bc982(_0x2484be);}}function _0x2f8bc2(_0x1aa991){try{_0x3af221(_0x4e2cef[a24_0xfdab('0x0')](_0x1aa991));}catch(_0xc39dad){_0x1bc982(_0xc39dad);}}function _0x3af221(_0x5bdeed){_0x5bdeed[a24_0xfdab('0x1')]?_0x301552(_0x5bdeed[a24_0xfdab('0x2')]):_0xa89a62(_0x5bdeed[a24_0xfdab('0x2')])[a24_0xfdab('0x3')](_0x1fd1c1,_0x2f8bc2);}_0x3af221((_0x4e2cef=_0x4e2cef[a24_0xfdab('0x4')](_0xc3803,_0x354e70||[]))[a24_0xfdab('0x5')]());});};Object[a24_0xfdab('0x6')](exports,a24_0xfdab('0x7'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a24_0xfdab('0x8'));const mediainfo=require(a24_0xfdab('0x9'));const fs=require('fs');const url=require(a24_0xfdab('0xa'));const http=require(a24_0xfdab('0xb'));const fsExtra=require(a24_0xfdab('0xc'));const request=require('request');const progress=require(a24_0xfdab('0xd'));const spawn=require(a24_0xfdab('0xe'))[a24_0xfdab('0xf')];const exec=require('child_process')['exec'];const isImage=require(a24_0xfdab('0x10'));const format=require(a24_0xfdab('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a24_0xfdab('0x12'));const configFile=a24_0xfdab('0x13');const contextFile=a24_0xfdab('0x14');const urlExists=require(a24_0xfdab('0x15'));const kodi_rpc=require(a24_0xfdab('0x16'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a24_0xfdab('0x17')]='media/';this[a24_0xfdab('0x18')]=this[a24_0xfdab('0x17')]+a24_0xfdab('0x19');this['filesFolder']=this[a24_0xfdab('0x17')]+a24_0xfdab('0x1a');this[a24_0xfdab('0x1b')]=this[a24_0xfdab('0x17')]+a24_0xfdab('0x1c');this[a24_0xfdab('0x1d')]=this[a24_0xfdab('0x1e')]+a24_0xfdab('0x1f');this['currentFile']=0x0;this[a24_0xfdab('0x20')]=![];this[a24_0xfdab('0x21')]=[];this[a24_0xfdab('0x22')]=[];this[a24_0xfdab('0x23')]={};this[a24_0xfdab('0x24')]=a24_0xfdab('0x25');this[a24_0xfdab('0x26')]=a24_0xfdab('0x27');this[a24_0xfdab('0x28')]=a24_0xfdab('0x29');this['forceReload']=![];this['httpClientService']=new HttpClientService_1[(a24_0xfdab('0x2a'))]();this[a24_0xfdab('0x2b')]=new playerService_1['PlayerService']();}['init'](){this[a24_0xfdab('0x2c')]=JSON[a24_0xfdab('0x2d')](fs[a24_0xfdab('0x2e')](configFile));this['context']=JSON[a24_0xfdab('0x2d')](fs[a24_0xfdab('0x2e')](contextFile));this[a24_0xfdab('0x2f')]=this['config'][a24_0xfdab('0x2f')];this[a24_0xfdab('0x30')]=process[a24_0xfdab('0x31')][a24_0xfdab('0x32')]+a24_0xfdab('0x33');this[a24_0xfdab('0x34')]=this['baseURL']+a24_0xfdab('0x35');this[a24_0xfdab('0x36')]=this['baseURL']+a24_0xfdab('0x37');this['kodi']=new kodi_rpc({'url':this[a24_0xfdab('0x24')],'user':this['kodiUser'],'password':this['kodiPassword']});this[a24_0xfdab('0x38')]();this[a24_0xfdab('0x39')]();this[a24_0xfdab('0x3a')]();this[a24_0xfdab('0x3b')]();this[a24_0xfdab('0x3c')]();setInterval(function(){this['getStatus']();}[a24_0xfdab('0x3d')](this),0x2710);setInterval(function(){this['registerClient']();}[a24_0xfdab('0x3d')](this),0x493e0);}[a24_0xfdab('0x38')](){}[a24_0xfdab('0x39')](){this[a24_0xfdab('0x3e')]['playlist'][a24_0xfdab('0x3f')](0x1)[a24_0xfdab('0x3')](function(_0x215f14){const _0x233231=JSON[a24_0xfdab('0x40')](_0x215f14);const _0x1d1afc={'player_id':this[a24_0xfdab('0x2f')],'device_uuid':this[a24_0xfdab('0x2c')][a24_0xfdab('0x41')],'network_info':JSON[a24_0xfdab('0x40')](os[a24_0xfdab('0x42')]()),'firmware_info':JSON['stringify'](this[a24_0xfdab('0x43')]),'playlist':_0x233231,'playing_item':'','status':0x0};this[a24_0xfdab('0x44')][a24_0xfdab('0x45')](a24_0xfdab('0x46'),_0x1d1afc,![])[a24_0xfdab('0x3')](function(_0x5d1f9d){console[a24_0xfdab('0x47')]('register\x20response:\x20'+Date());})['catch'](function(_0x5269c3){});console[a24_0xfdab('0x47')](_0x1d1afc);}[a24_0xfdab('0x3d')](this));const _0x18dff8=this[a24_0xfdab('0x2c')][a24_0xfdab('0x41')];if(!_0x18dff8||_0x18dff8==''){this[a24_0xfdab('0x2c')][a24_0xfdab('0x41')]=uuidv4();this[a24_0xfdab('0x2c')]={'deviceUuid':this[a24_0xfdab('0x2c')][a24_0xfdab('0x41')],'playerId':this[a24_0xfdab('0x2c')][a24_0xfdab('0x2f')]};fs['writeFileSync'](configFile,JSON[a24_0xfdab('0x40')](this[a24_0xfdab('0x2c')]));}}['getStatus'](){console[a24_0xfdab('0x47')]('getStatus');this['kodi'][a24_0xfdab('0x48')]['getCurrentlyPlayingVideo']()[a24_0xfdab('0x3')](function(_0x49d654){const _0x957a0d=_0x49d654[a24_0xfdab('0x49')]['label'];this[a24_0xfdab('0x4a')](_0x957a0d);}[a24_0xfdab('0x3d')](this))[a24_0xfdab('0x4b')](function(_0x58222e){console[a24_0xfdab('0x47')](_0x58222e);this[a24_0xfdab('0x4a')](JSON[a24_0xfdab('0x40')](_0x58222e));}['bind'](this));}[a24_0xfdab('0x4a')](_0x2cf43b){console[a24_0xfdab('0x47')](a24_0xfdab('0x4c')+_0x2cf43b);const _0x14cd36={'player_id':this['playerId'],'device_uuid':this[a24_0xfdab('0x2c')][a24_0xfdab('0x41')],'status':_0x2cf43b!=''&&_0x2cf43b!=null?0x1:0x0,'playing_item':_0x2cf43b};this['httpClientService'][a24_0xfdab('0x45')]('http://restapi.lulo.run/player_devices/report_status',_0x14cd36,![])[a24_0xfdab('0x3')](function(_0x18e20d){console[a24_0xfdab('0x47')]('reportStatusResponse');})[a24_0xfdab('0x4b')](function(_0x146930){});}[a24_0xfdab('0x3a')](){fsExtra[a24_0xfdab('0x4d')](this['mediaFolder'],_0x575e99=>{});fsExtra[a24_0xfdab('0x4d')](this['tempFolder'],_0x130d09=>{});fsExtra['ensureDir'](this[a24_0xfdab('0x1e')],_0x52e024=>{});}[a24_0xfdab('0x3b')](){const _0x3510dd=format(this['playListServiceURL'],this[a24_0xfdab('0x2f')]);console[a24_0xfdab('0x47')](_0x3510dd);request({'url':_0x3510dd,'json':!![]},function(_0x5a6aef,_0x23d5f7,_0x44394b){console[a24_0xfdab('0x47')](a24_0xfdab('0x4e'));this[a24_0xfdab('0x23')]=_0x44394b;this[a24_0xfdab('0x20')]=this[a24_0xfdab('0x4f')]();fsExtra[a24_0xfdab('0x50')](this[a24_0xfdab('0x18')]);this['downloadFiles']=[];this['failDownloadFiles']=[];this[a24_0xfdab('0x51')]=0x0;for(const _0x354d39 in _0x44394b){this[a24_0xfdab('0x21')]['push'](_0x44394b[_0x354d39]);}console[a24_0xfdab('0x47')](a24_0xfdab('0x52')+this[a24_0xfdab('0x21')]['length']);if(this['downloadFiles']['length']>0x0){this[a24_0xfdab('0x53')]();}}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0x54')](){this[a24_0xfdab('0x55')]=!![];if(fsExtra[a24_0xfdab('0x56')](this[a24_0xfdab('0x18')])){fsExtra[a24_0xfdab('0x50')](this['tempFolder']);}if(fsExtra[a24_0xfdab('0x56')](this[a24_0xfdab('0x1e')])){fsExtra[a24_0xfdab('0x50')](this[a24_0xfdab('0x1e')]);}if(!fsExtra[a24_0xfdab('0x56')](this[a24_0xfdab('0x1b')])){fsExtra[a24_0xfdab('0x57')](this[a24_0xfdab('0x1b')]);}if(!fsExtra['existsSync'](this[a24_0xfdab('0x1d')])){fsExtra[a24_0xfdab('0x57')](this[a24_0xfdab('0x1d')]);}this['loadMediaList']();}['hasPlayListChanged'](){const _0x51e954=JSON[a24_0xfdab('0x40')](this[a24_0xfdab('0x23')]);try{if(!fsExtra['existsSync'](this[a24_0xfdab('0x1b')])){return!![];}else{const _0x91e0a7=fsExtra[a24_0xfdab('0x2e')](this['playListFile'])[a24_0xfdab('0x58')]();if(_0x91e0a7!=_0x51e954){return!![];}}}catch(_0x5e90eb){console[a24_0xfdab('0x47')](_0x5e90eb);}return![];}['download'](){console[a24_0xfdab('0x47')](a24_0xfdab('0x59')+this[a24_0xfdab('0x51')]+a24_0xfdab('0x5a')+this[a24_0xfdab('0x21')]['length']);if(this[a24_0xfdab('0x51')]>=this['downloadFiles'][a24_0xfdab('0x5b')]){this['finishProcess']();return;}const _0x2a641f=String(this[a24_0xfdab('0x21')][this[a24_0xfdab('0x51')]][a24_0xfdab('0x5c')]);const _0x37c44c=this[a24_0xfdab('0x21')][this['currentFile']][a24_0xfdab('0x5d')];let _0x2989ad=_0x2a641f[a24_0xfdab('0x5e')](_0x2a641f[a24_0xfdab('0x5f')]('/')+0x1);const _0x49476f=_0x2989ad[a24_0xfdab('0x60')]('.')[a24_0xfdab('0x61')](0x0,-0x1)[a24_0xfdab('0x62')]('.');let _0x4fd819=this['baseURL']+_0x2a641f;const _0x674ba7=_0x4fd819['split']('.')[a24_0xfdab('0x61')](0x0,-0x1)[a24_0xfdab('0x62')]('.');if(_0x37c44c=='youtube_single'){_0x2989ad=_0x2989ad+'.mp4';}else if(_0x37c44c==a24_0xfdab('0x63')){_0x2989ad=_0x49476f+a24_0xfdab('0x64');_0x4fd819=_0x674ba7+a24_0xfdab('0x64');}console[a24_0xfdab('0x47')](a24_0xfdab('0x65'));console[a24_0xfdab('0x47')](_0x2a641f);console[a24_0xfdab('0x47')](_0x37c44c);console[a24_0xfdab('0x47')](_0x2989ad);console['log'](_0x4fd819);console[a24_0xfdab('0x47')](_0x49476f);console['log'](_0x674ba7);console[a24_0xfdab('0x47')]('**********+');if(fsExtra[a24_0xfdab('0x56')](this[a24_0xfdab('0x18')]+_0x2989ad)){this[a24_0xfdab('0x66')](this[a24_0xfdab('0x18')]+_0x2989ad)[a24_0xfdab('0x3')](function(_0x527976){if(_0x527976){this['currentFile']++;}else{this['playlistChanged']=!![];}this[a24_0xfdab('0x53')]();}['bind'](this));}else if(fsExtra[a24_0xfdab('0x56')](this[a24_0xfdab('0x1e')]+_0x2989ad)){this[a24_0xfdab('0x66')](this[a24_0xfdab('0x1e')]+_0x2989ad)[a24_0xfdab('0x3')](function(_0x404ccf){if(_0x404ccf){fsExtra[a24_0xfdab('0x67')](this[a24_0xfdab('0x1e')]+_0x2989ad,this[a24_0xfdab('0x18')]+_0x2989ad);this['currentFile']++;}else{this[a24_0xfdab('0x20')]=!![];}this['download']();}[a24_0xfdab('0x3d')](this));}else{console[a24_0xfdab('0x47')](a24_0xfdab('0x68')+_0x4fd819);this['playlistChanged']=!![];if(_0x37c44c=='youtube_single'){this[a24_0xfdab('0x69')](_0x2a641f);}else{this['downloader'](_0x4fd819,_0x2989ad,_0x37c44c);}}}['checkVideo'](_0x1458dc){return __awaiter(this,void 0x0,void 0x0,function*(){console[a24_0xfdab('0x47')](a24_0xfdab('0x6a')+_0x1458dc);const _0x55ff27=yield mediainfo(_0x1458dc)[a24_0xfdab('0x4b')](_0x43848f=>{console[a24_0xfdab('0x47')](_0x43848f);fsExtra[a24_0xfdab('0x57')](_0x1458dc);return![];});const _0x111213=_0x55ff27[a24_0xfdab('0x6b')]['track'][a24_0xfdab('0x5b')]>0x1&&_0x55ff27[a24_0xfdab('0x6b')][a24_0xfdab('0x6c')][0x1][a24_0xfdab('0x6d')]=='Video';if(!_0x111213){fsExtra['removeSync'](_0x1458dc);}console['log'](a24_0xfdab('0x6e')+_0x111213);return _0x111213;});}[a24_0xfdab('0x6f')](_0x36eda1,_0xda541f,_0x3201c6){const _0x29c4d2=new Downloader();console[a24_0xfdab('0x47')](_0x36eda1);console[a24_0xfdab('0x47')](_0xda541f);console[a24_0xfdab('0x47')](_0x3201c6);const _0x39fc84=_0x29c4d2[a24_0xfdab('0x53')](_0x36eda1,this[a24_0xfdab('0x18')]+_0xda541f);urlExists(_0x36eda1,function(_0x955b46,_0xe40b9f){if(_0xe40b9f){if(this[a24_0xfdab('0x22')]['includes'](this[a24_0xfdab('0x51')])){const _0x237730=this[a24_0xfdab('0x22')][a24_0xfdab('0x70')](this['currentFile']);if(_0x237730>-0x1){this['failDownloadFiles'][a24_0xfdab('0x71')](_0x237730,0x1);}}console[a24_0xfdab('0x47')](a24_0xfdab('0x72')+_0x36eda1);_0x39fc84[a24_0xfdab('0x73')]();}else{if(!this['failDownloadFiles'][a24_0xfdab('0x74')](this['currentFile'])){this[a24_0xfdab('0x22')]['push'](this[a24_0xfdab('0x51')]);}console[a24_0xfdab('0x47')](a24_0xfdab('0x75')+_0x36eda1);this['currentFile']++;this['download']();}}[a24_0xfdab('0x3d')](this));_0x39fc84['on'](a24_0xfdab('0x73'),function(_0x39fc84){console['log'](a24_0xfdab('0x76')+_0x36eda1);});_0x39fc84['on'](a24_0xfdab('0x77'),function(_0x39fc84){console['log'](a24_0xfdab('0x78'));this[a24_0xfdab('0x53')]();}['bind'](this));_0x39fc84['on'](a24_0xfdab('0x79'),function(_0x39fc84){console['log'](a24_0xfdab('0x79'));console[a24_0xfdab('0x47')]('Downloaded:\x20'+_0xda541f);console[a24_0xfdab('0x47')](a24_0xfdab('0x7a')+_0x3201c6);this['checkVideo'](this[a24_0xfdab('0x18')]+_0xda541f)['then'](function(_0x5d822f){if(_0x5d822f){this[a24_0xfdab('0x51')]++;}this[a24_0xfdab('0x53')]();}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0x3d')](this));_0x39fc84['on'](a24_0xfdab('0x7b'),function(_0x39fc84){console[a24_0xfdab('0x47')](a24_0xfdab('0x7b'));});_0x39fc84['on'](a24_0xfdab('0x7c'),function(_0x39fc84){console[a24_0xfdab('0x47')](a24_0xfdab('0x7c'));});_0x39fc84['on']('retry',function(_0x39fc84){console[a24_0xfdab('0x47')](a24_0xfdab('0x7d'));});}[a24_0xfdab('0x7e')](_0xedeaf0,_0x3513f4,_0x348f92,_0x535b20){console[a24_0xfdab('0x47')](a24_0xfdab('0x7e'));console[a24_0xfdab('0x47')](_0xedeaf0);const _0x2f1449=!![];let _0x1f1dd4=0x0;const _0x366ed5='';console[a24_0xfdab('0x47')](a24_0xfdab('0x7f')+_0xedeaf0+a24_0xfdab('0x80')+_0x3513f4);if(_0x1f1dd4){if(_0x1f1dd4>0x5){_0x535b20(a24_0xfdab('0x81'),_0xedeaf0,_0x348f92,null);return;}}else{_0x1f1dd4=0x0;}const _0x1c3908=this[a24_0xfdab('0x18')]+_0x3513f4;let _0x5fa7d;if(_0x535b20===undefined){console[a24_0xfdab('0x47')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0xedeaf0+a24_0xfdab('0x80')+_0x1c3908);_0x535b20=function(_0x502fb8,_0x405578){console[a24_0xfdab('0x47')](a24_0xfdab('0x82'),_0x502fb8,_0x405578);};}http[a24_0xfdab('0x83')][a24_0xfdab('0x84')]=0x64;const _0x3d851f={'host':url[a24_0xfdab('0x2d')](_0xedeaf0)[a24_0xfdab('0x85')],'port':0x50,'path':url[a24_0xfdab('0x2d')](_0xedeaf0)['pathname'],'agent':![]};const _0x44077f=http[a24_0xfdab('0x86')](_0x3d851f,function(_0x5def11){let _0xfee0b1=0x0;let _0x4f66bf=0x0;function _0x1cbca1(){if(_0xfee0b1===undefined){console[a24_0xfdab('0x47')](_0x3513f4+a24_0xfdab('0x87')+_0x4f66bf+'/'+'?');}const _0x1b5ecf=_0x4f66bf/_0xfee0b1*0x64;console[a24_0xfdab('0x47')](_0x3513f4+a24_0xfdab('0x88')+_0x1b5ecf+'%\x09'+_0x4f66bf+'/'+_0xfee0b1);}console[a24_0xfdab('0x47')](_0x3513f4+'\x20'+_0x5def11[a24_0xfdab('0x89')]);switch(_0x5def11[a24_0xfdab('0x89')]){case 0xc8:_0xfee0b1=_0x5def11[a24_0xfdab('0x8a')][a24_0xfdab('0x8b')]||_0x366ed5;fs[a24_0xfdab('0x8c')](_0x1c3908,function(_0x2130a9,_0x482ca7){if(!_0x2130a9){console[a24_0xfdab('0x47')](a24_0xfdab('0x8d')+_0x1c3908);if(_0x482ca7[a24_0xfdab('0x8e')]==_0xfee0b1){console[a24_0xfdab('0x47')](a24_0xfdab('0x8f')+_0xfee0b1+')');console[a24_0xfdab('0x47')](a24_0xfdab('0x90'));}else{console['log'](a24_0xfdab('0x91')+_0x482ca7[a24_0xfdab('0x8e')]+a24_0xfdab('0x92')+_0xfee0b1+')');}}_0x5fa7d=fs[a24_0xfdab('0x93')](_0x1c3908);_0x5def11['pipe'](_0x5fa7d);_0x5def11['on'](a24_0xfdab('0x94'),function(_0x5d8ead){_0x4f66bf+=_0x5d8ead[a24_0xfdab('0x5b')];_0x1cbca1();});_0x44077f['on']('error',function(_0x2130a9){console['log']('err:\x20');console[a24_0xfdab('0x47')](_0x2130a9);});_0x5fa7d['on'](a24_0xfdab('0x95'),function(){console[a24_0xfdab('0x47')](a24_0xfdab('0x96')+_0xedeaf0+a24_0xfdab('0x80')+_0x3513f4);_0x535b20(null,_0x3513f4,_0x348f92,_0x3513f4);}[a24_0xfdab('0x3d')](this));});break;case 0x12e:const _0x4dd684=_0x5def11[a24_0xfdab('0x8a')][a24_0xfdab('0x97')];console['log']('Redirect\x20'+_0xedeaf0+a24_0xfdab('0x80')+_0x4dd684);if(_0x1f1dd4<0x5){this[a24_0xfdab('0x7e')](_0x4dd684,_0x3513f4,_0x535b20,_0x1f1dd4++);}else{console[a24_0xfdab('0x77')]('Redirect\x20limit\x20encountered\x20for\x20'+_0xedeaf0+'.');_0x535b20(a24_0xfdab('0x98'),null,null,null);}return;case 0x194:console[a24_0xfdab('0x47')]('File\x20Not\x20Found\x20'+_0xedeaf0);default:console[a24_0xfdab('0x47')](a24_0xfdab('0x99')+_0xedeaf0+a24_0xfdab('0x9a')+_0x5def11[a24_0xfdab('0x89')]);_0x44077f['abort']();_0x535b20(_0x5def11[a24_0xfdab('0x89')],null,null,null);return;}})['on'](a24_0xfdab('0x77'),function(_0xb3f47b){console[a24_0xfdab('0x47')](a24_0xfdab('0x9b')+_0xedeaf0+'\x20'+_0xb3f47b['message']);_0x535b20(_0xb3f47b,null,null,null);});}['downloadHTTPFileCallback'](_0xf409f4,_0x4d812a,_0x43deb1,_0x3b4b58){console[a24_0xfdab('0x47')](a24_0xfdab('0x9c'));console[a24_0xfdab('0x47')](_0xf409f4);console[a24_0xfdab('0x47')](_0x4d812a);console[a24_0xfdab('0x47')](_0x43deb1);console[a24_0xfdab('0x47')](_0x3b4b58);if(_0x43deb1==a24_0xfdab('0x63')){const _0x58491e=this[a24_0xfdab('0x21')][this[a24_0xfdab('0x51')]][a24_0xfdab('0x9d')]!=null?this[a24_0xfdab('0x21')][this[a24_0xfdab('0x51')]][a24_0xfdab('0x9d')]:0x1e;this[a24_0xfdab('0x9e')](_0x3b4b58,_0x58491e);}else if(_0x43deb1=='video'){if(_0xf409f4==null&&_0x4d812a!=''){this['currentFile']++;}this[a24_0xfdab('0x53')]();}console[a24_0xfdab('0x47')](this[a24_0xfdab('0x51')]);}[a24_0xfdab('0x9f')](_0x5bd80d,_0x1fae5e,_0x37df7c){progress(request(_0x5bd80d),{})['on'](a24_0xfdab('0xa0'),function(_0x31a4d3){console[a24_0xfdab('0x47')](_0x31a4d3);})['on'](a24_0xfdab('0x77'),function(_0x45d623){console[a24_0xfdab('0x47')]('Error\x20downloading\x20file');this[a24_0xfdab('0x53')]();})['on'](a24_0xfdab('0x79'),function(){console[a24_0xfdab('0x47')](a24_0xfdab('0xa1')+_0x1fae5e);console[a24_0xfdab('0x47')](a24_0xfdab('0x7a')+_0x37df7c);if(_0x37df7c==a24_0xfdab('0x63')){const _0x1710ab=this[a24_0xfdab('0x21')][this[a24_0xfdab('0x51')]][a24_0xfdab('0x9d')]!=null?this[a24_0xfdab('0x21')][this['currentFile']]['duration']:0x1e;this['createImageVideo'](_0x1fae5e,_0x1710ab);}else if(_0x37df7c==a24_0xfdab('0xa2')){this[a24_0xfdab('0x51')]++;this['download']();}}[a24_0xfdab('0x3d')](this))[a24_0xfdab('0xa3')](fs[a24_0xfdab('0x93')](this['tempFolder']+_0x1fae5e));}[a24_0xfdab('0x9e')](_0x449927,_0x11de2d=0x1e){const _0x299dab=this[a24_0xfdab('0x18')]+_0x449927;console[a24_0xfdab('0x47')](_0x299dab);console[a24_0xfdab('0x47')](_0x449927);const _0x293f91=_0x449927['split']('.')['slice'](0x0,-0x1)[a24_0xfdab('0x62')]('.');const _0x1f9f8f=a24_0xfdab('0xa4');const _0x513011=['-y','-r',a24_0xfdab('0xa5'),'-loop','1',a24_0xfdab('0xa6'),a24_0xfdab('0xa7'),'-i',_0x299dab,'-t',String(_0x11de2d),a24_0xfdab('0xa8'),a24_0xfdab('0xa9'),a24_0xfdab('0xaa'),a24_0xfdab('0xab'),'-r','25','-vf',a24_0xfdab('0xac'),this[a24_0xfdab('0x18')]+_0x293f91+a24_0xfdab('0x64')];const _0x1a43a7=spawn(_0x1f9f8f,_0x513011);_0x1a43a7['stdout']['on'](a24_0xfdab('0x94'),function(_0x12b89a){console['log'](a24_0xfdab('0xad')+_0x299dab);});_0x1a43a7[a24_0xfdab('0xae')]['on']('data',function(_0x46c942){console[a24_0xfdab('0x47')](a24_0xfdab('0xaf')+_0x46c942);}[a24_0xfdab('0x3d')](this));_0x1a43a7['on'](a24_0xfdab('0xb0'),function(){console['log'](a24_0xfdab('0xb1'));this[a24_0xfdab('0x51')]++;this['download']();}[a24_0xfdab('0x3d')](this));}['downloadYouTube'](_0x46f6fa){const _0x4c6209=this[a24_0xfdab('0x18')]+'/'+_0x46f6fa+'.mp4';const _0x3ab583='http://www.youtube.com/watch?v='+_0x46f6fa;console['log'](a24_0xfdab('0xb2')+_0x3ab583);console['log'](a24_0xfdab('0xb3')+_0x4c6209);const _0x541058=youtubedl(_0x3ab583,[a24_0xfdab('0xb4'),'--no-check-certificate'],{'cwd':__dirname});_0x541058['on'](a24_0xfdab('0xb5'),function(_0x385f64){console[a24_0xfdab('0x47')](a24_0xfdab('0xb6'));console['log'](a24_0xfdab('0xb7')+_0x385f64['_filename']);console['log']('size:\x20'+_0x385f64['size']);});_0x541058['on']('complete',function complete(_0x2dffb1){'use strict';console[a24_0xfdab('0x47')]('filename:\x20'+_0x2dffb1[a24_0xfdab('0xb8')]+a24_0xfdab('0xb9'));});_0x541058['on'](a24_0xfdab('0x79'),function(){console[a24_0xfdab('0x47')]('finished\x20youtube\x20downloading!');this[a24_0xfdab('0x66')](_0x4c6209)['then'](function(_0x54080f){if(_0x54080f){this[a24_0xfdab('0x51')]++;}this[a24_0xfdab('0x53')]();}['bind'](this));}[a24_0xfdab('0x3d')](this));_0x541058[a24_0xfdab('0xa3')](fs[a24_0xfdab('0x93')](_0x4c6209));}[a24_0xfdab('0xba')](){console['log']('Finishing');if(this[a24_0xfdab('0x20')]){if(this[a24_0xfdab('0x22')][a24_0xfdab('0x5b')]==0x0){console[a24_0xfdab('0x47')]('this.playListFile:\x20'+this[a24_0xfdab('0x1b')]);fs[a24_0xfdab('0xbb')](this[a24_0xfdab('0x1b')],JSON[a24_0xfdab('0x40')](this[a24_0xfdab('0x23')]));let _0x42be15='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a24_0xfdab('0xbc')+'\x0d\x0a';for(const _0x19bf14 in this[a24_0xfdab('0x21')]){const _0xfe2e73=this[a24_0xfdab('0x21')][_0x19bf14][a24_0xfdab('0x5c')];const _0x298610=this[a24_0xfdab('0x21')][_0x19bf14][a24_0xfdab('0x5d')];const _0x607101=_0xfe2e73[a24_0xfdab('0x5e')](_0xfe2e73['lastIndexOf']('/')+0x1);let _0xc5497e=_0x607101['split']('.')[a24_0xfdab('0x61')](0x0,-0x1)[a24_0xfdab('0x62')]('.');if(_0x298610==a24_0xfdab('0xbd')){_0xc5497e=_0xfe2e73;}_0x42be15+='/home/osmc/luloclient/media/files/'+_0xc5497e+a24_0xfdab('0x64')+'\x0d\x0a';console['log'](a24_0xfdab('0xbe')+_0x42be15);}console[a24_0xfdab('0x47')](a24_0xfdab('0xbe')+_0x42be15);fsExtra[a24_0xfdab('0x50')](this[a24_0xfdab('0x1e')]);console[a24_0xfdab('0x47')](a24_0xfdab('0xbf')+this[a24_0xfdab('0x18')]);fsExtra[a24_0xfdab('0x67')](this['tempFolder'],this[a24_0xfdab('0x1e')]);console[a24_0xfdab('0x47')](a24_0xfdab('0xc0')+this[a24_0xfdab('0x1d')]);fsExtra[a24_0xfdab('0xbb')](this['m3uFile'],_0x42be15);console[a24_0xfdab('0x47')]('emptyDirSync:\x20'+this[a24_0xfdab('0x18')]);fsExtra['emptyDirSync'](this[a24_0xfdab('0x18')]);console[a24_0xfdab('0x47')]('Rebooting..');this[a24_0xfdab('0xc1')]();}else{console[a24_0xfdab('0x47')](a24_0xfdab('0xc2'));this['currentFile']=0x0;setTimeout(function(){this[a24_0xfdab('0x53')]();}[a24_0xfdab('0x3d')](this),0x1388);}}else{console[a24_0xfdab('0x47')](a24_0xfdab('0xc3'));}}[a24_0xfdab('0xc4')](){this[a24_0xfdab('0xc5')]('Playlist.Clear',{'playlistid':0x1},function(_0x274bb1){console[a24_0xfdab('0x47')](a24_0xfdab('0xc6'));console[a24_0xfdab('0x47')](_0x274bb1);this[a24_0xfdab('0xc5')](a24_0xfdab('0xc7'),{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x274bb1){console[a24_0xfdab('0x47')](a24_0xfdab('0xc8'));console[a24_0xfdab('0x47')](_0x274bb1);this[a24_0xfdab('0xc5')](a24_0xfdab('0xc9'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x274bb1){console[a24_0xfdab('0x47')]('Playlist.Opened');console['log'](_0x274bb1);this[a24_0xfdab('0xca')](a24_0xfdab('0xcb'));}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0xc1')](){console[a24_0xfdab('0x47')](a24_0xfdab('0xcc'));exec(a24_0xfdab('0xcd'),function(_0x3f8bb4){console[a24_0xfdab('0x47')](_0x3f8bb4);});}[a24_0xfdab('0x3c')](){const _0x4ab665=format(this['playerServiceURL'],this[a24_0xfdab('0x2f')]);console[a24_0xfdab('0x47')](_0x4ab665);request({'url':_0x4ab665,'json':!![]},function(_0x41414e,_0x123ce4,_0x5c1350){if(_0x5c1350[a24_0xfdab('0x5b')]>0x0){const _0x4d473d=_0x5c1350[0x0];const _0x64d108=_0x4d473d[a24_0xfdab('0xce')];const _0x4a6c84=_0x4d473d[a24_0xfdab('0xcf')]==0x1;this['setRss'](_0x64d108);this['enableClock'](_0x4a6c84);this['registerClient']();}console[a24_0xfdab('0x47')](_0x5c1350);}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0xd0')](){this[a24_0xfdab('0xca')](a24_0xfdab('0xd1'));}['turnOnTV'](){this[a24_0xfdab('0xca')](a24_0xfdab('0xd2'));}['setRss'](_0x221775){const _0x556cca=_0x221775!=null&&_0x221775!='';const _0x1813b0=a24_0xfdab('0xd3');const _0x499214=fsExtra[a24_0xfdab('0x2e')](_0x1813b0);console[a24_0xfdab('0x47')]('xmlContent:\x20'+_0x499214);const _0x4168ff=require('xml2js');const _0x5d0600=_0x4168ff[a24_0xfdab('0xd4')];_0x5d0600(_0x499214,function(_0x3c5a2a,_0x53872c){console[a24_0xfdab('0x47')](a24_0xfdab('0xd5'),_0x3c5a2a);console[a24_0xfdab('0x47')](a24_0xfdab('0xd6'),_0x53872c);if(!_0x221775||_0x221775==null||_0x221775==''){_0x221775=a24_0xfdab('0xd7');}_0x53872c['rssfeeds'][a24_0xfdab('0xd8')][0x0][a24_0xfdab('0xd9')][0x0]['_']=_0x221775;const _0x336ac0=new _0x4168ff['Builder']();const _0x406039=_0x336ac0['buildObject'](_0x53872c);console[a24_0xfdab('0x47')](a24_0xfdab('0xda'),_0x406039);fsExtra[a24_0xfdab('0xbb')](_0x1813b0,_0x406039);});this[a24_0xfdab('0xca')](a24_0xfdab('0xdb'));this[a24_0xfdab('0xc5')](a24_0xfdab('0xdc'),{'setting':a24_0xfdab('0xdd'),'value':_0x556cca},function(_0x35bdd2){console['log']('setRss:');console['log'](_0x35bdd2);}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0xde')](_0x4bbeba){this[a24_0xfdab('0xc5')](a24_0xfdab('0xdc'),{'setting':a24_0xfdab('0xdf'),'value':_0x4bbeba},function(_0x5ef4d1){console['log']('enableClock:\x20');console[a24_0xfdab('0x47')](_0x5ef4d1);}[a24_0xfdab('0x3d')](this));}[a24_0xfdab('0xca')](_0x2b0c1c){exec(a24_0xfdab('0xe0')+_0x2b0c1c+'\x22',function(_0x23578a){console['log'](_0x23578a);});}[a24_0xfdab('0xc5')](_0x33e26d,_0x3153a5,_0x23a554){const _0x506be1={'jsonrpc':'2.0','method':_0x33e26d,'params':_0x3153a5,'id':0x1};this[a24_0xfdab('0x44')][a24_0xfdab('0x45')](this['kodiHost']+'/jsonrpc',_0x506be1,![],{'user':this['kodiUser'],'pass':this[a24_0xfdab('0x28')]})[a24_0xfdab('0x3')](function(_0x47e065){_0x23a554(_0x47e065);})[a24_0xfdab('0x4b')](function(_0xd59852){});}}exports[a24_0xfdab('0xe1')]=SyncPlaylistsService;