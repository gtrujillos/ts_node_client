var a26_0x6b53=['.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','catch','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','push','Error:\x20','start:\x20','error','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','host','pathname','get','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','size',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','duration','video','downloadRequestFile','Error\x20downloading\x20file','Downloaded:\x20','createImageVideo','ffmpeg','-pattern_type','glob','-c:v','libx264','-pix_fmt','scale=1920:1080','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','outFileName:\x20','--format=18','--no-check-certificate','Download\x20started','_filename','size:\x20','filename:\x20','\x20already\x20downloaded.','end','finished\x20youtube\x20downloading!','finishProcess','Finishing','this.playListFile:\x20','#EXTINF:0,luloPlayList','path','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','emptyDirSync:\x20','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','RestartApp()','reboot','sudo\x20/sbin/reboot\x20-f','rss','header_active','CECStandby()','turnOnTV','kodiCommandClient','CECActivateSource()','setRss','xmlContent:\x20','xml2js','parseString','result:\x20%j','none','rssfeeds','set','feed','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','__awaiter','throw','done','value','then','apply','next','defineProperty','__esModule','./playerService','node-mediainfo','http','fs-extra','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','config.json','package.json','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','playlist.txt','m3uFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiPassword','.lulo123.','forceReload','httpClientService','PlayerService','config','parse','readFileSync','context','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','baseURL','api/player.php?player_id={0}','kodiUser','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','kodi','getItems','stringify','deviceUuid','networkInterfaces','version','post','log','register\x20response:\x20','writeFileSync','getCurrentlyPlayingVideo','item','label','reportStatus','reportStatus\x20playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','hasPlayListChanged','emptyDirSync','Total:\x20','length','download','existsSync','playListFile','removeSync','this.currentFile:\x20','currentFile','\x20of\x20','media_type','substring','lastIndexOf','split','slice','join','youtube_single'];(function(_0x33a503,_0x20854a){var _0x5a9e81=function(_0x316e4b){while(--_0x316e4b){_0x33a503['push'](_0x33a503['shift']());}};_0x5a9e81(++_0x20854a);}(a26_0x6b53,0x17e));var a26_0x4a04=function(_0x10d714,_0xda75dc){_0x10d714=_0x10d714-0x0;var _0x2ee343=a26_0x6b53[_0x10d714];return _0x2ee343;};'use strict';var __awaiter=this&&this[a26_0x4a04('0x0')]||function(_0x57c378,_0x133276,_0xf00f51,_0x72f58f){function _0x4027cc(_0x2b31b0){return _0x2b31b0 instanceof _0xf00f51?_0x2b31b0:new _0xf00f51(function(_0x17f088){_0x17f088(_0x2b31b0);});}return new(_0xf00f51||(_0xf00f51=Promise))(function(_0x38490c,_0x31e26e){function _0x56d5b5(_0x440af5){try{_0x28c529(_0x72f58f['next'](_0x440af5));}catch(_0x9d1e13){_0x31e26e(_0x9d1e13);}}function _0xbeb462(_0x36344e){try{_0x28c529(_0x72f58f[a26_0x4a04('0x1')](_0x36344e));}catch(_0x3a73a9){_0x31e26e(_0x3a73a9);}}function _0x28c529(_0x3b1571){_0x3b1571[a26_0x4a04('0x2')]?_0x38490c(_0x3b1571[a26_0x4a04('0x3')]):_0x4027cc(_0x3b1571[a26_0x4a04('0x3')])[a26_0x4a04('0x4')](_0x56d5b5,_0xbeb462);}_0x28c529((_0x72f58f=_0x72f58f[a26_0x4a04('0x5')](_0x57c378,_0x133276||[]))[a26_0x4a04('0x6')]());});};Object[a26_0x4a04('0x7')](exports,a26_0x4a04('0x8'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a26_0x4a04('0x9'));const mediainfo=require(a26_0x4a04('0xa'));const fs=require('fs');const url=require('url');const http=require(a26_0x4a04('0xb'));const fsExtra=require(a26_0x4a04('0xc'));const request=require(a26_0x4a04('0xd'));const progress=require(a26_0x4a04('0xe'));const spawn=require(a26_0x4a04('0xf'))[a26_0x4a04('0x10')];const exec=require(a26_0x4a04('0xf'))['exec'];const isImage=require(a26_0x4a04('0x11'));const format=require(a26_0x4a04('0x12'));const os=require('os');const youtubedl=require(a26_0x4a04('0x13'));const uuidv4=require(a26_0x4a04('0x14'));const configFile=a26_0x4a04('0x15');const contextFile=a26_0x4a04('0x16');const urlExists=require('url-exists');const kodi_rpc=require(a26_0x4a04('0x17'));const Downloader=require(a26_0x4a04('0x18'));class SyncPlaylistsService{constructor(){this[a26_0x4a04('0x19')]=a26_0x4a04('0x1a');this[a26_0x4a04('0x1b')]=this[a26_0x4a04('0x19')]+a26_0x4a04('0x1c');this[a26_0x4a04('0x1d')]=this[a26_0x4a04('0x19')]+'files/';this['playListFile']=this['mediaFolder']+a26_0x4a04('0x1e');this[a26_0x4a04('0x1f')]=this[a26_0x4a04('0x1d')]+'lulo_playlist.m3u';this['currentFile']=0x0;this[a26_0x4a04('0x20')]=![];this[a26_0x4a04('0x21')]=[];this[a26_0x4a04('0x22')]=[];this[a26_0x4a04('0x23')]={};this[a26_0x4a04('0x24')]=a26_0x4a04('0x25');this['kodiUser']='lulo';this[a26_0x4a04('0x26')]=a26_0x4a04('0x27');this[a26_0x4a04('0x28')]=![];this[a26_0x4a04('0x29')]=new HttpClientService_1['HttpClientService']();this['playerService']=new playerService_1[(a26_0x4a04('0x2a'))]();}['init'](){this[a26_0x4a04('0x2b')]=JSON[a26_0x4a04('0x2c')](fs[a26_0x4a04('0x2d')](configFile));this[a26_0x4a04('0x2e')]=JSON['parse'](fs[a26_0x4a04('0x2d')](contextFile));this[a26_0x4a04('0x2f')]=this[a26_0x4a04('0x2b')][a26_0x4a04('0x2f')];this['baseURL']=process[a26_0x4a04('0x30')][a26_0x4a04('0x31')]+a26_0x4a04('0x32');this[a26_0x4a04('0x33')]=this['baseURL']+a26_0x4a04('0x34');this[a26_0x4a04('0x35')]=this[a26_0x4a04('0x36')]+a26_0x4a04('0x37');this['kodi']=new kodi_rpc({'url':this[a26_0x4a04('0x24')],'user':this[a26_0x4a04('0x38')],'password':this[a26_0x4a04('0x26')]});this[a26_0x4a04('0x39')]();this[a26_0x4a04('0x3a')]();this[a26_0x4a04('0x3b')]();this[a26_0x4a04('0x3c')]();this[a26_0x4a04('0x3d')]();setInterval(function(){this[a26_0x4a04('0x3e')]();}[a26_0x4a04('0x3f')](this),0x2710);setInterval(function(){this[a26_0x4a04('0x3a')]();}[a26_0x4a04('0x3f')](this),0x493e0);}['checkDependencies'](){}['registerClient'](){this[a26_0x4a04('0x40')]['playlist'][a26_0x4a04('0x41')](0x1)['then'](function(_0x27f3d8){const _0xd383a6=JSON[a26_0x4a04('0x42')](_0x27f3d8);const _0x19bb9b={'player_id':this[a26_0x4a04('0x2f')],'device_uuid':this[a26_0x4a04('0x2b')][a26_0x4a04('0x43')],'network_info':JSON[a26_0x4a04('0x42')](os[a26_0x4a04('0x44')]()),'firmware_info':JSON[a26_0x4a04('0x42')](this[a26_0x4a04('0x2e')][a26_0x4a04('0x45')]),'playlist':_0xd383a6,'playing_item':'','status':0x0};this['httpClientService'][a26_0x4a04('0x46')]('http://restapi.lulo.run/player_devices/register',_0x19bb9b,![])[a26_0x4a04('0x4')](function(_0x37e3ca){console[a26_0x4a04('0x47')](a26_0x4a04('0x48')+Date());})['catch'](function(_0x5950b3){});console['log'](_0x19bb9b);}['bind'](this));const _0x3fd45e=this[a26_0x4a04('0x2b')][a26_0x4a04('0x43')];if(!_0x3fd45e||_0x3fd45e==''){this[a26_0x4a04('0x2b')][a26_0x4a04('0x43')]=uuidv4();this[a26_0x4a04('0x2b')]={'deviceUuid':this[a26_0x4a04('0x2b')][a26_0x4a04('0x43')],'playerId':this[a26_0x4a04('0x2b')][a26_0x4a04('0x2f')]};fs[a26_0x4a04('0x49')](configFile,JSON[a26_0x4a04('0x42')](this[a26_0x4a04('0x2b')]));}}[a26_0x4a04('0x3e')](){console['log'](a26_0x4a04('0x3e'));this[a26_0x4a04('0x40')]['player'][a26_0x4a04('0x4a')]()[a26_0x4a04('0x4')](function(_0x14c6e0){const _0x853c80=_0x14c6e0[a26_0x4a04('0x4b')][a26_0x4a04('0x4c')];this[a26_0x4a04('0x4d')](_0x853c80);}[a26_0x4a04('0x3f')](this))['catch'](function(_0x23c5a3){console[a26_0x4a04('0x47')](_0x23c5a3);this['reportStatus'](JSON[a26_0x4a04('0x42')](_0x23c5a3));}[a26_0x4a04('0x3f')](this));}[a26_0x4a04('0x4d')](_0x7e8690){console[a26_0x4a04('0x47')](a26_0x4a04('0x4e')+_0x7e8690);const _0x4b7ea={'player_id':this[a26_0x4a04('0x2f')],'device_uuid':this[a26_0x4a04('0x2b')][a26_0x4a04('0x43')],'status':_0x7e8690!=''&&_0x7e8690!=null?0x1:0x0,'playing_item':_0x7e8690};this['httpClientService'][a26_0x4a04('0x46')](a26_0x4a04('0x4f'),_0x4b7ea,![])['then'](function(_0x408a6e){console[a26_0x4a04('0x47')](a26_0x4a04('0x50'));})['catch'](function(_0x4e0e29){});}['checkFolders'](){fsExtra[a26_0x4a04('0x51')](this[a26_0x4a04('0x19')],_0x581dbc=>{});fsExtra[a26_0x4a04('0x51')](this['tempFolder'],_0x51240b=>{});fsExtra[a26_0x4a04('0x51')](this[a26_0x4a04('0x1d')],_0x17c937=>{});}[a26_0x4a04('0x3c')](){const _0x2d3beb=format(this[a26_0x4a04('0x33')],this[a26_0x4a04('0x2f')]);console[a26_0x4a04('0x47')](_0x2d3beb);request({'url':_0x2d3beb,'json':!![]},function(_0x15903f,_0x43a880,_0x1ccf90){console[a26_0x4a04('0x47')]('loadMediaList:\x20');this[a26_0x4a04('0x23')]=_0x1ccf90;this[a26_0x4a04('0x20')]=this[a26_0x4a04('0x52')]();fsExtra[a26_0x4a04('0x53')](this[a26_0x4a04('0x1b')]);this[a26_0x4a04('0x21')]=[];this[a26_0x4a04('0x22')]=[];this['currentFile']=0x0;for(const _0x1531fb in _0x1ccf90){this[a26_0x4a04('0x21')]['push'](_0x1ccf90[_0x1531fb]);}console[a26_0x4a04('0x47')](a26_0x4a04('0x54')+this[a26_0x4a04('0x21')][a26_0x4a04('0x55')]);if(this[a26_0x4a04('0x21')][a26_0x4a04('0x55')]>0x0){this[a26_0x4a04('0x56')]();}}[a26_0x4a04('0x3f')](this));}['reloadMediaList'](){this[a26_0x4a04('0x28')]=!![];if(fsExtra[a26_0x4a04('0x57')](this['tempFolder'])){fsExtra['emptyDirSync'](this[a26_0x4a04('0x1b')]);}if(fsExtra[a26_0x4a04('0x57')](this['filesFolder'])){fsExtra[a26_0x4a04('0x53')](this[a26_0x4a04('0x1d')]);}if(!fsExtra[a26_0x4a04('0x57')](this[a26_0x4a04('0x58')])){fsExtra[a26_0x4a04('0x59')](this['playListFile']);}if(!fsExtra[a26_0x4a04('0x57')](this[a26_0x4a04('0x1f')])){fsExtra[a26_0x4a04('0x59')](this['m3uFile']);}this[a26_0x4a04('0x3c')]();}[a26_0x4a04('0x52')](){const _0x492c6e=JSON[a26_0x4a04('0x42')](this['newPlayList']);try{if(!fsExtra[a26_0x4a04('0x57')](this[a26_0x4a04('0x58')])){return!![];}else{const _0xb1ca7f=fsExtra[a26_0x4a04('0x2d')](this['playListFile'])['toString']();if(_0xb1ca7f!=_0x492c6e){return!![];}}}catch(_0x549bcd){console[a26_0x4a04('0x47')](_0x549bcd);}return![];}['download'](){console[a26_0x4a04('0x47')](a26_0x4a04('0x5a')+this[a26_0x4a04('0x5b')]+a26_0x4a04('0x5c')+this[a26_0x4a04('0x21')][a26_0x4a04('0x55')]);if(this[a26_0x4a04('0x5b')]>=this[a26_0x4a04('0x21')][a26_0x4a04('0x55')]){this['finishProcess']();return;}const _0xfc7c96=String(this[a26_0x4a04('0x21')][this[a26_0x4a04('0x5b')]]['path']);const _0x1f7fb5=this[a26_0x4a04('0x21')][this['currentFile']][a26_0x4a04('0x5d')];let _0x5b79a0=_0xfc7c96[a26_0x4a04('0x5e')](_0xfc7c96[a26_0x4a04('0x5f')]('/')+0x1);const _0x442f80=_0x5b79a0[a26_0x4a04('0x60')]('.')[a26_0x4a04('0x61')](0x0,-0x1)['join']('.');let _0x22eab5=this[a26_0x4a04('0x36')]+_0xfc7c96;const _0x175aed=_0x22eab5['split']('.')[a26_0x4a04('0x61')](0x0,-0x1)[a26_0x4a04('0x62')]('.');if(_0x1f7fb5==a26_0x4a04('0x63')){_0x5b79a0=_0x5b79a0+a26_0x4a04('0x64');}else if(_0x1f7fb5==a26_0x4a04('0x65')){_0x5b79a0=_0x442f80+'.mp4';_0x22eab5=_0x175aed+'.mp4';}console[a26_0x4a04('0x47')]('**********+');console[a26_0x4a04('0x47')](_0xfc7c96);console[a26_0x4a04('0x47')](_0x1f7fb5);console['log'](_0x5b79a0);console[a26_0x4a04('0x47')](_0x22eab5);console[a26_0x4a04('0x47')](_0x442f80);console[a26_0x4a04('0x47')](_0x175aed);console[a26_0x4a04('0x47')](a26_0x4a04('0x66'));if(fsExtra[a26_0x4a04('0x57')](this[a26_0x4a04('0x1b')]+_0x5b79a0)){this['checkVideo'](this[a26_0x4a04('0x1b')]+_0x5b79a0)[a26_0x4a04('0x4')](function(_0x28690b){if(_0x28690b){this[a26_0x4a04('0x5b')]++;}else{this[a26_0x4a04('0x20')]=!![];}this[a26_0x4a04('0x56')]();}[a26_0x4a04('0x3f')](this));}else if(fsExtra['existsSync'](this[a26_0x4a04('0x1d')]+_0x5b79a0)){this[a26_0x4a04('0x67')](this[a26_0x4a04('0x1d')]+_0x5b79a0)['then'](function(_0x4c20c1){if(_0x4c20c1){fsExtra[a26_0x4a04('0x68')](this[a26_0x4a04('0x1d')]+_0x5b79a0,this[a26_0x4a04('0x1b')]+_0x5b79a0);this['currentFile']++;}else{this['playlistChanged']=!![];}this[a26_0x4a04('0x56')]();}[a26_0x4a04('0x3f')](this));}else{console[a26_0x4a04('0x47')](a26_0x4a04('0x69')+_0x22eab5);this['playlistChanged']=!![];if(_0x1f7fb5==a26_0x4a04('0x63')){this[a26_0x4a04('0x6a')](_0xfc7c96);}else{this[a26_0x4a04('0x6b')](_0x22eab5,_0x5b79a0,_0x1f7fb5);}}}[a26_0x4a04('0x67')](_0x1f36c1){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x4a04('0x47')](a26_0x4a04('0x6c')+_0x1f36c1);const _0x24c8b7=yield mediainfo(_0x1f36c1)[a26_0x4a04('0x6d')](_0x34e645=>{console['log'](_0x34e645);fsExtra['removeSync'](_0x1f36c1);return![];});const _0x2b4005=_0x24c8b7[a26_0x4a04('0x6e')][a26_0x4a04('0x6f')][a26_0x4a04('0x55')]>0x1&&_0x24c8b7[a26_0x4a04('0x6e')][a26_0x4a04('0x6f')][0x1][a26_0x4a04('0x70')]==a26_0x4a04('0x71');if(!_0x2b4005){fsExtra[a26_0x4a04('0x59')](_0x1f36c1);}console[a26_0x4a04('0x47')](a26_0x4a04('0x72')+_0x2b4005);return _0x2b4005;});}['downloader'](_0x57d991,_0x345d08,_0x6abf60){const _0x230bdc=new Downloader();console[a26_0x4a04('0x47')](_0x57d991);console[a26_0x4a04('0x47')](_0x345d08);console['log'](_0x6abf60);const _0x5aaaac=_0x230bdc[a26_0x4a04('0x56')](_0x57d991,this[a26_0x4a04('0x1b')]+_0x345d08);urlExists(_0x57d991,function(_0x47149b,_0x4db21c){if(_0x4db21c){if(this[a26_0x4a04('0x22')][a26_0x4a04('0x73')](this[a26_0x4a04('0x5b')])){const _0x4ffd36=this['failDownloadFiles'][a26_0x4a04('0x74')](this[a26_0x4a04('0x5b')]);if(_0x4ffd36>-0x1){this[a26_0x4a04('0x22')][a26_0x4a04('0x75')](_0x4ffd36,0x1);}}console[a26_0x4a04('0x47')](a26_0x4a04('0x76')+_0x57d991);_0x5aaaac['start']();}else{if(!this[a26_0x4a04('0x22')][a26_0x4a04('0x73')](this[a26_0x4a04('0x5b')])){this[a26_0x4a04('0x22')][a26_0x4a04('0x77')](this[a26_0x4a04('0x5b')]);}console[a26_0x4a04('0x47')](a26_0x4a04('0x78')+_0x57d991);this[a26_0x4a04('0x5b')]++;this[a26_0x4a04('0x56')]();}}[a26_0x4a04('0x3f')](this));_0x5aaaac['on']('start',function(_0x5aaaac){console['log'](a26_0x4a04('0x79')+_0x57d991);});_0x5aaaac['on'](a26_0x4a04('0x7a'),function(_0x5aaaac){console[a26_0x4a04('0x47')]('error:\x20');this['download']();}['bind'](this));_0x5aaaac['on']('end',function(_0x5aaaac){console['log']('end');console[a26_0x4a04('0x47')]('Downloaded:\x20'+_0x345d08);console['log'](a26_0x4a04('0x7b')+_0x6abf60);this[a26_0x4a04('0x67')](this[a26_0x4a04('0x1b')]+_0x345d08)[a26_0x4a04('0x4')](function(_0x51fc2b){if(_0x51fc2b){this[a26_0x4a04('0x5b')]++;}this[a26_0x4a04('0x56')]();}['bind'](this));}[a26_0x4a04('0x3f')](this));_0x5aaaac['on']('stopped',function(_0x5aaaac){console[a26_0x4a04('0x47')](a26_0x4a04('0x7c'));});_0x5aaaac['on'](a26_0x4a04('0x7d'),function(_0x5aaaac){console[a26_0x4a04('0x47')](a26_0x4a04('0x7d'));});_0x5aaaac['on'](a26_0x4a04('0x7e'),function(_0x5aaaac){console[a26_0x4a04('0x47')]('retry');});}['downloadHTTPFile'](_0x4d4366,_0x12207b,_0x3872f3,_0xbee120){console[a26_0x4a04('0x47')](a26_0x4a04('0x7f'));console[a26_0x4a04('0x47')](_0x4d4366);const _0x5463bb=!![];let _0x8f91ea=0x0;const _0x1646cb='';console[a26_0x4a04('0x47')](a26_0x4a04('0x80')+_0x4d4366+a26_0x4a04('0x81')+_0x12207b);if(_0x8f91ea){if(_0x8f91ea>0x5){_0xbee120(a26_0x4a04('0x82'),_0x4d4366,_0x3872f3,null);return;}}else{_0x8f91ea=0x0;}const _0x21d608=this[a26_0x4a04('0x1b')]+_0x12207b;let _0x252a04;if(_0xbee120===undefined){console['log'](a26_0x4a04('0x83')+_0x4d4366+a26_0x4a04('0x81')+_0x21d608);_0xbee120=function(_0x429a8d,_0x1cf13e){console['log'](a26_0x4a04('0x84'),_0x429a8d,_0x1cf13e);};}http[a26_0x4a04('0x85')]['maxSockets']=0x64;const _0xfaf52={'host':url['parse'](_0x4d4366)[a26_0x4a04('0x86')],'port':0x50,'path':url[a26_0x4a04('0x2c')](_0x4d4366)[a26_0x4a04('0x87')],'agent':![]};const _0x37a8d9=http[a26_0x4a04('0x88')](_0xfaf52,function(_0x2717d7){let _0x570c4f=0x0;let _0x33c0b5=0x0;function _0x17ba45(){if(_0x570c4f===undefined){console[a26_0x4a04('0x47')](_0x12207b+'\x20Progress:\x20unknown\x09'+_0x33c0b5+'/'+'?');}const _0x37da3c=_0x33c0b5/_0x570c4f*0x64;console[a26_0x4a04('0x47')](_0x12207b+'\x20Progress:\x20'+_0x37da3c+'%\x09'+_0x33c0b5+'/'+_0x570c4f);}console[a26_0x4a04('0x47')](_0x12207b+'\x20'+_0x2717d7['statusCode']);switch(_0x2717d7[a26_0x4a04('0x89')]){case 0xc8:_0x570c4f=_0x2717d7[a26_0x4a04('0x8a')][a26_0x4a04('0x8b')]||_0x1646cb;fs[a26_0x4a04('0x8c')](_0x21d608,function(_0x31e7ac,_0x5ab2e0){if(!_0x31e7ac){console[a26_0x4a04('0x47')](a26_0x4a04('0x8d')+_0x21d608);if(_0x5ab2e0['size']==_0x570c4f){console[a26_0x4a04('0x47')](a26_0x4a04('0x8e')+_0x570c4f+')');console[a26_0x4a04('0x47')](a26_0x4a04('0x8f'));}else{console[a26_0x4a04('0x47')](a26_0x4a04('0x90')+_0x5ab2e0[a26_0x4a04('0x91')]+a26_0x4a04('0x92')+_0x570c4f+')');}}_0x252a04=fs[a26_0x4a04('0x93')](_0x21d608);_0x2717d7[a26_0x4a04('0x94')](_0x252a04);_0x2717d7['on'](a26_0x4a04('0x95'),function(_0x2e2dae){_0x33c0b5+=_0x2e2dae['length'];_0x17ba45();});_0x37a8d9['on'](a26_0x4a04('0x7a'),function(_0x31e7ac){console[a26_0x4a04('0x47')](a26_0x4a04('0x96'));console['log'](_0x31e7ac);});_0x252a04['on'](a26_0x4a04('0x97'),function(){console[a26_0x4a04('0x47')](a26_0x4a04('0x98')+_0x4d4366+a26_0x4a04('0x81')+_0x12207b);_0xbee120(null,_0x12207b,_0x3872f3,_0x12207b);}[a26_0x4a04('0x3f')](this));});break;case 0x12e:const _0x5db148=_0x2717d7[a26_0x4a04('0x8a')][a26_0x4a04('0x99')];console[a26_0x4a04('0x47')](a26_0x4a04('0x9a')+_0x4d4366+a26_0x4a04('0x81')+_0x5db148);if(_0x8f91ea<0x5){this[a26_0x4a04('0x7f')](_0x5db148,_0x12207b,_0xbee120,_0x8f91ea++);}else{console[a26_0x4a04('0x7a')](a26_0x4a04('0x9b')+_0x4d4366+'.');_0xbee120(a26_0x4a04('0x9c'),null,null,null);}return;case 0x194:console['log']('File\x20Not\x20Found\x20'+_0x4d4366);default:console[a26_0x4a04('0x47')](a26_0x4a04('0x9d')+_0x4d4366+a26_0x4a04('0x9e')+_0x2717d7[a26_0x4a04('0x89')]);_0x37a8d9[a26_0x4a04('0x9f')]();_0xbee120(_0x2717d7['statusCode'],null,null,null);return;}})['on'](a26_0x4a04('0x7a'),function(_0x13ffd1){console['log'](a26_0x4a04('0xa0')+_0x4d4366+'\x20'+_0x13ffd1[a26_0x4a04('0xa1')]);_0xbee120(_0x13ffd1,null,null,null);});}['downloadHTTPFileCallback'](_0x3e43d3,_0x2f0218,_0x441cfc,_0x200264){console['log']('downloadHTTPFileCallback');console[a26_0x4a04('0x47')](_0x3e43d3);console[a26_0x4a04('0x47')](_0x2f0218);console[a26_0x4a04('0x47')](_0x441cfc);console['log'](_0x200264);if(_0x441cfc==a26_0x4a04('0x65')){const _0xbcb75a=this['downloadFiles'][this[a26_0x4a04('0x5b')]][a26_0x4a04('0xa2')]!=null?this[a26_0x4a04('0x21')][this[a26_0x4a04('0x5b')]]['duration']:0x1e;this['createImageVideo'](_0x200264,_0xbcb75a);}else if(_0x441cfc==a26_0x4a04('0xa3')){if(_0x3e43d3==null&&_0x2f0218!=''){this['currentFile']++;}this[a26_0x4a04('0x56')]();}console[a26_0x4a04('0x47')](this[a26_0x4a04('0x5b')]);}[a26_0x4a04('0xa4')](_0x317464,_0x6e8170,_0x2d88c3){progress(request(_0x317464),{})['on']('progress',function(_0x576f12){console[a26_0x4a04('0x47')](_0x576f12);})['on'](a26_0x4a04('0x7a'),function(_0x1b9234){console[a26_0x4a04('0x47')](a26_0x4a04('0xa5'));this[a26_0x4a04('0x56')]();})['on']('end',function(){console[a26_0x4a04('0x47')](a26_0x4a04('0xa6')+_0x6e8170);console['log'](a26_0x4a04('0x7b')+_0x2d88c3);if(_0x2d88c3=='image'){const _0x261d63=this[a26_0x4a04('0x21')][this[a26_0x4a04('0x5b')]][a26_0x4a04('0xa2')]!=null?this[a26_0x4a04('0x21')][this[a26_0x4a04('0x5b')]]['duration']:0x1e;this[a26_0x4a04('0xa7')](_0x6e8170,_0x261d63);}else if(_0x2d88c3==a26_0x4a04('0xa3')){this[a26_0x4a04('0x5b')]++;this[a26_0x4a04('0x56')]();}}[a26_0x4a04('0x3f')](this))[a26_0x4a04('0x94')](fs['createWriteStream'](this[a26_0x4a04('0x1b')]+_0x6e8170));}[a26_0x4a04('0xa7')](_0x30e480,_0x4f2d63=0x1e){const _0x5a4f7a=this[a26_0x4a04('0x1b')]+_0x30e480;console[a26_0x4a04('0x47')](_0x5a4f7a);console[a26_0x4a04('0x47')](_0x30e480);const _0x13410b=_0x30e480[a26_0x4a04('0x60')]('.')[a26_0x4a04('0x61')](0x0,-0x1)['join']('.');const _0x2e2ae0=a26_0x4a04('0xa8');const _0x491e46=['-y','-r','1/2','-loop','1',a26_0x4a04('0xa9'),a26_0x4a04('0xaa'),'-i',_0x5a4f7a,'-t',String(_0x4f2d63),a26_0x4a04('0xab'),a26_0x4a04('0xac'),a26_0x4a04('0xad'),'yuv420p','-r','25','-vf',a26_0x4a04('0xae'),this[a26_0x4a04('0x1b')]+_0x13410b+a26_0x4a04('0x64')];const _0x3c8a65=spawn(_0x2e2ae0,_0x491e46);_0x3c8a65['stdout']['on'](a26_0x4a04('0x95'),function(_0x1efe83){console[a26_0x4a04('0x47')](a26_0x4a04('0xaf')+_0x5a4f7a);});_0x3c8a65['stderr']['on']('data',function(_0x183732){console[a26_0x4a04('0x47')](a26_0x4a04('0xb0')+_0x183732);}[a26_0x4a04('0x3f')](this));_0x3c8a65['on'](a26_0x4a04('0xb1'),function(){console[a26_0x4a04('0x47')](a26_0x4a04('0xb2'));this[a26_0x4a04('0x5b')]++;this[a26_0x4a04('0x56')]();}[a26_0x4a04('0x3f')](this));}['downloadYouTube'](_0xdfd17b){const _0x162ee1=this['tempFolder']+'/'+_0xdfd17b+a26_0x4a04('0x64');const _0x444f04=a26_0x4a04('0xb3')+_0xdfd17b;console[a26_0x4a04('0x47')]('youtubeURL:\x20'+_0x444f04);console[a26_0x4a04('0x47')](a26_0x4a04('0xb4')+_0x162ee1);const _0x202742=youtubedl(_0x444f04,[a26_0x4a04('0xb5'),a26_0x4a04('0xb6')],{'cwd':__dirname});_0x202742['on']('info',function(_0x23e658){console[a26_0x4a04('0x47')](a26_0x4a04('0xb7'));console[a26_0x4a04('0x47')]('filename:\x20'+_0x23e658[a26_0x4a04('0xb8')]);console[a26_0x4a04('0x47')](a26_0x4a04('0xb9')+_0x23e658[a26_0x4a04('0x91')]);});_0x202742['on']('complete',function complete(_0x64e0aa){'use strict';console[a26_0x4a04('0x47')](a26_0x4a04('0xba')+_0x64e0aa[a26_0x4a04('0xb8')]+a26_0x4a04('0xbb'));});_0x202742['on'](a26_0x4a04('0xbc'),function(){console[a26_0x4a04('0x47')](a26_0x4a04('0xbd'));this['checkVideo'](_0x162ee1)[a26_0x4a04('0x4')](function(_0x1d030c){if(_0x1d030c){this[a26_0x4a04('0x5b')]++;}this[a26_0x4a04('0x56')]();}['bind'](this));}[a26_0x4a04('0x3f')](this));_0x202742[a26_0x4a04('0x94')](fs['createWriteStream'](_0x162ee1));}[a26_0x4a04('0xbe')](){console['log'](a26_0x4a04('0xbf'));if(this['playlistChanged']){if(this['failDownloadFiles'][a26_0x4a04('0x55')]==0x0){console[a26_0x4a04('0x47')](a26_0x4a04('0xc0')+this[a26_0x4a04('0x58')]);fs['writeFileSync'](this[a26_0x4a04('0x58')],JSON['stringify'](this['newPlayList']));let _0x35a5a0='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a26_0x4a04('0xc1')+'\x0d\x0a';for(const _0x383ca7 in this[a26_0x4a04('0x21')]){const _0x200552=this[a26_0x4a04('0x21')][_0x383ca7][a26_0x4a04('0xc2')];const _0x15a10f=this[a26_0x4a04('0x21')][_0x383ca7][a26_0x4a04('0x5d')];const _0x4c419c=_0x200552[a26_0x4a04('0x5e')](_0x200552[a26_0x4a04('0x5f')]('/')+0x1);let _0x279b7f=_0x4c419c[a26_0x4a04('0x60')]('.')[a26_0x4a04('0x61')](0x0,-0x1)[a26_0x4a04('0x62')]('.');if(_0x15a10f==a26_0x4a04('0x63')){_0x279b7f=_0x200552;}_0x35a5a0+=a26_0x4a04('0xc3')+_0x279b7f+a26_0x4a04('0x64')+'\x0d\x0a';console[a26_0x4a04('0x47')](a26_0x4a04('0xc4')+_0x35a5a0);}console[a26_0x4a04('0x47')](a26_0x4a04('0xc4')+_0x35a5a0);fsExtra[a26_0x4a04('0x53')](this['filesFolder']);console[a26_0x4a04('0x47')](a26_0x4a04('0xc5')+this[a26_0x4a04('0x1b')]);fsExtra[a26_0x4a04('0x68')](this[a26_0x4a04('0x1b')],this[a26_0x4a04('0x1d')]);console[a26_0x4a04('0x47')]('writeFileSync:\x20'+this[a26_0x4a04('0x1f')]);fsExtra['writeFileSync'](this[a26_0x4a04('0x1f')],_0x35a5a0);console[a26_0x4a04('0x47')](a26_0x4a04('0xc6')+this[a26_0x4a04('0x1b')]);fsExtra[a26_0x4a04('0x53')](this['tempFolder']);console[a26_0x4a04('0x47')]('Rebooting..');this['reboot']();}else{console[a26_0x4a04('0x47')](a26_0x4a04('0xc7'));this['currentFile']=0x0;setTimeout(function(){this['download']();}[a26_0x4a04('0x3f')](this),0x1388);}}else{console[a26_0x4a04('0x47')](a26_0x4a04('0xc8'));}}['refreshPlayer'](){this[a26_0x4a04('0xc9')](a26_0x4a04('0xca'),{'playlistid':0x1},function(_0x337de3){console[a26_0x4a04('0x47')](a26_0x4a04('0xcb'));console[a26_0x4a04('0x47')](_0x337de3);this['jsonrpcClient'](a26_0x4a04('0xcc'),{'item':{'file':a26_0x4a04('0xcd')},'playlistid':0x1},function(_0x337de3){console[a26_0x4a04('0x47')](a26_0x4a04('0xce'));console['log'](_0x337de3);this[a26_0x4a04('0xc9')](a26_0x4a04('0xcf'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x337de3){console[a26_0x4a04('0x47')](a26_0x4a04('0xd0'));console['log'](_0x337de3);this['kodiCommandClient'](a26_0x4a04('0xd1'));}[a26_0x4a04('0x3f')](this));}[a26_0x4a04('0x3f')](this));}['bind'](this));}[a26_0x4a04('0xd2')](){console[a26_0x4a04('0x47')]('Rebooting');exec(a26_0x4a04('0xd3'),function(_0x1914fc){console[a26_0x4a04('0x47')](_0x1914fc);});}[a26_0x4a04('0x3d')](){const _0x12afee=format(this[a26_0x4a04('0x35')],this[a26_0x4a04('0x2f')]);console[a26_0x4a04('0x47')](_0x12afee);request({'url':_0x12afee,'json':!![]},function(_0x3c7020,_0x10510e,_0x369b00){if(_0x369b00['length']>0x0){const _0x2a709d=_0x369b00[0x0];const _0x474fa2=_0x2a709d[a26_0x4a04('0xd4')];const _0x295ee8=_0x2a709d[a26_0x4a04('0xd5')]==0x1;this['setRss'](_0x474fa2);this['enableClock'](_0x295ee8);this['registerClient']();}console[a26_0x4a04('0x47')](_0x369b00);}[a26_0x4a04('0x3f')](this));}['turnOffTV'](){this['kodiCommandClient'](a26_0x4a04('0xd6'));}[a26_0x4a04('0xd7')](){this[a26_0x4a04('0xd8')](a26_0x4a04('0xd9'));}[a26_0x4a04('0xda')](_0xd035bd){const _0x306d55=_0xd035bd!=null&&_0xd035bd!='';const _0x55a69d='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra[a26_0x4a04('0x57')](_0x55a69d)){const _0x1884c4=fsExtra[a26_0x4a04('0x2d')](_0x55a69d);console[a26_0x4a04('0x47')](a26_0x4a04('0xdb')+_0x1884c4);const _0x230334=require(a26_0x4a04('0xdc'));const _0x12fb23=_0x230334[a26_0x4a04('0xdd')];_0x12fb23(_0x1884c4,function(_0x3a86ac,_0x19c394){console[a26_0x4a04('0x47')]('err:\x20%j',_0x3a86ac);console[a26_0x4a04('0x47')](a26_0x4a04('0xde'),_0x19c394);if(!_0xd035bd||_0xd035bd==null||_0xd035bd==''){_0xd035bd=a26_0x4a04('0xdf');}_0x19c394[a26_0x4a04('0xe0')][a26_0x4a04('0xe1')][0x0][a26_0x4a04('0xe2')][0x0]['_']=_0xd035bd;const _0x380197=new _0x230334['Builder']();const _0xa7d2be=_0x380197[a26_0x4a04('0xe3')](_0x19c394);console[a26_0x4a04('0x47')](a26_0x4a04('0xe4'),_0xa7d2be);fsExtra['writeFileSync'](_0x55a69d,_0xa7d2be);});this[a26_0x4a04('0xd8')](a26_0x4a04('0xe5'));this[a26_0x4a04('0xc9')](a26_0x4a04('0xe6'),{'setting':a26_0x4a04('0xe7'),'value':_0x306d55},function(_0x5c15ba){console[a26_0x4a04('0x47')](a26_0x4a04('0xe8'));console[a26_0x4a04('0x47')](_0x5c15ba);}[a26_0x4a04('0x3f')](this));}}['enableClock'](_0x3934ac){this[a26_0x4a04('0xc9')](a26_0x4a04('0xe6'),{'setting':a26_0x4a04('0xe9'),'value':_0x3934ac},function(_0x502401){console[a26_0x4a04('0x47')](a26_0x4a04('0xea'));console[a26_0x4a04('0x47')](_0x502401);}[a26_0x4a04('0x3f')](this));}[a26_0x4a04('0xd8')](_0x407f24){exec(a26_0x4a04('0xeb')+_0x407f24+'\x22',function(_0x3cbf29){console[a26_0x4a04('0x47')](_0x3cbf29);});}[a26_0x4a04('0xc9')](_0x2ddef0,_0x279a23,_0x20a488){const _0x40037e={'jsonrpc':a26_0x4a04('0xec'),'method':_0x2ddef0,'params':_0x279a23,'id':0x1};const _0xe662ec={'user':this[a26_0x4a04('0x38')],'pass':this['kodiPassword']};console[a26_0x4a04('0x47')](a26_0x4a04('0xed'),_0x40037e);console[a26_0x4a04('0x47')](a26_0x4a04('0xee'),_0xe662ec);this[a26_0x4a04('0x29')]['post'](this[a26_0x4a04('0x24')]+a26_0x4a04('0xef'),_0x40037e,![],_0xe662ec)['then'](function(_0x4e2bde){_0x20a488(_0x4e2bde);})[a26_0x4a04('0x6d')](function(_0x560126){});}}exports[a26_0x4a04('0xf0')]=SyncPlaylistsService;