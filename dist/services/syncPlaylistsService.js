var a22_0x20c7=['media/','tempFolder','temp/','m3uFile','filesFolder','lulo_playlist.m3u','currentFile','failDownloadFiles','httpClientService','HttpClientService','init','parse','context','readFileSync','playerId','config','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','kodi','http://localhost','lulo','.lulo123.','checkDependencies','registerClient','getStatus','bind','getItems','stringify','deviceUuid','post','log','register\x20response:\x20','catch','player','getCurrentlyPlayingVideo','item','label','reportStatus','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','loadMediaList','loadMediaList:\x20','newPlayList','playlistChanged','hasPlayListChanged','emptyDirSync','downloadFiles','push','Total:\x20','length','download','reloadMediaList','existsSync','playListFile','removeSync','Shutdown','toString','this.currentFile:\x20','finishProcess','substring','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','downloadYouTube','downloader','media','track','@type','Video','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','progress','Error\x20downloading\x20file','Downloaded:\x20','mediaType:\x20','ffmpeg','-loop','-pattern_type','glob','libx264','-pix_fmt','yuv420p','stdout','data','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','_filename','size:\x20','size','complete','filename:\x20','\x20already\x20downloaded.','writeFileSync','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','media_type','lastIndexOf','/home/osmc/luloclient/media/files/','Rebooting..','shutdown','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','__awaiter','value','then','next','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','config.json','mediaFolder'];(function(_0x123b00,_0xd097ea){var _0x51436a=function(_0x5b9007){while(--_0x5b9007){_0x123b00['push'](_0x123b00['shift']());}};_0x51436a(++_0xd097ea);}(a22_0x20c7,0xa7));var a22_0x169a=function(_0x4e1b1e,_0x282d40){_0x4e1b1e=_0x4e1b1e-0x0;var _0x442284=a22_0x20c7[_0x4e1b1e];return _0x442284;};'use strict';var __awaiter=this&&this[a22_0x169a('0x0')]||function(_0x863817,_0x21a26e,_0xc862d9,_0xe71a58){function _0x151940(_0x45da57){return _0x45da57 instanceof _0xc862d9?_0x45da57:new _0xc862d9(function(_0x4dc5f0){_0x4dc5f0(_0x45da57);});}return new(_0xc862d9||(_0xc862d9=Promise))(function(_0x9aea3f,_0x5184db){function _0x8c0e22(_0x3a3a3a){try{_0x565ba4(_0xe71a58['next'](_0x3a3a3a));}catch(_0x37357b){_0x5184db(_0x37357b);}}function _0x473e65(_0x264bc1){try{_0x565ba4(_0xe71a58['throw'](_0x264bc1));}catch(_0x7ce4e1){_0x5184db(_0x7ce4e1);}}function _0x565ba4(_0x59f732){_0x59f732['done']?_0x9aea3f(_0x59f732[a22_0x169a('0x1')]):_0x151940(_0x59f732[a22_0x169a('0x1')])[a22_0x169a('0x2')](_0x8c0e22,_0x473e65);}_0x565ba4((_0xe71a58=_0xe71a58['apply'](_0x863817,_0x21a26e||[]))[a22_0x169a('0x3')]());});};Object[a22_0x169a('0x4')](exports,a22_0x169a('0x5'),{'value':!![]});const HttpClientService_1=require(a22_0x169a('0x6'));const mediainfo=require(a22_0x169a('0x7'));const fs=require('fs');const url=require(a22_0x169a('0x8'));const http=require(a22_0x169a('0x9'));const fsExtra=require(a22_0x169a('0xa'));const request=require(a22_0x169a('0xb'));const progress=require(a22_0x169a('0xc'));const spawn=require(a22_0x169a('0xd'))[a22_0x169a('0xe')];const isImage=require(a22_0x169a('0xf'));const format=require(a22_0x169a('0x10'));const os=require('os');const youtubedl=require(a22_0x169a('0x11'));const uuidv4=require(a22_0x169a('0x12'));const configFile=a22_0x169a('0x13');const contextFile='context.json';const urlExists=require('url-exists');const kodi_rpc=require('node-kodi');const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a22_0x169a('0x14')]=a22_0x169a('0x15');this[a22_0x169a('0x16')]=this[a22_0x169a('0x14')]+a22_0x169a('0x17');this['filesFolder']=this[a22_0x169a('0x14')]+'files/';this['playListFile']=this['mediaFolder']+'playlist.txt';this[a22_0x169a('0x18')]=this[a22_0x169a('0x19')]+a22_0x169a('0x1a');this[a22_0x169a('0x1b')]=0x0;this['playlistChanged']=![];this['downloadFiles']=[];this[a22_0x169a('0x1c')]=[];this['newPlayList']={};this[a22_0x169a('0x1d')]=new HttpClientService_1[(a22_0x169a('0x1e'))]();}[a22_0x169a('0x1f')](){this['config']=JSON[a22_0x169a('0x20')](fs['readFileSync'](configFile));this[a22_0x169a('0x21')]=JSON[a22_0x169a('0x20')](fs[a22_0x169a('0x22')](contextFile));this[a22_0x169a('0x23')]=this[a22_0x169a('0x24')][a22_0x169a('0x23')];this[a22_0x169a('0x25')]=process[a22_0x169a('0x26')][a22_0x169a('0x27')]+a22_0x169a('0x28');this[a22_0x169a('0x29')]=this['baseURL']+'api/player_playlist.php?player_id={0}';this[a22_0x169a('0x2a')]=new kodi_rpc({'url':a22_0x169a('0x2b'),'user':a22_0x169a('0x2c'),'password':a22_0x169a('0x2d')});this[a22_0x169a('0x2e')]();this[a22_0x169a('0x2f')]();this['checkFolders']();this['loadMediaList']();setInterval(function(){this[a22_0x169a('0x30')]();}[a22_0x169a('0x31')](this),0x2710);setInterval(function(){this['registerClient']();}[a22_0x169a('0x31')](this),0x493e0);}['checkDependencies'](){}['registerClient'](){this['kodi']['playlist'][a22_0x169a('0x32')](0x1)['then'](function(_0xc80eff){const _0x1671b5=JSON[a22_0x169a('0x33')](_0xc80eff);const _0x3fadf5={'player_id':this['playerId'],'device_uuid':this[a22_0x169a('0x24')][a22_0x169a('0x34')],'network_info':JSON[a22_0x169a('0x33')](os['networkInterfaces']()),'firmware_info':JSON[a22_0x169a('0x33')](this[a22_0x169a('0x21')]),'playlist':_0x1671b5,'playing_item':'','status':0x0};this[a22_0x169a('0x1d')][a22_0x169a('0x35')]('http://restapi.lulo.run/player_devices/register',_0x3fadf5,![])[a22_0x169a('0x2')](function(_0x4e8a9d){console[a22_0x169a('0x36')](a22_0x169a('0x37')+Date());})[a22_0x169a('0x38')](function(_0x238560){});console[a22_0x169a('0x36')](_0x3fadf5);}[a22_0x169a('0x31')](this));const _0x1544c6=this[a22_0x169a('0x24')][a22_0x169a('0x34')];if(!_0x1544c6||_0x1544c6==''){this[a22_0x169a('0x24')][a22_0x169a('0x34')]=uuidv4();this[a22_0x169a('0x24')]={'deviceUuid':this[a22_0x169a('0x24')][a22_0x169a('0x34')],'playerId':this[a22_0x169a('0x24')][a22_0x169a('0x23')]};fs['writeFileSync'](configFile,JSON[a22_0x169a('0x33')](this[a22_0x169a('0x24')]));}}['getStatus'](){console[a22_0x169a('0x36')](a22_0x169a('0x30'));this[a22_0x169a('0x2a')][a22_0x169a('0x39')][a22_0x169a('0x3a')]()[a22_0x169a('0x2')](function(_0x50edb4){const _0x4f1b98=_0x50edb4[a22_0x169a('0x3b')][a22_0x169a('0x3c')];this[a22_0x169a('0x3d')](_0x4f1b98);}[a22_0x169a('0x31')](this))[a22_0x169a('0x38')](function(_0x1fb4c9){console['log'](_0x1fb4c9);this[a22_0x169a('0x3d')](_0x1fb4c9);}[a22_0x169a('0x31')](this));}[a22_0x169a('0x3d')](_0x480c7f){console[a22_0x169a('0x36')]('playingItem:\x20'+_0x480c7f);const _0x39b4f1={'player_id':this[a22_0x169a('0x23')],'device_uuid':this[a22_0x169a('0x24')][a22_0x169a('0x34')],'status':_0x480c7f!=''&&_0x480c7f!=null?0x1:0x0,'playing_item':_0x480c7f};this[a22_0x169a('0x1d')][a22_0x169a('0x35')](a22_0x169a('0x3e'),_0x39b4f1,![])[a22_0x169a('0x2')](function(_0x4f3bce){console['log'](a22_0x169a('0x3f')+Date());})[a22_0x169a('0x38')](function(_0x3e8f7d){});}[a22_0x169a('0x40')](){fsExtra['ensureDir'](this['mediaFolder'],_0x307561=>{});fsExtra[a22_0x169a('0x41')](this[a22_0x169a('0x16')],_0x519b01=>{});fsExtra[a22_0x169a('0x41')](this[a22_0x169a('0x19')],_0x3d12e2=>{});}[a22_0x169a('0x42')](){const _0x202fe2=format(this[a22_0x169a('0x29')],this[a22_0x169a('0x23')]);console[a22_0x169a('0x36')](_0x202fe2);request({'url':_0x202fe2,'json':!![]},function(_0x15fd98,_0x1c31e7,_0xca5b23){console[a22_0x169a('0x36')](a22_0x169a('0x43'));console[a22_0x169a('0x36')](_0xca5b23);this[a22_0x169a('0x44')]=_0xca5b23;this[a22_0x169a('0x45')]=this[a22_0x169a('0x46')]();fsExtra[a22_0x169a('0x47')](this[a22_0x169a('0x16')]);this[a22_0x169a('0x48')]=[];this['failDownloadFiles']=[];this['currentFile']=0x0;for(const _0x378882 in _0xca5b23){this[a22_0x169a('0x48')][a22_0x169a('0x49')](_0xca5b23[_0x378882]);}console[a22_0x169a('0x36')](a22_0x169a('0x4a')+this['downloadFiles']['length']);if(this[a22_0x169a('0x48')][a22_0x169a('0x4b')]>0x0){this[a22_0x169a('0x4c')]();}}[a22_0x169a('0x31')](this));}[a22_0x169a('0x4d')](){if(fsExtra[a22_0x169a('0x4e')](this[a22_0x169a('0x16')])){fsExtra[a22_0x169a('0x47')](this[a22_0x169a('0x16')]);}if(fsExtra[a22_0x169a('0x4e')](this['playListFile'])){fsExtra[a22_0x169a('0x47')](this[a22_0x169a('0x4f')]);}if(!fsExtra[a22_0x169a('0x4e')](this[a22_0x169a('0x4f')])){fsExtra[a22_0x169a('0x50')](this[a22_0x169a('0x4f')]);}if(!fsExtra['existsSync'](this[a22_0x169a('0x18')])){fsExtra[a22_0x169a('0x50')](this[a22_0x169a('0x18')]);}this[a22_0x169a('0x42')]();}['reboot'](){this[a22_0x169a('0x2a')]['System'][a22_0x169a('0x51')]();}[a22_0x169a('0x46')](){const _0xabe09b=JSON[a22_0x169a('0x33')](this[a22_0x169a('0x44')]);try{if(!fsExtra[a22_0x169a('0x4e')](this[a22_0x169a('0x4f')])){return!![];}else{const _0x39b0d4=fsExtra[a22_0x169a('0x22')](this[a22_0x169a('0x4f')])[a22_0x169a('0x52')]();if(_0x39b0d4!=_0xabe09b){return!![];}}}catch(_0x77d791){console[a22_0x169a('0x36')](_0x77d791);}return![];}[a22_0x169a('0x4c')](){console[a22_0x169a('0x36')](a22_0x169a('0x53')+this[a22_0x169a('0x1b')]+'\x20of\x20'+this[a22_0x169a('0x48')][a22_0x169a('0x4b')]);if(this[a22_0x169a('0x1b')]>=this[a22_0x169a('0x48')][a22_0x169a('0x4b')]){this[a22_0x169a('0x54')]();return;}const _0xf85191=String(this[a22_0x169a('0x48')][this[a22_0x169a('0x1b')]]['path']);const _0x43f2ef=this['downloadFiles'][this[a22_0x169a('0x1b')]]['media_type'];let _0x2fb4f7=_0xf85191[a22_0x169a('0x55')](_0xf85191['lastIndexOf']('/')+0x1);const _0x38f9a5=_0x2fb4f7[a22_0x169a('0x56')]('.')[a22_0x169a('0x57')](0x0,-0x1)[a22_0x169a('0x58')]('.');let _0x11e57c=this['baseURL']+_0xf85191;const _0x2bb6a5=_0x11e57c[a22_0x169a('0x56')]('.')[a22_0x169a('0x57')](0x0,-0x1)[a22_0x169a('0x58')]('.');if(_0x43f2ef==a22_0x169a('0x59')){_0x2fb4f7=_0x2fb4f7+a22_0x169a('0x5a');}else if(_0x43f2ef==a22_0x169a('0x5b')){_0x2fb4f7=_0x38f9a5+'.mp4';_0x11e57c=_0x2bb6a5+a22_0x169a('0x5a');}console[a22_0x169a('0x36')](a22_0x169a('0x5c'));console[a22_0x169a('0x36')](_0xf85191);console['log'](_0x43f2ef);console[a22_0x169a('0x36')](_0x2fb4f7);console[a22_0x169a('0x36')](_0x11e57c);console[a22_0x169a('0x36')](_0x38f9a5);console[a22_0x169a('0x36')](_0x2bb6a5);console[a22_0x169a('0x36')](a22_0x169a('0x5c'));if(fsExtra[a22_0x169a('0x4e')](this['tempFolder']+_0x2fb4f7)){this[a22_0x169a('0x5d')](this[a22_0x169a('0x16')]+_0x2fb4f7)['then'](function(_0x38dbd7){if(_0x38dbd7){this[a22_0x169a('0x1b')]++;}else{this[a22_0x169a('0x45')]=!![];}this[a22_0x169a('0x4c')]();}[a22_0x169a('0x31')](this));}else if(fsExtra[a22_0x169a('0x4e')](this['filesFolder']+_0x2fb4f7)){this[a22_0x169a('0x5d')](this[a22_0x169a('0x19')]+_0x2fb4f7)[a22_0x169a('0x2')](function(_0x2b4850){if(_0x2b4850){fsExtra[a22_0x169a('0x5e')](this[a22_0x169a('0x19')]+_0x2fb4f7,this['tempFolder']+_0x2fb4f7);this[a22_0x169a('0x1b')]++;}else{this[a22_0x169a('0x45')]=!![];}this[a22_0x169a('0x4c')]();}[a22_0x169a('0x31')](this));}else{console['log']('Downloading:\x20'+_0x11e57c);this['playlistChanged']=!![];if(_0x43f2ef=='youtube_single'){this[a22_0x169a('0x5f')](_0xf85191);}else{this[a22_0x169a('0x60')](_0x11e57c,_0x2fb4f7,_0x43f2ef);}}}[a22_0x169a('0x5d')](_0x317b1d){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x169a('0x36')]('videoFile:\x20'+_0x317b1d);const _0x2104df=yield mediainfo(_0x317b1d)['catch'](_0x2c5b3e=>{console['log'](_0x2c5b3e);fsExtra[a22_0x169a('0x50')](_0x317b1d);return![];});const _0x42ea66=_0x2104df[a22_0x169a('0x61')][a22_0x169a('0x62')][a22_0x169a('0x4b')]>0x1&&_0x2104df[a22_0x169a('0x61')][a22_0x169a('0x62')][0x1][a22_0x169a('0x63')]==a22_0x169a('0x64');if(!_0x42ea66){fsExtra[a22_0x169a('0x50')](_0x317b1d);}console['log']('mediainfo\x20check:'+_0x42ea66);return _0x42ea66;});}['downloader'](_0x2c6c17,_0x263301,_0x16c1aa){const _0x529794=new Downloader();console[a22_0x169a('0x36')](_0x2c6c17);console[a22_0x169a('0x36')](_0x263301);console[a22_0x169a('0x36')](_0x16c1aa);const _0x2a30de=_0x529794['download'](_0x2c6c17,this[a22_0x169a('0x16')]+_0x263301);urlExists(_0x2c6c17,function(_0xb7b05e,_0x25744f){if(_0x25744f){if(this[a22_0x169a('0x1c')][a22_0x169a('0x65')](this['currentFile'])){const _0x33a0d1=this[a22_0x169a('0x1c')][a22_0x169a('0x66')](this['currentFile']);if(_0x33a0d1>-0x1){this[a22_0x169a('0x1c')][a22_0x169a('0x67')](_0x33a0d1,0x1);}}console['log'](a22_0x169a('0x68')+_0x2c6c17);_0x2a30de[a22_0x169a('0x69')]();}else{if(!this[a22_0x169a('0x1c')][a22_0x169a('0x65')](this[a22_0x169a('0x1b')])){this[a22_0x169a('0x1c')]['push'](this[a22_0x169a('0x1b')]);}console['log'](a22_0x169a('0x6a')+_0x2c6c17);this[a22_0x169a('0x1b')]++;this['download']();}}[a22_0x169a('0x31')](this));_0x2a30de['on']('start',function(_0x2a30de){console[a22_0x169a('0x36')](a22_0x169a('0x6b')+_0x2c6c17);});_0x2a30de['on'](a22_0x169a('0x6c'),function(_0x2a30de){console[a22_0x169a('0x36')](a22_0x169a('0x6d'));this[a22_0x169a('0x4c')]();}[a22_0x169a('0x31')](this));_0x2a30de['on'](a22_0x169a('0x6e'),function(_0x2a30de){console['log'](a22_0x169a('0x6e'));console[a22_0x169a('0x36')]('Downloaded:\x20'+_0x263301);console['log']('mediaType:\x20'+_0x16c1aa);this[a22_0x169a('0x5d')](this['tempFolder']+_0x263301)[a22_0x169a('0x2')](function(_0x52533c){if(_0x52533c){this[a22_0x169a('0x1b')]++;}this[a22_0x169a('0x4c')]();}[a22_0x169a('0x31')](this));}[a22_0x169a('0x31')](this));_0x2a30de['on'](a22_0x169a('0x6f'),function(_0x2a30de){console[a22_0x169a('0x36')]('stopped');});_0x2a30de['on'](a22_0x169a('0x70'),function(_0x2a30de){console['log'](a22_0x169a('0x70'));});_0x2a30de['on']('retry',function(_0x2a30de){console[a22_0x169a('0x36')](a22_0x169a('0x71'));});}[a22_0x169a('0x72')](_0x586ebb,_0x13d87b,_0x6497c8,_0x1f0f9f){console[a22_0x169a('0x36')](a22_0x169a('0x72'));console[a22_0x169a('0x36')](_0x586ebb);const _0x44b2d8=!![];let _0x14c1c8=0x0;const _0x1b15d5='';console[a22_0x169a('0x36')](a22_0x169a('0x73')+_0x586ebb+a22_0x169a('0x74')+_0x13d87b);if(_0x14c1c8){if(_0x14c1c8>0x5){_0x1f0f9f(a22_0x169a('0x75'),_0x586ebb,_0x6497c8,null);return;}}else{_0x14c1c8=0x0;}const _0x4262f3=this['tempFolder']+_0x13d87b;let _0x2e23a7;if(_0x1f0f9f===undefined){console[a22_0x169a('0x36')](a22_0x169a('0x76')+_0x586ebb+'\x20to\x20'+_0x4262f3);_0x1f0f9f=function(_0x8a1ede,_0x55f0b6){console['log'](a22_0x169a('0x77'),_0x8a1ede,_0x55f0b6);};}http[a22_0x169a('0x78')][a22_0x169a('0x79')]=0x64;const _0xd22d0a={'host':url['parse'](_0x586ebb)[a22_0x169a('0x7a')],'port':0x50,'path':url['parse'](_0x586ebb)[a22_0x169a('0x7b')],'agent':![]};const _0x35a674=http[a22_0x169a('0x7c')](_0xd22d0a,function(_0x341d54){let _0x1d3dfb=0x0;let _0x4b2703=0x0;function _0x3584d8(){if(_0x1d3dfb===undefined){console['log'](_0x13d87b+'\x20Progress:\x20unknown\x09'+_0x4b2703+'/'+'?');}const _0x2cb67f=_0x4b2703/_0x1d3dfb*0x64;console[a22_0x169a('0x36')](_0x13d87b+a22_0x169a('0x7d')+_0x2cb67f+'%\x09'+_0x4b2703+'/'+_0x1d3dfb);}console[a22_0x169a('0x36')](_0x13d87b+'\x20'+_0x341d54[a22_0x169a('0x7e')]);switch(_0x341d54['statusCode']){case 0xc8:_0x1d3dfb=_0x341d54[a22_0x169a('0x7f')]['content-length']||_0x1b15d5;fs[a22_0x169a('0x80')](_0x4262f3,function(_0x30e1cc,_0x162919){if(!_0x30e1cc){console[a22_0x169a('0x36')](a22_0x169a('0x81')+_0x4262f3);if(_0x162919['size']==_0x1d3dfb){console[a22_0x169a('0x36')](a22_0x169a('0x82')+_0x1d3dfb+')');console['log'](a22_0x169a('0x83'));}else{console[a22_0x169a('0x36')](a22_0x169a('0x84')+_0x162919['size']+a22_0x169a('0x85')+_0x1d3dfb+')');}}_0x2e23a7=fs[a22_0x169a('0x86')](_0x4262f3);_0x341d54[a22_0x169a('0x87')](_0x2e23a7);_0x341d54['on']('data',function(_0x1c37a7){_0x4b2703+=_0x1c37a7[a22_0x169a('0x4b')];_0x3584d8();});_0x35a674['on']('error',function(_0x30e1cc){console['log']('err:\x20');console[a22_0x169a('0x36')](_0x30e1cc);});_0x2e23a7['on'](a22_0x169a('0x88'),function(){console[a22_0x169a('0x36')](a22_0x169a('0x89')+_0x586ebb+'\x20to\x20'+_0x13d87b);_0x1f0f9f(null,_0x13d87b,_0x6497c8,_0x13d87b);}[a22_0x169a('0x31')](this));});break;case 0x12e:const _0x39409c=_0x341d54[a22_0x169a('0x7f')][a22_0x169a('0x8a')];console[a22_0x169a('0x36')](a22_0x169a('0x8b')+_0x586ebb+a22_0x169a('0x74')+_0x39409c);if(_0x14c1c8<0x5){this[a22_0x169a('0x72')](_0x39409c,_0x13d87b,_0x1f0f9f,_0x14c1c8++);}else{console[a22_0x169a('0x6c')](a22_0x169a('0x8c')+_0x586ebb+'.');_0x1f0f9f(a22_0x169a('0x8d'),null,null,null);}return;case 0x194:console[a22_0x169a('0x36')](a22_0x169a('0x8e')+_0x586ebb);default:console[a22_0x169a('0x36')](a22_0x169a('0x8f')+_0x586ebb+a22_0x169a('0x90')+_0x341d54[a22_0x169a('0x7e')]);_0x35a674['abort']();_0x1f0f9f(_0x341d54[a22_0x169a('0x7e')],null,null,null);return;}})['on']('error',function(_0x1aac09){console['log']('Error\x20Downloading:\x20'+_0x586ebb+'\x20'+_0x1aac09[a22_0x169a('0x91')]);_0x1f0f9f(_0x1aac09,null,null,null);});}['downloadHTTPFileCallback'](_0x57f729,_0x29b0b1,_0xe6bf23,_0x4c4112){console[a22_0x169a('0x36')](a22_0x169a('0x92'));console[a22_0x169a('0x36')](_0x57f729);console[a22_0x169a('0x36')](_0x29b0b1);console['log'](_0xe6bf23);console[a22_0x169a('0x36')](_0x4c4112);if(_0xe6bf23==a22_0x169a('0x5b')){const _0x500e89=this['downloadFiles'][this[a22_0x169a('0x1b')]][a22_0x169a('0x93')]!=null?this[a22_0x169a('0x48')][this['currentFile']]['duration']:0x1e;this[a22_0x169a('0x94')](_0x4c4112,_0x500e89);}else if(_0xe6bf23==a22_0x169a('0x95')){if(_0x57f729==null&&_0x29b0b1!=''){this[a22_0x169a('0x1b')]++;}this[a22_0x169a('0x4c')]();}console[a22_0x169a('0x36')](this[a22_0x169a('0x1b')]);}['downloadRequestFile'](_0x4e1e7d,_0x28b2c1,_0x20b50d){progress(request(_0x4e1e7d),{})['on'](a22_0x169a('0x96'),function(_0x51d902){console[a22_0x169a('0x36')](_0x51d902);})['on']('error',function(_0x476f92){console[a22_0x169a('0x36')](a22_0x169a('0x97'));this[a22_0x169a('0x4c')]();})['on'](a22_0x169a('0x6e'),function(){console[a22_0x169a('0x36')](a22_0x169a('0x98')+_0x28b2c1);console[a22_0x169a('0x36')](a22_0x169a('0x99')+_0x20b50d);if(_0x20b50d==a22_0x169a('0x5b')){const _0x4820ab=this['downloadFiles'][this[a22_0x169a('0x1b')]][a22_0x169a('0x93')]!=null?this['downloadFiles'][this[a22_0x169a('0x1b')]][a22_0x169a('0x93')]:0x1e;this['createImageVideo'](_0x28b2c1,_0x4820ab);}else if(_0x20b50d=='video'){this['currentFile']++;this[a22_0x169a('0x4c')]();}}['bind'](this))[a22_0x169a('0x87')](fs[a22_0x169a('0x86')](this['tempFolder']+_0x28b2c1));}['createImageVideo'](_0xb6c4f5,_0x2a8266=0x1e){const _0x41b333=this['tempFolder']+_0xb6c4f5;console[a22_0x169a('0x36')](_0x41b333);console[a22_0x169a('0x36')](_0xb6c4f5);const _0x45838f=_0xb6c4f5[a22_0x169a('0x56')]('.')['slice'](0x0,-0x1)[a22_0x169a('0x58')]('.');const _0x3331ad=a22_0x169a('0x9a');const _0x2d1494=['-y','-r','1/2',a22_0x169a('0x9b'),'1',a22_0x169a('0x9c'),a22_0x169a('0x9d'),'-i',_0x41b333,'-t',String(_0x2a8266),'-c:v',a22_0x169a('0x9e'),a22_0x169a('0x9f'),a22_0x169a('0xa0'),'-r','25','-vf','scale=1920:1080',this['tempFolder']+_0x45838f+a22_0x169a('0x5a')];const _0x51d1a2=spawn(_0x3331ad,_0x2d1494);_0x51d1a2[a22_0x169a('0xa1')]['on'](a22_0x169a('0xa2'),function(_0x1e3407){console['log']('Converting\x20'+_0x41b333);});_0x51d1a2[a22_0x169a('0xa3')]['on'](a22_0x169a('0xa2'),function(_0xfde108){console[a22_0x169a('0x36')](a22_0x169a('0xa4')+_0xfde108);}[a22_0x169a('0x31')](this));_0x51d1a2['on'](a22_0x169a('0xa5'),function(){console[a22_0x169a('0x36')](a22_0x169a('0xa6'));this[a22_0x169a('0x1b')]++;this['download']();}['bind'](this));}['downloadYouTube'](_0x5c8132){const _0x2d124f=this[a22_0x169a('0x16')]+'/'+_0x5c8132+a22_0x169a('0x5a');const _0x59e8e2=youtubedl(a22_0x169a('0xa7')+_0x5c8132,[a22_0x169a('0xa8')],{'cwd':__dirname});_0x59e8e2['on'](a22_0x169a('0xa9'),function(_0x44aaa5){console['log'](a22_0x169a('0xaa'));console[a22_0x169a('0x36')]('filename:\x20'+_0x44aaa5[a22_0x169a('0xab')]);console[a22_0x169a('0x36')](a22_0x169a('0xac')+_0x44aaa5[a22_0x169a('0xad')]);});_0x59e8e2['on'](a22_0x169a('0xae'),function complete(_0x176288){'use strict';console[a22_0x169a('0x36')](a22_0x169a('0xaf')+_0x176288[a22_0x169a('0xab')]+a22_0x169a('0xb0'));});_0x59e8e2['on'](a22_0x169a('0x6e'),function(){console[a22_0x169a('0x36')]('finished\x20youtube\x20downloading!');this[a22_0x169a('0x5d')](_0x2d124f)[a22_0x169a('0x2')](function(_0x15e615){if(_0x15e615){this[a22_0x169a('0x1b')]++;}this[a22_0x169a('0x4c')]();}[a22_0x169a('0x31')](this));}[a22_0x169a('0x31')](this));_0x59e8e2[a22_0x169a('0x87')](fs[a22_0x169a('0x86')](_0x2d124f));}[a22_0x169a('0x54')](){console[a22_0x169a('0x36')]('Finishing');if(this['playlistChanged']){if(this[a22_0x169a('0x1c')]['length']==0x0){fs[a22_0x169a('0xb1')](this[a22_0x169a('0x4f')],JSON[a22_0x169a('0x33')](this[a22_0x169a('0x44')]));let _0x1908d1=a22_0x169a('0xb2')+'\x0d\x0a'+a22_0x169a('0xb3')+'\x0d\x0a';for(const _0x2a1eec in this[a22_0x169a('0x48')]){const _0x5ce402=this['downloadFiles'][_0x2a1eec][a22_0x169a('0xb4')];const _0x3a0c66=this['downloadFiles'][_0x2a1eec][a22_0x169a('0xb5')];const _0x1045f0=_0x5ce402['substring'](_0x5ce402[a22_0x169a('0xb6')]('/')+0x1);let _0x5397e0=_0x1045f0[a22_0x169a('0x56')]('.')[a22_0x169a('0x57')](0x0,-0x1)[a22_0x169a('0x58')]('.');if(_0x3a0c66==a22_0x169a('0x59')){_0x5397e0=_0x5ce402;}_0x1908d1+=a22_0x169a('0xb7')+_0x5397e0+a22_0x169a('0x5a')+'\x0d\x0a';}fsExtra[a22_0x169a('0x47')](this[a22_0x169a('0x19')]);fsExtra['copySync'](this[a22_0x169a('0x16')],this['filesFolder']);fsExtra[a22_0x169a('0xb1')](this[a22_0x169a('0x18')],_0x1908d1);fsExtra[a22_0x169a('0x47')](this[a22_0x169a('0x16')]);console['log'](a22_0x169a('0xb8'));const _0x3f2463=spawn(a22_0x169a('0xb9'),['-r','now']);}else{console[a22_0x169a('0x36')](a22_0x169a('0xba'));this[a22_0x169a('0x1b')]=0x0;setTimeout(function(){this['download']();}[a22_0x169a('0x31')](this),0x1388);}}else{console[a22_0x169a('0x36')](a22_0x169a('0xbb'));}}}exports['SyncPlaylistsService']=SyncPlaylistsService;