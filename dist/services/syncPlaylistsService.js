var a23_0x27fc=['done','value','then','apply','next','defineProperty','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','spawn','exec','youtube-dl','uuid/v4','config.json','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','lulo_playlist.m3u','playlistChanged','downloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','forceReload','httpClientService','playerService','PlayerService','init','config','parse','context','readFileSync','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','api/player.php?player_id={0}','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','kodi','playlist','getItems','deviceUuid','stringify','networkInterfaces','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','writeFileSync','item','label','reportStatus','catch','post','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','emptyDirSync','failDownloadFiles','currentFile','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','m3uFile','hasPlayListChanged','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','mediainfo\x20check:','includes','splice','start','start:\x20','error','error:\x20','end','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','pipe','data','finish','location','Redirect\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','createImageVideo','video','downloadRequestFile','Error\x20downloading\x20file','Downloaded:\x20','createWriteStream','ffmpeg','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','scale=1920:1080','stdout','stderr','info','Download\x20started','_filename','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','/home/osmc/luloclient/media/files/','Refreshing..','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Add','Playlist.Added','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','reboot','Rebooting','Reboot()','playerServiceURL','rss','header_active','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','none','rssfeeds','set','feed','setRss:','enableClock','Settings.SetSettingValue','enableClock:\x20','2.0','/jsonrpc','SyncPlaylistsService','__awaiter'];(function(_0x54573b,_0x2503c1){var _0x5f1418=function(_0x44513e){while(--_0x44513e){_0x54573b['push'](_0x54573b['shift']());}};_0x5f1418(++_0x2503c1);}(a23_0x27fc,0x1c7));var a23_0xaefc=function(_0x23065e,_0x332640){_0x23065e=_0x23065e-0x0;var _0x310f6c=a23_0x27fc[_0x23065e];return _0x310f6c;};'use strict';var __awaiter=this&&this[a23_0xaefc('0x0')]||function(_0x40b865,_0x3ef7fd,_0x1c88f8,_0x85f55c){function _0xb23ee3(_0x5bb749){return _0x5bb749 instanceof _0x1c88f8?_0x5bb749:new _0x1c88f8(function(_0x50a3ea){_0x50a3ea(_0x5bb749);});}return new(_0x1c88f8||(_0x1c88f8=Promise))(function(_0x54e127,_0x21f082){function _0x424fed(_0x22b70d){try{_0x40fcd8(_0x85f55c['next'](_0x22b70d));}catch(_0x1ce8b4){_0x21f082(_0x1ce8b4);}}function _0x1b5429(_0x37966e){try{_0x40fcd8(_0x85f55c['throw'](_0x37966e));}catch(_0x5c6cf6){_0x21f082(_0x5c6cf6);}}function _0x40fcd8(_0x83b3c6){_0x83b3c6[a23_0xaefc('0x1')]?_0x54e127(_0x83b3c6[a23_0xaefc('0x2')]):_0xb23ee3(_0x83b3c6[a23_0xaefc('0x2')])[a23_0xaefc('0x3')](_0x424fed,_0x1b5429);}_0x40fcd8((_0x85f55c=_0x85f55c[a23_0xaefc('0x4')](_0x40b865,_0x3ef7fd||[]))[a23_0xaefc('0x5')]());});};Object[a23_0xaefc('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a23_0xaefc('0x7'));const playerService_1=require('./playerService');const mediainfo=require(a23_0xaefc('0x8'));const fs=require('fs');const url=require(a23_0xaefc('0x9'));const http=require(a23_0xaefc('0xa'));const fsExtra=require(a23_0xaefc('0xb'));const request=require(a23_0xaefc('0xc'));const progress=require(a23_0xaefc('0xd'));const spawn=require(a23_0xaefc('0xe'))[a23_0xaefc('0xf')];const exec=require(a23_0xaefc('0xe'))[a23_0xaefc('0x10')];const isImage=require('is-image');const format=require('string-template');const os=require('os');const youtubedl=require(a23_0xaefc('0x11'));const uuidv4=require(a23_0xaefc('0x12'));const configFile=a23_0xaefc('0x13');const contextFile=a23_0xaefc('0x14');const urlExists=require(a23_0xaefc('0x15'));const kodi_rpc=require(a23_0xaefc('0x16'));const Downloader=require(a23_0xaefc('0x17'));class SyncPlaylistsService{constructor(){this[a23_0xaefc('0x18')]=a23_0xaefc('0x19');this[a23_0xaefc('0x1a')]=this[a23_0xaefc('0x18')]+a23_0xaefc('0x1b');this[a23_0xaefc('0x1c')]=this[a23_0xaefc('0x18')]+a23_0xaefc('0x1d');this[a23_0xaefc('0x1e')]=this[a23_0xaefc('0x18')]+'playlist.txt';this['m3uFile']=this[a23_0xaefc('0x1c')]+a23_0xaefc('0x1f');this['currentFile']=0x0;this[a23_0xaefc('0x20')]=![];this[a23_0xaefc('0x21')]=[];this['failDownloadFiles']=[];this[a23_0xaefc('0x22')]={};this[a23_0xaefc('0x23')]=a23_0xaefc('0x24');this[a23_0xaefc('0x25')]=a23_0xaefc('0x26');this[a23_0xaefc('0x27')]='.lulo123.';this[a23_0xaefc('0x28')]=![];this[a23_0xaefc('0x29')]=new HttpClientService_1['HttpClientService']();this[a23_0xaefc('0x2a')]=new playerService_1[(a23_0xaefc('0x2b'))]();}[a23_0xaefc('0x2c')](){this[a23_0xaefc('0x2d')]=JSON[a23_0xaefc('0x2e')](fs['readFileSync'](configFile));this[a23_0xaefc('0x2f')]=JSON[a23_0xaefc('0x2e')](fs[a23_0xaefc('0x30')](contextFile));this[a23_0xaefc('0x31')]=this[a23_0xaefc('0x2d')][a23_0xaefc('0x31')];this['baseURL']=process[a23_0xaefc('0x32')][a23_0xaefc('0x33')]+a23_0xaefc('0x34');this[a23_0xaefc('0x35')]=this[a23_0xaefc('0x36')]+a23_0xaefc('0x37');this['playerServiceURL']=this[a23_0xaefc('0x36')]+a23_0xaefc('0x38');this['kodi']=new kodi_rpc({'url':this[a23_0xaefc('0x23')],'user':this[a23_0xaefc('0x25')],'password':this['kodiPassword']});this[a23_0xaefc('0x39')]();this[a23_0xaefc('0x3a')]();this[a23_0xaefc('0x3b')]();this[a23_0xaefc('0x3c')]();this[a23_0xaefc('0x3d')]();setInterval(function(){this[a23_0xaefc('0x3e')]();}[a23_0xaefc('0x3f')](this),0x2710);setInterval(function(){this[a23_0xaefc('0x3a')]();}[a23_0xaefc('0x3f')](this),0x493e0);}[a23_0xaefc('0x39')](){}[a23_0xaefc('0x3a')](){this[a23_0xaefc('0x40')][a23_0xaefc('0x41')][a23_0xaefc('0x42')](0x1)[a23_0xaefc('0x3')](function(_0x190f18){const _0x1f66b6=JSON['stringify'](_0x190f18);const _0x257630={'player_id':this[a23_0xaefc('0x31')],'device_uuid':this['config'][a23_0xaefc('0x43')],'network_info':JSON[a23_0xaefc('0x44')](os[a23_0xaefc('0x45')]()),'firmware_info':JSON[a23_0xaefc('0x44')](this[a23_0xaefc('0x2f')]),'playlist':_0x1f66b6,'playing_item':'','status':0x0};this[a23_0xaefc('0x29')]['post'](a23_0xaefc('0x46'),_0x257630,![])[a23_0xaefc('0x3')](function(_0x1b800d){console[a23_0xaefc('0x47')](a23_0xaefc('0x48')+Date());})['catch'](function(_0x245561){});console[a23_0xaefc('0x47')](_0x257630);}['bind'](this));const _0x4202b2=this[a23_0xaefc('0x2d')][a23_0xaefc('0x43')];if(!_0x4202b2||_0x4202b2==''){this['config']['deviceUuid']=uuidv4();this[a23_0xaefc('0x2d')]={'deviceUuid':this[a23_0xaefc('0x2d')]['deviceUuid'],'playerId':this[a23_0xaefc('0x2d')][a23_0xaefc('0x31')]};fs[a23_0xaefc('0x49')](configFile,JSON[a23_0xaefc('0x44')](this[a23_0xaefc('0x2d')]));}}[a23_0xaefc('0x3e')](){console[a23_0xaefc('0x47')](a23_0xaefc('0x3e'));this['kodi']['player']['getCurrentlyPlayingVideo']()[a23_0xaefc('0x3')](function(_0x890517){const _0x4fa6a6=_0x890517[a23_0xaefc('0x4a')][a23_0xaefc('0x4b')];this[a23_0xaefc('0x4c')](_0x4fa6a6);}[a23_0xaefc('0x3f')](this))[a23_0xaefc('0x4d')](function(_0x2c8e02){console['log'](_0x2c8e02);this[a23_0xaefc('0x4c')](_0x2c8e02);}[a23_0xaefc('0x3f')](this));}['reportStatus'](_0x48144f){console[a23_0xaefc('0x47')]('playingItem:\x20'+_0x48144f);const _0x45ced1={'player_id':this['playerId'],'device_uuid':this[a23_0xaefc('0x2d')][a23_0xaefc('0x43')],'status':_0x48144f!=''&&_0x48144f!=null?0x1:0x0,'playing_item':_0x48144f};this[a23_0xaefc('0x29')][a23_0xaefc('0x4e')](a23_0xaefc('0x4f'),_0x45ced1,![])['then'](function(_0xb56cc4){console[a23_0xaefc('0x47')](a23_0xaefc('0x50')+Date());})[a23_0xaefc('0x4d')](function(_0x279281){});}[a23_0xaefc('0x3b')](){fsExtra['ensureDir'](this['mediaFolder'],_0x5de5b3=>{});fsExtra[a23_0xaefc('0x51')](this['tempFolder'],_0x5c574d=>{});fsExtra[a23_0xaefc('0x51')](this[a23_0xaefc('0x1c')],_0xdf2be8=>{});}['loadMediaList'](){const _0x1c18c5=format(this[a23_0xaefc('0x35')],this[a23_0xaefc('0x31')]);console[a23_0xaefc('0x47')](_0x1c18c5);request({'url':_0x1c18c5,'json':!![]},function(_0x187bda,_0x2fd508,_0x5bc0a9){console[a23_0xaefc('0x47')](a23_0xaefc('0x52'));this[a23_0xaefc('0x22')]=_0x5bc0a9;this[a23_0xaefc('0x20')]=this['hasPlayListChanged']();fsExtra[a23_0xaefc('0x53')](this[a23_0xaefc('0x1a')]);this[a23_0xaefc('0x21')]=[];this[a23_0xaefc('0x54')]=[];this[a23_0xaefc('0x55')]=0x0;for(const _0x41a39d in _0x5bc0a9){this[a23_0xaefc('0x21')][a23_0xaefc('0x56')](_0x5bc0a9[_0x41a39d]);}console['log'](a23_0xaefc('0x57')+this[a23_0xaefc('0x21')][a23_0xaefc('0x58')]);if(this[a23_0xaefc('0x21')][a23_0xaefc('0x58')]>0x0){this[a23_0xaefc('0x59')]();}}[a23_0xaefc('0x3f')](this));}[a23_0xaefc('0x5a')](){this['forceReload']=!![];if(fsExtra['existsSync'](this[a23_0xaefc('0x1a')])){fsExtra[a23_0xaefc('0x53')](this[a23_0xaefc('0x1a')]);}if(fsExtra[a23_0xaefc('0x5b')](this[a23_0xaefc('0x1c')])){fsExtra['emptyDirSync'](this[a23_0xaefc('0x1c')]);}if(!fsExtra[a23_0xaefc('0x5b')](this[a23_0xaefc('0x1e')])){fsExtra[a23_0xaefc('0x5c')](this[a23_0xaefc('0x1e')]);}if(!fsExtra[a23_0xaefc('0x5b')](this[a23_0xaefc('0x5d')])){fsExtra[a23_0xaefc('0x5c')](this[a23_0xaefc('0x5d')]);}this['loadMediaList']();}[a23_0xaefc('0x5e')](){const _0x14f77a=JSON[a23_0xaefc('0x44')](this['newPlayList']);try{if(!fsExtra[a23_0xaefc('0x5b')](this[a23_0xaefc('0x1e')])){return!![];}else{const _0x162791=fsExtra[a23_0xaefc('0x30')](this['playListFile'])[a23_0xaefc('0x5f')]();if(_0x162791!=_0x14f77a){return!![];}}}catch(_0x531f94){console['log'](_0x531f94);}return![];}[a23_0xaefc('0x59')](){console[a23_0xaefc('0x47')](a23_0xaefc('0x60')+this[a23_0xaefc('0x55')]+a23_0xaefc('0x61')+this[a23_0xaefc('0x21')][a23_0xaefc('0x58')]);if(this[a23_0xaefc('0x55')]>=this[a23_0xaefc('0x21')][a23_0xaefc('0x58')]){this[a23_0xaefc('0x62')]();return;}const _0x3eba67=String(this[a23_0xaefc('0x21')][this[a23_0xaefc('0x55')]][a23_0xaefc('0x63')]);const _0x2f5c3f=this[a23_0xaefc('0x21')][this[a23_0xaefc('0x55')]][a23_0xaefc('0x64')];let _0x22cf9e=_0x3eba67[a23_0xaefc('0x65')](_0x3eba67[a23_0xaefc('0x66')]('/')+0x1);const _0x19b43a=_0x22cf9e[a23_0xaefc('0x67')]('.')[a23_0xaefc('0x68')](0x0,-0x1)['join']('.');let _0x14d5c6=this[a23_0xaefc('0x36')]+_0x3eba67;const _0xca0df=_0x14d5c6[a23_0xaefc('0x67')]('.')[a23_0xaefc('0x68')](0x0,-0x1)[a23_0xaefc('0x69')]('.');if(_0x2f5c3f==a23_0xaefc('0x6a')){_0x22cf9e=_0x22cf9e+a23_0xaefc('0x6b');}else if(_0x2f5c3f=='image'){_0x22cf9e=_0x19b43a+'.mp4';_0x14d5c6=_0xca0df+a23_0xaefc('0x6b');}console['log'](a23_0xaefc('0x6c'));console[a23_0xaefc('0x47')](_0x3eba67);console[a23_0xaefc('0x47')](_0x2f5c3f);console[a23_0xaefc('0x47')](_0x22cf9e);console[a23_0xaefc('0x47')](_0x14d5c6);console['log'](_0x19b43a);console[a23_0xaefc('0x47')](_0xca0df);console[a23_0xaefc('0x47')](a23_0xaefc('0x6c'));if(fsExtra[a23_0xaefc('0x5b')](this[a23_0xaefc('0x1a')]+_0x22cf9e)){this[a23_0xaefc('0x6d')](this['tempFolder']+_0x22cf9e)[a23_0xaefc('0x3')](function(_0x247b00){if(_0x247b00){this[a23_0xaefc('0x55')]++;}else{this['playlistChanged']=!![];}this[a23_0xaefc('0x59')]();}[a23_0xaefc('0x3f')](this));}else if(fsExtra[a23_0xaefc('0x5b')](this[a23_0xaefc('0x1c')]+_0x22cf9e)){this[a23_0xaefc('0x6d')](this[a23_0xaefc('0x1c')]+_0x22cf9e)[a23_0xaefc('0x3')](function(_0x4e53d5){if(_0x4e53d5){fsExtra[a23_0xaefc('0x6e')](this['filesFolder']+_0x22cf9e,this['tempFolder']+_0x22cf9e);this[a23_0xaefc('0x55')]++;}else{this[a23_0xaefc('0x20')]=!![];}this[a23_0xaefc('0x59')]();}['bind'](this));}else{console[a23_0xaefc('0x47')](a23_0xaefc('0x6f')+_0x14d5c6);this[a23_0xaefc('0x20')]=!![];if(_0x2f5c3f=='youtube_single'){this[a23_0xaefc('0x70')](_0x3eba67);}else{this[a23_0xaefc('0x71')](_0x14d5c6,_0x22cf9e,_0x2f5c3f);}}}[a23_0xaefc('0x6d')](_0x51d375){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0xaefc('0x72')+_0x51d375);const _0x5eda78=yield mediainfo(_0x51d375)[a23_0xaefc('0x4d')](_0x5a8dfd=>{console['log'](_0x5a8dfd);fsExtra[a23_0xaefc('0x5c')](_0x51d375);return![];});const _0x1d1cb5=_0x5eda78[a23_0xaefc('0x73')][a23_0xaefc('0x74')][a23_0xaefc('0x58')]>0x1&&_0x5eda78[a23_0xaefc('0x73')]['track'][0x1][a23_0xaefc('0x75')]=='Video';if(!_0x1d1cb5){fsExtra[a23_0xaefc('0x5c')](_0x51d375);}console[a23_0xaefc('0x47')](a23_0xaefc('0x76')+_0x1d1cb5);return _0x1d1cb5;});}['downloader'](_0x3d6495,_0x2796c0,_0x3e0701){const _0x5b97cb=new Downloader();console[a23_0xaefc('0x47')](_0x3d6495);console[a23_0xaefc('0x47')](_0x2796c0);console[a23_0xaefc('0x47')](_0x3e0701);const _0x1767b9=_0x5b97cb[a23_0xaefc('0x59')](_0x3d6495,this['tempFolder']+_0x2796c0);urlExists(_0x3d6495,function(_0x78e066,_0x3e1199){if(_0x3e1199){if(this['failDownloadFiles'][a23_0xaefc('0x77')](this[a23_0xaefc('0x55')])){const _0x494a0c=this['failDownloadFiles']['indexOf'](this[a23_0xaefc('0x55')]);if(_0x494a0c>-0x1){this[a23_0xaefc('0x54')][a23_0xaefc('0x78')](_0x494a0c,0x1);}}console[a23_0xaefc('0x47')]('downloading:\x20'+_0x3d6495);_0x1767b9[a23_0xaefc('0x79')]();}else{if(!this[a23_0xaefc('0x54')][a23_0xaefc('0x77')](this['currentFile'])){this[a23_0xaefc('0x54')][a23_0xaefc('0x56')](this[a23_0xaefc('0x55')]);}console[a23_0xaefc('0x47')]('Error:\x20'+_0x3d6495);this[a23_0xaefc('0x55')]++;this[a23_0xaefc('0x59')]();}}[a23_0xaefc('0x3f')](this));_0x1767b9['on'](a23_0xaefc('0x79'),function(_0x1767b9){console[a23_0xaefc('0x47')](a23_0xaefc('0x7a')+_0x3d6495);});_0x1767b9['on'](a23_0xaefc('0x7b'),function(_0x1767b9){console[a23_0xaefc('0x47')](a23_0xaefc('0x7c'));this[a23_0xaefc('0x59')]();}['bind'](this));_0x1767b9['on'](a23_0xaefc('0x7d'),function(_0x1767b9){console[a23_0xaefc('0x47')](a23_0xaefc('0x7d'));console['log']('Downloaded:\x20'+_0x2796c0);console['log'](a23_0xaefc('0x7e')+_0x3e0701);this['checkVideo'](this['tempFolder']+_0x2796c0)['then'](function(_0x11915b){if(_0x11915b){this[a23_0xaefc('0x55')]++;}this['download']();}[a23_0xaefc('0x3f')](this));}[a23_0xaefc('0x3f')](this));_0x1767b9['on'](a23_0xaefc('0x7f'),function(_0x1767b9){console[a23_0xaefc('0x47')](a23_0xaefc('0x7f'));});_0x1767b9['on'](a23_0xaefc('0x80'),function(_0x1767b9){console[a23_0xaefc('0x47')](a23_0xaefc('0x80'));});_0x1767b9['on']('retry',function(_0x1767b9){console[a23_0xaefc('0x47')](a23_0xaefc('0x81'));});}[a23_0xaefc('0x82')](_0x4c0bff,_0x41c087,_0xe6d7b3,_0x3a60f3){console[a23_0xaefc('0x47')]('downloadHTTPFile');console[a23_0xaefc('0x47')](_0x4c0bff);const _0x1a7110=!![];let _0x2b9d19=0x0;const _0x48518b='';console[a23_0xaefc('0x47')](a23_0xaefc('0x83')+_0x4c0bff+a23_0xaefc('0x84')+_0x41c087);if(_0x2b9d19){if(_0x2b9d19>0x5){_0x3a60f3('Max\x20redirects\x20reached',_0x4c0bff,_0xe6d7b3,null);return;}}else{_0x2b9d19=0x0;}const _0xc26dac=this[a23_0xaefc('0x1a')]+_0x41c087;let _0x1501af;if(_0x3a60f3===undefined){console[a23_0xaefc('0x47')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x4c0bff+a23_0xaefc('0x84')+_0xc26dac);_0x3a60f3=function(_0x15882b,_0x3306be){console[a23_0xaefc('0x47')](a23_0xaefc('0x85'),_0x15882b,_0x3306be);};}http[a23_0xaefc('0x86')][a23_0xaefc('0x87')]=0x64;const _0x3d9288={'host':url['parse'](_0x4c0bff)[a23_0xaefc('0x88')],'port':0x50,'path':url[a23_0xaefc('0x2e')](_0x4c0bff)[a23_0xaefc('0x89')],'agent':![]};const _0x2f10f8=http[a23_0xaefc('0x8a')](_0x3d9288,function(_0x4e30f5){let _0x2891b7=0x0;let _0x1c17c8=0x0;function _0x571310(){if(_0x2891b7===undefined){console['log'](_0x41c087+a23_0xaefc('0x8b')+_0x1c17c8+'/'+'?');}const _0x296fc4=_0x1c17c8/_0x2891b7*0x64;console[a23_0xaefc('0x47')](_0x41c087+a23_0xaefc('0x8c')+_0x296fc4+'%\x09'+_0x1c17c8+'/'+_0x2891b7);}console['log'](_0x41c087+'\x20'+_0x4e30f5['statusCode']);switch(_0x4e30f5[a23_0xaefc('0x8d')]){case 0xc8:_0x2891b7=_0x4e30f5[a23_0xaefc('0x8e')]['content-length']||_0x48518b;fs[a23_0xaefc('0x8f')](_0xc26dac,function(_0xe44b5e,_0x3aa660){if(!_0xe44b5e){console['log'](a23_0xaefc('0x90')+_0xc26dac);if(_0x3aa660[a23_0xaefc('0x91')]==_0x2891b7){console[a23_0xaefc('0x47')](a23_0xaefc('0x92')+_0x2891b7+')');console['log'](a23_0xaefc('0x93'));}else{console[a23_0xaefc('0x47')](a23_0xaefc('0x94')+_0x3aa660[a23_0xaefc('0x91')]+')\x20vs\x20New('+_0x2891b7+')');}}_0x1501af=fs['createWriteStream'](_0xc26dac);_0x4e30f5[a23_0xaefc('0x95')](_0x1501af);_0x4e30f5['on'](a23_0xaefc('0x96'),function(_0x3c157b){_0x1c17c8+=_0x3c157b[a23_0xaefc('0x58')];_0x571310();});_0x2f10f8['on'](a23_0xaefc('0x7b'),function(_0xe44b5e){console['log']('err:\x20');console['log'](_0xe44b5e);});_0x1501af['on'](a23_0xaefc('0x97'),function(){console[a23_0xaefc('0x47')]('Downloaded\x20'+_0x4c0bff+a23_0xaefc('0x84')+_0x41c087);_0x3a60f3(null,_0x41c087,_0xe6d7b3,_0x41c087);}[a23_0xaefc('0x3f')](this));});break;case 0x12e:const _0x2c4e9b=_0x4e30f5[a23_0xaefc('0x8e')][a23_0xaefc('0x98')];console['log'](a23_0xaefc('0x99')+_0x4c0bff+'\x20to\x20'+_0x2c4e9b);if(_0x2b9d19<0x5){this[a23_0xaefc('0x82')](_0x2c4e9b,_0x41c087,_0x3a60f3,_0x2b9d19++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x4c0bff+'.');_0x3a60f3(a23_0xaefc('0x9a'),null,null,null);}return;case 0x194:console[a23_0xaefc('0x47')]('File\x20Not\x20Found\x20'+_0x4c0bff);default:console['log'](a23_0xaefc('0x9b')+_0x4c0bff+a23_0xaefc('0x9c')+_0x4e30f5[a23_0xaefc('0x8d')]);_0x2f10f8[a23_0xaefc('0x9d')]();_0x3a60f3(_0x4e30f5[a23_0xaefc('0x8d')],null,null,null);return;}})['on']('error',function(_0x36df02){console[a23_0xaefc('0x47')](a23_0xaefc('0x9e')+_0x4c0bff+'\x20'+_0x36df02[a23_0xaefc('0x9f')]);_0x3a60f3(_0x36df02,null,null,null);});}[a23_0xaefc('0xa0')](_0x57e922,_0x3c0736,_0x5c5c96,_0x4dc177){console['log']('downloadHTTPFileCallback');console[a23_0xaefc('0x47')](_0x57e922);console[a23_0xaefc('0x47')](_0x3c0736);console[a23_0xaefc('0x47')](_0x5c5c96);console['log'](_0x4dc177);if(_0x5c5c96==a23_0xaefc('0xa1')){const _0xe235e3=this[a23_0xaefc('0x21')][this[a23_0xaefc('0x55')]][a23_0xaefc('0xa2')]!=null?this[a23_0xaefc('0x21')][this[a23_0xaefc('0x55')]][a23_0xaefc('0xa2')]:0x1e;this[a23_0xaefc('0xa3')](_0x4dc177,_0xe235e3);}else if(_0x5c5c96==a23_0xaefc('0xa4')){if(_0x57e922==null&&_0x3c0736!=''){this[a23_0xaefc('0x55')]++;}this[a23_0xaefc('0x59')]();}console[a23_0xaefc('0x47')](this[a23_0xaefc('0x55')]);}[a23_0xaefc('0xa5')](_0x13e9df,_0x5bdea0,_0x3e1028){progress(request(_0x13e9df),{})['on']('progress',function(_0x470b74){console[a23_0xaefc('0x47')](_0x470b74);})['on'](a23_0xaefc('0x7b'),function(_0x3fd420){console[a23_0xaefc('0x47')](a23_0xaefc('0xa6'));this[a23_0xaefc('0x59')]();})['on'](a23_0xaefc('0x7d'),function(){console[a23_0xaefc('0x47')](a23_0xaefc('0xa7')+_0x5bdea0);console[a23_0xaefc('0x47')](a23_0xaefc('0x7e')+_0x3e1028);if(_0x3e1028==a23_0xaefc('0xa1')){const _0x51c589=this['downloadFiles'][this[a23_0xaefc('0x55')]]['duration']!=null?this[a23_0xaefc('0x21')][this[a23_0xaefc('0x55')]][a23_0xaefc('0xa2')]:0x1e;this[a23_0xaefc('0xa3')](_0x5bdea0,_0x51c589);}else if(_0x3e1028==a23_0xaefc('0xa4')){this['currentFile']++;this[a23_0xaefc('0x59')]();}}['bind'](this))['pipe'](fs[a23_0xaefc('0xa8')](this[a23_0xaefc('0x1a')]+_0x5bdea0));}[a23_0xaefc('0xa3')](_0xd9ed5,_0x87ac1f=0x1e){const _0x5766cd=this[a23_0xaefc('0x1a')]+_0xd9ed5;console[a23_0xaefc('0x47')](_0x5766cd);console[a23_0xaefc('0x47')](_0xd9ed5);const _0x1a8fcb=_0xd9ed5[a23_0xaefc('0x67')]('.')[a23_0xaefc('0x68')](0x0,-0x1)[a23_0xaefc('0x69')]('.');const _0x282a33=a23_0xaefc('0xa9');const _0x5abd58=['-y','-r',a23_0xaefc('0xaa'),a23_0xaefc('0xab'),'1',a23_0xaefc('0xac'),'glob','-i',_0x5766cd,'-t',String(_0x87ac1f),a23_0xaefc('0xad'),a23_0xaefc('0xae'),a23_0xaefc('0xaf'),'yuv420p','-r','25','-vf',a23_0xaefc('0xb0'),this[a23_0xaefc('0x1a')]+_0x1a8fcb+a23_0xaefc('0x6b')];const _0x29432e=spawn(_0x282a33,_0x5abd58);_0x29432e[a23_0xaefc('0xb1')]['on'](a23_0xaefc('0x96'),function(_0x11d57b){console[a23_0xaefc('0x47')]('Converting\x20'+_0x5766cd);});_0x29432e[a23_0xaefc('0xb2')]['on'](a23_0xaefc('0x96'),function(_0x3e62d3){console[a23_0xaefc('0x47')]('stderr:\x20'+_0x3e62d3);}[a23_0xaefc('0x3f')](this));_0x29432e['on']('close',function(){console[a23_0xaefc('0x47')]('finished\x20mp4\x20convert');this[a23_0xaefc('0x55')]++;this[a23_0xaefc('0x59')]();}['bind'](this));}['downloadYouTube'](_0x186cde){const _0x90ff0e=this['tempFolder']+'/'+_0x186cde+'.mp4';const _0x59e684=youtubedl('http://www.youtube.com/watch?v='+_0x186cde,['--format=18'],{'cwd':__dirname});_0x59e684['on'](a23_0xaefc('0xb3'),function(_0x26ecad){console[a23_0xaefc('0x47')](a23_0xaefc('0xb4'));console['log']('filename:\x20'+_0x26ecad[a23_0xaefc('0xb5')]);console[a23_0xaefc('0x47')]('size:\x20'+_0x26ecad[a23_0xaefc('0x91')]);});_0x59e684['on'](a23_0xaefc('0xb6'),function complete(_0x35cb46){'use strict';console[a23_0xaefc('0x47')](a23_0xaefc('0xb7')+_0x35cb46['_filename']+a23_0xaefc('0xb8'));});_0x59e684['on'](a23_0xaefc('0x7d'),function(){console['log'](a23_0xaefc('0xb9'));this[a23_0xaefc('0x6d')](_0x90ff0e)['then'](function(_0x3d798){if(_0x3d798){this[a23_0xaefc('0x55')]++;}this[a23_0xaefc('0x59')]();}[a23_0xaefc('0x3f')](this));}[a23_0xaefc('0x3f')](this));_0x59e684[a23_0xaefc('0x95')](fs[a23_0xaefc('0xa8')](_0x90ff0e));}[a23_0xaefc('0x62')](){console[a23_0xaefc('0x47')](a23_0xaefc('0xba'));if(this[a23_0xaefc('0x20')]){if(this[a23_0xaefc('0x54')][a23_0xaefc('0x58')]==0x0){fs['writeFileSync'](this[a23_0xaefc('0x1e')],JSON['stringify'](this['newPlayList']));let _0xbbf25d=a23_0xaefc('0xbb')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x282fed in this[a23_0xaefc('0x21')]){const _0x4de3fc=this[a23_0xaefc('0x21')][_0x282fed]['path'];const _0x29320e=this['downloadFiles'][_0x282fed]['media_type'];const _0x51b2eb=_0x4de3fc[a23_0xaefc('0x65')](_0x4de3fc[a23_0xaefc('0x66')]('/')+0x1);let _0x3a2a25=_0x51b2eb[a23_0xaefc('0x67')]('.')[a23_0xaefc('0x68')](0x0,-0x1)[a23_0xaefc('0x69')]('.');if(_0x29320e==a23_0xaefc('0x6a')){_0x3a2a25=_0x4de3fc;}_0xbbf25d+=a23_0xaefc('0xbc')+_0x3a2a25+a23_0xaefc('0x6b')+'\x0d\x0a';}fsExtra[a23_0xaefc('0x53')](this[a23_0xaefc('0x1c')]);fsExtra['copySync'](this['tempFolder'],this['filesFolder']);fsExtra[a23_0xaefc('0x49')](this[a23_0xaefc('0x5d')],_0xbbf25d);fsExtra[a23_0xaefc('0x53')](this[a23_0xaefc('0x1a')]);console[a23_0xaefc('0x47')](a23_0xaefc('0xbd'));this['refreshPlayer']();}else{console['log'](a23_0xaefc('0xbe'));this[a23_0xaefc('0x55')]=0x0;setTimeout(function(){this[a23_0xaefc('0x59')]();}[a23_0xaefc('0x3f')](this),0x1388);}}else{console[a23_0xaefc('0x47')](a23_0xaefc('0xbf'));}}[a23_0xaefc('0xc0')](){this[a23_0xaefc('0xc1')](a23_0xaefc('0xc2'),{'playlistid':0x1},function(_0x40b0db){console[a23_0xaefc('0x47')]('Playlist.Cleared');console[a23_0xaefc('0x47')](_0x40b0db);this[a23_0xaefc('0xc1')](a23_0xaefc('0xc3'),{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x40b0db){console['log'](a23_0xaefc('0xc4'));console['log'](_0x40b0db);this['jsonrpcClient'](a23_0xaefc('0xc5'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x40b0db){console[a23_0xaefc('0x47')](a23_0xaefc('0xc6'));console[a23_0xaefc('0x47')](_0x40b0db);this[a23_0xaefc('0xc7')](a23_0xaefc('0xc8'));}[a23_0xaefc('0x3f')](this));}['bind'](this));}['bind'](this));}[a23_0xaefc('0xc9')](){console[a23_0xaefc('0x47')](a23_0xaefc('0xca'));this[a23_0xaefc('0xc7')](a23_0xaefc('0xcb'));}[a23_0xaefc('0x3d')](){const _0x5950a7=format(this[a23_0xaefc('0xcc')],this[a23_0xaefc('0x31')]);console[a23_0xaefc('0x47')](_0x5950a7);request({'url':_0x5950a7,'json':!![]},function(_0x37343f,_0x383708,_0x416d8e){if(_0x416d8e[a23_0xaefc('0x58')]>0x0){const _0x4c8073=_0x416d8e[0x0];const _0x5496db=_0x4c8073[a23_0xaefc('0xcd')];const _0x32b8b6=_0x4c8073[a23_0xaefc('0xce')]==0x1;this['setRss'](_0x5496db);this['enableClock'](_0x32b8b6);this[a23_0xaefc('0x3a')]();}console[a23_0xaefc('0x47')](_0x416d8e);}[a23_0xaefc('0x3f')](this));}[a23_0xaefc('0xcf')](){this['kodiCommandClient'](a23_0xaefc('0xd0'));}[a23_0xaefc('0xd1')](){this[a23_0xaefc('0xc7')](a23_0xaefc('0xd2'));}[a23_0xaefc('0xd3')](_0x309042){const _0x39075a=_0x309042!=null&&_0x309042!='';const _0x7cc58b=a23_0xaefc('0xd4');const _0x148e90=fsExtra[a23_0xaefc('0x30')](_0x7cc58b);console['log'](a23_0xaefc('0xd5')+_0x148e90);const _0x573856=require(a23_0xaefc('0xd6'));const _0x58016a=_0x573856[a23_0xaefc('0xd7')];_0x58016a(_0x148e90,function(_0x1e5c5b,_0x43c54f){console[a23_0xaefc('0x47')](a23_0xaefc('0xd8'),_0x1e5c5b);console[a23_0xaefc('0x47')]('result:\x20%j',_0x43c54f);if(!_0x309042||_0x309042==null||_0x309042==''){_0x309042=a23_0xaefc('0xd9');}_0x43c54f[a23_0xaefc('0xda')][a23_0xaefc('0xdb')][0x0][a23_0xaefc('0xdc')][0x0]['_']=_0x309042;const _0x5d205c=new _0x573856['Builder']();const _0x4a1cfc=_0x5d205c['buildObject'](_0x43c54f);console['log']('xml:\x20%j',_0x4a1cfc);fsExtra[a23_0xaefc('0x49')](_0x7cc58b,_0x4a1cfc);});this[a23_0xaefc('0xc7')]('RefreshRSS()');this[a23_0xaefc('0xc1')]('Settings.SetSettingValue',{'setting':'lookandfeel.enablerssfeeds','value':_0x39075a},function(_0xecb577){console['log'](a23_0xaefc('0xdd'));console[a23_0xaefc('0x47')](_0xecb577);}[a23_0xaefc('0x3f')](this));}[a23_0xaefc('0xde')](_0x229c5f){this[a23_0xaefc('0xc1')](a23_0xaefc('0xdf'),{'setting':'videoplayer.usedisplayasclock','value':_0x229c5f},function(_0x34e72c){console[a23_0xaefc('0x47')](a23_0xaefc('0xe0'));console[a23_0xaefc('0x47')](_0x34e72c);}['bind'](this));}[a23_0xaefc('0xc7')](_0x5130bf){exec('kodi-send\x20--action=\x22'+_0x5130bf+'\x22',function(_0x41659c){console[a23_0xaefc('0x47')](_0x41659c);});}[a23_0xaefc('0xc1')](_0x262fe2,_0x3c2ec0,_0x454a68){const _0x456502={'jsonrpc':a23_0xaefc('0xe1'),'method':_0x262fe2,'params':_0x3c2ec0,'id':0x1};this['httpClientService'][a23_0xaefc('0x4e')](this[a23_0xaefc('0x23')]+a23_0xaefc('0xe2'),_0x456502,![],{'user':this['kodiUser'],'pass':this[a23_0xaefc('0x27')]})[a23_0xaefc('0x3')](function(_0x298ca2){_0x454a68(_0x298ca2);})[a23_0xaefc('0x4d')](function(_0x327319){});}}exports[a23_0xaefc('0xe3')]=SyncPlaylistsService;