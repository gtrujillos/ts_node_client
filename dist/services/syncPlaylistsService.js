var a22_0x232e=['maxSockets','host','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','pipe','data','err:\x20','finish','Downloaded\x20','headers','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','image','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','createWriteStream','ffmpeg','1/2','-loop','-pattern_type','glob','libx264','-pix_fmt','yuv420p','scale=1920:1080','Converting\x20','stderr','stderr:\x20','close','--format=18','Download\x20started','filename:\x20','_filename','size:\x20','size','\x20already\x20downloaded.','finishProcess','Finishing','#EXTCPlayListM3U::M3U','path','media_type','youtube_single','/home/osmc/luloclient/media/files/','Finished','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','throw','then','apply','next','defineProperty','__esModule','node-mediainfo','url','request-progress','child_process','spawn','is-image','string-template','youtube-dl','uuid/v4','config.json','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','playListFile','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','downloadFiles','failDownloadFiles','httpClientService','HttpClientService','init','config','readFileSync','context','parse','playerId','deploy/','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','checkDependencies','node-apt-get','install','registerClient','deviceUuid','writeFileSync','stringify','networkInterfaces','post','log','register\x20response:\x20','catch','reportStatus','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','loadMediaList','newPlayList','emptyDirSync','currentFile','push','Total:\x20','length','download','bind','reloadMediaList','hasPlayListChanged','error','this.currentFile:\x20','\x20of\x20','substring','lastIndexOf','slice','join','split','.mp4','**********+','existsSync','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','media','track','@type','Video','removeSync','mediainfo\x20check:','splice','downloading:\x20','start','includes','Error:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent'];(function(_0x199ab4,_0x63f337){var _0x2136d5=function(_0x5b3274){while(--_0x5b3274){_0x199ab4['push'](_0x199ab4['shift']());}};_0x2136d5(++_0x63f337);}(a22_0x232e,0x19e));var a22_0x5735=function(_0x4661c4,_0x34b462){_0x4661c4=_0x4661c4-0x0;var _0x6fd823=a22_0x232e[_0x4661c4];return _0x6fd823;};'use strict';var __awaiter=this&&this[a22_0x5735('0x0')]||function(_0xb09394,_0x28e686,_0x190064,_0x40be0d){return new(_0x190064||(_0x190064=Promise))(function(_0x1daa44,_0xa71aa7){function _0x538ba9(_0x37c426){try{_0x2d215a(_0x40be0d['next'](_0x37c426));}catch(_0x12fd9e){_0xa71aa7(_0x12fd9e);}}function _0x313f68(_0x4093ca){try{_0x2d215a(_0x40be0d[a22_0x5735('0x1')](_0x4093ca));}catch(_0x488e6b){_0xa71aa7(_0x488e6b);}}function _0x2d215a(_0x2f8972){_0x2f8972['done']?_0x1daa44(_0x2f8972['value']):new _0x190064(function(_0x1daa44){_0x1daa44(_0x2f8972['value']);})[a22_0x5735('0x2')](_0x538ba9,_0x313f68);}_0x2d215a((_0x40be0d=_0x40be0d[a22_0x5735('0x3')](_0xb09394,_0x28e686||[]))[a22_0x5735('0x4')]());});};Object[a22_0x5735('0x5')](exports,a22_0x5735('0x6'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const mediainfo=require(a22_0x5735('0x7'));const fs=require('fs');const url=require(a22_0x5735('0x8'));const http=require('http');const fsExtra=require('fs-extra');const request=require('request');const progress=require(a22_0x5735('0x9'));const spawn=require(a22_0x5735('0xa'))[a22_0x5735('0xb')];const isImage=require(a22_0x5735('0xc'));const format=require(a22_0x5735('0xd'));const os=require('os');const youtubedl=require(a22_0x5735('0xe'));const uuidv4=require(a22_0x5735('0xf'));const configFile=a22_0x5735('0x10');const contextFile='context.json';const urlExists=require('url-exists');const Downloader=require(a22_0x5735('0x11'));class SyncPlaylistsService{constructor(){this[a22_0x5735('0x12')]=a22_0x5735('0x13');this[a22_0x5735('0x14')]=this[a22_0x5735('0x12')]+a22_0x5735('0x15');this['filesFolder']=this[a22_0x5735('0x12')]+'files/';this[a22_0x5735('0x16')]=this[a22_0x5735('0x12')]+a22_0x5735('0x17');this[a22_0x5735('0x18')]=this[a22_0x5735('0x19')]+a22_0x5735('0x1a');this['currentFile']=0x0;this[a22_0x5735('0x1b')]=[];this[a22_0x5735('0x1c')]=[];this['newPlayList']={};this[a22_0x5735('0x1d')]=new HttpClientService_1[(a22_0x5735('0x1e'))]();}[a22_0x5735('0x1f')](){this[a22_0x5735('0x20')]=JSON['parse'](fs[a22_0x5735('0x21')](configFile));this[a22_0x5735('0x22')]=JSON[a22_0x5735('0x23')](fs[a22_0x5735('0x21')](contextFile));this[a22_0x5735('0x24')]=this[a22_0x5735('0x20')][a22_0x5735('0x24')];this['baseURL']=process['env']['WEB_SERVICE_URL']+a22_0x5735('0x25');this[a22_0x5735('0x26')]=this[a22_0x5735('0x27')]+a22_0x5735('0x28');this[a22_0x5735('0x29')]();}[a22_0x5735('0x29')](){const _0x4eaa78=require(a22_0x5735('0x2a'));_0x4eaa78[a22_0x5735('0x2b')]('mediainfo',{'assume-yes':!![]});}[a22_0x5735('0x2c')](){const _0x515ef0=this[a22_0x5735('0x20')][a22_0x5735('0x2d')];if(!_0x515ef0||_0x515ef0==''){this[a22_0x5735('0x20')][a22_0x5735('0x2d')]=uuidv4();this[a22_0x5735('0x20')]={'deviceUuid':this[a22_0x5735('0x20')][a22_0x5735('0x2d')],'playerId':this[a22_0x5735('0x20')][a22_0x5735('0x24')]};fs[a22_0x5735('0x2e')](configFile,JSON[a22_0x5735('0x2f')](this[a22_0x5735('0x20')]));}const _0x28d5f0={'player_id':this['playerId'],'device_uuid':this[a22_0x5735('0x20')][a22_0x5735('0x2d')],'network_info':JSON[a22_0x5735('0x2f')](os[a22_0x5735('0x30')]()),'firmware_info':JSON[a22_0x5735('0x2f')](this['context']),'status':0x1};this[a22_0x5735('0x1d')][a22_0x5735('0x31')]('http://restapi.lulo.run/player_devices/register',_0x28d5f0,![])['then'](function(_0x221695){console[a22_0x5735('0x32')](a22_0x5735('0x33')+Date());})[a22_0x5735('0x34')](function(_0x3bd384){});}[a22_0x5735('0x35')](){const _0x54f83f={'player_id':this[a22_0x5735('0x24')],'device_uuid':this[a22_0x5735('0x20')]['deviceUuid'],'status':0x1};this[a22_0x5735('0x1d')]['post'](a22_0x5735('0x36'),_0x54f83f,![])[a22_0x5735('0x2')](function(_0x459339){console[a22_0x5735('0x32')](a22_0x5735('0x37')+Date());})[a22_0x5735('0x34')](function(_0x5965c4){});}[a22_0x5735('0x38')](){fsExtra[a22_0x5735('0x39')](this['mediaFolder'],_0x124fcd=>{});fsExtra['ensureDir'](this[a22_0x5735('0x14')],_0x12e7b4=>{});fsExtra[a22_0x5735('0x39')](this[a22_0x5735('0x19')],_0x1c3c16=>{});}[a22_0x5735('0x3a')](){const _0x3d5ec0=format(this[a22_0x5735('0x26')],this[a22_0x5735('0x24')]);console[a22_0x5735('0x32')](_0x3d5ec0);request({'url':_0x3d5ec0,'json':!![]},function(_0x408387,_0x1ab72e,_0x2ff43c){this[a22_0x5735('0x3b')]=_0x2ff43c;fsExtra[a22_0x5735('0x3c')](this[a22_0x5735('0x14')]);this['downloadFiles']=[];this['failDownloadFiles']=[];this[a22_0x5735('0x3d')]=0x0;for(const _0x5388a8 in _0x2ff43c){this['downloadFiles'][a22_0x5735('0x3e')](_0x2ff43c[_0x5388a8]);}console[a22_0x5735('0x32')](a22_0x5735('0x3f')+this[a22_0x5735('0x1b')][a22_0x5735('0x40')]);if(this[a22_0x5735('0x1b')][a22_0x5735('0x40')]>0x0){this[a22_0x5735('0x41')]();}}[a22_0x5735('0x42')](this));}[a22_0x5735('0x43')](){if(fsExtra['existsSync'](this[a22_0x5735('0x16')])){fsExtra['removeSync'](this[a22_0x5735('0x16')]);}this[a22_0x5735('0x3a')]();}[a22_0x5735('0x44')](){const _0x5592a0=JSON[a22_0x5735('0x2f')](this[a22_0x5735('0x3b')]);try{if(!fs['existsSync'](this[a22_0x5735('0x16')])){return!![];}else{const _0x255544=fs['readFileSync'](this['playListFile'])['toString']();if(_0x255544!=_0x5592a0){return!![];}}}catch(_0x2d020f){console[a22_0x5735('0x45')](_0x2d020f);}return![];}[a22_0x5735('0x41')](){console[a22_0x5735('0x32')](a22_0x5735('0x46')+this[a22_0x5735('0x3d')]+a22_0x5735('0x47')+this[a22_0x5735('0x1b')][a22_0x5735('0x40')]);if(this[a22_0x5735('0x3d')]>=this[a22_0x5735('0x1b')]['length']){this['finishProcess']();return;}const _0x3f2bf2=String(this[a22_0x5735('0x1b')][this[a22_0x5735('0x3d')]]['path']);const _0x2a455d=this['downloadFiles'][this[a22_0x5735('0x3d')]]['media_type'];let _0x5f138d=_0x3f2bf2[a22_0x5735('0x48')](_0x3f2bf2[a22_0x5735('0x49')]('/')+0x1);const _0xb52533=_0x5f138d['split']('.')[a22_0x5735('0x4a')](0x0,-0x1)[a22_0x5735('0x4b')]('.');let _0x2e0c92=this['baseURL']+_0x3f2bf2;const _0x74dc5f=_0x2e0c92[a22_0x5735('0x4c')]('.')[a22_0x5735('0x4a')](0x0,-0x1)[a22_0x5735('0x4b')]('.');if(_0x2a455d=='youtube_single'){_0x5f138d=_0x5f138d+a22_0x5735('0x4d');}else if(_0x2a455d=='image'){_0x5f138d=_0xb52533+a22_0x5735('0x4d');_0x2e0c92=_0x74dc5f+'.mp4';}console['log']('**********+');console[a22_0x5735('0x32')](_0x3f2bf2);console['log'](_0x2a455d);console[a22_0x5735('0x32')](_0x5f138d);console[a22_0x5735('0x32')](_0x2e0c92);console[a22_0x5735('0x32')](_0xb52533);console[a22_0x5735('0x32')](_0x74dc5f);console[a22_0x5735('0x32')](a22_0x5735('0x4e'));if(fsExtra[a22_0x5735('0x4f')](this[a22_0x5735('0x14')]+_0x5f138d)){this[a22_0x5735('0x50')](this[a22_0x5735('0x14')]+_0x5f138d)[a22_0x5735('0x2')](function(_0x541f8c){if(_0x541f8c){this[a22_0x5735('0x3d')]++;}this[a22_0x5735('0x41')]();}[a22_0x5735('0x42')](this));}else if(fsExtra[a22_0x5735('0x4f')](this['filesFolder']+_0x5f138d)){this[a22_0x5735('0x50')](this['filesFolder']+_0x5f138d)[a22_0x5735('0x2')](function(_0x2befcb){if(_0x2befcb){fsExtra[a22_0x5735('0x51')](this[a22_0x5735('0x19')]+_0x5f138d,this['tempFolder']+_0x5f138d);this[a22_0x5735('0x3d')]++;}this[a22_0x5735('0x41')]();}[a22_0x5735('0x42')](this));}else{console[a22_0x5735('0x32')](a22_0x5735('0x52')+_0x2e0c92);if(_0x2a455d=='youtube_single'){this[a22_0x5735('0x53')](_0x3f2bf2);}else{this[a22_0x5735('0x54')](_0x2e0c92,_0x5f138d,_0x2a455d);}}}[a22_0x5735('0x50')](_0x21911e){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x5735('0x32')]('videoFile:\x20'+_0x21911e);const _0x3df64f=yield mediainfo(_0x21911e)[a22_0x5735('0x34')](_0x27613c=>console[a22_0x5735('0x32')](_0x27613c));const _0x2101a4=_0x3df64f[a22_0x5735('0x55')][a22_0x5735('0x56')][a22_0x5735('0x40')]>0x1&&_0x3df64f['media'][a22_0x5735('0x56')][0x1][a22_0x5735('0x57')]==a22_0x5735('0x58');if(!_0x2101a4){fsExtra[a22_0x5735('0x59')](_0x21911e);}console['log'](a22_0x5735('0x5a')+_0x2101a4);return _0x2101a4;});}['downloader'](_0x1abce3,_0x28eb2a,_0x1844c5){const _0x273a2e=new Downloader();console[a22_0x5735('0x32')](_0x1abce3);console[a22_0x5735('0x32')](_0x28eb2a);console[a22_0x5735('0x32')](_0x1844c5);const _0x5eba49=_0x273a2e['download'](_0x1abce3,this[a22_0x5735('0x14')]+_0x28eb2a);urlExists(_0x1abce3,function(_0x1f8ac4,_0x234bef){if(_0x234bef){if(this['failDownloadFiles']['includes'](this['currentFile'])){const _0x42b71e=this[a22_0x5735('0x1c')]['indexOf'](this['currentFile']);if(_0x42b71e>-0x1){this[a22_0x5735('0x1c')][a22_0x5735('0x5b')](_0x42b71e,0x1);}}console[a22_0x5735('0x32')](a22_0x5735('0x5c')+_0x1abce3);_0x5eba49[a22_0x5735('0x5d')]();}else{if(!this[a22_0x5735('0x1c')][a22_0x5735('0x5e')](this[a22_0x5735('0x3d')])){this['failDownloadFiles']['push'](this[a22_0x5735('0x3d')]);}console[a22_0x5735('0x32')](a22_0x5735('0x5f')+_0x1abce3);this[a22_0x5735('0x3d')]++;this['download']();}}['bind'](this));_0x5eba49['on'](a22_0x5735('0x5d'),function(_0x5eba49){console[a22_0x5735('0x32')]('start:\x20'+_0x1abce3);});_0x5eba49['on']('error',function(_0x5eba49){console['log'](a22_0x5735('0x60'));this[a22_0x5735('0x41')]();}[a22_0x5735('0x42')](this));_0x5eba49['on']('end',function(_0x5eba49){console['log'](a22_0x5735('0x61'));console[a22_0x5735('0x32')](a22_0x5735('0x62')+_0x28eb2a);console[a22_0x5735('0x32')](a22_0x5735('0x63')+_0x1844c5);this['checkVideo'](this[a22_0x5735('0x14')]+_0x28eb2a)['then'](function(_0x5325ab){if(_0x5325ab){this['currentFile']++;}this[a22_0x5735('0x41')]();}[a22_0x5735('0x42')](this));}[a22_0x5735('0x42')](this));_0x5eba49['on'](a22_0x5735('0x64'),function(_0x5eba49){console[a22_0x5735('0x32')]('stopped');});_0x5eba49['on']('destroyed',function(_0x5eba49){console[a22_0x5735('0x32')](a22_0x5735('0x65'));});_0x5eba49['on']('retry',function(_0x5eba49){console[a22_0x5735('0x32')]('retry');});}['downloadHTTPFile'](_0x5ca8e9,_0x259ddd,_0x4b1f54,_0x3ba8d9){console[a22_0x5735('0x32')](a22_0x5735('0x66'));console[a22_0x5735('0x32')](_0x5ca8e9);const _0x10f0c6=!![];let _0x45ef9d=0x0;const _0x892e4e='';console[a22_0x5735('0x32')](a22_0x5735('0x67')+_0x5ca8e9+'\x20to\x20'+_0x259ddd);if(_0x45ef9d){if(_0x45ef9d>0x5){_0x3ba8d9(a22_0x5735('0x68'),_0x5ca8e9,_0x4b1f54,null);return;}}else{_0x45ef9d=0x0;}const _0x5aa053=this[a22_0x5735('0x14')]+_0x259ddd;let _0x3e36e9;if(_0x3ba8d9===undefined){console[a22_0x5735('0x32')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x5ca8e9+a22_0x5735('0x69')+_0x5aa053);_0x3ba8d9=function(_0x54651,_0x28aed9){console['log'](a22_0x5735('0x6a'),_0x54651,_0x28aed9);};}http[a22_0x5735('0x6b')][a22_0x5735('0x6c')]=0x64;const _0x3475c3={'host':url[a22_0x5735('0x23')](_0x5ca8e9)[a22_0x5735('0x6d')],'port':0x50,'path':url['parse'](_0x5ca8e9)['pathname'],'agent':![]};const _0x271255=http[a22_0x5735('0x6e')](_0x3475c3,function(_0x8a3b93){let _0x5993c8=0x0;let _0x4e1015=0x0;function _0x349915(){if(_0x5993c8===undefined){console[a22_0x5735('0x32')](_0x259ddd+a22_0x5735('0x6f')+_0x4e1015+'/'+'?');}const _0xcd5c24=_0x4e1015/_0x5993c8*0x64;console[a22_0x5735('0x32')](_0x259ddd+a22_0x5735('0x70')+_0xcd5c24+'%\x09'+_0x4e1015+'/'+_0x5993c8);}console[a22_0x5735('0x32')](_0x259ddd+'\x20'+_0x8a3b93[a22_0x5735('0x71')]);switch(_0x8a3b93[a22_0x5735('0x71')]){case 0xc8:_0x5993c8=_0x8a3b93['headers'][a22_0x5735('0x72')]||_0x892e4e;fs[a22_0x5735('0x73')](_0x5aa053,function(_0x55ee90,_0x2f65c9){if(!_0x55ee90){console[a22_0x5735('0x32')](a22_0x5735('0x74')+_0x5aa053);if(_0x2f65c9['size']==_0x5993c8){console[a22_0x5735('0x32')](a22_0x5735('0x75')+_0x5993c8+')');console['log'](a22_0x5735('0x76'));}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x2f65c9['size']+a22_0x5735('0x77')+_0x5993c8+')');}}_0x3e36e9=fs['createWriteStream'](_0x5aa053);_0x8a3b93[a22_0x5735('0x78')](_0x3e36e9);_0x8a3b93['on'](a22_0x5735('0x79'),function(_0x469afb){_0x4e1015+=_0x469afb[a22_0x5735('0x40')];_0x349915();});_0x271255['on'](a22_0x5735('0x45'),function(_0x55ee90){console[a22_0x5735('0x32')](a22_0x5735('0x7a'));console[a22_0x5735('0x32')](_0x55ee90);});_0x3e36e9['on'](a22_0x5735('0x7b'),function(){console[a22_0x5735('0x32')](a22_0x5735('0x7c')+_0x5ca8e9+a22_0x5735('0x69')+_0x259ddd);_0x3ba8d9(null,_0x259ddd,_0x4b1f54,_0x259ddd);}[a22_0x5735('0x42')](this));});break;case 0x12e:const _0x1f3dc1=_0x8a3b93[a22_0x5735('0x7d')][a22_0x5735('0x7e')];console[a22_0x5735('0x32')](a22_0x5735('0x7f')+_0x5ca8e9+'\x20to\x20'+_0x1f3dc1);if(_0x45ef9d<0x5){this[a22_0x5735('0x66')](_0x1f3dc1,_0x259ddd,_0x3ba8d9,_0x45ef9d++);}else{console[a22_0x5735('0x45')](a22_0x5735('0x80')+_0x5ca8e9+'.');_0x3ba8d9(a22_0x5735('0x81'),null,null,null);}return;case 0x194:console['log'](a22_0x5735('0x82')+_0x5ca8e9);default:console['log'](a22_0x5735('0x83')+_0x5ca8e9+a22_0x5735('0x84')+_0x8a3b93[a22_0x5735('0x71')]);_0x271255[a22_0x5735('0x85')]();_0x3ba8d9(_0x8a3b93['statusCode'],null,null,null);return;}})['on'](a22_0x5735('0x45'),function(_0x55e78c){console[a22_0x5735('0x32')](a22_0x5735('0x86')+_0x5ca8e9+'\x20'+_0x55e78c[a22_0x5735('0x87')]);_0x3ba8d9(_0x55e78c,null,null,null);});}['downloadHTTPFileCallback'](_0x11660f,_0x190fa4,_0x32ee45,_0x1a3534){console[a22_0x5735('0x32')]('downloadHTTPFileCallback');console[a22_0x5735('0x32')](_0x11660f);console[a22_0x5735('0x32')](_0x190fa4);console[a22_0x5735('0x32')](_0x32ee45);console[a22_0x5735('0x32')](_0x1a3534);if(_0x32ee45==a22_0x5735('0x88')){const _0x278e15=this[a22_0x5735('0x1b')][this[a22_0x5735('0x3d')]][a22_0x5735('0x89')]!=null?this[a22_0x5735('0x1b')][this[a22_0x5735('0x3d')]][a22_0x5735('0x89')]:0x1e;this[a22_0x5735('0x8a')](_0x1a3534,_0x278e15);}else if(_0x32ee45==a22_0x5735('0x8b')){if(_0x11660f==null&&_0x190fa4!=''){this['currentFile']++;}this[a22_0x5735('0x41')]();}console[a22_0x5735('0x32')](this[a22_0x5735('0x3d')]);}[a22_0x5735('0x8c')](_0x180765,_0xc75513,_0x2c3d9c){progress(request(_0x180765),{})['on'](a22_0x5735('0x8d'),function(_0xf1036a){console[a22_0x5735('0x32')](_0xf1036a);})['on'](a22_0x5735('0x45'),function(_0x294e94){console['log'](a22_0x5735('0x8e'));this['download']();})['on'](a22_0x5735('0x61'),function(){console[a22_0x5735('0x32')]('Downloaded:\x20'+_0xc75513);console['log'](a22_0x5735('0x63')+_0x2c3d9c);if(_0x2c3d9c==a22_0x5735('0x88')){const _0x3f7754=this[a22_0x5735('0x1b')][this[a22_0x5735('0x3d')]][a22_0x5735('0x89')]!=null?this[a22_0x5735('0x1b')][this[a22_0x5735('0x3d')]][a22_0x5735('0x89')]:0x1e;this[a22_0x5735('0x8a')](_0xc75513,_0x3f7754);}else if(_0x2c3d9c=='video'){this[a22_0x5735('0x3d')]++;this['download']();}}[a22_0x5735('0x42')](this))[a22_0x5735('0x78')](fs[a22_0x5735('0x8f')](this[a22_0x5735('0x14')]+_0xc75513));}[a22_0x5735('0x8a')](_0x4e6e1e,_0x5adb42=0x1e){const _0x4b634e=this[a22_0x5735('0x14')]+_0x4e6e1e;console[a22_0x5735('0x32')](_0x4b634e);console[a22_0x5735('0x32')](_0x4e6e1e);const _0x1c0e14=_0x4e6e1e['split']('.')[a22_0x5735('0x4a')](0x0,-0x1)['join']('.');const _0x50e514=a22_0x5735('0x90');const _0x42de82=['-y','-r',a22_0x5735('0x91'),a22_0x5735('0x92'),'1',a22_0x5735('0x93'),a22_0x5735('0x94'),'-i',_0x4b634e,'-t',String(_0x5adb42),'-c:v',a22_0x5735('0x95'),a22_0x5735('0x96'),a22_0x5735('0x97'),'-r','25','-vf',a22_0x5735('0x98'),this['tempFolder']+_0x1c0e14+'.mp4'];const _0xfbfc28=spawn(_0x50e514,_0x42de82);_0xfbfc28['stdout']['on'](a22_0x5735('0x79'),function(_0x1ca9e5){console[a22_0x5735('0x32')](a22_0x5735('0x99')+_0x4b634e);});_0xfbfc28[a22_0x5735('0x9a')]['on'](a22_0x5735('0x79'),function(_0x365580){console[a22_0x5735('0x32')](a22_0x5735('0x9b')+_0x365580);}[a22_0x5735('0x42')](this));_0xfbfc28['on'](a22_0x5735('0x9c'),function(){console[a22_0x5735('0x32')]('finished\x20mp4\x20convert');this[a22_0x5735('0x3d')]++;this[a22_0x5735('0x41')]();}[a22_0x5735('0x42')](this));}[a22_0x5735('0x53')](_0x38cfcb){const _0x5b40ca=this[a22_0x5735('0x14')]+'/'+_0x38cfcb+a22_0x5735('0x4d');const _0x4e60dd=youtubedl('http://www.youtube.com/watch?v='+_0x38cfcb,[a22_0x5735('0x9d')],{'cwd':__dirname});_0x4e60dd['on']('info',function(_0x327cac){console['log'](a22_0x5735('0x9e'));console[a22_0x5735('0x32')](a22_0x5735('0x9f')+_0x327cac[a22_0x5735('0xa0')]);console['log'](a22_0x5735('0xa1')+_0x327cac[a22_0x5735('0xa2')]);});_0x4e60dd['on']('complete',function complete(_0x4c395b){'use strict';console[a22_0x5735('0x32')](a22_0x5735('0x9f')+_0x4c395b[a22_0x5735('0xa0')]+a22_0x5735('0xa3'));});_0x4e60dd['on'](a22_0x5735('0x61'),function(){console[a22_0x5735('0x32')]('finished\x20youtube\x20downloading!');this['checkVideo'](_0x5b40ca)[a22_0x5735('0x2')](function(_0x388c3b){if(_0x388c3b){this[a22_0x5735('0x3d')]++;}this[a22_0x5735('0x41')]();}[a22_0x5735('0x42')](this));}[a22_0x5735('0x42')](this));_0x4e60dd[a22_0x5735('0x78')](fs[a22_0x5735('0x8f')](_0x5b40ca));}[a22_0x5735('0xa4')](){console['log'](a22_0x5735('0xa5'));if(this[a22_0x5735('0x1c')]['length']==0x0){fs[a22_0x5735('0x2e')](this[a22_0x5735('0x16')],JSON[a22_0x5735('0x2f')](this[a22_0x5735('0x3b')]));let _0x261c22=a22_0x5735('0xa6')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x312a9b in this[a22_0x5735('0x1b')]){const _0x694e3b=this[a22_0x5735('0x1b')][_0x312a9b][a22_0x5735('0xa7')];const _0x184af3=this[a22_0x5735('0x1b')][_0x312a9b][a22_0x5735('0xa8')];const _0x534b6e=_0x694e3b[a22_0x5735('0x48')](_0x694e3b['lastIndexOf']('/')+0x1);let _0x24810a=_0x534b6e[a22_0x5735('0x4c')]('.')[a22_0x5735('0x4a')](0x0,-0x1)[a22_0x5735('0x4b')]('.');if(_0x184af3==a22_0x5735('0xa9')){_0x24810a=_0x694e3b;}_0x261c22+=a22_0x5735('0xaa')+_0x24810a+'.mp4'+'\x0d\x0a';}fsExtra[a22_0x5735('0x3c')](this['filesFolder']);fsExtra[a22_0x5735('0x51')](this[a22_0x5735('0x14')],this[a22_0x5735('0x19')]);fs[a22_0x5735('0x2e')](this[a22_0x5735('0x18')],_0x261c22);fsExtra['emptyDirSync'](this[a22_0x5735('0x14')]);console[a22_0x5735('0x32')](a22_0x5735('0xab'));}else{console[a22_0x5735('0x32')](a22_0x5735('0xac'));this[a22_0x5735('0x3d')]=0x0;setTimeout(function(){this[a22_0x5735('0x41')]();}[a22_0x5735('0x42')](this),0x1388);}}}exports[a22_0x5735('0xad')]=SyncPlaylistsService;