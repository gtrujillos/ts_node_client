var a22_0x3d6c=['downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','pathname','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','err:\x20','finish','Downloaded\x20','location','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','progress','Error\x20downloading\x20file','createImageVideo','video','slice','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','-vf','stdout','data','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','Download\x20started','filename:\x20','_filename','complete','end','#EXTINF:0,luloPlayList','lastIndexOf','/home/osmc/luloclient/media/files/','emptyDirSync','Rebooting..','now','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','throw','value','then','defineProperty','__esModule','../infrastructure/HttpClientService','url','fs-extra','request','request-progress','child_process','string-template','youtube-dl','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','playListFile','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','currentFile','playlistChanged','failDownloadFiles','newPlayList','httpClientService','HttpClientService','init','config','readFileSync','context','parse','playerId','baseURL','env','WEB_SERVICE_URL','api/player_playlist.php?player_id={0}','kodi','http://localhost','checkDependencies','checkFolders','reportStatus','playlist','getItems','deviceUuid','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','bind','writeFileSync','player','getCurrentlyPlayingVideo','label','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','hasPlayListChanged','downloadFiles','Total:\x20','length','download','reloadMediaList','removeSync','loadMediaList','existsSync','toString','this.currentFile:\x20','\x20of\x20','path','media_type','substring','split','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','push','Error:\x20','start:\x20','error','error:\x20','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry'];(function(_0x33a27a,_0x2598a6){var _0x172234=function(_0x1df910){while(--_0x1df910){_0x33a27a['push'](_0x33a27a['shift']());}};_0x172234(++_0x2598a6);}(a22_0x3d6c,0x1b4));var a22_0xcfb7=function(_0x3e06f5,_0x25f951){_0x3e06f5=_0x3e06f5-0x0;var _0x5c6890=a22_0x3d6c[_0x3e06f5];return _0x5c6890;};'use strict';var __awaiter=this&&this[a22_0xcfb7('0x0')]||function(_0x5eba8c,_0x56663f,_0x11904f,_0x1bebd6){return new(_0x11904f||(_0x11904f=Promise))(function(_0x2b0d76,_0x20314b){function _0x1a6cfc(_0x1cd44f){try{_0x1c99db(_0x1bebd6[a22_0xcfb7('0x1')](_0x1cd44f));}catch(_0x5de630){_0x20314b(_0x5de630);}}function _0x5bdd63(_0xa65e34){try{_0x1c99db(_0x1bebd6[a22_0xcfb7('0x2')](_0xa65e34));}catch(_0x57a190){_0x20314b(_0x57a190);}}function _0x1c99db(_0x39de1c){_0x39de1c['done']?_0x2b0d76(_0x39de1c['value']):new _0x11904f(function(_0x2b0d76){_0x2b0d76(_0x39de1c[a22_0xcfb7('0x3')]);})[a22_0xcfb7('0x4')](_0x1a6cfc,_0x5bdd63);}_0x1c99db((_0x1bebd6=_0x1bebd6['apply'](_0x5eba8c,_0x56663f||[]))[a22_0xcfb7('0x1')]());});};Object[a22_0xcfb7('0x5')](exports,a22_0xcfb7('0x6'),{'value':!![]});const HttpClientService_1=require(a22_0xcfb7('0x7'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a22_0xcfb7('0x8'));const http=require('http');const fsExtra=require(a22_0xcfb7('0x9'));const request=require(a22_0xcfb7('0xa'));const progress=require(a22_0xcfb7('0xb'));const spawn=require(a22_0xcfb7('0xc'))['spawn'];const isImage=require('is-image');const format=require(a22_0xcfb7('0xd'));const os=require('os');const youtubedl=require(a22_0xcfb7('0xe'));const uuidv4=require('uuid/v4');const configFile='config.json';const contextFile=a22_0xcfb7('0xf');const urlExists=require(a22_0xcfb7('0x10'));const kodi_rpc=require(a22_0xcfb7('0x11'));const Downloader=require(a22_0xcfb7('0x12'));class SyncPlaylistsService{constructor(){this[a22_0xcfb7('0x13')]=a22_0xcfb7('0x14');this[a22_0xcfb7('0x15')]=this['mediaFolder']+a22_0xcfb7('0x16');this['filesFolder']=this[a22_0xcfb7('0x13')]+'files/';this[a22_0xcfb7('0x17')]=this[a22_0xcfb7('0x13')]+a22_0xcfb7('0x18');this[a22_0xcfb7('0x19')]=this[a22_0xcfb7('0x1a')]+a22_0xcfb7('0x1b');this[a22_0xcfb7('0x1c')]=0x0;this[a22_0xcfb7('0x1d')]=![];this['downloadFiles']=[];this[a22_0xcfb7('0x1e')]=[];this[a22_0xcfb7('0x1f')]={};this[a22_0xcfb7('0x20')]=new HttpClientService_1[(a22_0xcfb7('0x21'))]();}[a22_0xcfb7('0x22')](){this[a22_0xcfb7('0x23')]=JSON['parse'](fs[a22_0xcfb7('0x24')](configFile));this[a22_0xcfb7('0x25')]=JSON[a22_0xcfb7('0x26')](fs['readFileSync'](contextFile));this[a22_0xcfb7('0x27')]=this[a22_0xcfb7('0x23')][a22_0xcfb7('0x27')];this[a22_0xcfb7('0x28')]=process[a22_0xcfb7('0x29')][a22_0xcfb7('0x2a')]+'deploy/';this['playListServiceURL']=this[a22_0xcfb7('0x28')]+a22_0xcfb7('0x2b');this[a22_0xcfb7('0x2c')]=new kodi_rpc({'url':a22_0xcfb7('0x2d')});this[a22_0xcfb7('0x2e')]();this['registerClient']();this[a22_0xcfb7('0x2f')]();this['loadMediaList']();setInterval(function(){this[a22_0xcfb7('0x30')]();}['bind'](this),0x2710);}['checkDependencies'](){}['registerClient'](){this[a22_0xcfb7('0x2c')][a22_0xcfb7('0x31')][a22_0xcfb7('0x32')](0x1)[a22_0xcfb7('0x4')](function(_0x3df864){const _0x5b48c3=JSON['stringify'](_0x3df864);const _0x968908={'player_id':this[a22_0xcfb7('0x27')],'device_uuid':this['config'][a22_0xcfb7('0x33')],'network_info':JSON[a22_0xcfb7('0x34')](os[a22_0xcfb7('0x35')]()),'firmware_info':JSON[a22_0xcfb7('0x34')](this[a22_0xcfb7('0x25')]),'playlist':_0x5b48c3,'playing_item':'','status':0x0};this[a22_0xcfb7('0x20')][a22_0xcfb7('0x36')](a22_0xcfb7('0x37'),_0x968908,![])['then'](function(_0x595635){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x39')+Date());})[a22_0xcfb7('0x3a')](function(_0x178aa2){});console['log'](_0x968908);}[a22_0xcfb7('0x3b')](this));const _0x269ca5=this[a22_0xcfb7('0x23')][a22_0xcfb7('0x33')];if(!_0x269ca5||_0x269ca5==''){this[a22_0xcfb7('0x23')][a22_0xcfb7('0x33')]=uuidv4();this['config']={'deviceUuid':this[a22_0xcfb7('0x23')][a22_0xcfb7('0x33')],'playerId':this[a22_0xcfb7('0x23')][a22_0xcfb7('0x27')]};fs[a22_0xcfb7('0x3c')](configFile,JSON[a22_0xcfb7('0x34')](this['config']));}}[a22_0xcfb7('0x30')](){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x30'));this[a22_0xcfb7('0x2c')][a22_0xcfb7('0x3d')][a22_0xcfb7('0x3e')]()[a22_0xcfb7('0x4')](function(_0x4c4d40){const _0x31b88d=_0x4c4d40['item'][a22_0xcfb7('0x3f')];const _0x39d3d0={'player_id':this[a22_0xcfb7('0x27')],'device_uuid':this[a22_0xcfb7('0x23')][a22_0xcfb7('0x33')],'status':_0x31b88d!=''&&_0x31b88d!=null?0x1:0x0,'playing_item':_0x31b88d};this[a22_0xcfb7('0x20')][a22_0xcfb7('0x36')](a22_0xcfb7('0x40'),_0x39d3d0,![])[a22_0xcfb7('0x4')](function(_0x5f5bd4){console['log'](a22_0xcfb7('0x41')+Date());})[a22_0xcfb7('0x3a')](function(_0x8a971){});}[a22_0xcfb7('0x3b')](this));}[a22_0xcfb7('0x2f')](){fsExtra[a22_0xcfb7('0x42')](this[a22_0xcfb7('0x13')],_0x159c61=>{});fsExtra['ensureDir'](this[a22_0xcfb7('0x15')],_0x29935d=>{});fsExtra[a22_0xcfb7('0x42')](this['filesFolder'],_0x48779e=>{});}['loadMediaList'](){const _0x174f05=format(this['playListServiceURL'],this[a22_0xcfb7('0x27')]);console['log'](_0x174f05);request({'url':_0x174f05,'json':!![]},function(_0x5f3bb3,_0x14fae3,_0x59cceb){this[a22_0xcfb7('0x1f')]=_0x59cceb;this['playlistChanged']=this[a22_0xcfb7('0x43')]();fsExtra['emptyDirSync'](this[a22_0xcfb7('0x15')]);this[a22_0xcfb7('0x44')]=[];this['failDownloadFiles']=[];this['currentFile']=0x0;for(const _0x5baab2 in _0x59cceb){this[a22_0xcfb7('0x44')]['push'](_0x59cceb[_0x5baab2]);}console[a22_0xcfb7('0x38')](a22_0xcfb7('0x45')+this[a22_0xcfb7('0x44')]['length']);if(this[a22_0xcfb7('0x44')][a22_0xcfb7('0x46')]>0x0){this[a22_0xcfb7('0x47')]();}}[a22_0xcfb7('0x3b')](this));}[a22_0xcfb7('0x48')](){if(fsExtra['existsSync'](this['playListFile'])){fsExtra[a22_0xcfb7('0x49')](this[a22_0xcfb7('0x17')]);}this[a22_0xcfb7('0x4a')]();}[a22_0xcfb7('0x43')](){const _0x1f6eeb=JSON[a22_0xcfb7('0x34')](this[a22_0xcfb7('0x1f')]);try{if(!fs[a22_0xcfb7('0x4b')](this[a22_0xcfb7('0x17')])){return!![];}else{const _0xe7862b=fs[a22_0xcfb7('0x24')](this[a22_0xcfb7('0x17')])[a22_0xcfb7('0x4c')]();if(_0xe7862b!=_0x1f6eeb){return!![];}}}catch(_0x3c10d4){console['error'](_0x3c10d4);}return![];}['download'](){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x4d')+this[a22_0xcfb7('0x1c')]+a22_0xcfb7('0x4e')+this[a22_0xcfb7('0x44')][a22_0xcfb7('0x46')]);if(this[a22_0xcfb7('0x1c')]>=this[a22_0xcfb7('0x44')][a22_0xcfb7('0x46')]){this['finishProcess']();return;}const _0x4d0f69=String(this[a22_0xcfb7('0x44')][this['currentFile']][a22_0xcfb7('0x4f')]);const _0x57c207=this[a22_0xcfb7('0x44')][this[a22_0xcfb7('0x1c')]][a22_0xcfb7('0x50')];let _0x21174b=_0x4d0f69[a22_0xcfb7('0x51')](_0x4d0f69['lastIndexOf']('/')+0x1);const _0x133636=_0x21174b[a22_0xcfb7('0x52')]('.')['slice'](0x0,-0x1)[a22_0xcfb7('0x53')]('.');let _0x290938=this[a22_0xcfb7('0x28')]+_0x4d0f69;const _0xaab4b0=_0x290938[a22_0xcfb7('0x52')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x57c207==a22_0xcfb7('0x54')){_0x21174b=_0x21174b+a22_0xcfb7('0x55');}else if(_0x57c207==a22_0xcfb7('0x56')){_0x21174b=_0x133636+'.mp4';_0x290938=_0xaab4b0+a22_0xcfb7('0x55');}console['log'](a22_0xcfb7('0x57'));console[a22_0xcfb7('0x38')](_0x4d0f69);console[a22_0xcfb7('0x38')](_0x57c207);console[a22_0xcfb7('0x38')](_0x21174b);console[a22_0xcfb7('0x38')](_0x290938);console[a22_0xcfb7('0x38')](_0x133636);console['log'](_0xaab4b0);console['log'](a22_0xcfb7('0x57'));if(fsExtra['existsSync'](this[a22_0xcfb7('0x15')]+_0x21174b)){this[a22_0xcfb7('0x58')](this[a22_0xcfb7('0x15')]+_0x21174b)['then'](function(_0x3fa2ed){if(_0x3fa2ed){this[a22_0xcfb7('0x1c')]++;}else{this[a22_0xcfb7('0x1d')]=!![];}this[a22_0xcfb7('0x47')]();}[a22_0xcfb7('0x3b')](this));}else if(fsExtra[a22_0xcfb7('0x4b')](this[a22_0xcfb7('0x1a')]+_0x21174b)){this[a22_0xcfb7('0x58')](this[a22_0xcfb7('0x1a')]+_0x21174b)[a22_0xcfb7('0x4')](function(_0x279cac){if(_0x279cac){fsExtra[a22_0xcfb7('0x59')](this[a22_0xcfb7('0x1a')]+_0x21174b,this[a22_0xcfb7('0x15')]+_0x21174b);this['currentFile']++;}else{this[a22_0xcfb7('0x1d')]=!![];}this[a22_0xcfb7('0x47')]();}[a22_0xcfb7('0x3b')](this));}else{console[a22_0xcfb7('0x38')](a22_0xcfb7('0x5a')+_0x290938);this[a22_0xcfb7('0x1d')]=!![];if(_0x57c207=='youtube_single'){this[a22_0xcfb7('0x5b')](_0x4d0f69);}else{this[a22_0xcfb7('0x5c')](_0x290938,_0x21174b,_0x57c207);}}}[a22_0xcfb7('0x58')](_0x4b27fc){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x5d')+_0x4b27fc);const _0x631a54=yield mediainfo(_0x4b27fc)[a22_0xcfb7('0x3a')](_0x1b0cf1=>console[a22_0xcfb7('0x38')](_0x1b0cf1));const _0x432759=_0x631a54[a22_0xcfb7('0x5e')]['track'][a22_0xcfb7('0x46')]>0x1&&_0x631a54[a22_0xcfb7('0x5e')][a22_0xcfb7('0x5f')][0x1]['@type']==a22_0xcfb7('0x60');if(!_0x432759){fsExtra[a22_0xcfb7('0x49')](_0x4b27fc);}console[a22_0xcfb7('0x38')](a22_0xcfb7('0x61')+_0x432759);return _0x432759;});}['downloader'](_0x342c3d,_0x3b7e94,_0xee1b9a){const _0x119b4a=new Downloader();console['log'](_0x342c3d);console[a22_0xcfb7('0x38')](_0x3b7e94);console[a22_0xcfb7('0x38')](_0xee1b9a);const _0x4f6fef=_0x119b4a['download'](_0x342c3d,this[a22_0xcfb7('0x15')]+_0x3b7e94);urlExists(_0x342c3d,function(_0x2595ff,_0x20607c){if(_0x20607c){if(this['failDownloadFiles'][a22_0xcfb7('0x62')](this[a22_0xcfb7('0x1c')])){const _0x14e059=this[a22_0xcfb7('0x1e')][a22_0xcfb7('0x63')](this['currentFile']);if(_0x14e059>-0x1){this[a22_0xcfb7('0x1e')][a22_0xcfb7('0x64')](_0x14e059,0x1);}}console['log'](a22_0xcfb7('0x65')+_0x342c3d);_0x4f6fef[a22_0xcfb7('0x66')]();}else{if(!this[a22_0xcfb7('0x1e')][a22_0xcfb7('0x62')](this[a22_0xcfb7('0x1c')])){this[a22_0xcfb7('0x1e')][a22_0xcfb7('0x67')](this[a22_0xcfb7('0x1c')]);}console[a22_0xcfb7('0x38')](a22_0xcfb7('0x68')+_0x342c3d);this['currentFile']++;this[a22_0xcfb7('0x47')]();}}['bind'](this));_0x4f6fef['on'](a22_0xcfb7('0x66'),function(_0x4f6fef){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x69')+_0x342c3d);});_0x4f6fef['on'](a22_0xcfb7('0x6a'),function(_0x4f6fef){console['log'](a22_0xcfb7('0x6b'));this[a22_0xcfb7('0x47')]();}[a22_0xcfb7('0x3b')](this));_0x4f6fef['on']('end',function(_0x4f6fef){console[a22_0xcfb7('0x38')]('end');console['log'](a22_0xcfb7('0x6c')+_0x3b7e94);console['log'](a22_0xcfb7('0x6d')+_0xee1b9a);this[a22_0xcfb7('0x58')](this[a22_0xcfb7('0x15')]+_0x3b7e94)[a22_0xcfb7('0x4')](function(_0x19c5b6){if(_0x19c5b6){this[a22_0xcfb7('0x1c')]++;}this['download']();}[a22_0xcfb7('0x3b')](this));}[a22_0xcfb7('0x3b')](this));_0x4f6fef['on'](a22_0xcfb7('0x6e'),function(_0x4f6fef){console['log']('stopped');});_0x4f6fef['on']('destroyed',function(_0x4f6fef){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x6f'));});_0x4f6fef['on'](a22_0xcfb7('0x70'),function(_0x4f6fef){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x70'));});}[a22_0xcfb7('0x71')](_0x38b4d0,_0x34fc64,_0x1f96c5,_0x3c512b){console['log'](a22_0xcfb7('0x71'));console[a22_0xcfb7('0x38')](_0x38b4d0);const _0x317bb8=!![];let _0x314a8a=0x0;const _0x31a449='';console['log'](a22_0xcfb7('0x72')+_0x38b4d0+a22_0xcfb7('0x73')+_0x34fc64);if(_0x314a8a){if(_0x314a8a>0x5){_0x3c512b(a22_0xcfb7('0x74'),_0x38b4d0,_0x1f96c5,null);return;}}else{_0x314a8a=0x0;}const _0x1af366=this[a22_0xcfb7('0x15')]+_0x34fc64;let _0x1371c3;if(_0x3c512b===undefined){console['log']('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x38b4d0+'\x20to\x20'+_0x1af366);_0x3c512b=function(_0x193b32,_0x3f227a){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x75'),_0x193b32,_0x3f227a);};}http[a22_0xcfb7('0x76')][a22_0xcfb7('0x77')]=0x64;const _0x110c3f={'host':url[a22_0xcfb7('0x26')](_0x38b4d0)['host'],'port':0x50,'path':url[a22_0xcfb7('0x26')](_0x38b4d0)[a22_0xcfb7('0x78')],'agent':![]};const _0x5e336c=http['get'](_0x110c3f,function(_0x133884){let _0x234bcb=0x0;let _0x5a96b6=0x0;function _0x16e849(){if(_0x234bcb===undefined){console[a22_0xcfb7('0x38')](_0x34fc64+'\x20Progress:\x20unknown\x09'+_0x5a96b6+'/'+'?');}const _0x4d3bf8=_0x5a96b6/_0x234bcb*0x64;console['log'](_0x34fc64+a22_0xcfb7('0x79')+_0x4d3bf8+'%\x09'+_0x5a96b6+'/'+_0x234bcb);}console[a22_0xcfb7('0x38')](_0x34fc64+'\x20'+_0x133884[a22_0xcfb7('0x7a')]);switch(_0x133884['statusCode']){case 0xc8:_0x234bcb=_0x133884[a22_0xcfb7('0x7b')]['content-length']||_0x31a449;fs[a22_0xcfb7('0x7c')](_0x1af366,function(_0x13004f,_0x1698ef){if(!_0x13004f){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x7d')+_0x1af366);if(_0x1698ef[a22_0xcfb7('0x7e')]==_0x234bcb){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x7f')+_0x234bcb+')');console[a22_0xcfb7('0x38')](a22_0xcfb7('0x80'));}else{console[a22_0xcfb7('0x38')](a22_0xcfb7('0x81')+_0x1698ef[a22_0xcfb7('0x7e')]+a22_0xcfb7('0x82')+_0x234bcb+')');}}_0x1371c3=fs[a22_0xcfb7('0x83')](_0x1af366);_0x133884[a22_0xcfb7('0x84')](_0x1371c3);_0x133884['on']('data',function(_0x418f19){_0x5a96b6+=_0x418f19['length'];_0x16e849();});_0x5e336c['on'](a22_0xcfb7('0x6a'),function(_0x13004f){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x85'));console[a22_0xcfb7('0x38')](_0x13004f);});_0x1371c3['on'](a22_0xcfb7('0x86'),function(){console['log'](a22_0xcfb7('0x87')+_0x38b4d0+a22_0xcfb7('0x73')+_0x34fc64);_0x3c512b(null,_0x34fc64,_0x1f96c5,_0x34fc64);}[a22_0xcfb7('0x3b')](this));});break;case 0x12e:const _0x2f0ce1=_0x133884['headers'][a22_0xcfb7('0x88')];console[a22_0xcfb7('0x38')](a22_0xcfb7('0x89')+_0x38b4d0+a22_0xcfb7('0x73')+_0x2f0ce1);if(_0x314a8a<0x5){this[a22_0xcfb7('0x71')](_0x2f0ce1,_0x34fc64,_0x3c512b,_0x314a8a++);}else{console[a22_0xcfb7('0x6a')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x38b4d0+'.');_0x3c512b(a22_0xcfb7('0x8a'),null,null,null);}return;case 0x194:console[a22_0xcfb7('0x38')](a22_0xcfb7('0x8b')+_0x38b4d0);default:console[a22_0xcfb7('0x38')](a22_0xcfb7('0x8c')+_0x38b4d0+a22_0xcfb7('0x8d')+_0x133884[a22_0xcfb7('0x7a')]);_0x5e336c[a22_0xcfb7('0x8e')]();_0x3c512b(_0x133884['statusCode'],null,null,null);return;}})['on'](a22_0xcfb7('0x6a'),function(_0x42f3f8){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x8f')+_0x38b4d0+'\x20'+_0x42f3f8[a22_0xcfb7('0x90')]);_0x3c512b(_0x42f3f8,null,null,null);});}[a22_0xcfb7('0x91')](_0x4c4888,_0x2fe475,_0x1b4faf,_0x457500){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x91'));console['log'](_0x4c4888);console[a22_0xcfb7('0x38')](_0x2fe475);console[a22_0xcfb7('0x38')](_0x1b4faf);console[a22_0xcfb7('0x38')](_0x457500);if(_0x1b4faf==a22_0xcfb7('0x56')){const _0x454125=this[a22_0xcfb7('0x44')][this[a22_0xcfb7('0x1c')]][a22_0xcfb7('0x92')]!=null?this[a22_0xcfb7('0x44')][this['currentFile']][a22_0xcfb7('0x92')]:0x1e;this['createImageVideo'](_0x457500,_0x454125);}else if(_0x1b4faf=='video'){if(_0x4c4888==null&&_0x2fe475!=''){this[a22_0xcfb7('0x1c')]++;}this[a22_0xcfb7('0x47')]();}console[a22_0xcfb7('0x38')](this['currentFile']);}['downloadRequestFile'](_0x30c30e,_0x3b727e,_0x5e21d1){progress(request(_0x30c30e),{})['on'](a22_0xcfb7('0x93'),function(_0x2043fa){console[a22_0xcfb7('0x38')](_0x2043fa);})['on']('error',function(_0x466aad){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x94'));this[a22_0xcfb7('0x47')]();})['on']('end',function(){console[a22_0xcfb7('0x38')](a22_0xcfb7('0x6c')+_0x3b727e);console['log'](a22_0xcfb7('0x6d')+_0x5e21d1);if(_0x5e21d1=='image'){const _0x21e37f=this[a22_0xcfb7('0x44')][this[a22_0xcfb7('0x1c')]][a22_0xcfb7('0x92')]!=null?this[a22_0xcfb7('0x44')][this[a22_0xcfb7('0x1c')]]['duration']:0x1e;this[a22_0xcfb7('0x95')](_0x3b727e,_0x21e37f);}else if(_0x5e21d1==a22_0xcfb7('0x96')){this[a22_0xcfb7('0x1c')]++;this[a22_0xcfb7('0x47')]();}}['bind'](this))['pipe'](fs['createWriteStream'](this[a22_0xcfb7('0x15')]+_0x3b727e));}['createImageVideo'](_0x31441f,_0x1fc06a=0x1e){const _0x5f021b=this['tempFolder']+_0x31441f;console[a22_0xcfb7('0x38')](_0x5f021b);console[a22_0xcfb7('0x38')](_0x31441f);const _0x3c7963=_0x31441f[a22_0xcfb7('0x52')]('.')[a22_0xcfb7('0x97')](0x0,-0x1)['join']('.');const _0x25bd81=a22_0xcfb7('0x98');const _0x47630e=['-y','-r',a22_0xcfb7('0x99'),a22_0xcfb7('0x9a'),'1',a22_0xcfb7('0x9b'),a22_0xcfb7('0x9c'),'-i',_0x5f021b,'-t',String(_0x1fc06a),a22_0xcfb7('0x9d'),a22_0xcfb7('0x9e'),a22_0xcfb7('0x9f'),'yuv420p','-r','25',a22_0xcfb7('0xa0'),'scale=1920:1080',this[a22_0xcfb7('0x15')]+_0x3c7963+a22_0xcfb7('0x55')];const _0x5bee4a=spawn(_0x25bd81,_0x47630e);_0x5bee4a[a22_0xcfb7('0xa1')]['on'](a22_0xcfb7('0xa2'),function(_0x582819){console['log'](a22_0xcfb7('0xa3')+_0x5f021b);});_0x5bee4a[a22_0xcfb7('0xa4')]['on'](a22_0xcfb7('0xa2'),function(_0x40016b){console[a22_0xcfb7('0x38')](a22_0xcfb7('0xa5')+_0x40016b);}['bind'](this));_0x5bee4a['on'](a22_0xcfb7('0xa6'),function(){console[a22_0xcfb7('0x38')](a22_0xcfb7('0xa7'));this[a22_0xcfb7('0x1c')]++;this[a22_0xcfb7('0x47')]();}[a22_0xcfb7('0x3b')](this));}[a22_0xcfb7('0x5b')](_0x46a2e6){const _0x3dddb5=this[a22_0xcfb7('0x15')]+'/'+_0x46a2e6+a22_0xcfb7('0x55');const _0x1f6923=youtubedl(a22_0xcfb7('0xa8')+_0x46a2e6,[a22_0xcfb7('0xa9')],{'cwd':__dirname});_0x1f6923['on']('info',function(_0x21ce01){console['log'](a22_0xcfb7('0xaa'));console[a22_0xcfb7('0x38')](a22_0xcfb7('0xab')+_0x21ce01[a22_0xcfb7('0xac')]);console[a22_0xcfb7('0x38')]('size:\x20'+_0x21ce01[a22_0xcfb7('0x7e')]);});_0x1f6923['on'](a22_0xcfb7('0xad'),function complete(_0x3c0303){'use strict';console['log'](a22_0xcfb7('0xab')+_0x3c0303[a22_0xcfb7('0xac')]+'\x20already\x20downloaded.');});_0x1f6923['on'](a22_0xcfb7('0xae'),function(){console[a22_0xcfb7('0x38')]('finished\x20youtube\x20downloading!');this[a22_0xcfb7('0x58')](_0x3dddb5)['then'](function(_0x449b2c){if(_0x449b2c){this[a22_0xcfb7('0x1c')]++;}this[a22_0xcfb7('0x47')]();}[a22_0xcfb7('0x3b')](this));}[a22_0xcfb7('0x3b')](this));_0x1f6923[a22_0xcfb7('0x84')](fs[a22_0xcfb7('0x83')](_0x3dddb5));}['finishProcess'](){console[a22_0xcfb7('0x38')]('Finishing');if(this[a22_0xcfb7('0x1d')]){if(this['failDownloadFiles'][a22_0xcfb7('0x46')]==0x0){fs[a22_0xcfb7('0x3c')](this['playListFile'],JSON[a22_0xcfb7('0x34')](this['newPlayList']));let _0x2b5f74='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0xcfb7('0xaf')+'\x0d\x0a';for(const _0x360bc8 in this[a22_0xcfb7('0x44')]){const _0x29dad5=this[a22_0xcfb7('0x44')][_0x360bc8][a22_0xcfb7('0x4f')];const _0xcbf43c=this[a22_0xcfb7('0x44')][_0x360bc8][a22_0xcfb7('0x50')];const _0x46f530=_0x29dad5[a22_0xcfb7('0x51')](_0x29dad5[a22_0xcfb7('0xb0')]('/')+0x1);let _0x2842ea=_0x46f530['split']('.')[a22_0xcfb7('0x97')](0x0,-0x1)[a22_0xcfb7('0x53')]('.');if(_0xcbf43c==a22_0xcfb7('0x54')){_0x2842ea=_0x29dad5;}_0x2b5f74+=a22_0xcfb7('0xb1')+_0x2842ea+a22_0xcfb7('0x55')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0xcfb7('0x1a')]);fsExtra[a22_0xcfb7('0x59')](this[a22_0xcfb7('0x15')],this[a22_0xcfb7('0x1a')]);fsExtra[a22_0xcfb7('0x3c')](this[a22_0xcfb7('0x19')],_0x2b5f74);fsExtra[a22_0xcfb7('0xb2')](this[a22_0xcfb7('0x15')]);console[a22_0xcfb7('0x38')](a22_0xcfb7('0xb3'));const _0x413e09=spawn('shutdown',['-r',a22_0xcfb7('0xb4')]);}else{console[a22_0xcfb7('0x38')](a22_0xcfb7('0xb5'));this[a22_0xcfb7('0x1c')]=0x0;setTimeout(function(){this[a22_0xcfb7('0x47')]();}[a22_0xcfb7('0x3b')](this),0x1388);}}else{console['log']('No\x20playlist\x20changes.');}}}exports[a22_0xcfb7('0xb6')]=SyncPlaylistsService;