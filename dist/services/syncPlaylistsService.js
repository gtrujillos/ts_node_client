var a23_0x3001=['baseURL','env','WEB_SERVICE_URL','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','kodiPassword','checkDependencies','registerClient','checkFolders','loadMediaList','bind','stringify','deviceUuid','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','catch','writeFileSync','getStatus','log','player','getCurrentlyPlayingVideo','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','tempFolder','loadMediaList:\x20','emptyDirSync','downloadFiles','failDownloadFiles','push','length','download','reloadMediaList','forceReload','existsSync','removeSync','hasPlayListChanged','this.currentFile:\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','checkVideo','copySync','downloader','media','track','@type','Video','mediainfo\x20check:','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','location','Redirect\x20','downloadHTTPFile','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','1/2','-loop','glob','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','_filename','size:\x20','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','Playlist.Clear','Playlist.Cleared','jsonrpcClient','Playlist.Added','Player.Open','kodiCommandClient','RestartApp()','reboot','updateSettings','rss','header_active','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','result:\x20%j','rssfeeds','feed','Builder','xml:\x20%j','RefreshRSS()','lookandfeel.enablerssfeeds','enableClock','Settings.SetSettingValue','videoplayer.usedisplayasclock','enableClock:\x20','2.0','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','value','then','apply','defineProperty','./playerService','http','request','spawn','child_process','exec','is-image','string-template','uuid/v4','context.json','url-exists','node-kodi','mt-files-downloader','media/','mediaFolder','temp/','filesFolder','files/','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','newPlayList','kodiHost','kodiUser','lulo','.lulo123.','httpClientService','PlayerService','init','parse','readFileSync','context','playerId','config'];(function(_0x2db55c,_0x12f5fd){var _0x21aa23=function(_0x427bb9){while(--_0x427bb9){_0x2db55c['push'](_0x2db55c['shift']());}};_0x21aa23(++_0x12f5fd);}(a23_0x3001,0x196));var a23_0x543d=function(_0x21c062,_0x140bf9){_0x21c062=_0x21c062-0x0;var _0x5e2f4a=a23_0x3001[_0x21c062];return _0x5e2f4a;};'use strict';var __awaiter=this&&this[a23_0x543d('0x0')]||function(_0x3438d2,_0x337d97,_0x3f8849,_0x47f407){function _0x2ef88a(_0x1f1915){return _0x1f1915 instanceof _0x3f8849?_0x1f1915:new _0x3f8849(function(_0x310cf0){_0x310cf0(_0x1f1915);});}return new(_0x3f8849||(_0x3f8849=Promise))(function(_0x3f4c62,_0x3a518e){function _0x224ae4(_0x5c1d32){try{_0x23b1c4(_0x47f407[a23_0x543d('0x1')](_0x5c1d32));}catch(_0x2f2ddb){_0x3a518e(_0x2f2ddb);}}function _0x976ff5(_0x7fde8f){try{_0x23b1c4(_0x47f407[a23_0x543d('0x2')](_0x7fde8f));}catch(_0x8c6062){_0x3a518e(_0x8c6062);}}function _0x23b1c4(_0x3d30cc){_0x3d30cc['done']?_0x3f4c62(_0x3d30cc[a23_0x543d('0x3')]):_0x2ef88a(_0x3d30cc[a23_0x543d('0x3')])[a23_0x543d('0x4')](_0x224ae4,_0x976ff5);}_0x23b1c4((_0x47f407=_0x47f407[a23_0x543d('0x5')](_0x3438d2,_0x337d97||[]))[a23_0x543d('0x1')]());});};Object[a23_0x543d('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a23_0x543d('0x7'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require('url');const http=require(a23_0x543d('0x8'));const fsExtra=require('fs-extra');const request=require(a23_0x543d('0x9'));const progress=require('request-progress');const spawn=require('child_process')[a23_0x543d('0xa')];const exec=require(a23_0x543d('0xb'))[a23_0x543d('0xc')];const isImage=require(a23_0x543d('0xd'));const format=require(a23_0x543d('0xe'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a23_0x543d('0xf'));const configFile='config.json';const contextFile=a23_0x543d('0x10');const urlExists=require(a23_0x543d('0x11'));const kodi_rpc=require(a23_0x543d('0x12'));const Downloader=require(a23_0x543d('0x13'));class SyncPlaylistsService{constructor(){this['mediaFolder']=a23_0x543d('0x14');this['tempFolder']=this[a23_0x543d('0x15')]+a23_0x543d('0x16');this[a23_0x543d('0x17')]=this[a23_0x543d('0x15')]+a23_0x543d('0x18');this[a23_0x543d('0x19')]=this[a23_0x543d('0x15')]+a23_0x543d('0x1a');this[a23_0x543d('0x1b')]=this[a23_0x543d('0x17')]+a23_0x543d('0x1c');this[a23_0x543d('0x1d')]=0x0;this[a23_0x543d('0x1e')]=![];this['downloadFiles']=[];this['failDownloadFiles']=[];this[a23_0x543d('0x1f')]={};this[a23_0x543d('0x20')]='http://localhost';this[a23_0x543d('0x21')]=a23_0x543d('0x22');this['kodiPassword']=a23_0x543d('0x23');this['forceReload']=![];this[a23_0x543d('0x24')]=new HttpClientService_1['HttpClientService']();this['playerService']=new playerService_1[(a23_0x543d('0x25'))]();}[a23_0x543d('0x26')](){this['config']=JSON[a23_0x543d('0x27')](fs[a23_0x543d('0x28')](configFile));this[a23_0x543d('0x29')]=JSON['parse'](fs[a23_0x543d('0x28')](contextFile));this[a23_0x543d('0x2a')]=this[a23_0x543d('0x2b')][a23_0x543d('0x2a')];this[a23_0x543d('0x2c')]=process[a23_0x543d('0x2d')][a23_0x543d('0x2e')]+'deploy/';this[a23_0x543d('0x2f')]=this[a23_0x543d('0x2c')]+a23_0x543d('0x30');this[a23_0x543d('0x31')]=this[a23_0x543d('0x2c')]+a23_0x543d('0x32');this[a23_0x543d('0x33')]=new kodi_rpc({'url':this['kodiHost'],'user':this['kodiUser'],'password':this[a23_0x543d('0x34')]});this[a23_0x543d('0x35')]();this[a23_0x543d('0x36')]();this[a23_0x543d('0x37')]();this[a23_0x543d('0x38')]();setInterval(function(){this['getStatus']();}[a23_0x543d('0x39')](this),0x2710);setInterval(function(){this['registerClient']();}[a23_0x543d('0x39')](this),0x493e0);}['checkDependencies'](){}[a23_0x543d('0x36')](){this[a23_0x543d('0x33')]['playlist']['getItems'](0x1)[a23_0x543d('0x4')](function(_0x5a18e6){const _0x5b21c4=JSON[a23_0x543d('0x3a')](_0x5a18e6);const _0x4d2c9c={'player_id':this[a23_0x543d('0x2a')],'device_uuid':this[a23_0x543d('0x2b')][a23_0x543d('0x3b')],'network_info':JSON[a23_0x543d('0x3a')](os[a23_0x543d('0x3c')]()),'firmware_info':JSON[a23_0x543d('0x3a')](this['context']),'playlist':_0x5b21c4,'playing_item':'','status':0x0};this['httpClientService'][a23_0x543d('0x3d')](a23_0x543d('0x3e'),_0x4d2c9c,![])[a23_0x543d('0x4')](function(_0x471932){console['log'](a23_0x543d('0x3f')+Date());})[a23_0x543d('0x40')](function(_0x4c3721){});console['log'](_0x4d2c9c);}[a23_0x543d('0x39')](this));const _0x40d5d6=this[a23_0x543d('0x2b')][a23_0x543d('0x3b')];if(!_0x40d5d6||_0x40d5d6==''){this[a23_0x543d('0x2b')][a23_0x543d('0x3b')]=uuidv4();this[a23_0x543d('0x2b')]={'deviceUuid':this[a23_0x543d('0x2b')][a23_0x543d('0x3b')],'playerId':this[a23_0x543d('0x2b')][a23_0x543d('0x2a')]};fs[a23_0x543d('0x41')](configFile,JSON[a23_0x543d('0x3a')](this['config']));}}[a23_0x543d('0x42')](){console[a23_0x543d('0x43')](a23_0x543d('0x42'));this[a23_0x543d('0x33')][a23_0x543d('0x44')][a23_0x543d('0x45')]()[a23_0x543d('0x4')](function(_0xa70816){const _0x48aaec=_0xa70816[a23_0x543d('0x46')][a23_0x543d('0x47')];this[a23_0x543d('0x48')](_0x48aaec);}['bind'](this))[a23_0x543d('0x40')](function(_0x2aa7b0){console[a23_0x543d('0x43')](_0x2aa7b0);this[a23_0x543d('0x48')](_0x2aa7b0);}['bind'](this));}['reportStatus'](_0xf1f807){console[a23_0x543d('0x43')](a23_0x543d('0x49')+_0xf1f807);const _0x5b4237={'player_id':this[a23_0x543d('0x2a')],'device_uuid':this[a23_0x543d('0x2b')][a23_0x543d('0x3b')],'status':_0xf1f807!=''&&_0xf1f807!=null?0x1:0x0,'playing_item':_0xf1f807};this[a23_0x543d('0x24')][a23_0x543d('0x3d')](a23_0x543d('0x4a'),_0x5b4237,![])[a23_0x543d('0x4')](function(_0x55a4ca){console[a23_0x543d('0x43')](a23_0x543d('0x4b')+Date());})[a23_0x543d('0x40')](function(_0x5ebc58){});}['checkFolders'](){fsExtra['ensureDir'](this[a23_0x543d('0x15')],_0x34f46f=>{});fsExtra[a23_0x543d('0x4c')](this[a23_0x543d('0x4d')],_0x8c1f40=>{});fsExtra[a23_0x543d('0x4c')](this[a23_0x543d('0x17')],_0x1cd6cd=>{});}[a23_0x543d('0x38')](){const _0x4de5dc=format(this[a23_0x543d('0x2f')],this[a23_0x543d('0x2a')]);console['log'](_0x4de5dc);request({'url':_0x4de5dc,'json':!![]},function(_0x36c2d3,_0x327003,_0x59a8fc){console[a23_0x543d('0x43')](a23_0x543d('0x4e'));this[a23_0x543d('0x1f')]=_0x59a8fc;this[a23_0x543d('0x1e')]=this['hasPlayListChanged']();fsExtra[a23_0x543d('0x4f')](this['tempFolder']);this[a23_0x543d('0x50')]=[];this[a23_0x543d('0x51')]=[];this[a23_0x543d('0x1d')]=0x0;for(const _0x2e6370 in _0x59a8fc){this[a23_0x543d('0x50')][a23_0x543d('0x52')](_0x59a8fc[_0x2e6370]);}console[a23_0x543d('0x43')]('Total:\x20'+this['downloadFiles'][a23_0x543d('0x53')]);if(this[a23_0x543d('0x50')][a23_0x543d('0x53')]>0x0){this[a23_0x543d('0x54')]();}}[a23_0x543d('0x39')](this));}[a23_0x543d('0x55')](){this[a23_0x543d('0x56')]=!![];if(fsExtra['existsSync'](this['tempFolder'])){fsExtra[a23_0x543d('0x4f')](this[a23_0x543d('0x4d')]);}if(fsExtra[a23_0x543d('0x57')](this[a23_0x543d('0x17')])){fsExtra[a23_0x543d('0x4f')](this[a23_0x543d('0x17')]);}if(!fsExtra[a23_0x543d('0x57')](this[a23_0x543d('0x19')])){fsExtra['removeSync'](this[a23_0x543d('0x19')]);}if(!fsExtra[a23_0x543d('0x57')](this[a23_0x543d('0x1b')])){fsExtra[a23_0x543d('0x58')](this['m3uFile']);}this['loadMediaList']();}[a23_0x543d('0x59')](){const _0x14ef87=JSON['stringify'](this[a23_0x543d('0x1f')]);try{if(!fsExtra[a23_0x543d('0x57')](this[a23_0x543d('0x19')])){return!![];}else{const _0x1e4a87=fsExtra[a23_0x543d('0x28')](this['playListFile'])['toString']();if(_0x1e4a87!=_0x14ef87){return!![];}}}catch(_0x26e8bb){console[a23_0x543d('0x43')](_0x26e8bb);}return![];}[a23_0x543d('0x54')](){console[a23_0x543d('0x43')](a23_0x543d('0x5a')+this[a23_0x543d('0x1d')]+'\x20of\x20'+this[a23_0x543d('0x50')]['length']);if(this[a23_0x543d('0x1d')]>=this['downloadFiles'][a23_0x543d('0x53')]){this[a23_0x543d('0x5b')]();return;}const _0x163e2=String(this[a23_0x543d('0x50')][this[a23_0x543d('0x1d')]][a23_0x543d('0x5c')]);const _0x3e1a98=this['downloadFiles'][this[a23_0x543d('0x1d')]][a23_0x543d('0x5d')];let _0x25801e=_0x163e2[a23_0x543d('0x5e')](_0x163e2[a23_0x543d('0x5f')]('/')+0x1);const _0x26d304=_0x25801e[a23_0x543d('0x60')]('.')['slice'](0x0,-0x1)['join']('.');let _0x2292cd=this[a23_0x543d('0x2c')]+_0x163e2;const _0x139415=_0x2292cd['split']('.')[a23_0x543d('0x61')](0x0,-0x1)[a23_0x543d('0x62')]('.');if(_0x3e1a98==a23_0x543d('0x63')){_0x25801e=_0x25801e+a23_0x543d('0x64');}else if(_0x3e1a98=='image'){_0x25801e=_0x26d304+a23_0x543d('0x64');_0x2292cd=_0x139415+a23_0x543d('0x64');}console[a23_0x543d('0x43')]('**********+');console[a23_0x543d('0x43')](_0x163e2);console[a23_0x543d('0x43')](_0x3e1a98);console[a23_0x543d('0x43')](_0x25801e);console[a23_0x543d('0x43')](_0x2292cd);console[a23_0x543d('0x43')](_0x26d304);console['log'](_0x139415);console[a23_0x543d('0x43')](a23_0x543d('0x65'));if(fsExtra[a23_0x543d('0x57')](this['tempFolder']+_0x25801e)){this['checkVideo'](this['tempFolder']+_0x25801e)[a23_0x543d('0x4')](function(_0x3bc1b7){if(_0x3bc1b7){this[a23_0x543d('0x1d')]++;}else{this['playlistChanged']=!![];}this[a23_0x543d('0x54')]();}[a23_0x543d('0x39')](this));}else if(fsExtra[a23_0x543d('0x57')](this['filesFolder']+_0x25801e)){this[a23_0x543d('0x66')](this['filesFolder']+_0x25801e)['then'](function(_0x49d8a5){if(_0x49d8a5){fsExtra[a23_0x543d('0x67')](this[a23_0x543d('0x17')]+_0x25801e,this[a23_0x543d('0x4d')]+_0x25801e);this[a23_0x543d('0x1d')]++;}else{this[a23_0x543d('0x1e')]=!![];}this[a23_0x543d('0x54')]();}[a23_0x543d('0x39')](this));}else{console['log']('Downloading:\x20'+_0x2292cd);this[a23_0x543d('0x1e')]=!![];if(_0x3e1a98==a23_0x543d('0x63')){this['downloadYouTube'](_0x163e2);}else{this[a23_0x543d('0x68')](_0x2292cd,_0x25801e,_0x3e1a98);}}}[a23_0x543d('0x66')](_0x3fc8f1){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0x543d('0x43')]('videoFile:\x20'+_0x3fc8f1);const _0x46eda7=yield mediainfo(_0x3fc8f1)[a23_0x543d('0x40')](_0x2fb5fb=>{console[a23_0x543d('0x43')](_0x2fb5fb);fsExtra[a23_0x543d('0x58')](_0x3fc8f1);return![];});const _0x30fcc9=_0x46eda7[a23_0x543d('0x69')]['track']['length']>0x1&&_0x46eda7[a23_0x543d('0x69')][a23_0x543d('0x6a')][0x1][a23_0x543d('0x6b')]==a23_0x543d('0x6c');if(!_0x30fcc9){fsExtra['removeSync'](_0x3fc8f1);}console[a23_0x543d('0x43')](a23_0x543d('0x6d')+_0x30fcc9);return _0x30fcc9;});}['downloader'](_0x1e0b84,_0x526c68,_0x524242){const _0x25c603=new Downloader();console[a23_0x543d('0x43')](_0x1e0b84);console['log'](_0x526c68);console[a23_0x543d('0x43')](_0x524242);const _0x384454=_0x25c603['download'](_0x1e0b84,this[a23_0x543d('0x4d')]+_0x526c68);urlExists(_0x1e0b84,function(_0x112e04,_0x26f1c4){if(_0x26f1c4){if(this[a23_0x543d('0x51')]['includes'](this['currentFile'])){const _0x2351c8=this[a23_0x543d('0x51')]['indexOf'](this[a23_0x543d('0x1d')]);if(_0x2351c8>-0x1){this[a23_0x543d('0x51')][a23_0x543d('0x6e')](_0x2351c8,0x1);}}console['log'](a23_0x543d('0x6f')+_0x1e0b84);_0x384454[a23_0x543d('0x70')]();}else{if(!this[a23_0x543d('0x51')]['includes'](this[a23_0x543d('0x1d')])){this[a23_0x543d('0x51')]['push'](this['currentFile']);}console[a23_0x543d('0x43')](a23_0x543d('0x71')+_0x1e0b84);this[a23_0x543d('0x1d')]++;this[a23_0x543d('0x54')]();}}[a23_0x543d('0x39')](this));_0x384454['on']('start',function(_0x384454){console[a23_0x543d('0x43')](a23_0x543d('0x72')+_0x1e0b84);});_0x384454['on'](a23_0x543d('0x73'),function(_0x384454){console['log'](a23_0x543d('0x74'));this[a23_0x543d('0x54')]();}[a23_0x543d('0x39')](this));_0x384454['on'](a23_0x543d('0x75'),function(_0x384454){console[a23_0x543d('0x43')](a23_0x543d('0x75'));console[a23_0x543d('0x43')](a23_0x543d('0x76')+_0x526c68);console['log'](a23_0x543d('0x77')+_0x524242);this['checkVideo'](this['tempFolder']+_0x526c68)[a23_0x543d('0x4')](function(_0x4269aa){if(_0x4269aa){this[a23_0x543d('0x1d')]++;}this[a23_0x543d('0x54')]();}[a23_0x543d('0x39')](this));}[a23_0x543d('0x39')](this));_0x384454['on'](a23_0x543d('0x78'),function(_0x384454){console[a23_0x543d('0x43')](a23_0x543d('0x78'));});_0x384454['on'](a23_0x543d('0x79'),function(_0x384454){console[a23_0x543d('0x43')](a23_0x543d('0x79'));});_0x384454['on'](a23_0x543d('0x7a'),function(_0x384454){console['log']('retry');});}['downloadHTTPFile'](_0x1f4669,_0x1ca85d,_0x5c0982,_0x56bb63){console[a23_0x543d('0x43')]('downloadHTTPFile');console[a23_0x543d('0x43')](_0x1f4669);const _0x7a5294=!![];let _0xa6eff=0x0;const _0x33b85f='';console[a23_0x543d('0x43')]('Attempting\x20to\x20download\x20'+_0x1f4669+a23_0x543d('0x7b')+_0x1ca85d);if(_0xa6eff){if(_0xa6eff>0x5){_0x56bb63(a23_0x543d('0x7c'),_0x1f4669,_0x5c0982,null);return;}}else{_0xa6eff=0x0;}const _0x16663b=this[a23_0x543d('0x4d')]+_0x1ca85d;let _0x202d32;if(_0x56bb63===undefined){console['log'](a23_0x543d('0x7d')+_0x1f4669+a23_0x543d('0x7b')+_0x16663b);_0x56bb63=function(_0x2fe0a8,_0x224779){console[a23_0x543d('0x43')](a23_0x543d('0x7e'),_0x2fe0a8,_0x224779);};}http['globalAgent']['maxSockets']=0x64;const _0x34c321={'host':url['parse'](_0x1f4669)[a23_0x543d('0x7f')],'port':0x50,'path':url['parse'](_0x1f4669)[a23_0x543d('0x80')],'agent':![]};const _0x1e5485=http[a23_0x543d('0x81')](_0x34c321,function(_0x3cc555){let _0x52f26f=0x0;let _0x2f74dc=0x0;function _0x359230(){if(_0x52f26f===undefined){console[a23_0x543d('0x43')](_0x1ca85d+a23_0x543d('0x82')+_0x2f74dc+'/'+'?');}const _0xe64ecb=_0x2f74dc/_0x52f26f*0x64;console[a23_0x543d('0x43')](_0x1ca85d+a23_0x543d('0x83')+_0xe64ecb+'%\x09'+_0x2f74dc+'/'+_0x52f26f);}console[a23_0x543d('0x43')](_0x1ca85d+'\x20'+_0x3cc555[a23_0x543d('0x84')]);switch(_0x3cc555['statusCode']){case 0xc8:_0x52f26f=_0x3cc555[a23_0x543d('0x85')]['content-length']||_0x33b85f;fs[a23_0x543d('0x86')](_0x16663b,function(_0x1d1df1,_0x35cc8f){if(!_0x1d1df1){console[a23_0x543d('0x43')](a23_0x543d('0x87')+_0x16663b);if(_0x35cc8f[a23_0x543d('0x88')]==_0x52f26f){console[a23_0x543d('0x43')](a23_0x543d('0x89')+_0x52f26f+')');console[a23_0x543d('0x43')](a23_0x543d('0x8a'));}else{console[a23_0x543d('0x43')](a23_0x543d('0x8b')+_0x35cc8f[a23_0x543d('0x88')]+a23_0x543d('0x8c')+_0x52f26f+')');}}_0x202d32=fs[a23_0x543d('0x8d')](_0x16663b);_0x3cc555[a23_0x543d('0x8e')](_0x202d32);_0x3cc555['on'](a23_0x543d('0x8f'),function(_0x43ce4c){_0x2f74dc+=_0x43ce4c[a23_0x543d('0x53')];_0x359230();});_0x1e5485['on'](a23_0x543d('0x73'),function(_0x1d1df1){console[a23_0x543d('0x43')](a23_0x543d('0x90'));console[a23_0x543d('0x43')](_0x1d1df1);});_0x202d32['on'](a23_0x543d('0x91'),function(){console[a23_0x543d('0x43')](a23_0x543d('0x92')+_0x1f4669+a23_0x543d('0x7b')+_0x1ca85d);_0x56bb63(null,_0x1ca85d,_0x5c0982,_0x1ca85d);}[a23_0x543d('0x39')](this));});break;case 0x12e:const _0x1a9af6=_0x3cc555['headers'][a23_0x543d('0x93')];console[a23_0x543d('0x43')](a23_0x543d('0x94')+_0x1f4669+a23_0x543d('0x7b')+_0x1a9af6);if(_0xa6eff<0x5){this[a23_0x543d('0x95')](_0x1a9af6,_0x1ca85d,_0x56bb63,_0xa6eff++);}else{console[a23_0x543d('0x73')](a23_0x543d('0x96')+_0x1f4669+'.');_0x56bb63(a23_0x543d('0x97'),null,null,null);}return;case 0x194:console[a23_0x543d('0x43')](a23_0x543d('0x98')+_0x1f4669);default:console[a23_0x543d('0x43')](a23_0x543d('0x99')+_0x1f4669+a23_0x543d('0x9a')+_0x3cc555[a23_0x543d('0x84')]);_0x1e5485[a23_0x543d('0x9b')]();_0x56bb63(_0x3cc555[a23_0x543d('0x84')],null,null,null);return;}})['on']('error',function(_0x5d7a4a){console[a23_0x543d('0x43')](a23_0x543d('0x9c')+_0x1f4669+'\x20'+_0x5d7a4a[a23_0x543d('0x9d')]);_0x56bb63(_0x5d7a4a,null,null,null);});}[a23_0x543d('0x9e')](_0x34ebc2,_0x31e13d,_0x452ff8,_0x52a372){console[a23_0x543d('0x43')]('downloadHTTPFileCallback');console[a23_0x543d('0x43')](_0x34ebc2);console['log'](_0x31e13d);console['log'](_0x452ff8);console[a23_0x543d('0x43')](_0x52a372);if(_0x452ff8==a23_0x543d('0x9f')){const _0x1eae87=this[a23_0x543d('0x50')][this['currentFile']][a23_0x543d('0xa0')]!=null?this[a23_0x543d('0x50')][this[a23_0x543d('0x1d')]][a23_0x543d('0xa0')]:0x1e;this[a23_0x543d('0xa1')](_0x52a372,_0x1eae87);}else if(_0x452ff8==a23_0x543d('0xa2')){if(_0x34ebc2==null&&_0x31e13d!=''){this[a23_0x543d('0x1d')]++;}this['download']();}console[a23_0x543d('0x43')](this[a23_0x543d('0x1d')]);}[a23_0x543d('0xa3')](_0x58e60b,_0x2bc3e0,_0x18c15a){progress(request(_0x58e60b),{})['on'](a23_0x543d('0xa4'),function(_0x350edd){console[a23_0x543d('0x43')](_0x350edd);})['on'](a23_0x543d('0x73'),function(_0x482378){console['log'](a23_0x543d('0xa5'));this[a23_0x543d('0x54')]();})['on'](a23_0x543d('0x75'),function(){console[a23_0x543d('0x43')](a23_0x543d('0x76')+_0x2bc3e0);console[a23_0x543d('0x43')]('mediaType:\x20'+_0x18c15a);if(_0x18c15a=='image'){const _0x14586f=this['downloadFiles'][this['currentFile']][a23_0x543d('0xa0')]!=null?this[a23_0x543d('0x50')][this[a23_0x543d('0x1d')]][a23_0x543d('0xa0')]:0x1e;this[a23_0x543d('0xa1')](_0x2bc3e0,_0x14586f);}else if(_0x18c15a=='video'){this[a23_0x543d('0x1d')]++;this['download']();}}[a23_0x543d('0x39')](this))['pipe'](fs[a23_0x543d('0x8d')](this[a23_0x543d('0x4d')]+_0x2bc3e0));}[a23_0x543d('0xa1')](_0x57c61c,_0x1c75ef=0x1e){const _0x55634f=this[a23_0x543d('0x4d')]+_0x57c61c;console[a23_0x543d('0x43')](_0x55634f);console['log'](_0x57c61c);const _0x7d0138=_0x57c61c[a23_0x543d('0x60')]('.')[a23_0x543d('0x61')](0x0,-0x1)[a23_0x543d('0x62')]('.');const _0x1393f8='ffmpeg';const _0x28b01d=['-y','-r',a23_0x543d('0xa6'),a23_0x543d('0xa7'),'1','-pattern_type',a23_0x543d('0xa8'),'-i',_0x55634f,'-t',String(_0x1c75ef),'-c:v',a23_0x543d('0xa9'),a23_0x543d('0xaa'),a23_0x543d('0xab'),'-r','25',a23_0x543d('0xac'),a23_0x543d('0xad'),this['tempFolder']+_0x7d0138+'.mp4'];const _0x1da61b=spawn(_0x1393f8,_0x28b01d);_0x1da61b['stdout']['on'](a23_0x543d('0x8f'),function(_0x596251){console[a23_0x543d('0x43')](a23_0x543d('0xae')+_0x55634f);});_0x1da61b['stderr']['on'](a23_0x543d('0x8f'),function(_0x2b395f){console['log'](a23_0x543d('0xaf')+_0x2b395f);}['bind'](this));_0x1da61b['on'](a23_0x543d('0xb0'),function(){console[a23_0x543d('0x43')](a23_0x543d('0xb1'));this['currentFile']++;this[a23_0x543d('0x54')]();}[a23_0x543d('0x39')](this));}[a23_0x543d('0xb2')](_0x1922bc){const _0x495599=this[a23_0x543d('0x4d')]+'/'+_0x1922bc+a23_0x543d('0x64');const _0x25bfa0=youtubedl(a23_0x543d('0xb3')+_0x1922bc,[a23_0x543d('0xb4')],{'cwd':__dirname});_0x25bfa0['on'](a23_0x543d('0xb5'),function(_0x42102f){console[a23_0x543d('0x43')](a23_0x543d('0xb6'));console['log']('filename:\x20'+_0x42102f[a23_0x543d('0xb7')]);console['log'](a23_0x543d('0xb8')+_0x42102f[a23_0x543d('0x88')]);});_0x25bfa0['on'](a23_0x543d('0xb9'),function complete(_0xdc4377){'use strict';console['log'](a23_0x543d('0xba')+_0xdc4377['_filename']+a23_0x543d('0xbb'));});_0x25bfa0['on'](a23_0x543d('0x75'),function(){console[a23_0x543d('0x43')](a23_0x543d('0xbc'));this[a23_0x543d('0x66')](_0x495599)[a23_0x543d('0x4')](function(_0xc13e5e){if(_0xc13e5e){this['currentFile']++;}this[a23_0x543d('0x54')]();}[a23_0x543d('0x39')](this));}[a23_0x543d('0x39')](this));_0x25bfa0[a23_0x543d('0x8e')](fs['createWriteStream'](_0x495599));}['finishProcess'](){console[a23_0x543d('0x43')]('Finishing');if(this[a23_0x543d('0x1e')]){if(this[a23_0x543d('0x51')]['length']==0x0){fs[a23_0x543d('0x41')](this[a23_0x543d('0x19')],JSON['stringify'](this[a23_0x543d('0x1f')]));let _0x3f0c45='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a23_0x543d('0xbd')+'\x0d\x0a';for(const _0x4106ff in this[a23_0x543d('0x50')]){const _0x36837e=this['downloadFiles'][_0x4106ff]['path'];const _0x49e494=this[a23_0x543d('0x50')][_0x4106ff][a23_0x543d('0x5d')];const _0x53aa4b=_0x36837e[a23_0x543d('0x5e')](_0x36837e['lastIndexOf']('/')+0x1);let _0xad54ff=_0x53aa4b['split']('.')['slice'](0x0,-0x1)['join']('.');if(_0x49e494=='youtube_single'){_0xad54ff=_0x36837e;}_0x3f0c45+=a23_0x543d('0xbe')+_0xad54ff+a23_0x543d('0x64')+'\x0d\x0a';}fsExtra[a23_0x543d('0x4f')](this['filesFolder']);fsExtra[a23_0x543d('0x67')](this[a23_0x543d('0x4d')],this[a23_0x543d('0x17')]);fsExtra[a23_0x543d('0x41')](this[a23_0x543d('0x1b')],_0x3f0c45);fsExtra[a23_0x543d('0x4f')](this['tempFolder']);console[a23_0x543d('0x43')](a23_0x543d('0xbf'));this[a23_0x543d('0xc0')]();}else{console[a23_0x543d('0x43')](a23_0x543d('0xc1'));this[a23_0x543d('0x1d')]=0x0;setTimeout(function(){this['download']();}[a23_0x543d('0x39')](this),0x1388);}}else{console[a23_0x543d('0x43')](a23_0x543d('0xc2'));}}[a23_0x543d('0xc0')](){this['jsonrpcClient'](a23_0x543d('0xc3'),{'playlistid':0x1},function(_0x3f59b5){console[a23_0x543d('0x43')](a23_0x543d('0xc4'));console[a23_0x543d('0x43')](_0x3f59b5);this[a23_0x543d('0xc5')]('Playlist.Add',{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x3f59b5){console[a23_0x543d('0x43')](a23_0x543d('0xc6'));console[a23_0x543d('0x43')](_0x3f59b5);this[a23_0x543d('0xc5')](a23_0x543d('0xc7'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x3f59b5){console[a23_0x543d('0x43')]('Playlist.Opened');console[a23_0x543d('0x43')](_0x3f59b5);if(this[a23_0x543d('0x56')]){this[a23_0x543d('0x56')]=![];this[a23_0x543d('0xc8')](a23_0x543d('0xc9'));}}[a23_0x543d('0x39')](this));}[a23_0x543d('0x39')](this));}[a23_0x543d('0x39')](this));}[a23_0x543d('0xca')](){exec(a23_0x543d('0xca'),function(_0xe94413){console[a23_0x543d('0x43')](_0xe94413);});}[a23_0x543d('0xcb')](){const _0x1654db=format(this[a23_0x543d('0x31')],this[a23_0x543d('0x2a')]);console[a23_0x543d('0x43')](_0x1654db);request({'url':_0x1654db,'json':!![]},function(_0x53b8a4,_0x382374,_0x19e2d9){if(_0x19e2d9['length']>0x0){const _0x4797a6=_0x19e2d9[0x0];const _0x19607c=_0x4797a6[a23_0x543d('0xcc')];const _0x2daea0=_0x4797a6[a23_0x543d('0xcd')]==0x1;this[a23_0x543d('0xce')](_0x19607c);this['enableClock'](_0x2daea0);}console[a23_0x543d('0x43')](_0x19e2d9);}[a23_0x543d('0x39')](this));}[a23_0x543d('0xce')](_0x494da3){const _0x4dde83=_0x494da3!=null&&_0x494da3!='';const _0x2589f8=a23_0x543d('0xcf');const _0x1e4978=fsExtra['readFileSync'](_0x2589f8);console['log'](a23_0x543d('0xd0')+_0x1e4978);const _0x457b9e=require(a23_0x543d('0xd1'));const _0x107491=_0x457b9e[a23_0x543d('0xd2')];_0x107491(_0x1e4978,function(_0x414257,_0x5f3ae6){console[a23_0x543d('0x43')]('err:\x20%j',_0x414257);console['log'](a23_0x543d('0xd3'),_0x5f3ae6);if(!_0x494da3||_0x494da3==null||_0x494da3==''){_0x494da3='none';}_0x5f3ae6[a23_0x543d('0xd4')]['set'][0x0][a23_0x543d('0xd5')][0x0]['_']=_0x494da3;const _0x21d8de=new _0x457b9e[(a23_0x543d('0xd6'))]();const _0x2fce79=_0x21d8de['buildObject'](_0x5f3ae6);console['log'](a23_0x543d('0xd7'),_0x2fce79);fsExtra['writeFileSync'](_0x2589f8,_0x2fce79);});this[a23_0x543d('0xc8')](a23_0x543d('0xd8'));this[a23_0x543d('0xc5')]('Settings.SetSettingValue',{'setting':a23_0x543d('0xd9'),'value':_0x4dde83},function(_0x22c166){console['log']('setRss:');console[a23_0x543d('0x43')](_0x22c166);}['bind'](this));}[a23_0x543d('0xda')](_0x1906ec){this[a23_0x543d('0xc5')](a23_0x543d('0xdb'),{'setting':a23_0x543d('0xdc'),'value':_0x1906ec},function(_0x553b8c){console[a23_0x543d('0x43')](a23_0x543d('0xdd'));console[a23_0x543d('0x43')](_0x553b8c);}['bind'](this));}[a23_0x543d('0xc8')](_0x5b2fe7){exec('kodi-send\x20--action=\x22'+_0x5b2fe7+'\x22',function(_0x5a23c8){console[a23_0x543d('0x43')](_0x5a23c8);});}['jsonrpcClient'](_0x269587,_0xa80277,_0x39fed5){const _0x2b58ae={'jsonrpc':a23_0x543d('0xde'),'method':_0x269587,'params':_0xa80277,'id':0x1};this[a23_0x543d('0x24')][a23_0x543d('0x3d')](this[a23_0x543d('0x20')]+a23_0x543d('0xdf'),_0x2b58ae,![],{'user':this[a23_0x543d('0x21')],'pass':this[a23_0x543d('0x34')]})[a23_0x543d('0x4')](function(_0x2c79fc){_0x39fed5(_0x2c79fc);})[a23_0x543d('0x40')](function(_0x3dde35){});}}exports[a23_0x543d('0xe0')]=SyncPlaylistsService;