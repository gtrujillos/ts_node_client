var a23_0x2826=['filename:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','writeFileSync','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','media_type','lastIndexOf','/home/osmc/luloclient/media/files/','Refreshing..','Playlist\x20incomplete,\x20retry.','Playlist.Clear','Playlist.Cleared','jsonrpcClient','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','Rebooting','/sbin/reboot','rss','header_active','setRss','enableClock','/home/osmc/.kodi/userdata/RssFeeds.xml','xml2js','parseString','err:\x20%j','result:\x20%j','rssfeeds','set','feed','Builder','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','enableClock:\x20','kodi-send\x20--action=\x22','2.0','SyncPlaylistsService','next','throw','done','value','then','defineProperty','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','spawn','exec','is-image','uuid/v4','config.json','context.json','node-kodi','mt-files-downloader','mediaFolder','media/','filesFolder','playListFile','playlist.txt','lulo_playlist.m3u','currentFile','playlistChanged','failDownloadFiles','newPlayList','kodiHost','kodiUser','lulo','kodiPassword','forceReload','httpClientService','HttpClientService','PlayerService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','deviceUuid','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','item','label','reportStatus','catch','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','tempFolder','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','downloadFiles','push','length','download','reloadMediaList','existsSync','removeSync','m3uFile','\x20of\x20','finishProcess','path','substring','split','slice','join','.mp4','image','**********+','checkVideo','copySync','youtube_single','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','mediaType:\x20','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','createWriteStream','pipe','data','finish','headers','Redirect\x20limit\x20encountered\x20for\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','video','downloadRequestFile','progress','Downloaded:\x20','createImageVideo','ffmpeg','1/2','-loop','-pattern_type','-c:v','libx264','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','--format=18','Download\x20started','size:\x20','complete'];(function(_0x155435,_0x23e136){var _0x120d7f=function(_0x2ae9f7){while(--_0x2ae9f7){_0x155435['push'](_0x155435['shift']());}};_0x120d7f(++_0x23e136);}(a23_0x2826,0x10b));var a23_0x30a6=function(_0x378431,_0x19355c){_0x378431=_0x378431-0x0;var _0x3db4f1=a23_0x2826[_0x378431];return _0x3db4f1;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x509899,_0x2a2176,_0x2c184b,_0x15bd2d){function _0x1f4b16(_0x4894d6){return _0x4894d6 instanceof _0x2c184b?_0x4894d6:new _0x2c184b(function(_0x584fa0){_0x584fa0(_0x4894d6);});}return new(_0x2c184b||(_0x2c184b=Promise))(function(_0x211533,_0x476c90){function _0x37b40f(_0x28f4d9){try{_0x324339(_0x15bd2d[a23_0x30a6('0x0')](_0x28f4d9));}catch(_0x261904){_0x476c90(_0x261904);}}function _0x2950ce(_0x285e25){try{_0x324339(_0x15bd2d[a23_0x30a6('0x1')](_0x285e25));}catch(_0x388cfa){_0x476c90(_0x388cfa);}}function _0x324339(_0x2854e2){_0x2854e2[a23_0x30a6('0x2')]?_0x211533(_0x2854e2[a23_0x30a6('0x3')]):_0x1f4b16(_0x2854e2['value'])[a23_0x30a6('0x4')](_0x37b40f,_0x2950ce);}_0x324339((_0x15bd2d=_0x15bd2d['apply'](_0x509899,_0x2a2176||[]))[a23_0x30a6('0x0')]());});};Object[a23_0x30a6('0x5')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a23_0x30a6('0x6'));const playerService_1=require(a23_0x30a6('0x7'));const mediainfo=require(a23_0x30a6('0x8'));const fs=require('fs');const url=require(a23_0x30a6('0x9'));const http=require(a23_0x30a6('0xa'));const fsExtra=require(a23_0x30a6('0xb'));const request=require(a23_0x30a6('0xc'));const progress=require(a23_0x30a6('0xd'));const spawn=require(a23_0x30a6('0xe'))[a23_0x30a6('0xf')];const exec=require('child_process')[a23_0x30a6('0x10')];const isImage=require(a23_0x30a6('0x11'));const format=require('string-template');const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a23_0x30a6('0x12'));const configFile=a23_0x30a6('0x13');const contextFile=a23_0x30a6('0x14');const urlExists=require('url-exists');const kodi_rpc=require(a23_0x30a6('0x15'));const Downloader=require(a23_0x30a6('0x16'));class SyncPlaylistsService{constructor(){this[a23_0x30a6('0x17')]=a23_0x30a6('0x18');this['tempFolder']=this['mediaFolder']+'temp/';this[a23_0x30a6('0x19')]=this[a23_0x30a6('0x17')]+'files/';this[a23_0x30a6('0x1a')]=this[a23_0x30a6('0x17')]+a23_0x30a6('0x1b');this['m3uFile']=this[a23_0x30a6('0x19')]+a23_0x30a6('0x1c');this[a23_0x30a6('0x1d')]=0x0;this[a23_0x30a6('0x1e')]=![];this['downloadFiles']=[];this[a23_0x30a6('0x1f')]=[];this[a23_0x30a6('0x20')]={};this[a23_0x30a6('0x21')]='http://localhost';this[a23_0x30a6('0x22')]=a23_0x30a6('0x23');this[a23_0x30a6('0x24')]='.lulo123.';this[a23_0x30a6('0x25')]=![];this[a23_0x30a6('0x26')]=new HttpClientService_1[(a23_0x30a6('0x27'))]();this['playerService']=new playerService_1[(a23_0x30a6('0x28'))]();}[a23_0x30a6('0x29')](){this[a23_0x30a6('0x2a')]=JSON[a23_0x30a6('0x2b')](fs[a23_0x30a6('0x2c')](configFile));this[a23_0x30a6('0x2d')]=JSON['parse'](fs[a23_0x30a6('0x2c')](contextFile));this['playerId']=this[a23_0x30a6('0x2a')][a23_0x30a6('0x2e')];this[a23_0x30a6('0x2f')]=process['env'][a23_0x30a6('0x30')]+a23_0x30a6('0x31');this[a23_0x30a6('0x32')]=this['baseURL']+a23_0x30a6('0x33');this[a23_0x30a6('0x34')]=this[a23_0x30a6('0x2f')]+'api/player.php?player_id={0}';this[a23_0x30a6('0x35')]=new kodi_rpc({'url':this[a23_0x30a6('0x21')],'user':this[a23_0x30a6('0x22')],'password':this[a23_0x30a6('0x24')]});this[a23_0x30a6('0x36')]();this[a23_0x30a6('0x37')]();this[a23_0x30a6('0x38')]();this[a23_0x30a6('0x39')]();setInterval(function(){this[a23_0x30a6('0x3a')]();}[a23_0x30a6('0x3b')](this),0x2710);setInterval(function(){this['registerClient']();}[a23_0x30a6('0x3b')](this),0x493e0);}['checkDependencies'](){}[a23_0x30a6('0x37')](){this[a23_0x30a6('0x35')]['playlist']['getItems'](0x1)[a23_0x30a6('0x4')](function(_0x36ce94){const _0x32fa62=JSON['stringify'](_0x36ce94);const _0x1972e1={'player_id':this['playerId'],'device_uuid':this[a23_0x30a6('0x2a')][a23_0x30a6('0x3c')],'network_info':JSON[a23_0x30a6('0x3d')](os[a23_0x30a6('0x3e')]()),'firmware_info':JSON[a23_0x30a6('0x3d')](this[a23_0x30a6('0x2d')]),'playlist':_0x32fa62,'playing_item':'','status':0x0};this[a23_0x30a6('0x26')][a23_0x30a6('0x3f')](a23_0x30a6('0x40'),_0x1972e1,![])[a23_0x30a6('0x4')](function(_0x292085){console[a23_0x30a6('0x41')]('register\x20response:\x20'+Date());})['catch'](function(_0x5f0742){});console[a23_0x30a6('0x41')](_0x1972e1);}[a23_0x30a6('0x3b')](this));const _0x15f2ec=this[a23_0x30a6('0x2a')][a23_0x30a6('0x3c')];if(!_0x15f2ec||_0x15f2ec==''){this[a23_0x30a6('0x2a')][a23_0x30a6('0x3c')]=uuidv4();this[a23_0x30a6('0x2a')]={'deviceUuid':this[a23_0x30a6('0x2a')][a23_0x30a6('0x3c')],'playerId':this[a23_0x30a6('0x2a')]['playerId']};fs['writeFileSync'](configFile,JSON['stringify'](this['config']));}}[a23_0x30a6('0x3a')](){console[a23_0x30a6('0x41')](a23_0x30a6('0x3a'));this[a23_0x30a6('0x35')]['player']['getCurrentlyPlayingVideo']()['then'](function(_0x4df90b){const _0xc41644=_0x4df90b[a23_0x30a6('0x42')][a23_0x30a6('0x43')];this[a23_0x30a6('0x44')](_0xc41644);}[a23_0x30a6('0x3b')](this))[a23_0x30a6('0x45')](function(_0x1b0b48){console[a23_0x30a6('0x41')](_0x1b0b48);this[a23_0x30a6('0x44')](_0x1b0b48);}[a23_0x30a6('0x3b')](this));}[a23_0x30a6('0x44')](_0x592d77){console[a23_0x30a6('0x41')](a23_0x30a6('0x46')+_0x592d77);const _0x2fb978={'player_id':this[a23_0x30a6('0x2e')],'device_uuid':this[a23_0x30a6('0x2a')][a23_0x30a6('0x3c')],'status':_0x592d77!=''&&_0x592d77!=null?0x1:0x0,'playing_item':_0x592d77};this[a23_0x30a6('0x26')]['post'](a23_0x30a6('0x47'),_0x2fb978,![])[a23_0x30a6('0x4')](function(_0x26ab39){console['log'](a23_0x30a6('0x48')+Date());})['catch'](function(_0x1c7a0e){});}[a23_0x30a6('0x38')](){fsExtra[a23_0x30a6('0x49')](this[a23_0x30a6('0x17')],_0x200931=>{});fsExtra['ensureDir'](this[a23_0x30a6('0x4a')],_0x5d1c8e=>{});fsExtra[a23_0x30a6('0x49')](this[a23_0x30a6('0x19')],_0x97f4ad=>{});}[a23_0x30a6('0x39')](){const _0x2b1921=format(this[a23_0x30a6('0x32')],this[a23_0x30a6('0x2e')]);console['log'](_0x2b1921);request({'url':_0x2b1921,'json':!![]},function(_0x9d2ac4,_0x6bc5d0,_0x5b52ca){console[a23_0x30a6('0x41')](a23_0x30a6('0x4b'));this['newPlayList']=_0x5b52ca;this[a23_0x30a6('0x1e')]=this[a23_0x30a6('0x4c')]();fsExtra[a23_0x30a6('0x4d')](this[a23_0x30a6('0x4a')]);this[a23_0x30a6('0x4e')]=[];this[a23_0x30a6('0x1f')]=[];this[a23_0x30a6('0x1d')]=0x0;for(const _0x2ee121 in _0x5b52ca){this[a23_0x30a6('0x4e')][a23_0x30a6('0x4f')](_0x5b52ca[_0x2ee121]);}console[a23_0x30a6('0x41')]('Total:\x20'+this[a23_0x30a6('0x4e')][a23_0x30a6('0x50')]);if(this['downloadFiles'][a23_0x30a6('0x50')]>0x0){this[a23_0x30a6('0x51')]();}}[a23_0x30a6('0x3b')](this));}[a23_0x30a6('0x52')](){this[a23_0x30a6('0x25')]=!![];if(fsExtra[a23_0x30a6('0x53')](this[a23_0x30a6('0x4a')])){fsExtra[a23_0x30a6('0x4d')](this['tempFolder']);}if(fsExtra[a23_0x30a6('0x53')](this[a23_0x30a6('0x19')])){fsExtra['emptyDirSync'](this[a23_0x30a6('0x19')]);}if(!fsExtra[a23_0x30a6('0x53')](this[a23_0x30a6('0x1a')])){fsExtra[a23_0x30a6('0x54')](this[a23_0x30a6('0x1a')]);}if(!fsExtra[a23_0x30a6('0x53')](this[a23_0x30a6('0x55')])){fsExtra[a23_0x30a6('0x54')](this[a23_0x30a6('0x55')]);}this['loadMediaList']();}[a23_0x30a6('0x4c')](){const _0x427e47=JSON[a23_0x30a6('0x3d')](this['newPlayList']);try{if(!fsExtra[a23_0x30a6('0x53')](this[a23_0x30a6('0x1a')])){return!![];}else{const _0x293d3f=fsExtra[a23_0x30a6('0x2c')](this[a23_0x30a6('0x1a')])['toString']();if(_0x293d3f!=_0x427e47){return!![];}}}catch(_0x3be39b){console[a23_0x30a6('0x41')](_0x3be39b);}return![];}[a23_0x30a6('0x51')](){console[a23_0x30a6('0x41')]('this.currentFile:\x20'+this['currentFile']+a23_0x30a6('0x56')+this[a23_0x30a6('0x4e')][a23_0x30a6('0x50')]);if(this[a23_0x30a6('0x1d')]>=this[a23_0x30a6('0x4e')][a23_0x30a6('0x50')]){this[a23_0x30a6('0x57')]();return;}const _0x2217af=String(this['downloadFiles'][this[a23_0x30a6('0x1d')]][a23_0x30a6('0x58')]);const _0x2f844d=this[a23_0x30a6('0x4e')][this[a23_0x30a6('0x1d')]]['media_type'];let _0x1a46a6=_0x2217af[a23_0x30a6('0x59')](_0x2217af['lastIndexOf']('/')+0x1);const _0x5249c6=_0x1a46a6[a23_0x30a6('0x5a')]('.')[a23_0x30a6('0x5b')](0x0,-0x1)[a23_0x30a6('0x5c')]('.');let _0x2205eb=this[a23_0x30a6('0x2f')]+_0x2217af;const _0x232fac=_0x2205eb[a23_0x30a6('0x5a')]('.')[a23_0x30a6('0x5b')](0x0,-0x1)[a23_0x30a6('0x5c')]('.');if(_0x2f844d=='youtube_single'){_0x1a46a6=_0x1a46a6+a23_0x30a6('0x5d');}else if(_0x2f844d==a23_0x30a6('0x5e')){_0x1a46a6=_0x5249c6+a23_0x30a6('0x5d');_0x2205eb=_0x232fac+'.mp4';}console['log']('**********+');console[a23_0x30a6('0x41')](_0x2217af);console['log'](_0x2f844d);console['log'](_0x1a46a6);console[a23_0x30a6('0x41')](_0x2205eb);console[a23_0x30a6('0x41')](_0x5249c6);console[a23_0x30a6('0x41')](_0x232fac);console[a23_0x30a6('0x41')](a23_0x30a6('0x5f'));if(fsExtra['existsSync'](this['tempFolder']+_0x1a46a6)){this['checkVideo'](this[a23_0x30a6('0x4a')]+_0x1a46a6)[a23_0x30a6('0x4')](function(_0x22c69c){if(_0x22c69c){this[a23_0x30a6('0x1d')]++;}else{this[a23_0x30a6('0x1e')]=!![];}this[a23_0x30a6('0x51')]();}['bind'](this));}else if(fsExtra['existsSync'](this['filesFolder']+_0x1a46a6)){this[a23_0x30a6('0x60')](this[a23_0x30a6('0x19')]+_0x1a46a6)[a23_0x30a6('0x4')](function(_0x3861f3){if(_0x3861f3){fsExtra[a23_0x30a6('0x61')](this[a23_0x30a6('0x19')]+_0x1a46a6,this['tempFolder']+_0x1a46a6);this[a23_0x30a6('0x1d')]++;}else{this[a23_0x30a6('0x1e')]=!![];}this['download']();}[a23_0x30a6('0x3b')](this));}else{console[a23_0x30a6('0x41')]('Downloading:\x20'+_0x2205eb);this[a23_0x30a6('0x1e')]=!![];if(_0x2f844d==a23_0x30a6('0x62')){this[a23_0x30a6('0x63')](_0x2217af);}else{this[a23_0x30a6('0x64')](_0x2205eb,_0x1a46a6,_0x2f844d);}}}[a23_0x30a6('0x60')](_0x3dc411){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0x30a6('0x41')](a23_0x30a6('0x65')+_0x3dc411);const _0x111e3e=yield mediainfo(_0x3dc411)[a23_0x30a6('0x45')](_0x503045=>{console[a23_0x30a6('0x41')](_0x503045);fsExtra[a23_0x30a6('0x54')](_0x3dc411);return![];});const _0x55cfb5=_0x111e3e[a23_0x30a6('0x66')][a23_0x30a6('0x67')][a23_0x30a6('0x50')]>0x1&&_0x111e3e[a23_0x30a6('0x66')][a23_0x30a6('0x67')][0x1][a23_0x30a6('0x68')]==a23_0x30a6('0x69');if(!_0x55cfb5){fsExtra[a23_0x30a6('0x54')](_0x3dc411);}console[a23_0x30a6('0x41')](a23_0x30a6('0x6a')+_0x55cfb5);return _0x55cfb5;});}[a23_0x30a6('0x64')](_0x4a8584,_0x3da394,_0x5f21a2){const _0x2a7e5f=new Downloader();console[a23_0x30a6('0x41')](_0x4a8584);console['log'](_0x3da394);console['log'](_0x5f21a2);const _0x5dd029=_0x2a7e5f[a23_0x30a6('0x51')](_0x4a8584,this[a23_0x30a6('0x4a')]+_0x3da394);urlExists(_0x4a8584,function(_0x580b8e,_0x5e75cd){if(_0x5e75cd){if(this[a23_0x30a6('0x1f')][a23_0x30a6('0x6b')](this[a23_0x30a6('0x1d')])){const _0x399983=this[a23_0x30a6('0x1f')][a23_0x30a6('0x6c')](this[a23_0x30a6('0x1d')]);if(_0x399983>-0x1){this[a23_0x30a6('0x1f')][a23_0x30a6('0x6d')](_0x399983,0x1);}}console[a23_0x30a6('0x41')](a23_0x30a6('0x6e')+_0x4a8584);_0x5dd029[a23_0x30a6('0x6f')]();}else{if(!this[a23_0x30a6('0x1f')]['includes'](this['currentFile'])){this[a23_0x30a6('0x1f')][a23_0x30a6('0x4f')](this[a23_0x30a6('0x1d')]);}console[a23_0x30a6('0x41')](a23_0x30a6('0x70')+_0x4a8584);this[a23_0x30a6('0x1d')]++;this[a23_0x30a6('0x51')]();}}['bind'](this));_0x5dd029['on'](a23_0x30a6('0x6f'),function(_0x5dd029){console[a23_0x30a6('0x41')](a23_0x30a6('0x71')+_0x4a8584);});_0x5dd029['on'](a23_0x30a6('0x72'),function(_0x5dd029){console['log'](a23_0x30a6('0x73'));this['download']();}[a23_0x30a6('0x3b')](this));_0x5dd029['on']('end',function(_0x5dd029){console['log'](a23_0x30a6('0x74'));console[a23_0x30a6('0x41')]('Downloaded:\x20'+_0x3da394);console[a23_0x30a6('0x41')](a23_0x30a6('0x75')+_0x5f21a2);this[a23_0x30a6('0x60')](this['tempFolder']+_0x3da394)[a23_0x30a6('0x4')](function(_0x2aa148){if(_0x2aa148){this[a23_0x30a6('0x1d')]++;}this[a23_0x30a6('0x51')]();}[a23_0x30a6('0x3b')](this));}['bind'](this));_0x5dd029['on']('stopped',function(_0x5dd029){console['log']('stopped');});_0x5dd029['on']('destroyed',function(_0x5dd029){console['log']('destroyed');});_0x5dd029['on']('retry',function(_0x5dd029){console['log'](a23_0x30a6('0x76'));});}[a23_0x30a6('0x77')](_0x209c47,_0x394f6f,_0x1f349e,_0x4ff6e9){console[a23_0x30a6('0x41')](a23_0x30a6('0x77'));console[a23_0x30a6('0x41')](_0x209c47);const _0x473a05=!![];let _0x2edcff=0x0;const _0x151cb9='';console[a23_0x30a6('0x41')]('Attempting\x20to\x20download\x20'+_0x209c47+a23_0x30a6('0x78')+_0x394f6f);if(_0x2edcff){if(_0x2edcff>0x5){_0x4ff6e9(a23_0x30a6('0x79'),_0x209c47,_0x1f349e,null);return;}}else{_0x2edcff=0x0;}const _0x36a086=this[a23_0x30a6('0x4a')]+_0x394f6f;let _0x5ef6d9;if(_0x4ff6e9===undefined){console[a23_0x30a6('0x41')](a23_0x30a6('0x7a')+_0x209c47+'\x20to\x20'+_0x36a086);_0x4ff6e9=function(_0x5f0b06,_0x571e96){console[a23_0x30a6('0x41')](a23_0x30a6('0x7b'),_0x5f0b06,_0x571e96);};}http['globalAgent'][a23_0x30a6('0x7c')]=0x64;const _0x2075f6={'host':url[a23_0x30a6('0x2b')](_0x209c47)[a23_0x30a6('0x7d')],'port':0x50,'path':url['parse'](_0x209c47)[a23_0x30a6('0x7e')],'agent':![]};const _0x4c4647=http[a23_0x30a6('0x7f')](_0x2075f6,function(_0x34871){let _0x219f0a=0x0;let _0x5b0c83=0x0;function _0x411934(){if(_0x219f0a===undefined){console[a23_0x30a6('0x41')](_0x394f6f+a23_0x30a6('0x80')+_0x5b0c83+'/'+'?');}const _0x3588eb=_0x5b0c83/_0x219f0a*0x64;console[a23_0x30a6('0x41')](_0x394f6f+a23_0x30a6('0x81')+_0x3588eb+'%\x09'+_0x5b0c83+'/'+_0x219f0a);}console['log'](_0x394f6f+'\x20'+_0x34871[a23_0x30a6('0x82')]);switch(_0x34871['statusCode']){case 0xc8:_0x219f0a=_0x34871['headers'][a23_0x30a6('0x83')]||_0x151cb9;fs[a23_0x30a6('0x84')](_0x36a086,function(_0x2dd567,_0x2a42d0){if(!_0x2dd567){console[a23_0x30a6('0x41')](a23_0x30a6('0x85')+_0x36a086);if(_0x2a42d0[a23_0x30a6('0x86')]==_0x219f0a){console[a23_0x30a6('0x41')](a23_0x30a6('0x87')+_0x219f0a+')');console[a23_0x30a6('0x41')](a23_0x30a6('0x88'));}else{console[a23_0x30a6('0x41')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x2a42d0[a23_0x30a6('0x86')]+a23_0x30a6('0x89')+_0x219f0a+')');}}_0x5ef6d9=fs[a23_0x30a6('0x8a')](_0x36a086);_0x34871[a23_0x30a6('0x8b')](_0x5ef6d9);_0x34871['on'](a23_0x30a6('0x8c'),function(_0x3e5f70){_0x5b0c83+=_0x3e5f70['length'];_0x411934();});_0x4c4647['on'](a23_0x30a6('0x72'),function(_0x2dd567){console[a23_0x30a6('0x41')]('err:\x20');console['log'](_0x2dd567);});_0x5ef6d9['on'](a23_0x30a6('0x8d'),function(){console[a23_0x30a6('0x41')]('Downloaded\x20'+_0x209c47+'\x20to\x20'+_0x394f6f);_0x4ff6e9(null,_0x394f6f,_0x1f349e,_0x394f6f);}[a23_0x30a6('0x3b')](this));});break;case 0x12e:const _0x5cca18=_0x34871[a23_0x30a6('0x8e')]['location'];console['log']('Redirect\x20'+_0x209c47+a23_0x30a6('0x78')+_0x5cca18);if(_0x2edcff<0x5){this[a23_0x30a6('0x77')](_0x5cca18,_0x394f6f,_0x4ff6e9,_0x2edcff++);}else{console[a23_0x30a6('0x72')](a23_0x30a6('0x8f')+_0x209c47+'.');_0x4ff6e9('302',null,null,null);}return;case 0x194:console['log']('File\x20Not\x20Found\x20'+_0x209c47);default:console[a23_0x30a6('0x41')](a23_0x30a6('0x90')+_0x209c47+a23_0x30a6('0x91')+_0x34871[a23_0x30a6('0x82')]);_0x4c4647[a23_0x30a6('0x92')]();_0x4ff6e9(_0x34871[a23_0x30a6('0x82')],null,null,null);return;}})['on'](a23_0x30a6('0x72'),function(_0x338789){console[a23_0x30a6('0x41')](a23_0x30a6('0x93')+_0x209c47+'\x20'+_0x338789[a23_0x30a6('0x94')]);_0x4ff6e9(_0x338789,null,null,null);});}['downloadHTTPFileCallback'](_0xa59862,_0x2ac5f1,_0x4ca54e,_0x4998dd){console[a23_0x30a6('0x41')](a23_0x30a6('0x95'));console['log'](_0xa59862);console[a23_0x30a6('0x41')](_0x2ac5f1);console[a23_0x30a6('0x41')](_0x4ca54e);console['log'](_0x4998dd);if(_0x4ca54e==a23_0x30a6('0x5e')){const _0x1a9f90=this[a23_0x30a6('0x4e')][this['currentFile']][a23_0x30a6('0x96')]!=null?this['downloadFiles'][this[a23_0x30a6('0x1d')]][a23_0x30a6('0x96')]:0x1e;this['createImageVideo'](_0x4998dd,_0x1a9f90);}else if(_0x4ca54e==a23_0x30a6('0x97')){if(_0xa59862==null&&_0x2ac5f1!=''){this[a23_0x30a6('0x1d')]++;}this[a23_0x30a6('0x51')]();}console['log'](this[a23_0x30a6('0x1d')]);}[a23_0x30a6('0x98')](_0x4a6f28,_0x2bc72,_0x397c81){progress(request(_0x4a6f28),{})['on'](a23_0x30a6('0x99'),function(_0x1b152f){console[a23_0x30a6('0x41')](_0x1b152f);})['on'](a23_0x30a6('0x72'),function(_0x438189){console[a23_0x30a6('0x41')]('Error\x20downloading\x20file');this[a23_0x30a6('0x51')]();})['on'](a23_0x30a6('0x74'),function(){console[a23_0x30a6('0x41')](a23_0x30a6('0x9a')+_0x2bc72);console['log']('mediaType:\x20'+_0x397c81);if(_0x397c81=='image'){const _0x2d8fee=this[a23_0x30a6('0x4e')][this[a23_0x30a6('0x1d')]][a23_0x30a6('0x96')]!=null?this[a23_0x30a6('0x4e')][this[a23_0x30a6('0x1d')]][a23_0x30a6('0x96')]:0x1e;this[a23_0x30a6('0x9b')](_0x2bc72,_0x2d8fee);}else if(_0x397c81==a23_0x30a6('0x97')){this['currentFile']++;this['download']();}}[a23_0x30a6('0x3b')](this))[a23_0x30a6('0x8b')](fs[a23_0x30a6('0x8a')](this[a23_0x30a6('0x4a')]+_0x2bc72));}['createImageVideo'](_0x2fe95d,_0x58a4fb=0x1e){const _0xf5442a=this[a23_0x30a6('0x4a')]+_0x2fe95d;console[a23_0x30a6('0x41')](_0xf5442a);console[a23_0x30a6('0x41')](_0x2fe95d);const _0x55ea8f=_0x2fe95d[a23_0x30a6('0x5a')]('.')[a23_0x30a6('0x5b')](0x0,-0x1)[a23_0x30a6('0x5c')]('.');const _0x53f457=a23_0x30a6('0x9c');const _0x1d47ca=['-y','-r',a23_0x30a6('0x9d'),a23_0x30a6('0x9e'),'1',a23_0x30a6('0x9f'),'glob','-i',_0xf5442a,'-t',String(_0x58a4fb),a23_0x30a6('0xa0'),a23_0x30a6('0xa1'),'-pix_fmt',a23_0x30a6('0xa2'),'-r','25',a23_0x30a6('0xa3'),a23_0x30a6('0xa4'),this[a23_0x30a6('0x4a')]+_0x55ea8f+a23_0x30a6('0x5d')];const _0x5743a2=spawn(_0x53f457,_0x1d47ca);_0x5743a2[a23_0x30a6('0xa5')]['on']('data',function(_0x5e315d){console[a23_0x30a6('0x41')](a23_0x30a6('0xa6')+_0xf5442a);});_0x5743a2[a23_0x30a6('0xa7')]['on']('data',function(_0x459280){console['log'](a23_0x30a6('0xa8')+_0x459280);}[a23_0x30a6('0x3b')](this));_0x5743a2['on'](a23_0x30a6('0xa9'),function(){console['log'](a23_0x30a6('0xaa'));this[a23_0x30a6('0x1d')]++;this[a23_0x30a6('0x51')]();}[a23_0x30a6('0x3b')](this));}[a23_0x30a6('0x63')](_0x12e7e9){const _0x5aaa15=this[a23_0x30a6('0x4a')]+'/'+_0x12e7e9+a23_0x30a6('0x5d');const _0x1ec89e=youtubedl('http://www.youtube.com/watch?v='+_0x12e7e9,[a23_0x30a6('0xab')],{'cwd':__dirname});_0x1ec89e['on']('info',function(_0x31cb9b){console['log'](a23_0x30a6('0xac'));console[a23_0x30a6('0x41')]('filename:\x20'+_0x31cb9b['_filename']);console[a23_0x30a6('0x41')](a23_0x30a6('0xad')+_0x31cb9b['size']);});_0x1ec89e['on'](a23_0x30a6('0xae'),function complete(_0x233795){'use strict';console['log'](a23_0x30a6('0xaf')+_0x233795[a23_0x30a6('0xb0')]+a23_0x30a6('0xb1'));});_0x1ec89e['on'](a23_0x30a6('0x74'),function(){console[a23_0x30a6('0x41')](a23_0x30a6('0xb2'));this[a23_0x30a6('0x60')](_0x5aaa15)[a23_0x30a6('0x4')](function(_0x1549ff){if(_0x1549ff){this[a23_0x30a6('0x1d')]++;}this[a23_0x30a6('0x51')]();}[a23_0x30a6('0x3b')](this));}[a23_0x30a6('0x3b')](this));_0x1ec89e['pipe'](fs[a23_0x30a6('0x8a')](_0x5aaa15));}[a23_0x30a6('0x57')](){console['log'](a23_0x30a6('0xb3'));if(this['playlistChanged']){if(this[a23_0x30a6('0x1f')][a23_0x30a6('0x50')]==0x0){fs[a23_0x30a6('0xb4')](this[a23_0x30a6('0x1a')],JSON[a23_0x30a6('0x3d')](this[a23_0x30a6('0x20')]));let _0x374682=a23_0x30a6('0xb5')+'\x0d\x0a'+a23_0x30a6('0xb6')+'\x0d\x0a';for(const _0x5bcb9f in this['downloadFiles']){const _0x393ba4=this[a23_0x30a6('0x4e')][_0x5bcb9f][a23_0x30a6('0x58')];const _0x784e57=this['downloadFiles'][_0x5bcb9f][a23_0x30a6('0xb7')];const _0x1ccd68=_0x393ba4['substring'](_0x393ba4[a23_0x30a6('0xb8')]('/')+0x1);let _0x5736ac=_0x1ccd68[a23_0x30a6('0x5a')]('.')['slice'](0x0,-0x1)[a23_0x30a6('0x5c')]('.');if(_0x784e57==a23_0x30a6('0x62')){_0x5736ac=_0x393ba4;}_0x374682+=a23_0x30a6('0xb9')+_0x5736ac+a23_0x30a6('0x5d')+'\x0d\x0a';}fsExtra[a23_0x30a6('0x4d')](this[a23_0x30a6('0x19')]);fsExtra['copySync'](this[a23_0x30a6('0x4a')],this['filesFolder']);fsExtra['writeFileSync'](this['m3uFile'],_0x374682);fsExtra[a23_0x30a6('0x4d')](this[a23_0x30a6('0x4a')]);console[a23_0x30a6('0x41')](a23_0x30a6('0xba'));this['refreshPlayer']();}else{console['log'](a23_0x30a6('0xbb'));this[a23_0x30a6('0x1d')]=0x0;setTimeout(function(){this[a23_0x30a6('0x51')]();}[a23_0x30a6('0x3b')](this),0x1388);}}else{console[a23_0x30a6('0x41')]('No\x20playlist\x20changes.');}}['refreshPlayer'](){this['jsonrpcClient'](a23_0x30a6('0xbc'),{'playlistid':0x1},function(_0x216b65){console[a23_0x30a6('0x41')](a23_0x30a6('0xbd'));console[a23_0x30a6('0x41')](_0x216b65);this[a23_0x30a6('0xbe')](a23_0x30a6('0xbf'),{'item':{'file':a23_0x30a6('0xc0')},'playlistid':0x1},function(_0x216b65){console[a23_0x30a6('0x41')]('Playlist.Added');console[a23_0x30a6('0x41')](_0x216b65);this[a23_0x30a6('0xbe')](a23_0x30a6('0xc1'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x216b65){console[a23_0x30a6('0x41')](a23_0x30a6('0xc2'));console['log'](_0x216b65);if(this['forceReload']){this[a23_0x30a6('0x25')]=![];this[a23_0x30a6('0xc3')](a23_0x30a6('0xc4'));}}['bind'](this));}[a23_0x30a6('0x3b')](this));}[a23_0x30a6('0x3b')](this));}['reboot'](){console['log'](a23_0x30a6('0xc5'));exec(a23_0x30a6('0xc6'),function(_0x3ad8af){console[a23_0x30a6('0x41')](_0x3ad8af);});}['updateSettings'](){const _0x1271f8=format(this[a23_0x30a6('0x34')],this[a23_0x30a6('0x2e')]);console[a23_0x30a6('0x41')](_0x1271f8);request({'url':_0x1271f8,'json':!![]},function(_0xb6bf67,_0x5e2a8f,_0x1014fc){if(_0x1014fc[a23_0x30a6('0x50')]>0x0){const _0x4c45be=_0x1014fc[0x0];const _0x1997c8=_0x4c45be[a23_0x30a6('0xc7')];const _0x17d488=_0x4c45be[a23_0x30a6('0xc8')]==0x1;this[a23_0x30a6('0xc9')](_0x1997c8);this[a23_0x30a6('0xca')](_0x17d488);}console[a23_0x30a6('0x41')](_0x1014fc);}['bind'](this));}[a23_0x30a6('0xc9')](_0x5c1f20){const _0x570afe=_0x5c1f20!=null&&_0x5c1f20!='';const _0x4f25f4=a23_0x30a6('0xcb');const _0xd73d3=fsExtra[a23_0x30a6('0x2c')](_0x4f25f4);console[a23_0x30a6('0x41')]('xmlContent:\x20'+_0xd73d3);const _0x362e1d=require(a23_0x30a6('0xcc'));const _0x2b5e52=_0x362e1d[a23_0x30a6('0xcd')];_0x2b5e52(_0xd73d3,function(_0x4b1fb6,_0x51fa84){console[a23_0x30a6('0x41')](a23_0x30a6('0xce'),_0x4b1fb6);console[a23_0x30a6('0x41')](a23_0x30a6('0xcf'),_0x51fa84);if(!_0x5c1f20||_0x5c1f20==null||_0x5c1f20==''){_0x5c1f20='none';}_0x51fa84[a23_0x30a6('0xd0')][a23_0x30a6('0xd1')][0x0][a23_0x30a6('0xd2')][0x0]['_']=_0x5c1f20;const _0x269392=new _0x362e1d[(a23_0x30a6('0xd3'))]();const _0x296a03=_0x269392['buildObject'](_0x51fa84);console['log'](a23_0x30a6('0xd4'),_0x296a03);fsExtra[a23_0x30a6('0xb4')](_0x4f25f4,_0x296a03);});this[a23_0x30a6('0xc3')](a23_0x30a6('0xd5'));this[a23_0x30a6('0xbe')](a23_0x30a6('0xd6'),{'setting':a23_0x30a6('0xd7'),'value':_0x570afe},function(_0x1f7330){console[a23_0x30a6('0x41')](a23_0x30a6('0xd8'));console['log'](_0x1f7330);}[a23_0x30a6('0x3b')](this));}[a23_0x30a6('0xca')](_0x281606){this[a23_0x30a6('0xbe')]('Settings.SetSettingValue',{'setting':'videoplayer.usedisplayasclock','value':_0x281606},function(_0x20b78f){console[a23_0x30a6('0x41')](a23_0x30a6('0xd9'));console['log'](_0x20b78f);}[a23_0x30a6('0x3b')](this));}[a23_0x30a6('0xc3')](_0x12a171){exec(a23_0x30a6('0xda')+_0x12a171+'\x22',function(_0x21d681){console[a23_0x30a6('0x41')](_0x21d681);});}['jsonrpcClient'](_0x5888ec,_0x5c7841,_0x6dc1da){const _0x2ceb9b={'jsonrpc':a23_0x30a6('0xdb'),'method':_0x5888ec,'params':_0x5c7841,'id':0x1};this[a23_0x30a6('0x26')]['post'](this[a23_0x30a6('0x21')]+'/jsonrpc',_0x2ceb9b,![],{'user':this['kodiUser'],'pass':this[a23_0x30a6('0x24')]})[a23_0x30a6('0x4')](function(_0x2dae3e){_0x6dc1da(_0x2dae3e);})[a23_0x30a6('0x45')](function(_0x583e1b){});}}exports[a23_0x30a6('0xdc')]=SyncPlaylistsService;