var a22_0x36c3=['playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','checkFolders','ensureDir','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','playListFile','removeSync','reboot','System','Shutdown','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','baseURL','join','youtube_single','.mp4','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','indexOf','splice','downloading:\x20','includes','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','err:\x20','finish','Downloaded\x20','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','video','downloadRequestFile','progress','Error\x20downloading\x20file','createImageVideo','createWriteStream','slice','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','data','stderr','stderr:\x20','close','finished\x20mp4\x20convert','--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','finished\x20youtube\x20downloading!','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','Rebooting..','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','value','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','child_process','spawn','youtube-dl','uuid/v4','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','tempFolder','filesFolder','files/','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','HttpClientService','parse','readFileSync','context','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','kodi','http://localhost','lulo','.lulo123.','checkDependencies','registerClient','loadMediaList','bind','playlist','then','stringify','deviceUuid','networkInterfaces','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','config','writeFileSync','getStatus','player','getCurrentlyPlayingVideo','item','label','reportStatus'];(function(_0x47c015,_0x55ba9e){var _0x5aab8f=function(_0x1f05c5){while(--_0x1f05c5){_0x47c015['push'](_0x47c015['shift']());}};_0x5aab8f(++_0x55ba9e);}(a22_0x36c3,0x13d));var a22_0x5d87=function(_0x491cca,_0x523cf4){_0x491cca=_0x491cca-0x0;var _0xc9f002=a22_0x36c3[_0x491cca];return _0xc9f002;};'use strict';var __awaiter=this&&this[a22_0x5d87('0x0')]||function(_0x171b67,_0x3a490a,_0x37e7b7,_0x365d4c){function _0x51d15d(_0x43810c){return _0x43810c instanceof _0x37e7b7?_0x43810c:new _0x37e7b7(function(_0x1024e9){_0x1024e9(_0x43810c);});}return new(_0x37e7b7||(_0x37e7b7=Promise))(function(_0x533276,_0x75d7b9){function _0x4a1607(_0x347fb2){try{_0x3bfbd9(_0x365d4c[a22_0x5d87('0x1')](_0x347fb2));}catch(_0x238928){_0x75d7b9(_0x238928);}}function _0x177ee1(_0x230d75){try{_0x3bfbd9(_0x365d4c['throw'](_0x230d75));}catch(_0x22df6c){_0x75d7b9(_0x22df6c);}}function _0x3bfbd9(_0x454234){_0x454234['done']?_0x533276(_0x454234[a22_0x5d87('0x2')]):_0x51d15d(_0x454234[a22_0x5d87('0x2')])['then'](_0x4a1607,_0x177ee1);}_0x3bfbd9((_0x365d4c=_0x365d4c['apply'](_0x171b67,_0x3a490a||[]))[a22_0x5d87('0x1')]());});};Object[a22_0x5d87('0x3')](exports,a22_0x5d87('0x4'),{'value':!![]});const HttpClientService_1=require(a22_0x5d87('0x5'));const mediainfo=require(a22_0x5d87('0x6'));const fs=require('fs');const url=require(a22_0x5d87('0x7'));const http=require(a22_0x5d87('0x8'));const fsExtra=require(a22_0x5d87('0x9'));const request=require(a22_0x5d87('0xa'));const progress=require('request-progress');const spawn=require(a22_0x5d87('0xb'))[a22_0x5d87('0xc')];const isImage=require('is-image');const format=require('string-template');const os=require('os');const youtubedl=require(a22_0x5d87('0xd'));const uuidv4=require(a22_0x5d87('0xe'));const configFile='config.json';const contextFile=a22_0x5d87('0xf');const urlExists=require(a22_0x5d87('0x10'));const kodi_rpc=require(a22_0x5d87('0x11'));const Downloader=require(a22_0x5d87('0x12'));class SyncPlaylistsService{constructor(){this[a22_0x5d87('0x13')]='media/';this[a22_0x5d87('0x14')]=this[a22_0x5d87('0x13')]+'temp/';this[a22_0x5d87('0x15')]=this[a22_0x5d87('0x13')]+a22_0x5d87('0x16');this['playListFile']=this[a22_0x5d87('0x13')]+a22_0x5d87('0x17');this[a22_0x5d87('0x18')]=this[a22_0x5d87('0x15')]+a22_0x5d87('0x19');this[a22_0x5d87('0x1a')]=0x0;this[a22_0x5d87('0x1b')]=![];this[a22_0x5d87('0x1c')]=[];this[a22_0x5d87('0x1d')]=[];this[a22_0x5d87('0x1e')]={};this['httpClientService']=new HttpClientService_1[(a22_0x5d87('0x1f'))]();}['init'](){this['config']=JSON[a22_0x5d87('0x20')](fs[a22_0x5d87('0x21')](configFile));this[a22_0x5d87('0x22')]=JSON['parse'](fs[a22_0x5d87('0x21')](contextFile));this['playerId']=this['config'][a22_0x5d87('0x23')];this['baseURL']=process[a22_0x5d87('0x24')][a22_0x5d87('0x25')]+a22_0x5d87('0x26');this[a22_0x5d87('0x27')]=this['baseURL']+'api/player_playlist.php?player_id={0}';this[a22_0x5d87('0x28')]=new kodi_rpc({'url':a22_0x5d87('0x29'),'user':a22_0x5d87('0x2a'),'password':a22_0x5d87('0x2b')});this[a22_0x5d87('0x2c')]();this[a22_0x5d87('0x2d')]();this['checkFolders']();this[a22_0x5d87('0x2e')]();setInterval(function(){this['getStatus']();}[a22_0x5d87('0x2f')](this),0x2710);setInterval(function(){this[a22_0x5d87('0x2d')]();}[a22_0x5d87('0x2f')](this),0x493e0);}[a22_0x5d87('0x2c')](){}[a22_0x5d87('0x2d')](){this[a22_0x5d87('0x28')][a22_0x5d87('0x30')]['getItems'](0x1)[a22_0x5d87('0x31')](function(_0xb462f8){const _0x3d0df4=JSON[a22_0x5d87('0x32')](_0xb462f8);const _0x4ccebc={'player_id':this[a22_0x5d87('0x23')],'device_uuid':this['config'][a22_0x5d87('0x33')],'network_info':JSON[a22_0x5d87('0x32')](os[a22_0x5d87('0x34')]()),'firmware_info':JSON[a22_0x5d87('0x32')](this['context']),'playlist':_0x3d0df4,'playing_item':'','status':0x0};this[a22_0x5d87('0x35')][a22_0x5d87('0x36')](a22_0x5d87('0x37'),_0x4ccebc,![])[a22_0x5d87('0x31')](function(_0x3d5cd6){console[a22_0x5d87('0x38')](a22_0x5d87('0x39')+Date());})[a22_0x5d87('0x3a')](function(_0x15796b){});console[a22_0x5d87('0x38')](_0x4ccebc);}[a22_0x5d87('0x2f')](this));const _0x2580a6=this['config'][a22_0x5d87('0x33')];if(!_0x2580a6||_0x2580a6==''){this[a22_0x5d87('0x3b')][a22_0x5d87('0x33')]=uuidv4();this[a22_0x5d87('0x3b')]={'deviceUuid':this[a22_0x5d87('0x3b')][a22_0x5d87('0x33')],'playerId':this['config']['playerId']};fs[a22_0x5d87('0x3c')](configFile,JSON[a22_0x5d87('0x32')](this['config']));}}[a22_0x5d87('0x3d')](){console['log'](a22_0x5d87('0x3d'));this[a22_0x5d87('0x28')][a22_0x5d87('0x3e')][a22_0x5d87('0x3f')]()[a22_0x5d87('0x31')](function(_0x33f970){const _0x1b3191=_0x33f970[a22_0x5d87('0x40')][a22_0x5d87('0x41')];this[a22_0x5d87('0x42')](_0x1b3191);}['bind'](this))[a22_0x5d87('0x3a')](function(_0xce117a){console[a22_0x5d87('0x38')](_0xce117a);this['reportStatus'](_0xce117a);}[a22_0x5d87('0x2f')](this));}['reportStatus'](_0x13d765){console[a22_0x5d87('0x38')](a22_0x5d87('0x43')+_0x13d765);const _0x2a6ff8={'player_id':this[a22_0x5d87('0x23')],'device_uuid':this[a22_0x5d87('0x3b')][a22_0x5d87('0x33')],'status':_0x13d765!=''&&_0x13d765!=null?0x1:0x0,'playing_item':_0x13d765};this[a22_0x5d87('0x35')][a22_0x5d87('0x36')](a22_0x5d87('0x44'),_0x2a6ff8,![])[a22_0x5d87('0x31')](function(_0x40155f){console[a22_0x5d87('0x38')]('reportStatusResponse:\x20'+Date());})[a22_0x5d87('0x3a')](function(_0x5d1214){});}[a22_0x5d87('0x45')](){fsExtra[a22_0x5d87('0x46')](this[a22_0x5d87('0x13')],_0x156af8=>{});fsExtra[a22_0x5d87('0x46')](this['tempFolder'],_0x4e2912=>{});fsExtra['ensureDir'](this[a22_0x5d87('0x15')],_0x1c9cab=>{});}[a22_0x5d87('0x2e')](){const _0x2e9ec8=format(this[a22_0x5d87('0x27')],this[a22_0x5d87('0x23')]);console[a22_0x5d87('0x38')](_0x2e9ec8);request({'url':_0x2e9ec8,'json':!![]},function(_0xe7c3ff,_0x1c7f0b,_0x4b7509){console[a22_0x5d87('0x38')](a22_0x5d87('0x47'));console[a22_0x5d87('0x38')](_0x4b7509);this[a22_0x5d87('0x1e')]=_0x4b7509;this[a22_0x5d87('0x1b')]=this[a22_0x5d87('0x48')]();fsExtra[a22_0x5d87('0x49')](this[a22_0x5d87('0x14')]);this[a22_0x5d87('0x1c')]=[];this[a22_0x5d87('0x1d')]=[];this[a22_0x5d87('0x1a')]=0x0;for(const _0x15c614 in _0x4b7509){this[a22_0x5d87('0x1c')][a22_0x5d87('0x4a')](_0x4b7509[_0x15c614]);}console['log'](a22_0x5d87('0x4b')+this[a22_0x5d87('0x1c')][a22_0x5d87('0x4c')]);if(this[a22_0x5d87('0x1c')]['length']>0x0){this[a22_0x5d87('0x4d')]();}}['bind'](this));}[a22_0x5d87('0x4e')](){if(fsExtra[a22_0x5d87('0x4f')](this[a22_0x5d87('0x14')])){fsExtra[a22_0x5d87('0x49')](this['tempFolder']);}if(fsExtra['existsSync'](this[a22_0x5d87('0x50')])){fsExtra[a22_0x5d87('0x49')](this[a22_0x5d87('0x50')]);}if(!fsExtra['existsSync'](this['playListFile'])){fsExtra[a22_0x5d87('0x51')](this[a22_0x5d87('0x50')]);}if(!fsExtra[a22_0x5d87('0x4f')](this[a22_0x5d87('0x18')])){fsExtra[a22_0x5d87('0x51')](this[a22_0x5d87('0x18')]);}this[a22_0x5d87('0x2e')]();}[a22_0x5d87('0x52')](){this[a22_0x5d87('0x28')][a22_0x5d87('0x53')][a22_0x5d87('0x54')]();}[a22_0x5d87('0x48')](){const _0xf85ae8=JSON[a22_0x5d87('0x32')](this[a22_0x5d87('0x1e')]);try{if(!fsExtra[a22_0x5d87('0x4f')](this[a22_0x5d87('0x50')])){return!![];}else{const _0x2cc1d1=fsExtra[a22_0x5d87('0x21')](this[a22_0x5d87('0x50')])['toString']();if(_0x2cc1d1!=_0xf85ae8){return!![];}}}catch(_0xd0ff7e){console[a22_0x5d87('0x38')](_0xd0ff7e);}return![];}[a22_0x5d87('0x4d')](){console['log']('this.currentFile:\x20'+this[a22_0x5d87('0x1a')]+a22_0x5d87('0x55')+this[a22_0x5d87('0x1c')]['length']);if(this[a22_0x5d87('0x1a')]>=this[a22_0x5d87('0x1c')][a22_0x5d87('0x4c')]){this[a22_0x5d87('0x56')]();return;}const _0x1f8898=String(this[a22_0x5d87('0x1c')][this[a22_0x5d87('0x1a')]][a22_0x5d87('0x57')]);const _0x11c4db=this[a22_0x5d87('0x1c')][this[a22_0x5d87('0x1a')]][a22_0x5d87('0x58')];let _0x43ae85=_0x1f8898[a22_0x5d87('0x59')](_0x1f8898[a22_0x5d87('0x5a')]('/')+0x1);const _0x16e2cd=_0x43ae85[a22_0x5d87('0x5b')]('.')['slice'](0x0,-0x1)['join']('.');let _0x4b8a6e=this[a22_0x5d87('0x5c')]+_0x1f8898;const _0x4c153d=_0x4b8a6e[a22_0x5d87('0x5b')]('.')['slice'](0x0,-0x1)[a22_0x5d87('0x5d')]('.');if(_0x11c4db==a22_0x5d87('0x5e')){_0x43ae85=_0x43ae85+a22_0x5d87('0x5f');}else if(_0x11c4db=='image'){_0x43ae85=_0x16e2cd+a22_0x5d87('0x5f');_0x4b8a6e=_0x4c153d+a22_0x5d87('0x5f');}console['log']('**********+');console['log'](_0x1f8898);console[a22_0x5d87('0x38')](_0x11c4db);console[a22_0x5d87('0x38')](_0x43ae85);console[a22_0x5d87('0x38')](_0x4b8a6e);console['log'](_0x16e2cd);console[a22_0x5d87('0x38')](_0x4c153d);console[a22_0x5d87('0x38')](a22_0x5d87('0x60'));if(fsExtra[a22_0x5d87('0x4f')](this[a22_0x5d87('0x14')]+_0x43ae85)){this[a22_0x5d87('0x61')](this[a22_0x5d87('0x14')]+_0x43ae85)['then'](function(_0x4149ee){if(_0x4149ee){this[a22_0x5d87('0x1a')]++;}else{this[a22_0x5d87('0x1b')]=!![];}this[a22_0x5d87('0x4d')]();}[a22_0x5d87('0x2f')](this));}else if(fsExtra[a22_0x5d87('0x4f')](this[a22_0x5d87('0x15')]+_0x43ae85)){this[a22_0x5d87('0x61')](this[a22_0x5d87('0x15')]+_0x43ae85)[a22_0x5d87('0x31')](function(_0x1abe65){if(_0x1abe65){fsExtra['copySync'](this['filesFolder']+_0x43ae85,this['tempFolder']+_0x43ae85);this[a22_0x5d87('0x1a')]++;}else{this['playlistChanged']=!![];}this[a22_0x5d87('0x4d')]();}['bind'](this));}else{console[a22_0x5d87('0x38')](a22_0x5d87('0x62')+_0x4b8a6e);this[a22_0x5d87('0x1b')]=!![];if(_0x11c4db==a22_0x5d87('0x5e')){this[a22_0x5d87('0x63')](_0x1f8898);}else{this[a22_0x5d87('0x64')](_0x4b8a6e,_0x43ae85,_0x11c4db);}}}[a22_0x5d87('0x61')](_0x2ec0db){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x5d87('0x38')](a22_0x5d87('0x65')+_0x2ec0db);const _0x535939=yield mediainfo(_0x2ec0db)[a22_0x5d87('0x3a')](_0x524739=>{console[a22_0x5d87('0x38')](_0x524739);fsExtra[a22_0x5d87('0x51')](_0x2ec0db);return![];});const _0x486cd6=_0x535939[a22_0x5d87('0x66')][a22_0x5d87('0x67')][a22_0x5d87('0x4c')]>0x1&&_0x535939[a22_0x5d87('0x66')][a22_0x5d87('0x67')][0x1][a22_0x5d87('0x68')]==a22_0x5d87('0x69');if(!_0x486cd6){fsExtra[a22_0x5d87('0x51')](_0x2ec0db);}console['log'](a22_0x5d87('0x6a')+_0x486cd6);return _0x486cd6;});}[a22_0x5d87('0x64')](_0x2278a0,_0x115873,_0x4480fc){const _0x4bfe47=new Downloader();console[a22_0x5d87('0x38')](_0x2278a0);console[a22_0x5d87('0x38')](_0x115873);console[a22_0x5d87('0x38')](_0x4480fc);const _0x3028e3=_0x4bfe47[a22_0x5d87('0x4d')](_0x2278a0,this[a22_0x5d87('0x14')]+_0x115873);urlExists(_0x2278a0,function(_0x12d5e1,_0x32e583){if(_0x32e583){if(this[a22_0x5d87('0x1d')]['includes'](this[a22_0x5d87('0x1a')])){const _0x169bd4=this['failDownloadFiles'][a22_0x5d87('0x6b')](this[a22_0x5d87('0x1a')]);if(_0x169bd4>-0x1){this[a22_0x5d87('0x1d')][a22_0x5d87('0x6c')](_0x169bd4,0x1);}}console[a22_0x5d87('0x38')](a22_0x5d87('0x6d')+_0x2278a0);_0x3028e3['start']();}else{if(!this['failDownloadFiles'][a22_0x5d87('0x6e')](this[a22_0x5d87('0x1a')])){this[a22_0x5d87('0x1d')]['push'](this['currentFile']);}console[a22_0x5d87('0x38')](a22_0x5d87('0x6f')+_0x2278a0);this['currentFile']++;this[a22_0x5d87('0x4d')]();}}[a22_0x5d87('0x2f')](this));_0x3028e3['on']('start',function(_0x3028e3){console['log'](a22_0x5d87('0x70')+_0x2278a0);});_0x3028e3['on'](a22_0x5d87('0x71'),function(_0x3028e3){console[a22_0x5d87('0x38')](a22_0x5d87('0x72'));this[a22_0x5d87('0x4d')]();}[a22_0x5d87('0x2f')](this));_0x3028e3['on'](a22_0x5d87('0x73'),function(_0x3028e3){console[a22_0x5d87('0x38')](a22_0x5d87('0x73'));console[a22_0x5d87('0x38')](a22_0x5d87('0x74')+_0x115873);console[a22_0x5d87('0x38')](a22_0x5d87('0x75')+_0x4480fc);this[a22_0x5d87('0x61')](this[a22_0x5d87('0x14')]+_0x115873)[a22_0x5d87('0x31')](function(_0x31c3bf){if(_0x31c3bf){this[a22_0x5d87('0x1a')]++;}this[a22_0x5d87('0x4d')]();}[a22_0x5d87('0x2f')](this));}[a22_0x5d87('0x2f')](this));_0x3028e3['on'](a22_0x5d87('0x76'),function(_0x3028e3){console[a22_0x5d87('0x38')]('stopped');});_0x3028e3['on'](a22_0x5d87('0x77'),function(_0x3028e3){console[a22_0x5d87('0x38')](a22_0x5d87('0x77'));});_0x3028e3['on'](a22_0x5d87('0x78'),function(_0x3028e3){console[a22_0x5d87('0x38')](a22_0x5d87('0x78'));});}[a22_0x5d87('0x79')](_0x2b46e3,_0x1a6b50,_0x4fd661,_0x35ebe6){console[a22_0x5d87('0x38')](a22_0x5d87('0x79'));console[a22_0x5d87('0x38')](_0x2b46e3);const _0x57d61a=!![];let _0x5e9bf9=0x0;const _0x521c04='';console['log'](a22_0x5d87('0x7a')+_0x2b46e3+a22_0x5d87('0x7b')+_0x1a6b50);if(_0x5e9bf9){if(_0x5e9bf9>0x5){_0x35ebe6(a22_0x5d87('0x7c'),_0x2b46e3,_0x4fd661,null);return;}}else{_0x5e9bf9=0x0;}const _0x5bd8d1=this[a22_0x5d87('0x14')]+_0x1a6b50;let _0x3bd971;if(_0x35ebe6===undefined){console[a22_0x5d87('0x38')](a22_0x5d87('0x7d')+_0x2b46e3+'\x20to\x20'+_0x5bd8d1);_0x35ebe6=function(_0xa7c493,_0x495830){console[a22_0x5d87('0x38')](a22_0x5d87('0x7e'),_0xa7c493,_0x495830);};}http['globalAgent'][a22_0x5d87('0x7f')]=0x64;const _0x1156d9={'host':url[a22_0x5d87('0x20')](_0x2b46e3)[a22_0x5d87('0x80')],'port':0x50,'path':url[a22_0x5d87('0x20')](_0x2b46e3)[a22_0x5d87('0x81')],'agent':![]};const _0x4be674=http[a22_0x5d87('0x82')](_0x1156d9,function(_0xeb2a07){let _0xdf8eee=0x0;let _0x42f978=0x0;function _0x4612a2(){if(_0xdf8eee===undefined){console[a22_0x5d87('0x38')](_0x1a6b50+a22_0x5d87('0x83')+_0x42f978+'/'+'?');}const _0x1ce465=_0x42f978/_0xdf8eee*0x64;console[a22_0x5d87('0x38')](_0x1a6b50+a22_0x5d87('0x84')+_0x1ce465+'%\x09'+_0x42f978+'/'+_0xdf8eee);}console['log'](_0x1a6b50+'\x20'+_0xeb2a07[a22_0x5d87('0x85')]);switch(_0xeb2a07[a22_0x5d87('0x85')]){case 0xc8:_0xdf8eee=_0xeb2a07[a22_0x5d87('0x86')]['content-length']||_0x521c04;fs[a22_0x5d87('0x87')](_0x5bd8d1,function(_0x2e5c93,_0x3edc1d){if(!_0x2e5c93){console['log']('Have\x20already\x20downloaded\x20'+_0x5bd8d1);if(_0x3edc1d[a22_0x5d87('0x88')]==_0xdf8eee){console[a22_0x5d87('0x38')](a22_0x5d87('0x89')+_0xdf8eee+')');console[a22_0x5d87('0x38')](a22_0x5d87('0x8a'));}else{console[a22_0x5d87('0x38')](a22_0x5d87('0x8b')+_0x3edc1d[a22_0x5d87('0x88')]+a22_0x5d87('0x8c')+_0xdf8eee+')');}}_0x3bd971=fs['createWriteStream'](_0x5bd8d1);_0xeb2a07[a22_0x5d87('0x8d')](_0x3bd971);_0xeb2a07['on']('data',function(_0x18a38c){_0x42f978+=_0x18a38c['length'];_0x4612a2();});_0x4be674['on'](a22_0x5d87('0x71'),function(_0x2e5c93){console['log'](a22_0x5d87('0x8e'));console[a22_0x5d87('0x38')](_0x2e5c93);});_0x3bd971['on'](a22_0x5d87('0x8f'),function(){console[a22_0x5d87('0x38')](a22_0x5d87('0x90')+_0x2b46e3+'\x20to\x20'+_0x1a6b50);_0x35ebe6(null,_0x1a6b50,_0x4fd661,_0x1a6b50);}['bind'](this));});break;case 0x12e:const _0x3f9cd7=_0xeb2a07[a22_0x5d87('0x86')]['location'];console[a22_0x5d87('0x38')](a22_0x5d87('0x91')+_0x2b46e3+'\x20to\x20'+_0x3f9cd7);if(_0x5e9bf9<0x5){this[a22_0x5d87('0x79')](_0x3f9cd7,_0x1a6b50,_0x35ebe6,_0x5e9bf9++);}else{console[a22_0x5d87('0x71')](a22_0x5d87('0x92')+_0x2b46e3+'.');_0x35ebe6('302',null,null,null);}return;case 0x194:console[a22_0x5d87('0x38')](a22_0x5d87('0x93')+_0x2b46e3);default:console[a22_0x5d87('0x38')](a22_0x5d87('0x94')+_0x2b46e3+a22_0x5d87('0x95')+_0xeb2a07[a22_0x5d87('0x85')]);_0x4be674['abort']();_0x35ebe6(_0xeb2a07[a22_0x5d87('0x85')],null,null,null);return;}})['on'](a22_0x5d87('0x71'),function(_0x2b1896){console[a22_0x5d87('0x38')](a22_0x5d87('0x96')+_0x2b46e3+'\x20'+_0x2b1896[a22_0x5d87('0x97')]);_0x35ebe6(_0x2b1896,null,null,null);});}['downloadHTTPFileCallback'](_0x1d8eeb,_0x2271d6,_0x3c1bcb,_0x57424c){console[a22_0x5d87('0x38')](a22_0x5d87('0x98'));console[a22_0x5d87('0x38')](_0x1d8eeb);console[a22_0x5d87('0x38')](_0x2271d6);console['log'](_0x3c1bcb);console[a22_0x5d87('0x38')](_0x57424c);if(_0x3c1bcb==a22_0x5d87('0x99')){const _0x2d8cdc=this[a22_0x5d87('0x1c')][this[a22_0x5d87('0x1a')]][a22_0x5d87('0x9a')]!=null?this[a22_0x5d87('0x1c')][this[a22_0x5d87('0x1a')]]['duration']:0x1e;this['createImageVideo'](_0x57424c,_0x2d8cdc);}else if(_0x3c1bcb==a22_0x5d87('0x9b')){if(_0x1d8eeb==null&&_0x2271d6!=''){this['currentFile']++;}this['download']();}console[a22_0x5d87('0x38')](this['currentFile']);}[a22_0x5d87('0x9c')](_0x42b7bb,_0xe25251,_0x5f4ea7){progress(request(_0x42b7bb),{})['on'](a22_0x5d87('0x9d'),function(_0xa1f627){console[a22_0x5d87('0x38')](_0xa1f627);})['on']('error',function(_0x5b3a31){console['log'](a22_0x5d87('0x9e'));this[a22_0x5d87('0x4d')]();})['on'](a22_0x5d87('0x73'),function(){console[a22_0x5d87('0x38')]('Downloaded:\x20'+_0xe25251);console[a22_0x5d87('0x38')]('mediaType:\x20'+_0x5f4ea7);if(_0x5f4ea7==a22_0x5d87('0x99')){const _0x1ca306=this[a22_0x5d87('0x1c')][this[a22_0x5d87('0x1a')]]['duration']!=null?this[a22_0x5d87('0x1c')][this[a22_0x5d87('0x1a')]][a22_0x5d87('0x9a')]:0x1e;this[a22_0x5d87('0x9f')](_0xe25251,_0x1ca306);}else if(_0x5f4ea7==a22_0x5d87('0x9b')){this[a22_0x5d87('0x1a')]++;this['download']();}}[a22_0x5d87('0x2f')](this))['pipe'](fs[a22_0x5d87('0xa0')](this['tempFolder']+_0xe25251));}[a22_0x5d87('0x9f')](_0x5cc255,_0x43bafa=0x1e){const _0x18986b=this[a22_0x5d87('0x14')]+_0x5cc255;console[a22_0x5d87('0x38')](_0x18986b);console[a22_0x5d87('0x38')](_0x5cc255);const _0x57ddcb=_0x5cc255[a22_0x5d87('0x5b')]('.')[a22_0x5d87('0xa1')](0x0,-0x1)[a22_0x5d87('0x5d')]('.');const _0x202d22='ffmpeg';const _0x5dc72e=['-y','-r',a22_0x5d87('0xa2'),a22_0x5d87('0xa3'),'1',a22_0x5d87('0xa4'),a22_0x5d87('0xa5'),'-i',_0x18986b,'-t',String(_0x43bafa),a22_0x5d87('0xa6'),'libx264',a22_0x5d87('0xa7'),a22_0x5d87('0xa8'),'-r','25',a22_0x5d87('0xa9'),a22_0x5d87('0xaa'),this[a22_0x5d87('0x14')]+_0x57ddcb+a22_0x5d87('0x5f')];const _0x1129fe=spawn(_0x202d22,_0x5dc72e);_0x1129fe[a22_0x5d87('0xab')]['on'](a22_0x5d87('0xac'),function(_0x2e66dd){console[a22_0x5d87('0x38')]('Converting\x20'+_0x18986b);});_0x1129fe[a22_0x5d87('0xad')]['on']('data',function(_0xccac72){console[a22_0x5d87('0x38')](a22_0x5d87('0xae')+_0xccac72);}['bind'](this));_0x1129fe['on'](a22_0x5d87('0xaf'),function(){console[a22_0x5d87('0x38')](a22_0x5d87('0xb0'));this[a22_0x5d87('0x1a')]++;this[a22_0x5d87('0x4d')]();}[a22_0x5d87('0x2f')](this));}[a22_0x5d87('0x63')](_0x294612){const _0x17df45=this['tempFolder']+'/'+_0x294612+'.mp4';const _0x636ce8=youtubedl('http://www.youtube.com/watch?v='+_0x294612,[a22_0x5d87('0xb1')],{'cwd':__dirname});_0x636ce8['on'](a22_0x5d87('0xb2'),function(_0x577a0e){console['log'](a22_0x5d87('0xb3'));console['log'](a22_0x5d87('0xb4')+_0x577a0e[a22_0x5d87('0xb5')]);console['log'](a22_0x5d87('0xb6')+_0x577a0e[a22_0x5d87('0x88')]);});_0x636ce8['on'](a22_0x5d87('0xb7'),function complete(_0x53584e){'use strict';console[a22_0x5d87('0x38')](a22_0x5d87('0xb4')+_0x53584e[a22_0x5d87('0xb5')]+'\x20already\x20downloaded.');});_0x636ce8['on'](a22_0x5d87('0x73'),function(){console[a22_0x5d87('0x38')](a22_0x5d87('0xb8'));this['checkVideo'](_0x17df45)[a22_0x5d87('0x31')](function(_0xd69aa2){if(_0xd69aa2){this[a22_0x5d87('0x1a')]++;}this[a22_0x5d87('0x4d')]();}['bind'](this));}[a22_0x5d87('0x2f')](this));_0x636ce8[a22_0x5d87('0x8d')](fs[a22_0x5d87('0xa0')](_0x17df45));}[a22_0x5d87('0x56')](){console['log']('Finishing');if(this[a22_0x5d87('0x1b')]){if(this[a22_0x5d87('0x1d')][a22_0x5d87('0x4c')]==0x0){fs[a22_0x5d87('0x3c')](this[a22_0x5d87('0x50')],JSON[a22_0x5d87('0x32')](this[a22_0x5d87('0x1e')]));let _0x81311b=a22_0x5d87('0xb9')+'\x0d\x0a'+a22_0x5d87('0xba')+'\x0d\x0a';for(const _0x1787fc in this[a22_0x5d87('0x1c')]){const _0x23ed05=this['downloadFiles'][_0x1787fc][a22_0x5d87('0x57')];const _0x42a932=this[a22_0x5d87('0x1c')][_0x1787fc][a22_0x5d87('0x58')];const _0x14a46f=_0x23ed05['substring'](_0x23ed05['lastIndexOf']('/')+0x1);let _0x209cb3=_0x14a46f[a22_0x5d87('0x5b')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x42a932==a22_0x5d87('0x5e')){_0x209cb3=_0x23ed05;}_0x81311b+='/home/osmc/luloclient/media/files/'+_0x209cb3+a22_0x5d87('0x5f')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x5d87('0x15')]);fsExtra['copySync'](this['tempFolder'],this[a22_0x5d87('0x15')]);fsExtra[a22_0x5d87('0x3c')](this[a22_0x5d87('0x18')],_0x81311b);fsExtra['emptyDirSync'](this[a22_0x5d87('0x14')]);console[a22_0x5d87('0x38')](a22_0x5d87('0xbb'));const _0x55ddcb=spawn('shutdown',['-r',a22_0x5d87('0xbc')]);}else{console['log'](a22_0x5d87('0xbd'));this[a22_0x5d87('0x1a')]=0x0;setTimeout(function(){this[a22_0x5d87('0x4d')]();}[a22_0x5d87('0x2f')](this),0x1388);}}else{console[a22_0x5d87('0x38')](a22_0x5d87('0xbe'));}}}exports[a22_0x5d87('0xbf')]=SyncPlaylistsService;