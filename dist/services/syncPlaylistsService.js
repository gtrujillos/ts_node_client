var a25_0x132c=['Video','includes','splice','downloading:\x20','start','Error:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','globalAgent','maxSockets','host','pathname','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','data','error','err:\x20','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','video','progress','Error\x20downloading\x20file','createImageVideo','createWriteStream','ffmpeg','1/2','-pattern_type','glob','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr:\x20','close','http://www.youtube.com/watch?v=','outFileName:\x20','--format=18','info','Download\x20started','filename:\x20','complete','finished\x20youtube\x20downloading!','Finishing','#EXTINF:0,luloPlayList','media_type','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','kodiCommandClient','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','enableClock','CECStandby()','CECActivateSource()','setRss','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','err:\x20%j','result:\x20%j','none','rssfeeds','Builder','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','videoplayer.usedisplayasclock','enableClock:\x20','2.0','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','then','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','request-progress','spawn','child_process','exec','is-image','string-template','youtube-dl','uuid/v4','package.json','url-exists','mt-files-downloader','mediaFolder','tempFolder','temp/','files/','playListFile','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','playlistChanged','failDownloadFiles','kodiHost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','playerService','init','readFileSync','context','parse','config','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','api/player.php?player_id={0}','kodi','checkDependencies','loadMediaList','updateSettings','getStatus','registerClient','bind','playlist','getItems','stringify','networkInterfaces','version','post','log','catch','deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','label','reportStatus','reportStatus\x20playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','checkFolders','ensureDir','newPlayList','emptyDirSync','downloadFiles','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','hasPlayListChanged','toString','this.currentFile:\x20','currentFile','\x20of\x20','finishProcess','path','substring','lastIndexOf','split','slice','join','youtube_single','image','.mp4','**********+','Downloading:\x20','downloadYouTube','downloader','checkVideo','videoFile:\x20','track','@type'];(function(_0x1e0870,_0x3e9a87){var _0x5abd4f=function(_0x1bf7be){while(--_0x1bf7be){_0x1e0870['push'](_0x1e0870['shift']());}};_0x5abd4f(++_0x3e9a87);}(a25_0x132c,0x161));var a25_0x3ff1=function(_0xf34179,_0x5b6b9b){_0xf34179=_0xf34179-0x0;var _0x554d0e=a25_0x132c[_0xf34179];return _0x554d0e;};'use strict';var __awaiter=this&&this[a25_0x3ff1('0x0')]||function(_0x1c29a6,_0x520849,_0x3df201,_0x537b2f){function _0x3e78a9(_0x162eb4){return _0x162eb4 instanceof _0x3df201?_0x162eb4:new _0x3df201(function(_0x463ae9){_0x463ae9(_0x162eb4);});}return new(_0x3df201||(_0x3df201=Promise))(function(_0x23c97b,_0x151790){function _0x4d9b25(_0x31711d){try{_0x164ecc(_0x537b2f[a25_0x3ff1('0x1')](_0x31711d));}catch(_0x4ded84){_0x151790(_0x4ded84);}}function _0x4f0e7f(_0x1b5be7){try{_0x164ecc(_0x537b2f[a25_0x3ff1('0x2')](_0x1b5be7));}catch(_0x2afcef){_0x151790(_0x2afcef);}}function _0x164ecc(_0x49ce1b){_0x49ce1b[a25_0x3ff1('0x3')]?_0x23c97b(_0x49ce1b[a25_0x3ff1('0x4')]):_0x3e78a9(_0x49ce1b[a25_0x3ff1('0x4')])[a25_0x3ff1('0x5')](_0x4d9b25,_0x4f0e7f);}_0x164ecc((_0x537b2f=_0x537b2f['apply'](_0x1c29a6,_0x520849||[]))[a25_0x3ff1('0x1')]());});};Object[a25_0x3ff1('0x6')](exports,a25_0x3ff1('0x7'),{'value':!![]});const HttpClientService_1=require(a25_0x3ff1('0x8'));const playerService_1=require('./playerService');const mediainfo=require(a25_0x3ff1('0x9'));const fs=require('fs');const url=require(a25_0x3ff1('0xa'));const http=require(a25_0x3ff1('0xb'));const fsExtra=require(a25_0x3ff1('0xc'));const request=require(a25_0x3ff1('0xd'));const progress=require(a25_0x3ff1('0xe'));const spawn=require('child_process')[a25_0x3ff1('0xf')];const exec=require(a25_0x3ff1('0x10'))[a25_0x3ff1('0x11')];const isImage=require(a25_0x3ff1('0x12'));const format=require(a25_0x3ff1('0x13'));const os=require('os');const youtubedl=require(a25_0x3ff1('0x14'));const uuidv4=require(a25_0x3ff1('0x15'));const configFile='config.json';const contextFile=a25_0x3ff1('0x16');const urlExists=require(a25_0x3ff1('0x17'));const kodi_rpc=require('node-kodi');const Downloader=require(a25_0x3ff1('0x18'));class SyncPlaylistsService{constructor(){this[a25_0x3ff1('0x19')]='media/';this[a25_0x3ff1('0x1a')]=this[a25_0x3ff1('0x19')]+a25_0x3ff1('0x1b');this['filesFolder']=this[a25_0x3ff1('0x19')]+a25_0x3ff1('0x1c');this[a25_0x3ff1('0x1d')]=this[a25_0x3ff1('0x19')]+a25_0x3ff1('0x1e');this[a25_0x3ff1('0x1f')]=this[a25_0x3ff1('0x20')]+a25_0x3ff1('0x21');this['currentFile']=0x0;this[a25_0x3ff1('0x22')]=![];this['downloadFiles']=[];this[a25_0x3ff1('0x23')]=[];this['newPlayList']={};this[a25_0x3ff1('0x24')]='http://localhost';this[a25_0x3ff1('0x25')]=a25_0x3ff1('0x26');this[a25_0x3ff1('0x27')]=a25_0x3ff1('0x28');this[a25_0x3ff1('0x29')]=![];this[a25_0x3ff1('0x2a')]=new HttpClientService_1[(a25_0x3ff1('0x2b'))]();this[a25_0x3ff1('0x2c')]=new playerService_1['PlayerService']();}[a25_0x3ff1('0x2d')](){this['config']=JSON['parse'](fs[a25_0x3ff1('0x2e')](configFile));this[a25_0x3ff1('0x2f')]=JSON[a25_0x3ff1('0x30')](fs[a25_0x3ff1('0x2e')](contextFile));this['playerId']=this[a25_0x3ff1('0x31')][a25_0x3ff1('0x32')];this['baseURL']=process[a25_0x3ff1('0x33')][a25_0x3ff1('0x34')]+a25_0x3ff1('0x35');this[a25_0x3ff1('0x36')]=this[a25_0x3ff1('0x37')]+a25_0x3ff1('0x38');this['playerServiceURL']=this[a25_0x3ff1('0x37')]+a25_0x3ff1('0x39');this[a25_0x3ff1('0x3a')]=new kodi_rpc({'url':this[a25_0x3ff1('0x24')],'user':this[a25_0x3ff1('0x25')],'password':this['kodiPassword']});this[a25_0x3ff1('0x3b')]();this['registerClient']();this['checkFolders']();this[a25_0x3ff1('0x3c')]();this[a25_0x3ff1('0x3d')]();setInterval(function(){this[a25_0x3ff1('0x3e')]();}['bind'](this),0x2710);setInterval(function(){this[a25_0x3ff1('0x3f')]();}[a25_0x3ff1('0x40')](this),0x493e0);}[a25_0x3ff1('0x3b')](){}['registerClient'](){this[a25_0x3ff1('0x3a')][a25_0x3ff1('0x41')][a25_0x3ff1('0x42')](0x1)[a25_0x3ff1('0x5')](function(_0x454b68){const _0x799cde=JSON[a25_0x3ff1('0x43')](_0x454b68);const _0x2a06a={'player_id':this[a25_0x3ff1('0x32')],'device_uuid':this[a25_0x3ff1('0x31')]['deviceUuid'],'network_info':JSON[a25_0x3ff1('0x43')](os[a25_0x3ff1('0x44')]()),'firmware_info':JSON[a25_0x3ff1('0x43')](this[a25_0x3ff1('0x2f')][a25_0x3ff1('0x45')]),'playlist':_0x799cde,'playing_item':'','status':0x0};this[a25_0x3ff1('0x2a')][a25_0x3ff1('0x46')]('http://restapi.lulo.run/player_devices/register',_0x2a06a,![])[a25_0x3ff1('0x5')](function(_0x34ea8b){console[a25_0x3ff1('0x47')]('register\x20response:\x20'+Date());})[a25_0x3ff1('0x48')](function(_0x1592fb){});console['log'](_0x2a06a);}[a25_0x3ff1('0x40')](this));const _0x10e867=this['config'][a25_0x3ff1('0x49')];if(!_0x10e867||_0x10e867==''){this[a25_0x3ff1('0x31')][a25_0x3ff1('0x49')]=uuidv4();this[a25_0x3ff1('0x31')]={'deviceUuid':this[a25_0x3ff1('0x31')][a25_0x3ff1('0x49')],'playerId':this[a25_0x3ff1('0x31')]['playerId']};fs[a25_0x3ff1('0x4a')](configFile,JSON[a25_0x3ff1('0x43')](this[a25_0x3ff1('0x31')]));}}[a25_0x3ff1('0x3e')](){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x3e'));this[a25_0x3ff1('0x3a')][a25_0x3ff1('0x4b')][a25_0x3ff1('0x4c')]()[a25_0x3ff1('0x5')](function(_0x13614e){const _0x5d9544=_0x13614e['item'][a25_0x3ff1('0x4d')];this[a25_0x3ff1('0x4e')](_0x5d9544);}[a25_0x3ff1('0x40')](this))[a25_0x3ff1('0x48')](function(_0x27c547){console[a25_0x3ff1('0x47')](_0x27c547);this[a25_0x3ff1('0x4e')](JSON[a25_0x3ff1('0x43')](_0x27c547));}[a25_0x3ff1('0x40')](this));}['reportStatus'](_0x2f4a90){console['log'](a25_0x3ff1('0x4f')+_0x2f4a90);const _0x535e21={'player_id':this[a25_0x3ff1('0x32')],'device_uuid':this['config'][a25_0x3ff1('0x49')],'status':_0x2f4a90!=''&&_0x2f4a90!=null?0x1:0x0,'playing_item':_0x2f4a90};this[a25_0x3ff1('0x2a')][a25_0x3ff1('0x46')](a25_0x3ff1('0x50'),_0x535e21,![])[a25_0x3ff1('0x5')](function(_0x3b4c9e){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x51'));})[a25_0x3ff1('0x48')](function(_0x2f3c00){});}[a25_0x3ff1('0x52')](){fsExtra['ensureDir'](this[a25_0x3ff1('0x19')],_0x39de35=>{});fsExtra[a25_0x3ff1('0x53')](this['tempFolder'],_0x4ca146=>{});fsExtra[a25_0x3ff1('0x53')](this[a25_0x3ff1('0x20')],_0x1a7817=>{});}['loadMediaList'](){const _0x573fd3=format(this['playListServiceURL'],this['playerId']);console[a25_0x3ff1('0x47')](_0x573fd3);request({'url':_0x573fd3,'json':!![]},function(_0x3edade,_0x41bda2,_0x1f256f){console[a25_0x3ff1('0x47')]('loadMediaList:\x20');this[a25_0x3ff1('0x54')]=_0x1f256f;this['playlistChanged']=this['hasPlayListChanged']();fsExtra[a25_0x3ff1('0x55')](this[a25_0x3ff1('0x1a')]);this[a25_0x3ff1('0x56')]=[];this[a25_0x3ff1('0x23')]=[];this['currentFile']=0x0;for(const _0x1993d2 in _0x1f256f){this[a25_0x3ff1('0x56')][a25_0x3ff1('0x57')](_0x1f256f[_0x1993d2]);}console['log'](a25_0x3ff1('0x58')+this[a25_0x3ff1('0x56')]['length']);if(this[a25_0x3ff1('0x56')][a25_0x3ff1('0x59')]>0x0){this[a25_0x3ff1('0x5a')]();}}[a25_0x3ff1('0x40')](this));}[a25_0x3ff1('0x5b')](){this[a25_0x3ff1('0x29')]=!![];if(fsExtra['existsSync'](this[a25_0x3ff1('0x1a')])){fsExtra[a25_0x3ff1('0x55')](this[a25_0x3ff1('0x1a')]);}if(fsExtra[a25_0x3ff1('0x5c')](this[a25_0x3ff1('0x20')])){fsExtra[a25_0x3ff1('0x55')](this[a25_0x3ff1('0x20')]);}if(!fsExtra[a25_0x3ff1('0x5c')](this[a25_0x3ff1('0x1d')])){fsExtra[a25_0x3ff1('0x5d')](this['playListFile']);}if(!fsExtra[a25_0x3ff1('0x5c')](this[a25_0x3ff1('0x1f')])){fsExtra[a25_0x3ff1('0x5d')](this['m3uFile']);}this[a25_0x3ff1('0x3c')]();}[a25_0x3ff1('0x5e')](){const _0x442438=JSON[a25_0x3ff1('0x43')](this[a25_0x3ff1('0x54')]);try{if(!fsExtra[a25_0x3ff1('0x5c')](this[a25_0x3ff1('0x1d')])){return!![];}else{const _0x54bdc1=fsExtra[a25_0x3ff1('0x2e')](this[a25_0x3ff1('0x1d')])[a25_0x3ff1('0x5f')]();if(_0x54bdc1!=_0x442438){return!![];}}}catch(_0x1f2d5c){console[a25_0x3ff1('0x47')](_0x1f2d5c);}return![];}[a25_0x3ff1('0x5a')](){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x60')+this[a25_0x3ff1('0x61')]+a25_0x3ff1('0x62')+this[a25_0x3ff1('0x56')][a25_0x3ff1('0x59')]);if(this[a25_0x3ff1('0x61')]>=this['downloadFiles'][a25_0x3ff1('0x59')]){this[a25_0x3ff1('0x63')]();return;}const _0x5dca66=String(this[a25_0x3ff1('0x56')][this[a25_0x3ff1('0x61')]][a25_0x3ff1('0x64')]);const _0x4ebf22=this[a25_0x3ff1('0x56')][this[a25_0x3ff1('0x61')]]['media_type'];let _0x41ca10=_0x5dca66[a25_0x3ff1('0x65')](_0x5dca66[a25_0x3ff1('0x66')]('/')+0x1);const _0x3355b3=_0x41ca10[a25_0x3ff1('0x67')]('.')[a25_0x3ff1('0x68')](0x0,-0x1)[a25_0x3ff1('0x69')]('.');let _0x10e5ac=this[a25_0x3ff1('0x37')]+_0x5dca66;const _0x2690fc=_0x10e5ac[a25_0x3ff1('0x67')]('.')[a25_0x3ff1('0x68')](0x0,-0x1)[a25_0x3ff1('0x69')]('.');if(_0x4ebf22==a25_0x3ff1('0x6a')){_0x41ca10=_0x41ca10+'.mp4';}else if(_0x4ebf22==a25_0x3ff1('0x6b')){_0x41ca10=_0x3355b3+a25_0x3ff1('0x6c');_0x10e5ac=_0x2690fc+'.mp4';}console[a25_0x3ff1('0x47')]('**********+');console[a25_0x3ff1('0x47')](_0x5dca66);console[a25_0x3ff1('0x47')](_0x4ebf22);console[a25_0x3ff1('0x47')](_0x41ca10);console['log'](_0x10e5ac);console['log'](_0x3355b3);console[a25_0x3ff1('0x47')](_0x2690fc);console[a25_0x3ff1('0x47')](a25_0x3ff1('0x6d'));if(fsExtra[a25_0x3ff1('0x5c')](this[a25_0x3ff1('0x1a')]+_0x41ca10)){this['checkVideo'](this[a25_0x3ff1('0x1a')]+_0x41ca10)[a25_0x3ff1('0x5')](function(_0x4656ab){if(_0x4656ab){this[a25_0x3ff1('0x61')]++;}else{this['playlistChanged']=!![];}this[a25_0x3ff1('0x5a')]();}[a25_0x3ff1('0x40')](this));}else if(fsExtra[a25_0x3ff1('0x5c')](this['filesFolder']+_0x41ca10)){this['checkVideo'](this[a25_0x3ff1('0x20')]+_0x41ca10)[a25_0x3ff1('0x5')](function(_0xc65f4c){if(_0xc65f4c){fsExtra['copySync'](this['filesFolder']+_0x41ca10,this[a25_0x3ff1('0x1a')]+_0x41ca10);this[a25_0x3ff1('0x61')]++;}else{this[a25_0x3ff1('0x22')]=!![];}this['download']();}[a25_0x3ff1('0x40')](this));}else{console[a25_0x3ff1('0x47')](a25_0x3ff1('0x6e')+_0x10e5ac);this['playlistChanged']=!![];if(_0x4ebf22==a25_0x3ff1('0x6a')){this[a25_0x3ff1('0x6f')](_0x5dca66);}else{this[a25_0x3ff1('0x70')](_0x10e5ac,_0x41ca10,_0x4ebf22);}}}[a25_0x3ff1('0x71')](_0x5521cd){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x72')+_0x5521cd);const _0x3ca50f=yield mediainfo(_0x5521cd)[a25_0x3ff1('0x48')](_0x43133d=>{console[a25_0x3ff1('0x47')](_0x43133d);fsExtra[a25_0x3ff1('0x5d')](_0x5521cd);return![];});const _0x651093=_0x3ca50f['media']['track'][a25_0x3ff1('0x59')]>0x1&&_0x3ca50f['media'][a25_0x3ff1('0x73')][0x1][a25_0x3ff1('0x74')]==a25_0x3ff1('0x75');if(!_0x651093){fsExtra[a25_0x3ff1('0x5d')](_0x5521cd);}console['log']('mediainfo\x20check:'+_0x651093);return _0x651093;});}['downloader'](_0x4e4ece,_0x59c47c,_0x554eb9){const _0x21af2f=new Downloader();console[a25_0x3ff1('0x47')](_0x4e4ece);console[a25_0x3ff1('0x47')](_0x59c47c);console['log'](_0x554eb9);const _0x3edaa=_0x21af2f[a25_0x3ff1('0x5a')](_0x4e4ece,this['tempFolder']+_0x59c47c);urlExists(_0x4e4ece,function(_0x19af4e,_0x5ec1e9){if(_0x5ec1e9){if(this[a25_0x3ff1('0x23')][a25_0x3ff1('0x76')](this[a25_0x3ff1('0x61')])){const _0x361e36=this['failDownloadFiles']['indexOf'](this['currentFile']);if(_0x361e36>-0x1){this[a25_0x3ff1('0x23')][a25_0x3ff1('0x77')](_0x361e36,0x1);}}console[a25_0x3ff1('0x47')](a25_0x3ff1('0x78')+_0x4e4ece);_0x3edaa[a25_0x3ff1('0x79')]();}else{if(!this['failDownloadFiles']['includes'](this[a25_0x3ff1('0x61')])){this[a25_0x3ff1('0x23')][a25_0x3ff1('0x57')](this[a25_0x3ff1('0x61')]);}console[a25_0x3ff1('0x47')](a25_0x3ff1('0x7a')+_0x4e4ece);this['currentFile']++;this[a25_0x3ff1('0x5a')]();}}[a25_0x3ff1('0x40')](this));_0x3edaa['on']('start',function(_0x3edaa){console[a25_0x3ff1('0x47')]('start:\x20'+_0x4e4ece);});_0x3edaa['on']('error',function(_0x3edaa){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x7b'));this['download']();}['bind'](this));_0x3edaa['on']('end',function(_0x3edaa){console['log'](a25_0x3ff1('0x7c'));console[a25_0x3ff1('0x47')](a25_0x3ff1('0x7d')+_0x59c47c);console[a25_0x3ff1('0x47')](a25_0x3ff1('0x7e')+_0x554eb9);this[a25_0x3ff1('0x71')](this['tempFolder']+_0x59c47c)[a25_0x3ff1('0x5')](function(_0x42376e){if(_0x42376e){this['currentFile']++;}this[a25_0x3ff1('0x5a')]();}[a25_0x3ff1('0x40')](this));}[a25_0x3ff1('0x40')](this));_0x3edaa['on'](a25_0x3ff1('0x7f'),function(_0x3edaa){console['log']('stopped');});_0x3edaa['on'](a25_0x3ff1('0x80'),function(_0x3edaa){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x80'));});_0x3edaa['on'](a25_0x3ff1('0x81'),function(_0x3edaa){console[a25_0x3ff1('0x47')]('retry');});}[a25_0x3ff1('0x82')](_0x7c1b20,_0x484833,_0x4782a7,_0x3a0b58){console[a25_0x3ff1('0x47')]('downloadHTTPFile');console['log'](_0x7c1b20);const _0x2123e4=!![];let _0x277087=0x0;const _0x57c093='';console[a25_0x3ff1('0x47')](a25_0x3ff1('0x83')+_0x7c1b20+a25_0x3ff1('0x84')+_0x484833);if(_0x277087){if(_0x277087>0x5){_0x3a0b58(a25_0x3ff1('0x85'),_0x7c1b20,_0x4782a7,null);return;}}else{_0x277087=0x0;}const _0x57e98e=this[a25_0x3ff1('0x1a')]+_0x484833;let _0x35d7f3;if(_0x3a0b58===undefined){console['log'](a25_0x3ff1('0x86')+_0x7c1b20+'\x20to\x20'+_0x57e98e);_0x3a0b58=function(_0x2014ca,_0x53ac49){console[a25_0x3ff1('0x47')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x2014ca,_0x53ac49);};}http[a25_0x3ff1('0x87')][a25_0x3ff1('0x88')]=0x64;const _0x52b49a={'host':url[a25_0x3ff1('0x30')](_0x7c1b20)[a25_0x3ff1('0x89')],'port':0x50,'path':url[a25_0x3ff1('0x30')](_0x7c1b20)[a25_0x3ff1('0x8a')],'agent':![]};const _0x4508af=http['get'](_0x52b49a,function(_0xa3afb0){let _0x379862=0x0;let _0x2a87e6=0x0;function _0x332027(){if(_0x379862===undefined){console[a25_0x3ff1('0x47')](_0x484833+a25_0x3ff1('0x8b')+_0x2a87e6+'/'+'?');}const _0x167c46=_0x2a87e6/_0x379862*0x64;console[a25_0x3ff1('0x47')](_0x484833+a25_0x3ff1('0x8c')+_0x167c46+'%\x09'+_0x2a87e6+'/'+_0x379862);}console[a25_0x3ff1('0x47')](_0x484833+'\x20'+_0xa3afb0['statusCode']);switch(_0xa3afb0[a25_0x3ff1('0x8d')]){case 0xc8:_0x379862=_0xa3afb0[a25_0x3ff1('0x8e')][a25_0x3ff1('0x8f')]||_0x57c093;fs[a25_0x3ff1('0x90')](_0x57e98e,function(_0x3fc63d,_0x3458db){if(!_0x3fc63d){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x91')+_0x57e98e);if(_0x3458db[a25_0x3ff1('0x92')]==_0x379862){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x93')+_0x379862+')');console[a25_0x3ff1('0x47')](a25_0x3ff1('0x94'));}else{console[a25_0x3ff1('0x47')](a25_0x3ff1('0x95')+_0x3458db['size']+a25_0x3ff1('0x96')+_0x379862+')');}}_0x35d7f3=fs['createWriteStream'](_0x57e98e);_0xa3afb0[a25_0x3ff1('0x97')](_0x35d7f3);_0xa3afb0['on'](a25_0x3ff1('0x98'),function(_0x2df9ac){_0x2a87e6+=_0x2df9ac[a25_0x3ff1('0x59')];_0x332027();});_0x4508af['on'](a25_0x3ff1('0x99'),function(_0x3fc63d){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x9a'));console[a25_0x3ff1('0x47')](_0x3fc63d);});_0x35d7f3['on']('finish',function(){console['log'](a25_0x3ff1('0x9b')+_0x7c1b20+a25_0x3ff1('0x84')+_0x484833);_0x3a0b58(null,_0x484833,_0x4782a7,_0x484833);}['bind'](this));});break;case 0x12e:const _0x2d5c5f=_0xa3afb0[a25_0x3ff1('0x8e')][a25_0x3ff1('0x9c')];console[a25_0x3ff1('0x47')](a25_0x3ff1('0x9d')+_0x7c1b20+a25_0x3ff1('0x84')+_0x2d5c5f);if(_0x277087<0x5){this[a25_0x3ff1('0x82')](_0x2d5c5f,_0x484833,_0x3a0b58,_0x277087++);}else{console[a25_0x3ff1('0x99')](a25_0x3ff1('0x9e')+_0x7c1b20+'.');_0x3a0b58('302',null,null,null);}return;case 0x194:console[a25_0x3ff1('0x47')]('File\x20Not\x20Found\x20'+_0x7c1b20);default:console[a25_0x3ff1('0x47')](a25_0x3ff1('0x9f')+_0x7c1b20+a25_0x3ff1('0xa0')+_0xa3afb0[a25_0x3ff1('0x8d')]);_0x4508af[a25_0x3ff1('0xa1')]();_0x3a0b58(_0xa3afb0['statusCode'],null,null,null);return;}})['on'](a25_0x3ff1('0x99'),function(_0x14927a){console['log'](a25_0x3ff1('0xa2')+_0x7c1b20+'\x20'+_0x14927a[a25_0x3ff1('0xa3')]);_0x3a0b58(_0x14927a,null,null,null);});}[a25_0x3ff1('0xa4')](_0x2ba343,_0x1f61d1,_0x534cad,_0x152c1c){console[a25_0x3ff1('0x47')]('downloadHTTPFileCallback');console['log'](_0x2ba343);console['log'](_0x1f61d1);console[a25_0x3ff1('0x47')](_0x534cad);console[a25_0x3ff1('0x47')](_0x152c1c);if(_0x534cad=='image'){const _0x24733b=this[a25_0x3ff1('0x56')][this[a25_0x3ff1('0x61')]][a25_0x3ff1('0xa5')]!=null?this[a25_0x3ff1('0x56')][this['currentFile']]['duration']:0x1e;this['createImageVideo'](_0x152c1c,_0x24733b);}else if(_0x534cad==a25_0x3ff1('0xa6')){if(_0x2ba343==null&&_0x1f61d1!=''){this[a25_0x3ff1('0x61')]++;}this[a25_0x3ff1('0x5a')]();}console[a25_0x3ff1('0x47')](this['currentFile']);}['downloadRequestFile'](_0x475295,_0x22c793,_0x3f04be){progress(request(_0x475295),{})['on'](a25_0x3ff1('0xa7'),function(_0x1f6bd5){console['log'](_0x1f6bd5);})['on'](a25_0x3ff1('0x99'),function(_0x30b3fb){console['log'](a25_0x3ff1('0xa8'));this['download']();})['on'](a25_0x3ff1('0x7c'),function(){console[a25_0x3ff1('0x47')](a25_0x3ff1('0x7d')+_0x22c793);console[a25_0x3ff1('0x47')](a25_0x3ff1('0x7e')+_0x3f04be);if(_0x3f04be==a25_0x3ff1('0x6b')){const _0x2029fc=this[a25_0x3ff1('0x56')][this['currentFile']][a25_0x3ff1('0xa5')]!=null?this[a25_0x3ff1('0x56')][this[a25_0x3ff1('0x61')]][a25_0x3ff1('0xa5')]:0x1e;this[a25_0x3ff1('0xa9')](_0x22c793,_0x2029fc);}else if(_0x3f04be=='video'){this[a25_0x3ff1('0x61')]++;this[a25_0x3ff1('0x5a')]();}}[a25_0x3ff1('0x40')](this))[a25_0x3ff1('0x97')](fs[a25_0x3ff1('0xaa')](this[a25_0x3ff1('0x1a')]+_0x22c793));}[a25_0x3ff1('0xa9')](_0x4ead7c,_0x47e7fa=0x1e){const _0x3d4d5e=this[a25_0x3ff1('0x1a')]+_0x4ead7c;console[a25_0x3ff1('0x47')](_0x3d4d5e);console['log'](_0x4ead7c);const _0x43bfa2=_0x4ead7c[a25_0x3ff1('0x67')]('.')[a25_0x3ff1('0x68')](0x0,-0x1)[a25_0x3ff1('0x69')]('.');const _0x56aef6=a25_0x3ff1('0xab');const _0x2f8835=['-y','-r',a25_0x3ff1('0xac'),'-loop','1',a25_0x3ff1('0xad'),a25_0x3ff1('0xae'),'-i',_0x3d4d5e,'-t',String(_0x47e7fa),'-c:v',a25_0x3ff1('0xaf'),a25_0x3ff1('0xb0'),a25_0x3ff1('0xb1'),'-r','25',a25_0x3ff1('0xb2'),a25_0x3ff1('0xb3'),this[a25_0x3ff1('0x1a')]+_0x43bfa2+'.mp4'];const _0x1c65f3=spawn(_0x56aef6,_0x2f8835);_0x1c65f3[a25_0x3ff1('0xb4')]['on'](a25_0x3ff1('0x98'),function(_0x152f88){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xb5')+_0x3d4d5e);});_0x1c65f3['stderr']['on'](a25_0x3ff1('0x98'),function(_0x17ca57){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xb6')+_0x17ca57);}[a25_0x3ff1('0x40')](this));_0x1c65f3['on'](a25_0x3ff1('0xb7'),function(){console[a25_0x3ff1('0x47')]('finished\x20mp4\x20convert');this['currentFile']++;this['download']();}[a25_0x3ff1('0x40')](this));}[a25_0x3ff1('0x6f')](_0xcd6b2f){const _0x64ce27=this[a25_0x3ff1('0x1a')]+'/'+_0xcd6b2f+a25_0x3ff1('0x6c');const _0x2070eb=a25_0x3ff1('0xb8')+_0xcd6b2f;console[a25_0x3ff1('0x47')]('youtubeURL:\x20'+_0x2070eb);console['log'](a25_0x3ff1('0xb9')+_0x64ce27);const _0x4db8ba=youtubedl(_0x2070eb,[a25_0x3ff1('0xba'),'--no-check-certificate'],{'cwd':__dirname});_0x4db8ba['on'](a25_0x3ff1('0xbb'),function(_0x132306){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xbc'));console[a25_0x3ff1('0x47')](a25_0x3ff1('0xbd')+_0x132306['_filename']);console['log']('size:\x20'+_0x132306[a25_0x3ff1('0x92')]);});_0x4db8ba['on'](a25_0x3ff1('0xbe'),function complete(_0x2ac30d){'use strict';console[a25_0x3ff1('0x47')]('filename:\x20'+_0x2ac30d['_filename']+'\x20already\x20downloaded.');});_0x4db8ba['on'](a25_0x3ff1('0x7c'),function(){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xbf'));this[a25_0x3ff1('0x71')](_0x64ce27)[a25_0x3ff1('0x5')](function(_0x28c01f){if(_0x28c01f){this[a25_0x3ff1('0x61')]++;}this['download']();}[a25_0x3ff1('0x40')](this));}[a25_0x3ff1('0x40')](this));_0x4db8ba[a25_0x3ff1('0x97')](fs['createWriteStream'](_0x64ce27));}[a25_0x3ff1('0x63')](){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xc0'));if(this['playlistChanged']){if(this['failDownloadFiles'][a25_0x3ff1('0x59')]==0x0){console['log']('this.playListFile:\x20'+this[a25_0x3ff1('0x1d')]);fs[a25_0x3ff1('0x4a')](this['playListFile'],JSON[a25_0x3ff1('0x43')](this[a25_0x3ff1('0x54')]));let _0x25f26e='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a25_0x3ff1('0xc1')+'\x0d\x0a';for(const _0x39a69b in this[a25_0x3ff1('0x56')]){const _0x124ab6=this['downloadFiles'][_0x39a69b][a25_0x3ff1('0x64')];const _0x3ef523=this[a25_0x3ff1('0x56')][_0x39a69b][a25_0x3ff1('0xc2')];const _0x4a8ffe=_0x124ab6[a25_0x3ff1('0x65')](_0x124ab6[a25_0x3ff1('0x66')]('/')+0x1);let _0x4f69ed=_0x4a8ffe['split']('.')[a25_0x3ff1('0x68')](0x0,-0x1)[a25_0x3ff1('0x69')]('.');if(_0x3ef523==a25_0x3ff1('0x6a')){_0x4f69ed=_0x124ab6;}_0x25f26e+='/home/osmc/luloclient/media/files/'+_0x4f69ed+a25_0x3ff1('0x6c')+'\x0d\x0a';console[a25_0x3ff1('0x47')](a25_0x3ff1('0xc3')+_0x25f26e);}console['log'](a25_0x3ff1('0xc3')+_0x25f26e);fsExtra[a25_0x3ff1('0x55')](this['filesFolder']);console[a25_0x3ff1('0x47')](a25_0x3ff1('0xc4')+this[a25_0x3ff1('0x1a')]);fsExtra['copySync'](this[a25_0x3ff1('0x1a')],this[a25_0x3ff1('0x20')]);console['log'](a25_0x3ff1('0xc5')+this[a25_0x3ff1('0x1f')]);fsExtra[a25_0x3ff1('0x4a')](this[a25_0x3ff1('0x1f')],_0x25f26e);console['log'](a25_0x3ff1('0xc6')+this['tempFolder']);fsExtra[a25_0x3ff1('0x55')](this[a25_0x3ff1('0x1a')]);console[a25_0x3ff1('0x47')]('Rebooting..');this[a25_0x3ff1('0xc7')]();}else{console['log'](a25_0x3ff1('0xc8'));this[a25_0x3ff1('0x61')]=0x0;setTimeout(function(){this[a25_0x3ff1('0x5a')]();}['bind'](this),0x1388);}}else{console[a25_0x3ff1('0x47')](a25_0x3ff1('0xc9'));}}[a25_0x3ff1('0xca')](){this[a25_0x3ff1('0xcb')](a25_0x3ff1('0xcc'),{'playlistid':0x1},function(_0x7015d7){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xcd'));console[a25_0x3ff1('0x47')](_0x7015d7);this[a25_0x3ff1('0xcb')](a25_0x3ff1('0xce'),{'item':{'file':a25_0x3ff1('0xcf')},'playlistid':0x1},function(_0x7015d7){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xd0'));console[a25_0x3ff1('0x47')](_0x7015d7);this['jsonrpcClient'](a25_0x3ff1('0xd1'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x7015d7){console[a25_0x3ff1('0x47')]('Playlist.Opened');console['log'](_0x7015d7);this[a25_0x3ff1('0xd2')](a25_0x3ff1('0xd3'));}[a25_0x3ff1('0x40')](this));}[a25_0x3ff1('0x40')](this));}[a25_0x3ff1('0x40')](this));}['reboot'](){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xd4'));exec(a25_0x3ff1('0xd5'),function(_0x5a77ac){console['log'](_0x5a77ac);});}[a25_0x3ff1('0x3d')](){const _0x1115bf=format(this['playerServiceURL'],this['playerId']);console[a25_0x3ff1('0x47')](_0x1115bf);request({'url':_0x1115bf,'json':!![]},function(_0x90bafd,_0x2519f4,_0x4fd9a1){if(_0x4fd9a1[a25_0x3ff1('0x59')]>0x0){const _0x2259fa=_0x4fd9a1[0x0];const _0x581468=_0x2259fa['rss'];const _0x5ecb51=_0x2259fa['header_active']==0x1;this['setRss'](_0x581468);this[a25_0x3ff1('0xd6')](_0x5ecb51);this[a25_0x3ff1('0x3f')]();}console[a25_0x3ff1('0x47')](_0x4fd9a1);}[a25_0x3ff1('0x40')](this));}['turnOffTV'](){this['kodiCommandClient'](a25_0x3ff1('0xd7'));}['turnOnTV'](){this[a25_0x3ff1('0xd2')](a25_0x3ff1('0xd8'));}[a25_0x3ff1('0xd9')](_0x2f31c1){const _0x480661=_0x2f31c1!=null&&_0x2f31c1!='';const _0x54029d=a25_0x3ff1('0xda');if(fsExtra['existsSync'](_0x54029d)){const _0x2f8626=fsExtra['readFileSync'](_0x54029d);console['log'](a25_0x3ff1('0xdb')+_0x2f8626);const _0x19618c=require('xml2js');const _0xc4d783=_0x19618c['parseString'];_0xc4d783(_0x2f8626,function(_0x9996fd,_0x42705a){console[a25_0x3ff1('0x47')](a25_0x3ff1('0xdc'),_0x9996fd);console['log'](a25_0x3ff1('0xdd'),_0x42705a);if(!_0x2f31c1||_0x2f31c1==null||_0x2f31c1==''){_0x2f31c1=a25_0x3ff1('0xde');}_0x42705a[a25_0x3ff1('0xdf')]['set'][0x0]['feed'][0x0]['_']=_0x2f31c1;const _0x110991=new _0x19618c[(a25_0x3ff1('0xe0'))]();const _0x201e30=_0x110991[a25_0x3ff1('0xe1')](_0x42705a);console[a25_0x3ff1('0x47')](a25_0x3ff1('0xe2'),_0x201e30);fsExtra[a25_0x3ff1('0x4a')](_0x54029d,_0x201e30);});this[a25_0x3ff1('0xd2')](a25_0x3ff1('0xe3'));this['jsonrpcClient'](a25_0x3ff1('0xe4'),{'setting':'lookandfeel.enablerssfeeds','value':_0x480661},function(_0x40c623){console[a25_0x3ff1('0x47')]('setRss:');console[a25_0x3ff1('0x47')](_0x40c623);}[a25_0x3ff1('0x40')](this));}}[a25_0x3ff1('0xd6')](_0x2dc1db){this['jsonrpcClient']('Settings.SetSettingValue',{'setting':a25_0x3ff1('0xe5'),'value':_0x2dc1db},function(_0x379908){console['log'](a25_0x3ff1('0xe6'));console[a25_0x3ff1('0x47')](_0x379908);}['bind'](this));}[a25_0x3ff1('0xd2')](_0x160bc4){exec('kodi-send\x20--action=\x22'+_0x160bc4+'\x22',function(_0x5c386c){console[a25_0x3ff1('0x47')](_0x5c386c);});}[a25_0x3ff1('0xcb')](_0x109d7b,_0x2e39a7,_0x4f77c7){const _0x402e17={'jsonrpc':a25_0x3ff1('0xe7'),'method':_0x109d7b,'params':_0x2e39a7,'id':0x1};const _0x16c4b3={'user':this[a25_0x3ff1('0x25')],'pass':this[a25_0x3ff1('0x27')]};console['log']('jsonrpcClient\x20data',_0x402e17);console['log'](a25_0x3ff1('0xe8'),_0x16c4b3);this[a25_0x3ff1('0x2a')]['post'](this[a25_0x3ff1('0x24')]+a25_0x3ff1('0xe9'),_0x402e17,![],_0x16c4b3)[a25_0x3ff1('0x5')](function(_0x5117fd){_0x4f77c7(_0x5117fd);})[a25_0x3ff1('0x48')](function(_0x2378fb){});}}exports[a25_0x3ff1('0xea')]=SyncPlaylistsService;