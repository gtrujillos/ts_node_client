var a23_0x474c=['deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','item','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','tempFolder','failDownloadFiles','push','Total:\x20','length','reloadMediaList','existsSync','removeSync','toString','download','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','substring','split','slice','join','youtube_single','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloader','media','track','@type','mediainfo\x20check:','indexOf','splice','downloading:\x20','includes','Error:\x20','start','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(',')\x20vs\x20New(','createWriteStream','pipe','err:\x20','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','Problem\x20downloading\x20','\x20STATUS:\x20','abort','message','downloadHTTPFileCallback','image','duration','createImageVideo','video','progress','Error\x20downloading\x20file','ffmpeg','1/2','-loop','glob','-c:v','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','--format=18','info','filename:\x20','_filename','complete','\x20already\x20downloaded.','Finishing','path','lastIndexOf','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','jsonrpcClient','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','Rebooting','rss','CECStandby()','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','none','rssfeeds','feed','Builder','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','enableClock','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','__awaiter','throw','done','value','then','next','defineProperty','__esModule','./playerService','node-mediainfo','url','http','fs-extra','request-progress','child_process','spawn','exec','is-image','youtube-dl','uuid/v4','config.json','context.json','url-exists','mt-files-downloader','mediaFolder','media/','temp/','filesFolder','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','newPlayList','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','PlayerService','init','config','parse','readFileSync','context','playerId','env','WEB_SERVICE_URL','deploy/','playerServiceURL','baseURL','api/player.php?player_id={0}','kodi','kodiHost','kodiUser','checkDependencies','registerClient','loadMediaList','updateSettings','getStatus','bind','playlist','getItems','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','catch','log'];(function(_0x2699a9,_0x501e82){var _0x5b6c40=function(_0xa3de42){while(--_0xa3de42){_0x2699a9['push'](_0x2699a9['shift']());}};_0x5b6c40(++_0x501e82);}(a23_0x474c,0x98));var a23_0x5551=function(_0x286432,_0x3706f1){_0x286432=_0x286432-0x0;var _0x257f46=a23_0x474c[_0x286432];return _0x257f46;};'use strict';var __awaiter=this&&this[a23_0x5551('0x0')]||function(_0x1e1104,_0x1ff5f1,_0x1e5f50,_0x17801f){function _0x151f6f(_0x2a4c68){return _0x2a4c68 instanceof _0x1e5f50?_0x2a4c68:new _0x1e5f50(function(_0x43aa36){_0x43aa36(_0x2a4c68);});}return new(_0x1e5f50||(_0x1e5f50=Promise))(function(_0x4caf55,_0x25dc5c){function _0x20c64e(_0x2ae059){try{_0x3104c1(_0x17801f['next'](_0x2ae059));}catch(_0x5e60a4){_0x25dc5c(_0x5e60a4);}}function _0x17da08(_0xebf546){try{_0x3104c1(_0x17801f[a23_0x5551('0x1')](_0xebf546));}catch(_0x30a340){_0x25dc5c(_0x30a340);}}function _0x3104c1(_0x115ddc){_0x115ddc[a23_0x5551('0x2')]?_0x4caf55(_0x115ddc[a23_0x5551('0x3')]):_0x151f6f(_0x115ddc[a23_0x5551('0x3')])[a23_0x5551('0x4')](_0x20c64e,_0x17da08);}_0x3104c1((_0x17801f=_0x17801f['apply'](_0x1e1104,_0x1ff5f1||[]))[a23_0x5551('0x5')]());});};Object[a23_0x5551('0x6')](exports,a23_0x5551('0x7'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a23_0x5551('0x8'));const mediainfo=require(a23_0x5551('0x9'));const fs=require('fs');const url=require(a23_0x5551('0xa'));const http=require(a23_0x5551('0xb'));const fsExtra=require(a23_0x5551('0xc'));const request=require('request');const progress=require(a23_0x5551('0xd'));const spawn=require(a23_0x5551('0xe'))[a23_0x5551('0xf')];const exec=require(a23_0x5551('0xe'))[a23_0x5551('0x10')];const isImage=require(a23_0x5551('0x11'));const format=require('string-template');const os=require('os');const youtubedl=require(a23_0x5551('0x12'));const uuidv4=require(a23_0x5551('0x13'));const configFile=a23_0x5551('0x14');const contextFile=a23_0x5551('0x15');const urlExists=require(a23_0x5551('0x16'));const kodi_rpc=require('node-kodi');const Downloader=require(a23_0x5551('0x17'));class SyncPlaylistsService{constructor(){this[a23_0x5551('0x18')]=a23_0x5551('0x19');this['tempFolder']=this['mediaFolder']+a23_0x5551('0x1a');this[a23_0x5551('0x1b')]=this['mediaFolder']+'files/';this[a23_0x5551('0x1c')]=this[a23_0x5551('0x18')]+a23_0x5551('0x1d');this[a23_0x5551('0x1e')]=this[a23_0x5551('0x1b')]+a23_0x5551('0x1f');this[a23_0x5551('0x20')]=0x0;this[a23_0x5551('0x21')]=![];this[a23_0x5551('0x22')]=[];this['failDownloadFiles']=[];this[a23_0x5551('0x23')]={};this['kodiHost']='http://localhost';this['kodiUser']='lulo';this[a23_0x5551('0x24')]=a23_0x5551('0x25');this[a23_0x5551('0x26')]=![];this[a23_0x5551('0x27')]=new HttpClientService_1[(a23_0x5551('0x28'))]();this['playerService']=new playerService_1[(a23_0x5551('0x29'))]();}[a23_0x5551('0x2a')](){this[a23_0x5551('0x2b')]=JSON[a23_0x5551('0x2c')](fs[a23_0x5551('0x2d')](configFile));this[a23_0x5551('0x2e')]=JSON[a23_0x5551('0x2c')](fs[a23_0x5551('0x2d')](contextFile));this[a23_0x5551('0x2f')]=this['config'][a23_0x5551('0x2f')];this['baseURL']=process[a23_0x5551('0x30')][a23_0x5551('0x31')]+a23_0x5551('0x32');this['playListServiceURL']=this['baseURL']+'api/player_playlist.php?player_id={0}';this[a23_0x5551('0x33')]=this[a23_0x5551('0x34')]+a23_0x5551('0x35');this[a23_0x5551('0x36')]=new kodi_rpc({'url':this[a23_0x5551('0x37')],'user':this[a23_0x5551('0x38')],'password':this['kodiPassword']});this[a23_0x5551('0x39')]();this[a23_0x5551('0x3a')]();this['checkFolders']();this[a23_0x5551('0x3b')]();this[a23_0x5551('0x3c')]();setInterval(function(){this[a23_0x5551('0x3d')]();}[a23_0x5551('0x3e')](this),0x2710);setInterval(function(){this[a23_0x5551('0x3a')]();}[a23_0x5551('0x3e')](this),0x493e0);}['checkDependencies'](){}[a23_0x5551('0x3a')](){this[a23_0x5551('0x36')][a23_0x5551('0x3f')][a23_0x5551('0x40')](0x1)['then'](function(_0x4b50f0){const _0xf8859f=JSON[a23_0x5551('0x41')](_0x4b50f0);const _0x32eb19={'player_id':this[a23_0x5551('0x2f')],'device_uuid':this[a23_0x5551('0x2b')]['deviceUuid'],'network_info':JSON[a23_0x5551('0x41')](os[a23_0x5551('0x42')]()),'firmware_info':JSON[a23_0x5551('0x41')](this[a23_0x5551('0x2e')]),'playlist':_0xf8859f,'playing_item':'','status':0x0};this['httpClientService'][a23_0x5551('0x43')](a23_0x5551('0x44'),_0x32eb19,![])[a23_0x5551('0x4')](function(_0x31630c){console['log']('register\x20response:\x20'+Date());})[a23_0x5551('0x45')](function(_0x4b60c1){});console[a23_0x5551('0x46')](_0x32eb19);}[a23_0x5551('0x3e')](this));const _0x31edfc=this['config'][a23_0x5551('0x47')];if(!_0x31edfc||_0x31edfc==''){this[a23_0x5551('0x2b')][a23_0x5551('0x47')]=uuidv4();this[a23_0x5551('0x2b')]={'deviceUuid':this[a23_0x5551('0x2b')][a23_0x5551('0x47')],'playerId':this[a23_0x5551('0x2b')][a23_0x5551('0x2f')]};fs[a23_0x5551('0x48')](configFile,JSON[a23_0x5551('0x41')](this['config']));}}[a23_0x5551('0x3d')](){console['log']('getStatus');this[a23_0x5551('0x36')][a23_0x5551('0x49')][a23_0x5551('0x4a')]()[a23_0x5551('0x4')](function(_0x20f37a){const _0x576e2f=_0x20f37a[a23_0x5551('0x4b')]['label'];this[a23_0x5551('0x4c')](_0x576e2f);}[a23_0x5551('0x3e')](this))[a23_0x5551('0x45')](function(_0x12314e){console[a23_0x5551('0x46')](_0x12314e);this[a23_0x5551('0x4c')](JSON['stringify'](_0x12314e));}[a23_0x5551('0x3e')](this));}['reportStatus'](_0x13becb){console['log'](a23_0x5551('0x4d')+_0x13becb);const _0x42b3d3={'player_id':this['playerId'],'device_uuid':this[a23_0x5551('0x2b')][a23_0x5551('0x47')],'status':_0x13becb!=''&&_0x13becb!=null?0x1:0x0,'playing_item':_0x13becb};this['httpClientService'][a23_0x5551('0x43')](a23_0x5551('0x4e'),_0x42b3d3,![])['then'](function(_0x2a7281){console[a23_0x5551('0x46')](a23_0x5551('0x4f')+JSON[a23_0x5551('0x41')](_0x2a7281));})['catch'](function(_0x185e9f){});}[a23_0x5551('0x50')](){fsExtra[a23_0x5551('0x51')](this[a23_0x5551('0x18')],_0x2f75ad=>{});fsExtra['ensureDir'](this['tempFolder'],_0x3b3be1=>{});fsExtra[a23_0x5551('0x51')](this[a23_0x5551('0x1b')],_0x361d81=>{});}[a23_0x5551('0x3b')](){const _0x54c92a=format(this['playListServiceURL'],this[a23_0x5551('0x2f')]);console[a23_0x5551('0x46')](_0x54c92a);request({'url':_0x54c92a,'json':!![]},function(_0x26ca5b,_0x1f0dee,_0x1d6931){console[a23_0x5551('0x46')](a23_0x5551('0x52'));this['newPlayList']=_0x1d6931;this[a23_0x5551('0x21')]=this[a23_0x5551('0x53')]();fsExtra[a23_0x5551('0x54')](this[a23_0x5551('0x55')]);this[a23_0x5551('0x22')]=[];this[a23_0x5551('0x56')]=[];this['currentFile']=0x0;for(const _0x3d8db7 in _0x1d6931){this[a23_0x5551('0x22')][a23_0x5551('0x57')](_0x1d6931[_0x3d8db7]);}console['log'](a23_0x5551('0x58')+this['downloadFiles'][a23_0x5551('0x59')]);if(this[a23_0x5551('0x22')]['length']>0x0){this['download']();}}[a23_0x5551('0x3e')](this));}[a23_0x5551('0x5a')](){this[a23_0x5551('0x26')]=!![];if(fsExtra[a23_0x5551('0x5b')](this[a23_0x5551('0x55')])){fsExtra[a23_0x5551('0x54')](this['tempFolder']);}if(fsExtra['existsSync'](this[a23_0x5551('0x1b')])){fsExtra['emptyDirSync'](this[a23_0x5551('0x1b')]);}if(!fsExtra[a23_0x5551('0x5b')](this['playListFile'])){fsExtra[a23_0x5551('0x5c')](this[a23_0x5551('0x1c')]);}if(!fsExtra[a23_0x5551('0x5b')](this[a23_0x5551('0x1e')])){fsExtra['removeSync'](this[a23_0x5551('0x1e')]);}this['loadMediaList']();}['hasPlayListChanged'](){const _0x367894=JSON[a23_0x5551('0x41')](this['newPlayList']);try{if(!fsExtra['existsSync'](this[a23_0x5551('0x1c')])){return!![];}else{const _0x32d49a=fsExtra[a23_0x5551('0x2d')](this[a23_0x5551('0x1c')])[a23_0x5551('0x5d')]();if(_0x32d49a!=_0x367894){return!![];}}}catch(_0x290cf0){console[a23_0x5551('0x46')](_0x290cf0);}return![];}[a23_0x5551('0x5e')](){console['log'](a23_0x5551('0x5f')+this[a23_0x5551('0x20')]+a23_0x5551('0x60')+this[a23_0x5551('0x22')][a23_0x5551('0x59')]);if(this['currentFile']>=this['downloadFiles']['length']){this[a23_0x5551('0x61')]();return;}const _0x463c4b=String(this[a23_0x5551('0x22')][this[a23_0x5551('0x20')]]['path']);const _0x155e56=this['downloadFiles'][this[a23_0x5551('0x20')]][a23_0x5551('0x62')];let _0x772304=_0x463c4b[a23_0x5551('0x63')](_0x463c4b['lastIndexOf']('/')+0x1);const _0xc0fc20=_0x772304[a23_0x5551('0x64')]('.')[a23_0x5551('0x65')](0x0,-0x1)[a23_0x5551('0x66')]('.');let _0x25c005=this[a23_0x5551('0x34')]+_0x463c4b;const _0x1dba97=_0x25c005[a23_0x5551('0x64')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x155e56==a23_0x5551('0x67')){_0x772304=_0x772304+a23_0x5551('0x68');}else if(_0x155e56=='image'){_0x772304=_0xc0fc20+'.mp4';_0x25c005=_0x1dba97+'.mp4';}console[a23_0x5551('0x46')]('**********+');console['log'](_0x463c4b);console['log'](_0x155e56);console[a23_0x5551('0x46')](_0x772304);console[a23_0x5551('0x46')](_0x25c005);console[a23_0x5551('0x46')](_0xc0fc20);console[a23_0x5551('0x46')](_0x1dba97);console[a23_0x5551('0x46')](a23_0x5551('0x69'));if(fsExtra[a23_0x5551('0x5b')](this[a23_0x5551('0x55')]+_0x772304)){this[a23_0x5551('0x6a')](this[a23_0x5551('0x55')]+_0x772304)[a23_0x5551('0x4')](function(_0x5c8814){if(_0x5c8814){this['currentFile']++;}else{this['playlistChanged']=!![];}this[a23_0x5551('0x5e')]();}[a23_0x5551('0x3e')](this));}else if(fsExtra['existsSync'](this[a23_0x5551('0x1b')]+_0x772304)){this[a23_0x5551('0x6a')](this['filesFolder']+_0x772304)[a23_0x5551('0x4')](function(_0x13e062){if(_0x13e062){fsExtra[a23_0x5551('0x6b')](this[a23_0x5551('0x1b')]+_0x772304,this[a23_0x5551('0x55')]+_0x772304);this[a23_0x5551('0x20')]++;}else{this[a23_0x5551('0x21')]=!![];}this['download']();}[a23_0x5551('0x3e')](this));}else{console['log'](a23_0x5551('0x6c')+_0x25c005);this[a23_0x5551('0x21')]=!![];if(_0x155e56==a23_0x5551('0x67')){this['downloadYouTube'](_0x463c4b);}else{this[a23_0x5551('0x6d')](_0x25c005,_0x772304,_0x155e56);}}}[a23_0x5551('0x6a')](_0x57ea68){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0x5551('0x46')]('videoFile:\x20'+_0x57ea68);const _0x57a561=yield mediainfo(_0x57ea68)[a23_0x5551('0x45')](_0x5a9d09=>{console[a23_0x5551('0x46')](_0x5a9d09);fsExtra[a23_0x5551('0x5c')](_0x57ea68);return![];});const _0x354290=_0x57a561[a23_0x5551('0x6e')][a23_0x5551('0x6f')]['length']>0x1&&_0x57a561[a23_0x5551('0x6e')][a23_0x5551('0x6f')][0x1][a23_0x5551('0x70')]=='Video';if(!_0x354290){fsExtra[a23_0x5551('0x5c')](_0x57ea68);}console['log'](a23_0x5551('0x71')+_0x354290);return _0x354290;});}[a23_0x5551('0x6d')](_0x3c2a90,_0x22c4a0,_0x389500){const _0x5753ba=new Downloader();console[a23_0x5551('0x46')](_0x3c2a90);console[a23_0x5551('0x46')](_0x22c4a0);console['log'](_0x389500);const _0x2cb82e=_0x5753ba[a23_0x5551('0x5e')](_0x3c2a90,this[a23_0x5551('0x55')]+_0x22c4a0);urlExists(_0x3c2a90,function(_0x40311e,_0x14bef5){if(_0x14bef5){if(this['failDownloadFiles']['includes'](this[a23_0x5551('0x20')])){const _0x2a56ec=this['failDownloadFiles'][a23_0x5551('0x72')](this['currentFile']);if(_0x2a56ec>-0x1){this['failDownloadFiles'][a23_0x5551('0x73')](_0x2a56ec,0x1);}}console[a23_0x5551('0x46')](a23_0x5551('0x74')+_0x3c2a90);_0x2cb82e['start']();}else{if(!this[a23_0x5551('0x56')][a23_0x5551('0x75')](this['currentFile'])){this[a23_0x5551('0x56')][a23_0x5551('0x57')](this['currentFile']);}console[a23_0x5551('0x46')](a23_0x5551('0x76')+_0x3c2a90);this[a23_0x5551('0x20')]++;this['download']();}}[a23_0x5551('0x3e')](this));_0x2cb82e['on'](a23_0x5551('0x77'),function(_0x2cb82e){console[a23_0x5551('0x46')](a23_0x5551('0x78')+_0x3c2a90);});_0x2cb82e['on'](a23_0x5551('0x79'),function(_0x2cb82e){console['log'](a23_0x5551('0x7a'));this['download']();}[a23_0x5551('0x3e')](this));_0x2cb82e['on'](a23_0x5551('0x7b'),function(_0x2cb82e){console[a23_0x5551('0x46')](a23_0x5551('0x7b'));console[a23_0x5551('0x46')](a23_0x5551('0x7c')+_0x22c4a0);console['log'](a23_0x5551('0x7d')+_0x389500);this[a23_0x5551('0x6a')](this['tempFolder']+_0x22c4a0)['then'](function(_0x34f71c){if(_0x34f71c){this[a23_0x5551('0x20')]++;}this['download']();}[a23_0x5551('0x3e')](this));}[a23_0x5551('0x3e')](this));_0x2cb82e['on'](a23_0x5551('0x7e'),function(_0x2cb82e){console[a23_0x5551('0x46')](a23_0x5551('0x7e'));});_0x2cb82e['on'](a23_0x5551('0x7f'),function(_0x2cb82e){console['log'](a23_0x5551('0x7f'));});_0x2cb82e['on'](a23_0x5551('0x80'),function(_0x2cb82e){console['log']('retry');});}[a23_0x5551('0x81')](_0x6610b8,_0x43a603,_0x195fe0,_0x4a6061){console[a23_0x5551('0x46')]('downloadHTTPFile');console['log'](_0x6610b8);const _0x75820c=!![];let _0x432d59=0x0;const _0x47377a='';console[a23_0x5551('0x46')]('Attempting\x20to\x20download\x20'+_0x6610b8+a23_0x5551('0x82')+_0x43a603);if(_0x432d59){if(_0x432d59>0x5){_0x4a6061('Max\x20redirects\x20reached',_0x6610b8,_0x195fe0,null);return;}}else{_0x432d59=0x0;}const _0x428941=this[a23_0x5551('0x55')]+_0x43a603;let _0x4690ab;if(_0x4a6061===undefined){console['log'](a23_0x5551('0x83')+_0x6610b8+'\x20to\x20'+_0x428941);_0x4a6061=function(_0xbf5f3e,_0x1bea61){console['log'](a23_0x5551('0x84'),_0xbf5f3e,_0x1bea61);};}http[a23_0x5551('0x85')][a23_0x5551('0x86')]=0x64;const _0x323cae={'host':url[a23_0x5551('0x2c')](_0x6610b8)['host'],'port':0x50,'path':url[a23_0x5551('0x2c')](_0x6610b8)['pathname'],'agent':![]};const _0x59ff0e=http['get'](_0x323cae,function(_0x40a7d3){let _0x7906ab=0x0;let _0x4934d=0x0;function _0xabf8ce(){if(_0x7906ab===undefined){console[a23_0x5551('0x46')](_0x43a603+a23_0x5551('0x87')+_0x4934d+'/'+'?');}const _0x1a6a0d=_0x4934d/_0x7906ab*0x64;console['log'](_0x43a603+a23_0x5551('0x88')+_0x1a6a0d+'%\x09'+_0x4934d+'/'+_0x7906ab);}console[a23_0x5551('0x46')](_0x43a603+'\x20'+_0x40a7d3[a23_0x5551('0x89')]);switch(_0x40a7d3[a23_0x5551('0x89')]){case 0xc8:_0x7906ab=_0x40a7d3[a23_0x5551('0x8a')][a23_0x5551('0x8b')]||_0x47377a;fs[a23_0x5551('0x8c')](_0x428941,function(_0x17615e,_0x1c4480){if(!_0x17615e){console[a23_0x5551('0x46')](a23_0x5551('0x8d')+_0x428941);if(_0x1c4480[a23_0x5551('0x8e')]==_0x7906ab){console[a23_0x5551('0x46')](a23_0x5551('0x8f')+_0x7906ab+')');console[a23_0x5551('0x46')]('Redownloading');}else{console[a23_0x5551('0x46')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x1c4480[a23_0x5551('0x8e')]+a23_0x5551('0x90')+_0x7906ab+')');}}_0x4690ab=fs[a23_0x5551('0x91')](_0x428941);_0x40a7d3[a23_0x5551('0x92')](_0x4690ab);_0x40a7d3['on']('data',function(_0x3cc42f){_0x4934d+=_0x3cc42f[a23_0x5551('0x59')];_0xabf8ce();});_0x59ff0e['on'](a23_0x5551('0x79'),function(_0x17615e){console['log'](a23_0x5551('0x93'));console[a23_0x5551('0x46')](_0x17615e);});_0x4690ab['on']('finish',function(){console[a23_0x5551('0x46')](a23_0x5551('0x94')+_0x6610b8+a23_0x5551('0x82')+_0x43a603);_0x4a6061(null,_0x43a603,_0x195fe0,_0x43a603);}[a23_0x5551('0x3e')](this));});break;case 0x12e:const _0x462084=_0x40a7d3['headers'][a23_0x5551('0x95')];console[a23_0x5551('0x46')](a23_0x5551('0x96')+_0x6610b8+a23_0x5551('0x82')+_0x462084);if(_0x432d59<0x5){this['downloadHTTPFile'](_0x462084,_0x43a603,_0x4a6061,_0x432d59++);}else{console[a23_0x5551('0x79')](a23_0x5551('0x97')+_0x6610b8+'.');_0x4a6061(a23_0x5551('0x98'),null,null,null);}return;case 0x194:console[a23_0x5551('0x46')]('File\x20Not\x20Found\x20'+_0x6610b8);default:console[a23_0x5551('0x46')](a23_0x5551('0x99')+_0x6610b8+a23_0x5551('0x9a')+_0x40a7d3[a23_0x5551('0x89')]);_0x59ff0e[a23_0x5551('0x9b')]();_0x4a6061(_0x40a7d3[a23_0x5551('0x89')],null,null,null);return;}})['on'](a23_0x5551('0x79'),function(_0x1f7b78){console[a23_0x5551('0x46')]('Error\x20Downloading:\x20'+_0x6610b8+'\x20'+_0x1f7b78[a23_0x5551('0x9c')]);_0x4a6061(_0x1f7b78,null,null,null);});}[a23_0x5551('0x9d')](_0x436ca2,_0x4218cf,_0x253b15,_0x5ebf0e){console[a23_0x5551('0x46')](a23_0x5551('0x9d'));console[a23_0x5551('0x46')](_0x436ca2);console[a23_0x5551('0x46')](_0x4218cf);console['log'](_0x253b15);console[a23_0x5551('0x46')](_0x5ebf0e);if(_0x253b15==a23_0x5551('0x9e')){const _0x418d28=this['downloadFiles'][this['currentFile']]['duration']!=null?this[a23_0x5551('0x22')][this['currentFile']][a23_0x5551('0x9f')]:0x1e;this[a23_0x5551('0xa0')](_0x5ebf0e,_0x418d28);}else if(_0x253b15==a23_0x5551('0xa1')){if(_0x436ca2==null&&_0x4218cf!=''){this[a23_0x5551('0x20')]++;}this['download']();}console[a23_0x5551('0x46')](this[a23_0x5551('0x20')]);}['downloadRequestFile'](_0x1008b3,_0x92ffde,_0x2c8691){progress(request(_0x1008b3),{})['on'](a23_0x5551('0xa2'),function(_0x363807){console[a23_0x5551('0x46')](_0x363807);})['on'](a23_0x5551('0x79'),function(_0x401fb0){console[a23_0x5551('0x46')](a23_0x5551('0xa3'));this[a23_0x5551('0x5e')]();})['on'](a23_0x5551('0x7b'),function(){console[a23_0x5551('0x46')](a23_0x5551('0x7c')+_0x92ffde);console[a23_0x5551('0x46')](a23_0x5551('0x7d')+_0x2c8691);if(_0x2c8691==a23_0x5551('0x9e')){const _0x116601=this['downloadFiles'][this[a23_0x5551('0x20')]][a23_0x5551('0x9f')]!=null?this[a23_0x5551('0x22')][this['currentFile']][a23_0x5551('0x9f')]:0x1e;this['createImageVideo'](_0x92ffde,_0x116601);}else if(_0x2c8691=='video'){this['currentFile']++;this[a23_0x5551('0x5e')]();}}[a23_0x5551('0x3e')](this))[a23_0x5551('0x92')](fs['createWriteStream'](this[a23_0x5551('0x55')]+_0x92ffde));}[a23_0x5551('0xa0')](_0x5f36d1,_0x1d0b08=0x1e){const _0xb793ce=this['tempFolder']+_0x5f36d1;console[a23_0x5551('0x46')](_0xb793ce);console['log'](_0x5f36d1);const _0x258f3c=_0x5f36d1[a23_0x5551('0x64')]('.')[a23_0x5551('0x65')](0x0,-0x1)[a23_0x5551('0x66')]('.');const _0x57cc46=a23_0x5551('0xa4');const _0x59dfb0=['-y','-r',a23_0x5551('0xa5'),a23_0x5551('0xa6'),'1','-pattern_type',a23_0x5551('0xa7'),'-i',_0xb793ce,'-t',String(_0x1d0b08),a23_0x5551('0xa8'),'libx264','-pix_fmt','yuv420p','-r','25','-vf',a23_0x5551('0xa9'),this['tempFolder']+_0x258f3c+a23_0x5551('0x68')];const _0x3c7c16=spawn(_0x57cc46,_0x59dfb0);_0x3c7c16[a23_0x5551('0xaa')]['on'](a23_0x5551('0xab'),function(_0x1c29b5){console['log'](a23_0x5551('0xac')+_0xb793ce);});_0x3c7c16[a23_0x5551('0xad')]['on'](a23_0x5551('0xab'),function(_0x2b9e03){console[a23_0x5551('0x46')](a23_0x5551('0xae')+_0x2b9e03);}[a23_0x5551('0x3e')](this));_0x3c7c16['on'](a23_0x5551('0xaf'),function(){console[a23_0x5551('0x46')](a23_0x5551('0xb0'));this[a23_0x5551('0x20')]++;this['download']();}[a23_0x5551('0x3e')](this));}[a23_0x5551('0xb1')](_0x2f40a2){const _0x44ea9a=this[a23_0x5551('0x55')]+'/'+_0x2f40a2+a23_0x5551('0x68');const _0x56e6ee=youtubedl('http://www.youtube.com/watch?v='+_0x2f40a2,[a23_0x5551('0xb2')],{'cwd':__dirname});_0x56e6ee['on'](a23_0x5551('0xb3'),function(_0x3b0f54){console[a23_0x5551('0x46')]('Download\x20started');console['log'](a23_0x5551('0xb4')+_0x3b0f54[a23_0x5551('0xb5')]);console[a23_0x5551('0x46')]('size:\x20'+_0x3b0f54['size']);});_0x56e6ee['on'](a23_0x5551('0xb6'),function complete(_0x9df03a){'use strict';console[a23_0x5551('0x46')]('filename:\x20'+_0x9df03a[a23_0x5551('0xb5')]+a23_0x5551('0xb7'));});_0x56e6ee['on'](a23_0x5551('0x7b'),function(){console['log']('finished\x20youtube\x20downloading!');this[a23_0x5551('0x6a')](_0x44ea9a)[a23_0x5551('0x4')](function(_0x54b66e){if(_0x54b66e){this[a23_0x5551('0x20')]++;}this[a23_0x5551('0x5e')]();}[a23_0x5551('0x3e')](this));}[a23_0x5551('0x3e')](this));_0x56e6ee[a23_0x5551('0x92')](fs['createWriteStream'](_0x44ea9a));}[a23_0x5551('0x61')](){console[a23_0x5551('0x46')](a23_0x5551('0xb8'));if(this[a23_0x5551('0x21')]){if(this[a23_0x5551('0x56')][a23_0x5551('0x59')]==0x0){fs[a23_0x5551('0x48')](this[a23_0x5551('0x1c')],JSON['stringify'](this[a23_0x5551('0x23')]));let _0x490333='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x39c875 in this[a23_0x5551('0x22')]){const _0x494a84=this[a23_0x5551('0x22')][_0x39c875][a23_0x5551('0xb9')];const _0x225176=this[a23_0x5551('0x22')][_0x39c875]['media_type'];const _0x4f1b70=_0x494a84['substring'](_0x494a84[a23_0x5551('0xba')]('/')+0x1);let _0x205c2c=_0x4f1b70[a23_0x5551('0x64')]('.')['slice'](0x0,-0x1)[a23_0x5551('0x66')]('.');if(_0x225176=='youtube_single'){_0x205c2c=_0x494a84;}_0x490333+='/home/osmc/luloclient/media/files/'+_0x205c2c+a23_0x5551('0x68')+'\x0d\x0a';}fsExtra[a23_0x5551('0x54')](this[a23_0x5551('0x1b')]);fsExtra[a23_0x5551('0x6b')](this['tempFolder'],this[a23_0x5551('0x1b')]);fsExtra['writeFileSync'](this[a23_0x5551('0x1e')],_0x490333);fsExtra[a23_0x5551('0x54')](this['tempFolder']);console['log'](a23_0x5551('0xbb'));this[a23_0x5551('0xbc')]();}else{console['log'](a23_0x5551('0xbd'));this['currentFile']=0x0;setTimeout(function(){this[a23_0x5551('0x5e')]();}[a23_0x5551('0x3e')](this),0x1388);}}else{console['log'](a23_0x5551('0xbe'));}}[a23_0x5551('0xbf')](){this['jsonrpcClient']('Playlist.Clear',{'playlistid':0x1},function(_0x27c72f){console[a23_0x5551('0x46')](a23_0x5551('0xc0'));console[a23_0x5551('0x46')](_0x27c72f);this['jsonrpcClient'](a23_0x5551('0xc1'),{'item':{'file':a23_0x5551('0xc2')},'playlistid':0x1},function(_0x27c72f){console['log']('Playlist.Added');console[a23_0x5551('0x46')](_0x27c72f);this[a23_0x5551('0xc3')](a23_0x5551('0xc4'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x27c72f){console['log'](a23_0x5551('0xc5'));console[a23_0x5551('0x46')](_0x27c72f);this[a23_0x5551('0xc6')](a23_0x5551('0xc7'));}['bind'](this));}[a23_0x5551('0x3e')](this));}['bind'](this));}[a23_0x5551('0xbc')](){console[a23_0x5551('0x46')](a23_0x5551('0xc8'));exec('sudo\x20/sbin/shutdown\x20-r\x20now',function(_0x5ce367){console[a23_0x5551('0x46')](_0x5ce367);});}[a23_0x5551('0x3c')](){const _0xe6c7c0=format(this[a23_0x5551('0x33')],this[a23_0x5551('0x2f')]);console[a23_0x5551('0x46')](_0xe6c7c0);request({'url':_0xe6c7c0,'json':!![]},function(_0x528892,_0x27c54e,_0x2800e3){if(_0x2800e3[a23_0x5551('0x59')]>0x0){const _0x45bc95=_0x2800e3[0x0];const _0x34a01b=_0x45bc95[a23_0x5551('0xc9')];const _0x4beb44=_0x45bc95['header_active']==0x1;this['setRss'](_0x34a01b);this['enableClock'](_0x4beb44);this[a23_0x5551('0x3a')]();}console[a23_0x5551('0x46')](_0x2800e3);}[a23_0x5551('0x3e')](this));}['turnOffTV'](){this[a23_0x5551('0xc6')](a23_0x5551('0xca'));}[a23_0x5551('0xcb')](){this['kodiCommandClient'](a23_0x5551('0xcc'));}['setRss'](_0x46cd28){const _0x2370ca=_0x46cd28!=null&&_0x46cd28!='';const _0x13c215=a23_0x5551('0xcd');const _0x4216fd=fsExtra[a23_0x5551('0x2d')](_0x13c215);console[a23_0x5551('0x46')](a23_0x5551('0xce')+_0x4216fd);const _0x1996d8=require(a23_0x5551('0xcf'));const _0x2d8437=_0x1996d8[a23_0x5551('0xd0')];_0x2d8437(_0x4216fd,function(_0x45d524,_0x46a7ea){console['log'](a23_0x5551('0xd1'),_0x45d524);console['log']('result:\x20%j',_0x46a7ea);if(!_0x46cd28||_0x46cd28==null||_0x46cd28==''){_0x46cd28=a23_0x5551('0xd2');}_0x46a7ea[a23_0x5551('0xd3')]['set'][0x0][a23_0x5551('0xd4')][0x0]['_']=_0x46cd28;const _0x210e4e=new _0x1996d8[(a23_0x5551('0xd5'))]();const _0x201aa9=_0x210e4e[a23_0x5551('0xd6')](_0x46a7ea);console[a23_0x5551('0x46')](a23_0x5551('0xd7'),_0x201aa9);fsExtra[a23_0x5551('0x48')](_0x13c215,_0x201aa9);});this[a23_0x5551('0xc6')](a23_0x5551('0xd8'));this[a23_0x5551('0xc3')](a23_0x5551('0xd9'),{'setting':a23_0x5551('0xda'),'value':_0x2370ca},function(_0x2da36f){console[a23_0x5551('0x46')]('setRss:');console['log'](_0x2da36f);}['bind'](this));}[a23_0x5551('0xdb')](_0x4bdb39){this[a23_0x5551('0xc3')](a23_0x5551('0xd9'),{'setting':a23_0x5551('0xdc'),'value':_0x4bdb39},function(_0x1b9610){console['log'](a23_0x5551('0xdd'));console['log'](_0x1b9610);}[a23_0x5551('0x3e')](this));}[a23_0x5551('0xc6')](_0x954169){exec(a23_0x5551('0xde')+_0x954169+'\x22',function(_0x687e59){console[a23_0x5551('0x46')](_0x687e59);});}[a23_0x5551('0xc3')](_0x568444,_0x588d36,_0x574c14){const _0xc37d72={'jsonrpc':'2.0','method':_0x568444,'params':_0x588d36,'id':0x1};this[a23_0x5551('0x27')][a23_0x5551('0x43')](this[a23_0x5551('0x37')]+'/jsonrpc',_0xc37d72,![],{'user':this['kodiUser'],'pass':this[a23_0x5551('0x24')]})[a23_0x5551('0x4')](function(_0x4e404d){_0x574c14(_0x4e404d);})[a23_0x5551('0x45')](function(_0xadd840){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;