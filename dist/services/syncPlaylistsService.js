var a22_0x3cdd=['//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','reboot','updateSettings','rss','header_active','enableClock','xml2js','parseString','rssfeeds','feed','kodi-send\x20--action=\x22RefreshRSS()\x22','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','SyncPlaylistsService','__awaiter','next','done','value','apply','__esModule','url','fs-extra','request','request-progress','child_process','is-image','string-template','uuid/v4','context.json','node-kodi','mt-files-downloader','tempFolder','mediaFolder','filesFolder','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://192.168.0.103','kodiUser','lulo','kodiPassword','.lulo123.','HttpClientService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','kodi','playlist','getItems','deviceUuid','stringify','networkInterfaces','httpClientService','post','then','log','register\x20response:\x20','catch','writeFileSync','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','playListServiceURL','loadMediaList:\x20','playlistChanged','hasPlayListChanged','emptyDirSync','push','length','download','reloadMediaList','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','substring','lastIndexOf','split','slice','join','.mp4','image','**********+','checkVideo','copySync','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','indexOf','splice','Error:\x20','start:\x20','error','error:\x20','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','createWriteStream','pipe','data','finish','Downloaded\x20','Redirect\x20','File\x20Not\x20Found\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','duration','createImageVideo','video','progress','Error\x20downloading\x20file','mediaType:\x20','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','yuv420p','-vf','stdout','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','youtube_single','/home/osmc/luloclient/media/files/','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Add'];(function(_0x407e99,_0x5cba59){var _0x40e89f=function(_0x1cb5d4){while(--_0x1cb5d4){_0x407e99['push'](_0x407e99['shift']());}};_0x40e89f(++_0x5cba59);}(a22_0x3cdd,0xe0));var a22_0x3dfa=function(_0x59a29a,_0x2ab518){_0x59a29a=_0x59a29a-0x0;var _0xb1bddf=a22_0x3cdd[_0x59a29a];return _0xb1bddf;};'use strict';var __awaiter=this&&this[a22_0x3dfa('0x0')]||function(_0x4679d4,_0x25f75a,_0x36bda2,_0x166c75){function _0x92de4f(_0x1978a6){return _0x1978a6 instanceof _0x36bda2?_0x1978a6:new _0x36bda2(function(_0x1883db){_0x1883db(_0x1978a6);});}return new(_0x36bda2||(_0x36bda2=Promise))(function(_0x4cb3c0,_0x427eff){function _0x4932af(_0x27c7ba){try{_0x1fe1ef(_0x166c75[a22_0x3dfa('0x1')](_0x27c7ba));}catch(_0x1461f0){_0x427eff(_0x1461f0);}}function _0x4a70bb(_0x3bf07f){try{_0x1fe1ef(_0x166c75['throw'](_0x3bf07f));}catch(_0x1362f4){_0x427eff(_0x1362f4);}}function _0x1fe1ef(_0x41dcf8){_0x41dcf8[a22_0x3dfa('0x2')]?_0x4cb3c0(_0x41dcf8[a22_0x3dfa('0x3')]):_0x92de4f(_0x41dcf8['value'])['then'](_0x4932af,_0x4a70bb);}_0x1fe1ef((_0x166c75=_0x166c75[a22_0x3dfa('0x4')](_0x4679d4,_0x25f75a||[]))[a22_0x3dfa('0x1')]());});};Object['defineProperty'](exports,a22_0x3dfa('0x5'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a22_0x3dfa('0x6'));const http=require('http');const fsExtra=require(a22_0x3dfa('0x7'));const request=require(a22_0x3dfa('0x8'));const progress=require(a22_0x3dfa('0x9'));const spawn=require(a22_0x3dfa('0xa'))['spawn'];const exec=require('child_process')['exec'];const isImage=require(a22_0x3dfa('0xb'));const format=require(a22_0x3dfa('0xc'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x3dfa('0xd'));const configFile='config.json';const contextFile=a22_0x3dfa('0xe');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x3dfa('0xf'));const Downloader=require(a22_0x3dfa('0x10'));class SyncPlaylistsService{constructor(){this['mediaFolder']='media/';this[a22_0x3dfa('0x11')]=this[a22_0x3dfa('0x12')]+'temp/';this[a22_0x3dfa('0x13')]=this['mediaFolder']+'files/';this[a22_0x3dfa('0x14')]=this['mediaFolder']+a22_0x3dfa('0x15');this[a22_0x3dfa('0x16')]=this[a22_0x3dfa('0x13')]+a22_0x3dfa('0x17');this[a22_0x3dfa('0x18')]=0x0;this['playlistChanged']=![];this[a22_0x3dfa('0x19')]=[];this[a22_0x3dfa('0x1a')]=[];this[a22_0x3dfa('0x1b')]={};this[a22_0x3dfa('0x1c')]=a22_0x3dfa('0x1d');this[a22_0x3dfa('0x1e')]=a22_0x3dfa('0x1f');this[a22_0x3dfa('0x20')]=a22_0x3dfa('0x21');this['httpClientService']=new HttpClientService_1[(a22_0x3dfa('0x22'))]();}[a22_0x3dfa('0x23')](){this[a22_0x3dfa('0x24')]=JSON[a22_0x3dfa('0x25')](fs[a22_0x3dfa('0x26')](configFile));this[a22_0x3dfa('0x27')]=JSON[a22_0x3dfa('0x25')](fs[a22_0x3dfa('0x26')](contextFile));this[a22_0x3dfa('0x28')]=this[a22_0x3dfa('0x24')]['playerId'];this[a22_0x3dfa('0x29')]=process['env'][a22_0x3dfa('0x2a')]+a22_0x3dfa('0x2b');this['playListServiceURL']=this['baseURL']+a22_0x3dfa('0x2c');this[a22_0x3dfa('0x2d')]=this[a22_0x3dfa('0x29')]+a22_0x3dfa('0x2e');this['kodi']=new kodi_rpc({'url':this[a22_0x3dfa('0x1c')],'user':this[a22_0x3dfa('0x1e')],'password':this['kodiPassword']});this[a22_0x3dfa('0x2f')]();this[a22_0x3dfa('0x30')]();this[a22_0x3dfa('0x31')]();this[a22_0x3dfa('0x32')]();setInterval(function(){this[a22_0x3dfa('0x33')]();}[a22_0x3dfa('0x34')](this),0x2710);setInterval(function(){this['registerClient']();}[a22_0x3dfa('0x34')](this),0x493e0);}[a22_0x3dfa('0x2f')](){}[a22_0x3dfa('0x30')](){this[a22_0x3dfa('0x35')][a22_0x3dfa('0x36')][a22_0x3dfa('0x37')](0x1)['then'](function(_0x333262){const _0x19f68c=JSON['stringify'](_0x333262);const _0x42ef3={'player_id':this[a22_0x3dfa('0x28')],'device_uuid':this['config'][a22_0x3dfa('0x38')],'network_info':JSON[a22_0x3dfa('0x39')](os[a22_0x3dfa('0x3a')]()),'firmware_info':JSON[a22_0x3dfa('0x39')](this[a22_0x3dfa('0x27')]),'playlist':_0x19f68c,'playing_item':'','status':0x0};this[a22_0x3dfa('0x3b')][a22_0x3dfa('0x3c')]('http://restapi.lulo.run/player_devices/register',_0x42ef3,![])[a22_0x3dfa('0x3d')](function(_0x2bcbe8){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x3f')+Date());})[a22_0x3dfa('0x40')](function(_0x4e88a8){});console['log'](_0x42ef3);}['bind'](this));const _0x25383e=this[a22_0x3dfa('0x24')]['deviceUuid'];if(!_0x25383e||_0x25383e==''){this[a22_0x3dfa('0x24')]['deviceUuid']=uuidv4();this['config']={'deviceUuid':this[a22_0x3dfa('0x24')]['deviceUuid'],'playerId':this[a22_0x3dfa('0x24')][a22_0x3dfa('0x28')]};fs[a22_0x3dfa('0x41')](configFile,JSON[a22_0x3dfa('0x39')](this[a22_0x3dfa('0x24')]));}}[a22_0x3dfa('0x33')](){console[a22_0x3dfa('0x3e')]('getStatus');this[a22_0x3dfa('0x35')]['player']['getCurrentlyPlayingVideo']()['then'](function(_0x520004){const _0x57a000=_0x520004[a22_0x3dfa('0x42')][a22_0x3dfa('0x43')];this[a22_0x3dfa('0x44')](_0x57a000);}[a22_0x3dfa('0x34')](this))[a22_0x3dfa('0x40')](function(_0x4b2b4a){console[a22_0x3dfa('0x3e')](_0x4b2b4a);this[a22_0x3dfa('0x44')](_0x4b2b4a);}[a22_0x3dfa('0x34')](this));}[a22_0x3dfa('0x44')](_0x36d5b0){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x45')+_0x36d5b0);const _0x5d4fff={'player_id':this['playerId'],'device_uuid':this['config']['deviceUuid'],'status':_0x36d5b0!=''&&_0x36d5b0!=null?0x1:0x0,'playing_item':_0x36d5b0};this[a22_0x3dfa('0x3b')][a22_0x3dfa('0x3c')](a22_0x3dfa('0x46'),_0x5d4fff,![])[a22_0x3dfa('0x3d')](function(_0x31b23d){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x47')+Date());})['catch'](function(_0x217ecd){});}[a22_0x3dfa('0x31')](){fsExtra[a22_0x3dfa('0x48')](this[a22_0x3dfa('0x12')],_0x9e3ffb=>{});fsExtra[a22_0x3dfa('0x48')](this[a22_0x3dfa('0x11')],_0x51ac9c=>{});fsExtra['ensureDir'](this[a22_0x3dfa('0x13')],_0x49ad77=>{});}[a22_0x3dfa('0x32')](){const _0x5ba95e=format(this[a22_0x3dfa('0x49')],this[a22_0x3dfa('0x28')]);console['log'](_0x5ba95e);request({'url':_0x5ba95e,'json':!![]},function(_0x3fba76,_0x5afee9,_0x3bceab){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x4a'));console[a22_0x3dfa('0x3e')](_0x3bceab);this[a22_0x3dfa('0x1b')]=_0x3bceab;this[a22_0x3dfa('0x4b')]=this[a22_0x3dfa('0x4c')]();fsExtra[a22_0x3dfa('0x4d')](this['tempFolder']);this[a22_0x3dfa('0x19')]=[];this[a22_0x3dfa('0x1a')]=[];this[a22_0x3dfa('0x18')]=0x0;for(const _0x472dcd in _0x3bceab){this[a22_0x3dfa('0x19')][a22_0x3dfa('0x4e')](_0x3bceab[_0x472dcd]);}console['log']('Total:\x20'+this[a22_0x3dfa('0x19')][a22_0x3dfa('0x4f')]);if(this['downloadFiles'][a22_0x3dfa('0x4f')]>0x0){this[a22_0x3dfa('0x50')]();}}[a22_0x3dfa('0x34')](this));}[a22_0x3dfa('0x51')](){if(fsExtra[a22_0x3dfa('0x52')](this[a22_0x3dfa('0x11')])){fsExtra[a22_0x3dfa('0x4d')](this[a22_0x3dfa('0x11')]);}if(fsExtra['existsSync'](this[a22_0x3dfa('0x13')])){fsExtra[a22_0x3dfa('0x4d')](this[a22_0x3dfa('0x13')]);}if(!fsExtra[a22_0x3dfa('0x52')](this[a22_0x3dfa('0x14')])){fsExtra[a22_0x3dfa('0x53')](this['playListFile']);}if(!fsExtra['existsSync'](this[a22_0x3dfa('0x16')])){fsExtra[a22_0x3dfa('0x53')](this[a22_0x3dfa('0x16')]);}this[a22_0x3dfa('0x32')]();}[a22_0x3dfa('0x4c')](){const _0x49e1b4=JSON[a22_0x3dfa('0x39')](this[a22_0x3dfa('0x1b')]);try{if(!fsExtra['existsSync'](this['playListFile'])){return!![];}else{const _0x4cbd3f=fsExtra[a22_0x3dfa('0x26')](this['playListFile'])[a22_0x3dfa('0x54')]();if(_0x4cbd3f!=_0x49e1b4){return!![];}}}catch(_0x3350a4){console['log'](_0x3350a4);}return![];}[a22_0x3dfa('0x50')](){console['log'](a22_0x3dfa('0x55')+this[a22_0x3dfa('0x18')]+a22_0x3dfa('0x56')+this[a22_0x3dfa('0x19')]['length']);if(this[a22_0x3dfa('0x18')]>=this['downloadFiles'][a22_0x3dfa('0x4f')]){this[a22_0x3dfa('0x57')]();return;}const _0x45d751=String(this[a22_0x3dfa('0x19')][this[a22_0x3dfa('0x18')]]['path']);const _0x463215=this[a22_0x3dfa('0x19')][this['currentFile']][a22_0x3dfa('0x58')];let _0x2ce1c2=_0x45d751[a22_0x3dfa('0x59')](_0x45d751[a22_0x3dfa('0x5a')]('/')+0x1);const _0x43075e=_0x2ce1c2[a22_0x3dfa('0x5b')]('.')[a22_0x3dfa('0x5c')](0x0,-0x1)['join']('.');let _0x492612=this[a22_0x3dfa('0x29')]+_0x45d751;const _0x1a87ba=_0x492612[a22_0x3dfa('0x5b')]('.')[a22_0x3dfa('0x5c')](0x0,-0x1)[a22_0x3dfa('0x5d')]('.');if(_0x463215=='youtube_single'){_0x2ce1c2=_0x2ce1c2+a22_0x3dfa('0x5e');}else if(_0x463215==a22_0x3dfa('0x5f')){_0x2ce1c2=_0x43075e+a22_0x3dfa('0x5e');_0x492612=_0x1a87ba+a22_0x3dfa('0x5e');}console[a22_0x3dfa('0x3e')]('**********+');console[a22_0x3dfa('0x3e')](_0x45d751);console[a22_0x3dfa('0x3e')](_0x463215);console[a22_0x3dfa('0x3e')](_0x2ce1c2);console['log'](_0x492612);console[a22_0x3dfa('0x3e')](_0x43075e);console[a22_0x3dfa('0x3e')](_0x1a87ba);console['log'](a22_0x3dfa('0x60'));if(fsExtra[a22_0x3dfa('0x52')](this[a22_0x3dfa('0x11')]+_0x2ce1c2)){this[a22_0x3dfa('0x61')](this['tempFolder']+_0x2ce1c2)[a22_0x3dfa('0x3d')](function(_0x7ddb75){if(_0x7ddb75){this[a22_0x3dfa('0x18')]++;}else{this['playlistChanged']=!![];}this[a22_0x3dfa('0x50')]();}[a22_0x3dfa('0x34')](this));}else if(fsExtra[a22_0x3dfa('0x52')](this[a22_0x3dfa('0x13')]+_0x2ce1c2)){this[a22_0x3dfa('0x61')](this[a22_0x3dfa('0x13')]+_0x2ce1c2)[a22_0x3dfa('0x3d')](function(_0x42ee60){if(_0x42ee60){fsExtra[a22_0x3dfa('0x62')](this[a22_0x3dfa('0x13')]+_0x2ce1c2,this[a22_0x3dfa('0x11')]+_0x2ce1c2);this[a22_0x3dfa('0x18')]++;}else{this[a22_0x3dfa('0x4b')]=!![];}this[a22_0x3dfa('0x50')]();}[a22_0x3dfa('0x34')](this));}else{console['log']('Downloading:\x20'+_0x492612);this[a22_0x3dfa('0x4b')]=!![];if(_0x463215=='youtube_single'){this[a22_0x3dfa('0x63')](_0x45d751);}else{this[a22_0x3dfa('0x64')](_0x492612,_0x2ce1c2,_0x463215);}}}[a22_0x3dfa('0x61')](_0x5530e7){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x65')+_0x5530e7);const _0x2f019c=yield mediainfo(_0x5530e7)['catch'](_0x1bd8a6=>{console[a22_0x3dfa('0x3e')](_0x1bd8a6);fsExtra['removeSync'](_0x5530e7);return![];});const _0x141678=_0x2f019c[a22_0x3dfa('0x66')]['track'][a22_0x3dfa('0x4f')]>0x1&&_0x2f019c[a22_0x3dfa('0x66')][a22_0x3dfa('0x67')][0x1][a22_0x3dfa('0x68')]==a22_0x3dfa('0x69');if(!_0x141678){fsExtra['removeSync'](_0x5530e7);}console['log'](a22_0x3dfa('0x6a')+_0x141678);return _0x141678;});}[a22_0x3dfa('0x64')](_0x4d0c89,_0x5ecf0c,_0x326138){const _0x581b85=new Downloader();console[a22_0x3dfa('0x3e')](_0x4d0c89);console['log'](_0x5ecf0c);console['log'](_0x326138);const _0x233e31=_0x581b85[a22_0x3dfa('0x50')](_0x4d0c89,this['tempFolder']+_0x5ecf0c);urlExists(_0x4d0c89,function(_0x4ce344,_0x104e14){if(_0x104e14){if(this[a22_0x3dfa('0x1a')]['includes'](this[a22_0x3dfa('0x18')])){const _0x4de094=this['failDownloadFiles'][a22_0x3dfa('0x6b')](this[a22_0x3dfa('0x18')]);if(_0x4de094>-0x1){this[a22_0x3dfa('0x1a')][a22_0x3dfa('0x6c')](_0x4de094,0x1);}}console[a22_0x3dfa('0x3e')]('downloading:\x20'+_0x4d0c89);_0x233e31['start']();}else{if(!this[a22_0x3dfa('0x1a')]['includes'](this[a22_0x3dfa('0x18')])){this[a22_0x3dfa('0x1a')][a22_0x3dfa('0x4e')](this[a22_0x3dfa('0x18')]);}console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x6d')+_0x4d0c89);this[a22_0x3dfa('0x18')]++;this[a22_0x3dfa('0x50')]();}}['bind'](this));_0x233e31['on']('start',function(_0x233e31){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x6e')+_0x4d0c89);});_0x233e31['on'](a22_0x3dfa('0x6f'),function(_0x233e31){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x70'));this[a22_0x3dfa('0x50')]();}[a22_0x3dfa('0x34')](this));_0x233e31['on']('end',function(_0x233e31){console[a22_0x3dfa('0x3e')]('end');console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x71')+_0x5ecf0c);console[a22_0x3dfa('0x3e')]('mediaType:\x20'+_0x326138);this[a22_0x3dfa('0x61')](this[a22_0x3dfa('0x11')]+_0x5ecf0c)[a22_0x3dfa('0x3d')](function(_0x21c968){if(_0x21c968){this['currentFile']++;}this[a22_0x3dfa('0x50')]();}[a22_0x3dfa('0x34')](this));}[a22_0x3dfa('0x34')](this));_0x233e31['on']('stopped',function(_0x233e31){console['log'](a22_0x3dfa('0x72'));});_0x233e31['on'](a22_0x3dfa('0x73'),function(_0x233e31){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x73'));});_0x233e31['on'](a22_0x3dfa('0x74'),function(_0x233e31){console['log']('retry');});}['downloadHTTPFile'](_0x251020,_0x5d4711,_0x1930b5,_0x14f405){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x75'));console[a22_0x3dfa('0x3e')](_0x251020);const _0x504a9f=!![];let _0x25a229=0x0;const _0x33667b='';console['log'](a22_0x3dfa('0x76')+_0x251020+a22_0x3dfa('0x77')+_0x5d4711);if(_0x25a229){if(_0x25a229>0x5){_0x14f405('Max\x20redirects\x20reached',_0x251020,_0x1930b5,null);return;}}else{_0x25a229=0x0;}const _0x4620ce=this[a22_0x3dfa('0x11')]+_0x5d4711;let _0x27fdcf;if(_0x14f405===undefined){console['log'](a22_0x3dfa('0x78')+_0x251020+a22_0x3dfa('0x77')+_0x4620ce);_0x14f405=function(_0x5b77b8,_0x487256){console[a22_0x3dfa('0x3e')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x5b77b8,_0x487256);};}http[a22_0x3dfa('0x79')][a22_0x3dfa('0x7a')]=0x64;const _0x19e21c={'host':url[a22_0x3dfa('0x25')](_0x251020)[a22_0x3dfa('0x7b')],'port':0x50,'path':url[a22_0x3dfa('0x25')](_0x251020)[a22_0x3dfa('0x7c')],'agent':![]};const _0x1fae86=http[a22_0x3dfa('0x7d')](_0x19e21c,function(_0x1e697f){let _0x3691ed=0x0;let _0xc9a58f=0x0;function _0x54a9c9(){if(_0x3691ed===undefined){console[a22_0x3dfa('0x3e')](_0x5d4711+a22_0x3dfa('0x7e')+_0xc9a58f+'/'+'?');}const _0x1cb2e1=_0xc9a58f/_0x3691ed*0x64;console['log'](_0x5d4711+'\x20Progress:\x20'+_0x1cb2e1+'%\x09'+_0xc9a58f+'/'+_0x3691ed);}console[a22_0x3dfa('0x3e')](_0x5d4711+'\x20'+_0x1e697f[a22_0x3dfa('0x7f')]);switch(_0x1e697f['statusCode']){case 0xc8:_0x3691ed=_0x1e697f[a22_0x3dfa('0x80')][a22_0x3dfa('0x81')]||_0x33667b;fs[a22_0x3dfa('0x82')](_0x4620ce,function(_0x3f88a2,_0x1ec6bd){if(!_0x3f88a2){console['log'](a22_0x3dfa('0x83')+_0x4620ce);if(_0x1ec6bd[a22_0x3dfa('0x84')]==_0x3691ed){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x85')+_0x3691ed+')');console[a22_0x3dfa('0x3e')]('Redownloading');}else{console['log'](a22_0x3dfa('0x86')+_0x1ec6bd[a22_0x3dfa('0x84')]+')\x20vs\x20New('+_0x3691ed+')');}}_0x27fdcf=fs[a22_0x3dfa('0x87')](_0x4620ce);_0x1e697f[a22_0x3dfa('0x88')](_0x27fdcf);_0x1e697f['on'](a22_0x3dfa('0x89'),function(_0x4ee9a0){_0xc9a58f+=_0x4ee9a0[a22_0x3dfa('0x4f')];_0x54a9c9();});_0x1fae86['on']('error',function(_0x3f88a2){console[a22_0x3dfa('0x3e')]('err:\x20');console[a22_0x3dfa('0x3e')](_0x3f88a2);});_0x27fdcf['on'](a22_0x3dfa('0x8a'),function(){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x8b')+_0x251020+a22_0x3dfa('0x77')+_0x5d4711);_0x14f405(null,_0x5d4711,_0x1930b5,_0x5d4711);}[a22_0x3dfa('0x34')](this));});break;case 0x12e:const _0x341579=_0x1e697f[a22_0x3dfa('0x80')]['location'];console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x8c')+_0x251020+a22_0x3dfa('0x77')+_0x341579);if(_0x25a229<0x5){this[a22_0x3dfa('0x75')](_0x341579,_0x5d4711,_0x14f405,_0x25a229++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x251020+'.');_0x14f405('302',null,null,null);}return;case 0x194:console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x8d')+_0x251020);default:console[a22_0x3dfa('0x3e')]('Problem\x20downloading\x20'+_0x251020+a22_0x3dfa('0x8e')+_0x1e697f[a22_0x3dfa('0x7f')]);_0x1fae86[a22_0x3dfa('0x8f')]();_0x14f405(_0x1e697f['statusCode'],null,null,null);return;}})['on']('error',function(_0x4f29b0){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x90')+_0x251020+'\x20'+_0x4f29b0[a22_0x3dfa('0x91')]);_0x14f405(_0x4f29b0,null,null,null);});}['downloadHTTPFileCallback'](_0x1720e7,_0x42ac06,_0x5acf28,_0x5ee153){console[a22_0x3dfa('0x3e')]('downloadHTTPFileCallback');console[a22_0x3dfa('0x3e')](_0x1720e7);console['log'](_0x42ac06);console['log'](_0x5acf28);console[a22_0x3dfa('0x3e')](_0x5ee153);if(_0x5acf28==a22_0x3dfa('0x5f')){const _0x4cfdb9=this[a22_0x3dfa('0x19')][this[a22_0x3dfa('0x18')]][a22_0x3dfa('0x92')]!=null?this[a22_0x3dfa('0x19')][this[a22_0x3dfa('0x18')]][a22_0x3dfa('0x92')]:0x1e;this[a22_0x3dfa('0x93')](_0x5ee153,_0x4cfdb9);}else if(_0x5acf28==a22_0x3dfa('0x94')){if(_0x1720e7==null&&_0x42ac06!=''){this[a22_0x3dfa('0x18')]++;}this[a22_0x3dfa('0x50')]();}console[a22_0x3dfa('0x3e')](this[a22_0x3dfa('0x18')]);}['downloadRequestFile'](_0x5bc966,_0x551f10,_0xfd4fa8){progress(request(_0x5bc966),{})['on'](a22_0x3dfa('0x95'),function(_0x36414d){console[a22_0x3dfa('0x3e')](_0x36414d);})['on']('error',function(_0x1109d4){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x96'));this[a22_0x3dfa('0x50')]();})['on']('end',function(){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x71')+_0x551f10);console[a22_0x3dfa('0x3e')](a22_0x3dfa('0x97')+_0xfd4fa8);if(_0xfd4fa8==a22_0x3dfa('0x5f')){const _0x59c643=this['downloadFiles'][this[a22_0x3dfa('0x18')]][a22_0x3dfa('0x92')]!=null?this[a22_0x3dfa('0x19')][this['currentFile']][a22_0x3dfa('0x92')]:0x1e;this[a22_0x3dfa('0x93')](_0x551f10,_0x59c643);}else if(_0xfd4fa8==a22_0x3dfa('0x94')){this[a22_0x3dfa('0x18')]++;this['download']();}}[a22_0x3dfa('0x34')](this))[a22_0x3dfa('0x88')](fs[a22_0x3dfa('0x87')](this[a22_0x3dfa('0x11')]+_0x551f10));}[a22_0x3dfa('0x93')](_0xda9a75,_0x5ea7f3=0x1e){const _0x589536=this[a22_0x3dfa('0x11')]+_0xda9a75;console[a22_0x3dfa('0x3e')](_0x589536);console['log'](_0xda9a75);const _0x32c0af=_0xda9a75['split']('.')[a22_0x3dfa('0x5c')](0x0,-0x1)[a22_0x3dfa('0x5d')]('.');const _0xb94b86='ffmpeg';const _0x4a0c46=['-y','-r',a22_0x3dfa('0x98'),a22_0x3dfa('0x99'),'1',a22_0x3dfa('0x9a'),'glob','-i',_0x589536,'-t',String(_0x5ea7f3),a22_0x3dfa('0x9b'),a22_0x3dfa('0x9c'),a22_0x3dfa('0x9d'),a22_0x3dfa('0x9e'),'-r','25',a22_0x3dfa('0x9f'),'scale=1920:1080',this[a22_0x3dfa('0x11')]+_0x32c0af+a22_0x3dfa('0x5e')];const _0x20c384=spawn(_0xb94b86,_0x4a0c46);_0x20c384[a22_0x3dfa('0xa0')]['on'](a22_0x3dfa('0x89'),function(_0x411d09){console['log'](a22_0x3dfa('0xa1')+_0x589536);});_0x20c384['stderr']['on'](a22_0x3dfa('0x89'),function(_0x2b4a41){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xa2')+_0x2b4a41);}[a22_0x3dfa('0x34')](this));_0x20c384['on'](a22_0x3dfa('0xa3'),function(){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xa4'));this['currentFile']++;this[a22_0x3dfa('0x50')]();}[a22_0x3dfa('0x34')](this));}[a22_0x3dfa('0x63')](_0x303337){const _0x41648a=this[a22_0x3dfa('0x11')]+'/'+_0x303337+a22_0x3dfa('0x5e');const _0x5e00d8=youtubedl(a22_0x3dfa('0xa5')+_0x303337,[a22_0x3dfa('0xa6')],{'cwd':__dirname});_0x5e00d8['on'](a22_0x3dfa('0xa7'),function(_0x3eaaf0){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xa8'));console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xa9')+_0x3eaaf0[a22_0x3dfa('0xaa')]);console[a22_0x3dfa('0x3e')]('size:\x20'+_0x3eaaf0[a22_0x3dfa('0x84')]);});_0x5e00d8['on']('complete',function complete(_0x19f900){'use strict';console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xa9')+_0x19f900[a22_0x3dfa('0xaa')]+a22_0x3dfa('0xab'));});_0x5e00d8['on']('end',function(){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xac'));this[a22_0x3dfa('0x61')](_0x41648a)['then'](function(_0x46664a){if(_0x46664a){this[a22_0x3dfa('0x18')]++;}this['download']();}[a22_0x3dfa('0x34')](this));}[a22_0x3dfa('0x34')](this));_0x5e00d8[a22_0x3dfa('0x88')](fs[a22_0x3dfa('0x87')](_0x41648a));}[a22_0x3dfa('0x57')](){console['log'](a22_0x3dfa('0xad'));if(this[a22_0x3dfa('0x4b')]){if(this[a22_0x3dfa('0x1a')]['length']==0x0){fs['writeFileSync'](this['playListFile'],JSON['stringify'](this[a22_0x3dfa('0x1b')]));let _0x3680ee=a22_0x3dfa('0xae')+'\x0d\x0a'+a22_0x3dfa('0xaf')+'\x0d\x0a';for(const _0x41f920 in this[a22_0x3dfa('0x19')]){const _0x5d16ae=this[a22_0x3dfa('0x19')][_0x41f920][a22_0x3dfa('0xb0')];const _0x5f2e19=this['downloadFiles'][_0x41f920][a22_0x3dfa('0x58')];const _0x44f829=_0x5d16ae['substring'](_0x5d16ae['lastIndexOf']('/')+0x1);let _0x3c9c4a=_0x44f829['split']('.')[a22_0x3dfa('0x5c')](0x0,-0x1)[a22_0x3dfa('0x5d')]('.');if(_0x5f2e19==a22_0x3dfa('0xb1')){_0x3c9c4a=_0x5d16ae;}_0x3680ee+=a22_0x3dfa('0xb2')+_0x3c9c4a+'.mp4'+'\x0d\x0a';}fsExtra[a22_0x3dfa('0x4d')](this[a22_0x3dfa('0x13')]);fsExtra['copySync'](this[a22_0x3dfa('0x11')],this[a22_0x3dfa('0x13')]);fsExtra[a22_0x3dfa('0x41')](this[a22_0x3dfa('0x16')],_0x3680ee);fsExtra[a22_0x3dfa('0x4d')](this[a22_0x3dfa('0x11')]);console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xb3'));this[a22_0x3dfa('0xb4')]();}else{console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xb5'));this[a22_0x3dfa('0x18')]=0x0;setTimeout(function(){this['download']();}[a22_0x3dfa('0x34')](this),0x1388);}}else{console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xb6'));}}[a22_0x3dfa('0xb4')](){this[a22_0x3dfa('0xb7')](a22_0x3dfa('0xb8'),{'playlistid':0x1},function(_0x17d1a6){console['log']('Playlist.Cleared');console[a22_0x3dfa('0x3e')](_0x17d1a6);this[a22_0x3dfa('0xb7')](a22_0x3dfa('0xb9'),{'item':{'file':a22_0x3dfa('0xba')},'playlistid':0x1},function(_0x17d1a6){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xbb'));console[a22_0x3dfa('0x3e')](_0x17d1a6);this[a22_0x3dfa('0xb7')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x17d1a6){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xbc'));console['log'](_0x17d1a6);}[a22_0x3dfa('0x34')](this));}['bind'](this));}[a22_0x3dfa('0x34')](this));}[a22_0x3dfa('0xbd')](){exec('sudo\x20/sbin/shutdown\x20-r\x20now',function(_0x321758){console[a22_0x3dfa('0x3e')](_0x321758);});}[a22_0x3dfa('0xbe')](){const _0x338588=format(this[a22_0x3dfa('0x2d')],this[a22_0x3dfa('0x28')]);console[a22_0x3dfa('0x3e')](_0x338588);request({'url':_0x338588,'json':!![]},function(_0x207f9c,_0x2efc95,_0x540a2f){if(_0x540a2f[a22_0x3dfa('0x4f')]>0x0){const _0x357be8=_0x540a2f[0x0];const _0x3edbf5=_0x357be8[a22_0x3dfa('0xbf')];const _0x213bba=_0x357be8[a22_0x3dfa('0xc0')]==0x1;this['setRss'](_0x3edbf5);this[a22_0x3dfa('0xc1')](_0x213bba);}console[a22_0x3dfa('0x3e')](_0x540a2f);}['bind'](this));}['setRss'](_0x240302){const _0x5cc1ec=_0x240302!=null&&_0x240302!='';const _0x824f49='/home/osmc/.kodi/userdata/RssFeeds.xml';const _0x5997a6=fsExtra[a22_0x3dfa('0x26')](_0x824f49);const _0x2188af=require(a22_0x3dfa('0xc2'));const _0x53df44=_0x2188af[a22_0x3dfa('0xc3')];_0x53df44(_0x5997a6,function(_0x37be01,_0xb55f65){_0xb55f65[a22_0x3dfa('0xc4')]['set'][0x0][a22_0x3dfa('0xc5')][0x0]['_']=_0x240302;const _0x4c4823=new _0x2188af['Builder']();const _0x21f5e0=_0x4c4823['buildObject'](_0xb55f65);fsExtra[a22_0x3dfa('0x41')](_0x824f49,_0x21f5e0);});exec(a22_0x3dfa('0xc6'),function(_0x2d1a9d){console[a22_0x3dfa('0x3e')](_0x2d1a9d);});this[a22_0x3dfa('0xb7')](a22_0x3dfa('0xc7'),{'setting':a22_0x3dfa('0xc8'),'value':_0x5cc1ec},function(_0xfa6151){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xc9'));console[a22_0x3dfa('0x3e')](_0xfa6151);}[a22_0x3dfa('0x34')](this));}[a22_0x3dfa('0xc1')](_0x443e2d){this['jsonrpcClient'](a22_0x3dfa('0xc7'),{'setting':a22_0x3dfa('0xca'),'value':_0x443e2d},function(_0x5b0de5){console[a22_0x3dfa('0x3e')](a22_0x3dfa('0xcb'));console[a22_0x3dfa('0x3e')](_0x5b0de5);}[a22_0x3dfa('0x34')](this));}['jsonrpcClient'](_0x322cc3,_0x216fc4,_0x34aba9){const _0xc8eeeb={'jsonrpc':'2.0','method':_0x322cc3,'params':_0x216fc4,'id':0x1};this[a22_0x3dfa('0x3b')][a22_0x3dfa('0x3c')](this[a22_0x3dfa('0x1c')]+'/jsonrpc',_0xc8eeeb,![],{'user':this['kodiUser'],'pass':this['kodiPassword']})[a22_0x3dfa('0x3d')](function(_0x53228d){_0x34aba9(_0x53228d);})[a22_0x3dfa('0x40')](function(_0x2c64f0){});}}exports[a22_0x3dfa('0xcc')]=SyncPlaylistsService;