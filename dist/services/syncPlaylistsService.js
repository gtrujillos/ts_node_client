var a25_0x1bc8=['playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','errorCounter','playlistChanged','downloadFiles','failDownloadFiles','http://192.168.0.111','kodiUser','kodiPassword','forceReload','httpClientService','HttpClientService','playerService','PlayerService','init','config','parse','readFileSync','playerId','baseURL','WEB_SERVICE_URL','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','kodiHost','checkDependencies','checkFolders','loadMediaList','updateSettings','getStatus','registerClient','bind','playlist','deviceUuid','stringify','context','version','post','player_devices/register','log','register\x20response:\x20','catch','writeFileSync','player','getCurrentlyPlayingVideo','item','label','this.errorCounter','reportStatus','reboot','reportStatus\x20playingItem:\x20','player_devices/report_status','reportStatusResponse','ensureDir','tempFolder','loadMediaList:\x20','emptyDirSync','currentFile','push','Total\x20to\x20download:\x20','length','reloadMediaList','existsSync','removeSync','hasPlayListChanged','toString','download','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','checkVideo','Downloading:\x20','checkSchedule','m3uFileUpdate','refreshPlayer','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','indexOf','splice','includes','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','Have\x20already\x20downloaded\x20','size','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','error','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','image','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','data','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','Download\x20started','filename:\x20','complete','_filename','\x20already\x20downloaded.','pipe','newPlayList','copy','emptyDir','Playlist\x20incomplete,\x20retry.','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','DateUtils','Parse','start_date','end_date','trim','kodiCommandClient','ActivateWindow(fullscreenvideo)','Rebooting','playerServiceURL','rss','header_active','setRss','enableClock','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xml2js','parseString','err:\x20%j','result:\x20%j','none','set','feed','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','setRss:','jsonrpcClient','videoplayer.usedisplayasclock','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','done','then','next','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','../infrastructure/utils/dateUtils','node-mediainfo','url','http','request-progress','child_process','spawn','exec','is-image','string-template','youtube-dl','uuid/v4','config.json','node-kodi','mt-files-downloader','apiURL','env','API_SERVICE_URL','mediaFolder','media/','temp/','filesFolder','files/'];(function(_0x259d48,_0x2edf07){var _0x71cf21=function(_0x417d35){while(--_0x417d35){_0x259d48['push'](_0x259d48['shift']());}};_0x71cf21(++_0x2edf07);}(a25_0x1bc8,0xd6));var a25_0x2a83=function(_0x1f692f,_0x1b7d8a){_0x1f692f=_0x1f692f-0x0;var _0x5ba807=a25_0x1bc8[_0x1f692f];return _0x5ba807;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x416f96,_0x51bf1a,_0x3efad9,_0x5cd174){function _0x175b26(_0x371136){return _0x371136 instanceof _0x3efad9?_0x371136:new _0x3efad9(function(_0x34759a){_0x34759a(_0x371136);});}return new(_0x3efad9||(_0x3efad9=Promise))(function(_0x6ae6e7,_0x1c4cd6){function _0x74503f(_0x3e5556){try{_0x175d2a(_0x5cd174['next'](_0x3e5556));}catch(_0x2be5c2){_0x1c4cd6(_0x2be5c2);}}function _0x36e48e(_0x344624){try{_0x175d2a(_0x5cd174['throw'](_0x344624));}catch(_0x136cc8){_0x1c4cd6(_0x136cc8);}}function _0x175d2a(_0x15d810){_0x15d810[a25_0x2a83('0x0')]?_0x6ae6e7(_0x15d810['value']):_0x175b26(_0x15d810['value'])[a25_0x2a83('0x1')](_0x74503f,_0x36e48e);}_0x175d2a((_0x5cd174=_0x5cd174['apply'](_0x416f96,_0x51bf1a||[]))[a25_0x2a83('0x2')]());});};Object[a25_0x2a83('0x3')](exports,a25_0x2a83('0x4'),{'value':!![]});const HttpClientService_1=require(a25_0x2a83('0x5'));const playerService_1=require(a25_0x2a83('0x6'));const dateUtils_1=require(a25_0x2a83('0x7'));const mediainfo=require(a25_0x2a83('0x8'));const fs=require('fs');const url=require(a25_0x2a83('0x9'));const http=require(a25_0x2a83('0xa'));const fsExtra=require('fs-extra');const request=require('request');const progress=require(a25_0x2a83('0xb'));const spawn=require(a25_0x2a83('0xc'))[a25_0x2a83('0xd')];const exec=require('child_process')[a25_0x2a83('0xe')];const isImage=require(a25_0x2a83('0xf'));const format=require(a25_0x2a83('0x10'));const os=require('os');const youtubedl=require(a25_0x2a83('0x11'));const uuidv4=require(a25_0x2a83('0x12'));const configFile=a25_0x2a83('0x13');const contextFile='package.json';const urlExists=require('url-exists');const kodi_rpc=require(a25_0x2a83('0x14'));const Downloader=require(a25_0x2a83('0x15'));class SyncPlaylistsService{constructor(){this[a25_0x2a83('0x16')]=process[a25_0x2a83('0x17')][a25_0x2a83('0x18')];this[a25_0x2a83('0x19')]=a25_0x2a83('0x1a');this['tempFolder']=this[a25_0x2a83('0x19')]+a25_0x2a83('0x1b');this[a25_0x2a83('0x1c')]=this[a25_0x2a83('0x19')]+a25_0x2a83('0x1d');this[a25_0x2a83('0x1e')]=this[a25_0x2a83('0x19')]+a25_0x2a83('0x1f');this[a25_0x2a83('0x20')]=this[a25_0x2a83('0x1c')]+a25_0x2a83('0x21');this['currentFile']=0x0;this[a25_0x2a83('0x22')]=0x0;this[a25_0x2a83('0x23')]=![];this[a25_0x2a83('0x24')]=[];this[a25_0x2a83('0x25')]=[];this['newPlayList']={};this['kodiHost']=a25_0x2a83('0x26');this[a25_0x2a83('0x27')]='lulo';this[a25_0x2a83('0x28')]='.lulo123.';this[a25_0x2a83('0x29')]=![];this[a25_0x2a83('0x2a')]=new HttpClientService_1[(a25_0x2a83('0x2b'))]();this[a25_0x2a83('0x2c')]=new playerService_1[(a25_0x2a83('0x2d'))]();}[a25_0x2a83('0x2e')](){this[a25_0x2a83('0x2f')]=JSON[a25_0x2a83('0x30')](fs[a25_0x2a83('0x31')](configFile));this['context']=JSON[a25_0x2a83('0x30')](fs[a25_0x2a83('0x31')](contextFile));this['playerId']=this[a25_0x2a83('0x2f')][a25_0x2a83('0x32')];this[a25_0x2a83('0x33')]=process[a25_0x2a83('0x17')][a25_0x2a83('0x34')]+'deploy/';this[a25_0x2a83('0x35')]=this[a25_0x2a83('0x33')]+a25_0x2a83('0x36');this['playerServiceURL']=this[a25_0x2a83('0x33')]+'api/player.php?player_id={0}';this[a25_0x2a83('0x37')]=new kodi_rpc({'url':this[a25_0x2a83('0x38')],'user':this[a25_0x2a83('0x27')],'password':this['kodiPassword']});this[a25_0x2a83('0x39')]();this['registerClient']();this[a25_0x2a83('0x3a')]();this[a25_0x2a83('0x3b')]();this[a25_0x2a83('0x3c')]();setInterval(function(){this[a25_0x2a83('0x3d')]();}['bind'](this),0x2710);setInterval(function(){this[a25_0x2a83('0x3e')]();}[a25_0x2a83('0x3f')](this),0x493e0);setInterval(function(){this['checkSchedule']();}[a25_0x2a83('0x3f')](this),0x2710);}[a25_0x2a83('0x39')](){}['registerClient'](){this['kodi'][a25_0x2a83('0x40')]['getItems'](0x1)[a25_0x2a83('0x1')](function(_0x1302af){const _0x8f0a32=JSON['stringify'](_0x1302af);const _0x364354={'player_id':this[a25_0x2a83('0x32')],'device_uuid':this[a25_0x2a83('0x2f')][a25_0x2a83('0x41')],'network_info':JSON['stringify'](os['networkInterfaces']()),'firmware_info':JSON[a25_0x2a83('0x42')](this[a25_0x2a83('0x43')][a25_0x2a83('0x44')]),'playlist':_0x8f0a32,'playing_item':'','status':0x0};this[a25_0x2a83('0x2a')][a25_0x2a83('0x45')](this[a25_0x2a83('0x16')]+a25_0x2a83('0x46'),_0x364354,![])[a25_0x2a83('0x1')](function(_0x30e7d0){console[a25_0x2a83('0x47')](a25_0x2a83('0x48')+Date());})[a25_0x2a83('0x49')](function(_0x3a0f15){});console[a25_0x2a83('0x47')](_0x364354);}[a25_0x2a83('0x3f')](this));const _0x2c9e04=this[a25_0x2a83('0x2f')][a25_0x2a83('0x41')];if(!_0x2c9e04||_0x2c9e04==''){this['config']['deviceUuid']=uuidv4();this['config']={'deviceUuid':this[a25_0x2a83('0x2f')][a25_0x2a83('0x41')],'playerId':this['config'][a25_0x2a83('0x32')]};fs[a25_0x2a83('0x4a')](configFile,JSON[a25_0x2a83('0x42')](this[a25_0x2a83('0x2f')]));}}['getStatus'](){console[a25_0x2a83('0x47')](a25_0x2a83('0x3d'));this[a25_0x2a83('0x37')][a25_0x2a83('0x4b')][a25_0x2a83('0x4c')]()[a25_0x2a83('0x1')](function(_0x53d03d){const _0x6625a6=_0x53d03d?_0x53d03d[a25_0x2a83('0x4d')][a25_0x2a83('0x4e')]:'';this['reportStatus'](_0x6625a6);}[a25_0x2a83('0x3f')](this))[a25_0x2a83('0x49')](function(_0x11a984){console[a25_0x2a83('0x47')](a25_0x2a83('0x3d'),_0x11a984);console[a25_0x2a83('0x47')](a25_0x2a83('0x4f'),this[a25_0x2a83('0x22')]);this[a25_0x2a83('0x50')](JSON[a25_0x2a83('0x42')](_0x11a984));if(this[a25_0x2a83('0x22')]>0x1e){this[a25_0x2a83('0x51')]();}this[a25_0x2a83('0x22')]++;}['bind'](this));}[a25_0x2a83('0x50')](_0x4696d4){console['log'](a25_0x2a83('0x52')+_0x4696d4);const _0x285fdd={'player_id':this['playerId'],'device_uuid':this[a25_0x2a83('0x2f')][a25_0x2a83('0x41')],'status':_0x4696d4!=''&&_0x4696d4!=null?0x1:0x0,'playing_item':_0x4696d4};this[a25_0x2a83('0x2a')]['post'](this[a25_0x2a83('0x16')]+a25_0x2a83('0x53'),_0x285fdd,![])[a25_0x2a83('0x1')](function(_0x354bd9){console[a25_0x2a83('0x47')](a25_0x2a83('0x54'),_0x354bd9);})['catch'](function(_0x57a803){});}['checkFolders'](){fsExtra[a25_0x2a83('0x55')](this[a25_0x2a83('0x19')],_0x2a6500=>{});fsExtra[a25_0x2a83('0x55')](this[a25_0x2a83('0x56')],_0x32c4c1=>{});fsExtra['ensureDir'](this[a25_0x2a83('0x1c')],_0x44b8d5=>{});}[a25_0x2a83('0x3b')](){const _0x2a763a=format(this['playListServiceURL'],this[a25_0x2a83('0x32')]);console[a25_0x2a83('0x47')](_0x2a763a);request({'url':_0x2a763a,'json':!![]},function(_0x4a8a8b,_0x57d33c,_0x55dadc){console[a25_0x2a83('0x47')](a25_0x2a83('0x57'));this['newPlayList']=_0x55dadc;this[a25_0x2a83('0x23')]=this['hasPlayListChanged']();fsExtra[a25_0x2a83('0x58')](this['tempFolder']);this['downloadFiles']=[];this['failDownloadFiles']=[];this[a25_0x2a83('0x59')]=0x0;for(const _0x3d91d1 in _0x55dadc){this[a25_0x2a83('0x24')][a25_0x2a83('0x5a')](_0x55dadc[_0x3d91d1]);}console['log'](a25_0x2a83('0x5b')+this[a25_0x2a83('0x24')]['length']);if(this[a25_0x2a83('0x24')][a25_0x2a83('0x5c')]>0x0){this['download']();}}[a25_0x2a83('0x3f')](this));}[a25_0x2a83('0x5d')](){this[a25_0x2a83('0x29')]=!![];if(fsExtra[a25_0x2a83('0x5e')](this[a25_0x2a83('0x56')])){fsExtra[a25_0x2a83('0x58')](this[a25_0x2a83('0x56')]);}if(fsExtra[a25_0x2a83('0x5e')](this[a25_0x2a83('0x1c')])){fsExtra['emptyDirSync'](this[a25_0x2a83('0x1c')]);}if(!fsExtra[a25_0x2a83('0x5e')](this[a25_0x2a83('0x1e')])){fsExtra['removeSync'](this[a25_0x2a83('0x1e')]);}if(!fsExtra['existsSync'](this[a25_0x2a83('0x20')])){fsExtra[a25_0x2a83('0x5f')](this[a25_0x2a83('0x20')]);}this[a25_0x2a83('0x3b')]();}[a25_0x2a83('0x60')](){const _0x478309=JSON[a25_0x2a83('0x42')](this['newPlayList']);try{if(!fsExtra[a25_0x2a83('0x5e')](this['playListFile'])){return!![];}else{const _0x2bd3d9=fsExtra[a25_0x2a83('0x31')](this['playListFile'])[a25_0x2a83('0x61')]();if(_0x2bd3d9!=_0x478309){return!![];}}}catch(_0x333f2f){console[a25_0x2a83('0x47')](_0x333f2f);}return![];}[a25_0x2a83('0x62')](){console[a25_0x2a83('0x47')](a25_0x2a83('0x63')+this[a25_0x2a83('0x59')]+a25_0x2a83('0x64')+this[a25_0x2a83('0x24')]['length']);if(this[a25_0x2a83('0x59')]>=this[a25_0x2a83('0x24')]['length']){this[a25_0x2a83('0x65')]();return;}const _0x1b789d=String(this['downloadFiles'][this[a25_0x2a83('0x59')]][a25_0x2a83('0x66')]);const _0x172aec=this[a25_0x2a83('0x24')][this[a25_0x2a83('0x59')]][a25_0x2a83('0x67')];let _0x133932=_0x1b789d[a25_0x2a83('0x68')](_0x1b789d[a25_0x2a83('0x69')]('/')+0x1);const _0x23e69d=_0x133932[a25_0x2a83('0x6a')]('.')[a25_0x2a83('0x6b')](0x0,-0x1)[a25_0x2a83('0x6c')]('.');let _0x25f50c=this['baseURL']+_0x1b789d;const _0x584089=_0x25f50c[a25_0x2a83('0x6a')]('.')[a25_0x2a83('0x6b')](0x0,-0x1)[a25_0x2a83('0x6c')]('.');if(_0x172aec==a25_0x2a83('0x6d')){_0x133932=_0x133932+'.mp4';}else if(_0x172aec=='image'){_0x133932=_0x23e69d+a25_0x2a83('0x6e');_0x25f50c=_0x584089+a25_0x2a83('0x6e');}console[a25_0x2a83('0x47')]('**********+');console[a25_0x2a83('0x47')](_0x1b789d);console['log'](_0x172aec);console[a25_0x2a83('0x47')](_0x133932);console[a25_0x2a83('0x47')](_0x25f50c);console[a25_0x2a83('0x47')](_0x23e69d);console[a25_0x2a83('0x47')](_0x584089);console[a25_0x2a83('0x47')](a25_0x2a83('0x6f'));if(fsExtra[a25_0x2a83('0x5e')](this[a25_0x2a83('0x56')]+_0x133932)){this['checkVideo'](this[a25_0x2a83('0x56')]+_0x133932)[a25_0x2a83('0x1')](function(_0x3bb4a4){if(_0x3bb4a4){this[a25_0x2a83('0x59')]++;}else{this[a25_0x2a83('0x23')]=!![];}this[a25_0x2a83('0x62')]();}[a25_0x2a83('0x3f')](this));}else if(fsExtra[a25_0x2a83('0x5e')](this[a25_0x2a83('0x1c')]+_0x133932)){this[a25_0x2a83('0x70')](this[a25_0x2a83('0x1c')]+_0x133932)[a25_0x2a83('0x1')](function(_0x17c34b){if(_0x17c34b){fsExtra['copySync'](this[a25_0x2a83('0x1c')]+_0x133932,this[a25_0x2a83('0x56')]+_0x133932);this[a25_0x2a83('0x59')]++;}else{this[a25_0x2a83('0x23')]=!![];}this['download']();}[a25_0x2a83('0x3f')](this));}else{console[a25_0x2a83('0x47')](a25_0x2a83('0x71')+_0x25f50c);this['playlistChanged']=!![];if(_0x172aec==a25_0x2a83('0x6d')){this['downloadYouTube'](_0x1b789d);}else{this['downloader'](_0x25f50c,_0x133932,_0x172aec);}}}[a25_0x2a83('0x72')](){const _0x38af03=this['m3uFileUpdate']();console[a25_0x2a83('0x47')](a25_0x2a83('0x73'),_0x38af03);if(_0x38af03){setTimeout(function(){this[a25_0x2a83('0x74')]();}[a25_0x2a83('0x3f')](this),0x3e8);}}[a25_0x2a83('0x70')](_0x430d27){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a25_0x2a83('0x75')+_0x430d27);const _0x91871d=yield mediainfo(_0x430d27)[a25_0x2a83('0x49')](_0x293550=>{console[a25_0x2a83('0x47')](_0x293550);fsExtra[a25_0x2a83('0x5f')](_0x430d27);return![];});const _0x11eb8f=_0x91871d[a25_0x2a83('0x76')][a25_0x2a83('0x77')][a25_0x2a83('0x5c')]>0x1&&_0x91871d[a25_0x2a83('0x76')]['track'][0x1][a25_0x2a83('0x78')]==a25_0x2a83('0x79');if(!_0x11eb8f){fsExtra[a25_0x2a83('0x5f')](_0x430d27);}console[a25_0x2a83('0x47')](a25_0x2a83('0x7a')+_0x11eb8f);return _0x11eb8f;});}['downloader'](_0x200ece,_0x477b26,_0x1640f2){const _0x1c9fb3=new Downloader();console[a25_0x2a83('0x47')](_0x200ece);console[a25_0x2a83('0x47')](_0x477b26);console[a25_0x2a83('0x47')](_0x1640f2);const _0x30473e=_0x1c9fb3[a25_0x2a83('0x62')](_0x200ece,this[a25_0x2a83('0x56')]+_0x477b26);urlExists(_0x200ece,function(_0x45eebb,_0x416eff){if(_0x416eff){if(this[a25_0x2a83('0x25')]['includes'](this['currentFile'])){const _0x5581ba=this[a25_0x2a83('0x25')][a25_0x2a83('0x7b')](this['currentFile']);if(_0x5581ba>-0x1){this[a25_0x2a83('0x25')][a25_0x2a83('0x7c')](_0x5581ba,0x1);}}console['log']('downloading:\x20'+_0x200ece);_0x30473e['start']();}else{if(!this[a25_0x2a83('0x25')][a25_0x2a83('0x7d')](this[a25_0x2a83('0x59')])){this[a25_0x2a83('0x25')][a25_0x2a83('0x5a')](this[a25_0x2a83('0x59')]);}console[a25_0x2a83('0x47')]('Error:\x20'+_0x200ece);this[a25_0x2a83('0x59')]++;this['download']();}}[a25_0x2a83('0x3f')](this));_0x30473e['on']('start',function(_0x30473e){console[a25_0x2a83('0x47')](a25_0x2a83('0x7e')+_0x200ece);});_0x30473e['on']('error',function(_0x30473e){console[a25_0x2a83('0x47')](a25_0x2a83('0x7f'));this['download']();}[a25_0x2a83('0x3f')](this));_0x30473e['on'](a25_0x2a83('0x80'),function(_0x30473e){console[a25_0x2a83('0x47')]('end');console['log'](a25_0x2a83('0x81')+_0x477b26);console['log'](a25_0x2a83('0x82')+_0x1640f2);this['checkVideo'](this['tempFolder']+_0x477b26)[a25_0x2a83('0x1')](function(_0x2c673f){if(_0x2c673f){this[a25_0x2a83('0x59')]++;}this[a25_0x2a83('0x62')]();}[a25_0x2a83('0x3f')](this));}['bind'](this));_0x30473e['on'](a25_0x2a83('0x83'),function(_0x30473e){console[a25_0x2a83('0x47')](a25_0x2a83('0x83'));});_0x30473e['on'](a25_0x2a83('0x84'),function(_0x30473e){console[a25_0x2a83('0x47')](a25_0x2a83('0x84'));});_0x30473e['on'](a25_0x2a83('0x85'),function(_0x30473e){console['log'](a25_0x2a83('0x85'));});}[a25_0x2a83('0x86')](_0x17c977,_0x48af4f,_0x3d3af2,_0x158390){console['log'](a25_0x2a83('0x86'));console[a25_0x2a83('0x47')](_0x17c977);const _0x31f21d=!![];let _0x4a7acd=0x0;const _0xae6d21='';console[a25_0x2a83('0x47')](a25_0x2a83('0x87')+_0x17c977+a25_0x2a83('0x88')+_0x48af4f);if(_0x4a7acd){if(_0x4a7acd>0x5){_0x158390(a25_0x2a83('0x89'),_0x17c977,_0x3d3af2,null);return;}}else{_0x4a7acd=0x0;}const _0x4db302=this['tempFolder']+_0x48af4f;let _0x54a291;if(_0x158390===undefined){console['log'](a25_0x2a83('0x8a')+_0x17c977+'\x20to\x20'+_0x4db302);_0x158390=function(_0x285743,_0x3ea6b3){console[a25_0x2a83('0x47')](a25_0x2a83('0x8b'),_0x285743,_0x3ea6b3);};}http[a25_0x2a83('0x8c')][a25_0x2a83('0x8d')]=0x64;const _0x381f7c={'host':url['parse'](_0x17c977)[a25_0x2a83('0x8e')],'port':0x50,'path':url['parse'](_0x17c977)['pathname'],'agent':![]};const _0xb52b36=http['get'](_0x381f7c,function(_0x11d98f){let _0x3b20c1=0x0;let _0x2f9667=0x0;function _0x208b45(){if(_0x3b20c1===undefined){console['log'](_0x48af4f+a25_0x2a83('0x8f')+_0x2f9667+'/'+'?');}const _0x2226d9=_0x2f9667/_0x3b20c1*0x64;console[a25_0x2a83('0x47')](_0x48af4f+a25_0x2a83('0x90')+_0x2226d9+'%\x09'+_0x2f9667+'/'+_0x3b20c1);}console[a25_0x2a83('0x47')](_0x48af4f+'\x20'+_0x11d98f[a25_0x2a83('0x91')]);switch(_0x11d98f[a25_0x2a83('0x91')]){case 0xc8:_0x3b20c1=_0x11d98f[a25_0x2a83('0x92')][a25_0x2a83('0x93')]||_0xae6d21;fs['stat'](_0x4db302,function(_0x44ff8b,_0xad57ca){if(!_0x44ff8b){console[a25_0x2a83('0x47')](a25_0x2a83('0x94')+_0x4db302);if(_0xad57ca[a25_0x2a83('0x95')]==_0x3b20c1){console[a25_0x2a83('0x47')]('And\x20the\x20file\x20size\x20matches\x20('+_0x3b20c1+')');console['log']('Redownloading');}else{console['log'](a25_0x2a83('0x96')+_0xad57ca[a25_0x2a83('0x95')]+a25_0x2a83('0x97')+_0x3b20c1+')');}}_0x54a291=fs[a25_0x2a83('0x98')](_0x4db302);_0x11d98f['pipe'](_0x54a291);_0x11d98f['on']('data',function(_0x47b558){_0x2f9667+=_0x47b558[a25_0x2a83('0x5c')];_0x208b45();});_0xb52b36['on'](a25_0x2a83('0x99'),function(_0x44ff8b){console['log'](a25_0x2a83('0x9a'));console[a25_0x2a83('0x47')](_0x44ff8b);});_0x54a291['on'](a25_0x2a83('0x9b'),function(){console[a25_0x2a83('0x47')](a25_0x2a83('0x9c')+_0x17c977+a25_0x2a83('0x88')+_0x48af4f);_0x158390(null,_0x48af4f,_0x3d3af2,_0x48af4f);}[a25_0x2a83('0x3f')](this));});break;case 0x12e:const _0xfee60=_0x11d98f[a25_0x2a83('0x92')][a25_0x2a83('0x9d')];console[a25_0x2a83('0x47')](a25_0x2a83('0x9e')+_0x17c977+a25_0x2a83('0x88')+_0xfee60);if(_0x4a7acd<0x5){this[a25_0x2a83('0x86')](_0xfee60,_0x48af4f,_0x158390,_0x4a7acd++);}else{console['error'](a25_0x2a83('0x9f')+_0x17c977+'.');_0x158390(a25_0x2a83('0xa0'),null,null,null);}return;case 0x194:console[a25_0x2a83('0x47')](a25_0x2a83('0xa1')+_0x17c977);default:console[a25_0x2a83('0x47')](a25_0x2a83('0xa2')+_0x17c977+a25_0x2a83('0xa3')+_0x11d98f[a25_0x2a83('0x91')]);_0xb52b36[a25_0x2a83('0xa4')]();_0x158390(_0x11d98f[a25_0x2a83('0x91')],null,null,null);return;}})['on'](a25_0x2a83('0x99'),function(_0x4fd10e){console[a25_0x2a83('0x47')]('Error\x20Downloading:\x20'+_0x17c977+'\x20'+_0x4fd10e[a25_0x2a83('0xa5')]);_0x158390(_0x4fd10e,null,null,null);});}[a25_0x2a83('0xa6')](_0x38989b,_0xc1e513,_0x3840c4,_0x3fb73c){console['log'](a25_0x2a83('0xa6'));console[a25_0x2a83('0x47')](_0x38989b);console['log'](_0xc1e513);console[a25_0x2a83('0x47')](_0x3840c4);console[a25_0x2a83('0x47')](_0x3fb73c);if(_0x3840c4=='image'){const _0x1a82d2=this['downloadFiles'][this['currentFile']][a25_0x2a83('0xa7')]!=null?this[a25_0x2a83('0x24')][this[a25_0x2a83('0x59')]][a25_0x2a83('0xa7')]:0x1e;this[a25_0x2a83('0xa8')](_0x3fb73c,_0x1a82d2);}else if(_0x3840c4==a25_0x2a83('0xa9')){if(_0x38989b==null&&_0xc1e513!=''){this['currentFile']++;}this['download']();}console['log'](this['currentFile']);}[a25_0x2a83('0xaa')](_0x5c3d66,_0x3f4fb6,_0x3164c5){progress(request(_0x5c3d66),{})['on'](a25_0x2a83('0xab'),function(_0x4da008){console[a25_0x2a83('0x47')](_0x4da008);})['on'](a25_0x2a83('0x99'),function(_0x45442f){console[a25_0x2a83('0x47')]('Error\x20downloading\x20file');this[a25_0x2a83('0x62')]();})['on'](a25_0x2a83('0x80'),function(){console[a25_0x2a83('0x47')](a25_0x2a83('0x81')+_0x3f4fb6);console[a25_0x2a83('0x47')](a25_0x2a83('0x82')+_0x3164c5);if(_0x3164c5==a25_0x2a83('0xac')){const _0x120c66=this[a25_0x2a83('0x24')][this[a25_0x2a83('0x59')]][a25_0x2a83('0xa7')]!=null?this[a25_0x2a83('0x24')][this[a25_0x2a83('0x59')]][a25_0x2a83('0xa7')]:0x1e;this[a25_0x2a83('0xa8')](_0x3f4fb6,_0x120c66);}else if(_0x3164c5==a25_0x2a83('0xa9')){this[a25_0x2a83('0x59')]++;this[a25_0x2a83('0x62')]();}}[a25_0x2a83('0x3f')](this))['pipe'](fs[a25_0x2a83('0x98')](this[a25_0x2a83('0x56')]+_0x3f4fb6));}['createImageVideo'](_0x308eac,_0x2abded=0x1e){const _0x5bb6e9=this[a25_0x2a83('0x56')]+_0x308eac;console[a25_0x2a83('0x47')](_0x5bb6e9);console['log'](_0x308eac);const _0x5eb9af=_0x308eac[a25_0x2a83('0x6a')]('.')[a25_0x2a83('0x6b')](0x0,-0x1)['join']('.');const _0x52a8a0='ffmpeg';const _0x7297e9=['-y','-r',a25_0x2a83('0xad'),a25_0x2a83('0xae'),'1',a25_0x2a83('0xaf'),a25_0x2a83('0xb0'),'-i',_0x5bb6e9,'-t',String(_0x2abded),a25_0x2a83('0xb1'),a25_0x2a83('0xb2'),a25_0x2a83('0xb3'),a25_0x2a83('0xb4'),'-r','25',a25_0x2a83('0xb5'),a25_0x2a83('0xb6'),this[a25_0x2a83('0x56')]+_0x5eb9af+a25_0x2a83('0x6e')];const _0x211727=spawn(_0x52a8a0,_0x7297e9);_0x211727['stdout']['on'](a25_0x2a83('0xb7'),function(_0x3f741f){console[a25_0x2a83('0x47')](a25_0x2a83('0xb8')+_0x5bb6e9);});_0x211727[a25_0x2a83('0xb9')]['on'](a25_0x2a83('0xb7'),function(_0x1e6b2b){console['log'](a25_0x2a83('0xba')+_0x1e6b2b);}[a25_0x2a83('0x3f')](this));_0x211727['on'](a25_0x2a83('0xbb'),function(){console['log'](a25_0x2a83('0xbc'));this['currentFile']++;this['download']();}[a25_0x2a83('0x3f')](this));}[a25_0x2a83('0xbd')](_0x5bf29b){const _0x35c74c=this[a25_0x2a83('0x56')]+'/'+_0x5bf29b+a25_0x2a83('0x6e');const _0x44ad47=a25_0x2a83('0xbe')+_0x5bf29b;console[a25_0x2a83('0x47')](a25_0x2a83('0xbf')+_0x44ad47);console['log'](a25_0x2a83('0xc0')+_0x35c74c);const _0x295ef0=youtubedl(_0x44ad47,[a25_0x2a83('0xc1'),a25_0x2a83('0xc2')],{'cwd':__dirname});_0x295ef0['on']('info',function(_0x28e3d9){console[a25_0x2a83('0x47')](a25_0x2a83('0xc3'));console[a25_0x2a83('0x47')](a25_0x2a83('0xc4')+_0x28e3d9['_filename']);console[a25_0x2a83('0x47')]('size:\x20'+_0x28e3d9['size']);});_0x295ef0['on'](a25_0x2a83('0xc5'),function complete(_0x2b381b){'use strict';console[a25_0x2a83('0x47')](a25_0x2a83('0xc4')+_0x2b381b[a25_0x2a83('0xc6')]+a25_0x2a83('0xc7'));});_0x295ef0['on'](a25_0x2a83('0x80'),function(){console[a25_0x2a83('0x47')]('finished\x20youtube\x20downloading!');this['checkVideo'](_0x35c74c)[a25_0x2a83('0x1')](function(_0x553612){if(_0x553612){this[a25_0x2a83('0x59')]++;}this[a25_0x2a83('0x62')]();}[a25_0x2a83('0x3f')](this));}[a25_0x2a83('0x3f')](this));_0x295ef0[a25_0x2a83('0xc8')](fs['createWriteStream'](_0x35c74c));}[a25_0x2a83('0x65')](){console[a25_0x2a83('0x47')]('Finishing');if(this[a25_0x2a83('0x23')]){if(this[a25_0x2a83('0x25')]['length']==0x0){console[a25_0x2a83('0x47')]('this.playListFile:\x20'+this['playListFile']);fs['writeFileSync'](this[a25_0x2a83('0x1e')],JSON[a25_0x2a83('0x42')](this[a25_0x2a83('0xc9')]));const _0x27b63b=this['m3uFileUpdate']();fsExtra['emptyDir'](this['filesFolder'])[a25_0x2a83('0x1')](()=>{fsExtra[a25_0x2a83('0xca')](this[a25_0x2a83('0x56')],this['filesFolder'])['then'](()=>{fsExtra[a25_0x2a83('0xcb')](this['tempFolder'])['then'](()=>{console[a25_0x2a83('0x47')]('Refreshing..');this[a25_0x2a83('0x74')]();})['catch'](_0x1199e1=>console[a25_0x2a83('0x99')](_0x1199e1));})[a25_0x2a83('0x49')](_0x4bbb19=>console['error'](_0x4bbb19));})[a25_0x2a83('0x49')](_0x27bf4c=>console[a25_0x2a83('0x99')](_0x27bf4c));}else{console[a25_0x2a83('0x47')](a25_0x2a83('0xcc'));this['currentFile']=0x0;setTimeout(function(){this[a25_0x2a83('0x62')]();}['bind'](this),0x1388);}}else{console[a25_0x2a83('0x47')]('No\x20playlist\x20changes.');}}[a25_0x2a83('0x73')](){let _0x1623a4=a25_0x2a83('0xcd')+'\x0d\x0a'+a25_0x2a83('0xce')+'\x0d\x0a';const _0x341548=new Date();for(const _0x4bf11c in this[a25_0x2a83('0x24')]){const _0x263e4e=this['downloadFiles'][_0x4bf11c][a25_0x2a83('0x66')];const _0x5841b6=this[a25_0x2a83('0x24')][_0x4bf11c][a25_0x2a83('0x67')];const _0x75fa88=dateUtils_1[a25_0x2a83('0xcf')][a25_0x2a83('0xd0')](this[a25_0x2a83('0x24')][_0x4bf11c][a25_0x2a83('0xd1')]);const _0x1e836e=dateUtils_1[a25_0x2a83('0xcf')][a25_0x2a83('0xd0')](this[a25_0x2a83('0x24')][_0x4bf11c][a25_0x2a83('0xd2')]);const _0x384946=_0x263e4e[a25_0x2a83('0x68')](_0x263e4e[a25_0x2a83('0x69')]('/')+0x1);let _0x4ff02c=_0x384946[a25_0x2a83('0x6a')]('.')[a25_0x2a83('0x6b')](0x0,-0x1)[a25_0x2a83('0x6c')]('.');if(_0x5841b6=='youtube_single'){_0x4ff02c=_0x263e4e;}if((_0x75fa88==null||_0x75fa88<_0x341548)&&(_0x1e836e==null||_0x1e836e>_0x341548)){_0x1623a4+='/home/osmc/luloclient/media/files/'+_0x4ff02c+a25_0x2a83('0x6e')+'\x0d\x0a';}}let _0x3c67f7='';if(fsExtra[a25_0x2a83('0x5e')](this[a25_0x2a83('0x20')])){_0x3c67f7=fsExtra[a25_0x2a83('0x31')](this[a25_0x2a83('0x20')]);_0x3c67f7=_0x3c67f7[a25_0x2a83('0x61')]()['trim']();}_0x1623a4=_0x1623a4[a25_0x2a83('0x61')]()[a25_0x2a83('0xd3')]();if(_0x3c67f7!=_0x1623a4){fsExtra[a25_0x2a83('0x4a')](this[a25_0x2a83('0x20')],_0x1623a4);return!![];}return![];}[a25_0x2a83('0x74')](){console[a25_0x2a83('0x47')](a25_0x2a83('0x20'),this[a25_0x2a83('0x20')]);this[a25_0x2a83('0xd4')]('PlayMedia(//home/osmc/luloclient/media/files/lulo_playlist.m3u)');this[a25_0x2a83('0xd4')](a25_0x2a83('0xd5'));}[a25_0x2a83('0x51')](){console['log'](a25_0x2a83('0xd6'));exec('sudo\x20/sbin/reboot\x20-f',function(_0xe1cf7b){console[a25_0x2a83('0x47')](_0xe1cf7b);});}[a25_0x2a83('0x3c')](){const _0x48d8f8=format(this[a25_0x2a83('0xd7')],this['playerId']);console[a25_0x2a83('0x47')](_0x48d8f8);request({'url':_0x48d8f8,'json':!![]},function(_0x5f26e7,_0x377ab5,_0x4d0793){if(_0x4d0793[a25_0x2a83('0x5c')]>0x0){const _0x168774=_0x4d0793[0x0];const _0x20e30a=_0x168774[a25_0x2a83('0xd8')];const _0x259d3b=_0x168774[a25_0x2a83('0xd9')]==0x1;this[a25_0x2a83('0xda')](_0x20e30a);this[a25_0x2a83('0xdb')](_0x259d3b);this[a25_0x2a83('0x3e')]();}console[a25_0x2a83('0x47')](_0x4d0793);}[a25_0x2a83('0x3f')](this));}[a25_0x2a83('0xdc')](){this[a25_0x2a83('0xd4')](a25_0x2a83('0xdd'));}[a25_0x2a83('0xde')](){this[a25_0x2a83('0xd4')](a25_0x2a83('0xdf'));}['setRss'](_0xba7a6f){const _0x2a4f3f=_0xba7a6f!=null&&_0xba7a6f!='';const _0x379269=a25_0x2a83('0xe0');if(fsExtra[a25_0x2a83('0x5e')](_0x379269)){const _0x35c032=fsExtra['readFileSync'](_0x379269);console[a25_0x2a83('0x47')]('xmlContent:\x20'+_0x35c032);const _0x3dd123=require(a25_0x2a83('0xe1'));const _0xaeec58=_0x3dd123[a25_0x2a83('0xe2')];_0xaeec58(_0x35c032,function(_0x24a507,_0x1baafd){console['log'](a25_0x2a83('0xe3'),_0x24a507);console['log'](a25_0x2a83('0xe4'),_0x1baafd);if(!_0xba7a6f||_0xba7a6f==null||_0xba7a6f==''){_0xba7a6f=a25_0x2a83('0xe5');}_0x1baafd['rssfeeds'][a25_0x2a83('0xe6')][0x0][a25_0x2a83('0xe7')][0x0]['_']=_0xba7a6f;const _0x4fedae=new _0x3dd123['Builder']();const _0xcaab7c=_0x4fedae[a25_0x2a83('0xe8')](_0x1baafd);console[a25_0x2a83('0x47')](a25_0x2a83('0xe9'),_0xcaab7c);fsExtra[a25_0x2a83('0x4a')](_0x379269,_0xcaab7c);});this[a25_0x2a83('0xd4')](a25_0x2a83('0xea'));this['jsonrpcClient'](a25_0x2a83('0xeb'),{'setting':'lookandfeel.enablerssfeeds','value':_0x2a4f3f},function(_0x15d0f7){console[a25_0x2a83('0x47')](a25_0x2a83('0xec'));console[a25_0x2a83('0x47')](_0x15d0f7);}[a25_0x2a83('0x3f')](this));}}[a25_0x2a83('0xdb')](_0x412ecd){this[a25_0x2a83('0xed')](a25_0x2a83('0xeb'),{'setting':a25_0x2a83('0xee'),'value':_0x412ecd},function(_0x5be72e){console[a25_0x2a83('0x47')]('enableClock:\x20');console[a25_0x2a83('0x47')](_0x5be72e);}[a25_0x2a83('0x3f')](this));}[a25_0x2a83('0xd4')](_0xad8c69){exec(a25_0x2a83('0xef')+_0xad8c69+'\x22',function(_0x362ca0){console[a25_0x2a83('0x47')](_0x362ca0);});}[a25_0x2a83('0xed')](_0x28d066,_0x104c06,_0x16dd37){const _0xc25d3d={'jsonrpc':a25_0x2a83('0xf0'),'method':_0x28d066,'params':_0x104c06,'id':0x1};const _0xa06bde={'user':this[a25_0x2a83('0x27')],'pass':this['kodiPassword']};console[a25_0x2a83('0x47')]('jsonrpcClient\x20data',_0xc25d3d);console[a25_0x2a83('0x47')](a25_0x2a83('0xf1'),_0xa06bde);this[a25_0x2a83('0x2a')][a25_0x2a83('0x45')](this['kodiHost']+a25_0x2a83('0xf2'),_0xc25d3d,![],_0xa06bde)[a25_0x2a83('0x1')](function(_0x103cb5){_0x16dd37(_0x103cb5);})['catch'](function(_0x3a7140){});}}exports[a25_0x2a83('0xf3')]=SyncPlaylistsService;