var a22_0x327b=['createImageVideo','progress','Error\x20downloading\x20file','pipe','createWriteStream','ffmpeg','-loop','glob','-c:v','libx264','yuv420p','scale=1920:1080','stdout','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','info','Download\x20started','_filename','size:\x20','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','#EXTCPlayListM3U::M3U','split','join','/home/osmc/luloclient/media/files/','Rebooting..','now','Playlist\x20incomplete,\x20retry.','SyncPlaylistsService','__awaiter','next','throw','done','value','apply','defineProperty','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request','child_process','is-image','string-template','youtube-dl','config.json','context.json','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','playListFile','m3uFile','lulo_playlist.m3u','downloadFiles','failDownloadFiles','newPlayList','httpClientService','HttpClientService','init','config','parse','context','readFileSync','playerId','baseURL','env','playListServiceURL','kodi','lulo','.lulo123.','checkDependencies','registerClient','loadMediaList','getStatus','bind','playlist','then','stringify','deviceUuid','networkInterfaces','post','register\x20response:\x20','catch','log','writeFileSync','player','getCurrentlyPlayingVideo','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','checkFolders','ensureDir','loadMediaList:\x20','playlistChanged','hasPlayListChanged','emptyDirSync','currentFile','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','System','Shutdown','toString','this.currentFile:\x20','finishProcess','path','media_type','substring','slice','.mp4','image','**********+','checkVideo','copySync','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','includes','splice','downloading:\x20','start','push','Error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','data','error','err:\x20','finish','Downloaded\x20','location','Redirect\x20','\x20to\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration'];(function(_0x45658b,_0xa6ed42){var _0x51c273=function(_0x5a2c04){while(--_0x5a2c04){_0x45658b['push'](_0x45658b['shift']());}};_0x51c273(++_0xa6ed42);}(a22_0x327b,0xd4));var a22_0x50c0=function(_0x189f3f,_0x3745ea){_0x189f3f=_0x189f3f-0x0;var _0x497936=a22_0x327b[_0x189f3f];return _0x497936;};'use strict';var __awaiter=this&&this[a22_0x50c0('0x0')]||function(_0x5a7bfc,_0x3bd267,_0x453dc8,_0x750845){function _0x438482(_0x538b47){return _0x538b47 instanceof _0x453dc8?_0x538b47:new _0x453dc8(function(_0x16cdc8){_0x16cdc8(_0x538b47);});}return new(_0x453dc8||(_0x453dc8=Promise))(function(_0x525d18,_0x564469){function _0x2f0556(_0x5e9a68){try{_0x5d083e(_0x750845[a22_0x50c0('0x1')](_0x5e9a68));}catch(_0x33dad5){_0x564469(_0x33dad5);}}function _0xe94b8d(_0x1a7f71){try{_0x5d083e(_0x750845[a22_0x50c0('0x2')](_0x1a7f71));}catch(_0x2f318d){_0x564469(_0x2f318d);}}function _0x5d083e(_0x1d97f6){_0x1d97f6[a22_0x50c0('0x3')]?_0x525d18(_0x1d97f6[a22_0x50c0('0x4')]):_0x438482(_0x1d97f6[a22_0x50c0('0x4')])['then'](_0x2f0556,_0xe94b8d);}_0x5d083e((_0x750845=_0x750845[a22_0x50c0('0x5')](_0x5a7bfc,_0x3bd267||[]))['next']());});};Object[a22_0x50c0('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a22_0x50c0('0x7'));const mediainfo=require(a22_0x50c0('0x8'));const fs=require('fs');const url=require(a22_0x50c0('0x9'));const http=require(a22_0x50c0('0xa'));const fsExtra=require(a22_0x50c0('0xb'));const request=require(a22_0x50c0('0xc'));const progress=require('request-progress');const spawn=require(a22_0x50c0('0xd'))['spawn'];const isImage=require(a22_0x50c0('0xe'));const format=require(a22_0x50c0('0xf'));const os=require('os');const youtubedl=require(a22_0x50c0('0x10'));const uuidv4=require('uuid/v4');const configFile=a22_0x50c0('0x11');const contextFile=a22_0x50c0('0x12');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x50c0('0x13'));const Downloader=require(a22_0x50c0('0x14'));class SyncPlaylistsService{constructor(){this[a22_0x50c0('0x15')]=a22_0x50c0('0x16');this[a22_0x50c0('0x17')]=this[a22_0x50c0('0x15')]+a22_0x50c0('0x18');this[a22_0x50c0('0x19')]=this[a22_0x50c0('0x15')]+'files/';this[a22_0x50c0('0x1a')]=this[a22_0x50c0('0x15')]+'playlist.txt';this[a22_0x50c0('0x1b')]=this[a22_0x50c0('0x19')]+a22_0x50c0('0x1c');this['currentFile']=0x0;this['playlistChanged']=![];this[a22_0x50c0('0x1d')]=[];this[a22_0x50c0('0x1e')]=[];this[a22_0x50c0('0x1f')]={};this[a22_0x50c0('0x20')]=new HttpClientService_1[(a22_0x50c0('0x21'))]();}[a22_0x50c0('0x22')](){this[a22_0x50c0('0x23')]=JSON[a22_0x50c0('0x24')](fs['readFileSync'](configFile));this[a22_0x50c0('0x25')]=JSON[a22_0x50c0('0x24')](fs[a22_0x50c0('0x26')](contextFile));this[a22_0x50c0('0x27')]=this[a22_0x50c0('0x23')][a22_0x50c0('0x27')];this[a22_0x50c0('0x28')]=process[a22_0x50c0('0x29')]['WEB_SERVICE_URL']+'deploy/';this[a22_0x50c0('0x2a')]=this[a22_0x50c0('0x28')]+'api/player_playlist.php?player_id={0}';this[a22_0x50c0('0x2b')]=new kodi_rpc({'url':'http://localhost','user':a22_0x50c0('0x2c'),'password':a22_0x50c0('0x2d')});this[a22_0x50c0('0x2e')]();this[a22_0x50c0('0x2f')]();this['checkFolders']();this[a22_0x50c0('0x30')]();setInterval(function(){this[a22_0x50c0('0x31')]();}[a22_0x50c0('0x32')](this),0x2710);setInterval(function(){this[a22_0x50c0('0x2f')]();}[a22_0x50c0('0x32')](this),0x493e0);}[a22_0x50c0('0x2e')](){}[a22_0x50c0('0x2f')](){this[a22_0x50c0('0x2b')][a22_0x50c0('0x33')]['getItems'](0x1)[a22_0x50c0('0x34')](function(_0x546cbc){const _0x54826a=JSON[a22_0x50c0('0x35')](_0x546cbc);const _0x29318b={'player_id':this[a22_0x50c0('0x27')],'device_uuid':this[a22_0x50c0('0x23')][a22_0x50c0('0x36')],'network_info':JSON[a22_0x50c0('0x35')](os[a22_0x50c0('0x37')]()),'firmware_info':JSON[a22_0x50c0('0x35')](this[a22_0x50c0('0x25')]),'playlist':_0x54826a,'playing_item':'','status':0x0};this['httpClientService'][a22_0x50c0('0x38')]('http://restapi.lulo.run/player_devices/register',_0x29318b,![])[a22_0x50c0('0x34')](function(_0x47d003){console['log'](a22_0x50c0('0x39')+Date());})[a22_0x50c0('0x3a')](function(_0x441557){});console[a22_0x50c0('0x3b')](_0x29318b);}['bind'](this));const _0x2d4712=this['config'][a22_0x50c0('0x36')];if(!_0x2d4712||_0x2d4712==''){this['config'][a22_0x50c0('0x36')]=uuidv4();this[a22_0x50c0('0x23')]={'deviceUuid':this[a22_0x50c0('0x23')][a22_0x50c0('0x36')],'playerId':this[a22_0x50c0('0x23')][a22_0x50c0('0x27')]};fs[a22_0x50c0('0x3c')](configFile,JSON[a22_0x50c0('0x35')](this[a22_0x50c0('0x23')]));}}[a22_0x50c0('0x31')](){console[a22_0x50c0('0x3b')](a22_0x50c0('0x31'));this[a22_0x50c0('0x2b')][a22_0x50c0('0x3d')][a22_0x50c0('0x3e')]()[a22_0x50c0('0x34')](function(_0xb8f567){const _0x43ab16=_0xb8f567[a22_0x50c0('0x3f')][a22_0x50c0('0x40')];this['reportStatus'](_0x43ab16);}[a22_0x50c0('0x32')](this))[a22_0x50c0('0x3a')](function(_0x49019b){console[a22_0x50c0('0x3b')](_0x49019b);this[a22_0x50c0('0x41')](_0x49019b);}[a22_0x50c0('0x32')](this));}[a22_0x50c0('0x41')](_0x321821){console[a22_0x50c0('0x3b')](a22_0x50c0('0x42')+_0x321821);const _0x1c4e44={'player_id':this[a22_0x50c0('0x27')],'device_uuid':this[a22_0x50c0('0x23')][a22_0x50c0('0x36')],'status':_0x321821!=''&&_0x321821!=null?0x1:0x0,'playing_item':_0x321821};this[a22_0x50c0('0x20')][a22_0x50c0('0x38')](a22_0x50c0('0x43'),_0x1c4e44,![])[a22_0x50c0('0x34')](function(_0x2f105c){console[a22_0x50c0('0x3b')]('reportStatusResponse:\x20'+Date());})[a22_0x50c0('0x3a')](function(_0x4ec8a6){});}[a22_0x50c0('0x44')](){fsExtra[a22_0x50c0('0x45')](this[a22_0x50c0('0x15')],_0x538c97=>{});fsExtra[a22_0x50c0('0x45')](this[a22_0x50c0('0x17')],_0x6e21b8=>{});fsExtra[a22_0x50c0('0x45')](this[a22_0x50c0('0x19')],_0x388fc5=>{});}[a22_0x50c0('0x30')](){const _0x4e1d48=format(this[a22_0x50c0('0x2a')],this['playerId']);console['log'](_0x4e1d48);request({'url':_0x4e1d48,'json':!![]},function(_0x160361,_0x1d9107,_0x1fc947){console[a22_0x50c0('0x3b')](a22_0x50c0('0x46'));console[a22_0x50c0('0x3b')](_0x1fc947);this[a22_0x50c0('0x1f')]=_0x1fc947;this[a22_0x50c0('0x47')]=this[a22_0x50c0('0x48')]();fsExtra[a22_0x50c0('0x49')](this['tempFolder']);this['downloadFiles']=[];this[a22_0x50c0('0x1e')]=[];this[a22_0x50c0('0x4a')]=0x0;for(const _0x2f030c in _0x1fc947){this[a22_0x50c0('0x1d')]['push'](_0x1fc947[_0x2f030c]);}console[a22_0x50c0('0x3b')](a22_0x50c0('0x4b')+this['downloadFiles'][a22_0x50c0('0x4c')]);if(this[a22_0x50c0('0x1d')][a22_0x50c0('0x4c')]>0x0){this[a22_0x50c0('0x4d')]();}}[a22_0x50c0('0x32')](this));}[a22_0x50c0('0x4e')](){if(fsExtra[a22_0x50c0('0x4f')](this[a22_0x50c0('0x17')])){fsExtra[a22_0x50c0('0x49')](this[a22_0x50c0('0x17')]);}if(fsExtra[a22_0x50c0('0x4f')](this[a22_0x50c0('0x1a')])){fsExtra['emptyDirSync'](this[a22_0x50c0('0x1a')]);}if(!fsExtra[a22_0x50c0('0x4f')](this['playListFile'])){fsExtra['removeSync'](this[a22_0x50c0('0x1a')]);}if(!fsExtra[a22_0x50c0('0x4f')](this[a22_0x50c0('0x1b')])){fsExtra[a22_0x50c0('0x50')](this[a22_0x50c0('0x1b')]);}this[a22_0x50c0('0x30')]();}['reboot'](){this['kodi'][a22_0x50c0('0x51')][a22_0x50c0('0x52')]();}[a22_0x50c0('0x48')](){const _0x47868e=JSON[a22_0x50c0('0x35')](this[a22_0x50c0('0x1f')]);try{if(!fsExtra[a22_0x50c0('0x4f')](this['playListFile'])){return!![];}else{const _0x37e63f=fsExtra[a22_0x50c0('0x26')](this[a22_0x50c0('0x1a')])[a22_0x50c0('0x53')]();if(_0x37e63f!=_0x47868e){return!![];}}}catch(_0x1c8f98){console[a22_0x50c0('0x3b')](_0x1c8f98);}return![];}[a22_0x50c0('0x4d')](){console[a22_0x50c0('0x3b')](a22_0x50c0('0x54')+this[a22_0x50c0('0x4a')]+'\x20of\x20'+this['downloadFiles']['length']);if(this[a22_0x50c0('0x4a')]>=this[a22_0x50c0('0x1d')][a22_0x50c0('0x4c')]){this[a22_0x50c0('0x55')]();return;}const _0x329cf2=String(this['downloadFiles'][this[a22_0x50c0('0x4a')]][a22_0x50c0('0x56')]);const _0x44df50=this[a22_0x50c0('0x1d')][this[a22_0x50c0('0x4a')]][a22_0x50c0('0x57')];let _0x4bd40a=_0x329cf2[a22_0x50c0('0x58')](_0x329cf2['lastIndexOf']('/')+0x1);const _0x4f714d=_0x4bd40a['split']('.')[a22_0x50c0('0x59')](0x0,-0x1)['join']('.');let _0x1d769d=this[a22_0x50c0('0x28')]+_0x329cf2;const _0x235f10=_0x1d769d['split']('.')[a22_0x50c0('0x59')](0x0,-0x1)['join']('.');if(_0x44df50=='youtube_single'){_0x4bd40a=_0x4bd40a+a22_0x50c0('0x5a');}else if(_0x44df50==a22_0x50c0('0x5b')){_0x4bd40a=_0x4f714d+'.mp4';_0x1d769d=_0x235f10+a22_0x50c0('0x5a');}console['log']('**********+');console[a22_0x50c0('0x3b')](_0x329cf2);console['log'](_0x44df50);console[a22_0x50c0('0x3b')](_0x4bd40a);console[a22_0x50c0('0x3b')](_0x1d769d);console[a22_0x50c0('0x3b')](_0x4f714d);console['log'](_0x235f10);console['log'](a22_0x50c0('0x5c'));if(fsExtra[a22_0x50c0('0x4f')](this[a22_0x50c0('0x17')]+_0x4bd40a)){this[a22_0x50c0('0x5d')](this['tempFolder']+_0x4bd40a)[a22_0x50c0('0x34')](function(_0x5d9b81){if(_0x5d9b81){this[a22_0x50c0('0x4a')]++;}else{this[a22_0x50c0('0x47')]=!![];}this[a22_0x50c0('0x4d')]();}[a22_0x50c0('0x32')](this));}else if(fsExtra[a22_0x50c0('0x4f')](this['filesFolder']+_0x4bd40a)){this[a22_0x50c0('0x5d')](this[a22_0x50c0('0x19')]+_0x4bd40a)['then'](function(_0xa8c4ae){if(_0xa8c4ae){fsExtra[a22_0x50c0('0x5e')](this[a22_0x50c0('0x19')]+_0x4bd40a,this['tempFolder']+_0x4bd40a);this[a22_0x50c0('0x4a')]++;}else{this[a22_0x50c0('0x47')]=!![];}this[a22_0x50c0('0x4d')]();}[a22_0x50c0('0x32')](this));}else{console[a22_0x50c0('0x3b')]('Downloading:\x20'+_0x1d769d);this[a22_0x50c0('0x47')]=!![];if(_0x44df50=='youtube_single'){this['downloadYouTube'](_0x329cf2);}else{this[a22_0x50c0('0x5f')](_0x1d769d,_0x4bd40a,_0x44df50);}}}['checkVideo'](_0x4a68d5){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x50c0('0x3b')](a22_0x50c0('0x60')+_0x4a68d5);const _0x138a5d=yield mediainfo(_0x4a68d5)[a22_0x50c0('0x3a')](_0x2c7ca9=>{console[a22_0x50c0('0x3b')](_0x2c7ca9);fsExtra[a22_0x50c0('0x50')](_0x4a68d5);return![];});const _0x1c1167=_0x138a5d[a22_0x50c0('0x61')][a22_0x50c0('0x62')][a22_0x50c0('0x4c')]>0x1&&_0x138a5d['media'][a22_0x50c0('0x62')][0x1]['@type']==a22_0x50c0('0x63');if(!_0x1c1167){fsExtra[a22_0x50c0('0x50')](_0x4a68d5);}console[a22_0x50c0('0x3b')](a22_0x50c0('0x64')+_0x1c1167);return _0x1c1167;});}[a22_0x50c0('0x5f')](_0x585861,_0x1ef772,_0x476ec9){const _0x9e31dd=new Downloader();console[a22_0x50c0('0x3b')](_0x585861);console[a22_0x50c0('0x3b')](_0x1ef772);console[a22_0x50c0('0x3b')](_0x476ec9);const _0x41b7b8=_0x9e31dd['download'](_0x585861,this[a22_0x50c0('0x17')]+_0x1ef772);urlExists(_0x585861,function(_0xd6b890,_0x18bea6){if(_0x18bea6){if(this[a22_0x50c0('0x1e')][a22_0x50c0('0x65')](this[a22_0x50c0('0x4a')])){const _0x48c7c8=this['failDownloadFiles']['indexOf'](this[a22_0x50c0('0x4a')]);if(_0x48c7c8>-0x1){this[a22_0x50c0('0x1e')][a22_0x50c0('0x66')](_0x48c7c8,0x1);}}console[a22_0x50c0('0x3b')](a22_0x50c0('0x67')+_0x585861);_0x41b7b8[a22_0x50c0('0x68')]();}else{if(!this[a22_0x50c0('0x1e')][a22_0x50c0('0x65')](this[a22_0x50c0('0x4a')])){this['failDownloadFiles'][a22_0x50c0('0x69')](this[a22_0x50c0('0x4a')]);}console[a22_0x50c0('0x3b')](a22_0x50c0('0x6a')+_0x585861);this[a22_0x50c0('0x4a')]++;this[a22_0x50c0('0x4d')]();}}['bind'](this));_0x41b7b8['on'](a22_0x50c0('0x68'),function(_0x41b7b8){console[a22_0x50c0('0x3b')]('start:\x20'+_0x585861);});_0x41b7b8['on']('error',function(_0x41b7b8){console[a22_0x50c0('0x3b')]('error:\x20');this[a22_0x50c0('0x4d')]();}['bind'](this));_0x41b7b8['on'](a22_0x50c0('0x6b'),function(_0x41b7b8){console[a22_0x50c0('0x3b')](a22_0x50c0('0x6b'));console[a22_0x50c0('0x3b')](a22_0x50c0('0x6c')+_0x1ef772);console['log'](a22_0x50c0('0x6d')+_0x476ec9);this[a22_0x50c0('0x5d')](this[a22_0x50c0('0x17')]+_0x1ef772)[a22_0x50c0('0x34')](function(_0x418ed6){if(_0x418ed6){this['currentFile']++;}this[a22_0x50c0('0x4d')]();}[a22_0x50c0('0x32')](this));}['bind'](this));_0x41b7b8['on']('stopped',function(_0x41b7b8){console['log'](a22_0x50c0('0x6e'));});_0x41b7b8['on']('destroyed',function(_0x41b7b8){console['log'](a22_0x50c0('0x6f'));});_0x41b7b8['on'](a22_0x50c0('0x70'),function(_0x41b7b8){console['log'](a22_0x50c0('0x70'));});}[a22_0x50c0('0x71')](_0x16a8f4,_0x52fbd0,_0x6ee6f,_0x357611){console[a22_0x50c0('0x3b')]('downloadHTTPFile');console[a22_0x50c0('0x3b')](_0x16a8f4);const _0x38ff00=!![];let _0x25bf8a=0x0;const _0x129533='';console[a22_0x50c0('0x3b')](a22_0x50c0('0x72')+_0x16a8f4+'\x20to\x20'+_0x52fbd0);if(_0x25bf8a){if(_0x25bf8a>0x5){_0x357611('Max\x20redirects\x20reached',_0x16a8f4,_0x6ee6f,null);return;}}else{_0x25bf8a=0x0;}const _0x4e72e5=this[a22_0x50c0('0x17')]+_0x52fbd0;let _0x50717f;if(_0x357611===undefined){console[a22_0x50c0('0x3b')](a22_0x50c0('0x73')+_0x16a8f4+'\x20to\x20'+_0x4e72e5);_0x357611=function(_0x5690d7,_0x2e0c2e){console['log'](a22_0x50c0('0x74'),_0x5690d7,_0x2e0c2e);};}http[a22_0x50c0('0x75')][a22_0x50c0('0x76')]=0x64;const _0x52e6d5={'host':url['parse'](_0x16a8f4)[a22_0x50c0('0x77')],'port':0x50,'path':url[a22_0x50c0('0x24')](_0x16a8f4)[a22_0x50c0('0x78')],'agent':![]};const _0x9fcc91=http['get'](_0x52e6d5,function(_0x453960){let _0x1eb4f9=0x0;let _0x3fe084=0x0;function _0xe03b49(){if(_0x1eb4f9===undefined){console[a22_0x50c0('0x3b')](_0x52fbd0+a22_0x50c0('0x79')+_0x3fe084+'/'+'?');}const _0x53132b=_0x3fe084/_0x1eb4f9*0x64;console[a22_0x50c0('0x3b')](_0x52fbd0+a22_0x50c0('0x7a')+_0x53132b+'%\x09'+_0x3fe084+'/'+_0x1eb4f9);}console[a22_0x50c0('0x3b')](_0x52fbd0+'\x20'+_0x453960[a22_0x50c0('0x7b')]);switch(_0x453960['statusCode']){case 0xc8:_0x1eb4f9=_0x453960[a22_0x50c0('0x7c')]['content-length']||_0x129533;fs['stat'](_0x4e72e5,function(_0x48a680,_0x26bc8b){if(!_0x48a680){console[a22_0x50c0('0x3b')](a22_0x50c0('0x7d')+_0x4e72e5);if(_0x26bc8b[a22_0x50c0('0x7e')]==_0x1eb4f9){console[a22_0x50c0('0x3b')](a22_0x50c0('0x7f')+_0x1eb4f9+')');console[a22_0x50c0('0x3b')](a22_0x50c0('0x80'));}else{console[a22_0x50c0('0x3b')](a22_0x50c0('0x81')+_0x26bc8b[a22_0x50c0('0x7e')]+a22_0x50c0('0x82')+_0x1eb4f9+')');}}_0x50717f=fs['createWriteStream'](_0x4e72e5);_0x453960['pipe'](_0x50717f);_0x453960['on'](a22_0x50c0('0x83'),function(_0x35b0fc){_0x3fe084+=_0x35b0fc[a22_0x50c0('0x4c')];_0xe03b49();});_0x9fcc91['on'](a22_0x50c0('0x84'),function(_0x48a680){console[a22_0x50c0('0x3b')](a22_0x50c0('0x85'));console['log'](_0x48a680);});_0x50717f['on'](a22_0x50c0('0x86'),function(){console[a22_0x50c0('0x3b')](a22_0x50c0('0x87')+_0x16a8f4+'\x20to\x20'+_0x52fbd0);_0x357611(null,_0x52fbd0,_0x6ee6f,_0x52fbd0);}['bind'](this));});break;case 0x12e:const _0x4ad84a=_0x453960[a22_0x50c0('0x7c')][a22_0x50c0('0x88')];console[a22_0x50c0('0x3b')](a22_0x50c0('0x89')+_0x16a8f4+a22_0x50c0('0x8a')+_0x4ad84a);if(_0x25bf8a<0x5){this[a22_0x50c0('0x71')](_0x4ad84a,_0x52fbd0,_0x357611,_0x25bf8a++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x16a8f4+'.');_0x357611('302',null,null,null);}return;case 0x194:console[a22_0x50c0('0x3b')](a22_0x50c0('0x8b')+_0x16a8f4);default:console[a22_0x50c0('0x3b')](a22_0x50c0('0x8c')+_0x16a8f4+a22_0x50c0('0x8d')+_0x453960[a22_0x50c0('0x7b')]);_0x9fcc91['abort']();_0x357611(_0x453960[a22_0x50c0('0x7b')],null,null,null);return;}})['on']('error',function(_0x216e6e){console[a22_0x50c0('0x3b')](a22_0x50c0('0x8e')+_0x16a8f4+'\x20'+_0x216e6e[a22_0x50c0('0x8f')]);_0x357611(_0x216e6e,null,null,null);});}['downloadHTTPFileCallback'](_0x5159c2,_0x6cb7ea,_0x2821e9,_0x576fe1){console[a22_0x50c0('0x3b')](a22_0x50c0('0x90'));console[a22_0x50c0('0x3b')](_0x5159c2);console['log'](_0x6cb7ea);console[a22_0x50c0('0x3b')](_0x2821e9);console['log'](_0x576fe1);if(_0x2821e9==a22_0x50c0('0x5b')){const _0x454757=this['downloadFiles'][this[a22_0x50c0('0x4a')]]['duration']!=null?this['downloadFiles'][this[a22_0x50c0('0x4a')]][a22_0x50c0('0x91')]:0x1e;this[a22_0x50c0('0x92')](_0x576fe1,_0x454757);}else if(_0x2821e9=='video'){if(_0x5159c2==null&&_0x6cb7ea!=''){this[a22_0x50c0('0x4a')]++;}this[a22_0x50c0('0x4d')]();}console[a22_0x50c0('0x3b')](this[a22_0x50c0('0x4a')]);}['downloadRequestFile'](_0x3be634,_0x34e053,_0x4c0f2b){progress(request(_0x3be634),{})['on'](a22_0x50c0('0x93'),function(_0x280fd8){console[a22_0x50c0('0x3b')](_0x280fd8);})['on'](a22_0x50c0('0x84'),function(_0x538491){console[a22_0x50c0('0x3b')](a22_0x50c0('0x94'));this[a22_0x50c0('0x4d')]();})['on'](a22_0x50c0('0x6b'),function(){console[a22_0x50c0('0x3b')](a22_0x50c0('0x6c')+_0x34e053);console['log'](a22_0x50c0('0x6d')+_0x4c0f2b);if(_0x4c0f2b=='image'){const _0x12a460=this[a22_0x50c0('0x1d')][this['currentFile']]['duration']!=null?this['downloadFiles'][this[a22_0x50c0('0x4a')]][a22_0x50c0('0x91')]:0x1e;this['createImageVideo'](_0x34e053,_0x12a460);}else if(_0x4c0f2b=='video'){this[a22_0x50c0('0x4a')]++;this[a22_0x50c0('0x4d')]();}}[a22_0x50c0('0x32')](this))[a22_0x50c0('0x95')](fs[a22_0x50c0('0x96')](this[a22_0x50c0('0x17')]+_0x34e053));}['createImageVideo'](_0x573978,_0x2846ce=0x1e){const _0x500671=this['tempFolder']+_0x573978;console[a22_0x50c0('0x3b')](_0x500671);console[a22_0x50c0('0x3b')](_0x573978);const _0x28fb34=_0x573978['split']('.')[a22_0x50c0('0x59')](0x0,-0x1)['join']('.');const _0x57c2fb=a22_0x50c0('0x97');const _0x1651f2=['-y','-r','1/2',a22_0x50c0('0x98'),'1','-pattern_type',a22_0x50c0('0x99'),'-i',_0x500671,'-t',String(_0x2846ce),a22_0x50c0('0x9a'),a22_0x50c0('0x9b'),'-pix_fmt',a22_0x50c0('0x9c'),'-r','25','-vf',a22_0x50c0('0x9d'),this[a22_0x50c0('0x17')]+_0x28fb34+a22_0x50c0('0x5a')];const _0x4369e8=spawn(_0x57c2fb,_0x1651f2);_0x4369e8[a22_0x50c0('0x9e')]['on'](a22_0x50c0('0x83'),function(_0x3f8180){console[a22_0x50c0('0x3b')](a22_0x50c0('0x9f')+_0x500671);});_0x4369e8['stderr']['on']('data',function(_0x14a4fd){console[a22_0x50c0('0x3b')](a22_0x50c0('0xa0')+_0x14a4fd);}[a22_0x50c0('0x32')](this));_0x4369e8['on'](a22_0x50c0('0xa1'),function(){console[a22_0x50c0('0x3b')](a22_0x50c0('0xa2'));this['currentFile']++;this[a22_0x50c0('0x4d')]();}['bind'](this));}[a22_0x50c0('0xa3')](_0x10bdee){const _0x1dc5d2=this[a22_0x50c0('0x17')]+'/'+_0x10bdee+'.mp4';const _0x49db51=youtubedl('http://www.youtube.com/watch?v='+_0x10bdee,['--format=18'],{'cwd':__dirname});_0x49db51['on'](a22_0x50c0('0xa4'),function(_0x167f80){console['log'](a22_0x50c0('0xa5'));console[a22_0x50c0('0x3b')]('filename:\x20'+_0x167f80[a22_0x50c0('0xa6')]);console[a22_0x50c0('0x3b')](a22_0x50c0('0xa7')+_0x167f80['size']);});_0x49db51['on']('complete',function complete(_0x4dd9b4){'use strict';console[a22_0x50c0('0x3b')](a22_0x50c0('0xa8')+_0x4dd9b4[a22_0x50c0('0xa6')]+a22_0x50c0('0xa9'));});_0x49db51['on'](a22_0x50c0('0x6b'),function(){console['log'](a22_0x50c0('0xaa'));this[a22_0x50c0('0x5d')](_0x1dc5d2)[a22_0x50c0('0x34')](function(_0x3be272){if(_0x3be272){this[a22_0x50c0('0x4a')]++;}this['download']();}[a22_0x50c0('0x32')](this));}[a22_0x50c0('0x32')](this));_0x49db51[a22_0x50c0('0x95')](fs[a22_0x50c0('0x96')](_0x1dc5d2));}[a22_0x50c0('0x55')](){console['log']('Finishing');if(this['playlistChanged']){if(this[a22_0x50c0('0x1e')][a22_0x50c0('0x4c')]==0x0){fs['writeFileSync'](this['playListFile'],JSON[a22_0x50c0('0x35')](this['newPlayList']));let _0x15b967=a22_0x50c0('0xab')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x434624 in this['downloadFiles']){const _0x3409ff=this[a22_0x50c0('0x1d')][_0x434624][a22_0x50c0('0x56')];const _0x50b928=this[a22_0x50c0('0x1d')][_0x434624][a22_0x50c0('0x57')];const _0x139668=_0x3409ff['substring'](_0x3409ff['lastIndexOf']('/')+0x1);let _0x4b18a2=_0x139668[a22_0x50c0('0xac')]('.')['slice'](0x0,-0x1)[a22_0x50c0('0xad')]('.');if(_0x50b928=='youtube_single'){_0x4b18a2=_0x3409ff;}_0x15b967+=a22_0x50c0('0xae')+_0x4b18a2+a22_0x50c0('0x5a')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x50c0('0x19')]);fsExtra['copySync'](this[a22_0x50c0('0x17')],this[a22_0x50c0('0x19')]);fsExtra[a22_0x50c0('0x3c')](this[a22_0x50c0('0x1b')],_0x15b967);fsExtra[a22_0x50c0('0x49')](this[a22_0x50c0('0x17')]);console[a22_0x50c0('0x3b')](a22_0x50c0('0xaf'));const _0x8d4841=spawn('shutdown',['-r',a22_0x50c0('0xb0')]);}else{console[a22_0x50c0('0x3b')](a22_0x50c0('0xb1'));this[a22_0x50c0('0x4a')]=0x0;setTimeout(function(){this['download']();}['bind'](this),0x1388);}}else{console['log']('No\x20playlist\x20changes.');}}}exports[a22_0x50c0('0xb2')]=SyncPlaylistsService;