var a23_0x5a9c=['post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','deviceUuid','writeFileSync','getStatus','player','item','label','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','newPlayList','playlistChanged','hasPlayListChanged','emptyDirSync','currentFile','push','length','download','reloadMediaList','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','slice','join','split','youtube_single','.mp4','image','**********+','Downloading:\x20','downloadYouTube','videoFile:\x20','media','track','Video','downloader','includes','indexOf','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','headers','location','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','end','Downloaded:\x20','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','size:\x20','finished\x20youtube\x20downloading!','checkVideo','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','substring','lastIndexOf','/home/osmc/luloclient/media/files/','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','jsonrpcClient','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','kodiCommandClient','RestartApp()','Rebooting','Reboot()','updateSettings','playerServiceURL','rss','header_active','setRss','enableClock','CECStandby()','turnOnTV','CECActivateSource()','err:\x20%j','result:\x20%j','none','rssfeeds','Builder','buildObject','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','videoplayer.usedisplayasclock','enableClock:\x20','/jsonrpc','__awaiter','throw','value','then','apply','next','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','fs-extra','request-progress','child_process','spawn','exec','youtube-dl','config.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','tempFolder','temp/','filesFolder','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','downloadFiles','failDownloadFiles','kodiHost','kodiUser','.lulo123.','forceReload','playerService','PlayerService','init','config','parse','context','readFileSync','playerId','baseURL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','kodiPassword','registerClient','checkFolders','loadMediaList','bind','checkDependencies','getItems','stringify','httpClientService'];(function(_0x3d22b0,_0x36146c){var _0x256372=function(_0x410cab){while(--_0x410cab){_0x3d22b0['push'](_0x3d22b0['shift']());}};_0x256372(++_0x36146c);}(a23_0x5a9c,0xa4));var a23_0xe33e=function(_0x507bc3,_0x32e451){_0x507bc3=_0x507bc3-0x0;var _0xdde444=a23_0x5a9c[_0x507bc3];return _0xdde444;};'use strict';var __awaiter=this&&this[a23_0xe33e('0x0')]||function(_0x42f35a,_0x200470,_0x16ba05,_0x6124d5){function _0x22c64c(_0x54f433){return _0x54f433 instanceof _0x16ba05?_0x54f433:new _0x16ba05(function(_0x3a11a2){_0x3a11a2(_0x54f433);});}return new(_0x16ba05||(_0x16ba05=Promise))(function(_0xa98698,_0xb10d02){function _0xdc9ac2(_0x3f44e7){try{_0x2461ab(_0x6124d5['next'](_0x3f44e7));}catch(_0x2c3f56){_0xb10d02(_0x2c3f56);}}function _0x1fe2c5(_0x4824f3){try{_0x2461ab(_0x6124d5[a23_0xe33e('0x1')](_0x4824f3));}catch(_0x112d30){_0xb10d02(_0x112d30);}}function _0x2461ab(_0x537045){_0x537045['done']?_0xa98698(_0x537045[a23_0xe33e('0x2')]):_0x22c64c(_0x537045[a23_0xe33e('0x2')])[a23_0xe33e('0x3')](_0xdc9ac2,_0x1fe2c5);}_0x2461ab((_0x6124d5=_0x6124d5[a23_0xe33e('0x4')](_0x42f35a,_0x200470||[]))[a23_0xe33e('0x5')]());});};Object[a23_0xe33e('0x6')](exports,a23_0xe33e('0x7'),{'value':!![]});const HttpClientService_1=require(a23_0xe33e('0x8'));const playerService_1=require(a23_0xe33e('0x9'));const mediainfo=require(a23_0xe33e('0xa'));const fs=require('fs');const url=require(a23_0xe33e('0xb'));const http=require('http');const fsExtra=require(a23_0xe33e('0xc'));const request=require('request');const progress=require(a23_0xe33e('0xd'));const spawn=require(a23_0xe33e('0xe'))[a23_0xe33e('0xf')];const exec=require(a23_0xe33e('0xe'))[a23_0xe33e('0x10')];const isImage=require('is-image');const format=require('string-template');const os=require('os');const youtubedl=require(a23_0xe33e('0x11'));const uuidv4=require('uuid/v4');const configFile=a23_0xe33e('0x12');const contextFile='context.json';const urlExists=require(a23_0xe33e('0x13'));const kodi_rpc=require(a23_0xe33e('0x14'));const Downloader=require(a23_0xe33e('0x15'));class SyncPlaylistsService{constructor(){this[a23_0xe33e('0x16')]='media/';this[a23_0xe33e('0x17')]=this[a23_0xe33e('0x16')]+a23_0xe33e('0x18');this[a23_0xe33e('0x19')]=this[a23_0xe33e('0x16')]+'files/';this[a23_0xe33e('0x1a')]=this['mediaFolder']+a23_0xe33e('0x1b');this[a23_0xe33e('0x1c')]=this['filesFolder']+a23_0xe33e('0x1d');this['currentFile']=0x0;this['playlistChanged']=![];this[a23_0xe33e('0x1e')]=[];this[a23_0xe33e('0x1f')]=[];this['newPlayList']={};this[a23_0xe33e('0x20')]='http://localhost';this[a23_0xe33e('0x21')]='lulo';this['kodiPassword']=a23_0xe33e('0x22');this[a23_0xe33e('0x23')]=![];this['httpClientService']=new HttpClientService_1['HttpClientService']();this[a23_0xe33e('0x24')]=new playerService_1[(a23_0xe33e('0x25'))]();}[a23_0xe33e('0x26')](){this[a23_0xe33e('0x27')]=JSON[a23_0xe33e('0x28')](fs['readFileSync'](configFile));this[a23_0xe33e('0x29')]=JSON[a23_0xe33e('0x28')](fs[a23_0xe33e('0x2a')](contextFile));this[a23_0xe33e('0x2b')]=this[a23_0xe33e('0x27')][a23_0xe33e('0x2b')];this[a23_0xe33e('0x2c')]=process['env']['WEB_SERVICE_URL']+a23_0xe33e('0x2d');this[a23_0xe33e('0x2e')]=this['baseURL']+a23_0xe33e('0x2f');this['playerServiceURL']=this[a23_0xe33e('0x2c')]+'api/player.php?player_id={0}';this[a23_0xe33e('0x30')]=new kodi_rpc({'url':this[a23_0xe33e('0x20')],'user':this[a23_0xe33e('0x21')],'password':this[a23_0xe33e('0x31')]});this['checkDependencies']();this[a23_0xe33e('0x32')]();this[a23_0xe33e('0x33')]();this[a23_0xe33e('0x34')]();this['updateSettings']();setInterval(function(){this['getStatus']();}[a23_0xe33e('0x35')](this),0x2710);setInterval(function(){this[a23_0xe33e('0x32')]();}[a23_0xe33e('0x35')](this),0x493e0);}[a23_0xe33e('0x36')](){}[a23_0xe33e('0x32')](){this['kodi']['playlist'][a23_0xe33e('0x37')](0x1)[a23_0xe33e('0x3')](function(_0x5c3eff){const _0x2e2206=JSON[a23_0xe33e('0x38')](_0x5c3eff);const _0x4d50d7={'player_id':this['playerId'],'device_uuid':this[a23_0xe33e('0x27')]['deviceUuid'],'network_info':JSON[a23_0xe33e('0x38')](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this[a23_0xe33e('0x29')]),'playlist':_0x2e2206,'playing_item':'','status':0x0};this[a23_0xe33e('0x39')][a23_0xe33e('0x3a')](a23_0xe33e('0x3b'),_0x4d50d7,![])[a23_0xe33e('0x3')](function(_0x2539e9){console[a23_0xe33e('0x3c')](a23_0xe33e('0x3d')+Date());})[a23_0xe33e('0x3e')](function(_0x3c1f8c){});console['log'](_0x4d50d7);}[a23_0xe33e('0x35')](this));const _0x463432=this[a23_0xe33e('0x27')][a23_0xe33e('0x3f')];if(!_0x463432||_0x463432==''){this[a23_0xe33e('0x27')]['deviceUuid']=uuidv4();this[a23_0xe33e('0x27')]={'deviceUuid':this[a23_0xe33e('0x27')][a23_0xe33e('0x3f')],'playerId':this[a23_0xe33e('0x27')][a23_0xe33e('0x2b')]};fs[a23_0xe33e('0x40')](configFile,JSON['stringify'](this['config']));}}[a23_0xe33e('0x41')](){console[a23_0xe33e('0x3c')](a23_0xe33e('0x41'));this[a23_0xe33e('0x30')][a23_0xe33e('0x42')]['getCurrentlyPlayingVideo']()[a23_0xe33e('0x3')](function(_0x1a241d){const _0x36c2ca=_0x1a241d[a23_0xe33e('0x43')][a23_0xe33e('0x44')];this['reportStatus'](_0x36c2ca);}[a23_0xe33e('0x35')](this))[a23_0xe33e('0x3e')](function(_0x495ce8){console['log'](_0x495ce8);this[a23_0xe33e('0x45')](_0x495ce8);}[a23_0xe33e('0x35')](this));}[a23_0xe33e('0x45')](_0x2d2f29){console[a23_0xe33e('0x3c')](a23_0xe33e('0x46')+_0x2d2f29);const _0x28e2b1={'player_id':this[a23_0xe33e('0x2b')],'device_uuid':this[a23_0xe33e('0x27')]['deviceUuid'],'status':_0x2d2f29!=''&&_0x2d2f29!=null?0x1:0x0,'playing_item':_0x2d2f29};this['httpClientService']['post'](a23_0xe33e('0x47'),_0x28e2b1,![])[a23_0xe33e('0x3')](function(_0x291790){console[a23_0xe33e('0x3c')](a23_0xe33e('0x48')+Date());})['catch'](function(_0x341bf8){});}[a23_0xe33e('0x33')](){fsExtra[a23_0xe33e('0x49')](this['mediaFolder'],_0x32fa79=>{});fsExtra['ensureDir'](this[a23_0xe33e('0x17')],_0xd62e61=>{});fsExtra[a23_0xe33e('0x49')](this[a23_0xe33e('0x19')],_0x3a7ce0=>{});}['loadMediaList'](){const _0x5471f5=format(this[a23_0xe33e('0x2e')],this[a23_0xe33e('0x2b')]);console[a23_0xe33e('0x3c')](_0x5471f5);request({'url':_0x5471f5,'json':!![]},function(_0x4f3330,_0x1fa2df,_0x426dd1){console[a23_0xe33e('0x3c')](a23_0xe33e('0x4a'));this[a23_0xe33e('0x4b')]=_0x426dd1;this[a23_0xe33e('0x4c')]=this[a23_0xe33e('0x4d')]();fsExtra[a23_0xe33e('0x4e')](this[a23_0xe33e('0x17')]);this[a23_0xe33e('0x1e')]=[];this[a23_0xe33e('0x1f')]=[];this[a23_0xe33e('0x4f')]=0x0;for(const _0x303c24 in _0x426dd1){this[a23_0xe33e('0x1e')][a23_0xe33e('0x50')](_0x426dd1[_0x303c24]);}console['log']('Total:\x20'+this[a23_0xe33e('0x1e')][a23_0xe33e('0x51')]);if(this['downloadFiles'][a23_0xe33e('0x51')]>0x0){this[a23_0xe33e('0x52')]();}}[a23_0xe33e('0x35')](this));}[a23_0xe33e('0x53')](){this['forceReload']=!![];if(fsExtra[a23_0xe33e('0x54')](this[a23_0xe33e('0x17')])){fsExtra['emptyDirSync'](this['tempFolder']);}if(fsExtra[a23_0xe33e('0x54')](this['filesFolder'])){fsExtra[a23_0xe33e('0x4e')](this[a23_0xe33e('0x19')]);}if(!fsExtra[a23_0xe33e('0x54')](this[a23_0xe33e('0x1a')])){fsExtra[a23_0xe33e('0x55')](this[a23_0xe33e('0x1a')]);}if(!fsExtra[a23_0xe33e('0x54')](this[a23_0xe33e('0x1c')])){fsExtra[a23_0xe33e('0x55')](this['m3uFile']);}this[a23_0xe33e('0x34')]();}[a23_0xe33e('0x4d')](){const _0x45d9b5=JSON[a23_0xe33e('0x38')](this['newPlayList']);try{if(!fsExtra[a23_0xe33e('0x54')](this[a23_0xe33e('0x1a')])){return!![];}else{const _0x45f24b=fsExtra['readFileSync'](this['playListFile'])[a23_0xe33e('0x56')]();if(_0x45f24b!=_0x45d9b5){return!![];}}}catch(_0x5ee1ce){console[a23_0xe33e('0x3c')](_0x5ee1ce);}return![];}[a23_0xe33e('0x52')](){console[a23_0xe33e('0x3c')](a23_0xe33e('0x57')+this[a23_0xe33e('0x4f')]+a23_0xe33e('0x58')+this[a23_0xe33e('0x1e')][a23_0xe33e('0x51')]);if(this[a23_0xe33e('0x4f')]>=this[a23_0xe33e('0x1e')]['length']){this[a23_0xe33e('0x59')]();return;}const _0x37f570=String(this[a23_0xe33e('0x1e')][this[a23_0xe33e('0x4f')]]['path']);const _0x239b09=this[a23_0xe33e('0x1e')][this[a23_0xe33e('0x4f')]][a23_0xe33e('0x5a')];let _0x199a82=_0x37f570['substring'](_0x37f570['lastIndexOf']('/')+0x1);const _0x249711=_0x199a82['split']('.')[a23_0xe33e('0x5b')](0x0,-0x1)[a23_0xe33e('0x5c')]('.');let _0x5efd18=this[a23_0xe33e('0x2c')]+_0x37f570;const _0x490d50=_0x5efd18[a23_0xe33e('0x5d')]('.')[a23_0xe33e('0x5b')](0x0,-0x1)['join']('.');if(_0x239b09==a23_0xe33e('0x5e')){_0x199a82=_0x199a82+a23_0xe33e('0x5f');}else if(_0x239b09==a23_0xe33e('0x60')){_0x199a82=_0x249711+a23_0xe33e('0x5f');_0x5efd18=_0x490d50+a23_0xe33e('0x5f');}console['log'](a23_0xe33e('0x61'));console[a23_0xe33e('0x3c')](_0x37f570);console[a23_0xe33e('0x3c')](_0x239b09);console['log'](_0x199a82);console[a23_0xe33e('0x3c')](_0x5efd18);console[a23_0xe33e('0x3c')](_0x249711);console[a23_0xe33e('0x3c')](_0x490d50);console[a23_0xe33e('0x3c')](a23_0xe33e('0x61'));if(fsExtra[a23_0xe33e('0x54')](this[a23_0xe33e('0x17')]+_0x199a82)){this['checkVideo'](this[a23_0xe33e('0x17')]+_0x199a82)[a23_0xe33e('0x3')](function(_0x7eab9){if(_0x7eab9){this[a23_0xe33e('0x4f')]++;}else{this[a23_0xe33e('0x4c')]=!![];}this[a23_0xe33e('0x52')]();}[a23_0xe33e('0x35')](this));}else if(fsExtra['existsSync'](this[a23_0xe33e('0x19')]+_0x199a82)){this['checkVideo'](this['filesFolder']+_0x199a82)[a23_0xe33e('0x3')](function(_0x3b7d96){if(_0x3b7d96){fsExtra['copySync'](this[a23_0xe33e('0x19')]+_0x199a82,this['tempFolder']+_0x199a82);this['currentFile']++;}else{this[a23_0xe33e('0x4c')]=!![];}this[a23_0xe33e('0x52')]();}['bind'](this));}else{console['log'](a23_0xe33e('0x62')+_0x5efd18);this[a23_0xe33e('0x4c')]=!![];if(_0x239b09==a23_0xe33e('0x5e')){this[a23_0xe33e('0x63')](_0x37f570);}else{this['downloader'](_0x5efd18,_0x199a82,_0x239b09);}}}['checkVideo'](_0x360c3d){return __awaiter(this,void 0x0,void 0x0,function*(){console[a23_0xe33e('0x3c')](a23_0xe33e('0x64')+_0x360c3d);const _0x31b61f=yield mediainfo(_0x360c3d)[a23_0xe33e('0x3e')](_0x4d0285=>{console[a23_0xe33e('0x3c')](_0x4d0285);fsExtra[a23_0xe33e('0x55')](_0x360c3d);return![];});const _0x482136=_0x31b61f[a23_0xe33e('0x65')][a23_0xe33e('0x66')]['length']>0x1&&_0x31b61f['media'][a23_0xe33e('0x66')][0x1]['@type']==a23_0xe33e('0x67');if(!_0x482136){fsExtra[a23_0xe33e('0x55')](_0x360c3d);}console[a23_0xe33e('0x3c')]('mediainfo\x20check:'+_0x482136);return _0x482136;});}[a23_0xe33e('0x68')](_0x5336f7,_0x2b838c,_0x28e9bf){const _0x32dfea=new Downloader();console['log'](_0x5336f7);console['log'](_0x2b838c);console[a23_0xe33e('0x3c')](_0x28e9bf);const _0x28f9e4=_0x32dfea[a23_0xe33e('0x52')](_0x5336f7,this[a23_0xe33e('0x17')]+_0x2b838c);urlExists(_0x5336f7,function(_0x2f1ad5,_0xe7c88b){if(_0xe7c88b){if(this[a23_0xe33e('0x1f')][a23_0xe33e('0x69')](this['currentFile'])){const _0x33f0cc=this[a23_0xe33e('0x1f')][a23_0xe33e('0x6a')](this['currentFile']);if(_0x33f0cc>-0x1){this['failDownloadFiles']['splice'](_0x33f0cc,0x1);}}console[a23_0xe33e('0x3c')](a23_0xe33e('0x6b')+_0x5336f7);_0x28f9e4[a23_0xe33e('0x6c')]();}else{if(!this[a23_0xe33e('0x1f')][a23_0xe33e('0x69')](this[a23_0xe33e('0x4f')])){this[a23_0xe33e('0x1f')][a23_0xe33e('0x50')](this['currentFile']);}console[a23_0xe33e('0x3c')](a23_0xe33e('0x6d')+_0x5336f7);this[a23_0xe33e('0x4f')]++;this[a23_0xe33e('0x52')]();}}[a23_0xe33e('0x35')](this));_0x28f9e4['on'](a23_0xe33e('0x6c'),function(_0x28f9e4){console[a23_0xe33e('0x3c')](a23_0xe33e('0x6e')+_0x5336f7);});_0x28f9e4['on'](a23_0xe33e('0x6f'),function(_0x28f9e4){console['log'](a23_0xe33e('0x70'));this['download']();}[a23_0xe33e('0x35')](this));_0x28f9e4['on']('end',function(_0x28f9e4){console['log']('end');console[a23_0xe33e('0x3c')]('Downloaded:\x20'+_0x2b838c);console[a23_0xe33e('0x3c')](a23_0xe33e('0x71')+_0x28e9bf);this['checkVideo'](this[a23_0xe33e('0x17')]+_0x2b838c)[a23_0xe33e('0x3')](function(_0x3852b1){if(_0x3852b1){this[a23_0xe33e('0x4f')]++;}this['download']();}['bind'](this));}[a23_0xe33e('0x35')](this));_0x28f9e4['on'](a23_0xe33e('0x72'),function(_0x28f9e4){console[a23_0xe33e('0x3c')](a23_0xe33e('0x72'));});_0x28f9e4['on'](a23_0xe33e('0x73'),function(_0x28f9e4){console[a23_0xe33e('0x3c')](a23_0xe33e('0x73'));});_0x28f9e4['on'](a23_0xe33e('0x74'),function(_0x28f9e4){console[a23_0xe33e('0x3c')](a23_0xe33e('0x74'));});}[a23_0xe33e('0x75')](_0x3071aa,_0x5dd187,_0x1affd9,_0x168409){console['log']('downloadHTTPFile');console[a23_0xe33e('0x3c')](_0x3071aa);const _0x17cf26=!![];let _0xde5fa2=0x0;const _0x311f06='';console['log'](a23_0xe33e('0x76')+_0x3071aa+'\x20to\x20'+_0x5dd187);if(_0xde5fa2){if(_0xde5fa2>0x5){_0x168409(a23_0xe33e('0x77'),_0x3071aa,_0x1affd9,null);return;}}else{_0xde5fa2=0x0;}const _0x3bca3c=this['tempFolder']+_0x5dd187;let _0x52b15a;if(_0x168409===undefined){console[a23_0xe33e('0x3c')](a23_0xe33e('0x78')+_0x3071aa+a23_0xe33e('0x79')+_0x3bca3c);_0x168409=function(_0x36c484,_0x1412c4){console[a23_0xe33e('0x3c')](a23_0xe33e('0x7a'),_0x36c484,_0x1412c4);};}http[a23_0xe33e('0x7b')][a23_0xe33e('0x7c')]=0x64;const _0x4297b7={'host':url['parse'](_0x3071aa)[a23_0xe33e('0x7d')],'port':0x50,'path':url[a23_0xe33e('0x28')](_0x3071aa)[a23_0xe33e('0x7e')],'agent':![]};const _0x39fa1d=http['get'](_0x4297b7,function(_0x3582b1){let _0x85cb4b=0x0;let _0x40be68=0x0;function _0x319773(){if(_0x85cb4b===undefined){console[a23_0xe33e('0x3c')](_0x5dd187+'\x20Progress:\x20unknown\x09'+_0x40be68+'/'+'?');}const _0x38ea08=_0x40be68/_0x85cb4b*0x64;console[a23_0xe33e('0x3c')](_0x5dd187+a23_0xe33e('0x7f')+_0x38ea08+'%\x09'+_0x40be68+'/'+_0x85cb4b);}console[a23_0xe33e('0x3c')](_0x5dd187+'\x20'+_0x3582b1[a23_0xe33e('0x80')]);switch(_0x3582b1[a23_0xe33e('0x80')]){case 0xc8:_0x85cb4b=_0x3582b1['headers'][a23_0xe33e('0x81')]||_0x311f06;fs[a23_0xe33e('0x82')](_0x3bca3c,function(_0x26be08,_0x5a6e8d){if(!_0x26be08){console['log'](a23_0xe33e('0x83')+_0x3bca3c);if(_0x5a6e8d[a23_0xe33e('0x84')]==_0x85cb4b){console[a23_0xe33e('0x3c')](a23_0xe33e('0x85')+_0x85cb4b+')');console[a23_0xe33e('0x3c')](a23_0xe33e('0x86'));}else{console['log'](a23_0xe33e('0x87')+_0x5a6e8d['size']+a23_0xe33e('0x88')+_0x85cb4b+')');}}_0x52b15a=fs[a23_0xe33e('0x89')](_0x3bca3c);_0x3582b1[a23_0xe33e('0x8a')](_0x52b15a);_0x3582b1['on'](a23_0xe33e('0x8b'),function(_0x20a976){_0x40be68+=_0x20a976[a23_0xe33e('0x51')];_0x319773();});_0x39fa1d['on']('error',function(_0x26be08){console['log'](a23_0xe33e('0x8c'));console['log'](_0x26be08);});_0x52b15a['on'](a23_0xe33e('0x8d'),function(){console[a23_0xe33e('0x3c')](a23_0xe33e('0x8e')+_0x3071aa+a23_0xe33e('0x79')+_0x5dd187);_0x168409(null,_0x5dd187,_0x1affd9,_0x5dd187);}[a23_0xe33e('0x35')](this));});break;case 0x12e:const _0xebdd4e=_0x3582b1[a23_0xe33e('0x8f')][a23_0xe33e('0x90')];console[a23_0xe33e('0x3c')](a23_0xe33e('0x91')+_0x3071aa+a23_0xe33e('0x79')+_0xebdd4e);if(_0xde5fa2<0x5){this[a23_0xe33e('0x75')](_0xebdd4e,_0x5dd187,_0x168409,_0xde5fa2++);}else{console[a23_0xe33e('0x6f')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x3071aa+'.');_0x168409(a23_0xe33e('0x92'),null,null,null);}return;case 0x194:console[a23_0xe33e('0x3c')](a23_0xe33e('0x93')+_0x3071aa);default:console[a23_0xe33e('0x3c')](a23_0xe33e('0x94')+_0x3071aa+a23_0xe33e('0x95')+_0x3582b1['statusCode']);_0x39fa1d['abort']();_0x168409(_0x3582b1[a23_0xe33e('0x80')],null,null,null);return;}})['on']('error',function(_0x31b453){console[a23_0xe33e('0x3c')](a23_0xe33e('0x96')+_0x3071aa+'\x20'+_0x31b453[a23_0xe33e('0x97')]);_0x168409(_0x31b453,null,null,null);});}[a23_0xe33e('0x98')](_0x2bef20,_0x47381e,_0x586170,_0x2e1f59){console['log'](a23_0xe33e('0x98'));console[a23_0xe33e('0x3c')](_0x2bef20);console[a23_0xe33e('0x3c')](_0x47381e);console[a23_0xe33e('0x3c')](_0x586170);console[a23_0xe33e('0x3c')](_0x2e1f59);if(_0x586170==a23_0xe33e('0x60')){const _0x267ec6=this['downloadFiles'][this[a23_0xe33e('0x4f')]][a23_0xe33e('0x99')]!=null?this[a23_0xe33e('0x1e')][this['currentFile']][a23_0xe33e('0x99')]:0x1e;this[a23_0xe33e('0x9a')](_0x2e1f59,_0x267ec6);}else if(_0x586170=='video'){if(_0x2bef20==null&&_0x47381e!=''){this[a23_0xe33e('0x4f')]++;}this[a23_0xe33e('0x52')]();}console[a23_0xe33e('0x3c')](this['currentFile']);}[a23_0xe33e('0x9b')](_0x2d0c78,_0xb4d0a8,_0x145a34){progress(request(_0x2d0c78),{})['on'](a23_0xe33e('0x9c'),function(_0x1c7df1){console[a23_0xe33e('0x3c')](_0x1c7df1);})['on']('error',function(_0x215655){console[a23_0xe33e('0x3c')](a23_0xe33e('0x9d'));this[a23_0xe33e('0x52')]();})['on'](a23_0xe33e('0x9e'),function(){console[a23_0xe33e('0x3c')](a23_0xe33e('0x9f')+_0xb4d0a8);console[a23_0xe33e('0x3c')](a23_0xe33e('0x71')+_0x145a34);if(_0x145a34=='image'){const _0x2fef4e=this[a23_0xe33e('0x1e')][this[a23_0xe33e('0x4f')]][a23_0xe33e('0x99')]!=null?this['downloadFiles'][this[a23_0xe33e('0x4f')]][a23_0xe33e('0x99')]:0x1e;this[a23_0xe33e('0x9a')](_0xb4d0a8,_0x2fef4e);}else if(_0x145a34=='video'){this[a23_0xe33e('0x4f')]++;this[a23_0xe33e('0x52')]();}}[a23_0xe33e('0x35')](this))[a23_0xe33e('0x8a')](fs[a23_0xe33e('0x89')](this['tempFolder']+_0xb4d0a8));}[a23_0xe33e('0x9a')](_0x2722ec,_0x4385ba=0x1e){const _0x232e1d=this[a23_0xe33e('0x17')]+_0x2722ec;console[a23_0xe33e('0x3c')](_0x232e1d);console[a23_0xe33e('0x3c')](_0x2722ec);const _0x1e012d=_0x2722ec[a23_0xe33e('0x5d')]('.')['slice'](0x0,-0x1)[a23_0xe33e('0x5c')]('.');const _0xa7fbe2=a23_0xe33e('0xa0');const _0x51d4ff=['-y','-r',a23_0xe33e('0xa1'),a23_0xe33e('0xa2'),'1',a23_0xe33e('0xa3'),a23_0xe33e('0xa4'),'-i',_0x232e1d,'-t',String(_0x4385ba),a23_0xe33e('0xa5'),a23_0xe33e('0xa6'),a23_0xe33e('0xa7'),a23_0xe33e('0xa8'),'-r','25',a23_0xe33e('0xa9'),'scale=1920:1080',this[a23_0xe33e('0x17')]+_0x1e012d+a23_0xe33e('0x5f')];const _0x37d719=spawn(_0xa7fbe2,_0x51d4ff);_0x37d719['stdout']['on'](a23_0xe33e('0x8b'),function(_0x3b2af7){console[a23_0xe33e('0x3c')](a23_0xe33e('0xaa')+_0x232e1d);});_0x37d719['stderr']['on']('data',function(_0x17da00){console[a23_0xe33e('0x3c')](a23_0xe33e('0xab')+_0x17da00);}['bind'](this));_0x37d719['on'](a23_0xe33e('0xac'),function(){console[a23_0xe33e('0x3c')](a23_0xe33e('0xad'));this[a23_0xe33e('0x4f')]++;this[a23_0xe33e('0x52')]();}[a23_0xe33e('0x35')](this));}['downloadYouTube'](_0x316afb){const _0x48c290=this[a23_0xe33e('0x17')]+'/'+_0x316afb+a23_0xe33e('0x5f');const _0x4311c6=youtubedl(a23_0xe33e('0xae')+_0x316afb,[a23_0xe33e('0xaf')],{'cwd':__dirname});_0x4311c6['on'](a23_0xe33e('0xb0'),function(_0x4652b2){console['log'](a23_0xe33e('0xb1'));console[a23_0xe33e('0x3c')]('filename:\x20'+_0x4652b2['_filename']);console[a23_0xe33e('0x3c')](a23_0xe33e('0xb2')+_0x4652b2['size']);});_0x4311c6['on']('complete',function complete(_0x306a65){'use strict';console[a23_0xe33e('0x3c')]('filename:\x20'+_0x306a65['_filename']+'\x20already\x20downloaded.');});_0x4311c6['on']('end',function(){console[a23_0xe33e('0x3c')](a23_0xe33e('0xb3'));this[a23_0xe33e('0xb4')](_0x48c290)[a23_0xe33e('0x3')](function(_0xcece1c){if(_0xcece1c){this['currentFile']++;}this[a23_0xe33e('0x52')]();}['bind'](this));}[a23_0xe33e('0x35')](this));_0x4311c6['pipe'](fs[a23_0xe33e('0x89')](_0x48c290));}[a23_0xe33e('0x59')](){console[a23_0xe33e('0x3c')](a23_0xe33e('0xb5'));if(this[a23_0xe33e('0x4c')]){if(this['failDownloadFiles'][a23_0xe33e('0x51')]==0x0){fs[a23_0xe33e('0x40')](this[a23_0xe33e('0x1a')],JSON[a23_0xe33e('0x38')](this[a23_0xe33e('0x4b')]));let _0x7cf37f=a23_0xe33e('0xb6')+'\x0d\x0a'+a23_0xe33e('0xb7')+'\x0d\x0a';for(const _0x4e47ea in this[a23_0xe33e('0x1e')]){const _0x1be252=this['downloadFiles'][_0x4e47ea][a23_0xe33e('0xb8')];const _0x45c2a4=this[a23_0xe33e('0x1e')][_0x4e47ea][a23_0xe33e('0x5a')];const _0x24053d=_0x1be252[a23_0xe33e('0xb9')](_0x1be252[a23_0xe33e('0xba')]('/')+0x1);let _0x2e75bb=_0x24053d[a23_0xe33e('0x5d')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x45c2a4==a23_0xe33e('0x5e')){_0x2e75bb=_0x1be252;}_0x7cf37f+=a23_0xe33e('0xbb')+_0x2e75bb+a23_0xe33e('0x5f')+'\x0d\x0a';}fsExtra[a23_0xe33e('0x4e')](this['filesFolder']);fsExtra['copySync'](this[a23_0xe33e('0x17')],this[a23_0xe33e('0x19')]);fsExtra[a23_0xe33e('0x40')](this[a23_0xe33e('0x1c')],_0x7cf37f);fsExtra['emptyDirSync'](this[a23_0xe33e('0x17')]);console['log'](a23_0xe33e('0xbc'));this[a23_0xe33e('0xbd')]();}else{console[a23_0xe33e('0x3c')](a23_0xe33e('0xbe'));this[a23_0xe33e('0x4f')]=0x0;setTimeout(function(){this[a23_0xe33e('0x52')]();}[a23_0xe33e('0x35')](this),0x1388);}}else{console[a23_0xe33e('0x3c')]('No\x20playlist\x20changes.');}}[a23_0xe33e('0xbd')](){this[a23_0xe33e('0xbf')]('Playlist.Clear',{'playlistid':0x1},function(_0x26e7c3){console['log']('Playlist.Cleared');console['log'](_0x26e7c3);this[a23_0xe33e('0xbf')](a23_0xe33e('0xc0'),{'item':{'file':a23_0xe33e('0xc1')},'playlistid':0x1},function(_0x26e7c3){console[a23_0xe33e('0x3c')](a23_0xe33e('0xc2'));console[a23_0xe33e('0x3c')](_0x26e7c3);this[a23_0xe33e('0xbf')](a23_0xe33e('0xc3'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x26e7c3){console['log'](a23_0xe33e('0xc4'));console[a23_0xe33e('0x3c')](_0x26e7c3);if(this[a23_0xe33e('0x23')]){this[a23_0xe33e('0x23')]=![];this[a23_0xe33e('0xc5')](a23_0xe33e('0xc6'));}}[a23_0xe33e('0x35')](this));}[a23_0xe33e('0x35')](this));}[a23_0xe33e('0x35')](this));}['reboot'](){console['log'](a23_0xe33e('0xc7'));this[a23_0xe33e('0xc5')](a23_0xe33e('0xc8'));}[a23_0xe33e('0xc9')](){const _0x370b40=format(this[a23_0xe33e('0xca')],this[a23_0xe33e('0x2b')]);console['log'](_0x370b40);request({'url':_0x370b40,'json':!![]},function(_0x157699,_0x379de8,_0xa9da2){if(_0xa9da2[a23_0xe33e('0x51')]>0x0){const _0x5d5a3f=_0xa9da2[0x0];const _0x345636=_0x5d5a3f[a23_0xe33e('0xcb')];const _0x414b7d=_0x5d5a3f[a23_0xe33e('0xcc')]==0x1;this[a23_0xe33e('0xcd')](_0x345636);this[a23_0xe33e('0xce')](_0x414b7d);this[a23_0xe33e('0x32')]();}console['log'](_0xa9da2);}[a23_0xe33e('0x35')](this));}['turnOffTV'](){this[a23_0xe33e('0xc5')](a23_0xe33e('0xcf'));}[a23_0xe33e('0xd0')](){this['kodiCommandClient'](a23_0xe33e('0xd1'));}['setRss'](_0x5c621c){const _0x521702=_0x5c621c!=null&&_0x5c621c!='';const _0x31c232='/home/osmc/.kodi/userdata/RssFeeds.xml';const _0x4039cc=fsExtra[a23_0xe33e('0x2a')](_0x31c232);console['log']('xmlContent:\x20'+_0x4039cc);const _0x3446eb=require('xml2js');const _0x28bf4b=_0x3446eb['parseString'];_0x28bf4b(_0x4039cc,function(_0x5603c2,_0x11b6ac){console[a23_0xe33e('0x3c')](a23_0xe33e('0xd2'),_0x5603c2);console[a23_0xe33e('0x3c')](a23_0xe33e('0xd3'),_0x11b6ac);if(!_0x5c621c||_0x5c621c==null||_0x5c621c==''){_0x5c621c=a23_0xe33e('0xd4');}_0x11b6ac[a23_0xe33e('0xd5')]['set'][0x0]['feed'][0x0]['_']=_0x5c621c;const _0x3996db=new _0x3446eb[(a23_0xe33e('0xd6'))]();const _0x5636ca=_0x3996db[a23_0xe33e('0xd7')](_0x11b6ac);console[a23_0xe33e('0x3c')]('xml:\x20%j',_0x5636ca);fsExtra[a23_0xe33e('0x40')](_0x31c232,_0x5636ca);});this['kodiCommandClient'](a23_0xe33e('0xd8'));this[a23_0xe33e('0xbf')](a23_0xe33e('0xd9'),{'setting':a23_0xe33e('0xda'),'value':_0x521702},function(_0x3290f7){console[a23_0xe33e('0x3c')]('setRss:');console[a23_0xe33e('0x3c')](_0x3290f7);}[a23_0xe33e('0x35')](this));}[a23_0xe33e('0xce')](_0x42f78f){this[a23_0xe33e('0xbf')](a23_0xe33e('0xd9'),{'setting':a23_0xe33e('0xdb'),'value':_0x42f78f},function(_0x15b648){console[a23_0xe33e('0x3c')](a23_0xe33e('0xdc'));console['log'](_0x15b648);}['bind'](this));}[a23_0xe33e('0xc5')](_0x567696){exec('kodi-send\x20--action=\x22'+_0x567696+'\x22',function(_0x38f2b0){console[a23_0xe33e('0x3c')](_0x38f2b0);});}['jsonrpcClient'](_0x207bb8,_0x982a60,_0x5499c4){const _0x180b26={'jsonrpc':'2.0','method':_0x207bb8,'params':_0x982a60,'id':0x1};this[a23_0xe33e('0x39')][a23_0xe33e('0x3a')](this[a23_0xe33e('0x20')]+a23_0xe33e('0xdd'),_0x180b26,![],{'user':this['kodiUser'],'pass':this[a23_0xe33e('0x31')]})[a23_0xe33e('0x3')](function(_0x2e083d){_0x5499c4(_0x2e083d);})['catch'](function(_0x3b1736){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;