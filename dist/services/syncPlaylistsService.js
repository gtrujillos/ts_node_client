var a23_0x48c2=['.mp4','checkVideo','copySync','Downloading:\x20','playlistChanged','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','start','Error:\x20','start:\x20','error','error:\x20','end','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','headers','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','Downloaded:\x20','ffmpeg','1/2','-loop','-pattern_type','glob','libx264','-pix_fmt','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','--format=18','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','Finishing','#EXTCPlayListM3U::M3U','/home/osmc/luloclient/media/files/','Refreshing..','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','kodiCommandClient','RestartApp()','reboot','Rebooting','updateSettings','rss','header_active','setRss','enableClock','turnOffTV','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','result:\x20%j','rssfeeds','set','feed','xml:\x20%j','RefreshRSS()','lookandfeel.enablerssfeeds','setRss:','Settings.SetSettingValue','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','/jsonrpc','SyncPlaylistsService','__awaiter','next','done','value','then','defineProperty','../infrastructure/HttpClientService','./playerService','url','http','fs-extra','request-progress','is-image','string-template','youtube-dl','uuid/v4','config.json','context.json','url-exists','node-kodi','tempFolder','mediaFolder','filesFolder','files/','playListFile','m3uFile','lulo_playlist.m3u','currentFile','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','kodiPassword','.lulo123.','forceReload','httpClientService','playerService','init','config','parse','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','deviceUuid','writeFileSync','getCurrentlyPlayingVideo','label','reportStatus','playingItem:\x20','reportStatusResponse:\x20','ensureDir','emptyDirSync','downloadFiles','push','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','hasPlayListChanged','toString','finishProcess','path','media_type','substring','lastIndexOf','split','join','slice','youtube_single','image'];(function(_0x7e756f,_0x3bf2cc){var _0x2fd173=function(_0x2e0766){while(--_0x2e0766){_0x7e756f['push'](_0x7e756f['shift']());}};_0x2fd173(++_0x3bf2cc);}(a23_0x48c2,0x15b));var a23_0x1386=function(_0x2b9caa,_0x5941ee){_0x2b9caa=_0x2b9caa-0x0;var _0x3b2c15=a23_0x48c2[_0x2b9caa];return _0x3b2c15;};'use strict';var __awaiter=this&&this[a23_0x1386('0x0')]||function(_0x18db8e,_0x1ea1b0,_0x30e540,_0x38b672){function _0x2b85ee(_0x19d8b5){return _0x19d8b5 instanceof _0x30e540?_0x19d8b5:new _0x30e540(function(_0x4daf0a){_0x4daf0a(_0x19d8b5);});}return new(_0x30e540||(_0x30e540=Promise))(function(_0x5b4fbc,_0x258ac0){function _0x5b0df8(_0x1cb985){try{_0x5f0e80(_0x38b672[a23_0x1386('0x1')](_0x1cb985));}catch(_0x39ae81){_0x258ac0(_0x39ae81);}}function _0x241636(_0x11795a){try{_0x5f0e80(_0x38b672['throw'](_0x11795a));}catch(_0x4e9013){_0x258ac0(_0x4e9013);}}function _0x5f0e80(_0x1bc8eb){_0x1bc8eb[a23_0x1386('0x2')]?_0x5b4fbc(_0x1bc8eb[a23_0x1386('0x3')]):_0x2b85ee(_0x1bc8eb[a23_0x1386('0x3')])[a23_0x1386('0x4')](_0x5b0df8,_0x241636);}_0x5f0e80((_0x38b672=_0x38b672['apply'](_0x18db8e,_0x1ea1b0||[]))[a23_0x1386('0x1')]());});};Object[a23_0x1386('0x5')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a23_0x1386('0x6'));const playerService_1=require(a23_0x1386('0x7'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a23_0x1386('0x8'));const http=require(a23_0x1386('0x9'));const fsExtra=require(a23_0x1386('0xa'));const request=require('request');const progress=require(a23_0x1386('0xb'));const spawn=require('child_process')['spawn'];const exec=require('child_process')['exec'];const isImage=require(a23_0x1386('0xc'));const format=require(a23_0x1386('0xd'));const os=require('os');const youtubedl=require(a23_0x1386('0xe'));const uuidv4=require(a23_0x1386('0xf'));const configFile=a23_0x1386('0x10');const contextFile=a23_0x1386('0x11');const urlExists=require(a23_0x1386('0x12'));const kodi_rpc=require(a23_0x1386('0x13'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']='media/';this[a23_0x1386('0x14')]=this[a23_0x1386('0x15')]+'temp/';this[a23_0x1386('0x16')]=this['mediaFolder']+a23_0x1386('0x17');this[a23_0x1386('0x18')]=this[a23_0x1386('0x15')]+'playlist.txt';this[a23_0x1386('0x19')]=this[a23_0x1386('0x16')]+a23_0x1386('0x1a');this[a23_0x1386('0x1b')]=0x0;this['playlistChanged']=![];this['downloadFiles']=[];this[a23_0x1386('0x1c')]=[];this[a23_0x1386('0x1d')]={};this[a23_0x1386('0x1e')]=a23_0x1386('0x1f');this[a23_0x1386('0x20')]='lulo';this[a23_0x1386('0x21')]=a23_0x1386('0x22');this[a23_0x1386('0x23')]=![];this[a23_0x1386('0x24')]=new HttpClientService_1['HttpClientService']();this[a23_0x1386('0x25')]=new playerService_1['PlayerService']();}[a23_0x1386('0x26')](){this[a23_0x1386('0x27')]=JSON[a23_0x1386('0x28')](fs[a23_0x1386('0x29')](configFile));this[a23_0x1386('0x2a')]=JSON[a23_0x1386('0x28')](fs['readFileSync'](contextFile));this[a23_0x1386('0x2b')]=this[a23_0x1386('0x27')]['playerId'];this[a23_0x1386('0x2c')]=process[a23_0x1386('0x2d')][a23_0x1386('0x2e')]+a23_0x1386('0x2f');this[a23_0x1386('0x30')]=this['baseURL']+a23_0x1386('0x31');this[a23_0x1386('0x32')]=this[a23_0x1386('0x2c')]+a23_0x1386('0x33');this[a23_0x1386('0x34')]=new kodi_rpc({'url':this[a23_0x1386('0x1e')],'user':this[a23_0x1386('0x20')],'password':this[a23_0x1386('0x21')]});this[a23_0x1386('0x35')]();this[a23_0x1386('0x36')]();this[a23_0x1386('0x37')]();this[a23_0x1386('0x38')]();this['updateSettings']();setInterval(function(){this[a23_0x1386('0x39')]();}['bind'](this),0x2710);setInterval(function(){this[a23_0x1386('0x36')]();}[a23_0x1386('0x3a')](this),0x493e0);}[a23_0x1386('0x35')](){}[a23_0x1386('0x36')](){this[a23_0x1386('0x34')]['playlist']['getItems'](0x1)['then'](function(_0x134aa8){const _0x46ed2d=JSON[a23_0x1386('0x3b')](_0x134aa8);const _0x3ef2c5={'player_id':this[a23_0x1386('0x2b')],'device_uuid':this[a23_0x1386('0x27')]['deviceUuid'],'network_info':JSON[a23_0x1386('0x3b')](os[a23_0x1386('0x3c')]()),'firmware_info':JSON['stringify'](this[a23_0x1386('0x2a')]),'playlist':_0x46ed2d,'playing_item':'','status':0x0};this['httpClientService'][a23_0x1386('0x3d')](a23_0x1386('0x3e'),_0x3ef2c5,![])[a23_0x1386('0x4')](function(_0x486802){console[a23_0x1386('0x3f')](a23_0x1386('0x40')+Date());})[a23_0x1386('0x41')](function(_0xf76fa0){});console[a23_0x1386('0x3f')](_0x3ef2c5);}[a23_0x1386('0x3a')](this));const _0x32dae0=this[a23_0x1386('0x27')][a23_0x1386('0x42')];if(!_0x32dae0||_0x32dae0==''){this[a23_0x1386('0x27')]['deviceUuid']=uuidv4();this[a23_0x1386('0x27')]={'deviceUuid':this[a23_0x1386('0x27')][a23_0x1386('0x42')],'playerId':this[a23_0x1386('0x27')]['playerId']};fs[a23_0x1386('0x43')](configFile,JSON[a23_0x1386('0x3b')](this[a23_0x1386('0x27')]));}}['getStatus'](){console[a23_0x1386('0x3f')](a23_0x1386('0x39'));this[a23_0x1386('0x34')]['player'][a23_0x1386('0x44')]()['then'](function(_0x46a6bb){const _0x11e345=_0x46a6bb['item'][a23_0x1386('0x45')];this[a23_0x1386('0x46')](_0x11e345);}['bind'](this))[a23_0x1386('0x41')](function(_0x1bec8c){console[a23_0x1386('0x3f')](_0x1bec8c);this[a23_0x1386('0x46')](JSON[a23_0x1386('0x3b')](_0x1bec8c));}[a23_0x1386('0x3a')](this));}[a23_0x1386('0x46')](_0x1e6f0b){console['log'](a23_0x1386('0x47')+_0x1e6f0b);const _0x56b45d={'player_id':this[a23_0x1386('0x2b')],'device_uuid':this['config'][a23_0x1386('0x42')],'status':_0x1e6f0b!=''&&_0x1e6f0b!=null?0x1:0x0,'playing_item':_0x1e6f0b};this[a23_0x1386('0x24')][a23_0x1386('0x3d')]('http://restapi.lulo.run/player_devices/report_status',_0x56b45d,![])[a23_0x1386('0x4')](function(_0x4e70a3){console[a23_0x1386('0x3f')](a23_0x1386('0x48')+JSON[a23_0x1386('0x3b')](_0x4e70a3));})['catch'](function(_0x1fb46d){});}[a23_0x1386('0x37')](){fsExtra['ensureDir'](this['mediaFolder'],_0x559db1=>{});fsExtra[a23_0x1386('0x49')](this['tempFolder'],_0x515043=>{});fsExtra[a23_0x1386('0x49')](this[a23_0x1386('0x16')],_0x649e34=>{});}['loadMediaList'](){const _0x1fed15=format(this[a23_0x1386('0x30')],this[a23_0x1386('0x2b')]);console[a23_0x1386('0x3f')](_0x1fed15);request({'url':_0x1fed15,'json':!![]},function(_0x1206ad,_0x33da28,_0x5ba6a8){console['log']('loadMediaList:\x20');this[a23_0x1386('0x1d')]=_0x5ba6a8;this['playlistChanged']=this['hasPlayListChanged']();fsExtra[a23_0x1386('0x4a')](this[a23_0x1386('0x14')]);this['downloadFiles']=[];this[a23_0x1386('0x1c')]=[];this[a23_0x1386('0x1b')]=0x0;for(const _0x403c68 in _0x5ba6a8){this[a23_0x1386('0x4b')][a23_0x1386('0x4c')](_0x5ba6a8[_0x403c68]);}console[a23_0x1386('0x3f')](a23_0x1386('0x4d')+this[a23_0x1386('0x4b')]['length']);if(this[a23_0x1386('0x4b')][a23_0x1386('0x4e')]>0x0){this[a23_0x1386('0x4f')]();}}[a23_0x1386('0x3a')](this));}[a23_0x1386('0x50')](){this[a23_0x1386('0x23')]=!![];if(fsExtra[a23_0x1386('0x51')](this['tempFolder'])){fsExtra['emptyDirSync'](this[a23_0x1386('0x14')]);}if(fsExtra[a23_0x1386('0x51')](this[a23_0x1386('0x16')])){fsExtra[a23_0x1386('0x4a')](this[a23_0x1386('0x16')]);}if(!fsExtra[a23_0x1386('0x51')](this[a23_0x1386('0x18')])){fsExtra[a23_0x1386('0x52')](this[a23_0x1386('0x18')]);}if(!fsExtra[a23_0x1386('0x51')](this['m3uFile'])){fsExtra[a23_0x1386('0x52')](this[a23_0x1386('0x19')]);}this[a23_0x1386('0x38')]();}[a23_0x1386('0x53')](){const _0x59b779=JSON[a23_0x1386('0x3b')](this['newPlayList']);try{if(!fsExtra[a23_0x1386('0x51')](this[a23_0x1386('0x18')])){return!![];}else{const _0x5cd037=fsExtra[a23_0x1386('0x29')](this['playListFile'])[a23_0x1386('0x54')]();if(_0x5cd037!=_0x59b779){return!![];}}}catch(_0x4b2e55){console['log'](_0x4b2e55);}return![];}[a23_0x1386('0x4f')](){console[a23_0x1386('0x3f')]('this.currentFile:\x20'+this[a23_0x1386('0x1b')]+'\x20of\x20'+this['downloadFiles'][a23_0x1386('0x4e')]);if(this[a23_0x1386('0x1b')]>=this[a23_0x1386('0x4b')][a23_0x1386('0x4e')]){this[a23_0x1386('0x55')]();return;}const _0x5c36ca=String(this['downloadFiles'][this[a23_0x1386('0x1b')]][a23_0x1386('0x56')]);const _0x2f4cbb=this[a23_0x1386('0x4b')][this['currentFile']][a23_0x1386('0x57')];let _0x5bc35d=_0x5c36ca[a23_0x1386('0x58')](_0x5c36ca[a23_0x1386('0x59')]('/')+0x1);const _0xd9ff86=_0x5bc35d[a23_0x1386('0x5a')]('.')['slice'](0x0,-0x1)[a23_0x1386('0x5b')]('.');let _0x4fa180=this[a23_0x1386('0x2c')]+_0x5c36ca;const _0x55012f=_0x4fa180['split']('.')[a23_0x1386('0x5c')](0x0,-0x1)[a23_0x1386('0x5b')]('.');if(_0x2f4cbb==a23_0x1386('0x5d')){_0x5bc35d=_0x5bc35d+'.mp4';}else if(_0x2f4cbb==a23_0x1386('0x5e')){_0x5bc35d=_0xd9ff86+a23_0x1386('0x5f');_0x4fa180=_0x55012f+a23_0x1386('0x5f');}console['log']('**********+');console[a23_0x1386('0x3f')](_0x5c36ca);console[a23_0x1386('0x3f')](_0x2f4cbb);console['log'](_0x5bc35d);console[a23_0x1386('0x3f')](_0x4fa180);console['log'](_0xd9ff86);console[a23_0x1386('0x3f')](_0x55012f);console['log']('**********+');if(fsExtra[a23_0x1386('0x51')](this['tempFolder']+_0x5bc35d)){this[a23_0x1386('0x60')](this[a23_0x1386('0x14')]+_0x5bc35d)[a23_0x1386('0x4')](function(_0x149c28){if(_0x149c28){this[a23_0x1386('0x1b')]++;}else{this['playlistChanged']=!![];}this['download']();}[a23_0x1386('0x3a')](this));}else if(fsExtra[a23_0x1386('0x51')](this[a23_0x1386('0x16')]+_0x5bc35d)){this['checkVideo'](this[a23_0x1386('0x16')]+_0x5bc35d)[a23_0x1386('0x4')](function(_0x50e1cc){if(_0x50e1cc){fsExtra[a23_0x1386('0x61')](this[a23_0x1386('0x16')]+_0x5bc35d,this['tempFolder']+_0x5bc35d);this['currentFile']++;}else{this['playlistChanged']=!![];}this[a23_0x1386('0x4f')]();}[a23_0x1386('0x3a')](this));}else{console[a23_0x1386('0x3f')](a23_0x1386('0x62')+_0x4fa180);this[a23_0x1386('0x63')]=!![];if(_0x2f4cbb==a23_0x1386('0x5d')){this[a23_0x1386('0x64')](_0x5c36ca);}else{this[a23_0x1386('0x65')](_0x4fa180,_0x5bc35d,_0x2f4cbb);}}}[a23_0x1386('0x60')](_0x2f3dc9){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a23_0x1386('0x66')+_0x2f3dc9);const _0x1d320d=yield mediainfo(_0x2f3dc9)[a23_0x1386('0x41')](_0x4b1b10=>{console[a23_0x1386('0x3f')](_0x4b1b10);fsExtra['removeSync'](_0x2f3dc9);return![];});const _0x464e9f=_0x1d320d[a23_0x1386('0x67')][a23_0x1386('0x68')][a23_0x1386('0x4e')]>0x1&&_0x1d320d[a23_0x1386('0x67')][a23_0x1386('0x68')][0x1][a23_0x1386('0x69')]==a23_0x1386('0x6a');if(!_0x464e9f){fsExtra[a23_0x1386('0x52')](_0x2f3dc9);}console[a23_0x1386('0x3f')](a23_0x1386('0x6b')+_0x464e9f);return _0x464e9f;});}[a23_0x1386('0x65')](_0x1394ae,_0x354e70,_0x4e32bb){const _0x3b926a=new Downloader();console[a23_0x1386('0x3f')](_0x1394ae);console[a23_0x1386('0x3f')](_0x354e70);console[a23_0x1386('0x3f')](_0x4e32bb);const _0x46609a=_0x3b926a[a23_0x1386('0x4f')](_0x1394ae,this['tempFolder']+_0x354e70);urlExists(_0x1394ae,function(_0x1ad932,_0x4935e1){if(_0x4935e1){if(this[a23_0x1386('0x1c')][a23_0x1386('0x6c')](this[a23_0x1386('0x1b')])){const _0x211c60=this[a23_0x1386('0x1c')][a23_0x1386('0x6d')](this[a23_0x1386('0x1b')]);if(_0x211c60>-0x1){this[a23_0x1386('0x1c')][a23_0x1386('0x6e')](_0x211c60,0x1);}}console[a23_0x1386('0x3f')]('downloading:\x20'+_0x1394ae);_0x46609a[a23_0x1386('0x6f')]();}else{if(!this['failDownloadFiles'][a23_0x1386('0x6c')](this[a23_0x1386('0x1b')])){this[a23_0x1386('0x1c')]['push'](this[a23_0x1386('0x1b')]);}console[a23_0x1386('0x3f')](a23_0x1386('0x70')+_0x1394ae);this['currentFile']++;this[a23_0x1386('0x4f')]();}}[a23_0x1386('0x3a')](this));_0x46609a['on'](a23_0x1386('0x6f'),function(_0x46609a){console['log'](a23_0x1386('0x71')+_0x1394ae);});_0x46609a['on'](a23_0x1386('0x72'),function(_0x46609a){console['log'](a23_0x1386('0x73'));this[a23_0x1386('0x4f')]();}[a23_0x1386('0x3a')](this));_0x46609a['on'](a23_0x1386('0x74'),function(_0x46609a){console['log'](a23_0x1386('0x74'));console[a23_0x1386('0x3f')]('Downloaded:\x20'+_0x354e70);console[a23_0x1386('0x3f')](a23_0x1386('0x75')+_0x4e32bb);this[a23_0x1386('0x60')](this['tempFolder']+_0x354e70)[a23_0x1386('0x4')](function(_0x514923){if(_0x514923){this[a23_0x1386('0x1b')]++;}this[a23_0x1386('0x4f')]();}[a23_0x1386('0x3a')](this));}['bind'](this));_0x46609a['on']('stopped',function(_0x46609a){console[a23_0x1386('0x3f')](a23_0x1386('0x76'));});_0x46609a['on'](a23_0x1386('0x77'),function(_0x46609a){console[a23_0x1386('0x3f')](a23_0x1386('0x77'));});_0x46609a['on'](a23_0x1386('0x78'),function(_0x46609a){console[a23_0x1386('0x3f')](a23_0x1386('0x78'));});}[a23_0x1386('0x79')](_0x4851b9,_0x5541cd,_0x2e5438,_0x462d53){console['log']('downloadHTTPFile');console['log'](_0x4851b9);const _0x825d94=!![];let _0x4df269=0x0;const _0x84459f='';console[a23_0x1386('0x3f')](a23_0x1386('0x7a')+_0x4851b9+a23_0x1386('0x7b')+_0x5541cd);if(_0x4df269){if(_0x4df269>0x5){_0x462d53(a23_0x1386('0x7c'),_0x4851b9,_0x2e5438,null);return;}}else{_0x4df269=0x0;}const _0x554b43=this[a23_0x1386('0x14')]+_0x5541cd;let _0x3caf28;if(_0x462d53===undefined){console[a23_0x1386('0x3f')](a23_0x1386('0x7d')+_0x4851b9+a23_0x1386('0x7b')+_0x554b43);_0x462d53=function(_0x339e93,_0x3581d5){console['log'](a23_0x1386('0x7e'),_0x339e93,_0x3581d5);};}http['globalAgent'][a23_0x1386('0x7f')]=0x64;const _0x2d0132={'host':url[a23_0x1386('0x28')](_0x4851b9)[a23_0x1386('0x80')],'port':0x50,'path':url[a23_0x1386('0x28')](_0x4851b9)['pathname'],'agent':![]};const _0x8e844f=http['get'](_0x2d0132,function(_0x5b2db7){let _0x8e7a19=0x0;let _0x454881=0x0;function _0x265185(){if(_0x8e7a19===undefined){console[a23_0x1386('0x3f')](_0x5541cd+'\x20Progress:\x20unknown\x09'+_0x454881+'/'+'?');}const _0x2a370f=_0x454881/_0x8e7a19*0x64;console[a23_0x1386('0x3f')](_0x5541cd+a23_0x1386('0x81')+_0x2a370f+'%\x09'+_0x454881+'/'+_0x8e7a19);}console['log'](_0x5541cd+'\x20'+_0x5b2db7[a23_0x1386('0x82')]);switch(_0x5b2db7[a23_0x1386('0x82')]){case 0xc8:_0x8e7a19=_0x5b2db7['headers'][a23_0x1386('0x83')]||_0x84459f;fs[a23_0x1386('0x84')](_0x554b43,function(_0x1d85bf,_0x5af5f2){if(!_0x1d85bf){console[a23_0x1386('0x3f')](a23_0x1386('0x85')+_0x554b43);if(_0x5af5f2[a23_0x1386('0x86')]==_0x8e7a19){console[a23_0x1386('0x3f')](a23_0x1386('0x87')+_0x8e7a19+')');console[a23_0x1386('0x3f')](a23_0x1386('0x88'));}else{console[a23_0x1386('0x3f')](a23_0x1386('0x89')+_0x5af5f2[a23_0x1386('0x86')]+')\x20vs\x20New('+_0x8e7a19+')');}}_0x3caf28=fs[a23_0x1386('0x8a')](_0x554b43);_0x5b2db7[a23_0x1386('0x8b')](_0x3caf28);_0x5b2db7['on'](a23_0x1386('0x8c'),function(_0x135b50){_0x454881+=_0x135b50[a23_0x1386('0x4e')];_0x265185();});_0x8e844f['on']('error',function(_0x1d85bf){console['log'](a23_0x1386('0x8d'));console[a23_0x1386('0x3f')](_0x1d85bf);});_0x3caf28['on'](a23_0x1386('0x8e'),function(){console[a23_0x1386('0x3f')](a23_0x1386('0x8f')+_0x4851b9+'\x20to\x20'+_0x5541cd);_0x462d53(null,_0x5541cd,_0x2e5438,_0x5541cd);}[a23_0x1386('0x3a')](this));});break;case 0x12e:const _0x31748c=_0x5b2db7[a23_0x1386('0x90')]['location'];console[a23_0x1386('0x3f')](a23_0x1386('0x91')+_0x4851b9+a23_0x1386('0x7b')+_0x31748c);if(_0x4df269<0x5){this['downloadHTTPFile'](_0x31748c,_0x5541cd,_0x462d53,_0x4df269++);}else{console[a23_0x1386('0x72')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x4851b9+'.');_0x462d53(a23_0x1386('0x92'),null,null,null);}return;case 0x194:console[a23_0x1386('0x3f')](a23_0x1386('0x93')+_0x4851b9);default:console[a23_0x1386('0x3f')](a23_0x1386('0x94')+_0x4851b9+a23_0x1386('0x95')+_0x5b2db7[a23_0x1386('0x82')]);_0x8e844f['abort']();_0x462d53(_0x5b2db7[a23_0x1386('0x82')],null,null,null);return;}})['on'](a23_0x1386('0x72'),function(_0x369954){console[a23_0x1386('0x3f')](a23_0x1386('0x96')+_0x4851b9+'\x20'+_0x369954['message']);_0x462d53(_0x369954,null,null,null);});}[a23_0x1386('0x97')](_0x1a2470,_0xe9a63b,_0x1bcd5a,_0x218412){console['log'](a23_0x1386('0x97'));console[a23_0x1386('0x3f')](_0x1a2470);console[a23_0x1386('0x3f')](_0xe9a63b);console[a23_0x1386('0x3f')](_0x1bcd5a);console[a23_0x1386('0x3f')](_0x218412);if(_0x1bcd5a==a23_0x1386('0x5e')){const _0x5f1c3e=this['downloadFiles'][this[a23_0x1386('0x1b')]][a23_0x1386('0x98')]!=null?this[a23_0x1386('0x4b')][this[a23_0x1386('0x1b')]][a23_0x1386('0x98')]:0x1e;this[a23_0x1386('0x99')](_0x218412,_0x5f1c3e);}else if(_0x1bcd5a==a23_0x1386('0x9a')){if(_0x1a2470==null&&_0xe9a63b!=''){this[a23_0x1386('0x1b')]++;}this['download']();}console['log'](this['currentFile']);}[a23_0x1386('0x9b')](_0x2c2a94,_0x3dc23b,_0x41985d){progress(request(_0x2c2a94),{})['on'](a23_0x1386('0x9c'),function(_0x420ebf){console['log'](_0x420ebf);})['on'](a23_0x1386('0x72'),function(_0x1b639f){console[a23_0x1386('0x3f')](a23_0x1386('0x9d'));this['download']();})['on'](a23_0x1386('0x74'),function(){console['log'](a23_0x1386('0x9e')+_0x3dc23b);console['log'](a23_0x1386('0x75')+_0x41985d);if(_0x41985d=='image'){const _0x56abbc=this[a23_0x1386('0x4b')][this[a23_0x1386('0x1b')]][a23_0x1386('0x98')]!=null?this[a23_0x1386('0x4b')][this['currentFile']]['duration']:0x1e;this[a23_0x1386('0x99')](_0x3dc23b,_0x56abbc);}else if(_0x41985d=='video'){this[a23_0x1386('0x1b')]++;this['download']();}}[a23_0x1386('0x3a')](this))[a23_0x1386('0x8b')](fs[a23_0x1386('0x8a')](this[a23_0x1386('0x14')]+_0x3dc23b));}['createImageVideo'](_0x42e5f6,_0x39252d=0x1e){const _0x58cf92=this[a23_0x1386('0x14')]+_0x42e5f6;console['log'](_0x58cf92);console[a23_0x1386('0x3f')](_0x42e5f6);const _0x2c9787=_0x42e5f6[a23_0x1386('0x5a')]('.')['slice'](0x0,-0x1)[a23_0x1386('0x5b')]('.');const _0xd8a304=a23_0x1386('0x9f');const _0x2a9fd6=['-y','-r',a23_0x1386('0xa0'),a23_0x1386('0xa1'),'1',a23_0x1386('0xa2'),a23_0x1386('0xa3'),'-i',_0x58cf92,'-t',String(_0x39252d),'-c:v',a23_0x1386('0xa4'),a23_0x1386('0xa5'),'yuv420p','-r','25','-vf','scale=1920:1080',this[a23_0x1386('0x14')]+_0x2c9787+'.mp4'];const _0x1cb9fa=spawn(_0xd8a304,_0x2a9fd6);_0x1cb9fa['stdout']['on'](a23_0x1386('0x8c'),function(_0xdf8c50){console['log'](a23_0x1386('0xa6')+_0x58cf92);});_0x1cb9fa[a23_0x1386('0xa7')]['on']('data',function(_0x19a7a9){console[a23_0x1386('0x3f')](a23_0x1386('0xa8')+_0x19a7a9);}[a23_0x1386('0x3a')](this));_0x1cb9fa['on']('close',function(){console[a23_0x1386('0x3f')](a23_0x1386('0xa9'));this[a23_0x1386('0x1b')]++;this[a23_0x1386('0x4f')]();}['bind'](this));}[a23_0x1386('0x64')](_0x11b055){const _0x5d8b74=this[a23_0x1386('0x14')]+'/'+_0x11b055+a23_0x1386('0x5f');const _0x1ddbfc=youtubedl('http://www.youtube.com/watch?v='+_0x11b055,[a23_0x1386('0xaa')],{'cwd':__dirname});_0x1ddbfc['on']('info',function(_0xbee70e){console[a23_0x1386('0x3f')]('Download\x20started');console[a23_0x1386('0x3f')](a23_0x1386('0xab')+_0xbee70e[a23_0x1386('0xac')]);console['log'](a23_0x1386('0xad')+_0xbee70e['size']);});_0x1ddbfc['on'](a23_0x1386('0xae'),function complete(_0x25851b){'use strict';console[a23_0x1386('0x3f')](a23_0x1386('0xab')+_0x25851b['_filename']+a23_0x1386('0xaf'));});_0x1ddbfc['on']('end',function(){console[a23_0x1386('0x3f')]('finished\x20youtube\x20downloading!');this[a23_0x1386('0x60')](_0x5d8b74)['then'](function(_0x480591){if(_0x480591){this[a23_0x1386('0x1b')]++;}this[a23_0x1386('0x4f')]();}[a23_0x1386('0x3a')](this));}[a23_0x1386('0x3a')](this));_0x1ddbfc[a23_0x1386('0x8b')](fs[a23_0x1386('0x8a')](_0x5d8b74));}[a23_0x1386('0x55')](){console[a23_0x1386('0x3f')](a23_0x1386('0xb0'));if(this[a23_0x1386('0x63')]){if(this['failDownloadFiles']['length']==0x0){fs[a23_0x1386('0x43')](this[a23_0x1386('0x18')],JSON['stringify'](this[a23_0x1386('0x1d')]));let _0x5f1517=a23_0x1386('0xb1')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x4b8831 in this[a23_0x1386('0x4b')]){const _0x32c914=this[a23_0x1386('0x4b')][_0x4b8831][a23_0x1386('0x56')];const _0x3ee9cc=this[a23_0x1386('0x4b')][_0x4b8831][a23_0x1386('0x57')];const _0x5d9523=_0x32c914[a23_0x1386('0x58')](_0x32c914[a23_0x1386('0x59')]('/')+0x1);let _0x1fa2ec=_0x5d9523[a23_0x1386('0x5a')]('.')[a23_0x1386('0x5c')](0x0,-0x1)[a23_0x1386('0x5b')]('.');if(_0x3ee9cc==a23_0x1386('0x5d')){_0x1fa2ec=_0x32c914;}_0x5f1517+=a23_0x1386('0xb2')+_0x1fa2ec+a23_0x1386('0x5f')+'\x0d\x0a';}fsExtra[a23_0x1386('0x4a')](this[a23_0x1386('0x16')]);fsExtra['copySync'](this[a23_0x1386('0x14')],this[a23_0x1386('0x16')]);fsExtra[a23_0x1386('0x43')](this[a23_0x1386('0x19')],_0x5f1517);fsExtra[a23_0x1386('0x4a')](this[a23_0x1386('0x14')]);console[a23_0x1386('0x3f')](a23_0x1386('0xb3'));this['refreshPlayer']();}else{console[a23_0x1386('0x3f')](a23_0x1386('0xb4'));this[a23_0x1386('0x1b')]=0x0;setTimeout(function(){this[a23_0x1386('0x4f')]();}[a23_0x1386('0x3a')](this),0x1388);}}else{console[a23_0x1386('0x3f')](a23_0x1386('0xb5'));}}[a23_0x1386('0xb6')](){this[a23_0x1386('0xb7')](a23_0x1386('0xb8'),{'playlistid':0x1},function(_0x5606b1){console[a23_0x1386('0x3f')](a23_0x1386('0xb9'));console['log'](_0x5606b1);this[a23_0x1386('0xb7')](a23_0x1386('0xba'),{'item':{'file':a23_0x1386('0xbb')},'playlistid':0x1},function(_0x5606b1){console[a23_0x1386('0x3f')](a23_0x1386('0xbc'));console[a23_0x1386('0x3f')](_0x5606b1);this[a23_0x1386('0xb7')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x5606b1){console[a23_0x1386('0x3f')](a23_0x1386('0xbd'));console[a23_0x1386('0x3f')](_0x5606b1);this[a23_0x1386('0xbe')](a23_0x1386('0xbf'));}['bind'](this));}[a23_0x1386('0x3a')](this));}[a23_0x1386('0x3a')](this));}[a23_0x1386('0xc0')](){console[a23_0x1386('0x3f')](a23_0x1386('0xc1'));this[a23_0x1386('0xbe')]('Reboot()');}[a23_0x1386('0xc2')](){const _0x4eaf70=format(this[a23_0x1386('0x32')],this[a23_0x1386('0x2b')]);console[a23_0x1386('0x3f')](_0x4eaf70);request({'url':_0x4eaf70,'json':!![]},function(_0xf21e4c,_0x43ce82,_0x1f24f2){if(_0x1f24f2['length']>0x0){const _0x36dbb3=_0x1f24f2[0x0];const _0xa0f888=_0x36dbb3[a23_0x1386('0xc3')];const _0x3c42e3=_0x36dbb3[a23_0x1386('0xc4')]==0x1;this[a23_0x1386('0xc5')](_0xa0f888);this[a23_0x1386('0xc6')](_0x3c42e3);this['registerClient']();}console[a23_0x1386('0x3f')](_0x1f24f2);}[a23_0x1386('0x3a')](this));}[a23_0x1386('0xc7')](){this[a23_0x1386('0xbe')]('CECStandby()');}[a23_0x1386('0xc8')](){this[a23_0x1386('0xbe')](a23_0x1386('0xc9'));}['setRss'](_0x26b351){const _0x517170=_0x26b351!=null&&_0x26b351!='';const _0x3737ff=a23_0x1386('0xca');const _0x5c42df=fsExtra[a23_0x1386('0x29')](_0x3737ff);console[a23_0x1386('0x3f')](a23_0x1386('0xcb')+_0x5c42df);const _0x329120=require(a23_0x1386('0xcc'));const _0x420538=_0x329120[a23_0x1386('0xcd')];_0x420538(_0x5c42df,function(_0x14ac10,_0x3ba257){console[a23_0x1386('0x3f')]('err:\x20%j',_0x14ac10);console['log'](a23_0x1386('0xce'),_0x3ba257);if(!_0x26b351||_0x26b351==null||_0x26b351==''){_0x26b351='none';}_0x3ba257[a23_0x1386('0xcf')][a23_0x1386('0xd0')][0x0][a23_0x1386('0xd1')][0x0]['_']=_0x26b351;const _0x816d04=new _0x329120['Builder']();const _0x2a29bd=_0x816d04['buildObject'](_0x3ba257);console['log'](a23_0x1386('0xd2'),_0x2a29bd);fsExtra[a23_0x1386('0x43')](_0x3737ff,_0x2a29bd);});this[a23_0x1386('0xbe')](a23_0x1386('0xd3'));this['jsonrpcClient']('Settings.SetSettingValue',{'setting':a23_0x1386('0xd4'),'value':_0x517170},function(_0x434e4b){console[a23_0x1386('0x3f')](a23_0x1386('0xd5'));console[a23_0x1386('0x3f')](_0x434e4b);}[a23_0x1386('0x3a')](this));}['enableClock'](_0x1ef578){this[a23_0x1386('0xb7')](a23_0x1386('0xd6'),{'setting':a23_0x1386('0xd7'),'value':_0x1ef578},function(_0x533a31){console[a23_0x1386('0x3f')](a23_0x1386('0xd8'));console['log'](_0x533a31);}[a23_0x1386('0x3a')](this));}[a23_0x1386('0xbe')](_0x121f47){exec(a23_0x1386('0xd9')+_0x121f47+'\x22',function(_0x3093e8){console[a23_0x1386('0x3f')](_0x3093e8);});}[a23_0x1386('0xb7')](_0x80f65,_0x2bd24d,_0x3d9520){const _0x4c5596={'jsonrpc':a23_0x1386('0xda'),'method':_0x80f65,'params':_0x2bd24d,'id':0x1};this[a23_0x1386('0x24')][a23_0x1386('0x3d')](this[a23_0x1386('0x1e')]+a23_0x1386('0xdb'),_0x4c5596,![],{'user':this[a23_0x1386('0x20')],'pass':this[a23_0x1386('0x21')]})['then'](function(_0x2477f0){_0x3d9520(_0x2477f0);})['catch'](function(_0xb554a6){});}}exports[a23_0x1386('0xdc')]=SyncPlaylistsService;