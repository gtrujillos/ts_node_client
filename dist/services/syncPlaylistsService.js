var a22_0x3bfa=['config.json','context.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','lulo_playlist.m3u','currentFile','playlistChanged','failDownloadFiles','httpClientService','init','config','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','http://localhost','checkFolders','loadMediaList','reportStatus','bind','playlist','getItems','stringify','deviceUuid','networkInterfaces','post','log','register\x20response:\x20','catch','getCurrentlyPlayingVideo','label','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','ensureDir','newPlayList','hasPlayListChanged','emptyDirSync','downloadFiles','push','Total:\x20','length','download','existsSync','removeSync','finishProcess','path','media_type','substring','lastIndexOf','split','join','slice','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','size',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','headers','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','ffmpeg','-loop','-pattern_type','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','writeFileSync','m3uFile','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','throw','done','value','then','apply','defineProperty','../infrastructure/HttpClientService','http','request-progress','child_process','is-image','string-template','uuid/v4'];(function(_0xb67384,_0x27295a){var _0x156d7c=function(_0x52a1f8){while(--_0x52a1f8){_0xb67384['push'](_0xb67384['shift']());}};_0x156d7c(++_0x27295a);}(a22_0x3bfa,0xa8));var a22_0x2727=function(_0x43beb8,_0x112576){_0x43beb8=_0x43beb8-0x0;var _0x38a17d=a22_0x3bfa[_0x43beb8];return _0x38a17d;};'use strict';var __awaiter=this&&this[a22_0x2727('0x0')]||function(_0x1ec62a,_0x2f8e81,_0xaefd54,_0x385c03){return new(_0xaefd54||(_0xaefd54=Promise))(function(_0x1a2bc1,_0x5ee746){function _0x3a04f5(_0x42e914){try{_0x22a735(_0x385c03[a22_0x2727('0x1')](_0x42e914));}catch(_0x2da31d){_0x5ee746(_0x2da31d);}}function _0x5ccfa4(_0x3dcbfe){try{_0x22a735(_0x385c03[a22_0x2727('0x2')](_0x3dcbfe));}catch(_0x4d5e69){_0x5ee746(_0x4d5e69);}}function _0x22a735(_0x489424){_0x489424[a22_0x2727('0x3')]?_0x1a2bc1(_0x489424[a22_0x2727('0x4')]):new _0xaefd54(function(_0x1a2bc1){_0x1a2bc1(_0x489424[a22_0x2727('0x4')]);})[a22_0x2727('0x5')](_0x3a04f5,_0x5ccfa4);}_0x22a735((_0x385c03=_0x385c03[a22_0x2727('0x6')](_0x1ec62a,_0x2f8e81||[]))[a22_0x2727('0x1')]());});};Object[a22_0x2727('0x7')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a22_0x2727('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require('url');const http=require(a22_0x2727('0x9'));const fsExtra=require('fs-extra');const request=require('request');const progress=require(a22_0x2727('0xa'));const spawn=require(a22_0x2727('0xb'))['spawn'];const isImage=require(a22_0x2727('0xc'));const format=require(a22_0x2727('0xd'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x2727('0xe'));const configFile=a22_0x2727('0xf');const contextFile=a22_0x2727('0x10');const urlExists=require(a22_0x2727('0x11'));const kodi_rpc=require(a22_0x2727('0x12'));const Downloader=require(a22_0x2727('0x13'));class SyncPlaylistsService{constructor(){this[a22_0x2727('0x14')]=a22_0x2727('0x15');this[a22_0x2727('0x16')]=this[a22_0x2727('0x14')]+a22_0x2727('0x17');this[a22_0x2727('0x18')]=this['mediaFolder']+a22_0x2727('0x19');this[a22_0x2727('0x1a')]=this[a22_0x2727('0x14')]+a22_0x2727('0x1b');this['m3uFile']=this[a22_0x2727('0x18')]+a22_0x2727('0x1c');this[a22_0x2727('0x1d')]=0x0;this[a22_0x2727('0x1e')]=![];this['downloadFiles']=[];this[a22_0x2727('0x1f')]=[];this['newPlayList']={};this[a22_0x2727('0x20')]=new HttpClientService_1['HttpClientService']();}[a22_0x2727('0x21')](){this[a22_0x2727('0x22')]=JSON[a22_0x2727('0x23')](fs[a22_0x2727('0x24')](configFile));this[a22_0x2727('0x25')]=JSON[a22_0x2727('0x23')](fs[a22_0x2727('0x24')](contextFile));this[a22_0x2727('0x26')]=this['config'][a22_0x2727('0x26')];this[a22_0x2727('0x27')]=process['env'][a22_0x2727('0x28')]+a22_0x2727('0x29');this[a22_0x2727('0x2a')]=this[a22_0x2727('0x27')]+a22_0x2727('0x2b');this[a22_0x2727('0x2c')]=new kodi_rpc({'url':a22_0x2727('0x2d')});this['checkDependencies']();this['registerClient']();this[a22_0x2727('0x2e')]();this[a22_0x2727('0x2f')]();setInterval(function(){this[a22_0x2727('0x30')]();}[a22_0x2727('0x31')](this),0x2710);setInterval(function(){this['registerClient']();}[a22_0x2727('0x31')](this),0xea60);}['checkDependencies'](){}['registerClient'](){this[a22_0x2727('0x2c')][a22_0x2727('0x32')][a22_0x2727('0x33')](0x1)[a22_0x2727('0x5')](function(_0x3a5edf){const _0x96a5b8=JSON[a22_0x2727('0x34')](_0x3a5edf);const _0x17443b={'player_id':this[a22_0x2727('0x26')],'device_uuid':this[a22_0x2727('0x22')][a22_0x2727('0x35')],'network_info':JSON[a22_0x2727('0x34')](os[a22_0x2727('0x36')]()),'firmware_info':JSON[a22_0x2727('0x34')](this[a22_0x2727('0x25')]),'playlist':_0x96a5b8,'playing_item':'','status':0x0};this[a22_0x2727('0x20')][a22_0x2727('0x37')]('http://restapi.lulo.run/player_devices/register',_0x17443b,![])[a22_0x2727('0x5')](function(_0x36415f){console[a22_0x2727('0x38')](a22_0x2727('0x39')+Date());})[a22_0x2727('0x3a')](function(_0xcca299){});console[a22_0x2727('0x38')](_0x17443b);}['bind'](this));const _0xcff326=this['config'][a22_0x2727('0x35')];if(!_0xcff326||_0xcff326==''){this[a22_0x2727('0x22')][a22_0x2727('0x35')]=uuidv4();this[a22_0x2727('0x22')]={'deviceUuid':this[a22_0x2727('0x22')][a22_0x2727('0x35')],'playerId':this[a22_0x2727('0x22')]['playerId']};fs['writeFileSync'](configFile,JSON[a22_0x2727('0x34')](this['config']));}}[a22_0x2727('0x30')](){console[a22_0x2727('0x38')](a22_0x2727('0x30'));this[a22_0x2727('0x2c')]['player'][a22_0x2727('0x3b')]()[a22_0x2727('0x5')](function(_0x559835){const _0x26066e=_0x559835['item'][a22_0x2727('0x3c')];const _0x2bddff={'player_id':this[a22_0x2727('0x26')],'device_uuid':this['config'][a22_0x2727('0x35')],'status':_0x26066e!=''&&_0x26066e!=null?0x1:0x0,'playing_item':_0x26066e};this[a22_0x2727('0x20')][a22_0x2727('0x37')](a22_0x2727('0x3d'),_0x2bddff,![])[a22_0x2727('0x5')](function(_0x3841bd){console[a22_0x2727('0x38')](a22_0x2727('0x3e')+Date());})[a22_0x2727('0x3a')](function(_0x54042){});}[a22_0x2727('0x31')](this));}[a22_0x2727('0x2e')](){fsExtra[a22_0x2727('0x3f')](this['mediaFolder'],_0x4e3d0e=>{});fsExtra[a22_0x2727('0x3f')](this['tempFolder'],_0x1df6e9=>{});fsExtra[a22_0x2727('0x3f')](this['filesFolder'],_0x38146f=>{});}[a22_0x2727('0x2f')](){const _0x4991fe=format(this[a22_0x2727('0x2a')],this[a22_0x2727('0x26')]);console[a22_0x2727('0x38')](_0x4991fe);request({'url':_0x4991fe,'json':!![]},function(_0x444a21,_0xd7d03a,_0x9e4a1c){this[a22_0x2727('0x40')]=_0x9e4a1c;this[a22_0x2727('0x1e')]=this[a22_0x2727('0x41')]();fsExtra[a22_0x2727('0x42')](this[a22_0x2727('0x16')]);this[a22_0x2727('0x43')]=[];this[a22_0x2727('0x1f')]=[];this['currentFile']=0x0;for(const _0x1df4be in _0x9e4a1c){this[a22_0x2727('0x43')][a22_0x2727('0x44')](_0x9e4a1c[_0x1df4be]);}console[a22_0x2727('0x38')](a22_0x2727('0x45')+this['downloadFiles']['length']);if(this[a22_0x2727('0x43')][a22_0x2727('0x46')]>0x0){this[a22_0x2727('0x47')]();}}[a22_0x2727('0x31')](this));}['reloadMediaList'](){if(fsExtra[a22_0x2727('0x48')](this[a22_0x2727('0x1a')])){fsExtra[a22_0x2727('0x49')](this[a22_0x2727('0x1a')]);}this[a22_0x2727('0x2f')]();}[a22_0x2727('0x41')](){const _0x2cb649=JSON['stringify'](this[a22_0x2727('0x40')]);try{if(!fs[a22_0x2727('0x48')](this['playListFile'])){return!![];}else{const _0x26dd8a=fs[a22_0x2727('0x24')](this[a22_0x2727('0x1a')])['toString']();if(_0x26dd8a!=_0x2cb649){return!![];}}}catch(_0x5c0d3f){console['error'](_0x5c0d3f);}return![];}['download'](){console[a22_0x2727('0x38')]('this.currentFile:\x20'+this[a22_0x2727('0x1d')]+'\x20of\x20'+this[a22_0x2727('0x43')]['length']);if(this[a22_0x2727('0x1d')]>=this[a22_0x2727('0x43')][a22_0x2727('0x46')]){this[a22_0x2727('0x4a')]();return;}const _0x129801=String(this['downloadFiles'][this[a22_0x2727('0x1d')]][a22_0x2727('0x4b')]);const _0xb240b6=this[a22_0x2727('0x43')][this[a22_0x2727('0x1d')]][a22_0x2727('0x4c')];let _0x582438=_0x129801[a22_0x2727('0x4d')](_0x129801[a22_0x2727('0x4e')]('/')+0x1);const _0xca2e1f=_0x582438[a22_0x2727('0x4f')]('.')['slice'](0x0,-0x1)[a22_0x2727('0x50')]('.');let _0x1b1b26=this[a22_0x2727('0x27')]+_0x129801;const _0x32ddfd=_0x1b1b26[a22_0x2727('0x4f')]('.')[a22_0x2727('0x51')](0x0,-0x1)[a22_0x2727('0x50')]('.');if(_0xb240b6==a22_0x2727('0x52')){_0x582438=_0x582438+a22_0x2727('0x53');}else if(_0xb240b6==a22_0x2727('0x54')){_0x582438=_0xca2e1f+a22_0x2727('0x53');_0x1b1b26=_0x32ddfd+a22_0x2727('0x53');}console['log']('**********+');console[a22_0x2727('0x38')](_0x129801);console[a22_0x2727('0x38')](_0xb240b6);console[a22_0x2727('0x38')](_0x582438);console[a22_0x2727('0x38')](_0x1b1b26);console[a22_0x2727('0x38')](_0xca2e1f);console[a22_0x2727('0x38')](_0x32ddfd);console['log'](a22_0x2727('0x55'));if(fsExtra[a22_0x2727('0x48')](this[a22_0x2727('0x16')]+_0x582438)){this[a22_0x2727('0x56')](this[a22_0x2727('0x16')]+_0x582438)[a22_0x2727('0x5')](function(_0x3441eb){if(_0x3441eb){this[a22_0x2727('0x1d')]++;}else{this[a22_0x2727('0x1e')]=!![];}this[a22_0x2727('0x47')]();}[a22_0x2727('0x31')](this));}else if(fsExtra[a22_0x2727('0x48')](this[a22_0x2727('0x18')]+_0x582438)){this['checkVideo'](this[a22_0x2727('0x18')]+_0x582438)[a22_0x2727('0x5')](function(_0x5b929e){if(_0x5b929e){fsExtra[a22_0x2727('0x57')](this['filesFolder']+_0x582438,this['tempFolder']+_0x582438);this[a22_0x2727('0x1d')]++;}else{this[a22_0x2727('0x1e')]=!![];}this[a22_0x2727('0x47')]();}[a22_0x2727('0x31')](this));}else{console[a22_0x2727('0x38')](a22_0x2727('0x58')+_0x1b1b26);this[a22_0x2727('0x1e')]=!![];if(_0xb240b6==a22_0x2727('0x52')){this[a22_0x2727('0x59')](_0x129801);}else{this[a22_0x2727('0x5a')](_0x1b1b26,_0x582438,_0xb240b6);}}}[a22_0x2727('0x56')](_0x476ed3){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x2727('0x38')](a22_0x2727('0x5b')+_0x476ed3);const _0x1859c5=yield mediainfo(_0x476ed3)[a22_0x2727('0x3a')](_0x1df7ae=>{console['log'](_0x1df7ae);fsExtra['removeSync'](_0x476ed3);return![];});const _0x13c8ce=_0x1859c5[a22_0x2727('0x5c')]['track']['length']>0x1&&_0x1859c5[a22_0x2727('0x5c')][a22_0x2727('0x5d')][0x1][a22_0x2727('0x5e')]==a22_0x2727('0x5f');if(!_0x13c8ce){fsExtra[a22_0x2727('0x49')](_0x476ed3);}console[a22_0x2727('0x38')](a22_0x2727('0x60')+_0x13c8ce);return _0x13c8ce;});}[a22_0x2727('0x5a')](_0x2b2cf5,_0x54b571,_0x20b422){const _0x2141c1=new Downloader();console['log'](_0x2b2cf5);console[a22_0x2727('0x38')](_0x54b571);console['log'](_0x20b422);const _0x44b555=_0x2141c1['download'](_0x2b2cf5,this[a22_0x2727('0x16')]+_0x54b571);urlExists(_0x2b2cf5,function(_0x4b01e4,_0x261e81){if(_0x261e81){if(this[a22_0x2727('0x1f')][a22_0x2727('0x61')](this[a22_0x2727('0x1d')])){const _0x960aff=this[a22_0x2727('0x1f')][a22_0x2727('0x62')](this[a22_0x2727('0x1d')]);if(_0x960aff>-0x1){this[a22_0x2727('0x1f')][a22_0x2727('0x63')](_0x960aff,0x1);}}console[a22_0x2727('0x38')](a22_0x2727('0x64')+_0x2b2cf5);_0x44b555['start']();}else{if(!this[a22_0x2727('0x1f')]['includes'](this[a22_0x2727('0x1d')])){this[a22_0x2727('0x1f')]['push'](this[a22_0x2727('0x1d')]);}console[a22_0x2727('0x38')](a22_0x2727('0x65')+_0x2b2cf5);this[a22_0x2727('0x1d')]++;this[a22_0x2727('0x47')]();}}[a22_0x2727('0x31')](this));_0x44b555['on']('start',function(_0x44b555){console[a22_0x2727('0x38')](a22_0x2727('0x66')+_0x2b2cf5);});_0x44b555['on'](a22_0x2727('0x67'),function(_0x44b555){console[a22_0x2727('0x38')](a22_0x2727('0x68'));this[a22_0x2727('0x47')]();}[a22_0x2727('0x31')](this));_0x44b555['on'](a22_0x2727('0x69'),function(_0x44b555){console[a22_0x2727('0x38')](a22_0x2727('0x69'));console[a22_0x2727('0x38')](a22_0x2727('0x6a')+_0x54b571);console['log'](a22_0x2727('0x6b')+_0x20b422);this[a22_0x2727('0x56')](this[a22_0x2727('0x16')]+_0x54b571)[a22_0x2727('0x5')](function(_0x383e7c){if(_0x383e7c){this[a22_0x2727('0x1d')]++;}this['download']();}[a22_0x2727('0x31')](this));}['bind'](this));_0x44b555['on'](a22_0x2727('0x6c'),function(_0x44b555){console[a22_0x2727('0x38')](a22_0x2727('0x6c'));});_0x44b555['on'](a22_0x2727('0x6d'),function(_0x44b555){console['log'](a22_0x2727('0x6d'));});_0x44b555['on'](a22_0x2727('0x6e'),function(_0x44b555){console[a22_0x2727('0x38')](a22_0x2727('0x6e'));});}[a22_0x2727('0x6f')](_0x7d38d7,_0x381362,_0x3d4f41,_0x7dd009){console[a22_0x2727('0x38')](a22_0x2727('0x6f'));console[a22_0x2727('0x38')](_0x7d38d7);const _0x1543fe=!![];let _0x13249d=0x0;const _0x18ecc4='';console[a22_0x2727('0x38')]('Attempting\x20to\x20download\x20'+_0x7d38d7+a22_0x2727('0x70')+_0x381362);if(_0x13249d){if(_0x13249d>0x5){_0x7dd009('Max\x20redirects\x20reached',_0x7d38d7,_0x3d4f41,null);return;}}else{_0x13249d=0x0;}const _0x32c09f=this[a22_0x2727('0x16')]+_0x381362;let _0x4e15ab;if(_0x7dd009===undefined){console[a22_0x2727('0x38')](a22_0x2727('0x71')+_0x7d38d7+a22_0x2727('0x70')+_0x32c09f);_0x7dd009=function(_0x3a52d2,_0x3af153){console[a22_0x2727('0x38')](a22_0x2727('0x72'),_0x3a52d2,_0x3af153);};}http[a22_0x2727('0x73')][a22_0x2727('0x74')]=0x64;const _0x50ebce={'host':url['parse'](_0x7d38d7)[a22_0x2727('0x75')],'port':0x50,'path':url['parse'](_0x7d38d7)['pathname'],'agent':![]};const _0x42803f=http[a22_0x2727('0x76')](_0x50ebce,function(_0xb24e34){let _0xdf44b4=0x0;let _0x3b64ae=0x0;function _0x51910f(){if(_0xdf44b4===undefined){console['log'](_0x381362+a22_0x2727('0x77')+_0x3b64ae+'/'+'?');}const _0xe9ccfc=_0x3b64ae/_0xdf44b4*0x64;console[a22_0x2727('0x38')](_0x381362+a22_0x2727('0x78')+_0xe9ccfc+'%\x09'+_0x3b64ae+'/'+_0xdf44b4);}console[a22_0x2727('0x38')](_0x381362+'\x20'+_0xb24e34[a22_0x2727('0x79')]);switch(_0xb24e34[a22_0x2727('0x79')]){case 0xc8:_0xdf44b4=_0xb24e34['headers'][a22_0x2727('0x7a')]||_0x18ecc4;fs[a22_0x2727('0x7b')](_0x32c09f,function(_0x25e683,_0x34107b){if(!_0x25e683){console['log'](a22_0x2727('0x7c')+_0x32c09f);if(_0x34107b['size']==_0xdf44b4){console[a22_0x2727('0x38')](a22_0x2727('0x7d')+_0xdf44b4+')');console[a22_0x2727('0x38')](a22_0x2727('0x7e'));}else{console[a22_0x2727('0x38')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x34107b[a22_0x2727('0x7f')]+a22_0x2727('0x80')+_0xdf44b4+')');}}_0x4e15ab=fs[a22_0x2727('0x81')](_0x32c09f);_0xb24e34[a22_0x2727('0x82')](_0x4e15ab);_0xb24e34['on'](a22_0x2727('0x83'),function(_0x141104){_0x3b64ae+=_0x141104['length'];_0x51910f();});_0x42803f['on'](a22_0x2727('0x67'),function(_0x25e683){console[a22_0x2727('0x38')](a22_0x2727('0x84'));console[a22_0x2727('0x38')](_0x25e683);});_0x4e15ab['on'](a22_0x2727('0x85'),function(){console[a22_0x2727('0x38')](a22_0x2727('0x86')+_0x7d38d7+a22_0x2727('0x70')+_0x381362);_0x7dd009(null,_0x381362,_0x3d4f41,_0x381362);}[a22_0x2727('0x31')](this));});break;case 0x12e:const _0x4b31f6=_0xb24e34[a22_0x2727('0x87')]['location'];console[a22_0x2727('0x38')](a22_0x2727('0x88')+_0x7d38d7+a22_0x2727('0x70')+_0x4b31f6);if(_0x13249d<0x5){this[a22_0x2727('0x6f')](_0x4b31f6,_0x381362,_0x7dd009,_0x13249d++);}else{console[a22_0x2727('0x67')](a22_0x2727('0x89')+_0x7d38d7+'.');_0x7dd009(a22_0x2727('0x8a'),null,null,null);}return;case 0x194:console[a22_0x2727('0x38')](a22_0x2727('0x8b')+_0x7d38d7);default:console['log'](a22_0x2727('0x8c')+_0x7d38d7+a22_0x2727('0x8d')+_0xb24e34[a22_0x2727('0x79')]);_0x42803f[a22_0x2727('0x8e')]();_0x7dd009(_0xb24e34[a22_0x2727('0x79')],null,null,null);return;}})['on']('error',function(_0xf82c08){console[a22_0x2727('0x38')]('Error\x20Downloading:\x20'+_0x7d38d7+'\x20'+_0xf82c08[a22_0x2727('0x8f')]);_0x7dd009(_0xf82c08,null,null,null);});}[a22_0x2727('0x90')](_0x37b6c9,_0xd5d115,_0x288b3d,_0x23b5ca){console[a22_0x2727('0x38')](a22_0x2727('0x90'));console[a22_0x2727('0x38')](_0x37b6c9);console[a22_0x2727('0x38')](_0xd5d115);console[a22_0x2727('0x38')](_0x288b3d);console[a22_0x2727('0x38')](_0x23b5ca);if(_0x288b3d=='image'){const _0xd0c69e=this[a22_0x2727('0x43')][this[a22_0x2727('0x1d')]][a22_0x2727('0x91')]!=null?this[a22_0x2727('0x43')][this[a22_0x2727('0x1d')]][a22_0x2727('0x91')]:0x1e;this[a22_0x2727('0x92')](_0x23b5ca,_0xd0c69e);}else if(_0x288b3d==a22_0x2727('0x93')){if(_0x37b6c9==null&&_0xd5d115!=''){this[a22_0x2727('0x1d')]++;}this['download']();}console[a22_0x2727('0x38')](this['currentFile']);}[a22_0x2727('0x94')](_0x233bde,_0x2341fc,_0x3cfa46){progress(request(_0x233bde),{})['on'](a22_0x2727('0x95'),function(_0x128373){console[a22_0x2727('0x38')](_0x128373);})['on'](a22_0x2727('0x67'),function(_0x24ab98){console['log']('Error\x20downloading\x20file');this[a22_0x2727('0x47')]();})['on'](a22_0x2727('0x69'),function(){console[a22_0x2727('0x38')](a22_0x2727('0x6a')+_0x2341fc);console[a22_0x2727('0x38')](a22_0x2727('0x6b')+_0x3cfa46);if(_0x3cfa46=='image'){const _0x24192c=this[a22_0x2727('0x43')][this['currentFile']][a22_0x2727('0x91')]!=null?this[a22_0x2727('0x43')][this[a22_0x2727('0x1d')]]['duration']:0x1e;this[a22_0x2727('0x92')](_0x2341fc,_0x24192c);}else if(_0x3cfa46==a22_0x2727('0x93')){this[a22_0x2727('0x1d')]++;this[a22_0x2727('0x47')]();}}[a22_0x2727('0x31')](this))[a22_0x2727('0x82')](fs[a22_0x2727('0x81')](this[a22_0x2727('0x16')]+_0x2341fc));}[a22_0x2727('0x92')](_0x398005,_0x535fd5=0x1e){const _0x48d11f=this[a22_0x2727('0x16')]+_0x398005;console[a22_0x2727('0x38')](_0x48d11f);console[a22_0x2727('0x38')](_0x398005);const _0x8771ca=_0x398005[a22_0x2727('0x4f')]('.')[a22_0x2727('0x51')](0x0,-0x1)[a22_0x2727('0x50')]('.');const _0xe221eb=a22_0x2727('0x96');const _0x3732e1=['-y','-r','1/2',a22_0x2727('0x97'),'1',a22_0x2727('0x98'),'glob','-i',_0x48d11f,'-t',String(_0x535fd5),a22_0x2727('0x99'),a22_0x2727('0x9a'),a22_0x2727('0x9b'),a22_0x2727('0x9c'),'-r','25',a22_0x2727('0x9d'),a22_0x2727('0x9e'),this[a22_0x2727('0x16')]+_0x8771ca+a22_0x2727('0x53')];const _0x202861=spawn(_0xe221eb,_0x3732e1);_0x202861['stdout']['on'](a22_0x2727('0x83'),function(_0x1c1e9e){console[a22_0x2727('0x38')]('Converting\x20'+_0x48d11f);});_0x202861[a22_0x2727('0x9f')]['on'](a22_0x2727('0x83'),function(_0x1dfc48){console['log'](a22_0x2727('0xa0')+_0x1dfc48);}['bind'](this));_0x202861['on'](a22_0x2727('0xa1'),function(){console[a22_0x2727('0x38')](a22_0x2727('0xa2'));this[a22_0x2727('0x1d')]++;this['download']();}[a22_0x2727('0x31')](this));}[a22_0x2727('0x59')](_0x3f1eb9){const _0x5e20f8=this[a22_0x2727('0x16')]+'/'+_0x3f1eb9+a22_0x2727('0x53');const _0x36d807=youtubedl(a22_0x2727('0xa3')+_0x3f1eb9,[a22_0x2727('0xa4')],{'cwd':__dirname});_0x36d807['on'](a22_0x2727('0xa5'),function(_0x32e26d){console[a22_0x2727('0x38')](a22_0x2727('0xa6'));console[a22_0x2727('0x38')](a22_0x2727('0xa7')+_0x32e26d[a22_0x2727('0xa8')]);console[a22_0x2727('0x38')](a22_0x2727('0xa9')+_0x32e26d[a22_0x2727('0x7f')]);});_0x36d807['on']('complete',function complete(_0x136c30){'use strict';console[a22_0x2727('0x38')](a22_0x2727('0xa7')+_0x136c30['_filename']+a22_0x2727('0xaa'));});_0x36d807['on'](a22_0x2727('0x69'),function(){console[a22_0x2727('0x38')](a22_0x2727('0xab'));this[a22_0x2727('0x56')](_0x5e20f8)[a22_0x2727('0x5')](function(_0x3394b8){if(_0x3394b8){this['currentFile']++;}this[a22_0x2727('0x47')]();}['bind'](this));}[a22_0x2727('0x31')](this));_0x36d807['pipe'](fs[a22_0x2727('0x81')](_0x5e20f8));}[a22_0x2727('0x4a')](){console[a22_0x2727('0x38')](a22_0x2727('0xac'));if(this[a22_0x2727('0x1e')]){if(this[a22_0x2727('0x1f')][a22_0x2727('0x46')]==0x0){fs['writeFileSync'](this[a22_0x2727('0x1a')],JSON[a22_0x2727('0x34')](this['newPlayList']));let _0x5c17c7='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x2727('0xad')+'\x0d\x0a';for(const _0x3c90ad in this[a22_0x2727('0x43')]){const _0x1dfb79=this[a22_0x2727('0x43')][_0x3c90ad][a22_0x2727('0x4b')];const _0xd19275=this[a22_0x2727('0x43')][_0x3c90ad]['media_type'];const _0x1ba0c2=_0x1dfb79[a22_0x2727('0x4d')](_0x1dfb79[a22_0x2727('0x4e')]('/')+0x1);let _0x4db730=_0x1ba0c2[a22_0x2727('0x4f')]('.')['slice'](0x0,-0x1)[a22_0x2727('0x50')]('.');if(_0xd19275==a22_0x2727('0x52')){_0x4db730=_0x1dfb79;}_0x5c17c7+=a22_0x2727('0xae')+_0x4db730+a22_0x2727('0x53')+'\x0d\x0a';}fsExtra[a22_0x2727('0x42')](this['filesFolder']);fsExtra[a22_0x2727('0x57')](this['tempFolder'],this[a22_0x2727('0x18')]);fsExtra[a22_0x2727('0xaf')](this[a22_0x2727('0xb0')],_0x5c17c7);fsExtra[a22_0x2727('0x42')](this[a22_0x2727('0x16')]);console[a22_0x2727('0x38')](a22_0x2727('0xb1'));const _0x3a015a=spawn(a22_0x2727('0xb2'),['-r',a22_0x2727('0xb3')]);}else{console['log'](a22_0x2727('0xb4'));this[a22_0x2727('0x1d')]=0x0;setTimeout(function(){this[a22_0x2727('0x47')]();}[a22_0x2727('0x31')](this),0x1388);}}else{console['log'](a22_0x2727('0xb5'));}}}exports[a22_0x2727('0xb6')]=SyncPlaylistsService;