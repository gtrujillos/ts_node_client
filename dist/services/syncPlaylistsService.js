var a22_0x34ed=['\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','video','downloadRequestFile','Error\x20downloading\x20file','createImageVideo','ffmpeg','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','-vf','scale=1920:1080','stdout','Converting\x20','stderr:\x20','close','info','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','finishProcess','Finishing','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','__awaiter','next','throw','done','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','child_process','spawn','is-image','uuid/v4','config.json','context.json','node-kodi','tempFolder','mediaFolder','temp/','filesFolder','files/','playListFile','lulo_playlist.m3u','downloadFiles','newPlayList','httpClientService','HttpClientService','init','config','parse','context','readFileSync','playerId','deploy/','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','kodi','http://localhost','.lulo123.','registerClient','loadMediaList','getStatus','bind','deviceUuid','stringify','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','catch','log','writeFileSync','player','item','label','reportStatus','playingItem:\x20','checkFolders','ensureDir','loadMediaList:\x20','playlistChanged','hasPlayListChanged','failDownloadFiles','currentFile','push','Total:\x20','length','download','existsSync','emptyDirSync','m3uFile','removeSync','System','Shutdown','toString','path','media_type','substring','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','Video','includes','indexOf','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','createWriteStream','pipe','data','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20'];(function(_0x1d8f0c,_0x5647f5){var _0x532007=function(_0x51a8a2){while(--_0x51a8a2){_0x1d8f0c['push'](_0x1d8f0c['shift']());}};_0x532007(++_0x5647f5);}(a22_0x34ed,0x187));var a22_0x54fa=function(_0x422c03,_0x2d0da0){_0x422c03=_0x422c03-0x0;var _0x238911=a22_0x34ed[_0x422c03];return _0x238911;};'use strict';var __awaiter=this&&this[a22_0x54fa('0x0')]||function(_0x5da093,_0x813899,_0x1ffb38,_0xf7453e){function _0x1a8347(_0x5469d1){return _0x5469d1 instanceof _0x1ffb38?_0x5469d1:new _0x1ffb38(function(_0x1e69e2){_0x1e69e2(_0x5469d1);});}return new(_0x1ffb38||(_0x1ffb38=Promise))(function(_0x31eddd,_0x480639){function _0x4999ba(_0x23548d){try{_0x5a7884(_0xf7453e[a22_0x54fa('0x1')](_0x23548d));}catch(_0xa61f54){_0x480639(_0xa61f54);}}function _0x42d367(_0x461411){try{_0x5a7884(_0xf7453e[a22_0x54fa('0x2')](_0x461411));}catch(_0x2218ec){_0x480639(_0x2218ec);}}function _0x5a7884(_0x239110){_0x239110[a22_0x54fa('0x3')]?_0x31eddd(_0x239110[a22_0x54fa('0x4')]):_0x1a8347(_0x239110['value'])[a22_0x54fa('0x5')](_0x4999ba,_0x42d367);}_0x5a7884((_0xf7453e=_0xf7453e[a22_0x54fa('0x6')](_0x5da093,_0x813899||[]))[a22_0x54fa('0x1')]());});};Object[a22_0x54fa('0x7')](exports,a22_0x54fa('0x8'),{'value':!![]});const HttpClientService_1=require(a22_0x54fa('0x9'));const mediainfo=require(a22_0x54fa('0xa'));const fs=require('fs');const url=require(a22_0x54fa('0xb'));const http=require(a22_0x54fa('0xc'));const fsExtra=require(a22_0x54fa('0xd'));const request=require('request');const progress=require('request-progress');const spawn=require(a22_0x54fa('0xe'))[a22_0x54fa('0xf')];const isImage=require(a22_0x54fa('0x10'));const format=require('string-template');const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x54fa('0x11'));const configFile=a22_0x54fa('0x12');const contextFile=a22_0x54fa('0x13');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x54fa('0x14'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']='media/';this[a22_0x54fa('0x15')]=this[a22_0x54fa('0x16')]+a22_0x54fa('0x17');this[a22_0x54fa('0x18')]=this[a22_0x54fa('0x16')]+a22_0x54fa('0x19');this[a22_0x54fa('0x1a')]=this['mediaFolder']+'playlist.txt';this['m3uFile']=this[a22_0x54fa('0x18')]+a22_0x54fa('0x1b');this['currentFile']=0x0;this['playlistChanged']=![];this[a22_0x54fa('0x1c')]=[];this['failDownloadFiles']=[];this[a22_0x54fa('0x1d')]={};this[a22_0x54fa('0x1e')]=new HttpClientService_1[(a22_0x54fa('0x1f'))]();}[a22_0x54fa('0x20')](){this[a22_0x54fa('0x21')]=JSON[a22_0x54fa('0x22')](fs['readFileSync'](configFile));this[a22_0x54fa('0x23')]=JSON[a22_0x54fa('0x22')](fs[a22_0x54fa('0x24')](contextFile));this[a22_0x54fa('0x25')]=this['config'][a22_0x54fa('0x25')];this['baseURL']=process['env']['WEB_SERVICE_URL']+a22_0x54fa('0x26');this[a22_0x54fa('0x27')]=this[a22_0x54fa('0x28')]+a22_0x54fa('0x29');this[a22_0x54fa('0x2a')]=new kodi_rpc({'url':a22_0x54fa('0x2b'),'user':'lulo','password':a22_0x54fa('0x2c')});this['checkDependencies']();this[a22_0x54fa('0x2d')]();this['checkFolders']();this[a22_0x54fa('0x2e')]();setInterval(function(){this[a22_0x54fa('0x2f')]();}[a22_0x54fa('0x30')](this),0x2710);setInterval(function(){this['registerClient']();}[a22_0x54fa('0x30')](this),0x493e0);}['checkDependencies'](){}[a22_0x54fa('0x2d')](){this[a22_0x54fa('0x2a')]['playlist']['getItems'](0x1)[a22_0x54fa('0x5')](function(_0xd27865){const _0x2fb5e8=JSON['stringify'](_0xd27865);const _0x3755d2={'player_id':this['playerId'],'device_uuid':this[a22_0x54fa('0x21')][a22_0x54fa('0x31')],'network_info':JSON[a22_0x54fa('0x32')](os[a22_0x54fa('0x33')]()),'firmware_info':JSON[a22_0x54fa('0x32')](this[a22_0x54fa('0x23')]),'playlist':_0x2fb5e8,'playing_item':'','status':0x0};this[a22_0x54fa('0x1e')][a22_0x54fa('0x34')](a22_0x54fa('0x35'),_0x3755d2,![])['then'](function(_0x5d3ff1){console['log'](a22_0x54fa('0x36')+Date());})[a22_0x54fa('0x37')](function(_0x47690f){});console[a22_0x54fa('0x38')](_0x3755d2);}['bind'](this));const _0x4e3189=this[a22_0x54fa('0x21')][a22_0x54fa('0x31')];if(!_0x4e3189||_0x4e3189==''){this['config'][a22_0x54fa('0x31')]=uuidv4();this['config']={'deviceUuid':this['config'][a22_0x54fa('0x31')],'playerId':this[a22_0x54fa('0x21')][a22_0x54fa('0x25')]};fs[a22_0x54fa('0x39')](configFile,JSON[a22_0x54fa('0x32')](this[a22_0x54fa('0x21')]));}}[a22_0x54fa('0x2f')](){console[a22_0x54fa('0x38')]('getStatus');this[a22_0x54fa('0x2a')][a22_0x54fa('0x3a')]['getCurrentlyPlayingVideo']()[a22_0x54fa('0x5')](function(_0x29dbb7){const _0x2e837a=_0x29dbb7[a22_0x54fa('0x3b')][a22_0x54fa('0x3c')];this[a22_0x54fa('0x3d')](_0x2e837a);}[a22_0x54fa('0x30')](this))[a22_0x54fa('0x37')](function(_0x19908d){console['log'](_0x19908d);this[a22_0x54fa('0x3d')](_0x19908d);}['bind'](this));}[a22_0x54fa('0x3d')](_0x1d3027){console[a22_0x54fa('0x38')](a22_0x54fa('0x3e')+_0x1d3027);const _0x29de8d={'player_id':this[a22_0x54fa('0x25')],'device_uuid':this['config']['deviceUuid'],'status':_0x1d3027!=''&&_0x1d3027!=null?0x1:0x0,'playing_item':_0x1d3027};this[a22_0x54fa('0x1e')][a22_0x54fa('0x34')]('http://restapi.lulo.run/player_devices/report_status',_0x29de8d,![])[a22_0x54fa('0x5')](function(_0x1054d8){console['log']('reportStatusResponse:\x20'+Date());})[a22_0x54fa('0x37')](function(_0x1fb282){});}[a22_0x54fa('0x3f')](){fsExtra['ensureDir'](this[a22_0x54fa('0x16')],_0x4663fc=>{});fsExtra[a22_0x54fa('0x40')](this[a22_0x54fa('0x15')],_0x2f1cd4=>{});fsExtra[a22_0x54fa('0x40')](this[a22_0x54fa('0x18')],_0x48135b=>{});}['loadMediaList'](){const _0x26e774=format(this[a22_0x54fa('0x27')],this[a22_0x54fa('0x25')]);console['log'](_0x26e774);request({'url':_0x26e774,'json':!![]},function(_0x1b7bf1,_0x671d56,_0x25de71){console[a22_0x54fa('0x38')](a22_0x54fa('0x41'));console['log'](_0x25de71);this[a22_0x54fa('0x1d')]=_0x25de71;this[a22_0x54fa('0x42')]=this[a22_0x54fa('0x43')]();fsExtra['emptyDirSync'](this[a22_0x54fa('0x15')]);this['downloadFiles']=[];this[a22_0x54fa('0x44')]=[];this[a22_0x54fa('0x45')]=0x0;for(const _0x815f5a in _0x25de71){this[a22_0x54fa('0x1c')][a22_0x54fa('0x46')](_0x25de71[_0x815f5a]);}console[a22_0x54fa('0x38')](a22_0x54fa('0x47')+this[a22_0x54fa('0x1c')][a22_0x54fa('0x48')]);if(this[a22_0x54fa('0x1c')]['length']>0x0){this[a22_0x54fa('0x49')]();}}['bind'](this));}['reloadMediaList'](){if(fsExtra[a22_0x54fa('0x4a')](this[a22_0x54fa('0x15')])){fsExtra['emptyDirSync'](this['tempFolder']);}if(fsExtra[a22_0x54fa('0x4a')](this[a22_0x54fa('0x1a')])){fsExtra[a22_0x54fa('0x4b')](this[a22_0x54fa('0x1a')]);}if(!fsExtra['existsSync'](this[a22_0x54fa('0x1a')])){fsExtra['removeSync'](this[a22_0x54fa('0x1a')]);}if(!fsExtra[a22_0x54fa('0x4a')](this[a22_0x54fa('0x4c')])){fsExtra[a22_0x54fa('0x4d')](this['m3uFile']);}this[a22_0x54fa('0x2e')]();}['reboot'](){this['kodi'][a22_0x54fa('0x4e')][a22_0x54fa('0x4f')]();}[a22_0x54fa('0x43')](){const _0x2a1f00=JSON['stringify'](this[a22_0x54fa('0x1d')]);try{if(!fsExtra[a22_0x54fa('0x4a')](this['playListFile'])){return!![];}else{const _0x329a0c=fsExtra[a22_0x54fa('0x24')](this[a22_0x54fa('0x1a')])[a22_0x54fa('0x50')]();if(_0x329a0c!=_0x2a1f00){return!![];}}}catch(_0x5bccb0){console['log'](_0x5bccb0);}return![];}[a22_0x54fa('0x49')](){console[a22_0x54fa('0x38')]('this.currentFile:\x20'+this[a22_0x54fa('0x45')]+'\x20of\x20'+this['downloadFiles']['length']);if(this[a22_0x54fa('0x45')]>=this[a22_0x54fa('0x1c')][a22_0x54fa('0x48')]){this['finishProcess']();return;}const _0x2f6257=String(this[a22_0x54fa('0x1c')][this[a22_0x54fa('0x45')]][a22_0x54fa('0x51')]);const _0x4f5128=this[a22_0x54fa('0x1c')][this['currentFile']][a22_0x54fa('0x52')];let _0x15a63e=_0x2f6257[a22_0x54fa('0x53')](_0x2f6257['lastIndexOf']('/')+0x1);const _0x2720ad=_0x15a63e[a22_0x54fa('0x54')]('.')[a22_0x54fa('0x55')](0x0,-0x1)[a22_0x54fa('0x56')]('.');let _0x909e0d=this['baseURL']+_0x2f6257;const _0x344663=_0x909e0d[a22_0x54fa('0x54')]('.')[a22_0x54fa('0x55')](0x0,-0x1)['join']('.');if(_0x4f5128==a22_0x54fa('0x57')){_0x15a63e=_0x15a63e+a22_0x54fa('0x58');}else if(_0x4f5128==a22_0x54fa('0x59')){_0x15a63e=_0x2720ad+a22_0x54fa('0x58');_0x909e0d=_0x344663+a22_0x54fa('0x58');}console[a22_0x54fa('0x38')](a22_0x54fa('0x5a'));console[a22_0x54fa('0x38')](_0x2f6257);console[a22_0x54fa('0x38')](_0x4f5128);console[a22_0x54fa('0x38')](_0x15a63e);console['log'](_0x909e0d);console['log'](_0x2720ad);console[a22_0x54fa('0x38')](_0x344663);console[a22_0x54fa('0x38')](a22_0x54fa('0x5a'));if(fsExtra[a22_0x54fa('0x4a')](this[a22_0x54fa('0x15')]+_0x15a63e)){this[a22_0x54fa('0x5b')](this[a22_0x54fa('0x15')]+_0x15a63e)[a22_0x54fa('0x5')](function(_0x29b45f){if(_0x29b45f){this[a22_0x54fa('0x45')]++;}else{this['playlistChanged']=!![];}this[a22_0x54fa('0x49')]();}[a22_0x54fa('0x30')](this));}else if(fsExtra[a22_0x54fa('0x4a')](this[a22_0x54fa('0x18')]+_0x15a63e)){this[a22_0x54fa('0x5b')](this[a22_0x54fa('0x18')]+_0x15a63e)[a22_0x54fa('0x5')](function(_0x351771){if(_0x351771){fsExtra[a22_0x54fa('0x5c')](this[a22_0x54fa('0x18')]+_0x15a63e,this[a22_0x54fa('0x15')]+_0x15a63e);this[a22_0x54fa('0x45')]++;}else{this[a22_0x54fa('0x42')]=!![];}this[a22_0x54fa('0x49')]();}[a22_0x54fa('0x30')](this));}else{console['log'](a22_0x54fa('0x5d')+_0x909e0d);this[a22_0x54fa('0x42')]=!![];if(_0x4f5128==a22_0x54fa('0x57')){this[a22_0x54fa('0x5e')](_0x2f6257);}else{this[a22_0x54fa('0x5f')](_0x909e0d,_0x15a63e,_0x4f5128);}}}['checkVideo'](_0x173d51){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x54fa('0x38')](a22_0x54fa('0x60')+_0x173d51);const _0x2a27e=yield mediainfo(_0x173d51)[a22_0x54fa('0x37')](_0x45fc34=>{console[a22_0x54fa('0x38')](_0x45fc34);fsExtra[a22_0x54fa('0x4d')](_0x173d51);return![];});const _0x3ba457=_0x2a27e[a22_0x54fa('0x61')][a22_0x54fa('0x62')][a22_0x54fa('0x48')]>0x1&&_0x2a27e[a22_0x54fa('0x61')]['track'][0x1]['@type']==a22_0x54fa('0x63');if(!_0x3ba457){fsExtra[a22_0x54fa('0x4d')](_0x173d51);}console[a22_0x54fa('0x38')]('mediainfo\x20check:'+_0x3ba457);return _0x3ba457;});}[a22_0x54fa('0x5f')](_0x43a258,_0x5ab307,_0x287b3c){const _0x35387b=new Downloader();console['log'](_0x43a258);console[a22_0x54fa('0x38')](_0x5ab307);console[a22_0x54fa('0x38')](_0x287b3c);const _0x19d532=_0x35387b[a22_0x54fa('0x49')](_0x43a258,this[a22_0x54fa('0x15')]+_0x5ab307);urlExists(_0x43a258,function(_0x34d69c,_0x201133){if(_0x201133){if(this[a22_0x54fa('0x44')][a22_0x54fa('0x64')](this['currentFile'])){const _0x15b837=this[a22_0x54fa('0x44')][a22_0x54fa('0x65')](this[a22_0x54fa('0x45')]);if(_0x15b837>-0x1){this[a22_0x54fa('0x44')]['splice'](_0x15b837,0x1);}}console[a22_0x54fa('0x38')](a22_0x54fa('0x66')+_0x43a258);_0x19d532[a22_0x54fa('0x67')]();}else{if(!this['failDownloadFiles']['includes'](this[a22_0x54fa('0x45')])){this[a22_0x54fa('0x44')][a22_0x54fa('0x46')](this['currentFile']);}console[a22_0x54fa('0x38')](a22_0x54fa('0x68')+_0x43a258);this[a22_0x54fa('0x45')]++;this[a22_0x54fa('0x49')]();}}[a22_0x54fa('0x30')](this));_0x19d532['on'](a22_0x54fa('0x67'),function(_0x19d532){console[a22_0x54fa('0x38')](a22_0x54fa('0x69')+_0x43a258);});_0x19d532['on'](a22_0x54fa('0x6a'),function(_0x19d532){console['log'](a22_0x54fa('0x6b'));this['download']();}['bind'](this));_0x19d532['on']('end',function(_0x19d532){console[a22_0x54fa('0x38')](a22_0x54fa('0x6c'));console['log'](a22_0x54fa('0x6d')+_0x5ab307);console[a22_0x54fa('0x38')](a22_0x54fa('0x6e')+_0x287b3c);this[a22_0x54fa('0x5b')](this[a22_0x54fa('0x15')]+_0x5ab307)[a22_0x54fa('0x5')](function(_0x5053cd){if(_0x5053cd){this[a22_0x54fa('0x45')]++;}this['download']();}[a22_0x54fa('0x30')](this));}[a22_0x54fa('0x30')](this));_0x19d532['on'](a22_0x54fa('0x6f'),function(_0x19d532){console[a22_0x54fa('0x38')](a22_0x54fa('0x6f'));});_0x19d532['on'](a22_0x54fa('0x70'),function(_0x19d532){console[a22_0x54fa('0x38')](a22_0x54fa('0x70'));});_0x19d532['on'](a22_0x54fa('0x71'),function(_0x19d532){console[a22_0x54fa('0x38')](a22_0x54fa('0x71'));});}[a22_0x54fa('0x72')](_0x538434,_0x3c8fca,_0x1c5cba,_0x55e468){console[a22_0x54fa('0x38')](a22_0x54fa('0x72'));console[a22_0x54fa('0x38')](_0x538434);const _0x590879=!![];let _0x2fe573=0x0;const _0xe7bc8d='';console[a22_0x54fa('0x38')](a22_0x54fa('0x73')+_0x538434+a22_0x54fa('0x74')+_0x3c8fca);if(_0x2fe573){if(_0x2fe573>0x5){_0x55e468(a22_0x54fa('0x75'),_0x538434,_0x1c5cba,null);return;}}else{_0x2fe573=0x0;}const _0x164d11=this[a22_0x54fa('0x15')]+_0x3c8fca;let _0x336bc5;if(_0x55e468===undefined){console[a22_0x54fa('0x38')](a22_0x54fa('0x76')+_0x538434+a22_0x54fa('0x74')+_0x164d11);_0x55e468=function(_0x41d1a0,_0x2f70fc){console['log']('downloadFile\x20callback\x20result\x20undefined:\x20',_0x41d1a0,_0x2f70fc);};}http['globalAgent'][a22_0x54fa('0x77')]=0x64;const _0xa121d3={'host':url[a22_0x54fa('0x22')](_0x538434)[a22_0x54fa('0x78')],'port':0x50,'path':url['parse'](_0x538434)[a22_0x54fa('0x79')],'agent':![]};const _0x59b0a8=http[a22_0x54fa('0x7a')](_0xa121d3,function(_0x4ae17f){let _0x591c6a=0x0;let _0x12c412=0x0;function _0x41316a(){if(_0x591c6a===undefined){console[a22_0x54fa('0x38')](_0x3c8fca+a22_0x54fa('0x7b')+_0x12c412+'/'+'?');}const _0x258d4a=_0x12c412/_0x591c6a*0x64;console[a22_0x54fa('0x38')](_0x3c8fca+a22_0x54fa('0x7c')+_0x258d4a+'%\x09'+_0x12c412+'/'+_0x591c6a);}console[a22_0x54fa('0x38')](_0x3c8fca+'\x20'+_0x4ae17f[a22_0x54fa('0x7d')]);switch(_0x4ae17f['statusCode']){case 0xc8:_0x591c6a=_0x4ae17f[a22_0x54fa('0x7e')]['content-length']||_0xe7bc8d;fs['stat'](_0x164d11,function(_0x5c0849,_0x25665d){if(!_0x5c0849){console[a22_0x54fa('0x38')](a22_0x54fa('0x7f')+_0x164d11);if(_0x25665d[a22_0x54fa('0x80')]==_0x591c6a){console[a22_0x54fa('0x38')](a22_0x54fa('0x81')+_0x591c6a+')');console[a22_0x54fa('0x38')](a22_0x54fa('0x82'));}else{console[a22_0x54fa('0x38')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x25665d['size']+a22_0x54fa('0x83')+_0x591c6a+')');}}_0x336bc5=fs[a22_0x54fa('0x84')](_0x164d11);_0x4ae17f[a22_0x54fa('0x85')](_0x336bc5);_0x4ae17f['on'](a22_0x54fa('0x86'),function(_0x2874c9){_0x12c412+=_0x2874c9[a22_0x54fa('0x48')];_0x41316a();});_0x59b0a8['on'](a22_0x54fa('0x6a'),function(_0x5c0849){console['log']('err:\x20');console['log'](_0x5c0849);});_0x336bc5['on']('finish',function(){console['log']('Downloaded\x20'+_0x538434+a22_0x54fa('0x74')+_0x3c8fca);_0x55e468(null,_0x3c8fca,_0x1c5cba,_0x3c8fca);}[a22_0x54fa('0x30')](this));});break;case 0x12e:const _0x3a8e94=_0x4ae17f[a22_0x54fa('0x7e')][a22_0x54fa('0x87')];console[a22_0x54fa('0x38')](a22_0x54fa('0x88')+_0x538434+a22_0x54fa('0x74')+_0x3a8e94);if(_0x2fe573<0x5){this[a22_0x54fa('0x72')](_0x3a8e94,_0x3c8fca,_0x55e468,_0x2fe573++);}else{console[a22_0x54fa('0x6a')](a22_0x54fa('0x89')+_0x538434+'.');_0x55e468('302',null,null,null);}return;case 0x194:console[a22_0x54fa('0x38')](a22_0x54fa('0x8a')+_0x538434);default:console[a22_0x54fa('0x38')](a22_0x54fa('0x8b')+_0x538434+a22_0x54fa('0x8c')+_0x4ae17f[a22_0x54fa('0x7d')]);_0x59b0a8[a22_0x54fa('0x8d')]();_0x55e468(_0x4ae17f[a22_0x54fa('0x7d')],null,null,null);return;}})['on'](a22_0x54fa('0x6a'),function(_0x5d1f53){console[a22_0x54fa('0x38')](a22_0x54fa('0x8e')+_0x538434+'\x20'+_0x5d1f53[a22_0x54fa('0x8f')]);_0x55e468(_0x5d1f53,null,null,null);});}['downloadHTTPFileCallback'](_0x451cea,_0x1dcfb4,_0x1bb816,_0x5b6bef){console[a22_0x54fa('0x38')](a22_0x54fa('0x90'));console['log'](_0x451cea);console[a22_0x54fa('0x38')](_0x1dcfb4);console[a22_0x54fa('0x38')](_0x1bb816);console[a22_0x54fa('0x38')](_0x5b6bef);if(_0x1bb816==a22_0x54fa('0x59')){const _0x5bc480=this['downloadFiles'][this[a22_0x54fa('0x45')]][a22_0x54fa('0x91')]!=null?this['downloadFiles'][this[a22_0x54fa('0x45')]]['duration']:0x1e;this['createImageVideo'](_0x5b6bef,_0x5bc480);}else if(_0x1bb816==a22_0x54fa('0x92')){if(_0x451cea==null&&_0x1dcfb4!=''){this[a22_0x54fa('0x45')]++;}this[a22_0x54fa('0x49')]();}console[a22_0x54fa('0x38')](this[a22_0x54fa('0x45')]);}[a22_0x54fa('0x93')](_0x33d790,_0x209431,_0x274d8e){progress(request(_0x33d790),{})['on']('progress',function(_0x65d859){console[a22_0x54fa('0x38')](_0x65d859);})['on'](a22_0x54fa('0x6a'),function(_0x21b104){console['log'](a22_0x54fa('0x94'));this['download']();})['on'](a22_0x54fa('0x6c'),function(){console[a22_0x54fa('0x38')]('Downloaded:\x20'+_0x209431);console['log'](a22_0x54fa('0x6e')+_0x274d8e);if(_0x274d8e=='image'){const _0x8e3750=this[a22_0x54fa('0x1c')][this[a22_0x54fa('0x45')]]['duration']!=null?this[a22_0x54fa('0x1c')][this['currentFile']][a22_0x54fa('0x91')]:0x1e;this[a22_0x54fa('0x95')](_0x209431,_0x8e3750);}else if(_0x274d8e=='video'){this['currentFile']++;this[a22_0x54fa('0x49')]();}}[a22_0x54fa('0x30')](this))[a22_0x54fa('0x85')](fs[a22_0x54fa('0x84')](this['tempFolder']+_0x209431));}[a22_0x54fa('0x95')](_0x5696ce,_0x5c8fa8=0x1e){const _0x283705=this[a22_0x54fa('0x15')]+_0x5696ce;console[a22_0x54fa('0x38')](_0x283705);console[a22_0x54fa('0x38')](_0x5696ce);const _0x32ee54=_0x5696ce['split']('.')[a22_0x54fa('0x55')](0x0,-0x1)[a22_0x54fa('0x56')]('.');const _0x121921=a22_0x54fa('0x96');const _0x4e2951=['-y','-r','1/2',a22_0x54fa('0x97'),'1',a22_0x54fa('0x98'),a22_0x54fa('0x99'),'-i',_0x283705,'-t',String(_0x5c8fa8),a22_0x54fa('0x9a'),a22_0x54fa('0x9b'),a22_0x54fa('0x9c'),'yuv420p','-r','25',a22_0x54fa('0x9d'),a22_0x54fa('0x9e'),this[a22_0x54fa('0x15')]+_0x32ee54+a22_0x54fa('0x58')];const _0xf9234b=spawn(_0x121921,_0x4e2951);_0xf9234b[a22_0x54fa('0x9f')]['on'](a22_0x54fa('0x86'),function(_0x594d3e){console[a22_0x54fa('0x38')](a22_0x54fa('0xa0')+_0x283705);});_0xf9234b['stderr']['on'](a22_0x54fa('0x86'),function(_0x1ec185){console[a22_0x54fa('0x38')](a22_0x54fa('0xa1')+_0x1ec185);}[a22_0x54fa('0x30')](this));_0xf9234b['on'](a22_0x54fa('0xa2'),function(){console[a22_0x54fa('0x38')]('finished\x20mp4\x20convert');this[a22_0x54fa('0x45')]++;this['download']();}[a22_0x54fa('0x30')](this));}[a22_0x54fa('0x5e')](_0x45b1f8){const _0x56f167=this[a22_0x54fa('0x15')]+'/'+_0x45b1f8+a22_0x54fa('0x58');const _0x242c76=youtubedl('http://www.youtube.com/watch?v='+_0x45b1f8,['--format=18'],{'cwd':__dirname});_0x242c76['on'](a22_0x54fa('0xa3'),function(_0x4271b3){console[a22_0x54fa('0x38')]('Download\x20started');console[a22_0x54fa('0x38')](a22_0x54fa('0xa4')+_0x4271b3[a22_0x54fa('0xa5')]);console[a22_0x54fa('0x38')](a22_0x54fa('0xa6')+_0x4271b3[a22_0x54fa('0x80')]);});_0x242c76['on'](a22_0x54fa('0xa7'),function complete(_0x3bccac){'use strict';console[a22_0x54fa('0x38')](a22_0x54fa('0xa4')+_0x3bccac['_filename']+a22_0x54fa('0xa8'));});_0x242c76['on']('end',function(){console[a22_0x54fa('0x38')](a22_0x54fa('0xa9'));this[a22_0x54fa('0x5b')](_0x56f167)[a22_0x54fa('0x5')](function(_0x5e2416){if(_0x5e2416){this['currentFile']++;}this[a22_0x54fa('0x49')]();}['bind'](this));}[a22_0x54fa('0x30')](this));_0x242c76[a22_0x54fa('0x85')](fs[a22_0x54fa('0x84')](_0x56f167));}[a22_0x54fa('0xaa')](){console[a22_0x54fa('0x38')](a22_0x54fa('0xab'));if(this[a22_0x54fa('0x42')]){if(this[a22_0x54fa('0x44')]['length']==0x0){fs['writeFileSync'](this[a22_0x54fa('0x1a')],JSON[a22_0x54fa('0x32')](this['newPlayList']));let _0x56b331='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x54fa('0xac')+'\x0d\x0a';for(const _0x14bbf3 in this[a22_0x54fa('0x1c')]){const _0x4a4b73=this[a22_0x54fa('0x1c')][_0x14bbf3][a22_0x54fa('0x51')];const _0x53d1d9=this[a22_0x54fa('0x1c')][_0x14bbf3][a22_0x54fa('0x52')];const _0x565266=_0x4a4b73[a22_0x54fa('0x53')](_0x4a4b73['lastIndexOf']('/')+0x1);let _0x57b57c=_0x565266[a22_0x54fa('0x54')]('.')[a22_0x54fa('0x55')](0x0,-0x1)[a22_0x54fa('0x56')]('.');if(_0x53d1d9==a22_0x54fa('0x57')){_0x57b57c=_0x4a4b73;}_0x56b331+=a22_0x54fa('0xad')+_0x57b57c+a22_0x54fa('0x58')+'\x0d\x0a';}fsExtra[a22_0x54fa('0x4b')](this[a22_0x54fa('0x18')]);fsExtra[a22_0x54fa('0x5c')](this[a22_0x54fa('0x15')],this[a22_0x54fa('0x18')]);fsExtra[a22_0x54fa('0x39')](this[a22_0x54fa('0x4c')],_0x56b331);fsExtra[a22_0x54fa('0x4b')](this[a22_0x54fa('0x15')]);console['log']('Rebooting..');const _0x5bdfb1=spawn('shutdown',['-r',a22_0x54fa('0xae')]);}else{console['log'](a22_0x54fa('0xaf'));this[a22_0x54fa('0x45')]=0x0;setTimeout(function(){this[a22_0x54fa('0x49')]();}[a22_0x54fa('0x30')](this),0x1388);}}else{console[a22_0x54fa('0x38')](a22_0x54fa('0xb0'));}}}exports['SyncPlaylistsService']=SyncPlaylistsService;