var a26_0x571d=['And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','end','-loop','-pattern_type','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','Download\x20started','filename:\x20','size:\x20','complete','_filename','\x20already\x20downloaded.','this.playListFile:\x20','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','kodiCommandClient','reboot','sudo\x20/sbin/reboot\x20-f','rss','setRss','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xml2js','parseString','err:\x20%j','result:\x20%j','none','set','feed','xml:\x20%j','Settings.SetSettingValue','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','value','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','is-image','string-template','youtube-dl','uuid/v4','config.json','package.json','url-exists','node-kodi','mediaFolder','media/','tempFolder','filesFolder','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','kodiHost','http://localhost','kodiUser','kodiPassword','.lulo123.','httpClientService','HttpClientService','PlayerService','init','config','parse','readFileSync','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','kodi','checkDependencies','registerClient','checkFolders','updateSettings','getStatus','playlist','getItems','stringify','version','then','log','catch','bind','deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','item','label','reportStatus','reportStatus\x20playingItem:\x20','post','http://restapi.lulo.run/player_devices/report_status','ensureDir','loadMediaList','loadMediaList:\x20','newPlayList','hasPlayListChanged','emptyDirSync','push','length','download','forceReload','existsSync','playListFile','removeSync','toString','this.currentFile:\x20','finishProcess','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','Downloading:\x20','videoFile:\x20','media','track','@type','Video','mediainfo\x20check:','downloader','failDownloadFiles','indexOf','splice','downloading:\x20','includes','Error:\x20','start','start:\x20','error','Downloaded:\x20','mediaType:\x20','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','host','get','\x20Progress:\x20','statusCode','headers','content-length','size'];(function(_0x2cacb2,_0x227386){var _0x56df90=function(_0x1cea4c){while(--_0x1cea4c){_0x2cacb2['push'](_0x2cacb2['shift']());}};_0x56df90(++_0x227386);}(a26_0x571d,0x147));var a26_0x192d=function(_0x452a90,_0x3a0500){_0x452a90=_0x452a90-0x0;var _0x5c320d=a26_0x571d[_0x452a90];return _0x5c320d;};'use strict';var __awaiter=this&&this[a26_0x192d('0x0')]||function(_0x1aa09f,_0xb3d084,_0xaec385,_0x5db8f6){function _0x5cc51a(_0x442746){return _0x442746 instanceof _0xaec385?_0x442746:new _0xaec385(function(_0x192bf6){_0x192bf6(_0x442746);});}return new(_0xaec385||(_0xaec385=Promise))(function(_0x1db42c,_0x192592){function _0xd7c45d(_0x5a9ccc){try{_0x30bdeb(_0x5db8f6[a26_0x192d('0x1')](_0x5a9ccc));}catch(_0x25c1d6){_0x192592(_0x25c1d6);}}function _0x4c5b53(_0x2601d2){try{_0x30bdeb(_0x5db8f6[a26_0x192d('0x2')](_0x2601d2));}catch(_0x5722d2){_0x192592(_0x5722d2);}}function _0x30bdeb(_0x1e0f4b){_0x1e0f4b[a26_0x192d('0x3')]?_0x1db42c(_0x1e0f4b[a26_0x192d('0x4')]):_0x5cc51a(_0x1e0f4b[a26_0x192d('0x4')])['then'](_0xd7c45d,_0x4c5b53);}_0x30bdeb((_0x5db8f6=_0x5db8f6['apply'](_0x1aa09f,_0xb3d084||[]))[a26_0x192d('0x1')]());});};Object['defineProperty'](exports,a26_0x192d('0x5'),{'value':!![]});const HttpClientService_1=require(a26_0x192d('0x6'));const playerService_1=require(a26_0x192d('0x7'));const mediainfo=require(a26_0x192d('0x8'));const fs=require('fs');const url=require(a26_0x192d('0x9'));const http=require(a26_0x192d('0xa'));const fsExtra=require(a26_0x192d('0xb'));const request=require(a26_0x192d('0xc'));const progress=require(a26_0x192d('0xd'));const spawn=require(a26_0x192d('0xe'))['spawn'];const exec=require(a26_0x192d('0xe'))['exec'];const isImage=require(a26_0x192d('0xf'));const format=require(a26_0x192d('0x10'));const os=require('os');const youtubedl=require(a26_0x192d('0x11'));const uuidv4=require(a26_0x192d('0x12'));const configFile=a26_0x192d('0x13');const contextFile=a26_0x192d('0x14');const urlExists=require(a26_0x192d('0x15'));const kodi_rpc=require(a26_0x192d('0x16'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a26_0x192d('0x17')]=a26_0x192d('0x18');this[a26_0x192d('0x19')]=this['mediaFolder']+'temp/';this[a26_0x192d('0x1a')]=this[a26_0x192d('0x17')]+'files/';this['playListFile']=this['mediaFolder']+'playlist.txt';this[a26_0x192d('0x1b')]=this[a26_0x192d('0x1a')]+a26_0x192d('0x1c');this[a26_0x192d('0x1d')]=0x0;this[a26_0x192d('0x1e')]=![];this[a26_0x192d('0x1f')]=[];this['failDownloadFiles']=[];this['newPlayList']={};this[a26_0x192d('0x20')]=a26_0x192d('0x21');this[a26_0x192d('0x22')]='lulo';this[a26_0x192d('0x23')]=a26_0x192d('0x24');this['forceReload']=![];this[a26_0x192d('0x25')]=new HttpClientService_1[(a26_0x192d('0x26'))]();this['playerService']=new playerService_1[(a26_0x192d('0x27'))]();}[a26_0x192d('0x28')](){this[a26_0x192d('0x29')]=JSON[a26_0x192d('0x2a')](fs[a26_0x192d('0x2b')](configFile));this['context']=JSON['parse'](fs['readFileSync'](contextFile));this[a26_0x192d('0x2c')]=this[a26_0x192d('0x29')][a26_0x192d('0x2c')];this[a26_0x192d('0x2d')]=process[a26_0x192d('0x2e')][a26_0x192d('0x2f')]+a26_0x192d('0x30');this[a26_0x192d('0x31')]=this[a26_0x192d('0x2d')]+a26_0x192d('0x32');this[a26_0x192d('0x33')]=this[a26_0x192d('0x2d')]+'api/player.php?player_id={0}';this[a26_0x192d('0x34')]=new kodi_rpc({'url':this[a26_0x192d('0x20')],'user':this[a26_0x192d('0x22')],'password':this[a26_0x192d('0x23')]});this[a26_0x192d('0x35')]();this[a26_0x192d('0x36')]();this[a26_0x192d('0x37')]();this['loadMediaList']();this[a26_0x192d('0x38')]();setInterval(function(){this[a26_0x192d('0x39')]();}['bind'](this),0x2710);setInterval(function(){this[a26_0x192d('0x36')]();}['bind'](this),0x493e0);}[a26_0x192d('0x35')](){}[a26_0x192d('0x36')](){this[a26_0x192d('0x34')][a26_0x192d('0x3a')][a26_0x192d('0x3b')](0x1)['then'](function(_0x1f1092){const _0x2716f1=JSON['stringify'](_0x1f1092);const _0x7651b7={'player_id':this['playerId'],'device_uuid':this[a26_0x192d('0x29')]['deviceUuid'],'network_info':JSON[a26_0x192d('0x3c')](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this['context'][a26_0x192d('0x3d')]),'playlist':_0x2716f1,'playing_item':'','status':0x0};this[a26_0x192d('0x25')]['post']('http://restapi.lulo.run/player_devices/register',_0x7651b7,![])[a26_0x192d('0x3e')](function(_0x31ea1f){console[a26_0x192d('0x3f')]('register\x20response:\x20'+Date());})[a26_0x192d('0x40')](function(_0x32f67b){});console[a26_0x192d('0x3f')](_0x7651b7);}[a26_0x192d('0x41')](this));const _0x4e6a15=this['config']['deviceUuid'];if(!_0x4e6a15||_0x4e6a15==''){this[a26_0x192d('0x29')][a26_0x192d('0x42')]=uuidv4();this[a26_0x192d('0x29')]={'deviceUuid':this[a26_0x192d('0x29')][a26_0x192d('0x42')],'playerId':this[a26_0x192d('0x29')]['playerId']};fs[a26_0x192d('0x43')](configFile,JSON[a26_0x192d('0x3c')](this[a26_0x192d('0x29')]));}}[a26_0x192d('0x39')](){console[a26_0x192d('0x3f')](a26_0x192d('0x39'));this[a26_0x192d('0x34')][a26_0x192d('0x44')][a26_0x192d('0x45')]()[a26_0x192d('0x3e')](function(_0x124af7){const _0x15dc00=_0x124af7[a26_0x192d('0x46')][a26_0x192d('0x47')];this[a26_0x192d('0x48')](_0x15dc00);}[a26_0x192d('0x41')](this))[a26_0x192d('0x40')](function(_0x529a5e){console[a26_0x192d('0x3f')](_0x529a5e);this['reportStatus'](JSON['stringify'](_0x529a5e));}[a26_0x192d('0x41')](this));}['reportStatus'](_0x3cb5bc){console['log'](a26_0x192d('0x49')+_0x3cb5bc);const _0x1df9e3={'player_id':this[a26_0x192d('0x2c')],'device_uuid':this[a26_0x192d('0x29')][a26_0x192d('0x42')],'status':_0x3cb5bc!=''&&_0x3cb5bc!=null?0x1:0x0,'playing_item':_0x3cb5bc};this['httpClientService'][a26_0x192d('0x4a')](a26_0x192d('0x4b'),_0x1df9e3,![])[a26_0x192d('0x3e')](function(_0x293e78){console[a26_0x192d('0x3f')]('reportStatusResponse');})[a26_0x192d('0x40')](function(_0x4cfa10){});}[a26_0x192d('0x37')](){fsExtra[a26_0x192d('0x4c')](this[a26_0x192d('0x17')],_0x3e8910=>{});fsExtra[a26_0x192d('0x4c')](this[a26_0x192d('0x19')],_0x50d58f=>{});fsExtra['ensureDir'](this['filesFolder'],_0x4aa4e3=>{});}[a26_0x192d('0x4d')](){const _0x2889d1=format(this['playListServiceURL'],this[a26_0x192d('0x2c')]);console['log'](_0x2889d1);request({'url':_0x2889d1,'json':!![]},function(_0x3e8f5e,_0xc870ac,_0xbba928){console[a26_0x192d('0x3f')](a26_0x192d('0x4e'));this[a26_0x192d('0x4f')]=_0xbba928;this[a26_0x192d('0x1e')]=this[a26_0x192d('0x50')]();fsExtra[a26_0x192d('0x51')](this[a26_0x192d('0x19')]);this[a26_0x192d('0x1f')]=[];this['failDownloadFiles']=[];this[a26_0x192d('0x1d')]=0x0;for(const _0x89716c in _0xbba928){this['downloadFiles'][a26_0x192d('0x52')](_0xbba928[_0x89716c]);}console[a26_0x192d('0x3f')]('Total:\x20'+this[a26_0x192d('0x1f')][a26_0x192d('0x53')]);if(this[a26_0x192d('0x1f')][a26_0x192d('0x53')]>0x0){this[a26_0x192d('0x54')]();}}[a26_0x192d('0x41')](this));}['reloadMediaList'](){this[a26_0x192d('0x55')]=!![];if(fsExtra['existsSync'](this[a26_0x192d('0x19')])){fsExtra[a26_0x192d('0x51')](this[a26_0x192d('0x19')]);}if(fsExtra[a26_0x192d('0x56')](this['filesFolder'])){fsExtra['emptyDirSync'](this[a26_0x192d('0x1a')]);}if(!fsExtra[a26_0x192d('0x56')](this[a26_0x192d('0x57')])){fsExtra[a26_0x192d('0x58')](this[a26_0x192d('0x57')]);}if(!fsExtra[a26_0x192d('0x56')](this[a26_0x192d('0x1b')])){fsExtra[a26_0x192d('0x58')](this[a26_0x192d('0x1b')]);}this[a26_0x192d('0x4d')]();}[a26_0x192d('0x50')](){const _0x3c147a=JSON[a26_0x192d('0x3c')](this[a26_0x192d('0x4f')]);try{if(!fsExtra[a26_0x192d('0x56')](this[a26_0x192d('0x57')])){return!![];}else{const _0x37fd8d=fsExtra['readFileSync'](this[a26_0x192d('0x57')])[a26_0x192d('0x59')]();if(_0x37fd8d!=_0x3c147a){return!![];}}}catch(_0x2b85fc){console[a26_0x192d('0x3f')](_0x2b85fc);}return![];}[a26_0x192d('0x54')](){console[a26_0x192d('0x3f')](a26_0x192d('0x5a')+this[a26_0x192d('0x1d')]+'\x20of\x20'+this[a26_0x192d('0x1f')]['length']);if(this[a26_0x192d('0x1d')]>=this[a26_0x192d('0x1f')][a26_0x192d('0x53')]){this[a26_0x192d('0x5b')]();return;}const _0x5866d9=String(this[a26_0x192d('0x1f')][this[a26_0x192d('0x1d')]][a26_0x192d('0x5c')]);const _0x3552ca=this['downloadFiles'][this[a26_0x192d('0x1d')]][a26_0x192d('0x5d')];let _0x5e1864=_0x5866d9[a26_0x192d('0x5e')](_0x5866d9[a26_0x192d('0x5f')]('/')+0x1);const _0x4dcdbd=_0x5e1864['split']('.')['slice'](0x0,-0x1)['join']('.');let _0x148688=this[a26_0x192d('0x2d')]+_0x5866d9;const _0x2f52bf=_0x148688[a26_0x192d('0x60')]('.')[a26_0x192d('0x61')](0x0,-0x1)[a26_0x192d('0x62')]('.');if(_0x3552ca==a26_0x192d('0x63')){_0x5e1864=_0x5e1864+a26_0x192d('0x64');}else if(_0x3552ca==a26_0x192d('0x65')){_0x5e1864=_0x4dcdbd+a26_0x192d('0x64');_0x148688=_0x2f52bf+a26_0x192d('0x64');}console[a26_0x192d('0x3f')](a26_0x192d('0x66'));console[a26_0x192d('0x3f')](_0x5866d9);console[a26_0x192d('0x3f')](_0x3552ca);console[a26_0x192d('0x3f')](_0x5e1864);console[a26_0x192d('0x3f')](_0x148688);console[a26_0x192d('0x3f')](_0x4dcdbd);console['log'](_0x2f52bf);console[a26_0x192d('0x3f')](a26_0x192d('0x66'));if(fsExtra['existsSync'](this[a26_0x192d('0x19')]+_0x5e1864)){this[a26_0x192d('0x67')](this[a26_0x192d('0x19')]+_0x5e1864)[a26_0x192d('0x3e')](function(_0x2d44c3){if(_0x2d44c3){this[a26_0x192d('0x1d')]++;}else{this[a26_0x192d('0x1e')]=!![];}this[a26_0x192d('0x54')]();}[a26_0x192d('0x41')](this));}else if(fsExtra[a26_0x192d('0x56')](this['filesFolder']+_0x5e1864)){this['checkVideo'](this[a26_0x192d('0x1a')]+_0x5e1864)['then'](function(_0x363a19){if(_0x363a19){fsExtra['copySync'](this[a26_0x192d('0x1a')]+_0x5e1864,this[a26_0x192d('0x19')]+_0x5e1864);this[a26_0x192d('0x1d')]++;}else{this[a26_0x192d('0x1e')]=!![];}this['download']();}[a26_0x192d('0x41')](this));}else{console[a26_0x192d('0x3f')](a26_0x192d('0x68')+_0x148688);this[a26_0x192d('0x1e')]=!![];if(_0x3552ca==a26_0x192d('0x63')){this['downloadYouTube'](_0x5866d9);}else{this['downloader'](_0x148688,_0x5e1864,_0x3552ca);}}}['checkVideo'](_0xe17a34){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a26_0x192d('0x69')+_0xe17a34);const _0x3ca465=yield mediainfo(_0xe17a34)[a26_0x192d('0x40')](_0x4c536e=>{console[a26_0x192d('0x3f')](_0x4c536e);fsExtra[a26_0x192d('0x58')](_0xe17a34);return![];});const _0x43c003=_0x3ca465[a26_0x192d('0x6a')]['track'][a26_0x192d('0x53')]>0x1&&_0x3ca465[a26_0x192d('0x6a')][a26_0x192d('0x6b')][0x1][a26_0x192d('0x6c')]==a26_0x192d('0x6d');if(!_0x43c003){fsExtra[a26_0x192d('0x58')](_0xe17a34);}console[a26_0x192d('0x3f')](a26_0x192d('0x6e')+_0x43c003);return _0x43c003;});}[a26_0x192d('0x6f')](_0xe0abb8,_0x12e9c2,_0xd7aaf9){const _0x346b36=new Downloader();console[a26_0x192d('0x3f')](_0xe0abb8);console[a26_0x192d('0x3f')](_0x12e9c2);console[a26_0x192d('0x3f')](_0xd7aaf9);const _0x52650c=_0x346b36[a26_0x192d('0x54')](_0xe0abb8,this[a26_0x192d('0x19')]+_0x12e9c2);urlExists(_0xe0abb8,function(_0x23644c,_0x5640d5){if(_0x5640d5){if(this[a26_0x192d('0x70')]['includes'](this[a26_0x192d('0x1d')])){const _0x3ab238=this[a26_0x192d('0x70')][a26_0x192d('0x71')](this[a26_0x192d('0x1d')]);if(_0x3ab238>-0x1){this['failDownloadFiles'][a26_0x192d('0x72')](_0x3ab238,0x1);}}console['log'](a26_0x192d('0x73')+_0xe0abb8);_0x52650c['start']();}else{if(!this['failDownloadFiles'][a26_0x192d('0x74')](this[a26_0x192d('0x1d')])){this[a26_0x192d('0x70')]['push'](this['currentFile']);}console[a26_0x192d('0x3f')](a26_0x192d('0x75')+_0xe0abb8);this['currentFile']++;this[a26_0x192d('0x54')]();}}[a26_0x192d('0x41')](this));_0x52650c['on'](a26_0x192d('0x76'),function(_0x52650c){console[a26_0x192d('0x3f')](a26_0x192d('0x77')+_0xe0abb8);});_0x52650c['on'](a26_0x192d('0x78'),function(_0x52650c){console['log']('error:\x20');this['download']();}[a26_0x192d('0x41')](this));_0x52650c['on']('end',function(_0x52650c){console[a26_0x192d('0x3f')]('end');console[a26_0x192d('0x3f')](a26_0x192d('0x79')+_0x12e9c2);console[a26_0x192d('0x3f')](a26_0x192d('0x7a')+_0xd7aaf9);this[a26_0x192d('0x67')](this[a26_0x192d('0x19')]+_0x12e9c2)[a26_0x192d('0x3e')](function(_0x13f9a3){if(_0x13f9a3){this[a26_0x192d('0x1d')]++;}this['download']();}[a26_0x192d('0x41')](this));}[a26_0x192d('0x41')](this));_0x52650c['on']('stopped',function(_0x52650c){console['log']('stopped');});_0x52650c['on'](a26_0x192d('0x7b'),function(_0x52650c){console[a26_0x192d('0x3f')](a26_0x192d('0x7b'));});_0x52650c['on'](a26_0x192d('0x7c'),function(_0x52650c){console[a26_0x192d('0x3f')](a26_0x192d('0x7c'));});}[a26_0x192d('0x7d')](_0x988560,_0x3e504d,_0x30ad43,_0x817ff9){console[a26_0x192d('0x3f')](a26_0x192d('0x7d'));console['log'](_0x988560);const _0x10fa47=!![];let _0x1d66f9=0x0;const _0x54be04='';console[a26_0x192d('0x3f')](a26_0x192d('0x7e')+_0x988560+a26_0x192d('0x7f')+_0x3e504d);if(_0x1d66f9){if(_0x1d66f9>0x5){_0x817ff9(a26_0x192d('0x80'),_0x988560,_0x30ad43,null);return;}}else{_0x1d66f9=0x0;}const _0x3c5304=this[a26_0x192d('0x19')]+_0x3e504d;let _0x21e840;if(_0x817ff9===undefined){console['log'](a26_0x192d('0x81')+_0x988560+a26_0x192d('0x7f')+_0x3c5304);_0x817ff9=function(_0x52bc73,_0x586a4f){console[a26_0x192d('0x3f')](a26_0x192d('0x82'),_0x52bc73,_0x586a4f);};}http[a26_0x192d('0x83')]['maxSockets']=0x64;const _0x21aa98={'host':url[a26_0x192d('0x2a')](_0x988560)[a26_0x192d('0x84')],'port':0x50,'path':url[a26_0x192d('0x2a')](_0x988560)['pathname'],'agent':![]};const _0x118040=http[a26_0x192d('0x85')](_0x21aa98,function(_0x433369){let _0x1e6113=0x0;let _0x34e2e1=0x0;function _0x4321c5(){if(_0x1e6113===undefined){console[a26_0x192d('0x3f')](_0x3e504d+'\x20Progress:\x20unknown\x09'+_0x34e2e1+'/'+'?');}const _0xb678ac=_0x34e2e1/_0x1e6113*0x64;console[a26_0x192d('0x3f')](_0x3e504d+a26_0x192d('0x86')+_0xb678ac+'%\x09'+_0x34e2e1+'/'+_0x1e6113);}console[a26_0x192d('0x3f')](_0x3e504d+'\x20'+_0x433369[a26_0x192d('0x87')]);switch(_0x433369[a26_0x192d('0x87')]){case 0xc8:_0x1e6113=_0x433369[a26_0x192d('0x88')][a26_0x192d('0x89')]||_0x54be04;fs['stat'](_0x3c5304,function(_0x2566ad,_0x3d49d9){if(!_0x2566ad){console[a26_0x192d('0x3f')]('Have\x20already\x20downloaded\x20'+_0x3c5304);if(_0x3d49d9[a26_0x192d('0x8a')]==_0x1e6113){console[a26_0x192d('0x3f')](a26_0x192d('0x8b')+_0x1e6113+')');console['log'](a26_0x192d('0x8c'));}else{console[a26_0x192d('0x3f')](a26_0x192d('0x8d')+_0x3d49d9[a26_0x192d('0x8a')]+')\x20vs\x20New('+_0x1e6113+')');}}_0x21e840=fs[a26_0x192d('0x8e')](_0x3c5304);_0x433369[a26_0x192d('0x8f')](_0x21e840);_0x433369['on'](a26_0x192d('0x90'),function(_0xd984){_0x34e2e1+=_0xd984[a26_0x192d('0x53')];_0x4321c5();});_0x118040['on'](a26_0x192d('0x78'),function(_0x2566ad){console['log'](a26_0x192d('0x91'));console[a26_0x192d('0x3f')](_0x2566ad);});_0x21e840['on'](a26_0x192d('0x92'),function(){console['log'](a26_0x192d('0x93')+_0x988560+'\x20to\x20'+_0x3e504d);_0x817ff9(null,_0x3e504d,_0x30ad43,_0x3e504d);}[a26_0x192d('0x41')](this));});break;case 0x12e:const _0x585c97=_0x433369[a26_0x192d('0x88')][a26_0x192d('0x94')];console['log'](a26_0x192d('0x95')+_0x988560+'\x20to\x20'+_0x585c97);if(_0x1d66f9<0x5){this[a26_0x192d('0x7d')](_0x585c97,_0x3e504d,_0x817ff9,_0x1d66f9++);}else{console[a26_0x192d('0x78')](a26_0x192d('0x96')+_0x988560+'.');_0x817ff9('302',null,null,null);}return;case 0x194:console['log'](a26_0x192d('0x97')+_0x988560);default:console[a26_0x192d('0x3f')](a26_0x192d('0x98')+_0x988560+a26_0x192d('0x99')+_0x433369['statusCode']);_0x118040['abort']();_0x817ff9(_0x433369['statusCode'],null,null,null);return;}})['on'](a26_0x192d('0x78'),function(_0xa36fda){console[a26_0x192d('0x3f')](a26_0x192d('0x9a')+_0x988560+'\x20'+_0xa36fda['message']);_0x817ff9(_0xa36fda,null,null,null);});}['downloadHTTPFileCallback'](_0x4cb123,_0x3f87ff,_0xc738b5,_0x5eeae1){console[a26_0x192d('0x3f')](a26_0x192d('0x9b'));console['log'](_0x4cb123);console[a26_0x192d('0x3f')](_0x3f87ff);console[a26_0x192d('0x3f')](_0xc738b5);console[a26_0x192d('0x3f')](_0x5eeae1);if(_0xc738b5==a26_0x192d('0x65')){const _0x2979ce=this[a26_0x192d('0x1f')][this[a26_0x192d('0x1d')]][a26_0x192d('0x9c')]!=null?this[a26_0x192d('0x1f')][this[a26_0x192d('0x1d')]][a26_0x192d('0x9c')]:0x1e;this[a26_0x192d('0x9d')](_0x5eeae1,_0x2979ce);}else if(_0xc738b5==a26_0x192d('0x9e')){if(_0x4cb123==null&&_0x3f87ff!=''){this[a26_0x192d('0x1d')]++;}this[a26_0x192d('0x54')]();}console[a26_0x192d('0x3f')](this[a26_0x192d('0x1d')]);}[a26_0x192d('0x9f')](_0x58620d,_0x8b0190,_0x9334d9){progress(request(_0x58620d),{})['on'](a26_0x192d('0xa0'),function(_0x5e9790){console[a26_0x192d('0x3f')](_0x5e9790);})['on'](a26_0x192d('0x78'),function(_0x40898a){console['log']('Error\x20downloading\x20file');this['download']();})['on'](a26_0x192d('0xa1'),function(){console[a26_0x192d('0x3f')](a26_0x192d('0x79')+_0x8b0190);console[a26_0x192d('0x3f')](a26_0x192d('0x7a')+_0x9334d9);if(_0x9334d9=='image'){const _0x576965=this[a26_0x192d('0x1f')][this[a26_0x192d('0x1d')]]['duration']!=null?this[a26_0x192d('0x1f')][this[a26_0x192d('0x1d')]][a26_0x192d('0x9c')]:0x1e;this[a26_0x192d('0x9d')](_0x8b0190,_0x576965);}else if(_0x9334d9=='video'){this[a26_0x192d('0x1d')]++;this[a26_0x192d('0x54')]();}}[a26_0x192d('0x41')](this))[a26_0x192d('0x8f')](fs[a26_0x192d('0x8e')](this[a26_0x192d('0x19')]+_0x8b0190));}[a26_0x192d('0x9d')](_0x276fd9,_0x1e0f99=0x1e){const _0x2614e0=this[a26_0x192d('0x19')]+_0x276fd9;console[a26_0x192d('0x3f')](_0x2614e0);console[a26_0x192d('0x3f')](_0x276fd9);const _0x43f0f0=_0x276fd9[a26_0x192d('0x60')]('.')[a26_0x192d('0x61')](0x0,-0x1)['join']('.');const _0x2afee1='ffmpeg';const _0x4b7de0=['-y','-r','1/2',a26_0x192d('0xa2'),'1',a26_0x192d('0xa3'),'glob','-i',_0x2614e0,'-t',String(_0x1e0f99),a26_0x192d('0xa4'),a26_0x192d('0xa5'),a26_0x192d('0xa6'),a26_0x192d('0xa7'),'-r','25',a26_0x192d('0xa8'),a26_0x192d('0xa9'),this[a26_0x192d('0x19')]+_0x43f0f0+a26_0x192d('0x64')];const _0x1b22c1=spawn(_0x2afee1,_0x4b7de0);_0x1b22c1[a26_0x192d('0xaa')]['on']('data',function(_0x93a958){console[a26_0x192d('0x3f')](a26_0x192d('0xab')+_0x2614e0);});_0x1b22c1['stderr']['on']('data',function(_0x33d79c){console[a26_0x192d('0x3f')](a26_0x192d('0xac')+_0x33d79c);}['bind'](this));_0x1b22c1['on'](a26_0x192d('0xad'),function(){console[a26_0x192d('0x3f')](a26_0x192d('0xae'));this['currentFile']++;this[a26_0x192d('0x54')]();}[a26_0x192d('0x41')](this));}[a26_0x192d('0xaf')](_0x3a1749){const _0x39de25=this['tempFolder']+'/'+_0x3a1749+a26_0x192d('0x64');const _0x466620=a26_0x192d('0xb0')+_0x3a1749;console[a26_0x192d('0x3f')](a26_0x192d('0xb1')+_0x466620);console[a26_0x192d('0x3f')](a26_0x192d('0xb2')+_0x39de25);const _0xa17ec1=youtubedl(_0x466620,[a26_0x192d('0xb3'),a26_0x192d('0xb4')],{'cwd':__dirname});_0xa17ec1['on']('info',function(_0x524451){console[a26_0x192d('0x3f')](a26_0x192d('0xb5'));console['log'](a26_0x192d('0xb6')+_0x524451['_filename']);console[a26_0x192d('0x3f')](a26_0x192d('0xb7')+_0x524451[a26_0x192d('0x8a')]);});_0xa17ec1['on'](a26_0x192d('0xb8'),function complete(_0x50d6d9){'use strict';console['log']('filename:\x20'+_0x50d6d9[a26_0x192d('0xb9')]+a26_0x192d('0xba'));});_0xa17ec1['on'](a26_0x192d('0xa1'),function(){console[a26_0x192d('0x3f')]('finished\x20youtube\x20downloading!');this[a26_0x192d('0x67')](_0x39de25)[a26_0x192d('0x3e')](function(_0x309063){if(_0x309063){this[a26_0x192d('0x1d')]++;}this[a26_0x192d('0x54')]();}[a26_0x192d('0x41')](this));}['bind'](this));_0xa17ec1[a26_0x192d('0x8f')](fs[a26_0x192d('0x8e')](_0x39de25));}[a26_0x192d('0x5b')](){console[a26_0x192d('0x3f')]('Finishing');if(this[a26_0x192d('0x1e')]){if(this[a26_0x192d('0x70')][a26_0x192d('0x53')]==0x0){console[a26_0x192d('0x3f')](a26_0x192d('0xbb')+this['playListFile']);fs[a26_0x192d('0x43')](this[a26_0x192d('0x57')],JSON[a26_0x192d('0x3c')](this['newPlayList']));let _0x35b775=a26_0x192d('0xbc')+'\x0d\x0a'+a26_0x192d('0xbd')+'\x0d\x0a';for(const _0x2c9281 in this[a26_0x192d('0x1f')]){const _0x2dfc2d=this[a26_0x192d('0x1f')][_0x2c9281][a26_0x192d('0x5c')];const _0x5cea46=this[a26_0x192d('0x1f')][_0x2c9281][a26_0x192d('0x5d')];const _0x5d631c=_0x2dfc2d[a26_0x192d('0x5e')](_0x2dfc2d[a26_0x192d('0x5f')]('/')+0x1);let _0x1d044c=_0x5d631c[a26_0x192d('0x60')]('.')[a26_0x192d('0x61')](0x0,-0x1)['join']('.');if(_0x5cea46==a26_0x192d('0x63')){_0x1d044c=_0x2dfc2d;}_0x35b775+=a26_0x192d('0xbe')+_0x1d044c+a26_0x192d('0x64')+'\x0d\x0a';console[a26_0x192d('0x3f')](a26_0x192d('0xbf')+_0x35b775);}console[a26_0x192d('0x3f')](a26_0x192d('0xbf')+_0x35b775);fsExtra[a26_0x192d('0x51')](this[a26_0x192d('0x1a')]);console[a26_0x192d('0x3f')]('copySync:\x20'+this[a26_0x192d('0x19')]);fsExtra[a26_0x192d('0xc0')](this[a26_0x192d('0x19')],this[a26_0x192d('0x1a')]);console[a26_0x192d('0x3f')](a26_0x192d('0xc1')+this[a26_0x192d('0x1b')]);fsExtra[a26_0x192d('0x43')](this['m3uFile'],_0x35b775);console[a26_0x192d('0x3f')](a26_0x192d('0xc2')+this[a26_0x192d('0x19')]);fsExtra[a26_0x192d('0x51')](this[a26_0x192d('0x19')]);console[a26_0x192d('0x3f')](a26_0x192d('0xc3'));this['reboot']();}else{console[a26_0x192d('0x3f')](a26_0x192d('0xc4'));this[a26_0x192d('0x1d')]=0x0;setTimeout(function(){this[a26_0x192d('0x54')]();}[a26_0x192d('0x41')](this),0x1388);}}else{console[a26_0x192d('0x3f')](a26_0x192d('0xc5'));}}[a26_0x192d('0xc6')](){this[a26_0x192d('0xc7')]('Playlist.Clear',{'playlistid':0x1},function(_0x1f02ec){console[a26_0x192d('0x3f')](a26_0x192d('0xc8'));console[a26_0x192d('0x3f')](_0x1f02ec);this[a26_0x192d('0xc7')](a26_0x192d('0xc9'),{'item':{'file':a26_0x192d('0xca')},'playlistid':0x1},function(_0x1f02ec){console[a26_0x192d('0x3f')](a26_0x192d('0xcb'));console['log'](_0x1f02ec);this[a26_0x192d('0xc7')](a26_0x192d('0xcc'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x1f02ec){console['log'](a26_0x192d('0xcd'));console[a26_0x192d('0x3f')](_0x1f02ec);this[a26_0x192d('0xce')]('RestartApp()');}[a26_0x192d('0x41')](this));}[a26_0x192d('0x41')](this));}[a26_0x192d('0x41')](this));}[a26_0x192d('0xcf')](){console[a26_0x192d('0x3f')]('Rebooting');exec(a26_0x192d('0xd0'),function(_0x124154){console[a26_0x192d('0x3f')](_0x124154);});}[a26_0x192d('0x38')](){const _0x2dcec3=format(this[a26_0x192d('0x33')],this['playerId']);console[a26_0x192d('0x3f')](_0x2dcec3);request({'url':_0x2dcec3,'json':!![]},function(_0x182f66,_0x346cde,_0x3f26c8){if(_0x3f26c8[a26_0x192d('0x53')]>0x0){const _0x2dfb21=_0x3f26c8[0x0];const _0x3e02b0=_0x2dfb21[a26_0x192d('0xd1')];const _0x8f170f=_0x2dfb21['header_active']==0x1;this[a26_0x192d('0xd2')](_0x3e02b0);this['enableClock'](_0x8f170f);this[a26_0x192d('0x36')]();}console['log'](_0x3f26c8);}[a26_0x192d('0x41')](this));}[a26_0x192d('0xd3')](){this[a26_0x192d('0xce')](a26_0x192d('0xd4'));}[a26_0x192d('0xd5')](){this['kodiCommandClient'](a26_0x192d('0xd6'));}[a26_0x192d('0xd2')](_0x16a0b9){const _0x4255cb=_0x16a0b9!=null&&_0x16a0b9!='';const _0x4ca65e=a26_0x192d('0xd7');if(fsExtra[a26_0x192d('0x56')](_0x4ca65e)){const _0x145b9e=fsExtra['readFileSync'](_0x4ca65e);console[a26_0x192d('0x3f')]('xmlContent:\x20'+_0x145b9e);const _0x3d2d92=require(a26_0x192d('0xd8'));const _0x482c97=_0x3d2d92[a26_0x192d('0xd9')];_0x482c97(_0x145b9e,function(_0x145bce,_0x46be33){console[a26_0x192d('0x3f')](a26_0x192d('0xda'),_0x145bce);console['log'](a26_0x192d('0xdb'),_0x46be33);if(!_0x16a0b9||_0x16a0b9==null||_0x16a0b9==''){_0x16a0b9=a26_0x192d('0xdc');}_0x46be33['rssfeeds'][a26_0x192d('0xdd')][0x0][a26_0x192d('0xde')][0x0]['_']=_0x16a0b9;const _0x12fb54=new _0x3d2d92['Builder']();const _0x259d78=_0x12fb54['buildObject'](_0x46be33);console[a26_0x192d('0x3f')](a26_0x192d('0xdf'),_0x259d78);fsExtra['writeFileSync'](_0x4ca65e,_0x259d78);});this[a26_0x192d('0xce')]('RefreshRSS()');this['jsonrpcClient'](a26_0x192d('0xe0'),{'setting':'lookandfeel.enablerssfeeds','value':_0x4255cb},function(_0x1b2668){console['log'](a26_0x192d('0xe1'));console[a26_0x192d('0x3f')](_0x1b2668);}[a26_0x192d('0x41')](this));}}['enableClock'](_0x4260d2){this[a26_0x192d('0xc7')](a26_0x192d('0xe0'),{'setting':a26_0x192d('0xe2'),'value':_0x4260d2},function(_0x39e09d){console[a26_0x192d('0x3f')](a26_0x192d('0xe3'));console[a26_0x192d('0x3f')](_0x39e09d);}[a26_0x192d('0x41')](this));}['kodiCommandClient'](_0x3e37d1){exec(a26_0x192d('0xe4')+_0x3e37d1+'\x22',function(_0x457c70){console[a26_0x192d('0x3f')](_0x457c70);});}[a26_0x192d('0xc7')](_0x9cf72f,_0x4dad4e,_0x2fc562){const _0x2641ce={'jsonrpc':a26_0x192d('0xe5'),'method':_0x9cf72f,'params':_0x4dad4e,'id':0x1};const _0x13bfaf={'user':this[a26_0x192d('0x22')],'pass':this[a26_0x192d('0x23')]};console[a26_0x192d('0x3f')]('jsonrpcClient\x20data',_0x2641ce);console[a26_0x192d('0x3f')](a26_0x192d('0xe6'),_0x13bfaf);this[a26_0x192d('0x25')]['post'](this[a26_0x192d('0x20')]+a26_0x192d('0xe7'),_0x2641ce,![],_0x13bfaf)[a26_0x192d('0x3e')](function(_0x488617){_0x2fc562(_0x488617);})['catch'](function(_0x355530){});}}exports[a26_0x192d('0xe8')]=SyncPlaylistsService;