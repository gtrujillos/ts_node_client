var a22_0x1f2b=['Downloading:\x20','downloader','videoFile:\x20','media','track','@type','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','globalAgent','host','pathname','get','\x20Progress:\x20unknown\x09','statusCode','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','data','err:\x20','finish','Downloaded\x20','headers','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','downloadHTTPFileCallback','createImageVideo','progress','Error\x20downloading\x20file','duration','video','createWriteStream','1/2','-loop','glob','libx264','yuv420p','-vf','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','--format=18','info','Download\x20started','filename:\x20','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTINF:0,luloPlayList','path','substring','/home/osmc/luloclient/media/files/','copySync','m3uFile','Rebooting..','shutdown','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','next','throw','done','value','apply','defineProperty','__esModule','../infrastructure/HttpClientService','http','fs-extra','request','request-progress','child_process','spawn','is-image','youtube-dl','config.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','HttpClientService','config','parse','readFileSync','env','deploy/','playListServiceURL','kodi','checkDependencies','checkFolders','loadMediaList','getStatus','bind','registerClient','playlist','getItems','playerId','stringify','networkInterfaces','context','httpClientService','post','http://restapi.lulo.run/player_devices/register','then','log','catch','deviceUuid','writeFileSync','getCurrentlyPlayingVideo','label','reportStatus','reportStatus:\x20','http://restapi.lulo.run/player_devices/report_status','ensureDir','hasPlayListChanged','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','removeSync','existsSync','error','this.currentFile:\x20','finishProcess','media_type','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo'];(function(_0xecd83e,_0x2fdf00){var _0x8a17a9=function(_0x3181a4){while(--_0x3181a4){_0xecd83e['push'](_0xecd83e['shift']());}};_0x8a17a9(++_0x2fdf00);}(a22_0x1f2b,0x111));var a22_0x67f4=function(_0x28591b,_0x55e68d){_0x28591b=_0x28591b-0x0;var _0x29e666=a22_0x1f2b[_0x28591b];return _0x29e666;};'use strict';var __awaiter=this&&this[a22_0x67f4('0x0')]||function(_0x38fe3b,_0x4f107a,_0x54c856,_0x43b249){function _0x31fdea(_0xa4deb0){return _0xa4deb0 instanceof _0x54c856?_0xa4deb0:new _0x54c856(function(_0x21373e){_0x21373e(_0xa4deb0);});}return new(_0x54c856||(_0x54c856=Promise))(function(_0x59098e,_0x5f3798){function _0xec81cf(_0x360604){try{_0x582ab4(_0x43b249[a22_0x67f4('0x1')](_0x360604));}catch(_0x9aefaa){_0x5f3798(_0x9aefaa);}}function _0x57492e(_0x572f6b){try{_0x582ab4(_0x43b249[a22_0x67f4('0x2')](_0x572f6b));}catch(_0x11cf70){_0x5f3798(_0x11cf70);}}function _0x582ab4(_0x2251e8){_0x2251e8[a22_0x67f4('0x3')]?_0x59098e(_0x2251e8[a22_0x67f4('0x4')]):_0x31fdea(_0x2251e8[a22_0x67f4('0x4')])['then'](_0xec81cf,_0x57492e);}_0x582ab4((_0x43b249=_0x43b249[a22_0x67f4('0x5')](_0x38fe3b,_0x4f107a||[]))[a22_0x67f4('0x1')]());});};Object[a22_0x67f4('0x6')](exports,a22_0x67f4('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x67f4('0x8'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require('url');const http=require(a22_0x67f4('0x9'));const fsExtra=require(a22_0x67f4('0xa'));const request=require(a22_0x67f4('0xb'));const progress=require(a22_0x67f4('0xc'));const spawn=require(a22_0x67f4('0xd'))[a22_0x67f4('0xe')];const isImage=require(a22_0x67f4('0xf'));const format=require('string-template');const os=require('os');const youtubedl=require(a22_0x67f4('0x10'));const uuidv4=require('uuid/v4');const configFile=a22_0x67f4('0x11');const contextFile='context.json';const urlExists=require(a22_0x67f4('0x12'));const kodi_rpc=require(a22_0x67f4('0x13'));const Downloader=require(a22_0x67f4('0x14'));class SyncPlaylistsService{constructor(){this[a22_0x67f4('0x15')]=a22_0x67f4('0x16');this[a22_0x67f4('0x17')]=this[a22_0x67f4('0x15')]+a22_0x67f4('0x18');this[a22_0x67f4('0x19')]=this[a22_0x67f4('0x15')]+a22_0x67f4('0x1a');this[a22_0x67f4('0x1b')]=this[a22_0x67f4('0x15')]+a22_0x67f4('0x1c');this['m3uFile']=this[a22_0x67f4('0x19')]+a22_0x67f4('0x1d');this[a22_0x67f4('0x1e')]=0x0;this[a22_0x67f4('0x1f')]=![];this[a22_0x67f4('0x20')]=[];this[a22_0x67f4('0x21')]=[];this[a22_0x67f4('0x22')]={};this['httpClientService']=new HttpClientService_1[(a22_0x67f4('0x23'))]();}['init'](){this[a22_0x67f4('0x24')]=JSON[a22_0x67f4('0x25')](fs[a22_0x67f4('0x26')](configFile));this['context']=JSON['parse'](fs[a22_0x67f4('0x26')](contextFile));this['playerId']=this[a22_0x67f4('0x24')]['playerId'];this['baseURL']=process[a22_0x67f4('0x27')]['WEB_SERVICE_URL']+a22_0x67f4('0x28');this[a22_0x67f4('0x29')]=this['baseURL']+'api/player_playlist.php?player_id={0}';this[a22_0x67f4('0x2a')]=new kodi_rpc({'url':'http://localhost','user':'lulo','password':'.lulo123.'});this[a22_0x67f4('0x2b')]();this['registerClient']();this[a22_0x67f4('0x2c')]();this[a22_0x67f4('0x2d')]();setInterval(function(){this[a22_0x67f4('0x2e')]();}[a22_0x67f4('0x2f')](this),0x2710);setInterval(function(){this['registerClient']();}['bind'](this),0xea60);}[a22_0x67f4('0x2b')](){}[a22_0x67f4('0x30')](){this[a22_0x67f4('0x2a')][a22_0x67f4('0x31')][a22_0x67f4('0x32')](0x1)['then'](function(_0x2dfadd){const _0x23f0a2=JSON['stringify'](_0x2dfadd);const _0x26e957={'player_id':this[a22_0x67f4('0x33')],'device_uuid':this[a22_0x67f4('0x24')]['deviceUuid'],'network_info':JSON[a22_0x67f4('0x34')](os[a22_0x67f4('0x35')]()),'firmware_info':JSON[a22_0x67f4('0x34')](this[a22_0x67f4('0x36')]),'playlist':_0x23f0a2,'playing_item':'','status':0x0};this[a22_0x67f4('0x37')][a22_0x67f4('0x38')](a22_0x67f4('0x39'),_0x26e957,![])[a22_0x67f4('0x3a')](function(_0x3672d2){console[a22_0x67f4('0x3b')]('register\x20response:\x20'+Date());})[a22_0x67f4('0x3c')](function(_0x5a1562){});console[a22_0x67f4('0x3b')](_0x26e957);}[a22_0x67f4('0x2f')](this));const _0x21b5b1=this['config'][a22_0x67f4('0x3d')];if(!_0x21b5b1||_0x21b5b1==''){this[a22_0x67f4('0x24')]['deviceUuid']=uuidv4();this[a22_0x67f4('0x24')]={'deviceUuid':this[a22_0x67f4('0x24')][a22_0x67f4('0x3d')],'playerId':this['config'][a22_0x67f4('0x33')]};fs[a22_0x67f4('0x3e')](configFile,JSON[a22_0x67f4('0x34')](this[a22_0x67f4('0x24')]));}}[a22_0x67f4('0x2e')](){console[a22_0x67f4('0x3b')]('getStatus');this[a22_0x67f4('0x2a')]['player'][a22_0x67f4('0x3f')]()['then'](function(_0x48c1c4){const _0x232072=_0x48c1c4['item'][a22_0x67f4('0x40')];this[a22_0x67f4('0x41')](_0x232072);}[a22_0x67f4('0x2f')](this))[a22_0x67f4('0x3c')](function(_0x54cafd){console[a22_0x67f4('0x3b')](_0x54cafd);this['reportStatus'](_0x54cafd);}['bind'](this));}[a22_0x67f4('0x41')](_0x1ca29f){console[a22_0x67f4('0x3b')](a22_0x67f4('0x42')+_0x1ca29f);const _0x3271ea={'player_id':this[a22_0x67f4('0x33')],'device_uuid':this[a22_0x67f4('0x24')][a22_0x67f4('0x3d')],'status':_0x1ca29f!=''&&_0x1ca29f!=null?0x1:0x0,'playing_item':_0x1ca29f};this['httpClientService'][a22_0x67f4('0x38')](a22_0x67f4('0x43'),_0x3271ea,![])[a22_0x67f4('0x3a')](function(_0x4a5dc8){console[a22_0x67f4('0x3b')]('reportStatusResponse:\x20'+Date());console[a22_0x67f4('0x3b')](_0x4a5dc8);})['catch'](function(_0x58b911){});}['checkFolders'](){fsExtra['ensureDir'](this[a22_0x67f4('0x15')],_0x17145e=>{});fsExtra[a22_0x67f4('0x44')](this[a22_0x67f4('0x17')],_0x56c3e6=>{});fsExtra[a22_0x67f4('0x44')](this[a22_0x67f4('0x19')],_0x4969cf=>{});}[a22_0x67f4('0x2d')](){const _0x5c3251=format(this[a22_0x67f4('0x29')],this['playerId']);console['log'](_0x5c3251);request({'url':_0x5c3251,'json':!![]},function(_0x18fb91,_0x274599,_0x13d0ff){this[a22_0x67f4('0x22')]=_0x13d0ff;this['playlistChanged']=this[a22_0x67f4('0x45')]();fsExtra[a22_0x67f4('0x46')](this['tempFolder']);this[a22_0x67f4('0x20')]=[];this['failDownloadFiles']=[];this[a22_0x67f4('0x1e')]=0x0;for(const _0x1791d6 in _0x13d0ff){this['downloadFiles'][a22_0x67f4('0x47')](_0x13d0ff[_0x1791d6]);}console[a22_0x67f4('0x3b')](a22_0x67f4('0x48')+this[a22_0x67f4('0x20')][a22_0x67f4('0x49')]);if(this[a22_0x67f4('0x20')][a22_0x67f4('0x49')]>0x0){this[a22_0x67f4('0x4a')]();}}['bind'](this));}[a22_0x67f4('0x4b')](){if(fsExtra['existsSync'](this[a22_0x67f4('0x1b')])){fsExtra[a22_0x67f4('0x4c')](this[a22_0x67f4('0x1b')]);}this[a22_0x67f4('0x2d')]();}[a22_0x67f4('0x45')](){const _0x196692=JSON[a22_0x67f4('0x34')](this['newPlayList']);try{if(!fs[a22_0x67f4('0x4d')](this[a22_0x67f4('0x1b')])){return!![];}else{const _0x5963c9=fs[a22_0x67f4('0x26')](this[a22_0x67f4('0x1b')])['toString']();if(_0x5963c9!=_0x196692){return!![];}}}catch(_0x45e289){console[a22_0x67f4('0x4e')](_0x45e289);}return![];}[a22_0x67f4('0x4a')](){console['log'](a22_0x67f4('0x4f')+this[a22_0x67f4('0x1e')]+'\x20of\x20'+this['downloadFiles'][a22_0x67f4('0x49')]);if(this['currentFile']>=this['downloadFiles'][a22_0x67f4('0x49')]){this[a22_0x67f4('0x50')]();return;}const _0x5e6fa3=String(this['downloadFiles'][this[a22_0x67f4('0x1e')]]['path']);const _0x3b4f61=this[a22_0x67f4('0x20')][this['currentFile']][a22_0x67f4('0x51')];let _0x538b4b=_0x5e6fa3['substring'](_0x5e6fa3[a22_0x67f4('0x52')]('/')+0x1);const _0xd1556=_0x538b4b[a22_0x67f4('0x53')]('.')[a22_0x67f4('0x54')](0x0,-0x1)[a22_0x67f4('0x55')]('.');let _0x25e4d0=this['baseURL']+_0x5e6fa3;const _0x4a3201=_0x25e4d0[a22_0x67f4('0x53')]('.')[a22_0x67f4('0x54')](0x0,-0x1)[a22_0x67f4('0x55')]('.');if(_0x3b4f61==a22_0x67f4('0x56')){_0x538b4b=_0x538b4b+a22_0x67f4('0x57');}else if(_0x3b4f61==a22_0x67f4('0x58')){_0x538b4b=_0xd1556+a22_0x67f4('0x57');_0x25e4d0=_0x4a3201+'.mp4';}console[a22_0x67f4('0x3b')](a22_0x67f4('0x59'));console[a22_0x67f4('0x3b')](_0x5e6fa3);console['log'](_0x3b4f61);console['log'](_0x538b4b);console['log'](_0x25e4d0);console['log'](_0xd1556);console[a22_0x67f4('0x3b')](_0x4a3201);console['log']('**********+');if(fsExtra[a22_0x67f4('0x4d')](this[a22_0x67f4('0x17')]+_0x538b4b)){this[a22_0x67f4('0x5a')](this['tempFolder']+_0x538b4b)[a22_0x67f4('0x3a')](function(_0x464994){if(_0x464994){this[a22_0x67f4('0x1e')]++;}else{this[a22_0x67f4('0x1f')]=!![];}this[a22_0x67f4('0x4a')]();}['bind'](this));}else if(fsExtra[a22_0x67f4('0x4d')](this[a22_0x67f4('0x19')]+_0x538b4b)){this[a22_0x67f4('0x5a')](this[a22_0x67f4('0x19')]+_0x538b4b)[a22_0x67f4('0x3a')](function(_0x2b3be1){if(_0x2b3be1){fsExtra['copySync'](this['filesFolder']+_0x538b4b,this['tempFolder']+_0x538b4b);this['currentFile']++;}else{this[a22_0x67f4('0x1f')]=!![];}this[a22_0x67f4('0x4a')]();}['bind'](this));}else{console[a22_0x67f4('0x3b')](a22_0x67f4('0x5b')+_0x25e4d0);this[a22_0x67f4('0x1f')]=!![];if(_0x3b4f61=='youtube_single'){this['downloadYouTube'](_0x5e6fa3);}else{this[a22_0x67f4('0x5c')](_0x25e4d0,_0x538b4b,_0x3b4f61);}}}[a22_0x67f4('0x5a')](_0x3f958a){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x67f4('0x3b')](a22_0x67f4('0x5d')+_0x3f958a);const _0xb9a5c6=yield mediainfo(_0x3f958a)[a22_0x67f4('0x3c')](_0x31e1b1=>{console[a22_0x67f4('0x3b')](_0x31e1b1);fsExtra[a22_0x67f4('0x4c')](_0x3f958a);return![];});const _0x4dcc26=_0xb9a5c6[a22_0x67f4('0x5e')]['track'][a22_0x67f4('0x49')]>0x1&&_0xb9a5c6[a22_0x67f4('0x5e')][a22_0x67f4('0x5f')][0x1][a22_0x67f4('0x60')]=='Video';if(!_0x4dcc26){fsExtra['removeSync'](_0x3f958a);}console['log'](a22_0x67f4('0x61')+_0x4dcc26);return _0x4dcc26;});}[a22_0x67f4('0x5c')](_0x1ed0ab,_0xae6121,_0x5bebd0){const _0x4fe115=new Downloader();console[a22_0x67f4('0x3b')](_0x1ed0ab);console[a22_0x67f4('0x3b')](_0xae6121);console['log'](_0x5bebd0);const _0x351afc=_0x4fe115[a22_0x67f4('0x4a')](_0x1ed0ab,this[a22_0x67f4('0x17')]+_0xae6121);urlExists(_0x1ed0ab,function(_0x54a608,_0x58a81e){if(_0x58a81e){if(this['failDownloadFiles'][a22_0x67f4('0x62')](this[a22_0x67f4('0x1e')])){const _0x386f9c=this[a22_0x67f4('0x21')][a22_0x67f4('0x63')](this[a22_0x67f4('0x1e')]);if(_0x386f9c>-0x1){this[a22_0x67f4('0x21')][a22_0x67f4('0x64')](_0x386f9c,0x1);}}console[a22_0x67f4('0x3b')](a22_0x67f4('0x65')+_0x1ed0ab);_0x351afc[a22_0x67f4('0x66')]();}else{if(!this[a22_0x67f4('0x21')][a22_0x67f4('0x62')](this[a22_0x67f4('0x1e')])){this['failDownloadFiles']['push'](this['currentFile']);}console['log'](a22_0x67f4('0x67')+_0x1ed0ab);this[a22_0x67f4('0x1e')]++;this['download']();}}['bind'](this));_0x351afc['on'](a22_0x67f4('0x66'),function(_0x351afc){console[a22_0x67f4('0x3b')](a22_0x67f4('0x68')+_0x1ed0ab);});_0x351afc['on'](a22_0x67f4('0x4e'),function(_0x351afc){console[a22_0x67f4('0x3b')](a22_0x67f4('0x69'));this[a22_0x67f4('0x4a')]();}[a22_0x67f4('0x2f')](this));_0x351afc['on'](a22_0x67f4('0x6a'),function(_0x351afc){console[a22_0x67f4('0x3b')]('end');console[a22_0x67f4('0x3b')](a22_0x67f4('0x6b')+_0xae6121);console[a22_0x67f4('0x3b')](a22_0x67f4('0x6c')+_0x5bebd0);this[a22_0x67f4('0x5a')](this[a22_0x67f4('0x17')]+_0xae6121)[a22_0x67f4('0x3a')](function(_0x43e742){if(_0x43e742){this['currentFile']++;}this[a22_0x67f4('0x4a')]();}[a22_0x67f4('0x2f')](this));}[a22_0x67f4('0x2f')](this));_0x351afc['on'](a22_0x67f4('0x6d'),function(_0x351afc){console['log'](a22_0x67f4('0x6d'));});_0x351afc['on']('destroyed',function(_0x351afc){console[a22_0x67f4('0x3b')](a22_0x67f4('0x6e'));});_0x351afc['on'](a22_0x67f4('0x6f'),function(_0x351afc){console['log'](a22_0x67f4('0x6f'));});}[a22_0x67f4('0x70')](_0x4877fd,_0x19c329,_0x14346a,_0x5830f3){console['log']('downloadHTTPFile');console[a22_0x67f4('0x3b')](_0x4877fd);const _0x255627=!![];let _0xe4d5b9=0x0;const _0x411d65='';console[a22_0x67f4('0x3b')](a22_0x67f4('0x71')+_0x4877fd+a22_0x67f4('0x72')+_0x19c329);if(_0xe4d5b9){if(_0xe4d5b9>0x5){_0x5830f3(a22_0x67f4('0x73'),_0x4877fd,_0x14346a,null);return;}}else{_0xe4d5b9=0x0;}const _0x259694=this['tempFolder']+_0x19c329;let _0x5c38ee;if(_0x5830f3===undefined){console[a22_0x67f4('0x3b')](a22_0x67f4('0x74')+_0x4877fd+'\x20to\x20'+_0x259694);_0x5830f3=function(_0x13a8c8,_0x36017d){console[a22_0x67f4('0x3b')]('downloadFile\x20callback\x20result\x20undefined:\x20',_0x13a8c8,_0x36017d);};}http[a22_0x67f4('0x75')]['maxSockets']=0x64;const _0x2d7923={'host':url[a22_0x67f4('0x25')](_0x4877fd)[a22_0x67f4('0x76')],'port':0x50,'path':url[a22_0x67f4('0x25')](_0x4877fd)[a22_0x67f4('0x77')],'agent':![]};const _0x525c91=http[a22_0x67f4('0x78')](_0x2d7923,function(_0x4e376c){let _0x5807e4=0x0;let _0x106b28=0x0;function _0x59da65(){if(_0x5807e4===undefined){console[a22_0x67f4('0x3b')](_0x19c329+a22_0x67f4('0x79')+_0x106b28+'/'+'?');}const _0x34c305=_0x106b28/_0x5807e4*0x64;console[a22_0x67f4('0x3b')](_0x19c329+'\x20Progress:\x20'+_0x34c305+'%\x09'+_0x106b28+'/'+_0x5807e4);}console[a22_0x67f4('0x3b')](_0x19c329+'\x20'+_0x4e376c['statusCode']);switch(_0x4e376c[a22_0x67f4('0x7a')]){case 0xc8:_0x5807e4=_0x4e376c['headers']['content-length']||_0x411d65;fs[a22_0x67f4('0x7b')](_0x259694,function(_0x3e2eb2,_0xde3460){if(!_0x3e2eb2){console['log'](a22_0x67f4('0x7c')+_0x259694);if(_0xde3460[a22_0x67f4('0x7d')]==_0x5807e4){console['log'](a22_0x67f4('0x7e')+_0x5807e4+')');console['log'](a22_0x67f4('0x7f'));}else{console[a22_0x67f4('0x3b')](a22_0x67f4('0x80')+_0xde3460[a22_0x67f4('0x7d')]+a22_0x67f4('0x81')+_0x5807e4+')');}}_0x5c38ee=fs['createWriteStream'](_0x259694);_0x4e376c[a22_0x67f4('0x82')](_0x5c38ee);_0x4e376c['on'](a22_0x67f4('0x83'),function(_0x5c0e83){_0x106b28+=_0x5c0e83['length'];_0x59da65();});_0x525c91['on'](a22_0x67f4('0x4e'),function(_0x3e2eb2){console['log'](a22_0x67f4('0x84'));console[a22_0x67f4('0x3b')](_0x3e2eb2);});_0x5c38ee['on'](a22_0x67f4('0x85'),function(){console[a22_0x67f4('0x3b')](a22_0x67f4('0x86')+_0x4877fd+a22_0x67f4('0x72')+_0x19c329);_0x5830f3(null,_0x19c329,_0x14346a,_0x19c329);}[a22_0x67f4('0x2f')](this));});break;case 0x12e:const _0x9f72a7=_0x4e376c[a22_0x67f4('0x87')][a22_0x67f4('0x88')];console[a22_0x67f4('0x3b')](a22_0x67f4('0x89')+_0x4877fd+a22_0x67f4('0x72')+_0x9f72a7);if(_0xe4d5b9<0x5){this[a22_0x67f4('0x70')](_0x9f72a7,_0x19c329,_0x5830f3,_0xe4d5b9++);}else{console[a22_0x67f4('0x4e')](a22_0x67f4('0x8a')+_0x4877fd+'.');_0x5830f3(a22_0x67f4('0x8b'),null,null,null);}return;case 0x194:console[a22_0x67f4('0x3b')](a22_0x67f4('0x8c')+_0x4877fd);default:console['log'](a22_0x67f4('0x8d')+_0x4877fd+a22_0x67f4('0x8e')+_0x4e376c[a22_0x67f4('0x7a')]);_0x525c91[a22_0x67f4('0x8f')]();_0x5830f3(_0x4e376c[a22_0x67f4('0x7a')],null,null,null);return;}})['on'](a22_0x67f4('0x4e'),function(_0x1a2513){console[a22_0x67f4('0x3b')]('Error\x20Downloading:\x20'+_0x4877fd+'\x20'+_0x1a2513['message']);_0x5830f3(_0x1a2513,null,null,null);});}[a22_0x67f4('0x90')](_0x35b1f2,_0x4d4ca8,_0x2eb3e7,_0x4e34cd){console[a22_0x67f4('0x3b')](a22_0x67f4('0x90'));console['log'](_0x35b1f2);console[a22_0x67f4('0x3b')](_0x4d4ca8);console[a22_0x67f4('0x3b')](_0x2eb3e7);console['log'](_0x4e34cd);if(_0x2eb3e7==a22_0x67f4('0x58')){const _0x18026e=this[a22_0x67f4('0x20')][this[a22_0x67f4('0x1e')]]['duration']!=null?this['downloadFiles'][this[a22_0x67f4('0x1e')]]['duration']:0x1e;this[a22_0x67f4('0x91')](_0x4e34cd,_0x18026e);}else if(_0x2eb3e7=='video'){if(_0x35b1f2==null&&_0x4d4ca8!=''){this['currentFile']++;}this['download']();}console['log'](this['currentFile']);}['downloadRequestFile'](_0x2ae69,_0x150644,_0x52efa0){progress(request(_0x2ae69),{})['on'](a22_0x67f4('0x92'),function(_0x28243b){console['log'](_0x28243b);})['on'](a22_0x67f4('0x4e'),function(_0xe5762f){console[a22_0x67f4('0x3b')](a22_0x67f4('0x93'));this['download']();})['on'](a22_0x67f4('0x6a'),function(){console['log'](a22_0x67f4('0x6b')+_0x150644);console[a22_0x67f4('0x3b')]('mediaType:\x20'+_0x52efa0);if(_0x52efa0=='image'){const _0x31aa34=this[a22_0x67f4('0x20')][this['currentFile']]['duration']!=null?this[a22_0x67f4('0x20')][this[a22_0x67f4('0x1e')]][a22_0x67f4('0x94')]:0x1e;this[a22_0x67f4('0x91')](_0x150644,_0x31aa34);}else if(_0x52efa0==a22_0x67f4('0x95')){this[a22_0x67f4('0x1e')]++;this[a22_0x67f4('0x4a')]();}}['bind'](this))['pipe'](fs[a22_0x67f4('0x96')](this[a22_0x67f4('0x17')]+_0x150644));}[a22_0x67f4('0x91')](_0x500772,_0x2bfd1f=0x1e){const _0x3629b4=this[a22_0x67f4('0x17')]+_0x500772;console[a22_0x67f4('0x3b')](_0x3629b4);console['log'](_0x500772);const _0x401db3=_0x500772[a22_0x67f4('0x53')]('.')[a22_0x67f4('0x54')](0x0,-0x1)[a22_0x67f4('0x55')]('.');const _0x2d74d7='ffmpeg';const _0x539946=['-y','-r',a22_0x67f4('0x97'),a22_0x67f4('0x98'),'1','-pattern_type',a22_0x67f4('0x99'),'-i',_0x3629b4,'-t',String(_0x2bfd1f),'-c:v',a22_0x67f4('0x9a'),'-pix_fmt',a22_0x67f4('0x9b'),'-r','25',a22_0x67f4('0x9c'),'scale=1920:1080',this[a22_0x67f4('0x17')]+_0x401db3+a22_0x67f4('0x57')];const _0x2c1706=spawn(_0x2d74d7,_0x539946);_0x2c1706[a22_0x67f4('0x9d')]['on'](a22_0x67f4('0x83'),function(_0x450f8f){console['log'](a22_0x67f4('0x9e')+_0x3629b4);});_0x2c1706[a22_0x67f4('0x9f')]['on'](a22_0x67f4('0x83'),function(_0x44c561){console['log'](a22_0x67f4('0xa0')+_0x44c561);}[a22_0x67f4('0x2f')](this));_0x2c1706['on'](a22_0x67f4('0xa1'),function(){console['log'](a22_0x67f4('0xa2'));this[a22_0x67f4('0x1e')]++;this[a22_0x67f4('0x4a')]();}['bind'](this));}['downloadYouTube'](_0x59d2c0){const _0x4ed692=this[a22_0x67f4('0x17')]+'/'+_0x59d2c0+a22_0x67f4('0x57');const _0x129e58=youtubedl('http://www.youtube.com/watch?v='+_0x59d2c0,[a22_0x67f4('0xa3')],{'cwd':__dirname});_0x129e58['on'](a22_0x67f4('0xa4'),function(_0x4ed079){console[a22_0x67f4('0x3b')](a22_0x67f4('0xa5'));console['log'](a22_0x67f4('0xa6')+_0x4ed079[a22_0x67f4('0xa7')]);console[a22_0x67f4('0x3b')]('size:\x20'+_0x4ed079[a22_0x67f4('0x7d')]);});_0x129e58['on']('complete',function complete(_0x123fd3){'use strict';console[a22_0x67f4('0x3b')](a22_0x67f4('0xa6')+_0x123fd3[a22_0x67f4('0xa7')]+a22_0x67f4('0xa8'));});_0x129e58['on'](a22_0x67f4('0x6a'),function(){console[a22_0x67f4('0x3b')](a22_0x67f4('0xa9'));this[a22_0x67f4('0x5a')](_0x4ed692)['then'](function(_0x2a0122){if(_0x2a0122){this[a22_0x67f4('0x1e')]++;}this['download']();}[a22_0x67f4('0x2f')](this));}[a22_0x67f4('0x2f')](this));_0x129e58[a22_0x67f4('0x82')](fs[a22_0x67f4('0x96')](_0x4ed692));}['finishProcess'](){console[a22_0x67f4('0x3b')](a22_0x67f4('0xaa'));if(this[a22_0x67f4('0x1f')]){if(this[a22_0x67f4('0x21')]['length']==0x0){fs['writeFileSync'](this['playListFile'],JSON['stringify'](this[a22_0x67f4('0x22')]));let _0x4c29e1='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a22_0x67f4('0xab')+'\x0d\x0a';for(const _0x1ed02c in this[a22_0x67f4('0x20')]){const _0x389b2b=this[a22_0x67f4('0x20')][_0x1ed02c][a22_0x67f4('0xac')];const _0x56d1fd=this['downloadFiles'][_0x1ed02c][a22_0x67f4('0x51')];const _0x13ba69=_0x389b2b[a22_0x67f4('0xad')](_0x389b2b[a22_0x67f4('0x52')]('/')+0x1);let _0x1a3848=_0x13ba69[a22_0x67f4('0x53')]('.')[a22_0x67f4('0x54')](0x0,-0x1)[a22_0x67f4('0x55')]('.');if(_0x56d1fd=='youtube_single'){_0x1a3848=_0x389b2b;}_0x4c29e1+=a22_0x67f4('0xae')+_0x1a3848+a22_0x67f4('0x57')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x67f4('0x19')]);fsExtra[a22_0x67f4('0xaf')](this['tempFolder'],this[a22_0x67f4('0x19')]);fsExtra[a22_0x67f4('0x3e')](this[a22_0x67f4('0xb0')],_0x4c29e1);fsExtra['emptyDirSync'](this[a22_0x67f4('0x17')]);console[a22_0x67f4('0x3b')](a22_0x67f4('0xb1'));const _0x4e2be9=spawn(a22_0x67f4('0xb2'),['-r','now']);}else{console[a22_0x67f4('0x3b')](a22_0x67f4('0xb3'));this[a22_0x67f4('0x1e')]=0x0;setTimeout(function(){this['download']();}['bind'](this),0x1388);}}else{console['log'](a22_0x67f4('0xb4'));}}}exports[a22_0x67f4('0xb5')]=SyncPlaylistsService;