var a22_0x4d67=['Error:\x20','start:\x20','error:\x20','end','Downloaded:\x20','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','error','err:\x20','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','progress','Error\x20downloading\x20file','mediaType:\x20','1/2','-pattern_type','glob','-pix_fmt','-vf','scale=1920:1080','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','Download\x20started','filename:\x20','_filename','size:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','substring','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','__awaiter','done','value','then','apply','next','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','request','request-progress','spawn','is-image','string-template','uuid/v4','node-kodi','mediaFolder','media/','tempFolder','temp/','files/','playlist.txt','m3uFile','filesFolder','lulo_playlist.m3u','playlistChanged','downloadFiles','newPlayList','httpClientService','HttpClientService','readFileSync','context','parse','playerId','config','baseURL','env','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','http://localhost','lulo','checkDependencies','checkFolders','loadMediaList','getStatus','registerClient','bind','playlist','getItems','stringify','deviceUuid','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','writeFileSync','player','item','label','reportStatus','catch','playingItem:\x20','reportStatusResponse:\x20','ensureDir','loadMediaList:\x20','hasPlayListChanged','failDownloadFiles','currentFile','push','length','download','reloadMediaList','emptyDirSync','existsSync','playListFile','removeSync','reboot','System','Shutdown','toString','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','lastIndexOf','split','join','slice','youtube_single','.mp4','image','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start'];(function(_0x5e0194,_0x894535){var _0x73550c=function(_0x248138){while(--_0x248138){_0x5e0194['push'](_0x5e0194['shift']());}};_0x73550c(++_0x894535);}(a22_0x4d67,0x1c7));var a22_0x3c1b=function(_0xb88dce,_0x4b9718){_0xb88dce=_0xb88dce-0x0;var _0x4a1840=a22_0x4d67[_0xb88dce];return _0x4a1840;};'use strict';var __awaiter=this&&this[a22_0x3c1b('0x0')]||function(_0x2140d0,_0x4270d9,_0x51e69a,_0x3abd92){function _0x293906(_0x487b06){return _0x487b06 instanceof _0x51e69a?_0x487b06:new _0x51e69a(function(_0x3d8762){_0x3d8762(_0x487b06);});}return new(_0x51e69a||(_0x51e69a=Promise))(function(_0x558124,_0x32b861){function _0x716496(_0x2f57b6){try{_0xc9314b(_0x3abd92['next'](_0x2f57b6));}catch(_0x4647c4){_0x32b861(_0x4647c4);}}function _0x4bd165(_0x11f6e2){try{_0xc9314b(_0x3abd92['throw'](_0x11f6e2));}catch(_0x2facaf){_0x32b861(_0x2facaf);}}function _0xc9314b(_0x25da30){_0x25da30[a22_0x3c1b('0x1')]?_0x558124(_0x25da30[a22_0x3c1b('0x2')]):_0x293906(_0x25da30[a22_0x3c1b('0x2')])[a22_0x3c1b('0x3')](_0x716496,_0x4bd165);}_0xc9314b((_0x3abd92=_0x3abd92[a22_0x3c1b('0x4')](_0x2140d0,_0x4270d9||[]))[a22_0x3c1b('0x5')]());});};Object[a22_0x3c1b('0x6')](exports,a22_0x3c1b('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x3c1b('0x8'));const mediainfo=require(a22_0x3c1b('0x9'));const fs=require('fs');const url=require(a22_0x3c1b('0xa'));const http=require(a22_0x3c1b('0xb'));const fsExtra=require('fs-extra');const request=require(a22_0x3c1b('0xc'));const progress=require(a22_0x3c1b('0xd'));const spawn=require('child_process')[a22_0x3c1b('0xe')];const isImage=require(a22_0x3c1b('0xf'));const format=require(a22_0x3c1b('0x10'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x3c1b('0x11'));const configFile='config.json';const contextFile='context.json';const urlExists=require('url-exists');const kodi_rpc=require(a22_0x3c1b('0x12'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a22_0x3c1b('0x13')]=a22_0x3c1b('0x14');this[a22_0x3c1b('0x15')]=this[a22_0x3c1b('0x13')]+a22_0x3c1b('0x16');this['filesFolder']=this[a22_0x3c1b('0x13')]+a22_0x3c1b('0x17');this['playListFile']=this[a22_0x3c1b('0x13')]+a22_0x3c1b('0x18');this[a22_0x3c1b('0x19')]=this[a22_0x3c1b('0x1a')]+a22_0x3c1b('0x1b');this['currentFile']=0x0;this[a22_0x3c1b('0x1c')]=![];this[a22_0x3c1b('0x1d')]=[];this['failDownloadFiles']=[];this[a22_0x3c1b('0x1e')]={};this[a22_0x3c1b('0x1f')]=new HttpClientService_1[(a22_0x3c1b('0x20'))]();}['init'](){this['config']=JSON['parse'](fs[a22_0x3c1b('0x21')](configFile));this[a22_0x3c1b('0x22')]=JSON[a22_0x3c1b('0x23')](fs[a22_0x3c1b('0x21')](contextFile));this[a22_0x3c1b('0x24')]=this[a22_0x3c1b('0x25')][a22_0x3c1b('0x24')];this[a22_0x3c1b('0x26')]=process[a22_0x3c1b('0x27')]['WEB_SERVICE_URL']+a22_0x3c1b('0x28');this[a22_0x3c1b('0x29')]=this['baseURL']+a22_0x3c1b('0x2a');this[a22_0x3c1b('0x2b')]=new kodi_rpc({'url':a22_0x3c1b('0x2c'),'user':a22_0x3c1b('0x2d'),'password':'.lulo123.'});this[a22_0x3c1b('0x2e')]();this['registerClient']();this[a22_0x3c1b('0x2f')]();this[a22_0x3c1b('0x30')]();setInterval(function(){this[a22_0x3c1b('0x31')]();}['bind'](this),0x2710);setInterval(function(){this[a22_0x3c1b('0x32')]();}[a22_0x3c1b('0x33')](this),0x493e0);}[a22_0x3c1b('0x2e')](){}[a22_0x3c1b('0x32')](){this[a22_0x3c1b('0x2b')][a22_0x3c1b('0x34')][a22_0x3c1b('0x35')](0x1)[a22_0x3c1b('0x3')](function(_0x4e0744){const _0x6b94f0=JSON[a22_0x3c1b('0x36')](_0x4e0744);const _0x15a6ce={'player_id':this['playerId'],'device_uuid':this['config'][a22_0x3c1b('0x37')],'network_info':JSON[a22_0x3c1b('0x36')](os[a22_0x3c1b('0x38')]()),'firmware_info':JSON['stringify'](this[a22_0x3c1b('0x22')]),'playlist':_0x6b94f0,'playing_item':'','status':0x0};this[a22_0x3c1b('0x1f')][a22_0x3c1b('0x39')](a22_0x3c1b('0x3a'),_0x15a6ce,![])['then'](function(_0x31233e){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x3c')+Date());})['catch'](function(_0x1fbc73){});console[a22_0x3c1b('0x3b')](_0x15a6ce);}['bind'](this));const _0x3d4560=this[a22_0x3c1b('0x25')][a22_0x3c1b('0x37')];if(!_0x3d4560||_0x3d4560==''){this[a22_0x3c1b('0x25')][a22_0x3c1b('0x37')]=uuidv4();this['config']={'deviceUuid':this[a22_0x3c1b('0x25')][a22_0x3c1b('0x37')],'playerId':this[a22_0x3c1b('0x25')][a22_0x3c1b('0x24')]};fs[a22_0x3c1b('0x3d')](configFile,JSON[a22_0x3c1b('0x36')](this[a22_0x3c1b('0x25')]));}}[a22_0x3c1b('0x31')](){console[a22_0x3c1b('0x3b')]('getStatus');this['kodi'][a22_0x3c1b('0x3e')]['getCurrentlyPlayingVideo']()['then'](function(_0x49835c){const _0x26e61a=_0x49835c[a22_0x3c1b('0x3f')][a22_0x3c1b('0x40')];this[a22_0x3c1b('0x41')](_0x26e61a);}[a22_0x3c1b('0x33')](this))[a22_0x3c1b('0x42')](function(_0x5d6cf0){console[a22_0x3c1b('0x3b')](_0x5d6cf0);this[a22_0x3c1b('0x41')](_0x5d6cf0);}[a22_0x3c1b('0x33')](this));}[a22_0x3c1b('0x41')](_0x4f4843){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x43')+_0x4f4843);const _0x13ef63={'player_id':this[a22_0x3c1b('0x24')],'device_uuid':this[a22_0x3c1b('0x25')][a22_0x3c1b('0x37')],'status':_0x4f4843!=''&&_0x4f4843!=null?0x1:0x0,'playing_item':_0x4f4843};this[a22_0x3c1b('0x1f')][a22_0x3c1b('0x39')]('http://restapi.lulo.run/player_devices/report_status',_0x13ef63,![])[a22_0x3c1b('0x3')](function(_0x2512a2){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x44')+Date());})[a22_0x3c1b('0x42')](function(_0x3e8141){});}[a22_0x3c1b('0x2f')](){fsExtra[a22_0x3c1b('0x45')](this[a22_0x3c1b('0x13')],_0x1b7312=>{});fsExtra[a22_0x3c1b('0x45')](this[a22_0x3c1b('0x15')],_0x24bffa=>{});fsExtra[a22_0x3c1b('0x45')](this[a22_0x3c1b('0x1a')],_0x505906=>{});}[a22_0x3c1b('0x30')](){const _0x4b2eb8=format(this[a22_0x3c1b('0x29')],this[a22_0x3c1b('0x24')]);console[a22_0x3c1b('0x3b')](_0x4b2eb8);request({'url':_0x4b2eb8,'json':!![]},function(_0x1181a5,_0x720e32,_0xa20958){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x46'));console[a22_0x3c1b('0x3b')](_0xa20958);this[a22_0x3c1b('0x1e')]=_0xa20958;this['playlistChanged']=this[a22_0x3c1b('0x47')]();fsExtra['emptyDirSync'](this[a22_0x3c1b('0x15')]);this[a22_0x3c1b('0x1d')]=[];this[a22_0x3c1b('0x48')]=[];this[a22_0x3c1b('0x49')]=0x0;for(const _0x35af7c in _0xa20958){this[a22_0x3c1b('0x1d')][a22_0x3c1b('0x4a')](_0xa20958[_0x35af7c]);}console['log']('Total:\x20'+this[a22_0x3c1b('0x1d')]['length']);if(this['downloadFiles'][a22_0x3c1b('0x4b')]>0x0){this[a22_0x3c1b('0x4c')]();}}[a22_0x3c1b('0x33')](this));}[a22_0x3c1b('0x4d')](){if(fsExtra['existsSync'](this[a22_0x3c1b('0x15')])){fsExtra[a22_0x3c1b('0x4e')](this[a22_0x3c1b('0x15')]);}if(fsExtra[a22_0x3c1b('0x4f')](this[a22_0x3c1b('0x50')])){fsExtra[a22_0x3c1b('0x4e')](this['playListFile']);}if(!fsExtra[a22_0x3c1b('0x4f')](this['playListFile'])){fsExtra['removeSync'](this[a22_0x3c1b('0x50')]);}if(!fsExtra[a22_0x3c1b('0x4f')](this[a22_0x3c1b('0x19')])){fsExtra[a22_0x3c1b('0x51')](this['m3uFile']);}this[a22_0x3c1b('0x30')]();}[a22_0x3c1b('0x52')](){this[a22_0x3c1b('0x2b')][a22_0x3c1b('0x53')][a22_0x3c1b('0x54')]();}[a22_0x3c1b('0x47')](){const _0x5c6b90=JSON[a22_0x3c1b('0x36')](this[a22_0x3c1b('0x1e')]);try{if(!fsExtra[a22_0x3c1b('0x4f')](this[a22_0x3c1b('0x50')])){return!![];}else{const _0x319c16=fsExtra[a22_0x3c1b('0x21')](this[a22_0x3c1b('0x50')])[a22_0x3c1b('0x55')]();if(_0x319c16!=_0x5c6b90){return!![];}}}catch(_0x598160){console[a22_0x3c1b('0x3b')](_0x598160);}return![];}[a22_0x3c1b('0x4c')](){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x56')+this[a22_0x3c1b('0x49')]+a22_0x3c1b('0x57')+this[a22_0x3c1b('0x1d')][a22_0x3c1b('0x4b')]);if(this[a22_0x3c1b('0x49')]>=this[a22_0x3c1b('0x1d')][a22_0x3c1b('0x4b')]){this[a22_0x3c1b('0x58')]();return;}const _0x8913e1=String(this[a22_0x3c1b('0x1d')][this[a22_0x3c1b('0x49')]]['path']);const _0x50d1b1=this['downloadFiles'][this[a22_0x3c1b('0x49')]][a22_0x3c1b('0x59')];let _0x38fc58=_0x8913e1['substring'](_0x8913e1[a22_0x3c1b('0x5a')]('/')+0x1);const _0x4d5339=_0x38fc58[a22_0x3c1b('0x5b')]('.')['slice'](0x0,-0x1)[a22_0x3c1b('0x5c')]('.');let _0x1b07ba=this['baseURL']+_0x8913e1;const _0x3a23d3=_0x1b07ba[a22_0x3c1b('0x5b')]('.')[a22_0x3c1b('0x5d')](0x0,-0x1)[a22_0x3c1b('0x5c')]('.');if(_0x50d1b1==a22_0x3c1b('0x5e')){_0x38fc58=_0x38fc58+a22_0x3c1b('0x5f');}else if(_0x50d1b1==a22_0x3c1b('0x60')){_0x38fc58=_0x4d5339+a22_0x3c1b('0x5f');_0x1b07ba=_0x3a23d3+a22_0x3c1b('0x5f');}console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x61'));console[a22_0x3c1b('0x3b')](_0x8913e1);console[a22_0x3c1b('0x3b')](_0x50d1b1);console[a22_0x3c1b('0x3b')](_0x38fc58);console[a22_0x3c1b('0x3b')](_0x1b07ba);console[a22_0x3c1b('0x3b')](_0x4d5339);console[a22_0x3c1b('0x3b')](_0x3a23d3);console[a22_0x3c1b('0x3b')]('**********+');if(fsExtra['existsSync'](this['tempFolder']+_0x38fc58)){this[a22_0x3c1b('0x62')](this[a22_0x3c1b('0x15')]+_0x38fc58)[a22_0x3c1b('0x3')](function(_0x30bb59){if(_0x30bb59){this[a22_0x3c1b('0x49')]++;}else{this[a22_0x3c1b('0x1c')]=!![];}this['download']();}[a22_0x3c1b('0x33')](this));}else if(fsExtra[a22_0x3c1b('0x4f')](this[a22_0x3c1b('0x1a')]+_0x38fc58)){this[a22_0x3c1b('0x62')](this[a22_0x3c1b('0x1a')]+_0x38fc58)[a22_0x3c1b('0x3')](function(_0x4fa469){if(_0x4fa469){fsExtra['copySync'](this[a22_0x3c1b('0x1a')]+_0x38fc58,this[a22_0x3c1b('0x15')]+_0x38fc58);this[a22_0x3c1b('0x49')]++;}else{this['playlistChanged']=!![];}this[a22_0x3c1b('0x4c')]();}[a22_0x3c1b('0x33')](this));}else{console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x63')+_0x1b07ba);this[a22_0x3c1b('0x1c')]=!![];if(_0x50d1b1==a22_0x3c1b('0x5e')){this[a22_0x3c1b('0x64')](_0x8913e1);}else{this[a22_0x3c1b('0x65')](_0x1b07ba,_0x38fc58,_0x50d1b1);}}}[a22_0x3c1b('0x62')](_0xa69a89){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a22_0x3c1b('0x66')+_0xa69a89);const _0x35471b=yield mediainfo(_0xa69a89)[a22_0x3c1b('0x42')](_0x13711f=>{console[a22_0x3c1b('0x3b')](_0x13711f);fsExtra[a22_0x3c1b('0x51')](_0xa69a89);return![];});const _0x18a298=_0x35471b[a22_0x3c1b('0x67')][a22_0x3c1b('0x68')][a22_0x3c1b('0x4b')]>0x1&&_0x35471b[a22_0x3c1b('0x67')][a22_0x3c1b('0x68')][0x1]['@type']==a22_0x3c1b('0x69');if(!_0x18a298){fsExtra[a22_0x3c1b('0x51')](_0xa69a89);}console['log'](a22_0x3c1b('0x6a')+_0x18a298);return _0x18a298;});}[a22_0x3c1b('0x65')](_0x4e4b41,_0x59e213,_0x2da4c8){const _0x53e9e2=new Downloader();console[a22_0x3c1b('0x3b')](_0x4e4b41);console[a22_0x3c1b('0x3b')](_0x59e213);console[a22_0x3c1b('0x3b')](_0x2da4c8);const _0x16eec8=_0x53e9e2[a22_0x3c1b('0x4c')](_0x4e4b41,this[a22_0x3c1b('0x15')]+_0x59e213);urlExists(_0x4e4b41,function(_0x36d6a6,_0x4180e8){if(_0x4180e8){if(this[a22_0x3c1b('0x48')][a22_0x3c1b('0x6b')](this[a22_0x3c1b('0x49')])){const _0x57ff9c=this[a22_0x3c1b('0x48')][a22_0x3c1b('0x6c')](this['currentFile']);if(_0x57ff9c>-0x1){this[a22_0x3c1b('0x48')][a22_0x3c1b('0x6d')](_0x57ff9c,0x1);}}console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x6e')+_0x4e4b41);_0x16eec8[a22_0x3c1b('0x6f')]();}else{if(!this[a22_0x3c1b('0x48')][a22_0x3c1b('0x6b')](this[a22_0x3c1b('0x49')])){this['failDownloadFiles'][a22_0x3c1b('0x4a')](this['currentFile']);}console['log'](a22_0x3c1b('0x70')+_0x4e4b41);this[a22_0x3c1b('0x49')]++;this[a22_0x3c1b('0x4c')]();}}[a22_0x3c1b('0x33')](this));_0x16eec8['on'](a22_0x3c1b('0x6f'),function(_0x16eec8){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x71')+_0x4e4b41);});_0x16eec8['on']('error',function(_0x16eec8){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x72'));this[a22_0x3c1b('0x4c')]();}[a22_0x3c1b('0x33')](this));_0x16eec8['on']('end',function(_0x16eec8){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x73'));console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x74')+_0x59e213);console[a22_0x3c1b('0x3b')]('mediaType:\x20'+_0x2da4c8);this[a22_0x3c1b('0x62')](this[a22_0x3c1b('0x15')]+_0x59e213)['then'](function(_0x5a312c){if(_0x5a312c){this[a22_0x3c1b('0x49')]++;}this[a22_0x3c1b('0x4c')]();}['bind'](this));}[a22_0x3c1b('0x33')](this));_0x16eec8['on']('stopped',function(_0x16eec8){console[a22_0x3c1b('0x3b')]('stopped');});_0x16eec8['on'](a22_0x3c1b('0x75'),function(_0x16eec8){console[a22_0x3c1b('0x3b')]('destroyed');});_0x16eec8['on'](a22_0x3c1b('0x76'),function(_0x16eec8){console['log'](a22_0x3c1b('0x76'));});}[a22_0x3c1b('0x77')](_0x2a01df,_0x3dd6dd,_0x703bff,_0x850519){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x77'));console[a22_0x3c1b('0x3b')](_0x2a01df);const _0x291ba8=!![];let _0x3dd828=0x0;const _0x487bf6='';console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x78')+_0x2a01df+a22_0x3c1b('0x79')+_0x3dd6dd);if(_0x3dd828){if(_0x3dd828>0x5){_0x850519(a22_0x3c1b('0x7a'),_0x2a01df,_0x703bff,null);return;}}else{_0x3dd828=0x0;}const _0xcb657c=this['tempFolder']+_0x3dd6dd;let _0x3608bb;if(_0x850519===undefined){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x7b')+_0x2a01df+a22_0x3c1b('0x79')+_0xcb657c);_0x850519=function(_0x3b560a,_0x909641){console['log']('downloadFile\x20callback\x20result\x20undefined:\x20',_0x3b560a,_0x909641);};}http['globalAgent']['maxSockets']=0x64;const _0x3cd51b={'host':url[a22_0x3c1b('0x23')](_0x2a01df)[a22_0x3c1b('0x7c')],'port':0x50,'path':url[a22_0x3c1b('0x23')](_0x2a01df)[a22_0x3c1b('0x7d')],'agent':![]};const _0xac5a3a=http[a22_0x3c1b('0x7e')](_0x3cd51b,function(_0x3a98a4){let _0x1250e2=0x0;let _0x5c0073=0x0;function _0xfd4d8(){if(_0x1250e2===undefined){console[a22_0x3c1b('0x3b')](_0x3dd6dd+a22_0x3c1b('0x7f')+_0x5c0073+'/'+'?');}const _0x3ae57d=_0x5c0073/_0x1250e2*0x64;console[a22_0x3c1b('0x3b')](_0x3dd6dd+a22_0x3c1b('0x80')+_0x3ae57d+'%\x09'+_0x5c0073+'/'+_0x1250e2);}console[a22_0x3c1b('0x3b')](_0x3dd6dd+'\x20'+_0x3a98a4['statusCode']);switch(_0x3a98a4[a22_0x3c1b('0x81')]){case 0xc8:_0x1250e2=_0x3a98a4[a22_0x3c1b('0x82')][a22_0x3c1b('0x83')]||_0x487bf6;fs[a22_0x3c1b('0x84')](_0xcb657c,function(_0x1d6790,_0x5b930b){if(!_0x1d6790){console['log'](a22_0x3c1b('0x85')+_0xcb657c);if(_0x5b930b[a22_0x3c1b('0x86')]==_0x1250e2){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x87')+_0x1250e2+')');console[a22_0x3c1b('0x3b')]('Redownloading');}else{console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x88')+_0x5b930b[a22_0x3c1b('0x86')]+a22_0x3c1b('0x89')+_0x1250e2+')');}}_0x3608bb=fs[a22_0x3c1b('0x8a')](_0xcb657c);_0x3a98a4[a22_0x3c1b('0x8b')](_0x3608bb);_0x3a98a4['on'](a22_0x3c1b('0x8c'),function(_0x17acd3){_0x5c0073+=_0x17acd3[a22_0x3c1b('0x4b')];_0xfd4d8();});_0xac5a3a['on'](a22_0x3c1b('0x8d'),function(_0x1d6790){console['log'](a22_0x3c1b('0x8e'));console[a22_0x3c1b('0x3b')](_0x1d6790);});_0x3608bb['on'](a22_0x3c1b('0x8f'),function(){console['log'](a22_0x3c1b('0x90')+_0x2a01df+a22_0x3c1b('0x79')+_0x3dd6dd);_0x850519(null,_0x3dd6dd,_0x703bff,_0x3dd6dd);}[a22_0x3c1b('0x33')](this));});break;case 0x12e:const _0x5a36a4=_0x3a98a4[a22_0x3c1b('0x82')][a22_0x3c1b('0x91')];console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x92')+_0x2a01df+a22_0x3c1b('0x79')+_0x5a36a4);if(_0x3dd828<0x5){this[a22_0x3c1b('0x77')](_0x5a36a4,_0x3dd6dd,_0x850519,_0x3dd828++);}else{console[a22_0x3c1b('0x8d')](a22_0x3c1b('0x93')+_0x2a01df+'.');_0x850519(a22_0x3c1b('0x94'),null,null,null);}return;case 0x194:console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x95')+_0x2a01df);default:console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x96')+_0x2a01df+a22_0x3c1b('0x97')+_0x3a98a4[a22_0x3c1b('0x81')]);_0xac5a3a[a22_0x3c1b('0x98')]();_0x850519(_0x3a98a4[a22_0x3c1b('0x81')],null,null,null);return;}})['on'](a22_0x3c1b('0x8d'),function(_0x36a87a){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x99')+_0x2a01df+'\x20'+_0x36a87a[a22_0x3c1b('0x9a')]);_0x850519(_0x36a87a,null,null,null);});}[a22_0x3c1b('0x9b')](_0x2832fe,_0xb14869,_0x317d78,_0x37b475){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x9b'));console[a22_0x3c1b('0x3b')](_0x2832fe);console[a22_0x3c1b('0x3b')](_0xb14869);console[a22_0x3c1b('0x3b')](_0x317d78);console[a22_0x3c1b('0x3b')](_0x37b475);if(_0x317d78==a22_0x3c1b('0x60')){const _0x37523e=this['downloadFiles'][this['currentFile']][a22_0x3c1b('0x9c')]!=null?this[a22_0x3c1b('0x1d')][this[a22_0x3c1b('0x49')]][a22_0x3c1b('0x9c')]:0x1e;this[a22_0x3c1b('0x9d')](_0x37b475,_0x37523e);}else if(_0x317d78==a22_0x3c1b('0x9e')){if(_0x2832fe==null&&_0xb14869!=''){this[a22_0x3c1b('0x49')]++;}this[a22_0x3c1b('0x4c')]();}console[a22_0x3c1b('0x3b')](this[a22_0x3c1b('0x49')]);}['downloadRequestFile'](_0x5f4c43,_0x28fc5c,_0x59316c){progress(request(_0x5f4c43),{})['on'](a22_0x3c1b('0x9f'),function(_0x1dab71){console[a22_0x3c1b('0x3b')](_0x1dab71);})['on'](a22_0x3c1b('0x8d'),function(_0x4b1fe1){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xa0'));this[a22_0x3c1b('0x4c')]();})['on']('end',function(){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0x74')+_0x28fc5c);console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xa1')+_0x59316c);if(_0x59316c==a22_0x3c1b('0x60')){const _0x3c6cb8=this[a22_0x3c1b('0x1d')][this[a22_0x3c1b('0x49')]][a22_0x3c1b('0x9c')]!=null?this[a22_0x3c1b('0x1d')][this[a22_0x3c1b('0x49')]][a22_0x3c1b('0x9c')]:0x1e;this[a22_0x3c1b('0x9d')](_0x28fc5c,_0x3c6cb8);}else if(_0x59316c==a22_0x3c1b('0x9e')){this['currentFile']++;this['download']();}}['bind'](this))[a22_0x3c1b('0x8b')](fs['createWriteStream'](this['tempFolder']+_0x28fc5c));}[a22_0x3c1b('0x9d')](_0x1e531e,_0xa4c7a6=0x1e){const _0x5e02ab=this[a22_0x3c1b('0x15')]+_0x1e531e;console[a22_0x3c1b('0x3b')](_0x5e02ab);console[a22_0x3c1b('0x3b')](_0x1e531e);const _0x550cf9=_0x1e531e[a22_0x3c1b('0x5b')]('.')[a22_0x3c1b('0x5d')](0x0,-0x1)[a22_0x3c1b('0x5c')]('.');const _0x56377e='ffmpeg';const _0x1a0522=['-y','-r',a22_0x3c1b('0xa2'),'-loop','1',a22_0x3c1b('0xa3'),a22_0x3c1b('0xa4'),'-i',_0x5e02ab,'-t',String(_0xa4c7a6),'-c:v','libx264',a22_0x3c1b('0xa5'),'yuv420p','-r','25',a22_0x3c1b('0xa6'),a22_0x3c1b('0xa7'),this[a22_0x3c1b('0x15')]+_0x550cf9+a22_0x3c1b('0x5f')];const _0x454022=spawn(_0x56377e,_0x1a0522);_0x454022['stdout']['on'](a22_0x3c1b('0x8c'),function(_0x2245f8){console[a22_0x3c1b('0x3b')]('Converting\x20'+_0x5e02ab);});_0x454022[a22_0x3c1b('0xa8')]['on']('data',function(_0x160860){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xa9')+_0x160860);}[a22_0x3c1b('0x33')](this));_0x454022['on'](a22_0x3c1b('0xaa'),function(){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xab'));this[a22_0x3c1b('0x49')]++;this[a22_0x3c1b('0x4c')]();}['bind'](this));}[a22_0x3c1b('0x64')](_0x5df4a8){const _0x27ca86=this[a22_0x3c1b('0x15')]+'/'+_0x5df4a8+a22_0x3c1b('0x5f');const _0x335184=youtubedl(a22_0x3c1b('0xac')+_0x5df4a8,['--format=18'],{'cwd':__dirname});_0x335184['on']('info',function(_0x184131){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xad'));console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xae')+_0x184131[a22_0x3c1b('0xaf')]);console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xb0')+_0x184131[a22_0x3c1b('0x86')]);});_0x335184['on']('complete',function complete(_0x7f8f57){'use strict';console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xae')+_0x7f8f57[a22_0x3c1b('0xaf')]+a22_0x3c1b('0xb1'));});_0x335184['on'](a22_0x3c1b('0x73'),function(){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xb2'));this['checkVideo'](_0x27ca86)['then'](function(_0x42ca04){if(_0x42ca04){this[a22_0x3c1b('0x49')]++;}this[a22_0x3c1b('0x4c')]();}['bind'](this));}[a22_0x3c1b('0x33')](this));_0x335184[a22_0x3c1b('0x8b')](fs[a22_0x3c1b('0x8a')](_0x27ca86));}[a22_0x3c1b('0x58')](){console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xb3'));if(this[a22_0x3c1b('0x1c')]){if(this['failDownloadFiles'][a22_0x3c1b('0x4b')]==0x0){fs[a22_0x3c1b('0x3d')](this['playListFile'],JSON[a22_0x3c1b('0x36')](this[a22_0x3c1b('0x1e')]));let _0x1d79eb=a22_0x3c1b('0xb4')+'\x0d\x0a'+a22_0x3c1b('0xb5')+'\x0d\x0a';for(const _0x7fd0ee in this[a22_0x3c1b('0x1d')]){const _0x5ca979=this[a22_0x3c1b('0x1d')][_0x7fd0ee]['path'];const _0xac682f=this[a22_0x3c1b('0x1d')][_0x7fd0ee][a22_0x3c1b('0x59')];const _0x3e65ba=_0x5ca979[a22_0x3c1b('0xb6')](_0x5ca979[a22_0x3c1b('0x5a')]('/')+0x1);let _0x2ba4fa=_0x3e65ba[a22_0x3c1b('0x5b')]('.')['slice'](0x0,-0x1)[a22_0x3c1b('0x5c')]('.');if(_0xac682f=='youtube_single'){_0x2ba4fa=_0x5ca979;}_0x1d79eb+='/home/osmc/luloclient/media/files/'+_0x2ba4fa+a22_0x3c1b('0x5f')+'\x0d\x0a';}fsExtra['emptyDirSync'](this[a22_0x3c1b('0x1a')]);fsExtra['copySync'](this[a22_0x3c1b('0x15')],this['filesFolder']);fsExtra[a22_0x3c1b('0x3d')](this[a22_0x3c1b('0x19')],_0x1d79eb);fsExtra[a22_0x3c1b('0x4e')](this[a22_0x3c1b('0x15')]);console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xb7'));const _0x573a1c=spawn(a22_0x3c1b('0xb8'),['-r',a22_0x3c1b('0xb9')]);}else{console['log'](a22_0x3c1b('0xba'));this[a22_0x3c1b('0x49')]=0x0;setTimeout(function(){this[a22_0x3c1b('0x4c')]();}[a22_0x3c1b('0x33')](this),0x1388);}}else{console[a22_0x3c1b('0x3b')](a22_0x3c1b('0xbb'));}}}exports[a22_0x3c1b('0xbc')]=SyncPlaylistsService;