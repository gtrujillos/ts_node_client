var a26_0x33e4=['writeFileSync','player','getCurrentlyPlayingVideo','item','reportStatus','reportStatus\x20playingItem:\x20','deviceUuid','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','loadMediaList:\x20','playlistChanged','emptyDirSync','Total:\x20','length','download','reloadMediaList','existsSync','removeSync','hasPlayListChanged','toString','this.currentFile:\x20','\x20of\x20','finishProcess','currentFile','path','media_type','lastIndexOf','split','slice','youtube_single','image','.mp4','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','media','track','Video','mediainfo\x20check:','includes','indexOf','splice','start','push','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Max\x20redirects\x20reached','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','parse','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','Have\x20already\x20downloaded\x20','size','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','location','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','progress','Error\x20downloading\x20file','join','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','outFileName:\x20','--format=18','--no-check-certificate','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','Finishing','this.playListFile:\x20','#EXTINF:0,luloPlayList','substring','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','copySync','emptyDirSync:\x20','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','kodiCommandClient','Rebooting','sudo\x20/sbin/reboot\x20-f','header_active','setRss','enableClock','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','parseString','result:\x20%j','none','set','feed','Builder','buildObject','xml:\x20%j','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','jsonrpcClient\x20options','/jsonrpc','__awaiter','next','throw','done','value','then','apply','defineProperty','__esModule','./playerService','url','fs-extra','request','request-progress','child_process','is-image','youtube-dl','uuid/v4','url-exists','mt-files-downloader','media/','tempFolder','mediaFolder','filesFolder','files/','playListFile','playlist.txt','m3uFile','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://192.168.0.109','kodiUser','lulo','.lulo123.','forceReload','httpClientService','PlayerService','init','config','readFileSync','context','playerId','baseURL','env','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','kodiPassword','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','playlist','getItems','stringify','version','post','log','register\x20response:\x20','catch'];(function(_0x2699a9,_0x501e82){var _0x5b6c40=function(_0xa3de42){while(--_0xa3de42){_0x2699a9['push'](_0x2699a9['shift']());}};_0x5b6c40(++_0x501e82);}(a26_0x33e4,0x197));var a26_0x2546=function(_0x1b0664,_0x43d339){_0x1b0664=_0x1b0664-0x0;var _0x5afcbf=a26_0x33e4[_0x1b0664];return _0x5afcbf;};'use strict';var __awaiter=this&&this[a26_0x2546('0x0')]||function(_0x32e43f,_0x1bffda,_0x16bd39,_0x4b31db){function _0x45bed1(_0x5ca4f2){return _0x5ca4f2 instanceof _0x16bd39?_0x5ca4f2:new _0x16bd39(function(_0x2d3ab6){_0x2d3ab6(_0x5ca4f2);});}return new(_0x16bd39||(_0x16bd39=Promise))(function(_0x437e12,_0x3f4799){function _0x4ee1c2(_0x55df72){try{_0x2a078b(_0x4b31db[a26_0x2546('0x1')](_0x55df72));}catch(_0x1f4224){_0x3f4799(_0x1f4224);}}function _0x41dc2f(_0x1b6426){try{_0x2a078b(_0x4b31db[a26_0x2546('0x2')](_0x1b6426));}catch(_0x1cbbea){_0x3f4799(_0x1cbbea);}}function _0x2a078b(_0x65ac5d){_0x65ac5d[a26_0x2546('0x3')]?_0x437e12(_0x65ac5d[a26_0x2546('0x4')]):_0x45bed1(_0x65ac5d[a26_0x2546('0x4')])[a26_0x2546('0x5')](_0x4ee1c2,_0x41dc2f);}_0x2a078b((_0x4b31db=_0x4b31db[a26_0x2546('0x6')](_0x32e43f,_0x1bffda||[]))[a26_0x2546('0x1')]());});};Object[a26_0x2546('0x7')](exports,a26_0x2546('0x8'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a26_0x2546('0x9'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a26_0x2546('0xa'));const http=require('http');const fsExtra=require(a26_0x2546('0xb'));const request=require(a26_0x2546('0xc'));const progress=require(a26_0x2546('0xd'));const spawn=require(a26_0x2546('0xe'))['spawn'];const exec=require(a26_0x2546('0xe'))['exec'];const isImage=require(a26_0x2546('0xf'));const format=require('string-template');const os=require('os');const youtubedl=require(a26_0x2546('0x10'));const uuidv4=require(a26_0x2546('0x11'));const configFile='config.json';const contextFile='package.json';const urlExists=require(a26_0x2546('0x12'));const kodi_rpc=require('node-kodi');const Downloader=require(a26_0x2546('0x13'));class SyncPlaylistsService{constructor(){this['mediaFolder']=a26_0x2546('0x14');this[a26_0x2546('0x15')]=this[a26_0x2546('0x16')]+'temp/';this[a26_0x2546('0x17')]=this[a26_0x2546('0x16')]+a26_0x2546('0x18');this[a26_0x2546('0x19')]=this[a26_0x2546('0x16')]+a26_0x2546('0x1a');this[a26_0x2546('0x1b')]=this[a26_0x2546('0x17')]+'lulo_playlist.m3u';this['currentFile']=0x0;this['playlistChanged']=![];this[a26_0x2546('0x1c')]=[];this[a26_0x2546('0x1d')]=[];this[a26_0x2546('0x1e')]={};this[a26_0x2546('0x1f')]=a26_0x2546('0x20');this[a26_0x2546('0x21')]=a26_0x2546('0x22');this['kodiPassword']=a26_0x2546('0x23');this[a26_0x2546('0x24')]=![];this[a26_0x2546('0x25')]=new HttpClientService_1['HttpClientService']();this['playerService']=new playerService_1[(a26_0x2546('0x26'))]();}[a26_0x2546('0x27')](){this[a26_0x2546('0x28')]=JSON['parse'](fs[a26_0x2546('0x29')](configFile));this[a26_0x2546('0x2a')]=JSON['parse'](fs[a26_0x2546('0x29')](contextFile));this[a26_0x2546('0x2b')]=this['config']['playerId'];this[a26_0x2546('0x2c')]=process[a26_0x2546('0x2d')][a26_0x2546('0x2e')]+a26_0x2546('0x2f');this[a26_0x2546('0x30')]=this['baseURL']+a26_0x2546('0x31');this[a26_0x2546('0x32')]=this[a26_0x2546('0x2c')]+a26_0x2546('0x33');this[a26_0x2546('0x34')]=new kodi_rpc({'url':this[a26_0x2546('0x1f')],'user':this['kodiUser'],'password':this[a26_0x2546('0x35')]});this[a26_0x2546('0x36')]();this[a26_0x2546('0x37')]();this[a26_0x2546('0x38')]();this[a26_0x2546('0x39')]();this[a26_0x2546('0x3a')]();setInterval(function(){this[a26_0x2546('0x3b')]();}[a26_0x2546('0x3c')](this),0x2710);setInterval(function(){this['registerClient']();}[a26_0x2546('0x3c')](this),0x493e0);}[a26_0x2546('0x36')](){}[a26_0x2546('0x37')](){this['kodi'][a26_0x2546('0x3d')][a26_0x2546('0x3e')](0x1)[a26_0x2546('0x5')](function(_0x3e2c3d){const _0x301af1=JSON[a26_0x2546('0x3f')](_0x3e2c3d);const _0x344926={'player_id':this[a26_0x2546('0x2b')],'device_uuid':this[a26_0x2546('0x28')]['deviceUuid'],'network_info':JSON[a26_0x2546('0x3f')](os['networkInterfaces']()),'firmware_info':JSON[a26_0x2546('0x3f')](this['context'][a26_0x2546('0x40')]),'playlist':_0x301af1,'playing_item':'','status':0x0};this[a26_0x2546('0x25')][a26_0x2546('0x41')]('http://restapi.lulo.run/player_devices/register',_0x344926,![])['then'](function(_0x49bc6f){console[a26_0x2546('0x42')](a26_0x2546('0x43')+Date());})[a26_0x2546('0x44')](function(_0x2b8b0e){});console[a26_0x2546('0x42')](_0x344926);}['bind'](this));const _0x3b9611=this[a26_0x2546('0x28')]['deviceUuid'];if(!_0x3b9611||_0x3b9611==''){this[a26_0x2546('0x28')]['deviceUuid']=uuidv4();this[a26_0x2546('0x28')]={'deviceUuid':this[a26_0x2546('0x28')]['deviceUuid'],'playerId':this[a26_0x2546('0x28')][a26_0x2546('0x2b')]};fs[a26_0x2546('0x45')](configFile,JSON[a26_0x2546('0x3f')](this[a26_0x2546('0x28')]));}}[a26_0x2546('0x3b')](){console['log']('getStatus');this[a26_0x2546('0x34')][a26_0x2546('0x46')][a26_0x2546('0x47')]()[a26_0x2546('0x5')](function(_0xe5c09d){const _0x23e180=_0xe5c09d[a26_0x2546('0x48')]['label'];this[a26_0x2546('0x49')](_0x23e180);}[a26_0x2546('0x3c')](this))['catch'](function(_0x196a5a){console[a26_0x2546('0x42')](_0x196a5a);this[a26_0x2546('0x49')](JSON[a26_0x2546('0x3f')](_0x196a5a));}[a26_0x2546('0x3c')](this));}[a26_0x2546('0x49')](_0x3fa127){console['log'](a26_0x2546('0x4a')+_0x3fa127);const _0x13510a={'player_id':this['playerId'],'device_uuid':this[a26_0x2546('0x28')][a26_0x2546('0x4b')],'status':_0x3fa127!=''&&_0x3fa127!=null?0x1:0x0,'playing_item':_0x3fa127};this[a26_0x2546('0x25')][a26_0x2546('0x41')](a26_0x2546('0x4c'),_0x13510a,![])[a26_0x2546('0x5')](function(_0x44edfb){console[a26_0x2546('0x42')](a26_0x2546('0x4d'));})[a26_0x2546('0x44')](function(_0x5c470d){});}[a26_0x2546('0x38')](){fsExtra[a26_0x2546('0x4e')](this['mediaFolder'],_0x2e21ce=>{});fsExtra['ensureDir'](this[a26_0x2546('0x15')],_0xcb023c=>{});fsExtra[a26_0x2546('0x4e')](this[a26_0x2546('0x17')],_0x8a16ca=>{});}[a26_0x2546('0x39')](){const _0x36d6b3=format(this['playListServiceURL'],this[a26_0x2546('0x2b')]);console['log'](_0x36d6b3);request({'url':_0x36d6b3,'json':!![]},function(_0x2825ca,_0x8214a1,_0x1aad66){console['log'](a26_0x2546('0x4f'));this[a26_0x2546('0x1e')]=_0x1aad66;this[a26_0x2546('0x50')]=this['hasPlayListChanged']();fsExtra[a26_0x2546('0x51')](this[a26_0x2546('0x15')]);this[a26_0x2546('0x1c')]=[];this[a26_0x2546('0x1d')]=[];this['currentFile']=0x0;for(const _0x553e5d in _0x1aad66){this[a26_0x2546('0x1c')]['push'](_0x1aad66[_0x553e5d]);}console[a26_0x2546('0x42')](a26_0x2546('0x52')+this['downloadFiles'][a26_0x2546('0x53')]);if(this[a26_0x2546('0x1c')]['length']>0x0){this[a26_0x2546('0x54')]();}}[a26_0x2546('0x3c')](this));}[a26_0x2546('0x55')](){this[a26_0x2546('0x24')]=!![];if(fsExtra[a26_0x2546('0x56')](this[a26_0x2546('0x15')])){fsExtra[a26_0x2546('0x51')](this[a26_0x2546('0x15')]);}if(fsExtra[a26_0x2546('0x56')](this[a26_0x2546('0x17')])){fsExtra[a26_0x2546('0x51')](this[a26_0x2546('0x17')]);}if(!fsExtra[a26_0x2546('0x56')](this[a26_0x2546('0x19')])){fsExtra[a26_0x2546('0x57')](this[a26_0x2546('0x19')]);}if(!fsExtra['existsSync'](this['m3uFile'])){fsExtra[a26_0x2546('0x57')](this[a26_0x2546('0x1b')]);}this[a26_0x2546('0x39')]();}[a26_0x2546('0x58')](){const _0x40a35a=JSON[a26_0x2546('0x3f')](this['newPlayList']);try{if(!fsExtra[a26_0x2546('0x56')](this[a26_0x2546('0x19')])){return!![];}else{const _0x2c5140=fsExtra[a26_0x2546('0x29')](this['playListFile'])[a26_0x2546('0x59')]();if(_0x2c5140!=_0x40a35a){return!![];}}}catch(_0x9f2f23){console['log'](_0x9f2f23);}return![];}[a26_0x2546('0x54')](){console[a26_0x2546('0x42')](a26_0x2546('0x5a')+this['currentFile']+a26_0x2546('0x5b')+this[a26_0x2546('0x1c')][a26_0x2546('0x53')]);if(this['currentFile']>=this[a26_0x2546('0x1c')][a26_0x2546('0x53')]){this[a26_0x2546('0x5c')]();return;}const _0x3a0d1e=String(this[a26_0x2546('0x1c')][this[a26_0x2546('0x5d')]][a26_0x2546('0x5e')]);const _0x5aa7c3=this['downloadFiles'][this[a26_0x2546('0x5d')]][a26_0x2546('0x5f')];let _0x178e8b=_0x3a0d1e['substring'](_0x3a0d1e[a26_0x2546('0x60')]('/')+0x1);const _0x1e872e=_0x178e8b[a26_0x2546('0x61')]('.')['slice'](0x0,-0x1)['join']('.');let _0x249b49=this[a26_0x2546('0x2c')]+_0x3a0d1e;const _0x67c8a3=_0x249b49[a26_0x2546('0x61')]('.')[a26_0x2546('0x62')](0x0,-0x1)['join']('.');if(_0x5aa7c3==a26_0x2546('0x63')){_0x178e8b=_0x178e8b+'.mp4';}else if(_0x5aa7c3==a26_0x2546('0x64')){_0x178e8b=_0x1e872e+a26_0x2546('0x65');_0x249b49=_0x67c8a3+a26_0x2546('0x65');}console[a26_0x2546('0x42')](a26_0x2546('0x66'));console[a26_0x2546('0x42')](_0x3a0d1e);console[a26_0x2546('0x42')](_0x5aa7c3);console[a26_0x2546('0x42')](_0x178e8b);console[a26_0x2546('0x42')](_0x249b49);console[a26_0x2546('0x42')](_0x1e872e);console[a26_0x2546('0x42')](_0x67c8a3);console[a26_0x2546('0x42')](a26_0x2546('0x66'));if(fsExtra['existsSync'](this[a26_0x2546('0x15')]+_0x178e8b)){this[a26_0x2546('0x67')](this['tempFolder']+_0x178e8b)[a26_0x2546('0x5')](function(_0x41ecf1){if(_0x41ecf1){this[a26_0x2546('0x5d')]++;}else{this['playlistChanged']=!![];}this[a26_0x2546('0x54')]();}[a26_0x2546('0x3c')](this));}else if(fsExtra[a26_0x2546('0x56')](this[a26_0x2546('0x17')]+_0x178e8b)){this[a26_0x2546('0x67')](this[a26_0x2546('0x17')]+_0x178e8b)[a26_0x2546('0x5')](function(_0x2272c1){if(_0x2272c1){fsExtra['copySync'](this[a26_0x2546('0x17')]+_0x178e8b,this[a26_0x2546('0x15')]+_0x178e8b);this[a26_0x2546('0x5d')]++;}else{this[a26_0x2546('0x50')]=!![];}this[a26_0x2546('0x54')]();}[a26_0x2546('0x3c')](this));}else{console[a26_0x2546('0x42')](a26_0x2546('0x68')+_0x249b49);this[a26_0x2546('0x50')]=!![];if(_0x5aa7c3==a26_0x2546('0x63')){this[a26_0x2546('0x69')](_0x3a0d1e);}else{this[a26_0x2546('0x6a')](_0x249b49,_0x178e8b,_0x5aa7c3);}}}[a26_0x2546('0x67')](_0x110648){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x2546('0x42')](a26_0x2546('0x6b')+_0x110648);const _0x57b3e2=yield mediainfo(_0x110648)[a26_0x2546('0x44')](_0x4c74b3=>{console[a26_0x2546('0x42')](_0x4c74b3);fsExtra[a26_0x2546('0x57')](_0x110648);return![];});const _0x22651a=_0x57b3e2[a26_0x2546('0x6c')]['track'][a26_0x2546('0x53')]>0x1&&_0x57b3e2[a26_0x2546('0x6c')][a26_0x2546('0x6d')][0x1]['@type']==a26_0x2546('0x6e');if(!_0x22651a){fsExtra['removeSync'](_0x110648);}console['log'](a26_0x2546('0x6f')+_0x22651a);return _0x22651a;});}[a26_0x2546('0x6a')](_0x2539b3,_0x26b9aa,_0x53b240){const _0x4dc7d9=new Downloader();console['log'](_0x2539b3);console['log'](_0x26b9aa);console[a26_0x2546('0x42')](_0x53b240);const _0x5800b7=_0x4dc7d9[a26_0x2546('0x54')](_0x2539b3,this['tempFolder']+_0x26b9aa);urlExists(_0x2539b3,function(_0x3aefb0,_0x37b723){if(_0x37b723){if(this[a26_0x2546('0x1d')][a26_0x2546('0x70')](this[a26_0x2546('0x5d')])){const _0x280cbf=this[a26_0x2546('0x1d')][a26_0x2546('0x71')](this[a26_0x2546('0x5d')]);if(_0x280cbf>-0x1){this[a26_0x2546('0x1d')][a26_0x2546('0x72')](_0x280cbf,0x1);}}console[a26_0x2546('0x42')]('downloading:\x20'+_0x2539b3);_0x5800b7[a26_0x2546('0x73')]();}else{if(!this[a26_0x2546('0x1d')]['includes'](this[a26_0x2546('0x5d')])){this[a26_0x2546('0x1d')][a26_0x2546('0x74')](this[a26_0x2546('0x5d')]);}console[a26_0x2546('0x42')](a26_0x2546('0x75')+_0x2539b3);this[a26_0x2546('0x5d')]++;this[a26_0x2546('0x54')]();}}['bind'](this));_0x5800b7['on']('start',function(_0x5800b7){console['log'](a26_0x2546('0x76')+_0x2539b3);});_0x5800b7['on'](a26_0x2546('0x77'),function(_0x5800b7){console[a26_0x2546('0x42')](a26_0x2546('0x78'));this[a26_0x2546('0x54')]();}[a26_0x2546('0x3c')](this));_0x5800b7['on'](a26_0x2546('0x79'),function(_0x5800b7){console[a26_0x2546('0x42')](a26_0x2546('0x79'));console['log'](a26_0x2546('0x7a')+_0x26b9aa);console[a26_0x2546('0x42')](a26_0x2546('0x7b')+_0x53b240);this[a26_0x2546('0x67')](this['tempFolder']+_0x26b9aa)[a26_0x2546('0x5')](function(_0x18c773){if(_0x18c773){this[a26_0x2546('0x5d')]++;}this[a26_0x2546('0x54')]();}[a26_0x2546('0x3c')](this));}['bind'](this));_0x5800b7['on'](a26_0x2546('0x7c'),function(_0x5800b7){console[a26_0x2546('0x42')](a26_0x2546('0x7c'));});_0x5800b7['on'](a26_0x2546('0x7d'),function(_0x5800b7){console[a26_0x2546('0x42')](a26_0x2546('0x7d'));});_0x5800b7['on'](a26_0x2546('0x7e'),function(_0x5800b7){console[a26_0x2546('0x42')](a26_0x2546('0x7e'));});}[a26_0x2546('0x7f')](_0x4a0056,_0x35b7cb,_0x2ecc9c,_0x42b786){console[a26_0x2546('0x42')](a26_0x2546('0x7f'));console[a26_0x2546('0x42')](_0x4a0056);const _0x42f169=!![];let _0x47f9dd=0x0;const _0x3bdeff='';console[a26_0x2546('0x42')]('Attempting\x20to\x20download\x20'+_0x4a0056+'\x20to\x20'+_0x35b7cb);if(_0x47f9dd){if(_0x47f9dd>0x5){_0x42b786(a26_0x2546('0x80'),_0x4a0056,_0x2ecc9c,null);return;}}else{_0x47f9dd=0x0;}const _0x58aef1=this[a26_0x2546('0x15')]+_0x35b7cb;let _0x5cbdb7;if(_0x42b786===undefined){console['log']('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x4a0056+a26_0x2546('0x81')+_0x58aef1);_0x42b786=function(_0x15528d,_0x5b1358){console['log'](a26_0x2546('0x82'),_0x15528d,_0x5b1358);};}http[a26_0x2546('0x83')][a26_0x2546('0x84')]=0x64;const _0x5bbb8a={'host':url[a26_0x2546('0x85')](_0x4a0056)[a26_0x2546('0x86')],'port':0x50,'path':url[a26_0x2546('0x85')](_0x4a0056)[a26_0x2546('0x87')],'agent':![]};const _0x7ed86b=http[a26_0x2546('0x88')](_0x5bbb8a,function(_0x33c150){let _0xca8a42=0x0;let _0x448a93=0x0;function _0x46dee1(){if(_0xca8a42===undefined){console['log'](_0x35b7cb+a26_0x2546('0x89')+_0x448a93+'/'+'?');}const _0x335333=_0x448a93/_0xca8a42*0x64;console[a26_0x2546('0x42')](_0x35b7cb+a26_0x2546('0x8a')+_0x335333+'%\x09'+_0x448a93+'/'+_0xca8a42);}console[a26_0x2546('0x42')](_0x35b7cb+'\x20'+_0x33c150[a26_0x2546('0x8b')]);switch(_0x33c150[a26_0x2546('0x8b')]){case 0xc8:_0xca8a42=_0x33c150[a26_0x2546('0x8c')][a26_0x2546('0x8d')]||_0x3bdeff;fs['stat'](_0x58aef1,function(_0x4b7699,_0x8c607c){if(!_0x4b7699){console[a26_0x2546('0x42')](a26_0x2546('0x8e')+_0x58aef1);if(_0x8c607c[a26_0x2546('0x8f')]==_0xca8a42){console[a26_0x2546('0x42')]('And\x20the\x20file\x20size\x20matches\x20('+_0xca8a42+')');console[a26_0x2546('0x42')]('Redownloading');}else{console[a26_0x2546('0x42')](a26_0x2546('0x90')+_0x8c607c[a26_0x2546('0x8f')]+a26_0x2546('0x91')+_0xca8a42+')');}}_0x5cbdb7=fs[a26_0x2546('0x92')](_0x58aef1);_0x33c150[a26_0x2546('0x93')](_0x5cbdb7);_0x33c150['on'](a26_0x2546('0x94'),function(_0x108325){_0x448a93+=_0x108325['length'];_0x46dee1();});_0x7ed86b['on']('error',function(_0x4b7699){console[a26_0x2546('0x42')](a26_0x2546('0x95'));console['log'](_0x4b7699);});_0x5cbdb7['on'](a26_0x2546('0x96'),function(){console['log']('Downloaded\x20'+_0x4a0056+'\x20to\x20'+_0x35b7cb);_0x42b786(null,_0x35b7cb,_0x2ecc9c,_0x35b7cb);}[a26_0x2546('0x3c')](this));});break;case 0x12e:const _0x4c2eaa=_0x33c150[a26_0x2546('0x8c')][a26_0x2546('0x97')];console['log'](a26_0x2546('0x98')+_0x4a0056+a26_0x2546('0x81')+_0x4c2eaa);if(_0x47f9dd<0x5){this[a26_0x2546('0x7f')](_0x4c2eaa,_0x35b7cb,_0x42b786,_0x47f9dd++);}else{console[a26_0x2546('0x77')]('Redirect\x20limit\x20encountered\x20for\x20'+_0x4a0056+'.');_0x42b786(a26_0x2546('0x99'),null,null,null);}return;case 0x194:console[a26_0x2546('0x42')](a26_0x2546('0x9a')+_0x4a0056);default:console[a26_0x2546('0x42')](a26_0x2546('0x9b')+_0x4a0056+'\x20STATUS:\x20'+_0x33c150['statusCode']);_0x7ed86b[a26_0x2546('0x9c')]();_0x42b786(_0x33c150[a26_0x2546('0x8b')],null,null,null);return;}})['on'](a26_0x2546('0x77'),function(_0x253ac4){console[a26_0x2546('0x42')](a26_0x2546('0x9d')+_0x4a0056+'\x20'+_0x253ac4[a26_0x2546('0x9e')]);_0x42b786(_0x253ac4,null,null,null);});}[a26_0x2546('0x9f')](_0x112ea2,_0x1d4928,_0x16bb4e,_0x1ab340){console[a26_0x2546('0x42')](a26_0x2546('0x9f'));console[a26_0x2546('0x42')](_0x112ea2);console['log'](_0x1d4928);console['log'](_0x16bb4e);console[a26_0x2546('0x42')](_0x1ab340);if(_0x16bb4e==a26_0x2546('0x64')){const _0x134c9a=this[a26_0x2546('0x1c')][this[a26_0x2546('0x5d')]][a26_0x2546('0xa0')]!=null?this[a26_0x2546('0x1c')][this[a26_0x2546('0x5d')]]['duration']:0x1e;this[a26_0x2546('0xa1')](_0x1ab340,_0x134c9a);}else if(_0x16bb4e==a26_0x2546('0xa2')){if(_0x112ea2==null&&_0x1d4928!=''){this[a26_0x2546('0x5d')]++;}this[a26_0x2546('0x54')]();}console['log'](this['currentFile']);}['downloadRequestFile'](_0x111c85,_0x5efc46,_0x58a2e5){progress(request(_0x111c85),{})['on'](a26_0x2546('0xa3'),function(_0x947e5a){console['log'](_0x947e5a);})['on'](a26_0x2546('0x77'),function(_0x58d110){console[a26_0x2546('0x42')](a26_0x2546('0xa4'));this['download']();})['on'](a26_0x2546('0x79'),function(){console[a26_0x2546('0x42')](a26_0x2546('0x7a')+_0x5efc46);console[a26_0x2546('0x42')](a26_0x2546('0x7b')+_0x58a2e5);if(_0x58a2e5==a26_0x2546('0x64')){const _0x128e6f=this['downloadFiles'][this[a26_0x2546('0x5d')]][a26_0x2546('0xa0')]!=null?this[a26_0x2546('0x1c')][this['currentFile']]['duration']:0x1e;this[a26_0x2546('0xa1')](_0x5efc46,_0x128e6f);}else if(_0x58a2e5=='video'){this[a26_0x2546('0x5d')]++;this[a26_0x2546('0x54')]();}}[a26_0x2546('0x3c')](this))[a26_0x2546('0x93')](fs[a26_0x2546('0x92')](this[a26_0x2546('0x15')]+_0x5efc46));}[a26_0x2546('0xa1')](_0x4a8857,_0x27d88b=0x1e){const _0x20e7ee=this['tempFolder']+_0x4a8857;console[a26_0x2546('0x42')](_0x20e7ee);console[a26_0x2546('0x42')](_0x4a8857);const _0x3e90ef=_0x4a8857[a26_0x2546('0x61')]('.')['slice'](0x0,-0x1)[a26_0x2546('0xa5')]('.');const _0x34cad7=a26_0x2546('0xa6');const _0x2d5b42=['-y','-r',a26_0x2546('0xa7'),a26_0x2546('0xa8'),'1',a26_0x2546('0xa9'),a26_0x2546('0xaa'),'-i',_0x20e7ee,'-t',String(_0x27d88b),a26_0x2546('0xab'),a26_0x2546('0xac'),'-pix_fmt','yuv420p','-r','25','-vf',a26_0x2546('0xad'),this[a26_0x2546('0x15')]+_0x3e90ef+'.mp4'];const _0x59fe42=spawn(_0x34cad7,_0x2d5b42);_0x59fe42[a26_0x2546('0xae')]['on'](a26_0x2546('0x94'),function(_0x5a0354){console[a26_0x2546('0x42')](a26_0x2546('0xaf')+_0x20e7ee);});_0x59fe42[a26_0x2546('0xb0')]['on'](a26_0x2546('0x94'),function(_0xad20f6){console['log'](a26_0x2546('0xb1')+_0xad20f6);}[a26_0x2546('0x3c')](this));_0x59fe42['on'](a26_0x2546('0xb2'),function(){console[a26_0x2546('0x42')](a26_0x2546('0xb3'));this[a26_0x2546('0x5d')]++;this[a26_0x2546('0x54')]();}[a26_0x2546('0x3c')](this));}[a26_0x2546('0x69')](_0x4e2659){const _0x49cc3a=this[a26_0x2546('0x15')]+'/'+_0x4e2659+a26_0x2546('0x65');const _0x2a93dd=a26_0x2546('0xb4')+_0x4e2659;console[a26_0x2546('0x42')]('youtubeURL:\x20'+_0x2a93dd);console[a26_0x2546('0x42')](a26_0x2546('0xb5')+_0x49cc3a);const _0x43e302=youtubedl(_0x2a93dd,[a26_0x2546('0xb6'),a26_0x2546('0xb7')],{'cwd':__dirname});_0x43e302['on'](a26_0x2546('0xb8'),function(_0x29f059){console[a26_0x2546('0x42')](a26_0x2546('0xb9'));console['log'](a26_0x2546('0xba')+_0x29f059[a26_0x2546('0xbb')]);console['log'](a26_0x2546('0xbc')+_0x29f059[a26_0x2546('0x8f')]);});_0x43e302['on'](a26_0x2546('0xbd'),function complete(_0x11ecc0){'use strict';console[a26_0x2546('0x42')](a26_0x2546('0xba')+_0x11ecc0[a26_0x2546('0xbb')]+'\x20already\x20downloaded.');});_0x43e302['on'](a26_0x2546('0x79'),function(){console[a26_0x2546('0x42')]('finished\x20youtube\x20downloading!');this[a26_0x2546('0x67')](_0x49cc3a)['then'](function(_0x413dcc){if(_0x413dcc){this[a26_0x2546('0x5d')]++;}this['download']();}[a26_0x2546('0x3c')](this));}[a26_0x2546('0x3c')](this));_0x43e302[a26_0x2546('0x93')](fs[a26_0x2546('0x92')](_0x49cc3a));}[a26_0x2546('0x5c')](){console['log'](a26_0x2546('0xbe'));if(this['playlistChanged']){if(this[a26_0x2546('0x1d')][a26_0x2546('0x53')]==0x0){console[a26_0x2546('0x42')](a26_0x2546('0xbf')+this[a26_0x2546('0x19')]);fs['writeFileSync'](this[a26_0x2546('0x19')],JSON[a26_0x2546('0x3f')](this[a26_0x2546('0x1e')]));let _0x40fe87='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a26_0x2546('0xc0')+'\x0d\x0a';for(const _0x4cbb42 in this[a26_0x2546('0x1c')]){const _0x141b97=this[a26_0x2546('0x1c')][_0x4cbb42][a26_0x2546('0x5e')];const _0x2f579e=this['downloadFiles'][_0x4cbb42][a26_0x2546('0x5f')];const _0x2ca462=_0x141b97[a26_0x2546('0xc1')](_0x141b97[a26_0x2546('0x60')]('/')+0x1);let _0xc77a1b=_0x2ca462[a26_0x2546('0x61')]('.')[a26_0x2546('0x62')](0x0,-0x1)[a26_0x2546('0xa5')]('.');if(_0x2f579e==a26_0x2546('0x63')){_0xc77a1b=_0x141b97;}_0x40fe87+=a26_0x2546('0xc2')+_0xc77a1b+'.mp4'+'\x0d\x0a';console[a26_0x2546('0x42')](a26_0x2546('0xc3')+_0x40fe87);}console['log']('m3uContent:\x20'+_0x40fe87);fsExtra[a26_0x2546('0x51')](this[a26_0x2546('0x17')]);console[a26_0x2546('0x42')](a26_0x2546('0xc4')+this[a26_0x2546('0x15')]);fsExtra[a26_0x2546('0xc5')](this['tempFolder'],this['filesFolder']);console[a26_0x2546('0x42')]('writeFileSync:\x20'+this[a26_0x2546('0x1b')]);fsExtra['writeFileSync'](this['m3uFile'],_0x40fe87);console['log'](a26_0x2546('0xc6')+this[a26_0x2546('0x15')]);fsExtra['emptyDirSync'](this[a26_0x2546('0x15')]);console['log'](a26_0x2546('0xc7'));this[a26_0x2546('0xc8')]();}else{console[a26_0x2546('0x42')](a26_0x2546('0xc9'));this[a26_0x2546('0x5d')]=0x0;setTimeout(function(){this[a26_0x2546('0x54')]();}[a26_0x2546('0x3c')](this),0x1388);}}else{console[a26_0x2546('0x42')](a26_0x2546('0xca'));}}['refreshPlayer'](){this[a26_0x2546('0xcb')](a26_0x2546('0xcc'),{'playlistid':0x1},function(_0x374258){console['log'](a26_0x2546('0xcd'));console['log'](_0x374258);this[a26_0x2546('0xcb')](a26_0x2546('0xce'),{'item':{'file':a26_0x2546('0xcf')},'playlistid':0x1},function(_0x374258){console['log'](a26_0x2546('0xd0'));console[a26_0x2546('0x42')](_0x374258);this[a26_0x2546('0xcb')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x374258){console[a26_0x2546('0x42')](a26_0x2546('0xd1'));console[a26_0x2546('0x42')](_0x374258);this[a26_0x2546('0xd2')]('RestartApp()');}[a26_0x2546('0x3c')](this));}['bind'](this));}[a26_0x2546('0x3c')](this));}[a26_0x2546('0xc8')](){console[a26_0x2546('0x42')](a26_0x2546('0xd3'));exec(a26_0x2546('0xd4'),function(_0x452e72){console[a26_0x2546('0x42')](_0x452e72);});}['updateSettings'](){const _0x238c19=format(this[a26_0x2546('0x32')],this['playerId']);console['log'](_0x238c19);request({'url':_0x238c19,'json':!![]},function(_0x253775,_0x38447b,_0x2aa176){if(_0x2aa176[a26_0x2546('0x53')]>0x0){const _0x5a2f02=_0x2aa176[0x0];const _0x2d2d67=_0x5a2f02['rss'];const _0x298da5=_0x5a2f02[a26_0x2546('0xd5')]==0x1;this[a26_0x2546('0xd6')](_0x2d2d67);this[a26_0x2546('0xd7')](_0x298da5);this[a26_0x2546('0x37')]();}console[a26_0x2546('0x42')](_0x2aa176);}[a26_0x2546('0x3c')](this));}[a26_0x2546('0xd8')](){this[a26_0x2546('0xd2')](a26_0x2546('0xd9'));}[a26_0x2546('0xda')](){this[a26_0x2546('0xd2')](a26_0x2546('0xdb'));}[a26_0x2546('0xd6')](_0x4ca5c3){const _0x400dec=_0x4ca5c3!=null&&_0x4ca5c3!='';const _0x6827b2=a26_0x2546('0xdc');if(fsExtra['existsSync'](_0x6827b2)){const _0x3c819e=fsExtra[a26_0x2546('0x29')](_0x6827b2);console[a26_0x2546('0x42')]('xmlContent:\x20'+_0x3c819e);const _0x5c40f5=require('xml2js');const _0x874f44=_0x5c40f5[a26_0x2546('0xdd')];_0x874f44(_0x3c819e,function(_0x9f9706,_0x1e587a){console['log']('err:\x20%j',_0x9f9706);console[a26_0x2546('0x42')](a26_0x2546('0xde'),_0x1e587a);if(!_0x4ca5c3||_0x4ca5c3==null||_0x4ca5c3==''){_0x4ca5c3=a26_0x2546('0xdf');}_0x1e587a['rssfeeds'][a26_0x2546('0xe0')][0x0][a26_0x2546('0xe1')][0x0]['_']=_0x4ca5c3;const _0x15ec19=new _0x5c40f5[(a26_0x2546('0xe2'))]();const _0x20878e=_0x15ec19[a26_0x2546('0xe3')](_0x1e587a);console['log'](a26_0x2546('0xe4'),_0x20878e);fsExtra[a26_0x2546('0x45')](_0x6827b2,_0x20878e);});this[a26_0x2546('0xd2')]('RefreshRSS()');this[a26_0x2546('0xcb')]('Settings.SetSettingValue',{'setting':a26_0x2546('0xe5'),'value':_0x400dec},function(_0xa24cf5){console[a26_0x2546('0x42')](a26_0x2546('0xe6'));console[a26_0x2546('0x42')](_0xa24cf5);}['bind'](this));}}[a26_0x2546('0xd7')](_0x49bec8){this[a26_0x2546('0xcb')]('Settings.SetSettingValue',{'setting':a26_0x2546('0xe7'),'value':_0x49bec8},function(_0x3a2f13){console['log'](a26_0x2546('0xe8'));console['log'](_0x3a2f13);}[a26_0x2546('0x3c')](this));}[a26_0x2546('0xd2')](_0x2b4b5c){exec(a26_0x2546('0xe9')+_0x2b4b5c+'\x22',function(_0x3bf6f3){console[a26_0x2546('0x42')](_0x3bf6f3);});}['jsonrpcClient'](_0x39f8bd,_0xf00c22,_0xa00b20){const _0x49a548={'jsonrpc':a26_0x2546('0xea'),'method':_0x39f8bd,'params':_0xf00c22,'id':0x1};const _0x57bda8={'user':this[a26_0x2546('0x21')],'pass':this[a26_0x2546('0x35')]};console['log'](a26_0x2546('0xeb'),_0x49a548);console['log'](a26_0x2546('0xec'),_0x57bda8);this['httpClientService'][a26_0x2546('0x41')](this['kodiHost']+a26_0x2546('0xed'),_0x49a548,![],_0x57bda8)[a26_0x2546('0x5')](function(_0x1f8180){_0xa00b20(_0x1f8180);})[a26_0x2546('0x44')](function(_0x414593){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;