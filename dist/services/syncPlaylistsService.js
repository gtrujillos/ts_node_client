var a25_0x68dc=['kodiHost','checkFolders','loadMediaList','getStatus','bind','registerClient','checkSchedule','checkDependencies','getItems','stringify','playerId','deviceUuid','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','catch','writeFileSync','getCurrentlyPlayingVideo','label','reportStatus','reportStatus\x20playingItem:\x20','httpClientService','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','playListServiceURL','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','failDownloadFiles','downloadFiles','push','Total\x20to\x20download:\x20','length','download','reloadMediaList','forceReload','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','path','media_type','lastIndexOf','split','slice','join','youtube_single','.mp4','checkVideo','copySync','Downloading:\x20','downloader','m3uFileUpdate','refreshPlayer','media','@type','mediainfo\x20check:','includes','downloading:\x20','start','Error:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','get','\x20Progress:\x20unknown\x09','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(',')\x20vs\x20New(','createWriteStream','pipe','data','finish','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','\x20STATUS:\x20','abort','downloadHTTPFileCallback','image','duration','createImageVideo','video','Error\x20downloading\x20file','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','yuv420p','scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--no-check-certificate','Download\x20started','filename:\x20','_filename','size:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','finishProcess','Finishing','this.playListFile:\x20','emptyDir','Refreshing..','Playlist\x20incomplete,\x20retry.','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','DateUtils','Parse','start_date','substring','/home/osmc/luloclient/media/files/','trim','kodiCommandClient','PlayMedia(//home/osmc/luloclient/media/files/lulo_playlist.m3u)','ActivateWindow(fullscreenvideo)','reboot','sudo\x20/sbin/reboot\x20-f','rss','header_active','setRss','turnOffTV','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','err:\x20%j','result:\x20%j','none','rssfeeds','set','Builder','buildObject','xml:\x20%j','RefreshRSS()','jsonrpcClient','Settings.SetSettingValue','setRss:','enableClock','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','jsonrpcClient\x20options','SyncPlaylistsService','__awaiter','done','value','then','apply','next','defineProperty','../infrastructure/HttpClientService','./playerService','../infrastructure/utils/dateUtils','url','fs-extra','request','request-progress','child_process','spawn','is-image','uuid/v4','config.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','tempFolder','filesFolder','playListFile','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','newPlayList','http://localhost','kodiUser','kodiPassword','.lulo123.','HttpClientService','playerService','PlayerService','config','parse','readFileSync','context','baseURL','WEB_SERVICE_URL','deploy/','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi'];(function(_0x57ca21,_0x592dc9){var _0x233b22=function(_0x4323e1){while(--_0x4323e1){_0x57ca21['push'](_0x57ca21['shift']());}};_0x233b22(++_0x592dc9);}(a25_0x68dc,0xb7));var a25_0x1996=function(_0x23475c,_0x402593){_0x23475c=_0x23475c-0x0;var _0x27374f=a25_0x68dc[_0x23475c];return _0x27374f;};'use strict';var __awaiter=this&&this[a25_0x1996('0x0')]||function(_0x414eaa,_0x33db75,_0x1fed5f,_0x1c5596){function _0x527164(_0x74e96b){return _0x74e96b instanceof _0x1fed5f?_0x74e96b:new _0x1fed5f(function(_0x1d3f51){_0x1d3f51(_0x74e96b);});}return new(_0x1fed5f||(_0x1fed5f=Promise))(function(_0x41bfc6,_0x9207cc){function _0x47a282(_0x4a3995){try{_0x51eeb9(_0x1c5596['next'](_0x4a3995));}catch(_0x4e83f1){_0x9207cc(_0x4e83f1);}}function _0x4bea2f(_0x463de4){try{_0x51eeb9(_0x1c5596['throw'](_0x463de4));}catch(_0x37c229){_0x9207cc(_0x37c229);}}function _0x51eeb9(_0x10a588){_0x10a588[a25_0x1996('0x1')]?_0x41bfc6(_0x10a588[a25_0x1996('0x2')]):_0x527164(_0x10a588[a25_0x1996('0x2')])[a25_0x1996('0x3')](_0x47a282,_0x4bea2f);}_0x51eeb9((_0x1c5596=_0x1c5596[a25_0x1996('0x4')](_0x414eaa,_0x33db75||[]))[a25_0x1996('0x5')]());});};Object[a25_0x1996('0x6')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a25_0x1996('0x7'));const playerService_1=require(a25_0x1996('0x8'));const dateUtils_1=require(a25_0x1996('0x9'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a25_0x1996('0xa'));const http=require('http');const fsExtra=require(a25_0x1996('0xb'));const request=require(a25_0x1996('0xc'));const progress=require(a25_0x1996('0xd'));const spawn=require(a25_0x1996('0xe'))[a25_0x1996('0xf')];const exec=require(a25_0x1996('0xe'))['exec'];const isImage=require(a25_0x1996('0x10'));const format=require('string-template');const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a25_0x1996('0x11'));const configFile=a25_0x1996('0x12');const contextFile='package.json';const urlExists=require(a25_0x1996('0x13'));const kodi_rpc=require(a25_0x1996('0x14'));const Downloader=require(a25_0x1996('0x15'));class SyncPlaylistsService{constructor(){this[a25_0x1996('0x16')]='media/';this[a25_0x1996('0x17')]=this['mediaFolder']+'temp/';this[a25_0x1996('0x18')]=this[a25_0x1996('0x16')]+'files/';this[a25_0x1996('0x19')]=this[a25_0x1996('0x16')]+'playlist.txt';this[a25_0x1996('0x1a')]=this[a25_0x1996('0x18')]+a25_0x1996('0x1b');this[a25_0x1996('0x1c')]=0x0;this[a25_0x1996('0x1d')]=![];this['downloadFiles']=[];this['failDownloadFiles']=[];this[a25_0x1996('0x1e')]={};this['kodiHost']=a25_0x1996('0x1f');this[a25_0x1996('0x20')]='lulo';this[a25_0x1996('0x21')]=a25_0x1996('0x22');this['forceReload']=![];this['httpClientService']=new HttpClientService_1[(a25_0x1996('0x23'))]();this[a25_0x1996('0x24')]=new playerService_1[(a25_0x1996('0x25'))]();}['init'](){this[a25_0x1996('0x26')]=JSON[a25_0x1996('0x27')](fs[a25_0x1996('0x28')](configFile));this[a25_0x1996('0x29')]=JSON[a25_0x1996('0x27')](fs[a25_0x1996('0x28')](contextFile));this['playerId']=this[a25_0x1996('0x26')]['playerId'];this[a25_0x1996('0x2a')]=process['env'][a25_0x1996('0x2b')]+a25_0x1996('0x2c');this['playListServiceURL']=this[a25_0x1996('0x2a')]+a25_0x1996('0x2d');this[a25_0x1996('0x2e')]=this[a25_0x1996('0x2a')]+a25_0x1996('0x2f');this[a25_0x1996('0x30')]=new kodi_rpc({'url':this[a25_0x1996('0x31')],'user':this[a25_0x1996('0x20')],'password':this[a25_0x1996('0x21')]});this['checkDependencies']();this['registerClient']();this[a25_0x1996('0x32')]();this[a25_0x1996('0x33')]();this['updateSettings']();setInterval(function(){this[a25_0x1996('0x34')]();}[a25_0x1996('0x35')](this),0x2710);setInterval(function(){this[a25_0x1996('0x36')]();}[a25_0x1996('0x35')](this),0x493e0);setInterval(function(){this[a25_0x1996('0x37')]();}[a25_0x1996('0x35')](this),0x2710);}[a25_0x1996('0x38')](){}[a25_0x1996('0x36')](){this['kodi']['playlist'][a25_0x1996('0x39')](0x1)[a25_0x1996('0x3')](function(_0x2dbd57){const _0x11e146=JSON[a25_0x1996('0x3a')](_0x2dbd57);const _0x5c860c={'player_id':this[a25_0x1996('0x3b')],'device_uuid':this[a25_0x1996('0x26')][a25_0x1996('0x3c')],'network_info':JSON[a25_0x1996('0x3a')](os[a25_0x1996('0x3d')]()),'firmware_info':JSON['stringify'](this['context']['version']),'playlist':_0x11e146,'playing_item':'','status':0x0};this['httpClientService'][a25_0x1996('0x3e')](a25_0x1996('0x3f'),_0x5c860c,![])[a25_0x1996('0x3')](function(_0x3ef928){console[a25_0x1996('0x40')]('register\x20response:\x20'+Date());})[a25_0x1996('0x41')](function(_0x369887){});console[a25_0x1996('0x40')](_0x5c860c);}[a25_0x1996('0x35')](this));const _0x302931=this[a25_0x1996('0x26')][a25_0x1996('0x3c')];if(!_0x302931||_0x302931==''){this[a25_0x1996('0x26')][a25_0x1996('0x3c')]=uuidv4();this[a25_0x1996('0x26')]={'deviceUuid':this['config'][a25_0x1996('0x3c')],'playerId':this[a25_0x1996('0x26')][a25_0x1996('0x3b')]};fs[a25_0x1996('0x42')](configFile,JSON[a25_0x1996('0x3a')](this['config']));}}['getStatus'](){console[a25_0x1996('0x40')]('getStatus');this['kodi']['player'][a25_0x1996('0x43')]()[a25_0x1996('0x3')](function(_0x3ed16e){const _0x48acc3=_0x3ed16e['item'][a25_0x1996('0x44')];this[a25_0x1996('0x45')](_0x48acc3);}[a25_0x1996('0x35')](this))[a25_0x1996('0x41')](function(_0x41cab6){console['log'](_0x41cab6);this[a25_0x1996('0x45')](JSON[a25_0x1996('0x3a')](_0x41cab6));}[a25_0x1996('0x35')](this));}[a25_0x1996('0x45')](_0x5dcacc){console[a25_0x1996('0x40')](a25_0x1996('0x46')+_0x5dcacc);const _0x26ba9c={'player_id':this[a25_0x1996('0x3b')],'device_uuid':this[a25_0x1996('0x26')]['deviceUuid'],'status':_0x5dcacc!=''&&_0x5dcacc!=null?0x1:0x0,'playing_item':_0x5dcacc};this[a25_0x1996('0x47')][a25_0x1996('0x3e')](a25_0x1996('0x48'),_0x26ba9c,![])[a25_0x1996('0x3')](function(_0xa61af6){console[a25_0x1996('0x40')](a25_0x1996('0x49'));})[a25_0x1996('0x41')](function(_0x198ce7){});}[a25_0x1996('0x32')](){fsExtra[a25_0x1996('0x4a')](this['mediaFolder'],_0x40bf33=>{});fsExtra[a25_0x1996('0x4a')](this[a25_0x1996('0x17')],_0x3e59a0=>{});fsExtra['ensureDir'](this[a25_0x1996('0x18')],_0x805edf=>{});}[a25_0x1996('0x33')](){const _0x997ba7=format(this[a25_0x1996('0x4b')],this[a25_0x1996('0x3b')]);console[a25_0x1996('0x40')](_0x997ba7);request({'url':_0x997ba7,'json':!![]},function(_0x47439c,_0x3a5f3b,_0x5a70dd){console[a25_0x1996('0x40')](a25_0x1996('0x4c'));this['newPlayList']=_0x5a70dd;this[a25_0x1996('0x1d')]=this[a25_0x1996('0x4d')]();fsExtra[a25_0x1996('0x4e')](this[a25_0x1996('0x17')]);this['downloadFiles']=[];this[a25_0x1996('0x4f')]=[];this['currentFile']=0x0;for(const _0x499d48 in _0x5a70dd){this[a25_0x1996('0x50')][a25_0x1996('0x51')](_0x5a70dd[_0x499d48]);}console[a25_0x1996('0x40')](a25_0x1996('0x52')+this[a25_0x1996('0x50')][a25_0x1996('0x53')]);if(this[a25_0x1996('0x50')][a25_0x1996('0x53')]>0x0){this[a25_0x1996('0x54')]();}}['bind'](this));}[a25_0x1996('0x55')](){this[a25_0x1996('0x56')]=!![];if(fsExtra[a25_0x1996('0x57')](this[a25_0x1996('0x17')])){fsExtra[a25_0x1996('0x4e')](this[a25_0x1996('0x17')]);}if(fsExtra[a25_0x1996('0x57')](this[a25_0x1996('0x18')])){fsExtra[a25_0x1996('0x4e')](this['filesFolder']);}if(!fsExtra[a25_0x1996('0x57')](this[a25_0x1996('0x19')])){fsExtra[a25_0x1996('0x58')](this['playListFile']);}if(!fsExtra[a25_0x1996('0x57')](this['m3uFile'])){fsExtra[a25_0x1996('0x58')](this['m3uFile']);}this[a25_0x1996('0x33')]();}['hasPlayListChanged'](){const _0x1a9d36=JSON[a25_0x1996('0x3a')](this[a25_0x1996('0x1e')]);try{if(!fsExtra[a25_0x1996('0x57')](this['playListFile'])){return!![];}else{const _0xaa7956=fsExtra[a25_0x1996('0x28')](this[a25_0x1996('0x19')])[a25_0x1996('0x59')]();if(_0xaa7956!=_0x1a9d36){return!![];}}}catch(_0x412f30){console[a25_0x1996('0x40')](_0x412f30);}return![];}[a25_0x1996('0x54')](){console[a25_0x1996('0x40')](a25_0x1996('0x5a')+this['currentFile']+a25_0x1996('0x5b')+this[a25_0x1996('0x50')][a25_0x1996('0x53')]);if(this[a25_0x1996('0x1c')]>=this[a25_0x1996('0x50')]['length']){this['finishProcess']();return;}const _0x5d89b4=String(this[a25_0x1996('0x50')][this[a25_0x1996('0x1c')]][a25_0x1996('0x5c')]);const _0x1f2f98=this['downloadFiles'][this[a25_0x1996('0x1c')]][a25_0x1996('0x5d')];let _0x43ce36=_0x5d89b4['substring'](_0x5d89b4[a25_0x1996('0x5e')]('/')+0x1);const _0x5e9783=_0x43ce36[a25_0x1996('0x5f')]('.')[a25_0x1996('0x60')](0x0,-0x1)[a25_0x1996('0x61')]('.');let _0x1f065c=this[a25_0x1996('0x2a')]+_0x5d89b4;const _0x5c415d=_0x1f065c[a25_0x1996('0x5f')]('.')[a25_0x1996('0x60')](0x0,-0x1)[a25_0x1996('0x61')]('.');if(_0x1f2f98==a25_0x1996('0x62')){_0x43ce36=_0x43ce36+'.mp4';}else if(_0x1f2f98=='image'){_0x43ce36=_0x5e9783+a25_0x1996('0x63');_0x1f065c=_0x5c415d+'.mp4';}console['log']('**********+');console[a25_0x1996('0x40')](_0x5d89b4);console[a25_0x1996('0x40')](_0x1f2f98);console[a25_0x1996('0x40')](_0x43ce36);console[a25_0x1996('0x40')](_0x1f065c);console['log'](_0x5e9783);console['log'](_0x5c415d);console[a25_0x1996('0x40')]('**********+');if(fsExtra['existsSync'](this['tempFolder']+_0x43ce36)){this[a25_0x1996('0x64')](this['tempFolder']+_0x43ce36)['then'](function(_0x5c3561){if(_0x5c3561){this['currentFile']++;}else{this['playlistChanged']=!![];}this['download']();}[a25_0x1996('0x35')](this));}else if(fsExtra[a25_0x1996('0x57')](this[a25_0x1996('0x18')]+_0x43ce36)){this[a25_0x1996('0x64')](this[a25_0x1996('0x18')]+_0x43ce36)['then'](function(_0x4f7760){if(_0x4f7760){fsExtra[a25_0x1996('0x65')](this[a25_0x1996('0x18')]+_0x43ce36,this[a25_0x1996('0x17')]+_0x43ce36);this[a25_0x1996('0x1c')]++;}else{this['playlistChanged']=!![];}this[a25_0x1996('0x54')]();}[a25_0x1996('0x35')](this));}else{console[a25_0x1996('0x40')](a25_0x1996('0x66')+_0x1f065c);this[a25_0x1996('0x1d')]=!![];if(_0x1f2f98==a25_0x1996('0x62')){this['downloadYouTube'](_0x5d89b4);}else{this[a25_0x1996('0x67')](_0x1f065c,_0x43ce36,_0x1f2f98);}}}[a25_0x1996('0x37')](){const _0x21d285=this['m3uFileUpdate']();console[a25_0x1996('0x40')](a25_0x1996('0x68'),_0x21d285);if(_0x21d285){setTimeout(function(){this[a25_0x1996('0x69')]();}[a25_0x1996('0x35')](this),0x3e8);}}[a25_0x1996('0x64')](_0x4c1c6a){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x1996('0x40')]('videoFile:\x20'+_0x4c1c6a);const _0x48b198=yield mediainfo(_0x4c1c6a)['catch'](_0x42f3bd=>{console[a25_0x1996('0x40')](_0x42f3bd);fsExtra[a25_0x1996('0x58')](_0x4c1c6a);return![];});const _0x34bfde=_0x48b198[a25_0x1996('0x6a')]['track'][a25_0x1996('0x53')]>0x1&&_0x48b198[a25_0x1996('0x6a')]['track'][0x1][a25_0x1996('0x6b')]=='Video';if(!_0x34bfde){fsExtra['removeSync'](_0x4c1c6a);}console[a25_0x1996('0x40')](a25_0x1996('0x6c')+_0x34bfde);return _0x34bfde;});}[a25_0x1996('0x67')](_0x2a0641,_0x3d346d,_0x397917){const _0x453bf9=new Downloader();console['log'](_0x2a0641);console['log'](_0x3d346d);console[a25_0x1996('0x40')](_0x397917);const _0x1fc56a=_0x453bf9[a25_0x1996('0x54')](_0x2a0641,this[a25_0x1996('0x17')]+_0x3d346d);urlExists(_0x2a0641,function(_0x31dd12,_0x2dcfe4){if(_0x2dcfe4){if(this[a25_0x1996('0x4f')][a25_0x1996('0x6d')](this[a25_0x1996('0x1c')])){const _0x4194b6=this[a25_0x1996('0x4f')]['indexOf'](this[a25_0x1996('0x1c')]);if(_0x4194b6>-0x1){this[a25_0x1996('0x4f')]['splice'](_0x4194b6,0x1);}}console[a25_0x1996('0x40')](a25_0x1996('0x6e')+_0x2a0641);_0x1fc56a[a25_0x1996('0x6f')]();}else{if(!this[a25_0x1996('0x4f')][a25_0x1996('0x6d')](this[a25_0x1996('0x1c')])){this[a25_0x1996('0x4f')][a25_0x1996('0x51')](this['currentFile']);}console[a25_0x1996('0x40')](a25_0x1996('0x70')+_0x2a0641);this[a25_0x1996('0x1c')]++;this[a25_0x1996('0x54')]();}}[a25_0x1996('0x35')](this));_0x1fc56a['on']('start',function(_0x1fc56a){console[a25_0x1996('0x40')]('start:\x20'+_0x2a0641);});_0x1fc56a['on'](a25_0x1996('0x71'),function(_0x1fc56a){console[a25_0x1996('0x40')](a25_0x1996('0x72'));this[a25_0x1996('0x54')]();}[a25_0x1996('0x35')](this));_0x1fc56a['on'](a25_0x1996('0x73'),function(_0x1fc56a){console[a25_0x1996('0x40')](a25_0x1996('0x73'));console[a25_0x1996('0x40')](a25_0x1996('0x74')+_0x3d346d);console[a25_0x1996('0x40')](a25_0x1996('0x75')+_0x397917);this[a25_0x1996('0x64')](this['tempFolder']+_0x3d346d)[a25_0x1996('0x3')](function(_0x2e6de4){if(_0x2e6de4){this[a25_0x1996('0x1c')]++;}this[a25_0x1996('0x54')]();}[a25_0x1996('0x35')](this));}[a25_0x1996('0x35')](this));_0x1fc56a['on'](a25_0x1996('0x76'),function(_0x1fc56a){console[a25_0x1996('0x40')](a25_0x1996('0x76'));});_0x1fc56a['on'](a25_0x1996('0x77'),function(_0x1fc56a){console['log']('destroyed');});_0x1fc56a['on'](a25_0x1996('0x78'),function(_0x1fc56a){console[a25_0x1996('0x40')](a25_0x1996('0x78'));});}[a25_0x1996('0x79')](_0x17d6ef,_0x37403c,_0xe2ff35,_0x28ba3a){console['log']('downloadHTTPFile');console['log'](_0x17d6ef);const _0x5246a6=!![];let _0x2bcf87=0x0;const _0x4f221c='';console[a25_0x1996('0x40')](a25_0x1996('0x7a')+_0x17d6ef+a25_0x1996('0x7b')+_0x37403c);if(_0x2bcf87){if(_0x2bcf87>0x5){_0x28ba3a(a25_0x1996('0x7c'),_0x17d6ef,_0xe2ff35,null);return;}}else{_0x2bcf87=0x0;}const _0x3ce2e3=this[a25_0x1996('0x17')]+_0x37403c;let _0x56bc3c;if(_0x28ba3a===undefined){console[a25_0x1996('0x40')](a25_0x1996('0x7d')+_0x17d6ef+a25_0x1996('0x7b')+_0x3ce2e3);_0x28ba3a=function(_0x29d6d1,_0x1feeb6){console['log'](a25_0x1996('0x7e'),_0x29d6d1,_0x1feeb6);};}http[a25_0x1996('0x7f')][a25_0x1996('0x80')]=0x64;const _0x565e6f={'host':url[a25_0x1996('0x27')](_0x17d6ef)[a25_0x1996('0x81')],'port':0x50,'path':url['parse'](_0x17d6ef)[a25_0x1996('0x82')],'agent':![]};const _0x396ed7=http[a25_0x1996('0x83')](_0x565e6f,function(_0x3df96c){let _0x102131=0x0;let _0x4359d9=0x0;function _0x4e390a(){if(_0x102131===undefined){console[a25_0x1996('0x40')](_0x37403c+a25_0x1996('0x84')+_0x4359d9+'/'+'?');}const _0x4870ae=_0x4359d9/_0x102131*0x64;console[a25_0x1996('0x40')](_0x37403c+'\x20Progress:\x20'+_0x4870ae+'%\x09'+_0x4359d9+'/'+_0x102131);}console['log'](_0x37403c+'\x20'+_0x3df96c[a25_0x1996('0x85')]);switch(_0x3df96c[a25_0x1996('0x85')]){case 0xc8:_0x102131=_0x3df96c[a25_0x1996('0x86')][a25_0x1996('0x87')]||_0x4f221c;fs[a25_0x1996('0x88')](_0x3ce2e3,function(_0x280fb5,_0x4d9306){if(!_0x280fb5){console[a25_0x1996('0x40')](a25_0x1996('0x89')+_0x3ce2e3);if(_0x4d9306[a25_0x1996('0x8a')]==_0x102131){console[a25_0x1996('0x40')](a25_0x1996('0x8b')+_0x102131+')');console[a25_0x1996('0x40')]('Redownloading');}else{console[a25_0x1996('0x40')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x4d9306[a25_0x1996('0x8a')]+a25_0x1996('0x8c')+_0x102131+')');}}_0x56bc3c=fs[a25_0x1996('0x8d')](_0x3ce2e3);_0x3df96c[a25_0x1996('0x8e')](_0x56bc3c);_0x3df96c['on'](a25_0x1996('0x8f'),function(_0x3a4f42){_0x4359d9+=_0x3a4f42[a25_0x1996('0x53')];_0x4e390a();});_0x396ed7['on'](a25_0x1996('0x71'),function(_0x280fb5){console[a25_0x1996('0x40')]('err:\x20');console[a25_0x1996('0x40')](_0x280fb5);});_0x56bc3c['on'](a25_0x1996('0x90'),function(){console[a25_0x1996('0x40')](a25_0x1996('0x91')+_0x17d6ef+a25_0x1996('0x7b')+_0x37403c);_0x28ba3a(null,_0x37403c,_0xe2ff35,_0x37403c);}[a25_0x1996('0x35')](this));});break;case 0x12e:const _0x114548=_0x3df96c['headers'][a25_0x1996('0x92')];console[a25_0x1996('0x40')](a25_0x1996('0x93')+_0x17d6ef+'\x20to\x20'+_0x114548);if(_0x2bcf87<0x5){this[a25_0x1996('0x79')](_0x114548,_0x37403c,_0x28ba3a,_0x2bcf87++);}else{console['error'](a25_0x1996('0x94')+_0x17d6ef+'.');_0x28ba3a(a25_0x1996('0x95'),null,null,null);}return;case 0x194:console[a25_0x1996('0x40')](a25_0x1996('0x96')+_0x17d6ef);default:console[a25_0x1996('0x40')]('Problem\x20downloading\x20'+_0x17d6ef+a25_0x1996('0x97')+_0x3df96c[a25_0x1996('0x85')]);_0x396ed7[a25_0x1996('0x98')]();_0x28ba3a(_0x3df96c[a25_0x1996('0x85')],null,null,null);return;}})['on']('error',function(_0x1d1079){console['log']('Error\x20Downloading:\x20'+_0x17d6ef+'\x20'+_0x1d1079['message']);_0x28ba3a(_0x1d1079,null,null,null);});}[a25_0x1996('0x99')](_0x5900af,_0x5dd750,_0x1d99e6,_0x20104d){console[a25_0x1996('0x40')]('downloadHTTPFileCallback');console['log'](_0x5900af);console[a25_0x1996('0x40')](_0x5dd750);console[a25_0x1996('0x40')](_0x1d99e6);console['log'](_0x20104d);if(_0x1d99e6==a25_0x1996('0x9a')){const _0x38c62e=this[a25_0x1996('0x50')][this['currentFile']]['duration']!=null?this[a25_0x1996('0x50')][this[a25_0x1996('0x1c')]][a25_0x1996('0x9b')]:0x1e;this[a25_0x1996('0x9c')](_0x20104d,_0x38c62e);}else if(_0x1d99e6==a25_0x1996('0x9d')){if(_0x5900af==null&&_0x5dd750!=''){this[a25_0x1996('0x1c')]++;}this[a25_0x1996('0x54')]();}console[a25_0x1996('0x40')](this[a25_0x1996('0x1c')]);}['downloadRequestFile'](_0x28356c,_0x1db737,_0x3366cb){progress(request(_0x28356c),{})['on']('progress',function(_0x481e37){console[a25_0x1996('0x40')](_0x481e37);})['on'](a25_0x1996('0x71'),function(_0x23c77c){console[a25_0x1996('0x40')](a25_0x1996('0x9e'));this[a25_0x1996('0x54')]();})['on'](a25_0x1996('0x73'),function(){console['log'](a25_0x1996('0x74')+_0x1db737);console[a25_0x1996('0x40')](a25_0x1996('0x75')+_0x3366cb);if(_0x3366cb=='image'){const _0x40e434=this[a25_0x1996('0x50')][this['currentFile']][a25_0x1996('0x9b')]!=null?this[a25_0x1996('0x50')][this[a25_0x1996('0x1c')]]['duration']:0x1e;this[a25_0x1996('0x9c')](_0x1db737,_0x40e434);}else if(_0x3366cb==a25_0x1996('0x9d')){this[a25_0x1996('0x1c')]++;this[a25_0x1996('0x54')]();}}[a25_0x1996('0x35')](this))[a25_0x1996('0x8e')](fs[a25_0x1996('0x8d')](this[a25_0x1996('0x17')]+_0x1db737));}[a25_0x1996('0x9c')](_0x51bc13,_0x5c0504=0x1e){const _0x3bd8fa=this[a25_0x1996('0x17')]+_0x51bc13;console[a25_0x1996('0x40')](_0x3bd8fa);console['log'](_0x51bc13);const _0x383895=_0x51bc13[a25_0x1996('0x5f')]('.')[a25_0x1996('0x60')](0x0,-0x1)[a25_0x1996('0x61')]('.');const _0x211d3a='ffmpeg';const _0x2a75c8=['-y','-r',a25_0x1996('0x9f'),a25_0x1996('0xa0'),'1',a25_0x1996('0xa1'),'glob','-i',_0x3bd8fa,'-t',String(_0x5c0504),a25_0x1996('0xa2'),a25_0x1996('0xa3'),a25_0x1996('0xa4'),a25_0x1996('0xa5'),'-r','25','-vf',a25_0x1996('0xa6'),this['tempFolder']+_0x383895+a25_0x1996('0x63')];const _0x5bcd58=spawn(_0x211d3a,_0x2a75c8);_0x5bcd58[a25_0x1996('0xa7')]['on']('data',function(_0x3cd5f3){console[a25_0x1996('0x40')](a25_0x1996('0xa8')+_0x3bd8fa);});_0x5bcd58[a25_0x1996('0xa9')]['on'](a25_0x1996('0x8f'),function(_0x21c285){console[a25_0x1996('0x40')](a25_0x1996('0xaa')+_0x21c285);}['bind'](this));_0x5bcd58['on'](a25_0x1996('0xab'),function(){console[a25_0x1996('0x40')](a25_0x1996('0xac'));this[a25_0x1996('0x1c')]++;this[a25_0x1996('0x54')]();}['bind'](this));}['downloadYouTube'](_0x397392){const _0x1a28a5=this[a25_0x1996('0x17')]+'/'+_0x397392+'.mp4';const _0x2e7fb0=a25_0x1996('0xad')+_0x397392;console[a25_0x1996('0x40')](a25_0x1996('0xae')+_0x2e7fb0);console[a25_0x1996('0x40')](a25_0x1996('0xaf')+_0x1a28a5);const _0xf1c586=youtubedl(_0x2e7fb0,['--format=18',a25_0x1996('0xb0')],{'cwd':__dirname});_0xf1c586['on']('info',function(_0x22b01e){console[a25_0x1996('0x40')](a25_0x1996('0xb1'));console[a25_0x1996('0x40')](a25_0x1996('0xb2')+_0x22b01e[a25_0x1996('0xb3')]);console[a25_0x1996('0x40')](a25_0x1996('0xb4')+_0x22b01e['size']);});_0xf1c586['on'](a25_0x1996('0xb5'),function complete(_0x1208bf){'use strict';console[a25_0x1996('0x40')](a25_0x1996('0xb2')+_0x1208bf[a25_0x1996('0xb3')]+a25_0x1996('0xb6'));});_0xf1c586['on']('end',function(){console[a25_0x1996('0x40')](a25_0x1996('0xb7'));this['checkVideo'](_0x1a28a5)[a25_0x1996('0x3')](function(_0x5a659a){if(_0x5a659a){this['currentFile']++;}this[a25_0x1996('0x54')]();}['bind'](this));}[a25_0x1996('0x35')](this));_0xf1c586[a25_0x1996('0x8e')](fs[a25_0x1996('0x8d')](_0x1a28a5));}[a25_0x1996('0xb8')](){console['log'](a25_0x1996('0xb9'));if(this[a25_0x1996('0x1d')]){if(this[a25_0x1996('0x4f')][a25_0x1996('0x53')]==0x0){console[a25_0x1996('0x40')](a25_0x1996('0xba')+this[a25_0x1996('0x19')]);fs[a25_0x1996('0x42')](this[a25_0x1996('0x19')],JSON[a25_0x1996('0x3a')](this['newPlayList']));const _0x599031=this[a25_0x1996('0x68')]();fsExtra[a25_0x1996('0xbb')](this[a25_0x1996('0x18')])[a25_0x1996('0x3')](()=>{fsExtra['copy'](this[a25_0x1996('0x17')],this[a25_0x1996('0x18')])[a25_0x1996('0x3')](()=>{fsExtra[a25_0x1996('0xbb')](this[a25_0x1996('0x17')])[a25_0x1996('0x3')](()=>{console['log'](a25_0x1996('0xbc'));this[a25_0x1996('0x69')]();})[a25_0x1996('0x41')](_0x5434e2=>console['error'](_0x5434e2));})[a25_0x1996('0x41')](_0x1c55e6=>console[a25_0x1996('0x71')](_0x1c55e6));})[a25_0x1996('0x41')](_0x552d40=>console[a25_0x1996('0x71')](_0x552d40));}else{console[a25_0x1996('0x40')](a25_0x1996('0xbd'));this[a25_0x1996('0x1c')]=0x0;setTimeout(function(){this[a25_0x1996('0x54')]();}[a25_0x1996('0x35')](this),0x1388);}}else{console[a25_0x1996('0x40')]('No\x20playlist\x20changes.');}}[a25_0x1996('0x68')](){let _0x592048=a25_0x1996('0xbe')+'\x0d\x0a'+a25_0x1996('0xbf')+'\x0d\x0a';const _0x3ed6c7=new Date();for(const _0x362d78 in this[a25_0x1996('0x50')]){const _0x3fb646=this[a25_0x1996('0x50')][_0x362d78][a25_0x1996('0x5c')];const _0x17dad7=this[a25_0x1996('0x50')][_0x362d78][a25_0x1996('0x5d')];const _0x3416ca=dateUtils_1[a25_0x1996('0xc0')][a25_0x1996('0xc1')](this[a25_0x1996('0x50')][_0x362d78][a25_0x1996('0xc2')]);const _0x3f9001=dateUtils_1[a25_0x1996('0xc0')][a25_0x1996('0xc1')](this[a25_0x1996('0x50')][_0x362d78]['end_date']);const _0x5e5f8b=_0x3fb646[a25_0x1996('0xc3')](_0x3fb646[a25_0x1996('0x5e')]('/')+0x1);let _0x53348b=_0x5e5f8b[a25_0x1996('0x5f')]('.')[a25_0x1996('0x60')](0x0,-0x1)[a25_0x1996('0x61')]('.');if(_0x17dad7==a25_0x1996('0x62')){_0x53348b=_0x3fb646;}if((_0x3416ca==null||_0x3416ca<_0x3ed6c7)&&(_0x3f9001==null||_0x3f9001>_0x3ed6c7)){_0x592048+=a25_0x1996('0xc4')+_0x53348b+a25_0x1996('0x63')+'\x0d\x0a';}}let _0x5112ec='';if(fsExtra[a25_0x1996('0x57')](this[a25_0x1996('0x1a')])){_0x5112ec=fsExtra[a25_0x1996('0x28')](this[a25_0x1996('0x1a')]);_0x5112ec=_0x5112ec[a25_0x1996('0x59')]()[a25_0x1996('0xc5')]();}_0x592048=_0x592048[a25_0x1996('0x59')]()['trim']();if(_0x5112ec!=_0x592048){fsExtra[a25_0x1996('0x42')](this[a25_0x1996('0x1a')],_0x592048);return!![];}return![];}[a25_0x1996('0x69')](){console[a25_0x1996('0x40')]('m3uFile',this['m3uFile']);this[a25_0x1996('0xc6')](a25_0x1996('0xc7'));this['kodiCommandClient'](a25_0x1996('0xc8'));}[a25_0x1996('0xc9')](){console[a25_0x1996('0x40')]('Rebooting');exec(a25_0x1996('0xca'),function(_0x3c8f62){console[a25_0x1996('0x40')](_0x3c8f62);});}['updateSettings'](){const _0x109f9c=format(this['playerServiceURL'],this[a25_0x1996('0x3b')]);console[a25_0x1996('0x40')](_0x109f9c);request({'url':_0x109f9c,'json':!![]},function(_0x29f0cb,_0xdb5bc8,_0xeec3da){if(_0xeec3da[a25_0x1996('0x53')]>0x0){const _0x43ad48=_0xeec3da[0x0];const _0x408e53=_0x43ad48[a25_0x1996('0xcb')];const _0x18bb10=_0x43ad48[a25_0x1996('0xcc')]==0x1;this[a25_0x1996('0xcd')](_0x408e53);this['enableClock'](_0x18bb10);this[a25_0x1996('0x36')]();}console[a25_0x1996('0x40')](_0xeec3da);}['bind'](this));}[a25_0x1996('0xce')](){this[a25_0x1996('0xc6')]('CECStandby()');}[a25_0x1996('0xcf')](){this[a25_0x1996('0xc6')](a25_0x1996('0xd0'));}['setRss'](_0x533831){const _0x3ed9a6=_0x533831!=null&&_0x533831!='';const _0x4ceaa8=a25_0x1996('0xd1');if(fsExtra[a25_0x1996('0x57')](_0x4ceaa8)){const _0x3151dc=fsExtra[a25_0x1996('0x28')](_0x4ceaa8);console[a25_0x1996('0x40')](a25_0x1996('0xd2')+_0x3151dc);const _0x29acfb=require(a25_0x1996('0xd3'));const _0x164909=_0x29acfb['parseString'];_0x164909(_0x3151dc,function(_0x58a729,_0x26fe90){console['log'](a25_0x1996('0xd4'),_0x58a729);console[a25_0x1996('0x40')](a25_0x1996('0xd5'),_0x26fe90);if(!_0x533831||_0x533831==null||_0x533831==''){_0x533831=a25_0x1996('0xd6');}_0x26fe90[a25_0x1996('0xd7')][a25_0x1996('0xd8')][0x0]['feed'][0x0]['_']=_0x533831;const _0x396203=new _0x29acfb[(a25_0x1996('0xd9'))]();const _0xe81e3=_0x396203[a25_0x1996('0xda')](_0x26fe90);console['log'](a25_0x1996('0xdb'),_0xe81e3);fsExtra[a25_0x1996('0x42')](_0x4ceaa8,_0xe81e3);});this['kodiCommandClient'](a25_0x1996('0xdc'));this[a25_0x1996('0xdd')](a25_0x1996('0xde'),{'setting':'lookandfeel.enablerssfeeds','value':_0x3ed9a6},function(_0x240949){console[a25_0x1996('0x40')](a25_0x1996('0xdf'));console[a25_0x1996('0x40')](_0x240949);}['bind'](this));}}[a25_0x1996('0xe0')](_0x2958a3){this[a25_0x1996('0xdd')](a25_0x1996('0xde'),{'setting':a25_0x1996('0xe1'),'value':_0x2958a3},function(_0x5c50c6){console[a25_0x1996('0x40')](a25_0x1996('0xe2'));console[a25_0x1996('0x40')](_0x5c50c6);}[a25_0x1996('0x35')](this));}[a25_0x1996('0xc6')](_0x518d36){exec(a25_0x1996('0xe3')+_0x518d36+'\x22',function(_0x43735c){console[a25_0x1996('0x40')](_0x43735c);});}['jsonrpcClient'](_0x28942c,_0x40520b,_0x56cbdc){const _0x418dd4={'jsonrpc':a25_0x1996('0xe4'),'method':_0x28942c,'params':_0x40520b,'id':0x1};const _0x228703={'user':this['kodiUser'],'pass':this[a25_0x1996('0x21')]};console[a25_0x1996('0x40')](a25_0x1996('0xe5'),_0x418dd4);console['log'](a25_0x1996('0xe6'),_0x228703);this['httpClientService'][a25_0x1996('0x3e')](this['kodiHost']+'/jsonrpc',_0x418dd4,![],_0x228703)['then'](function(_0x24598e){_0x56cbdc(_0x24598e);})['catch'](function(_0x523ff5){});}}exports[a25_0x1996('0xe7')]=SyncPlaylistsService;