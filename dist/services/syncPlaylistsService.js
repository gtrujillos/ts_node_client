var a22_0x2cbb=['getItems','stringify','deviceUuid','post','register\x20response:\x20','catch','reportStatus','getCurrentlyPlayingVideo','item','httpClientService','log','ensureDir','playListServiceURL','hasPlayListChanged','emptyDirSync','failDownloadFiles','push','Total:\x20','download','reloadMediaList','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','length','finishProcess','path','media_type','lastIndexOf','split','slice','join','youtube_single','.mp4','**********+','checkVideo','Downloading:\x20','downloadYouTube','downloader','videoFile:\x20','track','media','@type','indexOf','splice','downloading:\x20','Error:\x20','start:\x20','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','pathname','\x20Progress:\x20','statusCode','headers','content-length','stat','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','error','err:\x20','finish','Downloaded\x20','location','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','image','duration','video','downloadRequestFile','progress','mediaType:\x20','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','-vf','stdout','data','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','info','Download\x20started','_filename','size:\x20','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','writeFileSync','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','substring','/home/osmc/luloclient/media/files/','copySync','Rebooting..','shutdown','SyncPlaylistsService','__awaiter','throw','done','value','then','apply','next','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','fs-extra','request','is-image','string-template','uuid/v4','context.json','node-kodi','mt-files-downloader','mediaFolder','tempFolder','filesFolder','playListFile','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','newPlayList','HttpClientService','init','config','parse','readFileSync','context','playerId','baseURL','env','deploy/','kodi','http://localhost','checkDependencies','checkFolders','loadMediaList','bind','registerClient','playlist'];(function(_0x1cbced,_0xe466af){var _0x203171=function(_0xf597e6){while(--_0xf597e6){_0x1cbced['push'](_0x1cbced['shift']());}};_0x203171(++_0xe466af);}(a22_0x2cbb,0x1dc));var a22_0x92b4=function(_0xa71ddf,_0x27b80f){_0xa71ddf=_0xa71ddf-0x0;var _0x207a09=a22_0x2cbb[_0xa71ddf];return _0x207a09;};'use strict';var __awaiter=this&&this[a22_0x92b4('0x0')]||function(_0x586362,_0x255682,_0x227d2f,_0x146754){return new(_0x227d2f||(_0x227d2f=Promise))(function(_0xee3358,_0x178018){function _0x1076df(_0x309566){try{_0x563857(_0x146754['next'](_0x309566));}catch(_0xa420e4){_0x178018(_0xa420e4);}}function _0x3659df(_0x5d7ad1){try{_0x563857(_0x146754[a22_0x92b4('0x1')](_0x5d7ad1));}catch(_0x4a19bc){_0x178018(_0x4a19bc);}}function _0x563857(_0x5f1a52){_0x5f1a52[a22_0x92b4('0x2')]?_0xee3358(_0x5f1a52['value']):new _0x227d2f(function(_0xee3358){_0xee3358(_0x5f1a52[a22_0x92b4('0x3')]);})[a22_0x92b4('0x4')](_0x1076df,_0x3659df);}_0x563857((_0x146754=_0x146754[a22_0x92b4('0x5')](_0x586362,_0x255682||[]))[a22_0x92b4('0x6')]());});};Object[a22_0x92b4('0x7')](exports,a22_0x92b4('0x8'),{'value':!![]});const HttpClientService_1=require(a22_0x92b4('0x9'));const mediainfo=require(a22_0x92b4('0xa'));const fs=require('fs');const url=require(a22_0x92b4('0xb'));const http=require('http');const fsExtra=require(a22_0x92b4('0xc'));const request=require(a22_0x92b4('0xd'));const progress=require('request-progress');const spawn=require('child_process')['spawn'];const isImage=require(a22_0x92b4('0xe'));const format=require(a22_0x92b4('0xf'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a22_0x92b4('0x10'));const configFile='config.json';const contextFile=a22_0x92b4('0x11');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x92b4('0x12'));const Downloader=require(a22_0x92b4('0x13'));class SyncPlaylistsService{constructor(){this[a22_0x92b4('0x14')]='media/';this[a22_0x92b4('0x15')]=this[a22_0x92b4('0x14')]+'temp/';this[a22_0x92b4('0x16')]=this[a22_0x92b4('0x14')]+'files/';this[a22_0x92b4('0x17')]=this[a22_0x92b4('0x14')]+a22_0x92b4('0x18');this[a22_0x92b4('0x19')]=this[a22_0x92b4('0x16')]+a22_0x92b4('0x1a');this[a22_0x92b4('0x1b')]=0x0;this[a22_0x92b4('0x1c')]=![];this[a22_0x92b4('0x1d')]=[];this['failDownloadFiles']=[];this[a22_0x92b4('0x1e')]={};this['httpClientService']=new HttpClientService_1[(a22_0x92b4('0x1f'))]();}[a22_0x92b4('0x20')](){this[a22_0x92b4('0x21')]=JSON[a22_0x92b4('0x22')](fs[a22_0x92b4('0x23')](configFile));this[a22_0x92b4('0x24')]=JSON[a22_0x92b4('0x22')](fs[a22_0x92b4('0x23')](contextFile));this[a22_0x92b4('0x25')]=this[a22_0x92b4('0x21')][a22_0x92b4('0x25')];this[a22_0x92b4('0x26')]=process[a22_0x92b4('0x27')]['WEB_SERVICE_URL']+a22_0x92b4('0x28');this['playListServiceURL']=this[a22_0x92b4('0x26')]+'api/player_playlist.php?player_id={0}';this[a22_0x92b4('0x29')]=new kodi_rpc({'url':a22_0x92b4('0x2a')});this[a22_0x92b4('0x2b')]();this['registerClient']();this[a22_0x92b4('0x2c')]();this[a22_0x92b4('0x2d')]();setInterval(function(){this['reportStatus']();}[a22_0x92b4('0x2e')](this),0x2710);setInterval(function(){this[a22_0x92b4('0x2f')]();}[a22_0x92b4('0x2e')](this),0xea60);}[a22_0x92b4('0x2b')](){}[a22_0x92b4('0x2f')](){this['kodi'][a22_0x92b4('0x30')][a22_0x92b4('0x31')](0x1)['then'](function(_0x39b7ec){const _0x4fa111=JSON[a22_0x92b4('0x32')](_0x39b7ec);const _0x3091ab={'player_id':this['playerId'],'device_uuid':this['config'][a22_0x92b4('0x33')],'network_info':JSON['stringify'](os['networkInterfaces']()),'firmware_info':JSON[a22_0x92b4('0x32')](this['context']),'playlist':_0x4fa111,'playing_item':'','status':0x0};this['httpClientService'][a22_0x92b4('0x34')]('http://restapi.lulo.run/player_devices/register',_0x3091ab,![])[a22_0x92b4('0x4')](function(_0x314b6d){console['log'](a22_0x92b4('0x35')+Date());})[a22_0x92b4('0x36')](function(_0xd35ce7){});console['log'](_0x3091ab);}[a22_0x92b4('0x2e')](this));const _0x2ce78b=this[a22_0x92b4('0x21')][a22_0x92b4('0x33')];if(!_0x2ce78b||_0x2ce78b==''){this[a22_0x92b4('0x21')][a22_0x92b4('0x33')]=uuidv4();this['config']={'deviceUuid':this['config'][a22_0x92b4('0x33')],'playerId':this[a22_0x92b4('0x21')][a22_0x92b4('0x25')]};fs['writeFileSync'](configFile,JSON[a22_0x92b4('0x32')](this[a22_0x92b4('0x21')]));}}['reportStatus'](){console['log'](a22_0x92b4('0x37'));this[a22_0x92b4('0x29')]['player'][a22_0x92b4('0x38')]()[a22_0x92b4('0x4')](function(_0x166f31){const _0x18db2f=_0x166f31[a22_0x92b4('0x39')]['label'];const _0x46bcd0={'player_id':this[a22_0x92b4('0x25')],'device_uuid':this[a22_0x92b4('0x21')][a22_0x92b4('0x33')],'status':_0x18db2f!=''&&_0x18db2f!=null?0x1:0x0,'playing_item':_0x18db2f};this[a22_0x92b4('0x3a')][a22_0x92b4('0x34')]('http://restapi.lulo.run/player_devices/report_status',_0x46bcd0,![])['then'](function(_0x2b1009){console[a22_0x92b4('0x3b')]('reportStatusResponse:\x20'+Date());})[a22_0x92b4('0x36')](function(_0x6a7c1){});}[a22_0x92b4('0x2e')](this));}['checkFolders'](){fsExtra[a22_0x92b4('0x3c')](this[a22_0x92b4('0x14')],_0x58cf08=>{});fsExtra['ensureDir'](this[a22_0x92b4('0x15')],_0x130c04=>{});fsExtra[a22_0x92b4('0x3c')](this[a22_0x92b4('0x16')],_0x42b786=>{});}[a22_0x92b4('0x2d')](){const _0x2a8bda=format(this[a22_0x92b4('0x3d')],this['playerId']);console[a22_0x92b4('0x3b')](_0x2a8bda);request({'url':_0x2a8bda,'json':!![]},function(_0x5ac175,_0x213370,_0x157ca8){this[a22_0x92b4('0x1e')]=_0x157ca8;this[a22_0x92b4('0x1c')]=this[a22_0x92b4('0x3e')]();fsExtra[a22_0x92b4('0x3f')](this['tempFolder']);this[a22_0x92b4('0x1d')]=[];this[a22_0x92b4('0x40')]=[];this[a22_0x92b4('0x1b')]=0x0;for(const _0x1bc1f0 in _0x157ca8){this['downloadFiles'][a22_0x92b4('0x41')](_0x157ca8[_0x1bc1f0]);}console[a22_0x92b4('0x3b')](a22_0x92b4('0x42')+this[a22_0x92b4('0x1d')]['length']);if(this[a22_0x92b4('0x1d')]['length']>0x0){this[a22_0x92b4('0x43')]();}}[a22_0x92b4('0x2e')](this));}[a22_0x92b4('0x44')](){if(fsExtra[a22_0x92b4('0x45')](this[a22_0x92b4('0x17')])){fsExtra[a22_0x92b4('0x46')](this['playListFile']);}this[a22_0x92b4('0x2d')]();}[a22_0x92b4('0x3e')](){const _0x34fb57=JSON['stringify'](this['newPlayList']);try{if(!fs[a22_0x92b4('0x45')](this[a22_0x92b4('0x17')])){return!![];}else{const _0x995d59=fs[a22_0x92b4('0x23')](this[a22_0x92b4('0x17')])[a22_0x92b4('0x47')]();if(_0x995d59!=_0x34fb57){return!![];}}}catch(_0x4ef309){console['error'](_0x4ef309);}return![];}['download'](){console[a22_0x92b4('0x3b')](a22_0x92b4('0x48')+this['currentFile']+a22_0x92b4('0x49')+this[a22_0x92b4('0x1d')][a22_0x92b4('0x4a')]);if(this['currentFile']>=this[a22_0x92b4('0x1d')]['length']){this[a22_0x92b4('0x4b')]();return;}const _0x102d0c=String(this[a22_0x92b4('0x1d')][this[a22_0x92b4('0x1b')]][a22_0x92b4('0x4c')]);const _0x4bb14a=this[a22_0x92b4('0x1d')][this['currentFile']][a22_0x92b4('0x4d')];let _0x520b39=_0x102d0c['substring'](_0x102d0c[a22_0x92b4('0x4e')]('/')+0x1);const _0x3727ef=_0x520b39[a22_0x92b4('0x4f')]('.')[a22_0x92b4('0x50')](0x0,-0x1)[a22_0x92b4('0x51')]('.');let _0x2aba45=this[a22_0x92b4('0x26')]+_0x102d0c;const _0x31506d=_0x2aba45[a22_0x92b4('0x4f')]('.')['slice'](0x0,-0x1)[a22_0x92b4('0x51')]('.');if(_0x4bb14a==a22_0x92b4('0x52')){_0x520b39=_0x520b39+'.mp4';}else if(_0x4bb14a=='image'){_0x520b39=_0x3727ef+'.mp4';_0x2aba45=_0x31506d+a22_0x92b4('0x53');}console[a22_0x92b4('0x3b')](a22_0x92b4('0x54'));console[a22_0x92b4('0x3b')](_0x102d0c);console['log'](_0x4bb14a);console[a22_0x92b4('0x3b')](_0x520b39);console[a22_0x92b4('0x3b')](_0x2aba45);console[a22_0x92b4('0x3b')](_0x3727ef);console[a22_0x92b4('0x3b')](_0x31506d);console[a22_0x92b4('0x3b')]('**********+');if(fsExtra[a22_0x92b4('0x45')](this['tempFolder']+_0x520b39)){this[a22_0x92b4('0x55')](this[a22_0x92b4('0x15')]+_0x520b39)[a22_0x92b4('0x4')](function(_0x3f42a2){if(_0x3f42a2){this['currentFile']++;}else{this[a22_0x92b4('0x1c')]=!![];}this[a22_0x92b4('0x43')]();}[a22_0x92b4('0x2e')](this));}else if(fsExtra[a22_0x92b4('0x45')](this[a22_0x92b4('0x16')]+_0x520b39)){this[a22_0x92b4('0x55')](this[a22_0x92b4('0x16')]+_0x520b39)['then'](function(_0x585269){if(_0x585269){fsExtra['copySync'](this[a22_0x92b4('0x16')]+_0x520b39,this[a22_0x92b4('0x15')]+_0x520b39);this['currentFile']++;}else{this['playlistChanged']=!![];}this['download']();}['bind'](this));}else{console[a22_0x92b4('0x3b')](a22_0x92b4('0x56')+_0x2aba45);this[a22_0x92b4('0x1c')]=!![];if(_0x4bb14a==a22_0x92b4('0x52')){this[a22_0x92b4('0x57')](_0x102d0c);}else{this[a22_0x92b4('0x58')](_0x2aba45,_0x520b39,_0x4bb14a);}}}[a22_0x92b4('0x55')](_0x3a78fd){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a22_0x92b4('0x59')+_0x3a78fd);const _0x5d499f=yield mediainfo(_0x3a78fd)[a22_0x92b4('0x36')](_0xe97e8b=>{console[a22_0x92b4('0x3b')](_0xe97e8b);fsExtra[a22_0x92b4('0x46')](_0x3a78fd);return![];});const _0x19e6e9=_0x5d499f['media'][a22_0x92b4('0x5a')]['length']>0x1&&_0x5d499f[a22_0x92b4('0x5b')][a22_0x92b4('0x5a')][0x1][a22_0x92b4('0x5c')]=='Video';if(!_0x19e6e9){fsExtra['removeSync'](_0x3a78fd);}console['log']('mediainfo\x20check:'+_0x19e6e9);return _0x19e6e9;});}[a22_0x92b4('0x58')](_0x8a777f,_0xb91099,_0x4f7b78){const _0x2f9b44=new Downloader();console[a22_0x92b4('0x3b')](_0x8a777f);console[a22_0x92b4('0x3b')](_0xb91099);console[a22_0x92b4('0x3b')](_0x4f7b78);const _0xea7b37=_0x2f9b44['download'](_0x8a777f,this[a22_0x92b4('0x15')]+_0xb91099);urlExists(_0x8a777f,function(_0x421866,_0x19770f){if(_0x19770f){if(this['failDownloadFiles']['includes'](this['currentFile'])){const _0x14e2d5=this[a22_0x92b4('0x40')][a22_0x92b4('0x5d')](this['currentFile']);if(_0x14e2d5>-0x1){this[a22_0x92b4('0x40')][a22_0x92b4('0x5e')](_0x14e2d5,0x1);}}console['log'](a22_0x92b4('0x5f')+_0x8a777f);_0xea7b37['start']();}else{if(!this[a22_0x92b4('0x40')]['includes'](this[a22_0x92b4('0x1b')])){this[a22_0x92b4('0x40')][a22_0x92b4('0x41')](this[a22_0x92b4('0x1b')]);}console['log'](a22_0x92b4('0x60')+_0x8a777f);this[a22_0x92b4('0x1b')]++;this[a22_0x92b4('0x43')]();}}[a22_0x92b4('0x2e')](this));_0xea7b37['on']('start',function(_0xea7b37){console['log'](a22_0x92b4('0x61')+_0x8a777f);});_0xea7b37['on']('error',function(_0xea7b37){console['log']('error:\x20');this['download']();}['bind'](this));_0xea7b37['on'](a22_0x92b4('0x62'),function(_0xea7b37){console[a22_0x92b4('0x3b')](a22_0x92b4('0x62'));console['log'](a22_0x92b4('0x63')+_0xb91099);console['log']('mediaType:\x20'+_0x4f7b78);this[a22_0x92b4('0x55')](this['tempFolder']+_0xb91099)['then'](function(_0x7ad607){if(_0x7ad607){this[a22_0x92b4('0x1b')]++;}this['download']();}[a22_0x92b4('0x2e')](this));}['bind'](this));_0xea7b37['on'](a22_0x92b4('0x64'),function(_0xea7b37){console[a22_0x92b4('0x3b')]('stopped');});_0xea7b37['on']('destroyed',function(_0xea7b37){console['log'](a22_0x92b4('0x65'));});_0xea7b37['on'](a22_0x92b4('0x66'),function(_0xea7b37){console[a22_0x92b4('0x3b')](a22_0x92b4('0x66'));});}[a22_0x92b4('0x67')](_0x45014b,_0x4b736e,_0xdd42ba,_0x37951e){console['log'](a22_0x92b4('0x67'));console[a22_0x92b4('0x3b')](_0x45014b);const _0xa795a9=!![];let _0x5aca65=0x0;const _0x52aef6='';console[a22_0x92b4('0x3b')](a22_0x92b4('0x68')+_0x45014b+'\x20to\x20'+_0x4b736e);if(_0x5aca65){if(_0x5aca65>0x5){_0x37951e(a22_0x92b4('0x69'),_0x45014b,_0xdd42ba,null);return;}}else{_0x5aca65=0x0;}const _0x5ab25f=this[a22_0x92b4('0x15')]+_0x4b736e;let _0xbbb057;if(_0x37951e===undefined){console[a22_0x92b4('0x3b')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x45014b+a22_0x92b4('0x6a')+_0x5ab25f);_0x37951e=function(_0x3a736a,_0x2c67a4){console[a22_0x92b4('0x3b')](a22_0x92b4('0x6b'),_0x3a736a,_0x2c67a4);};}http['globalAgent']['maxSockets']=0x64;const _0x211eff={'host':url[a22_0x92b4('0x22')](_0x45014b)['host'],'port':0x50,'path':url[a22_0x92b4('0x22')](_0x45014b)[a22_0x92b4('0x6c')],'agent':![]};const _0x1999d5=http['get'](_0x211eff,function(_0x4af252){let _0x17a29=0x0;let _0x13cea6=0x0;function _0x38b0da(){if(_0x17a29===undefined){console[a22_0x92b4('0x3b')](_0x4b736e+'\x20Progress:\x20unknown\x09'+_0x13cea6+'/'+'?');}const _0x109032=_0x13cea6/_0x17a29*0x64;console[a22_0x92b4('0x3b')](_0x4b736e+a22_0x92b4('0x6d')+_0x109032+'%\x09'+_0x13cea6+'/'+_0x17a29);}console['log'](_0x4b736e+'\x20'+_0x4af252['statusCode']);switch(_0x4af252[a22_0x92b4('0x6e')]){case 0xc8:_0x17a29=_0x4af252[a22_0x92b4('0x6f')][a22_0x92b4('0x70')]||_0x52aef6;fs[a22_0x92b4('0x71')](_0x5ab25f,function(_0x48e5dd,_0x2f9ced){if(!_0x48e5dd){console[a22_0x92b4('0x3b')]('Have\x20already\x20downloaded\x20'+_0x5ab25f);if(_0x2f9ced[a22_0x92b4('0x72')]==_0x17a29){console[a22_0x92b4('0x3b')](a22_0x92b4('0x73')+_0x17a29+')');console[a22_0x92b4('0x3b')](a22_0x92b4('0x74'));}else{console[a22_0x92b4('0x3b')](a22_0x92b4('0x75')+_0x2f9ced[a22_0x92b4('0x72')]+a22_0x92b4('0x76')+_0x17a29+')');}}_0xbbb057=fs[a22_0x92b4('0x77')](_0x5ab25f);_0x4af252[a22_0x92b4('0x78')](_0xbbb057);_0x4af252['on']('data',function(_0x5df9f4){_0x13cea6+=_0x5df9f4[a22_0x92b4('0x4a')];_0x38b0da();});_0x1999d5['on'](a22_0x92b4('0x79'),function(_0x48e5dd){console[a22_0x92b4('0x3b')](a22_0x92b4('0x7a'));console['log'](_0x48e5dd);});_0xbbb057['on'](a22_0x92b4('0x7b'),function(){console[a22_0x92b4('0x3b')](a22_0x92b4('0x7c')+_0x45014b+a22_0x92b4('0x6a')+_0x4b736e);_0x37951e(null,_0x4b736e,_0xdd42ba,_0x4b736e);}[a22_0x92b4('0x2e')](this));});break;case 0x12e:const _0x327a74=_0x4af252[a22_0x92b4('0x6f')][a22_0x92b4('0x7d')];console[a22_0x92b4('0x3b')]('Redirect\x20'+_0x45014b+a22_0x92b4('0x6a')+_0x327a74);if(_0x5aca65<0x5){this[a22_0x92b4('0x67')](_0x327a74,_0x4b736e,_0x37951e,_0x5aca65++);}else{console[a22_0x92b4('0x79')](a22_0x92b4('0x7e')+_0x45014b+'.');_0x37951e(a22_0x92b4('0x7f'),null,null,null);}return;case 0x194:console[a22_0x92b4('0x3b')](a22_0x92b4('0x80')+_0x45014b);default:console[a22_0x92b4('0x3b')]('Problem\x20downloading\x20'+_0x45014b+a22_0x92b4('0x81')+_0x4af252[a22_0x92b4('0x6e')]);_0x1999d5[a22_0x92b4('0x82')]();_0x37951e(_0x4af252['statusCode'],null,null,null);return;}})['on'](a22_0x92b4('0x79'),function(_0x37ab0e){console[a22_0x92b4('0x3b')](a22_0x92b4('0x83')+_0x45014b+'\x20'+_0x37ab0e[a22_0x92b4('0x84')]);_0x37951e(_0x37ab0e,null,null,null);});}[a22_0x92b4('0x85')](_0x38b75c,_0x233c1a,_0x4b7f79,_0x5260ca){console[a22_0x92b4('0x3b')](a22_0x92b4('0x85'));console[a22_0x92b4('0x3b')](_0x38b75c);console[a22_0x92b4('0x3b')](_0x233c1a);console[a22_0x92b4('0x3b')](_0x4b7f79);console[a22_0x92b4('0x3b')](_0x5260ca);if(_0x4b7f79==a22_0x92b4('0x86')){const _0x4574d9=this[a22_0x92b4('0x1d')][this[a22_0x92b4('0x1b')]]['duration']!=null?this[a22_0x92b4('0x1d')][this[a22_0x92b4('0x1b')]][a22_0x92b4('0x87')]:0x1e;this['createImageVideo'](_0x5260ca,_0x4574d9);}else if(_0x4b7f79==a22_0x92b4('0x88')){if(_0x38b75c==null&&_0x233c1a!=''){this[a22_0x92b4('0x1b')]++;}this[a22_0x92b4('0x43')]();}console[a22_0x92b4('0x3b')](this['currentFile']);}[a22_0x92b4('0x89')](_0x4a7292,_0x54bf4b,_0x3d3efb){progress(request(_0x4a7292),{})['on'](a22_0x92b4('0x8a'),function(_0x346046){console[a22_0x92b4('0x3b')](_0x346046);})['on'](a22_0x92b4('0x79'),function(_0x449dd6){console['log']('Error\x20downloading\x20file');this[a22_0x92b4('0x43')]();})['on'](a22_0x92b4('0x62'),function(){console[a22_0x92b4('0x3b')](a22_0x92b4('0x63')+_0x54bf4b);console['log'](a22_0x92b4('0x8b')+_0x3d3efb);if(_0x3d3efb==a22_0x92b4('0x86')){const _0x948250=this['downloadFiles'][this[a22_0x92b4('0x1b')]][a22_0x92b4('0x87')]!=null?this[a22_0x92b4('0x1d')][this[a22_0x92b4('0x1b')]][a22_0x92b4('0x87')]:0x1e;this['createImageVideo'](_0x54bf4b,_0x948250);}else if(_0x3d3efb==a22_0x92b4('0x88')){this[a22_0x92b4('0x1b')]++;this[a22_0x92b4('0x43')]();}}[a22_0x92b4('0x2e')](this))[a22_0x92b4('0x78')](fs[a22_0x92b4('0x77')](this[a22_0x92b4('0x15')]+_0x54bf4b));}['createImageVideo'](_0x1bf545,_0x645c9e=0x1e){const _0x34cd1e=this[a22_0x92b4('0x15')]+_0x1bf545;console[a22_0x92b4('0x3b')](_0x34cd1e);console[a22_0x92b4('0x3b')](_0x1bf545);const _0x60d9e0=_0x1bf545[a22_0x92b4('0x4f')]('.')['slice'](0x0,-0x1)[a22_0x92b4('0x51')]('.');const _0x5dd26c=a22_0x92b4('0x8c');const _0x2e29ef=['-y','-r',a22_0x92b4('0x8d'),a22_0x92b4('0x8e'),'1',a22_0x92b4('0x8f'),a22_0x92b4('0x90'),'-i',_0x34cd1e,'-t',String(_0x645c9e),a22_0x92b4('0x91'),a22_0x92b4('0x92'),a22_0x92b4('0x93'),'yuv420p','-r','25',a22_0x92b4('0x94'),'scale=1920:1080',this[a22_0x92b4('0x15')]+_0x60d9e0+'.mp4'];const _0x9c5d6b=spawn(_0x5dd26c,_0x2e29ef);_0x9c5d6b[a22_0x92b4('0x95')]['on'](a22_0x92b4('0x96'),function(_0x567878){console['log'](a22_0x92b4('0x97')+_0x34cd1e);});_0x9c5d6b[a22_0x92b4('0x98')]['on']('data',function(_0x37b50f){console[a22_0x92b4('0x3b')](a22_0x92b4('0x99')+_0x37b50f);}[a22_0x92b4('0x2e')](this));_0x9c5d6b['on'](a22_0x92b4('0x9a'),function(){console[a22_0x92b4('0x3b')](a22_0x92b4('0x9b'));this[a22_0x92b4('0x1b')]++;this[a22_0x92b4('0x43')]();}['bind'](this));}[a22_0x92b4('0x57')](_0x4b78db){const _0x20a829=this[a22_0x92b4('0x15')]+'/'+_0x4b78db+a22_0x92b4('0x53');const _0x2daeec=youtubedl(a22_0x92b4('0x9c')+_0x4b78db,['--format=18'],{'cwd':__dirname});_0x2daeec['on'](a22_0x92b4('0x9d'),function(_0x4ef5a8){console[a22_0x92b4('0x3b')](a22_0x92b4('0x9e'));console[a22_0x92b4('0x3b')]('filename:\x20'+_0x4ef5a8[a22_0x92b4('0x9f')]);console[a22_0x92b4('0x3b')](a22_0x92b4('0xa0')+_0x4ef5a8[a22_0x92b4('0x72')]);});_0x2daeec['on'](a22_0x92b4('0xa1'),function complete(_0x422ff6){'use strict';console[a22_0x92b4('0x3b')](a22_0x92b4('0xa2')+_0x422ff6[a22_0x92b4('0x9f')]+a22_0x92b4('0xa3'));});_0x2daeec['on'](a22_0x92b4('0x62'),function(){console[a22_0x92b4('0x3b')](a22_0x92b4('0xa4'));this[a22_0x92b4('0x55')](_0x20a829)[a22_0x92b4('0x4')](function(_0x1ecad3){if(_0x1ecad3){this['currentFile']++;}this[a22_0x92b4('0x43')]();}[a22_0x92b4('0x2e')](this));}[a22_0x92b4('0x2e')](this));_0x2daeec[a22_0x92b4('0x78')](fs[a22_0x92b4('0x77')](_0x20a829));}[a22_0x92b4('0x4b')](){console[a22_0x92b4('0x3b')](a22_0x92b4('0xa5'));if(this[a22_0x92b4('0x1c')]){if(this['failDownloadFiles'][a22_0x92b4('0x4a')]==0x0){fs[a22_0x92b4('0xa6')](this[a22_0x92b4('0x17')],JSON['stringify'](this['newPlayList']));let _0xc9332c=a22_0x92b4('0xa7')+'\x0d\x0a'+a22_0x92b4('0xa8')+'\x0d\x0a';for(const _0x3e02b4 in this[a22_0x92b4('0x1d')]){const _0xf8274f=this[a22_0x92b4('0x1d')][_0x3e02b4][a22_0x92b4('0x4c')];const _0x49b4f3=this[a22_0x92b4('0x1d')][_0x3e02b4][a22_0x92b4('0x4d')];const _0x2fc1cc=_0xf8274f[a22_0x92b4('0xa9')](_0xf8274f[a22_0x92b4('0x4e')]('/')+0x1);let _0xc07c9c=_0x2fc1cc[a22_0x92b4('0x4f')]('.')[a22_0x92b4('0x50')](0x0,-0x1)['join']('.');if(_0x49b4f3==a22_0x92b4('0x52')){_0xc07c9c=_0xf8274f;}_0xc9332c+=a22_0x92b4('0xaa')+_0xc07c9c+a22_0x92b4('0x53')+'\x0d\x0a';}fsExtra[a22_0x92b4('0x3f')](this[a22_0x92b4('0x16')]);fsExtra[a22_0x92b4('0xab')](this[a22_0x92b4('0x15')],this['filesFolder']);fsExtra[a22_0x92b4('0xa6')](this['m3uFile'],_0xc9332c);fsExtra[a22_0x92b4('0x3f')](this[a22_0x92b4('0x15')]);console[a22_0x92b4('0x3b')](a22_0x92b4('0xac'));const _0x558306=spawn(a22_0x92b4('0xad'),['-r','now']);}else{console['log']('Playlist\x20incomplete,\x20retry.');this['currentFile']=0x0;setTimeout(function(){this[a22_0x92b4('0x43')]();}[a22_0x92b4('0x2e')](this),0x1388);}}else{console[a22_0x92b4('0x3b')]('No\x20playlist\x20changes.');}}}exports[a22_0x92b4('0xae')]=SyncPlaylistsService;