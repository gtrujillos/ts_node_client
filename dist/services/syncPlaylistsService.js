var a26_0x1330=['getCurrentlyPlayingVideo','item','label','reportStatus','reportStatus\x20playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','loadMediaList:\x20','emptyDirSync','downloadFiles','push','Total:\x20','length','download','existsSync','removeSync','m3uFile','hasPlayListChanged','newPlayList','this.currentFile:\x20','\x20of\x20','finishProcess','substring','lastIndexOf','slice','join','split','youtube_single','.mp4','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','downloader','media','track','@type','Video','includes','splice','start','error','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading',')\x20vs\x20New(','createWriteStream','data','err:\x20','finish','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','image','pipe','1/2','-loop','-pattern_type','glob','-c:v','libx264','yuv420p','-vf','scale=1920:1080','Converting\x20','stderr:\x20','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','info','_filename','size:\x20','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','this.playListFile:\x20','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','media_type','/home/osmc/luloclient/media/files/','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','emptyDirSync:\x20','reboot','Playlist\x20incomplete,\x20retry.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','Playlist.Add','Playlist.Added','Playlist.Opened','kodiCommandClient','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','updateSettings','header_active','turnOffTV','CECStandby()','turnOnTV','setRss','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','feed','Builder','buildObject','xml:\x20%j','RefreshRSS()','lookandfeel.enablerssfeeds','setRss:','enableClock','Settings.SetSettingValue','videoplayer.usedisplayasclock','enableClock:\x20','2.0','jsonrpcClient\x20data','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','__awaiter','next','throw','done','then','apply','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','http','fs-extra','request','child_process','spawn','exec','string-template','uuid/v4','config.json','package.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','tempFolder','temp/','filesFolder','files/','playListFile','playlist.txt','lulo_playlist.m3u','currentFile','playlistChanged','failDownloadFiles','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','playerService','PlayerService','init','parse','context','readFileSync','playerId','config','env','WEB_SERVICE_URL','baseURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','kodiHost','checkDependencies','registerClient','checkFolders','loadMediaList','getStatus','bind','playlist','stringify','deviceUuid','networkInterfaces','version','post','http://restapi.lulo.run/player_devices/register','log','catch','writeFileSync','player'];(function(_0x3187db,_0x4697c6){var _0x1edfb7=function(_0x27c58e){while(--_0x27c58e){_0x3187db['push'](_0x3187db['shift']());}};_0x1edfb7(++_0x4697c6);}(a26_0x1330,0xa2));var a26_0x31de=function(_0x589f7e,_0x199a91){_0x589f7e=_0x589f7e-0x0;var _0x4053b2=a26_0x1330[_0x589f7e];return _0x4053b2;};'use strict';var __awaiter=this&&this[a26_0x31de('0x0')]||function(_0x1046ac,_0x3b81ed,_0x4cdbe9,_0x471954){function _0x1e7036(_0x16602f){return _0x16602f instanceof _0x4cdbe9?_0x16602f:new _0x4cdbe9(function(_0x4b5e98){_0x4b5e98(_0x16602f);});}return new(_0x4cdbe9||(_0x4cdbe9=Promise))(function(_0x25cd5d,_0x590e23){function _0x5f4413(_0x297158){try{_0x533bbe(_0x471954[a26_0x31de('0x1')](_0x297158));}catch(_0x275782){_0x590e23(_0x275782);}}function _0x39a86f(_0x27086d){try{_0x533bbe(_0x471954[a26_0x31de('0x2')](_0x27086d));}catch(_0x37be1d){_0x590e23(_0x37be1d);}}function _0x533bbe(_0x1d5cd4){_0x1d5cd4[a26_0x31de('0x3')]?_0x25cd5d(_0x1d5cd4['value']):_0x1e7036(_0x1d5cd4['value'])[a26_0x31de('0x4')](_0x5f4413,_0x39a86f);}_0x533bbe((_0x471954=_0x471954[a26_0x31de('0x5')](_0x1046ac,_0x3b81ed||[]))[a26_0x31de('0x1')]());});};Object['defineProperty'](exports,a26_0x31de('0x6'),{'value':!![]});const HttpClientService_1=require(a26_0x31de('0x7'));const playerService_1=require(a26_0x31de('0x8'));const mediainfo=require(a26_0x31de('0x9'));const fs=require('fs');const url=require(a26_0x31de('0xa'));const http=require(a26_0x31de('0xb'));const fsExtra=require(a26_0x31de('0xc'));const request=require(a26_0x31de('0xd'));const progress=require('request-progress');const spawn=require(a26_0x31de('0xe'))[a26_0x31de('0xf')];const exec=require(a26_0x31de('0xe'))[a26_0x31de('0x10')];const isImage=require('is-image');const format=require(a26_0x31de('0x11'));const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a26_0x31de('0x12'));const configFile=a26_0x31de('0x13');const contextFile=a26_0x31de('0x14');const urlExists=require(a26_0x31de('0x15'));const kodi_rpc=require(a26_0x31de('0x16'));const Downloader=require(a26_0x31de('0x17'));class SyncPlaylistsService{constructor(){this[a26_0x31de('0x18')]='media/';this[a26_0x31de('0x19')]=this[a26_0x31de('0x18')]+a26_0x31de('0x1a');this[a26_0x31de('0x1b')]=this['mediaFolder']+a26_0x31de('0x1c');this[a26_0x31de('0x1d')]=this['mediaFolder']+a26_0x31de('0x1e');this['m3uFile']=this[a26_0x31de('0x1b')]+a26_0x31de('0x1f');this[a26_0x31de('0x20')]=0x0;this[a26_0x31de('0x21')]=![];this['downloadFiles']=[];this[a26_0x31de('0x22')]=[];this['newPlayList']={};this['kodiHost']=a26_0x31de('0x23');this[a26_0x31de('0x24')]=a26_0x31de('0x25');this[a26_0x31de('0x26')]=a26_0x31de('0x27');this[a26_0x31de('0x28')]=![];this[a26_0x31de('0x29')]=new HttpClientService_1['HttpClientService']();this[a26_0x31de('0x2a')]=new playerService_1[(a26_0x31de('0x2b'))]();}[a26_0x31de('0x2c')](){this['config']=JSON[a26_0x31de('0x2d')](fs['readFileSync'](configFile));this[a26_0x31de('0x2e')]=JSON['parse'](fs[a26_0x31de('0x2f')](contextFile));this[a26_0x31de('0x30')]=this[a26_0x31de('0x31')][a26_0x31de('0x30')];this['baseURL']=process[a26_0x31de('0x32')][a26_0x31de('0x33')]+'deploy/';this['playListServiceURL']=this[a26_0x31de('0x34')]+a26_0x31de('0x35');this[a26_0x31de('0x36')]=this[a26_0x31de('0x34')]+a26_0x31de('0x37');this[a26_0x31de('0x38')]=new kodi_rpc({'url':this[a26_0x31de('0x39')],'user':this[a26_0x31de('0x24')],'password':this[a26_0x31de('0x26')]});this[a26_0x31de('0x3a')]();this[a26_0x31de('0x3b')]();this[a26_0x31de('0x3c')]();this[a26_0x31de('0x3d')]();this['updateSettings']();setInterval(function(){this[a26_0x31de('0x3e')]();}[a26_0x31de('0x3f')](this),0x2710);setInterval(function(){this[a26_0x31de('0x3b')]();}[a26_0x31de('0x3f')](this),0x493e0);}['checkDependencies'](){}[a26_0x31de('0x3b')](){this[a26_0x31de('0x38')][a26_0x31de('0x40')]['getItems'](0x1)['then'](function(_0x212ff8){const _0x53b79f=JSON[a26_0x31de('0x41')](_0x212ff8);const _0x2b9e34={'player_id':this['playerId'],'device_uuid':this['config'][a26_0x31de('0x42')],'network_info':JSON['stringify'](os[a26_0x31de('0x43')]()),'firmware_info':JSON[a26_0x31de('0x41')](this['context'][a26_0x31de('0x44')]),'playlist':_0x53b79f,'playing_item':'','status':0x0};this[a26_0x31de('0x29')][a26_0x31de('0x45')](a26_0x31de('0x46'),_0x2b9e34,![])[a26_0x31de('0x4')](function(_0x23c5bb){console[a26_0x31de('0x47')]('register\x20response:\x20'+Date());})[a26_0x31de('0x48')](function(_0x1f4aec){});console[a26_0x31de('0x47')](_0x2b9e34);}[a26_0x31de('0x3f')](this));const _0x349ebc=this[a26_0x31de('0x31')][a26_0x31de('0x42')];if(!_0x349ebc||_0x349ebc==''){this[a26_0x31de('0x31')][a26_0x31de('0x42')]=uuidv4();this[a26_0x31de('0x31')]={'deviceUuid':this['config'][a26_0x31de('0x42')],'playerId':this[a26_0x31de('0x31')][a26_0x31de('0x30')]};fs[a26_0x31de('0x49')](configFile,JSON[a26_0x31de('0x41')](this[a26_0x31de('0x31')]));}}[a26_0x31de('0x3e')](){console[a26_0x31de('0x47')]('getStatus');this[a26_0x31de('0x38')][a26_0x31de('0x4a')][a26_0x31de('0x4b')]()['then'](function(_0xf0be52){const _0x582954=_0xf0be52[a26_0x31de('0x4c')][a26_0x31de('0x4d')];this['reportStatus'](_0x582954);}[a26_0x31de('0x3f')](this))[a26_0x31de('0x48')](function(_0x32b829){console['log'](_0x32b829);this[a26_0x31de('0x4e')](JSON['stringify'](_0x32b829));}[a26_0x31de('0x3f')](this));}[a26_0x31de('0x4e')](_0x5b2495){console[a26_0x31de('0x47')](a26_0x31de('0x4f')+_0x5b2495);const _0x1361ef={'player_id':this[a26_0x31de('0x30')],'device_uuid':this[a26_0x31de('0x31')][a26_0x31de('0x42')],'status':_0x5b2495!=''&&_0x5b2495!=null?0x1:0x0,'playing_item':_0x5b2495};this[a26_0x31de('0x29')]['post'](a26_0x31de('0x50'),_0x1361ef,![])[a26_0x31de('0x4')](function(_0x16cede){console[a26_0x31de('0x47')](a26_0x31de('0x51'));})['catch'](function(_0x57f47e){});}['checkFolders'](){fsExtra[a26_0x31de('0x52')](this[a26_0x31de('0x18')],_0x3d3efb=>{});fsExtra[a26_0x31de('0x52')](this['tempFolder'],_0x3ad709=>{});fsExtra[a26_0x31de('0x52')](this['filesFolder'],_0x20257e=>{});}[a26_0x31de('0x3d')](){const _0x7c563e=format(this['playListServiceURL'],this[a26_0x31de('0x30')]);console[a26_0x31de('0x47')](_0x7c563e);request({'url':_0x7c563e,'json':!![]},function(_0x64ad21,_0x274aa5,_0x304a21){console[a26_0x31de('0x47')](a26_0x31de('0x53'));this['newPlayList']=_0x304a21;this[a26_0x31de('0x21')]=this['hasPlayListChanged']();fsExtra[a26_0x31de('0x54')](this['tempFolder']);this[a26_0x31de('0x55')]=[];this[a26_0x31de('0x22')]=[];this[a26_0x31de('0x20')]=0x0;for(const _0x54f6ab in _0x304a21){this[a26_0x31de('0x55')][a26_0x31de('0x56')](_0x304a21[_0x54f6ab]);}console[a26_0x31de('0x47')](a26_0x31de('0x57')+this[a26_0x31de('0x55')][a26_0x31de('0x58')]);if(this[a26_0x31de('0x55')]['length']>0x0){this[a26_0x31de('0x59')]();}}['bind'](this));}['reloadMediaList'](){this['forceReload']=!![];if(fsExtra[a26_0x31de('0x5a')](this['tempFolder'])){fsExtra['emptyDirSync'](this['tempFolder']);}if(fsExtra[a26_0x31de('0x5a')](this[a26_0x31de('0x1b')])){fsExtra[a26_0x31de('0x54')](this['filesFolder']);}if(!fsExtra[a26_0x31de('0x5a')](this[a26_0x31de('0x1d')])){fsExtra[a26_0x31de('0x5b')](this[a26_0x31de('0x1d')]);}if(!fsExtra[a26_0x31de('0x5a')](this[a26_0x31de('0x5c')])){fsExtra['removeSync'](this[a26_0x31de('0x5c')]);}this['loadMediaList']();}[a26_0x31de('0x5d')](){const _0x630bd3=JSON[a26_0x31de('0x41')](this[a26_0x31de('0x5e')]);try{if(!fsExtra[a26_0x31de('0x5a')](this['playListFile'])){return!![];}else{const _0x6288e2=fsExtra['readFileSync'](this[a26_0x31de('0x1d')])['toString']();if(_0x6288e2!=_0x630bd3){return!![];}}}catch(_0x58b6c0){console[a26_0x31de('0x47')](_0x58b6c0);}return![];}[a26_0x31de('0x59')](){console[a26_0x31de('0x47')](a26_0x31de('0x5f')+this[a26_0x31de('0x20')]+a26_0x31de('0x60')+this[a26_0x31de('0x55')][a26_0x31de('0x58')]);if(this[a26_0x31de('0x20')]>=this[a26_0x31de('0x55')]['length']){this[a26_0x31de('0x61')]();return;}const _0x3df204=String(this[a26_0x31de('0x55')][this[a26_0x31de('0x20')]]['path']);const _0x57b648=this['downloadFiles'][this[a26_0x31de('0x20')]]['media_type'];let _0x35dedc=_0x3df204[a26_0x31de('0x62')](_0x3df204[a26_0x31de('0x63')]('/')+0x1);const _0x4d5f50=_0x35dedc['split']('.')[a26_0x31de('0x64')](0x0,-0x1)[a26_0x31de('0x65')]('.');let _0x5c7c4f=this[a26_0x31de('0x34')]+_0x3df204;const _0x2e6b5d=_0x5c7c4f[a26_0x31de('0x66')]('.')['slice'](0x0,-0x1)[a26_0x31de('0x65')]('.');if(_0x57b648==a26_0x31de('0x67')){_0x35dedc=_0x35dedc+a26_0x31de('0x68');}else if(_0x57b648=='image'){_0x35dedc=_0x4d5f50+a26_0x31de('0x68');_0x5c7c4f=_0x2e6b5d+a26_0x31de('0x68');}console[a26_0x31de('0x47')](a26_0x31de('0x69'));console[a26_0x31de('0x47')](_0x3df204);console[a26_0x31de('0x47')](_0x57b648);console[a26_0x31de('0x47')](_0x35dedc);console[a26_0x31de('0x47')](_0x5c7c4f);console['log'](_0x4d5f50);console[a26_0x31de('0x47')](_0x2e6b5d);console[a26_0x31de('0x47')](a26_0x31de('0x69'));if(fsExtra['existsSync'](this[a26_0x31de('0x19')]+_0x35dedc)){this['checkVideo'](this[a26_0x31de('0x19')]+_0x35dedc)[a26_0x31de('0x4')](function(_0x17258d){if(_0x17258d){this[a26_0x31de('0x20')]++;}else{this[a26_0x31de('0x21')]=!![];}this['download']();}[a26_0x31de('0x3f')](this));}else if(fsExtra[a26_0x31de('0x5a')](this[a26_0x31de('0x1b')]+_0x35dedc)){this[a26_0x31de('0x6a')](this[a26_0x31de('0x1b')]+_0x35dedc)[a26_0x31de('0x4')](function(_0x2d4295){if(_0x2d4295){fsExtra[a26_0x31de('0x6b')](this[a26_0x31de('0x1b')]+_0x35dedc,this[a26_0x31de('0x19')]+_0x35dedc);this[a26_0x31de('0x20')]++;}else{this[a26_0x31de('0x21')]=!![];}this['download']();}['bind'](this));}else{console[a26_0x31de('0x47')](a26_0x31de('0x6c')+_0x5c7c4f);this[a26_0x31de('0x21')]=!![];if(_0x57b648==a26_0x31de('0x67')){this[a26_0x31de('0x6d')](_0x3df204);}else{this[a26_0x31de('0x6e')](_0x5c7c4f,_0x35dedc,_0x57b648);}}}['checkVideo'](_0x3318c9){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x31de('0x47')]('videoFile:\x20'+_0x3318c9);const _0x16884b=yield mediainfo(_0x3318c9)[a26_0x31de('0x48')](_0x53cf5c=>{console[a26_0x31de('0x47')](_0x53cf5c);fsExtra['removeSync'](_0x3318c9);return![];});const _0x58e9b3=_0x16884b[a26_0x31de('0x6f')][a26_0x31de('0x70')][a26_0x31de('0x58')]>0x1&&_0x16884b[a26_0x31de('0x6f')][a26_0x31de('0x70')][0x1][a26_0x31de('0x71')]==a26_0x31de('0x72');if(!_0x58e9b3){fsExtra[a26_0x31de('0x5b')](_0x3318c9);}console[a26_0x31de('0x47')]('mediainfo\x20check:'+_0x58e9b3);return _0x58e9b3;});}[a26_0x31de('0x6e')](_0x39e64b,_0x2d0ee1,_0xae2050){const _0x16ee31=new Downloader();console[a26_0x31de('0x47')](_0x39e64b);console[a26_0x31de('0x47')](_0x2d0ee1);console[a26_0x31de('0x47')](_0xae2050);const _0x42254b=_0x16ee31[a26_0x31de('0x59')](_0x39e64b,this['tempFolder']+_0x2d0ee1);urlExists(_0x39e64b,function(_0x4dfb91,_0x5ae4e4){if(_0x5ae4e4){if(this[a26_0x31de('0x22')][a26_0x31de('0x73')](this[a26_0x31de('0x20')])){const _0x138881=this[a26_0x31de('0x22')]['indexOf'](this[a26_0x31de('0x20')]);if(_0x138881>-0x1){this[a26_0x31de('0x22')][a26_0x31de('0x74')](_0x138881,0x1);}}console[a26_0x31de('0x47')]('downloading:\x20'+_0x39e64b);_0x42254b['start']();}else{if(!this[a26_0x31de('0x22')][a26_0x31de('0x73')](this[a26_0x31de('0x20')])){this[a26_0x31de('0x22')][a26_0x31de('0x56')](this[a26_0x31de('0x20')]);}console[a26_0x31de('0x47')]('Error:\x20'+_0x39e64b);this[a26_0x31de('0x20')]++;this[a26_0x31de('0x59')]();}}[a26_0x31de('0x3f')](this));_0x42254b['on'](a26_0x31de('0x75'),function(_0x42254b){console[a26_0x31de('0x47')]('start:\x20'+_0x39e64b);});_0x42254b['on'](a26_0x31de('0x76'),function(_0x42254b){console[a26_0x31de('0x47')]('error:\x20');this[a26_0x31de('0x59')]();}['bind'](this));_0x42254b['on']('end',function(_0x42254b){console[a26_0x31de('0x47')](a26_0x31de('0x77'));console[a26_0x31de('0x47')](a26_0x31de('0x78')+_0x2d0ee1);console['log'](a26_0x31de('0x79')+_0xae2050);this['checkVideo'](this[a26_0x31de('0x19')]+_0x2d0ee1)['then'](function(_0x4961a9){if(_0x4961a9){this['currentFile']++;}this[a26_0x31de('0x59')]();}['bind'](this));}[a26_0x31de('0x3f')](this));_0x42254b['on'](a26_0x31de('0x7a'),function(_0x42254b){console[a26_0x31de('0x47')](a26_0x31de('0x7a'));});_0x42254b['on'](a26_0x31de('0x7b'),function(_0x42254b){console[a26_0x31de('0x47')](a26_0x31de('0x7b'));});_0x42254b['on'](a26_0x31de('0x7c'),function(_0x42254b){console[a26_0x31de('0x47')]('retry');});}['downloadHTTPFile'](_0x10dfd4,_0x2248a8,_0x2dd9f3,_0x75b919){console[a26_0x31de('0x47')](a26_0x31de('0x7d'));console[a26_0x31de('0x47')](_0x10dfd4);const _0x26229f=!![];let _0xea5e3e=0x0;const _0x34a913='';console[a26_0x31de('0x47')]('Attempting\x20to\x20download\x20'+_0x10dfd4+a26_0x31de('0x7e')+_0x2248a8);if(_0xea5e3e){if(_0xea5e3e>0x5){_0x75b919(a26_0x31de('0x7f'),_0x10dfd4,_0x2dd9f3,null);return;}}else{_0xea5e3e=0x0;}const _0x365622=this[a26_0x31de('0x19')]+_0x2248a8;let _0x5c9122;if(_0x75b919===undefined){console[a26_0x31de('0x47')](a26_0x31de('0x80')+_0x10dfd4+a26_0x31de('0x7e')+_0x365622);_0x75b919=function(_0x2eba72,_0x3864c6){console[a26_0x31de('0x47')](a26_0x31de('0x81'),_0x2eba72,_0x3864c6);};}http[a26_0x31de('0x82')][a26_0x31de('0x83')]=0x64;const _0x3239da={'host':url[a26_0x31de('0x2d')](_0x10dfd4)[a26_0x31de('0x84')],'port':0x50,'path':url[a26_0x31de('0x2d')](_0x10dfd4)['pathname'],'agent':![]};const _0x52b31a=http[a26_0x31de('0x85')](_0x3239da,function(_0x9d65c){let _0x2042be=0x0;let _0x117597=0x0;function _0x8400a(){if(_0x2042be===undefined){console[a26_0x31de('0x47')](_0x2248a8+a26_0x31de('0x86')+_0x117597+'/'+'?');}const _0x4208a9=_0x117597/_0x2042be*0x64;console[a26_0x31de('0x47')](_0x2248a8+a26_0x31de('0x87')+_0x4208a9+'%\x09'+_0x117597+'/'+_0x2042be);}console[a26_0x31de('0x47')](_0x2248a8+'\x20'+_0x9d65c[a26_0x31de('0x88')]);switch(_0x9d65c['statusCode']){case 0xc8:_0x2042be=_0x9d65c[a26_0x31de('0x89')]['content-length']||_0x34a913;fs[a26_0x31de('0x8a')](_0x365622,function(_0x17a16a,_0x47f64d){if(!_0x17a16a){console[a26_0x31de('0x47')](a26_0x31de('0x8b')+_0x365622);if(_0x47f64d[a26_0x31de('0x8c')]==_0x2042be){console['log'](a26_0x31de('0x8d')+_0x2042be+')');console['log'](a26_0x31de('0x8e'));}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x47f64d[a26_0x31de('0x8c')]+a26_0x31de('0x8f')+_0x2042be+')');}}_0x5c9122=fs[a26_0x31de('0x90')](_0x365622);_0x9d65c['pipe'](_0x5c9122);_0x9d65c['on'](a26_0x31de('0x91'),function(_0x3736e6){_0x117597+=_0x3736e6[a26_0x31de('0x58')];_0x8400a();});_0x52b31a['on'](a26_0x31de('0x76'),function(_0x17a16a){console['log'](a26_0x31de('0x92'));console[a26_0x31de('0x47')](_0x17a16a);});_0x5c9122['on'](a26_0x31de('0x93'),function(){console[a26_0x31de('0x47')]('Downloaded\x20'+_0x10dfd4+a26_0x31de('0x7e')+_0x2248a8);_0x75b919(null,_0x2248a8,_0x2dd9f3,_0x2248a8);}[a26_0x31de('0x3f')](this));});break;case 0x12e:const _0x1107f5=_0x9d65c[a26_0x31de('0x89')]['location'];console[a26_0x31de('0x47')]('Redirect\x20'+_0x10dfd4+'\x20to\x20'+_0x1107f5);if(_0xea5e3e<0x5){this[a26_0x31de('0x7d')](_0x1107f5,_0x2248a8,_0x75b919,_0xea5e3e++);}else{console[a26_0x31de('0x76')](a26_0x31de('0x94')+_0x10dfd4+'.');_0x75b919(a26_0x31de('0x95'),null,null,null);}return;case 0x194:console[a26_0x31de('0x47')](a26_0x31de('0x96')+_0x10dfd4);default:console['log'](a26_0x31de('0x97')+_0x10dfd4+a26_0x31de('0x98')+_0x9d65c[a26_0x31de('0x88')]);_0x52b31a['abort']();_0x75b919(_0x9d65c[a26_0x31de('0x88')],null,null,null);return;}})['on'](a26_0x31de('0x76'),function(_0x2cd2c3){console[a26_0x31de('0x47')]('Error\x20Downloading:\x20'+_0x10dfd4+'\x20'+_0x2cd2c3['message']);_0x75b919(_0x2cd2c3,null,null,null);});}['downloadHTTPFileCallback'](_0x35f14b,_0xeadfe,_0xb392d6,_0xe8eaff){console[a26_0x31de('0x47')](a26_0x31de('0x99'));console[a26_0x31de('0x47')](_0x35f14b);console[a26_0x31de('0x47')](_0xeadfe);console[a26_0x31de('0x47')](_0xb392d6);console[a26_0x31de('0x47')](_0xe8eaff);if(_0xb392d6=='image'){const _0x32dca9=this['downloadFiles'][this[a26_0x31de('0x20')]][a26_0x31de('0x9a')]!=null?this['downloadFiles'][this['currentFile']][a26_0x31de('0x9a')]:0x1e;this[a26_0x31de('0x9b')](_0xe8eaff,_0x32dca9);}else if(_0xb392d6=='video'){if(_0x35f14b==null&&_0xeadfe!=''){this[a26_0x31de('0x20')]++;}this[a26_0x31de('0x59')]();}console[a26_0x31de('0x47')](this[a26_0x31de('0x20')]);}[a26_0x31de('0x9c')](_0x4a15e2,_0x6e379a,_0x3e9980){progress(request(_0x4a15e2),{})['on'](a26_0x31de('0x9d'),function(_0x33d119){console[a26_0x31de('0x47')](_0x33d119);})['on']('error',function(_0xfd99d){console[a26_0x31de('0x47')](a26_0x31de('0x9e'));this[a26_0x31de('0x59')]();})['on'](a26_0x31de('0x77'),function(){console[a26_0x31de('0x47')]('Downloaded:\x20'+_0x6e379a);console[a26_0x31de('0x47')](a26_0x31de('0x79')+_0x3e9980);if(_0x3e9980==a26_0x31de('0x9f')){const _0xf75d76=this[a26_0x31de('0x55')][this[a26_0x31de('0x20')]][a26_0x31de('0x9a')]!=null?this[a26_0x31de('0x55')][this['currentFile']][a26_0x31de('0x9a')]:0x1e;this[a26_0x31de('0x9b')](_0x6e379a,_0xf75d76);}else if(_0x3e9980=='video'){this[a26_0x31de('0x20')]++;this[a26_0x31de('0x59')]();}}[a26_0x31de('0x3f')](this))[a26_0x31de('0xa0')](fs[a26_0x31de('0x90')](this[a26_0x31de('0x19')]+_0x6e379a));}[a26_0x31de('0x9b')](_0x307d67,_0x267ee6=0x1e){const _0x51c956=this[a26_0x31de('0x19')]+_0x307d67;console[a26_0x31de('0x47')](_0x51c956);console[a26_0x31de('0x47')](_0x307d67);const _0x1cc760=_0x307d67[a26_0x31de('0x66')]('.')[a26_0x31de('0x64')](0x0,-0x1)[a26_0x31de('0x65')]('.');const _0x4d80b1='ffmpeg';const _0x591ded=['-y','-r',a26_0x31de('0xa1'),a26_0x31de('0xa2'),'1',a26_0x31de('0xa3'),a26_0x31de('0xa4'),'-i',_0x51c956,'-t',String(_0x267ee6),a26_0x31de('0xa5'),a26_0x31de('0xa6'),'-pix_fmt',a26_0x31de('0xa7'),'-r','25',a26_0x31de('0xa8'),a26_0x31de('0xa9'),this[a26_0x31de('0x19')]+_0x1cc760+'.mp4'];const _0x3eb159=spawn(_0x4d80b1,_0x591ded);_0x3eb159['stdout']['on']('data',function(_0x4f7919){console[a26_0x31de('0x47')](a26_0x31de('0xaa')+_0x51c956);});_0x3eb159['stderr']['on']('data',function(_0x32b892){console['log'](a26_0x31de('0xab')+_0x32b892);}[a26_0x31de('0x3f')](this));_0x3eb159['on']('close',function(){console[a26_0x31de('0x47')](a26_0x31de('0xac'));this[a26_0x31de('0x20')]++;this[a26_0x31de('0x59')]();}[a26_0x31de('0x3f')](this));}[a26_0x31de('0x6d')](_0x4e3543){const _0x25dd94=this[a26_0x31de('0x19')]+'/'+_0x4e3543+a26_0x31de('0x68');const _0x3707a8=a26_0x31de('0xad')+_0x4e3543;console[a26_0x31de('0x47')](a26_0x31de('0xae')+_0x3707a8);console['log'](a26_0x31de('0xaf')+_0x25dd94);const _0x333b3e=youtubedl(_0x3707a8,[a26_0x31de('0xb0'),a26_0x31de('0xb1')],{'cwd':__dirname});_0x333b3e['on'](a26_0x31de('0xb2'),function(_0x158e8b){console['log']('Download\x20started');console[a26_0x31de('0x47')]('filename:\x20'+_0x158e8b[a26_0x31de('0xb3')]);console[a26_0x31de('0x47')](a26_0x31de('0xb4')+_0x158e8b[a26_0x31de('0x8c')]);});_0x333b3e['on'](a26_0x31de('0xb5'),function complete(_0x435469){'use strict';console[a26_0x31de('0x47')](a26_0x31de('0xb6')+_0x435469[a26_0x31de('0xb3')]+a26_0x31de('0xb7'));});_0x333b3e['on'](a26_0x31de('0x77'),function(){console[a26_0x31de('0x47')](a26_0x31de('0xb8'));this[a26_0x31de('0x6a')](_0x25dd94)[a26_0x31de('0x4')](function(_0x58bcb3){if(_0x58bcb3){this[a26_0x31de('0x20')]++;}this[a26_0x31de('0x59')]();}['bind'](this));}[a26_0x31de('0x3f')](this));_0x333b3e[a26_0x31de('0xa0')](fs[a26_0x31de('0x90')](_0x25dd94));}[a26_0x31de('0x61')](){console[a26_0x31de('0x47')]('Finishing');if(this[a26_0x31de('0x21')]){if(this[a26_0x31de('0x22')]['length']==0x0){console['log'](a26_0x31de('0xb9')+this[a26_0x31de('0x1d')]);fs[a26_0x31de('0x49')](this['playListFile'],JSON[a26_0x31de('0x41')](this[a26_0x31de('0x5e')]));let _0x17c10a=a26_0x31de('0xba')+'\x0d\x0a'+a26_0x31de('0xbb')+'\x0d\x0a';for(const _0x154be3 in this[a26_0x31de('0x55')]){const _0x1b8e0e=this[a26_0x31de('0x55')][_0x154be3][a26_0x31de('0xbc')];const _0x3c9f65=this[a26_0x31de('0x55')][_0x154be3][a26_0x31de('0xbd')];const _0x1402b3=_0x1b8e0e[a26_0x31de('0x62')](_0x1b8e0e[a26_0x31de('0x63')]('/')+0x1);let _0x255af1=_0x1402b3['split']('.')[a26_0x31de('0x64')](0x0,-0x1)[a26_0x31de('0x65')]('.');if(_0x3c9f65==a26_0x31de('0x67')){_0x255af1=_0x1b8e0e;}_0x17c10a+=a26_0x31de('0xbe')+_0x255af1+a26_0x31de('0x68')+'\x0d\x0a';console[a26_0x31de('0x47')](a26_0x31de('0xbf')+_0x17c10a);}console[a26_0x31de('0x47')](a26_0x31de('0xbf')+_0x17c10a);fsExtra[a26_0x31de('0x54')](this['filesFolder']);console[a26_0x31de('0x47')](a26_0x31de('0xc0')+this[a26_0x31de('0x19')]);fsExtra[a26_0x31de('0x6b')](this[a26_0x31de('0x19')],this[a26_0x31de('0x1b')]);console['log'](a26_0x31de('0xc1')+this[a26_0x31de('0x5c')]);fsExtra[a26_0x31de('0x49')](this[a26_0x31de('0x5c')],_0x17c10a);console['log'](a26_0x31de('0xc2')+this[a26_0x31de('0x19')]);fsExtra[a26_0x31de('0x54')](this[a26_0x31de('0x19')]);console[a26_0x31de('0x47')]('Rebooting..');this[a26_0x31de('0xc3')]();}else{console[a26_0x31de('0x47')](a26_0x31de('0xc4'));this['currentFile']=0x0;setTimeout(function(){this[a26_0x31de('0x59')]();}['bind'](this),0x1388);}}else{console['log']('No\x20playlist\x20changes.');}}[a26_0x31de('0xc5')](){this[a26_0x31de('0xc6')](a26_0x31de('0xc7'),{'playlistid':0x1},function(_0x4dc1ed){console[a26_0x31de('0x47')](a26_0x31de('0xc8'));console['log'](_0x4dc1ed);this[a26_0x31de('0xc6')](a26_0x31de('0xc9'),{'item':{'file':'//home/osmc/luloclient/media/files/lulo_playlist.m3u'},'playlistid':0x1},function(_0x4dc1ed){console[a26_0x31de('0x47')](a26_0x31de('0xca'));console['log'](_0x4dc1ed);this[a26_0x31de('0xc6')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x4dc1ed){console[a26_0x31de('0x47')](a26_0x31de('0xcb'));console[a26_0x31de('0x47')](_0x4dc1ed);this[a26_0x31de('0xcc')](a26_0x31de('0xcd'));}[a26_0x31de('0x3f')](this));}['bind'](this));}[a26_0x31de('0x3f')](this));}[a26_0x31de('0xc3')](){console[a26_0x31de('0x47')](a26_0x31de('0xce'));exec(a26_0x31de('0xcf'),function(_0x2bd2f2){console[a26_0x31de('0x47')](_0x2bd2f2);});}[a26_0x31de('0xd0')](){const _0x38d847=format(this[a26_0x31de('0x36')],this[a26_0x31de('0x30')]);console[a26_0x31de('0x47')](_0x38d847);request({'url':_0x38d847,'json':!![]},function(_0x54f98c,_0x767a40,_0x4a8808){if(_0x4a8808[a26_0x31de('0x58')]>0x0){const _0x167a76=_0x4a8808[0x0];const _0x270595=_0x167a76['rss'];const _0x2a092d=_0x167a76[a26_0x31de('0xd1')]==0x1;this['setRss'](_0x270595);this['enableClock'](_0x2a092d);this[a26_0x31de('0x3b')]();}console[a26_0x31de('0x47')](_0x4a8808);}[a26_0x31de('0x3f')](this));}[a26_0x31de('0xd2')](){this[a26_0x31de('0xcc')](a26_0x31de('0xd3'));}[a26_0x31de('0xd4')](){this[a26_0x31de('0xcc')]('CECActivateSource()');}[a26_0x31de('0xd5')](_0x2388a1){const _0x3d93a9=_0x2388a1!=null&&_0x2388a1!='';const _0x1b6cbb='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra['existsSync'](_0x1b6cbb)){const _0x2d8626=fsExtra[a26_0x31de('0x2f')](_0x1b6cbb);console[a26_0x31de('0x47')](a26_0x31de('0xd6')+_0x2d8626);const _0x3d6d96=require(a26_0x31de('0xd7'));const _0x2ab372=_0x3d6d96[a26_0x31de('0xd8')];_0x2ab372(_0x2d8626,function(_0x9f7e34,_0x5d2305){console['log'](a26_0x31de('0xd9'),_0x9f7e34);console[a26_0x31de('0x47')](a26_0x31de('0xda'),_0x5d2305);if(!_0x2388a1||_0x2388a1==null||_0x2388a1==''){_0x2388a1=a26_0x31de('0xdb');}_0x5d2305[a26_0x31de('0xdc')]['set'][0x0][a26_0x31de('0xdd')][0x0]['_']=_0x2388a1;const _0x5796f2=new _0x3d6d96[(a26_0x31de('0xde'))]();const _0x59c3c3=_0x5796f2[a26_0x31de('0xdf')](_0x5d2305);console[a26_0x31de('0x47')](a26_0x31de('0xe0'),_0x59c3c3);fsExtra[a26_0x31de('0x49')](_0x1b6cbb,_0x59c3c3);});this[a26_0x31de('0xcc')](a26_0x31de('0xe1'));this['jsonrpcClient']('Settings.SetSettingValue',{'setting':a26_0x31de('0xe2'),'value':_0x3d93a9},function(_0x396221){console['log'](a26_0x31de('0xe3'));console[a26_0x31de('0x47')](_0x396221);}['bind'](this));}}[a26_0x31de('0xe4')](_0x176c09){this[a26_0x31de('0xc6')](a26_0x31de('0xe5'),{'setting':a26_0x31de('0xe6'),'value':_0x176c09},function(_0x300fd8){console[a26_0x31de('0x47')](a26_0x31de('0xe7'));console[a26_0x31de('0x47')](_0x300fd8);}[a26_0x31de('0x3f')](this));}[a26_0x31de('0xcc')](_0x497bda){exec('kodi-send\x20--action=\x22'+_0x497bda+'\x22',function(_0xcaf2c0){console[a26_0x31de('0x47')](_0xcaf2c0);});}[a26_0x31de('0xc6')](_0x9bb1ea,_0x3e10dd,_0x39b3cf){const _0x524c94={'jsonrpc':a26_0x31de('0xe8'),'method':_0x9bb1ea,'params':_0x3e10dd,'id':0x1};const _0xfd04bf={'user':this['kodiUser'],'pass':this[a26_0x31de('0x26')]};console[a26_0x31de('0x47')](a26_0x31de('0xe9'),_0x524c94);console[a26_0x31de('0x47')](a26_0x31de('0xea'),_0xfd04bf);this[a26_0x31de('0x29')]['post'](this[a26_0x31de('0x39')]+a26_0x31de('0xeb'),_0x524c94,![],_0xfd04bf)[a26_0x31de('0x4')](function(_0xd4169d){_0x39b3cf(_0xd4169d);})[a26_0x31de('0x48')](function(_0x185be7){});}}exports[a26_0x31de('0xec')]=SyncPlaylistsService;