var a26_0x3445=['readFileSync','toString','this.currentFile:\x20','\x20of\x20','path','media_type','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloadYouTube','videoFile:\x20','track','Video','mediainfo\x20check:','downloader','includes','indexOf','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','host','pathname','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','Downloaded\x20','Redirect\x20','302','File\x20Not\x20Found\x20','\x20STATUS:\x20','statusCode','message','downloadHTTPFileCallback','duration','createImageVideo','progress','Error\x20downloading\x20file','video','ffmpeg','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','Converting\x20','stderr','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','info','Download\x20started','filename:\x20','size:\x20','complete','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','finishProcess','Finishing','this.playListFile:\x20','#EXTINF:0,luloPlayList','/home/osmc/luloclient/media/files/','m3uContent:\x20','writeFileSync:\x20','emptyDirSync:\x20','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Cleared','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Playlist.Opened','kodiCommandClient','RestartApp()','sudo\x20/sbin/reboot\x20-f','rss','header_active','setRss','enableClock','CECStandby()','turnOnTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','parseString','err:\x20%j','result:\x20%j','none','rssfeeds','set','feed','buildObject','xml:\x20%j','RefreshRSS()','lookandfeel.enablerssfeeds','setRss:','Settings.SetSettingValue','videoplayer.usedisplayasclock','enableClock:\x20','jsonrpcClient\x20data','jsonrpcClient\x20options','/jsonrpc','__awaiter','next','throw','done','value','then','apply','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','http','fs-extra','request','child_process','spawn','is-image','config.json','package.json','url-exists','node-kodi','mediaFolder','media/','filesFolder','files/','playListFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','kodiHost','http://192.168.0.109','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','playerService','PlayerService','config','parse','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','checkFolders','loadMediaList','updateSettings','getStatus','bind','playlist','getItems','deviceUuid','stringify','networkInterfaces','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','catch','writeFileSync','player','getCurrentlyPlayingVideo','item','label','reportStatus','http://restapi.lulo.run/player_devices/report_status','ensureDir','tempFolder','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','push','length','download','existsSync','removeSync','m3uFile','newPlayList'];(function(_0x3eff0e,_0x35e1a0){var _0x376dce=function(_0x17d568){while(--_0x17d568){_0x3eff0e['push'](_0x3eff0e['shift']());}};_0x376dce(++_0x35e1a0);}(a26_0x3445,0x8d));var a26_0x3dac=function(_0x2f3e31,_0x3a89c9){_0x2f3e31=_0x2f3e31-0x0;var _0x2c6db2=a26_0x3445[_0x2f3e31];return _0x2c6db2;};'use strict';var __awaiter=this&&this[a26_0x3dac('0x0')]||function(_0x27b60e,_0x546c6d,_0xde8f51,_0x27ccd4){function _0x3c30ca(_0x700f5a){return _0x700f5a instanceof _0xde8f51?_0x700f5a:new _0xde8f51(function(_0x458cf5){_0x458cf5(_0x700f5a);});}return new(_0xde8f51||(_0xde8f51=Promise))(function(_0x551f8f,_0x5a62c2){function _0x49c4e4(_0xd5ff7){try{_0x50b1d8(_0x27ccd4[a26_0x3dac('0x1')](_0xd5ff7));}catch(_0xbdd89e){_0x5a62c2(_0xbdd89e);}}function _0x2e701f(_0x531f2c){try{_0x50b1d8(_0x27ccd4[a26_0x3dac('0x2')](_0x531f2c));}catch(_0x696a94){_0x5a62c2(_0x696a94);}}function _0x50b1d8(_0x1fcabe){_0x1fcabe[a26_0x3dac('0x3')]?_0x551f8f(_0x1fcabe[a26_0x3dac('0x4')]):_0x3c30ca(_0x1fcabe['value'])[a26_0x3dac('0x5')](_0x49c4e4,_0x2e701f);}_0x50b1d8((_0x27ccd4=_0x27ccd4[a26_0x3dac('0x6')](_0x27b60e,_0x546c6d||[]))['next']());});};Object['defineProperty'](exports,a26_0x3dac('0x7'),{'value':!![]});const HttpClientService_1=require(a26_0x3dac('0x8'));const playerService_1=require(a26_0x3dac('0x9'));const mediainfo=require(a26_0x3dac('0xa'));const fs=require('fs');const url=require('url');const http=require(a26_0x3dac('0xb'));const fsExtra=require(a26_0x3dac('0xc'));const request=require(a26_0x3dac('0xd'));const progress=require('request-progress');const spawn=require(a26_0x3dac('0xe'))[a26_0x3dac('0xf')];const exec=require(a26_0x3dac('0xe'))['exec'];const isImage=require(a26_0x3dac('0x10'));const format=require('string-template');const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require('uuid/v4');const configFile=a26_0x3dac('0x11');const contextFile=a26_0x3dac('0x12');const urlExists=require(a26_0x3dac('0x13'));const kodi_rpc=require(a26_0x3dac('0x14'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this[a26_0x3dac('0x15')]=a26_0x3dac('0x16');this['tempFolder']=this[a26_0x3dac('0x15')]+'temp/';this[a26_0x3dac('0x17')]=this[a26_0x3dac('0x15')]+a26_0x3dac('0x18');this[a26_0x3dac('0x19')]=this[a26_0x3dac('0x15')]+'playlist.txt';this['m3uFile']=this[a26_0x3dac('0x17')]+a26_0x3dac('0x1a');this[a26_0x3dac('0x1b')]=0x0;this[a26_0x3dac('0x1c')]=![];this[a26_0x3dac('0x1d')]=[];this[a26_0x3dac('0x1e')]=[];this['newPlayList']={};this[a26_0x3dac('0x1f')]=a26_0x3dac('0x20');this[a26_0x3dac('0x21')]=a26_0x3dac('0x22');this[a26_0x3dac('0x23')]=a26_0x3dac('0x24');this[a26_0x3dac('0x25')]=![];this['httpClientService']=new HttpClientService_1['HttpClientService']();this[a26_0x3dac('0x26')]=new playerService_1[(a26_0x3dac('0x27'))]();}['init'](){this[a26_0x3dac('0x28')]=JSON[a26_0x3dac('0x29')](fs['readFileSync'](configFile));this[a26_0x3dac('0x2a')]=JSON['parse'](fs['readFileSync'](contextFile));this[a26_0x3dac('0x2b')]=this[a26_0x3dac('0x28')][a26_0x3dac('0x2b')];this[a26_0x3dac('0x2c')]=process['env'][a26_0x3dac('0x2d')]+a26_0x3dac('0x2e');this[a26_0x3dac('0x2f')]=this[a26_0x3dac('0x2c')]+a26_0x3dac('0x30');this[a26_0x3dac('0x31')]=this[a26_0x3dac('0x2c')]+a26_0x3dac('0x32');this[a26_0x3dac('0x33')]=new kodi_rpc({'url':this['kodiHost'],'user':this['kodiUser'],'password':this[a26_0x3dac('0x23')]});this[a26_0x3dac('0x34')]();this[a26_0x3dac('0x35')]();this[a26_0x3dac('0x36')]();this[a26_0x3dac('0x37')]();this[a26_0x3dac('0x38')]();setInterval(function(){this[a26_0x3dac('0x39')]();}[a26_0x3dac('0x3a')](this),0x2710);setInterval(function(){this[a26_0x3dac('0x35')]();}['bind'](this),0x493e0);}[a26_0x3dac('0x34')](){}[a26_0x3dac('0x35')](){this[a26_0x3dac('0x33')][a26_0x3dac('0x3b')][a26_0x3dac('0x3c')](0x1)[a26_0x3dac('0x5')](function(_0x3a624a){const _0x563107=JSON['stringify'](_0x3a624a);const _0x5f104f={'player_id':this['playerId'],'device_uuid':this[a26_0x3dac('0x28')][a26_0x3dac('0x3d')],'network_info':JSON[a26_0x3dac('0x3e')](os[a26_0x3dac('0x3f')]()),'firmware_info':JSON['stringify'](this[a26_0x3dac('0x2a')]['version']),'playlist':_0x563107,'playing_item':'','status':0x0};this[a26_0x3dac('0x40')][a26_0x3dac('0x41')](a26_0x3dac('0x42'),_0x5f104f,![])[a26_0x3dac('0x5')](function(_0x198aa5){console[a26_0x3dac('0x43')](a26_0x3dac('0x44')+Date());})[a26_0x3dac('0x45')](function(_0x2b4e5f){});console['log'](_0x5f104f);}['bind'](this));const _0x3284bb=this[a26_0x3dac('0x28')][a26_0x3dac('0x3d')];if(!_0x3284bb||_0x3284bb==''){this[a26_0x3dac('0x28')][a26_0x3dac('0x3d')]=uuidv4();this[a26_0x3dac('0x28')]={'deviceUuid':this[a26_0x3dac('0x28')]['deviceUuid'],'playerId':this[a26_0x3dac('0x28')][a26_0x3dac('0x2b')]};fs[a26_0x3dac('0x46')](configFile,JSON[a26_0x3dac('0x3e')](this['config']));}}[a26_0x3dac('0x39')](){console['log'](a26_0x3dac('0x39'));this['kodi'][a26_0x3dac('0x47')][a26_0x3dac('0x48')]()['then'](function(_0x212593){const _0x1995f6=_0x212593[a26_0x3dac('0x49')][a26_0x3dac('0x4a')];this[a26_0x3dac('0x4b')](_0x1995f6);}['bind'](this))['catch'](function(_0x4e4a29){console[a26_0x3dac('0x43')](_0x4e4a29);this['reportStatus'](JSON['stringify'](_0x4e4a29));}[a26_0x3dac('0x3a')](this));}[a26_0x3dac('0x4b')](_0x57a2f5){console['log']('reportStatus\x20playingItem:\x20'+_0x57a2f5);const _0x43d53d={'player_id':this[a26_0x3dac('0x2b')],'device_uuid':this[a26_0x3dac('0x28')][a26_0x3dac('0x3d')],'status':_0x57a2f5!=''&&_0x57a2f5!=null?0x1:0x0,'playing_item':_0x57a2f5};this[a26_0x3dac('0x40')][a26_0x3dac('0x41')](a26_0x3dac('0x4c'),_0x43d53d,![])[a26_0x3dac('0x5')](function(_0x96c80e){console[a26_0x3dac('0x43')]('reportStatusResponse');})[a26_0x3dac('0x45')](function(_0x303947){});}['checkFolders'](){fsExtra[a26_0x3dac('0x4d')](this[a26_0x3dac('0x15')],_0x5d7eff=>{});fsExtra[a26_0x3dac('0x4d')](this[a26_0x3dac('0x4e')],_0x19ebb4=>{});fsExtra[a26_0x3dac('0x4d')](this[a26_0x3dac('0x17')],_0x1697ac=>{});}['loadMediaList'](){const _0x1f14ca=format(this[a26_0x3dac('0x2f')],this[a26_0x3dac('0x2b')]);console['log'](_0x1f14ca);request({'url':_0x1f14ca,'json':!![]},function(_0x4dbabc,_0x47eecd,_0x5bf9c3){console[a26_0x3dac('0x43')](a26_0x3dac('0x4f'));this['newPlayList']=_0x5bf9c3;this[a26_0x3dac('0x1c')]=this[a26_0x3dac('0x50')]();fsExtra[a26_0x3dac('0x51')](this['tempFolder']);this[a26_0x3dac('0x1d')]=[];this[a26_0x3dac('0x1e')]=[];this[a26_0x3dac('0x1b')]=0x0;for(const _0x250b9d in _0x5bf9c3){this[a26_0x3dac('0x1d')][a26_0x3dac('0x52')](_0x5bf9c3[_0x250b9d]);}console[a26_0x3dac('0x43')]('Total:\x20'+this[a26_0x3dac('0x1d')][a26_0x3dac('0x53')]);if(this['downloadFiles']['length']>0x0){this[a26_0x3dac('0x54')]();}}[a26_0x3dac('0x3a')](this));}['reloadMediaList'](){this[a26_0x3dac('0x25')]=!![];if(fsExtra[a26_0x3dac('0x55')](this[a26_0x3dac('0x4e')])){fsExtra['emptyDirSync'](this[a26_0x3dac('0x4e')]);}if(fsExtra[a26_0x3dac('0x55')](this[a26_0x3dac('0x17')])){fsExtra[a26_0x3dac('0x51')](this[a26_0x3dac('0x17')]);}if(!fsExtra[a26_0x3dac('0x55')](this[a26_0x3dac('0x19')])){fsExtra[a26_0x3dac('0x56')](this[a26_0x3dac('0x19')]);}if(!fsExtra['existsSync'](this[a26_0x3dac('0x57')])){fsExtra[a26_0x3dac('0x56')](this['m3uFile']);}this[a26_0x3dac('0x37')]();}[a26_0x3dac('0x50')](){const _0x5c5a53=JSON[a26_0x3dac('0x3e')](this[a26_0x3dac('0x58')]);try{if(!fsExtra[a26_0x3dac('0x55')](this['playListFile'])){return!![];}else{const _0x543467=fsExtra[a26_0x3dac('0x59')](this['playListFile'])[a26_0x3dac('0x5a')]();if(_0x543467!=_0x5c5a53){return!![];}}}catch(_0x2b6df0){console[a26_0x3dac('0x43')](_0x2b6df0);}return![];}[a26_0x3dac('0x54')](){console['log'](a26_0x3dac('0x5b')+this[a26_0x3dac('0x1b')]+a26_0x3dac('0x5c')+this[a26_0x3dac('0x1d')][a26_0x3dac('0x53')]);if(this[a26_0x3dac('0x1b')]>=this[a26_0x3dac('0x1d')][a26_0x3dac('0x53')]){this['finishProcess']();return;}const _0x479e72=String(this[a26_0x3dac('0x1d')][this[a26_0x3dac('0x1b')]][a26_0x3dac('0x5d')]);const _0x30f6fa=this[a26_0x3dac('0x1d')][this[a26_0x3dac('0x1b')]][a26_0x3dac('0x5e')];let _0x2d31c6=_0x479e72[a26_0x3dac('0x5f')](_0x479e72[a26_0x3dac('0x60')]('/')+0x1);const _0x154b25=_0x2d31c6[a26_0x3dac('0x61')]('.')[a26_0x3dac('0x62')](0x0,-0x1)[a26_0x3dac('0x63')]('.');let _0x5f3b1a=this[a26_0x3dac('0x2c')]+_0x479e72;const _0x4729ea=_0x5f3b1a['split']('.')[a26_0x3dac('0x62')](0x0,-0x1)[a26_0x3dac('0x63')]('.');if(_0x30f6fa==a26_0x3dac('0x64')){_0x2d31c6=_0x2d31c6+a26_0x3dac('0x65');}else if(_0x30f6fa==a26_0x3dac('0x66')){_0x2d31c6=_0x154b25+a26_0x3dac('0x65');_0x5f3b1a=_0x4729ea+'.mp4';}console[a26_0x3dac('0x43')](a26_0x3dac('0x67'));console[a26_0x3dac('0x43')](_0x479e72);console[a26_0x3dac('0x43')](_0x30f6fa);console[a26_0x3dac('0x43')](_0x2d31c6);console['log'](_0x5f3b1a);console[a26_0x3dac('0x43')](_0x154b25);console[a26_0x3dac('0x43')](_0x4729ea);console['log'](a26_0x3dac('0x67'));if(fsExtra[a26_0x3dac('0x55')](this[a26_0x3dac('0x4e')]+_0x2d31c6)){this['checkVideo'](this[a26_0x3dac('0x4e')]+_0x2d31c6)[a26_0x3dac('0x5')](function(_0x74f319){if(_0x74f319){this['currentFile']++;}else{this[a26_0x3dac('0x1c')]=!![];}this[a26_0x3dac('0x54')]();}[a26_0x3dac('0x3a')](this));}else if(fsExtra[a26_0x3dac('0x55')](this[a26_0x3dac('0x17')]+_0x2d31c6)){this[a26_0x3dac('0x68')](this[a26_0x3dac('0x17')]+_0x2d31c6)[a26_0x3dac('0x5')](function(_0xe5ced0){if(_0xe5ced0){fsExtra[a26_0x3dac('0x69')](this[a26_0x3dac('0x17')]+_0x2d31c6,this[a26_0x3dac('0x4e')]+_0x2d31c6);this[a26_0x3dac('0x1b')]++;}else{this[a26_0x3dac('0x1c')]=!![];}this[a26_0x3dac('0x54')]();}[a26_0x3dac('0x3a')](this));}else{console[a26_0x3dac('0x43')](a26_0x3dac('0x6a')+_0x5f3b1a);this['playlistChanged']=!![];if(_0x30f6fa==a26_0x3dac('0x64')){this[a26_0x3dac('0x6b')](_0x479e72);}else{this['downloader'](_0x5f3b1a,_0x2d31c6,_0x30f6fa);}}}[a26_0x3dac('0x68')](_0x4aed23){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x3dac('0x43')](a26_0x3dac('0x6c')+_0x4aed23);const _0x3f05f3=yield mediainfo(_0x4aed23)[a26_0x3dac('0x45')](_0x580883=>{console[a26_0x3dac('0x43')](_0x580883);fsExtra[a26_0x3dac('0x56')](_0x4aed23);return![];});const _0x48cf04=_0x3f05f3['media'][a26_0x3dac('0x6d')]['length']>0x1&&_0x3f05f3['media'][a26_0x3dac('0x6d')][0x1]['@type']==a26_0x3dac('0x6e');if(!_0x48cf04){fsExtra[a26_0x3dac('0x56')](_0x4aed23);}console[a26_0x3dac('0x43')](a26_0x3dac('0x6f')+_0x48cf04);return _0x48cf04;});}[a26_0x3dac('0x70')](_0x19bb9f,_0x2a0659,_0x5ea6cd){const _0x1c5550=new Downloader();console['log'](_0x19bb9f);console[a26_0x3dac('0x43')](_0x2a0659);console[a26_0x3dac('0x43')](_0x5ea6cd);const _0x236cca=_0x1c5550[a26_0x3dac('0x54')](_0x19bb9f,this[a26_0x3dac('0x4e')]+_0x2a0659);urlExists(_0x19bb9f,function(_0x9a7137,_0x348a63){if(_0x348a63){if(this[a26_0x3dac('0x1e')][a26_0x3dac('0x71')](this[a26_0x3dac('0x1b')])){const _0x52671f=this[a26_0x3dac('0x1e')][a26_0x3dac('0x72')](this[a26_0x3dac('0x1b')]);if(_0x52671f>-0x1){this[a26_0x3dac('0x1e')]['splice'](_0x52671f,0x1);}}console[a26_0x3dac('0x43')](a26_0x3dac('0x73')+_0x19bb9f);_0x236cca[a26_0x3dac('0x74')]();}else{if(!this[a26_0x3dac('0x1e')][a26_0x3dac('0x71')](this['currentFile'])){this['failDownloadFiles'][a26_0x3dac('0x52')](this[a26_0x3dac('0x1b')]);}console[a26_0x3dac('0x43')](a26_0x3dac('0x75')+_0x19bb9f);this[a26_0x3dac('0x1b')]++;this[a26_0x3dac('0x54')]();}}[a26_0x3dac('0x3a')](this));_0x236cca['on'](a26_0x3dac('0x74'),function(_0x236cca){console[a26_0x3dac('0x43')](a26_0x3dac('0x76')+_0x19bb9f);});_0x236cca['on'](a26_0x3dac('0x77'),function(_0x236cca){console[a26_0x3dac('0x43')](a26_0x3dac('0x78'));this['download']();}[a26_0x3dac('0x3a')](this));_0x236cca['on'](a26_0x3dac('0x79'),function(_0x236cca){console[a26_0x3dac('0x43')](a26_0x3dac('0x79'));console[a26_0x3dac('0x43')](a26_0x3dac('0x7a')+_0x2a0659);console[a26_0x3dac('0x43')](a26_0x3dac('0x7b')+_0x5ea6cd);this[a26_0x3dac('0x68')](this[a26_0x3dac('0x4e')]+_0x2a0659)[a26_0x3dac('0x5')](function(_0x5c29ba){if(_0x5c29ba){this[a26_0x3dac('0x1b')]++;}this[a26_0x3dac('0x54')]();}[a26_0x3dac('0x3a')](this));}[a26_0x3dac('0x3a')](this));_0x236cca['on'](a26_0x3dac('0x7c'),function(_0x236cca){console[a26_0x3dac('0x43')](a26_0x3dac('0x7c'));});_0x236cca['on'](a26_0x3dac('0x7d'),function(_0x236cca){console['log']('destroyed');});_0x236cca['on'](a26_0x3dac('0x7e'),function(_0x236cca){console[a26_0x3dac('0x43')](a26_0x3dac('0x7e'));});}[a26_0x3dac('0x7f')](_0x17333d,_0x5eb488,_0x4fa0c4,_0x45d842){console[a26_0x3dac('0x43')]('downloadHTTPFile');console['log'](_0x17333d);const _0x330e6e=!![];let _0x46fa07=0x0;const _0x400118='';console[a26_0x3dac('0x43')](a26_0x3dac('0x80')+_0x17333d+'\x20to\x20'+_0x5eb488);if(_0x46fa07){if(_0x46fa07>0x5){_0x45d842('Max\x20redirects\x20reached',_0x17333d,_0x4fa0c4,null);return;}}else{_0x46fa07=0x0;}const _0x47cd9b=this[a26_0x3dac('0x4e')]+_0x5eb488;let _0x1185ed;if(_0x45d842===undefined){console[a26_0x3dac('0x43')](a26_0x3dac('0x81')+_0x17333d+a26_0x3dac('0x82')+_0x47cd9b);_0x45d842=function(_0x421efd,_0xa7c448){console[a26_0x3dac('0x43')](a26_0x3dac('0x83'),_0x421efd,_0xa7c448);};}http[a26_0x3dac('0x84')]['maxSockets']=0x64;const _0x2d372a={'host':url[a26_0x3dac('0x29')](_0x17333d)[a26_0x3dac('0x85')],'port':0x50,'path':url[a26_0x3dac('0x29')](_0x17333d)[a26_0x3dac('0x86')],'agent':![]};const _0x1a388=http[a26_0x3dac('0x87')](_0x2d372a,function(_0x517add){let _0x30970b=0x0;let _0x4a8f74=0x0;function _0x2d9ddd(){if(_0x30970b===undefined){console[a26_0x3dac('0x43')](_0x5eb488+a26_0x3dac('0x88')+_0x4a8f74+'/'+'?');}const _0x225e64=_0x4a8f74/_0x30970b*0x64;console[a26_0x3dac('0x43')](_0x5eb488+a26_0x3dac('0x89')+_0x225e64+'%\x09'+_0x4a8f74+'/'+_0x30970b);}console[a26_0x3dac('0x43')](_0x5eb488+'\x20'+_0x517add['statusCode']);switch(_0x517add['statusCode']){case 0xc8:_0x30970b=_0x517add['headers'][a26_0x3dac('0x8a')]||_0x400118;fs[a26_0x3dac('0x8b')](_0x47cd9b,function(_0x212727,_0x25c28a){if(!_0x212727){console[a26_0x3dac('0x43')](a26_0x3dac('0x8c')+_0x47cd9b);if(_0x25c28a[a26_0x3dac('0x8d')]==_0x30970b){console[a26_0x3dac('0x43')](a26_0x3dac('0x8e')+_0x30970b+')');console[a26_0x3dac('0x43')]('Redownloading');}else{console[a26_0x3dac('0x43')](a26_0x3dac('0x8f')+_0x25c28a[a26_0x3dac('0x8d')]+a26_0x3dac('0x90')+_0x30970b+')');}}_0x1185ed=fs[a26_0x3dac('0x91')](_0x47cd9b);_0x517add[a26_0x3dac('0x92')](_0x1185ed);_0x517add['on'](a26_0x3dac('0x93'),function(_0x315a26){_0x4a8f74+=_0x315a26[a26_0x3dac('0x53')];_0x2d9ddd();});_0x1a388['on'](a26_0x3dac('0x77'),function(_0x212727){console[a26_0x3dac('0x43')](a26_0x3dac('0x94'));console[a26_0x3dac('0x43')](_0x212727);});_0x1185ed['on']('finish',function(){console[a26_0x3dac('0x43')](a26_0x3dac('0x95')+_0x17333d+a26_0x3dac('0x82')+_0x5eb488);_0x45d842(null,_0x5eb488,_0x4fa0c4,_0x5eb488);}[a26_0x3dac('0x3a')](this));});break;case 0x12e:const _0x318ad5=_0x517add['headers']['location'];console[a26_0x3dac('0x43')](a26_0x3dac('0x96')+_0x17333d+a26_0x3dac('0x82')+_0x318ad5);if(_0x46fa07<0x5){this[a26_0x3dac('0x7f')](_0x318ad5,_0x5eb488,_0x45d842,_0x46fa07++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x17333d+'.');_0x45d842(a26_0x3dac('0x97'),null,null,null);}return;case 0x194:console[a26_0x3dac('0x43')](a26_0x3dac('0x98')+_0x17333d);default:console['log']('Problem\x20downloading\x20'+_0x17333d+a26_0x3dac('0x99')+_0x517add[a26_0x3dac('0x9a')]);_0x1a388['abort']();_0x45d842(_0x517add[a26_0x3dac('0x9a')],null,null,null);return;}})['on'](a26_0x3dac('0x77'),function(_0x306c2d){console[a26_0x3dac('0x43')]('Error\x20Downloading:\x20'+_0x17333d+'\x20'+_0x306c2d[a26_0x3dac('0x9b')]);_0x45d842(_0x306c2d,null,null,null);});}['downloadHTTPFileCallback'](_0x544f0a,_0x4bf134,_0x5cdbbb,_0x58bad5){console['log'](a26_0x3dac('0x9c'));console[a26_0x3dac('0x43')](_0x544f0a);console[a26_0x3dac('0x43')](_0x4bf134);console[a26_0x3dac('0x43')](_0x5cdbbb);console['log'](_0x58bad5);if(_0x5cdbbb==a26_0x3dac('0x66')){const _0x438074=this[a26_0x3dac('0x1d')][this[a26_0x3dac('0x1b')]][a26_0x3dac('0x9d')]!=null?this[a26_0x3dac('0x1d')][this['currentFile']][a26_0x3dac('0x9d')]:0x1e;this[a26_0x3dac('0x9e')](_0x58bad5,_0x438074);}else if(_0x5cdbbb=='video'){if(_0x544f0a==null&&_0x4bf134!=''){this[a26_0x3dac('0x1b')]++;}this[a26_0x3dac('0x54')]();}console[a26_0x3dac('0x43')](this[a26_0x3dac('0x1b')]);}['downloadRequestFile'](_0x557aa6,_0x5464e8,_0x1589a3){progress(request(_0x557aa6),{})['on'](a26_0x3dac('0x9f'),function(_0x469036){console[a26_0x3dac('0x43')](_0x469036);})['on'](a26_0x3dac('0x77'),function(_0x5e73a4){console[a26_0x3dac('0x43')](a26_0x3dac('0xa0'));this['download']();})['on']('end',function(){console[a26_0x3dac('0x43')](a26_0x3dac('0x7a')+_0x5464e8);console[a26_0x3dac('0x43')](a26_0x3dac('0x7b')+_0x1589a3);if(_0x1589a3==a26_0x3dac('0x66')){const _0x16a7aa=this[a26_0x3dac('0x1d')][this[a26_0x3dac('0x1b')]][a26_0x3dac('0x9d')]!=null?this['downloadFiles'][this[a26_0x3dac('0x1b')]][a26_0x3dac('0x9d')]:0x1e;this[a26_0x3dac('0x9e')](_0x5464e8,_0x16a7aa);}else if(_0x1589a3==a26_0x3dac('0xa1')){this[a26_0x3dac('0x1b')]++;this[a26_0x3dac('0x54')]();}}[a26_0x3dac('0x3a')](this))[a26_0x3dac('0x92')](fs[a26_0x3dac('0x91')](this[a26_0x3dac('0x4e')]+_0x5464e8));}[a26_0x3dac('0x9e')](_0x18768e,_0x53432b=0x1e){const _0xf45598=this['tempFolder']+_0x18768e;console[a26_0x3dac('0x43')](_0xf45598);console[a26_0x3dac('0x43')](_0x18768e);const _0x3f21b5=_0x18768e[a26_0x3dac('0x61')]('.')['slice'](0x0,-0x1)[a26_0x3dac('0x63')]('.');const _0x3ce85f=a26_0x3dac('0xa2');const _0x3b34cc=['-y','-r','1/2',a26_0x3dac('0xa3'),'1',a26_0x3dac('0xa4'),a26_0x3dac('0xa5'),'-i',_0xf45598,'-t',String(_0x53432b),a26_0x3dac('0xa6'),'libx264',a26_0x3dac('0xa7'),a26_0x3dac('0xa8'),'-r','25','-vf','scale=1920:1080',this['tempFolder']+_0x3f21b5+a26_0x3dac('0x65')];const _0x150756=spawn(_0x3ce85f,_0x3b34cc);_0x150756['stdout']['on'](a26_0x3dac('0x93'),function(_0x15c6cb){console[a26_0x3dac('0x43')](a26_0x3dac('0xa9')+_0xf45598);});_0x150756[a26_0x3dac('0xaa')]['on'](a26_0x3dac('0x93'),function(_0x45b4e5){console[a26_0x3dac('0x43')]('stderr:\x20'+_0x45b4e5);}[a26_0x3dac('0x3a')](this));_0x150756['on']('close',function(){console['log']('finished\x20mp4\x20convert');this['currentFile']++;this['download']();}[a26_0x3dac('0x3a')](this));}[a26_0x3dac('0x6b')](_0x399905){const _0x213e26=this[a26_0x3dac('0x4e')]+'/'+_0x399905+'.mp4';const _0x2ed32e='http://www.youtube.com/watch?v='+_0x399905;console['log'](a26_0x3dac('0xab')+_0x2ed32e);console[a26_0x3dac('0x43')](a26_0x3dac('0xac')+_0x213e26);const _0x3a68e5=youtubedl(_0x2ed32e,[a26_0x3dac('0xad'),a26_0x3dac('0xae')],{'cwd':__dirname});_0x3a68e5['on'](a26_0x3dac('0xaf'),function(_0x3e5ff0){console[a26_0x3dac('0x43')](a26_0x3dac('0xb0'));console['log'](a26_0x3dac('0xb1')+_0x3e5ff0['_filename']);console[a26_0x3dac('0x43')](a26_0x3dac('0xb2')+_0x3e5ff0[a26_0x3dac('0x8d')]);});_0x3a68e5['on'](a26_0x3dac('0xb3'),function complete(_0x3d5e28){'use strict';console[a26_0x3dac('0x43')](a26_0x3dac('0xb1')+_0x3d5e28[a26_0x3dac('0xb4')]+a26_0x3dac('0xb5'));});_0x3a68e5['on'](a26_0x3dac('0x79'),function(){console['log'](a26_0x3dac('0xb6'));this[a26_0x3dac('0x68')](_0x213e26)[a26_0x3dac('0x5')](function(_0x354a5f){if(_0x354a5f){this['currentFile']++;}this[a26_0x3dac('0x54')]();}[a26_0x3dac('0x3a')](this));}['bind'](this));_0x3a68e5[a26_0x3dac('0x92')](fs['createWriteStream'](_0x213e26));}[a26_0x3dac('0xb7')](){console[a26_0x3dac('0x43')](a26_0x3dac('0xb8'));if(this[a26_0x3dac('0x1c')]){if(this['failDownloadFiles'][a26_0x3dac('0x53')]==0x0){console[a26_0x3dac('0x43')](a26_0x3dac('0xb9')+this['playListFile']);fs[a26_0x3dac('0x46')](this[a26_0x3dac('0x19')],JSON[a26_0x3dac('0x3e')](this[a26_0x3dac('0x58')]));let _0x3fb886='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a26_0x3dac('0xba')+'\x0d\x0a';for(const _0x1ebe05 in this['downloadFiles']){const _0x34d78b=this[a26_0x3dac('0x1d')][_0x1ebe05][a26_0x3dac('0x5d')];const _0x197874=this[a26_0x3dac('0x1d')][_0x1ebe05][a26_0x3dac('0x5e')];const _0x2a7571=_0x34d78b[a26_0x3dac('0x5f')](_0x34d78b[a26_0x3dac('0x60')]('/')+0x1);let _0x38cd75=_0x2a7571[a26_0x3dac('0x61')]('.')[a26_0x3dac('0x62')](0x0,-0x1)[a26_0x3dac('0x63')]('.');if(_0x197874==a26_0x3dac('0x64')){_0x38cd75=_0x34d78b;}_0x3fb886+=a26_0x3dac('0xbb')+_0x38cd75+a26_0x3dac('0x65')+'\x0d\x0a';console[a26_0x3dac('0x43')](a26_0x3dac('0xbc')+_0x3fb886);}console[a26_0x3dac('0x43')](a26_0x3dac('0xbc')+_0x3fb886);fsExtra[a26_0x3dac('0x51')](this['filesFolder']);console['log']('copySync:\x20'+this[a26_0x3dac('0x4e')]);fsExtra[a26_0x3dac('0x69')](this[a26_0x3dac('0x4e')],this[a26_0x3dac('0x17')]);console[a26_0x3dac('0x43')](a26_0x3dac('0xbd')+this[a26_0x3dac('0x57')]);fsExtra[a26_0x3dac('0x46')](this[a26_0x3dac('0x57')],_0x3fb886);console[a26_0x3dac('0x43')](a26_0x3dac('0xbe')+this[a26_0x3dac('0x4e')]);fsExtra[a26_0x3dac('0x51')](this[a26_0x3dac('0x4e')]);console[a26_0x3dac('0x43')]('Rebooting..');this[a26_0x3dac('0xbf')]();}else{console[a26_0x3dac('0x43')](a26_0x3dac('0xc0'));this[a26_0x3dac('0x1b')]=0x0;setTimeout(function(){this[a26_0x3dac('0x54')]();}[a26_0x3dac('0x3a')](this),0x1388);}}else{console[a26_0x3dac('0x43')](a26_0x3dac('0xc1'));}}[a26_0x3dac('0xc2')](){this[a26_0x3dac('0xc3')]('Playlist.Clear',{'playlistid':0x1},function(_0x5b2d39){console['log'](a26_0x3dac('0xc4'));console['log'](_0x5b2d39);this[a26_0x3dac('0xc3')]('Playlist.Add',{'item':{'file':a26_0x3dac('0xc5')},'playlistid':0x1},function(_0x5b2d39){console[a26_0x3dac('0x43')](a26_0x3dac('0xc6'));console[a26_0x3dac('0x43')](_0x5b2d39);this[a26_0x3dac('0xc3')]('Player.Open',{'item':{'playlistid':0x1,'position':0x0}},function(_0x5b2d39){console[a26_0x3dac('0x43')](a26_0x3dac('0xc7'));console[a26_0x3dac('0x43')](_0x5b2d39);this[a26_0x3dac('0xc8')](a26_0x3dac('0xc9'));}[a26_0x3dac('0x3a')](this));}['bind'](this));}[a26_0x3dac('0x3a')](this));}[a26_0x3dac('0xbf')](){console['log']('Rebooting');exec(a26_0x3dac('0xca'),function(_0x36f780){console['log'](_0x36f780);});}['updateSettings'](){const _0x139ede=format(this['playerServiceURL'],this['playerId']);console[a26_0x3dac('0x43')](_0x139ede);request({'url':_0x139ede,'json':!![]},function(_0x489c83,_0x3718df,_0xef4209){if(_0xef4209['length']>0x0){const _0x33b1c5=_0xef4209[0x0];const _0xd11c4c=_0x33b1c5[a26_0x3dac('0xcb')];const _0x3aff1d=_0x33b1c5[a26_0x3dac('0xcc')]==0x1;this[a26_0x3dac('0xcd')](_0xd11c4c);this[a26_0x3dac('0xce')](_0x3aff1d);this[a26_0x3dac('0x35')]();}console[a26_0x3dac('0x43')](_0xef4209);}[a26_0x3dac('0x3a')](this));}['turnOffTV'](){this[a26_0x3dac('0xc8')](a26_0x3dac('0xcf'));}[a26_0x3dac('0xd0')](){this[a26_0x3dac('0xc8')](a26_0x3dac('0xd1'));}[a26_0x3dac('0xcd')](_0x496300){const _0x65c7a5=_0x496300!=null&&_0x496300!='';const _0xfc68a0=a26_0x3dac('0xd2');if(fsExtra['existsSync'](_0xfc68a0)){const _0x360c70=fsExtra[a26_0x3dac('0x59')](_0xfc68a0);console[a26_0x3dac('0x43')](a26_0x3dac('0xd3')+_0x360c70);const _0x189237=require('xml2js');const _0x2b0f06=_0x189237[a26_0x3dac('0xd4')];_0x2b0f06(_0x360c70,function(_0x18e0a1,_0x1c280f){console[a26_0x3dac('0x43')](a26_0x3dac('0xd5'),_0x18e0a1);console['log'](a26_0x3dac('0xd6'),_0x1c280f);if(!_0x496300||_0x496300==null||_0x496300==''){_0x496300=a26_0x3dac('0xd7');}_0x1c280f[a26_0x3dac('0xd8')][a26_0x3dac('0xd9')][0x0][a26_0x3dac('0xda')][0x0]['_']=_0x496300;const _0x49c016=new _0x189237['Builder']();const _0x414910=_0x49c016[a26_0x3dac('0xdb')](_0x1c280f);console[a26_0x3dac('0x43')](a26_0x3dac('0xdc'),_0x414910);fsExtra[a26_0x3dac('0x46')](_0xfc68a0,_0x414910);});this['kodiCommandClient'](a26_0x3dac('0xdd'));this['jsonrpcClient']('Settings.SetSettingValue',{'setting':a26_0x3dac('0xde'),'value':_0x65c7a5},function(_0x44f775){console['log'](a26_0x3dac('0xdf'));console[a26_0x3dac('0x43')](_0x44f775);}['bind'](this));}}[a26_0x3dac('0xce')](_0x192603){this[a26_0x3dac('0xc3')](a26_0x3dac('0xe0'),{'setting':a26_0x3dac('0xe1'),'value':_0x192603},function(_0x3570c9){console[a26_0x3dac('0x43')](a26_0x3dac('0xe2'));console['log'](_0x3570c9);}[a26_0x3dac('0x3a')](this));}['kodiCommandClient'](_0x49caed){exec('kodi-send\x20--action=\x22'+_0x49caed+'\x22',function(_0x9bc57a){console[a26_0x3dac('0x43')](_0x9bc57a);});}[a26_0x3dac('0xc3')](_0x4407cd,_0x5a6c72,_0x39af45){const _0x3ac94c={'jsonrpc':'2.0','method':_0x4407cd,'params':_0x5a6c72,'id':0x1};const _0xc94b81={'user':this[a26_0x3dac('0x21')],'pass':this[a26_0x3dac('0x23')]};console[a26_0x3dac('0x43')](a26_0x3dac('0xe3'),_0x3ac94c);console[a26_0x3dac('0x43')](a26_0x3dac('0xe4'),_0xc94b81);this[a26_0x3dac('0x40')][a26_0x3dac('0x41')](this[a26_0x3dac('0x1f')]+a26_0x3dac('0xe5'),_0x3ac94c,![],_0xc94b81)['then'](function(_0x561bb0){_0x39af45(_0x561bb0);})['catch'](function(_0x1cff98){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;