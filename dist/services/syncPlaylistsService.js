var a22_0x2edc=['ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','-pix_fmt','yuv420p','-vf','stderr','stderr:\x20','close','finished\x20mp4\x20convert','http://www.youtube.com/watch?v=','info','Download\x20started','filename:\x20','size:\x20','complete','_filename','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','media_type','/home/osmc/luloclient/media/files/','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','next','throw','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','fs-extra','request','request-progress','child_process','spawn','is-image','youtube-dl','uuid/v4','node-kodi','mt-files-downloader','media/','tempFolder','mediaFolder','files/','playListFile','m3uFile','filesFolder','playlistChanged','downloadFiles','failDownloadFiles','httpClientService','HttpClientService','init','parse','context','readFileSync','config','env','WEB_SERVICE_URL','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','kodi','http://localhost','.lulo123.','checkDependencies','registerClient','loadMediaList','getStatus','bind','playlist','getItems','stringify','playerId','deviceUuid','networkInterfaces','post','http://restapi.lulo.run/player_devices/register','log','writeFileSync','getCurrentlyPlayingVideo','item','label','catch','reportStatus','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','loadMediaList:\x20','newPlayList','emptyDirSync','currentFile','push','length','reloadMediaList','existsSync','removeSync','reboot','Shutdown','toString','\x20of\x20','finishProcess','path','substring','lastIndexOf','split','slice','join','youtube_single','.mp4','image','**********+','checkVideo','download','copySync','downloadYouTube','downloader','videoFile:\x20','media','@type','Video','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','host','pathname','\x20Progress:\x20unknown\x09','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','size',')\x20vs\x20New(','pipe','data','err:\x20','finish','Downloaded\x20','location','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','Error\x20downloading\x20file','createWriteStream'];(function(_0x38b806,_0x356334){var _0x3f462f=function(_0x1d795b){while(--_0x1d795b){_0x38b806['push'](_0x38b806['shift']());}};_0x3f462f(++_0x356334);}(a22_0x2edc,0xdd));var a22_0x32d0=function(_0x1dbc25,_0x3a4286){_0x1dbc25=_0x1dbc25-0x0;var _0xd7d5a2=a22_0x2edc[_0x1dbc25];return _0xd7d5a2;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x38923b,_0x48937c,_0x52980b,_0x4d9669){function _0x4ad0f3(_0x31398d){return _0x31398d instanceof _0x52980b?_0x31398d:new _0x52980b(function(_0x42c79d){_0x42c79d(_0x31398d);});}return new(_0x52980b||(_0x52980b=Promise))(function(_0x468588,_0x5964a1){function _0x37c00f(_0x26dca2){try{_0x9c9259(_0x4d9669[a22_0x32d0('0x0')](_0x26dca2));}catch(_0x3e69d9){_0x5964a1(_0x3e69d9);}}function _0x5eb054(_0x6306ff){try{_0x9c9259(_0x4d9669[a22_0x32d0('0x1')](_0x6306ff));}catch(_0x33f9fd){_0x5964a1(_0x33f9fd);}}function _0x9c9259(_0x1da81d){_0x1da81d['done']?_0x468588(_0x1da81d[a22_0x32d0('0x2')]):_0x4ad0f3(_0x1da81d['value'])[a22_0x32d0('0x3')](_0x37c00f,_0x5eb054);}_0x9c9259((_0x4d9669=_0x4d9669[a22_0x32d0('0x4')](_0x38923b,_0x48937c||[]))[a22_0x32d0('0x0')]());});};Object[a22_0x32d0('0x5')](exports,a22_0x32d0('0x6'),{'value':!![]});const HttpClientService_1=require(a22_0x32d0('0x7'));const mediainfo=require(a22_0x32d0('0x8'));const fs=require('fs');const url=require(a22_0x32d0('0x9'));const http=require('http');const fsExtra=require(a22_0x32d0('0xa'));const request=require(a22_0x32d0('0xb'));const progress=require(a22_0x32d0('0xc'));const spawn=require(a22_0x32d0('0xd'))[a22_0x32d0('0xe')];const isImage=require(a22_0x32d0('0xf'));const format=require('string-template');const os=require('os');const youtubedl=require(a22_0x32d0('0x10'));const uuidv4=require(a22_0x32d0('0x11'));const configFile='config.json';const contextFile='context.json';const urlExists=require('url-exists');const kodi_rpc=require(a22_0x32d0('0x12'));const Downloader=require(a22_0x32d0('0x13'));class SyncPlaylistsService{constructor(){this['mediaFolder']=a22_0x32d0('0x14');this[a22_0x32d0('0x15')]=this[a22_0x32d0('0x16')]+'temp/';this['filesFolder']=this['mediaFolder']+a22_0x32d0('0x17');this[a22_0x32d0('0x18')]=this[a22_0x32d0('0x16')]+'playlist.txt';this[a22_0x32d0('0x19')]=this[a22_0x32d0('0x1a')]+'lulo_playlist.m3u';this['currentFile']=0x0;this[a22_0x32d0('0x1b')]=![];this[a22_0x32d0('0x1c')]=[];this[a22_0x32d0('0x1d')]=[];this['newPlayList']={};this[a22_0x32d0('0x1e')]=new HttpClientService_1[(a22_0x32d0('0x1f'))]();}[a22_0x32d0('0x20')](){this['config']=JSON[a22_0x32d0('0x21')](fs['readFileSync'](configFile));this[a22_0x32d0('0x22')]=JSON['parse'](fs[a22_0x32d0('0x23')](contextFile));this['playerId']=this[a22_0x32d0('0x24')]['playerId'];this['baseURL']=process[a22_0x32d0('0x25')][a22_0x32d0('0x26')]+'deploy/';this[a22_0x32d0('0x27')]=this[a22_0x32d0('0x28')]+a22_0x32d0('0x29');this[a22_0x32d0('0x2a')]=new kodi_rpc({'url':a22_0x32d0('0x2b'),'user':'lulo','password':a22_0x32d0('0x2c')});this[a22_0x32d0('0x2d')]();this[a22_0x32d0('0x2e')]();this['checkFolders']();this[a22_0x32d0('0x2f')]();setInterval(function(){this[a22_0x32d0('0x30')]();}[a22_0x32d0('0x31')](this),0x2710);setInterval(function(){this['registerClient']();}[a22_0x32d0('0x31')](this),0x493e0);}[a22_0x32d0('0x2d')](){}[a22_0x32d0('0x2e')](){this[a22_0x32d0('0x2a')][a22_0x32d0('0x32')][a22_0x32d0('0x33')](0x1)[a22_0x32d0('0x3')](function(_0x287246){const _0x3e96d9=JSON[a22_0x32d0('0x34')](_0x287246);const _0x3a974={'player_id':this[a22_0x32d0('0x35')],'device_uuid':this['config'][a22_0x32d0('0x36')],'network_info':JSON[a22_0x32d0('0x34')](os[a22_0x32d0('0x37')]()),'firmware_info':JSON['stringify'](this[a22_0x32d0('0x22')]),'playlist':_0x3e96d9,'playing_item':'','status':0x0};this[a22_0x32d0('0x1e')][a22_0x32d0('0x38')](a22_0x32d0('0x39'),_0x3a974,![])[a22_0x32d0('0x3')](function(_0x4bf32f){console[a22_0x32d0('0x3a')]('register\x20response:\x20'+Date());})['catch'](function(_0x38d5a7){});console['log'](_0x3a974);}[a22_0x32d0('0x31')](this));const _0x4ee607=this[a22_0x32d0('0x24')][a22_0x32d0('0x36')];if(!_0x4ee607||_0x4ee607==''){this[a22_0x32d0('0x24')][a22_0x32d0('0x36')]=uuidv4();this[a22_0x32d0('0x24')]={'deviceUuid':this[a22_0x32d0('0x24')][a22_0x32d0('0x36')],'playerId':this[a22_0x32d0('0x24')][a22_0x32d0('0x35')]};fs[a22_0x32d0('0x3b')](configFile,JSON[a22_0x32d0('0x34')](this[a22_0x32d0('0x24')]));}}[a22_0x32d0('0x30')](){console[a22_0x32d0('0x3a')]('getStatus');this[a22_0x32d0('0x2a')]['player'][a22_0x32d0('0x3c')]()[a22_0x32d0('0x3')](function(_0x1b4197){const _0x40401d=_0x1b4197[a22_0x32d0('0x3d')][a22_0x32d0('0x3e')];this['reportStatus'](_0x40401d);}['bind'](this))[a22_0x32d0('0x3f')](function(_0x1166e2){console[a22_0x32d0('0x3a')](_0x1166e2);this[a22_0x32d0('0x40')](_0x1166e2);}[a22_0x32d0('0x31')](this));}[a22_0x32d0('0x40')](_0x57b0f1){console[a22_0x32d0('0x3a')](a22_0x32d0('0x41')+_0x57b0f1);const _0x474a03={'player_id':this['playerId'],'device_uuid':this['config'][a22_0x32d0('0x36')],'status':_0x57b0f1!=''&&_0x57b0f1!=null?0x1:0x0,'playing_item':_0x57b0f1};this[a22_0x32d0('0x1e')]['post'](a22_0x32d0('0x42'),_0x474a03,![])[a22_0x32d0('0x3')](function(_0x4c7d51){console[a22_0x32d0('0x3a')](a22_0x32d0('0x43')+Date());})['catch'](function(_0xfaf570){});}[a22_0x32d0('0x44')](){fsExtra[a22_0x32d0('0x45')](this[a22_0x32d0('0x16')],_0x3009be=>{});fsExtra[a22_0x32d0('0x45')](this[a22_0x32d0('0x15')],_0x260f2c=>{});fsExtra[a22_0x32d0('0x45')](this[a22_0x32d0('0x1a')],_0x5a1795=>{});}[a22_0x32d0('0x2f')](){const _0x44b9aa=format(this['playListServiceURL'],this[a22_0x32d0('0x35')]);console[a22_0x32d0('0x3a')](_0x44b9aa);request({'url':_0x44b9aa,'json':!![]},function(_0x2b952b,_0x4163d6,_0xdcf0){console[a22_0x32d0('0x3a')](a22_0x32d0('0x46'));console['log'](_0xdcf0);this[a22_0x32d0('0x47')]=_0xdcf0;this[a22_0x32d0('0x1b')]=this['hasPlayListChanged']();fsExtra[a22_0x32d0('0x48')](this[a22_0x32d0('0x15')]);this[a22_0x32d0('0x1c')]=[];this[a22_0x32d0('0x1d')]=[];this[a22_0x32d0('0x49')]=0x0;for(const _0x6ba572 in _0xdcf0){this[a22_0x32d0('0x1c')][a22_0x32d0('0x4a')](_0xdcf0[_0x6ba572]);}console['log']('Total:\x20'+this[a22_0x32d0('0x1c')]['length']);if(this[a22_0x32d0('0x1c')][a22_0x32d0('0x4b')]>0x0){this['download']();}}[a22_0x32d0('0x31')](this));}[a22_0x32d0('0x4c')](){if(fsExtra[a22_0x32d0('0x4d')](this[a22_0x32d0('0x15')])){fsExtra[a22_0x32d0('0x48')](this[a22_0x32d0('0x15')]);}if(fsExtra[a22_0x32d0('0x4d')](this[a22_0x32d0('0x18')])){fsExtra[a22_0x32d0('0x48')](this[a22_0x32d0('0x18')]);}if(!fsExtra['existsSync'](this['playListFile'])){fsExtra[a22_0x32d0('0x4e')](this['playListFile']);}if(!fsExtra['existsSync'](this[a22_0x32d0('0x19')])){fsExtra['removeSync'](this[a22_0x32d0('0x19')]);}this[a22_0x32d0('0x2f')]();}[a22_0x32d0('0x4f')](){this[a22_0x32d0('0x2a')]['System'][a22_0x32d0('0x50')]();}['hasPlayListChanged'](){const _0x8ee736=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a22_0x32d0('0x4d')](this[a22_0x32d0('0x18')])){return!![];}else{const _0x410156=fsExtra[a22_0x32d0('0x23')](this['playListFile'])[a22_0x32d0('0x51')]();if(_0x410156!=_0x8ee736){return!![];}}}catch(_0x4ab691){console[a22_0x32d0('0x3a')](_0x4ab691);}return![];}['download'](){console['log']('this.currentFile:\x20'+this[a22_0x32d0('0x49')]+a22_0x32d0('0x52')+this[a22_0x32d0('0x1c')][a22_0x32d0('0x4b')]);if(this[a22_0x32d0('0x49')]>=this[a22_0x32d0('0x1c')][a22_0x32d0('0x4b')]){this[a22_0x32d0('0x53')]();return;}const _0x58e75d=String(this[a22_0x32d0('0x1c')][this[a22_0x32d0('0x49')]][a22_0x32d0('0x54')]);const _0x3c0bd4=this[a22_0x32d0('0x1c')][this[a22_0x32d0('0x49')]]['media_type'];let _0x4bf831=_0x58e75d[a22_0x32d0('0x55')](_0x58e75d[a22_0x32d0('0x56')]('/')+0x1);const _0x448d35=_0x4bf831[a22_0x32d0('0x57')]('.')[a22_0x32d0('0x58')](0x0,-0x1)[a22_0x32d0('0x59')]('.');let _0x4b1c3a=this['baseURL']+_0x58e75d;const _0x58cbea=_0x4b1c3a[a22_0x32d0('0x57')]('.')[a22_0x32d0('0x58')](0x0,-0x1)[a22_0x32d0('0x59')]('.');if(_0x3c0bd4==a22_0x32d0('0x5a')){_0x4bf831=_0x4bf831+a22_0x32d0('0x5b');}else if(_0x3c0bd4==a22_0x32d0('0x5c')){_0x4bf831=_0x448d35+'.mp4';_0x4b1c3a=_0x58cbea+a22_0x32d0('0x5b');}console['log'](a22_0x32d0('0x5d'));console[a22_0x32d0('0x3a')](_0x58e75d);console['log'](_0x3c0bd4);console[a22_0x32d0('0x3a')](_0x4bf831);console['log'](_0x4b1c3a);console[a22_0x32d0('0x3a')](_0x448d35);console[a22_0x32d0('0x3a')](_0x58cbea);console[a22_0x32d0('0x3a')](a22_0x32d0('0x5d'));if(fsExtra[a22_0x32d0('0x4d')](this['tempFolder']+_0x4bf831)){this[a22_0x32d0('0x5e')](this[a22_0x32d0('0x15')]+_0x4bf831)[a22_0x32d0('0x3')](function(_0x6b48a1){if(_0x6b48a1){this[a22_0x32d0('0x49')]++;}else{this[a22_0x32d0('0x1b')]=!![];}this[a22_0x32d0('0x5f')]();}[a22_0x32d0('0x31')](this));}else if(fsExtra[a22_0x32d0('0x4d')](this[a22_0x32d0('0x1a')]+_0x4bf831)){this[a22_0x32d0('0x5e')](this['filesFolder']+_0x4bf831)['then'](function(_0x396b99){if(_0x396b99){fsExtra[a22_0x32d0('0x60')](this[a22_0x32d0('0x1a')]+_0x4bf831,this[a22_0x32d0('0x15')]+_0x4bf831);this['currentFile']++;}else{this['playlistChanged']=!![];}this[a22_0x32d0('0x5f')]();}[a22_0x32d0('0x31')](this));}else{console['log']('Downloading:\x20'+_0x4b1c3a);this[a22_0x32d0('0x1b')]=!![];if(_0x3c0bd4==a22_0x32d0('0x5a')){this[a22_0x32d0('0x61')](_0x58e75d);}else{this[a22_0x32d0('0x62')](_0x4b1c3a,_0x4bf831,_0x3c0bd4);}}}[a22_0x32d0('0x5e')](_0xe08f5d){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x32d0('0x3a')](a22_0x32d0('0x63')+_0xe08f5d);const _0x2ad425=yield mediainfo(_0xe08f5d)[a22_0x32d0('0x3f')](_0x33c459=>{console[a22_0x32d0('0x3a')](_0x33c459);fsExtra[a22_0x32d0('0x4e')](_0xe08f5d);return![];});const _0x693754=_0x2ad425[a22_0x32d0('0x64')]['track']['length']>0x1&&_0x2ad425[a22_0x32d0('0x64')]['track'][0x1][a22_0x32d0('0x65')]==a22_0x32d0('0x66');if(!_0x693754){fsExtra['removeSync'](_0xe08f5d);}console['log']('mediainfo\x20check:'+_0x693754);return _0x693754;});}[a22_0x32d0('0x62')](_0x2320d5,_0xfdb613,_0x326852){const _0x245af7=new Downloader();console[a22_0x32d0('0x3a')](_0x2320d5);console[a22_0x32d0('0x3a')](_0xfdb613);console[a22_0x32d0('0x3a')](_0x326852);const _0x300c51=_0x245af7[a22_0x32d0('0x5f')](_0x2320d5,this[a22_0x32d0('0x15')]+_0xfdb613);urlExists(_0x2320d5,function(_0x52cce8,_0x5f46cc){if(_0x5f46cc){if(this['failDownloadFiles'][a22_0x32d0('0x67')](this[a22_0x32d0('0x49')])){const _0x3027ea=this[a22_0x32d0('0x1d')][a22_0x32d0('0x68')](this[a22_0x32d0('0x49')]);if(_0x3027ea>-0x1){this[a22_0x32d0('0x1d')][a22_0x32d0('0x69')](_0x3027ea,0x1);}}console[a22_0x32d0('0x3a')](a22_0x32d0('0x6a')+_0x2320d5);_0x300c51[a22_0x32d0('0x6b')]();}else{if(!this['failDownloadFiles'][a22_0x32d0('0x67')](this[a22_0x32d0('0x49')])){this[a22_0x32d0('0x1d')][a22_0x32d0('0x4a')](this['currentFile']);}console[a22_0x32d0('0x3a')](a22_0x32d0('0x6c')+_0x2320d5);this[a22_0x32d0('0x49')]++;this['download']();}}[a22_0x32d0('0x31')](this));_0x300c51['on']('start',function(_0x300c51){console[a22_0x32d0('0x3a')](a22_0x32d0('0x6d')+_0x2320d5);});_0x300c51['on'](a22_0x32d0('0x6e'),function(_0x300c51){console['log'](a22_0x32d0('0x6f'));this[a22_0x32d0('0x5f')]();}[a22_0x32d0('0x31')](this));_0x300c51['on'](a22_0x32d0('0x70'),function(_0x300c51){console[a22_0x32d0('0x3a')](a22_0x32d0('0x70'));console[a22_0x32d0('0x3a')](a22_0x32d0('0x71')+_0xfdb613);console['log'](a22_0x32d0('0x72')+_0x326852);this[a22_0x32d0('0x5e')](this[a22_0x32d0('0x15')]+_0xfdb613)[a22_0x32d0('0x3')](function(_0x3c1333){if(_0x3c1333){this['currentFile']++;}this[a22_0x32d0('0x5f')]();}[a22_0x32d0('0x31')](this));}[a22_0x32d0('0x31')](this));_0x300c51['on'](a22_0x32d0('0x73'),function(_0x300c51){console[a22_0x32d0('0x3a')](a22_0x32d0('0x73'));});_0x300c51['on'](a22_0x32d0('0x74'),function(_0x300c51){console[a22_0x32d0('0x3a')](a22_0x32d0('0x74'));});_0x300c51['on'](a22_0x32d0('0x75'),function(_0x300c51){console[a22_0x32d0('0x3a')](a22_0x32d0('0x75'));});}[a22_0x32d0('0x76')](_0x5d53c7,_0x27c307,_0x5879ee,_0x5c10fe){console[a22_0x32d0('0x3a')](a22_0x32d0('0x76'));console[a22_0x32d0('0x3a')](_0x5d53c7);const _0x26ab15=!![];let _0x24e0b4=0x0;const _0x1cfbef='';console['log'](a22_0x32d0('0x77')+_0x5d53c7+a22_0x32d0('0x78')+_0x27c307);if(_0x24e0b4){if(_0x24e0b4>0x5){_0x5c10fe('Max\x20redirects\x20reached',_0x5d53c7,_0x5879ee,null);return;}}else{_0x24e0b4=0x0;}const _0x1f9d22=this['tempFolder']+_0x27c307;let _0x5d2493;if(_0x5c10fe===undefined){console[a22_0x32d0('0x3a')](a22_0x32d0('0x79')+_0x5d53c7+a22_0x32d0('0x78')+_0x1f9d22);_0x5c10fe=function(_0x213ad9,_0x309c4b){console['log'](a22_0x32d0('0x7a'),_0x213ad9,_0x309c4b);};}http[a22_0x32d0('0x7b')][a22_0x32d0('0x7c')]=0x64;const _0x5d98ed={'host':url['parse'](_0x5d53c7)[a22_0x32d0('0x7d')],'port':0x50,'path':url['parse'](_0x5d53c7)[a22_0x32d0('0x7e')],'agent':![]};const _0x304e01=http['get'](_0x5d98ed,function(_0x376ada){let _0x809e2d=0x0;let _0xc16dea=0x0;function _0x1307b0(){if(_0x809e2d===undefined){console['log'](_0x27c307+a22_0x32d0('0x7f')+_0xc16dea+'/'+'?');}const _0x575398=_0xc16dea/_0x809e2d*0x64;console[a22_0x32d0('0x3a')](_0x27c307+'\x20Progress:\x20'+_0x575398+'%\x09'+_0xc16dea+'/'+_0x809e2d);}console[a22_0x32d0('0x3a')](_0x27c307+'\x20'+_0x376ada[a22_0x32d0('0x80')]);switch(_0x376ada['statusCode']){case 0xc8:_0x809e2d=_0x376ada[a22_0x32d0('0x81')][a22_0x32d0('0x82')]||_0x1cfbef;fs[a22_0x32d0('0x83')](_0x1f9d22,function(_0x26017c,_0x4f4caf){if(!_0x26017c){console[a22_0x32d0('0x3a')](a22_0x32d0('0x84')+_0x1f9d22);if(_0x4f4caf['size']==_0x809e2d){console[a22_0x32d0('0x3a')]('And\x20the\x20file\x20size\x20matches\x20('+_0x809e2d+')');console[a22_0x32d0('0x3a')]('Redownloading');}else{console[a22_0x32d0('0x3a')](a22_0x32d0('0x85')+_0x4f4caf[a22_0x32d0('0x86')]+a22_0x32d0('0x87')+_0x809e2d+')');}}_0x5d2493=fs['createWriteStream'](_0x1f9d22);_0x376ada[a22_0x32d0('0x88')](_0x5d2493);_0x376ada['on'](a22_0x32d0('0x89'),function(_0x446038){_0xc16dea+=_0x446038[a22_0x32d0('0x4b')];_0x1307b0();});_0x304e01['on'](a22_0x32d0('0x6e'),function(_0x26017c){console[a22_0x32d0('0x3a')](a22_0x32d0('0x8a'));console[a22_0x32d0('0x3a')](_0x26017c);});_0x5d2493['on'](a22_0x32d0('0x8b'),function(){console[a22_0x32d0('0x3a')](a22_0x32d0('0x8c')+_0x5d53c7+'\x20to\x20'+_0x27c307);_0x5c10fe(null,_0x27c307,_0x5879ee,_0x27c307);}[a22_0x32d0('0x31')](this));});break;case 0x12e:const _0x3b57a4=_0x376ada[a22_0x32d0('0x81')][a22_0x32d0('0x8d')];console['log']('Redirect\x20'+_0x5d53c7+'\x20to\x20'+_0x3b57a4);if(_0x24e0b4<0x5){this[a22_0x32d0('0x76')](_0x3b57a4,_0x27c307,_0x5c10fe,_0x24e0b4++);}else{console['error'](a22_0x32d0('0x8e')+_0x5d53c7+'.');_0x5c10fe(a22_0x32d0('0x8f'),null,null,null);}return;case 0x194:console['log'](a22_0x32d0('0x90')+_0x5d53c7);default:console['log'](a22_0x32d0('0x91')+_0x5d53c7+a22_0x32d0('0x92')+_0x376ada[a22_0x32d0('0x80')]);_0x304e01[a22_0x32d0('0x93')]();_0x5c10fe(_0x376ada[a22_0x32d0('0x80')],null,null,null);return;}})['on'](a22_0x32d0('0x6e'),function(_0x10534e){console[a22_0x32d0('0x3a')](a22_0x32d0('0x94')+_0x5d53c7+'\x20'+_0x10534e['message']);_0x5c10fe(_0x10534e,null,null,null);});}['downloadHTTPFileCallback'](_0x1c50c8,_0x501902,_0xd2c086,_0x5e5a90){console[a22_0x32d0('0x3a')](a22_0x32d0('0x95'));console[a22_0x32d0('0x3a')](_0x1c50c8);console['log'](_0x501902);console[a22_0x32d0('0x3a')](_0xd2c086);console[a22_0x32d0('0x3a')](_0x5e5a90);if(_0xd2c086==a22_0x32d0('0x5c')){const _0x3c501a=this['downloadFiles'][this[a22_0x32d0('0x49')]]['duration']!=null?this[a22_0x32d0('0x1c')][this['currentFile']][a22_0x32d0('0x96')]:0x1e;this[a22_0x32d0('0x97')](_0x5e5a90,_0x3c501a);}else if(_0xd2c086==a22_0x32d0('0x98')){if(_0x1c50c8==null&&_0x501902!=''){this[a22_0x32d0('0x49')]++;}this[a22_0x32d0('0x5f')]();}console['log'](this[a22_0x32d0('0x49')]);}[a22_0x32d0('0x99')](_0x48e110,_0x30e19a,_0x3f3cf6){progress(request(_0x48e110),{})['on'](a22_0x32d0('0x9a'),function(_0x5526e5){console[a22_0x32d0('0x3a')](_0x5526e5);})['on'](a22_0x32d0('0x6e'),function(_0x292f14){console[a22_0x32d0('0x3a')](a22_0x32d0('0x9b'));this[a22_0x32d0('0x5f')]();})['on'](a22_0x32d0('0x70'),function(){console[a22_0x32d0('0x3a')](a22_0x32d0('0x71')+_0x30e19a);console[a22_0x32d0('0x3a')](a22_0x32d0('0x72')+_0x3f3cf6);if(_0x3f3cf6==a22_0x32d0('0x5c')){const _0x30c507=this[a22_0x32d0('0x1c')][this[a22_0x32d0('0x49')]][a22_0x32d0('0x96')]!=null?this[a22_0x32d0('0x1c')][this[a22_0x32d0('0x49')]]['duration']:0x1e;this[a22_0x32d0('0x97')](_0x30e19a,_0x30c507);}else if(_0x3f3cf6=='video'){this[a22_0x32d0('0x49')]++;this[a22_0x32d0('0x5f')]();}}[a22_0x32d0('0x31')](this))[a22_0x32d0('0x88')](fs[a22_0x32d0('0x9c')](this[a22_0x32d0('0x15')]+_0x30e19a));}[a22_0x32d0('0x97')](_0x2d43b7,_0xf451f9=0x1e){const _0x145cb7=this[a22_0x32d0('0x15')]+_0x2d43b7;console[a22_0x32d0('0x3a')](_0x145cb7);console[a22_0x32d0('0x3a')](_0x2d43b7);const _0x16180d=_0x2d43b7[a22_0x32d0('0x57')]('.')[a22_0x32d0('0x58')](0x0,-0x1)[a22_0x32d0('0x59')]('.');const _0x13399c=a22_0x32d0('0x9d');const _0x31b63b=['-y','-r',a22_0x32d0('0x9e'),a22_0x32d0('0x9f'),'1',a22_0x32d0('0xa0'),a22_0x32d0('0xa1'),'-i',_0x145cb7,'-t',String(_0xf451f9),a22_0x32d0('0xa2'),'libx264',a22_0x32d0('0xa3'),a22_0x32d0('0xa4'),'-r','25',a22_0x32d0('0xa5'),'scale=1920:1080',this['tempFolder']+_0x16180d+a22_0x32d0('0x5b')];const _0x5b23a0=spawn(_0x13399c,_0x31b63b);_0x5b23a0['stdout']['on'](a22_0x32d0('0x89'),function(_0x639c30){console[a22_0x32d0('0x3a')]('Converting\x20'+_0x145cb7);});_0x5b23a0[a22_0x32d0('0xa6')]['on'](a22_0x32d0('0x89'),function(_0x4375eb){console['log'](a22_0x32d0('0xa7')+_0x4375eb);}[a22_0x32d0('0x31')](this));_0x5b23a0['on'](a22_0x32d0('0xa8'),function(){console[a22_0x32d0('0x3a')](a22_0x32d0('0xa9'));this[a22_0x32d0('0x49')]++;this[a22_0x32d0('0x5f')]();}['bind'](this));}[a22_0x32d0('0x61')](_0x137f09){const _0x40e580=this[a22_0x32d0('0x15')]+'/'+_0x137f09+'.mp4';const _0x219cce=youtubedl(a22_0x32d0('0xaa')+_0x137f09,['--format=18'],{'cwd':__dirname});_0x219cce['on'](a22_0x32d0('0xab'),function(_0x38e8f9){console[a22_0x32d0('0x3a')](a22_0x32d0('0xac'));console[a22_0x32d0('0x3a')](a22_0x32d0('0xad')+_0x38e8f9['_filename']);console[a22_0x32d0('0x3a')](a22_0x32d0('0xae')+_0x38e8f9['size']);});_0x219cce['on'](a22_0x32d0('0xaf'),function complete(_0xa1a2dd){'use strict';console[a22_0x32d0('0x3a')](a22_0x32d0('0xad')+_0xa1a2dd[a22_0x32d0('0xb0')]+'\x20already\x20downloaded.');});_0x219cce['on'](a22_0x32d0('0x70'),function(){console[a22_0x32d0('0x3a')](a22_0x32d0('0xb1'));this[a22_0x32d0('0x5e')](_0x40e580)['then'](function(_0x477058){if(_0x477058){this['currentFile']++;}this[a22_0x32d0('0x5f')]();}[a22_0x32d0('0x31')](this));}[a22_0x32d0('0x31')](this));_0x219cce['pipe'](fs[a22_0x32d0('0x9c')](_0x40e580));}[a22_0x32d0('0x53')](){console[a22_0x32d0('0x3a')](a22_0x32d0('0xb2'));if(this[a22_0x32d0('0x1b')]){if(this[a22_0x32d0('0x1d')][a22_0x32d0('0x4b')]==0x0){fs[a22_0x32d0('0x3b')](this[a22_0x32d0('0x18')],JSON[a22_0x32d0('0x34')](this[a22_0x32d0('0x47')]));let _0x2f2e38=a22_0x32d0('0xb3')+'\x0d\x0a'+a22_0x32d0('0xb4')+'\x0d\x0a';for(const _0x195480 in this[a22_0x32d0('0x1c')]){const _0x3299bb=this[a22_0x32d0('0x1c')][_0x195480]['path'];const _0x3fe4ad=this[a22_0x32d0('0x1c')][_0x195480][a22_0x32d0('0xb5')];const _0x51aafb=_0x3299bb[a22_0x32d0('0x55')](_0x3299bb[a22_0x32d0('0x56')]('/')+0x1);let _0x342885=_0x51aafb[a22_0x32d0('0x57')]('.')['slice'](0x0,-0x1)['join']('.');if(_0x3fe4ad==a22_0x32d0('0x5a')){_0x342885=_0x3299bb;}_0x2f2e38+=a22_0x32d0('0xb6')+_0x342885+'.mp4'+'\x0d\x0a';}fsExtra[a22_0x32d0('0x48')](this[a22_0x32d0('0x1a')]);fsExtra[a22_0x32d0('0x60')](this[a22_0x32d0('0x15')],this['filesFolder']);fsExtra[a22_0x32d0('0x3b')](this['m3uFile'],_0x2f2e38);fsExtra[a22_0x32d0('0x48')](this[a22_0x32d0('0x15')]);console[a22_0x32d0('0x3a')](a22_0x32d0('0xb7'));const _0x2de884=spawn(a22_0x32d0('0xb8'),['-r',a22_0x32d0('0xb9')]);}else{console[a22_0x32d0('0x3a')](a22_0x32d0('0xba'));this[a22_0x32d0('0x49')]=0x0;setTimeout(function(){this[a22_0x32d0('0x5f')]();}[a22_0x32d0('0x31')](this),0x1388);}}else{console[a22_0x32d0('0x3a')](a22_0x32d0('0xbb'));}}}exports[a22_0x32d0('0xbc')]=SyncPlaylistsService;