var a25_0x71d6=['catch','deviceUuid','writeFileSync','getStatus','getCurrentlyPlayingVideo','item','label','reportStatus','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','checkFolders','ensureDir','tempFolder','loadMediaList','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','downloadFiles','push','length','reloadMediaList','forceReload','existsSync','removeSync','m3uFile','toString','download','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','substring','split','slice','join','youtube_single','.mp4','image','**********+','playlistChanged','checkVideo','copySync','downloader','m3uFileUpdate','track','Video','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','error:\x20','end','Downloaded:\x20','mediaType:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','Max\x20redirects\x20reached','\x20to\x20','downloadFile\x20callback\x20result\x20undefined:\x20','host','get','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','pipe','err:\x20','finish','headers','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','downloadRequestFile','progress','Error\x20downloading\x20file','video','createWriteStream','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','stdout','data','Converting\x20','stderr:\x20','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v=','youtubeURL:\x20','--format=18','--no-check-certificate','Download\x20started','filename:\x20','complete','_filename','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','this.playListFile:\x20','emptyDir','copy','Refreshing..','refreshPlayer','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','Parse','end_date','lastIndexOf','/home/osmc/luloclient/media/files/','trim','kodiCommandClient','ActivateWindow(fullscreenvideo)','reboot','Rebooting','header_active','enableClock','turnOffTV','turnOnTV','CECActivateSource()','setRss','xmlContent:\x20','xml2js','parseString','result:\x20%j','none','rssfeeds','set','feed','Builder','buildObject','jsonrpcClient','Settings.SetSettingValue','lookandfeel.enablerssfeeds','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','jsonrpcClient\x20options','/jsonrpc','__awaiter','next','throw','done','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','http','fs-extra','request-progress','child_process','spawn','is-image','uuid/v4','config.json','package.json','url-exists','mt-files-downloader','mediaFolder','media/','playListFile','playlist.txt','filesFolder','lulo_playlist.m3u','currentFile','failDownloadFiles','newPlayList','http://localhost','kodiUser','kodiPassword','.lulo123.','httpClientService','HttpClientService','PlayerService','init','parse','readFileSync','context','playerId','baseURL','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','api/player.php?player_id={0}','kodi','kodiHost','checkDependencies','registerClient','updateSettings','bind','checkSchedule','playlist','stringify','config','version','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20'];(function(_0x298875,_0x16301f){var _0x3b4f03=function(_0x32bd60){while(--_0x32bd60){_0x298875['push'](_0x298875['shift']());}};_0x3b4f03(++_0x16301f);}(a25_0x71d6,0xab));var a25_0x3043=function(_0x17595a,_0x5ee7a0){_0x17595a=_0x17595a-0x0;var _0x657cd2=a25_0x71d6[_0x17595a];return _0x657cd2;};'use strict';var __awaiter=this&&this[a25_0x3043('0x0')]||function(_0x27fba3,_0x289d19,_0x212e58,_0x3510d8){function _0x341724(_0x89df45){return _0x89df45 instanceof _0x212e58?_0x89df45:new _0x212e58(function(_0x3a4d13){_0x3a4d13(_0x89df45);});}return new(_0x212e58||(_0x212e58=Promise))(function(_0x23b301,_0x465026){function _0x36618a(_0x267720){try{_0x2ae8b8(_0x3510d8[a25_0x3043('0x1')](_0x267720));}catch(_0x563315){_0x465026(_0x563315);}}function _0x4e39ef(_0x28fb31){try{_0x2ae8b8(_0x3510d8[a25_0x3043('0x2')](_0x28fb31));}catch(_0x2df96d){_0x465026(_0x2df96d);}}function _0x2ae8b8(_0x32c7be){_0x32c7be[a25_0x3043('0x3')]?_0x23b301(_0x32c7be[a25_0x3043('0x4')]):_0x341724(_0x32c7be[a25_0x3043('0x4')])[a25_0x3043('0x5')](_0x36618a,_0x4e39ef);}_0x2ae8b8((_0x3510d8=_0x3510d8[a25_0x3043('0x6')](_0x27fba3,_0x289d19||[]))[a25_0x3043('0x1')]());});};Object[a25_0x3043('0x7')](exports,a25_0x3043('0x8'),{'value':!![]});const HttpClientService_1=require(a25_0x3043('0x9'));const playerService_1=require(a25_0x3043('0xa'));const dateUtils_1=require('../infrastructure/utils/dateUtils');const mediainfo=require(a25_0x3043('0xb'));const fs=require('fs');const url=require('url');const http=require(a25_0x3043('0xc'));const fsExtra=require(a25_0x3043('0xd'));const request=require('request');const progress=require(a25_0x3043('0xe'));const spawn=require(a25_0x3043('0xf'))[a25_0x3043('0x10')];const exec=require(a25_0x3043('0xf'))['exec'];const isImage=require(a25_0x3043('0x11'));const format=require('string-template');const os=require('os');const youtubedl=require('youtube-dl');const uuidv4=require(a25_0x3043('0x12'));const configFile=a25_0x3043('0x13');const contextFile=a25_0x3043('0x14');const urlExists=require(a25_0x3043('0x15'));const kodi_rpc=require('node-kodi');const Downloader=require(a25_0x3043('0x16'));class SyncPlaylistsService{constructor(){this[a25_0x3043('0x17')]=a25_0x3043('0x18');this['tempFolder']=this[a25_0x3043('0x17')]+'temp/';this['filesFolder']=this[a25_0x3043('0x17')]+'files/';this[a25_0x3043('0x19')]=this[a25_0x3043('0x17')]+a25_0x3043('0x1a');this['m3uFile']=this[a25_0x3043('0x1b')]+a25_0x3043('0x1c');this[a25_0x3043('0x1d')]=0x0;this['playlistChanged']=![];this['downloadFiles']=[];this[a25_0x3043('0x1e')]=[];this[a25_0x3043('0x1f')]={};this['kodiHost']=a25_0x3043('0x20');this[a25_0x3043('0x21')]='lulo';this[a25_0x3043('0x22')]=a25_0x3043('0x23');this['forceReload']=![];this[a25_0x3043('0x24')]=new HttpClientService_1[(a25_0x3043('0x25'))]();this['playerService']=new playerService_1[(a25_0x3043('0x26'))]();}[a25_0x3043('0x27')](){this['config']=JSON[a25_0x3043('0x28')](fs[a25_0x3043('0x29')](configFile));this[a25_0x3043('0x2a')]=JSON['parse'](fs[a25_0x3043('0x29')](contextFile));this[a25_0x3043('0x2b')]=this['config'][a25_0x3043('0x2b')];this[a25_0x3043('0x2c')]=process['env'][a25_0x3043('0x2d')]+a25_0x3043('0x2e');this[a25_0x3043('0x2f')]=this['baseURL']+a25_0x3043('0x30');this['playerServiceURL']=this[a25_0x3043('0x2c')]+a25_0x3043('0x31');this[a25_0x3043('0x32')]=new kodi_rpc({'url':this[a25_0x3043('0x33')],'user':this[a25_0x3043('0x21')],'password':this[a25_0x3043('0x22')]});this[a25_0x3043('0x34')]();this[a25_0x3043('0x35')]();this['checkFolders']();this['loadMediaList']();this[a25_0x3043('0x36')]();setInterval(function(){this['getStatus']();}[a25_0x3043('0x37')](this),0x2710);setInterval(function(){this[a25_0x3043('0x35')]();}[a25_0x3043('0x37')](this),0x493e0);setInterval(function(){this[a25_0x3043('0x38')]();}[a25_0x3043('0x37')](this),0x2710);}['checkDependencies'](){}[a25_0x3043('0x35')](){this['kodi'][a25_0x3043('0x39')]['getItems'](0x1)[a25_0x3043('0x5')](function(_0x2d4650){const _0x37e340=JSON[a25_0x3043('0x3a')](_0x2d4650);const _0x436321={'player_id':this[a25_0x3043('0x2b')],'device_uuid':this[a25_0x3043('0x3b')]['deviceUuid'],'network_info':JSON['stringify'](os['networkInterfaces']()),'firmware_info':JSON[a25_0x3043('0x3a')](this[a25_0x3043('0x2a')][a25_0x3043('0x3c')]),'playlist':_0x37e340,'playing_item':'','status':0x0};this[a25_0x3043('0x24')][a25_0x3043('0x3d')](a25_0x3043('0x3e'),_0x436321,![])['then'](function(_0x1e6335){console[a25_0x3043('0x3f')](a25_0x3043('0x40')+Date());})[a25_0x3043('0x41')](function(_0x921142){});console[a25_0x3043('0x3f')](_0x436321);}[a25_0x3043('0x37')](this));const _0x22194a=this[a25_0x3043('0x3b')]['deviceUuid'];if(!_0x22194a||_0x22194a==''){this['config'][a25_0x3043('0x42')]=uuidv4();this[a25_0x3043('0x3b')]={'deviceUuid':this['config'][a25_0x3043('0x42')],'playerId':this[a25_0x3043('0x3b')][a25_0x3043('0x2b')]};fs[a25_0x3043('0x43')](configFile,JSON['stringify'](this['config']));}}[a25_0x3043('0x44')](){console[a25_0x3043('0x3f')](a25_0x3043('0x44'));this[a25_0x3043('0x32')]['player'][a25_0x3043('0x45')]()[a25_0x3043('0x5')](function(_0x135f25){const _0x4f4446=_0x135f25[a25_0x3043('0x46')][a25_0x3043('0x47')];this[a25_0x3043('0x48')](_0x4f4446);}[a25_0x3043('0x37')](this))[a25_0x3043('0x41')](function(_0x183ac9){console[a25_0x3043('0x3f')](_0x183ac9);this['reportStatus'](JSON['stringify'](_0x183ac9));}[a25_0x3043('0x37')](this));}['reportStatus'](_0x47f3a3){console[a25_0x3043('0x3f')]('reportStatus\x20playingItem:\x20'+_0x47f3a3);const _0x4990f9={'player_id':this[a25_0x3043('0x2b')],'device_uuid':this[a25_0x3043('0x3b')]['deviceUuid'],'status':_0x47f3a3!=''&&_0x47f3a3!=null?0x1:0x0,'playing_item':_0x47f3a3};this[a25_0x3043('0x24')][a25_0x3043('0x3d')](a25_0x3043('0x49'),_0x4990f9,![])[a25_0x3043('0x5')](function(_0xc06712){console[a25_0x3043('0x3f')](a25_0x3043('0x4a'));})[a25_0x3043('0x41')](function(_0x532474){});}[a25_0x3043('0x4b')](){fsExtra[a25_0x3043('0x4c')](this[a25_0x3043('0x17')],_0x5467f0=>{});fsExtra[a25_0x3043('0x4c')](this[a25_0x3043('0x4d')],_0x176bf7=>{});fsExtra['ensureDir'](this[a25_0x3043('0x1b')],_0x22af5c=>{});}[a25_0x3043('0x4e')](){const _0x2a9f9b=format(this['playListServiceURL'],this['playerId']);console[a25_0x3043('0x3f')](_0x2a9f9b);request({'url':_0x2a9f9b,'json':!![]},function(_0x495645,_0x21aa8f,_0x194b9d){console[a25_0x3043('0x3f')](a25_0x3043('0x4f'));this['newPlayList']=_0x194b9d;this['playlistChanged']=this[a25_0x3043('0x50')]();fsExtra[a25_0x3043('0x51')](this['tempFolder']);this[a25_0x3043('0x52')]=[];this['failDownloadFiles']=[];this[a25_0x3043('0x1d')]=0x0;for(const _0x57669d in _0x194b9d){this['downloadFiles'][a25_0x3043('0x53')](_0x194b9d[_0x57669d]);}console[a25_0x3043('0x3f')]('Total\x20to\x20download:\x20'+this[a25_0x3043('0x52')][a25_0x3043('0x54')]);if(this['downloadFiles'][a25_0x3043('0x54')]>0x0){this['download']();}}[a25_0x3043('0x37')](this));}[a25_0x3043('0x55')](){this[a25_0x3043('0x56')]=!![];if(fsExtra[a25_0x3043('0x57')](this[a25_0x3043('0x4d')])){fsExtra[a25_0x3043('0x51')](this['tempFolder']);}if(fsExtra[a25_0x3043('0x57')](this[a25_0x3043('0x1b')])){fsExtra['emptyDirSync'](this[a25_0x3043('0x1b')]);}if(!fsExtra[a25_0x3043('0x57')](this[a25_0x3043('0x19')])){fsExtra[a25_0x3043('0x58')](this[a25_0x3043('0x19')]);}if(!fsExtra[a25_0x3043('0x57')](this['m3uFile'])){fsExtra[a25_0x3043('0x58')](this[a25_0x3043('0x59')]);}this['loadMediaList']();}['hasPlayListChanged'](){const _0xd1f5d0=JSON['stringify'](this['newPlayList']);try{if(!fsExtra[a25_0x3043('0x57')](this['playListFile'])){return!![];}else{const _0x196db6=fsExtra[a25_0x3043('0x29')](this[a25_0x3043('0x19')])[a25_0x3043('0x5a')]();if(_0x196db6!=_0xd1f5d0){return!![];}}}catch(_0x33d634){console['log'](_0x33d634);}return![];}[a25_0x3043('0x5b')](){console[a25_0x3043('0x3f')](a25_0x3043('0x5c')+this['currentFile']+a25_0x3043('0x5d')+this['downloadFiles']['length']);if(this['currentFile']>=this[a25_0x3043('0x52')]['length']){this[a25_0x3043('0x5e')]();return;}const _0xd491ef=String(this['downloadFiles'][this[a25_0x3043('0x1d')]]['path']);const _0x2b1a84=this[a25_0x3043('0x52')][this[a25_0x3043('0x1d')]][a25_0x3043('0x5f')];let _0x428cc9=_0xd491ef[a25_0x3043('0x60')](_0xd491ef['lastIndexOf']('/')+0x1);const _0x3b3985=_0x428cc9[a25_0x3043('0x61')]('.')[a25_0x3043('0x62')](0x0,-0x1)[a25_0x3043('0x63')]('.');let _0xfa9f75=this[a25_0x3043('0x2c')]+_0xd491ef;const _0x1a4ac3=_0xfa9f75['split']('.')[a25_0x3043('0x62')](0x0,-0x1)[a25_0x3043('0x63')]('.');if(_0x2b1a84==a25_0x3043('0x64')){_0x428cc9=_0x428cc9+a25_0x3043('0x65');}else if(_0x2b1a84==a25_0x3043('0x66')){_0x428cc9=_0x3b3985+a25_0x3043('0x65');_0xfa9f75=_0x1a4ac3+a25_0x3043('0x65');}console[a25_0x3043('0x3f')](a25_0x3043('0x67'));console[a25_0x3043('0x3f')](_0xd491ef);console[a25_0x3043('0x3f')](_0x2b1a84);console[a25_0x3043('0x3f')](_0x428cc9);console[a25_0x3043('0x3f')](_0xfa9f75);console[a25_0x3043('0x3f')](_0x3b3985);console['log'](_0x1a4ac3);console['log'](a25_0x3043('0x67'));if(fsExtra[a25_0x3043('0x57')](this['tempFolder']+_0x428cc9)){this['checkVideo'](this[a25_0x3043('0x4d')]+_0x428cc9)[a25_0x3043('0x5')](function(_0x196943){if(_0x196943){this['currentFile']++;}else{this[a25_0x3043('0x68')]=!![];}this[a25_0x3043('0x5b')]();}[a25_0x3043('0x37')](this));}else if(fsExtra[a25_0x3043('0x57')](this[a25_0x3043('0x1b')]+_0x428cc9)){this[a25_0x3043('0x69')](this[a25_0x3043('0x1b')]+_0x428cc9)['then'](function(_0x200282){if(_0x200282){fsExtra[a25_0x3043('0x6a')](this[a25_0x3043('0x1b')]+_0x428cc9,this['tempFolder']+_0x428cc9);this[a25_0x3043('0x1d')]++;}else{this[a25_0x3043('0x68')]=!![];}this['download']();}[a25_0x3043('0x37')](this));}else{console[a25_0x3043('0x3f')]('Downloading:\x20'+_0xfa9f75);this['playlistChanged']=!![];if(_0x2b1a84==a25_0x3043('0x64')){this['downloadYouTube'](_0xd491ef);}else{this[a25_0x3043('0x6b')](_0xfa9f75,_0x428cc9,_0x2b1a84);}}}[a25_0x3043('0x38')](){const _0x3782a9=this['m3uFileUpdate']();console[a25_0x3043('0x3f')](a25_0x3043('0x6c'),_0x3782a9);if(_0x3782a9){setTimeout(function(){this['refreshPlayer']();}['bind'](this),0x3e8);}}[a25_0x3043('0x69')](_0x3914a2){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x3043('0x3f')]('videoFile:\x20'+_0x3914a2);const _0x2ef51a=yield mediainfo(_0x3914a2)[a25_0x3043('0x41')](_0x38f6a8=>{console['log'](_0x38f6a8);fsExtra[a25_0x3043('0x58')](_0x3914a2);return![];});const _0x12bb1e=_0x2ef51a['media'][a25_0x3043('0x6d')][a25_0x3043('0x54')]>0x1&&_0x2ef51a['media'][a25_0x3043('0x6d')][0x1]['@type']==a25_0x3043('0x6e');if(!_0x12bb1e){fsExtra[a25_0x3043('0x58')](_0x3914a2);}console[a25_0x3043('0x3f')](a25_0x3043('0x6f')+_0x12bb1e);return _0x12bb1e;});}[a25_0x3043('0x6b')](_0x3460c0,_0x4d8e18,_0x25700f){const _0x3a96fd=new Downloader();console[a25_0x3043('0x3f')](_0x3460c0);console['log'](_0x4d8e18);console[a25_0x3043('0x3f')](_0x25700f);const _0xf2cb21=_0x3a96fd[a25_0x3043('0x5b')](_0x3460c0,this[a25_0x3043('0x4d')]+_0x4d8e18);urlExists(_0x3460c0,function(_0x14aabb,_0x8d6979){if(_0x8d6979){if(this[a25_0x3043('0x1e')][a25_0x3043('0x70')](this[a25_0x3043('0x1d')])){const _0x11c10e=this[a25_0x3043('0x1e')][a25_0x3043('0x71')](this[a25_0x3043('0x1d')]);if(_0x11c10e>-0x1){this[a25_0x3043('0x1e')][a25_0x3043('0x72')](_0x11c10e,0x1);}}console[a25_0x3043('0x3f')](a25_0x3043('0x73')+_0x3460c0);_0xf2cb21[a25_0x3043('0x74')]();}else{if(!this[a25_0x3043('0x1e')][a25_0x3043('0x70')](this[a25_0x3043('0x1d')])){this['failDownloadFiles'][a25_0x3043('0x53')](this[a25_0x3043('0x1d')]);}console[a25_0x3043('0x3f')](a25_0x3043('0x75')+_0x3460c0);this['currentFile']++;this[a25_0x3043('0x5b')]();}}[a25_0x3043('0x37')](this));_0xf2cb21['on'](a25_0x3043('0x74'),function(_0xf2cb21){console[a25_0x3043('0x3f')](a25_0x3043('0x76')+_0x3460c0);});_0xf2cb21['on'](a25_0x3043('0x77'),function(_0xf2cb21){console[a25_0x3043('0x3f')](a25_0x3043('0x78'));this['download']();}[a25_0x3043('0x37')](this));_0xf2cb21['on'](a25_0x3043('0x79'),function(_0xf2cb21){console[a25_0x3043('0x3f')](a25_0x3043('0x79'));console[a25_0x3043('0x3f')](a25_0x3043('0x7a')+_0x4d8e18);console['log'](a25_0x3043('0x7b')+_0x25700f);this[a25_0x3043('0x69')](this[a25_0x3043('0x4d')]+_0x4d8e18)[a25_0x3043('0x5')](function(_0x141ebd){if(_0x141ebd){this[a25_0x3043('0x1d')]++;}this[a25_0x3043('0x5b')]();}[a25_0x3043('0x37')](this));}['bind'](this));_0xf2cb21['on']('stopped',function(_0xf2cb21){console['log'](a25_0x3043('0x7c'));});_0xf2cb21['on']('destroyed',function(_0xf2cb21){console[a25_0x3043('0x3f')](a25_0x3043('0x7d'));});_0xf2cb21['on'](a25_0x3043('0x7e'),function(_0xf2cb21){console[a25_0x3043('0x3f')](a25_0x3043('0x7e'));});}[a25_0x3043('0x7f')](_0x53ac96,_0x3db47a,_0x4b4cca,_0x40af1d){console[a25_0x3043('0x3f')]('downloadHTTPFile');console['log'](_0x53ac96);const _0x300997=!![];let _0xc13654=0x0;const _0xa23067='';console['log'](a25_0x3043('0x80')+_0x53ac96+'\x20to\x20'+_0x3db47a);if(_0xc13654){if(_0xc13654>0x5){_0x40af1d(a25_0x3043('0x81'),_0x53ac96,_0x4b4cca,null);return;}}else{_0xc13654=0x0;}const _0x417f80=this[a25_0x3043('0x4d')]+_0x3db47a;let _0x42eef7;if(_0x40af1d===undefined){console['log']('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x53ac96+a25_0x3043('0x82')+_0x417f80);_0x40af1d=function(_0x35e68d,_0x414efe){console[a25_0x3043('0x3f')](a25_0x3043('0x83'),_0x35e68d,_0x414efe);};}http['globalAgent']['maxSockets']=0x64;const _0x38bc89={'host':url[a25_0x3043('0x28')](_0x53ac96)[a25_0x3043('0x84')],'port':0x50,'path':url['parse'](_0x53ac96)['pathname'],'agent':![]};const _0x298f1c=http[a25_0x3043('0x85')](_0x38bc89,function(_0x4f47bd){let _0x2000b6=0x0;let _0x4d703d=0x0;function _0x424378(){if(_0x2000b6===undefined){console[a25_0x3043('0x3f')](_0x3db47a+a25_0x3043('0x86')+_0x4d703d+'/'+'?');}const _0x13b576=_0x4d703d/_0x2000b6*0x64;console[a25_0x3043('0x3f')](_0x3db47a+a25_0x3043('0x87')+_0x13b576+'%\x09'+_0x4d703d+'/'+_0x2000b6);}console[a25_0x3043('0x3f')](_0x3db47a+'\x20'+_0x4f47bd[a25_0x3043('0x88')]);switch(_0x4f47bd[a25_0x3043('0x88')]){case 0xc8:_0x2000b6=_0x4f47bd['headers'][a25_0x3043('0x89')]||_0xa23067;fs[a25_0x3043('0x8a')](_0x417f80,function(_0x57a842,_0x47edb7){if(!_0x57a842){console[a25_0x3043('0x3f')](a25_0x3043('0x8b')+_0x417f80);if(_0x47edb7[a25_0x3043('0x8c')]==_0x2000b6){console['log'](a25_0x3043('0x8d')+_0x2000b6+')');console['log'](a25_0x3043('0x8e'));}else{console[a25_0x3043('0x3f')](a25_0x3043('0x8f')+_0x47edb7[a25_0x3043('0x8c')]+a25_0x3043('0x90')+_0x2000b6+')');}}_0x42eef7=fs['createWriteStream'](_0x417f80);_0x4f47bd[a25_0x3043('0x91')](_0x42eef7);_0x4f47bd['on']('data',function(_0x37558d){_0x4d703d+=_0x37558d['length'];_0x424378();});_0x298f1c['on']('error',function(_0x57a842){console[a25_0x3043('0x3f')](a25_0x3043('0x92'));console['log'](_0x57a842);});_0x42eef7['on'](a25_0x3043('0x93'),function(){console['log']('Downloaded\x20'+_0x53ac96+a25_0x3043('0x82')+_0x3db47a);_0x40af1d(null,_0x3db47a,_0x4b4cca,_0x3db47a);}[a25_0x3043('0x37')](this));});break;case 0x12e:const _0x4a782b=_0x4f47bd[a25_0x3043('0x94')][a25_0x3043('0x95')];console[a25_0x3043('0x3f')](a25_0x3043('0x96')+_0x53ac96+a25_0x3043('0x82')+_0x4a782b);if(_0xc13654<0x5){this[a25_0x3043('0x7f')](_0x4a782b,_0x3db47a,_0x40af1d,_0xc13654++);}else{console[a25_0x3043('0x77')](a25_0x3043('0x97')+_0x53ac96+'.');_0x40af1d(a25_0x3043('0x98'),null,null,null);}return;case 0x194:console[a25_0x3043('0x3f')](a25_0x3043('0x99')+_0x53ac96);default:console[a25_0x3043('0x3f')](a25_0x3043('0x9a')+_0x53ac96+a25_0x3043('0x9b')+_0x4f47bd[a25_0x3043('0x88')]);_0x298f1c[a25_0x3043('0x9c')]();_0x40af1d(_0x4f47bd[a25_0x3043('0x88')],null,null,null);return;}})['on'](a25_0x3043('0x77'),function(_0x552448){console['log'](a25_0x3043('0x9d')+_0x53ac96+'\x20'+_0x552448[a25_0x3043('0x9e')]);_0x40af1d(_0x552448,null,null,null);});}['downloadHTTPFileCallback'](_0x26c3a0,_0x54c629,_0x15ae89,_0x2e2bad){console[a25_0x3043('0x3f')](a25_0x3043('0x9f'));console['log'](_0x26c3a0);console[a25_0x3043('0x3f')](_0x54c629);console[a25_0x3043('0x3f')](_0x15ae89);console[a25_0x3043('0x3f')](_0x2e2bad);if(_0x15ae89=='image'){const _0x4f56e9=this[a25_0x3043('0x52')][this[a25_0x3043('0x1d')]][a25_0x3043('0xa0')]!=null?this[a25_0x3043('0x52')][this[a25_0x3043('0x1d')]][a25_0x3043('0xa0')]:0x1e;this[a25_0x3043('0xa1')](_0x2e2bad,_0x4f56e9);}else if(_0x15ae89=='video'){if(_0x26c3a0==null&&_0x54c629!=''){this[a25_0x3043('0x1d')]++;}this['download']();}console[a25_0x3043('0x3f')](this[a25_0x3043('0x1d')]);}[a25_0x3043('0xa2')](_0x6f642d,_0x3910c5,_0x56109a){progress(request(_0x6f642d),{})['on'](a25_0x3043('0xa3'),function(_0x4b0cf1){console['log'](_0x4b0cf1);})['on']('error',function(_0x5aeb22){console[a25_0x3043('0x3f')](a25_0x3043('0xa4'));this['download']();})['on'](a25_0x3043('0x79'),function(){console[a25_0x3043('0x3f')](a25_0x3043('0x7a')+_0x3910c5);console[a25_0x3043('0x3f')](a25_0x3043('0x7b')+_0x56109a);if(_0x56109a==a25_0x3043('0x66')){const _0x74423f=this[a25_0x3043('0x52')][this[a25_0x3043('0x1d')]][a25_0x3043('0xa0')]!=null?this[a25_0x3043('0x52')][this[a25_0x3043('0x1d')]][a25_0x3043('0xa0')]:0x1e;this[a25_0x3043('0xa1')](_0x3910c5,_0x74423f);}else if(_0x56109a==a25_0x3043('0xa5')){this[a25_0x3043('0x1d')]++;this[a25_0x3043('0x5b')]();}}['bind'](this))['pipe'](fs[a25_0x3043('0xa6')](this[a25_0x3043('0x4d')]+_0x3910c5));}[a25_0x3043('0xa1')](_0x4727ce,_0x25088c=0x1e){const _0x5d71d1=this[a25_0x3043('0x4d')]+_0x4727ce;console['log'](_0x5d71d1);console[a25_0x3043('0x3f')](_0x4727ce);const _0x40c0f6=_0x4727ce[a25_0x3043('0x61')]('.')[a25_0x3043('0x62')](0x0,-0x1)[a25_0x3043('0x63')]('.');const _0x1063a7=a25_0x3043('0xa7');const _0xfa52ff=['-y','-r',a25_0x3043('0xa8'),a25_0x3043('0xa9'),'1',a25_0x3043('0xaa'),a25_0x3043('0xab'),'-i',_0x5d71d1,'-t',String(_0x25088c),a25_0x3043('0xac'),a25_0x3043('0xad'),'-pix_fmt','yuv420p','-r','25','-vf','scale=1920:1080',this[a25_0x3043('0x4d')]+_0x40c0f6+'.mp4'];const _0x284731=spawn(_0x1063a7,_0xfa52ff);_0x284731[a25_0x3043('0xae')]['on'](a25_0x3043('0xaf'),function(_0x132394){console[a25_0x3043('0x3f')](a25_0x3043('0xb0')+_0x5d71d1);});_0x284731['stderr']['on']('data',function(_0xd43231){console[a25_0x3043('0x3f')](a25_0x3043('0xb1')+_0xd43231);}[a25_0x3043('0x37')](this));_0x284731['on']('close',function(){console[a25_0x3043('0x3f')](a25_0x3043('0xb2'));this[a25_0x3043('0x1d')]++;this[a25_0x3043('0x5b')]();}[a25_0x3043('0x37')](this));}[a25_0x3043('0xb3')](_0x2d4eef){const _0x4cf05a=this[a25_0x3043('0x4d')]+'/'+_0x2d4eef+a25_0x3043('0x65');const _0x4cd31f=a25_0x3043('0xb4')+_0x2d4eef;console[a25_0x3043('0x3f')](a25_0x3043('0xb5')+_0x4cd31f);console['log']('outFileName:\x20'+_0x4cf05a);const _0x18f958=youtubedl(_0x4cd31f,[a25_0x3043('0xb6'),a25_0x3043('0xb7')],{'cwd':__dirname});_0x18f958['on']('info',function(_0x5d8f18){console[a25_0x3043('0x3f')](a25_0x3043('0xb8'));console[a25_0x3043('0x3f')](a25_0x3043('0xb9')+_0x5d8f18['_filename']);console[a25_0x3043('0x3f')]('size:\x20'+_0x5d8f18['size']);});_0x18f958['on'](a25_0x3043('0xba'),function complete(_0x340196){'use strict';console[a25_0x3043('0x3f')](a25_0x3043('0xb9')+_0x340196[a25_0x3043('0xbb')]+a25_0x3043('0xbc'));});_0x18f958['on'](a25_0x3043('0x79'),function(){console[a25_0x3043('0x3f')](a25_0x3043('0xbd'));this[a25_0x3043('0x69')](_0x4cf05a)[a25_0x3043('0x5')](function(_0x3ed8c3){if(_0x3ed8c3){this[a25_0x3043('0x1d')]++;}this['download']();}[a25_0x3043('0x37')](this));}['bind'](this));_0x18f958['pipe'](fs['createWriteStream'](_0x4cf05a));}[a25_0x3043('0x5e')](){console[a25_0x3043('0x3f')](a25_0x3043('0xbe'));if(this['playlistChanged']){if(this[a25_0x3043('0x1e')][a25_0x3043('0x54')]==0x0){console[a25_0x3043('0x3f')](a25_0x3043('0xbf')+this[a25_0x3043('0x19')]);fs['writeFileSync'](this[a25_0x3043('0x19')],JSON[a25_0x3043('0x3a')](this['newPlayList']));const _0x24bc2f=this[a25_0x3043('0x6c')]();fsExtra[a25_0x3043('0xc0')](this['filesFolder'])[a25_0x3043('0x5')](()=>{fsExtra[a25_0x3043('0xc1')](this[a25_0x3043('0x4d')],this[a25_0x3043('0x1b')])[a25_0x3043('0x5')](()=>{fsExtra['emptyDir'](this[a25_0x3043('0x4d')])[a25_0x3043('0x5')](()=>{console[a25_0x3043('0x3f')](a25_0x3043('0xc2'));this[a25_0x3043('0xc3')]();})[a25_0x3043('0x41')](_0x8138c6=>console[a25_0x3043('0x77')](_0x8138c6));})[a25_0x3043('0x41')](_0x44dfde=>console[a25_0x3043('0x77')](_0x44dfde));})[a25_0x3043('0x41')](_0x431b0d=>console[a25_0x3043('0x77')](_0x431b0d));}else{console[a25_0x3043('0x3f')](a25_0x3043('0xc4'));this[a25_0x3043('0x1d')]=0x0;setTimeout(function(){this[a25_0x3043('0x5b')]();}['bind'](this),0x1388);}}else{console['log'](a25_0x3043('0xc5'));}}[a25_0x3043('0x6c')](){let _0x4e3d58=a25_0x3043('0xc6')+'\x0d\x0a'+a25_0x3043('0xc7')+'\x0d\x0a';const _0x1615d0=new Date();for(const _0x5cbc88 in this[a25_0x3043('0x52')]){const _0x374b00=this[a25_0x3043('0x52')][_0x5cbc88][a25_0x3043('0xc8')];const _0x45dcdc=this[a25_0x3043('0x52')][_0x5cbc88][a25_0x3043('0x5f')];const _0x877351=dateUtils_1['DateUtils'][a25_0x3043('0xc9')](this[a25_0x3043('0x52')][_0x5cbc88]['start_date']);const _0x585920=dateUtils_1['DateUtils']['Parse'](this['downloadFiles'][_0x5cbc88][a25_0x3043('0xca')]);const _0xbb974=_0x374b00['substring'](_0x374b00[a25_0x3043('0xcb')]('/')+0x1);let _0x4480a4=_0xbb974['split']('.')['slice'](0x0,-0x1)['join']('.');if(_0x45dcdc==a25_0x3043('0x64')){_0x4480a4=_0x374b00;}if((_0x877351==null||_0x877351<_0x1615d0)&&(_0x585920==null||_0x585920>_0x1615d0)){_0x4e3d58+=a25_0x3043('0xcc')+_0x4480a4+a25_0x3043('0x65')+'\x0d\x0a';}}let _0x2b89e4='';if(fsExtra['existsSync'](this[a25_0x3043('0x59')])){_0x2b89e4=fsExtra['readFileSync'](this[a25_0x3043('0x59')]);_0x2b89e4=_0x2b89e4[a25_0x3043('0x5a')]()[a25_0x3043('0xcd')]();}_0x4e3d58=_0x4e3d58['toString']()[a25_0x3043('0xcd')]();if(_0x2b89e4!=_0x4e3d58){fsExtra[a25_0x3043('0x43')](this[a25_0x3043('0x59')],_0x4e3d58);return!![];}return![];}[a25_0x3043('0xc3')](){console[a25_0x3043('0x3f')](a25_0x3043('0x59'),this[a25_0x3043('0x59')]);this[a25_0x3043('0xce')]('PlayMedia(//home/osmc/luloclient/media/files/lulo_playlist.m3u)');this[a25_0x3043('0xce')](a25_0x3043('0xcf'));}[a25_0x3043('0xd0')](){console['log'](a25_0x3043('0xd1'));exec('sudo\x20/sbin/reboot\x20-f',function(_0x4baa8e){console[a25_0x3043('0x3f')](_0x4baa8e);});}[a25_0x3043('0x36')](){const _0x35798a=format(this['playerServiceURL'],this[a25_0x3043('0x2b')]);console[a25_0x3043('0x3f')](_0x35798a);request({'url':_0x35798a,'json':!![]},function(_0x4e28fc,_0x37dde0,_0x1c3a2d){if(_0x1c3a2d[a25_0x3043('0x54')]>0x0){const _0x22c917=_0x1c3a2d[0x0];const _0x5193f6=_0x22c917['rss'];const _0x319324=_0x22c917[a25_0x3043('0xd2')]==0x1;this['setRss'](_0x5193f6);this[a25_0x3043('0xd3')](_0x319324);this[a25_0x3043('0x35')]();}console['log'](_0x1c3a2d);}['bind'](this));}[a25_0x3043('0xd4')](){this['kodiCommandClient']('CECStandby()');}[a25_0x3043('0xd5')](){this[a25_0x3043('0xce')](a25_0x3043('0xd6'));}[a25_0x3043('0xd7')](_0x55a26e){const _0x48f156=_0x55a26e!=null&&_0x55a26e!='';const _0x1d63a4='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra[a25_0x3043('0x57')](_0x1d63a4)){const _0x19b2f5=fsExtra[a25_0x3043('0x29')](_0x1d63a4);console['log'](a25_0x3043('0xd8')+_0x19b2f5);const _0x44f4bd=require(a25_0x3043('0xd9'));const _0x4420c0=_0x44f4bd[a25_0x3043('0xda')];_0x4420c0(_0x19b2f5,function(_0x6a58b9,_0x461d3f){console[a25_0x3043('0x3f')]('err:\x20%j',_0x6a58b9);console[a25_0x3043('0x3f')](a25_0x3043('0xdb'),_0x461d3f);if(!_0x55a26e||_0x55a26e==null||_0x55a26e==''){_0x55a26e=a25_0x3043('0xdc');}_0x461d3f[a25_0x3043('0xdd')][a25_0x3043('0xde')][0x0][a25_0x3043('0xdf')][0x0]['_']=_0x55a26e;const _0xfcdd9c=new _0x44f4bd[(a25_0x3043('0xe0'))]();const _0x1a3c37=_0xfcdd9c[a25_0x3043('0xe1')](_0x461d3f);console['log']('xml:\x20%j',_0x1a3c37);fsExtra[a25_0x3043('0x43')](_0x1d63a4,_0x1a3c37);});this[a25_0x3043('0xce')]('RefreshRSS()');this[a25_0x3043('0xe2')](a25_0x3043('0xe3'),{'setting':a25_0x3043('0xe4'),'value':_0x48f156},function(_0xb99308){console[a25_0x3043('0x3f')]('setRss:');console[a25_0x3043('0x3f')](_0xb99308);}[a25_0x3043('0x37')](this));}}[a25_0x3043('0xd3')](_0xdd1d01){this[a25_0x3043('0xe2')](a25_0x3043('0xe3'),{'setting':a25_0x3043('0xe5'),'value':_0xdd1d01},function(_0x533500){console[a25_0x3043('0x3f')](a25_0x3043('0xe6'));console[a25_0x3043('0x3f')](_0x533500);}['bind'](this));}[a25_0x3043('0xce')](_0x1290d7){exec(a25_0x3043('0xe7')+_0x1290d7+'\x22',function(_0x432ad9){console[a25_0x3043('0x3f')](_0x432ad9);});}[a25_0x3043('0xe2')](_0x530ff0,_0x439f77,_0x164a80){const _0x35fe1f={'jsonrpc':a25_0x3043('0xe8'),'method':_0x530ff0,'params':_0x439f77,'id':0x1};const _0x43e93b={'user':this[a25_0x3043('0x21')],'pass':this[a25_0x3043('0x22')]};console[a25_0x3043('0x3f')](a25_0x3043('0xe9'),_0x35fe1f);console[a25_0x3043('0x3f')](a25_0x3043('0xea'),_0x43e93b);this[a25_0x3043('0x24')][a25_0x3043('0x3d')](this[a25_0x3043('0x33')]+a25_0x3043('0xeb'),_0x35fe1f,![],_0x43e93b)[a25_0x3043('0x5')](function(_0x203045){_0x164a80(_0x203045);})[a25_0x3043('0x41')](function(_0x524996){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;