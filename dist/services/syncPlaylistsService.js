var a25_0x49de=['removeSync','hasPlayListChanged','toString','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','split','join','slice','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloader','media','track','@type','mediainfo\x20check:','includes','indexOf','splice','downloading:\x20','start','Error:\x20','start:\x20','error','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','pathname','\x20Progress:\x20','statusCode','headers','stat','Have\x20already\x20downloaded\x20','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','size',')\x20vs\x20New(','createWriteStream','pipe','data','finish','Downloaded\x20','location','Redirect\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','downloadRequestFile','progress','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','yuv420p','-vf','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','youtubeURL:\x20','outFileName:\x20','--format=18','info','_filename','size:\x20','complete','filename:\x20','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','/home/osmc/luloclient/media/files/','m3uContent:\x20','emptyDirSync:\x20','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','jsonrpcClient','Playlist.Clear','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','kodiCommandClient','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','updateSettings','setRss','enableClock','turnOffTV','CECStandby()','turnOnTV','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','rssfeeds','set','Builder','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','videoplayer.usedisplayasclock','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20data','jsonrpcClient\x20options','SyncPlaylistsService','next','done','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','./playerService','node-mediainfo','url','http','request','request-progress','child_process','exec','string-template','youtube-dl','uuid/v4','config.json','package.json','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','m3uFile','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','HttpClientService','playerService','init','config','context','parse','readFileSync','playerId','WEB_SERVICE_URL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','baseURL','api/player.php?player_id={0}','kodi','checkDependencies','loadMediaList','getStatus','bind','registerClient','getItems','stringify','deviceUuid','networkInterfaces','httpClientService','log','register\x20response:\x20','catch','writeFileSync','player','getCurrentlyPlayingVideo','label','reportStatus','reportStatus\x20playingItem:\x20','reportStatusResponse','checkFolders','ensureDir','emptyDirSync','Total:\x20','length','download','reloadMediaList','forceReload','existsSync','playListFile'];(function(_0x3ad40b,_0x3076a1){var _0x50c804=function(_0x54333f){while(--_0x54333f){_0x3ad40b['push'](_0x3ad40b['shift']());}};_0x50c804(++_0x3076a1);}(a25_0x49de,0x16d));var a25_0x519c=function(_0x537092,_0x41816f){_0x537092=_0x537092-0x0;var _0xe3a105=a25_0x49de[_0x537092];return _0xe3a105;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x3e203f,_0x53f5d9,_0x513a04,_0x4a74fd){function _0x4ed5e7(_0x37c9fa){return _0x37c9fa instanceof _0x513a04?_0x37c9fa:new _0x513a04(function(_0x10494a){_0x10494a(_0x37c9fa);});}return new(_0x513a04||(_0x513a04=Promise))(function(_0x430b93,_0x27e108){function _0x2cd3b4(_0xe4a235){try{_0x591aba(_0x4a74fd[a25_0x519c('0x0')](_0xe4a235));}catch(_0x2a8643){_0x27e108(_0x2a8643);}}function _0x3e154e(_0x2bb407){try{_0x591aba(_0x4a74fd['throw'](_0x2bb407));}catch(_0x1cbeff){_0x27e108(_0x1cbeff);}}function _0x591aba(_0x5298a3){_0x5298a3[a25_0x519c('0x1')]?_0x430b93(_0x5298a3[a25_0x519c('0x2')]):_0x4ed5e7(_0x5298a3['value'])[a25_0x519c('0x3')](_0x2cd3b4,_0x3e154e);}_0x591aba((_0x4a74fd=_0x4a74fd[a25_0x519c('0x4')](_0x3e203f,_0x53f5d9||[]))['next']());});};Object[a25_0x519c('0x5')](exports,a25_0x519c('0x6'),{'value':!![]});const HttpClientService_1=require(a25_0x519c('0x7'));const playerService_1=require(a25_0x519c('0x8'));const mediainfo=require(a25_0x519c('0x9'));const fs=require('fs');const url=require(a25_0x519c('0xa'));const http=require(a25_0x519c('0xb'));const fsExtra=require('fs-extra');const request=require(a25_0x519c('0xc'));const progress=require(a25_0x519c('0xd'));const spawn=require('child_process')['spawn'];const exec=require(a25_0x519c('0xe'))[a25_0x519c('0xf')];const isImage=require('is-image');const format=require(a25_0x519c('0x10'));const os=require('os');const youtubedl=require(a25_0x519c('0x11'));const uuidv4=require(a25_0x519c('0x12'));const configFile=a25_0x519c('0x13');const contextFile=a25_0x519c('0x14');const urlExists=require('url-exists');const kodi_rpc=require('node-kodi');const Downloader=require(a25_0x519c('0x15'));class SyncPlaylistsService{constructor(){this[a25_0x519c('0x16')]=a25_0x519c('0x17');this[a25_0x519c('0x18')]=this[a25_0x519c('0x16')]+a25_0x519c('0x19');this[a25_0x519c('0x1a')]=this[a25_0x519c('0x16')]+'files/';this['playListFile']=this['mediaFolder']+'playlist.txt';this[a25_0x519c('0x1b')]=this[a25_0x519c('0x1a')]+'lulo_playlist.m3u';this[a25_0x519c('0x1c')]=0x0;this[a25_0x519c('0x1d')]=![];this[a25_0x519c('0x1e')]=[];this[a25_0x519c('0x1f')]=[];this[a25_0x519c('0x20')]={};this[a25_0x519c('0x21')]=a25_0x519c('0x22');this[a25_0x519c('0x23')]=a25_0x519c('0x24');this[a25_0x519c('0x25')]=a25_0x519c('0x26');this['forceReload']=![];this['httpClientService']=new HttpClientService_1[(a25_0x519c('0x27'))]();this[a25_0x519c('0x28')]=new playerService_1['PlayerService']();}[a25_0x519c('0x29')](){this[a25_0x519c('0x2a')]=JSON['parse'](fs['readFileSync'](configFile));this[a25_0x519c('0x2b')]=JSON[a25_0x519c('0x2c')](fs[a25_0x519c('0x2d')](contextFile));this['playerId']=this[a25_0x519c('0x2a')][a25_0x519c('0x2e')];this['baseURL']=process['env'][a25_0x519c('0x2f')]+a25_0x519c('0x30');this[a25_0x519c('0x31')]=this['baseURL']+a25_0x519c('0x32');this[a25_0x519c('0x33')]=this[a25_0x519c('0x34')]+a25_0x519c('0x35');this[a25_0x519c('0x36')]=new kodi_rpc({'url':this[a25_0x519c('0x21')],'user':this[a25_0x519c('0x23')],'password':this[a25_0x519c('0x25')]});this[a25_0x519c('0x37')]();this['registerClient']();this['checkFolders']();this[a25_0x519c('0x38')]();this['updateSettings']();setInterval(function(){this[a25_0x519c('0x39')]();}[a25_0x519c('0x3a')](this),0x2710);setInterval(function(){this[a25_0x519c('0x3b')]();}[a25_0x519c('0x3a')](this),0x493e0);}[a25_0x519c('0x37')](){}[a25_0x519c('0x3b')](){this['kodi']['playlist'][a25_0x519c('0x3c')](0x1)['then'](function(_0x14bda7){const _0x47ae94=JSON[a25_0x519c('0x3d')](_0x14bda7);const _0x217d0c={'player_id':this[a25_0x519c('0x2e')],'device_uuid':this['config'][a25_0x519c('0x3e')],'network_info':JSON[a25_0x519c('0x3d')](os[a25_0x519c('0x3f')]()),'firmware_info':JSON[a25_0x519c('0x3d')](this[a25_0x519c('0x2b')]['version']),'playlist':_0x47ae94,'playing_item':'','status':0x0};this[a25_0x519c('0x40')]['post']('http://restapi.lulo.run/player_devices/register',_0x217d0c,![])[a25_0x519c('0x3')](function(_0x5ddf10){console[a25_0x519c('0x41')](a25_0x519c('0x42')+Date());})[a25_0x519c('0x43')](function(_0x34f035){});console[a25_0x519c('0x41')](_0x217d0c);}['bind'](this));const _0x489fc4=this[a25_0x519c('0x2a')][a25_0x519c('0x3e')];if(!_0x489fc4||_0x489fc4==''){this[a25_0x519c('0x2a')]['deviceUuid']=uuidv4();this[a25_0x519c('0x2a')]={'deviceUuid':this[a25_0x519c('0x2a')][a25_0x519c('0x3e')],'playerId':this[a25_0x519c('0x2a')][a25_0x519c('0x2e')]};fs[a25_0x519c('0x44')](configFile,JSON[a25_0x519c('0x3d')](this['config']));}}[a25_0x519c('0x39')](){console[a25_0x519c('0x41')]('getStatus');this[a25_0x519c('0x36')][a25_0x519c('0x45')][a25_0x519c('0x46')]()[a25_0x519c('0x3')](function(_0x5a9166){const _0x428351=_0x5a9166['item'][a25_0x519c('0x47')];this[a25_0x519c('0x48')](_0x428351);}[a25_0x519c('0x3a')](this))[a25_0x519c('0x43')](function(_0x232e2b){console[a25_0x519c('0x41')](_0x232e2b);this[a25_0x519c('0x48')](JSON['stringify'](_0x232e2b));}[a25_0x519c('0x3a')](this));}[a25_0x519c('0x48')](_0x1cca57){console[a25_0x519c('0x41')](a25_0x519c('0x49')+_0x1cca57);const _0x71722c={'player_id':this[a25_0x519c('0x2e')],'device_uuid':this[a25_0x519c('0x2a')][a25_0x519c('0x3e')],'status':_0x1cca57!=''&&_0x1cca57!=null?0x1:0x0,'playing_item':_0x1cca57};this['httpClientService']['post']('http://restapi.lulo.run/player_devices/report_status',_0x71722c,![])[a25_0x519c('0x3')](function(_0x1e196a){console[a25_0x519c('0x41')](a25_0x519c('0x4a'));})[a25_0x519c('0x43')](function(_0x55d370){});}[a25_0x519c('0x4b')](){fsExtra[a25_0x519c('0x4c')](this['mediaFolder'],_0x252db2=>{});fsExtra[a25_0x519c('0x4c')](this[a25_0x519c('0x18')],_0x285310=>{});fsExtra[a25_0x519c('0x4c')](this['filesFolder'],_0x2196fd=>{});}[a25_0x519c('0x38')](){const _0x17b365=format(this['playListServiceURL'],this[a25_0x519c('0x2e')]);console[a25_0x519c('0x41')](_0x17b365);request({'url':_0x17b365,'json':!![]},function(_0x288b9a,_0x4e4a39,_0x4f968c){console[a25_0x519c('0x41')]('loadMediaList:\x20');this[a25_0x519c('0x20')]=_0x4f968c;this[a25_0x519c('0x1d')]=this['hasPlayListChanged']();fsExtra[a25_0x519c('0x4d')](this[a25_0x519c('0x18')]);this['downloadFiles']=[];this['failDownloadFiles']=[];this[a25_0x519c('0x1c')]=0x0;for(const _0x9f6623 in _0x4f968c){this['downloadFiles']['push'](_0x4f968c[_0x9f6623]);}console['log'](a25_0x519c('0x4e')+this[a25_0x519c('0x1e')][a25_0x519c('0x4f')]);if(this[a25_0x519c('0x1e')][a25_0x519c('0x4f')]>0x0){this[a25_0x519c('0x50')]();}}[a25_0x519c('0x3a')](this));}[a25_0x519c('0x51')](){this[a25_0x519c('0x52')]=!![];if(fsExtra[a25_0x519c('0x53')](this[a25_0x519c('0x18')])){fsExtra[a25_0x519c('0x4d')](this[a25_0x519c('0x18')]);}if(fsExtra[a25_0x519c('0x53')](this['filesFolder'])){fsExtra[a25_0x519c('0x4d')](this[a25_0x519c('0x1a')]);}if(!fsExtra[a25_0x519c('0x53')](this[a25_0x519c('0x54')])){fsExtra[a25_0x519c('0x55')](this['playListFile']);}if(!fsExtra[a25_0x519c('0x53')](this[a25_0x519c('0x1b')])){fsExtra[a25_0x519c('0x55')](this[a25_0x519c('0x1b')]);}this[a25_0x519c('0x38')]();}[a25_0x519c('0x56')](){const _0x3af235=JSON['stringify'](this[a25_0x519c('0x20')]);try{if(!fsExtra[a25_0x519c('0x53')](this[a25_0x519c('0x54')])){return!![];}else{const _0x1a2730=fsExtra['readFileSync'](this['playListFile'])[a25_0x519c('0x57')]();if(_0x1a2730!=_0x3af235){return!![];}}}catch(_0x1f8e0a){console[a25_0x519c('0x41')](_0x1f8e0a);}return![];}['download'](){console[a25_0x519c('0x41')]('this.currentFile:\x20'+this[a25_0x519c('0x1c')]+a25_0x519c('0x58')+this[a25_0x519c('0x1e')][a25_0x519c('0x4f')]);if(this[a25_0x519c('0x1c')]>=this['downloadFiles'][a25_0x519c('0x4f')]){this[a25_0x519c('0x59')]();return;}const _0x1517b0=String(this['downloadFiles'][this[a25_0x519c('0x1c')]][a25_0x519c('0x5a')]);const _0xf46015=this[a25_0x519c('0x1e')][this['currentFile']][a25_0x519c('0x5b')];let _0x3dddf1=_0x1517b0[a25_0x519c('0x5c')](_0x1517b0[a25_0x519c('0x5d')]('/')+0x1);const _0x758596=_0x3dddf1[a25_0x519c('0x5e')]('.')['slice'](0x0,-0x1)[a25_0x519c('0x5f')]('.');let _0x25eabb=this[a25_0x519c('0x34')]+_0x1517b0;const _0x50d51c=_0x25eabb[a25_0x519c('0x5e')]('.')[a25_0x519c('0x60')](0x0,-0x1)['join']('.');if(_0xf46015==a25_0x519c('0x61')){_0x3dddf1=_0x3dddf1+a25_0x519c('0x62');}else if(_0xf46015==a25_0x519c('0x63')){_0x3dddf1=_0x758596+a25_0x519c('0x62');_0x25eabb=_0x50d51c+'.mp4';}console[a25_0x519c('0x41')](a25_0x519c('0x64'));console[a25_0x519c('0x41')](_0x1517b0);console['log'](_0xf46015);console['log'](_0x3dddf1);console[a25_0x519c('0x41')](_0x25eabb);console['log'](_0x758596);console[a25_0x519c('0x41')](_0x50d51c);console[a25_0x519c('0x41')](a25_0x519c('0x64'));if(fsExtra[a25_0x519c('0x53')](this[a25_0x519c('0x18')]+_0x3dddf1)){this[a25_0x519c('0x65')](this['tempFolder']+_0x3dddf1)[a25_0x519c('0x3')](function(_0xa5f072){if(_0xa5f072){this['currentFile']++;}else{this['playlistChanged']=!![];}this[a25_0x519c('0x50')]();}[a25_0x519c('0x3a')](this));}else if(fsExtra[a25_0x519c('0x53')](this[a25_0x519c('0x1a')]+_0x3dddf1)){this[a25_0x519c('0x65')](this[a25_0x519c('0x1a')]+_0x3dddf1)[a25_0x519c('0x3')](function(_0x526ab1){if(_0x526ab1){fsExtra[a25_0x519c('0x66')](this[a25_0x519c('0x1a')]+_0x3dddf1,this[a25_0x519c('0x18')]+_0x3dddf1);this[a25_0x519c('0x1c')]++;}else{this[a25_0x519c('0x1d')]=!![];}this['download']();}[a25_0x519c('0x3a')](this));}else{console[a25_0x519c('0x41')](a25_0x519c('0x67')+_0x25eabb);this['playlistChanged']=!![];if(_0xf46015=='youtube_single'){this['downloadYouTube'](_0x1517b0);}else{this[a25_0x519c('0x68')](_0x25eabb,_0x3dddf1,_0xf46015);}}}['checkVideo'](_0x24f883){return __awaiter(this,void 0x0,void 0x0,function*(){console[a25_0x519c('0x41')]('videoFile:\x20'+_0x24f883);const _0x29dc61=yield mediainfo(_0x24f883)[a25_0x519c('0x43')](_0x8b8d0f=>{console[a25_0x519c('0x41')](_0x8b8d0f);fsExtra['removeSync'](_0x24f883);return![];});const _0x5d8044=_0x29dc61[a25_0x519c('0x69')][a25_0x519c('0x6a')][a25_0x519c('0x4f')]>0x1&&_0x29dc61[a25_0x519c('0x69')][a25_0x519c('0x6a')][0x1][a25_0x519c('0x6b')]=='Video';if(!_0x5d8044){fsExtra[a25_0x519c('0x55')](_0x24f883);}console[a25_0x519c('0x41')](a25_0x519c('0x6c')+_0x5d8044);return _0x5d8044;});}['downloader'](_0x53a5fe,_0x4236de,_0x3c0100){const _0x4e48ce=new Downloader();console['log'](_0x53a5fe);console[a25_0x519c('0x41')](_0x4236de);console[a25_0x519c('0x41')](_0x3c0100);const _0x2e6e21=_0x4e48ce[a25_0x519c('0x50')](_0x53a5fe,this[a25_0x519c('0x18')]+_0x4236de);urlExists(_0x53a5fe,function(_0x2f847e,_0x5168a5){if(_0x5168a5){if(this['failDownloadFiles'][a25_0x519c('0x6d')](this['currentFile'])){const _0x487e2c=this[a25_0x519c('0x1f')][a25_0x519c('0x6e')](this[a25_0x519c('0x1c')]);if(_0x487e2c>-0x1){this[a25_0x519c('0x1f')][a25_0x519c('0x6f')](_0x487e2c,0x1);}}console[a25_0x519c('0x41')](a25_0x519c('0x70')+_0x53a5fe);_0x2e6e21[a25_0x519c('0x71')]();}else{if(!this[a25_0x519c('0x1f')][a25_0x519c('0x6d')](this[a25_0x519c('0x1c')])){this[a25_0x519c('0x1f')]['push'](this[a25_0x519c('0x1c')]);}console[a25_0x519c('0x41')](a25_0x519c('0x72')+_0x53a5fe);this['currentFile']++;this['download']();}}[a25_0x519c('0x3a')](this));_0x2e6e21['on']('start',function(_0x2e6e21){console[a25_0x519c('0x41')](a25_0x519c('0x73')+_0x53a5fe);});_0x2e6e21['on'](a25_0x519c('0x74'),function(_0x2e6e21){console[a25_0x519c('0x41')]('error:\x20');this['download']();}[a25_0x519c('0x3a')](this));_0x2e6e21['on'](a25_0x519c('0x75'),function(_0x2e6e21){console[a25_0x519c('0x41')]('end');console[a25_0x519c('0x41')](a25_0x519c('0x76')+_0x4236de);console[a25_0x519c('0x41')]('mediaType:\x20'+_0x3c0100);this['checkVideo'](this['tempFolder']+_0x4236de)[a25_0x519c('0x3')](function(_0x22fbbd){if(_0x22fbbd){this[a25_0x519c('0x1c')]++;}this['download']();}[a25_0x519c('0x3a')](this));}[a25_0x519c('0x3a')](this));_0x2e6e21['on'](a25_0x519c('0x77'),function(_0x2e6e21){console['log'](a25_0x519c('0x77'));});_0x2e6e21['on'](a25_0x519c('0x78'),function(_0x2e6e21){console[a25_0x519c('0x41')](a25_0x519c('0x78'));});_0x2e6e21['on'](a25_0x519c('0x79'),function(_0x2e6e21){console[a25_0x519c('0x41')](a25_0x519c('0x79'));});}[a25_0x519c('0x7a')](_0x218ea8,_0x2bb136,_0x4cdd98,_0x5e1913){console['log'](a25_0x519c('0x7a'));console['log'](_0x218ea8);const _0x360be4=!![];let _0x278c0c=0x0;const _0x177d3b='';console[a25_0x519c('0x41')](a25_0x519c('0x7b')+_0x218ea8+a25_0x519c('0x7c')+_0x2bb136);if(_0x278c0c){if(_0x278c0c>0x5){_0x5e1913(a25_0x519c('0x7d'),_0x218ea8,_0x4cdd98,null);return;}}else{_0x278c0c=0x0;}const _0x4f4ea6=this[a25_0x519c('0x18')]+_0x2bb136;let _0x3fc764;if(_0x5e1913===undefined){console[a25_0x519c('0x41')]('WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20'+_0x218ea8+'\x20to\x20'+_0x4f4ea6);_0x5e1913=function(_0x136984,_0x2e35e0){console[a25_0x519c('0x41')](a25_0x519c('0x7e'),_0x136984,_0x2e35e0);};}http[a25_0x519c('0x7f')][a25_0x519c('0x80')]=0x64;const _0x55d742={'host':url[a25_0x519c('0x2c')](_0x218ea8)['host'],'port':0x50,'path':url[a25_0x519c('0x2c')](_0x218ea8)[a25_0x519c('0x81')],'agent':![]};const _0x99d50f=http['get'](_0x55d742,function(_0x3912ca){let _0x1e6e9b=0x0;let _0x174a50=0x0;function _0x21e8e6(){if(_0x1e6e9b===undefined){console[a25_0x519c('0x41')](_0x2bb136+'\x20Progress:\x20unknown\x09'+_0x174a50+'/'+'?');}const _0x3725c5=_0x174a50/_0x1e6e9b*0x64;console['log'](_0x2bb136+a25_0x519c('0x82')+_0x3725c5+'%\x09'+_0x174a50+'/'+_0x1e6e9b);}console[a25_0x519c('0x41')](_0x2bb136+'\x20'+_0x3912ca[a25_0x519c('0x83')]);switch(_0x3912ca['statusCode']){case 0xc8:_0x1e6e9b=_0x3912ca[a25_0x519c('0x84')]['content-length']||_0x177d3b;fs[a25_0x519c('0x85')](_0x4f4ea6,function(_0x3294fa,_0x3c7cf5){if(!_0x3294fa){console['log'](a25_0x519c('0x86')+_0x4f4ea6);if(_0x3c7cf5['size']==_0x1e6e9b){console[a25_0x519c('0x41')](a25_0x519c('0x87')+_0x1e6e9b+')');console[a25_0x519c('0x41')](a25_0x519c('0x88'));}else{console[a25_0x519c('0x41')]('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x3c7cf5[a25_0x519c('0x89')]+a25_0x519c('0x8a')+_0x1e6e9b+')');}}_0x3fc764=fs[a25_0x519c('0x8b')](_0x4f4ea6);_0x3912ca[a25_0x519c('0x8c')](_0x3fc764);_0x3912ca['on'](a25_0x519c('0x8d'),function(_0x2ff95e){_0x174a50+=_0x2ff95e[a25_0x519c('0x4f')];_0x21e8e6();});_0x99d50f['on'](a25_0x519c('0x74'),function(_0x3294fa){console[a25_0x519c('0x41')]('err:\x20');console['log'](_0x3294fa);});_0x3fc764['on'](a25_0x519c('0x8e'),function(){console[a25_0x519c('0x41')](a25_0x519c('0x8f')+_0x218ea8+'\x20to\x20'+_0x2bb136);_0x5e1913(null,_0x2bb136,_0x4cdd98,_0x2bb136);}[a25_0x519c('0x3a')](this));});break;case 0x12e:const _0x34be0b=_0x3912ca['headers'][a25_0x519c('0x90')];console['log'](a25_0x519c('0x91')+_0x218ea8+a25_0x519c('0x7c')+_0x34be0b);if(_0x278c0c<0x5){this[a25_0x519c('0x7a')](_0x34be0b,_0x2bb136,_0x5e1913,_0x278c0c++);}else{console['error']('Redirect\x20limit\x20encountered\x20for\x20'+_0x218ea8+'.');_0x5e1913(a25_0x519c('0x92'),null,null,null);}return;case 0x194:console[a25_0x519c('0x41')](a25_0x519c('0x93')+_0x218ea8);default:console['log'](a25_0x519c('0x94')+_0x218ea8+a25_0x519c('0x95')+_0x3912ca['statusCode']);_0x99d50f['abort']();_0x5e1913(_0x3912ca['statusCode'],null,null,null);return;}})['on'](a25_0x519c('0x74'),function(_0x4df784){console['log']('Error\x20Downloading:\x20'+_0x218ea8+'\x20'+_0x4df784[a25_0x519c('0x96')]);_0x5e1913(_0x4df784,null,null,null);});}[a25_0x519c('0x97')](_0x56ebd8,_0x536612,_0x17ff79,_0x8acfe8){console['log']('downloadHTTPFileCallback');console[a25_0x519c('0x41')](_0x56ebd8);console[a25_0x519c('0x41')](_0x536612);console['log'](_0x17ff79);console['log'](_0x8acfe8);if(_0x17ff79=='image'){const _0xe6ca9a=this['downloadFiles'][this[a25_0x519c('0x1c')]][a25_0x519c('0x98')]!=null?this[a25_0x519c('0x1e')][this[a25_0x519c('0x1c')]]['duration']:0x1e;this[a25_0x519c('0x99')](_0x8acfe8,_0xe6ca9a);}else if(_0x17ff79==a25_0x519c('0x9a')){if(_0x56ebd8==null&&_0x536612!=''){this[a25_0x519c('0x1c')]++;}this[a25_0x519c('0x50')]();}console['log'](this[a25_0x519c('0x1c')]);}[a25_0x519c('0x9b')](_0x37082d,_0x1c04f9,_0x2fdc55){progress(request(_0x37082d),{})['on'](a25_0x519c('0x9c'),function(_0x145e6c){console[a25_0x519c('0x41')](_0x145e6c);})['on']('error',function(_0x1797e1){console[a25_0x519c('0x41')]('Error\x20downloading\x20file');this[a25_0x519c('0x50')]();})['on']('end',function(){console[a25_0x519c('0x41')](a25_0x519c('0x76')+_0x1c04f9);console[a25_0x519c('0x41')]('mediaType:\x20'+_0x2fdc55);if(_0x2fdc55==a25_0x519c('0x63')){const _0x37afdd=this['downloadFiles'][this['currentFile']]['duration']!=null?this[a25_0x519c('0x1e')][this[a25_0x519c('0x1c')]]['duration']:0x1e;this['createImageVideo'](_0x1c04f9,_0x37afdd);}else if(_0x2fdc55==a25_0x519c('0x9a')){this['currentFile']++;this[a25_0x519c('0x50')]();}}['bind'](this))[a25_0x519c('0x8c')](fs[a25_0x519c('0x8b')](this['tempFolder']+_0x1c04f9));}['createImageVideo'](_0x27fb39,_0x10fbc5=0x1e){const _0x63ecbb=this[a25_0x519c('0x18')]+_0x27fb39;console[a25_0x519c('0x41')](_0x63ecbb);console['log'](_0x27fb39);const _0x4067c6=_0x27fb39[a25_0x519c('0x5e')]('.')[a25_0x519c('0x60')](0x0,-0x1)[a25_0x519c('0x5f')]('.');const _0x213044=a25_0x519c('0x9d');const _0x1148a2=['-y','-r',a25_0x519c('0x9e'),a25_0x519c('0x9f'),'1',a25_0x519c('0xa0'),a25_0x519c('0xa1'),'-i',_0x63ecbb,'-t',String(_0x10fbc5),a25_0x519c('0xa2'),a25_0x519c('0xa3'),'-pix_fmt',a25_0x519c('0xa4'),'-r','25',a25_0x519c('0xa5'),'scale=1920:1080',this[a25_0x519c('0x18')]+_0x4067c6+a25_0x519c('0x62')];const _0x33e643=spawn(_0x213044,_0x1148a2);_0x33e643[a25_0x519c('0xa6')]['on']('data',function(_0x3e0866){console[a25_0x519c('0x41')](a25_0x519c('0xa7')+_0x63ecbb);});_0x33e643[a25_0x519c('0xa8')]['on'](a25_0x519c('0x8d'),function(_0x1a6445){console['log'](a25_0x519c('0xa9')+_0x1a6445);}[a25_0x519c('0x3a')](this));_0x33e643['on'](a25_0x519c('0xaa'),function(){console[a25_0x519c('0x41')](a25_0x519c('0xab'));this[a25_0x519c('0x1c')]++;this[a25_0x519c('0x50')]();}[a25_0x519c('0x3a')](this));}[a25_0x519c('0xac')](_0xb5a586){const _0x44d926=this['tempFolder']+'/'+_0xb5a586+'.mp4';const _0x22a548='http://www.youtube.com/watch?v='+_0xb5a586;console['log'](a25_0x519c('0xad')+_0x22a548);console['log'](a25_0x519c('0xae')+_0x44d926);const _0xa57665=youtubedl(_0x22a548,[a25_0x519c('0xaf'),'--no-check-certificate'],{'cwd':__dirname});_0xa57665['on'](a25_0x519c('0xb0'),function(_0x2a6bbc){console[a25_0x519c('0x41')]('Download\x20started');console['log']('filename:\x20'+_0x2a6bbc[a25_0x519c('0xb1')]);console[a25_0x519c('0x41')](a25_0x519c('0xb2')+_0x2a6bbc[a25_0x519c('0x89')]);});_0xa57665['on'](a25_0x519c('0xb3'),function complete(_0x4e3646){'use strict';console[a25_0x519c('0x41')](a25_0x519c('0xb4')+_0x4e3646['_filename']+a25_0x519c('0xb5'));});_0xa57665['on']('end',function(){console['log'](a25_0x519c('0xb6'));this[a25_0x519c('0x65')](_0x44d926)['then'](function(_0x18b049){if(_0x18b049){this['currentFile']++;}this[a25_0x519c('0x50')]();}['bind'](this));}[a25_0x519c('0x3a')](this));_0xa57665[a25_0x519c('0x8c')](fs[a25_0x519c('0x8b')](_0x44d926));}['finishProcess'](){console[a25_0x519c('0x41')](a25_0x519c('0xb7'));if(this['playlistChanged']){if(this[a25_0x519c('0x1f')][a25_0x519c('0x4f')]==0x0){console['log']('this.playListFile:\x20'+this[a25_0x519c('0x54')]);fs['writeFileSync'](this[a25_0x519c('0x54')],JSON[a25_0x519c('0x3d')](this[a25_0x519c('0x20')]));let _0x16e9d1='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x4c0256 in this[a25_0x519c('0x1e')]){const _0x2df904=this[a25_0x519c('0x1e')][_0x4c0256][a25_0x519c('0x5a')];const _0x324d4a=this['downloadFiles'][_0x4c0256]['media_type'];const _0x59339c=_0x2df904['substring'](_0x2df904[a25_0x519c('0x5d')]('/')+0x1);let _0x1748ad=_0x59339c[a25_0x519c('0x5e')]('.')[a25_0x519c('0x60')](0x0,-0x1)[a25_0x519c('0x5f')]('.');if(_0x324d4a=='youtube_single'){_0x1748ad=_0x2df904;}_0x16e9d1+=a25_0x519c('0xb8')+_0x1748ad+a25_0x519c('0x62')+'\x0d\x0a';console['log']('m3uContent:\x20'+_0x16e9d1);}console['log'](a25_0x519c('0xb9')+_0x16e9d1);fsExtra[a25_0x519c('0x4d')](this[a25_0x519c('0x1a')]);console[a25_0x519c('0x41')]('copySync:\x20'+this['tempFolder']);fsExtra[a25_0x519c('0x66')](this[a25_0x519c('0x18')],this[a25_0x519c('0x1a')]);console[a25_0x519c('0x41')]('writeFileSync:\x20'+this[a25_0x519c('0x1b')]);fsExtra[a25_0x519c('0x44')](this[a25_0x519c('0x1b')],_0x16e9d1);console[a25_0x519c('0x41')](a25_0x519c('0xba')+this[a25_0x519c('0x18')]);fsExtra[a25_0x519c('0x4d')](this[a25_0x519c('0x18')]);console['log']('Rebooting..');this[a25_0x519c('0xbb')]();}else{console[a25_0x519c('0x41')](a25_0x519c('0xbc'));this['currentFile']=0x0;setTimeout(function(){this[a25_0x519c('0x50')]();}[a25_0x519c('0x3a')](this),0x1388);}}else{console[a25_0x519c('0x41')](a25_0x519c('0xbd'));}}['refreshPlayer'](){this[a25_0x519c('0xbe')](a25_0x519c('0xbf'),{'playlistid':0x1},function(_0x591693){console['log']('Playlist.Cleared');console[a25_0x519c('0x41')](_0x591693);this[a25_0x519c('0xbe')](a25_0x519c('0xc0'),{'item':{'file':a25_0x519c('0xc1')},'playlistid':0x1},function(_0x591693){console[a25_0x519c('0x41')](a25_0x519c('0xc2'));console[a25_0x519c('0x41')](_0x591693);this[a25_0x519c('0xbe')](a25_0x519c('0xc3'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x591693){console['log']('Playlist.Opened');console['log'](_0x591693);this[a25_0x519c('0xc4')](a25_0x519c('0xc5'));}[a25_0x519c('0x3a')](this));}['bind'](this));}[a25_0x519c('0x3a')](this));}[a25_0x519c('0xbb')](){console['log'](a25_0x519c('0xc6'));exec(a25_0x519c('0xc7'),function(_0x59b5f3){console[a25_0x519c('0x41')](_0x59b5f3);});}[a25_0x519c('0xc8')](){const _0x5ebd62=format(this[a25_0x519c('0x33')],this['playerId']);console[a25_0x519c('0x41')](_0x5ebd62);request({'url':_0x5ebd62,'json':!![]},function(_0x4dc767,_0x3dc51c,_0x27c15f){if(_0x27c15f['length']>0x0){const _0x439c09=_0x27c15f[0x0];const _0x456c30=_0x439c09['rss'];const _0x6918ca=_0x439c09['header_active']==0x1;this[a25_0x519c('0xc9')](_0x456c30);this[a25_0x519c('0xca')](_0x6918ca);this[a25_0x519c('0x3b')]();}console[a25_0x519c('0x41')](_0x27c15f);}[a25_0x519c('0x3a')](this));}[a25_0x519c('0xcb')](){this[a25_0x519c('0xc4')](a25_0x519c('0xcc'));}[a25_0x519c('0xcd')](){this[a25_0x519c('0xc4')]('CECActivateSource()');}[a25_0x519c('0xc9')](_0x54fae5){const _0x30a07f=_0x54fae5!=null&&_0x54fae5!='';const _0x3e97b3=a25_0x519c('0xce');if(fsExtra['existsSync'](_0x3e97b3)){const _0x55ee1a=fsExtra[a25_0x519c('0x2d')](_0x3e97b3);console[a25_0x519c('0x41')](a25_0x519c('0xcf')+_0x55ee1a);const _0x3e07d0=require(a25_0x519c('0xd0'));const _0x2e7bc9=_0x3e07d0[a25_0x519c('0xd1')];_0x2e7bc9(_0x55ee1a,function(_0x4fdae8,_0x31a9ae){console[a25_0x519c('0x41')](a25_0x519c('0xd2'),_0x4fdae8);console[a25_0x519c('0x41')](a25_0x519c('0xd3'),_0x31a9ae);if(!_0x54fae5||_0x54fae5==null||_0x54fae5==''){_0x54fae5='none';}_0x31a9ae[a25_0x519c('0xd4')][a25_0x519c('0xd5')][0x0]['feed'][0x0]['_']=_0x54fae5;const _0x4d534c=new _0x3e07d0[(a25_0x519c('0xd6'))]();const _0x28396d=_0x4d534c[a25_0x519c('0xd7')](_0x31a9ae);console['log'](a25_0x519c('0xd8'),_0x28396d);fsExtra[a25_0x519c('0x44')](_0x3e97b3,_0x28396d);});this[a25_0x519c('0xc4')](a25_0x519c('0xd9'));this[a25_0x519c('0xbe')](a25_0x519c('0xda'),{'setting':'lookandfeel.enablerssfeeds','value':_0x30a07f},function(_0x4af265){console[a25_0x519c('0x41')]('setRss:');console[a25_0x519c('0x41')](_0x4af265);}[a25_0x519c('0x3a')](this));}}['enableClock'](_0x1be212){this[a25_0x519c('0xbe')](a25_0x519c('0xda'),{'setting':a25_0x519c('0xdb'),'value':_0x1be212},function(_0x29e4a8){console[a25_0x519c('0x41')]('enableClock:\x20');console['log'](_0x29e4a8);}[a25_0x519c('0x3a')](this));}[a25_0x519c('0xc4')](_0x2f865f){exec(a25_0x519c('0xdc')+_0x2f865f+'\x22',function(_0x424c13){console[a25_0x519c('0x41')](_0x424c13);});}['jsonrpcClient'](_0x6f5fbd,_0x506698,_0x23c8e8){const _0x14ec30={'jsonrpc':a25_0x519c('0xdd'),'method':_0x6f5fbd,'params':_0x506698,'id':0x1};const _0x316004={'user':this['kodiUser'],'pass':this[a25_0x519c('0x25')]};console[a25_0x519c('0x41')](a25_0x519c('0xde'),_0x14ec30);console[a25_0x519c('0x41')](a25_0x519c('0xdf'),_0x316004);this[a25_0x519c('0x40')]['post'](this[a25_0x519c('0x21')]+'/jsonrpc',_0x14ec30,![],_0x316004)[a25_0x519c('0x3')](function(_0x533bb3){_0x23c8e8(_0x533bb3);})[a25_0x519c('0x43')](function(_0x1b75e8){});}}exports[a25_0x519c('0xe0')]=SyncPlaylistsService;