var a25_0x4409=['Playlist.Opened','kodiCommandClient','RestartApp()','Rebooting','sudo\x20/sbin/reboot\x20-f','updateSettings','playerServiceURL','rss','header_active','setRss','enableClock','turnOffTV','CECStandby()','turnOnTV','CECActivateSource()','xmlContent:\x20','xml2js','parseString','err:\x20%j','rssfeeds','set','feed','Builder','buildObject','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','jsonrpcClient\x20data','jsonrpcClient\x20options','/jsonrpc','SyncPlaylistsService','throw','done','then','apply','next','defineProperty','../infrastructure/HttpClientService','./playerService','url','http','fs-extra','request','request-progress','child_process','spawn','exec','youtube-dl','uuid/v4','config.json','url-exists','node-kodi','tempFolder','mediaFolder','filesFolder','files/','playListFile','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','kodiUser','kodiPassword','.lulo123.','httpClientService','HttpClientService','playerService','PlayerService','config','parse','readFileSync','playerId','baseURL','deploy/','playListServiceURL','api/player_playlist.php?player_id={0}','kodi','kodiHost','checkDependencies','registerClient','checkFolders','getStatus','bind','playlist','getItems','stringify','deviceUuid','networkInterfaces','context','version','post','http://restapi.lulo.run/player_devices/register','register\x20response:\x20','catch','log','writeFileSync','player','getCurrentlyPlayingVideo','item','label','reportStatus','reportStatus\x20playingItem:\x20','ensureDir','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','Total:\x20','length','download','forceReload','existsSync','removeSync','toString','this.currentFile:\x20','finishProcess','path','slice','split','join','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloader','videoFile:\x20','track','media','@type','Video','mediainfo\x20check:','indexOf','splice','downloading:\x20','start','includes','push','Error:\x20','error','error:\x20','end','Downloaded:\x20','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','host','pathname','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(',')\x20vs\x20New(','createWriteStream','pipe','err:\x20','Downloaded\x20','location','Redirect\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','abort','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','video','Error\x20downloading\x20file','mediaType:\x20','ffmpeg','1/2','-loop','-pattern_type','-c:v','libx264','-pix_fmt','-vf','scale=1920:1080','stdout','data','Converting\x20','stderr','stderr:\x20','downloadYouTube','http://www.youtube.com/watch?v=','youtubeURL:\x20','outFileName:\x20','--format=18','--no-check-certificate','filename:\x20','_filename','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','Finishing','this.playListFile:\x20','#EXTINF:0,luloPlayList','media_type','lastIndexOf','m3uContent:\x20','copySync:\x20','writeFileSync:\x20','Rebooting..','reboot','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Cleared','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open'];(function(_0x15f65e,_0x5c1b8e){var _0x4230a6=function(_0x1cd614){while(--_0x1cd614){_0x15f65e['push'](_0x15f65e['shift']());}};_0x4230a6(++_0x5c1b8e);}(a25_0x4409,0x113));var a25_0x5ac4=function(_0x5262cd,_0x226e3a){_0x5262cd=_0x5262cd-0x0;var _0x2ab439=a25_0x4409[_0x5262cd];return _0x2ab439;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x4dfc38,_0x306bba,_0x3cfa9e,_0x3264c1){function _0x700244(_0x2eb8f6){return _0x2eb8f6 instanceof _0x3cfa9e?_0x2eb8f6:new _0x3cfa9e(function(_0x36deb3){_0x36deb3(_0x2eb8f6);});}return new(_0x3cfa9e||(_0x3cfa9e=Promise))(function(_0x3698f5,_0x3c0b2b){function _0x1bbad5(_0x21db39){try{_0x2878bb(_0x3264c1['next'](_0x21db39));}catch(_0x2f8070){_0x3c0b2b(_0x2f8070);}}function _0x51b1f6(_0x56f1f0){try{_0x2878bb(_0x3264c1[a25_0x5ac4('0x0')](_0x56f1f0));}catch(_0x45cb32){_0x3c0b2b(_0x45cb32);}}function _0x2878bb(_0x36f76e){_0x36f76e[a25_0x5ac4('0x1')]?_0x3698f5(_0x36f76e['value']):_0x700244(_0x36f76e['value'])[a25_0x5ac4('0x2')](_0x1bbad5,_0x51b1f6);}_0x2878bb((_0x3264c1=_0x3264c1[a25_0x5ac4('0x3')](_0x4dfc38,_0x306bba||[]))[a25_0x5ac4('0x4')]());});};Object[a25_0x5ac4('0x5')](exports,'__esModule',{'value':!![]});const HttpClientService_1=require(a25_0x5ac4('0x6'));const playerService_1=require(a25_0x5ac4('0x7'));const mediainfo=require('node-mediainfo');const fs=require('fs');const url=require(a25_0x5ac4('0x8'));const http=require(a25_0x5ac4('0x9'));const fsExtra=require(a25_0x5ac4('0xa'));const request=require(a25_0x5ac4('0xb'));const progress=require(a25_0x5ac4('0xc'));const spawn=require(a25_0x5ac4('0xd'))[a25_0x5ac4('0xe')];const exec=require(a25_0x5ac4('0xd'))[a25_0x5ac4('0xf')];const isImage=require('is-image');const format=require('string-template');const os=require('os');const youtubedl=require(a25_0x5ac4('0x10'));const uuidv4=require(a25_0x5ac4('0x11'));const configFile=a25_0x5ac4('0x12');const contextFile='package.json';const urlExists=require(a25_0x5ac4('0x13'));const kodi_rpc=require(a25_0x5ac4('0x14'));const Downloader=require('mt-files-downloader');class SyncPlaylistsService{constructor(){this['mediaFolder']='media/';this[a25_0x5ac4('0x15')]=this[a25_0x5ac4('0x16')]+'temp/';this[a25_0x5ac4('0x17')]=this[a25_0x5ac4('0x16')]+a25_0x5ac4('0x18');this[a25_0x5ac4('0x19')]=this['mediaFolder']+'playlist.txt';this[a25_0x5ac4('0x1a')]=this['filesFolder']+a25_0x5ac4('0x1b');this[a25_0x5ac4('0x1c')]=0x0;this[a25_0x5ac4('0x1d')]=![];this[a25_0x5ac4('0x1e')]=[];this[a25_0x5ac4('0x1f')]=[];this[a25_0x5ac4('0x20')]={};this['kodiHost']='http://localhost';this[a25_0x5ac4('0x21')]='lulo';this[a25_0x5ac4('0x22')]=a25_0x5ac4('0x23');this['forceReload']=![];this[a25_0x5ac4('0x24')]=new HttpClientService_1[(a25_0x5ac4('0x25'))]();this[a25_0x5ac4('0x26')]=new playerService_1[(a25_0x5ac4('0x27'))]();}['init'](){this[a25_0x5ac4('0x28')]=JSON[a25_0x5ac4('0x29')](fs[a25_0x5ac4('0x2a')](configFile));this['context']=JSON['parse'](fs[a25_0x5ac4('0x2a')](contextFile));this[a25_0x5ac4('0x2b')]=this[a25_0x5ac4('0x28')][a25_0x5ac4('0x2b')];this[a25_0x5ac4('0x2c')]=process['env']['WEB_SERVICE_URL']+a25_0x5ac4('0x2d');this[a25_0x5ac4('0x2e')]=this[a25_0x5ac4('0x2c')]+a25_0x5ac4('0x2f');this['playerServiceURL']=this[a25_0x5ac4('0x2c')]+'api/player.php?player_id={0}';this[a25_0x5ac4('0x30')]=new kodi_rpc({'url':this[a25_0x5ac4('0x31')],'user':this[a25_0x5ac4('0x21')],'password':this[a25_0x5ac4('0x22')]});this[a25_0x5ac4('0x32')]();this[a25_0x5ac4('0x33')]();this[a25_0x5ac4('0x34')]();this['loadMediaList']();this['updateSettings']();setInterval(function(){this[a25_0x5ac4('0x35')]();}['bind'](this),0x2710);setInterval(function(){this[a25_0x5ac4('0x33')]();}[a25_0x5ac4('0x36')](this),0x493e0);}[a25_0x5ac4('0x32')](){}['registerClient'](){this[a25_0x5ac4('0x30')][a25_0x5ac4('0x37')][a25_0x5ac4('0x38')](0x1)[a25_0x5ac4('0x2')](function(_0x39541a){const _0x34a4e5=JSON[a25_0x5ac4('0x39')](_0x39541a);const _0xf947ca={'player_id':this[a25_0x5ac4('0x2b')],'device_uuid':this[a25_0x5ac4('0x28')][a25_0x5ac4('0x3a')],'network_info':JSON['stringify'](os[a25_0x5ac4('0x3b')]()),'firmware_info':JSON[a25_0x5ac4('0x39')](this[a25_0x5ac4('0x3c')][a25_0x5ac4('0x3d')]),'playlist':_0x34a4e5,'playing_item':'','status':0x0};this[a25_0x5ac4('0x24')][a25_0x5ac4('0x3e')](a25_0x5ac4('0x3f'),_0xf947ca,![])[a25_0x5ac4('0x2')](function(_0x2a1546){console['log'](a25_0x5ac4('0x40')+Date());})[a25_0x5ac4('0x41')](function(_0x152c80){});console[a25_0x5ac4('0x42')](_0xf947ca);}[a25_0x5ac4('0x36')](this));const _0x515ad2=this[a25_0x5ac4('0x28')][a25_0x5ac4('0x3a')];if(!_0x515ad2||_0x515ad2==''){this[a25_0x5ac4('0x28')][a25_0x5ac4('0x3a')]=uuidv4();this['config']={'deviceUuid':this['config'][a25_0x5ac4('0x3a')],'playerId':this[a25_0x5ac4('0x28')][a25_0x5ac4('0x2b')]};fs[a25_0x5ac4('0x43')](configFile,JSON[a25_0x5ac4('0x39')](this['config']));}}[a25_0x5ac4('0x35')](){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x35'));this[a25_0x5ac4('0x30')][a25_0x5ac4('0x44')][a25_0x5ac4('0x45')]()[a25_0x5ac4('0x2')](function(_0x4ed323){const _0x5c0c7a=_0x4ed323[a25_0x5ac4('0x46')][a25_0x5ac4('0x47')];this[a25_0x5ac4('0x48')](_0x5c0c7a);}[a25_0x5ac4('0x36')](this))[a25_0x5ac4('0x41')](function(_0xa4133){console[a25_0x5ac4('0x42')](_0xa4133);this[a25_0x5ac4('0x48')](JSON[a25_0x5ac4('0x39')](_0xa4133));}[a25_0x5ac4('0x36')](this));}[a25_0x5ac4('0x48')](_0x329b13){console['log'](a25_0x5ac4('0x49')+_0x329b13);const _0x2c6512={'player_id':this[a25_0x5ac4('0x2b')],'device_uuid':this[a25_0x5ac4('0x28')]['deviceUuid'],'status':_0x329b13!=''&&_0x329b13!=null?0x1:0x0,'playing_item':_0x329b13};this[a25_0x5ac4('0x24')][a25_0x5ac4('0x3e')]('http://restapi.lulo.run/player_devices/report_status',_0x2c6512,![])[a25_0x5ac4('0x2')](function(_0x20a2bc){console[a25_0x5ac4('0x42')]('reportStatusResponse');})[a25_0x5ac4('0x41')](function(_0x56141f){});}['checkFolders'](){fsExtra[a25_0x5ac4('0x4a')](this[a25_0x5ac4('0x16')],_0x182986=>{});fsExtra[a25_0x5ac4('0x4a')](this[a25_0x5ac4('0x15')],_0x19ba2e=>{});fsExtra['ensureDir'](this[a25_0x5ac4('0x17')],_0x518f59=>{});}['loadMediaList'](){const _0x3be831=format(this['playListServiceURL'],this[a25_0x5ac4('0x2b')]);console[a25_0x5ac4('0x42')](_0x3be831);request({'url':_0x3be831,'json':!![]},function(_0x160299,_0x222fa8,_0x24a343){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x4b'));this[a25_0x5ac4('0x20')]=_0x24a343;this[a25_0x5ac4('0x1d')]=this[a25_0x5ac4('0x4c')]();fsExtra[a25_0x5ac4('0x4d')](this[a25_0x5ac4('0x15')]);this[a25_0x5ac4('0x1e')]=[];this['failDownloadFiles']=[];this[a25_0x5ac4('0x1c')]=0x0;for(const _0x9a2c78 in _0x24a343){this[a25_0x5ac4('0x1e')]['push'](_0x24a343[_0x9a2c78]);}console['log'](a25_0x5ac4('0x4e')+this[a25_0x5ac4('0x1e')][a25_0x5ac4('0x4f')]);if(this[a25_0x5ac4('0x1e')][a25_0x5ac4('0x4f')]>0x0){this[a25_0x5ac4('0x50')]();}}[a25_0x5ac4('0x36')](this));}['reloadMediaList'](){this[a25_0x5ac4('0x51')]=!![];if(fsExtra[a25_0x5ac4('0x52')](this[a25_0x5ac4('0x15')])){fsExtra[a25_0x5ac4('0x4d')](this[a25_0x5ac4('0x15')]);}if(fsExtra[a25_0x5ac4('0x52')](this[a25_0x5ac4('0x17')])){fsExtra['emptyDirSync'](this['filesFolder']);}if(!fsExtra['existsSync'](this[a25_0x5ac4('0x19')])){fsExtra[a25_0x5ac4('0x53')](this[a25_0x5ac4('0x19')]);}if(!fsExtra[a25_0x5ac4('0x52')](this[a25_0x5ac4('0x1a')])){fsExtra[a25_0x5ac4('0x53')](this[a25_0x5ac4('0x1a')]);}this['loadMediaList']();}[a25_0x5ac4('0x4c')](){const _0x1ec72a=JSON[a25_0x5ac4('0x39')](this[a25_0x5ac4('0x20')]);try{if(!fsExtra[a25_0x5ac4('0x52')](this['playListFile'])){return!![];}else{const _0x4c905b=fsExtra['readFileSync'](this['playListFile'])[a25_0x5ac4('0x54')]();if(_0x4c905b!=_0x1ec72a){return!![];}}}catch(_0x7703b1){console[a25_0x5ac4('0x42')](_0x7703b1);}return![];}[a25_0x5ac4('0x50')](){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x55')+this['currentFile']+'\x20of\x20'+this[a25_0x5ac4('0x1e')][a25_0x5ac4('0x4f')]);if(this[a25_0x5ac4('0x1c')]>=this[a25_0x5ac4('0x1e')][a25_0x5ac4('0x4f')]){this[a25_0x5ac4('0x56')]();return;}const _0x5a5829=String(this[a25_0x5ac4('0x1e')][this[a25_0x5ac4('0x1c')]][a25_0x5ac4('0x57')]);const _0x362b28=this[a25_0x5ac4('0x1e')][this['currentFile']]['media_type'];let _0x33a436=_0x5a5829['substring'](_0x5a5829['lastIndexOf']('/')+0x1);const _0x181ff0=_0x33a436['split']('.')[a25_0x5ac4('0x58')](0x0,-0x1)['join']('.');let _0x42249a=this[a25_0x5ac4('0x2c')]+_0x5a5829;const _0x36d1ae=_0x42249a[a25_0x5ac4('0x59')]('.')[a25_0x5ac4('0x58')](0x0,-0x1)[a25_0x5ac4('0x5a')]('.');if(_0x362b28==a25_0x5ac4('0x5b')){_0x33a436=_0x33a436+a25_0x5ac4('0x5c');}else if(_0x362b28==a25_0x5ac4('0x5d')){_0x33a436=_0x181ff0+a25_0x5ac4('0x5c');_0x42249a=_0x36d1ae+a25_0x5ac4('0x5c');}console[a25_0x5ac4('0x42')](a25_0x5ac4('0x5e'));console['log'](_0x5a5829);console[a25_0x5ac4('0x42')](_0x362b28);console['log'](_0x33a436);console[a25_0x5ac4('0x42')](_0x42249a);console[a25_0x5ac4('0x42')](_0x181ff0);console['log'](_0x36d1ae);console[a25_0x5ac4('0x42')](a25_0x5ac4('0x5e'));if(fsExtra[a25_0x5ac4('0x52')](this[a25_0x5ac4('0x15')]+_0x33a436)){this[a25_0x5ac4('0x5f')](this['tempFolder']+_0x33a436)[a25_0x5ac4('0x2')](function(_0xf5c922){if(_0xf5c922){this[a25_0x5ac4('0x1c')]++;}else{this[a25_0x5ac4('0x1d')]=!![];}this['download']();}[a25_0x5ac4('0x36')](this));}else if(fsExtra[a25_0x5ac4('0x52')](this[a25_0x5ac4('0x17')]+_0x33a436)){this[a25_0x5ac4('0x5f')](this[a25_0x5ac4('0x17')]+_0x33a436)['then'](function(_0x8f637d){if(_0x8f637d){fsExtra[a25_0x5ac4('0x60')](this[a25_0x5ac4('0x17')]+_0x33a436,this['tempFolder']+_0x33a436);this[a25_0x5ac4('0x1c')]++;}else{this[a25_0x5ac4('0x1d')]=!![];}this[a25_0x5ac4('0x50')]();}[a25_0x5ac4('0x36')](this));}else{console[a25_0x5ac4('0x42')](a25_0x5ac4('0x61')+_0x42249a);this[a25_0x5ac4('0x1d')]=!![];if(_0x362b28==a25_0x5ac4('0x5b')){this['downloadYouTube'](_0x5a5829);}else{this[a25_0x5ac4('0x62')](_0x42249a,_0x33a436,_0x362b28);}}}[a25_0x5ac4('0x5f')](_0x4512d8){return __awaiter(this,void 0x0,void 0x0,function*(){console['log'](a25_0x5ac4('0x63')+_0x4512d8);const _0x4b2253=yield mediainfo(_0x4512d8)['catch'](_0x1e9643=>{console[a25_0x5ac4('0x42')](_0x1e9643);fsExtra[a25_0x5ac4('0x53')](_0x4512d8);return![];});const _0x5890e3=_0x4b2253['media'][a25_0x5ac4('0x64')]['length']>0x1&&_0x4b2253[a25_0x5ac4('0x65')]['track'][0x1][a25_0x5ac4('0x66')]==a25_0x5ac4('0x67');if(!_0x5890e3){fsExtra[a25_0x5ac4('0x53')](_0x4512d8);}console[a25_0x5ac4('0x42')](a25_0x5ac4('0x68')+_0x5890e3);return _0x5890e3;});}[a25_0x5ac4('0x62')](_0x33f037,_0x21fdd8,_0x23dd27){const _0x1ca7d4=new Downloader();console[a25_0x5ac4('0x42')](_0x33f037);console[a25_0x5ac4('0x42')](_0x21fdd8);console[a25_0x5ac4('0x42')](_0x23dd27);const _0x31499e=_0x1ca7d4[a25_0x5ac4('0x50')](_0x33f037,this['tempFolder']+_0x21fdd8);urlExists(_0x33f037,function(_0x2f5665,_0x190bd6){if(_0x190bd6){if(this[a25_0x5ac4('0x1f')]['includes'](this[a25_0x5ac4('0x1c')])){const _0x262b93=this[a25_0x5ac4('0x1f')][a25_0x5ac4('0x69')](this[a25_0x5ac4('0x1c')]);if(_0x262b93>-0x1){this['failDownloadFiles'][a25_0x5ac4('0x6a')](_0x262b93,0x1);}}console['log'](a25_0x5ac4('0x6b')+_0x33f037);_0x31499e[a25_0x5ac4('0x6c')]();}else{if(!this[a25_0x5ac4('0x1f')][a25_0x5ac4('0x6d')](this[a25_0x5ac4('0x1c')])){this[a25_0x5ac4('0x1f')][a25_0x5ac4('0x6e')](this[a25_0x5ac4('0x1c')]);}console[a25_0x5ac4('0x42')](a25_0x5ac4('0x6f')+_0x33f037);this[a25_0x5ac4('0x1c')]++;this[a25_0x5ac4('0x50')]();}}['bind'](this));_0x31499e['on']('start',function(_0x31499e){console[a25_0x5ac4('0x42')]('start:\x20'+_0x33f037);});_0x31499e['on'](a25_0x5ac4('0x70'),function(_0x31499e){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x71'));this['download']();}['bind'](this));_0x31499e['on'](a25_0x5ac4('0x72'),function(_0x31499e){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x72'));console[a25_0x5ac4('0x42')](a25_0x5ac4('0x73')+_0x21fdd8);console[a25_0x5ac4('0x42')]('mediaType:\x20'+_0x23dd27);this[a25_0x5ac4('0x5f')](this['tempFolder']+_0x21fdd8)[a25_0x5ac4('0x2')](function(_0x5a6f1c){if(_0x5a6f1c){this[a25_0x5ac4('0x1c')]++;}this[a25_0x5ac4('0x50')]();}[a25_0x5ac4('0x36')](this));}[a25_0x5ac4('0x36')](this));_0x31499e['on'](a25_0x5ac4('0x74'),function(_0x31499e){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x74'));});_0x31499e['on'](a25_0x5ac4('0x75'),function(_0x31499e){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x75'));});_0x31499e['on'](a25_0x5ac4('0x76'),function(_0x31499e){console[a25_0x5ac4('0x42')]('retry');});}['downloadHTTPFile'](_0x17e819,_0x37620e,_0x5512dc,_0xf84dce){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x77'));console[a25_0x5ac4('0x42')](_0x17e819);const _0x4f8753=!![];let _0x2ded9a=0x0;const _0x21c103='';console[a25_0x5ac4('0x42')](a25_0x5ac4('0x78')+_0x17e819+a25_0x5ac4('0x79')+_0x37620e);if(_0x2ded9a){if(_0x2ded9a>0x5){_0xf84dce(a25_0x5ac4('0x7a'),_0x17e819,_0x5512dc,null);return;}}else{_0x2ded9a=0x0;}const _0x16b213=this[a25_0x5ac4('0x15')]+_0x37620e;let _0x1c9a59;if(_0xf84dce===undefined){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x7b')+_0x17e819+'\x20to\x20'+_0x16b213);_0xf84dce=function(_0x3bf9b4,_0x4ebcad){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x7c'),_0x3bf9b4,_0x4ebcad);};}http['globalAgent'][a25_0x5ac4('0x7d')]=0x64;const _0x1830e3={'host':url['parse'](_0x17e819)[a25_0x5ac4('0x7e')],'port':0x50,'path':url[a25_0x5ac4('0x29')](_0x17e819)[a25_0x5ac4('0x7f')],'agent':![]};const _0x3d5104=http['get'](_0x1830e3,function(_0x25495e){let _0x25cf1e=0x0;let _0x3ba9c3=0x0;function _0x1a6d6e(){if(_0x25cf1e===undefined){console[a25_0x5ac4('0x42')](_0x37620e+a25_0x5ac4('0x80')+_0x3ba9c3+'/'+'?');}const _0x2512bf=_0x3ba9c3/_0x25cf1e*0x64;console['log'](_0x37620e+a25_0x5ac4('0x81')+_0x2512bf+'%\x09'+_0x3ba9c3+'/'+_0x25cf1e);}console[a25_0x5ac4('0x42')](_0x37620e+'\x20'+_0x25495e[a25_0x5ac4('0x82')]);switch(_0x25495e['statusCode']){case 0xc8:_0x25cf1e=_0x25495e[a25_0x5ac4('0x83')][a25_0x5ac4('0x84')]||_0x21c103;fs[a25_0x5ac4('0x85')](_0x16b213,function(_0x5a97b8,_0x48db37){if(!_0x5a97b8){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x86')+_0x16b213);if(_0x48db37[a25_0x5ac4('0x87')]==_0x25cf1e){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x88')+_0x25cf1e+')');console[a25_0x5ac4('0x42')](a25_0x5ac4('0x89'));}else{console[a25_0x5ac4('0x42')](a25_0x5ac4('0x8a')+_0x48db37['size']+a25_0x5ac4('0x8b')+_0x25cf1e+')');}}_0x1c9a59=fs[a25_0x5ac4('0x8c')](_0x16b213);_0x25495e[a25_0x5ac4('0x8d')](_0x1c9a59);_0x25495e['on']('data',function(_0x50c8c5){_0x3ba9c3+=_0x50c8c5['length'];_0x1a6d6e();});_0x3d5104['on'](a25_0x5ac4('0x70'),function(_0x5a97b8){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x8e'));console[a25_0x5ac4('0x42')](_0x5a97b8);});_0x1c9a59['on']('finish',function(){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x8f')+_0x17e819+a25_0x5ac4('0x79')+_0x37620e);_0xf84dce(null,_0x37620e,_0x5512dc,_0x37620e);}[a25_0x5ac4('0x36')](this));});break;case 0x12e:const _0x4a5857=_0x25495e['headers'][a25_0x5ac4('0x90')];console[a25_0x5ac4('0x42')](a25_0x5ac4('0x91')+_0x17e819+'\x20to\x20'+_0x4a5857);if(_0x2ded9a<0x5){this[a25_0x5ac4('0x77')](_0x4a5857,_0x37620e,_0xf84dce,_0x2ded9a++);}else{console[a25_0x5ac4('0x70')](a25_0x5ac4('0x92')+_0x17e819+'.');_0xf84dce(a25_0x5ac4('0x93'),null,null,null);}return;case 0x194:console['log'](a25_0x5ac4('0x94')+_0x17e819);default:console['log'](a25_0x5ac4('0x95')+_0x17e819+a25_0x5ac4('0x96')+_0x25495e[a25_0x5ac4('0x82')]);_0x3d5104[a25_0x5ac4('0x97')]();_0xf84dce(_0x25495e[a25_0x5ac4('0x82')],null,null,null);return;}})['on']('error',function(_0x5b6e20){console['log'](a25_0x5ac4('0x98')+_0x17e819+'\x20'+_0x5b6e20[a25_0x5ac4('0x99')]);_0xf84dce(_0x5b6e20,null,null,null);});}['downloadHTTPFileCallback'](_0x561cca,_0x313732,_0x2bd453,_0x13b794){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x9a'));console[a25_0x5ac4('0x42')](_0x561cca);console[a25_0x5ac4('0x42')](_0x313732);console[a25_0x5ac4('0x42')](_0x2bd453);console['log'](_0x13b794);if(_0x2bd453=='image'){const _0x4618be=this[a25_0x5ac4('0x1e')][this[a25_0x5ac4('0x1c')]][a25_0x5ac4('0x9b')]!=null?this[a25_0x5ac4('0x1e')][this[a25_0x5ac4('0x1c')]]['duration']:0x1e;this[a25_0x5ac4('0x9c')](_0x13b794,_0x4618be);}else if(_0x2bd453==a25_0x5ac4('0x9d')){if(_0x561cca==null&&_0x313732!=''){this['currentFile']++;}this['download']();}console[a25_0x5ac4('0x42')](this[a25_0x5ac4('0x1c')]);}['downloadRequestFile'](_0xdd7ed6,_0x24c650,_0x27b6f7){progress(request(_0xdd7ed6),{})['on']('progress',function(_0x52bde2){console[a25_0x5ac4('0x42')](_0x52bde2);})['on'](a25_0x5ac4('0x70'),function(_0x482bf3){console[a25_0x5ac4('0x42')](a25_0x5ac4('0x9e'));this[a25_0x5ac4('0x50')]();})['on'](a25_0x5ac4('0x72'),function(){console['log'](a25_0x5ac4('0x73')+_0x24c650);console[a25_0x5ac4('0x42')](a25_0x5ac4('0x9f')+_0x27b6f7);if(_0x27b6f7=='image'){const _0x5cc39b=this['downloadFiles'][this[a25_0x5ac4('0x1c')]][a25_0x5ac4('0x9b')]!=null?this[a25_0x5ac4('0x1e')][this['currentFile']][a25_0x5ac4('0x9b')]:0x1e;this['createImageVideo'](_0x24c650,_0x5cc39b);}else if(_0x27b6f7=='video'){this[a25_0x5ac4('0x1c')]++;this[a25_0x5ac4('0x50')]();}}[a25_0x5ac4('0x36')](this))[a25_0x5ac4('0x8d')](fs[a25_0x5ac4('0x8c')](this[a25_0x5ac4('0x15')]+_0x24c650));}[a25_0x5ac4('0x9c')](_0x353497,_0x3daf3f=0x1e){const _0x48c199=this[a25_0x5ac4('0x15')]+_0x353497;console[a25_0x5ac4('0x42')](_0x48c199);console[a25_0x5ac4('0x42')](_0x353497);const _0x297d0e=_0x353497['split']('.')[a25_0x5ac4('0x58')](0x0,-0x1)[a25_0x5ac4('0x5a')]('.');const _0x387d5d=a25_0x5ac4('0xa0');const _0x2cce04=['-y','-r',a25_0x5ac4('0xa1'),a25_0x5ac4('0xa2'),'1',a25_0x5ac4('0xa3'),'glob','-i',_0x48c199,'-t',String(_0x3daf3f),a25_0x5ac4('0xa4'),a25_0x5ac4('0xa5'),a25_0x5ac4('0xa6'),'yuv420p','-r','25',a25_0x5ac4('0xa7'),a25_0x5ac4('0xa8'),this['tempFolder']+_0x297d0e+'.mp4'];const _0x30163d=spawn(_0x387d5d,_0x2cce04);_0x30163d[a25_0x5ac4('0xa9')]['on'](a25_0x5ac4('0xaa'),function(_0x1c4f9e){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xab')+_0x48c199);});_0x30163d[a25_0x5ac4('0xac')]['on'](a25_0x5ac4('0xaa'),function(_0x14110f){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xad')+_0x14110f);}['bind'](this));_0x30163d['on']('close',function(){console[a25_0x5ac4('0x42')]('finished\x20mp4\x20convert');this[a25_0x5ac4('0x1c')]++;this['download']();}[a25_0x5ac4('0x36')](this));}[a25_0x5ac4('0xae')](_0x1ae6f8){const _0x17f5cc=this[a25_0x5ac4('0x15')]+'/'+_0x1ae6f8+a25_0x5ac4('0x5c');const _0x29b919=a25_0x5ac4('0xaf')+_0x1ae6f8;console[a25_0x5ac4('0x42')](a25_0x5ac4('0xb0')+_0x29b919);console[a25_0x5ac4('0x42')](a25_0x5ac4('0xb1')+_0x17f5cc);const _0x226197=youtubedl(_0x29b919,[a25_0x5ac4('0xb2'),a25_0x5ac4('0xb3')],{'cwd':__dirname});_0x226197['on']('info',function(_0x5ab171){console[a25_0x5ac4('0x42')]('Download\x20started');console[a25_0x5ac4('0x42')](a25_0x5ac4('0xb4')+_0x5ab171[a25_0x5ac4('0xb5')]);console[a25_0x5ac4('0x42')]('size:\x20'+_0x5ab171[a25_0x5ac4('0x87')]);});_0x226197['on'](a25_0x5ac4('0xb6'),function complete(_0x127dc0){'use strict';console['log'](a25_0x5ac4('0xb4')+_0x127dc0[a25_0x5ac4('0xb5')]+a25_0x5ac4('0xb7'));});_0x226197['on']('end',function(){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xb8'));this[a25_0x5ac4('0x5f')](_0x17f5cc)[a25_0x5ac4('0x2')](function(_0x2b5d2b){if(_0x2b5d2b){this[a25_0x5ac4('0x1c')]++;}this[a25_0x5ac4('0x50')]();}['bind'](this));}[a25_0x5ac4('0x36')](this));_0x226197[a25_0x5ac4('0x8d')](fs[a25_0x5ac4('0x8c')](_0x17f5cc));}[a25_0x5ac4('0x56')](){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xb9'));if(this[a25_0x5ac4('0x1d')]){if(this[a25_0x5ac4('0x1f')][a25_0x5ac4('0x4f')]==0x0){console['log'](a25_0x5ac4('0xba')+this['playListFile']);fs[a25_0x5ac4('0x43')](this[a25_0x5ac4('0x19')],JSON[a25_0x5ac4('0x39')](this[a25_0x5ac4('0x20')]));let _0x13b7e2='#EXTCPlayListM3U::M3U'+'\x0d\x0a'+a25_0x5ac4('0xbb')+'\x0d\x0a';for(const _0x4a4156 in this[a25_0x5ac4('0x1e')]){const _0x2703c3=this[a25_0x5ac4('0x1e')][_0x4a4156][a25_0x5ac4('0x57')];const _0x3fc154=this['downloadFiles'][_0x4a4156][a25_0x5ac4('0xbc')];const _0xfe0341=_0x2703c3['substring'](_0x2703c3[a25_0x5ac4('0xbd')]('/')+0x1);let _0x23ba51=_0xfe0341['split']('.')['slice'](0x0,-0x1)[a25_0x5ac4('0x5a')]('.');if(_0x3fc154=='youtube_single'){_0x23ba51=_0x2703c3;}_0x13b7e2+='/home/osmc/luloclient/media/files/'+_0x23ba51+a25_0x5ac4('0x5c')+'\x0d\x0a';console[a25_0x5ac4('0x42')](a25_0x5ac4('0xbe')+_0x13b7e2);}console[a25_0x5ac4('0x42')](a25_0x5ac4('0xbe')+_0x13b7e2);fsExtra['emptyDirSync'](this[a25_0x5ac4('0x17')]);console[a25_0x5ac4('0x42')](a25_0x5ac4('0xbf')+this[a25_0x5ac4('0x15')]);fsExtra[a25_0x5ac4('0x60')](this['tempFolder'],this[a25_0x5ac4('0x17')]);console['log'](a25_0x5ac4('0xc0')+this[a25_0x5ac4('0x1a')]);fsExtra[a25_0x5ac4('0x43')](this['m3uFile'],_0x13b7e2);console[a25_0x5ac4('0x42')]('emptyDirSync:\x20'+this[a25_0x5ac4('0x15')]);fsExtra[a25_0x5ac4('0x4d')](this['tempFolder']);console[a25_0x5ac4('0x42')](a25_0x5ac4('0xc1'));this[a25_0x5ac4('0xc2')]();}else{console[a25_0x5ac4('0x42')]('Playlist\x20incomplete,\x20retry.');this[a25_0x5ac4('0x1c')]=0x0;setTimeout(function(){this[a25_0x5ac4('0x50')]();}[a25_0x5ac4('0x36')](this),0x1388);}}else{console[a25_0x5ac4('0x42')](a25_0x5ac4('0xc3'));}}[a25_0x5ac4('0xc4')](){this[a25_0x5ac4('0xc5')](a25_0x5ac4('0xc6'),{'playlistid':0x1},function(_0x4027c3){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xc7'));console['log'](_0x4027c3);this[a25_0x5ac4('0xc5')]('Playlist.Add',{'item':{'file':a25_0x5ac4('0xc8')},'playlistid':0x1},function(_0x4027c3){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xc9'));console[a25_0x5ac4('0x42')](_0x4027c3);this[a25_0x5ac4('0xc5')](a25_0x5ac4('0xca'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x4027c3){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xcb'));console[a25_0x5ac4('0x42')](_0x4027c3);this[a25_0x5ac4('0xcc')](a25_0x5ac4('0xcd'));}['bind'](this));}[a25_0x5ac4('0x36')](this));}[a25_0x5ac4('0x36')](this));}['reboot'](){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xce'));exec(a25_0x5ac4('0xcf'),function(_0x34bf1c){console[a25_0x5ac4('0x42')](_0x34bf1c);});}[a25_0x5ac4('0xd0')](){const _0x1cae78=format(this[a25_0x5ac4('0xd1')],this[a25_0x5ac4('0x2b')]);console[a25_0x5ac4('0x42')](_0x1cae78);request({'url':_0x1cae78,'json':!![]},function(_0x23c029,_0x50bc71,_0xacdf3c){if(_0xacdf3c['length']>0x0){const _0x597e26=_0xacdf3c[0x0];const _0x4af4f3=_0x597e26[a25_0x5ac4('0xd2')];const _0x4191c6=_0x597e26[a25_0x5ac4('0xd3')]==0x1;this[a25_0x5ac4('0xd4')](_0x4af4f3);this[a25_0x5ac4('0xd5')](_0x4191c6);this['registerClient']();}console['log'](_0xacdf3c);}[a25_0x5ac4('0x36')](this));}[a25_0x5ac4('0xd6')](){this['kodiCommandClient'](a25_0x5ac4('0xd7'));}[a25_0x5ac4('0xd8')](){this[a25_0x5ac4('0xcc')](a25_0x5ac4('0xd9'));}['setRss'](_0x21e2e0){const _0x2a734f=_0x21e2e0!=null&&_0x21e2e0!='';const _0x57ba9c='/home/osmc/.kodi/userdata/RssFeeds.xml';if(fsExtra[a25_0x5ac4('0x52')](_0x57ba9c)){const _0x27c3cc=fsExtra[a25_0x5ac4('0x2a')](_0x57ba9c);console['log'](a25_0x5ac4('0xda')+_0x27c3cc);const _0x16d1c6=require(a25_0x5ac4('0xdb'));const _0x5df141=_0x16d1c6[a25_0x5ac4('0xdc')];_0x5df141(_0x27c3cc,function(_0x478eb9,_0x53849d){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xdd'),_0x478eb9);console[a25_0x5ac4('0x42')]('result:\x20%j',_0x53849d);if(!_0x21e2e0||_0x21e2e0==null||_0x21e2e0==''){_0x21e2e0='none';}_0x53849d[a25_0x5ac4('0xde')][a25_0x5ac4('0xdf')][0x0][a25_0x5ac4('0xe0')][0x0]['_']=_0x21e2e0;const _0x19f06e=new _0x16d1c6[(a25_0x5ac4('0xe1'))]();const _0x467db4=_0x19f06e[a25_0x5ac4('0xe2')](_0x53849d);console[a25_0x5ac4('0x42')](a25_0x5ac4('0xe3'),_0x467db4);fsExtra['writeFileSync'](_0x57ba9c,_0x467db4);});this[a25_0x5ac4('0xcc')](a25_0x5ac4('0xe4'));this[a25_0x5ac4('0xc5')](a25_0x5ac4('0xe5'),{'setting':a25_0x5ac4('0xe6'),'value':_0x2a734f},function(_0x1b8c3c){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xe7'));console[a25_0x5ac4('0x42')](_0x1b8c3c);}[a25_0x5ac4('0x36')](this));}}[a25_0x5ac4('0xd5')](_0x14c724){this[a25_0x5ac4('0xc5')](a25_0x5ac4('0xe5'),{'setting':a25_0x5ac4('0xe8'),'value':_0x14c724},function(_0xc57c1b){console[a25_0x5ac4('0x42')](a25_0x5ac4('0xe9'));console['log'](_0xc57c1b);}['bind'](this));}[a25_0x5ac4('0xcc')](_0x29ffe5){exec(a25_0x5ac4('0xea')+_0x29ffe5+'\x22',function(_0x15b04b){console[a25_0x5ac4('0x42')](_0x15b04b);});}['jsonrpcClient'](_0x23b24e,_0x11ea63,_0x17ceb3){const _0x63838a={'jsonrpc':'2.0','method':_0x23b24e,'params':_0x11ea63,'id':0x1};const _0x2eb0a9={'user':this[a25_0x5ac4('0x21')],'pass':this['kodiPassword']};console[a25_0x5ac4('0x42')](a25_0x5ac4('0xeb'),_0x63838a);console[a25_0x5ac4('0x42')](a25_0x5ac4('0xec'),_0x2eb0a9);this[a25_0x5ac4('0x24')][a25_0x5ac4('0x3e')](this[a25_0x5ac4('0x31')]+a25_0x5ac4('0xed'),_0x63838a,![],_0x2eb0a9)[a25_0x5ac4('0x2')](function(_0x245d5f){_0x17ceb3(_0x245d5f);})[a25_0x5ac4('0x41')](function(_0x435f8a){});}}exports[a25_0x5ac4('0xee')]=SyncPlaylistsService;