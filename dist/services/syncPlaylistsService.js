var a26_0x21ed=['end','stopped','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','globalAgent','maxSockets','\x20Progress:\x20unknown\x09','\x20Progress:\x20','statusCode','stat','size','Redownloading',')\x20vs\x20New(','createWriteStream','pipe','data','err:\x20','finish','Downloaded\x20','headers','location','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','downloadHTTPFileCallback','duration','createImageVideo','video','progress','Error\x20downloading\x20file','Downloaded:\x20','mediaType:\x20','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','-pix_fmt','yuv420p','-vf','scale=1920:1080','stdout','Converting\x20','stderr','stderr:\x20','close','finished\x20mp4\x20convert','downloadYouTube','outFileName:\x20','--format=18','--no-check-certificate','Download\x20started','filename:\x20','complete','\x20already\x20downloaded.','finished\x20youtube\x20downloading!','this.playListFile:\x20','#EXTCPlayListM3U::M3U','#EXTINF:0,luloPlayList','path','substring','/home/osmc/luloclient/media/files/','m3uContent:\x20','writeFileSync:\x20','emptyDirSync:\x20','Rebooting..','reboot','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','refreshPlayer','jsonrpcClient','Playlist.Clear','Playlist.Add','//home/osmc/luloclient/media/files/lulo_playlist.m3u','Playlist.Added','Player.Open','Playlist.Opened','kodiCommandClient','sudo\x20/sbin/reboot\x20-f','setRss','enableClock','turnOffTV','CECActivateSource()','/home/osmc/.kodi/userdata/RssFeeds.xml','xmlContent:\x20','xml2js','parseString','err:\x20%j','result:\x20%j','rssfeeds','set','feed','Builder','xml:\x20%j','RefreshRSS()','Settings.SetSettingValue','lookandfeel.enablerssfeeds','setRss:','videoplayer.usedisplayasclock','enableClock:\x20','kodi-send\x20--action=\x22','2.0','jsonrpcClient\x20options','__awaiter','throw','done','value','then','apply','next','defineProperty','__esModule','./playerService','node-mediainfo','url','http','fs-extra','request','request-progress','child_process','exec','is-image','string-template','youtube-dl','config.json','package.json','url-exists','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','files/','playListFile','playlist.txt','m3uFile','filesFolder','playlistChanged','newPlayList','kodiHost','http://localhost','kodiUser','lulo','kodiPassword','.lulo123.','forceReload','httpClientService','HttpClientService','PlayerService','init','config','context','parse','readFileSync','playerId','baseURL','WEB_SERVICE_URL','playListServiceURL','api/player_playlist.php?player_id={0}','playerServiceURL','api/player.php?player_id={0}','kodi','checkDependencies','registerClient','checkFolders','updateSettings','getStatus','bind','playlist','getItems','stringify','networkInterfaces','version','post','http://restapi.lulo.run/player_devices/register','log','register\x20response:\x20','deviceUuid','writeFileSync','player','getCurrentlyPlayingVideo','label','reportStatus','catch','reportStatus\x20playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse','ensureDir','loadMediaList','loadMediaList:\x20','hasPlayListChanged','emptyDirSync','downloadFiles','failDownloadFiles','currentFile','length','download','existsSync','removeSync','toString','this.currentFile:\x20','\x20of\x20','finishProcess','media_type','lastIndexOf','split','slice','join','.mp4','image','**********+','checkVideo','Downloading:\x20','youtube_single','downloader','videoFile:\x20','track','media','@type','Video','includes','indexOf','splice','downloading:\x20','start','error','error:\x20'];(function(_0x50ccdd,_0x472630){var _0x4afcb0=function(_0x1ac464){while(--_0x1ac464){_0x50ccdd['push'](_0x50ccdd['shift']());}};_0x4afcb0(++_0x472630);}(a26_0x21ed,0x71));var a26_0x2203=function(_0x4ee0f9,_0x7af86e){_0x4ee0f9=_0x4ee0f9-0x0;var _0xaa5db6=a26_0x21ed[_0x4ee0f9];return _0xaa5db6;};'use strict';var __awaiter=this&&this[a26_0x2203('0x0')]||function(_0x51c9c5,_0x4e0c31,_0x11119b,_0x25c766){function _0x25034f(_0x656fee){return _0x656fee instanceof _0x11119b?_0x656fee:new _0x11119b(function(_0x40397a){_0x40397a(_0x656fee);});}return new(_0x11119b||(_0x11119b=Promise))(function(_0x57d856,_0x28de15){function _0x468274(_0x5e26b9){try{_0x28f37e(_0x25c766['next'](_0x5e26b9));}catch(_0x2ec3a6){_0x28de15(_0x2ec3a6);}}function _0x4113fd(_0x199444){try{_0x28f37e(_0x25c766[a26_0x2203('0x1')](_0x199444));}catch(_0x2c31c9){_0x28de15(_0x2c31c9);}}function _0x28f37e(_0x2fd070){_0x2fd070[a26_0x2203('0x2')]?_0x57d856(_0x2fd070[a26_0x2203('0x3')]):_0x25034f(_0x2fd070[a26_0x2203('0x3')])[a26_0x2203('0x4')](_0x468274,_0x4113fd);}_0x28f37e((_0x25c766=_0x25c766[a26_0x2203('0x5')](_0x51c9c5,_0x4e0c31||[]))[a26_0x2203('0x6')]());});};Object[a26_0x2203('0x7')](exports,a26_0x2203('0x8'),{'value':!![]});const HttpClientService_1=require('../infrastructure/HttpClientService');const playerService_1=require(a26_0x2203('0x9'));const mediainfo=require(a26_0x2203('0xa'));const fs=require('fs');const url=require(a26_0x2203('0xb'));const http=require(a26_0x2203('0xc'));const fsExtra=require(a26_0x2203('0xd'));const request=require(a26_0x2203('0xe'));const progress=require(a26_0x2203('0xf'));const spawn=require(a26_0x2203('0x10'))['spawn'];const exec=require(a26_0x2203('0x10'))[a26_0x2203('0x11')];const isImage=require(a26_0x2203('0x12'));const format=require(a26_0x2203('0x13'));const os=require('os');const youtubedl=require(a26_0x2203('0x14'));const uuidv4=require('uuid/v4');const configFile=a26_0x2203('0x15');const contextFile=a26_0x2203('0x16');const urlExists=require(a26_0x2203('0x17'));const kodi_rpc=require(a26_0x2203('0x18'));const Downloader=require(a26_0x2203('0x19'));class SyncPlaylistsService{constructor(){this[a26_0x2203('0x1a')]=a26_0x2203('0x1b');this[a26_0x2203('0x1c')]=this[a26_0x2203('0x1a')]+a26_0x2203('0x1d');this['filesFolder']=this[a26_0x2203('0x1a')]+a26_0x2203('0x1e');this[a26_0x2203('0x1f')]=this['mediaFolder']+a26_0x2203('0x20');this[a26_0x2203('0x21')]=this[a26_0x2203('0x22')]+'lulo_playlist.m3u';this['currentFile']=0x0;this[a26_0x2203('0x23')]=![];this['downloadFiles']=[];this['failDownloadFiles']=[];this[a26_0x2203('0x24')]={};this[a26_0x2203('0x25')]=a26_0x2203('0x26');this[a26_0x2203('0x27')]=a26_0x2203('0x28');this[a26_0x2203('0x29')]=a26_0x2203('0x2a');this[a26_0x2203('0x2b')]=![];this[a26_0x2203('0x2c')]=new HttpClientService_1[(a26_0x2203('0x2d'))]();this['playerService']=new playerService_1[(a26_0x2203('0x2e'))]();}[a26_0x2203('0x2f')](){this[a26_0x2203('0x30')]=JSON['parse'](fs['readFileSync'](configFile));this[a26_0x2203('0x31')]=JSON[a26_0x2203('0x32')](fs[a26_0x2203('0x33')](contextFile));this['playerId']=this[a26_0x2203('0x30')][a26_0x2203('0x34')];this[a26_0x2203('0x35')]=process['env'][a26_0x2203('0x36')]+'deploy/';this[a26_0x2203('0x37')]=this[a26_0x2203('0x35')]+a26_0x2203('0x38');this[a26_0x2203('0x39')]=this['baseURL']+a26_0x2203('0x3a');this[a26_0x2203('0x3b')]=new kodi_rpc({'url':this['kodiHost'],'user':this[a26_0x2203('0x27')],'password':this['kodiPassword']});this[a26_0x2203('0x3c')]();this[a26_0x2203('0x3d')]();this[a26_0x2203('0x3e')]();this['loadMediaList']();this[a26_0x2203('0x3f')]();setInterval(function(){this[a26_0x2203('0x40')]();}[a26_0x2203('0x41')](this),0x2710);setInterval(function(){this[a26_0x2203('0x3d')]();}[a26_0x2203('0x41')](this),0x493e0);}[a26_0x2203('0x3c')](){}['registerClient'](){this[a26_0x2203('0x3b')][a26_0x2203('0x42')][a26_0x2203('0x43')](0x1)[a26_0x2203('0x4')](function(_0x52dc5c){const _0x23cc95=JSON[a26_0x2203('0x44')](_0x52dc5c);const _0x531fb4={'player_id':this[a26_0x2203('0x34')],'device_uuid':this[a26_0x2203('0x30')]['deviceUuid'],'network_info':JSON[a26_0x2203('0x44')](os[a26_0x2203('0x45')]()),'firmware_info':JSON[a26_0x2203('0x44')](this[a26_0x2203('0x31')][a26_0x2203('0x46')]),'playlist':_0x23cc95,'playing_item':'','status':0x0};this['httpClientService'][a26_0x2203('0x47')](a26_0x2203('0x48'),_0x531fb4,![])[a26_0x2203('0x4')](function(_0x324b49){console[a26_0x2203('0x49')](a26_0x2203('0x4a')+Date());})['catch'](function(_0xcb0f50){});console[a26_0x2203('0x49')](_0x531fb4);}[a26_0x2203('0x41')](this));const _0x5ba480=this[a26_0x2203('0x30')][a26_0x2203('0x4b')];if(!_0x5ba480||_0x5ba480==''){this[a26_0x2203('0x30')][a26_0x2203('0x4b')]=uuidv4();this[a26_0x2203('0x30')]={'deviceUuid':this[a26_0x2203('0x30')][a26_0x2203('0x4b')],'playerId':this[a26_0x2203('0x30')][a26_0x2203('0x34')]};fs[a26_0x2203('0x4c')](configFile,JSON[a26_0x2203('0x44')](this[a26_0x2203('0x30')]));}}[a26_0x2203('0x40')](){console['log']('getStatus');this[a26_0x2203('0x3b')][a26_0x2203('0x4d')][a26_0x2203('0x4e')]()[a26_0x2203('0x4')](function(_0x44f623){const _0x2694b9=_0x44f623['item'][a26_0x2203('0x4f')];this[a26_0x2203('0x50')](_0x2694b9);}[a26_0x2203('0x41')](this))[a26_0x2203('0x51')](function(_0x13e56f){console[a26_0x2203('0x49')](_0x13e56f);this['reportStatus'](JSON[a26_0x2203('0x44')](_0x13e56f));}[a26_0x2203('0x41')](this));}[a26_0x2203('0x50')](_0x543b11){console[a26_0x2203('0x49')](a26_0x2203('0x52')+_0x543b11);const _0x44ccf0={'player_id':this['playerId'],'device_uuid':this[a26_0x2203('0x30')][a26_0x2203('0x4b')],'status':_0x543b11!=''&&_0x543b11!=null?0x1:0x0,'playing_item':_0x543b11};this[a26_0x2203('0x2c')]['post'](a26_0x2203('0x53'),_0x44ccf0,![])[a26_0x2203('0x4')](function(_0x48eba2){console['log'](a26_0x2203('0x54'));})[a26_0x2203('0x51')](function(_0x188f8d){});}[a26_0x2203('0x3e')](){fsExtra[a26_0x2203('0x55')](this[a26_0x2203('0x1a')],_0xdc7414=>{});fsExtra[a26_0x2203('0x55')](this['tempFolder'],_0x2e3b1d=>{});fsExtra['ensureDir'](this[a26_0x2203('0x22')],_0x52ebbb=>{});}[a26_0x2203('0x56')](){const _0xbc0b6f=format(this[a26_0x2203('0x37')],this[a26_0x2203('0x34')]);console[a26_0x2203('0x49')](_0xbc0b6f);request({'url':_0xbc0b6f,'json':!![]},function(_0xd6858e,_0x600424,_0x4d2313){console[a26_0x2203('0x49')](a26_0x2203('0x57'));this[a26_0x2203('0x24')]=_0x4d2313;this['playlistChanged']=this[a26_0x2203('0x58')]();fsExtra[a26_0x2203('0x59')](this[a26_0x2203('0x1c')]);this[a26_0x2203('0x5a')]=[];this[a26_0x2203('0x5b')]=[];this[a26_0x2203('0x5c')]=0x0;for(const _0x36aab3 in _0x4d2313){this[a26_0x2203('0x5a')]['push'](_0x4d2313[_0x36aab3]);}console[a26_0x2203('0x49')]('Total:\x20'+this[a26_0x2203('0x5a')]['length']);if(this[a26_0x2203('0x5a')][a26_0x2203('0x5d')]>0x0){this[a26_0x2203('0x5e')]();}}[a26_0x2203('0x41')](this));}['reloadMediaList'](){this[a26_0x2203('0x2b')]=!![];if(fsExtra[a26_0x2203('0x5f')](this[a26_0x2203('0x1c')])){fsExtra['emptyDirSync'](this[a26_0x2203('0x1c')]);}if(fsExtra[a26_0x2203('0x5f')](this['filesFolder'])){fsExtra[a26_0x2203('0x59')](this['filesFolder']);}if(!fsExtra['existsSync'](this['playListFile'])){fsExtra['removeSync'](this['playListFile']);}if(!fsExtra[a26_0x2203('0x5f')](this[a26_0x2203('0x21')])){fsExtra[a26_0x2203('0x60')](this['m3uFile']);}this[a26_0x2203('0x56')]();}[a26_0x2203('0x58')](){const _0x2f0fdb=JSON[a26_0x2203('0x44')](this[a26_0x2203('0x24')]);try{if(!fsExtra[a26_0x2203('0x5f')](this[a26_0x2203('0x1f')])){return!![];}else{const _0x121275=fsExtra[a26_0x2203('0x33')](this['playListFile'])[a26_0x2203('0x61')]();if(_0x121275!=_0x2f0fdb){return!![];}}}catch(_0x28ba9a){console['log'](_0x28ba9a);}return![];}[a26_0x2203('0x5e')](){console['log'](a26_0x2203('0x62')+this[a26_0x2203('0x5c')]+a26_0x2203('0x63')+this['downloadFiles'][a26_0x2203('0x5d')]);if(this[a26_0x2203('0x5c')]>=this[a26_0x2203('0x5a')][a26_0x2203('0x5d')]){this[a26_0x2203('0x64')]();return;}const _0x32689c=String(this[a26_0x2203('0x5a')][this['currentFile']]['path']);const _0x54bd07=this['downloadFiles'][this['currentFile']][a26_0x2203('0x65')];let _0x49190d=_0x32689c['substring'](_0x32689c[a26_0x2203('0x66')]('/')+0x1);const _0x19b41d=_0x49190d[a26_0x2203('0x67')]('.')[a26_0x2203('0x68')](0x0,-0x1)[a26_0x2203('0x69')]('.');let _0x38c2b8=this[a26_0x2203('0x35')]+_0x32689c;const _0x1f581f=_0x38c2b8[a26_0x2203('0x67')]('.')[a26_0x2203('0x68')](0x0,-0x1)['join']('.');if(_0x54bd07=='youtube_single'){_0x49190d=_0x49190d+a26_0x2203('0x6a');}else if(_0x54bd07==a26_0x2203('0x6b')){_0x49190d=_0x19b41d+a26_0x2203('0x6a');_0x38c2b8=_0x1f581f+a26_0x2203('0x6a');}console[a26_0x2203('0x49')](a26_0x2203('0x6c'));console[a26_0x2203('0x49')](_0x32689c);console[a26_0x2203('0x49')](_0x54bd07);console[a26_0x2203('0x49')](_0x49190d);console[a26_0x2203('0x49')](_0x38c2b8);console[a26_0x2203('0x49')](_0x19b41d);console['log'](_0x1f581f);console['log'](a26_0x2203('0x6c'));if(fsExtra[a26_0x2203('0x5f')](this[a26_0x2203('0x1c')]+_0x49190d)){this[a26_0x2203('0x6d')](this[a26_0x2203('0x1c')]+_0x49190d)[a26_0x2203('0x4')](function(_0x3b02f0){if(_0x3b02f0){this[a26_0x2203('0x5c')]++;}else{this[a26_0x2203('0x23')]=!![];}this[a26_0x2203('0x5e')]();}['bind'](this));}else if(fsExtra['existsSync'](this[a26_0x2203('0x22')]+_0x49190d)){this[a26_0x2203('0x6d')](this[a26_0x2203('0x22')]+_0x49190d)[a26_0x2203('0x4')](function(_0x41bbe9){if(_0x41bbe9){fsExtra['copySync'](this[a26_0x2203('0x22')]+_0x49190d,this[a26_0x2203('0x1c')]+_0x49190d);this[a26_0x2203('0x5c')]++;}else{this[a26_0x2203('0x23')]=!![];}this['download']();}[a26_0x2203('0x41')](this));}else{console[a26_0x2203('0x49')](a26_0x2203('0x6e')+_0x38c2b8);this[a26_0x2203('0x23')]=!![];if(_0x54bd07==a26_0x2203('0x6f')){this['downloadYouTube'](_0x32689c);}else{this[a26_0x2203('0x70')](_0x38c2b8,_0x49190d,_0x54bd07);}}}[a26_0x2203('0x6d')](_0x54c23c){return __awaiter(this,void 0x0,void 0x0,function*(){console[a26_0x2203('0x49')](a26_0x2203('0x71')+_0x54c23c);const _0x27cbc0=yield mediainfo(_0x54c23c)[a26_0x2203('0x51')](_0x4d6a55=>{console[a26_0x2203('0x49')](_0x4d6a55);fsExtra[a26_0x2203('0x60')](_0x54c23c);return![];});const _0x19e087=_0x27cbc0['media'][a26_0x2203('0x72')][a26_0x2203('0x5d')]>0x1&&_0x27cbc0[a26_0x2203('0x73')][a26_0x2203('0x72')][0x1][a26_0x2203('0x74')]==a26_0x2203('0x75');if(!_0x19e087){fsExtra[a26_0x2203('0x60')](_0x54c23c);}console[a26_0x2203('0x49')]('mediainfo\x20check:'+_0x19e087);return _0x19e087;});}[a26_0x2203('0x70')](_0x211ac8,_0x272673,_0x2f4635){const _0x143475=new Downloader();console[a26_0x2203('0x49')](_0x211ac8);console[a26_0x2203('0x49')](_0x272673);console['log'](_0x2f4635);const _0xf6c410=_0x143475[a26_0x2203('0x5e')](_0x211ac8,this['tempFolder']+_0x272673);urlExists(_0x211ac8,function(_0x1ade97,_0x492fc0){if(_0x492fc0){if(this[a26_0x2203('0x5b')][a26_0x2203('0x76')](this[a26_0x2203('0x5c')])){const _0x1e829f=this[a26_0x2203('0x5b')][a26_0x2203('0x77')](this[a26_0x2203('0x5c')]);if(_0x1e829f>-0x1){this[a26_0x2203('0x5b')][a26_0x2203('0x78')](_0x1e829f,0x1);}}console[a26_0x2203('0x49')](a26_0x2203('0x79')+_0x211ac8);_0xf6c410[a26_0x2203('0x7a')]();}else{if(!this['failDownloadFiles'][a26_0x2203('0x76')](this[a26_0x2203('0x5c')])){this[a26_0x2203('0x5b')]['push'](this['currentFile']);}console[a26_0x2203('0x49')]('Error:\x20'+_0x211ac8);this[a26_0x2203('0x5c')]++;this['download']();}}[a26_0x2203('0x41')](this));_0xf6c410['on'](a26_0x2203('0x7a'),function(_0xf6c410){console[a26_0x2203('0x49')]('start:\x20'+_0x211ac8);});_0xf6c410['on'](a26_0x2203('0x7b'),function(_0xf6c410){console[a26_0x2203('0x49')](a26_0x2203('0x7c'));this[a26_0x2203('0x5e')]();}[a26_0x2203('0x41')](this));_0xf6c410['on']('end',function(_0xf6c410){console[a26_0x2203('0x49')](a26_0x2203('0x7d'));console[a26_0x2203('0x49')]('Downloaded:\x20'+_0x272673);console[a26_0x2203('0x49')]('mediaType:\x20'+_0x2f4635);this['checkVideo'](this[a26_0x2203('0x1c')]+_0x272673)[a26_0x2203('0x4')](function(_0x49e888){if(_0x49e888){this[a26_0x2203('0x5c')]++;}this[a26_0x2203('0x5e')]();}[a26_0x2203('0x41')](this));}[a26_0x2203('0x41')](this));_0xf6c410['on'](a26_0x2203('0x7e'),function(_0xf6c410){console[a26_0x2203('0x49')](a26_0x2203('0x7e'));});_0xf6c410['on'](a26_0x2203('0x7f'),function(_0xf6c410){console[a26_0x2203('0x49')](a26_0x2203('0x7f'));});_0xf6c410['on'](a26_0x2203('0x80'),function(_0xf6c410){console[a26_0x2203('0x49')]('retry');});}[a26_0x2203('0x81')](_0x2bfb9b,_0x37814c,_0x5b1fce,_0x1b3d3d){console[a26_0x2203('0x49')](a26_0x2203('0x81'));console[a26_0x2203('0x49')](_0x2bfb9b);const _0x3789b2=!![];let _0x3e6920=0x0;const _0x8ab24e='';console['log'](a26_0x2203('0x82')+_0x2bfb9b+a26_0x2203('0x83')+_0x37814c);if(_0x3e6920){if(_0x3e6920>0x5){_0x1b3d3d('Max\x20redirects\x20reached',_0x2bfb9b,_0x5b1fce,null);return;}}else{_0x3e6920=0x0;}const _0x490965=this[a26_0x2203('0x1c')]+_0x37814c;let _0x377c0d;if(_0x1b3d3d===undefined){console['log'](a26_0x2203('0x84')+_0x2bfb9b+a26_0x2203('0x83')+_0x490965);_0x1b3d3d=function(_0x49c232,_0x1a9e86){console[a26_0x2203('0x49')](a26_0x2203('0x85'),_0x49c232,_0x1a9e86);};}http[a26_0x2203('0x86')][a26_0x2203('0x87')]=0x64;const _0x5da9de={'host':url[a26_0x2203('0x32')](_0x2bfb9b)['host'],'port':0x50,'path':url['parse'](_0x2bfb9b)['pathname'],'agent':![]};const _0x4bbba5=http['get'](_0x5da9de,function(_0xa296e7){let _0x3e6e84=0x0;let _0x34ba1d=0x0;function _0x36a0ba(){if(_0x3e6e84===undefined){console['log'](_0x37814c+a26_0x2203('0x88')+_0x34ba1d+'/'+'?');}const _0x5a71dd=_0x34ba1d/_0x3e6e84*0x64;console[a26_0x2203('0x49')](_0x37814c+a26_0x2203('0x89')+_0x5a71dd+'%\x09'+_0x34ba1d+'/'+_0x3e6e84);}console[a26_0x2203('0x49')](_0x37814c+'\x20'+_0xa296e7['statusCode']);switch(_0xa296e7[a26_0x2203('0x8a')]){case 0xc8:_0x3e6e84=_0xa296e7['headers']['content-length']||_0x8ab24e;fs[a26_0x2203('0x8b')](_0x490965,function(_0x3a2029,_0x3b9c94){if(!_0x3a2029){console['log']('Have\x20already\x20downloaded\x20'+_0x490965);if(_0x3b9c94[a26_0x2203('0x8c')]==_0x3e6e84){console[a26_0x2203('0x49')]('And\x20the\x20file\x20size\x20matches\x20('+_0x3e6e84+')');console[a26_0x2203('0x49')](a26_0x2203('0x8d'));}else{console['log']('But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old('+_0x3b9c94[a26_0x2203('0x8c')]+a26_0x2203('0x8e')+_0x3e6e84+')');}}_0x377c0d=fs[a26_0x2203('0x8f')](_0x490965);_0xa296e7[a26_0x2203('0x90')](_0x377c0d);_0xa296e7['on'](a26_0x2203('0x91'),function(_0x5185bc){_0x34ba1d+=_0x5185bc[a26_0x2203('0x5d')];_0x36a0ba();});_0x4bbba5['on']('error',function(_0x3a2029){console[a26_0x2203('0x49')](a26_0x2203('0x92'));console['log'](_0x3a2029);});_0x377c0d['on'](a26_0x2203('0x93'),function(){console['log'](a26_0x2203('0x94')+_0x2bfb9b+a26_0x2203('0x83')+_0x37814c);_0x1b3d3d(null,_0x37814c,_0x5b1fce,_0x37814c);}[a26_0x2203('0x41')](this));});break;case 0x12e:const _0x250de4=_0xa296e7[a26_0x2203('0x95')][a26_0x2203('0x96')];console[a26_0x2203('0x49')]('Redirect\x20'+_0x2bfb9b+a26_0x2203('0x83')+_0x250de4);if(_0x3e6920<0x5){this['downloadHTTPFile'](_0x250de4,_0x37814c,_0x1b3d3d,_0x3e6920++);}else{console['error'](a26_0x2203('0x97')+_0x2bfb9b+'.');_0x1b3d3d(a26_0x2203('0x98'),null,null,null);}return;case 0x194:console[a26_0x2203('0x49')](a26_0x2203('0x99')+_0x2bfb9b);default:console[a26_0x2203('0x49')](a26_0x2203('0x9a')+_0x2bfb9b+a26_0x2203('0x9b')+_0xa296e7[a26_0x2203('0x8a')]);_0x4bbba5['abort']();_0x1b3d3d(_0xa296e7[a26_0x2203('0x8a')],null,null,null);return;}})['on'](a26_0x2203('0x7b'),function(_0x2e009a){console[a26_0x2203('0x49')](a26_0x2203('0x9c')+_0x2bfb9b+'\x20'+_0x2e009a['message']);_0x1b3d3d(_0x2e009a,null,null,null);});}['downloadHTTPFileCallback'](_0xb7ef40,_0x5e1092,_0x243eb4,_0x5c74e9){console['log'](a26_0x2203('0x9d'));console[a26_0x2203('0x49')](_0xb7ef40);console['log'](_0x5e1092);console['log'](_0x243eb4);console[a26_0x2203('0x49')](_0x5c74e9);if(_0x243eb4==a26_0x2203('0x6b')){const _0xbff70a=this[a26_0x2203('0x5a')][this[a26_0x2203('0x5c')]][a26_0x2203('0x9e')]!=null?this[a26_0x2203('0x5a')][this[a26_0x2203('0x5c')]][a26_0x2203('0x9e')]:0x1e;this[a26_0x2203('0x9f')](_0x5c74e9,_0xbff70a);}else if(_0x243eb4==a26_0x2203('0xa0')){if(_0xb7ef40==null&&_0x5e1092!=''){this['currentFile']++;}this['download']();}console['log'](this[a26_0x2203('0x5c')]);}['downloadRequestFile'](_0x5a5d3c,_0x13d247,_0x3b943d){progress(request(_0x5a5d3c),{})['on'](a26_0x2203('0xa1'),function(_0x542378){console[a26_0x2203('0x49')](_0x542378);})['on'](a26_0x2203('0x7b'),function(_0x5e683c){console[a26_0x2203('0x49')](a26_0x2203('0xa2'));this[a26_0x2203('0x5e')]();})['on']('end',function(){console['log'](a26_0x2203('0xa3')+_0x13d247);console['log'](a26_0x2203('0xa4')+_0x3b943d);if(_0x3b943d==a26_0x2203('0x6b')){const _0x512a39=this['downloadFiles'][this[a26_0x2203('0x5c')]][a26_0x2203('0x9e')]!=null?this['downloadFiles'][this[a26_0x2203('0x5c')]][a26_0x2203('0x9e')]:0x1e;this[a26_0x2203('0x9f')](_0x13d247,_0x512a39);}else if(_0x3b943d==a26_0x2203('0xa0')){this[a26_0x2203('0x5c')]++;this[a26_0x2203('0x5e')]();}}[a26_0x2203('0x41')](this))[a26_0x2203('0x90')](fs[a26_0x2203('0x8f')](this[a26_0x2203('0x1c')]+_0x13d247));}[a26_0x2203('0x9f')](_0x344c14,_0x3e32a0=0x1e){const _0x3e4e79=this[a26_0x2203('0x1c')]+_0x344c14;console['log'](_0x3e4e79);console[a26_0x2203('0x49')](_0x344c14);const _0x360a18=_0x344c14[a26_0x2203('0x67')]('.')[a26_0x2203('0x68')](0x0,-0x1)[a26_0x2203('0x69')]('.');const _0x3eda32=a26_0x2203('0xa5');const _0x308835=['-y','-r',a26_0x2203('0xa6'),a26_0x2203('0xa7'),'1',a26_0x2203('0xa8'),a26_0x2203('0xa9'),'-i',_0x3e4e79,'-t',String(_0x3e32a0),a26_0x2203('0xaa'),a26_0x2203('0xab'),a26_0x2203('0xac'),a26_0x2203('0xad'),'-r','25',a26_0x2203('0xae'),a26_0x2203('0xaf'),this[a26_0x2203('0x1c')]+_0x360a18+a26_0x2203('0x6a')];const _0x580c30=spawn(_0x3eda32,_0x308835);_0x580c30[a26_0x2203('0xb0')]['on'](a26_0x2203('0x91'),function(_0x3c6b3b){console[a26_0x2203('0x49')](a26_0x2203('0xb1')+_0x3e4e79);});_0x580c30[a26_0x2203('0xb2')]['on']('data',function(_0x2780b){console[a26_0x2203('0x49')](a26_0x2203('0xb3')+_0x2780b);}[a26_0x2203('0x41')](this));_0x580c30['on'](a26_0x2203('0xb4'),function(){console[a26_0x2203('0x49')](a26_0x2203('0xb5'));this[a26_0x2203('0x5c')]++;this[a26_0x2203('0x5e')]();}[a26_0x2203('0x41')](this));}[a26_0x2203('0xb6')](_0x54bcd7){const _0x2283c0=this['tempFolder']+'/'+_0x54bcd7+a26_0x2203('0x6a');const _0xea88cd='http://www.youtube.com/watch?v='+_0x54bcd7;console['log']('youtubeURL:\x20'+_0xea88cd);console[a26_0x2203('0x49')](a26_0x2203('0xb7')+_0x2283c0);const _0x3277b4=youtubedl(_0xea88cd,[a26_0x2203('0xb8'),a26_0x2203('0xb9')],{'cwd':__dirname});_0x3277b4['on']('info',function(_0x15de6a){console[a26_0x2203('0x49')](a26_0x2203('0xba'));console[a26_0x2203('0x49')](a26_0x2203('0xbb')+_0x15de6a['_filename']);console[a26_0x2203('0x49')]('size:\x20'+_0x15de6a[a26_0x2203('0x8c')]);});_0x3277b4['on'](a26_0x2203('0xbc'),function complete(_0x1552af){'use strict';console[a26_0x2203('0x49')]('filename:\x20'+_0x1552af['_filename']+a26_0x2203('0xbd'));});_0x3277b4['on'](a26_0x2203('0x7d'),function(){console[a26_0x2203('0x49')](a26_0x2203('0xbe'));this['checkVideo'](_0x2283c0)[a26_0x2203('0x4')](function(_0x506c64){if(_0x506c64){this['currentFile']++;}this[a26_0x2203('0x5e')]();}[a26_0x2203('0x41')](this));}['bind'](this));_0x3277b4[a26_0x2203('0x90')](fs[a26_0x2203('0x8f')](_0x2283c0));}['finishProcess'](){console[a26_0x2203('0x49')]('Finishing');if(this[a26_0x2203('0x23')]){if(this[a26_0x2203('0x5b')][a26_0x2203('0x5d')]==0x0){console[a26_0x2203('0x49')](a26_0x2203('0xbf')+this[a26_0x2203('0x1f')]);fs['writeFileSync'](this[a26_0x2203('0x1f')],JSON[a26_0x2203('0x44')](this[a26_0x2203('0x24')]));let _0x325d4f=a26_0x2203('0xc0')+'\x0d\x0a'+a26_0x2203('0xc1')+'\x0d\x0a';for(const _0xbff5be in this[a26_0x2203('0x5a')]){const _0x1bca40=this[a26_0x2203('0x5a')][_0xbff5be][a26_0x2203('0xc2')];const _0x5111da=this[a26_0x2203('0x5a')][_0xbff5be][a26_0x2203('0x65')];const _0x4ece77=_0x1bca40[a26_0x2203('0xc3')](_0x1bca40['lastIndexOf']('/')+0x1);let _0x5b242d=_0x4ece77[a26_0x2203('0x67')]('.')[a26_0x2203('0x68')](0x0,-0x1)['join']('.');if(_0x5111da=='youtube_single'){_0x5b242d=_0x1bca40;}_0x325d4f+=a26_0x2203('0xc4')+_0x5b242d+'.mp4'+'\x0d\x0a';console[a26_0x2203('0x49')](a26_0x2203('0xc5')+_0x325d4f);}console[a26_0x2203('0x49')](a26_0x2203('0xc5')+_0x325d4f);fsExtra[a26_0x2203('0x59')](this[a26_0x2203('0x22')]);console[a26_0x2203('0x49')]('copySync:\x20'+this[a26_0x2203('0x1c')]);fsExtra['copySync'](this[a26_0x2203('0x1c')],this['filesFolder']);console['log'](a26_0x2203('0xc6')+this['m3uFile']);fsExtra[a26_0x2203('0x4c')](this[a26_0x2203('0x21')],_0x325d4f);console[a26_0x2203('0x49')](a26_0x2203('0xc7')+this[a26_0x2203('0x1c')]);fsExtra[a26_0x2203('0x59')](this[a26_0x2203('0x1c')]);console[a26_0x2203('0x49')](a26_0x2203('0xc8'));this[a26_0x2203('0xc9')]();}else{console[a26_0x2203('0x49')](a26_0x2203('0xca'));this['currentFile']=0x0;setTimeout(function(){this['download']();}[a26_0x2203('0x41')](this),0x1388);}}else{console['log'](a26_0x2203('0xcb'));}}[a26_0x2203('0xcc')](){this[a26_0x2203('0xcd')](a26_0x2203('0xce'),{'playlistid':0x1},function(_0x58d068){console[a26_0x2203('0x49')]('Playlist.Cleared');console[a26_0x2203('0x49')](_0x58d068);this['jsonrpcClient'](a26_0x2203('0xcf'),{'item':{'file':a26_0x2203('0xd0')},'playlistid':0x1},function(_0x58d068){console[a26_0x2203('0x49')](a26_0x2203('0xd1'));console[a26_0x2203('0x49')](_0x58d068);this[a26_0x2203('0xcd')](a26_0x2203('0xd2'),{'item':{'playlistid':0x1,'position':0x0}},function(_0x58d068){console['log'](a26_0x2203('0xd3'));console[a26_0x2203('0x49')](_0x58d068);this[a26_0x2203('0xd4')]('RestartApp()');}[a26_0x2203('0x41')](this));}[a26_0x2203('0x41')](this));}['bind'](this));}[a26_0x2203('0xc9')](){console['log']('Rebooting');exec(a26_0x2203('0xd5'),function(_0x1563f0){console[a26_0x2203('0x49')](_0x1563f0);});}[a26_0x2203('0x3f')](){const _0x30a48b=format(this['playerServiceURL'],this[a26_0x2203('0x34')]);console['log'](_0x30a48b);request({'url':_0x30a48b,'json':!![]},function(_0x552535,_0x1ba6e9,_0xebaeb1){if(_0xebaeb1[a26_0x2203('0x5d')]>0x0){const _0x3776e8=_0xebaeb1[0x0];const _0x408f14=_0x3776e8['rss'];const _0x2ff218=_0x3776e8['header_active']==0x1;this[a26_0x2203('0xd6')](_0x408f14);this[a26_0x2203('0xd7')](_0x2ff218);this[a26_0x2203('0x3d')]();}console[a26_0x2203('0x49')](_0xebaeb1);}['bind'](this));}[a26_0x2203('0xd8')](){this[a26_0x2203('0xd4')]('CECStandby()');}['turnOnTV'](){this[a26_0x2203('0xd4')](a26_0x2203('0xd9'));}['setRss'](_0x568b41){const _0x3ae04e=_0x568b41!=null&&_0x568b41!='';const _0x31857c=a26_0x2203('0xda');if(fsExtra[a26_0x2203('0x5f')](_0x31857c)){const _0x48694f=fsExtra['readFileSync'](_0x31857c);console[a26_0x2203('0x49')](a26_0x2203('0xdb')+_0x48694f);const _0x27a5a5=require(a26_0x2203('0xdc'));const _0x5fb0fd=_0x27a5a5[a26_0x2203('0xdd')];_0x5fb0fd(_0x48694f,function(_0x4a315d,_0x3e4bb7){console[a26_0x2203('0x49')](a26_0x2203('0xde'),_0x4a315d);console['log'](a26_0x2203('0xdf'),_0x3e4bb7);if(!_0x568b41||_0x568b41==null||_0x568b41==''){_0x568b41='none';}_0x3e4bb7[a26_0x2203('0xe0')][a26_0x2203('0xe1')][0x0][a26_0x2203('0xe2')][0x0]['_']=_0x568b41;const _0x47a837=new _0x27a5a5[(a26_0x2203('0xe3'))]();const _0x464652=_0x47a837['buildObject'](_0x3e4bb7);console[a26_0x2203('0x49')](a26_0x2203('0xe4'),_0x464652);fsExtra[a26_0x2203('0x4c')](_0x31857c,_0x464652);});this[a26_0x2203('0xd4')](a26_0x2203('0xe5'));this[a26_0x2203('0xcd')](a26_0x2203('0xe6'),{'setting':a26_0x2203('0xe7'),'value':_0x3ae04e},function(_0x1861f4){console[a26_0x2203('0x49')](a26_0x2203('0xe8'));console[a26_0x2203('0x49')](_0x1861f4);}['bind'](this));}}[a26_0x2203('0xd7')](_0x2a9288){this['jsonrpcClient'](a26_0x2203('0xe6'),{'setting':a26_0x2203('0xe9'),'value':_0x2a9288},function(_0x181237){console[a26_0x2203('0x49')](a26_0x2203('0xea'));console[a26_0x2203('0x49')](_0x181237);}[a26_0x2203('0x41')](this));}[a26_0x2203('0xd4')](_0x2e5a41){exec(a26_0x2203('0xeb')+_0x2e5a41+'\x22',function(_0x2ef9ab){console[a26_0x2203('0x49')](_0x2ef9ab);});}['jsonrpcClient'](_0x58189c,_0x55f3b8,_0x571d17){const _0x10098b={'jsonrpc':a26_0x2203('0xec'),'method':_0x58189c,'params':_0x55f3b8,'id':0x1};const _0x51cc52={'user':this[a26_0x2203('0x27')],'pass':this[a26_0x2203('0x29')]};console[a26_0x2203('0x49')]('jsonrpcClient\x20data',_0x10098b);console[a26_0x2203('0x49')](a26_0x2203('0xed'),_0x51cc52);this[a26_0x2203('0x2c')][a26_0x2203('0x47')](this[a26_0x2203('0x25')]+'/jsonrpc',_0x10098b,![],_0x51cc52)[a26_0x2203('0x4')](function(_0x404051){_0x571d17(_0x404051);})[a26_0x2203('0x51')](function(_0x4efa64){});}}exports['SyncPlaylistsService']=SyncPlaylistsService;