var a22_0x5751=['--format=18','info','Download\x20started','filename:\x20','_filename','size:\x20','complete','finished\x20youtube\x20downloading!','Finishing','#EXTCPlayListM3U::M3U','/home/osmc/luloclient/media/files/','Rebooting..','shutdown','now','Playlist\x20incomplete,\x20retry.','No\x20playlist\x20changes.','SyncPlaylistsService','next','throw','done','value','then','apply','defineProperty','__esModule','../infrastructure/HttpClientService','node-mediainfo','url','http','fs-extra','request-progress','child_process','spawn','is-image','string-template','youtube-dl','config.json','context.json','node-kodi','mt-files-downloader','mediaFolder','media/','tempFolder','temp/','filesFolder','files/','playlist.txt','m3uFile','lulo_playlist.m3u','currentFile','playlistChanged','downloadFiles','failDownloadFiles','newPlayList','HttpClientService','init','config','readFileSync','playerId','env','WEB_SERVICE_URL','deploy/','playListServiceURL','baseURL','api/player_playlist.php?player_id={0}','kodi','http://localhost','.lulo123.','checkDependencies','getStatus','bind','registerClient','getItems','deviceUuid','context','httpClientService','post','http://restapi.lulo.run/player_devices/register','log','writeFileSync','getCurrentlyPlayingVideo','label','reportStatus','catch','playingItem:\x20','http://restapi.lulo.run/player_devices/report_status','reportStatusResponse:\x20','checkFolders','ensureDir','emptyDirSync','push','Total:\x20','length','download','reloadMediaList','existsSync','playListFile','removeSync','loadMediaList','System','Shutdown','hasPlayListChanged','stringify','toString','this.currentFile:\x20','\x20of\x20','finishProcess','path','media_type','substring','lastIndexOf','join','slice','youtube_single','.mp4','image','**********+','checkVideo','copySync','Downloading:\x20','downloader','videoFile:\x20','media','track','mediainfo\x20check:','includes','indexOf','downloading:\x20','start','start:\x20','error','error:\x20','end','mediaType:\x20','destroyed','retry','downloadHTTPFile','Attempting\x20to\x20download\x20','\x20to\x20','Max\x20redirects\x20reached','WARNING\x20downloadFile\x20callback\x20is\x20undefined\x20for\x20','downloadFile\x20callback\x20result\x20undefined:\x20','maxSockets','parse','pathname','\x20Progress:\x20','statusCode','headers','content-length','stat','Have\x20already\x20downloaded\x20','size','And\x20the\x20file\x20size\x20matches\x20(','Redownloading','But\x20the\x20file\x20size\x20does\x20not\x20match\x20so\x20re-downloading\x20Old(','createWriteStream','data','err:\x20','finish','Downloaded\x20','Redirect\x20limit\x20encountered\x20for\x20','302','File\x20Not\x20Found\x20','Problem\x20downloading\x20','\x20STATUS:\x20','Error\x20Downloading:\x20','message','downloadHTTPFileCallback','duration','createImageVideo','progress','Error\x20downloading\x20file','Downloaded:\x20','pipe','split','ffmpeg','1/2','-loop','-pattern_type','glob','-c:v','libx264','yuv420p','-vf','stdout','Converting\x20','stderr','stderr:\x20','finished\x20mp4\x20convert','downloadYouTube','http://www.youtube.com/watch?v='];(function(_0x1186d3,_0x1be8f4){var _0x21820a=function(_0xd266cc){while(--_0xd266cc){_0x1186d3['push'](_0x1186d3['shift']());}};_0x21820a(++_0x1be8f4);}(a22_0x5751,0x18f));var a22_0x2623=function(_0xc66157,_0x347189){_0xc66157=_0xc66157-0x0;var _0x58fd4a=a22_0x5751[_0xc66157];return _0x58fd4a;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x42b7ba,_0x515efa,_0x5632f5,_0x4ef24a){function _0x1118b1(_0x159cb4){return _0x159cb4 instanceof _0x5632f5?_0x159cb4:new _0x5632f5(function(_0x36b9d8){_0x36b9d8(_0x159cb4);});}return new(_0x5632f5||(_0x5632f5=Promise))(function(_0x540d5b,_0x1b73fa){function _0x4c6b9d(_0x166cfb){try{_0x1bd50a(_0x4ef24a[a22_0x2623('0x0')](_0x166cfb));}catch(_0x4e03fb){_0x1b73fa(_0x4e03fb);}}function _0x50a889(_0x2c1373){try{_0x1bd50a(_0x4ef24a[a22_0x2623('0x1')](_0x2c1373));}catch(_0x5275cc){_0x1b73fa(_0x5275cc);}}function _0x1bd50a(_0x224aba){_0x224aba[a22_0x2623('0x2')]?_0x540d5b(_0x224aba[a22_0x2623('0x3')]):_0x1118b1(_0x224aba[a22_0x2623('0x3')])[a22_0x2623('0x4')](_0x4c6b9d,_0x50a889);}_0x1bd50a((_0x4ef24a=_0x4ef24a[a22_0x2623('0x5')](_0x42b7ba,_0x515efa||[]))[a22_0x2623('0x0')]());});};Object[a22_0x2623('0x6')](exports,a22_0x2623('0x7'),{'value':!![]});const HttpClientService_1=require(a22_0x2623('0x8'));const mediainfo=require(a22_0x2623('0x9'));const fs=require('fs');const url=require(a22_0x2623('0xa'));const http=require(a22_0x2623('0xb'));const fsExtra=require(a22_0x2623('0xc'));const request=require('request');const progress=require(a22_0x2623('0xd'));const spawn=require(a22_0x2623('0xe'))[a22_0x2623('0xf')];const isImage=require(a22_0x2623('0x10'));const format=require(a22_0x2623('0x11'));const os=require('os');const youtubedl=require(a22_0x2623('0x12'));const uuidv4=require('uuid/v4');const configFile=a22_0x2623('0x13');const contextFile=a22_0x2623('0x14');const urlExists=require('url-exists');const kodi_rpc=require(a22_0x2623('0x15'));const Downloader=require(a22_0x2623('0x16'));class SyncPlaylistsService{constructor(){this[a22_0x2623('0x17')]=a22_0x2623('0x18');this[a22_0x2623('0x19')]=this['mediaFolder']+a22_0x2623('0x1a');this[a22_0x2623('0x1b')]=this['mediaFolder']+a22_0x2623('0x1c');this['playListFile']=this[a22_0x2623('0x17')]+a22_0x2623('0x1d');this[a22_0x2623('0x1e')]=this[a22_0x2623('0x1b')]+a22_0x2623('0x1f');this[a22_0x2623('0x20')]=0x0;this[a22_0x2623('0x21')]=![];this[a22_0x2623('0x22')]=[];this[a22_0x2623('0x23')]=[];this[a22_0x2623('0x24')]={};this['httpClientService']=new HttpClientService_1[(a22_0x2623('0x25'))]();}[a22_0x2623('0x26')](){this[a22_0x2623('0x27')]=JSON['parse'](fs[a22_0x2623('0x28')](configFile));this['context']=JSON['parse'](fs[a22_0x2623('0x28')](contextFile));this['playerId']=this[a22_0x2623('0x27')][a22_0x2623('0x29')];this['baseURL']=process[a22_0x2623('0x2a')][a22_0x2623('0x2b')]+a22_0x2623('0x2c');this[a22_0x2623('0x2d')]=this[a22_0x2623('0x2e')]+a22_0x2623('0x2f');this[a22_0x2623('0x30')]=new kodi_rpc({'url':a22_0x2623('0x31'),'user':'lulo','password':a22_0x2623('0x32')});this[a22_0x2623('0x33')]();this['registerClient']();this['checkFolders']();this['loadMediaList']();setInterval(function(){this[a22_0x2623('0x34')]();}[a22_0x2623('0x35')](this),0x2710);setInterval(function(){this[a22_0x2623('0x36')]();}[a22_0x2623('0x35')](this),0x493e0);}[a22_0x2623('0x33')](){}[a22_0x2623('0x36')](){this['kodi']['playlist'][a22_0x2623('0x37')](0x1)[a22_0x2623('0x4')](function(_0x160556){const _0x52daa2=JSON['stringify'](_0x160556);const _0x287f74={'player_id':this[a22_0x2623('0x29')],'device_uuid':this[a22_0x2623('0x27')][a22_0x2623('0x38')],'network_info':JSON['stringify'](os['networkInterfaces']()),'firmware_info':JSON['stringify'](this[a22_0x2623('0x39')]),'playlist':_0x52daa2,'playing_item':'','status':0x0};this[a22_0x2623('0x3a')][a22_0x2623('0x3b')](a22_0x2623('0x3c'),_0x287f74,![])[a22_0x2623('0x4')](function(_0x221adb){console[a22_0x2623('0x3d')]('register\x20response:\x20'+Date());})['catch'](function(_0x324505){});console['log'](_0x287f74);}[a22_0x2623('0x35')](this));const _0x3f8e54=this[a22_0x2623('0x27')][a22_0x2623('0x38')];if(!_0x3f8e54||_0x3f8e54==''){this[a22_0x2623('0x27')][a22_0x2623('0x38')]=uuidv4();this['config']={'deviceUuid':this[a22_0x2623('0x27')][a22_0x2623('0x38')],'playerId':this[a22_0x2623('0x27')][a22_0x2623('0x29')]};fs[a22_0x2623('0x3e')](configFile,JSON['stringify'](this['config']));}}[a22_0x2623('0x34')](){console[a22_0x2623('0x3d')]('getStatus');this['kodi']['player'][a22_0x2623('0x3f')]()[a22_0x2623('0x4')](function(_0x2569af){const _0x4bf3ac=_0x2569af['item'][a22_0x2623('0x40')];this[a22_0x2623('0x41')](_0x4bf3ac);}[a22_0x2623('0x35')](this))[a22_0x2623('0x42')](function(_0x1d3d43){console[a22_0x2623('0x3d')](_0x1d3d43);this[a22_0x2623('0x41')](_0x1d3d43);}['bind'](this));}['reportStatus'](_0x361d99){console[a22_0x2623('0x3d')](a22_0x2623('0x43')+_0x361d99);const _0x475b4b={'player_id':this[a22_0x2623('0x29')],'device_uuid':this[a22_0x2623('0x27')]['deviceUuid'],'status':_0x361d99!=''&&_0x361d99!=null?0x1:0x0,'playing_item':_0x361d99};this[a22_0x2623('0x3a')]['post'](a22_0x2623('0x44'),_0x475b4b,![])[a22_0x2623('0x4')](function(_0x265ad0){console[a22_0x2623('0x3d')](a22_0x2623('0x45')+Date());})[a22_0x2623('0x42')](function(_0x219587){});}[a22_0x2623('0x46')](){fsExtra[a22_0x2623('0x47')](this[a22_0x2623('0x17')],_0x354c4b=>{});fsExtra['ensureDir'](this[a22_0x2623('0x19')],_0x31aea7=>{});fsExtra[a22_0x2623('0x47')](this['filesFolder'],_0x1d17ea=>{});}['loadMediaList'](){const _0x859b10=format(this['playListServiceURL'],this[a22_0x2623('0x29')]);console['log'](_0x859b10);request({'url':_0x859b10,'json':!![]},function(_0x3433b4,_0x35ce01,_0x101bee){console[a22_0x2623('0x3d')]('loadMediaList:\x20');console[a22_0x2623('0x3d')](_0x101bee);this[a22_0x2623('0x24')]=_0x101bee;this[a22_0x2623('0x21')]=this['hasPlayListChanged']();fsExtra[a22_0x2623('0x48')](this[a22_0x2623('0x19')]);this[a22_0x2623('0x22')]=[];this[a22_0x2623('0x23')]=[];this[a22_0x2623('0x20')]=0x0;for(const _0x212502 in _0x101bee){this['downloadFiles'][a22_0x2623('0x49')](_0x101bee[_0x212502]);}console[a22_0x2623('0x3d')](a22_0x2623('0x4a')+this['downloadFiles'][a22_0x2623('0x4b')]);if(this['downloadFiles'][a22_0x2623('0x4b')]>0x0){this[a22_0x2623('0x4c')]();}}['bind'](this));}[a22_0x2623('0x4d')](){if(fsExtra['existsSync'](this['tempFolder'])){fsExtra[a22_0x2623('0x48')](this[a22_0x2623('0x19')]);}if(fsExtra[a22_0x2623('0x4e')](this[a22_0x2623('0x4f')])){fsExtra[a22_0x2623('0x48')](this['playListFile']);}if(!fsExtra[a22_0x2623('0x4e')](this['playListFile'])){fsExtra[a22_0x2623('0x50')](this[a22_0x2623('0x4f')]);}if(!fsExtra[a22_0x2623('0x4e')](this['m3uFile'])){fsExtra[a22_0x2623('0x50')](this[a22_0x2623('0x1e')]);}this[a22_0x2623('0x51')]();}['reboot'](){this[a22_0x2623('0x30')][a22_0x2623('0x52')][a22_0x2623('0x53')]();}[a22_0x2623('0x54')](){const _0x1e12c0=JSON[a22_0x2623('0x55')](this[a22_0x2623('0x24')]);try{if(!fsExtra[a22_0x2623('0x4e')](this[a22_0x2623('0x4f')])){return!![];}else{const _0x4b1de8=fsExtra[a22_0x2623('0x28')](this[a22_0x2623('0x4f')])[a22_0x2623('0x56')]();if(_0x4b1de8!=_0x1e12c0){return!![];}}}catch(_0x5b2d78){console[a22_0x2623('0x3d')](_0x5b2d78);}return![];}[a22_0x2623('0x4c')](){console[a22_0x2623('0x3d')](a22_0x2623('0x57')+this[a22_0x2623('0x20')]+a22_0x2623('0x58')+this['downloadFiles'][a22_0x2623('0x4b')]);if(this[a22_0x2623('0x20')]>=this[a22_0x2623('0x22')][a22_0x2623('0x4b')]){this[a22_0x2623('0x59')]();return;}const _0x144a33=String(this[a22_0x2623('0x22')][this['currentFile']][a22_0x2623('0x5a')]);const _0x114a42=this[a22_0x2623('0x22')][this[a22_0x2623('0x20')]][a22_0x2623('0x5b')];let _0x2208ea=_0x144a33[a22_0x2623('0x5c')](_0x144a33[a22_0x2623('0x5d')]('/')+0x1);const _0xb85841=_0x2208ea['split']('.')['slice'](0x0,-0x1)[a22_0x2623('0x5e')]('.');let _0x5ef56f=this[a22_0x2623('0x2e')]+_0x144a33;const _0x3b84c0=_0x5ef56f['split']('.')[a22_0x2623('0x5f')](0x0,-0x1)['join']('.');if(_0x114a42==a22_0x2623('0x60')){_0x2208ea=_0x2208ea+a22_0x2623('0x61');}else if(_0x114a42==a22_0x2623('0x62')){_0x2208ea=_0xb85841+a22_0x2623('0x61');_0x5ef56f=_0x3b84c0+'.mp4';}console['log'](a22_0x2623('0x63'));console[a22_0x2623('0x3d')](_0x144a33);console[a22_0x2623('0x3d')](_0x114a42);console['log'](_0x2208ea);console['log'](_0x5ef56f);console[a22_0x2623('0x3d')](_0xb85841);console[a22_0x2623('0x3d')](_0x3b84c0);console[a22_0x2623('0x3d')](a22_0x2623('0x63'));if(fsExtra[a22_0x2623('0x4e')](this[a22_0x2623('0x19')]+_0x2208ea)){this[a22_0x2623('0x64')](this[a22_0x2623('0x19')]+_0x2208ea)['then'](function(_0x19a160){if(_0x19a160){this[a22_0x2623('0x20')]++;}else{this[a22_0x2623('0x21')]=!![];}this[a22_0x2623('0x4c')]();}['bind'](this));}else if(fsExtra['existsSync'](this[a22_0x2623('0x1b')]+_0x2208ea)){this[a22_0x2623('0x64')](this[a22_0x2623('0x1b')]+_0x2208ea)[a22_0x2623('0x4')](function(_0x112e2d){if(_0x112e2d){fsExtra[a22_0x2623('0x65')](this['filesFolder']+_0x2208ea,this[a22_0x2623('0x19')]+_0x2208ea);this[a22_0x2623('0x20')]++;}else{this[a22_0x2623('0x21')]=!![];}this[a22_0x2623('0x4c')]();}['bind'](this));}else{console[a22_0x2623('0x3d')](a22_0x2623('0x66')+_0x5ef56f);this[a22_0x2623('0x21')]=!![];if(_0x114a42==a22_0x2623('0x60')){this['downloadYouTube'](_0x144a33);}else{this[a22_0x2623('0x67')](_0x5ef56f,_0x2208ea,_0x114a42);}}}['checkVideo'](_0x54c22d){return __awaiter(this,void 0x0,void 0x0,function*(){console[a22_0x2623('0x3d')](a22_0x2623('0x68')+_0x54c22d);const _0x506065=yield mediainfo(_0x54c22d)[a22_0x2623('0x42')](_0x10a954=>{console[a22_0x2623('0x3d')](_0x10a954);fsExtra['removeSync'](_0x54c22d);return![];});const _0x4c49ef=_0x506065[a22_0x2623('0x69')][a22_0x2623('0x6a')]['length']>0x1&&_0x506065[a22_0x2623('0x69')][a22_0x2623('0x6a')][0x1]['@type']=='Video';if(!_0x4c49ef){fsExtra[a22_0x2623('0x50')](_0x54c22d);}console['log'](a22_0x2623('0x6b')+_0x4c49ef);return _0x4c49ef;});}[a22_0x2623('0x67')](_0x4ffd57,_0x496820,_0x32fea3){const _0x50bf3a=new Downloader();console['log'](_0x4ffd57);console[a22_0x2623('0x3d')](_0x496820);console[a22_0x2623('0x3d')](_0x32fea3);const _0x37a75d=_0x50bf3a['download'](_0x4ffd57,this[a22_0x2623('0x19')]+_0x496820);urlExists(_0x4ffd57,function(_0x4062bc,_0x281184){if(_0x281184){if(this[a22_0x2623('0x23')][a22_0x2623('0x6c')](this[a22_0x2623('0x20')])){const _0x1c85a0=this[a22_0x2623('0x23')][a22_0x2623('0x6d')](this[a22_0x2623('0x20')]);if(_0x1c85a0>-0x1){this[a22_0x2623('0x23')]['splice'](_0x1c85a0,0x1);}}console[a22_0x2623('0x3d')](a22_0x2623('0x6e')+_0x4ffd57);_0x37a75d[a22_0x2623('0x6f')]();}else{if(!this[a22_0x2623('0x23')][a22_0x2623('0x6c')](this[a22_0x2623('0x20')])){this[a22_0x2623('0x23')][a22_0x2623('0x49')](this[a22_0x2623('0x20')]);}console[a22_0x2623('0x3d')]('Error:\x20'+_0x4ffd57);this['currentFile']++;this['download']();}}['bind'](this));_0x37a75d['on'](a22_0x2623('0x6f'),function(_0x37a75d){console[a22_0x2623('0x3d')](a22_0x2623('0x70')+_0x4ffd57);});_0x37a75d['on'](a22_0x2623('0x71'),function(_0x37a75d){console[a22_0x2623('0x3d')](a22_0x2623('0x72'));this['download']();}[a22_0x2623('0x35')](this));_0x37a75d['on'](a22_0x2623('0x73'),function(_0x37a75d){console['log'](a22_0x2623('0x73'));console[a22_0x2623('0x3d')]('Downloaded:\x20'+_0x496820);console[a22_0x2623('0x3d')](a22_0x2623('0x74')+_0x32fea3);this[a22_0x2623('0x64')](this[a22_0x2623('0x19')]+_0x496820)['then'](function(_0x4ed8a3){if(_0x4ed8a3){this[a22_0x2623('0x20')]++;}this[a22_0x2623('0x4c')]();}[a22_0x2623('0x35')](this));}[a22_0x2623('0x35')](this));_0x37a75d['on']('stopped',function(_0x37a75d){console[a22_0x2623('0x3d')]('stopped');});_0x37a75d['on'](a22_0x2623('0x75'),function(_0x37a75d){console[a22_0x2623('0x3d')](a22_0x2623('0x75'));});_0x37a75d['on'](a22_0x2623('0x76'),function(_0x37a75d){console['log'](a22_0x2623('0x76'));});}[a22_0x2623('0x77')](_0x32f1bf,_0x3997e0,_0x569961,_0x1e473){console[a22_0x2623('0x3d')](a22_0x2623('0x77'));console[a22_0x2623('0x3d')](_0x32f1bf);const _0x506617=!![];let _0x2cfeef=0x0;const _0x3a494a='';console['log'](a22_0x2623('0x78')+_0x32f1bf+a22_0x2623('0x79')+_0x3997e0);if(_0x2cfeef){if(_0x2cfeef>0x5){_0x1e473(a22_0x2623('0x7a'),_0x32f1bf,_0x569961,null);return;}}else{_0x2cfeef=0x0;}const _0x5db521=this['tempFolder']+_0x3997e0;let _0x2a4b06;if(_0x1e473===undefined){console[a22_0x2623('0x3d')](a22_0x2623('0x7b')+_0x32f1bf+a22_0x2623('0x79')+_0x5db521);_0x1e473=function(_0x3100e1,_0x40964b){console[a22_0x2623('0x3d')](a22_0x2623('0x7c'),_0x3100e1,_0x40964b);};}http['globalAgent'][a22_0x2623('0x7d')]=0x64;const _0x2276a3={'host':url[a22_0x2623('0x7e')](_0x32f1bf)['host'],'port':0x50,'path':url[a22_0x2623('0x7e')](_0x32f1bf)[a22_0x2623('0x7f')],'agent':![]};const _0x27caa8=http['get'](_0x2276a3,function(_0xaacb3c){let _0x26db95=0x0;let _0x31d409=0x0;function _0xf0b8fa(){if(_0x26db95===undefined){console['log'](_0x3997e0+'\x20Progress:\x20unknown\x09'+_0x31d409+'/'+'?');}const _0x54cd6e=_0x31d409/_0x26db95*0x64;console[a22_0x2623('0x3d')](_0x3997e0+a22_0x2623('0x80')+_0x54cd6e+'%\x09'+_0x31d409+'/'+_0x26db95);}console[a22_0x2623('0x3d')](_0x3997e0+'\x20'+_0xaacb3c[a22_0x2623('0x81')]);switch(_0xaacb3c[a22_0x2623('0x81')]){case 0xc8:_0x26db95=_0xaacb3c[a22_0x2623('0x82')][a22_0x2623('0x83')]||_0x3a494a;fs[a22_0x2623('0x84')](_0x5db521,function(_0x3d889c,_0x5af45e){if(!_0x3d889c){console[a22_0x2623('0x3d')](a22_0x2623('0x85')+_0x5db521);if(_0x5af45e[a22_0x2623('0x86')]==_0x26db95){console[a22_0x2623('0x3d')](a22_0x2623('0x87')+_0x26db95+')');console['log'](a22_0x2623('0x88'));}else{console[a22_0x2623('0x3d')](a22_0x2623('0x89')+_0x5af45e[a22_0x2623('0x86')]+')\x20vs\x20New('+_0x26db95+')');}}_0x2a4b06=fs[a22_0x2623('0x8a')](_0x5db521);_0xaacb3c['pipe'](_0x2a4b06);_0xaacb3c['on'](a22_0x2623('0x8b'),function(_0x13ce71){_0x31d409+=_0x13ce71[a22_0x2623('0x4b')];_0xf0b8fa();});_0x27caa8['on'](a22_0x2623('0x71'),function(_0x3d889c){console[a22_0x2623('0x3d')](a22_0x2623('0x8c'));console[a22_0x2623('0x3d')](_0x3d889c);});_0x2a4b06['on'](a22_0x2623('0x8d'),function(){console[a22_0x2623('0x3d')](a22_0x2623('0x8e')+_0x32f1bf+a22_0x2623('0x79')+_0x3997e0);_0x1e473(null,_0x3997e0,_0x569961,_0x3997e0);}[a22_0x2623('0x35')](this));});break;case 0x12e:const _0x228545=_0xaacb3c[a22_0x2623('0x82')]['location'];console[a22_0x2623('0x3d')]('Redirect\x20'+_0x32f1bf+'\x20to\x20'+_0x228545);if(_0x2cfeef<0x5){this['downloadHTTPFile'](_0x228545,_0x3997e0,_0x1e473,_0x2cfeef++);}else{console[a22_0x2623('0x71')](a22_0x2623('0x8f')+_0x32f1bf+'.');_0x1e473(a22_0x2623('0x90'),null,null,null);}return;case 0x194:console['log'](a22_0x2623('0x91')+_0x32f1bf);default:console[a22_0x2623('0x3d')](a22_0x2623('0x92')+_0x32f1bf+a22_0x2623('0x93')+_0xaacb3c[a22_0x2623('0x81')]);_0x27caa8['abort']();_0x1e473(_0xaacb3c[a22_0x2623('0x81')],null,null,null);return;}})['on']('error',function(_0x34e556){console[a22_0x2623('0x3d')](a22_0x2623('0x94')+_0x32f1bf+'\x20'+_0x34e556[a22_0x2623('0x95')]);_0x1e473(_0x34e556,null,null,null);});}['downloadHTTPFileCallback'](_0x5a7ef9,_0x5017a2,_0x3f122c,_0x426b03){console[a22_0x2623('0x3d')](a22_0x2623('0x96'));console[a22_0x2623('0x3d')](_0x5a7ef9);console[a22_0x2623('0x3d')](_0x5017a2);console[a22_0x2623('0x3d')](_0x3f122c);console[a22_0x2623('0x3d')](_0x426b03);if(_0x3f122c=='image'){const _0x58f1f4=this[a22_0x2623('0x22')][this[a22_0x2623('0x20')]][a22_0x2623('0x97')]!=null?this[a22_0x2623('0x22')][this[a22_0x2623('0x20')]]['duration']:0x1e;this[a22_0x2623('0x98')](_0x426b03,_0x58f1f4);}else if(_0x3f122c=='video'){if(_0x5a7ef9==null&&_0x5017a2!=''){this[a22_0x2623('0x20')]++;}this[a22_0x2623('0x4c')]();}console[a22_0x2623('0x3d')](this[a22_0x2623('0x20')]);}['downloadRequestFile'](_0x9e376a,_0x45150b,_0x57b308){progress(request(_0x9e376a),{})['on'](a22_0x2623('0x99'),function(_0x2fd1c6){console[a22_0x2623('0x3d')](_0x2fd1c6);})['on'](a22_0x2623('0x71'),function(_0x32f804){console[a22_0x2623('0x3d')](a22_0x2623('0x9a'));this['download']();})['on'](a22_0x2623('0x73'),function(){console[a22_0x2623('0x3d')](a22_0x2623('0x9b')+_0x45150b);console['log'](a22_0x2623('0x74')+_0x57b308);if(_0x57b308==a22_0x2623('0x62')){const _0x1480c8=this['downloadFiles'][this['currentFile']][a22_0x2623('0x97')]!=null?this[a22_0x2623('0x22')][this['currentFile']]['duration']:0x1e;this[a22_0x2623('0x98')](_0x45150b,_0x1480c8);}else if(_0x57b308=='video'){this[a22_0x2623('0x20')]++;this[a22_0x2623('0x4c')]();}}[a22_0x2623('0x35')](this))[a22_0x2623('0x9c')](fs[a22_0x2623('0x8a')](this[a22_0x2623('0x19')]+_0x45150b));}[a22_0x2623('0x98')](_0x35568e,_0x1a193e=0x1e){const _0x3216a5=this[a22_0x2623('0x19')]+_0x35568e;console[a22_0x2623('0x3d')](_0x3216a5);console[a22_0x2623('0x3d')](_0x35568e);const _0x2e18ea=_0x35568e[a22_0x2623('0x9d')]('.')[a22_0x2623('0x5f')](0x0,-0x1)[a22_0x2623('0x5e')]('.');const _0x45ea7f=a22_0x2623('0x9e');const _0x1ecad3=['-y','-r',a22_0x2623('0x9f'),a22_0x2623('0xa0'),'1',a22_0x2623('0xa1'),a22_0x2623('0xa2'),'-i',_0x3216a5,'-t',String(_0x1a193e),a22_0x2623('0xa3'),a22_0x2623('0xa4'),'-pix_fmt',a22_0x2623('0xa5'),'-r','25',a22_0x2623('0xa6'),'scale=1920:1080',this[a22_0x2623('0x19')]+_0x2e18ea+a22_0x2623('0x61')];const _0x5dd6e7=spawn(_0x45ea7f,_0x1ecad3);_0x5dd6e7[a22_0x2623('0xa7')]['on']('data',function(_0x16188b){console['log'](a22_0x2623('0xa8')+_0x3216a5);});_0x5dd6e7[a22_0x2623('0xa9')]['on'](a22_0x2623('0x8b'),function(_0x19db66){console[a22_0x2623('0x3d')](a22_0x2623('0xaa')+_0x19db66);}['bind'](this));_0x5dd6e7['on']('close',function(){console['log'](a22_0x2623('0xab'));this[a22_0x2623('0x20')]++;this['download']();}[a22_0x2623('0x35')](this));}[a22_0x2623('0xac')](_0x5d94af){const _0x3713ad=this[a22_0x2623('0x19')]+'/'+_0x5d94af+'.mp4';const _0x5808cb=youtubedl(a22_0x2623('0xad')+_0x5d94af,[a22_0x2623('0xae')],{'cwd':__dirname});_0x5808cb['on'](a22_0x2623('0xaf'),function(_0x1386e2){console[a22_0x2623('0x3d')](a22_0x2623('0xb0'));console[a22_0x2623('0x3d')](a22_0x2623('0xb1')+_0x1386e2[a22_0x2623('0xb2')]);console['log'](a22_0x2623('0xb3')+_0x1386e2[a22_0x2623('0x86')]);});_0x5808cb['on'](a22_0x2623('0xb4'),function complete(_0x1293e8){'use strict';console[a22_0x2623('0x3d')]('filename:\x20'+_0x1293e8[a22_0x2623('0xb2')]+'\x20already\x20downloaded.');});_0x5808cb['on'](a22_0x2623('0x73'),function(){console['log'](a22_0x2623('0xb5'));this[a22_0x2623('0x64')](_0x3713ad)[a22_0x2623('0x4')](function(_0x526b6f){if(_0x526b6f){this[a22_0x2623('0x20')]++;}this['download']();}[a22_0x2623('0x35')](this));}[a22_0x2623('0x35')](this));_0x5808cb[a22_0x2623('0x9c')](fs[a22_0x2623('0x8a')](_0x3713ad));}[a22_0x2623('0x59')](){console['log'](a22_0x2623('0xb6'));if(this[a22_0x2623('0x21')]){if(this[a22_0x2623('0x23')][a22_0x2623('0x4b')]==0x0){fs['writeFileSync'](this[a22_0x2623('0x4f')],JSON[a22_0x2623('0x55')](this[a22_0x2623('0x24')]));let _0x8d7776=a22_0x2623('0xb7')+'\x0d\x0a'+'#EXTINF:0,luloPlayList'+'\x0d\x0a';for(const _0x4275bf in this[a22_0x2623('0x22')]){const _0x3a0939=this['downloadFiles'][_0x4275bf][a22_0x2623('0x5a')];const _0x53886b=this[a22_0x2623('0x22')][_0x4275bf][a22_0x2623('0x5b')];const _0x5df1d6=_0x3a0939[a22_0x2623('0x5c')](_0x3a0939[a22_0x2623('0x5d')]('/')+0x1);let _0x9d9a=_0x5df1d6[a22_0x2623('0x9d')]('.')[a22_0x2623('0x5f')](0x0,-0x1)[a22_0x2623('0x5e')]('.');if(_0x53886b==a22_0x2623('0x60')){_0x9d9a=_0x3a0939;}_0x8d7776+=a22_0x2623('0xb8')+_0x9d9a+a22_0x2623('0x61')+'\x0d\x0a';}fsExtra[a22_0x2623('0x48')](this[a22_0x2623('0x1b')]);fsExtra[a22_0x2623('0x65')](this['tempFolder'],this[a22_0x2623('0x1b')]);fsExtra[a22_0x2623('0x3e')](this[a22_0x2623('0x1e')],_0x8d7776);fsExtra[a22_0x2623('0x48')](this[a22_0x2623('0x19')]);console[a22_0x2623('0x3d')](a22_0x2623('0xb9'));const _0x3371ff=spawn(a22_0x2623('0xba'),['-r',a22_0x2623('0xbb')]);}else{console[a22_0x2623('0x3d')](a22_0x2623('0xbc'));this[a22_0x2623('0x20')]=0x0;setTimeout(function(){this[a22_0x2623('0x4c')]();}[a22_0x2623('0x35')](this),0x1388);}}else{console[a22_0x2623('0x3d')](a22_0x2623('0xbd'));}}}exports[a22_0x2623('0xbe')]=SyncPlaylistsService;