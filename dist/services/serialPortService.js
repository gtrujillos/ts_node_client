var a21_0x4380=['../infrastructure/stationSettings','gpsService','init','log','init\x20SerialPortService','openCOM','serialPort','settings','portCOM','none','parsers','Readline','pipe','open','serialPortOnOpen','bind','close','error','data','serialPortOnData','readable','serialPortOnReadable','parserOnData','init\x20SerialPort','Port\x20opened:\x20','StationContext','serialPortOnClose','serialPortOnError','Serial\x20port\x20error:\x20','gps','update','read','defineProperty','__esModule'];(function(_0x48d2ae,_0x9d8ad4){var _0x152daf=function(_0x5dd2eb){while(--_0x5dd2eb){_0x48d2ae['push'](_0x48d2ae['shift']());}};_0x152daf(++_0x9d8ad4);}(a21_0x4380,0x174));var a21_0x3194=function(_0x501312,_0x4e512c){_0x501312=_0x501312-0x0;var _0x2e41c4=a21_0x4380[_0x501312];return _0x2e41c4;};'use strict';Object[a21_0x3194('0x0')](exports,a21_0x3194('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x3194('0x2'));class SerialPortService{constructor(_0x5b2f8c){this[a21_0x3194('0x3')]=_0x5b2f8c;}[a21_0x3194('0x4')](){console[a21_0x3194('0x5')](a21_0x3194('0x6'));this['openCOM']();}[a21_0x3194('0x7')](){const _0x4d76f5=require('serialport');this[a21_0x3194('0x8')]=new _0x4d76f5(stationSettings_1['StationContext'][a21_0x3194('0x9')][a21_0x3194('0xa')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a21_0x3194('0xb')});const _0x5876d6=_0x4d76f5[a21_0x3194('0xc')][a21_0x3194('0xd')];const _0x195e60=new _0x5876d6('\x0d\x0a');this[a21_0x3194('0x8')][a21_0x3194('0xe')](_0x195e60);this[a21_0x3194('0x8')]['on'](a21_0x3194('0xf'),this[a21_0x3194('0x10')][a21_0x3194('0x11')](this));this[a21_0x3194('0x8')]['on'](a21_0x3194('0x12'),this['serialPortOnClose'][a21_0x3194('0x11')](this));this[a21_0x3194('0x8')]['on'](a21_0x3194('0x13'),this['serialPortOnError'][a21_0x3194('0x11')](this));this[a21_0x3194('0x8')]['on'](a21_0x3194('0x14'),this[a21_0x3194('0x15')][a21_0x3194('0x11')](this));this[a21_0x3194('0x8')]['on'](a21_0x3194('0x16'),this[a21_0x3194('0x17')][a21_0x3194('0x11')](this));_0x195e60['on']('data',this[a21_0x3194('0x18')][a21_0x3194('0x11')](this));console[a21_0x3194('0x5')](a21_0x3194('0x19'));}['serialPortOnOpen'](){console[a21_0x3194('0x5')](a21_0x3194('0x1a')+stationSettings_1[a21_0x3194('0x1b')][a21_0x3194('0x9')][a21_0x3194('0xa')]);}[a21_0x3194('0x1c')](){console[a21_0x3194('0x5')]('port\x20closed.');setTimeout(function(){this['openCOM']()[a21_0x3194('0x11')](this);},0x1388);}[a21_0x3194('0x1d')](_0x49ce53){console['error'](a21_0x3194('0x1e')+_0x49ce53);setTimeout(function(){this[a21_0x3194('0x7')]();}['bind'](this),0x1388);}[a21_0x3194('0x18')](_0x5de3e6){this[a21_0x3194('0x3')][a21_0x3194('0x1f')][a21_0x3194('0x20')](_0x5de3e6);}[a21_0x3194('0x15')](_0x4ff97c){}[a21_0x3194('0x17')](){this[a21_0x3194('0x8')][a21_0x3194('0x21')]();}}exports['SerialPortService']=SerialPortService;