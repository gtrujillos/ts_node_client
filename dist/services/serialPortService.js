var a21_0xb9e2=['init\x20SerialPortService','serialPort','settings','none','parsers','Readline','pipe','bind','close','serialPortOnClose','serialPortOnError','data','serialPortOnData','readable','parserOnData','log','init\x20SerialPort','serialPortOnOpen','Port\x20opened:\x20','StationContext','portCOM','openCOM','Serial\x20port\x20error:\x20','gps','update','serialPortOnReadable','read','SerialPortService','defineProperty','__esModule','gpsService','init'];(function(_0xfc8933,_0x118dfb){var _0x145312=function(_0x25a37a){while(--_0x25a37a){_0xfc8933['push'](_0xfc8933['shift']());}};_0x145312(++_0x118dfb);}(a21_0xb9e2,0x11c));var a21_0x395d=function(_0x55d687,_0x1fe12d){_0x55d687=_0x55d687-0x0;var _0x4c9c20=a21_0xb9e2[_0x55d687];return _0x4c9c20;};'use strict';Object[a21_0x395d('0x0')](exports,a21_0x395d('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class SerialPortService{constructor(_0x332d03){this[a21_0x395d('0x2')]=_0x332d03;}[a21_0x395d('0x3')](){console['log'](a21_0x395d('0x4'));this['openCOM']();}['openCOM'](){const _0x517c9a=require('serialport');this[a21_0x395d('0x5')]=new _0x517c9a(stationSettings_1['StationContext'][a21_0x395d('0x6')]['portCOM'],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a21_0x395d('0x7')});const _0x2021ea=_0x517c9a[a21_0x395d('0x8')][a21_0x395d('0x9')];const _0x526a45=new _0x2021ea('\x0d\x0a');this[a21_0x395d('0x5')][a21_0x395d('0xa')](_0x526a45);this['serialPort']['on']('open',this['serialPortOnOpen'][a21_0x395d('0xb')](this));this['serialPort']['on'](a21_0x395d('0xc'),this[a21_0x395d('0xd')][a21_0x395d('0xb')](this));this[a21_0x395d('0x5')]['on']('error',this[a21_0x395d('0xe')][a21_0x395d('0xb')](this));this[a21_0x395d('0x5')]['on'](a21_0x395d('0xf'),this[a21_0x395d('0x10')][a21_0x395d('0xb')](this));this[a21_0x395d('0x5')]['on'](a21_0x395d('0x11'),this['serialPortOnReadable'][a21_0x395d('0xb')](this));_0x526a45['on'](a21_0x395d('0xf'),this[a21_0x395d('0x12')][a21_0x395d('0xb')](this));console[a21_0x395d('0x13')](a21_0x395d('0x14'));}[a21_0x395d('0x15')](){console['log'](a21_0x395d('0x16')+stationSettings_1[a21_0x395d('0x17')][a21_0x395d('0x6')][a21_0x395d('0x18')]);}[a21_0x395d('0xd')](){console['log']('port\x20closed.');setTimeout(function(){this[a21_0x395d('0x19')]()[a21_0x395d('0xb')](this);},0x1388);}[a21_0x395d('0xe')](_0x286177){console['error'](a21_0x395d('0x1a')+_0x286177);setTimeout(function(){this[a21_0x395d('0x19')]();}['bind'](this),0x1388);}[a21_0x395d('0x12')](_0x535e70){this[a21_0x395d('0x2')][a21_0x395d('0x1b')][a21_0x395d('0x1c')](_0x535e70);}[a21_0x395d('0x10')](_0x1ceddc){}[a21_0x395d('0x1d')](){this[a21_0x395d('0x5')][a21_0x395d('0x1e')]();}}exports[a21_0x395d('0x1f')]=SerialPortService;