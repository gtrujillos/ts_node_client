var a20_0x2a81=['SerialPortService','defineProperty','../infrastructure/stationSettings','gpsService','openCOM','serialport','serialPort','StationContext','settings','parsers','Readline','pipe','open','serialPortOnOpen','bind','close','serialPortOnError','data','serialPortOnData','readable','serialPortOnReadable','log','init\x20SerialPort','Port\x20opened:\x20','portCOM','serialPortOnClose','port\x20closed.','error','gps','update','read'];(function(_0x17ee3d,_0x33c97d){var _0x1c1826=function(_0xfd0f6c){while(--_0xfd0f6c){_0x17ee3d['push'](_0x17ee3d['shift']());}};_0x1c1826(++_0x33c97d);}(a20_0x2a81,0xda));var a20_0x4c35=function(_0x54bad2,_0x492c55){_0x54bad2=_0x54bad2-0x0;var _0x30fdea=a20_0x2a81[_0x54bad2];return _0x30fdea;};'use strict';Object[a20_0x4c35('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a20_0x4c35('0x1'));class SerialPortService{constructor(_0x1fd6ad){this[a20_0x4c35('0x2')]=_0x1fd6ad;}['init'](){this[a20_0x4c35('0x3')]();}[a20_0x4c35('0x3')](){const _0x13851b=require(a20_0x4c35('0x4'));this[a20_0x4c35('0x5')]=new _0x13851b(stationSettings_1[a20_0x4c35('0x6')][a20_0x4c35('0x7')]['portCOM'],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':'none'});const _0xe3afdb=_0x13851b[a20_0x4c35('0x8')][a20_0x4c35('0x9')];const _0x3e1389=new _0xe3afdb('\x0d\x0a');this[a20_0x4c35('0x5')][a20_0x4c35('0xa')](_0x3e1389);this[a20_0x4c35('0x5')]['on'](a20_0x4c35('0xb'),this[a20_0x4c35('0xc')][a20_0x4c35('0xd')](this));this[a20_0x4c35('0x5')]['on'](a20_0x4c35('0xe'),this['serialPortOnClose']['bind'](this));this[a20_0x4c35('0x5')]['on']('error',this[a20_0x4c35('0xf')][a20_0x4c35('0xd')](this));this[a20_0x4c35('0x5')]['on'](a20_0x4c35('0x10'),this[a20_0x4c35('0x11')][a20_0x4c35('0xd')](this));this[a20_0x4c35('0x5')]['on'](a20_0x4c35('0x12'),this[a20_0x4c35('0x13')]['bind'](this));_0x3e1389['on']('data',this['parserOnData'][a20_0x4c35('0xd')](this));console[a20_0x4c35('0x14')](a20_0x4c35('0x15'));}['serialPortOnOpen'](){console['log'](a20_0x4c35('0x16')+stationSettings_1[a20_0x4c35('0x6')][a20_0x4c35('0x7')][a20_0x4c35('0x17')]);}[a20_0x4c35('0x18')](){console['log'](a20_0x4c35('0x19'));setTimeout(function(){this[a20_0x4c35('0x3')]()[a20_0x4c35('0xd')](this);},0x1388);}[a20_0x4c35('0xf')](_0x5a1f71){console[a20_0x4c35('0x1a')]('Serial\x20port\x20error:\x20'+_0x5a1f71);setTimeout(function(){this['openCOM']();}[a20_0x4c35('0xd')](this),0x1388);}['parserOnData'](_0xe30ae4){this[a20_0x4c35('0x2')][a20_0x4c35('0x1b')][a20_0x4c35('0x1c')](_0xe30ae4);}[a20_0x4c35('0x11')](_0x6fac9c){}[a20_0x4c35('0x13')](){this[a20_0x4c35('0x5')][a20_0x4c35('0x1d')]();}}exports[a20_0x4c35('0x1e')]=SerialPortService;