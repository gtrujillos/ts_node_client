var a26_0x43d6=['port\x20closed.','error','Serial\x20port\x20error:\x20','openCOM','serialPortOnData','read','defineProperty','__esModule','../infrastructure/stationSettings','devMode','env','DEV_MODE','true','init','log','init\x20SerialPortService','GPSService','getInstance','gps','update','$GPGGA,224900.000,4832.3762,N,00903.5393,E,1,04,7.8,498.6,M,48.0,M,,0000*5E','serialport','serialPort','StationContext','settings','portCOM','none','parsers','Readline','pipe','open','bind','close','serialPortOnClose','serialPortOnError','data','readable','serialPortOnReadable','parserOnData','init\x20SerialPort'];(function(_0x54501d,_0x22a393){var _0x1d1d94=function(_0x384acd){while(--_0x384acd){_0x54501d['push'](_0x54501d['shift']());}};_0x1d1d94(++_0x22a393);}(a26_0x43d6,0x196));var a26_0x4201=function(_0x5b5580,_0x4026a6){_0x5b5580=_0x5b5580-0x0;var _0xcddb80=a26_0x43d6[_0x5b5580];return _0xcddb80;};'use strict';Object[a26_0x4201('0x0')](exports,a26_0x4201('0x1'),{'value':!![]});const stationSettings_1=require(a26_0x4201('0x2'));const gpsService_1=require('./gpsService');class SerialPortService{constructor(){this[a26_0x4201('0x3')]=process[a26_0x4201('0x4')][a26_0x4201('0x5')]==a26_0x4201('0x6');}[a26_0x4201('0x7')](){console[a26_0x4201('0x8')](a26_0x4201('0x9'));if(this[a26_0x4201('0x3')]){gpsService_1[a26_0x4201('0xa')][a26_0x4201('0xb')]()[a26_0x4201('0xc')][a26_0x4201('0xd')](a26_0x4201('0xe'));}else{this['openCOM']();}}['openCOM'](){const _0x5c4a66=require(a26_0x4201('0xf'));this[a26_0x4201('0x10')]=new _0x5c4a66(stationSettings_1[a26_0x4201('0x11')][a26_0x4201('0x12')][a26_0x4201('0x13')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a26_0x4201('0x14')});const _0x50f602=_0x5c4a66[a26_0x4201('0x15')][a26_0x4201('0x16')];const _0x42920a=new _0x50f602('\x0d\x0a');this[a26_0x4201('0x10')][a26_0x4201('0x17')](_0x42920a);this[a26_0x4201('0x10')]['on'](a26_0x4201('0x18'),this['serialPortOnOpen'][a26_0x4201('0x19')](this));this[a26_0x4201('0x10')]['on'](a26_0x4201('0x1a'),this[a26_0x4201('0x1b')][a26_0x4201('0x19')](this));this[a26_0x4201('0x10')]['on']('error',this[a26_0x4201('0x1c')]['bind'](this));this[a26_0x4201('0x10')]['on'](a26_0x4201('0x1d'),this['serialPortOnData']['bind'](this));this[a26_0x4201('0x10')]['on'](a26_0x4201('0x1e'),this[a26_0x4201('0x1f')]['bind'](this));_0x42920a['on']('data',this[a26_0x4201('0x20')][a26_0x4201('0x19')](this));console[a26_0x4201('0x8')](a26_0x4201('0x21'));}['serialPortOnOpen'](){console['log']('Port\x20opened:\x20'+stationSettings_1[a26_0x4201('0x11')][a26_0x4201('0x12')][a26_0x4201('0x13')]);}[a26_0x4201('0x1b')](){console[a26_0x4201('0x8')](a26_0x4201('0x22'));setTimeout(function(){this['openCOM']()[a26_0x4201('0x19')](this);},0x1388);}[a26_0x4201('0x1c')](_0x363210){console[a26_0x4201('0x23')](a26_0x4201('0x24')+_0x363210);setTimeout(function(){this[a26_0x4201('0x25')]();}['bind'](this),0x1388);}['parserOnData'](_0x2d5074){try{gpsService_1[a26_0x4201('0xa')][a26_0x4201('0xb')]()['gps'][a26_0x4201('0xd')](_0x2d5074);}catch(_0x4d6046){console['error'](a26_0x4201('0x20'),_0x4d6046);}}[a26_0x4201('0x26')](_0x5ebf50){}[a26_0x4201('0x1f')](){this['serialPort'][a26_0x4201('0x27')]();}}exports['SerialPortService']=SerialPortService;