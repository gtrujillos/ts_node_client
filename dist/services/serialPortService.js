var a20_0x2cd6=['data','serialPortOnData','readable','parserOnData','log','port\x20closed.','gps','update','SerialPortService','defineProperty','__esModule','../infrastructure/stationSettings','init','openCOM','serialport','serialPort','StationContext','settings','portCOM','none','Readline','pipe','open','serialPortOnOpen','bind','close','serialPortOnClose','error','serialPortOnError'];(function(_0x1374c2,_0xac983b){var _0x54f16c=function(_0x31f4b9){while(--_0x31f4b9){_0x1374c2['push'](_0x1374c2['shift']());}};_0x54f16c(++_0xac983b);}(a20_0x2cd6,0xb7));var a20_0x2fe1=function(_0x11d29e,_0xa78055){_0x11d29e=_0x11d29e-0x0;var _0x4be579=a20_0x2cd6[_0x11d29e];return _0x4be579;};'use strict';Object[a20_0x2fe1('0x0')](exports,a20_0x2fe1('0x1'),{'value':!![]});const stationSettings_1=require(a20_0x2fe1('0x2'));class SerialPortService{constructor(_0x284d08){this['gpsService']=_0x284d08;}[a20_0x2fe1('0x3')](){this[a20_0x2fe1('0x4')]();}['openCOM'](){const _0x4473d7=require(a20_0x2fe1('0x5'));this[a20_0x2fe1('0x6')]=new _0x4473d7(stationSettings_1[a20_0x2fe1('0x7')][a20_0x2fe1('0x8')][a20_0x2fe1('0x9')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a20_0x2fe1('0xa')});const _0x128a83=_0x4473d7['parsers'][a20_0x2fe1('0xb')];const _0x22d896=new _0x128a83('\x0d\x0a');this[a20_0x2fe1('0x6')][a20_0x2fe1('0xc')](_0x22d896);this['serialPort']['on'](a20_0x2fe1('0xd'),this[a20_0x2fe1('0xe')][a20_0x2fe1('0xf')](this));this[a20_0x2fe1('0x6')]['on'](a20_0x2fe1('0x10'),this[a20_0x2fe1('0x11')]['bind'](this));this[a20_0x2fe1('0x6')]['on'](a20_0x2fe1('0x12'),this[a20_0x2fe1('0x13')]['bind'](this));this['serialPort']['on'](a20_0x2fe1('0x14'),this[a20_0x2fe1('0x15')][a20_0x2fe1('0xf')](this));this['serialPort']['on'](a20_0x2fe1('0x16'),this['serialPortOnReadable'][a20_0x2fe1('0xf')](this));_0x22d896['on'](a20_0x2fe1('0x14'),this[a20_0x2fe1('0x17')][a20_0x2fe1('0xf')](this));console[a20_0x2fe1('0x18')]('init\x20SerialPort');}[a20_0x2fe1('0xe')](){console[a20_0x2fe1('0x18')]('Port\x20opened:\x20'+stationSettings_1[a20_0x2fe1('0x7')][a20_0x2fe1('0x8')][a20_0x2fe1('0x9')]);}['serialPortOnClose'](){console['log'](a20_0x2fe1('0x19'));setTimeout(function(){this['openCOM']()[a20_0x2fe1('0xf')](this);},0x1388);}[a20_0x2fe1('0x13')](_0x96c223){console[a20_0x2fe1('0x12')]('Serial\x20port\x20error:\x20'+_0x96c223);setTimeout(function(){this['openCOM']();}[a20_0x2fe1('0xf')](this),0x1388);}[a20_0x2fe1('0x17')](_0x272be4){this['gpsService'][a20_0x2fe1('0x1a')][a20_0x2fe1('0x1b')](_0x272be4);}[a20_0x2fe1('0x15')](_0x1c22e5){}['serialPortOnReadable'](){this[a20_0x2fe1('0x6')]['read']();}}exports[a20_0x2fe1('0x1c')]=SerialPortService;