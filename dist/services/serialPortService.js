var a20_0x34d7=['portCOM','none','parsers','Readline','pipe','open','serialPortOnOpen','bind','serialPortOnClose','serialPortOnError','data','serialPortOnData','parserOnData','log','init\x20SerialPort','Port\x20opened:\x20','error','gpsService','update','SerialPortService','defineProperty','../infrastructure/stationSettings','init','openCOM','serialPort','StationContext','settings'];(function(_0x111e35,_0x2ae864){var _0x459d70=function(_0xb94d22){while(--_0xb94d22){_0x111e35['push'](_0x111e35['shift']());}};_0x459d70(++_0x2ae864);}(a20_0x34d7,0x1df));var a20_0x637e=function(_0xb67384,_0x27295a){_0xb67384=_0xb67384-0x0;var _0x156d7c=a20_0x34d7[_0xb67384];return _0x156d7c;};'use strict';Object[a20_0x637e('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a20_0x637e('0x1'));class SerialPortService{constructor(_0x1d8db8){this['gpsService']=_0x1d8db8;}[a20_0x637e('0x2')](){this[a20_0x637e('0x3')]();}['openCOM'](){const _0xe77c59=require('serialport');this[a20_0x637e('0x4')]=new _0xe77c59(stationSettings_1[a20_0x637e('0x5')][a20_0x637e('0x6')][a20_0x637e('0x7')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a20_0x637e('0x8')});const _0x214a46=_0xe77c59[a20_0x637e('0x9')][a20_0x637e('0xa')];const _0xceb814=new _0x214a46('\x0d\x0a');this[a20_0x637e('0x4')][a20_0x637e('0xb')](_0xceb814);this[a20_0x637e('0x4')]['on'](a20_0x637e('0xc'),this[a20_0x637e('0xd')][a20_0x637e('0xe')](this));this['serialPort']['on']('close',this[a20_0x637e('0xf')]['bind'](this));this['serialPort']['on']('error',this[a20_0x637e('0x10')][a20_0x637e('0xe')](this));this[a20_0x637e('0x4')]['on'](a20_0x637e('0x11'),this[a20_0x637e('0x12')][a20_0x637e('0xe')](this));this[a20_0x637e('0x4')]['on']('readable',this['serialPortOnReadable'][a20_0x637e('0xe')](this));_0xceb814['on']('data',this[a20_0x637e('0x13')][a20_0x637e('0xe')](this));console[a20_0x637e('0x14')](a20_0x637e('0x15'));}[a20_0x637e('0xd')](){console['log'](a20_0x637e('0x16')+stationSettings_1['StationContext'][a20_0x637e('0x6')]['portCOM']);}[a20_0x637e('0xf')](){console[a20_0x637e('0x14')]('port\x20closed.');setTimeout(function(){this[a20_0x637e('0x3')]()[a20_0x637e('0xe')](this);},0x1388);}[a20_0x637e('0x10')](_0x34e5d1){console[a20_0x637e('0x17')]('Serial\x20port\x20error:\x20'+_0x34e5d1);setTimeout(function(){this[a20_0x637e('0x3')]();}[a20_0x637e('0xe')](this),0x1388);}[a20_0x637e('0x13')](_0x44ff3e){this[a20_0x637e('0x18')]['gps'][a20_0x637e('0x19')](_0x44ff3e);}[a20_0x637e('0x12')](_0x155d87){}['serialPortOnReadable'](){this[a20_0x637e('0x4')]['read']();}}exports[a20_0x637e('0x1a')]=SerialPortService;