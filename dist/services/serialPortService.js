var a20_0xcaa7=['settings','gpsService','gps','update','read','SerialPortService','../infrastructure/stationSettings','init','log','init\x20SerialPortService','openCOM','serialPort','StationContext','portCOM','none','parsers','Readline','pipe','open','close','serialPortOnClose','error','serialPortOnError','data','serialPortOnData','bind','readable','serialPortOnReadable','parserOnData','init\x20SerialPort'];(function(_0x4e1b33,_0x39ac25){var _0x19d0a2=function(_0x4e9a90){while(--_0x4e9a90){_0x4e1b33['push'](_0x4e1b33['shift']());}};_0x19d0a2(++_0x39ac25);}(a20_0xcaa7,0xf6));var a20_0x4770=function(_0x2a2408,_0xc21c1f){_0x2a2408=_0x2a2408-0x0;var _0x2bbede=a20_0xcaa7[_0x2a2408];return _0x2bbede;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a20_0x4770('0x0'));class SerialPortService{constructor(_0x26edf0){this['gpsService']=_0x26edf0;}[a20_0x4770('0x1')](){console[a20_0x4770('0x2')](a20_0x4770('0x3'));this[a20_0x4770('0x4')]();}['openCOM'](){const _0x39897e=require('serialport');this[a20_0x4770('0x5')]=new _0x39897e(stationSettings_1[a20_0x4770('0x6')]['settings'][a20_0x4770('0x7')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a20_0x4770('0x8')});const _0x3fc227=_0x39897e[a20_0x4770('0x9')][a20_0x4770('0xa')];const _0x595d8b=new _0x3fc227('\x0d\x0a');this[a20_0x4770('0x5')][a20_0x4770('0xb')](_0x595d8b);this[a20_0x4770('0x5')]['on'](a20_0x4770('0xc'),this['serialPortOnOpen']['bind'](this));this[a20_0x4770('0x5')]['on'](a20_0x4770('0xd'),this[a20_0x4770('0xe')]['bind'](this));this[a20_0x4770('0x5')]['on'](a20_0x4770('0xf'),this[a20_0x4770('0x10')]['bind'](this));this['serialPort']['on'](a20_0x4770('0x11'),this[a20_0x4770('0x12')][a20_0x4770('0x13')](this));this[a20_0x4770('0x5')]['on'](a20_0x4770('0x14'),this[a20_0x4770('0x15')][a20_0x4770('0x13')](this));_0x595d8b['on'](a20_0x4770('0x11'),this[a20_0x4770('0x16')]['bind'](this));console[a20_0x4770('0x2')](a20_0x4770('0x17'));}['serialPortOnOpen'](){console[a20_0x4770('0x2')]('Port\x20opened:\x20'+stationSettings_1[a20_0x4770('0x6')][a20_0x4770('0x18')][a20_0x4770('0x7')]);}[a20_0x4770('0xe')](){console[a20_0x4770('0x2')]('port\x20closed.');setTimeout(function(){this['openCOM']()[a20_0x4770('0x13')](this);},0x1388);}[a20_0x4770('0x10')](_0x31f252){console[a20_0x4770('0xf')]('Serial\x20port\x20error:\x20'+_0x31f252);setTimeout(function(){this['openCOM']();}[a20_0x4770('0x13')](this),0x1388);}[a20_0x4770('0x16')](_0x32e9e5){this[a20_0x4770('0x19')][a20_0x4770('0x1a')][a20_0x4770('0x1b')](_0x32e9e5);}[a20_0x4770('0x12')](_0x21f4f4){}[a20_0x4770('0x15')](){this[a20_0x4770('0x5')][a20_0x4770('0x1c')]();}}exports[a20_0x4770('0x1d')]=SerialPortService;