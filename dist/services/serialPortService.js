var a20_0xb9e2=['init\x20SerialPortService','serialPort','settings','none','parsers','Readline','pipe','bind','close','serialPortOnClose','serialPortOnError','data','serialPortOnData','readable','parserOnData','log','init\x20SerialPort','serialPortOnOpen','Port\x20opened:\x20','StationContext','portCOM','openCOM','Serial\x20port\x20error:\x20','gps','update','serialPortOnReadable','read','SerialPortService','defineProperty','__esModule','gpsService','init'];(function(_0x2699a9,_0x501e82){var _0x5b6c40=function(_0xa3de42){while(--_0xa3de42){_0x2699a9['push'](_0x2699a9['shift']());}};_0x5b6c40(++_0x501e82);}(a20_0xb9e2,0x11c));var a20_0x395d=function(_0x5638f9,_0xfb42e){_0x5638f9=_0x5638f9-0x0;var _0x21b081=a20_0xb9e2[_0x5638f9];return _0x21b081;};'use strict';Object[a20_0x395d('0x0')](exports,a20_0x395d('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class SerialPortService{constructor(_0x332d03){this[a20_0x395d('0x2')]=_0x332d03;}[a20_0x395d('0x3')](){console['log'](a20_0x395d('0x4'));this['openCOM']();}['openCOM'](){const _0x517c9a=require('serialport');this[a20_0x395d('0x5')]=new _0x517c9a(stationSettings_1['StationContext'][a20_0x395d('0x6')]['portCOM'],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a20_0x395d('0x7')});const _0x2021ea=_0x517c9a[a20_0x395d('0x8')][a20_0x395d('0x9')];const _0x526a45=new _0x2021ea('\x0d\x0a');this[a20_0x395d('0x5')][a20_0x395d('0xa')](_0x526a45);this['serialPort']['on']('open',this['serialPortOnOpen'][a20_0x395d('0xb')](this));this['serialPort']['on'](a20_0x395d('0xc'),this[a20_0x395d('0xd')][a20_0x395d('0xb')](this));this[a20_0x395d('0x5')]['on']('error',this[a20_0x395d('0xe')][a20_0x395d('0xb')](this));this[a20_0x395d('0x5')]['on'](a20_0x395d('0xf'),this[a20_0x395d('0x10')][a20_0x395d('0xb')](this));this[a20_0x395d('0x5')]['on'](a20_0x395d('0x11'),this['serialPortOnReadable'][a20_0x395d('0xb')](this));_0x526a45['on'](a20_0x395d('0xf'),this[a20_0x395d('0x12')][a20_0x395d('0xb')](this));console[a20_0x395d('0x13')](a20_0x395d('0x14'));}[a20_0x395d('0x15')](){console['log'](a20_0x395d('0x16')+stationSettings_1[a20_0x395d('0x17')][a20_0x395d('0x6')][a20_0x395d('0x18')]);}[a20_0x395d('0xd')](){console['log']('port\x20closed.');setTimeout(function(){this[a20_0x395d('0x19')]()[a20_0x395d('0xb')](this);},0x1388);}[a20_0x395d('0xe')](_0x286177){console['error'](a20_0x395d('0x1a')+_0x286177);setTimeout(function(){this[a20_0x395d('0x19')]();}['bind'](this),0x1388);}[a20_0x395d('0x12')](_0x535e70){this[a20_0x395d('0x2')][a20_0x395d('0x1b')][a20_0x395d('0x1c')](_0x535e70);}[a20_0x395d('0x10')](_0x1ceddc){}[a20_0x395d('0x1d')](){this[a20_0x395d('0x5')][a20_0x395d('0x1e')]();}}exports[a20_0x395d('0x1f')]=SerialPortService;