var a21_0xa1b8=['StationContext','settings','portCOM','none','parsers','Readline','serialPort','pipe','serialPortOnOpen','bind','close','serialPortOnClose','error','data','serialPortOnReadable','parserOnData','init\x20SerialPort','Port\x20opened:\x20','port\x20closed.','Serial\x20port\x20error:\x20','gps','update','read','SerialPortService','defineProperty','__esModule','../infrastructure/stationSettings','init','log','init\x20SerialPortService','openCOM','serialport'];(function(_0x57a399,_0x48c1f2){var _0x18be48=function(_0xd93a4a){while(--_0xd93a4a){_0x57a399['push'](_0x57a399['shift']());}};_0x18be48(++_0x48c1f2);}(a21_0xa1b8,0x138));var a21_0x29e5=function(_0x84377b,_0x3ff114){_0x84377b=_0x84377b-0x0;var _0x49862b=a21_0xa1b8[_0x84377b];return _0x49862b;};'use strict';Object[a21_0x29e5('0x0')](exports,a21_0x29e5('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x29e5('0x2'));class SerialPortService{constructor(_0x3fc36c){this['gpsService']=_0x3fc36c;}[a21_0x29e5('0x3')](){console[a21_0x29e5('0x4')](a21_0x29e5('0x5'));this['openCOM']();}[a21_0x29e5('0x6')](){const _0x3a4bca=require(a21_0x29e5('0x7'));this['serialPort']=new _0x3a4bca(stationSettings_1[a21_0x29e5('0x8')][a21_0x29e5('0x9')][a21_0x29e5('0xa')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a21_0x29e5('0xb')});const _0x39b786=_0x3a4bca[a21_0x29e5('0xc')][a21_0x29e5('0xd')];const _0x4245ca=new _0x39b786('\x0d\x0a');this[a21_0x29e5('0xe')][a21_0x29e5('0xf')](_0x4245ca);this['serialPort']['on']('open',this[a21_0x29e5('0x10')][a21_0x29e5('0x11')](this));this['serialPort']['on'](a21_0x29e5('0x12'),this[a21_0x29e5('0x13')][a21_0x29e5('0x11')](this));this[a21_0x29e5('0xe')]['on'](a21_0x29e5('0x14'),this['serialPortOnError'][a21_0x29e5('0x11')](this));this[a21_0x29e5('0xe')]['on'](a21_0x29e5('0x15'),this['serialPortOnData'][a21_0x29e5('0x11')](this));this['serialPort']['on']('readable',this[a21_0x29e5('0x16')]['bind'](this));_0x4245ca['on'](a21_0x29e5('0x15'),this[a21_0x29e5('0x17')][a21_0x29e5('0x11')](this));console[a21_0x29e5('0x4')](a21_0x29e5('0x18'));}[a21_0x29e5('0x10')](){console[a21_0x29e5('0x4')](a21_0x29e5('0x19')+stationSettings_1[a21_0x29e5('0x8')]['settings']['portCOM']);}[a21_0x29e5('0x13')](){console[a21_0x29e5('0x4')](a21_0x29e5('0x1a'));setTimeout(function(){this['openCOM']()[a21_0x29e5('0x11')](this);},0x1388);}['serialPortOnError'](_0x35fe9f){console[a21_0x29e5('0x14')](a21_0x29e5('0x1b')+_0x35fe9f);setTimeout(function(){this['openCOM']();}[a21_0x29e5('0x11')](this),0x1388);}[a21_0x29e5('0x17')](_0x4a7b49){this['gpsService'][a21_0x29e5('0x1c')][a21_0x29e5('0x1d')](_0x4a7b49);}['serialPortOnData'](_0x548359){}[a21_0x29e5('0x16')](){this['serialPort'][a21_0x29e5('0x1e')]();}}exports[a21_0x29e5('0x1f')]=SerialPortService;