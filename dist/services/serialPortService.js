var a23_0x24f3=['read','SerialPortService','defineProperty','__esModule','../infrastructure/stationSettings','gpsService','log','openCOM','serialPort','StationContext','portCOM','none','Readline','pipe','open','serialPortOnOpen','bind','close','serialPortOnClose','error','serialPortOnData','readable','serialPortOnReadable','parserOnData','init\x20SerialPort','settings','port\x20closed.','serialPortOnError','Serial\x20port\x20error:\x20','gps'];(function(_0x1dc287,_0x5a1a46){var _0xeb98f6=function(_0x1497c2){while(--_0x1497c2){_0x1dc287['push'](_0x1dc287['shift']());}};_0xeb98f6(++_0x5a1a46);}(a23_0x24f3,0x1a6));var a23_0x3ecb=function(_0x57d9af,_0x372536){_0x57d9af=_0x57d9af-0x0;var _0x440176=a23_0x24f3[_0x57d9af];return _0x440176;};'use strict';Object[a23_0x3ecb('0x0')](exports,a23_0x3ecb('0x1'),{'value':!![]});const stationSettings_1=require(a23_0x3ecb('0x2'));class SerialPortService{constructor(_0x1e379c){this[a23_0x3ecb('0x3')]=_0x1e379c;}['init'](){console[a23_0x3ecb('0x4')]('init\x20SerialPortService');this['openCOM']();}[a23_0x3ecb('0x5')](){const _0x231246=require('serialport');this[a23_0x3ecb('0x6')]=new _0x231246(stationSettings_1[a23_0x3ecb('0x7')]['settings'][a23_0x3ecb('0x8')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a23_0x3ecb('0x9')});const _0x1f15e7=_0x231246['parsers'][a23_0x3ecb('0xa')];const _0x4518b8=new _0x1f15e7('\x0d\x0a');this['serialPort'][a23_0x3ecb('0xb')](_0x4518b8);this[a23_0x3ecb('0x6')]['on'](a23_0x3ecb('0xc'),this[a23_0x3ecb('0xd')][a23_0x3ecb('0xe')](this));this[a23_0x3ecb('0x6')]['on'](a23_0x3ecb('0xf'),this[a23_0x3ecb('0x10')][a23_0x3ecb('0xe')](this));this[a23_0x3ecb('0x6')]['on'](a23_0x3ecb('0x11'),this['serialPortOnError'][a23_0x3ecb('0xe')](this));this[a23_0x3ecb('0x6')]['on']('data',this[a23_0x3ecb('0x12')][a23_0x3ecb('0xe')](this));this[a23_0x3ecb('0x6')]['on'](a23_0x3ecb('0x13'),this[a23_0x3ecb('0x14')][a23_0x3ecb('0xe')](this));_0x4518b8['on']('data',this[a23_0x3ecb('0x15')]['bind'](this));console['log'](a23_0x3ecb('0x16'));}[a23_0x3ecb('0xd')](){console['log']('Port\x20opened:\x20'+stationSettings_1[a23_0x3ecb('0x7')][a23_0x3ecb('0x17')][a23_0x3ecb('0x8')]);}[a23_0x3ecb('0x10')](){console['log'](a23_0x3ecb('0x18'));setTimeout(function(){this[a23_0x3ecb('0x5')]()[a23_0x3ecb('0xe')](this);},0x1388);}[a23_0x3ecb('0x19')](_0x36a317){console['error'](a23_0x3ecb('0x1a')+_0x36a317);setTimeout(function(){this[a23_0x3ecb('0x5')]();}[a23_0x3ecb('0xe')](this),0x1388);}['parserOnData'](_0x5ddd04){this[a23_0x3ecb('0x3')][a23_0x3ecb('0x1b')]['update'](_0x5ddd04);}['serialPortOnData'](_0x2d6f2c){}[a23_0x3ecb('0x14')](){this[a23_0x3ecb('0x6')][a23_0x3ecb('0x1c')]();}}exports[a23_0x3ecb('0x1d')]=SerialPortService;