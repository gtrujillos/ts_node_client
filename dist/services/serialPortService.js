var a20_0x3b5b=['parserOnData','serialPortOnOpen','log','portCOM','port\x20closed.','serialPortOnError','gps','update','serialPortOnData','defineProperty','../infrastructure/stationSettings','gpsService','init\x20SerialPortService','openCOM','serialport','serialPort','StationContext','settings','parsers','open','bind','close','serialPortOnClose','error','data','readable','serialPortOnReadable'];(function(_0x3c14c3,_0x937bd0){var _0x48595d=function(_0x3a027f){while(--_0x3a027f){_0x3c14c3['push'](_0x3c14c3['shift']());}};_0x48595d(++_0x937bd0);}(a20_0x3b5b,0xc6));var a20_0x51d9=function(_0x18c24f,_0x2fb002){_0x18c24f=_0x18c24f-0x0;var _0x3e5006=a20_0x3b5b[_0x18c24f];return _0x3e5006;};'use strict';Object[a20_0x51d9('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a20_0x51d9('0x1'));class SerialPortService{constructor(_0x436893){this[a20_0x51d9('0x2')]=_0x436893;}['init'](){console['log'](a20_0x51d9('0x3'));this[a20_0x51d9('0x4')]();}[a20_0x51d9('0x4')](){const _0x3a759c=require(a20_0x51d9('0x5'));this[a20_0x51d9('0x6')]=new _0x3a759c(stationSettings_1[a20_0x51d9('0x7')][a20_0x51d9('0x8')]['portCOM'],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':'none'});const _0x37667b=_0x3a759c[a20_0x51d9('0x9')]['Readline'];const _0x3a9fa6=new _0x37667b('\x0d\x0a');this[a20_0x51d9('0x6')]['pipe'](_0x3a9fa6);this[a20_0x51d9('0x6')]['on'](a20_0x51d9('0xa'),this['serialPortOnOpen'][a20_0x51d9('0xb')](this));this['serialPort']['on'](a20_0x51d9('0xc'),this[a20_0x51d9('0xd')][a20_0x51d9('0xb')](this));this[a20_0x51d9('0x6')]['on'](a20_0x51d9('0xe'),this['serialPortOnError'][a20_0x51d9('0xb')](this));this[a20_0x51d9('0x6')]['on'](a20_0x51d9('0xf'),this['serialPortOnData'][a20_0x51d9('0xb')](this));this[a20_0x51d9('0x6')]['on'](a20_0x51d9('0x10'),this[a20_0x51d9('0x11')]['bind'](this));_0x3a9fa6['on'](a20_0x51d9('0xf'),this[a20_0x51d9('0x12')][a20_0x51d9('0xb')](this));console['log']('init\x20SerialPort');}[a20_0x51d9('0x13')](){console[a20_0x51d9('0x14')]('Port\x20opened:\x20'+stationSettings_1[a20_0x51d9('0x7')][a20_0x51d9('0x8')][a20_0x51d9('0x15')]);}[a20_0x51d9('0xd')](){console['log'](a20_0x51d9('0x16'));setTimeout(function(){this['openCOM']()[a20_0x51d9('0xb')](this);},0x1388);}[a20_0x51d9('0x17')](_0x1b0e17){console[a20_0x51d9('0xe')]('Serial\x20port\x20error:\x20'+_0x1b0e17);setTimeout(function(){this['openCOM']();}['bind'](this),0x1388);}['parserOnData'](_0x103e46){this[a20_0x51d9('0x2')][a20_0x51d9('0x18')][a20_0x51d9('0x19')](_0x103e46);}[a20_0x51d9('0x1a')](_0x12d2b1){}[a20_0x51d9('0x11')](){this[a20_0x51d9('0x6')]['read']();}}exports['SerialPortService']=SerialPortService;