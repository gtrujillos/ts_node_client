var a26_0x3e67=['DEV_MODE','true','init','GPSService','gps','openCOM','serialport','serialPort','StationContext','settings','portCOM','parsers','pipe','open','bind','close','error','serialPortOnError','data','serialPortOnData','readable','log','init\x20SerialPort','serialPortOnOpen','Port\x20opened:\x20','serialPortOnClose','port\x20closed.','Serial\x20port\x20error:\x20','parserOnData','getInstance','update','serialPortOnReadable','read','SerialPortService','__esModule','../infrastructure/stationSettings','./gpsService','devMode','env'];(function(_0x43331d,_0xc4c90d){var _0x318d0a=function(_0x45ce0f){while(--_0x45ce0f){_0x43331d['push'](_0x43331d['shift']());}};_0x318d0a(++_0xc4c90d);}(a26_0x3e67,0x1a8));var a26_0x77fa=function(_0x269940,_0x3b2340){_0x269940=_0x269940-0x0;var _0x41da3e=a26_0x3e67[_0x269940];return _0x41da3e;};'use strict';Object['defineProperty'](exports,a26_0x77fa('0x0'),{'value':!![]});const stationSettings_1=require(a26_0x77fa('0x1'));const gpsService_1=require(a26_0x77fa('0x2'));class SerialPortService{constructor(){this[a26_0x77fa('0x3')]=process[a26_0x77fa('0x4')][a26_0x77fa('0x5')]==a26_0x77fa('0x6');}[a26_0x77fa('0x7')](){console['log']('init\x20SerialPortService');if(this['devMode']){gpsService_1[a26_0x77fa('0x8')]['getInstance']()[a26_0x77fa('0x9')]['update']('$GPGGA,224900.000,4832.3762,N,00903.5393,E,1,04,7.8,498.6,M,48.0,M,,0000*5E');}else{this[a26_0x77fa('0xa')]();}}[a26_0x77fa('0xa')](){const _0x77c4f9=require(a26_0x77fa('0xb'));this[a26_0x77fa('0xc')]=new _0x77c4f9(stationSettings_1[a26_0x77fa('0xd')][a26_0x77fa('0xe')][a26_0x77fa('0xf')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':'none'});const _0x444528=_0x77c4f9[a26_0x77fa('0x10')]['Readline'];const _0x33b7b9=new _0x444528('\x0d\x0a');this['serialPort'][a26_0x77fa('0x11')](_0x33b7b9);this[a26_0x77fa('0xc')]['on'](a26_0x77fa('0x12'),this['serialPortOnOpen'][a26_0x77fa('0x13')](this));this[a26_0x77fa('0xc')]['on'](a26_0x77fa('0x14'),this['serialPortOnClose'][a26_0x77fa('0x13')](this));this[a26_0x77fa('0xc')]['on'](a26_0x77fa('0x15'),this[a26_0x77fa('0x16')][a26_0x77fa('0x13')](this));this[a26_0x77fa('0xc')]['on'](a26_0x77fa('0x17'),this[a26_0x77fa('0x18')][a26_0x77fa('0x13')](this));this['serialPort']['on'](a26_0x77fa('0x19'),this['serialPortOnReadable'][a26_0x77fa('0x13')](this));_0x33b7b9['on'](a26_0x77fa('0x17'),this['parserOnData']['bind'](this));console[a26_0x77fa('0x1a')](a26_0x77fa('0x1b'));}[a26_0x77fa('0x1c')](){console[a26_0x77fa('0x1a')](a26_0x77fa('0x1d')+stationSettings_1[a26_0x77fa('0xd')][a26_0x77fa('0xe')][a26_0x77fa('0xf')]);}[a26_0x77fa('0x1e')](){console[a26_0x77fa('0x1a')](a26_0x77fa('0x1f'));setTimeout(function(){this[a26_0x77fa('0xa')]()[a26_0x77fa('0x13')](this);},0x1388);}[a26_0x77fa('0x16')](_0x5ba9d1){console['error'](a26_0x77fa('0x20')+_0x5ba9d1);setTimeout(function(){this[a26_0x77fa('0xa')]();}['bind'](this),0x1388);}[a26_0x77fa('0x21')](_0x43b2ae){try{gpsService_1[a26_0x77fa('0x8')][a26_0x77fa('0x22')]()[a26_0x77fa('0x9')][a26_0x77fa('0x23')](_0x43b2ae);}catch(_0x210b98){console[a26_0x77fa('0x15')]('parserOnData',_0x210b98);}}['serialPortOnData'](_0x4923b8){}[a26_0x77fa('0x24')](){this['serialPort'][a26_0x77fa('0x25')]();}}exports[a26_0x77fa('0x26')]=SerialPortService;