var a21_0x3589=['serialPortOnError','Serial\x20port\x20error:\x20','gps','update','SerialPortService','defineProperty','__esModule','../infrastructure/stationSettings','gpsService','init','log','init\x20SerialPortService','openCOM','serialport','settings','portCOM','none','parsers','Readline','serialPort','pipe','open','serialPortOnOpen','bind','serialPortOnClose','error','data','serialPortOnData','readable','serialPortOnReadable','parserOnData','init\x20SerialPort','StationContext'];(function(_0x44d456,_0x1e7ee2){var _0x23c965=function(_0x11c39e){while(--_0x11c39e){_0x44d456['push'](_0x44d456['shift']());}};_0x23c965(++_0x1e7ee2);}(a21_0x3589,0xec));var a21_0x50c1=function(_0x422ef6,_0x13a218){_0x422ef6=_0x422ef6-0x0;var _0xe9c838=a21_0x3589[_0x422ef6];return _0xe9c838;};'use strict';Object[a21_0x50c1('0x0')](exports,a21_0x50c1('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x50c1('0x2'));class SerialPortService{constructor(_0x182701){this[a21_0x50c1('0x3')]=_0x182701;}[a21_0x50c1('0x4')](){console[a21_0x50c1('0x5')](a21_0x50c1('0x6'));this[a21_0x50c1('0x7')]();}['openCOM'](){const _0x77fb02=require(a21_0x50c1('0x8'));this['serialPort']=new _0x77fb02(stationSettings_1['StationContext'][a21_0x50c1('0x9')][a21_0x50c1('0xa')],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a21_0x50c1('0xb')});const _0x1703d5=_0x77fb02[a21_0x50c1('0xc')][a21_0x50c1('0xd')];const _0x11d2c4=new _0x1703d5('\x0d\x0a');this[a21_0x50c1('0xe')][a21_0x50c1('0xf')](_0x11d2c4);this[a21_0x50c1('0xe')]['on'](a21_0x50c1('0x10'),this[a21_0x50c1('0x11')][a21_0x50c1('0x12')](this));this[a21_0x50c1('0xe')]['on']('close',this[a21_0x50c1('0x13')][a21_0x50c1('0x12')](this));this[a21_0x50c1('0xe')]['on'](a21_0x50c1('0x14'),this['serialPortOnError']['bind'](this));this[a21_0x50c1('0xe')]['on'](a21_0x50c1('0x15'),this[a21_0x50c1('0x16')][a21_0x50c1('0x12')](this));this[a21_0x50c1('0xe')]['on'](a21_0x50c1('0x17'),this[a21_0x50c1('0x18')][a21_0x50c1('0x12')](this));_0x11d2c4['on'](a21_0x50c1('0x15'),this[a21_0x50c1('0x19')][a21_0x50c1('0x12')](this));console[a21_0x50c1('0x5')](a21_0x50c1('0x1a'));}[a21_0x50c1('0x11')](){console[a21_0x50c1('0x5')]('Port\x20opened:\x20'+stationSettings_1[a21_0x50c1('0x1b')][a21_0x50c1('0x9')]['portCOM']);}[a21_0x50c1('0x13')](){console[a21_0x50c1('0x5')]('port\x20closed.');setTimeout(function(){this[a21_0x50c1('0x7')]()['bind'](this);},0x1388);}[a21_0x50c1('0x1c')](_0x18d23c){console[a21_0x50c1('0x14')](a21_0x50c1('0x1d')+_0x18d23c);setTimeout(function(){this['openCOM']();}[a21_0x50c1('0x12')](this),0x1388);}['parserOnData'](_0x293a47){this['gpsService'][a21_0x50c1('0x1e')][a21_0x50c1('0x1f')](_0x293a47);}[a21_0x50c1('0x16')](_0x182269){}['serialPortOnReadable'](){this[a21_0x50c1('0xe')]['read']();}}exports[a21_0x50c1('0x20')]=SerialPortService;