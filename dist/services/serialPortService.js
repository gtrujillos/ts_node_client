var a20_0x3c85=['read','SerialPortService','defineProperty','../infrastructure/stationSettings','gpsService','init','log','init\x20SerialPortService','openCOM','serialport','StationContext','none','parsers','Readline','serialPort','pipe','open','serialPortOnOpen','bind','close','error','serialPortOnError','serialPortOnData','readable','data','init\x20SerialPort','settings','portCOM','port\x20closed.','parserOnData','gps'];(function(_0x12c3c1,_0x18e8b3){var _0x3bdc49=function(_0x3c3d6b){while(--_0x3c3d6b){_0x12c3c1['push'](_0x12c3c1['shift']());}};_0x3bdc49(++_0x18e8b3);}(a20_0x3c85,0x7e));var a20_0x1547=function(_0x350c15,_0x5c1cad){_0x350c15=_0x350c15-0x0;var _0x464602=a20_0x3c85[_0x350c15];return _0x464602;};'use strict';Object[a20_0x1547('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a20_0x1547('0x1'));class SerialPortService{constructor(_0x12deba){this[a20_0x1547('0x2')]=_0x12deba;}[a20_0x1547('0x3')](){console[a20_0x1547('0x4')](a20_0x1547('0x5'));this[a20_0x1547('0x6')]();}[a20_0x1547('0x6')](){const _0x386edd=require(a20_0x1547('0x7'));this['serialPort']=new _0x386edd(stationSettings_1[a20_0x1547('0x8')]['settings']['portCOM'],{'baudRate':0x2580,'dataBits':0x8,'stopBits':0x1,'parity':a20_0x1547('0x9')});const _0xfd972b=_0x386edd[a20_0x1547('0xa')][a20_0x1547('0xb')];const _0x38b629=new _0xfd972b('\x0d\x0a');this[a20_0x1547('0xc')][a20_0x1547('0xd')](_0x38b629);this[a20_0x1547('0xc')]['on'](a20_0x1547('0xe'),this[a20_0x1547('0xf')][a20_0x1547('0x10')](this));this[a20_0x1547('0xc')]['on'](a20_0x1547('0x11'),this['serialPortOnClose'][a20_0x1547('0x10')](this));this['serialPort']['on'](a20_0x1547('0x12'),this[a20_0x1547('0x13')][a20_0x1547('0x10')](this));this[a20_0x1547('0xc')]['on']('data',this[a20_0x1547('0x14')]['bind'](this));this['serialPort']['on'](a20_0x1547('0x15'),this['serialPortOnReadable']['bind'](this));_0x38b629['on'](a20_0x1547('0x16'),this['parserOnData'][a20_0x1547('0x10')](this));console[a20_0x1547('0x4')](a20_0x1547('0x17'));}[a20_0x1547('0xf')](){console[a20_0x1547('0x4')]('Port\x20opened:\x20'+stationSettings_1['StationContext'][a20_0x1547('0x18')][a20_0x1547('0x19')]);}['serialPortOnClose'](){console[a20_0x1547('0x4')](a20_0x1547('0x1a'));setTimeout(function(){this[a20_0x1547('0x6')]()[a20_0x1547('0x10')](this);},0x1388);}[a20_0x1547('0x13')](_0x472eb9){console[a20_0x1547('0x12')]('Serial\x20port\x20error:\x20'+_0x472eb9);setTimeout(function(){this['openCOM']();}[a20_0x1547('0x10')](this),0x1388);}[a20_0x1547('0x1b')](_0x39c7aa){this[a20_0x1547('0x2')][a20_0x1547('0x1c')]['update'](_0x39c7aa);}[a20_0x1547('0x14')](_0x4dd03c){}['serialPortOnReadable'](){this['serialPort'][a20_0x1547('0x1d')]();}}exports[a20_0x1547('0x1e')]=SerialPortService;