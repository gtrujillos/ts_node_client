var a16_0x4dfe=['Websocket\x20opened:','error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','createWebSocket','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','StationContext','settings','cameraSocket','open'];(function(_0x2cf201,_0x509049){var _0x1ae901=function(_0x11adb9){while(--_0x11adb9){_0x2cf201['push'](_0x2cf201['shift']());}};_0x1ae901(++_0x509049);}(a16_0x4dfe,0x1d9));var a16_0x441c=function(_0x498778,_0x24a992){_0x498778=_0x498778-0x0;var _0x1b1d5b=a16_0x4dfe[_0x498778];return _0x1b1d5b;};'use strict';Object[a16_0x441c('0x0')](exports,a16_0x441c('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x441c('0x2'));class CountingWebSocketService{constructor(){this[a16_0x441c('0x3')]=0x0;}[a16_0x441c('0x4')](){console[a16_0x441c('0x5')]('init\x20CountingWebSocket');this['createWebSocket']();}['createWebSocket'](){const _0xb4088a=require('ws');const _0x1c97d8=new _0xb4088a(stationSettings_1[a16_0x441c('0x6')][a16_0x441c('0x7')][a16_0x441c('0x8')]);_0x1c97d8['on'](a16_0x441c('0x9'),function open(){console[a16_0x441c('0x5')](a16_0x441c('0xa')+stationSettings_1[a16_0x441c('0x6')]['settings'][a16_0x441c('0x8')]);this[a16_0x441c('0x3')]=0x0;});_0x1c97d8['on'](a16_0x441c('0xb'),this[a16_0x441c('0xc')][a16_0x441c('0xd')](this));_0x1c97d8['on'](a16_0x441c('0xe'),this['incoming']['bind'](this));}[a16_0x441c('0xf')](_0x282354){const _0x48a9f4=JSON[a16_0x441c('0x10')](_0x282354);if(_0x48a9f4[a16_0x441c('0x11')]==null||_0x48a9f4['Data'][a16_0x441c('0x12')]==0x0){_0x282354=JSON['parse'](a16_0x441c('0x13'));}if(_0x48a9f4[a16_0x441c('0x11')]!=null&&_0x48a9f4[a16_0x441c('0x11')][a16_0x441c('0x12')]>0x0){this[a16_0x441c('0x14')](_0x48a9f4[a16_0x441c('0x11')][0x0]);}}['onError'](_0x2051a8){console[a16_0x441c('0xb')](_0x2051a8);setTimeout(function(){this[a16_0x441c('0x15')]();}[a16_0x441c('0xd')](this),0x1388);}}exports[a16_0x441c('0x16')]=CountingWebSocketService;