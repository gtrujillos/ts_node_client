var a14_0x203e=['open','settings','cameraSocket','eventCounter','onError','bind','message','incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','__esModule','../infrastructure/stationSettings','createWebSocket','log','init\x20CountingWebSocket','StationContext'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a14_0x203e,0x14e));var a14_0x29cb=function(_0x58af63,_0x485b37){_0x58af63=_0x58af63-0x0;var _0x30199d=a14_0x203e[_0x58af63];return _0x30199d;};'use strict';Object['defineProperty'](exports,a14_0x29cb('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x29cb('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){this[a14_0x29cb('0x2')]();console[a14_0x29cb('0x3')](a14_0x29cb('0x4'));}['createWebSocket'](){const _0x302e85=require('ws');const _0x2d54e3=new _0x302e85(stationSettings_1[a14_0x29cb('0x5')]['settings']['cameraSocket']);_0x2d54e3['on'](a14_0x29cb('0x6'),function open(){console['log']('Websocket\x20opened:'+stationSettings_1[a14_0x29cb('0x5')][a14_0x29cb('0x7')][a14_0x29cb('0x8')]);this[a14_0x29cb('0x9')]=0x0;});_0x2d54e3['on']('error',this[a14_0x29cb('0xa')][a14_0x29cb('0xb')](this));_0x2d54e3['on'](a14_0x29cb('0xc'),this['incoming'][a14_0x29cb('0xb')](this));}[a14_0x29cb('0xd')](_0x5439c2){const _0x5cd7a0=JSON['parse'](_0x5439c2);if(_0x5cd7a0[a14_0x29cb('0xe')]==null||_0x5cd7a0[a14_0x29cb('0xe')][a14_0x29cb('0xf')]==0x0){_0x5439c2=JSON[a14_0x29cb('0x10')](a14_0x29cb('0x11'));}if(_0x5cd7a0[a14_0x29cb('0xe')]!=null&&_0x5cd7a0['Data'][a14_0x29cb('0xf')]>0x0){this[a14_0x29cb('0x12')](_0x5cd7a0['Data'][0x0]);}}[a14_0x29cb('0xa')](_0x263dc7){console['error'](_0x263dc7);setTimeout(function(){this[a14_0x29cb('0x2')]();}[a14_0x29cb('0xb')](this),0x1388);}}exports[a14_0x29cb('0x13')]=CountingWebSocketService;