var a14_0xdf45=['settings','Websocket\x20opened:','cameraSocket','error','onError','bind','message','incoming','parse','Data','length','createEvent','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket','StationContext'];(function(_0x5b7ee5,_0x274239){var _0x1fc1c1=function(_0x57de69){while(--_0x57de69){_0x5b7ee5['push'](_0x5b7ee5['shift']());}};_0x1fc1c1(++_0x274239);}(a14_0xdf45,0x1ed));var a14_0x3b8a=function(_0x5ec190,_0x129aea){_0x5ec190=_0x5ec190-0x0;var _0xccb9bc=a14_0xdf45[_0x5ec190];return _0xccb9bc;};'use strict';Object[a14_0x3b8a('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x3b8a('0x1'));class CountingWebSocketService{constructor(){this[a14_0x3b8a('0x2')]=0x0;}[a14_0x3b8a('0x3')](){console[a14_0x3b8a('0x4')]('init\x20CountingWebSocket');this[a14_0x3b8a('0x5')]();}['createWebSocket'](){const _0x2ee6d7=require('ws');const _0x2deb78=new _0x2ee6d7(stationSettings_1[a14_0x3b8a('0x6')][a14_0x3b8a('0x7')]['cameraSocket']);_0x2deb78['on']('open',function open(){console[a14_0x3b8a('0x4')](a14_0x3b8a('0x8')+stationSettings_1[a14_0x3b8a('0x6')][a14_0x3b8a('0x7')][a14_0x3b8a('0x9')]);this['eventCounter']=0x0;});_0x2deb78['on'](a14_0x3b8a('0xa'),this[a14_0x3b8a('0xb')][a14_0x3b8a('0xc')](this));_0x2deb78['on'](a14_0x3b8a('0xd'),this[a14_0x3b8a('0xe')][a14_0x3b8a('0xc')](this));}[a14_0x3b8a('0xe')](_0x4705e8){const _0x425f6e=JSON[a14_0x3b8a('0xf')](_0x4705e8);if(_0x425f6e[a14_0x3b8a('0x10')]==null||_0x425f6e['Data']['length']==0x0){_0x4705e8=JSON[a14_0x3b8a('0xf')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x425f6e[a14_0x3b8a('0x10')]!=null&&_0x425f6e[a14_0x3b8a('0x10')][a14_0x3b8a('0x11')]>0x0){this[a14_0x3b8a('0x12')](_0x425f6e['Data'][0x0]);}}[a14_0x3b8a('0xb')](_0x52082b){console[a14_0x3b8a('0xa')](_0x52082b);setTimeout(function(){this['createWebSocket']();}[a14_0x3b8a('0xc')](this),0x1388);}}exports[a14_0x3b8a('0x13')]=CountingWebSocketService;