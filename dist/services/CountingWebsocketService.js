var a14_0xf895=['Websocket\x20opened:','cameraSocket','error','bind','message','incoming','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','onError','CountingWebSocketService','defineProperty','__esModule','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','open'];(function(_0x2223dd,_0x3c8b6d){var _0x1934e6=function(_0x14a831){while(--_0x14a831){_0x2223dd['push'](_0x2223dd['shift']());}};_0x1934e6(++_0x3c8b6d);}(a14_0xf895,0x1ae));var a14_0x5a69=function(_0x2eb125,_0x471dc7){_0x2eb125=_0x2eb125-0x0;var _0xc9544f=a14_0xf895[_0x2eb125];return _0xc9544f;};'use strict';Object[a14_0x5a69('0x0')](exports,a14_0x5a69('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x5a69('0x2')]=0x0;}[a14_0x5a69('0x3')](){console[a14_0x5a69('0x4')](a14_0x5a69('0x5'));this[a14_0x5a69('0x6')]();}[a14_0x5a69('0x6')](){const _0x113eb5=require('ws');const _0xb9f67=new _0x113eb5(stationSettings_1[a14_0x5a69('0x7')][a14_0x5a69('0x8')]['cameraSocket']);_0xb9f67['on'](a14_0x5a69('0x9'),function open(){console[a14_0x5a69('0x4')](a14_0x5a69('0xa')+stationSettings_1['StationContext'][a14_0x5a69('0x8')][a14_0x5a69('0xb')]);this['eventCounter']=0x0;});_0xb9f67['on'](a14_0x5a69('0xc'),this['onError'][a14_0x5a69('0xd')](this));_0xb9f67['on'](a14_0x5a69('0xe'),this[a14_0x5a69('0xf')][a14_0x5a69('0xd')](this));}[a14_0x5a69('0xf')](_0x21b9d5){const _0x4cf39f=JSON['parse'](_0x21b9d5);if(_0x4cf39f[a14_0x5a69('0x10')]==null||_0x4cf39f[a14_0x5a69('0x10')][a14_0x5a69('0x11')]==0x0){_0x21b9d5=JSON['parse'](a14_0x5a69('0x12'));}if(_0x4cf39f[a14_0x5a69('0x10')]!=null&&_0x4cf39f[a14_0x5a69('0x10')][a14_0x5a69('0x11')]>0x0){this[a14_0x5a69('0x13')](_0x4cf39f['Data'][0x0]);}}[a14_0x5a69('0x14')](_0x52412a){console['error'](_0x52412a);setTimeout(function(){this[a14_0x5a69('0x6')]();}[a14_0x5a69('0xd')](this),0x1388);}}exports[a14_0x5a69('0x15')]=CountingWebSocketService;