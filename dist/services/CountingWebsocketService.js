var a16_0x43a4=['cameraSocket','open','Websocket\x20opened:','settings','error','onError','bind','incoming','Data','length','parse','createEvent','Counting\x20camera\x20Websocket\x20error','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','log','init\x20CountingWebSocket','createWebSocket'];(function(_0x4f337d,_0x3fc320){var _0x476233=function(_0x2ce3e0){while(--_0x2ce3e0){_0x4f337d['push'](_0x4f337d['shift']());}};_0x476233(++_0x3fc320);}(a16_0x43a4,0x8c));var a16_0x1353=function(_0x232182,_0x745b67){_0x232182=_0x232182-0x0;var _0xdeb941=a16_0x43a4[_0x232182];return _0xdeb941;};'use strict';Object[a16_0x1353('0x0')](exports,a16_0x1353('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x1353('0x2'));class CountingWebSocketService{constructor(){this[a16_0x1353('0x3')]=0x0;}['init'](){console[a16_0x1353('0x4')](a16_0x1353('0x5'));this[a16_0x1353('0x6')]();}[a16_0x1353('0x6')](){const _0x2d50c3=require('ws');const _0x17b9bc=new _0x2d50c3(stationSettings_1['StationContext']['settings'][a16_0x1353('0x7')]);_0x17b9bc['on'](a16_0x1353('0x8'),function open(){console[a16_0x1353('0x4')](a16_0x1353('0x9')+stationSettings_1['StationContext'][a16_0x1353('0xa')][a16_0x1353('0x7')]);this[a16_0x1353('0x3')]=0x0;});_0x17b9bc['on'](a16_0x1353('0xb'),this[a16_0x1353('0xc')][a16_0x1353('0xd')](this));_0x17b9bc['on']('message',this['incoming']['bind'](this));}[a16_0x1353('0xe')](_0x391970){const _0x203da3=JSON['parse'](_0x391970);if(_0x203da3['Data']==null||_0x203da3[a16_0x1353('0xf')][a16_0x1353('0x10')]==0x0){_0x391970=JSON[a16_0x1353('0x11')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x203da3[a16_0x1353('0xf')]!=null&&_0x203da3[a16_0x1353('0xf')][a16_0x1353('0x10')]>0x0){this[a16_0x1353('0x12')](_0x203da3['Data'][0x0]);}}[a16_0x1353('0xc')](_0x3a4fef){console[a16_0x1353('0xb')](a16_0x1353('0x13'),_0x3a4fef);setTimeout(function(){this[a16_0x1353('0x6')]();}[a16_0x1353('0xd')](this),0x1388);}}exports[a16_0x1353('0x14')]=CountingWebSocketService;