var a14_0x3e5e=['settings','cameraSocket','open','log','message','incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','onError','error','bind','CountingWebSocketService','../infrastructure/stationSettings','eventCounter','init','init\x20CountingWebSocket','createWebSocket','StationContext'];(function(_0x3132e1,_0x45a8af){var _0x506ca8=function(_0x487bd3){while(--_0x487bd3){_0x3132e1['push'](_0x3132e1['shift']());}};_0x506ca8(++_0x45a8af);}(a14_0x3e5e,0x1b3));var a14_0x5247=function(_0x183b9b,_0x296816){_0x183b9b=_0x183b9b-0x0;var _0x4b3283=a14_0x3e5e[_0x183b9b];return _0x4b3283;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x5247('0x0'));class CountingWebSocketService{constructor(){this[a14_0x5247('0x1')]=0x0;}[a14_0x5247('0x2')](){this['createWebSocket']();console['log'](a14_0x5247('0x3'));}[a14_0x5247('0x4')](){const _0x3ceaff=require('ws');const _0x137c91=new _0x3ceaff(stationSettings_1[a14_0x5247('0x5')][a14_0x5247('0x6')][a14_0x5247('0x7')]);_0x137c91['on'](a14_0x5247('0x8'),function open(){console[a14_0x5247('0x9')]('Websocket\x20opened:'+stationSettings_1['StationContext']['settings'][a14_0x5247('0x7')]);this[a14_0x5247('0x1')]=0x0;});_0x137c91['on']('error',this['onError']['bind'](this));_0x137c91['on'](a14_0x5247('0xa'),this[a14_0x5247('0xb')]['bind'](this));}[a14_0x5247('0xb')](_0x23d222){const _0x30a3b2=JSON['parse'](_0x23d222);if(_0x30a3b2[a14_0x5247('0xc')]==null||_0x30a3b2[a14_0x5247('0xc')][a14_0x5247('0xd')]==0x0){_0x23d222=JSON[a14_0x5247('0xe')](a14_0x5247('0xf'));}if(_0x30a3b2['Data']!=null&&_0x30a3b2[a14_0x5247('0xc')][a14_0x5247('0xd')]>0x0){this[a14_0x5247('0x10')](_0x30a3b2['Data'][0x0]);}}[a14_0x5247('0x11')](_0x88246b){console[a14_0x5247('0x12')](_0x88246b);setTimeout(function(){this[a14_0x5247('0x4')]();}[a14_0x5247('0x13')](this),0x1388);}}exports[a14_0x5247('0x14')]=CountingWebSocketService;