var a14_0xe13e=['__esModule','eventCounter','init','createWebSocket','log','init\x20CountingWebSocket','settings','cameraSocket','Websocket\x20opened:','StationContext','onError','bind','incoming','Data','length','createEvent','error','defineProperty'];(function(_0x3cb43e,_0x5d8fbe){var _0x15293b=function(_0x49b15c){while(--_0x49b15c){_0x3cb43e['push'](_0x3cb43e['shift']());}};_0x15293b(++_0x5d8fbe);}(a14_0xe13e,0xb3));var a14_0xda86=function(_0x52e4aa,_0x3e0171){_0x52e4aa=_0x52e4aa-0x0;var _0x287aa1=a14_0xe13e[_0x52e4aa];return _0x287aa1;};'use strict';Object[a14_0xda86('0x0')](exports,a14_0xda86('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0xda86('0x2')]=0x0;}[a14_0xda86('0x3')](){this[a14_0xda86('0x4')]();console[a14_0xda86('0x5')](a14_0xda86('0x6'));}['createWebSocket'](){const _0x3d22e5=require('ws');const _0x3c9a61=new _0x3d22e5(stationSettings_1['StationContext'][a14_0xda86('0x7')][a14_0xda86('0x8')]);_0x3c9a61['on']('open',function open(){console['log'](a14_0xda86('0x9')+stationSettings_1[a14_0xda86('0xa')]['settings'][a14_0xda86('0x8')]);this['eventCounter']=0x0;});_0x3c9a61['on']('error',this[a14_0xda86('0xb')][a14_0xda86('0xc')](this));_0x3c9a61['on']('message',this[a14_0xda86('0xd')][a14_0xda86('0xc')](this));}[a14_0xda86('0xd')](_0x485187){const _0x3cd3f5=JSON['parse'](_0x485187);if(_0x3cd3f5['Data']==null||_0x3cd3f5[a14_0xda86('0xe')][a14_0xda86('0xf')]==0x0){_0x485187=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x3cd3f5[a14_0xda86('0xe')]!=null&&_0x3cd3f5[a14_0xda86('0xe')]['length']>0x0){this[a14_0xda86('0x10')](_0x3cd3f5[a14_0xda86('0xe')][0x0]);}}[a14_0xda86('0xb')](_0x3cb617){console[a14_0xda86('0x11')](_0x3cb617);setTimeout(function(){this[a14_0xda86('0x4')]();}[a14_0xda86('0xc')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;