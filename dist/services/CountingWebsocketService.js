var a14_0x5dcd=['incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','cameraSocket','settings','eventCounter','error','onError','bind','message'];(function(_0x22fbdc,_0x3265d0){var _0x314418=function(_0x3c5fd3){while(--_0x3c5fd3){_0x22fbdc['push'](_0x22fbdc['shift']());}};_0x314418(++_0x3265d0);}(a14_0x5dcd,0x1eb));var a14_0x2501=function(_0x2fe357,_0x2bf9a0){_0x2fe357=_0x2fe357-0x0;var _0x5c1cbb=a14_0x5dcd[_0x2fe357];return _0x5c1cbb;};'use strict';Object[a14_0x2501('0x0')](exports,a14_0x2501('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x2501('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x2501('0x3')](){console[a14_0x2501('0x4')](a14_0x2501('0x5'));this['createWebSocket']();}[a14_0x2501('0x6')](){const _0x2695b4=require('ws');const _0x3e9296=new _0x2695b4(stationSettings_1[a14_0x2501('0x7')]['settings'][a14_0x2501('0x8')]);_0x3e9296['on']('open',function open(){console[a14_0x2501('0x4')]('Websocket\x20opened:'+stationSettings_1[a14_0x2501('0x7')][a14_0x2501('0x9')]['cameraSocket']);this[a14_0x2501('0xa')]=0x0;});_0x3e9296['on'](a14_0x2501('0xb'),this[a14_0x2501('0xc')][a14_0x2501('0xd')](this));_0x3e9296['on'](a14_0x2501('0xe'),this[a14_0x2501('0xf')][a14_0x2501('0xd')](this));}['incoming'](_0x332aac){const _0x1e661a=JSON[a14_0x2501('0x10')](_0x332aac);if(_0x1e661a[a14_0x2501('0x11')]==null||_0x1e661a[a14_0x2501('0x11')]['length']==0x0){_0x332aac=JSON[a14_0x2501('0x10')](a14_0x2501('0x12'));}if(_0x1e661a[a14_0x2501('0x11')]!=null&&_0x1e661a[a14_0x2501('0x11')][a14_0x2501('0x13')]>0x0){this[a14_0x2501('0x14')](_0x1e661a[a14_0x2501('0x11')][0x0]);}}[a14_0x2501('0xc')](_0x334f4d){console[a14_0x2501('0xb')](_0x334f4d);setTimeout(function(){this[a14_0x2501('0x6')]();}[a14_0x2501('0xd')](this),0x1388);}}exports[a14_0x2501('0x15')]=CountingWebSocketService;