var a16_0x38ea=['Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','error','onError','incoming'];(function(_0x249cd9,_0x1894e2){var _0x737046=function(_0x597b5a){while(--_0x597b5a){_0x249cd9['push'](_0x249cd9['shift']());}};_0x737046(++_0x1894e2);}(a16_0x38ea,0x1a9));var a16_0x1c21=function(_0x103c33,_0x3f5d1d){_0x103c33=_0x103c33-0x0;var _0x1a12cb=a16_0x38ea[_0x103c33];return _0x1a12cb;};'use strict';Object[a16_0x1c21('0x0')](exports,a16_0x1c21('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x1c21('0x2'));class CountingWebSocketService{constructor(){this[a16_0x1c21('0x3')]=0x0;}[a16_0x1c21('0x4')](){console[a16_0x1c21('0x5')](a16_0x1c21('0x6'));this['createWebSocket']();}[a16_0x1c21('0x7')](){const _0x5cc46b=require('ws');const _0x4c1c14=new _0x5cc46b(stationSettings_1[a16_0x1c21('0x8')][a16_0x1c21('0x9')][a16_0x1c21('0xa')]);_0x4c1c14['on'](a16_0x1c21('0xb'),function open(){console['log'](a16_0x1c21('0xc')+stationSettings_1[a16_0x1c21('0x8')][a16_0x1c21('0x9')][a16_0x1c21('0xa')]);this[a16_0x1c21('0x3')]=0x0;});_0x4c1c14['on'](a16_0x1c21('0xd'),this[a16_0x1c21('0xe')]['bind'](this));_0x4c1c14['on']('message',this[a16_0x1c21('0xf')]['bind'](this));}[a16_0x1c21('0xf')](_0x30b78b){const _0x3e85c9=JSON['parse'](_0x30b78b);if(_0x3e85c9[a16_0x1c21('0x10')]==null||_0x3e85c9[a16_0x1c21('0x10')][a16_0x1c21('0x11')]==0x0){_0x30b78b=JSON[a16_0x1c21('0x12')](a16_0x1c21('0x13'));}if(_0x3e85c9['Data']!=null&&_0x3e85c9[a16_0x1c21('0x10')]['length']>0x0){this[a16_0x1c21('0x14')](_0x3e85c9[a16_0x1c21('0x10')][0x0]);}}[a16_0x1c21('0xe')](_0x5e5fcb){console[a16_0x1c21('0xd')](_0x5e5fcb);setTimeout(function(){this['createWebSocket']();}['bind'](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;