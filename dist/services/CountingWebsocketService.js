var a16_0x9e32=['cameraSocket','open','StationContext','onError','bind','message','incoming','parse','Data','length','createEvent','defineProperty','__esModule','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','settings'];(function(_0x2f04a3,_0x15d513){var _0x1039a5=function(_0x757db8){while(--_0x757db8){_0x2f04a3['push'](_0x2f04a3['shift']());}};_0x1039a5(++_0x15d513);}(a16_0x9e32,0x1e6));var a16_0x36b5=function(_0x335a5b,_0x1648a4){_0x335a5b=_0x335a5b-0x0;var _0x2dede5=a16_0x9e32[_0x335a5b];return _0x2dede5;};'use strict';Object[a16_0x36b5('0x0')](exports,a16_0x36b5('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a16_0x36b5('0x2')]=0x0;}[a16_0x36b5('0x3')](){console[a16_0x36b5('0x4')](a16_0x36b5('0x5'));this[a16_0x36b5('0x6')]();}[a16_0x36b5('0x6')](){const _0xffabbd=require('ws');const _0x433232=new _0xffabbd(stationSettings_1['StationContext'][a16_0x36b5('0x7')][a16_0x36b5('0x8')]);_0x433232['on'](a16_0x36b5('0x9'),function open(){console[a16_0x36b5('0x4')]('Websocket\x20opened:'+stationSettings_1[a16_0x36b5('0xa')][a16_0x36b5('0x7')][a16_0x36b5('0x8')]);this[a16_0x36b5('0x2')]=0x0;});_0x433232['on']('error',this[a16_0x36b5('0xb')][a16_0x36b5('0xc')](this));_0x433232['on'](a16_0x36b5('0xd'),this['incoming'][a16_0x36b5('0xc')](this));}[a16_0x36b5('0xe')](_0x53bfb4){const _0x492418=JSON[a16_0x36b5('0xf')](_0x53bfb4);if(_0x492418[a16_0x36b5('0x10')]==null||_0x492418[a16_0x36b5('0x10')][a16_0x36b5('0x11')]==0x0){_0x53bfb4=JSON[a16_0x36b5('0xf')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x492418['Data']!=null&&_0x492418[a16_0x36b5('0x10')][a16_0x36b5('0x11')]>0x0){this[a16_0x36b5('0x12')](_0x492418['Data'][0x0]);}}[a16_0x36b5('0xb')](_0x172371){console['error'](_0x172371);setTimeout(function(){this[a16_0x36b5('0x6')]();}[a16_0x36b5('0xc')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;