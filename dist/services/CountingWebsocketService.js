var a14_0x1752=['parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','defineProperty','__esModule','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','error','onError','message','incoming','bind'];(function(_0x19a071,_0x50ebea){var _0x5d97ba=function(_0x23cdb1){while(--_0x23cdb1){_0x19a071['push'](_0x19a071['shift']());}};_0x5d97ba(++_0x50ebea);}(a14_0x1752,0x159));var a14_0x4073=function(_0x3c7d11,_0x581ea9){_0x3c7d11=_0x3c7d11-0x0;var _0x3349dd=a14_0x1752[_0x3c7d11];return _0x3349dd;};'use strict';Object[a14_0x4073('0x0')](exports,a14_0x4073('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x4073('0x2')]=0x0;}[a14_0x4073('0x3')](){this['createWebSocket']();console[a14_0x4073('0x4')](a14_0x4073('0x5'));}[a14_0x4073('0x6')](){const _0x5421b8=require('ws');const _0x488fb2=new _0x5421b8(stationSettings_1[a14_0x4073('0x7')][a14_0x4073('0x8')]['cameraSocket']);_0x488fb2['on']('open',function open(){console['log']('Websocket\x20opened:'+stationSettings_1[a14_0x4073('0x7')][a14_0x4073('0x8')][a14_0x4073('0x9')]);this['eventCounter']=0x0;});_0x488fb2['on'](a14_0x4073('0xa'),this[a14_0x4073('0xb')]['bind'](this));_0x488fb2['on'](a14_0x4073('0xc'),this[a14_0x4073('0xd')][a14_0x4073('0xe')](this));}[a14_0x4073('0xd')](_0x1b61a2){const _0x186e77=JSON[a14_0x4073('0xf')](_0x1b61a2);if(_0x186e77[a14_0x4073('0x10')]==null||_0x186e77[a14_0x4073('0x10')][a14_0x4073('0x11')]==0x0){_0x1b61a2=JSON[a14_0x4073('0xf')](a14_0x4073('0x12'));}if(_0x186e77[a14_0x4073('0x10')]!=null&&_0x186e77[a14_0x4073('0x10')][a14_0x4073('0x11')]>0x0){this[a14_0x4073('0x13')](_0x186e77[a14_0x4073('0x10')][0x0]);}}[a14_0x4073('0xb')](_0x1eae5f){console[a14_0x4073('0xa')](_0x1eae5f);setTimeout(function(){this[a14_0x4073('0x6')]();}[a14_0x4073('0xe')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;