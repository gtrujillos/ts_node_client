var a14_0x57d7=['open','log','Websocket\x20opened:','StationContext','error','onError','bind','incoming','parse','Data','length','createEvent','CountingWebSocketService','../infrastructure/stationSettings','eventCounter','init','createWebSocket','settings','cameraSocket'];(function(_0x106de3,_0xf931b2){var _0x15f289=function(_0x59332c){while(--_0x59332c){_0x106de3['push'](_0x106de3['shift']());}};_0x15f289(++_0xf931b2);}(a14_0x57d7,0x13d));var a14_0x5332=function(_0x2754c0,_0x3477b7){_0x2754c0=_0x2754c0-0x0;var _0x102816=a14_0x57d7[_0x2754c0];return _0x102816;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x5332('0x0'));class CountingWebSocketService{constructor(){this[a14_0x5332('0x1')]=0x0;}[a14_0x5332('0x2')](){console['log']('init\x20CountingWebSocket');this[a14_0x5332('0x3')]();}['createWebSocket'](){const _0x4ed04a=require('ws');const _0x59e57f=new _0x4ed04a(stationSettings_1['StationContext'][a14_0x5332('0x4')][a14_0x5332('0x5')]);_0x59e57f['on'](a14_0x5332('0x6'),function open(){console[a14_0x5332('0x7')](a14_0x5332('0x8')+stationSettings_1[a14_0x5332('0x9')]['settings'][a14_0x5332('0x5')]);this[a14_0x5332('0x1')]=0x0;});_0x59e57f['on'](a14_0x5332('0xa'),this[a14_0x5332('0xb')][a14_0x5332('0xc')](this));_0x59e57f['on']('message',this[a14_0x5332('0xd')][a14_0x5332('0xc')](this));}[a14_0x5332('0xd')](_0x15612c){const _0x3b4f90=JSON[a14_0x5332('0xe')](_0x15612c);if(_0x3b4f90['Data']==null||_0x3b4f90[a14_0x5332('0xf')]['length']==0x0){_0x15612c=JSON[a14_0x5332('0xe')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x3b4f90['Data']!=null&&_0x3b4f90[a14_0x5332('0xf')][a14_0x5332('0x10')]>0x0){this[a14_0x5332('0x11')](_0x3b4f90[a14_0x5332('0xf')][0x0]);}}[a14_0x5332('0xb')](_0x3b0c7d){console['error'](_0x3b0c7d);setTimeout(function(){this['createWebSocket']();}[a14_0x5332('0xc')](this),0x1388);}}exports[a14_0x5332('0x12')]=CountingWebSocketService;