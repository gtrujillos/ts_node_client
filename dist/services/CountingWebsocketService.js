var a13_0x4b6e=['init\x20CountingWebSocket','StationContext','settings','cameraSocket','Websocket\x20opened:','eventCounter','error','onError','bind','message','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','createWebSocket','log'];(function(_0x49f338,_0x4ec004){var _0x121003=function(_0x2a942a){while(--_0x2a942a){_0x49f338['push'](_0x49f338['shift']());}};_0x121003(++_0x4ec004);}(a13_0x4b6e,0x150));var a13_0x5593=function(_0x1befe6,_0x23be1d){_0x1befe6=_0x1befe6-0x0;var _0x3845d9=a13_0x4b6e[_0x1befe6];return _0x3845d9;};'use strict';Object[a13_0x5593('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a13_0x5593('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){this[a13_0x5593('0x2')]();console[a13_0x5593('0x3')](a13_0x5593('0x4'));}['createWebSocket'](){const _0x54d4f1=require('ws');const _0x395730=new _0x54d4f1(stationSettings_1[a13_0x5593('0x5')][a13_0x5593('0x6')][a13_0x5593('0x7')]);_0x395730['on']('open',function open(){console['log'](a13_0x5593('0x8')+stationSettings_1[a13_0x5593('0x5')][a13_0x5593('0x6')][a13_0x5593('0x7')]);this[a13_0x5593('0x9')]=0x0;});_0x395730['on'](a13_0x5593('0xa'),this[a13_0x5593('0xb')][a13_0x5593('0xc')](this));_0x395730['on'](a13_0x5593('0xd'),this['incoming'][a13_0x5593('0xc')](this));}[a13_0x5593('0xe')](_0x12ad62){const _0x287cab=JSON[a13_0x5593('0xf')](_0x12ad62);if(_0x287cab[a13_0x5593('0x10')]==null||_0x287cab['Data']['length']==0x0){_0x12ad62=JSON[a13_0x5593('0xf')](a13_0x5593('0x11'));}if(_0x287cab[a13_0x5593('0x10')]!=null&&_0x287cab[a13_0x5593('0x10')]['length']>0x0){this[a13_0x5593('0x12')](_0x287cab['Data'][0x0]);}}[a13_0x5593('0xb')](_0x4a0f53){console[a13_0x5593('0xa')](_0x4a0f53);setTimeout(function(){this[a13_0x5593('0x2')]();}['bind'](this),0x1388);}}exports[a13_0x5593('0x13')]=CountingWebSocketService;