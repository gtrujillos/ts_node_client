var a14_0x3934=['Websocket\x20opened:','error','onError','bind','incoming','parse','Data','length','CountingWebSocketService','../infrastructure/stationSettings','eventCounter','init','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open'];(function(_0x2699a9,_0x501e82){var _0x5b6c40=function(_0xa3de42){while(--_0xa3de42){_0x2699a9['push'](_0x2699a9['shift']());}};_0x5b6c40(++_0x501e82);}(a14_0x3934,0x15f));var a14_0x2e07=function(_0x5cd6ce,_0x28a61b){_0x5cd6ce=_0x5cd6ce-0x0;var _0x28c9de=a14_0x3934[_0x5cd6ce];return _0x28c9de;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x2e07('0x0'));class CountingWebSocketService{constructor(){this[a14_0x2e07('0x1')]=0x0;}[a14_0x2e07('0x2')](){this['createWebSocket']();console['log'](a14_0x2e07('0x3'));}[a14_0x2e07('0x4')](){const _0x34ad90=require('ws');const _0x3d1e54=new _0x34ad90(stationSettings_1[a14_0x2e07('0x5')][a14_0x2e07('0x6')][a14_0x2e07('0x7')]);_0x3d1e54['on'](a14_0x2e07('0x8'),function open(){console['log'](a14_0x2e07('0x9')+stationSettings_1[a14_0x2e07('0x5')]['settings'][a14_0x2e07('0x7')]);this[a14_0x2e07('0x1')]=0x0;});_0x3d1e54['on'](a14_0x2e07('0xa'),this[a14_0x2e07('0xb')][a14_0x2e07('0xc')](this));_0x3d1e54['on']('message',this['incoming']['bind'](this));}[a14_0x2e07('0xd')](_0x3ad60d){const _0x135373=JSON[a14_0x2e07('0xe')](_0x3ad60d);if(_0x135373[a14_0x2e07('0xf')]==null||_0x135373[a14_0x2e07('0xf')][a14_0x2e07('0x10')]==0x0){_0x3ad60d=JSON[a14_0x2e07('0xe')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x135373['Data']!=null&&_0x135373[a14_0x2e07('0xf')][a14_0x2e07('0x10')]>0x0){this['createEvent'](_0x135373[a14_0x2e07('0xf')][0x0]);}}[a14_0x2e07('0xb')](_0x559292){console['error'](_0x559292);setTimeout(function(){this[a14_0x2e07('0x4')]();}[a14_0x2e07('0xc')](this),0x1388);}}exports[a14_0x2e07('0x11')]=CountingWebSocketService;