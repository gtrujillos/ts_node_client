var a19_0xb810=['StationContext','settings','open','Websocket\x20opened:','eventCounter','error','onError','bind','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','defineProperty','__esModule','../infrastructure/stationSettings','instance','init','log','init\x20CountingWebSocket','createWebSocket'];(function(_0x27a591,_0x5ec66b){var _0x5e15f6=function(_0xa10317){while(--_0xa10317){_0x27a591['push'](_0x27a591['shift']());}};_0x5e15f6(++_0x5ec66b);}(a19_0xb810,0x1b0));var a19_0x32dc=function(_0x903cb0,_0x51ae10){_0x903cb0=_0x903cb0-0x0;var _0x58ff7e=a19_0xb810[_0x903cb0];return _0x58ff7e;};'use strict';Object[a19_0x32dc('0x0')](exports,a19_0x32dc('0x1'),{'value':!![]});const stationSettings_1=require(a19_0x32dc('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}static['getInstance'](){if(!CountingWebSocketService['instance']){CountingWebSocketService['instance']=new CountingWebSocketService();}return CountingWebSocketService[a19_0x32dc('0x3')];}[a19_0x32dc('0x4')](){console[a19_0x32dc('0x5')](a19_0x32dc('0x6'));this[a19_0x32dc('0x7')]();}[a19_0x32dc('0x7')](){const _0x8277c1=require('ws');const _0x1cbc01=new _0x8277c1(stationSettings_1[a19_0x32dc('0x8')][a19_0x32dc('0x9')]['cameraSocket']);_0x1cbc01['on'](a19_0x32dc('0xa'),function open(){console[a19_0x32dc('0x5')](a19_0x32dc('0xb')+stationSettings_1['StationContext'][a19_0x32dc('0x9')]['cameraSocket']);this[a19_0x32dc('0xc')]=0x0;});_0x1cbc01['on'](a19_0x32dc('0xd'),this[a19_0x32dc('0xe')][a19_0x32dc('0xf')](this));_0x1cbc01['on']('message',this[a19_0x32dc('0x10')][a19_0x32dc('0xf')](this));}[a19_0x32dc('0x10')](_0x2b7620){const _0x1f3047=JSON[a19_0x32dc('0x11')](_0x2b7620);if(_0x1f3047[a19_0x32dc('0x12')]==null||_0x1f3047[a19_0x32dc('0x12')][a19_0x32dc('0x13')]==0x0){_0x2b7620=JSON[a19_0x32dc('0x11')](a19_0x32dc('0x14'));}if(_0x1f3047[a19_0x32dc('0x12')]!=null&&_0x1f3047[a19_0x32dc('0x12')]['length']>0x0){this[a19_0x32dc('0x15')](_0x1f3047[a19_0x32dc('0x12')][0x0]);}}[a19_0x32dc('0xe')](_0x55bf5e){console[a19_0x32dc('0xd')]('Counting\x20camera\x20Websocket\x20error',_0x55bf5e);setTimeout(function(){this['createWebSocket']();}['bind'](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;