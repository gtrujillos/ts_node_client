var a14_0x49a1=['cameraSocket','open','eventCounter','error','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','onError','CountingWebSocketService','../infrastructure/stationSettings','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings'];(function(_0x73311c,_0x35dd61){var _0x3267c2=function(_0x8d1098){while(--_0x8d1098){_0x73311c['push'](_0x73311c['shift']());}};_0x3267c2(++_0x35dd61);}(a14_0x49a1,0x1c5));var a14_0x217f=function(_0x4fe7f3,_0x294a5c){_0x4fe7f3=_0x4fe7f3-0x0;var _0xebc5a8=a14_0x49a1[_0x4fe7f3];return _0xebc5a8;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x217f('0x0'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x217f('0x1')](){console[a14_0x217f('0x2')](a14_0x217f('0x3'));this['createWebSocket']();}[a14_0x217f('0x4')](){const _0x46e985=require('ws');const _0x1aaf19=new _0x46e985(stationSettings_1[a14_0x217f('0x5')][a14_0x217f('0x6')][a14_0x217f('0x7')]);_0x1aaf19['on'](a14_0x217f('0x8'),function open(){console[a14_0x217f('0x2')]('Websocket\x20opened:'+stationSettings_1[a14_0x217f('0x5')][a14_0x217f('0x6')][a14_0x217f('0x7')]);this[a14_0x217f('0x9')]=0x0;});_0x1aaf19['on'](a14_0x217f('0xa'),this['onError'][a14_0x217f('0xb')](this));_0x1aaf19['on'](a14_0x217f('0xc'),this[a14_0x217f('0xd')][a14_0x217f('0xb')](this));}[a14_0x217f('0xd')](_0xb4473){const _0x10d128=JSON[a14_0x217f('0xe')](_0xb4473);if(_0x10d128['Data']==null||_0x10d128[a14_0x217f('0xf')][a14_0x217f('0x10')]==0x0){_0xb4473=JSON[a14_0x217f('0xe')](a14_0x217f('0x11'));}if(_0x10d128['Data']!=null&&_0x10d128[a14_0x217f('0xf')][a14_0x217f('0x10')]>0x0){this['createEvent'](_0x10d128[a14_0x217f('0xf')][0x0]);}}[a14_0x217f('0x12')](_0x1e29d3){console[a14_0x217f('0xa')](_0x1e29d3);setTimeout(function(){this['createWebSocket']();}[a14_0x217f('0xb')](this),0x1388);}}exports[a14_0x217f('0x13')]=CountingWebSocketService;