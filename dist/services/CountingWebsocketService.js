var a14_0x51b0=['error','createWebSocket','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','init','init\x20CountingWebSocket','StationContext','settings','cameraSocket','Websocket\x20opened:','eventCounter','onError','bind','message','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent'];(function(_0x28503f,_0x3a94aa){var _0x37d801=function(_0x14abd0){while(--_0x14abd0){_0x28503f['push'](_0x28503f['shift']());}};_0x37d801(++_0x3a94aa);}(a14_0x51b0,0x192));var a14_0x739a=function(_0x12bbd4,_0x44ff97){_0x12bbd4=_0x12bbd4-0x0;var _0x4aa858=a14_0x51b0[_0x12bbd4];return _0x4aa858;};'use strict';Object[a14_0x739a('0x0')](exports,a14_0x739a('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x739a('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x739a('0x3')](){console['log'](a14_0x739a('0x4'));this['createWebSocket']();}['createWebSocket'](){const _0x12149d=require('ws');const _0x42b38a=new _0x12149d(stationSettings_1[a14_0x739a('0x5')][a14_0x739a('0x6')][a14_0x739a('0x7')]);_0x42b38a['on']('open',function open(){console['log'](a14_0x739a('0x8')+stationSettings_1[a14_0x739a('0x5')][a14_0x739a('0x6')][a14_0x739a('0x7')]);this[a14_0x739a('0x9')]=0x0;});_0x42b38a['on']('error',this[a14_0x739a('0xa')][a14_0x739a('0xb')](this));_0x42b38a['on'](a14_0x739a('0xc'),this['incoming'][a14_0x739a('0xb')](this));}[a14_0x739a('0xd')](_0x59e90c){const _0x43f878=JSON[a14_0x739a('0xe')](_0x59e90c);if(_0x43f878['Data']==null||_0x43f878[a14_0x739a('0xf')]['length']==0x0){_0x59e90c=JSON[a14_0x739a('0xe')](a14_0x739a('0x10'));}if(_0x43f878[a14_0x739a('0xf')]!=null&&_0x43f878['Data']['length']>0x0){this[a14_0x739a('0x11')](_0x43f878[a14_0x739a('0xf')][0x0]);}}['onError'](_0x5710d6){console[a14_0x739a('0x12')](_0x5710d6);setTimeout(function(){this[a14_0x739a('0x13')]();}['bind'](this),0x1388);}}exports[a14_0x739a('0x14')]=CountingWebSocketService;