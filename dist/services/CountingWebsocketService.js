var a14_0x2406=['incoming','bind','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','Data','createEvent','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','settings','open','Websocket\x20opened:','StationContext','cameraSocket','error','onError'];(function(_0x3c4159,_0x224e76){var _0x39e262=function(_0x2f0dc6){while(--_0x2f0dc6){_0x3c4159['push'](_0x3c4159['shift']());}};_0x39e262(++_0x224e76);}(a14_0x2406,0x16b));var a14_0x5f21=function(_0x475f39,_0x5d9d1b){_0x475f39=_0x475f39-0x0;var _0x3ecf3e=a14_0x2406[_0x475f39];return _0x3ecf3e;};'use strict';Object[a14_0x5f21('0x0')](exports,a14_0x5f21('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x5f21('0x2'));class CountingWebSocketService{constructor(){this[a14_0x5f21('0x3')]=0x0;}[a14_0x5f21('0x4')](){console[a14_0x5f21('0x5')](a14_0x5f21('0x6'));this[a14_0x5f21('0x7')]();}[a14_0x5f21('0x7')](){const _0x187a85=require('ws');const _0x22973f=new _0x187a85(stationSettings_1['StationContext'][a14_0x5f21('0x8')]['cameraSocket']);_0x22973f['on'](a14_0x5f21('0x9'),function open(){console[a14_0x5f21('0x5')](a14_0x5f21('0xa')+stationSettings_1[a14_0x5f21('0xb')][a14_0x5f21('0x8')][a14_0x5f21('0xc')]);this['eventCounter']=0x0;});_0x22973f['on'](a14_0x5f21('0xd'),this[a14_0x5f21('0xe')]['bind'](this));_0x22973f['on']('message',this[a14_0x5f21('0xf')][a14_0x5f21('0x10')](this));}[a14_0x5f21('0xf')](_0x492dd2){const _0x504e0b=JSON[a14_0x5f21('0x11')](_0x492dd2);if(_0x504e0b['Data']==null||_0x504e0b['Data']['length']==0x0){_0x492dd2=JSON[a14_0x5f21('0x11')](a14_0x5f21('0x12'));}if(_0x504e0b[a14_0x5f21('0x13')]!=null&&_0x504e0b[a14_0x5f21('0x13')]['length']>0x0){this[a14_0x5f21('0x14')](_0x504e0b[a14_0x5f21('0x13')][0x0]);}}['onError'](_0xf546b){console[a14_0x5f21('0xd')](_0xf546b);setTimeout(function(){this[a14_0x5f21('0x7')]();}[a14_0x5f21('0x10')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;