var a14_0x2f72=['settings','cameraSocket','error','bind','message','incoming','parse','Data','length','createEvent','onError','__esModule','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket','StationContext','open'];(function(_0xb2f106,_0x2585c2){var _0x4cde9f=function(_0x1350de){while(--_0x1350de){_0xb2f106['push'](_0xb2f106['shift']());}};_0x4cde9f(++_0x2585c2);}(a14_0x2f72,0x14e));var a14_0x4efa=function(_0x3f91b0,_0x326016){_0x3f91b0=_0x3f91b0-0x0;var _0x55aef5=a14_0x2f72[_0x3f91b0];return _0x55aef5;};'use strict';Object['defineProperty'](exports,a14_0x4efa('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x4efa('0x1'));class CountingWebSocketService{constructor(){this[a14_0x4efa('0x2')]=0x0;}[a14_0x4efa('0x3')](){console[a14_0x4efa('0x4')]('init\x20CountingWebSocket');this[a14_0x4efa('0x5')]();}['createWebSocket'](){const _0x4ee5af=require('ws');const _0x36dd12=new _0x4ee5af(stationSettings_1[a14_0x4efa('0x6')]['settings']['cameraSocket']);_0x36dd12['on'](a14_0x4efa('0x7'),function open(){console[a14_0x4efa('0x4')]('Websocket\x20opened:'+stationSettings_1[a14_0x4efa('0x6')][a14_0x4efa('0x8')][a14_0x4efa('0x9')]);this[a14_0x4efa('0x2')]=0x0;});_0x36dd12['on'](a14_0x4efa('0xa'),this['onError'][a14_0x4efa('0xb')](this));_0x36dd12['on'](a14_0x4efa('0xc'),this[a14_0x4efa('0xd')][a14_0x4efa('0xb')](this));}[a14_0x4efa('0xd')](_0x550e2b){const _0x2b545e=JSON[a14_0x4efa('0xe')](_0x550e2b);if(_0x2b545e[a14_0x4efa('0xf')]==null||_0x2b545e[a14_0x4efa('0xf')][a14_0x4efa('0x10')]==0x0){_0x550e2b=JSON[a14_0x4efa('0xe')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x2b545e[a14_0x4efa('0xf')]!=null&&_0x2b545e['Data'][a14_0x4efa('0x10')]>0x0){this[a14_0x4efa('0x11')](_0x2b545e[a14_0x4efa('0xf')][0x0]);}}[a14_0x4efa('0x12')](_0x5eb1ab){console[a14_0x4efa('0xa')](_0x5eb1ab);setTimeout(function(){this['createWebSocket']();}[a14_0x4efa('0xb')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;