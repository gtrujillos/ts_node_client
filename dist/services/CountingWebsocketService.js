var a14_0x4e01=['CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','log','init\x20CountingWebSocket','createWebSocket','StationContext','cameraSocket','open','Websocket\x20opened:','settings','error','onError','bind','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length'];(function(_0x53f9b0,_0x49ba4c){var _0x1e9d01=function(_0x3c2224){while(--_0x3c2224){_0x53f9b0['push'](_0x53f9b0['shift']());}};_0x1e9d01(++_0x49ba4c);}(a14_0x4e01,0x127));var a14_0x5443=function(_0x7570ca,_0x4d4c1a){_0x7570ca=_0x7570ca-0x0;var _0x2f95c1=a14_0x4e01[_0x7570ca];return _0x2f95c1;};'use strict';Object[a14_0x5443('0x0')](exports,a14_0x5443('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x5443('0x2'));class CountingWebSocketService{constructor(){this[a14_0x5443('0x3')]=0x0;}['init'](){console[a14_0x5443('0x4')](a14_0x5443('0x5'));this[a14_0x5443('0x6')]();}[a14_0x5443('0x6')](){const _0x114d27=require('ws');const _0x5a4408=new _0x114d27(stationSettings_1[a14_0x5443('0x7')]['settings'][a14_0x5443('0x8')]);_0x5a4408['on'](a14_0x5443('0x9'),function open(){console[a14_0x5443('0x4')](a14_0x5443('0xa')+stationSettings_1['StationContext'][a14_0x5443('0xb')]['cameraSocket']);this[a14_0x5443('0x3')]=0x0;});_0x5a4408['on'](a14_0x5443('0xc'),this[a14_0x5443('0xd')][a14_0x5443('0xe')](this));_0x5a4408['on']('message',this[a14_0x5443('0xf')][a14_0x5443('0xe')](this));}['incoming'](_0x4aa451){const _0x3de3cd=JSON[a14_0x5443('0x10')](_0x4aa451);if(_0x3de3cd[a14_0x5443('0x11')]==null||_0x3de3cd[a14_0x5443('0x11')]['length']==0x0){_0x4aa451=JSON[a14_0x5443('0x10')](a14_0x5443('0x12'));}if(_0x3de3cd['Data']!=null&&_0x3de3cd['Data'][a14_0x5443('0x13')]>0x0){this['createEvent'](_0x3de3cd[a14_0x5443('0x11')][0x0]);}}['onError'](_0x115242){console['error'](_0x115242);setTimeout(function(){this[a14_0x5443('0x6')]();}['bind'](this),0x1388);}}exports[a14_0x5443('0x14')]=CountingWebSocketService;