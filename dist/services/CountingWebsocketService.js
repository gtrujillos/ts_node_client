var a16_0x12f0=['Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','Counting\x20camera\x20Websocket\x20error','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','error','onError','bind','incoming'];(function(_0x51236b,_0x2a4ed6){var _0x218049=function(_0x179d36){while(--_0x179d36){_0x51236b['push'](_0x51236b['shift']());}};_0x218049(++_0x2a4ed6);}(a16_0x12f0,0x1c0));var a16_0x276a=function(_0x11baa7,_0x97982){_0x11baa7=_0x11baa7-0x0;var _0x572646=a16_0x12f0[_0x11baa7];return _0x572646;};'use strict';Object[a16_0x276a('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a16_0x276a('0x1'));class CountingWebSocketService{constructor(){this[a16_0x276a('0x2')]=0x0;}['init'](){console['log'](a16_0x276a('0x3'));this[a16_0x276a('0x4')]();}[a16_0x276a('0x4')](){const _0x2720a4=require('ws');const _0x1ddaf1=new _0x2720a4(stationSettings_1[a16_0x276a('0x5')][a16_0x276a('0x6')][a16_0x276a('0x7')]);_0x1ddaf1['on'](a16_0x276a('0x8'),function open(){console['log'](a16_0x276a('0x9')+stationSettings_1['StationContext'][a16_0x276a('0x6')]['cameraSocket']);this['eventCounter']=0x0;});_0x1ddaf1['on'](a16_0x276a('0xa'),this[a16_0x276a('0xb')][a16_0x276a('0xc')](this));_0x1ddaf1['on']('message',this[a16_0x276a('0xd')][a16_0x276a('0xc')](this));}[a16_0x276a('0xd')](_0x178efb){const _0x1845b3=JSON['parse'](_0x178efb);if(_0x1845b3[a16_0x276a('0xe')]==null||_0x1845b3[a16_0x276a('0xe')][a16_0x276a('0xf')]==0x0){_0x178efb=JSON[a16_0x276a('0x10')](a16_0x276a('0x11'));}if(_0x1845b3[a16_0x276a('0xe')]!=null&&_0x1845b3[a16_0x276a('0xe')][a16_0x276a('0xf')]>0x0){this[a16_0x276a('0x12')](_0x1845b3[a16_0x276a('0xe')][0x0]);}}[a16_0x276a('0xb')](_0x114866){console[a16_0x276a('0xa')](a16_0x276a('0x13'),_0x114866);setTimeout(function(){this['createWebSocket']();}[a16_0x276a('0xc')](this),0x1388);}}exports[a16_0x276a('0x14')]=CountingWebSocketService;