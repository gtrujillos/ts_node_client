var a14_0x3bff=['cameraSocket','open','log','Websocket\x20opened:','settings','error','onError','bind','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','CountingWebSocketService','__esModule','../infrastructure/stationSettings','eventCounter','init','init\x20CountingWebSocket','createWebSocket','StationContext'];(function(_0xe8e51,_0x51d7c3){var _0x569eee=function(_0x34971d){while(--_0x34971d){_0xe8e51['push'](_0xe8e51['shift']());}};_0x569eee(++_0x51d7c3);}(a14_0x3bff,0xf5));var a14_0x5eaa=function(_0x2e2b10,_0x4914cd){_0x2e2b10=_0x2e2b10-0x0;var _0x5480ce=a14_0x3bff[_0x2e2b10];return _0x5480ce;};'use strict';Object['defineProperty'](exports,a14_0x5eaa('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x5eaa('0x1'));class CountingWebSocketService{constructor(){this[a14_0x5eaa('0x2')]=0x0;}[a14_0x5eaa('0x3')](){this['createWebSocket']();console['log'](a14_0x5eaa('0x4'));}[a14_0x5eaa('0x5')](){const _0x57db2a=require('ws');const _0x232833=new _0x57db2a(stationSettings_1[a14_0x5eaa('0x6')]['settings'][a14_0x5eaa('0x7')]);_0x232833['on'](a14_0x5eaa('0x8'),function open(){console[a14_0x5eaa('0x9')](a14_0x5eaa('0xa')+stationSettings_1[a14_0x5eaa('0x6')][a14_0x5eaa('0xb')][a14_0x5eaa('0x7')]);this['eventCounter']=0x0;});_0x232833['on'](a14_0x5eaa('0xc'),this[a14_0x5eaa('0xd')][a14_0x5eaa('0xe')](this));_0x232833['on']('message',this[a14_0x5eaa('0xf')][a14_0x5eaa('0xe')](this));}[a14_0x5eaa('0xf')](_0x2cd6cb){const _0x890fab=JSON[a14_0x5eaa('0x10')](_0x2cd6cb);if(_0x890fab[a14_0x5eaa('0x11')]==null||_0x890fab['Data']['length']==0x0){_0x2cd6cb=JSON[a14_0x5eaa('0x10')](a14_0x5eaa('0x12'));}if(_0x890fab['Data']!=null&&_0x890fab[a14_0x5eaa('0x11')][a14_0x5eaa('0x13')]>0x0){this['createEvent'](_0x890fab[a14_0x5eaa('0x11')][0x0]);}}['onError'](_0x7b7ea2){console[a14_0x5eaa('0xc')](_0x7b7ea2);setTimeout(function(){this[a14_0x5eaa('0x5')]();}['bind'](this),0x1388);}}exports[a14_0x5eaa('0x14')]=CountingWebSocketService;