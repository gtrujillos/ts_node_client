var a14_0x53e2=['Websocket\x20opened:','eventCounter','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','cameraSocket'];(function(_0x4a68ae,_0x3381fb){var _0xc8aaa0=function(_0x538f09){while(--_0x538f09){_0x4a68ae['push'](_0x4a68ae['shift']());}};_0xc8aaa0(++_0x3381fb);}(a14_0x53e2,0x83));var a14_0x6976=function(_0x2bba7a,_0x3bae81){_0x2bba7a=_0x2bba7a-0x0;var _0x49ee86=a14_0x53e2[_0x2bba7a];return _0x49ee86;};'use strict';Object[a14_0x6976('0x0')](exports,a14_0x6976('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x6976('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x6976('0x3')](){console[a14_0x6976('0x4')](a14_0x6976('0x5'));this[a14_0x6976('0x6')]();}[a14_0x6976('0x6')](){const _0x33973a=require('ws');const _0x13029a=new _0x33973a(stationSettings_1[a14_0x6976('0x7')]['settings'][a14_0x6976('0x8')]);_0x13029a['on']('open',function open(){console[a14_0x6976('0x4')](a14_0x6976('0x9')+stationSettings_1['StationContext']['settings']['cameraSocket']);this[a14_0x6976('0xa')]=0x0;});_0x13029a['on']('error',this['onError'][a14_0x6976('0xb')](this));_0x13029a['on'](a14_0x6976('0xc'),this[a14_0x6976('0xd')][a14_0x6976('0xb')](this));}['incoming'](_0x42ee02){const _0x41e7fe=JSON[a14_0x6976('0xe')](_0x42ee02);if(_0x41e7fe[a14_0x6976('0xf')]==null||_0x41e7fe[a14_0x6976('0xf')][a14_0x6976('0x10')]==0x0){_0x42ee02=JSON[a14_0x6976('0xe')](a14_0x6976('0x11'));}if(_0x41e7fe[a14_0x6976('0xf')]!=null&&_0x41e7fe[a14_0x6976('0xf')]['length']>0x0){this[a14_0x6976('0x12')](_0x41e7fe[a14_0x6976('0xf')][0x0]);}}['onError'](_0x539386){console['error'](_0x539386);setTimeout(function(){this['createWebSocket']();}[a14_0x6976('0xb')](this),0x1388);}}exports[a14_0x6976('0x13')]=CountingWebSocketService;