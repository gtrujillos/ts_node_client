var a16_0x3674=['{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','createEvent','error','defineProperty','__esModule','../infrastructure/stationSettings','init\x20CountingWebSocket','createWebSocket','StationContext','cameraSocket','log','settings','eventCounter','onError','bind','incoming','parse','Data'];(function(_0x21d0a5,_0x24b35b){var _0x48a27d=function(_0x32f71f){while(--_0x32f71f){_0x21d0a5['push'](_0x21d0a5['shift']());}};_0x48a27d(++_0x24b35b);}(a16_0x3674,0x134));var a16_0x1979=function(_0x5b9ab3,_0xc33cc7){_0x5b9ab3=_0x5b9ab3-0x0;var _0x30b4b0=a16_0x3674[_0x5b9ab3];return _0x30b4b0;};'use strict';Object[a16_0x1979('0x0')](exports,a16_0x1979('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x1979('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){console['log'](a16_0x1979('0x3'));this[a16_0x1979('0x4')]();}[a16_0x1979('0x4')](){const _0x4696a2=require('ws');const _0x464e49=new _0x4696a2(stationSettings_1[a16_0x1979('0x5')]['settings'][a16_0x1979('0x6')]);_0x464e49['on']('open',function open(){console[a16_0x1979('0x7')]('Websocket\x20opened:'+stationSettings_1[a16_0x1979('0x5')][a16_0x1979('0x8')][a16_0x1979('0x6')]);this[a16_0x1979('0x9')]=0x0;});_0x464e49['on']('error',this[a16_0x1979('0xa')][a16_0x1979('0xb')](this));_0x464e49['on']('message',this['incoming'][a16_0x1979('0xb')](this));}[a16_0x1979('0xc')](_0x5e5b46){const _0x485a24=JSON[a16_0x1979('0xd')](_0x5e5b46);if(_0x485a24[a16_0x1979('0xe')]==null||_0x485a24[a16_0x1979('0xe')]['length']==0x0){_0x5e5b46=JSON['parse'](a16_0x1979('0xf'));}if(_0x485a24[a16_0x1979('0xe')]!=null&&_0x485a24['Data'][a16_0x1979('0x10')]>0x0){this[a16_0x1979('0x11')](_0x485a24[a16_0x1979('0xe')][0x0]);}}[a16_0x1979('0xa')](_0x325608){console[a16_0x1979('0x12')](_0x325608);setTimeout(function(){this[a16_0x1979('0x4')]();}['bind'](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;