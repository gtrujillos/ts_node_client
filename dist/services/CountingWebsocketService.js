var a14_0x5bc9=['createEvent','defineProperty','../infrastructure/stationSettings','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open','error','bind','message','incoming','Data','length'];(function(_0x1b1461,_0x22d2cb){var _0x5e21e3=function(_0x34675e){while(--_0x34675e){_0x1b1461['push'](_0x1b1461['shift']());}};_0x5e21e3(++_0x22d2cb);}(a14_0x5bc9,0x10f));var a14_0x2fb7=function(_0x507d81,_0x55c3cd){_0x507d81=_0x507d81-0x0;var _0x3cbb18=a14_0x5bc9[_0x507d81];return _0x3cbb18;};'use strict';Object[a14_0x2fb7('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x2fb7('0x1'));class CountingWebSocketService{constructor(){this[a14_0x2fb7('0x2')]=0x0;}[a14_0x2fb7('0x3')](){console[a14_0x2fb7('0x4')](a14_0x2fb7('0x5'));this[a14_0x2fb7('0x6')]();}[a14_0x2fb7('0x6')](){const _0x29292d=require('ws');const _0xa327f7=new _0x29292d(stationSettings_1[a14_0x2fb7('0x7')][a14_0x2fb7('0x8')][a14_0x2fb7('0x9')]);_0xa327f7['on'](a14_0x2fb7('0xa'),function open(){console['log']('Websocket\x20opened:'+stationSettings_1[a14_0x2fb7('0x7')][a14_0x2fb7('0x8')][a14_0x2fb7('0x9')]);this[a14_0x2fb7('0x2')]=0x0;});_0xa327f7['on'](a14_0x2fb7('0xb'),this['onError'][a14_0x2fb7('0xc')](this));_0xa327f7['on'](a14_0x2fb7('0xd'),this[a14_0x2fb7('0xe')]['bind'](this));}[a14_0x2fb7('0xe')](_0xa2751d){const _0x3b084c=JSON['parse'](_0xa2751d);if(_0x3b084c[a14_0x2fb7('0xf')]==null||_0x3b084c['Data'][a14_0x2fb7('0x10')]==0x0){_0xa2751d=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x3b084c[a14_0x2fb7('0xf')]!=null&&_0x3b084c['Data'][a14_0x2fb7('0x10')]>0x0){this[a14_0x2fb7('0x11')](_0x3b084c[a14_0x2fb7('0xf')][0x0]);}}['onError'](_0x1f1d0e){console[a14_0x2fb7('0xb')](_0x1f1d0e);setTimeout(function(){this['createWebSocket']();}[a14_0x2fb7('0xc')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;