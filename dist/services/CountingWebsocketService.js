var a14_0x2a91=['__esModule','eventCounter','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open','log','Websocket\x20opened:','error','onError','message','incoming','bind','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}'];(function(_0x4eaa9c,_0xc1ab08){var _0x17db83=function(_0x1499db){while(--_0x1499db){_0x4eaa9c['push'](_0x4eaa9c['shift']());}};_0x17db83(++_0xc1ab08);}(a14_0x2a91,0xf7));var a14_0x4382=function(_0x3483cb,_0xde564a){_0x3483cb=_0x3483cb-0x0;var _0x425962=a14_0x2a91[_0x3483cb];return _0x425962;};'use strict';Object['defineProperty'](exports,a14_0x4382('0x0'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x4382('0x1')]=0x0;}['init'](){console['log'](a14_0x4382('0x2'));this[a14_0x4382('0x3')]();}['createWebSocket'](){const _0xbce521=require('ws');const _0x18286c=new _0xbce521(stationSettings_1[a14_0x4382('0x4')][a14_0x4382('0x5')][a14_0x4382('0x6')]);_0x18286c['on'](a14_0x4382('0x7'),function open(){console[a14_0x4382('0x8')](a14_0x4382('0x9')+stationSettings_1[a14_0x4382('0x4')][a14_0x4382('0x5')]['cameraSocket']);this[a14_0x4382('0x1')]=0x0;});_0x18286c['on'](a14_0x4382('0xa'),this[a14_0x4382('0xb')]['bind'](this));_0x18286c['on'](a14_0x4382('0xc'),this[a14_0x4382('0xd')][a14_0x4382('0xe')](this));}['incoming'](_0x24f2e7){const _0x255125=JSON[a14_0x4382('0xf')](_0x24f2e7);if(_0x255125[a14_0x4382('0x10')]==null||_0x255125[a14_0x4382('0x10')][a14_0x4382('0x11')]==0x0){_0x24f2e7=JSON[a14_0x4382('0xf')](a14_0x4382('0x12'));}if(_0x255125[a14_0x4382('0x10')]!=null&&_0x255125[a14_0x4382('0x10')][a14_0x4382('0x11')]>0x0){this['createEvent'](_0x255125['Data'][0x0]);}}[a14_0x4382('0xb')](_0x28f756){console[a14_0x4382('0xa')](_0x28f756);setTimeout(function(){this[a14_0x4382('0x3')]();}[a14_0x4382('0xe')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;