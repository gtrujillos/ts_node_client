var a16_0x3a7c=['error','onError','message','incoming','Data','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','init','createWebSocket','settings','cameraSocket','open','Websocket\x20opened:','StationContext','eventCounter'];(function(_0x230165,_0x29895c){var _0x31742b=function(_0x1f2570){while(--_0x1f2570){_0x230165['push'](_0x230165['shift']());}};_0x31742b(++_0x29895c);}(a16_0x3a7c,0xb4));var a16_0x2165=function(_0x27c535,_0x1c493a){_0x27c535=_0x27c535-0x0;var _0x1b963=a16_0x3a7c[_0x27c535];return _0x1b963;};'use strict';Object[a16_0x2165('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a16_0x2165('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a16_0x2165('0x2')](){console['log']('init\x20CountingWebSocket');this[a16_0x2165('0x3')]();}['createWebSocket'](){const _0x335438=require('ws');const _0x49b0dd=new _0x335438(stationSettings_1['StationContext'][a16_0x2165('0x4')][a16_0x2165('0x5')]);_0x49b0dd['on'](a16_0x2165('0x6'),function open(){console['log'](a16_0x2165('0x7')+stationSettings_1[a16_0x2165('0x8')][a16_0x2165('0x4')]['cameraSocket']);this[a16_0x2165('0x9')]=0x0;});_0x49b0dd['on'](a16_0x2165('0xa'),this[a16_0x2165('0xb')]['bind'](this));_0x49b0dd['on'](a16_0x2165('0xc'),this[a16_0x2165('0xd')]['bind'](this));}[a16_0x2165('0xd')](_0x4f25bf){const _0x174ff2=JSON['parse'](_0x4f25bf);if(_0x174ff2[a16_0x2165('0xe')]==null||_0x174ff2['Data']['length']==0x0){_0x4f25bf=JSON[a16_0x2165('0xf')](a16_0x2165('0x10'));}if(_0x174ff2[a16_0x2165('0xe')]!=null&&_0x174ff2[a16_0x2165('0xe')]['length']>0x0){this[a16_0x2165('0x11')](_0x174ff2[a16_0x2165('0xe')][0x0]);}}[a16_0x2165('0xb')](_0x5c4370){console[a16_0x2165('0xa')](_0x5c4370);setTimeout(function(){this[a16_0x2165('0x3')]();}['bind'](this),0x1388);}}exports[a16_0x2165('0x12')]=CountingWebSocketService;