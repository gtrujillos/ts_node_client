var a16_0x5f52=['parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','log','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','StationContext','error','onError','bind','message','incoming'];(function(_0x5e4102,_0x58b51a){var _0x1c4968=function(_0x1df5bd){while(--_0x1df5bd){_0x5e4102['push'](_0x5e4102['shift']());}};_0x1c4968(++_0x58b51a);}(a16_0x5f52,0x1a8));var a16_0x2203=function(_0x342a6a,_0x54e791){_0x342a6a=_0x342a6a-0x0;var _0x25dd7f=a16_0x5f52[_0x342a6a];return _0x25dd7f;};'use strict';Object[a16_0x2203('0x0')](exports,a16_0x2203('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x2203('0x2'));class CountingWebSocketService{constructor(){this[a16_0x2203('0x3')]=0x0;}['init'](){console[a16_0x2203('0x4')](a16_0x2203('0x5'));this[a16_0x2203('0x6')]();}[a16_0x2203('0x6')](){const _0x482ed3=require('ws');const _0x142730=new _0x482ed3(stationSettings_1['StationContext'][a16_0x2203('0x7')][a16_0x2203('0x8')]);_0x142730['on'](a16_0x2203('0x9'),function open(){console[a16_0x2203('0x4')]('Websocket\x20opened:'+stationSettings_1[a16_0x2203('0xa')][a16_0x2203('0x7')][a16_0x2203('0x8')]);this['eventCounter']=0x0;});_0x142730['on'](a16_0x2203('0xb'),this[a16_0x2203('0xc')][a16_0x2203('0xd')](this));_0x142730['on'](a16_0x2203('0xe'),this[a16_0x2203('0xf')][a16_0x2203('0xd')](this));}[a16_0x2203('0xf')](_0x5b446f){const _0x3fda18=JSON[a16_0x2203('0x10')](_0x5b446f);if(_0x3fda18['Data']==null||_0x3fda18[a16_0x2203('0x11')][a16_0x2203('0x12')]==0x0){_0x5b446f=JSON[a16_0x2203('0x10')](a16_0x2203('0x13'));}if(_0x3fda18['Data']!=null&&_0x3fda18[a16_0x2203('0x11')][a16_0x2203('0x12')]>0x0){this[a16_0x2203('0x14')](_0x3fda18['Data'][0x0]);}}[a16_0x2203('0xc')](_0x12b2b9){console['error'](_0x12b2b9);setTimeout(function(){this[a16_0x2203('0x6')]();}[a16_0x2203('0xd')](this),0x1388);}}exports[a16_0x2203('0x15')]=CountingWebSocketService;