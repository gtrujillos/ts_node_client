var a14_0x47dc=['eventCounter','init','init\x20CountingWebSocket','createWebSocket','StationContext','settings','log','cameraSocket','error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings'];(function(_0x2fbfef,_0x19b0f3){var _0x3393cb=function(_0x10675b){while(--_0x10675b){_0x2fbfef['push'](_0x2fbfef['shift']());}};_0x3393cb(++_0x19b0f3);}(a14_0x47dc,0x177));var a14_0x1627=function(_0x51f1f3,_0x104a21){_0x51f1f3=_0x51f1f3-0x0;var _0x52790a=a14_0x47dc[_0x51f1f3];return _0x52790a;};'use strict';Object[a14_0x1627('0x0')](exports,a14_0x1627('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x1627('0x2'));class CountingWebSocketService{constructor(){this[a14_0x1627('0x3')]=0x0;}[a14_0x1627('0x4')](){console['log'](a14_0x1627('0x5'));this[a14_0x1627('0x6')]();}[a14_0x1627('0x6')](){const _0x317158=require('ws');const _0xafeb8=new _0x317158(stationSettings_1[a14_0x1627('0x7')][a14_0x1627('0x8')]['cameraSocket']);_0xafeb8['on']('open',function open(){console[a14_0x1627('0x9')]('Websocket\x20opened:'+stationSettings_1[a14_0x1627('0x7')]['settings'][a14_0x1627('0xa')]);this['eventCounter']=0x0;});_0xafeb8['on'](a14_0x1627('0xb'),this[a14_0x1627('0xc')][a14_0x1627('0xd')](this));_0xafeb8['on'](a14_0x1627('0xe'),this[a14_0x1627('0xf')]['bind'](this));}[a14_0x1627('0xf')](_0x41b161){const _0x1f237e=JSON[a14_0x1627('0x10')](_0x41b161);if(_0x1f237e[a14_0x1627('0x11')]==null||_0x1f237e[a14_0x1627('0x11')][a14_0x1627('0x12')]==0x0){_0x41b161=JSON[a14_0x1627('0x10')](a14_0x1627('0x13'));}if(_0x1f237e[a14_0x1627('0x11')]!=null&&_0x1f237e[a14_0x1627('0x11')][a14_0x1627('0x12')]>0x0){this['createEvent'](_0x1f237e['Data'][0x0]);}}[a14_0x1627('0xc')](_0x5bf7df){console[a14_0x1627('0xb')](_0x5bf7df);setTimeout(function(){this[a14_0x1627('0x6')]();}[a14_0x1627('0xd')](this),0x1388);}}exports[a14_0x1627('0x14')]=CountingWebSocketService;