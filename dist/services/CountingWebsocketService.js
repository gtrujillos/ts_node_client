var a14_0x3eb3=['error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','__esModule','../infrastructure/stationSettings','eventCounter','init','createWebSocket','settings','open','log','Websocket\x20opened:','StationContext','cameraSocket'];(function(_0x1cebfe,_0xe89c32){var _0x4567e4=function(_0x41cfa3){while(--_0x41cfa3){_0x1cebfe['push'](_0x1cebfe['shift']());}};_0x4567e4(++_0xe89c32);}(a14_0x3eb3,0xa5));var a14_0x2a21=function(_0x427c6f,_0x517e3f){_0x427c6f=_0x427c6f-0x0;var _0x533658=a14_0x3eb3[_0x427c6f];return _0x533658;};'use strict';Object['defineProperty'](exports,a14_0x2a21('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x2a21('0x1'));class CountingWebSocketService{constructor(){this[a14_0x2a21('0x2')]=0x0;}[a14_0x2a21('0x3')](){console['log']('init\x20CountingWebSocket');this[a14_0x2a21('0x4')]();}['createWebSocket'](){const _0x1a505a=require('ws');const _0xaae9e4=new _0x1a505a(stationSettings_1['StationContext'][a14_0x2a21('0x5')]['cameraSocket']);_0xaae9e4['on'](a14_0x2a21('0x6'),function open(){console[a14_0x2a21('0x7')](a14_0x2a21('0x8')+stationSettings_1[a14_0x2a21('0x9')][a14_0x2a21('0x5')][a14_0x2a21('0xa')]);this[a14_0x2a21('0x2')]=0x0;});_0xaae9e4['on'](a14_0x2a21('0xb'),this[a14_0x2a21('0xc')][a14_0x2a21('0xd')](this));_0xaae9e4['on'](a14_0x2a21('0xe'),this[a14_0x2a21('0xf')]['bind'](this));}[a14_0x2a21('0xf')](_0x54cd03){const _0xe5da07=JSON[a14_0x2a21('0x10')](_0x54cd03);if(_0xe5da07['Data']==null||_0xe5da07[a14_0x2a21('0x11')][a14_0x2a21('0x12')]==0x0){_0x54cd03=JSON[a14_0x2a21('0x10')](a14_0x2a21('0x13'));}if(_0xe5da07[a14_0x2a21('0x11')]!=null&&_0xe5da07[a14_0x2a21('0x11')][a14_0x2a21('0x12')]>0x0){this[a14_0x2a21('0x14')](_0xe5da07['Data'][0x0]);}}[a14_0x2a21('0xc')](_0x4a49da){console[a14_0x2a21('0xb')](_0x4a49da);setTimeout(function(){this[a14_0x2a21('0x4')]();}[a14_0x2a21('0xd')](this),0x1388);}}exports[a14_0x2a21('0x15')]=CountingWebSocketService;