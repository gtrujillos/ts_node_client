var a13_0x7e00=['incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','CountingWebSocketService','__esModule','../infrastructure/stationSettings','eventCounter','createWebSocket','log','init\x20CountingWebSocket','cameraSocket','open','Websocket\x20opened:','settings','error','onError','bind','message'];(function(_0xab0334,_0x48b93b){var _0x50519a=function(_0x496456){while(--_0x496456){_0xab0334['push'](_0xab0334['shift']());}};_0x50519a(++_0x48b93b);}(a13_0x7e00,0xe2));var a13_0x1e17=function(_0x3a39d3,_0x148059){_0x3a39d3=_0x3a39d3-0x0;var _0x28b273=a13_0x7e00[_0x3a39d3];return _0x28b273;};'use strict';Object['defineProperty'](exports,a13_0x1e17('0x0'),{'value':!![]});const stationSettings_1=require(a13_0x1e17('0x1'));class CountingWebSocketService{constructor(){this[a13_0x1e17('0x2')]=0x0;}['init'](){this[a13_0x1e17('0x3')]();console[a13_0x1e17('0x4')](a13_0x1e17('0x5'));}[a13_0x1e17('0x3')](){const _0x34fdb9=require('ws');const _0x2f22d0=new _0x34fdb9(stationSettings_1['StationContext']['settings'][a13_0x1e17('0x6')]);_0x2f22d0['on'](a13_0x1e17('0x7'),function open(){console[a13_0x1e17('0x4')](a13_0x1e17('0x8')+stationSettings_1['StationContext'][a13_0x1e17('0x9')][a13_0x1e17('0x6')]);this['eventCounter']=0x0;});_0x2f22d0['on'](a13_0x1e17('0xa'),this[a13_0x1e17('0xb')][a13_0x1e17('0xc')](this));_0x2f22d0['on'](a13_0x1e17('0xd'),this[a13_0x1e17('0xe')][a13_0x1e17('0xc')](this));}[a13_0x1e17('0xe')](_0xf026a6){const _0xd577af=JSON[a13_0x1e17('0xf')](_0xf026a6);if(_0xd577af[a13_0x1e17('0x10')]==null||_0xd577af[a13_0x1e17('0x10')][a13_0x1e17('0x11')]==0x0){_0xf026a6=JSON[a13_0x1e17('0xf')](a13_0x1e17('0x12'));}if(_0xd577af[a13_0x1e17('0x10')]!=null&&_0xd577af[a13_0x1e17('0x10')]['length']>0x0){this['createEvent'](_0xd577af[a13_0x1e17('0x10')][0x0]);}}[a13_0x1e17('0xb')](_0x5df61d){console[a13_0x1e17('0xa')](_0x5df61d);setTimeout(function(){this['createWebSocket']();}[a13_0x1e17('0xc')](this),0x1388);}}exports[a13_0x1e17('0x13')]=CountingWebSocketService;