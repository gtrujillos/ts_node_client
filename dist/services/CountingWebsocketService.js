var a13_0x206f=['log','settings','cameraSocket','open','error','onError','bind','message','incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','createWebSocket'];(function(_0x329851,_0x56acf1){var _0x27844c=function(_0x569a74){while(--_0x569a74){_0x329851['push'](_0x329851['shift']());}};_0x27844c(++_0x56acf1);}(a13_0x206f,0x163));var a13_0x26e6=function(_0x25f7d2,_0x2e6bd6){_0x25f7d2=_0x25f7d2-0x0;var _0x377c4c=a13_0x206f[_0x25f7d2];return _0x377c4c;};'use strict';Object[a13_0x26e6('0x0')](exports,a13_0x26e6('0x1'),{'value':!![]});const stationSettings_1=require(a13_0x26e6('0x2'));class CountingWebSocketService{constructor(){this[a13_0x26e6('0x3')]=0x0;}[a13_0x26e6('0x4')](){this[a13_0x26e6('0x5')]();console[a13_0x26e6('0x6')]('init\x20CountingWebSocket');}[a13_0x26e6('0x5')](){const _0x4152e4=require('ws');const _0xda5a22=new _0x4152e4(stationSettings_1['StationContext'][a13_0x26e6('0x7')][a13_0x26e6('0x8')]);_0xda5a22['on'](a13_0x26e6('0x9'),function open(){console[a13_0x26e6('0x6')]('Websocket\x20opened:'+stationSettings_1['StationContext'][a13_0x26e6('0x7')][a13_0x26e6('0x8')]);this[a13_0x26e6('0x3')]=0x0;});_0xda5a22['on'](a13_0x26e6('0xa'),this[a13_0x26e6('0xb')][a13_0x26e6('0xc')](this));_0xda5a22['on'](a13_0x26e6('0xd'),this[a13_0x26e6('0xe')][a13_0x26e6('0xc')](this));}[a13_0x26e6('0xe')](_0x238e4b){const _0x3460fa=JSON['parse'](_0x238e4b);if(_0x3460fa[a13_0x26e6('0xf')]==null||_0x3460fa['Data'][a13_0x26e6('0x10')]==0x0){_0x238e4b=JSON[a13_0x26e6('0x11')](a13_0x26e6('0x12'));}if(_0x3460fa[a13_0x26e6('0xf')]!=null&&_0x3460fa[a13_0x26e6('0xf')]['length']>0x0){this['createEvent'](_0x3460fa[a13_0x26e6('0xf')][0x0]);}}[a13_0x26e6('0xb')](_0x3f4944){console[a13_0x26e6('0xa')](_0x3f4944);setTimeout(function(){this['createWebSocket']();}[a13_0x26e6('0xc')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;