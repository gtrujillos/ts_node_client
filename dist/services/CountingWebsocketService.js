var a14_0x50e5=['init\x20CountingWebSocket','createWebSocket','StationContext','settings','open','log','error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init'];(function(_0x42fb84,_0x4d6ed3){var _0x58fddf=function(_0x113c3c){while(--_0x113c3c){_0x42fb84['push'](_0x42fb84['shift']());}};_0x58fddf(++_0x4d6ed3);}(a14_0x50e5,0x74));var a14_0x25b7=function(_0x4d697b,_0x412f5d){_0x4d697b=_0x4d697b-0x0;var _0x13a220=a14_0x50e5[_0x4d697b];return _0x13a220;};'use strict';Object[a14_0x25b7('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x25b7('0x1'));class CountingWebSocketService{constructor(){this[a14_0x25b7('0x2')]=0x0;}[a14_0x25b7('0x3')](){console['log'](a14_0x25b7('0x4'));this[a14_0x25b7('0x5')]();}[a14_0x25b7('0x5')](){const _0x3d7d15=require('ws');const _0x38bfb1=new _0x3d7d15(stationSettings_1[a14_0x25b7('0x6')][a14_0x25b7('0x7')]['cameraSocket']);_0x38bfb1['on'](a14_0x25b7('0x8'),function open(){console[a14_0x25b7('0x9')]('Websocket\x20opened:'+stationSettings_1['StationContext'][a14_0x25b7('0x7')]['cameraSocket']);this[a14_0x25b7('0x2')]=0x0;});_0x38bfb1['on'](a14_0x25b7('0xa'),this[a14_0x25b7('0xb')][a14_0x25b7('0xc')](this));_0x38bfb1['on'](a14_0x25b7('0xd'),this[a14_0x25b7('0xe')][a14_0x25b7('0xc')](this));}['incoming'](_0x2c4628){const _0x3f7e2b=JSON[a14_0x25b7('0xf')](_0x2c4628);if(_0x3f7e2b[a14_0x25b7('0x10')]==null||_0x3f7e2b['Data'][a14_0x25b7('0x11')]==0x0){_0x2c4628=JSON[a14_0x25b7('0xf')](a14_0x25b7('0x12'));}if(_0x3f7e2b['Data']!=null&&_0x3f7e2b['Data'][a14_0x25b7('0x11')]>0x0){this['createEvent'](_0x3f7e2b[a14_0x25b7('0x10')][0x0]);}}[a14_0x25b7('0xb')](_0xf34cc6){console[a14_0x25b7('0xa')](_0xf34cc6);setTimeout(function(){this[a14_0x25b7('0x5')]();}[a14_0x25b7('0xc')](this),0x1388);}}exports[a14_0x25b7('0x13')]=CountingWebSocketService;