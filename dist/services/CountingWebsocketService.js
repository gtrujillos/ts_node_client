var a13_0x324c=['parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','createWebSocket','init\x20CountingWebSocket','StationContext','settings','cameraSocket','open','error','onError','bind','incoming'];(function(_0x31207a,_0x356013){var _0x4c9bd3=function(_0x5f4929){while(--_0x5f4929){_0x31207a['push'](_0x31207a['shift']());}};_0x4c9bd3(++_0x356013);}(a13_0x324c,0x1bf));var a13_0x3e2c=function(_0x22deba,_0x430ae0){_0x22deba=_0x22deba-0x0;var _0x36fe2c=a13_0x324c[_0x22deba];return _0x36fe2c;};'use strict';Object[a13_0x3e2c('0x0')](exports,a13_0x3e2c('0x1'),{'value':!![]});const stationSettings_1=require(a13_0x3e2c('0x2'));class CountingWebSocketService{constructor(){this[a13_0x3e2c('0x3')]=0x0;}[a13_0x3e2c('0x4')](){this[a13_0x3e2c('0x5')]();console['log'](a13_0x3e2c('0x6'));}[a13_0x3e2c('0x5')](){const _0x2287f3=require('ws');const _0x5a05b7=new _0x2287f3(stationSettings_1[a13_0x3e2c('0x7')][a13_0x3e2c('0x8')][a13_0x3e2c('0x9')]);_0x5a05b7['on'](a13_0x3e2c('0xa'),function open(){console['log']('Websocket\x20opened:'+stationSettings_1[a13_0x3e2c('0x7')][a13_0x3e2c('0x8')][a13_0x3e2c('0x9')]);this['eventCounter']=0x0;});_0x5a05b7['on'](a13_0x3e2c('0xb'),this[a13_0x3e2c('0xc')][a13_0x3e2c('0xd')](this));_0x5a05b7['on']('message',this[a13_0x3e2c('0xe')][a13_0x3e2c('0xd')](this));}[a13_0x3e2c('0xe')](_0xe5937){const _0x2a9508=JSON[a13_0x3e2c('0xf')](_0xe5937);if(_0x2a9508[a13_0x3e2c('0x10')]==null||_0x2a9508[a13_0x3e2c('0x10')][a13_0x3e2c('0x11')]==0x0){_0xe5937=JSON[a13_0x3e2c('0xf')](a13_0x3e2c('0x12'));}if(_0x2a9508[a13_0x3e2c('0x10')]!=null&&_0x2a9508['Data'][a13_0x3e2c('0x11')]>0x0){this[a13_0x3e2c('0x13')](_0x2a9508[a13_0x3e2c('0x10')][0x0]);}}[a13_0x3e2c('0xc')](_0x2db882){console[a13_0x3e2c('0xb')](_0x2db882);setTimeout(function(){this[a13_0x3e2c('0x5')]();}[a13_0x3e2c('0xd')](this),0x1388);}}exports[a13_0x3e2c('0x14')]=CountingWebSocketService;