var a13_0x5d84=['__esModule','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','Websocket\x20opened:','eventCounter','error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty'];(function(_0xbd2a28,_0x1e6267){var _0x425694=function(_0xefe144){while(--_0xefe144){_0xbd2a28['push'](_0xbd2a28['shift']());}};_0x425694(++_0x1e6267);}(a13_0x5d84,0xdb));var a13_0x53c2=function(_0x43a432,_0x2c5461){_0x43a432=_0x43a432-0x0;var _0x295d4c=a13_0x5d84[_0x43a432];return _0x295d4c;};'use strict';Object[a13_0x53c2('0x0')](exports,a13_0x53c2('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a13_0x53c2('0x2')](){this['createWebSocket']();console[a13_0x53c2('0x3')](a13_0x53c2('0x4'));}[a13_0x53c2('0x5')](){const _0x199989=require('ws');const _0x9b268b=new _0x199989(stationSettings_1[a13_0x53c2('0x6')][a13_0x53c2('0x7')][a13_0x53c2('0x8')]);_0x9b268b['on']('open',function open(){console[a13_0x53c2('0x3')](a13_0x53c2('0x9')+stationSettings_1[a13_0x53c2('0x6')][a13_0x53c2('0x7')][a13_0x53c2('0x8')]);this[a13_0x53c2('0xa')]=0x0;});_0x9b268b['on'](a13_0x53c2('0xb'),this[a13_0x53c2('0xc')][a13_0x53c2('0xd')](this));_0x9b268b['on'](a13_0x53c2('0xe'),this['incoming'][a13_0x53c2('0xd')](this));}[a13_0x53c2('0xf')](_0x5ba7ab){const _0x2b270a=JSON[a13_0x53c2('0x10')](_0x5ba7ab);if(_0x2b270a[a13_0x53c2('0x11')]==null||_0x2b270a[a13_0x53c2('0x11')][a13_0x53c2('0x12')]==0x0){_0x5ba7ab=JSON['parse'](a13_0x53c2('0x13'));}if(_0x2b270a[a13_0x53c2('0x11')]!=null&&_0x2b270a[a13_0x53c2('0x11')][a13_0x53c2('0x12')]>0x0){this[a13_0x53c2('0x14')](_0x2b270a[a13_0x53c2('0x11')][0x0]);}}[a13_0x53c2('0xc')](_0x1bc8f6){console[a13_0x53c2('0xb')](_0x1bc8f6);setTimeout(function(){this[a13_0x53c2('0x5')]();}[a13_0x53c2('0xd')](this),0x1388);}}exports[a13_0x53c2('0x15')]=CountingWebSocketService;