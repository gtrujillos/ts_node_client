var a14_0x431b=['log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','Websocket\x20opened:','error','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init'];(function(_0x3e35c5,_0x11b42c){var _0x52c002=function(_0x562cf6){while(--_0x562cf6){_0x3e35c5['push'](_0x3e35c5['shift']());}};_0x52c002(++_0x11b42c);}(a14_0x431b,0x171));var a14_0x234a=function(_0x21f362,_0x3ac0cb){_0x21f362=_0x21f362-0x0;var _0x398544=a14_0x431b[_0x21f362];return _0x398544;};'use strict';Object[a14_0x234a('0x0')](exports,a14_0x234a('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x234a('0x2'));class CountingWebSocketService{constructor(){this[a14_0x234a('0x3')]=0x0;}[a14_0x234a('0x4')](){console[a14_0x234a('0x5')](a14_0x234a('0x6'));this[a14_0x234a('0x7')]();}['createWebSocket'](){const _0x32fd50=require('ws');const _0x19d9f3=new _0x32fd50(stationSettings_1[a14_0x234a('0x8')][a14_0x234a('0x9')][a14_0x234a('0xa')]);_0x19d9f3['on']('open',function open(){console[a14_0x234a('0x5')](a14_0x234a('0xb')+stationSettings_1[a14_0x234a('0x8')][a14_0x234a('0x9')][a14_0x234a('0xa')]);this['eventCounter']=0x0;});_0x19d9f3['on'](a14_0x234a('0xc'),this['onError'][a14_0x234a('0xd')](this));_0x19d9f3['on'](a14_0x234a('0xe'),this[a14_0x234a('0xf')][a14_0x234a('0xd')](this));}[a14_0x234a('0xf')](_0x249f8a){const _0x2faba9=JSON[a14_0x234a('0x10')](_0x249f8a);if(_0x2faba9['Data']==null||_0x2faba9[a14_0x234a('0x11')][a14_0x234a('0x12')]==0x0){_0x249f8a=JSON[a14_0x234a('0x10')](a14_0x234a('0x13'));}if(_0x2faba9[a14_0x234a('0x11')]!=null&&_0x2faba9[a14_0x234a('0x11')][a14_0x234a('0x12')]>0x0){this[a14_0x234a('0x14')](_0x2faba9['Data'][0x0]);}}['onError'](_0x855e49){console[a14_0x234a('0xc')](_0x855e49);setTimeout(function(){this[a14_0x234a('0x7')]();}[a14_0x234a('0xd')](this),0x1388);}}exports[a14_0x234a('0x15')]=CountingWebSocketService;