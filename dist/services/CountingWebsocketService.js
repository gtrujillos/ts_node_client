var a13_0x255d=['incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','createWebSocket','log','StationContext','settings','cameraSocket','open','error','onError','bind','message'];(function(_0x163219,_0x4700c9){var _0x8a768d=function(_0x3ba769){while(--_0x3ba769){_0x163219['push'](_0x163219['shift']());}};_0x8a768d(++_0x4700c9);}(a13_0x255d,0x1c0));var a13_0x356f=function(_0x523722,_0x1a73df){_0x523722=_0x523722-0x0;var _0x54c522=a13_0x255d[_0x523722];return _0x54c522;};'use strict';Object[a13_0x356f('0x0')](exports,a13_0x356f('0x1'),{'value':!![]});const stationSettings_1=require(a13_0x356f('0x2'));class CountingWebSocketService{constructor(){this[a13_0x356f('0x3')]=0x0;}['init'](){this[a13_0x356f('0x4')]();console[a13_0x356f('0x5')]('init\x20CountingWebSocket');}[a13_0x356f('0x4')](){const _0x1c94b5=require('ws');const _0x365cd9=new _0x1c94b5(stationSettings_1[a13_0x356f('0x6')][a13_0x356f('0x7')][a13_0x356f('0x8')]);_0x365cd9['on'](a13_0x356f('0x9'),function open(){console[a13_0x356f('0x5')]('Websocket\x20opened:'+stationSettings_1['StationContext'][a13_0x356f('0x7')][a13_0x356f('0x8')]);this[a13_0x356f('0x3')]=0x0;});_0x365cd9['on'](a13_0x356f('0xa'),this[a13_0x356f('0xb')][a13_0x356f('0xc')](this));_0x365cd9['on'](a13_0x356f('0xd'),this[a13_0x356f('0xe')][a13_0x356f('0xc')](this));}[a13_0x356f('0xe')](_0x3ddf3a){const _0x37fe82=JSON['parse'](_0x3ddf3a);if(_0x37fe82[a13_0x356f('0xf')]==null||_0x37fe82[a13_0x356f('0xf')][a13_0x356f('0x10')]==0x0){_0x3ddf3a=JSON[a13_0x356f('0x11')](a13_0x356f('0x12'));}if(_0x37fe82[a13_0x356f('0xf')]!=null&&_0x37fe82[a13_0x356f('0xf')]['length']>0x0){this[a13_0x356f('0x13')](_0x37fe82[a13_0x356f('0xf')][0x0]);}}[a13_0x356f('0xb')](_0x56a258){console['error'](_0x56a258);setTimeout(function(){this[a13_0x356f('0x4')]();}[a13_0x356f('0xc')](this),0x1388);}}exports[a13_0x356f('0x14')]=CountingWebSocketService;