var a14_0x2190=['message','incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket','StationContext','settings','open','Websocket\x20opened:','cameraSocket','error','onError','bind'];(function(_0x499dcf,_0xa177c2){var _0x2b6797=function(_0x41c21c){while(--_0x41c21c){_0x499dcf['push'](_0x499dcf['shift']());}};_0x2b6797(++_0xa177c2);}(a14_0x2190,0x64));var a14_0x225e=function(_0x24ee80,_0x5ba46f){_0x24ee80=_0x24ee80-0x0;var _0x29bf4f=a14_0x2190[_0x24ee80];return _0x29bf4f;};'use strict';Object[a14_0x225e('0x0')](exports,a14_0x225e('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x225e('0x2'));class CountingWebSocketService{constructor(){this[a14_0x225e('0x3')]=0x0;}[a14_0x225e('0x4')](){console[a14_0x225e('0x5')]('init\x20CountingWebSocket');this['createWebSocket']();}[a14_0x225e('0x6')](){const _0x3d7951=require('ws');const _0x1d8bdb=new _0x3d7951(stationSettings_1[a14_0x225e('0x7')][a14_0x225e('0x8')]['cameraSocket']);_0x1d8bdb['on'](a14_0x225e('0x9'),function open(){console['log'](a14_0x225e('0xa')+stationSettings_1[a14_0x225e('0x7')]['settings'][a14_0x225e('0xb')]);this[a14_0x225e('0x3')]=0x0;});_0x1d8bdb['on'](a14_0x225e('0xc'),this[a14_0x225e('0xd')][a14_0x225e('0xe')](this));_0x1d8bdb['on'](a14_0x225e('0xf'),this[a14_0x225e('0x10')]['bind'](this));}[a14_0x225e('0x10')](_0x2fb0b3){const _0x48fe52=JSON['parse'](_0x2fb0b3);if(_0x48fe52[a14_0x225e('0x11')]==null||_0x48fe52['Data'][a14_0x225e('0x12')]==0x0){_0x2fb0b3=JSON[a14_0x225e('0x13')](a14_0x225e('0x14'));}if(_0x48fe52['Data']!=null&&_0x48fe52[a14_0x225e('0x11')]['length']>0x0){this[a14_0x225e('0x15')](_0x48fe52[a14_0x225e('0x11')][0x0]);}}['onError'](_0x3e5a2f){console[a14_0x225e('0xc')](_0x3e5a2f);setTimeout(function(){this[a14_0x225e('0x6')]();}['bind'](this),0x1388);}}exports[a14_0x225e('0x16')]=CountingWebSocketService;