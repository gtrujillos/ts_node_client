var a14_0x5a0e=['onError','error','createWebSocket','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','StationContext','cameraSocket','open','Websocket\x20opened:','settings','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent'];(function(_0x2110c7,_0x32db57){var _0x6f112b=function(_0x319522){while(--_0x319522){_0x2110c7['push'](_0x2110c7['shift']());}};_0x6f112b(++_0x32db57);}(a14_0x5a0e,0x12f));var a14_0xc6f0=function(_0x5e2bd3,_0x3b9371){_0x5e2bd3=_0x5e2bd3-0x0;var _0x52e981=a14_0x5a0e[_0x5e2bd3];return _0x52e981;};'use strict';Object[a14_0xc6f0('0x0')](exports,a14_0xc6f0('0x1'),{'value':!![]});const stationSettings_1=require(a14_0xc6f0('0x2'));class CountingWebSocketService{constructor(){this[a14_0xc6f0('0x3')]=0x0;}[a14_0xc6f0('0x4')](){console[a14_0xc6f0('0x5')]('init\x20CountingWebSocket');this['createWebSocket']();}['createWebSocket'](){const _0x21f7d5=require('ws');const _0x55a931=new _0x21f7d5(stationSettings_1[a14_0xc6f0('0x6')]['settings'][a14_0xc6f0('0x7')]);_0x55a931['on'](a14_0xc6f0('0x8'),function open(){console[a14_0xc6f0('0x5')](a14_0xc6f0('0x9')+stationSettings_1[a14_0xc6f0('0x6')][a14_0xc6f0('0xa')][a14_0xc6f0('0x7')]);this[a14_0xc6f0('0x3')]=0x0;});_0x55a931['on']('error',this['onError'][a14_0xc6f0('0xb')](this));_0x55a931['on'](a14_0xc6f0('0xc'),this[a14_0xc6f0('0xd')]['bind'](this));}['incoming'](_0x5a1027){const _0x2274cd=JSON[a14_0xc6f0('0xe')](_0x5a1027);if(_0x2274cd[a14_0xc6f0('0xf')]==null||_0x2274cd[a14_0xc6f0('0xf')][a14_0xc6f0('0x10')]==0x0){_0x5a1027=JSON['parse'](a14_0xc6f0('0x11'));}if(_0x2274cd[a14_0xc6f0('0xf')]!=null&&_0x2274cd[a14_0xc6f0('0xf')][a14_0xc6f0('0x10')]>0x0){this[a14_0xc6f0('0x12')](_0x2274cd[a14_0xc6f0('0xf')][0x0]);}}[a14_0xc6f0('0x13')](_0x38fc25){console[a14_0xc6f0('0x14')](_0x38fc25);setTimeout(function(){this[a14_0xc6f0('0x15')]();}[a14_0xc6f0('0xb')](this),0x1388);}}exports[a14_0xc6f0('0x16')]=CountingWebSocketService;