var a14_0x24c8=['../infrastructure/stationSettings','init','log','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','eventCounter','error','onError','bind','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService'];(function(_0x2fa554,_0x4bc7ed){var _0xa55097=function(_0xfe055a){while(--_0xfe055a){_0x2fa554['push'](_0x2fa554['shift']());}};_0xa55097(++_0x4bc7ed);}(a14_0x24c8,0xdc));var a14_0x46dd=function(_0x4b0a58,_0x5090d2){_0x4b0a58=_0x4b0a58-0x0;var _0x3fffea=a14_0x24c8[_0x4b0a58];return _0x3fffea;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x46dd('0x0'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x46dd('0x1')](){this['createWebSocket']();console[a14_0x46dd('0x2')]('init\x20CountingWebSocket');}[a14_0x46dd('0x3')](){const _0x1aa7d7=require('ws');const _0x18b10a=new _0x1aa7d7(stationSettings_1[a14_0x46dd('0x4')][a14_0x46dd('0x5')][a14_0x46dd('0x6')]);_0x18b10a['on'](a14_0x46dd('0x7'),function open(){console[a14_0x46dd('0x2')](a14_0x46dd('0x8')+stationSettings_1['StationContext']['settings'][a14_0x46dd('0x6')]);this[a14_0x46dd('0x9')]=0x0;});_0x18b10a['on'](a14_0x46dd('0xa'),this[a14_0x46dd('0xb')][a14_0x46dd('0xc')](this));_0x18b10a['on']('message',this[a14_0x46dd('0xd')][a14_0x46dd('0xc')](this));}[a14_0x46dd('0xd')](_0x14d70a){const _0x23be45=JSON[a14_0x46dd('0xe')](_0x14d70a);if(_0x23be45[a14_0x46dd('0xf')]==null||_0x23be45[a14_0x46dd('0xf')][a14_0x46dd('0x10')]==0x0){_0x14d70a=JSON[a14_0x46dd('0xe')](a14_0x46dd('0x11'));}if(_0x23be45[a14_0x46dd('0xf')]!=null&&_0x23be45[a14_0x46dd('0xf')][a14_0x46dd('0x10')]>0x0){this[a14_0x46dd('0x12')](_0x23be45[a14_0x46dd('0xf')][0x0]);}}['onError'](_0x171ff8){console['error'](_0x171ff8);setTimeout(function(){this[a14_0x46dd('0x3')]();}[a14_0x46dd('0xc')](this),0x1388);}}exports[a14_0x46dd('0x13')]=CountingWebSocketService;