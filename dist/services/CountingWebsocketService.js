var a14_0x2771=['init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','open','Websocket\x20opened:','cameraSocket','eventCounter','error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings'];(function(_0x2efdb9,_0x1c6537){var _0x42b102=function(_0x210ba7){while(--_0x210ba7){_0x2efdb9['push'](_0x2efdb9['shift']());}};_0x42b102(++_0x1c6537);}(a14_0x2771,0x1dd));var a14_0x36f0=function(_0x5df7fe,_0x5de9cd){_0x5df7fe=_0x5df7fe-0x0;var _0x1c9fb5=a14_0x2771[_0x5df7fe];return _0x1c9fb5;};'use strict';Object[a14_0x36f0('0x0')](exports,a14_0x36f0('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x36f0('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x36f0('0x3')](){console[a14_0x36f0('0x4')](a14_0x36f0('0x5'));this[a14_0x36f0('0x6')]();}['createWebSocket'](){const _0x5bee66=require('ws');const _0x253550=new _0x5bee66(stationSettings_1[a14_0x36f0('0x7')][a14_0x36f0('0x8')]['cameraSocket']);_0x253550['on'](a14_0x36f0('0x9'),function open(){console[a14_0x36f0('0x4')](a14_0x36f0('0xa')+stationSettings_1[a14_0x36f0('0x7')][a14_0x36f0('0x8')][a14_0x36f0('0xb')]);this[a14_0x36f0('0xc')]=0x0;});_0x253550['on'](a14_0x36f0('0xd'),this[a14_0x36f0('0xe')][a14_0x36f0('0xf')](this));_0x253550['on'](a14_0x36f0('0x10'),this[a14_0x36f0('0x11')][a14_0x36f0('0xf')](this));}['incoming'](_0x262efe){const _0x2a6811=JSON[a14_0x36f0('0x12')](_0x262efe);if(_0x2a6811[a14_0x36f0('0x13')]==null||_0x2a6811[a14_0x36f0('0x13')][a14_0x36f0('0x14')]==0x0){_0x262efe=JSON[a14_0x36f0('0x12')](a14_0x36f0('0x15'));}if(_0x2a6811[a14_0x36f0('0x13')]!=null&&_0x2a6811[a14_0x36f0('0x13')][a14_0x36f0('0x14')]>0x0){this[a14_0x36f0('0x16')](_0x2a6811[a14_0x36f0('0x13')][0x0]);}}[a14_0x36f0('0xe')](_0x1387c8){console['error'](_0x1387c8);setTimeout(function(){this['createWebSocket']();}[a14_0x36f0('0xf')](this),0x1388);}}exports[a14_0x36f0('0x17')]=CountingWebSocketService;