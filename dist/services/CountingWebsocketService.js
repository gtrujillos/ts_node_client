var a16_0x38b9=['log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','error','onError','bind','message','incoming','parse','Data','length','createEvent','defineProperty','eventCounter'];(function(_0x4d13b7,_0x19656f){var _0x21ee1a=function(_0x3bcf24){while(--_0x3bcf24){_0x4d13b7['push'](_0x4d13b7['shift']());}};_0x21ee1a(++_0x19656f);}(a16_0x38b9,0x17a));var a16_0x9870=function(_0x210c80,_0x5f0fcd){_0x210c80=_0x210c80-0x0;var _0x243808=a16_0x38b9[_0x210c80];return _0x243808;};'use strict';Object[a16_0x9870('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a16_0x9870('0x1')]=0x0;}['init'](){console[a16_0x9870('0x2')](a16_0x9870('0x3'));this[a16_0x9870('0x4')]();}['createWebSocket'](){const _0x50e712=require('ws');const _0x2f2f2c=new _0x50e712(stationSettings_1[a16_0x9870('0x5')][a16_0x9870('0x6')][a16_0x9870('0x7')]);_0x2f2f2c['on'](a16_0x9870('0x8'),function open(){console[a16_0x9870('0x2')](a16_0x9870('0x9')+stationSettings_1[a16_0x9870('0x5')][a16_0x9870('0x6')][a16_0x9870('0x7')]);this[a16_0x9870('0x1')]=0x0;});_0x2f2f2c['on'](a16_0x9870('0xa'),this[a16_0x9870('0xb')][a16_0x9870('0xc')](this));_0x2f2f2c['on'](a16_0x9870('0xd'),this[a16_0x9870('0xe')]['bind'](this));}['incoming'](_0x317cd9){const _0x5e7943=JSON[a16_0x9870('0xf')](_0x317cd9);if(_0x5e7943[a16_0x9870('0x10')]==null||_0x5e7943['Data']['length']==0x0){_0x317cd9=JSON[a16_0x9870('0xf')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x5e7943[a16_0x9870('0x10')]!=null&&_0x5e7943[a16_0x9870('0x10')][a16_0x9870('0x11')]>0x0){this[a16_0x9870('0x12')](_0x5e7943[a16_0x9870('0x10')][0x0]);}}[a16_0x9870('0xb')](_0x14ea9d){console[a16_0x9870('0xa')](_0x14ea9d);setTimeout(function(){this['createWebSocket']();}[a16_0x9870('0xc')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;