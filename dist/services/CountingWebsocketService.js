var a16_0x1836=['settings','open','log','Websocket\x20opened:','cameraSocket','message','incoming','Data','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','createEvent','error','bind','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','createWebSocket','StationContext'];(function(_0x3ee1d1,_0x22518a){var _0x5d961c=function(_0x56eb66){while(--_0x56eb66){_0x3ee1d1['push'](_0x3ee1d1['shift']());}};_0x5d961c(++_0x22518a);}(a16_0x1836,0x112));var a16_0x3949=function(_0x5e4519,_0x3524dd){_0x5e4519=_0x5e4519-0x0;var _0x1ee7c2=a16_0x1836[_0x5e4519];return _0x1ee7c2;};'use strict';Object[a16_0x3949('0x0')](exports,a16_0x3949('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x3949('0x2'));class CountingWebSocketService{constructor(){this[a16_0x3949('0x3')]=0x0;}['init'](){console['log']('init\x20CountingWebSocket');this['createWebSocket']();}[a16_0x3949('0x4')](){const _0x4cdff2=require('ws');const _0x329e78=new _0x4cdff2(stationSettings_1[a16_0x3949('0x5')][a16_0x3949('0x6')]['cameraSocket']);_0x329e78['on'](a16_0x3949('0x7'),function open(){console[a16_0x3949('0x8')](a16_0x3949('0x9')+stationSettings_1['StationContext'][a16_0x3949('0x6')][a16_0x3949('0xa')]);this['eventCounter']=0x0;});_0x329e78['on']('error',this['onError']['bind'](this));_0x329e78['on'](a16_0x3949('0xb'),this[a16_0x3949('0xc')]['bind'](this));}[a16_0x3949('0xc')](_0x2ed29c){const _0x6022ae=JSON['parse'](_0x2ed29c);if(_0x6022ae[a16_0x3949('0xd')]==null||_0x6022ae[a16_0x3949('0xd')]['length']==0x0){_0x2ed29c=JSON[a16_0x3949('0xe')](a16_0x3949('0xf'));}if(_0x6022ae[a16_0x3949('0xd')]!=null&&_0x6022ae[a16_0x3949('0xd')][a16_0x3949('0x10')]>0x0){this[a16_0x3949('0x11')](_0x6022ae[a16_0x3949('0xd')][0x0]);}}['onError'](_0x103355){console[a16_0x3949('0x12')](_0x103355);setTimeout(function(){this[a16_0x3949('0x4')]();}[a16_0x3949('0x13')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;