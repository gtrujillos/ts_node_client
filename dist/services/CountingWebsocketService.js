var a14_0x4f0f=['message','incoming','parse','Data','length','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','init','init\x20CountingWebSocket','createWebSocket','StationContext','settings','open','log','Websocket\x20opened:','eventCounter','error','onError','bind'];(function(_0x34975a,_0x1cad15){var _0x3c9880=function(_0x29c155){while(--_0x29c155){_0x34975a['push'](_0x34975a['shift']());}};_0x3c9880(++_0x1cad15);}(a14_0x4f0f,0xd8));var a14_0x3c62=function(_0x4cf9c8,_0x2e5cd0){_0x4cf9c8=_0x4cf9c8-0x0;var _0x210b92=a14_0x4f0f[_0x4cf9c8];return _0x210b92;};'use strict';Object[a14_0x3c62('0x0')](exports,a14_0x3c62('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x3c62('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x3c62('0x3')](){console['log'](a14_0x3c62('0x4'));this[a14_0x3c62('0x5')]();}[a14_0x3c62('0x5')](){const _0x45da73=require('ws');const _0x1dc68e=new _0x45da73(stationSettings_1[a14_0x3c62('0x6')][a14_0x3c62('0x7')]['cameraSocket']);_0x1dc68e['on'](a14_0x3c62('0x8'),function open(){console[a14_0x3c62('0x9')](a14_0x3c62('0xa')+stationSettings_1[a14_0x3c62('0x6')][a14_0x3c62('0x7')]['cameraSocket']);this[a14_0x3c62('0xb')]=0x0;});_0x1dc68e['on'](a14_0x3c62('0xc'),this[a14_0x3c62('0xd')][a14_0x3c62('0xe')](this));_0x1dc68e['on'](a14_0x3c62('0xf'),this['incoming'][a14_0x3c62('0xe')](this));}[a14_0x3c62('0x10')](_0x52c717){const _0x550bd9=JSON[a14_0x3c62('0x11')](_0x52c717);if(_0x550bd9[a14_0x3c62('0x12')]==null||_0x550bd9[a14_0x3c62('0x12')]['length']==0x0){_0x52c717=JSON[a14_0x3c62('0x11')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x550bd9[a14_0x3c62('0x12')]!=null&&_0x550bd9['Data'][a14_0x3c62('0x13')]>0x0){this['createEvent'](_0x550bd9[a14_0x3c62('0x12')][0x0]);}}[a14_0x3c62('0xd')](_0x503a76){console['error'](_0x503a76);setTimeout(function(){this[a14_0x3c62('0x5')]();}['bind'](this),0x1388);}}exports[a14_0x3c62('0x14')]=CountingWebSocketService;