var a16_0x50bd=['Websocket\x20opened:','error','onError','bind','message','incoming','Data','parse','length','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket','StationContext','settings','cameraSocket','open'];(function(_0x15033d,_0x54ebb7){var _0x445de3=function(_0xf3a6a){while(--_0xf3a6a){_0x15033d['push'](_0x15033d['shift']());}};_0x445de3(++_0x54ebb7);}(a16_0x50bd,0x1c3));var a16_0x1ff1=function(_0x1f3326,_0x23a1d7){_0x1f3326=_0x1f3326-0x0;var _0x41f435=a16_0x50bd[_0x1f3326];return _0x41f435;};'use strict';Object[a16_0x1ff1('0x0')](exports,a16_0x1ff1('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x1ff1('0x2'));class CountingWebSocketService{constructor(){this[a16_0x1ff1('0x3')]=0x0;}[a16_0x1ff1('0x4')](){console[a16_0x1ff1('0x5')]('init\x20CountingWebSocket');this['createWebSocket']();}[a16_0x1ff1('0x6')](){const _0x2a51a3=require('ws');const _0xb99773=new _0x2a51a3(stationSettings_1[a16_0x1ff1('0x7')][a16_0x1ff1('0x8')][a16_0x1ff1('0x9')]);_0xb99773['on'](a16_0x1ff1('0xa'),function open(){console[a16_0x1ff1('0x5')](a16_0x1ff1('0xb')+stationSettings_1[a16_0x1ff1('0x7')][a16_0x1ff1('0x8')][a16_0x1ff1('0x9')]);this[a16_0x1ff1('0x3')]=0x0;});_0xb99773['on'](a16_0x1ff1('0xc'),this[a16_0x1ff1('0xd')][a16_0x1ff1('0xe')](this));_0xb99773['on'](a16_0x1ff1('0xf'),this[a16_0x1ff1('0x10')]['bind'](this));}[a16_0x1ff1('0x10')](_0x42b31b){const _0x3635bf=JSON['parse'](_0x42b31b);if(_0x3635bf[a16_0x1ff1('0x11')]==null||_0x3635bf[a16_0x1ff1('0x11')]['length']==0x0){_0x42b31b=JSON[a16_0x1ff1('0x12')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x3635bf[a16_0x1ff1('0x11')]!=null&&_0x3635bf[a16_0x1ff1('0x11')][a16_0x1ff1('0x13')]>0x0){this[a16_0x1ff1('0x14')](_0x3635bf[a16_0x1ff1('0x11')][0x0]);}}[a16_0x1ff1('0xd')](_0x2904f7){console[a16_0x1ff1('0xc')](_0x2904f7);setTimeout(function(){this[a16_0x1ff1('0x6')]();}[a16_0x1ff1('0xe')](this),0x1388);}}exports[a16_0x1ff1('0x15')]=CountingWebSocketService;