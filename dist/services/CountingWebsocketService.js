var a14_0x1e38=['incoming','bind','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init','createWebSocket','StationContext','cameraSocket','log','Websocket\x20opened:','settings','error','onError','message'];(function(_0x2c93d2,_0x53ffc5){var _0x572fa0=function(_0x4efe62){while(--_0x4efe62){_0x2c93d2['push'](_0x2c93d2['shift']());}};_0x572fa0(++_0x53ffc5);}(a14_0x1e38,0xda));var a14_0xd9d2=function(_0x211252,_0x509d35){_0x211252=_0x211252-0x0;var _0x7fba47=a14_0x1e38[_0x211252];return _0x7fba47;};'use strict';Object[a14_0xd9d2('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0xd9d2('0x1'));class CountingWebSocketService{constructor(){this[a14_0xd9d2('0x2')]=0x0;}[a14_0xd9d2('0x3')](){console['log']('init\x20CountingWebSocket');this['createWebSocket']();}[a14_0xd9d2('0x4')](){const _0x3921bb=require('ws');const _0x37bcd4=new _0x3921bb(stationSettings_1[a14_0xd9d2('0x5')]['settings'][a14_0xd9d2('0x6')]);_0x37bcd4['on']('open',function open(){console[a14_0xd9d2('0x7')](a14_0xd9d2('0x8')+stationSettings_1['StationContext'][a14_0xd9d2('0x9')][a14_0xd9d2('0x6')]);this[a14_0xd9d2('0x2')]=0x0;});_0x37bcd4['on'](a14_0xd9d2('0xa'),this[a14_0xd9d2('0xb')]['bind'](this));_0x37bcd4['on'](a14_0xd9d2('0xc'),this[a14_0xd9d2('0xd')][a14_0xd9d2('0xe')](this));}[a14_0xd9d2('0xd')](_0x539c1d){const _0x256648=JSON[a14_0xd9d2('0xf')](_0x539c1d);if(_0x256648[a14_0xd9d2('0x10')]==null||_0x256648['Data'][a14_0xd9d2('0x11')]==0x0){_0x539c1d=JSON[a14_0xd9d2('0xf')](a14_0xd9d2('0x12'));}if(_0x256648[a14_0xd9d2('0x10')]!=null&&_0x256648['Data'][a14_0xd9d2('0x11')]>0x0){this[a14_0xd9d2('0x13')](_0x256648[a14_0xd9d2('0x10')][0x0]);}}[a14_0xd9d2('0xb')](_0x5d5f7b){console[a14_0xd9d2('0xa')](_0x5d5f7b);setTimeout(function(){this[a14_0xd9d2('0x4')]();}[a14_0xd9d2('0xe')](this),0x1388);}}exports[a14_0xd9d2('0x14')]=CountingWebSocketService;