var a16_0x2810=['__esModule','../infrastructure/stationSettings','init','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','log','Websocket\x20opened:','StationContext','eventCounter','error','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','onError','CountingWebSocketService'];(function(_0x1cea8a,_0x43084a){var _0x365c03=function(_0x13dbcc){while(--_0x13dbcc){_0x1cea8a['push'](_0x1cea8a['shift']());}};_0x365c03(++_0x43084a);}(a16_0x2810,0x8a));var a16_0x29c9=function(_0x465ed7,_0x4f6d81){_0x465ed7=_0x465ed7-0x0;var _0x2a688d=a16_0x2810[_0x465ed7];return _0x2a688d;};'use strict';Object['defineProperty'](exports,a16_0x29c9('0x0'),{'value':!![]});const stationSettings_1=require(a16_0x29c9('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a16_0x29c9('0x2')](){console['log'](a16_0x29c9('0x3'));this[a16_0x29c9('0x4')]();}['createWebSocket'](){const _0x53bd48=require('ws');const _0x332b88=new _0x53bd48(stationSettings_1['StationContext'][a16_0x29c9('0x5')][a16_0x29c9('0x6')]);_0x332b88['on'](a16_0x29c9('0x7'),function open(){console[a16_0x29c9('0x8')](a16_0x29c9('0x9')+stationSettings_1[a16_0x29c9('0xa')]['settings']['cameraSocket']);this[a16_0x29c9('0xb')]=0x0;});_0x332b88['on'](a16_0x29c9('0xc'),this['onError'][a16_0x29c9('0xd')](this));_0x332b88['on'](a16_0x29c9('0xe'),this[a16_0x29c9('0xf')]['bind'](this));}[a16_0x29c9('0xf')](_0x1eef2a){const _0x5aacc2=JSON[a16_0x29c9('0x10')](_0x1eef2a);if(_0x5aacc2[a16_0x29c9('0x11')]==null||_0x5aacc2[a16_0x29c9('0x11')][a16_0x29c9('0x12')]==0x0){_0x1eef2a=JSON[a16_0x29c9('0x10')](a16_0x29c9('0x13'));}if(_0x5aacc2[a16_0x29c9('0x11')]!=null&&_0x5aacc2[a16_0x29c9('0x11')][a16_0x29c9('0x12')]>0x0){this[a16_0x29c9('0x14')](_0x5aacc2['Data'][0x0]);}}[a16_0x29c9('0x15')](_0x2fb19f){console[a16_0x29c9('0xc')](_0x2fb19f);setTimeout(function(){this[a16_0x29c9('0x4')]();}[a16_0x29c9('0xd')](this),0x1388);}}exports[a16_0x29c9('0x16')]=CountingWebSocketService;