var a14_0x4573=['StationContext','settings','cameraSocket','open','Websocket\x20opened:','error','bind','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','onError','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket'];(function(_0x24fff5,_0x1c5423){var _0x56eca2=function(_0x4846b9){while(--_0x4846b9){_0x24fff5['push'](_0x24fff5['shift']());}};_0x56eca2(++_0x1c5423);}(a14_0x4573,0xea));var a14_0x4ec4=function(_0x2699a9,_0x501e82){_0x2699a9=_0x2699a9-0x0;var _0x5b6c40=a14_0x4573[_0x2699a9];return _0x5b6c40;};'use strict';Object[a14_0x4ec4('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x4ec4('0x1'));class CountingWebSocketService{constructor(){this[a14_0x4ec4('0x2')]=0x0;}[a14_0x4ec4('0x3')](){console[a14_0x4ec4('0x4')]('init\x20CountingWebSocket');this[a14_0x4ec4('0x5')]();}['createWebSocket'](){const _0x8c52b8=require('ws');const _0x369858=new _0x8c52b8(stationSettings_1[a14_0x4ec4('0x6')][a14_0x4ec4('0x7')][a14_0x4ec4('0x8')]);_0x369858['on'](a14_0x4ec4('0x9'),function open(){console[a14_0x4ec4('0x4')](a14_0x4ec4('0xa')+stationSettings_1[a14_0x4ec4('0x6')]['settings'][a14_0x4ec4('0x8')]);this[a14_0x4ec4('0x2')]=0x0;});_0x369858['on'](a14_0x4ec4('0xb'),this['onError'][a14_0x4ec4('0xc')](this));_0x369858['on']('message',this[a14_0x4ec4('0xd')][a14_0x4ec4('0xc')](this));}[a14_0x4ec4('0xd')](_0x9b55e8){const _0x1f3366=JSON[a14_0x4ec4('0xe')](_0x9b55e8);if(_0x1f3366[a14_0x4ec4('0xf')]==null||_0x1f3366['Data']['length']==0x0){_0x9b55e8=JSON['parse'](a14_0x4ec4('0x10'));}if(_0x1f3366['Data']!=null&&_0x1f3366[a14_0x4ec4('0xf')][a14_0x4ec4('0x11')]>0x0){this['createEvent'](_0x1f3366['Data'][0x0]);}}[a14_0x4ec4('0x12')](_0x252544){console['error'](_0x252544);setTimeout(function(){this[a14_0x4ec4('0x5')]();}[a14_0x4ec4('0xc')](this),0x1388);}}exports[a14_0x4ec4('0x13')]=CountingWebSocketService;