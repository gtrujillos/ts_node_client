var a19_0x1234=['cameraSocket','Websocket\x20opened:','onError','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','Counting\x20camera\x20Websocket\x20error','bind','CountingWebSocketService','defineProperty','__esModule','eventCounter','getInstance','instance','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings'];(function(_0x373165,_0x2de3ac){var _0x58f4d2=function(_0x2dd4e2){while(--_0x2dd4e2){_0x373165['push'](_0x373165['shift']());}};_0x58f4d2(++_0x2de3ac);}(a19_0x1234,0x1aa));var a19_0x9a2c=function(_0xdefbda,_0x43737b){_0xdefbda=_0xdefbda-0x0;var _0x2baec0=a19_0x1234[_0xdefbda];return _0x2baec0;};'use strict';Object[a19_0x9a2c('0x0')](exports,a19_0x9a2c('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a19_0x9a2c('0x2')]=0x0;}static[a19_0x9a2c('0x3')](){if(!CountingWebSocketService['instance']){CountingWebSocketService[a19_0x9a2c('0x4')]=new CountingWebSocketService();}return CountingWebSocketService['instance'];}[a19_0x9a2c('0x5')](){console[a19_0x9a2c('0x6')](a19_0x9a2c('0x7'));this[a19_0x9a2c('0x8')]();}[a19_0x9a2c('0x8')](){const _0x1ec17a=require('ws');const _0x34b09a=new _0x1ec17a(stationSettings_1[a19_0x9a2c('0x9')][a19_0x9a2c('0xa')][a19_0x9a2c('0xb')]);_0x34b09a['on']('open',function open(){console[a19_0x9a2c('0x6')](a19_0x9a2c('0xc')+stationSettings_1[a19_0x9a2c('0x9')]['settings']['cameraSocket']);this[a19_0x9a2c('0x2')]=0x0;});_0x34b09a['on']('error',this[a19_0x9a2c('0xd')]['bind'](this));_0x34b09a['on']('message',this[a19_0x9a2c('0xe')]['bind'](this));}[a19_0x9a2c('0xe')](_0x17e6f5){const _0x5826db=JSON[a19_0x9a2c('0xf')](_0x17e6f5);if(_0x5826db[a19_0x9a2c('0x10')]==null||_0x5826db[a19_0x9a2c('0x10')][a19_0x9a2c('0x11')]==0x0){_0x17e6f5=JSON['parse'](a19_0x9a2c('0x12'));}if(_0x5826db['Data']!=null&&_0x5826db[a19_0x9a2c('0x10')][a19_0x9a2c('0x11')]>0x0){this[a19_0x9a2c('0x13')](_0x5826db[a19_0x9a2c('0x10')][0x0]);}}['onError'](_0x3e3e3f){console['error'](a19_0x9a2c('0x14'),_0x3e3e3f);setTimeout(function(){this['createWebSocket']();}[a19_0x9a2c('0x15')](this),0x1388);}}exports[a19_0x9a2c('0x16')]=CountingWebSocketService;