var a16_0x1a94=['Websocket\x20opened:','StationContext','cameraSocket','eventCounter','error','onError','bind','message','incoming','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','__esModule','../infrastructure/stationSettings','init\x20CountingWebSocket','createWebSocket','settings','log'];(function(_0x20e311,_0xb0190){var _0x2beb4c=function(_0x49f3b5){while(--_0x49f3b5){_0x20e311['push'](_0x20e311['shift']());}};_0x2beb4c(++_0xb0190);}(a16_0x1a94,0x14e));var a16_0x54cb=function(_0x3dfc78,_0x559a02){_0x3dfc78=_0x3dfc78-0x0;var _0x3f0fc8=a16_0x1a94[_0x3dfc78];return _0x3f0fc8;};'use strict';Object['defineProperty'](exports,a16_0x54cb('0x0'),{'value':!![]});const stationSettings_1=require(a16_0x54cb('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){console['log'](a16_0x54cb('0x2'));this[a16_0x54cb('0x3')]();}[a16_0x54cb('0x3')](){const _0x47551f=require('ws');const _0x530a0c=new _0x47551f(stationSettings_1['StationContext'][a16_0x54cb('0x4')]['cameraSocket']);_0x530a0c['on']('open',function open(){console[a16_0x54cb('0x5')](a16_0x54cb('0x6')+stationSettings_1[a16_0x54cb('0x7')][a16_0x54cb('0x4')][a16_0x54cb('0x8')]);this[a16_0x54cb('0x9')]=0x0;});_0x530a0c['on'](a16_0x54cb('0xa'),this[a16_0x54cb('0xb')][a16_0x54cb('0xc')](this));_0x530a0c['on'](a16_0x54cb('0xd'),this['incoming'][a16_0x54cb('0xc')](this));}[a16_0x54cb('0xe')](_0x4cf52b){const _0x2abbda=JSON['parse'](_0x4cf52b);if(_0x2abbda[a16_0x54cb('0xf')]==null||_0x2abbda[a16_0x54cb('0xf')][a16_0x54cb('0x10')]==0x0){_0x4cf52b=JSON['parse'](a16_0x54cb('0x11'));}if(_0x2abbda[a16_0x54cb('0xf')]!=null&&_0x2abbda[a16_0x54cb('0xf')]['length']>0x0){this[a16_0x54cb('0x12')](_0x2abbda[a16_0x54cb('0xf')][0x0]);}}[a16_0x54cb('0xb')](_0x405b8b){console['error'](_0x405b8b);setTimeout(function(){this[a16_0x54cb('0x3')]();}[a16_0x54cb('0xc')](this),0x1388);}}exports[a16_0x54cb('0x13')]=CountingWebSocketService;