var a16_0x2831=['CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','init\x20CountingWebSocket','createWebSocket','StationContext','settings','open','log','Websocket\x20opened:','cameraSocket','error','onError','bind','incoming','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}'];(function(_0xb67384,_0x27295a){var _0x156d7c=function(_0x52a1f8){while(--_0x52a1f8){_0xb67384['push'](_0xb67384['shift']());}};_0x156d7c(++_0x27295a);}(a16_0x2831,0x127));var a16_0x3a0d=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a16_0x2831[_0x2d8f05];return _0x4d74cb;};'use strict';Object[a16_0x3a0d('0x0')](exports,a16_0x3a0d('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x3a0d('0x2'));class CountingWebSocketService{constructor(){this[a16_0x3a0d('0x3')]=0x0;}[a16_0x3a0d('0x4')](){console['log'](a16_0x3a0d('0x5'));this[a16_0x3a0d('0x6')]();}[a16_0x3a0d('0x6')](){const _0x480e01=require('ws');const _0x33ae69=new _0x480e01(stationSettings_1[a16_0x3a0d('0x7')][a16_0x3a0d('0x8')]['cameraSocket']);_0x33ae69['on'](a16_0x3a0d('0x9'),function open(){console[a16_0x3a0d('0xa')](a16_0x3a0d('0xb')+stationSettings_1[a16_0x3a0d('0x7')]['settings'][a16_0x3a0d('0xc')]);this[a16_0x3a0d('0x3')]=0x0;});_0x33ae69['on'](a16_0x3a0d('0xd'),this[a16_0x3a0d('0xe')][a16_0x3a0d('0xf')](this));_0x33ae69['on']('message',this[a16_0x3a0d('0x10')][a16_0x3a0d('0xf')](this));}[a16_0x3a0d('0x10')](_0xf24d0c){const _0x341882=JSON['parse'](_0xf24d0c);if(_0x341882[a16_0x3a0d('0x11')]==null||_0x341882['Data'][a16_0x3a0d('0x12')]==0x0){_0xf24d0c=JSON['parse'](a16_0x3a0d('0x13'));}if(_0x341882[a16_0x3a0d('0x11')]!=null&&_0x341882['Data'][a16_0x3a0d('0x12')]>0x0){this['createEvent'](_0x341882[a16_0x3a0d('0x11')][0x0]);}}[a16_0x3a0d('0xe')](_0x963fcb){console['error'](_0x963fcb);setTimeout(function(){this[a16_0x3a0d('0x6')]();}[a16_0x3a0d('0xf')](this),0x1388);}}exports[a16_0x3a0d('0x14')]=CountingWebSocketService;