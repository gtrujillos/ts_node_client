var a16_0x535f=['Data','length','createEvent','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','error','onError','bind','message','incoming','parse'];(function(_0x2e35d5,_0x56dc77){var _0x272636=function(_0x32bb97){while(--_0x32bb97){_0x2e35d5['push'](_0x2e35d5['shift']());}};_0x272636(++_0x56dc77);}(a16_0x535f,0xab));var a16_0x1409=function(_0x3d15aa,_0x2bb4ad){_0x3d15aa=_0x3d15aa-0x0;var _0x48a011=a16_0x535f[_0x3d15aa];return _0x48a011;};'use strict';Object[a16_0x1409('0x0')](exports,a16_0x1409('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x1409('0x2'));class CountingWebSocketService{constructor(){this[a16_0x1409('0x3')]=0x0;}['init'](){console[a16_0x1409('0x4')](a16_0x1409('0x5'));this[a16_0x1409('0x6')]();}[a16_0x1409('0x6')](){const _0x398298=require('ws');const _0x498f68=new _0x398298(stationSettings_1[a16_0x1409('0x7')][a16_0x1409('0x8')][a16_0x1409('0x9')]);_0x498f68['on'](a16_0x1409('0xa'),function open(){console[a16_0x1409('0x4')](a16_0x1409('0xb')+stationSettings_1[a16_0x1409('0x7')][a16_0x1409('0x8')][a16_0x1409('0x9')]);this[a16_0x1409('0x3')]=0x0;});_0x498f68['on'](a16_0x1409('0xc'),this[a16_0x1409('0xd')][a16_0x1409('0xe')](this));_0x498f68['on'](a16_0x1409('0xf'),this[a16_0x1409('0x10')][a16_0x1409('0xe')](this));}[a16_0x1409('0x10')](_0xbccbe2){const _0x338a29=JSON[a16_0x1409('0x11')](_0xbccbe2);if(_0x338a29[a16_0x1409('0x12')]==null||_0x338a29['Data'][a16_0x1409('0x13')]==0x0){_0xbccbe2=JSON[a16_0x1409('0x11')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x338a29[a16_0x1409('0x12')]!=null&&_0x338a29[a16_0x1409('0x12')][a16_0x1409('0x13')]>0x0){this[a16_0x1409('0x14')](_0x338a29[a16_0x1409('0x12')][0x0]);}}[a16_0x1409('0xd')](_0x437931){console[a16_0x1409('0xc')](_0x437931);setTimeout(function(){this['createWebSocket']();}[a16_0x1409('0xe')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;