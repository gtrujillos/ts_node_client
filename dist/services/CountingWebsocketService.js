var a14_0x1cca=['Websocket\x20opened:','settings','cameraSocket','eventCounter','error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','defineProperty','../infrastructure/stationSettings','init','createWebSocket','log','init\x20CountingWebSocket','StationContext','open'];(function(_0x4c72bf,_0x20653f){var _0x5a4154=function(_0x3a8cd0){while(--_0x3a8cd0){_0x4c72bf['push'](_0x4c72bf['shift']());}};_0x5a4154(++_0x20653f);}(a14_0x1cca,0xca));var a14_0x29f7=function(_0x37a8ee,_0x305eaa){_0x37a8ee=_0x37a8ee-0x0;var _0x273c42=a14_0x1cca[_0x37a8ee];return _0x273c42;};'use strict';Object[a14_0x29f7('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x29f7('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x29f7('0x2')](){this[a14_0x29f7('0x3')]();console[a14_0x29f7('0x4')](a14_0x29f7('0x5'));}[a14_0x29f7('0x3')](){const _0x5e8ac6=require('ws');const _0xf5640=new _0x5e8ac6(stationSettings_1[a14_0x29f7('0x6')]['settings']['cameraSocket']);_0xf5640['on'](a14_0x29f7('0x7'),function open(){console[a14_0x29f7('0x4')](a14_0x29f7('0x8')+stationSettings_1['StationContext'][a14_0x29f7('0x9')][a14_0x29f7('0xa')]);this[a14_0x29f7('0xb')]=0x0;});_0xf5640['on'](a14_0x29f7('0xc'),this[a14_0x29f7('0xd')][a14_0x29f7('0xe')](this));_0xf5640['on'](a14_0x29f7('0xf'),this[a14_0x29f7('0x10')]['bind'](this));}['incoming'](_0x41870f){const _0x362272=JSON[a14_0x29f7('0x11')](_0x41870f);if(_0x362272[a14_0x29f7('0x12')]==null||_0x362272[a14_0x29f7('0x12')][a14_0x29f7('0x13')]==0x0){_0x41870f=JSON[a14_0x29f7('0x11')](a14_0x29f7('0x14'));}if(_0x362272[a14_0x29f7('0x12')]!=null&&_0x362272[a14_0x29f7('0x12')][a14_0x29f7('0x13')]>0x0){this['createEvent'](_0x362272['Data'][0x0]);}}['onError'](_0x2bb9c2){console['error'](_0x2bb9c2);setTimeout(function(){this['createWebSocket']();}['bind'](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;