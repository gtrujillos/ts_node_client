var a14_0x46b3=['incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','error','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','open','Websocket\x20opened:','cameraSocket','onError','bind','message'];(function(_0xedd16a,_0x10929c){var _0x21bab1=function(_0xb1b234){while(--_0xb1b234){_0xedd16a['push'](_0xedd16a['shift']());}};_0x21bab1(++_0x10929c);}(a14_0x46b3,0x92));var a14_0x5712=function(_0x5e09e1,_0x377d7b){_0x5e09e1=_0x5e09e1-0x0;var _0x33fc5b=a14_0x46b3[_0x5e09e1];return _0x33fc5b;};'use strict';Object[a14_0x5712('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x5712('0x1'));class CountingWebSocketService{constructor(){this[a14_0x5712('0x2')]=0x0;}[a14_0x5712('0x3')](){console[a14_0x5712('0x4')](a14_0x5712('0x5'));this['createWebSocket']();}[a14_0x5712('0x6')](){const _0xd8378b=require('ws');const _0x5cecb3=new _0xd8378b(stationSettings_1[a14_0x5712('0x7')][a14_0x5712('0x8')]['cameraSocket']);_0x5cecb3['on'](a14_0x5712('0x9'),function open(){console['log'](a14_0x5712('0xa')+stationSettings_1[a14_0x5712('0x7')][a14_0x5712('0x8')][a14_0x5712('0xb')]);this['eventCounter']=0x0;});_0x5cecb3['on']('error',this[a14_0x5712('0xc')][a14_0x5712('0xd')](this));_0x5cecb3['on'](a14_0x5712('0xe'),this[a14_0x5712('0xf')][a14_0x5712('0xd')](this));}[a14_0x5712('0xf')](_0x97b7a){const _0xc67bf0=JSON['parse'](_0x97b7a);if(_0xc67bf0[a14_0x5712('0x10')]==null||_0xc67bf0[a14_0x5712('0x10')][a14_0x5712('0x11')]==0x0){_0x97b7a=JSON[a14_0x5712('0x12')](a14_0x5712('0x13'));}if(_0xc67bf0[a14_0x5712('0x10')]!=null&&_0xc67bf0[a14_0x5712('0x10')][a14_0x5712('0x11')]>0x0){this[a14_0x5712('0x14')](_0xc67bf0[a14_0x5712('0x10')][0x0]);}}['onError'](_0x1a9aeb){console[a14_0x5712('0x15')](_0x1a9aeb);setTimeout(function(){this['createWebSocket']();}['bind'](this),0x1388);}}exports[a14_0x5712('0x16')]=CountingWebSocketService;