var a16_0x4ec6=['CountingWebSocketService','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','Websocket\x20opened:','StationContext','error','onError','bind','message','incoming','parse','Data','length','createEvent'];(function(_0x3ae857,_0x5204d3){var _0x2bd349=function(_0xc8b545){while(--_0xc8b545){_0x3ae857['push'](_0x3ae857['shift']());}};_0x2bd349(++_0x5204d3);}(a16_0x4ec6,0xf1));var a16_0x4512=function(_0x41cde3,_0x463d24){_0x41cde3=_0x41cde3-0x0;var _0x4d41f0=a16_0x4ec6[_0x41cde3];return _0x4d41f0;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a16_0x4512('0x0')]=0x0;}[a16_0x4512('0x1')](){console[a16_0x4512('0x2')](a16_0x4512('0x3'));this[a16_0x4512('0x4')]();}[a16_0x4512('0x4')](){const _0x276c85=require('ws');const _0x15d050=new _0x276c85(stationSettings_1['StationContext'][a16_0x4512('0x5')][a16_0x4512('0x6')]);_0x15d050['on'](a16_0x4512('0x7'),function open(){console[a16_0x4512('0x2')](a16_0x4512('0x8')+stationSettings_1[a16_0x4512('0x9')][a16_0x4512('0x5')][a16_0x4512('0x6')]);this[a16_0x4512('0x0')]=0x0;});_0x15d050['on'](a16_0x4512('0xa'),this[a16_0x4512('0xb')][a16_0x4512('0xc')](this));_0x15d050['on'](a16_0x4512('0xd'),this[a16_0x4512('0xe')][a16_0x4512('0xc')](this));}['incoming'](_0x5d86e5){const _0x493389=JSON[a16_0x4512('0xf')](_0x5d86e5);if(_0x493389[a16_0x4512('0x10')]==null||_0x493389[a16_0x4512('0x10')][a16_0x4512('0x11')]==0x0){_0x5d86e5=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x493389[a16_0x4512('0x10')]!=null&&_0x493389[a16_0x4512('0x10')][a16_0x4512('0x11')]>0x0){this[a16_0x4512('0x12')](_0x493389[a16_0x4512('0x10')][0x0]);}}[a16_0x4512('0xb')](_0x484bbd){console[a16_0x4512('0xa')](_0x484bbd);setTimeout(function(){this['createWebSocket']();}['bind'](this),0x1388);}}exports[a16_0x4512('0x13')]=CountingWebSocketService;