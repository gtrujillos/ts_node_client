var a14_0x174d=['Websocket\x20opened:','error','onError','bind','message','incoming','parse','Data','createEvent','CountingWebSocketService','defineProperty','init','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','log'];(function(_0x4e5645,_0x486f03){var _0xcdd151=function(_0x32c839){while(--_0x32c839){_0x4e5645['push'](_0x4e5645['shift']());}};_0xcdd151(++_0x486f03);}(a14_0x174d,0x1de));var a14_0x4d19=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a14_0x174d[_0x2d8f05];return _0x4d74cb;};'use strict';Object[a14_0x4d19('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x4d19('0x1')](){console['log'](a14_0x4d19('0x2'));this['createWebSocket']();}[a14_0x4d19('0x3')](){const _0x28e83f=require('ws');const _0x4b18a8=new _0x28e83f(stationSettings_1[a14_0x4d19('0x4')][a14_0x4d19('0x5')][a14_0x4d19('0x6')]);_0x4b18a8['on']('open',function open(){console[a14_0x4d19('0x7')](a14_0x4d19('0x8')+stationSettings_1[a14_0x4d19('0x4')]['settings'][a14_0x4d19('0x6')]);this['eventCounter']=0x0;});_0x4b18a8['on'](a14_0x4d19('0x9'),this[a14_0x4d19('0xa')][a14_0x4d19('0xb')](this));_0x4b18a8['on'](a14_0x4d19('0xc'),this[a14_0x4d19('0xd')][a14_0x4d19('0xb')](this));}['incoming'](_0x1e9300){const _0x486595=JSON[a14_0x4d19('0xe')](_0x1e9300);if(_0x486595[a14_0x4d19('0xf')]==null||_0x486595[a14_0x4d19('0xf')]['length']==0x0){_0x1e9300=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x486595[a14_0x4d19('0xf')]!=null&&_0x486595[a14_0x4d19('0xf')]['length']>0x0){this[a14_0x4d19('0x10')](_0x486595[a14_0x4d19('0xf')][0x0]);}}[a14_0x4d19('0xa')](_0x560490){console['error'](_0x560490);setTimeout(function(){this['createWebSocket']();}[a14_0x4d19('0xb')](this),0x1388);}}exports[a14_0x4d19('0x11')]=CountingWebSocketService;