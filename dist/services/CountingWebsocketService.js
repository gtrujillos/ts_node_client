var a14_0x1184=['init','createWebSocket','log','init\x20CountingWebSocket','StationContext','cameraSocket','open','Websocket\x20opened:','settings','error','onError','message','incoming','bind','parse','Data','length','createEvent','CountingWebSocketService','defineProperty','__esModule','eventCounter'];(function(_0x5600ea,_0x542171){var _0x59484c=function(_0xb52fe8){while(--_0xb52fe8){_0x5600ea['push'](_0x5600ea['shift']());}};_0x59484c(++_0x542171);}(a14_0x1184,0x147));var a14_0x1ffe=function(_0x2ea899,_0x574a90){_0x2ea899=_0x2ea899-0x0;var _0xf8b0fe=a14_0x1184[_0x2ea899];return _0xf8b0fe;};'use strict';Object[a14_0x1ffe('0x0')](exports,a14_0x1ffe('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x1ffe('0x2')]=0x0;}[a14_0x1ffe('0x3')](){this[a14_0x1ffe('0x4')]();console[a14_0x1ffe('0x5')](a14_0x1ffe('0x6'));}[a14_0x1ffe('0x4')](){const _0x438fb6=require('ws');const _0x548c4d=new _0x438fb6(stationSettings_1[a14_0x1ffe('0x7')]['settings'][a14_0x1ffe('0x8')]);_0x548c4d['on'](a14_0x1ffe('0x9'),function open(){console[a14_0x1ffe('0x5')](a14_0x1ffe('0xa')+stationSettings_1[a14_0x1ffe('0x7')][a14_0x1ffe('0xb')][a14_0x1ffe('0x8')]);this[a14_0x1ffe('0x2')]=0x0;});_0x548c4d['on'](a14_0x1ffe('0xc'),this[a14_0x1ffe('0xd')]['bind'](this));_0x548c4d['on'](a14_0x1ffe('0xe'),this[a14_0x1ffe('0xf')][a14_0x1ffe('0x10')](this));}[a14_0x1ffe('0xf')](_0x1dd804){const _0x36beee=JSON[a14_0x1ffe('0x11')](_0x1dd804);if(_0x36beee['Data']==null||_0x36beee[a14_0x1ffe('0x12')][a14_0x1ffe('0x13')]==0x0){_0x1dd804=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x36beee[a14_0x1ffe('0x12')]!=null&&_0x36beee[a14_0x1ffe('0x12')]['length']>0x0){this[a14_0x1ffe('0x14')](_0x36beee['Data'][0x0]);}}[a14_0x1ffe('0xd')](_0x4d74ea){console[a14_0x1ffe('0xc')](_0x4d74ea);setTimeout(function(){this[a14_0x1ffe('0x4')]();}[a14_0x1ffe('0x10')](this),0x1388);}}exports[a14_0x1ffe('0x15')]=CountingWebSocketService;