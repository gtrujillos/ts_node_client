var a14_0x4358=['cameraSocket','eventCounter','error','onError','bind','message','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','open','Websocket\x20opened:'];(function(_0x30b0de,_0xa38ee5){var _0x3ee30e=function(_0x6690ba){while(--_0x6690ba){_0x30b0de['push'](_0x30b0de['shift']());}};_0x3ee30e(++_0xa38ee5);}(a14_0x4358,0xb4));var a14_0x51e6=function(_0xb163ed,_0x3e8025){_0xb163ed=_0xb163ed-0x0;var _0x165c7e=a14_0x4358[_0xb163ed];return _0x165c7e;};'use strict';Object[a14_0x51e6('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x51e6('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x51e6('0x2')](){console[a14_0x51e6('0x3')](a14_0x51e6('0x4'));this[a14_0x51e6('0x5')]();}['createWebSocket'](){const _0x30f686=require('ws');const _0x521bc5=new _0x30f686(stationSettings_1[a14_0x51e6('0x6')]['settings']['cameraSocket']);_0x521bc5['on'](a14_0x51e6('0x7'),function open(){console[a14_0x51e6('0x3')](a14_0x51e6('0x8')+stationSettings_1[a14_0x51e6('0x6')]['settings'][a14_0x51e6('0x9')]);this[a14_0x51e6('0xa')]=0x0;});_0x521bc5['on'](a14_0x51e6('0xb'),this[a14_0x51e6('0xc')][a14_0x51e6('0xd')](this));_0x521bc5['on'](a14_0x51e6('0xe'),this['incoming'][a14_0x51e6('0xd')](this));}['incoming'](_0x4cfe49){const _0x3d971d=JSON['parse'](_0x4cfe49);if(_0x3d971d[a14_0x51e6('0xf')]==null||_0x3d971d['Data'][a14_0x51e6('0x10')]==0x0){_0x4cfe49=JSON[a14_0x51e6('0x11')](a14_0x51e6('0x12'));}if(_0x3d971d[a14_0x51e6('0xf')]!=null&&_0x3d971d[a14_0x51e6('0xf')][a14_0x51e6('0x10')]>0x0){this[a14_0x51e6('0x13')](_0x3d971d['Data'][0x0]);}}[a14_0x51e6('0xc')](_0x37b9d2){console[a14_0x51e6('0xb')](_0x37b9d2);setTimeout(function(){this[a14_0x51e6('0x5')]();}[a14_0x51e6('0xd')](this),0x1388);}}exports[a14_0x51e6('0x14')]=CountingWebSocketService;