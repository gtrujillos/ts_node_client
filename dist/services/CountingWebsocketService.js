var a14_0x1fb2=['StationContext','settings','cameraSocket','onError','bind','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket'];(function(_0x177fdc,_0x5ba2cc){var _0x273b0a=function(_0x37444c){while(--_0x37444c){_0x177fdc['push'](_0x177fdc['shift']());}};_0x273b0a(++_0x5ba2cc);}(a14_0x1fb2,0xd6));var a14_0x5778=function(_0x867eb8,_0x5dee68){_0x867eb8=_0x867eb8-0x0;var _0x41926e=a14_0x1fb2[_0x867eb8];return _0x41926e;};'use strict';Object[a14_0x5778('0x0')](exports,a14_0x5778('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x5778('0x2'));class CountingWebSocketService{constructor(){this[a14_0x5778('0x3')]=0x0;}[a14_0x5778('0x4')](){console[a14_0x5778('0x5')]('init\x20CountingWebSocket');this[a14_0x5778('0x6')]();}[a14_0x5778('0x6')](){const _0x164883=require('ws');const _0x6c5373=new _0x164883(stationSettings_1[a14_0x5778('0x7')][a14_0x5778('0x8')][a14_0x5778('0x9')]);_0x6c5373['on']('open',function open(){console['log']('Websocket\x20opened:'+stationSettings_1[a14_0x5778('0x7')][a14_0x5778('0x8')][a14_0x5778('0x9')]);this[a14_0x5778('0x3')]=0x0;});_0x6c5373['on']('error',this[a14_0x5778('0xa')][a14_0x5778('0xb')](this));_0x6c5373['on']('message',this[a14_0x5778('0xc')]['bind'](this));}[a14_0x5778('0xc')](_0x225307){const _0x509b54=JSON[a14_0x5778('0xd')](_0x225307);if(_0x509b54['Data']==null||_0x509b54[a14_0x5778('0xe')][a14_0x5778('0xf')]==0x0){_0x225307=JSON['parse'](a14_0x5778('0x10'));}if(_0x509b54[a14_0x5778('0xe')]!=null&&_0x509b54[a14_0x5778('0xe')][a14_0x5778('0xf')]>0x0){this['createEvent'](_0x509b54[a14_0x5778('0xe')][0x0]);}}['onError'](_0x20a4ca){console['error'](_0x20a4ca);setTimeout(function(){this[a14_0x5778('0x6')]();}[a14_0x5778('0xb')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;