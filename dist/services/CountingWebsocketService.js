var a14_0x4580=['length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','bind','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','createWebSocket','settings','cameraSocket','open','log','Websocket\x20opened:','error','incoming','parse','Data'];(function(_0x4b7af3,_0x3bec98){var _0x1f2b36=function(_0x24949e){while(--_0x24949e){_0x4b7af3['push'](_0x4b7af3['shift']());}};_0x1f2b36(++_0x3bec98);}(a14_0x4580,0xa6));var a14_0x69e4=function(_0x1cff9a,_0x1f93b){_0x1cff9a=_0x1cff9a-0x0;var _0x359c7d=a14_0x4580[_0x1cff9a];return _0x359c7d;};'use strict';Object[a14_0x69e4('0x0')](exports,a14_0x69e4('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x69e4('0x2'));class CountingWebSocketService{constructor(){this[a14_0x69e4('0x3')]=0x0;}['init'](){console['log']('init\x20CountingWebSocket');this[a14_0x69e4('0x4')]();}['createWebSocket'](){const _0xc7bf0b=require('ws');const _0x339a5a=new _0xc7bf0b(stationSettings_1['StationContext'][a14_0x69e4('0x5')][a14_0x69e4('0x6')]);_0x339a5a['on'](a14_0x69e4('0x7'),function open(){console[a14_0x69e4('0x8')](a14_0x69e4('0x9')+stationSettings_1['StationContext']['settings']['cameraSocket']);this[a14_0x69e4('0x3')]=0x0;});_0x339a5a['on'](a14_0x69e4('0xa'),this['onError']['bind'](this));_0x339a5a['on']('message',this[a14_0x69e4('0xb')]['bind'](this));}[a14_0x69e4('0xb')](_0x4bdc20){const _0x49ab1a=JSON[a14_0x69e4('0xc')](_0x4bdc20);if(_0x49ab1a[a14_0x69e4('0xd')]==null||_0x49ab1a[a14_0x69e4('0xd')][a14_0x69e4('0xe')]==0x0){_0x4bdc20=JSON[a14_0x69e4('0xc')](a14_0x69e4('0xf'));}if(_0x49ab1a['Data']!=null&&_0x49ab1a[a14_0x69e4('0xd')]['length']>0x0){this['createEvent'](_0x49ab1a[a14_0x69e4('0xd')][0x0]);}}['onError'](_0x1ee592){console[a14_0x69e4('0xa')](_0x1ee592);setTimeout(function(){this[a14_0x69e4('0x4')]();}[a14_0x69e4('0x10')](this),0x1388);}}exports[a14_0x69e4('0x11')]=CountingWebSocketService;