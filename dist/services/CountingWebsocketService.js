var a14_0xedab=['Data','length','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket','StationContext','settings','open','Websocket\x20opened:','cameraSocket','error','onError','bind','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}'];(function(_0x5d6e23,_0x49a13e){var _0x5ae651=function(_0x551019){while(--_0x551019){_0x5d6e23['push'](_0x5d6e23['shift']());}};_0x5ae651(++_0x49a13e);}(a14_0xedab,0x1f1));var a14_0x4fa4=function(_0x7edfc5,_0x424863){_0x7edfc5=_0x7edfc5-0x0;var _0x32ab51=a14_0xedab[_0x7edfc5];return _0x32ab51;};'use strict';Object[a14_0x4fa4('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x4fa4('0x1'));class CountingWebSocketService{constructor(){this[a14_0x4fa4('0x2')]=0x0;}[a14_0x4fa4('0x3')](){console[a14_0x4fa4('0x4')]('init\x20CountingWebSocket');this[a14_0x4fa4('0x5')]();}[a14_0x4fa4('0x5')](){const _0x5b7c57=require('ws');const _0x1d669c=new _0x5b7c57(stationSettings_1[a14_0x4fa4('0x6')][a14_0x4fa4('0x7')]['cameraSocket']);_0x1d669c['on'](a14_0x4fa4('0x8'),function open(){console[a14_0x4fa4('0x4')](a14_0x4fa4('0x9')+stationSettings_1[a14_0x4fa4('0x6')][a14_0x4fa4('0x7')][a14_0x4fa4('0xa')]);this['eventCounter']=0x0;});_0x1d669c['on'](a14_0x4fa4('0xb'),this[a14_0x4fa4('0xc')][a14_0x4fa4('0xd')](this));_0x1d669c['on']('message',this['incoming'][a14_0x4fa4('0xd')](this));}['incoming'](_0xc067dd){const _0x2f83f6=JSON['parse'](_0xc067dd);if(_0x2f83f6['Data']==null||_0x2f83f6['Data']['length']==0x0){_0xc067dd=JSON[a14_0x4fa4('0xe')](a14_0x4fa4('0xf'));}if(_0x2f83f6[a14_0x4fa4('0x10')]!=null&&_0x2f83f6['Data'][a14_0x4fa4('0x11')]>0x0){this['createEvent'](_0x2f83f6[a14_0x4fa4('0x10')][0x0]);}}['onError'](_0x4af5ab){console[a14_0x4fa4('0xb')](_0x4af5ab);setTimeout(function(){this[a14_0x4fa4('0x5')]();}['bind'](this),0x1388);}}exports[a14_0x4fa4('0x12')]=CountingWebSocketService;