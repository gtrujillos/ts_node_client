var a14_0x40b4=['length','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','open','Websocket\x20opened:','error','onError','bind','message','incoming','parse','Data'];(function(_0x2067c6,_0xb55502){var _0x8fa8e9=function(_0x13a37e){while(--_0x13a37e){_0x2067c6['push'](_0x2067c6['shift']());}};_0x8fa8e9(++_0xb55502);}(a14_0x40b4,0x16a));var a14_0x1efd=function(_0x487ad2,_0x48d852){_0x487ad2=_0x487ad2-0x0;var _0x5ad71f=a14_0x40b4[_0x487ad2];return _0x5ad71f;};'use strict';Object[a14_0x1efd('0x0')](exports,a14_0x1efd('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x1efd('0x2'));class CountingWebSocketService{constructor(){this[a14_0x1efd('0x3')]=0x0;}['init'](){console[a14_0x1efd('0x4')](a14_0x1efd('0x5'));this['createWebSocket']();}[a14_0x1efd('0x6')](){const _0x4a50ce=require('ws');const _0xa2f36d=new _0x4a50ce(stationSettings_1[a14_0x1efd('0x7')][a14_0x1efd('0x8')]['cameraSocket']);_0xa2f36d['on'](a14_0x1efd('0x9'),function open(){console['log'](a14_0x1efd('0xa')+stationSettings_1[a14_0x1efd('0x7')]['settings']['cameraSocket']);this[a14_0x1efd('0x3')]=0x0;});_0xa2f36d['on'](a14_0x1efd('0xb'),this[a14_0x1efd('0xc')][a14_0x1efd('0xd')](this));_0xa2f36d['on'](a14_0x1efd('0xe'),this[a14_0x1efd('0xf')][a14_0x1efd('0xd')](this));}[a14_0x1efd('0xf')](_0xca7253){const _0x473cd2=JSON[a14_0x1efd('0x10')](_0xca7253);if(_0x473cd2['Data']==null||_0x473cd2[a14_0x1efd('0x11')]['length']==0x0){_0xca7253=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x473cd2[a14_0x1efd('0x11')]!=null&&_0x473cd2['Data'][a14_0x1efd('0x12')]>0x0){this['createEvent'](_0x473cd2[a14_0x1efd('0x11')][0x0]);}}[a14_0x1efd('0xc')](_0x537b88){console[a14_0x1efd('0xb')](_0x537b88);setTimeout(function(){this[a14_0x1efd('0x6')]();}[a14_0x1efd('0xd')](this),0x1388);}}exports[a14_0x1efd('0x13')]=CountingWebSocketService;