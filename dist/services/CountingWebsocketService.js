var a14_0x36b6=['CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','log','init\x20CountingWebSocket','createWebSocket','settings','open','error','onError','bind','message','incoming','Data','length','parse','createEvent'];(function(_0x4425bb,_0x54b879){var _0x1a9105=function(_0x244528){while(--_0x244528){_0x4425bb['push'](_0x4425bb['shift']());}};_0x1a9105(++_0x54b879);}(a14_0x36b6,0x169));var a14_0xdd2b=function(_0x106765,_0x1277b7){_0x106765=_0x106765-0x0;var _0x19f13e=a14_0x36b6[_0x106765];return _0x19f13e;};'use strict';Object[a14_0xdd2b('0x0')](exports,a14_0xdd2b('0x1'),{'value':!![]});const stationSettings_1=require(a14_0xdd2b('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){console[a14_0xdd2b('0x3')](a14_0xdd2b('0x4'));this[a14_0xdd2b('0x5')]();}[a14_0xdd2b('0x5')](){const _0x1a00c2=require('ws');const _0x1d7755=new _0x1a00c2(stationSettings_1['StationContext'][a14_0xdd2b('0x6')]['cameraSocket']);_0x1d7755['on'](a14_0xdd2b('0x7'),function open(){console[a14_0xdd2b('0x3')]('Websocket\x20opened:'+stationSettings_1['StationContext'][a14_0xdd2b('0x6')]['cameraSocket']);this['eventCounter']=0x0;});_0x1d7755['on'](a14_0xdd2b('0x8'),this[a14_0xdd2b('0x9')][a14_0xdd2b('0xa')](this));_0x1d7755['on'](a14_0xdd2b('0xb'),this[a14_0xdd2b('0xc')][a14_0xdd2b('0xa')](this));}[a14_0xdd2b('0xc')](_0x75b3d6){const _0x3369b8=JSON['parse'](_0x75b3d6);if(_0x3369b8[a14_0xdd2b('0xd')]==null||_0x3369b8[a14_0xdd2b('0xd')][a14_0xdd2b('0xe')]==0x0){_0x75b3d6=JSON[a14_0xdd2b('0xf')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x3369b8['Data']!=null&&_0x3369b8[a14_0xdd2b('0xd')][a14_0xdd2b('0xe')]>0x0){this[a14_0xdd2b('0x10')](_0x3369b8[a14_0xdd2b('0xd')][0x0]);}}[a14_0xdd2b('0x9')](_0x2f21f9){console[a14_0xdd2b('0x8')](_0x2f21f9);setTimeout(function(){this[a14_0xdd2b('0x5')]();}['bind'](this),0x1388);}}exports[a14_0xdd2b('0x11')]=CountingWebSocketService;