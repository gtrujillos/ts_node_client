var a14_0x40bf=['createEvent','CountingWebSocketService','__esModule','../infrastructure/stationSettings','eventCounter','log','createWebSocket','StationContext','settings','cameraSocket','open','error','onError','bind','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}'];(function(_0x2c3df,_0x339af5){var _0x35db01=function(_0x4cdb41){while(--_0x4cdb41){_0x2c3df['push'](_0x2c3df['shift']());}};_0x35db01(++_0x339af5);}(a14_0x40bf,0xc8));var a14_0x1372=function(_0x31c6a6,_0x57f89f){_0x31c6a6=_0x31c6a6-0x0;var _0x1a57fc=a14_0x40bf[_0x31c6a6];return _0x1a57fc;};'use strict';Object['defineProperty'](exports,a14_0x1372('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x1372('0x1'));class CountingWebSocketService{constructor(){this[a14_0x1372('0x2')]=0x0;}['init'](){console[a14_0x1372('0x3')]('init\x20CountingWebSocket');this[a14_0x1372('0x4')]();}[a14_0x1372('0x4')](){const _0x40ea37=require('ws');const _0x5a2889=new _0x40ea37(stationSettings_1[a14_0x1372('0x5')][a14_0x1372('0x6')][a14_0x1372('0x7')]);_0x5a2889['on'](a14_0x1372('0x8'),function open(){console[a14_0x1372('0x3')]('Websocket\x20opened:'+stationSettings_1['StationContext'][a14_0x1372('0x6')]['cameraSocket']);this[a14_0x1372('0x2')]=0x0;});_0x5a2889['on'](a14_0x1372('0x9'),this[a14_0x1372('0xa')][a14_0x1372('0xb')](this));_0x5a2889['on']('message',this['incoming'][a14_0x1372('0xb')](this));}['incoming'](_0xb20ddf){const _0x12d3bb=JSON['parse'](_0xb20ddf);if(_0x12d3bb[a14_0x1372('0xc')]==null||_0x12d3bb[a14_0x1372('0xc')][a14_0x1372('0xd')]==0x0){_0xb20ddf=JSON[a14_0x1372('0xe')](a14_0x1372('0xf'));}if(_0x12d3bb[a14_0x1372('0xc')]!=null&&_0x12d3bb[a14_0x1372('0xc')][a14_0x1372('0xd')]>0x0){this[a14_0x1372('0x10')](_0x12d3bb[a14_0x1372('0xc')][0x0]);}}[a14_0x1372('0xa')](_0x51eab7){console[a14_0x1372('0x9')](_0x51eab7);setTimeout(function(){this[a14_0x1372('0x4')]();}[a14_0x1372('0xb')](this),0x1388);}}exports[a14_0x1372('0x11')]=CountingWebSocketService;