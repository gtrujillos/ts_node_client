var a14_0x1df8=['../infrastructure/stationSettings','init','log','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','StationContext','eventCounter','error','onError','bind','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','CountingWebSocketService','__esModule'];(function(_0x2b997c,_0x3f392d){var _0x5aec3a=function(_0x148713){while(--_0x148713){_0x2b997c['push'](_0x2b997c['shift']());}};_0x5aec3a(++_0x3f392d);}(a14_0x1df8,0x77));var a14_0x1a38=function(_0x37e300,_0x43c773){_0x37e300=_0x37e300-0x0;var _0x5ebfc4=a14_0x1df8[_0x37e300];return _0x5ebfc4;};'use strict';Object['defineProperty'](exports,a14_0x1a38('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x1a38('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x1a38('0x2')](){this['createWebSocket']();console[a14_0x1a38('0x3')](a14_0x1a38('0x4'));}[a14_0x1a38('0x5')](){const _0x595450=require('ws');const _0x35f924=new _0x595450(stationSettings_1['StationContext'][a14_0x1a38('0x6')][a14_0x1a38('0x7')]);_0x35f924['on'](a14_0x1a38('0x8'),function open(){console[a14_0x1a38('0x3')]('Websocket\x20opened:'+stationSettings_1[a14_0x1a38('0x9')][a14_0x1a38('0x6')]['cameraSocket']);this[a14_0x1a38('0xa')]=0x0;});_0x35f924['on'](a14_0x1a38('0xb'),this[a14_0x1a38('0xc')][a14_0x1a38('0xd')](this));_0x35f924['on']('message',this[a14_0x1a38('0xe')][a14_0x1a38('0xd')](this));}[a14_0x1a38('0xe')](_0x3ba1b6){const _0x13ecb6=JSON[a14_0x1a38('0xf')](_0x3ba1b6);if(_0x13ecb6[a14_0x1a38('0x10')]==null||_0x13ecb6[a14_0x1a38('0x10')][a14_0x1a38('0x11')]==0x0){_0x3ba1b6=JSON['parse'](a14_0x1a38('0x12'));}if(_0x13ecb6['Data']!=null&&_0x13ecb6['Data'][a14_0x1a38('0x11')]>0x0){this['createEvent'](_0x13ecb6[a14_0x1a38('0x10')][0x0]);}}[a14_0x1a38('0xc')](_0x2a877c){console[a14_0x1a38('0xb')](_0x2a877c);setTimeout(function(){this[a14_0x1a38('0x5')]();}[a14_0x1a38('0xd')](this),0x1388);}}exports[a14_0x1a38('0x13')]=CountingWebSocketService;