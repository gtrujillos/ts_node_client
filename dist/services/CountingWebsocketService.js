var a16_0x259c=['message','bind','incoming','parse','Data','length','createEvent','createWebSocket','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','init','init\x20CountingWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','error','onError'];(function(_0x38a66a,_0x24bb08){var _0x2ec5b7=function(_0x3e074d){while(--_0x3e074d){_0x38a66a['push'](_0x38a66a['shift']());}};_0x2ec5b7(++_0x24bb08);}(a16_0x259c,0x6d));var a16_0x14d3=function(_0x2797d2,_0x7192fb){_0x2797d2=_0x2797d2-0x0;var _0x4e7805=a16_0x259c[_0x2797d2];return _0x4e7805;};'use strict';Object[a16_0x14d3('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a16_0x14d3('0x1'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a16_0x14d3('0x2')](){console['log'](a16_0x14d3('0x3'));this['createWebSocket']();}['createWebSocket'](){const _0x3781c1=require('ws');const _0x140455=new _0x3781c1(stationSettings_1[a16_0x14d3('0x4')][a16_0x14d3('0x5')][a16_0x14d3('0x6')]);_0x140455['on'](a16_0x14d3('0x7'),function open(){console['log'](a16_0x14d3('0x8')+stationSettings_1[a16_0x14d3('0x4')][a16_0x14d3('0x5')][a16_0x14d3('0x6')]);this['eventCounter']=0x0;});_0x140455['on'](a16_0x14d3('0x9'),this[a16_0x14d3('0xa')]['bind'](this));_0x140455['on'](a16_0x14d3('0xb'),this['incoming'][a16_0x14d3('0xc')](this));}[a16_0x14d3('0xd')](_0xea1eb1){const _0x1a3278=JSON[a16_0x14d3('0xe')](_0xea1eb1);if(_0x1a3278[a16_0x14d3('0xf')]==null||_0x1a3278[a16_0x14d3('0xf')][a16_0x14d3('0x10')]==0x0){_0xea1eb1=JSON[a16_0x14d3('0xe')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x1a3278[a16_0x14d3('0xf')]!=null&&_0x1a3278[a16_0x14d3('0xf')][a16_0x14d3('0x10')]>0x0){this[a16_0x14d3('0x11')](_0x1a3278[a16_0x14d3('0xf')][0x0]);}}['onError'](_0xdbfc2d){console['error'](_0xdbfc2d);setTimeout(function(){this[a16_0x14d3('0x12')]();}[a16_0x14d3('0xc')](this),0x1388);}}exports[a16_0x14d3('0x13')]=CountingWebSocketService;