var a14_0x3f4e=['onError','bind','message','incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','error','CountingWebSocketService','defineProperty','eventCounter','init','createWebSocket','init\x20CountingWebSocket','StationContext','settings','cameraSocket','open','log','Websocket\x20opened:'];(function(_0x222103,_0x29432f){var _0x4d45bf=function(_0x48802d){while(--_0x48802d){_0x222103['push'](_0x222103['shift']());}};_0x4d45bf(++_0x29432f);}(a14_0x3f4e,0x130));var a14_0x7bf7=function(_0x3df5ee,_0x855d24){_0x3df5ee=_0x3df5ee-0x0;var _0x556432=a14_0x3f4e[_0x3df5ee];return _0x556432;};'use strict';Object[a14_0x7bf7('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x7bf7('0x1')]=0x0;}[a14_0x7bf7('0x2')](){this[a14_0x7bf7('0x3')]();console['log'](a14_0x7bf7('0x4'));}[a14_0x7bf7('0x3')](){const _0xc917b8=require('ws');const _0xf0c70d=new _0xc917b8(stationSettings_1[a14_0x7bf7('0x5')][a14_0x7bf7('0x6')][a14_0x7bf7('0x7')]);_0xf0c70d['on'](a14_0x7bf7('0x8'),function open(){console[a14_0x7bf7('0x9')](a14_0x7bf7('0xa')+stationSettings_1[a14_0x7bf7('0x5')]['settings'][a14_0x7bf7('0x7')]);this['eventCounter']=0x0;});_0xf0c70d['on']('error',this[a14_0x7bf7('0xb')][a14_0x7bf7('0xc')](this));_0xf0c70d['on'](a14_0x7bf7('0xd'),this[a14_0x7bf7('0xe')]['bind'](this));}['incoming'](_0x4ad2c5){const _0x2dfb42=JSON['parse'](_0x4ad2c5);if(_0x2dfb42[a14_0x7bf7('0xf')]==null||_0x2dfb42[a14_0x7bf7('0xf')][a14_0x7bf7('0x10')]==0x0){_0x4ad2c5=JSON[a14_0x7bf7('0x11')](a14_0x7bf7('0x12'));}if(_0x2dfb42[a14_0x7bf7('0xf')]!=null&&_0x2dfb42[a14_0x7bf7('0xf')][a14_0x7bf7('0x10')]>0x0){this['createEvent'](_0x2dfb42[a14_0x7bf7('0xf')][0x0]);}}['onError'](_0x3258f6){console[a14_0x7bf7('0x13')](_0x3258f6);setTimeout(function(){this['createWebSocket']();}[a14_0x7bf7('0xc')](this),0x1388);}}exports[a14_0x7bf7('0x14')]=CountingWebSocketService;