var a14_0x1bae=['Data','length','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','log','init\x20CountingWebSocket','createWebSocket','StationContext','open','Websocket\x20opened:','cameraSocket','eventCounter','error','onError','bind','incoming','parse'];(function(_0x2f4be0,_0x6100c1){var _0x5e30c3=function(_0x4ffa40){while(--_0x4ffa40){_0x2f4be0['push'](_0x2f4be0['shift']());}};_0x5e30c3(++_0x6100c1);}(a14_0x1bae,0xe0));var a14_0x663f=function(_0x361a6b,_0x1a00fb){_0x361a6b=_0x361a6b-0x0;var _0x231901=a14_0x1bae[_0x361a6b];return _0x231901;};'use strict';Object[a14_0x663f('0x0')](exports,a14_0x663f('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x663f('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){console[a14_0x663f('0x3')](a14_0x663f('0x4'));this['createWebSocket']();}[a14_0x663f('0x5')](){const _0xe1d24f=require('ws');const _0xc7b7fe=new _0xe1d24f(stationSettings_1[a14_0x663f('0x6')]['settings']['cameraSocket']);_0xc7b7fe['on'](a14_0x663f('0x7'),function open(){console[a14_0x663f('0x3')](a14_0x663f('0x8')+stationSettings_1[a14_0x663f('0x6')]['settings'][a14_0x663f('0x9')]);this[a14_0x663f('0xa')]=0x0;});_0xc7b7fe['on'](a14_0x663f('0xb'),this[a14_0x663f('0xc')][a14_0x663f('0xd')](this));_0xc7b7fe['on']('message',this[a14_0x663f('0xe')][a14_0x663f('0xd')](this));}[a14_0x663f('0xe')](_0x410cab){const _0x43bc5b=JSON[a14_0x663f('0xf')](_0x410cab);if(_0x43bc5b[a14_0x663f('0x10')]==null||_0x43bc5b[a14_0x663f('0x10')][a14_0x663f('0x11')]==0x0){_0x410cab=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x43bc5b['Data']!=null&&_0x43bc5b[a14_0x663f('0x10')][a14_0x663f('0x11')]>0x0){this[a14_0x663f('0x12')](_0x43bc5b[a14_0x663f('0x10')][0x0]);}}[a14_0x663f('0xc')](_0x495e33){console[a14_0x663f('0xb')](_0x495e33);setTimeout(function(){this[a14_0x663f('0x5')]();}[a14_0x663f('0xd')](this),0x1388);}}exports[a14_0x663f('0x13')]=CountingWebSocketService;