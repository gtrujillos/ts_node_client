var a14_0x5282=['init\x20CountingWebSocket','createWebSocket','StationContext','cameraSocket','open','settings','error','bind','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','eventCounter','log'];(function(_0xcc25ec,_0x15576b){var _0x1f238c=function(_0x45eb04){while(--_0x45eb04){_0xcc25ec['push'](_0xcc25ec['shift']());}};_0x1f238c(++_0x15576b);}(a14_0x5282,0x1c4));var a14_0x283a=function(_0x221041,_0x3cb8f9){_0x221041=_0x221041-0x0;var _0x485212=a14_0x5282[_0x221041];return _0x485212;};'use strict';Object[a14_0x283a('0x0')](exports,a14_0x283a('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x283a('0x2')]=0x0;}['init'](){console[a14_0x283a('0x3')](a14_0x283a('0x4'));this[a14_0x283a('0x5')]();}[a14_0x283a('0x5')](){const _0xf426c3=require('ws');const _0x43ec1a=new _0xf426c3(stationSettings_1[a14_0x283a('0x6')]['settings'][a14_0x283a('0x7')]);_0x43ec1a['on'](a14_0x283a('0x8'),function open(){console[a14_0x283a('0x3')]('Websocket\x20opened:'+stationSettings_1[a14_0x283a('0x6')][a14_0x283a('0x9')][a14_0x283a('0x7')]);this[a14_0x283a('0x2')]=0x0;});_0x43ec1a['on'](a14_0x283a('0xa'),this['onError'][a14_0x283a('0xb')](this));_0x43ec1a['on']('message',this[a14_0x283a('0xc')][a14_0x283a('0xb')](this));}['incoming'](_0x31c98d){const _0x193550=JSON[a14_0x283a('0xd')](_0x31c98d);if(_0x193550['Data']==null||_0x193550[a14_0x283a('0xe')][a14_0x283a('0xf')]==0x0){_0x31c98d=JSON[a14_0x283a('0xd')](a14_0x283a('0x10'));}if(_0x193550[a14_0x283a('0xe')]!=null&&_0x193550['Data'][a14_0x283a('0xf')]>0x0){this[a14_0x283a('0x11')](_0x193550[a14_0x283a('0xe')][0x0]);}}['onError'](_0x5524b3){console[a14_0x283a('0xa')](_0x5524b3);setTimeout(function(){this[a14_0x283a('0x5')]();}[a14_0x283a('0xb')](this),0x1388);}}exports[a14_0x283a('0x12')]=CountingWebSocketService;