var a16_0x495e=['open','log','Websocket\x20opened:','StationContext','error','bind','message','incoming','Data','length','parse','createEvent','onError','CountingWebSocketService','__esModule','../infrastructure/stationSettings','eventCounter','init','init\x20CountingWebSocket','createWebSocket','cameraSocket'];(function(_0x3562b5,_0x22dabc){var _0x54d52d=function(_0x27bd3d){while(--_0x27bd3d){_0x3562b5['push'](_0x3562b5['shift']());}};_0x54d52d(++_0x22dabc);}(a16_0x495e,0x15e));var a16_0x178a=function(_0xffb2b8,_0x19c43a){_0xffb2b8=_0xffb2b8-0x0;var _0x2f6ccb=a16_0x495e[_0xffb2b8];return _0x2f6ccb;};'use strict';Object['defineProperty'](exports,a16_0x178a('0x0'),{'value':!![]});const stationSettings_1=require(a16_0x178a('0x1'));class CountingWebSocketService{constructor(){this[a16_0x178a('0x2')]=0x0;}[a16_0x178a('0x3')](){console['log'](a16_0x178a('0x4'));this[a16_0x178a('0x5')]();}[a16_0x178a('0x5')](){const _0x1af190=require('ws');const _0x70263a=new _0x1af190(stationSettings_1['StationContext']['settings'][a16_0x178a('0x6')]);_0x70263a['on'](a16_0x178a('0x7'),function open(){console[a16_0x178a('0x8')](a16_0x178a('0x9')+stationSettings_1[a16_0x178a('0xa')]['settings'][a16_0x178a('0x6')]);this[a16_0x178a('0x2')]=0x0;});_0x70263a['on'](a16_0x178a('0xb'),this['onError'][a16_0x178a('0xc')](this));_0x70263a['on'](a16_0x178a('0xd'),this[a16_0x178a('0xe')]['bind'](this));}[a16_0x178a('0xe')](_0x1c9299){const _0x52a5e2=JSON['parse'](_0x1c9299);if(_0x52a5e2['Data']==null||_0x52a5e2[a16_0x178a('0xf')][a16_0x178a('0x10')]==0x0){_0x1c9299=JSON[a16_0x178a('0x11')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x52a5e2['Data']!=null&&_0x52a5e2[a16_0x178a('0xf')][a16_0x178a('0x10')]>0x0){this[a16_0x178a('0x12')](_0x52a5e2['Data'][0x0]);}}[a16_0x178a('0x13')](_0x3a61d1){console[a16_0x178a('0xb')](_0x3a61d1);setTimeout(function(){this[a16_0x178a('0x5')]();}[a16_0x178a('0xc')](this),0x1388);}}exports[a16_0x178a('0x14')]=CountingWebSocketService;