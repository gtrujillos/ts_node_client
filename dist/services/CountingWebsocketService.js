var a13_0x9850=['{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','Data','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','createWebSocket','init\x20CountingWebSocket','StationContext','open','log','Websocket\x20opened:','settings','error','onError','bind','incoming','parse','length'];(function(_0x30ae10,_0x20fc41){var _0x30876a=function(_0x5a70a6){while(--_0x5a70a6){_0x30ae10['push'](_0x30ae10['shift']());}};_0x30876a(++_0x20fc41);}(a13_0x9850,0x1e7));var a13_0x430b=function(_0x4fd3d0,_0x120fa0){_0x4fd3d0=_0x4fd3d0-0x0;var _0x50f76b=a13_0x9850[_0x4fd3d0];return _0x50f76b;};'use strict';Object[a13_0x430b('0x0')](exports,a13_0x430b('0x1'),{'value':!![]});const stationSettings_1=require(a13_0x430b('0x2'));class CountingWebSocketService{constructor(){this[a13_0x430b('0x3')]=0x0;}['init'](){this[a13_0x430b('0x4')]();console['log'](a13_0x430b('0x5'));}[a13_0x430b('0x4')](){const _0x2d5883=require('ws');const _0x538c4c=new _0x2d5883(stationSettings_1[a13_0x430b('0x6')]['settings']['cameraSocket']);_0x538c4c['on'](a13_0x430b('0x7'),function open(){console[a13_0x430b('0x8')](a13_0x430b('0x9')+stationSettings_1[a13_0x430b('0x6')][a13_0x430b('0xa')]['cameraSocket']);this[a13_0x430b('0x3')]=0x0;});_0x538c4c['on'](a13_0x430b('0xb'),this[a13_0x430b('0xc')][a13_0x430b('0xd')](this));_0x538c4c['on']('message',this['incoming']['bind'](this));}[a13_0x430b('0xe')](_0x1defc6){const _0x1ed2a4=JSON[a13_0x430b('0xf')](_0x1defc6);if(_0x1ed2a4['Data']==null||_0x1ed2a4['Data'][a13_0x430b('0x10')]==0x0){_0x1defc6=JSON[a13_0x430b('0xf')](a13_0x430b('0x11'));}if(_0x1ed2a4[a13_0x430b('0x12')]!=null&&_0x1ed2a4['Data'][a13_0x430b('0x10')]>0x0){this[a13_0x430b('0x13')](_0x1ed2a4[a13_0x430b('0x12')][0x0]);}}['onError'](_0x501d9e){console['error'](_0x501d9e);setTimeout(function(){this[a13_0x430b('0x4')]();}['bind'](this),0x1388);}}exports[a13_0x430b('0x14')]=CountingWebSocketService;