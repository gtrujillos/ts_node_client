var a14_0x376f=['eventCounter','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','log','error','onError','bind','message','incoming','Data','length','parse','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings'];(function(_0x49ceff,_0x2ec5eb){var _0x48d33b=function(_0x19cfb1){while(--_0x19cfb1){_0x49ceff['push'](_0x49ceff['shift']());}};_0x48d33b(++_0x2ec5eb);}(a14_0x376f,0xe4));var a14_0xba95=function(_0x468505,_0xaa398){_0x468505=_0x468505-0x0;var _0x3526c0=a14_0x376f[_0x468505];return _0x3526c0;};'use strict';Object[a14_0xba95('0x0')](exports,a14_0xba95('0x1'),{'value':!![]});const stationSettings_1=require(a14_0xba95('0x2'));class CountingWebSocketService{constructor(){this[a14_0xba95('0x3')]=0x0;}['init'](){console['log'](a14_0xba95('0x4'));this[a14_0xba95('0x5')]();}['createWebSocket'](){const _0x11ee24=require('ws');const _0x519f40=new _0x11ee24(stationSettings_1['StationContext'][a14_0xba95('0x6')][a14_0xba95('0x7')]);_0x519f40['on'](a14_0xba95('0x8'),function open(){console[a14_0xba95('0x9')]('Websocket\x20opened:'+stationSettings_1['StationContext'][a14_0xba95('0x6')][a14_0xba95('0x7')]);this['eventCounter']=0x0;});_0x519f40['on'](a14_0xba95('0xa'),this[a14_0xba95('0xb')][a14_0xba95('0xc')](this));_0x519f40['on'](a14_0xba95('0xd'),this[a14_0xba95('0xe')]['bind'](this));}['incoming'](_0x4502c5){const _0x30bda1=JSON['parse'](_0x4502c5);if(_0x30bda1[a14_0xba95('0xf')]==null||_0x30bda1[a14_0xba95('0xf')][a14_0xba95('0x10')]==0x0){_0x4502c5=JSON[a14_0xba95('0x11')](a14_0xba95('0x12'));}if(_0x30bda1[a14_0xba95('0xf')]!=null&&_0x30bda1['Data']['length']>0x0){this[a14_0xba95('0x13')](_0x30bda1[a14_0xba95('0xf')][0x0]);}}['onError'](_0x20b9c3){console['error'](_0x20b9c3);setTimeout(function(){this[a14_0xba95('0x5')]();}[a14_0xba95('0xc')](this),0x1388);}}exports[a14_0xba95('0x14')]=CountingWebSocketService;