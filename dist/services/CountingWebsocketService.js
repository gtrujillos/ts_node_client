var a14_0x2f64=['defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','createWebSocket','log','init\x20CountingWebSocket','StationContext','open','Websocket\x20opened:','settings','cameraSocket','error','onError','bind','message','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','createEvent','CountingWebSocketService'];(function(_0x37e53e,_0x41fa36){var _0x511dfb=function(_0x5c6cdb){while(--_0x5c6cdb){_0x37e53e['push'](_0x37e53e['shift']());}};_0x511dfb(++_0x41fa36);}(a14_0x2f64,0xfd));var a14_0x1543=function(_0x574232,_0x483990){_0x574232=_0x574232-0x0;var _0x35881f=a14_0x2f64[_0x574232];return _0x35881f;};'use strict';Object[a14_0x1543('0x0')](exports,a14_0x1543('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x1543('0x2'));class CountingWebSocketService{constructor(){this[a14_0x1543('0x3')]=0x0;}['init'](){this[a14_0x1543('0x4')]();console[a14_0x1543('0x5')](a14_0x1543('0x6'));}['createWebSocket'](){const _0x4a8520=require('ws');const _0x1c27b4=new _0x4a8520(stationSettings_1[a14_0x1543('0x7')]['settings']['cameraSocket']);_0x1c27b4['on'](a14_0x1543('0x8'),function open(){console[a14_0x1543('0x5')](a14_0x1543('0x9')+stationSettings_1[a14_0x1543('0x7')][a14_0x1543('0xa')][a14_0x1543('0xb')]);this[a14_0x1543('0x3')]=0x0;});_0x1c27b4['on'](a14_0x1543('0xc'),this[a14_0x1543('0xd')][a14_0x1543('0xe')](this));_0x1c27b4['on'](a14_0x1543('0xf'),this[a14_0x1543('0x10')][a14_0x1543('0xe')](this));}[a14_0x1543('0x10')](_0x3887bf){const _0x504776=JSON[a14_0x1543('0x11')](_0x3887bf);if(_0x504776[a14_0x1543('0x12')]==null||_0x504776[a14_0x1543('0x12')]['length']==0x0){_0x3887bf=JSON[a14_0x1543('0x11')](a14_0x1543('0x13'));}if(_0x504776[a14_0x1543('0x12')]!=null&&_0x504776[a14_0x1543('0x12')][a14_0x1543('0x14')]>0x0){this[a14_0x1543('0x15')](_0x504776[a14_0x1543('0x12')][0x0]);}}[a14_0x1543('0xd')](_0x5a1bfc){console[a14_0x1543('0xc')](_0x5a1bfc);setTimeout(function(){this[a14_0x1543('0x4')]();}[a14_0x1543('0xe')](this),0x1388);}}exports[a14_0x1543('0x16')]=CountingWebSocketService;