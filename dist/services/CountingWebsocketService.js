var a14_0xa141=['Data','length','parse','createEvent','CountingWebSocketService','__esModule','eventCounter','init','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','log','Websocket\x20opened:','StationContext','error','onError','bind','message','incoming'];(function(_0x10dfa9,_0x1cb742){var _0x1fc756=function(_0xfcf3f3){while(--_0xfcf3f3){_0x10dfa9['push'](_0x10dfa9['shift']());}};_0x1fc756(++_0x1cb742);}(a14_0xa141,0x1e8));var a14_0x23c1=function(_0x42ed01,_0x5d1999){_0x42ed01=_0x42ed01-0x0;var _0x48d686=a14_0xa141[_0x42ed01];return _0x48d686;};'use strict';Object['defineProperty'](exports,a14_0x23c1('0x0'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x23c1('0x1')]=0x0;}[a14_0x23c1('0x2')](){console['log'](a14_0x23c1('0x3'));this['createWebSocket']();}[a14_0x23c1('0x4')](){const _0x15953d=require('ws');const _0x419702=new _0x15953d(stationSettings_1['StationContext'][a14_0x23c1('0x5')][a14_0x23c1('0x6')]);_0x419702['on'](a14_0x23c1('0x7'),function open(){console[a14_0x23c1('0x8')](a14_0x23c1('0x9')+stationSettings_1[a14_0x23c1('0xa')][a14_0x23c1('0x5')]['cameraSocket']);this['eventCounter']=0x0;});_0x419702['on'](a14_0x23c1('0xb'),this[a14_0x23c1('0xc')][a14_0x23c1('0xd')](this));_0x419702['on'](a14_0x23c1('0xe'),this['incoming'][a14_0x23c1('0xd')](this));}[a14_0x23c1('0xf')](_0x2b4724){const _0x3f8c9a=JSON['parse'](_0x2b4724);if(_0x3f8c9a['Data']==null||_0x3f8c9a[a14_0x23c1('0x10')][a14_0x23c1('0x11')]==0x0){_0x2b4724=JSON[a14_0x23c1('0x12')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x3f8c9a['Data']!=null&&_0x3f8c9a['Data'][a14_0x23c1('0x11')]>0x0){this[a14_0x23c1('0x13')](_0x3f8c9a[a14_0x23c1('0x10')][0x0]);}}[a14_0x23c1('0xc')](_0x5e73ae){console[a14_0x23c1('0xb')](_0x5e73ae);setTimeout(function(){this[a14_0x23c1('0x4')]();}[a14_0x23c1('0xd')](this),0x1388);}}exports[a14_0x23c1('0x14')]=CountingWebSocketService;