var a14_0x5638=['bind','message','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','cameraSocket','open','settings','eventCounter','error','onError'];(function(_0x2cfa64,_0x291e9f){var _0x358c19=function(_0x32e88f){while(--_0x32e88f){_0x2cfa64['push'](_0x2cfa64['shift']());}};_0x358c19(++_0x291e9f);}(a14_0x5638,0x76));var a14_0x327f=function(_0x3dc41d,_0x16c549){_0x3dc41d=_0x3dc41d-0x0;var _0x206e17=a14_0x5638[_0x3dc41d];return _0x206e17;};'use strict';Object[a14_0x327f('0x0')](exports,a14_0x327f('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x327f('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x327f('0x3')](){console[a14_0x327f('0x4')](a14_0x327f('0x5'));this['createWebSocket']();}[a14_0x327f('0x6')](){const _0x339ddd=require('ws');const _0x28b598=new _0x339ddd(stationSettings_1[a14_0x327f('0x7')]['settings'][a14_0x327f('0x8')]);_0x28b598['on'](a14_0x327f('0x9'),function open(){console[a14_0x327f('0x4')]('Websocket\x20opened:'+stationSettings_1[a14_0x327f('0x7')][a14_0x327f('0xa')]['cameraSocket']);this[a14_0x327f('0xb')]=0x0;});_0x28b598['on'](a14_0x327f('0xc'),this[a14_0x327f('0xd')][a14_0x327f('0xe')](this));_0x28b598['on'](a14_0x327f('0xf'),this[a14_0x327f('0x10')][a14_0x327f('0xe')](this));}[a14_0x327f('0x10')](_0x8e831b){const _0x28d0d1=JSON[a14_0x327f('0x11')](_0x8e831b);if(_0x28d0d1[a14_0x327f('0x12')]==null||_0x28d0d1[a14_0x327f('0x12')]['length']==0x0){_0x8e831b=JSON['parse'](a14_0x327f('0x13'));}if(_0x28d0d1['Data']!=null&&_0x28d0d1[a14_0x327f('0x12')][a14_0x327f('0x14')]>0x0){this['createEvent'](_0x28d0d1[a14_0x327f('0x12')][0x0]);}}[a14_0x327f('0xd')](_0x2e1168){console['error'](_0x2e1168);setTimeout(function(){this[a14_0x327f('0x6')]();}[a14_0x327f('0xe')](this),0x1388);}}exports[a14_0x327f('0x15')]=CountingWebSocketService;