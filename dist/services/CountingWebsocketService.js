var a14_0x5140=['error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','defineProperty','__esModule','../infrastructure/stationSettings','init','createWebSocket','log','init\x20CountingWebSocket','StationContext','settings','cameraSocket','eventCounter'];(function(_0x567b0b,_0x2c3afb){var _0x248385=function(_0xcbf8d3){while(--_0xcbf8d3){_0x567b0b['push'](_0x567b0b['shift']());}};_0x248385(++_0x2c3afb);}(a14_0x5140,0x135));var a14_0x3e1e=function(_0x4975f8,_0x12bdcd){_0x4975f8=_0x4975f8-0x0;var _0x401d97=a14_0x5140[_0x4975f8];return _0x401d97;};'use strict';Object[a14_0x3e1e('0x0')](exports,a14_0x3e1e('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x3e1e('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x3e1e('0x3')](){this[a14_0x3e1e('0x4')]();console[a14_0x3e1e('0x5')](a14_0x3e1e('0x6'));}[a14_0x3e1e('0x4')](){const _0x5e69d2=require('ws');const _0x49fc80=new _0x5e69d2(stationSettings_1[a14_0x3e1e('0x7')][a14_0x3e1e('0x8')][a14_0x3e1e('0x9')]);_0x49fc80['on']('open',function open(){console[a14_0x3e1e('0x5')]('Websocket\x20opened:'+stationSettings_1[a14_0x3e1e('0x7')][a14_0x3e1e('0x8')][a14_0x3e1e('0x9')]);this[a14_0x3e1e('0xa')]=0x0;});_0x49fc80['on'](a14_0x3e1e('0xb'),this[a14_0x3e1e('0xc')][a14_0x3e1e('0xd')](this));_0x49fc80['on'](a14_0x3e1e('0xe'),this[a14_0x3e1e('0xf')]['bind'](this));}[a14_0x3e1e('0xf')](_0x540820){const _0x5dcce6=JSON[a14_0x3e1e('0x10')](_0x540820);if(_0x5dcce6[a14_0x3e1e('0x11')]==null||_0x5dcce6[a14_0x3e1e('0x11')][a14_0x3e1e('0x12')]==0x0){_0x540820=JSON['parse'](a14_0x3e1e('0x13'));}if(_0x5dcce6[a14_0x3e1e('0x11')]!=null&&_0x5dcce6[a14_0x3e1e('0x11')][a14_0x3e1e('0x12')]>0x0){this['createEvent'](_0x5dcce6[a14_0x3e1e('0x11')][0x0]);}}['onError'](_0x131f62){console['error'](_0x131f62);setTimeout(function(){this[a14_0x3e1e('0x4')]();}[a14_0x3e1e('0xd')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;