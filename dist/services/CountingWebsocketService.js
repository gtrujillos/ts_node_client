var a14_0xe6d4=['error','bind','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','onError','CountingWebSocketService','defineProperty','log','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','eventCounter'];(function(_0x2c309c,_0x1f0c10){var _0x14da8e=function(_0x4e0fa0){while(--_0x4e0fa0){_0x2c309c['push'](_0x2c309c['shift']());}};_0x14da8e(++_0x1f0c10);}(a14_0xe6d4,0x14d));var a14_0x3a94=function(_0x4a77b8,_0x1543f8){_0x4a77b8=_0x4a77b8-0x0;var _0x2339b9=a14_0xe6d4[_0x4a77b8];return _0x2339b9;};'use strict';Object[a14_0x3a94('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){console[a14_0x3a94('0x1')]('init\x20CountingWebSocket');this['createWebSocket']();}[a14_0x3a94('0x2')](){const _0x11b11a=require('ws');const _0x2ab636=new _0x11b11a(stationSettings_1[a14_0x3a94('0x3')][a14_0x3a94('0x4')][a14_0x3a94('0x5')]);_0x2ab636['on'](a14_0x3a94('0x6'),function open(){console['log'](a14_0x3a94('0x7')+stationSettings_1[a14_0x3a94('0x3')][a14_0x3a94('0x4')]['cameraSocket']);this[a14_0x3a94('0x8')]=0x0;});_0x2ab636['on'](a14_0x3a94('0x9'),this['onError'][a14_0x3a94('0xa')](this));_0x2ab636['on']('message',this[a14_0x3a94('0xb')]['bind'](this));}[a14_0x3a94('0xb')](_0x56bd39){const _0x4b80a2=JSON[a14_0x3a94('0xc')](_0x56bd39);if(_0x4b80a2[a14_0x3a94('0xd')]==null||_0x4b80a2[a14_0x3a94('0xd')][a14_0x3a94('0xe')]==0x0){_0x56bd39=JSON[a14_0x3a94('0xc')](a14_0x3a94('0xf'));}if(_0x4b80a2[a14_0x3a94('0xd')]!=null&&_0x4b80a2[a14_0x3a94('0xd')]['length']>0x0){this[a14_0x3a94('0x10')](_0x4b80a2[a14_0x3a94('0xd')][0x0]);}}[a14_0x3a94('0x11')](_0x1c716e){console[a14_0x3a94('0x9')](_0x1c716e);setTimeout(function(){this[a14_0x3a94('0x2')]();}[a14_0x3a94('0xa')](this),0x1388);}}exports[a14_0x3a94('0x12')]=CountingWebSocketService;