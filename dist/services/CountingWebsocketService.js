var a14_0x4650=['StationContext','cameraSocket','open','Websocket\x20opened:','error','onError','bind','incoming','parse','Data','length','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','log','init\x20CountingWebSocket','createWebSocket'];(function(_0x2318d6,_0x52f480){var _0x2a6a1d=function(_0x2f5c8a){while(--_0x2f5c8a){_0x2318d6['push'](_0x2318d6['shift']());}};_0x2a6a1d(++_0x52f480);}(a14_0x4650,0x175));var a14_0x2862=function(_0x6a8013,_0x7a70a2){_0x6a8013=_0x6a8013-0x0;var _0x3a8c2d=a14_0x4650[_0x6a8013];return _0x3a8c2d;};'use strict';Object[a14_0x2862('0x0')](exports,a14_0x2862('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x2862('0x2'));class CountingWebSocketService{constructor(){this[a14_0x2862('0x3')]=0x0;}['init'](){console[a14_0x2862('0x4')](a14_0x2862('0x5'));this[a14_0x2862('0x6')]();}[a14_0x2862('0x6')](){const _0x211f6b=require('ws');const _0x16a51f=new _0x211f6b(stationSettings_1[a14_0x2862('0x7')]['settings'][a14_0x2862('0x8')]);_0x16a51f['on'](a14_0x2862('0x9'),function open(){console[a14_0x2862('0x4')](a14_0x2862('0xa')+stationSettings_1[a14_0x2862('0x7')]['settings'][a14_0x2862('0x8')]);this['eventCounter']=0x0;});_0x16a51f['on'](a14_0x2862('0xb'),this[a14_0x2862('0xc')][a14_0x2862('0xd')](this));_0x16a51f['on']('message',this[a14_0x2862('0xe')][a14_0x2862('0xd')](this));}[a14_0x2862('0xe')](_0x56f898){const _0x303e54=JSON['parse'](_0x56f898);if(_0x303e54['Data']==null||_0x303e54['Data']['length']==0x0){_0x56f898=JSON[a14_0x2862('0xf')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x303e54['Data']!=null&&_0x303e54[a14_0x2862('0x10')][a14_0x2862('0x11')]>0x0){this['createEvent'](_0x303e54[a14_0x2862('0x10')][0x0]);}}['onError'](_0xc284f9){console[a14_0x2862('0xb')](_0xc284f9);setTimeout(function(){this['createWebSocket']();}[a14_0x2862('0xd')](this),0x1388);}}exports[a14_0x2862('0x12')]=CountingWebSocketService;