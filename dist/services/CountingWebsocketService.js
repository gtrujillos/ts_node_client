var a14_0x392a=['message','incoming','parse','Data','length','createEvent','error','CountingWebSocketService','__esModule','../infrastructure/stationSettings','eventCounter','init','log','init\x20CountingWebSocket','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','bind'];(function(_0x9a776,_0x4c3c15){var _0x37efe2=function(_0x3b85f7){while(--_0x3b85f7){_0x9a776['push'](_0x9a776['shift']());}};_0x37efe2(++_0x4c3c15);}(a14_0x392a,0x143));var a14_0x30a8=function(_0x5966dd,_0x22c7e){_0x5966dd=_0x5966dd-0x0;var _0x4bbc16=a14_0x392a[_0x5966dd];return _0x4bbc16;};'use strict';Object['defineProperty'](exports,a14_0x30a8('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x30a8('0x1'));class CountingWebSocketService{constructor(){this[a14_0x30a8('0x2')]=0x0;}[a14_0x30a8('0x3')](){console[a14_0x30a8('0x4')](a14_0x30a8('0x5'));this[a14_0x30a8('0x6')]();}[a14_0x30a8('0x6')](){const _0x57c990=require('ws');const _0xd65d0e=new _0x57c990(stationSettings_1[a14_0x30a8('0x7')][a14_0x30a8('0x8')][a14_0x30a8('0x9')]);_0xd65d0e['on'](a14_0x30a8('0xa'),function open(){console[a14_0x30a8('0x4')](a14_0x30a8('0xb')+stationSettings_1['StationContext'][a14_0x30a8('0x8')][a14_0x30a8('0x9')]);this[a14_0x30a8('0x2')]=0x0;});_0xd65d0e['on']('error',this['onError'][a14_0x30a8('0xc')](this));_0xd65d0e['on'](a14_0x30a8('0xd'),this[a14_0x30a8('0xe')][a14_0x30a8('0xc')](this));}[a14_0x30a8('0xe')](_0x1413d2){const _0x41fc3f=JSON[a14_0x30a8('0xf')](_0x1413d2);if(_0x41fc3f[a14_0x30a8('0x10')]==null||_0x41fc3f[a14_0x30a8('0x10')]['length']==0x0){_0x1413d2=JSON[a14_0x30a8('0xf')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x41fc3f[a14_0x30a8('0x10')]!=null&&_0x41fc3f[a14_0x30a8('0x10')][a14_0x30a8('0x11')]>0x0){this[a14_0x30a8('0x12')](_0x41fc3f[a14_0x30a8('0x10')][0x0]);}}['onError'](_0x3b0607){console[a14_0x30a8('0x13')](_0x3b0607);setTimeout(function(){this[a14_0x30a8('0x6')]();}[a14_0x30a8('0xc')](this),0x1388);}}exports[a14_0x30a8('0x14')]=CountingWebSocketService;