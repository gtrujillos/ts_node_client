var a16_0x1bfa=['length','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','log','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','Websocket\x20opened:','StationContext','eventCounter','error','onError','bind','message','incoming','parse','Data'];(function(_0x2699a9,_0x501e82){var _0x5b6c40=function(_0xa3de42){while(--_0xa3de42){_0x2699a9['push'](_0x2699a9['shift']());}};_0x5b6c40(++_0x501e82);}(a16_0x1bfa,0x1bb));var a16_0x41b0=function(_0x755036,_0x2f7203){_0x755036=_0x755036-0x0;var _0x3a79f0=a16_0x1bfa[_0x755036];return _0x3a79f0;};'use strict';Object[a16_0x41b0('0x0')](exports,a16_0x41b0('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x41b0('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){console[a16_0x41b0('0x3')](a16_0x41b0('0x4'));this[a16_0x41b0('0x5')]();}[a16_0x41b0('0x5')](){const _0x37f3df=require('ws');const _0xb53142=new _0x37f3df(stationSettings_1['StationContext'][a16_0x41b0('0x6')][a16_0x41b0('0x7')]);_0xb53142['on'](a16_0x41b0('0x8'),function open(){console['log'](a16_0x41b0('0x9')+stationSettings_1[a16_0x41b0('0xa')][a16_0x41b0('0x6')]['cameraSocket']);this[a16_0x41b0('0xb')]=0x0;});_0xb53142['on'](a16_0x41b0('0xc'),this[a16_0x41b0('0xd')][a16_0x41b0('0xe')](this));_0xb53142['on'](a16_0x41b0('0xf'),this[a16_0x41b0('0x10')][a16_0x41b0('0xe')](this));}[a16_0x41b0('0x10')](_0x198c3d){const _0x258f93=JSON[a16_0x41b0('0x11')](_0x198c3d);if(_0x258f93[a16_0x41b0('0x12')]==null||_0x258f93[a16_0x41b0('0x12')][a16_0x41b0('0x13')]==0x0){_0x198c3d=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x258f93[a16_0x41b0('0x12')]!=null&&_0x258f93['Data'][a16_0x41b0('0x13')]>0x0){this[a16_0x41b0('0x14')](_0x258f93[a16_0x41b0('0x12')][0x0]);}}['onError'](_0x47486d){console[a16_0x41b0('0xc')](_0x47486d);setTimeout(function(){this[a16_0x41b0('0x5')]();}['bind'](this),0x1388);}}exports[a16_0x41b0('0x15')]=CountingWebSocketService;