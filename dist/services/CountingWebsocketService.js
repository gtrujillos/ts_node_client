var a14_0x4a85=['parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket','StationContext','settings','cameraSocket','open','Websocket\x20opened:','error','onError','message','bind','incoming'];(function(_0x360bb6,_0x2ea099){var _0x7a1913=function(_0x461996){while(--_0x461996){_0x360bb6['push'](_0x360bb6['shift']());}};_0x7a1913(++_0x2ea099);}(a14_0x4a85,0x14f));var a14_0x4c94=function(_0x1a7ab8,_0x226066){_0x1a7ab8=_0x1a7ab8-0x0;var _0x13c074=a14_0x4a85[_0x1a7ab8];return _0x13c074;};'use strict';Object[a14_0x4c94('0x0')](exports,a14_0x4c94('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x4c94('0x2'));class CountingWebSocketService{constructor(){this[a14_0x4c94('0x3')]=0x0;}[a14_0x4c94('0x4')](){console[a14_0x4c94('0x5')]('init\x20CountingWebSocket');this[a14_0x4c94('0x6')]();}['createWebSocket'](){const _0x5ecca3=require('ws');const _0x2bb602=new _0x5ecca3(stationSettings_1[a14_0x4c94('0x7')][a14_0x4c94('0x8')][a14_0x4c94('0x9')]);_0x2bb602['on'](a14_0x4c94('0xa'),function open(){console['log'](a14_0x4c94('0xb')+stationSettings_1[a14_0x4c94('0x7')][a14_0x4c94('0x8')][a14_0x4c94('0x9')]);this[a14_0x4c94('0x3')]=0x0;});_0x2bb602['on'](a14_0x4c94('0xc'),this[a14_0x4c94('0xd')]['bind'](this));_0x2bb602['on'](a14_0x4c94('0xe'),this['incoming'][a14_0x4c94('0xf')](this));}[a14_0x4c94('0x10')](_0x42dc22){const _0x5d076a=JSON[a14_0x4c94('0x11')](_0x42dc22);if(_0x5d076a[a14_0x4c94('0x12')]==null||_0x5d076a[a14_0x4c94('0x12')][a14_0x4c94('0x13')]==0x0){_0x42dc22=JSON[a14_0x4c94('0x11')](a14_0x4c94('0x14'));}if(_0x5d076a['Data']!=null&&_0x5d076a['Data'][a14_0x4c94('0x13')]>0x0){this['createEvent'](_0x5d076a[a14_0x4c94('0x12')][0x0]);}}[a14_0x4c94('0xd')](_0x426c85){console[a14_0x4c94('0xc')](_0x426c85);setTimeout(function(){this['createWebSocket']();}[a14_0x4c94('0xf')](this),0x1388);}}exports[a14_0x4c94('0x15')]=CountingWebSocketService;