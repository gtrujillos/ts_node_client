var a16_0x76a7=['defineProperty','init','log','createWebSocket','StationContext','settings','Websocket\x20opened:','cameraSocket','eventCounter','error','bind','message','incoming','parse','Data','length','onError','CountingWebSocketService'];(function(_0x7f32b8,_0x3b7251){var _0x2be056=function(_0x21840e){while(--_0x21840e){_0x7f32b8['push'](_0x7f32b8['shift']());}};_0x2be056(++_0x3b7251);}(a16_0x76a7,0x156));var a16_0x5c59=function(_0x273afd,_0xd4a5c){_0x273afd=_0x273afd-0x0;var _0x3474aa=a16_0x76a7[_0x273afd];return _0x3474aa;};'use strict';Object[a16_0x5c59('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a16_0x5c59('0x1')](){console[a16_0x5c59('0x2')]('init\x20CountingWebSocket');this['createWebSocket']();}[a16_0x5c59('0x3')](){const _0x20e2d6=require('ws');const _0xde090e=new _0x20e2d6(stationSettings_1[a16_0x5c59('0x4')][a16_0x5c59('0x5')]['cameraSocket']);_0xde090e['on']('open',function open(){console['log'](a16_0x5c59('0x6')+stationSettings_1[a16_0x5c59('0x4')][a16_0x5c59('0x5')][a16_0x5c59('0x7')]);this[a16_0x5c59('0x8')]=0x0;});_0xde090e['on'](a16_0x5c59('0x9'),this['onError'][a16_0x5c59('0xa')](this));_0xde090e['on'](a16_0x5c59('0xb'),this[a16_0x5c59('0xc')]['bind'](this));}[a16_0x5c59('0xc')](_0x4dc790){const _0x490b1d=JSON[a16_0x5c59('0xd')](_0x4dc790);if(_0x490b1d[a16_0x5c59('0xe')]==null||_0x490b1d[a16_0x5c59('0xe')][a16_0x5c59('0xf')]==0x0){_0x4dc790=JSON[a16_0x5c59('0xd')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x490b1d[a16_0x5c59('0xe')]!=null&&_0x490b1d['Data'][a16_0x5c59('0xf')]>0x0){this['createEvent'](_0x490b1d[a16_0x5c59('0xe')][0x0]);}}[a16_0x5c59('0x10')](_0x2f8ead){console[a16_0x5c59('0x9')](_0x2f8ead);setTimeout(function(){this[a16_0x5c59('0x3')]();}['bind'](this),0x1388);}}exports[a16_0x5c59('0x11')]=CountingWebSocketService;