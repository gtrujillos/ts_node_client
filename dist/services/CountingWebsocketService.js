var a14_0x4a99=['{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','onError','CountingWebSocketService','__esModule','../infrastructure/stationSettings','eventCounter','init','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','open','log','Websocket\x20opened:','error','bind','message','incoming','Data','length','parse'];(function(_0xd2563a,_0x4d60b0){var _0x2addea=function(_0xec3724){while(--_0xec3724){_0xd2563a['push'](_0xd2563a['shift']());}};_0x2addea(++_0x4d60b0);}(a14_0x4a99,0x1d2));var a14_0x12c7=function(_0xb5c7cb,_0x3d5de2){_0xb5c7cb=_0xb5c7cb-0x0;var _0x109689=a14_0x4a99[_0xb5c7cb];return _0x109689;};'use strict';Object['defineProperty'](exports,a14_0x12c7('0x0'),{'value':!![]});const stationSettings_1=require(a14_0x12c7('0x1'));class CountingWebSocketService{constructor(){this[a14_0x12c7('0x2')]=0x0;}[a14_0x12c7('0x3')](){console['log'](a14_0x12c7('0x4'));this['createWebSocket']();}[a14_0x12c7('0x5')](){const _0x1a4a9=require('ws');const _0x536236=new _0x1a4a9(stationSettings_1['StationContext'][a14_0x12c7('0x6')][a14_0x12c7('0x7')]);_0x536236['on'](a14_0x12c7('0x8'),function open(){console[a14_0x12c7('0x9')](a14_0x12c7('0xa')+stationSettings_1['StationContext']['settings']['cameraSocket']);this['eventCounter']=0x0;});_0x536236['on'](a14_0x12c7('0xb'),this['onError'][a14_0x12c7('0xc')](this));_0x536236['on'](a14_0x12c7('0xd'),this[a14_0x12c7('0xe')][a14_0x12c7('0xc')](this));}[a14_0x12c7('0xe')](_0x3036a9){const _0x1bac2e=JSON['parse'](_0x3036a9);if(_0x1bac2e[a14_0x12c7('0xf')]==null||_0x1bac2e[a14_0x12c7('0xf')][a14_0x12c7('0x10')]==0x0){_0x3036a9=JSON[a14_0x12c7('0x11')](a14_0x12c7('0x12'));}if(_0x1bac2e[a14_0x12c7('0xf')]!=null&&_0x1bac2e[a14_0x12c7('0xf')]['length']>0x0){this[a14_0x12c7('0x13')](_0x1bac2e[a14_0x12c7('0xf')][0x0]);}}[a14_0x12c7('0x14')](_0x1a238c){console[a14_0x12c7('0xb')](_0x1a238c);setTimeout(function(){this['createWebSocket']();}[a14_0x12c7('0xc')](this),0x1388);}}exports[a14_0x12c7('0x15')]=CountingWebSocketService;