var a14_0xec98=['message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','error','createWebSocket','CountingWebSocketService','defineProperty','eventCounter','log','init\x20CountingWebSocket','StationContext','settings','cameraSocket','Websocket\x20opened:','onError','bind'];(function(_0xb67384,_0x27295a){var _0x156d7c=function(_0x52a1f8){while(--_0x52a1f8){_0xb67384['push'](_0xb67384['shift']());}};_0x156d7c(++_0x27295a);}(a14_0xec98,0x1be));var a14_0x2835=function(_0x47be51,_0x58ef01){_0x47be51=_0x47be51-0x0;var _0x28d8da=a14_0xec98[_0x47be51];return _0x28d8da;};'use strict';Object[a14_0x2835('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x2835('0x1')]=0x0;}['init'](){this['createWebSocket']();console[a14_0x2835('0x2')](a14_0x2835('0x3'));}['createWebSocket'](){const _0x3f6a12=require('ws');const _0x19f2bd=new _0x3f6a12(stationSettings_1[a14_0x2835('0x4')][a14_0x2835('0x5')][a14_0x2835('0x6')]);_0x19f2bd['on']('open',function open(){console['log'](a14_0x2835('0x7')+stationSettings_1[a14_0x2835('0x4')]['settings'][a14_0x2835('0x6')]);this[a14_0x2835('0x1')]=0x0;});_0x19f2bd['on']('error',this[a14_0x2835('0x8')][a14_0x2835('0x9')](this));_0x19f2bd['on'](a14_0x2835('0xa'),this[a14_0x2835('0xb')][a14_0x2835('0x9')](this));}['incoming'](_0x2b3f70){const _0x284b6a=JSON[a14_0x2835('0xc')](_0x2b3f70);if(_0x284b6a[a14_0x2835('0xd')]==null||_0x284b6a['Data'][a14_0x2835('0xe')]==0x0){_0x2b3f70=JSON['parse'](a14_0x2835('0xf'));}if(_0x284b6a['Data']!=null&&_0x284b6a[a14_0x2835('0xd')]['length']>0x0){this['createEvent'](_0x284b6a[a14_0x2835('0xd')][0x0]);}}['onError'](_0x17fa3b){console[a14_0x2835('0x10')](_0x17fa3b);setTimeout(function(){this[a14_0x2835('0x11')]();}['bind'](this),0x1388);}}exports[a14_0x2835('0x12')]=CountingWebSocketService;