var a14_0x116f=['open','Websocket\x20opened:','StationContext','error','onError','bind','message','incoming','parse','Data','length','createEvent','defineProperty','__esModule','eventCounter','createWebSocket','log','init\x20CountingWebSocket','settings','cameraSocket'];(function(_0x19ec4b,_0x2aa9ca){var _0x58e17f=function(_0x4d0706){while(--_0x4d0706){_0x19ec4b['push'](_0x19ec4b['shift']());}};_0x58e17f(++_0x2aa9ca);}(a14_0x116f,0x1ec));var a14_0x346d=function(_0x17c833,_0x2b2c39){_0x17c833=_0x17c833-0x0;var _0x10f931=a14_0x116f[_0x17c833];return _0x10f931;};'use strict';Object[a14_0x346d('0x0')](exports,a14_0x346d('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');class CountingWebSocketService{constructor(){this[a14_0x346d('0x2')]=0x0;}['init'](){this[a14_0x346d('0x3')]();console[a14_0x346d('0x4')](a14_0x346d('0x5'));}[a14_0x346d('0x3')](){const _0x3ece2e=require('ws');const _0x5e0aa8=new _0x3ece2e(stationSettings_1['StationContext'][a14_0x346d('0x6')][a14_0x346d('0x7')]);_0x5e0aa8['on'](a14_0x346d('0x8'),function open(){console[a14_0x346d('0x4')](a14_0x346d('0x9')+stationSettings_1[a14_0x346d('0xa')]['settings'][a14_0x346d('0x7')]);this[a14_0x346d('0x2')]=0x0;});_0x5e0aa8['on'](a14_0x346d('0xb'),this[a14_0x346d('0xc')][a14_0x346d('0xd')](this));_0x5e0aa8['on'](a14_0x346d('0xe'),this[a14_0x346d('0xf')][a14_0x346d('0xd')](this));}[a14_0x346d('0xf')](_0x5db2cc){const _0x2d5288=JSON[a14_0x346d('0x10')](_0x5db2cc);if(_0x2d5288[a14_0x346d('0x11')]==null||_0x2d5288[a14_0x346d('0x11')][a14_0x346d('0x12')]==0x0){_0x5db2cc=JSON['parse']('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x2d5288[a14_0x346d('0x11')]!=null&&_0x2d5288['Data'][a14_0x346d('0x12')]>0x0){this[a14_0x346d('0x13')](_0x2d5288['Data'][0x0]);}}[a14_0x346d('0xc')](_0x5631d1){console[a14_0x346d('0xb')](_0x5631d1);setTimeout(function(){this['createWebSocket']();}[a14_0x346d('0xd')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;