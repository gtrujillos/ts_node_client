var a14_0x466b=['log','init\x20CountingWebSocket','createWebSocket','cameraSocket','open','Websocket\x20opened:','StationContext','eventCounter','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','onError','error','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','init'];(function(_0x1aa25f,_0x4f2463){var _0x52dd0b=function(_0x5d40ad){while(--_0x5d40ad){_0x1aa25f['push'](_0x1aa25f['shift']());}};_0x52dd0b(++_0x4f2463);}(a14_0x466b,0xf9));var a14_0x33ca=function(_0x1643af,_0xa5da8){_0x1643af=_0x1643af-0x0;var _0x11dce7=a14_0x466b[_0x1643af];return _0x11dce7;};'use strict';Object[a14_0x33ca('0x0')](exports,a14_0x33ca('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x33ca('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}[a14_0x33ca('0x3')](){console[a14_0x33ca('0x4')](a14_0x33ca('0x5'));this['createWebSocket']();}[a14_0x33ca('0x6')](){const _0x2d3c36=require('ws');const _0x2ef6d9=new _0x2d3c36(stationSettings_1['StationContext']['settings'][a14_0x33ca('0x7')]);_0x2ef6d9['on'](a14_0x33ca('0x8'),function open(){console[a14_0x33ca('0x4')](a14_0x33ca('0x9')+stationSettings_1[a14_0x33ca('0xa')]['settings'][a14_0x33ca('0x7')]);this[a14_0x33ca('0xb')]=0x0;});_0x2ef6d9['on']('error',this['onError'][a14_0x33ca('0xc')](this));_0x2ef6d9['on'](a14_0x33ca('0xd'),this[a14_0x33ca('0xe')]['bind'](this));}[a14_0x33ca('0xe')](_0x212ecc){const _0x2a068f=JSON[a14_0x33ca('0xf')](_0x212ecc);if(_0x2a068f[a14_0x33ca('0x10')]==null||_0x2a068f[a14_0x33ca('0x10')][a14_0x33ca('0x11')]==0x0){_0x212ecc=JSON[a14_0x33ca('0xf')](a14_0x33ca('0x12'));}if(_0x2a068f[a14_0x33ca('0x10')]!=null&&_0x2a068f[a14_0x33ca('0x10')][a14_0x33ca('0x11')]>0x0){this[a14_0x33ca('0x13')](_0x2a068f[a14_0x33ca('0x10')][0x0]);}}[a14_0x33ca('0x14')](_0x36cf0c){console[a14_0x33ca('0x15')](_0x36cf0c);setTimeout(function(){this['createWebSocket']();}[a14_0x33ca('0xc')](this),0x1388);}}exports[a14_0x33ca('0x16')]=CountingWebSocketService;