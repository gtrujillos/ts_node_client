var a16_0x2864=['createWebSocket','StationContext','cameraSocket','Websocket\x20opened:','settings','error','onError','bind','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','init','log'];(function(_0x1f1b97,_0x29db6d){var _0x1f1843=function(_0x2dfb45){while(--_0x2dfb45){_0x1f1b97['push'](_0x1f1b97['shift']());}};_0x1f1843(++_0x29db6d);}(a16_0x2864,0x1de));var a16_0x49ba=function(_0x4c13fd,_0x345c17){_0x4c13fd=_0x4c13fd-0x0;var _0x53c09f=a16_0x2864[_0x4c13fd];return _0x53c09f;};'use strict';Object[a16_0x49ba('0x0')](exports,a16_0x49ba('0x1'),{'value':!![]});const stationSettings_1=require(a16_0x49ba('0x2'));class CountingWebSocketService{constructor(){this[a16_0x49ba('0x3')]=0x0;}[a16_0x49ba('0x4')](){console[a16_0x49ba('0x5')]('init\x20CountingWebSocket');this['createWebSocket']();}[a16_0x49ba('0x6')](){const _0x15c95a=require('ws');const _0x7109ab=new _0x15c95a(stationSettings_1[a16_0x49ba('0x7')]['settings'][a16_0x49ba('0x8')]);_0x7109ab['on']('open',function open(){console[a16_0x49ba('0x5')](a16_0x49ba('0x9')+stationSettings_1[a16_0x49ba('0x7')][a16_0x49ba('0xa')]['cameraSocket']);this['eventCounter']=0x0;});_0x7109ab['on'](a16_0x49ba('0xb'),this[a16_0x49ba('0xc')][a16_0x49ba('0xd')](this));_0x7109ab['on'](a16_0x49ba('0xe'),this[a16_0x49ba('0xf')][a16_0x49ba('0xd')](this));}['incoming'](_0x9ecd68){const _0x57d637=JSON[a16_0x49ba('0x10')](_0x9ecd68);if(_0x57d637[a16_0x49ba('0x11')]==null||_0x57d637['Data'][a16_0x49ba('0x12')]==0x0){_0x9ecd68=JSON[a16_0x49ba('0x10')](a16_0x49ba('0x13'));}if(_0x57d637[a16_0x49ba('0x11')]!=null&&_0x57d637[a16_0x49ba('0x11')][a16_0x49ba('0x12')]>0x0){this[a16_0x49ba('0x14')](_0x57d637['Data'][0x0]);}}[a16_0x49ba('0xc')](_0x4576e2){console['error'](_0x4576e2);setTimeout(function(){this[a16_0x49ba('0x6')]();}[a16_0x49ba('0xd')](this),0x1388);}}exports[a16_0x49ba('0x15')]=CountingWebSocketService;