var a14_0x4a2d=['cameraSocket','Websocket\x20opened:','error','onError','message','incoming','parse','Data','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','createEvent','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init','log','createWebSocket','StationContext','settings'];(function(_0x5dd12b,_0x5dc904){var _0x4ade75=function(_0x1bfb55){while(--_0x1bfb55){_0x5dd12b['push'](_0x5dd12b['shift']());}};_0x4ade75(++_0x5dc904);}(a14_0x4a2d,0x110));var a14_0x39f2=function(_0x35f5e6,_0x1964d9){_0x35f5e6=_0x35f5e6-0x0;var _0x155cad=a14_0x4a2d[_0x35f5e6];return _0x155cad;};'use strict';Object[a14_0x39f2('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x39f2('0x1'));class CountingWebSocketService{constructor(){this[a14_0x39f2('0x2')]=0x0;}[a14_0x39f2('0x3')](){console[a14_0x39f2('0x4')]('init\x20CountingWebSocket');this['createWebSocket']();}[a14_0x39f2('0x5')](){const _0xbad3ac=require('ws');const _0x1a303c=new _0xbad3ac(stationSettings_1[a14_0x39f2('0x6')][a14_0x39f2('0x7')][a14_0x39f2('0x8')]);_0x1a303c['on']('open',function open(){console[a14_0x39f2('0x4')](a14_0x39f2('0x9')+stationSettings_1['StationContext']['settings'][a14_0x39f2('0x8')]);this['eventCounter']=0x0;});_0x1a303c['on'](a14_0x39f2('0xa'),this[a14_0x39f2('0xb')]['bind'](this));_0x1a303c['on'](a14_0x39f2('0xc'),this[a14_0x39f2('0xd')]['bind'](this));}[a14_0x39f2('0xd')](_0x2aecd7){const _0x3c007b=JSON[a14_0x39f2('0xe')](_0x2aecd7);if(_0x3c007b[a14_0x39f2('0xf')]==null||_0x3c007b[a14_0x39f2('0xf')][a14_0x39f2('0x10')]==0x0){_0x2aecd7=JSON['parse'](a14_0x39f2('0x11'));}if(_0x3c007b[a14_0x39f2('0xf')]!=null&&_0x3c007b[a14_0x39f2('0xf')]['length']>0x0){this[a14_0x39f2('0x12')](_0x3c007b[a14_0x39f2('0xf')][0x0]);}}['onError'](_0x44113d){console[a14_0x39f2('0xa')](_0x44113d);setTimeout(function(){this[a14_0x39f2('0x5')]();}['bind'](this),0x1388);}}exports[a14_0x39f2('0x13')]=CountingWebSocketService;