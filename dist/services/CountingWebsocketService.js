var a14_0xdd79=['../infrastructure/stationSettings','eventCounter','createWebSocket','StationContext','settings','cameraSocket','log','error','onError','bind','incoming','parse','length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','Data','defineProperty','__esModule'];(function(_0x2d4a1f,_0x35e0f7){var _0xbccb4b=function(_0x5b2327){while(--_0x5b2327){_0x2d4a1f['push'](_0x2d4a1f['shift']());}};_0xbccb4b(++_0x35e0f7);}(a14_0xdd79,0x185));var a14_0x1bca=function(_0x2bf022,_0x4cc8fd){_0x2bf022=_0x2bf022-0x0;var _0x1cd2ea=a14_0xdd79[_0x2bf022];return _0x1cd2ea;};'use strict';Object[a14_0x1bca('0x0')](exports,a14_0x1bca('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x1bca('0x2'));class CountingWebSocketService{constructor(){this[a14_0x1bca('0x3')]=0x0;}['init'](){console['log']('init\x20CountingWebSocket');this['createWebSocket']();}[a14_0x1bca('0x4')](){const _0x2ec80e=require('ws');const _0x511cb7=new _0x2ec80e(stationSettings_1[a14_0x1bca('0x5')][a14_0x1bca('0x6')][a14_0x1bca('0x7')]);_0x511cb7['on']('open',function open(){console[a14_0x1bca('0x8')]('Websocket\x20opened:'+stationSettings_1[a14_0x1bca('0x5')][a14_0x1bca('0x6')]['cameraSocket']);this[a14_0x1bca('0x3')]=0x0;});_0x511cb7['on'](a14_0x1bca('0x9'),this[a14_0x1bca('0xa')][a14_0x1bca('0xb')](this));_0x511cb7['on']('message',this[a14_0x1bca('0xc')][a14_0x1bca('0xb')](this));}['incoming'](_0x4fa2ba){const _0x394ad8=JSON[a14_0x1bca('0xd')](_0x4fa2ba);if(_0x394ad8['Data']==null||_0x394ad8['Data'][a14_0x1bca('0xe')]==0x0){_0x4fa2ba=JSON[a14_0x1bca('0xd')](a14_0x1bca('0xf'));}if(_0x394ad8[a14_0x1bca('0x10')]!=null&&_0x394ad8[a14_0x1bca('0x10')][a14_0x1bca('0xe')]>0x0){this['createEvent'](_0x394ad8[a14_0x1bca('0x10')][0x0]);}}[a14_0x1bca('0xa')](_0x3350bb){console[a14_0x1bca('0x9')](_0x3350bb);setTimeout(function(){this[a14_0x1bca('0x4')]();}[a14_0x1bca('0xb')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;