var a14_0x42e9=['settings','open','Websocket\x20opened:','cameraSocket','onError','bind','incoming','parse','Data','length','error','CountingWebSocketService','defineProperty','../infrastructure/stationSettings','eventCounter','init','createWebSocket','log','init\x20CountingWebSocket','StationContext'];(function(_0x45658b,_0xa6ed42){var _0x51c273=function(_0x5a2c04){while(--_0x5a2c04){_0x45658b['push'](_0x45658b['shift']());}};_0x51c273(++_0xa6ed42);}(a14_0x42e9,0x138));var a14_0x3537=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a14_0x42e9[_0x2d8f05];return _0x4d74cb;};'use strict';Object[a14_0x3537('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a14_0x3537('0x1'));class CountingWebSocketService{constructor(){this[a14_0x3537('0x2')]=0x0;}[a14_0x3537('0x3')](){this[a14_0x3537('0x4')]();console[a14_0x3537('0x5')](a14_0x3537('0x6'));}[a14_0x3537('0x4')](){const _0x1db531=require('ws');const _0x58c8d8=new _0x1db531(stationSettings_1[a14_0x3537('0x7')][a14_0x3537('0x8')]['cameraSocket']);_0x58c8d8['on'](a14_0x3537('0x9'),function open(){console[a14_0x3537('0x5')](a14_0x3537('0xa')+stationSettings_1[a14_0x3537('0x7')][a14_0x3537('0x8')][a14_0x3537('0xb')]);this[a14_0x3537('0x2')]=0x0;});_0x58c8d8['on']('error',this[a14_0x3537('0xc')][a14_0x3537('0xd')](this));_0x58c8d8['on']('message',this['incoming'][a14_0x3537('0xd')](this));}[a14_0x3537('0xe')](_0x32e100){const _0x3a3e2e=JSON[a14_0x3537('0xf')](_0x32e100);if(_0x3a3e2e[a14_0x3537('0x10')]==null||_0x3a3e2e[a14_0x3537('0x10')][a14_0x3537('0x11')]==0x0){_0x32e100=JSON[a14_0x3537('0xf')]('{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}');}if(_0x3a3e2e[a14_0x3537('0x10')]!=null&&_0x3a3e2e[a14_0x3537('0x10')]['length']>0x0){this['createEvent'](_0x3a3e2e[a14_0x3537('0x10')][0x0]);}}[a14_0x3537('0xc')](_0x272041){console[a14_0x3537('0x12')](_0x272041);setTimeout(function(){this['createWebSocket']();}[a14_0x3537('0xd')](this),0x1388);}}exports[a14_0x3537('0x13')]=CountingWebSocketService;