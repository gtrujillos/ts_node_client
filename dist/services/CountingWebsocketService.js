var a13_0x5885=['CountingWebSocketService','defineProperty','__esModule','../infrastructure/stationSettings','eventCounter','log','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','StationContext','error','bind','message','incoming','parse','Data','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','length','createEvent'];(function(_0x177c91,_0x4415cd){var _0x5979c0=function(_0x209903){while(--_0x209903){_0x177c91['push'](_0x177c91['shift']());}};_0x5979c0(++_0x4415cd);}(a13_0x5885,0x155));var a13_0x7922=function(_0x13b3ae,_0xc1c0d4){_0x13b3ae=_0x13b3ae-0x0;var _0x10a6cb=a13_0x5885[_0x13b3ae];return _0x10a6cb;};'use strict';Object[a13_0x7922('0x0')](exports,a13_0x7922('0x1'),{'value':!![]});const stationSettings_1=require(a13_0x7922('0x2'));class CountingWebSocketService{constructor(){this[a13_0x7922('0x3')]=0x0;}['init'](){this['createWebSocket']();console[a13_0x7922('0x4')](a13_0x7922('0x5'));}[a13_0x7922('0x6')](){const _0xf1c6e6=require('ws');const _0x179084=new _0xf1c6e6(stationSettings_1['StationContext'][a13_0x7922('0x7')][a13_0x7922('0x8')]);_0x179084['on']('open',function open(){console[a13_0x7922('0x4')]('Websocket\x20opened:'+stationSettings_1[a13_0x7922('0x9')][a13_0x7922('0x7')][a13_0x7922('0x8')]);this[a13_0x7922('0x3')]=0x0;});_0x179084['on'](a13_0x7922('0xa'),this['onError'][a13_0x7922('0xb')](this));_0x179084['on'](a13_0x7922('0xc'),this['incoming'][a13_0x7922('0xb')](this));}[a13_0x7922('0xd')](_0x19e713){const _0x568574=JSON[a13_0x7922('0xe')](_0x19e713);if(_0x568574[a13_0x7922('0xf')]==null||_0x568574[a13_0x7922('0xf')]['length']==0x0){_0x19e713=JSON['parse'](a13_0x7922('0x10'));}if(_0x568574[a13_0x7922('0xf')]!=null&&_0x568574[a13_0x7922('0xf')][a13_0x7922('0x11')]>0x0){this[a13_0x7922('0x12')](_0x568574['Data'][0x0]);}}['onError'](_0x276cad){console['error'](_0x276cad);setTimeout(function(){this['createWebSocket']();}[a13_0x7922('0xb')](this),0x1388);}}exports[a13_0x7922('0x13')]=CountingWebSocketService;