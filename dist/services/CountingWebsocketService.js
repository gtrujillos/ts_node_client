var a14_0x24e0=['length','{\x22Data\x22:[{\x22CountingInfo\x22:[{\x22In\x22:0,\x22Out\x22:0,\x22RuleName\x22:\x22Rule\x22,\x22Time\x22:\x222018-11-19T17:02:32.867Z\x22}],\x22RuleType\x22:\x22Counting\x22}],\x22Tag\x22:\x22Event\x22,\x22Ver\x22:\x221.0.0\x22}','defineProperty','__esModule','../infrastructure/stationSettings','log','init\x20CountingWebSocket','createWebSocket','settings','cameraSocket','StationContext','error','onError','incoming','bind','parse','Data'];(function(_0x1196c6,_0x44e6fa){var _0x18d0d0=function(_0x300794){while(--_0x300794){_0x1196c6['push'](_0x1196c6['shift']());}};_0x18d0d0(++_0x44e6fa);}(a14_0x24e0,0x19a));var a14_0x313b=function(_0x2dd2b0,_0x8733bc){_0x2dd2b0=_0x2dd2b0-0x0;var _0x176ea8=a14_0x24e0[_0x2dd2b0];return _0x176ea8;};'use strict';Object[a14_0x313b('0x0')](exports,a14_0x313b('0x1'),{'value':!![]});const stationSettings_1=require(a14_0x313b('0x2'));class CountingWebSocketService{constructor(){this['eventCounter']=0x0;}['init'](){this['createWebSocket']();console[a14_0x313b('0x3')](a14_0x313b('0x4'));}[a14_0x313b('0x5')](){const _0x4c2df7=require('ws');const _0x1439dd=new _0x4c2df7(stationSettings_1['StationContext'][a14_0x313b('0x6')][a14_0x313b('0x7')]);_0x1439dd['on']('open',function open(){console[a14_0x313b('0x3')]('Websocket\x20opened:'+stationSettings_1[a14_0x313b('0x8')][a14_0x313b('0x6')][a14_0x313b('0x7')]);this['eventCounter']=0x0;});_0x1439dd['on'](a14_0x313b('0x9'),this[a14_0x313b('0xa')]['bind'](this));_0x1439dd['on']('message',this[a14_0x313b('0xb')][a14_0x313b('0xc')](this));}[a14_0x313b('0xb')](_0x5677ff){const _0x334f5b=JSON[a14_0x313b('0xd')](_0x5677ff);if(_0x334f5b[a14_0x313b('0xe')]==null||_0x334f5b[a14_0x313b('0xe')][a14_0x313b('0xf')]==0x0){_0x5677ff=JSON[a14_0x313b('0xd')](a14_0x313b('0x10'));}if(_0x334f5b[a14_0x313b('0xe')]!=null&&_0x334f5b[a14_0x313b('0xe')]['length']>0x0){this['createEvent'](_0x334f5b['Data'][0x0]);}}[a14_0x313b('0xa')](_0x405675){console[a14_0x313b('0x9')](_0x405675);setTimeout(function(){this[a14_0x313b('0x5')]();}[a14_0x313b('0xc')](this),0x1388);}}exports['CountingWebSocketService']=CountingWebSocketService;