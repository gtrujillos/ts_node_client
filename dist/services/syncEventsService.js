var a24_0x48b3=['env','WEB_SERVICE_URL','sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','error','rename','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','init\x20SyncEventsService','exploreDir','eventFileFolder','forEach','includes','stat','StationContext','settings','abs','getTime','syncFile','log','Successfully\x20renamed\x20','sendFile'];(function(_0x1fcab9,_0x2c4c48){var _0x307223=function(_0x51d967){while(--_0x51d967){_0x1fcab9['push'](_0x1fcab9['shift']());}};_0x307223(++_0x2c4c48);}(a24_0x48b3,0x65));var a24_0x651d=function(_0x5115b5,_0x506a2a){_0x5115b5=_0x5115b5-0x0;var _0x1ccea1=a24_0x48b3[_0x5115b5];return _0x1ccea1;};'use strict';Object[a24_0x651d('0x0')](exports,a24_0x651d('0x1'),{'value':!![]});const stationSettings_1=require(a24_0x651d('0x2'));const fs=require('fs');const request=require(a24_0x651d('0x3'));class SyncEventsService{constructor(){}[a24_0x651d('0x4')](){console['log'](a24_0x651d('0x5'));this[a24_0x651d('0x6')](0x0);}[a24_0x651d('0x6')](_0x248277){fs['readdir'](stationSettings_1['StationContext']['settings'][a24_0x651d('0x7')],(_0x2a3620,_0x1e212d)=>{if(_0x1e212d!=null){_0x1e212d[a24_0x651d('0x8')](_0x1688bc=>{if(_0x1688bc[a24_0x651d('0x9')]('.gz')){fs[a24_0x651d('0xa')](stationSettings_1[a24_0x651d('0xb')][a24_0x651d('0xc')][a24_0x651d('0x7')]+_0x1688bc,(_0xe4c3c4,_0x335e24)=>{const _0x1a10b1=Math[a24_0x651d('0xd')](new Date()[a24_0x651d('0xe')]()-_0x335e24['ctime'][a24_0x651d('0xe')]());if(_0x1a10b1>0x2710){this['syncFile'](_0x1688bc);}});}});}});setTimeout(()=>{this[a24_0x651d('0x6')](++_0x248277);},0x1388);}[a24_0x651d('0xf')](_0x465528){const _0x2f46e8=stationSettings_1[a24_0x651d('0xb')][a24_0x651d('0xc')][a24_0x651d('0x7')]+_0x465528;const _0x245a6b=stationSettings_1[a24_0x651d('0xb')][a24_0x651d('0xc')][a24_0x651d('0x7')]+'process/'+_0x465528;fs['rename'](_0x2f46e8,_0x245a6b,_0x465dd7=>{if(_0x465dd7){console[a24_0x651d('0x10')](_0x465dd7);}else{console[a24_0x651d('0x10')](a24_0x651d('0x11')+_0x245a6b);this['sendFile'](_0x465528,_0x245a6b);}});}[a24_0x651d('0x12')](_0x49e44b,_0x1c76a8){const _0x1f50c3=process[a24_0x651d('0x13')][a24_0x651d('0x14')]+a24_0x651d('0x15');const _0x469599={'file':fs['createReadStream'](_0x1c76a8)};console['log'](new Date());console[a24_0x651d('0x10')](a24_0x651d('0x16')+_0x1f50c3);console[a24_0x651d('0x10')](a24_0x651d('0x17')+_0x49e44b);try{request[a24_0x651d('0x18')]({'url':_0x1f50c3,'formData':_0x469599},function(_0x288a98,_0x53c338,_0x63c820){let _0xfbecec=null;let _0x1ef0e5='';if(_0x288a98){_0x1ef0e5='';}else{try{console[a24_0x651d('0x10')](a24_0x651d('0x19')+_0x63c820);_0xfbecec=JSON[a24_0x651d('0x1a')](_0x63c820);if(_0xfbecec['status']==0x1){_0x1ef0e5='success/';}else{_0x1ef0e5='';}}catch(_0x1410ec){console[a24_0x651d('0x1b')](_0x1410ec);_0x1ef0e5='';}}const _0x32e839=stationSettings_1[a24_0x651d('0xb')][a24_0x651d('0xc')][a24_0x651d('0x7')]+_0x1ef0e5+_0x49e44b;fs[a24_0x651d('0x1c')](_0x1c76a8,_0x32e839,function(_0x288a98){if(_0x288a98){console[a24_0x651d('0x10')](_0x288a98);}console[a24_0x651d('0x10')]('Successfully\x20renamed\x20'+_0x32e839);});});}catch(_0x334bd6){console['error'](_0x334bd6);}}}exports[a24_0x651d('0x1d')]=SyncEventsService;