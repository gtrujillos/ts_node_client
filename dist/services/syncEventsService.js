var a21_0x340b=['../infrastructure/stationSettings','request','init','init\x20SyncEventsService','exploreDir','StationContext','settings','eventFileFolder','includes','.gz','abs','getTime','ctime','syncFile','log','Successfully\x20renamed\x20','sendFile','WEB_SERVICE_URL','sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','parse','success/','error','SyncEventsService','defineProperty','__esModule'];(function(_0x3b8634,_0x65e45e){var _0x49606f=function(_0x22ae18){while(--_0x22ae18){_0x3b8634['push'](_0x3b8634['shift']());}};_0x49606f(++_0x65e45e);}(a21_0x340b,0x186));var a21_0x2961=function(_0x2699a9,_0x501e82){_0x2699a9=_0x2699a9-0x0;var _0x5b6c40=a21_0x340b[_0x2699a9];return _0x5b6c40;};'use strict';Object[a21_0x2961('0x0')](exports,a21_0x2961('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x2961('0x2'));const fs=require('fs');const request=require(a21_0x2961('0x3'));class SyncEventsService{constructor(){}[a21_0x2961('0x4')](){console['log'](a21_0x2961('0x5'));this[a21_0x2961('0x6')](0x0);}[a21_0x2961('0x6')](_0x1578b4){fs['readdir'](stationSettings_1[a21_0x2961('0x7')][a21_0x2961('0x8')][a21_0x2961('0x9')],(_0x5c8253,_0x3386f0)=>{if(_0x3386f0!=null){_0x3386f0['forEach'](_0x4dad54=>{if(_0x4dad54[a21_0x2961('0xa')](a21_0x2961('0xb'))){fs['stat'](stationSettings_1['StationContext']['settings'][a21_0x2961('0x9')]+_0x4dad54,(_0xa7d7c1,_0x512c0f)=>{const _0x5996d7=Math[a21_0x2961('0xc')](new Date()[a21_0x2961('0xd')]()-_0x512c0f[a21_0x2961('0xe')][a21_0x2961('0xd')]());if(_0x5996d7>0x2710){this['syncFile'](_0x4dad54);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x1578b4);},0x1388);}[a21_0x2961('0xf')](_0x1bf5fd){const _0x336f85=stationSettings_1[a21_0x2961('0x7')][a21_0x2961('0x8')]['eventFileFolder']+_0x1bf5fd;const _0x551d9e=stationSettings_1[a21_0x2961('0x7')][a21_0x2961('0x8')]['eventFileFolder']+'process/'+_0x1bf5fd;fs['rename'](_0x336f85,_0x551d9e,_0x1ead10=>{if(_0x1ead10){console[a21_0x2961('0x10')](_0x1ead10);}else{console[a21_0x2961('0x10')](a21_0x2961('0x11')+_0x551d9e);this[a21_0x2961('0x12')](_0x1bf5fd,_0x551d9e);}});}['sendFile'](_0x11218f,_0x5480a5){const _0x346b23=process['env'][a21_0x2961('0x13')]+a21_0x2961('0x14');const _0x4810fd={'file':fs['createReadStream'](_0x5480a5)};console['log'](new Date());console['log'](a21_0x2961('0x15')+_0x346b23);console[a21_0x2961('0x10')](a21_0x2961('0x16')+_0x11218f);try{request[a21_0x2961('0x17')]({'url':_0x346b23,'formData':_0x4810fd},function(_0x3abfe8,_0x4b6d55,_0x10ad98){let _0x2bb670=null;let _0x37e926='';if(_0x3abfe8){_0x37e926='';}else{try{console[a21_0x2961('0x10')]('Response\x20body:\x20'+_0x10ad98);_0x2bb670=JSON[a21_0x2961('0x18')](_0x10ad98);if(_0x2bb670['status']==0x1){_0x37e926=a21_0x2961('0x19');}else{_0x37e926='';}}catch(_0x493825){console[a21_0x2961('0x1a')](_0x493825);_0x37e926='';}}const _0x56d794=stationSettings_1[a21_0x2961('0x7')][a21_0x2961('0x8')][a21_0x2961('0x9')]+_0x37e926+_0x11218f;fs['rename'](_0x5480a5,_0x56d794,function(_0x3abfe8){if(_0x3abfe8){console[a21_0x2961('0x10')](_0x3abfe8);}console[a21_0x2961('0x10')](a21_0x2961('0x11')+_0x56d794);});});}catch(_0x1585a3){console['error'](_0x1585a3);}}}exports[a21_0x2961('0x1b')]=SyncEventsService;