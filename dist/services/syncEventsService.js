var a24_0x2032=['WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','__esModule','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','forEach','includes','.gz','stat','eventFileFolder','abs','getTime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile'];(function(_0x523843,_0x2b7700){var _0x21c99c=function(_0x6c98d4){while(--_0x6c98d4){_0x523843['push'](_0x523843['shift']());}};_0x21c99c(++_0x2b7700);}(a24_0x2032,0xeb));var a24_0x1add=function(_0x56c51d,_0x2c7c21){_0x56c51d=_0x56c51d-0x0;var _0x4973c7=a24_0x2032[_0x56c51d];return _0x4973c7;};'use strict';Object['defineProperty'](exports,a24_0x1add('0x0'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a24_0x1add('0x1'));class SyncEventsService{constructor(){}[a24_0x1add('0x2')](){console[a24_0x1add('0x3')](a24_0x1add('0x4'));this['exploreDir'](0x0);}[a24_0x1add('0x5')](_0x5dd780){fs[a24_0x1add('0x6')](stationSettings_1[a24_0x1add('0x7')][a24_0x1add('0x8')]['eventFileFolder'],(_0x4d8f17,_0x3d1b8d)=>{if(_0x3d1b8d!=null){_0x3d1b8d[a24_0x1add('0x9')](_0x4ae272=>{if(_0x4ae272[a24_0x1add('0xa')](a24_0x1add('0xb'))){fs[a24_0x1add('0xc')](stationSettings_1[a24_0x1add('0x7')][a24_0x1add('0x8')][a24_0x1add('0xd')]+_0x4ae272,(_0x497258,_0x3677ea)=>{const _0x3b9736=Math[a24_0x1add('0xe')](new Date()[a24_0x1add('0xf')]()-_0x3677ea['ctime'][a24_0x1add('0xf')]());if(_0x3b9736>0x2710){this[a24_0x1add('0x10')](_0x4ae272);}});}});}});setTimeout(()=>{this[a24_0x1add('0x5')](++_0x5dd780);},0x1388);}['syncFile'](_0x48a255){const _0x54a3b1=stationSettings_1[a24_0x1add('0x7')][a24_0x1add('0x8')][a24_0x1add('0xd')]+_0x48a255;const _0x35eea5=stationSettings_1[a24_0x1add('0x7')][a24_0x1add('0x8')][a24_0x1add('0xd')]+a24_0x1add('0x11')+_0x48a255;fs[a24_0x1add('0x12')](_0x54a3b1,_0x35eea5,_0x382983=>{if(_0x382983){console[a24_0x1add('0x3')](_0x382983);}else{console['log'](a24_0x1add('0x13')+_0x35eea5);this['sendFile'](_0x48a255,_0x35eea5);}});}[a24_0x1add('0x14')](_0x1725af,_0x9dfdf6){const _0x43b82a=process['env'][a24_0x1add('0x15')]+a24_0x1add('0x16');const _0x41f345={'file':fs[a24_0x1add('0x17')](_0x9dfdf6)};console[a24_0x1add('0x3')](new Date());console[a24_0x1add('0x3')](a24_0x1add('0x18')+_0x43b82a);console[a24_0x1add('0x3')]('Sending\x20file:\x20'+_0x1725af);try{request[a24_0x1add('0x19')]({'url':_0x43b82a,'formData':_0x41f345},function(_0x109604,_0x9748f4,_0x1737a1){let _0x2db61b=null;let _0x244956='';if(_0x109604){_0x244956='';}else{try{console['log'](a24_0x1add('0x1a')+_0x1737a1);_0x2db61b=JSON[a24_0x1add('0x1b')](_0x1737a1);if(_0x2db61b[a24_0x1add('0x1c')]==0x1){_0x244956=a24_0x1add('0x1d');}else{_0x244956='';}}catch(_0x45ebf2){console[a24_0x1add('0x1e')](_0x45ebf2);_0x244956='';}}const _0x5282ed=stationSettings_1[a24_0x1add('0x7')][a24_0x1add('0x8')][a24_0x1add('0xd')]+_0x244956+_0x1725af;fs[a24_0x1add('0x12')](_0x9dfdf6,_0x5282ed,function(_0x109604){if(_0x109604){console['log'](_0x109604);}console['log']('Successfully\x20renamed\x20'+_0x5282ed);});});}catch(_0x21680a){console[a24_0x1add('0x1e')](_0x21680a);}}}exports[a24_0x1add('0x1f')]=SyncEventsService;