var a21_0x24dd=['eventFileFolder','forEach','includes','.gz','stat','StationContext','settings','abs','getTime','ctime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','defineProperty','../infrastructure/stationSettings','request','init','log','exploreDir','readdir'];(function(_0x24a786,_0x24d1c4){var _0x54072e=function(_0x2eb84e){while(--_0x2eb84e){_0x24a786['push'](_0x24a786['shift']());}};_0x54072e(++_0x24d1c4);}(a21_0x24dd,0x109));var a21_0x64f0=function(_0x13240f,_0x392db5){_0x13240f=_0x13240f-0x0;var _0x4bd21f=a21_0x24dd[_0x13240f];return _0x4bd21f;};'use strict';Object[a21_0x64f0('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a21_0x64f0('0x1'));const fs=require('fs');const request=require(a21_0x64f0('0x2'));class SyncEventsService{constructor(){}[a21_0x64f0('0x3')](){console[a21_0x64f0('0x4')]('init\x20SyncEventsService');this[a21_0x64f0('0x5')](0x0);}[a21_0x64f0('0x5')](_0x5bda5f){fs[a21_0x64f0('0x6')](stationSettings_1['StationContext']['settings'][a21_0x64f0('0x7')],(_0x399504,_0x868905)=>{if(_0x868905!=null){_0x868905[a21_0x64f0('0x8')](_0x1c58b5=>{if(_0x1c58b5[a21_0x64f0('0x9')](a21_0x64f0('0xa'))){fs[a21_0x64f0('0xb')](stationSettings_1[a21_0x64f0('0xc')][a21_0x64f0('0xd')][a21_0x64f0('0x7')]+_0x1c58b5,(_0xee2291,_0x4e1cea)=>{const _0x3b58a2=Math[a21_0x64f0('0xe')](new Date()[a21_0x64f0('0xf')]()-_0x4e1cea[a21_0x64f0('0x10')][a21_0x64f0('0xf')]());if(_0x3b58a2>0x2710){this[a21_0x64f0('0x11')](_0x1c58b5);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x5bda5f);},0x1388);}[a21_0x64f0('0x11')](_0x99f4e2){const _0x14cfa0=stationSettings_1['StationContext'][a21_0x64f0('0xd')]['eventFileFolder']+_0x99f4e2;const _0x2388eb=stationSettings_1[a21_0x64f0('0xc')][a21_0x64f0('0xd')][a21_0x64f0('0x7')]+a21_0x64f0('0x12')+_0x99f4e2;fs[a21_0x64f0('0x13')](_0x14cfa0,_0x2388eb,_0x367d36=>{if(_0x367d36){console[a21_0x64f0('0x4')](_0x367d36);}else{console[a21_0x64f0('0x4')](a21_0x64f0('0x14')+_0x2388eb);this[a21_0x64f0('0x15')](_0x99f4e2,_0x2388eb);}});}[a21_0x64f0('0x15')](_0x4d9c8e,_0x212082){const _0x100bef=process[a21_0x64f0('0x16')][a21_0x64f0('0x17')]+'sync_files/upload_event';const _0x15f4fe={'file':fs[a21_0x64f0('0x18')](_0x212082)};console[a21_0x64f0('0x4')](new Date());console['log'](a21_0x64f0('0x19')+_0x100bef);console[a21_0x64f0('0x4')](a21_0x64f0('0x1a')+_0x4d9c8e);try{request[a21_0x64f0('0x1b')]({'url':_0x100bef,'formData':_0x15f4fe},function(_0x42fa4e,_0x1b4cbd,_0x167a33){let _0x8d6725=null;let _0x177f9c='';if(_0x42fa4e){_0x177f9c='';}else{try{console[a21_0x64f0('0x4')](a21_0x64f0('0x1c')+_0x167a33);_0x8d6725=JSON[a21_0x64f0('0x1d')](_0x167a33);if(_0x8d6725[a21_0x64f0('0x1e')]==0x1){_0x177f9c=a21_0x64f0('0x1f');}else{_0x177f9c='';}}catch(_0x4d307c){console[a21_0x64f0('0x20')](_0x4d307c);_0x177f9c='';}}const _0x3855dd=stationSettings_1[a21_0x64f0('0xc')][a21_0x64f0('0xd')][a21_0x64f0('0x7')]+_0x177f9c+_0x4d9c8e;fs[a21_0x64f0('0x13')](_0x212082,_0x3855dd,function(_0x42fa4e){if(_0x42fa4e){console[a21_0x64f0('0x4')](_0x42fa4e);}console[a21_0x64f0('0x4')]('Successfully\x20renamed\x20'+_0x3855dd);});});}catch(_0x712ac2){console[a21_0x64f0('0x20')](_0x712ac2);}}}exports[a21_0x64f0('0x21')]=SyncEventsService;