var a21_0x3dd4=['readdir','StationContext','settings','eventFileFolder','includes','.gz','stat','abs','getTime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','Response\x20body:\x20','status','error','defineProperty','../infrastructure/stationSettings','init','exploreDir','log','init\x20Sync'];(function(_0x22b82c,_0x25d7da){var _0x1f34a7=function(_0x474cbe){while(--_0x474cbe){_0x22b82c['push'](_0x22b82c['shift']());}};_0x1f34a7(++_0x25d7da);}(a21_0x3dd4,0x108));var a21_0x189e=function(_0x534037,_0x585bca){_0x534037=_0x534037-0x0;var _0x49108e=a21_0x3dd4[_0x534037];return _0x49108e;};'use strict';Object[a21_0x189e('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a21_0x189e('0x1'));const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}[a21_0x189e('0x2')](){this[a21_0x189e('0x3')](0x0);console[a21_0x189e('0x4')](a21_0x189e('0x5'));}[a21_0x189e('0x3')](_0x1ffa4a){fs[a21_0x189e('0x6')](stationSettings_1[a21_0x189e('0x7')][a21_0x189e('0x8')][a21_0x189e('0x9')],(_0x5595bf,_0x49ef0b)=>{if(_0x49ef0b!=null){_0x49ef0b['forEach'](_0x3e2934=>{if(_0x3e2934[a21_0x189e('0xa')](a21_0x189e('0xb'))){fs[a21_0x189e('0xc')](stationSettings_1[a21_0x189e('0x7')][a21_0x189e('0x8')][a21_0x189e('0x9')]+_0x3e2934,(_0x267a23,_0x195d45)=>{const _0x5e0999=Math[a21_0x189e('0xd')](new Date()['getTime']()-_0x195d45['ctime'][a21_0x189e('0xe')]());if(_0x5e0999>0x2710){this['syncFile'](_0x3e2934);}});}});}});setTimeout(()=>{this[a21_0x189e('0x3')](++_0x1ffa4a);},0x1388);}[a21_0x189e('0xf')](_0x4526d7){const _0x10192a=stationSettings_1['StationContext'][a21_0x189e('0x8')][a21_0x189e('0x9')]+_0x4526d7;const _0x118477=stationSettings_1[a21_0x189e('0x7')][a21_0x189e('0x8')]['eventFileFolder']+a21_0x189e('0x10')+_0x4526d7;fs[a21_0x189e('0x11')](_0x10192a,_0x118477,_0x5b9c4b=>{if(_0x5b9c4b){console['log'](_0x5b9c4b);}else{console[a21_0x189e('0x4')](a21_0x189e('0x12')+_0x118477);this['sendFile'](_0x4526d7,_0x118477);}});}[a21_0x189e('0x13')](_0x411dc5,_0x9b6f4a){const _0x34b146=a21_0x189e('0x14');const _0x4ec3d8={'file':fs[a21_0x189e('0x15')](_0x9b6f4a)};console['log'](new Date());console[a21_0x189e('0x4')](a21_0x189e('0x16')+_0x34b146);console[a21_0x189e('0x4')](a21_0x189e('0x17')+_0x411dc5);try{request['post']({'url':_0x34b146,'formData':_0x4ec3d8},function(_0x4f5d05,_0x5b802f,_0x28ce1d){let _0x54c20d=null;let _0x26b0f4='';if(_0x4f5d05){_0x26b0f4='';}else{try{console[a21_0x189e('0x4')](a21_0x189e('0x18')+_0x28ce1d);_0x54c20d=JSON['parse'](_0x28ce1d);if(_0x54c20d[a21_0x189e('0x19')]==0x1){_0x26b0f4='success/';}else{_0x26b0f4='';}}catch(_0x23b6e5){console['error'](_0x23b6e5);_0x26b0f4='';}}const _0x420723=stationSettings_1[a21_0x189e('0x7')][a21_0x189e('0x8')][a21_0x189e('0x9')]+_0x26b0f4+_0x411dc5;fs[a21_0x189e('0x11')](_0x9b6f4a,_0x420723,function(_0x4f5d05){if(_0x4f5d05){console[a21_0x189e('0x4')](_0x4f5d05);}console['log']('Successfully\x20renamed\x20'+_0x420723);});});}catch(_0x4bb274){console[a21_0x189e('0x1a')](_0x4bb274);}}}exports['SyncEventsService']=SyncEventsService;