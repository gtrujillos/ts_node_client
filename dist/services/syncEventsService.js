var a22_0x245e=['sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','error','SyncEventsService','defineProperty','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','eventFileFolder','includes','.gz','abs','getTime','ctime','syncFile','process/','rename','Successfully\x20renamed\x20'];(function(_0x3aa453,_0x1e14c3){var _0xddf554=function(_0x8117bd){while(--_0x8117bd){_0x3aa453['push'](_0x3aa453['shift']());}};_0xddf554(++_0x1e14c3);}(a22_0x245e,0xed));var a22_0x407a=function(_0x166e88,_0x3c5444){_0x166e88=_0x166e88-0x0;var _0x234bb1=a22_0x245e[_0x166e88];return _0x234bb1;};'use strict';Object[a22_0x407a('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a22_0x407a('0x1'));class SyncEventsService{constructor(){}[a22_0x407a('0x2')](){console[a22_0x407a('0x3')](a22_0x407a('0x4'));this[a22_0x407a('0x5')](0x0);}[a22_0x407a('0x5')](_0x1cbdf1){fs[a22_0x407a('0x6')](stationSettings_1[a22_0x407a('0x7')][a22_0x407a('0x8')][a22_0x407a('0x9')],(_0x1a4e51,_0x4390a0)=>{if(_0x4390a0!=null){_0x4390a0['forEach'](_0x365c56=>{if(_0x365c56[a22_0x407a('0xa')](a22_0x407a('0xb'))){fs['stat'](stationSettings_1[a22_0x407a('0x7')][a22_0x407a('0x8')]['eventFileFolder']+_0x365c56,(_0x26fcc6,_0x12d602)=>{const _0x4889f4=Math[a22_0x407a('0xc')](new Date()[a22_0x407a('0xd')]()-_0x12d602[a22_0x407a('0xe')][a22_0x407a('0xd')]());if(_0x4889f4>0x2710){this[a22_0x407a('0xf')](_0x365c56);}});}});}});setTimeout(()=>{this[a22_0x407a('0x5')](++_0x1cbdf1);},0x1388);}['syncFile'](_0x44caca){const _0x1819a5=stationSettings_1[a22_0x407a('0x7')][a22_0x407a('0x8')][a22_0x407a('0x9')]+_0x44caca;const _0x2de64d=stationSettings_1[a22_0x407a('0x7')][a22_0x407a('0x8')]['eventFileFolder']+a22_0x407a('0x10')+_0x44caca;fs[a22_0x407a('0x11')](_0x1819a5,_0x2de64d,_0x5cc65e=>{if(_0x5cc65e){console[a22_0x407a('0x3')](_0x5cc65e);}else{console[a22_0x407a('0x3')](a22_0x407a('0x12')+_0x2de64d);this[a22_0x407a('0x13')](_0x44caca,_0x2de64d);}});}[a22_0x407a('0x13')](_0x326276,_0x537b5c){const _0x2a0971=process[a22_0x407a('0x14')][a22_0x407a('0x15')]+a22_0x407a('0x16');const _0x4acd36={'file':fs[a22_0x407a('0x17')](_0x537b5c)};console['log'](new Date());console[a22_0x407a('0x3')](a22_0x407a('0x18')+_0x2a0971);console[a22_0x407a('0x3')](a22_0x407a('0x19')+_0x326276);try{request[a22_0x407a('0x1a')]({'url':_0x2a0971,'formData':_0x4acd36},function(_0x52a884,_0x23873c,_0x1cb3d0){let _0x6cfa0a=null;let _0x8ac114='';if(_0x52a884){_0x8ac114='';}else{try{console['log'](a22_0x407a('0x1b')+_0x1cb3d0);_0x6cfa0a=JSON[a22_0x407a('0x1c')](_0x1cb3d0);if(_0x6cfa0a[a22_0x407a('0x1d')]==0x1){_0x8ac114='success/';}else{_0x8ac114='';}}catch(_0x32a57d){console[a22_0x407a('0x1e')](_0x32a57d);_0x8ac114='';}}const _0xbf1d6b=stationSettings_1[a22_0x407a('0x7')]['settings'][a22_0x407a('0x9')]+_0x8ac114+_0x326276;fs['rename'](_0x537b5c,_0xbf1d6b,function(_0x52a884){if(_0x52a884){console['log'](_0x52a884);}console[a22_0x407a('0x3')](a22_0x407a('0x12')+_0xbf1d6b);});});}catch(_0x2ffade){console['error'](_0x2ffade);}}}exports[a22_0x407a('0x1f')]=SyncEventsService;