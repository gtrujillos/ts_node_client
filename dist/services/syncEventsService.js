var a25_0x245e=['sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','error','SyncEventsService','defineProperty','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','eventFileFolder','includes','.gz','abs','getTime','ctime','syncFile','process/','rename','Successfully\x20renamed\x20'];(function(_0x5d84b8,_0x22869b){var _0x9958e6=function(_0x5393d2){while(--_0x5393d2){_0x5d84b8['push'](_0x5d84b8['shift']());}};_0x9958e6(++_0x22869b);}(a25_0x245e,0xed));var a25_0x407a=function(_0x11ef08,_0x29160e){_0x11ef08=_0x11ef08-0x0;var _0x55a14d=a25_0x245e[_0x11ef08];return _0x55a14d;};'use strict';Object[a25_0x407a('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a25_0x407a('0x1'));class SyncEventsService{constructor(){}[a25_0x407a('0x2')](){console[a25_0x407a('0x3')](a25_0x407a('0x4'));this[a25_0x407a('0x5')](0x0);}[a25_0x407a('0x5')](_0x1cbdf1){fs[a25_0x407a('0x6')](stationSettings_1[a25_0x407a('0x7')][a25_0x407a('0x8')][a25_0x407a('0x9')],(_0x1a4e51,_0x4390a0)=>{if(_0x4390a0!=null){_0x4390a0['forEach'](_0x365c56=>{if(_0x365c56[a25_0x407a('0xa')](a25_0x407a('0xb'))){fs['stat'](stationSettings_1[a25_0x407a('0x7')][a25_0x407a('0x8')]['eventFileFolder']+_0x365c56,(_0x26fcc6,_0x12d602)=>{const _0x4889f4=Math[a25_0x407a('0xc')](new Date()[a25_0x407a('0xd')]()-_0x12d602[a25_0x407a('0xe')][a25_0x407a('0xd')]());if(_0x4889f4>0x2710){this[a25_0x407a('0xf')](_0x365c56);}});}});}});setTimeout(()=>{this[a25_0x407a('0x5')](++_0x1cbdf1);},0x1388);}['syncFile'](_0x44caca){const _0x1819a5=stationSettings_1[a25_0x407a('0x7')][a25_0x407a('0x8')][a25_0x407a('0x9')]+_0x44caca;const _0x2de64d=stationSettings_1[a25_0x407a('0x7')][a25_0x407a('0x8')]['eventFileFolder']+a25_0x407a('0x10')+_0x44caca;fs[a25_0x407a('0x11')](_0x1819a5,_0x2de64d,_0x5cc65e=>{if(_0x5cc65e){console[a25_0x407a('0x3')](_0x5cc65e);}else{console[a25_0x407a('0x3')](a25_0x407a('0x12')+_0x2de64d);this[a25_0x407a('0x13')](_0x44caca,_0x2de64d);}});}[a25_0x407a('0x13')](_0x326276,_0x537b5c){const _0x2a0971=process[a25_0x407a('0x14')][a25_0x407a('0x15')]+a25_0x407a('0x16');const _0x4acd36={'file':fs[a25_0x407a('0x17')](_0x537b5c)};console['log'](new Date());console[a25_0x407a('0x3')](a25_0x407a('0x18')+_0x2a0971);console[a25_0x407a('0x3')](a25_0x407a('0x19')+_0x326276);try{request[a25_0x407a('0x1a')]({'url':_0x2a0971,'formData':_0x4acd36},function(_0x52a884,_0x23873c,_0x1cb3d0){let _0x6cfa0a=null;let _0x8ac114='';if(_0x52a884){_0x8ac114='';}else{try{console['log'](a25_0x407a('0x1b')+_0x1cb3d0);_0x6cfa0a=JSON[a25_0x407a('0x1c')](_0x1cb3d0);if(_0x6cfa0a[a25_0x407a('0x1d')]==0x1){_0x8ac114='success/';}else{_0x8ac114='';}}catch(_0x32a57d){console[a25_0x407a('0x1e')](_0x32a57d);_0x8ac114='';}}const _0xbf1d6b=stationSettings_1[a25_0x407a('0x7')]['settings'][a25_0x407a('0x9')]+_0x8ac114+_0x326276;fs['rename'](_0x537b5c,_0xbf1d6b,function(_0x52a884){if(_0x52a884){console['log'](_0x52a884);}console[a25_0x407a('0x3')](a25_0x407a('0x12')+_0xbf1d6b);});});}catch(_0x2ffade){console['error'](_0x2ffade);}}}exports[a25_0x407a('0x1f')]=SyncEventsService;