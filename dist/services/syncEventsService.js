var a21_0x1231=['serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','Successfully\x20renamed\x20','SyncEventsService','../infrastructure/stationSettings','request','init','log','exploreDir','readdir','StationContext','eventFileFolder','includes','.gz','stat','getTime','syncFile','settings','process/','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream'];(function(_0x2d60b9,_0x3444aa){var _0x1c7519=function(_0x2c82a9){while(--_0x2c82a9){_0x2d60b9['push'](_0x2d60b9['shift']());}};_0x1c7519(++_0x3444aa);}(a21_0x1231,0x7e));var a21_0x45ba=function(_0x1186d3,_0x1be8f4){_0x1186d3=_0x1186d3-0x0;var _0x21820a=a21_0x1231[_0x1186d3];return _0x21820a;};'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a21_0x45ba('0x0'));const fs=require('fs');const request=require(a21_0x45ba('0x1'));class SyncEventsService{constructor(){}[a21_0x45ba('0x2')](){this['exploreDir'](0x0);console[a21_0x45ba('0x3')]('init\x20Sync');}[a21_0x45ba('0x4')](_0x35dcaf){fs[a21_0x45ba('0x5')](stationSettings_1[a21_0x45ba('0x6')]['settings'][a21_0x45ba('0x7')],(_0x52e266,_0x2bae81)=>{if(_0x2bae81!=null){_0x2bae81['forEach'](_0x30a0d3=>{if(_0x30a0d3[a21_0x45ba('0x8')](a21_0x45ba('0x9'))){fs[a21_0x45ba('0xa')](stationSettings_1[a21_0x45ba('0x6')]['settings']['eventFileFolder']+_0x30a0d3,(_0x57402c,_0x351fdc)=>{const _0x1b74bd=Math['abs'](new Date()['getTime']()-_0x351fdc['ctime'][a21_0x45ba('0xb')]());if(_0x1b74bd>0x2710){this[a21_0x45ba('0xc')](_0x30a0d3);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x35dcaf);},0x1388);}['syncFile'](_0x3ac309){const _0x3e545a=stationSettings_1[a21_0x45ba('0x6')][a21_0x45ba('0xd')][a21_0x45ba('0x7')]+_0x3ac309;const _0xb2af00=stationSettings_1['StationContext'][a21_0x45ba('0xd')][a21_0x45ba('0x7')]+a21_0x45ba('0xe')+_0x3ac309;fs[a21_0x45ba('0xf')](_0x3e545a,_0xb2af00,_0x42c956=>{if(_0x42c956){console[a21_0x45ba('0x3')](_0x42c956);}else{console[a21_0x45ba('0x3')]('Successfully\x20renamed\x20'+_0xb2af00);this['sendFile'](_0x3ac309,_0xb2af00);}});}[a21_0x45ba('0x10')](_0x3991a8,_0x5baa3c){const _0x1567c4=a21_0x45ba('0x11');const _0x129336={'file':fs[a21_0x45ba('0x12')](_0x5baa3c)};console[a21_0x45ba('0x3')](new Date());console[a21_0x45ba('0x3')](a21_0x45ba('0x13')+_0x1567c4);console[a21_0x45ba('0x3')](a21_0x45ba('0x14')+_0x3991a8);try{request[a21_0x45ba('0x15')]({'url':_0x1567c4,'formData':_0x129336},function(_0x2bedee,_0x713a0a,_0x54ce9e){let _0x4e0a7c=null;let _0x47a900='';if(_0x2bedee){_0x47a900='';}else{try{console[a21_0x45ba('0x3')](a21_0x45ba('0x16')+_0x54ce9e);_0x4e0a7c=JSON[a21_0x45ba('0x17')](_0x54ce9e);if(_0x4e0a7c[a21_0x45ba('0x18')]==0x1){_0x47a900=a21_0x45ba('0x19');}else{_0x47a900='';}}catch(_0x59bffc){console[a21_0x45ba('0x1a')](_0x59bffc);_0x47a900='';}}const _0x1cef78=stationSettings_1[a21_0x45ba('0x6')]['settings'][a21_0x45ba('0x7')]+_0x47a900+_0x3991a8;fs['rename'](_0x5baa3c,_0x1cef78,function(_0x2bedee){if(_0x2bedee){console['log'](_0x2bedee);}console[a21_0x45ba('0x3')](a21_0x45ba('0x1b')+_0x1cef78);});});}catch(_0x36216f){console['error'](_0x36216f);}}}exports[a21_0x45ba('0x1c')]=SyncEventsService;