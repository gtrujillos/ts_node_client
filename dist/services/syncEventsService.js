var a25_0x4f26=['serviceUrl:\x20','Sending\x20file:\x20','Response\x20body:\x20','status','success/','error','SyncEventsService','defineProperty','request','init','init\x20SyncEventsService','exploreDir','StationContext','forEach','includes','.gz','stat','settings','eventFileFolder','abs','ctime','syncFile','process/','rename','log','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream'];(function(_0x1bff99,_0x176f93){var _0x3aeb2f=function(_0x589a03){while(--_0x589a03){_0x1bff99['push'](_0x1bff99['shift']());}};_0x3aeb2f(++_0x176f93);}(a25_0x4f26,0x19a));var a25_0x3b92=function(_0x2d80a5,_0x15e615){_0x2d80a5=_0x2d80a5-0x0;var _0x16bdca=a25_0x4f26[_0x2d80a5];return _0x16bdca;};'use strict';Object[a25_0x3b92('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a25_0x3b92('0x1'));class SyncEventsService{constructor(){}[a25_0x3b92('0x2')](){console['log'](a25_0x3b92('0x3'));this[a25_0x3b92('0x4')](0x0);}[a25_0x3b92('0x4')](_0x535f6b){fs['readdir'](stationSettings_1[a25_0x3b92('0x5')]['settings']['eventFileFolder'],(_0x34e33c,_0x521ff3)=>{if(_0x521ff3!=null){_0x521ff3[a25_0x3b92('0x6')](_0x4018bf=>{if(_0x4018bf[a25_0x3b92('0x7')](a25_0x3b92('0x8'))){fs[a25_0x3b92('0x9')](stationSettings_1[a25_0x3b92('0x5')][a25_0x3b92('0xa')][a25_0x3b92('0xb')]+_0x4018bf,(_0x25a07d,_0x190404)=>{const _0x21be0b=Math[a25_0x3b92('0xc')](new Date()['getTime']()-_0x190404[a25_0x3b92('0xd')]['getTime']());if(_0x21be0b>0x2710){this[a25_0x3b92('0xe')](_0x4018bf);}});}});}});setTimeout(()=>{this[a25_0x3b92('0x4')](++_0x535f6b);},0x1388);}[a25_0x3b92('0xe')](_0x47ce3a){const _0xf119e4=stationSettings_1['StationContext'][a25_0x3b92('0xa')][a25_0x3b92('0xb')]+_0x47ce3a;const _0x43d604=stationSettings_1[a25_0x3b92('0x5')][a25_0x3b92('0xa')][a25_0x3b92('0xb')]+a25_0x3b92('0xf')+_0x47ce3a;fs[a25_0x3b92('0x10')](_0xf119e4,_0x43d604,_0x4fbdb2=>{if(_0x4fbdb2){console[a25_0x3b92('0x11')](_0x4fbdb2);}else{console[a25_0x3b92('0x11')](a25_0x3b92('0x12')+_0x43d604);this[a25_0x3b92('0x13')](_0x47ce3a,_0x43d604);}});}['sendFile'](_0x3e264a,_0x521afa){const _0x525155=process[a25_0x3b92('0x14')][a25_0x3b92('0x15')]+a25_0x3b92('0x16');const _0x278135={'file':fs[a25_0x3b92('0x17')](_0x521afa)};console[a25_0x3b92('0x11')](new Date());console[a25_0x3b92('0x11')](a25_0x3b92('0x18')+_0x525155);console[a25_0x3b92('0x11')](a25_0x3b92('0x19')+_0x3e264a);try{request['post']({'url':_0x525155,'formData':_0x278135},function(_0x333554,_0x2184ae,_0x56c019){let _0x21d9a3=null;let _0x533c06='';if(_0x333554){_0x533c06='';}else{try{console[a25_0x3b92('0x11')](a25_0x3b92('0x1a')+_0x56c019);_0x21d9a3=JSON['parse'](_0x56c019);if(_0x21d9a3[a25_0x3b92('0x1b')]==0x1){_0x533c06=a25_0x3b92('0x1c');}else{_0x533c06='';}}catch(_0x21efe7){console['error'](_0x21efe7);_0x533c06='';}}const _0x21e95e=stationSettings_1[a25_0x3b92('0x5')][a25_0x3b92('0xa')][a25_0x3b92('0xb')]+_0x533c06+_0x3e264a;fs[a25_0x3b92('0x10')](_0x521afa,_0x21e95e,function(_0x333554){if(_0x333554){console['log'](_0x333554);}console[a25_0x3b92('0x11')](a25_0x3b92('0x12')+_0x21e95e);});});}catch(_0x23bcf3){console[a25_0x3b92('0x1d')](_0x23bcf3);}}}exports[a25_0x3b92('0x1e')]=SyncEventsService;