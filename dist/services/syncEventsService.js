var a21_0x5072=['log','Successfully\x20renamed\x20','sendFile','env','sync_files/upload_event','serviceUrl:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','init\x20SyncEventsService','exploreDir','readdir','settings','eventFileFolder','forEach','includes','stat','abs','getTime','ctime','syncFile','StationContext','process/','rename'];(function(_0x38591b,_0x4652e){var _0x5347c0=function(_0x549663){while(--_0x549663){_0x38591b['push'](_0x38591b['shift']());}};_0x5347c0(++_0x4652e);}(a21_0x5072,0x136));var a21_0x3fe8=function(_0x4581ec,_0x1f2e5e){_0x4581ec=_0x4581ec-0x0;var _0x380657=a21_0x5072[_0x4581ec];return _0x380657;};'use strict';Object[a21_0x3fe8('0x0')](exports,a21_0x3fe8('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x3fe8('0x2'));const fs=require('fs');const request=require(a21_0x3fe8('0x3'));class SyncEventsService{constructor(){}[a21_0x3fe8('0x4')](){console['log'](a21_0x3fe8('0x5'));this[a21_0x3fe8('0x6')](0x0);}[a21_0x3fe8('0x6')](_0x2229eb){fs[a21_0x3fe8('0x7')](stationSettings_1['StationContext'][a21_0x3fe8('0x8')][a21_0x3fe8('0x9')],(_0x324515,_0x7870a4)=>{if(_0x7870a4!=null){_0x7870a4[a21_0x3fe8('0xa')](_0x153f3a=>{if(_0x153f3a[a21_0x3fe8('0xb')]('.gz')){fs[a21_0x3fe8('0xc')](stationSettings_1['StationContext'][a21_0x3fe8('0x8')][a21_0x3fe8('0x9')]+_0x153f3a,(_0x2155f8,_0x2a04e0)=>{const _0x5469d8=Math[a21_0x3fe8('0xd')](new Date()[a21_0x3fe8('0xe')]()-_0x2a04e0[a21_0x3fe8('0xf')][a21_0x3fe8('0xe')]());if(_0x5469d8>0x2710){this[a21_0x3fe8('0x10')](_0x153f3a);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x2229eb);},0x1388);}[a21_0x3fe8('0x10')](_0x58d511){const _0x4ff986=stationSettings_1[a21_0x3fe8('0x11')]['settings'][a21_0x3fe8('0x9')]+_0x58d511;const _0x3c1c44=stationSettings_1[a21_0x3fe8('0x11')][a21_0x3fe8('0x8')][a21_0x3fe8('0x9')]+a21_0x3fe8('0x12')+_0x58d511;fs[a21_0x3fe8('0x13')](_0x4ff986,_0x3c1c44,_0x59eaf1=>{if(_0x59eaf1){console[a21_0x3fe8('0x14')](_0x59eaf1);}else{console[a21_0x3fe8('0x14')](a21_0x3fe8('0x15')+_0x3c1c44);this[a21_0x3fe8('0x16')](_0x58d511,_0x3c1c44);}});}[a21_0x3fe8('0x16')](_0x3f4672,_0x25ffd4){const _0x59ea4a=process[a21_0x3fe8('0x17')]['WEB_SERVICE_URL']+a21_0x3fe8('0x18');const _0x5257ad={'file':fs['createReadStream'](_0x25ffd4)};console[a21_0x3fe8('0x14')](new Date());console['log'](a21_0x3fe8('0x19')+_0x59ea4a);console[a21_0x3fe8('0x14')]('Sending\x20file:\x20'+_0x3f4672);try{request[a21_0x3fe8('0x1a')]({'url':_0x59ea4a,'formData':_0x5257ad},function(_0x3dec08,_0x130d3c,_0x104cc5){let _0x18acc1=null;let _0x200fdd='';if(_0x3dec08){_0x200fdd='';}else{try{console[a21_0x3fe8('0x14')](a21_0x3fe8('0x1b')+_0x104cc5);_0x18acc1=JSON[a21_0x3fe8('0x1c')](_0x104cc5);if(_0x18acc1[a21_0x3fe8('0x1d')]==0x1){_0x200fdd=a21_0x3fe8('0x1e');}else{_0x200fdd='';}}catch(_0x50d9a5){console[a21_0x3fe8('0x1f')](_0x50d9a5);_0x200fdd='';}}const _0x4b59a5=stationSettings_1['StationContext']['settings'][a21_0x3fe8('0x9')]+_0x200fdd+_0x3f4672;fs[a21_0x3fe8('0x13')](_0x25ffd4,_0x4b59a5,function(_0x3dec08){if(_0x3dec08){console[a21_0x3fe8('0x14')](_0x3dec08);}console[a21_0x3fe8('0x14')](a21_0x3fe8('0x15')+_0x4b59a5);});});}catch(_0x3df305){console[a21_0x3fe8('0x1f')](_0x3df305);}}}exports[a21_0x3fe8('0x20')]=SyncEventsService;