var a25_0x1acd=['includes','.gz','stat','abs','getTime','ctime','syncFile','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','__esModule','../infrastructure/stationSettings','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','eventFileFolder','forEach'];(function(_0x5990e2,_0x2099f0){var _0x545696=function(_0x3728e4){while(--_0x3728e4){_0x5990e2['push'](_0x5990e2['shift']());}};_0x545696(++_0x2099f0);}(a25_0x1acd,0x1d5));var a25_0x27de=function(_0x1463e6,_0x4cbbe5){_0x1463e6=_0x1463e6-0x0;var _0x5ad029=a25_0x1acd[_0x1463e6];return _0x5ad029;};'use strict';Object['defineProperty'](exports,a25_0x27de('0x0'),{'value':!![]});const stationSettings_1=require(a25_0x27de('0x1'));const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}[a25_0x27de('0x2')](){console[a25_0x27de('0x3')](a25_0x27de('0x4'));this[a25_0x27de('0x5')](0x0);}[a25_0x27de('0x5')](_0x26d930){fs[a25_0x27de('0x6')](stationSettings_1[a25_0x27de('0x7')][a25_0x27de('0x8')][a25_0x27de('0x9')],(_0x556d8c,_0x5f3606)=>{if(_0x5f3606!=null){_0x5f3606[a25_0x27de('0xa')](_0x5aa7a8=>{if(_0x5aa7a8[a25_0x27de('0xb')](a25_0x27de('0xc'))){fs[a25_0x27de('0xd')](stationSettings_1[a25_0x27de('0x7')][a25_0x27de('0x8')][a25_0x27de('0x9')]+_0x5aa7a8,(_0x40156d,_0x17d6e8)=>{const _0xecf080=Math[a25_0x27de('0xe')](new Date()[a25_0x27de('0xf')]()-_0x17d6e8[a25_0x27de('0x10')][a25_0x27de('0xf')]());if(_0xecf080>0x2710){this[a25_0x27de('0x11')](_0x5aa7a8);}});}});}});setTimeout(()=>{this[a25_0x27de('0x5')](++_0x26d930);},0x1388);}[a25_0x27de('0x11')](_0x379041){const _0x583d25=stationSettings_1[a25_0x27de('0x7')][a25_0x27de('0x8')][a25_0x27de('0x9')]+_0x379041;const _0x3bce7a=stationSettings_1[a25_0x27de('0x7')][a25_0x27de('0x8')][a25_0x27de('0x9')]+'process/'+_0x379041;fs[a25_0x27de('0x12')](_0x583d25,_0x3bce7a,_0x31f977=>{if(_0x31f977){console[a25_0x27de('0x3')](_0x31f977);}else{console['log'](a25_0x27de('0x13')+_0x3bce7a);this[a25_0x27de('0x14')](_0x379041,_0x3bce7a);}});}[a25_0x27de('0x14')](_0x46410b,_0x11784c){const _0x12d0db=process[a25_0x27de('0x15')][a25_0x27de('0x16')]+a25_0x27de('0x17');const _0x16d0b7={'file':fs['createReadStream'](_0x11784c)};console[a25_0x27de('0x3')](new Date());console[a25_0x27de('0x3')]('serviceUrl:\x20'+_0x12d0db);console[a25_0x27de('0x3')](a25_0x27de('0x18')+_0x46410b);try{request[a25_0x27de('0x19')]({'url':_0x12d0db,'formData':_0x16d0b7},function(_0x5bb80b,_0x330005,_0x3c680f){let _0x17200d=null;let _0x45d074='';if(_0x5bb80b){_0x45d074='';}else{try{console['log'](a25_0x27de('0x1a')+_0x3c680f);_0x17200d=JSON[a25_0x27de('0x1b')](_0x3c680f);if(_0x17200d[a25_0x27de('0x1c')]==0x1){_0x45d074=a25_0x27de('0x1d');}else{_0x45d074='';}}catch(_0x5b4ef0){console['error'](_0x5b4ef0);_0x45d074='';}}const _0x5ea3dc=stationSettings_1['StationContext'][a25_0x27de('0x8')][a25_0x27de('0x9')]+_0x45d074+_0x46410b;fs[a25_0x27de('0x12')](_0x11784c,_0x5ea3dc,function(_0x5bb80b){if(_0x5bb80b){console[a25_0x27de('0x3')](_0x5bb80b);}console[a25_0x27de('0x3')](a25_0x27de('0x13')+_0x5ea3dc);});});}catch(_0x5587f7){console[a25_0x27de('0x1e')](_0x5587f7);}}}exports[a25_0x27de('0x1f')]=SyncEventsService;