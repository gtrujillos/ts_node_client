var a21_0x59fb=['stat','StationContext','abs','getTime','ctime','rename','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','post','Response\x20body:\x20','parse','status','success/','error','defineProperty','__esModule','../infrastructure/stationSettings','request','log','init\x20SyncEventsService','exploreDir','readdir','settings','eventFileFolder','forEach','.gz'];(function(_0x5af68b,_0x307d4a){var _0x1b44f0=function(_0x40eb31){while(--_0x40eb31){_0x5af68b['push'](_0x5af68b['shift']());}};_0x1b44f0(++_0x307d4a);}(a21_0x59fb,0xdc));var a21_0x2ae8=function(_0x1e3b30,_0x2ee8f7){_0x1e3b30=_0x1e3b30-0x0;var _0x1d261e=a21_0x59fb[_0x1e3b30];return _0x1d261e;};'use strict';Object[a21_0x2ae8('0x0')](exports,a21_0x2ae8('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x2ae8('0x2'));const fs=require('fs');const request=require(a21_0x2ae8('0x3'));class SyncEventsService{constructor(){}['init'](){console[a21_0x2ae8('0x4')](a21_0x2ae8('0x5'));this[a21_0x2ae8('0x6')](0x0);}[a21_0x2ae8('0x6')](_0x4229dc){fs[a21_0x2ae8('0x7')](stationSettings_1['StationContext'][a21_0x2ae8('0x8')][a21_0x2ae8('0x9')],(_0x406a58,_0x2158d5)=>{if(_0x2158d5!=null){_0x2158d5[a21_0x2ae8('0xa')](_0x5865fc=>{if(_0x5865fc['includes'](a21_0x2ae8('0xb'))){fs[a21_0x2ae8('0xc')](stationSettings_1[a21_0x2ae8('0xd')][a21_0x2ae8('0x8')][a21_0x2ae8('0x9')]+_0x5865fc,(_0x2933d0,_0x1d0d67)=>{const _0x2bfbb0=Math[a21_0x2ae8('0xe')](new Date()[a21_0x2ae8('0xf')]()-_0x1d0d67[a21_0x2ae8('0x10')][a21_0x2ae8('0xf')]());if(_0x2bfbb0>0x2710){this['syncFile'](_0x5865fc);}});}});}});setTimeout(()=>{this[a21_0x2ae8('0x6')](++_0x4229dc);},0x1388);}['syncFile'](_0x219802){const _0x54cdad=stationSettings_1[a21_0x2ae8('0xd')]['settings'][a21_0x2ae8('0x9')]+_0x219802;const _0x5502e4=stationSettings_1[a21_0x2ae8('0xd')][a21_0x2ae8('0x8')][a21_0x2ae8('0x9')]+'process/'+_0x219802;fs[a21_0x2ae8('0x11')](_0x54cdad,_0x5502e4,_0x39b4a3=>{if(_0x39b4a3){console['log'](_0x39b4a3);}else{console[a21_0x2ae8('0x4')]('Successfully\x20renamed\x20'+_0x5502e4);this['sendFile'](_0x219802,_0x5502e4);}});}[a21_0x2ae8('0x12')](_0x4c7983,_0x25d058){const _0x2178e2=process[a21_0x2ae8('0x13')][a21_0x2ae8('0x14')]+a21_0x2ae8('0x15');const _0x44f37d={'file':fs[a21_0x2ae8('0x16')](_0x25d058)};console[a21_0x2ae8('0x4')](new Date());console[a21_0x2ae8('0x4')]('serviceUrl:\x20'+_0x2178e2);console[a21_0x2ae8('0x4')]('Sending\x20file:\x20'+_0x4c7983);try{request[a21_0x2ae8('0x17')]({'url':_0x2178e2,'formData':_0x44f37d},function(_0x3dafcd,_0x33c4e3,_0x1a5d2c){let _0x49bfaa=null;let _0x1dd621='';if(_0x3dafcd){_0x1dd621='';}else{try{console[a21_0x2ae8('0x4')](a21_0x2ae8('0x18')+_0x1a5d2c);_0x49bfaa=JSON[a21_0x2ae8('0x19')](_0x1a5d2c);if(_0x49bfaa[a21_0x2ae8('0x1a')]==0x1){_0x1dd621=a21_0x2ae8('0x1b');}else{_0x1dd621='';}}catch(_0x2143e6){console[a21_0x2ae8('0x1c')](_0x2143e6);_0x1dd621='';}}const _0x4fc14a=stationSettings_1[a21_0x2ae8('0xd')]['settings'][a21_0x2ae8('0x9')]+_0x1dd621+_0x4c7983;fs[a21_0x2ae8('0x11')](_0x25d058,_0x4fc14a,function(_0x3dafcd){if(_0x3dafcd){console[a21_0x2ae8('0x4')](_0x3dafcd);}console['log']('Successfully\x20renamed\x20'+_0x4fc14a);});});}catch(_0x168221){console[a21_0x2ae8('0x1c')](_0x168221);}}}exports['SyncEventsService']=SyncEventsService;