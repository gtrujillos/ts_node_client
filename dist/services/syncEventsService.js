var a21_0x83bd=['StationContext','abs','getTime','ctime','syncFile','settings','process/','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','parse','status','success/','error','Successfully\x20renamed\x20','SyncEventsService','defineProperty','../infrastructure/stationSettings','request','init','exploreDir','log','init\x20Sync','readdir','eventFileFolder','forEach','includes'];(function(_0x12b330,_0xaf455e){var _0x47ca00=function(_0xf5408e){while(--_0xf5408e){_0x12b330['push'](_0x12b330['shift']());}};_0x47ca00(++_0xaf455e);}(a21_0x83bd,0x8b));var a21_0x5b37=function(_0x5b304c,_0x353d81){_0x5b304c=_0x5b304c-0x0;var _0x578fdd=a21_0x83bd[_0x5b304c];return _0x578fdd;};'use strict';Object[a21_0x5b37('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a21_0x5b37('0x1'));const fs=require('fs');const request=require(a21_0x5b37('0x2'));class SyncEventsService{constructor(){}[a21_0x5b37('0x3')](){this[a21_0x5b37('0x4')](0x0);console[a21_0x5b37('0x5')](a21_0x5b37('0x6'));}[a21_0x5b37('0x4')](_0x209265){fs[a21_0x5b37('0x7')](stationSettings_1['StationContext']['settings'][a21_0x5b37('0x8')],(_0x226e8d,_0x247d6c)=>{if(_0x247d6c!=null){_0x247d6c[a21_0x5b37('0x9')](_0x5dceb3=>{if(_0x5dceb3[a21_0x5b37('0xa')]('.gz')){fs['stat'](stationSettings_1[a21_0x5b37('0xb')]['settings'][a21_0x5b37('0x8')]+_0x5dceb3,(_0x5bdf5c,_0x3524c3)=>{const _0x1fbcaf=Math[a21_0x5b37('0xc')](new Date()[a21_0x5b37('0xd')]()-_0x3524c3[a21_0x5b37('0xe')][a21_0x5b37('0xd')]());if(_0x1fbcaf>0x2710){this[a21_0x5b37('0xf')](_0x5dceb3);}});}});}});setTimeout(()=>{this[a21_0x5b37('0x4')](++_0x209265);},0x1388);}[a21_0x5b37('0xf')](_0x390775){const _0x2e336d=stationSettings_1[a21_0x5b37('0xb')][a21_0x5b37('0x10')][a21_0x5b37('0x8')]+_0x390775;const _0x1f723c=stationSettings_1['StationContext']['settings'][a21_0x5b37('0x8')]+a21_0x5b37('0x11')+_0x390775;fs[a21_0x5b37('0x12')](_0x2e336d,_0x1f723c,_0x21570b=>{if(_0x21570b){console[a21_0x5b37('0x5')](_0x21570b);}else{console['log']('Successfully\x20renamed\x20'+_0x1f723c);this['sendFile'](_0x390775,_0x1f723c);}});}[a21_0x5b37('0x13')](_0xd1e866,_0x4149c5){const _0x505de5=a21_0x5b37('0x14');const _0x9cbd79={'file':fs['createReadStream'](_0x4149c5)};console[a21_0x5b37('0x5')](new Date());console['log'](a21_0x5b37('0x15')+_0x505de5);console['log'](a21_0x5b37('0x16')+_0xd1e866);try{request[a21_0x5b37('0x17')]({'url':_0x505de5,'formData':_0x9cbd79},function(_0x5689e0,_0x20b5ab,_0x42b396){let _0x43ad89=null;let _0xe077b0='';if(_0x5689e0){_0xe077b0='';}else{try{console[a21_0x5b37('0x5')]('Response\x20body:\x20'+_0x42b396);_0x43ad89=JSON[a21_0x5b37('0x18')](_0x42b396);if(_0x43ad89[a21_0x5b37('0x19')]==0x1){_0xe077b0=a21_0x5b37('0x1a');}else{_0xe077b0='';}}catch(_0x4f940d){console[a21_0x5b37('0x1b')](_0x4f940d);_0xe077b0='';}}const _0x13b193=stationSettings_1[a21_0x5b37('0xb')][a21_0x5b37('0x10')][a21_0x5b37('0x8')]+_0xe077b0+_0xd1e866;fs[a21_0x5b37('0x12')](_0x4149c5,_0x13b193,function(_0x5689e0){if(_0x5689e0){console[a21_0x5b37('0x5')](_0x5689e0);}console[a21_0x5b37('0x5')](a21_0x5b37('0x1c')+_0x13b193);});});}catch(_0x38d661){console['error'](_0x38d661);}}}exports[a21_0x5b37('0x1d')]=SyncEventsService;