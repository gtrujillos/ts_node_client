var a21_0x3783=['http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','Sending\x20file:\x20','Response\x20body:\x20','parse','status','success/','error','rename','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','exploreDir','log','init\x20Sync','readdir','StationContext','settings','forEach','.gz','stat','eventFileFolder','abs','getTime','syncFile','process/','Successfully\x20renamed\x20','sendFile'];(function(_0x2efcad,_0x3a29bd){var _0x5c8f94=function(_0x471197){while(--_0x471197){_0x2efcad['push'](_0x2efcad['shift']());}};_0x5c8f94(++_0x3a29bd);}(a21_0x3783,0x172));var a21_0x5887=function(_0x45b17b,_0x58dd49){_0x45b17b=_0x45b17b-0x0;var _0x3cf5b8=a21_0x3783[_0x45b17b];return _0x3cf5b8;};'use strict';Object[a21_0x5887('0x0')](exports,a21_0x5887('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x5887('0x2'));const fs=require('fs');const request=require(a21_0x5887('0x3'));class SyncEventsService{constructor(){}['init'](){this[a21_0x5887('0x4')](0x0);console[a21_0x5887('0x5')](a21_0x5887('0x6'));}[a21_0x5887('0x4')](_0x7285ff){fs[a21_0x5887('0x7')](stationSettings_1[a21_0x5887('0x8')][a21_0x5887('0x9')]['eventFileFolder'],(_0x3958fc,_0x299662)=>{if(_0x299662!=null){_0x299662[a21_0x5887('0xa')](_0x3c4512=>{if(_0x3c4512['includes'](a21_0x5887('0xb'))){fs[a21_0x5887('0xc')](stationSettings_1[a21_0x5887('0x8')][a21_0x5887('0x9')][a21_0x5887('0xd')]+_0x3c4512,(_0x11e9a9,_0x173013)=>{const _0x15dd06=Math[a21_0x5887('0xe')](new Date()[a21_0x5887('0xf')]()-_0x173013['ctime']['getTime']());if(_0x15dd06>0x2710){this[a21_0x5887('0x10')](_0x3c4512);}});}});}});setTimeout(()=>{this[a21_0x5887('0x4')](++_0x7285ff);},0x1388);}[a21_0x5887('0x10')](_0x22b3af){const _0x4cdf8f=stationSettings_1[a21_0x5887('0x8')]['settings'][a21_0x5887('0xd')]+_0x22b3af;const _0x10eb3f=stationSettings_1[a21_0x5887('0x8')][a21_0x5887('0x9')][a21_0x5887('0xd')]+a21_0x5887('0x11')+_0x22b3af;fs['rename'](_0x4cdf8f,_0x10eb3f,_0x54312a=>{if(_0x54312a){console[a21_0x5887('0x5')](_0x54312a);}else{console[a21_0x5887('0x5')](a21_0x5887('0x12')+_0x10eb3f);this[a21_0x5887('0x13')](_0x22b3af,_0x10eb3f);}});}[a21_0x5887('0x13')](_0xdbeda5,_0x449af5){const _0x86fb47=a21_0x5887('0x14');const _0x195603={'file':fs[a21_0x5887('0x15')](_0x449af5)};console[a21_0x5887('0x5')](new Date());console['log']('serviceUrl:\x20'+_0x86fb47);console['log'](a21_0x5887('0x16')+_0xdbeda5);try{request['post']({'url':_0x86fb47,'formData':_0x195603},function(_0x516528,_0xb18e2e,_0x1f457c){let _0x46fdf6=null;let _0x35a383='';if(_0x516528){_0x35a383='';}else{try{console['log'](a21_0x5887('0x17')+_0x1f457c);_0x46fdf6=JSON[a21_0x5887('0x18')](_0x1f457c);if(_0x46fdf6[a21_0x5887('0x19')]==0x1){_0x35a383=a21_0x5887('0x1a');}else{_0x35a383='';}}catch(_0xcb4e07){console[a21_0x5887('0x1b')](_0xcb4e07);_0x35a383='';}}const _0x49f8d9=stationSettings_1['StationContext'][a21_0x5887('0x9')]['eventFileFolder']+_0x35a383+_0xdbeda5;fs[a21_0x5887('0x1c')](_0x449af5,_0x49f8d9,function(_0x516528){if(_0x516528){console[a21_0x5887('0x5')](_0x516528);}console[a21_0x5887('0x5')](a21_0x5887('0x12')+_0x49f8d9);});});}catch(_0x2093d2){console[a21_0x5887('0x1b')](_0x2093d2);}}}exports[a21_0x5887('0x1d')]=SyncEventsService;