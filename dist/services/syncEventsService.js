var a20_0x7249=['parse','error','rename','defineProperty','__esModule','request','init','exploreDir','log','init\x20Sync','readdir','settings','eventFileFolder','forEach','.gz','stat','StationContext','abs','getTime','ctime','syncFile','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20'];(function(_0x5d329a,_0x359060){var _0x1b9d44=function(_0x46f681){while(--_0x46f681){_0x5d329a['push'](_0x5d329a['shift']());}};_0x1b9d44(++_0x359060);}(a20_0x7249,0x108));var a20_0x3bce=function(_0x3c59b2,_0x5e71d5){_0x3c59b2=_0x3c59b2-0x0;var _0x193547=a20_0x7249[_0x3c59b2];return _0x193547;};'use strict';Object[a20_0x3bce('0x0')](exports,a20_0x3bce('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a20_0x3bce('0x2'));class SyncEventsService{constructor(){}[a20_0x3bce('0x3')](){this[a20_0x3bce('0x4')](0x0);console[a20_0x3bce('0x5')](a20_0x3bce('0x6'));}[a20_0x3bce('0x4')](_0xfc3a70){fs[a20_0x3bce('0x7')](stationSettings_1['StationContext'][a20_0x3bce('0x8')][a20_0x3bce('0x9')],(_0x1d7f46,_0x23e7a2)=>{if(_0x23e7a2!=null){_0x23e7a2[a20_0x3bce('0xa')](_0x308906=>{if(_0x308906['includes'](a20_0x3bce('0xb'))){fs[a20_0x3bce('0xc')](stationSettings_1[a20_0x3bce('0xd')][a20_0x3bce('0x8')]['eventFileFolder']+_0x308906,(_0x31cc92,_0x1e139f)=>{const _0x1e3ff8=Math[a20_0x3bce('0xe')](new Date()[a20_0x3bce('0xf')]()-_0x1e139f[a20_0x3bce('0x10')][a20_0x3bce('0xf')]());if(_0x1e3ff8>0x2710){this['syncFile'](_0x308906);}});}});}});setTimeout(()=>{this['exploreDir'](++_0xfc3a70);},0x1388);}[a20_0x3bce('0x11')](_0x3baa10){const _0x1ee86f=stationSettings_1['StationContext'][a20_0x3bce('0x8')][a20_0x3bce('0x9')]+_0x3baa10;const _0x347d9a=stationSettings_1['StationContext'][a20_0x3bce('0x8')][a20_0x3bce('0x9')]+'process/'+_0x3baa10;fs['rename'](_0x1ee86f,_0x347d9a,_0x530593=>{if(_0x530593){console[a20_0x3bce('0x5')](_0x530593);}else{console[a20_0x3bce('0x5')](a20_0x3bce('0x12')+_0x347d9a);this[a20_0x3bce('0x13')](_0x3baa10,_0x347d9a);}});}[a20_0x3bce('0x13')](_0x36e4eb,_0xc2696d){const _0x13bc7d=a20_0x3bce('0x14');const _0x5c62a9={'file':fs[a20_0x3bce('0x15')](_0xc2696d)};console['log'](new Date());console[a20_0x3bce('0x5')](a20_0x3bce('0x16')+_0x13bc7d);console[a20_0x3bce('0x5')](a20_0x3bce('0x17')+_0x36e4eb);try{request[a20_0x3bce('0x18')]({'url':_0x13bc7d,'formData':_0x5c62a9},function(_0x59afa9,_0x5ed80d,_0x5a7fe8){let _0x5ba29f=null;let _0x36cd14='';if(_0x59afa9){_0x36cd14='';}else{try{console[a20_0x3bce('0x5')](a20_0x3bce('0x19')+_0x5a7fe8);_0x5ba29f=JSON[a20_0x3bce('0x1a')](_0x5a7fe8);if(_0x5ba29f['status']==0x1){_0x36cd14='success/';}else{_0x36cd14='';}}catch(_0x21ceca){console[a20_0x3bce('0x1b')](_0x21ceca);_0x36cd14='';}}const _0x508b38=stationSettings_1[a20_0x3bce('0xd')][a20_0x3bce('0x8')][a20_0x3bce('0x9')]+_0x36cd14+_0x36e4eb;fs[a20_0x3bce('0x1c')](_0xc2696d,_0x508b38,function(_0x59afa9){if(_0x59afa9){console[a20_0x3bce('0x5')](_0x59afa9);}console[a20_0x3bce('0x5')](a20_0x3bce('0x12')+_0x508b38);});});}catch(_0x4ea402){console['error'](_0x4ea402);}}}exports['SyncEventsService']=SyncEventsService;