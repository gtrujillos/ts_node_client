var a22_0x9c6a=['getTime','ctime','syncFile','log','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','Response\x20body:\x20','parse','success/','error','rename','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','init\x20SyncEventsService','exploreDir','readdir','settings','forEach','.gz','stat','StationContext','eventFileFolder','abs'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(a22_0x9c6a,0x1bf));var a22_0x201d=function(_0x3b706a,_0x59369c){_0x3b706a=_0x3b706a-0x0;var _0x3f2406=a22_0x9c6a[_0x3b706a];return _0x3f2406;};'use strict';Object[a22_0x201d('0x0')](exports,a22_0x201d('0x1'),{'value':!![]});const stationSettings_1=require(a22_0x201d('0x2'));const fs=require('fs');const request=require(a22_0x201d('0x3'));class SyncEventsService{constructor(){}[a22_0x201d('0x4')](){console['log'](a22_0x201d('0x5'));this[a22_0x201d('0x6')](0x0);}['exploreDir'](_0x652c53){fs[a22_0x201d('0x7')](stationSettings_1['StationContext'][a22_0x201d('0x8')]['eventFileFolder'],(_0x581bb0,_0x5ccf30)=>{if(_0x5ccf30!=null){_0x5ccf30[a22_0x201d('0x9')](_0x50ea23=>{if(_0x50ea23['includes'](a22_0x201d('0xa'))){fs[a22_0x201d('0xb')](stationSettings_1[a22_0x201d('0xc')][a22_0x201d('0x8')][a22_0x201d('0xd')]+_0x50ea23,(_0x2637f0,_0x427f8b)=>{const _0x3ad135=Math[a22_0x201d('0xe')](new Date()[a22_0x201d('0xf')]()-_0x427f8b[a22_0x201d('0x10')][a22_0x201d('0xf')]());if(_0x3ad135>0x2710){this[a22_0x201d('0x11')](_0x50ea23);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x652c53);},0x1388);}[a22_0x201d('0x11')](_0x1016e0){const _0x479208=stationSettings_1[a22_0x201d('0xc')][a22_0x201d('0x8')][a22_0x201d('0xd')]+_0x1016e0;const _0x119612=stationSettings_1[a22_0x201d('0xc')]['settings'][a22_0x201d('0xd')]+'process/'+_0x1016e0;fs['rename'](_0x479208,_0x119612,_0xd9b349=>{if(_0xd9b349){console[a22_0x201d('0x12')](_0xd9b349);}else{console[a22_0x201d('0x12')](a22_0x201d('0x13')+_0x119612);this['sendFile'](_0x1016e0,_0x119612);}});}[a22_0x201d('0x14')](_0x368091,_0x407cee){const _0x43a51a=process[a22_0x201d('0x15')][a22_0x201d('0x16')]+a22_0x201d('0x17');const _0x2437cc={'file':fs[a22_0x201d('0x18')](_0x407cee)};console[a22_0x201d('0x12')](new Date());console[a22_0x201d('0x12')](a22_0x201d('0x19')+_0x43a51a);console['log'](a22_0x201d('0x1a')+_0x368091);try{request['post']({'url':_0x43a51a,'formData':_0x2437cc},function(_0x5b5ee3,_0x24e5cf,_0x3813da){let _0x519d90=null;let _0x2b34c9='';if(_0x5b5ee3){_0x2b34c9='';}else{try{console[a22_0x201d('0x12')](a22_0x201d('0x1b')+_0x3813da);_0x519d90=JSON[a22_0x201d('0x1c')](_0x3813da);if(_0x519d90['status']==0x1){_0x2b34c9=a22_0x201d('0x1d');}else{_0x2b34c9='';}}catch(_0x5adacb){console[a22_0x201d('0x1e')](_0x5adacb);_0x2b34c9='';}}const _0x12374b=stationSettings_1[a22_0x201d('0xc')][a22_0x201d('0x8')][a22_0x201d('0xd')]+_0x2b34c9+_0x368091;fs[a22_0x201d('0x1f')](_0x407cee,_0x12374b,function(_0x5b5ee3){if(_0x5b5ee3){console[a22_0x201d('0x12')](_0x5b5ee3);}console[a22_0x201d('0x12')]('Successfully\x20renamed\x20'+_0x12374b);});});}catch(_0x410176){console[a22_0x201d('0x1e')](_0x410176);}}}exports[a22_0x201d('0x20')]=SyncEventsService;