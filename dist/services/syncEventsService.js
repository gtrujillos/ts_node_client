var a21_0x14f4=['init','exploreDir','log','init\x20Sync','StationContext','settings','forEach','includes','.gz','stat','eventFileFolder','getTime','ctime','syncFile','process/','Successfully\x20renamed\x20','sendFile','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','rename','error','SyncEventsService','defineProperty','request'];(function(_0x4adc7d,_0x25f49c){var _0x591923=function(_0x352423){while(--_0x352423){_0x4adc7d['push'](_0x4adc7d['shift']());}};_0x591923(++_0x25f49c);}(a21_0x14f4,0xc9));var a21_0x3463=function(_0x16ab4e,_0x262b43){_0x16ab4e=_0x16ab4e-0x0;var _0x136c70=a21_0x14f4[_0x16ab4e];return _0x136c70;};'use strict';Object[a21_0x3463('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a21_0x3463('0x1'));class SyncEventsService{constructor(){}[a21_0x3463('0x2')](){this[a21_0x3463('0x3')](0x0);console[a21_0x3463('0x4')](a21_0x3463('0x5'));}[a21_0x3463('0x3')](_0x118f14){fs['readdir'](stationSettings_1[a21_0x3463('0x6')][a21_0x3463('0x7')]['eventFileFolder'],(_0x3703a1,_0x530ad9)=>{if(_0x530ad9!=null){_0x530ad9[a21_0x3463('0x8')](_0x2f56b9=>{if(_0x2f56b9[a21_0x3463('0x9')](a21_0x3463('0xa'))){fs[a21_0x3463('0xb')](stationSettings_1[a21_0x3463('0x6')][a21_0x3463('0x7')][a21_0x3463('0xc')]+_0x2f56b9,(_0xda9a11,_0x15326d)=>{const _0x540876=Math['abs'](new Date()[a21_0x3463('0xd')]()-_0x15326d[a21_0x3463('0xe')][a21_0x3463('0xd')]());if(_0x540876>0x2710){this[a21_0x3463('0xf')](_0x2f56b9);}});}});}});setTimeout(()=>{this[a21_0x3463('0x3')](++_0x118f14);},0x1388);}[a21_0x3463('0xf')](_0x36acbe){const _0x32df15=stationSettings_1[a21_0x3463('0x6')]['settings'][a21_0x3463('0xc')]+_0x36acbe;const _0x5cbd5d=stationSettings_1[a21_0x3463('0x6')]['settings'][a21_0x3463('0xc')]+a21_0x3463('0x10')+_0x36acbe;fs['rename'](_0x32df15,_0x5cbd5d,_0x15d089=>{if(_0x15d089){console['log'](_0x15d089);}else{console[a21_0x3463('0x4')](a21_0x3463('0x11')+_0x5cbd5d);this[a21_0x3463('0x12')](_0x36acbe,_0x5cbd5d);}});}[a21_0x3463('0x12')](_0x3ec47f,_0x2e56c8){const _0x3b4936='http://restapi.passcontrol.co/sync_files/upload_event';const _0x3f6f03={'file':fs[a21_0x3463('0x13')](_0x2e56c8)};console[a21_0x3463('0x4')](new Date());console['log'](a21_0x3463('0x14')+_0x3b4936);console[a21_0x3463('0x4')](a21_0x3463('0x15')+_0x3ec47f);try{request[a21_0x3463('0x16')]({'url':_0x3b4936,'formData':_0x3f6f03},function(_0x95d829,_0x4a0134,_0x4f8c25){let _0x30a4af=null;let _0x4b014b='';if(_0x95d829){_0x4b014b='';}else{try{console['log'](a21_0x3463('0x17')+_0x4f8c25);_0x30a4af=JSON[a21_0x3463('0x18')](_0x4f8c25);if(_0x30a4af[a21_0x3463('0x19')]==0x1){_0x4b014b='success/';}else{_0x4b014b='';}}catch(_0x5d1537){console['error'](_0x5d1537);_0x4b014b='';}}const _0x26e4ff=stationSettings_1['StationContext'][a21_0x3463('0x7')][a21_0x3463('0xc')]+_0x4b014b+_0x3ec47f;fs[a21_0x3463('0x1a')](_0x2e56c8,_0x26e4ff,function(_0x95d829){if(_0x95d829){console[a21_0x3463('0x4')](_0x95d829);}console['log'](a21_0x3463('0x11')+_0x26e4ff);});});}catch(_0x5f2bf6){console[a21_0x3463('0x1b')](_0x5f2bf6);}}}exports[a21_0x3463('0x1c')]=SyncEventsService;