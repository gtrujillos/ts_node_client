var a22_0x1f68=['Response\x20body:\x20','success/','error','SyncEventsService','__esModule','request','init','log','init\x20SyncEventsService','exploreDir','settings','forEach','includes','.gz','stat','StationContext','eventFileFolder','ctime','getTime','syncFile','rename','Successfully\x20renamed\x20','sendFile','env','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post'];(function(_0x574f6f,_0x3f2fa4){var _0x569948=function(_0x5c0427){while(--_0x5c0427){_0x574f6f['push'](_0x574f6f['shift']());}};_0x569948(++_0x3f2fa4);}(a22_0x1f68,0x95));var a22_0x27b7=function(_0x14eed0,_0x3a7473){_0x14eed0=_0x14eed0-0x0;var _0x455d9e=a22_0x1f68[_0x14eed0];return _0x455d9e;};'use strict';Object['defineProperty'](exports,a22_0x27b7('0x0'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a22_0x27b7('0x1'));class SyncEventsService{constructor(){}[a22_0x27b7('0x2')](){console[a22_0x27b7('0x3')](a22_0x27b7('0x4'));this['exploreDir'](0x0);}[a22_0x27b7('0x5')](_0x17dab4){fs['readdir'](stationSettings_1['StationContext'][a22_0x27b7('0x6')]['eventFileFolder'],(_0xc416e3,_0x536e9b)=>{if(_0x536e9b!=null){_0x536e9b[a22_0x27b7('0x7')](_0xdf715e=>{if(_0xdf715e[a22_0x27b7('0x8')](a22_0x27b7('0x9'))){fs[a22_0x27b7('0xa')](stationSettings_1[a22_0x27b7('0xb')][a22_0x27b7('0x6')][a22_0x27b7('0xc')]+_0xdf715e,(_0x30e20d,_0x28e40f)=>{const _0x219b1c=Math['abs'](new Date()['getTime']()-_0x28e40f[a22_0x27b7('0xd')][a22_0x27b7('0xe')]());if(_0x219b1c>0x2710){this[a22_0x27b7('0xf')](_0xdf715e);}});}});}});setTimeout(()=>{this[a22_0x27b7('0x5')](++_0x17dab4);},0x1388);}['syncFile'](_0x338e7c){const _0x1dd3b8=stationSettings_1['StationContext'][a22_0x27b7('0x6')][a22_0x27b7('0xc')]+_0x338e7c;const _0x574d96=stationSettings_1[a22_0x27b7('0xb')][a22_0x27b7('0x6')][a22_0x27b7('0xc')]+'process/'+_0x338e7c;fs[a22_0x27b7('0x10')](_0x1dd3b8,_0x574d96,_0x1c358a=>{if(_0x1c358a){console[a22_0x27b7('0x3')](_0x1c358a);}else{console[a22_0x27b7('0x3')](a22_0x27b7('0x11')+_0x574d96);this['sendFile'](_0x338e7c,_0x574d96);}});}[a22_0x27b7('0x12')](_0x154de6,_0x743318){const _0x24babd=process[a22_0x27b7('0x13')]['WEB_SERVICE_URL']+a22_0x27b7('0x14');const _0x5adb01={'file':fs[a22_0x27b7('0x15')](_0x743318)};console[a22_0x27b7('0x3')](new Date());console['log'](a22_0x27b7('0x16')+_0x24babd);console['log'](a22_0x27b7('0x17')+_0x154de6);try{request[a22_0x27b7('0x18')]({'url':_0x24babd,'formData':_0x5adb01},function(_0x56bcc7,_0x54a3eb,_0x46bb44){let _0x50a441=null;let _0x4df8da='';if(_0x56bcc7){_0x4df8da='';}else{try{console['log'](a22_0x27b7('0x19')+_0x46bb44);_0x50a441=JSON['parse'](_0x46bb44);if(_0x50a441['status']==0x1){_0x4df8da=a22_0x27b7('0x1a');}else{_0x4df8da='';}}catch(_0x59dff5){console[a22_0x27b7('0x1b')](_0x59dff5);_0x4df8da='';}}const _0x5dba2f=stationSettings_1[a22_0x27b7('0xb')][a22_0x27b7('0x6')][a22_0x27b7('0xc')]+_0x4df8da+_0x154de6;fs[a22_0x27b7('0x10')](_0x743318,_0x5dba2f,function(_0x56bcc7){if(_0x56bcc7){console['log'](_0x56bcc7);}console['log'](a22_0x27b7('0x11')+_0x5dba2f);});});}catch(_0x5512bb){console[a22_0x27b7('0x1b')](_0x5512bb);}}}exports[a22_0x27b7('0x1c')]=SyncEventsService;