var a24_0x5b54=['status','success/','SyncEventsService','defineProperty','../infrastructure/stationSettings','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','includes','.gz','stat','abs','ctime','syncFile','eventFileFolder','process/','rename','Successfully\x20renamed\x20','sendFile','env','sync_files/upload_event','serviceUrl:\x20','post','Response\x20body:\x20','parse'];(function(_0x408076,_0x5de7f5){var _0x4bbbcd=function(_0x4cf049){while(--_0x4cf049){_0x408076['push'](_0x408076['shift']());}};_0x4bbbcd(++_0x5de7f5);}(a24_0x5b54,0x1e3));var a24_0x4e1f=function(_0x10779e,_0x3adcb5){_0x10779e=_0x10779e-0x0;var _0x1b6bc5=a24_0x5b54[_0x10779e];return _0x1b6bc5;};'use strict';Object[a24_0x4e1f('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a24_0x4e1f('0x1'));const fs=require('fs');const request=require(a24_0x4e1f('0x2'));class SyncEventsService{constructor(){}[a24_0x4e1f('0x3')](){console[a24_0x4e1f('0x4')](a24_0x4e1f('0x5'));this[a24_0x4e1f('0x6')](0x0);}[a24_0x4e1f('0x6')](_0x14d886){fs[a24_0x4e1f('0x7')](stationSettings_1[a24_0x4e1f('0x8')][a24_0x4e1f('0x9')]['eventFileFolder'],(_0xeb0b9f,_0xdaaf2b)=>{if(_0xdaaf2b!=null){_0xdaaf2b['forEach'](_0x325c54=>{if(_0x325c54[a24_0x4e1f('0xa')](a24_0x4e1f('0xb'))){fs[a24_0x4e1f('0xc')](stationSettings_1['StationContext'][a24_0x4e1f('0x9')]['eventFileFolder']+_0x325c54,(_0x3ca328,_0x3277a8)=>{const _0x5ad8c0=Math[a24_0x4e1f('0xd')](new Date()['getTime']()-_0x3277a8[a24_0x4e1f('0xe')]['getTime']());if(_0x5ad8c0>0x2710){this['syncFile'](_0x325c54);}});}});}});setTimeout(()=>{this[a24_0x4e1f('0x6')](++_0x14d886);},0x1388);}[a24_0x4e1f('0xf')](_0x579950){const _0xbc3bc6=stationSettings_1[a24_0x4e1f('0x8')][a24_0x4e1f('0x9')]['eventFileFolder']+_0x579950;const _0x226b18=stationSettings_1[a24_0x4e1f('0x8')][a24_0x4e1f('0x9')][a24_0x4e1f('0x10')]+a24_0x4e1f('0x11')+_0x579950;fs[a24_0x4e1f('0x12')](_0xbc3bc6,_0x226b18,_0x61ac73=>{if(_0x61ac73){console[a24_0x4e1f('0x4')](_0x61ac73);}else{console[a24_0x4e1f('0x4')](a24_0x4e1f('0x13')+_0x226b18);this[a24_0x4e1f('0x14')](_0x579950,_0x226b18);}});}['sendFile'](_0x4b1719,_0x34b28d){const _0x5122f9=process[a24_0x4e1f('0x15')]['WEB_SERVICE_URL']+a24_0x4e1f('0x16');const _0x163898={'file':fs['createReadStream'](_0x34b28d)};console[a24_0x4e1f('0x4')](new Date());console['log'](a24_0x4e1f('0x17')+_0x5122f9);console[a24_0x4e1f('0x4')]('Sending\x20file:\x20'+_0x4b1719);try{request[a24_0x4e1f('0x18')]({'url':_0x5122f9,'formData':_0x163898},function(_0x36d7a1,_0x5bec14,_0x1872f5){let _0x4d8a79=null;let _0xe55dba='';if(_0x36d7a1){_0xe55dba='';}else{try{console[a24_0x4e1f('0x4')](a24_0x4e1f('0x19')+_0x1872f5);_0x4d8a79=JSON[a24_0x4e1f('0x1a')](_0x1872f5);if(_0x4d8a79[a24_0x4e1f('0x1b')]==0x1){_0xe55dba=a24_0x4e1f('0x1c');}else{_0xe55dba='';}}catch(_0x2ba11a){console['error'](_0x2ba11a);_0xe55dba='';}}const _0x4a2922=stationSettings_1[a24_0x4e1f('0x8')]['settings'][a24_0x4e1f('0x10')]+_0xe55dba+_0x4b1719;fs[a24_0x4e1f('0x12')](_0x34b28d,_0x4a2922,function(_0x36d7a1){if(_0x36d7a1){console[a24_0x4e1f('0x4')](_0x36d7a1);}console[a24_0x4e1f('0x4')](a24_0x4e1f('0x13')+_0x4a2922);});});}catch(_0x12d83b){console['error'](_0x12d83b);}}}exports[a24_0x4e1f('0x1d')]=SyncEventsService;