var a20_0x35c2=['parse','status','success/','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','log','init\x20Sync','readdir','settings','forEach','includes','.gz','stat','StationContext','eventFileFolder','ctime','syncFile','exploreDir','rename','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream'];(function(_0x290798,_0x38b422){var _0x4aefc7=function(_0x592e74){while(--_0x592e74){_0x290798['push'](_0x290798['shift']());}};_0x4aefc7(++_0x38b422);}(a20_0x35c2,0x171));var a20_0x476e=function(_0x56627f,_0x35418c){_0x56627f=_0x56627f-0x0;var _0x13fac2=a20_0x35c2[_0x56627f];return _0x13fac2;};'use strict';Object[a20_0x476e('0x0')](exports,a20_0x476e('0x1'),{'value':!![]});const stationSettings_1=require(a20_0x476e('0x2'));const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}['init'](){this['exploreDir'](0x0);console[a20_0x476e('0x3')](a20_0x476e('0x4'));}['exploreDir'](_0xbdfdde){fs[a20_0x476e('0x5')](stationSettings_1['StationContext'][a20_0x476e('0x6')]['eventFileFolder'],(_0x408b5a,_0x14bb9c)=>{if(_0x14bb9c!=null){_0x14bb9c[a20_0x476e('0x7')](_0x4ab51f=>{if(_0x4ab51f[a20_0x476e('0x8')](a20_0x476e('0x9'))){fs[a20_0x476e('0xa')](stationSettings_1[a20_0x476e('0xb')][a20_0x476e('0x6')][a20_0x476e('0xc')]+_0x4ab51f,(_0xe1ad3e,_0x3861be)=>{const _0x4468ff=Math['abs'](new Date()['getTime']()-_0x3861be[a20_0x476e('0xd')]['getTime']());if(_0x4468ff>0x2710){this[a20_0x476e('0xe')](_0x4ab51f);}});}});}});setTimeout(()=>{this[a20_0x476e('0xf')](++_0xbdfdde);},0x1388);}[a20_0x476e('0xe')](_0x58e0f1){const _0x29665f=stationSettings_1['StationContext'][a20_0x476e('0x6')][a20_0x476e('0xc')]+_0x58e0f1;const _0x597c48=stationSettings_1['StationContext'][a20_0x476e('0x6')][a20_0x476e('0xc')]+'process/'+_0x58e0f1;fs[a20_0x476e('0x10')](_0x29665f,_0x597c48,_0x90ca6b=>{if(_0x90ca6b){console[a20_0x476e('0x3')](_0x90ca6b);}else{console['log'](a20_0x476e('0x11')+_0x597c48);this[a20_0x476e('0x12')](_0x58e0f1,_0x597c48);}});}[a20_0x476e('0x12')](_0xc4e497,_0x5ba24d){const _0x3f6e6a=a20_0x476e('0x13');const _0x345e41={'file':fs[a20_0x476e('0x14')](_0x5ba24d)};console[a20_0x476e('0x3')](new Date());console[a20_0x476e('0x3')]('serviceUrl:\x20'+_0x3f6e6a);console['log']('Sending\x20file:\x20'+_0xc4e497);try{request['post']({'url':_0x3f6e6a,'formData':_0x345e41},function(_0x585755,_0x4d58cf,_0x50d79e){let _0x4942c0=null;let _0x20aaba='';if(_0x585755){_0x20aaba='';}else{try{console[a20_0x476e('0x3')]('Response\x20body:\x20'+_0x50d79e);_0x4942c0=JSON[a20_0x476e('0x15')](_0x50d79e);if(_0x4942c0[a20_0x476e('0x16')]==0x1){_0x20aaba=a20_0x476e('0x17');}else{_0x20aaba='';}}catch(_0x454eba){console[a20_0x476e('0x18')](_0x454eba);_0x20aaba='';}}const _0x14e546=stationSettings_1[a20_0x476e('0xb')][a20_0x476e('0x6')][a20_0x476e('0xc')]+_0x20aaba+_0xc4e497;fs['rename'](_0x5ba24d,_0x14e546,function(_0x585755){if(_0x585755){console[a20_0x476e('0x3')](_0x585755);}console['log'](a20_0x476e('0x11')+_0x14e546);});});}catch(_0x57f377){console[a20_0x476e('0x18')](_0x57f377);}}}exports[a20_0x476e('0x19')]=SyncEventsService;