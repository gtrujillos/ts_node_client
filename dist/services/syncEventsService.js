var a21_0x323b=['Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','parse','status','success/','error','SyncEventsService','defineProperty','__esModule','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','eventFileFolder','includes','.gz','stat','getTime','ctime','syncFile','process/','rename'];(function(_0x2361f2,_0x43f21e){var _0x2ba729=function(_0x29aa01){while(--_0x29aa01){_0x2361f2['push'](_0x2361f2['shift']());}};_0x2ba729(++_0x43f21e);}(a21_0x323b,0x1cd));var a21_0x1691=function(_0x3405b7,_0x270bf2){_0x3405b7=_0x3405b7-0x0;var _0x185d31=a21_0x323b[_0x3405b7];return _0x185d31;};'use strict';Object[a21_0x1691('0x0')](exports,a21_0x1691('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a21_0x1691('0x2'));class SyncEventsService{constructor(){}[a21_0x1691('0x3')](){console[a21_0x1691('0x4')](a21_0x1691('0x5'));this[a21_0x1691('0x6')](0x0);}[a21_0x1691('0x6')](_0x39b447){fs[a21_0x1691('0x7')](stationSettings_1[a21_0x1691('0x8')][a21_0x1691('0x9')][a21_0x1691('0xa')],(_0x5a55a3,_0x585166)=>{if(_0x585166!=null){_0x585166['forEach'](_0x3ff8df=>{if(_0x3ff8df[a21_0x1691('0xb')](a21_0x1691('0xc'))){fs[a21_0x1691('0xd')](stationSettings_1[a21_0x1691('0x8')]['settings']['eventFileFolder']+_0x3ff8df,(_0x3f8b6f,_0x227c63)=>{const _0x39f43a=Math['abs'](new Date()[a21_0x1691('0xe')]()-_0x227c63[a21_0x1691('0xf')]['getTime']());if(_0x39f43a>0x2710){this[a21_0x1691('0x10')](_0x3ff8df);}});}});}});setTimeout(()=>{this[a21_0x1691('0x6')](++_0x39b447);},0x1388);}[a21_0x1691('0x10')](_0x1f4800){const _0x28ff7f=stationSettings_1[a21_0x1691('0x8')][a21_0x1691('0x9')][a21_0x1691('0xa')]+_0x1f4800;const _0x48fa16=stationSettings_1[a21_0x1691('0x8')]['settings'][a21_0x1691('0xa')]+a21_0x1691('0x11')+_0x1f4800;fs[a21_0x1691('0x12')](_0x28ff7f,_0x48fa16,_0x92cdd8=>{if(_0x92cdd8){console[a21_0x1691('0x4')](_0x92cdd8);}else{console[a21_0x1691('0x4')](a21_0x1691('0x13')+_0x48fa16);this[a21_0x1691('0x14')](_0x1f4800,_0x48fa16);}});}[a21_0x1691('0x14')](_0x2ce75e,_0x5ad086){const _0xe65334=process[a21_0x1691('0x15')][a21_0x1691('0x16')]+'sync_files/upload_event';const _0x23eb7b={'file':fs[a21_0x1691('0x17')](_0x5ad086)};console[a21_0x1691('0x4')](new Date());console[a21_0x1691('0x4')](a21_0x1691('0x18')+_0xe65334);console['log'](a21_0x1691('0x19')+_0x2ce75e);try{request[a21_0x1691('0x1a')]({'url':_0xe65334,'formData':_0x23eb7b},function(_0x2fd0fc,_0x5fecbd,_0x333674){let _0x18dd2d=null;let _0x264b39='';if(_0x2fd0fc){_0x264b39='';}else{try{console[a21_0x1691('0x4')]('Response\x20body:\x20'+_0x333674);_0x18dd2d=JSON[a21_0x1691('0x1b')](_0x333674);if(_0x18dd2d[a21_0x1691('0x1c')]==0x1){_0x264b39=a21_0x1691('0x1d');}else{_0x264b39='';}}catch(_0x143372){console[a21_0x1691('0x1e')](_0x143372);_0x264b39='';}}const _0x5b709c=stationSettings_1[a21_0x1691('0x8')][a21_0x1691('0x9')]['eventFileFolder']+_0x264b39+_0x2ce75e;fs['rename'](_0x5ad086,_0x5b709c,function(_0x2fd0fc){if(_0x2fd0fc){console['log'](_0x2fd0fc);}console['log']('Successfully\x20renamed\x20'+_0x5b709c);});});}catch(_0x238728){console[a21_0x1691('0x1e')](_0x238728);}}}exports[a21_0x1691('0x1f')]=SyncEventsService;