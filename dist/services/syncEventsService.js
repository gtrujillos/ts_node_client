var a25_0x314e=['getTime','syncFile','eventFileFolder','process/','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','__esModule','../infrastructure/stationSettings','request','init','log','exploreDir','readdir','StationContext','settings','forEach','includes','stat','abs','ctime'];(function(_0x2062c2,_0x440ebb){var _0x4306bf=function(_0x34e081){while(--_0x34e081){_0x2062c2['push'](_0x2062c2['shift']());}};_0x4306bf(++_0x440ebb);}(a25_0x314e,0x1c0));var a25_0xb708=function(_0x3e331c,_0x4d235a){_0x3e331c=_0x3e331c-0x0;var _0x1a5c5d=a25_0x314e[_0x3e331c];return _0x1a5c5d;};'use strict';Object['defineProperty'](exports,a25_0xb708('0x0'),{'value':!![]});const stationSettings_1=require(a25_0xb708('0x1'));const fs=require('fs');const request=require(a25_0xb708('0x2'));class SyncEventsService{constructor(){}[a25_0xb708('0x3')](){console[a25_0xb708('0x4')]('init\x20SyncEventsService');this[a25_0xb708('0x5')](0x0);}[a25_0xb708('0x5')](_0x2c4df0){fs[a25_0xb708('0x6')](stationSettings_1[a25_0xb708('0x7')][a25_0xb708('0x8')]['eventFileFolder'],(_0x40e269,_0x518dc6)=>{if(_0x518dc6!=null){_0x518dc6[a25_0xb708('0x9')](_0x54a37f=>{if(_0x54a37f[a25_0xb708('0xa')]('.gz')){fs[a25_0xb708('0xb')](stationSettings_1[a25_0xb708('0x7')][a25_0xb708('0x8')]['eventFileFolder']+_0x54a37f,(_0x53ed64,_0x333fa4)=>{const _0x372bde=Math[a25_0xb708('0xc')](new Date()['getTime']()-_0x333fa4[a25_0xb708('0xd')][a25_0xb708('0xe')]());if(_0x372bde>0x2710){this[a25_0xb708('0xf')](_0x54a37f);}});}});}});setTimeout(()=>{this[a25_0xb708('0x5')](++_0x2c4df0);},0x1388);}[a25_0xb708('0xf')](_0x26bb8d){const _0x242e70=stationSettings_1['StationContext'][a25_0xb708('0x8')][a25_0xb708('0x10')]+_0x26bb8d;const _0x10a666=stationSettings_1[a25_0xb708('0x7')][a25_0xb708('0x8')][a25_0xb708('0x10')]+a25_0xb708('0x11')+_0x26bb8d;fs[a25_0xb708('0x12')](_0x242e70,_0x10a666,_0xaadda=>{if(_0xaadda){console['log'](_0xaadda);}else{console[a25_0xb708('0x4')](a25_0xb708('0x13')+_0x10a666);this['sendFile'](_0x26bb8d,_0x10a666);}});}[a25_0xb708('0x14')](_0x5976ac,_0x4c6011){const _0x2889ed=process[a25_0xb708('0x15')][a25_0xb708('0x16')]+a25_0xb708('0x17');const _0x3d2fb2={'file':fs['createReadStream'](_0x4c6011)};console['log'](new Date());console[a25_0xb708('0x4')](a25_0xb708('0x18')+_0x2889ed);console[a25_0xb708('0x4')](a25_0xb708('0x19')+_0x5976ac);try{request[a25_0xb708('0x1a')]({'url':_0x2889ed,'formData':_0x3d2fb2},function(_0x3bf2f0,_0x242368,_0x200ef7){let _0x2acb8c=null;let _0x429a0e='';if(_0x3bf2f0){_0x429a0e='';}else{try{console[a25_0xb708('0x4')](a25_0xb708('0x1b')+_0x200ef7);_0x2acb8c=JSON[a25_0xb708('0x1c')](_0x200ef7);if(_0x2acb8c[a25_0xb708('0x1d')]==0x1){_0x429a0e=a25_0xb708('0x1e');}else{_0x429a0e='';}}catch(_0x864287){console[a25_0xb708('0x1f')](_0x864287);_0x429a0e='';}}const _0x49eddb=stationSettings_1[a25_0xb708('0x7')][a25_0xb708('0x8')][a25_0xb708('0x10')]+_0x429a0e+_0x5976ac;fs['rename'](_0x4c6011,_0x49eddb,function(_0x3bf2f0){if(_0x3bf2f0){console[a25_0xb708('0x4')](_0x3bf2f0);}console[a25_0xb708('0x4')](a25_0xb708('0x13')+_0x49eddb);});});}catch(_0x2b7211){console[a25_0xb708('0x1f')](_0x2b7211);}}}exports[a25_0xb708('0x20')]=SyncEventsService;