var a21_0x245e=['sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','error','SyncEventsService','defineProperty','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','eventFileFolder','includes','.gz','abs','getTime','ctime','syncFile','process/','rename','Successfully\x20renamed\x20'];(function(_0xb479be,_0x4bb6ab){var _0x44c2ed=function(_0x39774b){while(--_0x39774b){_0xb479be['push'](_0xb479be['shift']());}};_0x44c2ed(++_0x4bb6ab);}(a21_0x245e,0xed));var a21_0x407a=function(_0x54f181,_0x2cb3a0){_0x54f181=_0x54f181-0x0;var _0x59de74=a21_0x245e[_0x54f181];return _0x59de74;};'use strict';Object[a21_0x407a('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a21_0x407a('0x1'));class SyncEventsService{constructor(){}[a21_0x407a('0x2')](){console[a21_0x407a('0x3')](a21_0x407a('0x4'));this[a21_0x407a('0x5')](0x0);}[a21_0x407a('0x5')](_0x1cbdf1){fs[a21_0x407a('0x6')](stationSettings_1[a21_0x407a('0x7')][a21_0x407a('0x8')][a21_0x407a('0x9')],(_0x1a4e51,_0x4390a0)=>{if(_0x4390a0!=null){_0x4390a0['forEach'](_0x365c56=>{if(_0x365c56[a21_0x407a('0xa')](a21_0x407a('0xb'))){fs['stat'](stationSettings_1[a21_0x407a('0x7')][a21_0x407a('0x8')]['eventFileFolder']+_0x365c56,(_0x26fcc6,_0x12d602)=>{const _0x4889f4=Math[a21_0x407a('0xc')](new Date()[a21_0x407a('0xd')]()-_0x12d602[a21_0x407a('0xe')][a21_0x407a('0xd')]());if(_0x4889f4>0x2710){this[a21_0x407a('0xf')](_0x365c56);}});}});}});setTimeout(()=>{this[a21_0x407a('0x5')](++_0x1cbdf1);},0x1388);}['syncFile'](_0x44caca){const _0x1819a5=stationSettings_1[a21_0x407a('0x7')][a21_0x407a('0x8')][a21_0x407a('0x9')]+_0x44caca;const _0x2de64d=stationSettings_1[a21_0x407a('0x7')][a21_0x407a('0x8')]['eventFileFolder']+a21_0x407a('0x10')+_0x44caca;fs[a21_0x407a('0x11')](_0x1819a5,_0x2de64d,_0x5cc65e=>{if(_0x5cc65e){console[a21_0x407a('0x3')](_0x5cc65e);}else{console[a21_0x407a('0x3')](a21_0x407a('0x12')+_0x2de64d);this[a21_0x407a('0x13')](_0x44caca,_0x2de64d);}});}[a21_0x407a('0x13')](_0x326276,_0x537b5c){const _0x2a0971=process[a21_0x407a('0x14')][a21_0x407a('0x15')]+a21_0x407a('0x16');const _0x4acd36={'file':fs[a21_0x407a('0x17')](_0x537b5c)};console['log'](new Date());console[a21_0x407a('0x3')](a21_0x407a('0x18')+_0x2a0971);console[a21_0x407a('0x3')](a21_0x407a('0x19')+_0x326276);try{request[a21_0x407a('0x1a')]({'url':_0x2a0971,'formData':_0x4acd36},function(_0x52a884,_0x23873c,_0x1cb3d0){let _0x6cfa0a=null;let _0x8ac114='';if(_0x52a884){_0x8ac114='';}else{try{console['log'](a21_0x407a('0x1b')+_0x1cb3d0);_0x6cfa0a=JSON[a21_0x407a('0x1c')](_0x1cb3d0);if(_0x6cfa0a[a21_0x407a('0x1d')]==0x1){_0x8ac114='success/';}else{_0x8ac114='';}}catch(_0x32a57d){console[a21_0x407a('0x1e')](_0x32a57d);_0x8ac114='';}}const _0xbf1d6b=stationSettings_1[a21_0x407a('0x7')]['settings'][a21_0x407a('0x9')]+_0x8ac114+_0x326276;fs['rename'](_0x537b5c,_0xbf1d6b,function(_0x52a884){if(_0x52a884){console['log'](_0x52a884);}console[a21_0x407a('0x3')](a21_0x407a('0x12')+_0xbf1d6b);});});}catch(_0x2ffade){console['error'](_0x2ffade);}}}exports[a21_0x407a('0x1f')]=SyncEventsService;