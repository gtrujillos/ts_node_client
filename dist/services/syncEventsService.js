var a21_0x15d5=['forEach','.gz','stat','StationContext','abs','ctime','getTime','syncFile','eventFileFolder','process/','rename','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','success/','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','exploreDir','log','init\x20Sync','readdir','settings'];(function(_0x380de2,_0x74795a){var _0x57f396=function(_0x2319e7){while(--_0x2319e7){_0x380de2['push'](_0x380de2['shift']());}};_0x57f396(++_0x74795a);}(a21_0x15d5,0xbc));var a21_0x1f33=function(_0x2496ba,_0x29d757){_0x2496ba=_0x2496ba-0x0;var _0x3d0baa=a21_0x15d5[_0x2496ba];return _0x3d0baa;};'use strict';Object[a21_0x1f33('0x0')](exports,a21_0x1f33('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x1f33('0x2'));const fs=require('fs');const request=require(a21_0x1f33('0x3'));class SyncEventsService{constructor(){}[a21_0x1f33('0x4')](){this[a21_0x1f33('0x5')](0x0);console[a21_0x1f33('0x6')](a21_0x1f33('0x7'));}['exploreDir'](_0x1903cf){fs[a21_0x1f33('0x8')](stationSettings_1['StationContext'][a21_0x1f33('0x9')]['eventFileFolder'],(_0x576db8,_0x2539b4)=>{if(_0x2539b4!=null){_0x2539b4[a21_0x1f33('0xa')](_0x254d87=>{if(_0x254d87['includes'](a21_0x1f33('0xb'))){fs[a21_0x1f33('0xc')](stationSettings_1[a21_0x1f33('0xd')][a21_0x1f33('0x9')]['eventFileFolder']+_0x254d87,(_0x4f6457,_0x51c517)=>{const _0x40a0e5=Math[a21_0x1f33('0xe')](new Date()['getTime']()-_0x51c517[a21_0x1f33('0xf')][a21_0x1f33('0x10')]());if(_0x40a0e5>0x2710){this[a21_0x1f33('0x11')](_0x254d87);}});}});}});setTimeout(()=>{this[a21_0x1f33('0x5')](++_0x1903cf);},0x1388);}['syncFile'](_0x11b63c){const _0x48dee4=stationSettings_1['StationContext'][a21_0x1f33('0x9')][a21_0x1f33('0x12')]+_0x11b63c;const _0x2059d9=stationSettings_1[a21_0x1f33('0xd')][a21_0x1f33('0x9')][a21_0x1f33('0x12')]+a21_0x1f33('0x13')+_0x11b63c;fs[a21_0x1f33('0x14')](_0x48dee4,_0x2059d9,_0x4ff8c3=>{if(_0x4ff8c3){console[a21_0x1f33('0x6')](_0x4ff8c3);}else{console[a21_0x1f33('0x6')](a21_0x1f33('0x15')+_0x2059d9);this[a21_0x1f33('0x16')](_0x11b63c,_0x2059d9);}});}[a21_0x1f33('0x16')](_0x3c29fa,_0x53e332){const _0x59a554=a21_0x1f33('0x17');const _0xa43195={'file':fs[a21_0x1f33('0x18')](_0x53e332)};console[a21_0x1f33('0x6')](new Date());console['log'](a21_0x1f33('0x19')+_0x59a554);console[a21_0x1f33('0x6')](a21_0x1f33('0x1a')+_0x3c29fa);try{request[a21_0x1f33('0x1b')]({'url':_0x59a554,'formData':_0xa43195},function(_0x26129a,_0x5a6131,_0x3e8b9f){let _0x461d85=null;let _0x5258dc='';if(_0x26129a){_0x5258dc='';}else{try{console[a21_0x1f33('0x6')](a21_0x1f33('0x1c')+_0x3e8b9f);_0x461d85=JSON[a21_0x1f33('0x1d')](_0x3e8b9f);if(_0x461d85['status']==0x1){_0x5258dc=a21_0x1f33('0x1e');}else{_0x5258dc='';}}catch(_0x32cfd0){console['error'](_0x32cfd0);_0x5258dc='';}}const _0x8215db=stationSettings_1[a21_0x1f33('0xd')][a21_0x1f33('0x9')][a21_0x1f33('0x12')]+_0x5258dc+_0x3c29fa;fs['rename'](_0x53e332,_0x8215db,function(_0x26129a){if(_0x26129a){console[a21_0x1f33('0x6')](_0x26129a);}console[a21_0x1f33('0x6')](a21_0x1f33('0x15')+_0x8215db);});});}catch(_0x3649d2){console[a21_0x1f33('0x1f')](_0x3649d2);}}}exports[a21_0x1f33('0x20')]=SyncEventsService;