var a21_0x308a=['settings','forEach','includes','.gz','stat','eventFileFolder','abs','ctime','getTime','syncFile','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','post','Response\x20body:\x20','success/','error','rename','defineProperty','__esModule','../infrastructure/stationSettings','request','exploreDir','log','init\x20Sync','readdir','StationContext'];(function(_0x32b805,_0x1b988a){var _0x85f24d=function(_0x49fddd){while(--_0x49fddd){_0x32b805['push'](_0x32b805['shift']());}};_0x85f24d(++_0x1b988a);}(a21_0x308a,0xdf));var a21_0x27f3=function(_0x2b3d75,_0x57bc22){_0x2b3d75=_0x2b3d75-0x0;var _0x2452c9=a21_0x308a[_0x2b3d75];return _0x2452c9;};'use strict';Object[a21_0x27f3('0x0')](exports,a21_0x27f3('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x27f3('0x2'));const fs=require('fs');const request=require(a21_0x27f3('0x3'));class SyncEventsService{constructor(){}['init'](){this[a21_0x27f3('0x4')](0x0);console[a21_0x27f3('0x5')](a21_0x27f3('0x6'));}[a21_0x27f3('0x4')](_0xe47268){fs[a21_0x27f3('0x7')](stationSettings_1[a21_0x27f3('0x8')][a21_0x27f3('0x9')]['eventFileFolder'],(_0x18c7c4,_0x1ca3e1)=>{if(_0x1ca3e1!=null){_0x1ca3e1[a21_0x27f3('0xa')](_0x1c1e01=>{if(_0x1c1e01[a21_0x27f3('0xb')](a21_0x27f3('0xc'))){fs[a21_0x27f3('0xd')](stationSettings_1[a21_0x27f3('0x8')][a21_0x27f3('0x9')][a21_0x27f3('0xe')]+_0x1c1e01,(_0x1c081b,_0x28b450)=>{const _0xbe6c06=Math[a21_0x27f3('0xf')](new Date()['getTime']()-_0x28b450[a21_0x27f3('0x10')][a21_0x27f3('0x11')]());if(_0xbe6c06>0x2710){this['syncFile'](_0x1c1e01);}});}});}});setTimeout(()=>{this[a21_0x27f3('0x4')](++_0xe47268);},0x1388);}[a21_0x27f3('0x12')](_0x14f7b2){const _0x1b8ff6=stationSettings_1['StationContext'][a21_0x27f3('0x9')]['eventFileFolder']+_0x14f7b2;const _0x5eb7b3=stationSettings_1[a21_0x27f3('0x8')][a21_0x27f3('0x9')]['eventFileFolder']+'process/'+_0x14f7b2;fs['rename'](_0x1b8ff6,_0x5eb7b3,_0x5ae6f5=>{if(_0x5ae6f5){console[a21_0x27f3('0x5')](_0x5ae6f5);}else{console['log'](a21_0x27f3('0x13')+_0x5eb7b3);this[a21_0x27f3('0x14')](_0x14f7b2,_0x5eb7b3);}});}[a21_0x27f3('0x14')](_0x4b8fc2,_0x1f6656){const _0xb0ef09=a21_0x27f3('0x15');const _0x23701d={'file':fs[a21_0x27f3('0x16')](_0x1f6656)};console[a21_0x27f3('0x5')](new Date());console[a21_0x27f3('0x5')](a21_0x27f3('0x17')+_0xb0ef09);console[a21_0x27f3('0x5')]('Sending\x20file:\x20'+_0x4b8fc2);try{request[a21_0x27f3('0x18')]({'url':_0xb0ef09,'formData':_0x23701d},function(_0xe5613e,_0x56ae1c,_0x15d0b3){let _0x1621d5=null;let _0x9e7f6f='';if(_0xe5613e){_0x9e7f6f='';}else{try{console['log'](a21_0x27f3('0x19')+_0x15d0b3);_0x1621d5=JSON['parse'](_0x15d0b3);if(_0x1621d5['status']==0x1){_0x9e7f6f=a21_0x27f3('0x1a');}else{_0x9e7f6f='';}}catch(_0x3532b0){console[a21_0x27f3('0x1b')](_0x3532b0);_0x9e7f6f='';}}const _0x425f3b=stationSettings_1['StationContext'][a21_0x27f3('0x9')][a21_0x27f3('0xe')]+_0x9e7f6f+_0x4b8fc2;fs[a21_0x27f3('0x1c')](_0x1f6656,_0x425f3b,function(_0xe5613e){if(_0xe5613e){console['log'](_0xe5613e);}console[a21_0x27f3('0x5')]('Successfully\x20renamed\x20'+_0x425f3b);});});}catch(_0x12f07b){console[a21_0x27f3('0x1b')](_0x12f07b);}}}exports['SyncEventsService']=SyncEventsService;