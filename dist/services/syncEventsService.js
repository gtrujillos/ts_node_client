var a21_0x2dbf=['forEach','.gz','stat','getTime','syncFile','process/','rename','sendFile','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','status','error','defineProperty','__esModule','../infrastructure/stationSettings','init','exploreDir','log','init\x20Sync','StationContext','settings','eventFileFolder'];(function(_0x889636,_0x3b394c){var _0x4b177e=function(_0x17d7cb){while(--_0x17d7cb){_0x889636['push'](_0x889636['shift']());}};_0x4b177e(++_0x3b394c);}(a21_0x2dbf,0x12e));var a21_0x561a=function(_0x2f3e31,_0x3a89c9){_0x2f3e31=_0x2f3e31-0x0;var _0x2c6db2=a21_0x2dbf[_0x2f3e31];return _0x2c6db2;};'use strict';Object[a21_0x561a('0x0')](exports,a21_0x561a('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x561a('0x2'));const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}[a21_0x561a('0x3')](){this[a21_0x561a('0x4')](0x0);console[a21_0x561a('0x5')](a21_0x561a('0x6'));}[a21_0x561a('0x4')](_0x2714cb){fs['readdir'](stationSettings_1[a21_0x561a('0x7')][a21_0x561a('0x8')][a21_0x561a('0x9')],(_0x144914,_0x43dd27)=>{if(_0x43dd27!=null){_0x43dd27[a21_0x561a('0xa')](_0x1baaff=>{if(_0x1baaff['includes'](a21_0x561a('0xb'))){fs[a21_0x561a('0xc')](stationSettings_1[a21_0x561a('0x7')]['settings'][a21_0x561a('0x9')]+_0x1baaff,(_0x29ab17,_0x494f13)=>{const _0x6f705c=Math['abs'](new Date()['getTime']()-_0x494f13['ctime'][a21_0x561a('0xd')]());if(_0x6f705c>0x2710){this[a21_0x561a('0xe')](_0x1baaff);}});}});}});setTimeout(()=>{this[a21_0x561a('0x4')](++_0x2714cb);},0x1388);}[a21_0x561a('0xe')](_0x73294c){const _0x502463=stationSettings_1[a21_0x561a('0x7')][a21_0x561a('0x8')]['eventFileFolder']+_0x73294c;const _0x5a37a4=stationSettings_1[a21_0x561a('0x7')][a21_0x561a('0x8')][a21_0x561a('0x9')]+a21_0x561a('0xf')+_0x73294c;fs[a21_0x561a('0x10')](_0x502463,_0x5a37a4,_0x2caef1=>{if(_0x2caef1){console[a21_0x561a('0x5')](_0x2caef1);}else{console[a21_0x561a('0x5')]('Successfully\x20renamed\x20'+_0x5a37a4);this[a21_0x561a('0x11')](_0x73294c,_0x5a37a4);}});}[a21_0x561a('0x11')](_0x52e490,_0x219858){const _0x2cd327='http://restapi.passcontrol.co/sync_files/upload_event';const _0x255dc4={'file':fs['createReadStream'](_0x219858)};console[a21_0x561a('0x5')](new Date());console[a21_0x561a('0x5')](a21_0x561a('0x12')+_0x2cd327);console['log'](a21_0x561a('0x13')+_0x52e490);try{request[a21_0x561a('0x14')]({'url':_0x2cd327,'formData':_0x255dc4},function(_0x1782cc,_0x404fd7,_0x26f35b){let _0x186243=null;let _0x26cbe7='';if(_0x1782cc){_0x26cbe7='';}else{try{console[a21_0x561a('0x5')](a21_0x561a('0x15')+_0x26f35b);_0x186243=JSON['parse'](_0x26f35b);if(_0x186243[a21_0x561a('0x16')]==0x1){_0x26cbe7='success/';}else{_0x26cbe7='';}}catch(_0x5e1052){console[a21_0x561a('0x17')](_0x5e1052);_0x26cbe7='';}}const _0x553b55=stationSettings_1[a21_0x561a('0x7')][a21_0x561a('0x8')][a21_0x561a('0x9')]+_0x26cbe7+_0x52e490;fs['rename'](_0x219858,_0x553b55,function(_0x1782cc){if(_0x1782cc){console[a21_0x561a('0x5')](_0x1782cc);}console[a21_0x561a('0x5')]('Successfully\x20renamed\x20'+_0x553b55);});});}catch(_0x212ef4){console['error'](_0x212ef4);}}}exports['SyncEventsService']=SyncEventsService;