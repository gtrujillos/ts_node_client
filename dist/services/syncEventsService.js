var a21_0x3b61=['settings','eventFileFolder','forEach','.gz','stat','abs','ctime','getTime','syncFile','process/','rename','log','Successfully\x20renamed\x20','sendFile','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','defineProperty','__esModule','request','init\x20SyncEventsService','exploreDir','readdir','StationContext'];(function(_0x90a74d,_0x59ac73){var _0x408cdf=function(_0x2fe102){while(--_0x2fe102){_0x90a74d['push'](_0x90a74d['shift']());}};_0x408cdf(++_0x59ac73);}(a21_0x3b61,0xf9));var a21_0x5646=function(_0x242c08,_0x11667f){_0x242c08=_0x242c08-0x0;var _0x1b2266=a21_0x3b61[_0x242c08];return _0x1b2266;};'use strict';Object[a21_0x5646('0x0')](exports,a21_0x5646('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a21_0x5646('0x2'));class SyncEventsService{constructor(){}['init'](){console['log'](a21_0x5646('0x3'));this[a21_0x5646('0x4')](0x0);}[a21_0x5646('0x4')](_0x16dd44){fs[a21_0x5646('0x5')](stationSettings_1[a21_0x5646('0x6')][a21_0x5646('0x7')][a21_0x5646('0x8')],(_0xce26f2,_0x43926b)=>{if(_0x43926b!=null){_0x43926b[a21_0x5646('0x9')](_0x134d73=>{if(_0x134d73['includes'](a21_0x5646('0xa'))){fs[a21_0x5646('0xb')](stationSettings_1[a21_0x5646('0x6')]['settings'][a21_0x5646('0x8')]+_0x134d73,(_0x5208da,_0x4c86f8)=>{const _0x520063=Math[a21_0x5646('0xc')](new Date()['getTime']()-_0x4c86f8[a21_0x5646('0xd')][a21_0x5646('0xe')]());if(_0x520063>0x2710){this[a21_0x5646('0xf')](_0x134d73);}});}});}});setTimeout(()=>{this[a21_0x5646('0x4')](++_0x16dd44);},0x1388);}[a21_0x5646('0xf')](_0x599de3){const _0x38c41b=stationSettings_1[a21_0x5646('0x6')][a21_0x5646('0x7')][a21_0x5646('0x8')]+_0x599de3;const _0x4fd453=stationSettings_1[a21_0x5646('0x6')]['settings'][a21_0x5646('0x8')]+a21_0x5646('0x10')+_0x599de3;fs[a21_0x5646('0x11')](_0x38c41b,_0x4fd453,_0x729f8f=>{if(_0x729f8f){console[a21_0x5646('0x12')](_0x729f8f);}else{console['log'](a21_0x5646('0x13')+_0x4fd453);this[a21_0x5646('0x14')](_0x599de3,_0x4fd453);}});}[a21_0x5646('0x14')](_0x14bc11,_0x1dcee5){const _0x411c5c=process['env'][a21_0x5646('0x15')]+a21_0x5646('0x16');const _0x1518a6={'file':fs[a21_0x5646('0x17')](_0x1dcee5)};console[a21_0x5646('0x12')](new Date());console['log'](a21_0x5646('0x18')+_0x411c5c);console['log']('Sending\x20file:\x20'+_0x14bc11);try{request[a21_0x5646('0x19')]({'url':_0x411c5c,'formData':_0x1518a6},function(_0x225b76,_0x108076,_0x7bb973){let _0x4763c1=null;let _0x374761='';if(_0x225b76){_0x374761='';}else{try{console[a21_0x5646('0x12')](a21_0x5646('0x1a')+_0x7bb973);_0x4763c1=JSON[a21_0x5646('0x1b')](_0x7bb973);if(_0x4763c1[a21_0x5646('0x1c')]==0x1){_0x374761=a21_0x5646('0x1d');}else{_0x374761='';}}catch(_0x3126e5){console[a21_0x5646('0x1e')](_0x3126e5);_0x374761='';}}const _0x5f3264=stationSettings_1[a21_0x5646('0x6')][a21_0x5646('0x7')][a21_0x5646('0x8')]+_0x374761+_0x14bc11;fs[a21_0x5646('0x11')](_0x1dcee5,_0x5f3264,function(_0x225b76){if(_0x225b76){console[a21_0x5646('0x12')](_0x225b76);}console[a21_0x5646('0x12')](a21_0x5646('0x13')+_0x5f3264);});});}catch(_0x5e62aa){console[a21_0x5646('0x1e')](_0x5e62aa);}}}exports[a21_0x5646('0x1f')]=SyncEventsService;