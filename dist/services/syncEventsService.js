var a24_0x1988=['request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','forEach','includes','.gz','stat','settings','eventFileFolder','abs','getTime','ctime','syncFile','rename','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','Response\x20body:\x20','parse','success/','error','Successfully\x20renamed\x20','__esModule','../infrastructure/stationSettings'];(function(_0x3f3f80,_0x399a44){var _0x21231c=function(_0x49af86){while(--_0x49af86){_0x3f3f80['push'](_0x3f3f80['shift']());}};_0x21231c(++_0x399a44);}(a24_0x1988,0xde));var a24_0x45aa=function(_0x1dedd0,_0x364685){_0x1dedd0=_0x1dedd0-0x0;var _0x46a920=a24_0x1988[_0x1dedd0];return _0x46a920;};'use strict';Object['defineProperty'](exports,a24_0x45aa('0x0'),{'value':!![]});const stationSettings_1=require(a24_0x45aa('0x1'));const fs=require('fs');const request=require(a24_0x45aa('0x2'));class SyncEventsService{constructor(){}[a24_0x45aa('0x3')](){console[a24_0x45aa('0x4')](a24_0x45aa('0x5'));this['exploreDir'](0x0);}[a24_0x45aa('0x6')](_0x1bb949){fs[a24_0x45aa('0x7')](stationSettings_1[a24_0x45aa('0x8')]['settings']['eventFileFolder'],(_0x16de3e,_0x2598be)=>{if(_0x2598be!=null){_0x2598be[a24_0x45aa('0x9')](_0xd2f5dc=>{if(_0xd2f5dc[a24_0x45aa('0xa')](a24_0x45aa('0xb'))){fs[a24_0x45aa('0xc')](stationSettings_1[a24_0x45aa('0x8')][a24_0x45aa('0xd')][a24_0x45aa('0xe')]+_0xd2f5dc,(_0x2bf83c,_0x1ba1d8)=>{const _0x4a8814=Math[a24_0x45aa('0xf')](new Date()[a24_0x45aa('0x10')]()-_0x1ba1d8[a24_0x45aa('0x11')]['getTime']());if(_0x4a8814>0x2710){this[a24_0x45aa('0x12')](_0xd2f5dc);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x1bb949);},0x1388);}[a24_0x45aa('0x12')](_0x40d6b6){const _0x673228=stationSettings_1[a24_0x45aa('0x8')][a24_0x45aa('0xd')][a24_0x45aa('0xe')]+_0x40d6b6;const _0x2c7fd3=stationSettings_1['StationContext'][a24_0x45aa('0xd')][a24_0x45aa('0xe')]+'process/'+_0x40d6b6;fs[a24_0x45aa('0x13')](_0x673228,_0x2c7fd3,_0x784583=>{if(_0x784583){console[a24_0x45aa('0x4')](_0x784583);}else{console[a24_0x45aa('0x4')]('Successfully\x20renamed\x20'+_0x2c7fd3);this['sendFile'](_0x40d6b6,_0x2c7fd3);}});}[a24_0x45aa('0x14')](_0x5c760a,_0x18ca53){const _0x23a82a=process[a24_0x45aa('0x15')][a24_0x45aa('0x16')]+a24_0x45aa('0x17');const _0x49efdf={'file':fs[a24_0x45aa('0x18')](_0x18ca53)};console['log'](new Date());console[a24_0x45aa('0x4')](a24_0x45aa('0x19')+_0x23a82a);console[a24_0x45aa('0x4')](a24_0x45aa('0x1a')+_0x5c760a);try{request['post']({'url':_0x23a82a,'formData':_0x49efdf},function(_0x5c5cbb,_0x50d2a8,_0xe198ca){let _0x39ca96=null;let _0x10cf2f='';if(_0x5c5cbb){_0x10cf2f='';}else{try{console[a24_0x45aa('0x4')](a24_0x45aa('0x1b')+_0xe198ca);_0x39ca96=JSON[a24_0x45aa('0x1c')](_0xe198ca);if(_0x39ca96['status']==0x1){_0x10cf2f=a24_0x45aa('0x1d');}else{_0x10cf2f='';}}catch(_0x7244fc){console[a24_0x45aa('0x1e')](_0x7244fc);_0x10cf2f='';}}const _0x4e8041=stationSettings_1['StationContext']['settings']['eventFileFolder']+_0x10cf2f+_0x5c760a;fs[a24_0x45aa('0x13')](_0x18ca53,_0x4e8041,function(_0x5c5cbb){if(_0x5c5cbb){console[a24_0x45aa('0x4')](_0x5c5cbb);}console[a24_0x45aa('0x4')](a24_0x45aa('0x1f')+_0x4e8041);});});}catch(_0x3fc6da){console['error'](_0x3fc6da);}}}exports['SyncEventsService']=SyncEventsService;