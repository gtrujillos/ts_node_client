var a21_0x3b5f=['init\x20Sync','exploreDir','readdir','StationContext','settings','eventFileFolder','forEach','includes','getTime','syncFile','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','status','success/','error','defineProperty','__esModule','../infrastructure/stationSettings','init','log'];(function(_0x1440b8,_0x4dd354){var _0x4403cc=function(_0x119b39){while(--_0x119b39){_0x1440b8['push'](_0x1440b8['shift']());}};_0x4403cc(++_0x4dd354);}(a21_0x3b5f,0xcb));var a21_0x33f7=function(_0x2e70a9,_0x3ac371){_0x2e70a9=_0x2e70a9-0x0;var _0x3e4f32=a21_0x3b5f[_0x2e70a9];return _0x3e4f32;};'use strict';Object[a21_0x33f7('0x0')](exports,a21_0x33f7('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x33f7('0x2'));const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}[a21_0x33f7('0x3')](){this['exploreDir'](0x0);console[a21_0x33f7('0x4')](a21_0x33f7('0x5'));}[a21_0x33f7('0x6')](_0x443b5e){fs[a21_0x33f7('0x7')](stationSettings_1[a21_0x33f7('0x8')][a21_0x33f7('0x9')][a21_0x33f7('0xa')],(_0x335807,_0x2c69e5)=>{if(_0x2c69e5!=null){_0x2c69e5[a21_0x33f7('0xb')](_0x3daf6c=>{if(_0x3daf6c[a21_0x33f7('0xc')]('.gz')){fs['stat'](stationSettings_1['StationContext'][a21_0x33f7('0x9')]['eventFileFolder']+_0x3daf6c,(_0x2a623c,_0x817c5b)=>{const _0x1d7f60=Math['abs'](new Date()[a21_0x33f7('0xd')]()-_0x817c5b['ctime'][a21_0x33f7('0xd')]());if(_0x1d7f60>0x2710){this[a21_0x33f7('0xe')](_0x3daf6c);}});}});}});setTimeout(()=>{this[a21_0x33f7('0x6')](++_0x443b5e);},0x1388);}[a21_0x33f7('0xe')](_0x4c4366){const _0x626183=stationSettings_1[a21_0x33f7('0x8')][a21_0x33f7('0x9')]['eventFileFolder']+_0x4c4366;const _0x5b6643=stationSettings_1[a21_0x33f7('0x8')][a21_0x33f7('0x9')]['eventFileFolder']+'process/'+_0x4c4366;fs['rename'](_0x626183,_0x5b6643,_0x2579e1=>{if(_0x2579e1){console[a21_0x33f7('0x4')](_0x2579e1);}else{console[a21_0x33f7('0x4')](a21_0x33f7('0xf')+_0x5b6643);this[a21_0x33f7('0x10')](_0x4c4366,_0x5b6643);}});}[a21_0x33f7('0x10')](_0x5d083a,_0x15c131){const _0x29be3d=a21_0x33f7('0x11');const _0x31e1c4={'file':fs[a21_0x33f7('0x12')](_0x15c131)};console[a21_0x33f7('0x4')](new Date());console[a21_0x33f7('0x4')](a21_0x33f7('0x13')+_0x29be3d);console[a21_0x33f7('0x4')](a21_0x33f7('0x14')+_0x5d083a);try{request[a21_0x33f7('0x15')]({'url':_0x29be3d,'formData':_0x31e1c4},function(_0x2ba3ce,_0xda8748,_0x478f08){let _0x5a886c=null;let _0x4b7aeb='';if(_0x2ba3ce){_0x4b7aeb='';}else{try{console[a21_0x33f7('0x4')](a21_0x33f7('0x16')+_0x478f08);_0x5a886c=JSON['parse'](_0x478f08);if(_0x5a886c[a21_0x33f7('0x17')]==0x1){_0x4b7aeb=a21_0x33f7('0x18');}else{_0x4b7aeb='';}}catch(_0x3e6120){console[a21_0x33f7('0x19')](_0x3e6120);_0x4b7aeb='';}}const _0x557746=stationSettings_1[a21_0x33f7('0x8')]['settings'][a21_0x33f7('0xa')]+_0x4b7aeb+_0x5d083a;fs['rename'](_0x15c131,_0x557746,function(_0x2ba3ce){if(_0x2ba3ce){console[a21_0x33f7('0x4')](_0x2ba3ce);}console[a21_0x33f7('0x4')](a21_0x33f7('0xf')+_0x557746);});});}catch(_0x4eb2db){console['error'](_0x4eb2db);}}}exports['SyncEventsService']=SyncEventsService;