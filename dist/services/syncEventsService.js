var a21_0x31c6=['log','readdir','StationContext','settings','forEach','includes','stat','eventFileFolder','abs','ctime','syncFile','process/','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','Successfully\x20renamed\x20','SyncEventsService','defineProperty','../infrastructure/stationSettings','request','exploreDir'];(function(_0x359dd0,_0x58ff4d){var _0x3c6184=function(_0x8b17d2){while(--_0x8b17d2){_0x359dd0['push'](_0x359dd0['shift']());}};_0x3c6184(++_0x58ff4d);}(a21_0x31c6,0x1e9));var a21_0xaa12=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a21_0x31c6[_0x2d8f05];return _0x4d74cb;};'use strict';Object[a21_0xaa12('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a21_0xaa12('0x1'));const fs=require('fs');const request=require(a21_0xaa12('0x2'));class SyncEventsService{constructor(){}['init'](){this[a21_0xaa12('0x3')](0x0);console[a21_0xaa12('0x4')]('init\x20Sync');}[a21_0xaa12('0x3')](_0x57f818){fs[a21_0xaa12('0x5')](stationSettings_1[a21_0xaa12('0x6')][a21_0xaa12('0x7')]['eventFileFolder'],(_0x9666d6,_0x1849d0)=>{if(_0x1849d0!=null){_0x1849d0[a21_0xaa12('0x8')](_0x9e4737=>{if(_0x9e4737[a21_0xaa12('0x9')]('.gz')){fs[a21_0xaa12('0xa')](stationSettings_1[a21_0xaa12('0x6')][a21_0xaa12('0x7')][a21_0xaa12('0xb')]+_0x9e4737,(_0x7cb2ca,_0x29a21f)=>{const _0xcb524b=Math[a21_0xaa12('0xc')](new Date()['getTime']()-_0x29a21f[a21_0xaa12('0xd')]['getTime']());if(_0xcb524b>0x2710){this[a21_0xaa12('0xe')](_0x9e4737);}});}});}});setTimeout(()=>{this[a21_0xaa12('0x3')](++_0x57f818);},0x1388);}['syncFile'](_0x3f31cb){const _0x24617e=stationSettings_1[a21_0xaa12('0x6')][a21_0xaa12('0x7')][a21_0xaa12('0xb')]+_0x3f31cb;const _0xacba4b=stationSettings_1[a21_0xaa12('0x6')][a21_0xaa12('0x7')]['eventFileFolder']+a21_0xaa12('0xf')+_0x3f31cb;fs[a21_0xaa12('0x10')](_0x24617e,_0xacba4b,_0x5eaac8=>{if(_0x5eaac8){console[a21_0xaa12('0x4')](_0x5eaac8);}else{console[a21_0xaa12('0x4')]('Successfully\x20renamed\x20'+_0xacba4b);this['sendFile'](_0x3f31cb,_0xacba4b);}});}[a21_0xaa12('0x11')](_0x4e950a,_0x518fa8){const _0x329389=a21_0xaa12('0x12');const _0x27b327={'file':fs['createReadStream'](_0x518fa8)};console['log'](new Date());console[a21_0xaa12('0x4')](a21_0xaa12('0x13')+_0x329389);console['log'](a21_0xaa12('0x14')+_0x4e950a);try{request[a21_0xaa12('0x15')]({'url':_0x329389,'formData':_0x27b327},function(_0x4f4e88,_0x511967,_0x5281f3){let _0x2ed723=null;let _0x346dad='';if(_0x4f4e88){_0x346dad='';}else{try{console[a21_0xaa12('0x4')](a21_0xaa12('0x16')+_0x5281f3);_0x2ed723=JSON[a21_0xaa12('0x17')](_0x5281f3);if(_0x2ed723[a21_0xaa12('0x18')]==0x1){_0x346dad=a21_0xaa12('0x19');}else{_0x346dad='';}}catch(_0x4c2cb8){console[a21_0xaa12('0x1a')](_0x4c2cb8);_0x346dad='';}}const _0x4a35de=stationSettings_1[a21_0xaa12('0x6')][a21_0xaa12('0x7')][a21_0xaa12('0xb')]+_0x346dad+_0x4e950a;fs[a21_0xaa12('0x10')](_0x518fa8,_0x4a35de,function(_0x4f4e88){if(_0x4f4e88){console['log'](_0x4f4e88);}console[a21_0xaa12('0x4')](a21_0xaa12('0x1b')+_0x4a35de);});});}catch(_0x5ba079){console[a21_0xaa12('0x1a')](_0x5ba079);}}}exports[a21_0xaa12('0x1c')]=SyncEventsService;