var a20_0x135b=['__esModule','../infrastructure/stationSettings','request','init','init\x20Sync','exploreDir','readdir','StationContext','settings','forEach','includes','syncFile','eventFileFolder','process/','rename','log','sendFile','serviceUrl:\x20','Sending\x20file:\x20','post','parse','status','Successfully\x20renamed\x20','SyncEventsService'];(function(_0x5be69e,_0x1bc1cd){var _0x222fce=function(_0x4a880c){while(--_0x4a880c){_0x5be69e['push'](_0x5be69e['shift']());}};_0x222fce(++_0x1bc1cd);}(a20_0x135b,0xd8));var a20_0x1582=function(_0x4b4d89,_0x3f7281){_0x4b4d89=_0x4b4d89-0x0;var _0x3bb6f3=a20_0x135b[_0x4b4d89];return _0x3bb6f3;};'use strict';Object['defineProperty'](exports,a20_0x1582('0x0'),{'value':!![]});const stationSettings_1=require(a20_0x1582('0x1'));const fs=require('fs');const request=require(a20_0x1582('0x2'));class SyncEventsService{constructor(){}[a20_0x1582('0x3')](){this['exploreDir'](0x0);console['log'](a20_0x1582('0x4'));}[a20_0x1582('0x5')](_0x52a5b6){fs[a20_0x1582('0x6')](stationSettings_1[a20_0x1582('0x7')][a20_0x1582('0x8')]['eventFileFolder'],(_0x2807c2,_0x44150b)=>{if(_0x44150b!=null){_0x44150b[a20_0x1582('0x9')](_0x4c6673=>{if(_0x4c6673[a20_0x1582('0xa')]('.gz')){fs['stat'](stationSettings_1['StationContext']['settings']['eventFileFolder']+_0x4c6673,(_0x1293ae,_0x5edec1)=>{const _0x110dc1=Math['abs'](new Date()['getTime']()-_0x5edec1['ctime']['getTime']());if(_0x110dc1>0x2710){this[a20_0x1582('0xb')](_0x4c6673);}});}});}});setTimeout(()=>{this[a20_0x1582('0x5')](++_0x52a5b6);},0x1388);}['syncFile'](_0x310e2f){const _0x2740e=stationSettings_1[a20_0x1582('0x7')][a20_0x1582('0x8')]['eventFileFolder']+_0x310e2f;const _0x1ae859=stationSettings_1['StationContext']['settings'][a20_0x1582('0xc')]+a20_0x1582('0xd')+_0x310e2f;fs[a20_0x1582('0xe')](_0x2740e,_0x1ae859,_0x1ea257=>{if(_0x1ea257){console[a20_0x1582('0xf')](_0x1ea257);}else{console[a20_0x1582('0xf')]('Successfully\x20renamed\x20'+_0x1ae859);this[a20_0x1582('0x10')](_0x310e2f,_0x1ae859);}});}[a20_0x1582('0x10')](_0x2cd3d1,_0x5eea3c){const _0x4fd43d='http://restapi.passcontrol.co/sync_files/upload_event';const _0x120304={'file':fs['createReadStream'](_0x5eea3c)};console[a20_0x1582('0xf')](new Date());console[a20_0x1582('0xf')](a20_0x1582('0x11')+_0x4fd43d);console['log'](a20_0x1582('0x12')+_0x2cd3d1);try{request[a20_0x1582('0x13')]({'url':_0x4fd43d,'formData':_0x120304},function(_0x1c7de6,_0xdc9098,_0x249265){let _0x3c45cd=null;let _0xb723fe='';if(_0x1c7de6){_0xb723fe='';}else{try{console[a20_0x1582('0xf')]('Response\x20body:\x20'+_0x249265);_0x3c45cd=JSON[a20_0x1582('0x14')](_0x249265);if(_0x3c45cd[a20_0x1582('0x15')]==0x1){_0xb723fe='success/';}else{_0xb723fe='';}}catch(_0x153e2c){console['error'](_0x153e2c);_0xb723fe='';}}const _0x2c08a8=stationSettings_1['StationContext'][a20_0x1582('0x8')][a20_0x1582('0xc')]+_0xb723fe+_0x2cd3d1;fs[a20_0x1582('0xe')](_0x5eea3c,_0x2c08a8,function(_0x1c7de6){if(_0x1c7de6){console[a20_0x1582('0xf')](_0x1c7de6);}console[a20_0x1582('0xf')](a20_0x1582('0x16')+_0x2c08a8);});});}catch(_0x40bc81){console['error'](_0x40bc81);}}}exports[a20_0x1582('0x17')]=SyncEventsService;