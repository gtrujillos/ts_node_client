var a20_0x551d=['getTime','ctime','syncFile','rename','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','Sending\x20file:\x20','Response\x20body:\x20','parse','error','SyncEventsService','defineProperty','../infrastructure/stationSettings','request','init','exploreDir','log','init\x20Sync','readdir','StationContext','settings','eventFileFolder','forEach','includes','stat'];(function(_0x5162e7,_0x58caa4){var _0x4fce69=function(_0x119f27){while(--_0x119f27){_0x5162e7['push'](_0x5162e7['shift']());}};_0x4fce69(++_0x58caa4);}(a20_0x551d,0xaf));var a20_0x2e9e=function(_0x40f095,_0x26ae6c){_0x40f095=_0x40f095-0x0;var _0x2c8537=a20_0x551d[_0x40f095];return _0x2c8537;};'use strict';Object[a20_0x2e9e('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a20_0x2e9e('0x1'));const fs=require('fs');const request=require(a20_0x2e9e('0x2'));class SyncEventsService{constructor(){}[a20_0x2e9e('0x3')](){this[a20_0x2e9e('0x4')](0x0);console[a20_0x2e9e('0x5')](a20_0x2e9e('0x6'));}[a20_0x2e9e('0x4')](_0x4c94ad){fs[a20_0x2e9e('0x7')](stationSettings_1[a20_0x2e9e('0x8')][a20_0x2e9e('0x9')][a20_0x2e9e('0xa')],(_0x5ace0b,_0x2fb714)=>{if(_0x2fb714!=null){_0x2fb714[a20_0x2e9e('0xb')](_0x3bd39c=>{if(_0x3bd39c[a20_0x2e9e('0xc')]('.gz')){fs[a20_0x2e9e('0xd')](stationSettings_1[a20_0x2e9e('0x8')][a20_0x2e9e('0x9')][a20_0x2e9e('0xa')]+_0x3bd39c,(_0x4e9814,_0x5132a0)=>{const _0x1bc99d=Math['abs'](new Date()[a20_0x2e9e('0xe')]()-_0x5132a0[a20_0x2e9e('0xf')][a20_0x2e9e('0xe')]());if(_0x1bc99d>0x2710){this[a20_0x2e9e('0x10')](_0x3bd39c);}});}});}});setTimeout(()=>{this[a20_0x2e9e('0x4')](++_0x4c94ad);},0x1388);}[a20_0x2e9e('0x10')](_0x3c073c){const _0x4e163b=stationSettings_1[a20_0x2e9e('0x8')]['settings']['eventFileFolder']+_0x3c073c;const _0x4a5dbf=stationSettings_1['StationContext'][a20_0x2e9e('0x9')][a20_0x2e9e('0xa')]+'process/'+_0x3c073c;fs[a20_0x2e9e('0x11')](_0x4e163b,_0x4a5dbf,_0xf4e517=>{if(_0xf4e517){console[a20_0x2e9e('0x5')](_0xf4e517);}else{console[a20_0x2e9e('0x5')](a20_0x2e9e('0x12')+_0x4a5dbf);this[a20_0x2e9e('0x13')](_0x3c073c,_0x4a5dbf);}});}['sendFile'](_0x59904c,_0x1099c9){const _0x5b6d4d=a20_0x2e9e('0x14');const _0x4b2762={'file':fs[a20_0x2e9e('0x15')](_0x1099c9)};console[a20_0x2e9e('0x5')](new Date());console['log']('serviceUrl:\x20'+_0x5b6d4d);console[a20_0x2e9e('0x5')](a20_0x2e9e('0x16')+_0x59904c);try{request['post']({'url':_0x5b6d4d,'formData':_0x4b2762},function(_0x14015e,_0x38ee62,_0xff7ff4){let _0x2b796b=null;let _0x691e9c='';if(_0x14015e){_0x691e9c='';}else{try{console[a20_0x2e9e('0x5')](a20_0x2e9e('0x17')+_0xff7ff4);_0x2b796b=JSON[a20_0x2e9e('0x18')](_0xff7ff4);if(_0x2b796b['status']==0x1){_0x691e9c='success/';}else{_0x691e9c='';}}catch(_0x4f76ac){console[a20_0x2e9e('0x19')](_0x4f76ac);_0x691e9c='';}}const _0x1a0522=stationSettings_1[a20_0x2e9e('0x8')][a20_0x2e9e('0x9')][a20_0x2e9e('0xa')]+_0x691e9c+_0x59904c;fs['rename'](_0x1099c9,_0x1a0522,function(_0x14015e){if(_0x14015e){console[a20_0x2e9e('0x5')](_0x14015e);}console[a20_0x2e9e('0x5')]('Successfully\x20renamed\x20'+_0x1a0522);});});}catch(_0x17060d){console[a20_0x2e9e('0x19')](_0x17060d);}}}exports[a20_0x2e9e('0x1a')]=SyncEventsService;