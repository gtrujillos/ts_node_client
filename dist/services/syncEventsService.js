var a20_0x42b9=['../infrastructure/stationSettings','request','init','exploreDir','log','settings','forEach','includes','.gz','stat','StationContext','eventFileFolder','getTime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','Sending\x20file:\x20','Response\x20body:\x20','parse','status','error','defineProperty'];(function(_0x3f10ef,_0x4079e0){var _0x4715fe=function(_0x34ca35){while(--_0x34ca35){_0x3f10ef['push'](_0x3f10ef['shift']());}};_0x4715fe(++_0x4079e0);}(a20_0x42b9,0x9b));var a20_0xc5a6=function(_0x122d66,_0x2da085){_0x122d66=_0x122d66-0x0;var _0x410483=a20_0x42b9[_0x122d66];return _0x410483;};'use strict';Object[a20_0xc5a6('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a20_0xc5a6('0x1'));const fs=require('fs');const request=require(a20_0xc5a6('0x2'));class SyncEventsService{constructor(){}[a20_0xc5a6('0x3')](){this[a20_0xc5a6('0x4')](0x0);console[a20_0xc5a6('0x5')]('init\x20Sync');}[a20_0xc5a6('0x4')](_0x546277){fs['readdir'](stationSettings_1['StationContext'][a20_0xc5a6('0x6')]['eventFileFolder'],(_0x5c43b0,_0x40f6b6)=>{if(_0x40f6b6!=null){_0x40f6b6[a20_0xc5a6('0x7')](_0x226bdb=>{if(_0x226bdb[a20_0xc5a6('0x8')](a20_0xc5a6('0x9'))){fs[a20_0xc5a6('0xa')](stationSettings_1[a20_0xc5a6('0xb')][a20_0xc5a6('0x6')][a20_0xc5a6('0xc')]+_0x226bdb,(_0x36de72,_0x534abb)=>{const _0x17a1d1=Math['abs'](new Date()[a20_0xc5a6('0xd')]()-_0x534abb['ctime'][a20_0xc5a6('0xd')]());if(_0x17a1d1>0x2710){this[a20_0xc5a6('0xe')](_0x226bdb);}});}});}});setTimeout(()=>{this[a20_0xc5a6('0x4')](++_0x546277);},0x1388);}[a20_0xc5a6('0xe')](_0x2b89bc){const _0x5968de=stationSettings_1[a20_0xc5a6('0xb')][a20_0xc5a6('0x6')][a20_0xc5a6('0xc')]+_0x2b89bc;const _0x2a426a=stationSettings_1[a20_0xc5a6('0xb')]['settings'][a20_0xc5a6('0xc')]+a20_0xc5a6('0xf')+_0x2b89bc;fs[a20_0xc5a6('0x10')](_0x5968de,_0x2a426a,_0x247d1d=>{if(_0x247d1d){console[a20_0xc5a6('0x5')](_0x247d1d);}else{console['log'](a20_0xc5a6('0x11')+_0x2a426a);this[a20_0xc5a6('0x12')](_0x2b89bc,_0x2a426a);}});}[a20_0xc5a6('0x12')](_0x1a4947,_0x44a373){const _0x1fcede=a20_0xc5a6('0x13');const _0x318d5d={'file':fs[a20_0xc5a6('0x14')](_0x44a373)};console['log'](new Date());console['log']('serviceUrl:\x20'+_0x1fcede);console['log'](a20_0xc5a6('0x15')+_0x1a4947);try{request['post']({'url':_0x1fcede,'formData':_0x318d5d},function(_0x147784,_0x5a3740,_0x5784b5){let _0x41374a=null;let _0x78cb2a='';if(_0x147784){_0x78cb2a='';}else{try{console[a20_0xc5a6('0x5')](a20_0xc5a6('0x16')+_0x5784b5);_0x41374a=JSON[a20_0xc5a6('0x17')](_0x5784b5);if(_0x41374a[a20_0xc5a6('0x18')]==0x1){_0x78cb2a='success/';}else{_0x78cb2a='';}}catch(_0x4d7b1b){console[a20_0xc5a6('0x19')](_0x4d7b1b);_0x78cb2a='';}}const _0x470589=stationSettings_1[a20_0xc5a6('0xb')][a20_0xc5a6('0x6')][a20_0xc5a6('0xc')]+_0x78cb2a+_0x1a4947;fs['rename'](_0x44a373,_0x470589,function(_0x147784){if(_0x147784){console['log'](_0x147784);}console[a20_0xc5a6('0x5')](a20_0xc5a6('0x11')+_0x470589);});});}catch(_0x766334){console[a20_0xc5a6('0x19')](_0x766334);}}}exports['SyncEventsService']=SyncEventsService;