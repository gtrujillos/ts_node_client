var a24_0x8526=['__esModule','../infrastructure/stationSettings','request','init','init\x20SyncEventsService','exploreDir','readdir','forEach','includes','.gz','stat','StationContext','settings','eventFileFolder','abs','getTime','ctime','syncFile','process/','log','Successfully\x20renamed\x20','sendFile','env','sync_files/upload_event','Sending\x20file:\x20','post','Response\x20body:\x20','status','success/','rename','error','SyncEventsService','defineProperty'];(function(_0x37ebe5,_0x47207f){var _0x20636c=function(_0x36bae6){while(--_0x36bae6){_0x37ebe5['push'](_0x37ebe5['shift']());}};_0x20636c(++_0x47207f);}(a24_0x8526,0x16a));var a24_0x3764=function(_0x4f22e3,_0x11b742){_0x4f22e3=_0x4f22e3-0x0;var _0x2ad403=a24_0x8526[_0x4f22e3];return _0x2ad403;};'use strict';Object[a24_0x3764('0x0')](exports,a24_0x3764('0x1'),{'value':!![]});const stationSettings_1=require(a24_0x3764('0x2'));const fs=require('fs');const request=require(a24_0x3764('0x3'));class SyncEventsService{constructor(){}[a24_0x3764('0x4')](){console['log'](a24_0x3764('0x5'));this[a24_0x3764('0x6')](0x0);}[a24_0x3764('0x6')](_0xa12a84){fs[a24_0x3764('0x7')](stationSettings_1['StationContext']['settings']['eventFileFolder'],(_0x381e58,_0x16bdb3)=>{if(_0x16bdb3!=null){_0x16bdb3[a24_0x3764('0x8')](_0x3b763d=>{if(_0x3b763d[a24_0x3764('0x9')](a24_0x3764('0xa'))){fs[a24_0x3764('0xb')](stationSettings_1[a24_0x3764('0xc')][a24_0x3764('0xd')][a24_0x3764('0xe')]+_0x3b763d,(_0x467453,_0x2ccbe0)=>{const _0x29c40c=Math[a24_0x3764('0xf')](new Date()[a24_0x3764('0x10')]()-_0x2ccbe0[a24_0x3764('0x11')][a24_0x3764('0x10')]());if(_0x29c40c>0x2710){this[a24_0x3764('0x12')](_0x3b763d);}});}});}});setTimeout(()=>{this[a24_0x3764('0x6')](++_0xa12a84);},0x1388);}['syncFile'](_0x582c37){const _0x2d0cb0=stationSettings_1['StationContext']['settings']['eventFileFolder']+_0x582c37;const _0x4f85e3=stationSettings_1[a24_0x3764('0xc')][a24_0x3764('0xd')]['eventFileFolder']+a24_0x3764('0x13')+_0x582c37;fs['rename'](_0x2d0cb0,_0x4f85e3,_0x716d80=>{if(_0x716d80){console[a24_0x3764('0x14')](_0x716d80);}else{console['log'](a24_0x3764('0x15')+_0x4f85e3);this[a24_0x3764('0x16')](_0x582c37,_0x4f85e3);}});}[a24_0x3764('0x16')](_0xe4689e,_0x61fcc0){const _0x104077=process[a24_0x3764('0x17')]['WEB_SERVICE_URL']+a24_0x3764('0x18');const _0x19bd71={'file':fs['createReadStream'](_0x61fcc0)};console[a24_0x3764('0x14')](new Date());console[a24_0x3764('0x14')]('serviceUrl:\x20'+_0x104077);console['log'](a24_0x3764('0x19')+_0xe4689e);try{request[a24_0x3764('0x1a')]({'url':_0x104077,'formData':_0x19bd71},function(_0x6949fc,_0x2075cb,_0x12947a){let _0x156c24=null;let _0x45a3ca='';if(_0x6949fc){_0x45a3ca='';}else{try{console[a24_0x3764('0x14')](a24_0x3764('0x1b')+_0x12947a);_0x156c24=JSON['parse'](_0x12947a);if(_0x156c24[a24_0x3764('0x1c')]==0x1){_0x45a3ca=a24_0x3764('0x1d');}else{_0x45a3ca='';}}catch(_0x2f6395){console['error'](_0x2f6395);_0x45a3ca='';}}const _0x3cb86f=stationSettings_1[a24_0x3764('0xc')]['settings'][a24_0x3764('0xe')]+_0x45a3ca+_0xe4689e;fs[a24_0x3764('0x1e')](_0x61fcc0,_0x3cb86f,function(_0x6949fc){if(_0x6949fc){console[a24_0x3764('0x14')](_0x6949fc);}console['log'](a24_0x3764('0x15')+_0x3cb86f);});});}catch(_0x38994e){console[a24_0x3764('0x1f')](_0x38994e);}}}exports[a24_0x3764('0x20')]=SyncEventsService;