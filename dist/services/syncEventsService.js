var a22_0x3525=['getTime','ctime','syncFile','exploreDir','process/','rename','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','error','Successfully\x20renamed\x20','SyncEventsService','defineProperty','request','init','log','init\x20SyncEventsService','readdir','StationContext','settings','eventFileFolder','forEach','includes','.gz','abs'];(function(_0x9c838d,_0x3e332d){var _0x410506=function(_0x18d2cf){while(--_0x18d2cf){_0x9c838d['push'](_0x9c838d['shift']());}};_0x410506(++_0x3e332d);}(a22_0x3525,0x77));var a22_0x1c9a=function(_0x56cf49,_0x4eaa1d){_0x56cf49=_0x56cf49-0x0;var _0x3a5c41=a22_0x3525[_0x56cf49];return _0x3a5c41;};'use strict';Object[a22_0x1c9a('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a22_0x1c9a('0x1'));class SyncEventsService{constructor(){}[a22_0x1c9a('0x2')](){console[a22_0x1c9a('0x3')](a22_0x1c9a('0x4'));this['exploreDir'](0x0);}['exploreDir'](_0x44cb79){fs[a22_0x1c9a('0x5')](stationSettings_1[a22_0x1c9a('0x6')][a22_0x1c9a('0x7')][a22_0x1c9a('0x8')],(_0x389e8f,_0x26155f)=>{if(_0x26155f!=null){_0x26155f[a22_0x1c9a('0x9')](_0x25e47e=>{if(_0x25e47e[a22_0x1c9a('0xa')](a22_0x1c9a('0xb'))){fs['stat'](stationSettings_1[a22_0x1c9a('0x6')][a22_0x1c9a('0x7')][a22_0x1c9a('0x8')]+_0x25e47e,(_0x513a0d,_0x29b82b)=>{const _0x435d78=Math[a22_0x1c9a('0xc')](new Date()[a22_0x1c9a('0xd')]()-_0x29b82b[a22_0x1c9a('0xe')][a22_0x1c9a('0xd')]());if(_0x435d78>0x2710){this[a22_0x1c9a('0xf')](_0x25e47e);}});}});}});setTimeout(()=>{this[a22_0x1c9a('0x10')](++_0x44cb79);},0x1388);}[a22_0x1c9a('0xf')](_0x3000f9){const _0x3d0b35=stationSettings_1[a22_0x1c9a('0x6')]['settings']['eventFileFolder']+_0x3000f9;const _0x4722f3=stationSettings_1[a22_0x1c9a('0x6')][a22_0x1c9a('0x7')]['eventFileFolder']+a22_0x1c9a('0x11')+_0x3000f9;fs[a22_0x1c9a('0x12')](_0x3d0b35,_0x4722f3,_0x1dfb6e=>{if(_0x1dfb6e){console[a22_0x1c9a('0x3')](_0x1dfb6e);}else{console[a22_0x1c9a('0x3')]('Successfully\x20renamed\x20'+_0x4722f3);this[a22_0x1c9a('0x13')](_0x3000f9,_0x4722f3);}});}['sendFile'](_0x4b2192,_0x772bad){const _0x4726a7=process[a22_0x1c9a('0x14')][a22_0x1c9a('0x15')]+a22_0x1c9a('0x16');const _0xbb9bd1={'file':fs[a22_0x1c9a('0x17')](_0x772bad)};console[a22_0x1c9a('0x3')](new Date());console[a22_0x1c9a('0x3')](a22_0x1c9a('0x18')+_0x4726a7);console[a22_0x1c9a('0x3')](a22_0x1c9a('0x19')+_0x4b2192);try{request[a22_0x1c9a('0x1a')]({'url':_0x4726a7,'formData':_0xbb9bd1},function(_0xaa8abf,_0x1b64cf,_0x174ef2){let _0x467045=null;let _0x2a0329='';if(_0xaa8abf){_0x2a0329='';}else{try{console[a22_0x1c9a('0x3')](a22_0x1c9a('0x1b')+_0x174ef2);_0x467045=JSON[a22_0x1c9a('0x1c')](_0x174ef2);if(_0x467045[a22_0x1c9a('0x1d')]==0x1){_0x2a0329='success/';}else{_0x2a0329='';}}catch(_0x4be7c9){console[a22_0x1c9a('0x1e')](_0x4be7c9);_0x2a0329='';}}const _0x248c18=stationSettings_1[a22_0x1c9a('0x6')]['settings'][a22_0x1c9a('0x8')]+_0x2a0329+_0x4b2192;fs[a22_0x1c9a('0x12')](_0x772bad,_0x248c18,function(_0xaa8abf){if(_0xaa8abf){console[a22_0x1c9a('0x3')](_0xaa8abf);}console[a22_0x1c9a('0x3')](a22_0x1c9a('0x1f')+_0x248c18);});});}catch(_0x9f9548){console[a22_0x1c9a('0x1e')](_0x9f9548);}}}exports[a22_0x1c9a('0x20')]=SyncEventsService;