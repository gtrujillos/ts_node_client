var a21_0x2bb2=['status','success/','error','Successfully\x20renamed\x20','defineProperty','__esModule','../infrastructure/stationSettings','request','init','exploreDir','log','init\x20Sync','readdir','StationContext','settings','eventFileFolder','forEach','includes','.gz','stat','getTime','syncFile','process/','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','Sending\x20file:\x20','post','Response\x20body:\x20','parse'];(function(_0x271e68,_0x9bce1e){var _0x396bc2=function(_0x3b3332){while(--_0x3b3332){_0x271e68['push'](_0x271e68['shift']());}};_0x396bc2(++_0x9bce1e);}(a21_0x2bb2,0x1b6));var a21_0x428c=function(_0x30f620,_0x18537b){_0x30f620=_0x30f620-0x0;var _0x229f4b=a21_0x2bb2[_0x30f620];return _0x229f4b;};'use strict';Object[a21_0x428c('0x0')](exports,a21_0x428c('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x428c('0x2'));const fs=require('fs');const request=require(a21_0x428c('0x3'));class SyncEventsService{constructor(){}[a21_0x428c('0x4')](){this[a21_0x428c('0x5')](0x0);console[a21_0x428c('0x6')](a21_0x428c('0x7'));}['exploreDir'](_0x34d921){fs[a21_0x428c('0x8')](stationSettings_1[a21_0x428c('0x9')][a21_0x428c('0xa')][a21_0x428c('0xb')],(_0x3d0bbc,_0x1765f4)=>{if(_0x1765f4!=null){_0x1765f4[a21_0x428c('0xc')](_0x6b2aeb=>{if(_0x6b2aeb[a21_0x428c('0xd')](a21_0x428c('0xe'))){fs[a21_0x428c('0xf')](stationSettings_1[a21_0x428c('0x9')][a21_0x428c('0xa')]['eventFileFolder']+_0x6b2aeb,(_0x3bf9b6,_0xd3544)=>{const _0x3b8b4b=Math['abs'](new Date()['getTime']()-_0xd3544['ctime'][a21_0x428c('0x10')]());if(_0x3b8b4b>0x2710){this[a21_0x428c('0x11')](_0x6b2aeb);}});}});}});setTimeout(()=>{this[a21_0x428c('0x5')](++_0x34d921);},0x1388);}[a21_0x428c('0x11')](_0x119ea5){const _0x2dbbf7=stationSettings_1[a21_0x428c('0x9')][a21_0x428c('0xa')]['eventFileFolder']+_0x119ea5;const _0x1e5306=stationSettings_1[a21_0x428c('0x9')][a21_0x428c('0xa')][a21_0x428c('0xb')]+a21_0x428c('0x12')+_0x119ea5;fs[a21_0x428c('0x13')](_0x2dbbf7,_0x1e5306,_0x2d465e=>{if(_0x2d465e){console[a21_0x428c('0x6')](_0x2d465e);}else{console[a21_0x428c('0x6')]('Successfully\x20renamed\x20'+_0x1e5306);this[a21_0x428c('0x14')](_0x119ea5,_0x1e5306);}});}[a21_0x428c('0x14')](_0x4e96c0,_0x5cb59a){const _0x13ea70=a21_0x428c('0x15');const _0x1a6eaa={'file':fs[a21_0x428c('0x16')](_0x5cb59a)};console[a21_0x428c('0x6')](new Date());console[a21_0x428c('0x6')]('serviceUrl:\x20'+_0x13ea70);console[a21_0x428c('0x6')](a21_0x428c('0x17')+_0x4e96c0);try{request[a21_0x428c('0x18')]({'url':_0x13ea70,'formData':_0x1a6eaa},function(_0x130835,_0x385c43,_0x3fabcb){let _0xc28b2c=null;let _0x263720='';if(_0x130835){_0x263720='';}else{try{console[a21_0x428c('0x6')](a21_0x428c('0x19')+_0x3fabcb);_0xc28b2c=JSON[a21_0x428c('0x1a')](_0x3fabcb);if(_0xc28b2c[a21_0x428c('0x1b')]==0x1){_0x263720=a21_0x428c('0x1c');}else{_0x263720='';}}catch(_0x2e6855){console[a21_0x428c('0x1d')](_0x2e6855);_0x263720='';}}const _0x4ef55a=stationSettings_1['StationContext']['settings']['eventFileFolder']+_0x263720+_0x4e96c0;fs[a21_0x428c('0x13')](_0x5cb59a,_0x4ef55a,function(_0x130835){if(_0x130835){console[a21_0x428c('0x6')](_0x130835);}console[a21_0x428c('0x6')](a21_0x428c('0x1e')+_0x4ef55a);});});}catch(_0x1eb0dc){console['error'](_0x1eb0dc);}}}exports['SyncEventsService']=SyncEventsService;