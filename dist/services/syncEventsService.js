var a21_0x311e=['init','log','exploreDir','readdir','settings','eventFileFolder','includes','stat','StationContext','abs','ctime','getTime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','status','success/','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request'];(function(_0x5a0a55,_0x117235){var _0x1ff7bf=function(_0x51dd11){while(--_0x51dd11){_0x5a0a55['push'](_0x5a0a55['shift']());}};_0x1ff7bf(++_0x117235);}(a21_0x311e,0x151));var a21_0x43a5=function(_0xbe5345,_0xb651d7){_0xbe5345=_0xbe5345-0x0;var _0x4ae375=a21_0x311e[_0xbe5345];return _0x4ae375;};'use strict';Object[a21_0x43a5('0x0')](exports,a21_0x43a5('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x43a5('0x2'));const fs=require('fs');const request=require(a21_0x43a5('0x3'));class SyncEventsService{constructor(){}[a21_0x43a5('0x4')](){this['exploreDir'](0x0);console[a21_0x43a5('0x5')]('init\x20Sync');}[a21_0x43a5('0x6')](_0x4a6629){fs[a21_0x43a5('0x7')](stationSettings_1['StationContext'][a21_0x43a5('0x8')][a21_0x43a5('0x9')],(_0x293014,_0x49cf1d)=>{if(_0x49cf1d!=null){_0x49cf1d['forEach'](_0xcfd28=>{if(_0xcfd28[a21_0x43a5('0xa')]('.gz')){fs[a21_0x43a5('0xb')](stationSettings_1[a21_0x43a5('0xc')][a21_0x43a5('0x8')][a21_0x43a5('0x9')]+_0xcfd28,(_0x5ecc05,_0x1ea996)=>{const _0x38a067=Math[a21_0x43a5('0xd')](new Date()['getTime']()-_0x1ea996[a21_0x43a5('0xe')][a21_0x43a5('0xf')]());if(_0x38a067>0x2710){this[a21_0x43a5('0x10')](_0xcfd28);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x4a6629);},0x1388);}[a21_0x43a5('0x10')](_0x458888){const _0x1d632d=stationSettings_1[a21_0x43a5('0xc')][a21_0x43a5('0x8')][a21_0x43a5('0x9')]+_0x458888;const _0x5c2c43=stationSettings_1[a21_0x43a5('0xc')][a21_0x43a5('0x8')][a21_0x43a5('0x9')]+a21_0x43a5('0x11')+_0x458888;fs[a21_0x43a5('0x12')](_0x1d632d,_0x5c2c43,_0x3daa6f=>{if(_0x3daa6f){console[a21_0x43a5('0x5')](_0x3daa6f);}else{console[a21_0x43a5('0x5')](a21_0x43a5('0x13')+_0x5c2c43);this[a21_0x43a5('0x14')](_0x458888,_0x5c2c43);}});}[a21_0x43a5('0x14')](_0x1bb699,_0x3fc201){const _0x226edc=a21_0x43a5('0x15');const _0x38f6d8={'file':fs[a21_0x43a5('0x16')](_0x3fc201)};console[a21_0x43a5('0x5')](new Date());console[a21_0x43a5('0x5')](a21_0x43a5('0x17')+_0x226edc);console['log'](a21_0x43a5('0x18')+_0x1bb699);try{request[a21_0x43a5('0x19')]({'url':_0x226edc,'formData':_0x38f6d8},function(_0x3a64ac,_0x41d5c7,_0x40fb18){let _0x2f18b5=null;let _0x23e2de='';if(_0x3a64ac){_0x23e2de='';}else{try{console['log'](a21_0x43a5('0x1a')+_0x40fb18);_0x2f18b5=JSON['parse'](_0x40fb18);if(_0x2f18b5[a21_0x43a5('0x1b')]==0x1){_0x23e2de=a21_0x43a5('0x1c');}else{_0x23e2de='';}}catch(_0x49213b){console['error'](_0x49213b);_0x23e2de='';}}const _0x95ef06=stationSettings_1[a21_0x43a5('0xc')][a21_0x43a5('0x8')][a21_0x43a5('0x9')]+_0x23e2de+_0x1bb699;fs[a21_0x43a5('0x12')](_0x3fc201,_0x95ef06,function(_0x3a64ac){if(_0x3a64ac){console[a21_0x43a5('0x5')](_0x3a64ac);}console[a21_0x43a5('0x5')](a21_0x43a5('0x13')+_0x95ef06);});});}catch(_0x247e12){console[a21_0x43a5('0x1d')](_0x247e12);}}}exports[a21_0x43a5('0x1e')]=SyncEventsService;