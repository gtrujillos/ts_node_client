var a21_0x592f=['forEach','includes','.gz','stat','eventFileFolder','abs','ctime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','env','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','status','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings'];(function(_0x33f625,_0x426091){var _0x5e264b=function(_0x44372e){while(--_0x44372e){_0x33f625['push'](_0x33f625['shift']());}};_0x5e264b(++_0x426091);}(a21_0x592f,0xf5));var a21_0x1c59=function(_0x3de74d,_0x2b0193){_0x3de74d=_0x3de74d-0x0;var _0x299e03=a21_0x592f[_0x3de74d];return _0x299e03;};'use strict';Object[a21_0x1c59('0x0')](exports,a21_0x1c59('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x1c59('0x2'));const fs=require('fs');const request=require(a21_0x1c59('0x3'));class SyncEventsService{constructor(){}[a21_0x1c59('0x4')](){console[a21_0x1c59('0x5')](a21_0x1c59('0x6'));this[a21_0x1c59('0x7')](0x0);}[a21_0x1c59('0x7')](_0x2a2bec){fs[a21_0x1c59('0x8')](stationSettings_1[a21_0x1c59('0x9')][a21_0x1c59('0xa')]['eventFileFolder'],(_0x74fc2,_0x22a6a3)=>{if(_0x22a6a3!=null){_0x22a6a3[a21_0x1c59('0xb')](_0x4d29e5=>{if(_0x4d29e5[a21_0x1c59('0xc')](a21_0x1c59('0xd'))){fs[a21_0x1c59('0xe')](stationSettings_1['StationContext'][a21_0x1c59('0xa')][a21_0x1c59('0xf')]+_0x4d29e5,(_0x2697df,_0x315a8c)=>{const _0xad43e=Math[a21_0x1c59('0x10')](new Date()['getTime']()-_0x315a8c[a21_0x1c59('0x11')]['getTime']());if(_0xad43e>0x2710){this[a21_0x1c59('0x12')](_0x4d29e5);}});}});}});setTimeout(()=>{this[a21_0x1c59('0x7')](++_0x2a2bec);},0x1388);}[a21_0x1c59('0x12')](_0x2d42dc){const _0x334e74=stationSettings_1[a21_0x1c59('0x9')][a21_0x1c59('0xa')][a21_0x1c59('0xf')]+_0x2d42dc;const _0x11bbca=stationSettings_1[a21_0x1c59('0x9')][a21_0x1c59('0xa')][a21_0x1c59('0xf')]+a21_0x1c59('0x13')+_0x2d42dc;fs[a21_0x1c59('0x14')](_0x334e74,_0x11bbca,_0x546c7a=>{if(_0x546c7a){console[a21_0x1c59('0x5')](_0x546c7a);}else{console[a21_0x1c59('0x5')](a21_0x1c59('0x15')+_0x11bbca);this[a21_0x1c59('0x16')](_0x2d42dc,_0x11bbca);}});}[a21_0x1c59('0x16')](_0x45599a,_0xa9f040){const _0x573ae7=process[a21_0x1c59('0x17')]['WEB_SERVICE_URL']+'sync_files/upload_event';const _0x5acdd0={'file':fs[a21_0x1c59('0x18')](_0xa9f040)};console[a21_0x1c59('0x5')](new Date());console[a21_0x1c59('0x5')](a21_0x1c59('0x19')+_0x573ae7);console[a21_0x1c59('0x5')](a21_0x1c59('0x1a')+_0x45599a);try{request[a21_0x1c59('0x1b')]({'url':_0x573ae7,'formData':_0x5acdd0},function(_0x2887e6,_0x581459,_0xd60678){let _0x1642cd=null;let _0x1577fa='';if(_0x2887e6){_0x1577fa='';}else{try{console[a21_0x1c59('0x5')](a21_0x1c59('0x1c')+_0xd60678);_0x1642cd=JSON['parse'](_0xd60678);if(_0x1642cd[a21_0x1c59('0x1d')]==0x1){_0x1577fa='success/';}else{_0x1577fa='';}}catch(_0x20826b){console[a21_0x1c59('0x1e')](_0x20826b);_0x1577fa='';}}const _0x28dee1=stationSettings_1['StationContext'][a21_0x1c59('0xa')]['eventFileFolder']+_0x1577fa+_0x45599a;fs[a21_0x1c59('0x14')](_0xa9f040,_0x28dee1,function(_0x2887e6){if(_0x2887e6){console['log'](_0x2887e6);}console['log']('Successfully\x20renamed\x20'+_0x28dee1);});});}catch(_0x19fde8){console['error'](_0x19fde8);}}}exports[a21_0x1c59('0x1f')]=SyncEventsService;