var a20_0x2c13=['Successfully\x20renamed\x20','defineProperty','__esModule','init','exploreDir','log','init\x20Sync','readdir','settings','eventFileFolder','.gz','stat','StationContext','getTime','ctime','syncFile','process/','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error'];(function(_0x4fdb4a,_0x5bdeb6){var _0x2fc20f=function(_0x41f8e9){while(--_0x41f8e9){_0x4fdb4a['push'](_0x4fdb4a['shift']());}};_0x2fc20f(++_0x5bdeb6);}(a20_0x2c13,0x17a));var a20_0x2524=function(_0x5af1e9,_0x1ef3df){_0x5af1e9=_0x5af1e9-0x0;var _0x4e04ac=a20_0x2c13[_0x5af1e9];return _0x4e04ac;};'use strict';Object[a20_0x2524('0x0')](exports,a20_0x2524('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}[a20_0x2524('0x2')](){this[a20_0x2524('0x3')](0x0);console[a20_0x2524('0x4')](a20_0x2524('0x5'));}[a20_0x2524('0x3')](_0x5af471){fs[a20_0x2524('0x6')](stationSettings_1['StationContext'][a20_0x2524('0x7')][a20_0x2524('0x8')],(_0x1db954,_0x55f3e9)=>{if(_0x55f3e9!=null){_0x55f3e9['forEach'](_0x25fbc0=>{if(_0x25fbc0['includes'](a20_0x2524('0x9'))){fs[a20_0x2524('0xa')](stationSettings_1[a20_0x2524('0xb')][a20_0x2524('0x7')]['eventFileFolder']+_0x25fbc0,(_0x385b0f,_0x53b8fd)=>{const _0x259eec=Math['abs'](new Date()[a20_0x2524('0xc')]()-_0x53b8fd[a20_0x2524('0xd')][a20_0x2524('0xc')]());if(_0x259eec>0x2710){this[a20_0x2524('0xe')](_0x25fbc0);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x5af471);},0x1388);}[a20_0x2524('0xe')](_0x45651d){const _0x2091fd=stationSettings_1[a20_0x2524('0xb')]['settings']['eventFileFolder']+_0x45651d;const _0x5c7a88=stationSettings_1[a20_0x2524('0xb')][a20_0x2524('0x7')][a20_0x2524('0x8')]+a20_0x2524('0xf')+_0x45651d;fs[a20_0x2524('0x10')](_0x2091fd,_0x5c7a88,_0x83f56c=>{if(_0x83f56c){console[a20_0x2524('0x4')](_0x83f56c);}else{console[a20_0x2524('0x4')]('Successfully\x20renamed\x20'+_0x5c7a88);this[a20_0x2524('0x11')](_0x45651d,_0x5c7a88);}});}[a20_0x2524('0x11')](_0x36927d,_0xd28922){const _0x21bd5d=a20_0x2524('0x12');const _0x2ecf8e={'file':fs[a20_0x2524('0x13')](_0xd28922)};console[a20_0x2524('0x4')](new Date());console[a20_0x2524('0x4')](a20_0x2524('0x14')+_0x21bd5d);console[a20_0x2524('0x4')](a20_0x2524('0x15')+_0x36927d);try{request[a20_0x2524('0x16')]({'url':_0x21bd5d,'formData':_0x2ecf8e},function(_0x383c04,_0x224501,_0x3b023b){let _0x460d2c=null;let _0x34991e='';if(_0x383c04){_0x34991e='';}else{try{console[a20_0x2524('0x4')](a20_0x2524('0x17')+_0x3b023b);_0x460d2c=JSON[a20_0x2524('0x18')](_0x3b023b);if(_0x460d2c[a20_0x2524('0x19')]==0x1){_0x34991e=a20_0x2524('0x1a');}else{_0x34991e='';}}catch(_0x30e566){console[a20_0x2524('0x1b')](_0x30e566);_0x34991e='';}}const _0x171c55=stationSettings_1[a20_0x2524('0xb')][a20_0x2524('0x7')][a20_0x2524('0x8')]+_0x34991e+_0x36927d;fs['rename'](_0xd28922,_0x171c55,function(_0x383c04){if(_0x383c04){console[a20_0x2524('0x4')](_0x383c04);}console['log'](a20_0x2524('0x1c')+_0x171c55);});});}catch(_0x48aa2b){console[a20_0x2524('0x1b')](_0x48aa2b);}}}exports['SyncEventsService']=SyncEventsService;