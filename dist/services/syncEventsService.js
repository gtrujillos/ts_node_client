var a21_0x314e=['getTime','syncFile','eventFileFolder','process/','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','__esModule','../infrastructure/stationSettings','request','init','log','exploreDir','readdir','StationContext','settings','forEach','includes','stat','abs','ctime'];(function(_0x3b6944,_0x4630ae){var _0x546567=function(_0xede960){while(--_0xede960){_0x3b6944['push'](_0x3b6944['shift']());}};_0x546567(++_0x4630ae);}(a21_0x314e,0x1c0));var a21_0xb708=function(_0x5db0b1,_0x5d97e3){_0x5db0b1=_0x5db0b1-0x0;var _0x4cc724=a21_0x314e[_0x5db0b1];return _0x4cc724;};'use strict';Object['defineProperty'](exports,a21_0xb708('0x0'),{'value':!![]});const stationSettings_1=require(a21_0xb708('0x1'));const fs=require('fs');const request=require(a21_0xb708('0x2'));class SyncEventsService{constructor(){}[a21_0xb708('0x3')](){console[a21_0xb708('0x4')]('init\x20SyncEventsService');this[a21_0xb708('0x5')](0x0);}[a21_0xb708('0x5')](_0x2c4df0){fs[a21_0xb708('0x6')](stationSettings_1[a21_0xb708('0x7')][a21_0xb708('0x8')]['eventFileFolder'],(_0x40e269,_0x518dc6)=>{if(_0x518dc6!=null){_0x518dc6[a21_0xb708('0x9')](_0x54a37f=>{if(_0x54a37f[a21_0xb708('0xa')]('.gz')){fs[a21_0xb708('0xb')](stationSettings_1[a21_0xb708('0x7')][a21_0xb708('0x8')]['eventFileFolder']+_0x54a37f,(_0x53ed64,_0x333fa4)=>{const _0x372bde=Math[a21_0xb708('0xc')](new Date()['getTime']()-_0x333fa4[a21_0xb708('0xd')][a21_0xb708('0xe')]());if(_0x372bde>0x2710){this[a21_0xb708('0xf')](_0x54a37f);}});}});}});setTimeout(()=>{this[a21_0xb708('0x5')](++_0x2c4df0);},0x1388);}[a21_0xb708('0xf')](_0x26bb8d){const _0x242e70=stationSettings_1['StationContext'][a21_0xb708('0x8')][a21_0xb708('0x10')]+_0x26bb8d;const _0x10a666=stationSettings_1[a21_0xb708('0x7')][a21_0xb708('0x8')][a21_0xb708('0x10')]+a21_0xb708('0x11')+_0x26bb8d;fs[a21_0xb708('0x12')](_0x242e70,_0x10a666,_0xaadda=>{if(_0xaadda){console['log'](_0xaadda);}else{console[a21_0xb708('0x4')](a21_0xb708('0x13')+_0x10a666);this['sendFile'](_0x26bb8d,_0x10a666);}});}[a21_0xb708('0x14')](_0x5976ac,_0x4c6011){const _0x2889ed=process[a21_0xb708('0x15')][a21_0xb708('0x16')]+a21_0xb708('0x17');const _0x3d2fb2={'file':fs['createReadStream'](_0x4c6011)};console['log'](new Date());console[a21_0xb708('0x4')](a21_0xb708('0x18')+_0x2889ed);console[a21_0xb708('0x4')](a21_0xb708('0x19')+_0x5976ac);try{request[a21_0xb708('0x1a')]({'url':_0x2889ed,'formData':_0x3d2fb2},function(_0x3bf2f0,_0x242368,_0x200ef7){let _0x2acb8c=null;let _0x429a0e='';if(_0x3bf2f0){_0x429a0e='';}else{try{console[a21_0xb708('0x4')](a21_0xb708('0x1b')+_0x200ef7);_0x2acb8c=JSON[a21_0xb708('0x1c')](_0x200ef7);if(_0x2acb8c[a21_0xb708('0x1d')]==0x1){_0x429a0e=a21_0xb708('0x1e');}else{_0x429a0e='';}}catch(_0x864287){console[a21_0xb708('0x1f')](_0x864287);_0x429a0e='';}}const _0x49eddb=stationSettings_1[a21_0xb708('0x7')][a21_0xb708('0x8')][a21_0xb708('0x10')]+_0x429a0e+_0x5976ac;fs['rename'](_0x4c6011,_0x49eddb,function(_0x3bf2f0){if(_0x3bf2f0){console[a21_0xb708('0x4')](_0x3bf2f0);}console[a21_0xb708('0x4')](a21_0xb708('0x13')+_0x49eddb);});});}catch(_0x2b7211){console[a21_0xb708('0x1f')](_0x2b7211);}}}exports[a21_0xb708('0x20')]=SyncEventsService;