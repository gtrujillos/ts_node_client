var a21_0x4c19=['getTime','ctime','syncFile','process/','rename','log','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','parse','status','success/','error','Successfully\x20renamed\x20','SyncEventsService','__esModule','../infrastructure/stationSettings','request','init','exploreDir','init\x20Sync','readdir','StationContext','settings','forEach','includes','.gz','stat','eventFileFolder'];(function(_0x37dbaf,_0x12465c){var _0x2787e0=function(_0x2987e1){while(--_0x2987e1){_0x37dbaf['push'](_0x37dbaf['shift']());}};_0x2787e0(++_0x12465c);}(a21_0x4c19,0x172));var a21_0x4c7a=function(_0x3e2330,_0x1944ef){_0x3e2330=_0x3e2330-0x0;var _0x4ae63e=a21_0x4c19[_0x3e2330];return _0x4ae63e;};'use strict';Object['defineProperty'](exports,a21_0x4c7a('0x0'),{'value':!![]});const stationSettings_1=require(a21_0x4c7a('0x1'));const fs=require('fs');const request=require(a21_0x4c7a('0x2'));class SyncEventsService{constructor(){}[a21_0x4c7a('0x3')](){this[a21_0x4c7a('0x4')](0x0);console['log'](a21_0x4c7a('0x5'));}[a21_0x4c7a('0x4')](_0x509100){fs[a21_0x4c7a('0x6')](stationSettings_1[a21_0x4c7a('0x7')][a21_0x4c7a('0x8')]['eventFileFolder'],(_0x4e37cf,_0x44dd98)=>{if(_0x44dd98!=null){_0x44dd98[a21_0x4c7a('0x9')](_0x371b04=>{if(_0x371b04[a21_0x4c7a('0xa')](a21_0x4c7a('0xb'))){fs[a21_0x4c7a('0xc')](stationSettings_1[a21_0x4c7a('0x7')][a21_0x4c7a('0x8')][a21_0x4c7a('0xd')]+_0x371b04,(_0x188dd9,_0x5987a6)=>{const _0x57bdcd=Math['abs'](new Date()[a21_0x4c7a('0xe')]()-_0x5987a6[a21_0x4c7a('0xf')][a21_0x4c7a('0xe')]());if(_0x57bdcd>0x2710){this[a21_0x4c7a('0x10')](_0x371b04);}});}});}});setTimeout(()=>{this[a21_0x4c7a('0x4')](++_0x509100);},0x1388);}[a21_0x4c7a('0x10')](_0x2e4cd6){const _0x2c0fdc=stationSettings_1[a21_0x4c7a('0x7')][a21_0x4c7a('0x8')][a21_0x4c7a('0xd')]+_0x2e4cd6;const _0x4e833b=stationSettings_1['StationContext'][a21_0x4c7a('0x8')][a21_0x4c7a('0xd')]+a21_0x4c7a('0x11')+_0x2e4cd6;fs[a21_0x4c7a('0x12')](_0x2c0fdc,_0x4e833b,_0x561ed0=>{if(_0x561ed0){console[a21_0x4c7a('0x13')](_0x561ed0);}else{console[a21_0x4c7a('0x13')]('Successfully\x20renamed\x20'+_0x4e833b);this['sendFile'](_0x2e4cd6,_0x4e833b);}});}[a21_0x4c7a('0x14')](_0x2cd823,_0x460ea1){const _0x4e3c71=process[a21_0x4c7a('0x15')][a21_0x4c7a('0x16')]+a21_0x4c7a('0x17');const _0x156ed8={'file':fs[a21_0x4c7a('0x18')](_0x460ea1)};console[a21_0x4c7a('0x13')](new Date());console[a21_0x4c7a('0x13')](a21_0x4c7a('0x19')+_0x4e3c71);console['log']('Sending\x20file:\x20'+_0x2cd823);try{request['post']({'url':_0x4e3c71,'formData':_0x156ed8},function(_0x78418,_0x5b678d,_0x350f29){let _0x161a4b=null;let _0xae8a22='';if(_0x78418){_0xae8a22='';}else{try{console[a21_0x4c7a('0x13')]('Response\x20body:\x20'+_0x350f29);_0x161a4b=JSON[a21_0x4c7a('0x1a')](_0x350f29);if(_0x161a4b[a21_0x4c7a('0x1b')]==0x1){_0xae8a22=a21_0x4c7a('0x1c');}else{_0xae8a22='';}}catch(_0x321e65){console[a21_0x4c7a('0x1d')](_0x321e65);_0xae8a22='';}}const _0x1523c9=stationSettings_1[a21_0x4c7a('0x7')][a21_0x4c7a('0x8')][a21_0x4c7a('0xd')]+_0xae8a22+_0x2cd823;fs[a21_0x4c7a('0x12')](_0x460ea1,_0x1523c9,function(_0x78418){if(_0x78418){console[a21_0x4c7a('0x13')](_0x78418);}console[a21_0x4c7a('0x13')](a21_0x4c7a('0x1e')+_0x1523c9);});});}catch(_0x3a4f7f){console[a21_0x4c7a('0x1d')](_0x3a4f7f);}}}exports[a21_0x4c7a('0x1f')]=SyncEventsService;