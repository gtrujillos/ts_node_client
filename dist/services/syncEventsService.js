var a22_0x24dd=['eventFileFolder','forEach','includes','.gz','stat','StationContext','settings','abs','getTime','ctime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','defineProperty','../infrastructure/stationSettings','request','init','log','exploreDir','readdir'];(function(_0x310822,_0x359902){var _0x50ed66=function(_0x54bc21){while(--_0x54bc21){_0x310822['push'](_0x310822['shift']());}};_0x50ed66(++_0x359902);}(a22_0x24dd,0x109));var a22_0x64f0=function(_0x347593,_0x22628e){_0x347593=_0x347593-0x0;var _0x23560a=a22_0x24dd[_0x347593];return _0x23560a;};'use strict';Object[a22_0x64f0('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a22_0x64f0('0x1'));const fs=require('fs');const request=require(a22_0x64f0('0x2'));class SyncEventsService{constructor(){}[a22_0x64f0('0x3')](){console[a22_0x64f0('0x4')]('init\x20SyncEventsService');this[a22_0x64f0('0x5')](0x0);}[a22_0x64f0('0x5')](_0x5bda5f){fs[a22_0x64f0('0x6')](stationSettings_1['StationContext']['settings'][a22_0x64f0('0x7')],(_0x399504,_0x868905)=>{if(_0x868905!=null){_0x868905[a22_0x64f0('0x8')](_0x1c58b5=>{if(_0x1c58b5[a22_0x64f0('0x9')](a22_0x64f0('0xa'))){fs[a22_0x64f0('0xb')](stationSettings_1[a22_0x64f0('0xc')][a22_0x64f0('0xd')][a22_0x64f0('0x7')]+_0x1c58b5,(_0xee2291,_0x4e1cea)=>{const _0x3b58a2=Math[a22_0x64f0('0xe')](new Date()[a22_0x64f0('0xf')]()-_0x4e1cea[a22_0x64f0('0x10')][a22_0x64f0('0xf')]());if(_0x3b58a2>0x2710){this[a22_0x64f0('0x11')](_0x1c58b5);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x5bda5f);},0x1388);}[a22_0x64f0('0x11')](_0x99f4e2){const _0x14cfa0=stationSettings_1['StationContext'][a22_0x64f0('0xd')]['eventFileFolder']+_0x99f4e2;const _0x2388eb=stationSettings_1[a22_0x64f0('0xc')][a22_0x64f0('0xd')][a22_0x64f0('0x7')]+a22_0x64f0('0x12')+_0x99f4e2;fs[a22_0x64f0('0x13')](_0x14cfa0,_0x2388eb,_0x367d36=>{if(_0x367d36){console[a22_0x64f0('0x4')](_0x367d36);}else{console[a22_0x64f0('0x4')](a22_0x64f0('0x14')+_0x2388eb);this[a22_0x64f0('0x15')](_0x99f4e2,_0x2388eb);}});}[a22_0x64f0('0x15')](_0x4d9c8e,_0x212082){const _0x100bef=process[a22_0x64f0('0x16')][a22_0x64f0('0x17')]+'sync_files/upload_event';const _0x15f4fe={'file':fs[a22_0x64f0('0x18')](_0x212082)};console[a22_0x64f0('0x4')](new Date());console['log'](a22_0x64f0('0x19')+_0x100bef);console[a22_0x64f0('0x4')](a22_0x64f0('0x1a')+_0x4d9c8e);try{request[a22_0x64f0('0x1b')]({'url':_0x100bef,'formData':_0x15f4fe},function(_0x42fa4e,_0x1b4cbd,_0x167a33){let _0x8d6725=null;let _0x177f9c='';if(_0x42fa4e){_0x177f9c='';}else{try{console[a22_0x64f0('0x4')](a22_0x64f0('0x1c')+_0x167a33);_0x8d6725=JSON[a22_0x64f0('0x1d')](_0x167a33);if(_0x8d6725[a22_0x64f0('0x1e')]==0x1){_0x177f9c=a22_0x64f0('0x1f');}else{_0x177f9c='';}}catch(_0x4d307c){console[a22_0x64f0('0x20')](_0x4d307c);_0x177f9c='';}}const _0x3855dd=stationSettings_1[a22_0x64f0('0xc')][a22_0x64f0('0xd')][a22_0x64f0('0x7')]+_0x177f9c+_0x4d9c8e;fs[a22_0x64f0('0x13')](_0x212082,_0x3855dd,function(_0x42fa4e){if(_0x42fa4e){console[a22_0x64f0('0x4')](_0x42fa4e);}console[a22_0x64f0('0x4')]('Successfully\x20renamed\x20'+_0x3855dd);});});}catch(_0x712ac2){console[a22_0x64f0('0x20')](_0x712ac2);}}}exports[a22_0x64f0('0x21')]=SyncEventsService;