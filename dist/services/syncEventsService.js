var a22_0x373a=['init','log','init\x20SyncEventsService','exploreDir','StationContext','eventFileFolder','forEach','includes','.gz','settings','abs','getTime','ctime','syncFile','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','error','SyncEventsService','defineProperty','request'];(function(_0x580ce9,_0xb4359c){var _0x187cea=function(_0xe09fa8){while(--_0xe09fa8){_0x580ce9['push'](_0x580ce9['shift']());}};_0x187cea(++_0xb4359c);}(a22_0x373a,0x153));var a22_0x5c44=function(_0x2cae92,_0x42f1f8){_0x2cae92=_0x2cae92-0x0;var _0x1777a5=a22_0x373a[_0x2cae92];return _0x1777a5;};'use strict';Object[a22_0x5c44('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a22_0x5c44('0x1'));class SyncEventsService{constructor(){}[a22_0x5c44('0x2')](){console[a22_0x5c44('0x3')](a22_0x5c44('0x4'));this[a22_0x5c44('0x5')](0x0);}[a22_0x5c44('0x5')](_0x2be635){fs['readdir'](stationSettings_1[a22_0x5c44('0x6')]['settings'][a22_0x5c44('0x7')],(_0xc3c1f3,_0x4896da)=>{if(_0x4896da!=null){_0x4896da[a22_0x5c44('0x8')](_0x2a4993=>{if(_0x2a4993[a22_0x5c44('0x9')](a22_0x5c44('0xa'))){fs['stat'](stationSettings_1[a22_0x5c44('0x6')][a22_0x5c44('0xb')][a22_0x5c44('0x7')]+_0x2a4993,(_0x2d518a,_0x263864)=>{const _0x2e47bd=Math[a22_0x5c44('0xc')](new Date()[a22_0x5c44('0xd')]()-_0x263864[a22_0x5c44('0xe')]['getTime']());if(_0x2e47bd>0x2710){this[a22_0x5c44('0xf')](_0x2a4993);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x2be635);},0x1388);}[a22_0x5c44('0xf')](_0x38de96){const _0xd5b117=stationSettings_1[a22_0x5c44('0x6')][a22_0x5c44('0xb')][a22_0x5c44('0x7')]+_0x38de96;const _0x5b3f8a=stationSettings_1['StationContext'][a22_0x5c44('0xb')]['eventFileFolder']+'process/'+_0x38de96;fs[a22_0x5c44('0x10')](_0xd5b117,_0x5b3f8a,_0x32916f=>{if(_0x32916f){console[a22_0x5c44('0x3')](_0x32916f);}else{console[a22_0x5c44('0x3')](a22_0x5c44('0x11')+_0x5b3f8a);this[a22_0x5c44('0x12')](_0x38de96,_0x5b3f8a);}});}[a22_0x5c44('0x12')](_0x3a7c30,_0x57549f){const _0x237e28=process[a22_0x5c44('0x13')][a22_0x5c44('0x14')]+a22_0x5c44('0x15');const _0x3652c4={'file':fs[a22_0x5c44('0x16')](_0x57549f)};console[a22_0x5c44('0x3')](new Date());console['log'](a22_0x5c44('0x17')+_0x237e28);console[a22_0x5c44('0x3')](a22_0x5c44('0x18')+_0x3a7c30);try{request[a22_0x5c44('0x19')]({'url':_0x237e28,'formData':_0x3652c4},function(_0x1f0e81,_0x429ef3,_0x4ebc63){let _0xd70eff=null;let _0x145277='';if(_0x1f0e81){_0x145277='';}else{try{console['log'](a22_0x5c44('0x1a')+_0x4ebc63);_0xd70eff=JSON[a22_0x5c44('0x1b')](_0x4ebc63);if(_0xd70eff[a22_0x5c44('0x1c')]==0x1){_0x145277='success/';}else{_0x145277='';}}catch(_0x4d58aa){console[a22_0x5c44('0x1d')](_0x4d58aa);_0x145277='';}}const _0x6b849f=stationSettings_1[a22_0x5c44('0x6')][a22_0x5c44('0xb')][a22_0x5c44('0x7')]+_0x145277+_0x3a7c30;fs[a22_0x5c44('0x10')](_0x57549f,_0x6b849f,function(_0x1f0e81){if(_0x1f0e81){console[a22_0x5c44('0x3')](_0x1f0e81);}console['log'](a22_0x5c44('0x11')+_0x6b849f);});});}catch(_0x320d81){console[a22_0x5c44('0x1d')](_0x320d81);}}}exports[a22_0x5c44('0x1e')]=SyncEventsService;