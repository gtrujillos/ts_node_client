var a21_0x412d=['forEach','StationContext','abs','getTime','ctime','syncFile','process/','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','Sending\x20file:\x20','post','parse','status','rename','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','exploreDir','log','settings','eventFileFolder'];(function(_0x2699a9,_0x501e82){var _0x5b6c40=function(_0xa3de42){while(--_0xa3de42){_0x2699a9['push'](_0x2699a9['shift']());}};_0x5b6c40(++_0x501e82);}(a21_0x412d,0x1a7));var a21_0x1b37=function(_0x1b538d,_0x2851f6){_0x1b538d=_0x1b538d-0x0;var _0x3c3866=a21_0x412d[_0x1b538d];return _0x3c3866;};'use strict';Object[a21_0x1b37('0x0')](exports,a21_0x1b37('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x1b37('0x2'));const fs=require('fs');const request=require(a21_0x1b37('0x3'));class SyncEventsService{constructor(){}[a21_0x1b37('0x4')](){this[a21_0x1b37('0x5')](0x0);console[a21_0x1b37('0x6')]('init\x20Sync');}[a21_0x1b37('0x5')](_0x1edf51){fs['readdir'](stationSettings_1['StationContext'][a21_0x1b37('0x7')][a21_0x1b37('0x8')],(_0x312a0f,_0x3d352f)=>{if(_0x3d352f!=null){_0x3d352f[a21_0x1b37('0x9')](_0x2b2a71=>{if(_0x2b2a71['includes']('.gz')){fs['stat'](stationSettings_1[a21_0x1b37('0xa')][a21_0x1b37('0x7')][a21_0x1b37('0x8')]+_0x2b2a71,(_0x4ebf11,_0x98c505)=>{const _0x1410e5=Math[a21_0x1b37('0xb')](new Date()[a21_0x1b37('0xc')]()-_0x98c505[a21_0x1b37('0xd')][a21_0x1b37('0xc')]());if(_0x1410e5>0x2710){this[a21_0x1b37('0xe')](_0x2b2a71);}});}});}});setTimeout(()=>{this[a21_0x1b37('0x5')](++_0x1edf51);},0x1388);}[a21_0x1b37('0xe')](_0x506c59){const _0x5eba61=stationSettings_1['StationContext']['settings'][a21_0x1b37('0x8')]+_0x506c59;const _0x4296c3=stationSettings_1[a21_0x1b37('0xa')]['settings']['eventFileFolder']+a21_0x1b37('0xf')+_0x506c59;fs['rename'](_0x5eba61,_0x4296c3,_0x3b72be=>{if(_0x3b72be){console[a21_0x1b37('0x6')](_0x3b72be);}else{console[a21_0x1b37('0x6')](a21_0x1b37('0x10')+_0x4296c3);this[a21_0x1b37('0x11')](_0x506c59,_0x4296c3);}});}[a21_0x1b37('0x11')](_0x37c7b7,_0x4ea3b9){const _0x522584=a21_0x1b37('0x12');const _0x487586={'file':fs[a21_0x1b37('0x13')](_0x4ea3b9)};console['log'](new Date());console[a21_0x1b37('0x6')]('serviceUrl:\x20'+_0x522584);console[a21_0x1b37('0x6')](a21_0x1b37('0x14')+_0x37c7b7);try{request[a21_0x1b37('0x15')]({'url':_0x522584,'formData':_0x487586},function(_0x44c652,_0x540418,_0x594396){let _0x122f20=null;let _0x294915='';if(_0x44c652){_0x294915='';}else{try{console['log']('Response\x20body:\x20'+_0x594396);_0x122f20=JSON[a21_0x1b37('0x16')](_0x594396);if(_0x122f20[a21_0x1b37('0x17')]==0x1){_0x294915='success/';}else{_0x294915='';}}catch(_0x3e862){console['error'](_0x3e862);_0x294915='';}}const _0xf25b42=stationSettings_1[a21_0x1b37('0xa')]['settings'][a21_0x1b37('0x8')]+_0x294915+_0x37c7b7;fs[a21_0x1b37('0x18')](_0x4ea3b9,_0xf25b42,function(_0x44c652){if(_0x44c652){console[a21_0x1b37('0x6')](_0x44c652);}console[a21_0x1b37('0x6')](a21_0x1b37('0x10')+_0xf25b42);});});}catch(_0x3561f7){console[a21_0x1b37('0x19')](_0x3561f7);}}}exports[a21_0x1b37('0x1a')]=SyncEventsService;