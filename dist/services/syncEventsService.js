var a21_0x17fe=['createReadStream','serviceUrl:\x20','Sending\x20file:\x20','Response\x20body:\x20','parse','error','Successfully\x20renamed\x20','__esModule','../infrastructure/stationSettings','request','init','log','exploreDir','readdir','StationContext','settings','eventFileFolder','forEach','includes','.gz','stat','getTime','ctime','syncFile','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event'];(function(_0x3f87e0,_0x3eb8a9){var _0x427a1a=function(_0x35c410){while(--_0x35c410){_0x3f87e0['push'](_0x3f87e0['shift']());}};_0x427a1a(++_0x3eb8a9);}(a21_0x17fe,0xa9));var a21_0x2b01=function(_0x33e8b2,_0x190f83){_0x33e8b2=_0x33e8b2-0x0;var _0x2ee4a3=a21_0x17fe[_0x33e8b2];return _0x2ee4a3;};'use strict';Object['defineProperty'](exports,a21_0x2b01('0x0'),{'value':!![]});const stationSettings_1=require(a21_0x2b01('0x1'));const fs=require('fs');const request=require(a21_0x2b01('0x2'));class SyncEventsService{constructor(){}[a21_0x2b01('0x3')](){this['exploreDir'](0x0);console[a21_0x2b01('0x4')]('init\x20Sync');}[a21_0x2b01('0x5')](_0x1cdaaf){fs[a21_0x2b01('0x6')](stationSettings_1[a21_0x2b01('0x7')][a21_0x2b01('0x8')][a21_0x2b01('0x9')],(_0x52fcb8,_0x12f597)=>{if(_0x12f597!=null){_0x12f597[a21_0x2b01('0xa')](_0xbb6102=>{if(_0xbb6102[a21_0x2b01('0xb')](a21_0x2b01('0xc'))){fs[a21_0x2b01('0xd')](stationSettings_1[a21_0x2b01('0x7')][a21_0x2b01('0x8')][a21_0x2b01('0x9')]+_0xbb6102,(_0x105c46,_0x10c286)=>{const _0x2eb137=Math['abs'](new Date()[a21_0x2b01('0xe')]()-_0x10c286[a21_0x2b01('0xf')][a21_0x2b01('0xe')]());if(_0x2eb137>0x2710){this['syncFile'](_0xbb6102);}});}});}});setTimeout(()=>{this[a21_0x2b01('0x5')](++_0x1cdaaf);},0x1388);}[a21_0x2b01('0x10')](_0x3c7b89){const _0x4535df=stationSettings_1[a21_0x2b01('0x7')][a21_0x2b01('0x8')]['eventFileFolder']+_0x3c7b89;const _0x58be51=stationSettings_1[a21_0x2b01('0x7')]['settings'][a21_0x2b01('0x9')]+'process/'+_0x3c7b89;fs[a21_0x2b01('0x11')](_0x4535df,_0x58be51,_0x28e0ca=>{if(_0x28e0ca){console[a21_0x2b01('0x4')](_0x28e0ca);}else{console[a21_0x2b01('0x4')]('Successfully\x20renamed\x20'+_0x58be51);this['sendFile'](_0x3c7b89,_0x58be51);}});}[a21_0x2b01('0x12')](_0x5352cc,_0x163ac7){const _0xd9689a=a21_0x2b01('0x13');const _0x1e5d9d={'file':fs[a21_0x2b01('0x14')](_0x163ac7)};console[a21_0x2b01('0x4')](new Date());console[a21_0x2b01('0x4')](a21_0x2b01('0x15')+_0xd9689a);console[a21_0x2b01('0x4')](a21_0x2b01('0x16')+_0x5352cc);try{request['post']({'url':_0xd9689a,'formData':_0x1e5d9d},function(_0x5af19b,_0x1a9f38,_0x3fe870){let _0x3e73fb=null;let _0x6047c0='';if(_0x5af19b){_0x6047c0='';}else{try{console[a21_0x2b01('0x4')](a21_0x2b01('0x17')+_0x3fe870);_0x3e73fb=JSON[a21_0x2b01('0x18')](_0x3fe870);if(_0x3e73fb['status']==0x1){_0x6047c0='success/';}else{_0x6047c0='';}}catch(_0x5cb2f6){console[a21_0x2b01('0x19')](_0x5cb2f6);_0x6047c0='';}}const _0x1d8084=stationSettings_1['StationContext'][a21_0x2b01('0x8')][a21_0x2b01('0x9')]+_0x6047c0+_0x5352cc;fs[a21_0x2b01('0x11')](_0x163ac7,_0x1d8084,function(_0x5af19b){if(_0x5af19b){console[a21_0x2b01('0x4')](_0x5af19b);}console[a21_0x2b01('0x4')](a21_0x2b01('0x1a')+_0x1d8084);});});}catch(_0x191713){console['error'](_0x191713);}}}exports['SyncEventsService']=SyncEventsService;