var a21_0x1bac=['Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','error','defineProperty','__esModule','../infrastructure/stationSettings','request','log','init\x20SyncEventsService','exploreDir','StationContext','settings','eventFileFolder','forEach','.gz','stat','abs','getTime','ctime','syncFile','process/','rename'];(function(_0x5436e4,_0x1be813){var _0x1e7038=function(_0x12f059){while(--_0x12f059){_0x5436e4['push'](_0x5436e4['shift']());}};_0x1e7038(++_0x1be813);}(a21_0x1bac,0xa7));var a21_0x5bb4=function(_0x159d12,_0x358b44){_0x159d12=_0x159d12-0x0;var _0x1d4aad=a21_0x1bac[_0x159d12];return _0x1d4aad;};'use strict';Object[a21_0x5bb4('0x0')](exports,a21_0x5bb4('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x5bb4('0x2'));const fs=require('fs');const request=require(a21_0x5bb4('0x3'));class SyncEventsService{constructor(){}['init'](){console[a21_0x5bb4('0x4')](a21_0x5bb4('0x5'));this[a21_0x5bb4('0x6')](0x0);}[a21_0x5bb4('0x6')](_0x53ff9f){fs['readdir'](stationSettings_1[a21_0x5bb4('0x7')][a21_0x5bb4('0x8')][a21_0x5bb4('0x9')],(_0x4dff21,_0x5e32e7)=>{if(_0x5e32e7!=null){_0x5e32e7[a21_0x5bb4('0xa')](_0x8c9907=>{if(_0x8c9907['includes'](a21_0x5bb4('0xb'))){fs[a21_0x5bb4('0xc')](stationSettings_1[a21_0x5bb4('0x7')][a21_0x5bb4('0x8')][a21_0x5bb4('0x9')]+_0x8c9907,(_0x5914eb,_0x4d5fc3)=>{const _0x1f3d7e=Math[a21_0x5bb4('0xd')](new Date()[a21_0x5bb4('0xe')]()-_0x4d5fc3[a21_0x5bb4('0xf')][a21_0x5bb4('0xe')]());if(_0x1f3d7e>0x2710){this['syncFile'](_0x8c9907);}});}});}});setTimeout(()=>{this[a21_0x5bb4('0x6')](++_0x53ff9f);},0x1388);}[a21_0x5bb4('0x10')](_0xa20b5c){const _0x1feb1d=stationSettings_1[a21_0x5bb4('0x7')][a21_0x5bb4('0x8')][a21_0x5bb4('0x9')]+_0xa20b5c;const _0x36f26d=stationSettings_1[a21_0x5bb4('0x7')][a21_0x5bb4('0x8')][a21_0x5bb4('0x9')]+a21_0x5bb4('0x11')+_0xa20b5c;fs[a21_0x5bb4('0x12')](_0x1feb1d,_0x36f26d,_0x144271=>{if(_0x144271){console[a21_0x5bb4('0x4')](_0x144271);}else{console[a21_0x5bb4('0x4')](a21_0x5bb4('0x13')+_0x36f26d);this[a21_0x5bb4('0x14')](_0xa20b5c,_0x36f26d);}});}[a21_0x5bb4('0x14')](_0x3649d2,_0x16e490){const _0x254598=process[a21_0x5bb4('0x15')][a21_0x5bb4('0x16')]+a21_0x5bb4('0x17');const _0x2fdf11={'file':fs['createReadStream'](_0x16e490)};console['log'](new Date());console['log'](a21_0x5bb4('0x18')+_0x254598);console[a21_0x5bb4('0x4')](a21_0x5bb4('0x19')+_0x3649d2);try{request[a21_0x5bb4('0x1a')]({'url':_0x254598,'formData':_0x2fdf11},function(_0x5dcab7,_0x2c4440,_0x4aa8a5){let _0x4c29a7=null;let _0x2c12da='';if(_0x5dcab7){_0x2c12da='';}else{try{console['log'](a21_0x5bb4('0x1b')+_0x4aa8a5);_0x4c29a7=JSON[a21_0x5bb4('0x1c')](_0x4aa8a5);if(_0x4c29a7[a21_0x5bb4('0x1d')]==0x1){_0x2c12da='success/';}else{_0x2c12da='';}}catch(_0x23bc34){console[a21_0x5bb4('0x1e')](_0x23bc34);_0x2c12da='';}}const _0x8ad645=stationSettings_1[a21_0x5bb4('0x7')][a21_0x5bb4('0x8')][a21_0x5bb4('0x9')]+_0x2c12da+_0x3649d2;fs[a21_0x5bb4('0x12')](_0x16e490,_0x8ad645,function(_0x5dcab7){if(_0x5dcab7){console[a21_0x5bb4('0x4')](_0x5dcab7);}console[a21_0x5bb4('0x4')](a21_0x5bb4('0x13')+_0x8ad645);});});}catch(_0x1d18e9){console['error'](_0x1d18e9);}}}exports['SyncEventsService']=SyncEventsService;