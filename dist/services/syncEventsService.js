var a21_0x5b92=['getTime','syncFile','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','parse','status','success/','error','SyncEventsService','defineProperty','__esModule','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','eventFileFolder','forEach','includes','abs'];(function(_0x4c4829,_0x278e5f){var _0x1b592b=function(_0x287bca){while(--_0x287bca){_0x4c4829['push'](_0x4c4829['shift']());}};_0x1b592b(++_0x278e5f);}(a21_0x5b92,0x15a));var a21_0x5d21=function(_0xada746,_0x1da5b6){_0xada746=_0xada746-0x0;var _0x4af3aa=a21_0x5b92[_0xada746];return _0x4af3aa;};'use strict';Object[a21_0x5d21('0x0')](exports,a21_0x5d21('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a21_0x5d21('0x2'));class SyncEventsService{constructor(){}[a21_0x5d21('0x3')](){console[a21_0x5d21('0x4')](a21_0x5d21('0x5'));this[a21_0x5d21('0x6')](0x0);}[a21_0x5d21('0x6')](_0x267f69){fs[a21_0x5d21('0x7')](stationSettings_1[a21_0x5d21('0x8')][a21_0x5d21('0x9')][a21_0x5d21('0xa')],(_0x444623,_0x4405ca)=>{if(_0x4405ca!=null){_0x4405ca[a21_0x5d21('0xb')](_0x2a63eb=>{if(_0x2a63eb[a21_0x5d21('0xc')]('.gz')){fs['stat'](stationSettings_1[a21_0x5d21('0x8')][a21_0x5d21('0x9')][a21_0x5d21('0xa')]+_0x2a63eb,(_0x45f52e,_0x1da414)=>{const _0x2366d9=Math[a21_0x5d21('0xd')](new Date()[a21_0x5d21('0xe')]()-_0x1da414['ctime'][a21_0x5d21('0xe')]());if(_0x2366d9>0x2710){this[a21_0x5d21('0xf')](_0x2a63eb);}});}});}});setTimeout(()=>{this[a21_0x5d21('0x6')](++_0x267f69);},0x1388);}[a21_0x5d21('0xf')](_0x2cd389){const _0x27a28f=stationSettings_1[a21_0x5d21('0x8')]['settings'][a21_0x5d21('0xa')]+_0x2cd389;const _0x10cf0e=stationSettings_1['StationContext']['settings'][a21_0x5d21('0xa')]+'process/'+_0x2cd389;fs[a21_0x5d21('0x10')](_0x27a28f,_0x10cf0e,_0x5d5c0d=>{if(_0x5d5c0d){console['log'](_0x5d5c0d);}else{console[a21_0x5d21('0x4')](a21_0x5d21('0x11')+_0x10cf0e);this[a21_0x5d21('0x12')](_0x2cd389,_0x10cf0e);}});}[a21_0x5d21('0x12')](_0x3e082b,_0x397b42){const _0x34ddda=process[a21_0x5d21('0x13')][a21_0x5d21('0x14')]+a21_0x5d21('0x15');const _0x1a7726={'file':fs[a21_0x5d21('0x16')](_0x397b42)};console[a21_0x5d21('0x4')](new Date());console[a21_0x5d21('0x4')](a21_0x5d21('0x17')+_0x34ddda);console[a21_0x5d21('0x4')](a21_0x5d21('0x18')+_0x3e082b);try{request['post']({'url':_0x34ddda,'formData':_0x1a7726},function(_0x22f7cc,_0x1acd21,_0x3cc2b9){let _0x3d6109=null;let _0xfc2cbb='';if(_0x22f7cc){_0xfc2cbb='';}else{try{console[a21_0x5d21('0x4')]('Response\x20body:\x20'+_0x3cc2b9);_0x3d6109=JSON[a21_0x5d21('0x19')](_0x3cc2b9);if(_0x3d6109[a21_0x5d21('0x1a')]==0x1){_0xfc2cbb=a21_0x5d21('0x1b');}else{_0xfc2cbb='';}}catch(_0x22390e){console[a21_0x5d21('0x1c')](_0x22390e);_0xfc2cbb='';}}const _0x425ab4=stationSettings_1[a21_0x5d21('0x8')][a21_0x5d21('0x9')]['eventFileFolder']+_0xfc2cbb+_0x3e082b;fs[a21_0x5d21('0x10')](_0x397b42,_0x425ab4,function(_0x22f7cc){if(_0x22f7cc){console[a21_0x5d21('0x4')](_0x22f7cc);}console[a21_0x5d21('0x4')](a21_0x5d21('0x11')+_0x425ab4);});});}catch(_0x5ba2a1){console[a21_0x5d21('0x1c')](_0x5ba2a1);}}}exports[a21_0x5d21('0x1d')]=SyncEventsService;