var a21_0x1826=['sendFile','Sending\x20file:\x20','post','Response\x20body:\x20','parse','error','Successfully\x20renamed\x20','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','exploreDir','log','init\x20Sync','StationContext','eventFileFolder','includes','.gz','stat','settings','abs','getTime','syncFile','process/','rename'];(function(_0x221060,_0xab0710){var _0x5095bb=function(_0x4b0995){while(--_0x4b0995){_0x221060['push'](_0x221060['shift']());}};_0x5095bb(++_0xab0710);}(a21_0x1826,0xa4));var a21_0x3d45=function(_0x5067ba,_0x33645c){_0x5067ba=_0x5067ba-0x0;var _0x1a7a9b=a21_0x1826[_0x5067ba];return _0x1a7a9b;};'use strict';Object[a21_0x3d45('0x0')](exports,a21_0x3d45('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x3d45('0x2'));const fs=require('fs');const request=require(a21_0x3d45('0x3'));class SyncEventsService{constructor(){}['init'](){this[a21_0x3d45('0x4')](0x0);console[a21_0x3d45('0x5')](a21_0x3d45('0x6'));}[a21_0x3d45('0x4')](_0x3f6232){fs['readdir'](stationSettings_1[a21_0x3d45('0x7')]['settings'][a21_0x3d45('0x8')],(_0x4eaf71,_0x4d0479)=>{if(_0x4d0479!=null){_0x4d0479['forEach'](_0x4d7933=>{if(_0x4d7933[a21_0x3d45('0x9')](a21_0x3d45('0xa'))){fs[a21_0x3d45('0xb')](stationSettings_1[a21_0x3d45('0x7')][a21_0x3d45('0xc')][a21_0x3d45('0x8')]+_0x4d7933,(_0x1e5c87,_0xba2aad)=>{const _0x87c1e7=Math[a21_0x3d45('0xd')](new Date()[a21_0x3d45('0xe')]()-_0xba2aad['ctime'][a21_0x3d45('0xe')]());if(_0x87c1e7>0x2710){this['syncFile'](_0x4d7933);}});}});}});setTimeout(()=>{this[a21_0x3d45('0x4')](++_0x3f6232);},0x1388);}[a21_0x3d45('0xf')](_0x2f08d5){const _0xacd077=stationSettings_1[a21_0x3d45('0x7')][a21_0x3d45('0xc')]['eventFileFolder']+_0x2f08d5;const _0x5bc606=stationSettings_1[a21_0x3d45('0x7')]['settings'][a21_0x3d45('0x8')]+a21_0x3d45('0x10')+_0x2f08d5;fs[a21_0x3d45('0x11')](_0xacd077,_0x5bc606,_0x30b70b=>{if(_0x30b70b){console[a21_0x3d45('0x5')](_0x30b70b);}else{console['log']('Successfully\x20renamed\x20'+_0x5bc606);this[a21_0x3d45('0x12')](_0x2f08d5,_0x5bc606);}});}[a21_0x3d45('0x12')](_0x522e85,_0x5edfc7){const _0x4dd1c3='http://restapi.passcontrol.co/sync_files/upload_event';const _0x625aba={'file':fs['createReadStream'](_0x5edfc7)};console[a21_0x3d45('0x5')](new Date());console['log']('serviceUrl:\x20'+_0x4dd1c3);console[a21_0x3d45('0x5')](a21_0x3d45('0x13')+_0x522e85);try{request[a21_0x3d45('0x14')]({'url':_0x4dd1c3,'formData':_0x625aba},function(_0x17557e,_0x4b7680,_0x5bab10){let _0x4e2763=null;let _0x613e53='';if(_0x17557e){_0x613e53='';}else{try{console[a21_0x3d45('0x5')](a21_0x3d45('0x15')+_0x5bab10);_0x4e2763=JSON[a21_0x3d45('0x16')](_0x5bab10);if(_0x4e2763['status']==0x1){_0x613e53='success/';}else{_0x613e53='';}}catch(_0x2fe8ed){console[a21_0x3d45('0x17')](_0x2fe8ed);_0x613e53='';}}const _0x5e1966=stationSettings_1[a21_0x3d45('0x7')][a21_0x3d45('0xc')][a21_0x3d45('0x8')]+_0x613e53+_0x522e85;fs[a21_0x3d45('0x11')](_0x5edfc7,_0x5e1966,function(_0x17557e){if(_0x17557e){console[a21_0x3d45('0x5')](_0x17557e);}console[a21_0x3d45('0x5')](a21_0x3d45('0x18')+_0x5e1966);});});}catch(_0x3b1bf6){console[a21_0x3d45('0x17')](_0x3b1bf6);}}}exports[a21_0x3d45('0x19')]=SyncEventsService;