var a24_0x2082=['ctime','process/','rename','Successfully\x20renamed\x20','sendFile','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','defineProperty','request','init','log','init\x20SyncEventsService','exploreDir','StationContext','eventFileFolder','forEach','includes','.gz','settings','abs','getTime'];(function(_0x4f6e27,_0x268511){var _0x610403=function(_0xdb3d85){while(--_0xdb3d85){_0x4f6e27['push'](_0x4f6e27['shift']());}};_0x610403(++_0x268511);}(a24_0x2082,0x166));var a24_0x2b74=function(_0x4dcc77,_0xb7300e){_0x4dcc77=_0x4dcc77-0x0;var _0x692d3e=a24_0x2082[_0x4dcc77];return _0x692d3e;};'use strict';Object[a24_0x2b74('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a24_0x2b74('0x1'));class SyncEventsService{constructor(){}[a24_0x2b74('0x2')](){console[a24_0x2b74('0x3')](a24_0x2b74('0x4'));this[a24_0x2b74('0x5')](0x0);}[a24_0x2b74('0x5')](_0x271808){fs['readdir'](stationSettings_1[a24_0x2b74('0x6')]['settings'][a24_0x2b74('0x7')],(_0x451138,_0x4144ed)=>{if(_0x4144ed!=null){_0x4144ed[a24_0x2b74('0x8')](_0x32e88c=>{if(_0x32e88c[a24_0x2b74('0x9')](a24_0x2b74('0xa'))){fs['stat'](stationSettings_1['StationContext'][a24_0x2b74('0xb')][a24_0x2b74('0x7')]+_0x32e88c,(_0x38a22c,_0x5ec84d)=>{const _0x5a61ac=Math[a24_0x2b74('0xc')](new Date()[a24_0x2b74('0xd')]()-_0x5ec84d[a24_0x2b74('0xe')]['getTime']());if(_0x5a61ac>0x2710){this['syncFile'](_0x32e88c);}});}});}});setTimeout(()=>{this[a24_0x2b74('0x5')](++_0x271808);},0x1388);}['syncFile'](_0x490ea2){const _0x5aa52f=stationSettings_1['StationContext'][a24_0x2b74('0xb')]['eventFileFolder']+_0x490ea2;const _0x431be8=stationSettings_1[a24_0x2b74('0x6')]['settings'][a24_0x2b74('0x7')]+a24_0x2b74('0xf')+_0x490ea2;fs[a24_0x2b74('0x10')](_0x5aa52f,_0x431be8,_0x43bfeb=>{if(_0x43bfeb){console[a24_0x2b74('0x3')](_0x43bfeb);}else{console[a24_0x2b74('0x3')](a24_0x2b74('0x11')+_0x431be8);this[a24_0x2b74('0x12')](_0x490ea2,_0x431be8);}});}[a24_0x2b74('0x12')](_0x71535d,_0x45cd80){const _0x3c54c8=process['env'][a24_0x2b74('0x13')]+a24_0x2b74('0x14');const _0x59f207={'file':fs[a24_0x2b74('0x15')](_0x45cd80)};console[a24_0x2b74('0x3')](new Date());console['log'](a24_0x2b74('0x16')+_0x3c54c8);console[a24_0x2b74('0x3')](a24_0x2b74('0x17')+_0x71535d);try{request[a24_0x2b74('0x18')]({'url':_0x3c54c8,'formData':_0x59f207},function(_0x2c26ac,_0x12d339,_0x61ec9f){let _0x263b07=null;let _0x16490a='';if(_0x2c26ac){_0x16490a='';}else{try{console[a24_0x2b74('0x3')](a24_0x2b74('0x19')+_0x61ec9f);_0x263b07=JSON[a24_0x2b74('0x1a')](_0x61ec9f);if(_0x263b07[a24_0x2b74('0x1b')]==0x1){_0x16490a=a24_0x2b74('0x1c');}else{_0x16490a='';}}catch(_0x5c69c5){console[a24_0x2b74('0x1d')](_0x5c69c5);_0x16490a='';}}const _0x109a9c=stationSettings_1[a24_0x2b74('0x6')][a24_0x2b74('0xb')][a24_0x2b74('0x7')]+_0x16490a+_0x71535d;fs[a24_0x2b74('0x10')](_0x45cd80,_0x109a9c,function(_0x2c26ac){if(_0x2c26ac){console[a24_0x2b74('0x3')](_0x2c26ac);}console[a24_0x2b74('0x3')]('Successfully\x20renamed\x20'+_0x109a9c);});});}catch(_0x3679ed){console['error'](_0x3679ed);}}}exports[a24_0x2b74('0x1e')]=SyncEventsService;