var a21_0x1c21=['init','log','init\x20SyncEventsService','exploreDir','StationContext','eventFileFolder','includes','.gz','stat','settings','abs','getTime','syncFile','rename','Successfully\x20renamed\x20','sendFile','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','status','success/','error','defineProperty','__esModule','../infrastructure/stationSettings','request'];(function(_0x2f3e31,_0x3a89c9){var _0x2c6db2=function(_0x1fa352){while(--_0x1fa352){_0x2f3e31['push'](_0x2f3e31['shift']());}};_0x2c6db2(++_0x3a89c9);}(a21_0x1c21,0x1a0));var a21_0x53c2=function(_0x2972d7,_0x2c7553){_0x2972d7=_0x2972d7-0x0;var _0x34181f=a21_0x1c21[_0x2972d7];return _0x34181f;};'use strict';Object[a21_0x53c2('0x0')](exports,a21_0x53c2('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x53c2('0x2'));const fs=require('fs');const request=require(a21_0x53c2('0x3'));class SyncEventsService{constructor(){}[a21_0x53c2('0x4')](){console[a21_0x53c2('0x5')](a21_0x53c2('0x6'));this[a21_0x53c2('0x7')](0x0);}[a21_0x53c2('0x7')](_0x4d4a49){fs['readdir'](stationSettings_1[a21_0x53c2('0x8')]['settings'][a21_0x53c2('0x9')],(_0x3b9c54,_0x96d2bc)=>{if(_0x96d2bc!=null){_0x96d2bc['forEach'](_0x4961d6=>{if(_0x4961d6[a21_0x53c2('0xa')](a21_0x53c2('0xb'))){fs[a21_0x53c2('0xc')](stationSettings_1['StationContext'][a21_0x53c2('0xd')]['eventFileFolder']+_0x4961d6,(_0xb0fc24,_0x40739b)=>{const _0x1eca44=Math[a21_0x53c2('0xe')](new Date()[a21_0x53c2('0xf')]()-_0x40739b['ctime']['getTime']());if(_0x1eca44>0x2710){this['syncFile'](_0x4961d6);}});}});}});setTimeout(()=>{this[a21_0x53c2('0x7')](++_0x4d4a49);},0x1388);}[a21_0x53c2('0x10')](_0x52c277){const _0x2fb169=stationSettings_1[a21_0x53c2('0x8')]['settings'][a21_0x53c2('0x9')]+_0x52c277;const _0x45ba50=stationSettings_1['StationContext'][a21_0x53c2('0xd')][a21_0x53c2('0x9')]+'process/'+_0x52c277;fs[a21_0x53c2('0x11')](_0x2fb169,_0x45ba50,_0x8ad61d=>{if(_0x8ad61d){console[a21_0x53c2('0x5')](_0x8ad61d);}else{console[a21_0x53c2('0x5')](a21_0x53c2('0x12')+_0x45ba50);this[a21_0x53c2('0x13')](_0x52c277,_0x45ba50);}});}[a21_0x53c2('0x13')](_0x12b23b,_0x465d8d){const _0x46264d=process['env'][a21_0x53c2('0x14')]+a21_0x53c2('0x15');const _0x122e40={'file':fs[a21_0x53c2('0x16')](_0x465d8d)};console[a21_0x53c2('0x5')](new Date());console[a21_0x53c2('0x5')](a21_0x53c2('0x17')+_0x46264d);console[a21_0x53c2('0x5')](a21_0x53c2('0x18')+_0x12b23b);try{request[a21_0x53c2('0x19')]({'url':_0x46264d,'formData':_0x122e40},function(_0x3e51b4,_0x45b799,_0x4b6b15){let _0x4863bd=null;let _0x373b06='';if(_0x3e51b4){_0x373b06='';}else{try{console[a21_0x53c2('0x5')](a21_0x53c2('0x1a')+_0x4b6b15);_0x4863bd=JSON['parse'](_0x4b6b15);if(_0x4863bd[a21_0x53c2('0x1b')]==0x1){_0x373b06=a21_0x53c2('0x1c');}else{_0x373b06='';}}catch(_0x22e873){console[a21_0x53c2('0x1d')](_0x22e873);_0x373b06='';}}const _0x20a5b0=stationSettings_1[a21_0x53c2('0x8')][a21_0x53c2('0xd')][a21_0x53c2('0x9')]+_0x373b06+_0x12b23b;fs[a21_0x53c2('0x11')](_0x465d8d,_0x20a5b0,function(_0x3e51b4){if(_0x3e51b4){console[a21_0x53c2('0x5')](_0x3e51b4);}console[a21_0x53c2('0x5')](a21_0x53c2('0x12')+_0x20a5b0);});});}catch(_0x9eaaa1){console[a21_0x53c2('0x1d')](_0x9eaaa1);}}}exports['SyncEventsService']=SyncEventsService;