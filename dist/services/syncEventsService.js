var a25_0x3c82=['error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','forEach','includes','.gz','stat','eventFileFolder','getTime','ctime','syncFile','rename','log','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','Sending\x20file:\x20','post','Response\x20body:\x20','status','success/'];(function(_0x5835bc,_0x5a577d){var _0x524944=function(_0x2128b5){while(--_0x2128b5){_0x5835bc['push'](_0x5835bc['shift']());}};_0x524944(++_0x5a577d);}(a25_0x3c82,0x12b));var a25_0xa087=function(_0x83958c,_0xc60544){_0x83958c=_0x83958c-0x0;var _0x45802b=a25_0x3c82[_0x83958c];return _0x45802b;};'use strict';Object[a25_0xa087('0x0')](exports,a25_0xa087('0x1'),{'value':!![]});const stationSettings_1=require(a25_0xa087('0x2'));const fs=require('fs');const request=require(a25_0xa087('0x3'));class SyncEventsService{constructor(){}[a25_0xa087('0x4')](){console['log'](a25_0xa087('0x5'));this[a25_0xa087('0x6')](0x0);}[a25_0xa087('0x6')](_0x3e08c5){fs[a25_0xa087('0x7')](stationSettings_1[a25_0xa087('0x8')][a25_0xa087('0x9')]['eventFileFolder'],(_0x390ae2,_0x35bc5f)=>{if(_0x35bc5f!=null){_0x35bc5f[a25_0xa087('0xa')](_0x4d688c=>{if(_0x4d688c[a25_0xa087('0xb')](a25_0xa087('0xc'))){fs[a25_0xa087('0xd')](stationSettings_1[a25_0xa087('0x8')][a25_0xa087('0x9')][a25_0xa087('0xe')]+_0x4d688c,(_0x481979,_0x328583)=>{const _0x3cdd53=Math['abs'](new Date()[a25_0xa087('0xf')]()-_0x328583[a25_0xa087('0x10')][a25_0xa087('0xf')]());if(_0x3cdd53>0x2710){this[a25_0xa087('0x11')](_0x4d688c);}});}});}});setTimeout(()=>{this[a25_0xa087('0x6')](++_0x3e08c5);},0x1388);}[a25_0xa087('0x11')](_0x229887){const _0xa3adc8=stationSettings_1['StationContext']['settings'][a25_0xa087('0xe')]+_0x229887;const _0x118a74=stationSettings_1[a25_0xa087('0x8')]['settings'][a25_0xa087('0xe')]+'process/'+_0x229887;fs[a25_0xa087('0x12')](_0xa3adc8,_0x118a74,_0x916a32=>{if(_0x916a32){console[a25_0xa087('0x13')](_0x916a32);}else{console[a25_0xa087('0x13')](a25_0xa087('0x14')+_0x118a74);this[a25_0xa087('0x15')](_0x229887,_0x118a74);}});}['sendFile'](_0x26e021,_0x42d7e4){const _0x45b9d6=process[a25_0xa087('0x16')][a25_0xa087('0x17')]+a25_0xa087('0x18');const _0x24a57b={'file':fs[a25_0xa087('0x19')](_0x42d7e4)};console[a25_0xa087('0x13')](new Date());console[a25_0xa087('0x13')]('serviceUrl:\x20'+_0x45b9d6);console[a25_0xa087('0x13')](a25_0xa087('0x1a')+_0x26e021);try{request[a25_0xa087('0x1b')]({'url':_0x45b9d6,'formData':_0x24a57b},function(_0x42db98,_0x378da8,_0x1682a4){let _0x575cca=null;let _0x30efc6='';if(_0x42db98){_0x30efc6='';}else{try{console[a25_0xa087('0x13')](a25_0xa087('0x1c')+_0x1682a4);_0x575cca=JSON['parse'](_0x1682a4);if(_0x575cca[a25_0xa087('0x1d')]==0x1){_0x30efc6=a25_0xa087('0x1e');}else{_0x30efc6='';}}catch(_0x388fab){console[a25_0xa087('0x1f')](_0x388fab);_0x30efc6='';}}const _0xdf237d=stationSettings_1[a25_0xa087('0x8')]['settings'][a25_0xa087('0xe')]+_0x30efc6+_0x26e021;fs[a25_0xa087('0x12')](_0x42d7e4,_0xdf237d,function(_0x42db98){if(_0x42db98){console['log'](_0x42db98);}console[a25_0xa087('0x13')](a25_0xa087('0x14')+_0xdf237d);});});}catch(_0x2e911d){console[a25_0xa087('0x1f')](_0x2e911d);}}}exports[a25_0xa087('0x20')]=SyncEventsService;