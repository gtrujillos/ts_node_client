var a21_0x5a53=['eventFileFolder','abs','ctime','getTime','StationContext','process/','rename','Successfully\x20renamed\x20','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','log','init\x20SyncEventsService','exploreDir','readdir','forEach','includes','.gz','settings'];(function(_0x1c5fe4,_0x2cf774){var _0x5ae84e=function(_0x46089f){while(--_0x46089f){_0x1c5fe4['push'](_0x1c5fe4['shift']());}};_0x5ae84e(++_0x2cf774);}(a21_0x5a53,0x174));var a21_0x3a65=function(_0x14d3fa,_0x259888){_0x14d3fa=_0x14d3fa-0x0;var _0x16c311=a21_0x5a53[_0x14d3fa];return _0x16c311;};'use strict';Object[a21_0x3a65('0x0')](exports,a21_0x3a65('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x3a65('0x2'));const fs=require('fs');const request=require(a21_0x3a65('0x3'));class SyncEventsService{constructor(){}[a21_0x3a65('0x4')](){console[a21_0x3a65('0x5')](a21_0x3a65('0x6'));this[a21_0x3a65('0x7')](0x0);}[a21_0x3a65('0x7')](_0x4c86fa){fs[a21_0x3a65('0x8')](stationSettings_1['StationContext']['settings']['eventFileFolder'],(_0x43a5f1,_0x1aedd0)=>{if(_0x1aedd0!=null){_0x1aedd0[a21_0x3a65('0x9')](_0x354f96=>{if(_0x354f96[a21_0x3a65('0xa')](a21_0x3a65('0xb'))){fs['stat'](stationSettings_1['StationContext'][a21_0x3a65('0xc')][a21_0x3a65('0xd')]+_0x354f96,(_0x2f3128,_0x34fd70)=>{const _0x28918a=Math[a21_0x3a65('0xe')](new Date()['getTime']()-_0x34fd70[a21_0x3a65('0xf')][a21_0x3a65('0x10')]());if(_0x28918a>0x2710){this['syncFile'](_0x354f96);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x4c86fa);},0x1388);}['syncFile'](_0x19a88e){const _0x598dee=stationSettings_1[a21_0x3a65('0x11')][a21_0x3a65('0xc')][a21_0x3a65('0xd')]+_0x19a88e;const _0x222dc7=stationSettings_1[a21_0x3a65('0x11')][a21_0x3a65('0xc')][a21_0x3a65('0xd')]+a21_0x3a65('0x12')+_0x19a88e;fs[a21_0x3a65('0x13')](_0x598dee,_0x222dc7,_0x1e0fca=>{if(_0x1e0fca){console[a21_0x3a65('0x5')](_0x1e0fca);}else{console[a21_0x3a65('0x5')](a21_0x3a65('0x14')+_0x222dc7);this[a21_0x3a65('0x15')](_0x19a88e,_0x222dc7);}});}['sendFile'](_0x18fc18,_0x252510){const _0x47791c=process[a21_0x3a65('0x16')][a21_0x3a65('0x17')]+a21_0x3a65('0x18');const _0x2372bd={'file':fs[a21_0x3a65('0x19')](_0x252510)};console[a21_0x3a65('0x5')](new Date());console[a21_0x3a65('0x5')](a21_0x3a65('0x1a')+_0x47791c);console['log'](a21_0x3a65('0x1b')+_0x18fc18);try{request[a21_0x3a65('0x1c')]({'url':_0x47791c,'formData':_0x2372bd},function(_0xfb661a,_0x5edbe9,_0x4d3b9c){let _0x56a95c=null;let _0xcd12a1='';if(_0xfb661a){_0xcd12a1='';}else{try{console[a21_0x3a65('0x5')](a21_0x3a65('0x1d')+_0x4d3b9c);_0x56a95c=JSON[a21_0x3a65('0x1e')](_0x4d3b9c);if(_0x56a95c[a21_0x3a65('0x1f')]==0x1){_0xcd12a1=a21_0x3a65('0x20');}else{_0xcd12a1='';}}catch(_0x1c68c4){console[a21_0x3a65('0x21')](_0x1c68c4);_0xcd12a1='';}}const _0x67eed=stationSettings_1[a21_0x3a65('0x11')][a21_0x3a65('0xc')][a21_0x3a65('0xd')]+_0xcd12a1+_0x18fc18;fs[a21_0x3a65('0x13')](_0x252510,_0x67eed,function(_0xfb661a){if(_0xfb661a){console['log'](_0xfb661a);}console[a21_0x3a65('0x5')](a21_0x3a65('0x14')+_0x67eed);});});}catch(_0x4f98a7){console[a21_0x3a65('0x21')](_0x4f98a7);}}}exports[a21_0x3a65('0x22')]=SyncEventsService;