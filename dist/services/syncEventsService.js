var a24_0x2850=['ctime','syncFile','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','Successfully\x20renamed\x20','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','eventFileFolder','includes','.gz','stat','settings','getTime'];(function(_0x17a09e,_0x1f1db5){var _0x5856e2=function(_0x3f9879){while(--_0x3f9879){_0x17a09e['push'](_0x17a09e['shift']());}};_0x5856e2(++_0x1f1db5);}(a24_0x2850,0x184));var a24_0x50b8=function(_0x13b725,_0x32d8c2){_0x13b725=_0x13b725-0x0;var _0xc02987=a24_0x2850[_0x13b725];return _0xc02987;};'use strict';Object[a24_0x50b8('0x0')](exports,a24_0x50b8('0x1'),{'value':!![]});const stationSettings_1=require(a24_0x50b8('0x2'));const fs=require('fs');const request=require(a24_0x50b8('0x3'));class SyncEventsService{constructor(){}['init'](){console[a24_0x50b8('0x4')](a24_0x50b8('0x5'));this['exploreDir'](0x0);}[a24_0x50b8('0x6')](_0x1b3896){fs[a24_0x50b8('0x7')](stationSettings_1[a24_0x50b8('0x8')]['settings'][a24_0x50b8('0x9')],(_0x2da73a,_0x4a457e)=>{if(_0x4a457e!=null){_0x4a457e['forEach'](_0x5709ed=>{if(_0x5709ed[a24_0x50b8('0xa')](a24_0x50b8('0xb'))){fs[a24_0x50b8('0xc')](stationSettings_1[a24_0x50b8('0x8')][a24_0x50b8('0xd')][a24_0x50b8('0x9')]+_0x5709ed,(_0x5edca8,_0xae0e7c)=>{const _0x4343b6=Math['abs'](new Date()[a24_0x50b8('0xe')]()-_0xae0e7c[a24_0x50b8('0xf')][a24_0x50b8('0xe')]());if(_0x4343b6>0x2710){this[a24_0x50b8('0x10')](_0x5709ed);}});}});}});setTimeout(()=>{this[a24_0x50b8('0x6')](++_0x1b3896);},0x1388);}['syncFile'](_0x89c630){const _0x2ca96f=stationSettings_1[a24_0x50b8('0x8')][a24_0x50b8('0xd')][a24_0x50b8('0x9')]+_0x89c630;const _0x188ad5=stationSettings_1[a24_0x50b8('0x8')]['settings']['eventFileFolder']+'process/'+_0x89c630;fs['rename'](_0x2ca96f,_0x188ad5,_0x4db68e=>{if(_0x4db68e){console[a24_0x50b8('0x4')](_0x4db68e);}else{console['log']('Successfully\x20renamed\x20'+_0x188ad5);this[a24_0x50b8('0x11')](_0x89c630,_0x188ad5);}});}['sendFile'](_0x481508,_0x32112b){const _0x1b670e=process[a24_0x50b8('0x12')][a24_0x50b8('0x13')]+a24_0x50b8('0x14');const _0x31cfd2={'file':fs[a24_0x50b8('0x15')](_0x32112b)};console[a24_0x50b8('0x4')](new Date());console[a24_0x50b8('0x4')](a24_0x50b8('0x16')+_0x1b670e);console['log'](a24_0x50b8('0x17')+_0x481508);try{request[a24_0x50b8('0x18')]({'url':_0x1b670e,'formData':_0x31cfd2},function(_0xde8248,_0x4d9f58,_0x54b305){let _0x151c04=null;let _0x468d45='';if(_0xde8248){_0x468d45='';}else{try{console[a24_0x50b8('0x4')](a24_0x50b8('0x19')+_0x54b305);_0x151c04=JSON[a24_0x50b8('0x1a')](_0x54b305);if(_0x151c04[a24_0x50b8('0x1b')]==0x1){_0x468d45='success/';}else{_0x468d45='';}}catch(_0x58954){console['error'](_0x58954);_0x468d45='';}}const _0x32c2a1=stationSettings_1[a24_0x50b8('0x8')][a24_0x50b8('0xd')][a24_0x50b8('0x9')]+_0x468d45+_0x481508;fs['rename'](_0x32112b,_0x32c2a1,function(_0xde8248){if(_0xde8248){console[a24_0x50b8('0x4')](_0xde8248);}console[a24_0x50b8('0x4')](a24_0x50b8('0x1c')+_0x32c2a1);});});}catch(_0x8d121f){console[a24_0x50b8('0x1d')](_0x8d121f);}}}exports[a24_0x50b8('0x1e')]=SyncEventsService;