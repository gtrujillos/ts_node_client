var a20_0x150c=['stat','abs','getTime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','createReadStream','serviceUrl:\x20','post','Response\x20body:\x20','parse','success/','error','SyncEventsService','defineProperty','__esModule','request','init','log','init\x20Sync','readdir','StationContext','settings','eventFileFolder','forEach','includes','.gz'];(function(_0xc2ca29,_0x47984b){var _0x46c4f3=function(_0x4701d4){while(--_0x4701d4){_0xc2ca29['push'](_0xc2ca29['shift']());}};_0x46c4f3(++_0x47984b);}(a20_0x150c,0xf8));var a20_0x1f2a=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a20_0x150c[_0x2d8f05];return _0x4d74cb;};'use strict';Object[a20_0x1f2a('0x0')](exports,a20_0x1f2a('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a20_0x1f2a('0x2'));class SyncEventsService{constructor(){}[a20_0x1f2a('0x3')](){this['exploreDir'](0x0);console[a20_0x1f2a('0x4')](a20_0x1f2a('0x5'));}['exploreDir'](_0x2252ef){fs[a20_0x1f2a('0x6')](stationSettings_1[a20_0x1f2a('0x7')][a20_0x1f2a('0x8')][a20_0x1f2a('0x9')],(_0x58d8e6,_0x111377)=>{if(_0x111377!=null){_0x111377[a20_0x1f2a('0xa')](_0x51a8ba=>{if(_0x51a8ba[a20_0x1f2a('0xb')](a20_0x1f2a('0xc'))){fs[a20_0x1f2a('0xd')](stationSettings_1[a20_0x1f2a('0x7')]['settings']['eventFileFolder']+_0x51a8ba,(_0x5be46c,_0x2f030e)=>{const _0x53a2fe=Math[a20_0x1f2a('0xe')](new Date()[a20_0x1f2a('0xf')]()-_0x2f030e['ctime']['getTime']());if(_0x53a2fe>0x2710){this[a20_0x1f2a('0x10')](_0x51a8ba);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x2252ef);},0x1388);}[a20_0x1f2a('0x10')](_0x4b906d){const _0x4f04ec=stationSettings_1[a20_0x1f2a('0x7')][a20_0x1f2a('0x8')][a20_0x1f2a('0x9')]+_0x4b906d;const _0x37fc63=stationSettings_1['StationContext'][a20_0x1f2a('0x8')]['eventFileFolder']+a20_0x1f2a('0x11')+_0x4b906d;fs[a20_0x1f2a('0x12')](_0x4f04ec,_0x37fc63,_0x46fdb0=>{if(_0x46fdb0){console['log'](_0x46fdb0);}else{console[a20_0x1f2a('0x4')](a20_0x1f2a('0x13')+_0x37fc63);this[a20_0x1f2a('0x14')](_0x4b906d,_0x37fc63);}});}[a20_0x1f2a('0x14')](_0x5e4264,_0x342684){const _0x4b3626='http://restapi.passcontrol.co/sync_files/upload_event';const _0x46e0d2={'file':fs[a20_0x1f2a('0x15')](_0x342684)};console[a20_0x1f2a('0x4')](new Date());console['log'](a20_0x1f2a('0x16')+_0x4b3626);console[a20_0x1f2a('0x4')]('Sending\x20file:\x20'+_0x5e4264);try{request[a20_0x1f2a('0x17')]({'url':_0x4b3626,'formData':_0x46e0d2},function(_0x254cae,_0x1d5b65,_0x530ecd){let _0x4f55a9=null;let _0x496f89='';if(_0x254cae){_0x496f89='';}else{try{console['log'](a20_0x1f2a('0x18')+_0x530ecd);_0x4f55a9=JSON[a20_0x1f2a('0x19')](_0x530ecd);if(_0x4f55a9['status']==0x1){_0x496f89=a20_0x1f2a('0x1a');}else{_0x496f89='';}}catch(_0x2d5e5f){console[a20_0x1f2a('0x1b')](_0x2d5e5f);_0x496f89='';}}const _0x3044dd=stationSettings_1[a20_0x1f2a('0x7')][a20_0x1f2a('0x8')]['eventFileFolder']+_0x496f89+_0x5e4264;fs[a20_0x1f2a('0x12')](_0x342684,_0x3044dd,function(_0x254cae){if(_0x254cae){console[a20_0x1f2a('0x4')](_0x254cae);}console[a20_0x1f2a('0x4')](a20_0x1f2a('0x13')+_0x3044dd);});});}catch(_0xfb7ef4){console[a20_0x1f2a('0x1b')](_0xfb7ef4);}}}exports[a20_0x1f2a('0x1c')]=SyncEventsService;