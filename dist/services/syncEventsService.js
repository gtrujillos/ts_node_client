var a21_0x52ec=['serviceUrl:\x20','post','Response\x20body:\x20','parse','status','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','exploreDir','log','init\x20Sync','readdir','StationContext','settings','eventFileFolder','forEach','includes','.gz','stat','getTime','ctime','syncFile','process/','rename','Successfully\x20renamed\x20','sendFile','createReadStream'];(function(_0x30a9cd,_0x23f849){var _0x3c6e99=function(_0x2f040e){while(--_0x2f040e){_0x30a9cd['push'](_0x30a9cd['shift']());}};_0x3c6e99(++_0x23f849);}(a21_0x52ec,0x1d8));var a21_0x39e0=function(_0x496c29,_0x588529){_0x496c29=_0x496c29-0x0;var _0x3daa32=a21_0x52ec[_0x496c29];return _0x3daa32;};'use strict';Object[a21_0x39e0('0x0')](exports,a21_0x39e0('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x39e0('0x2'));const fs=require('fs');const request=require(a21_0x39e0('0x3'));class SyncEventsService{constructor(){}[a21_0x39e0('0x4')](){this[a21_0x39e0('0x5')](0x0);console[a21_0x39e0('0x6')](a21_0x39e0('0x7'));}['exploreDir'](_0x2b20d4){fs[a21_0x39e0('0x8')](stationSettings_1[a21_0x39e0('0x9')][a21_0x39e0('0xa')][a21_0x39e0('0xb')],(_0x30b944,_0x23c629)=>{if(_0x23c629!=null){_0x23c629[a21_0x39e0('0xc')](_0x1765d1=>{if(_0x1765d1[a21_0x39e0('0xd')](a21_0x39e0('0xe'))){fs[a21_0x39e0('0xf')](stationSettings_1[a21_0x39e0('0x9')]['settings']['eventFileFolder']+_0x1765d1,(_0x21372d,_0x2d586f)=>{const _0x4b888e=Math['abs'](new Date()[a21_0x39e0('0x10')]()-_0x2d586f[a21_0x39e0('0x11')]['getTime']());if(_0x4b888e>0x2710){this[a21_0x39e0('0x12')](_0x1765d1);}});}});}});setTimeout(()=>{this[a21_0x39e0('0x5')](++_0x2b20d4);},0x1388);}[a21_0x39e0('0x12')](_0x86faeb){const _0x1eabda=stationSettings_1[a21_0x39e0('0x9')]['settings']['eventFileFolder']+_0x86faeb;const _0x574328=stationSettings_1[a21_0x39e0('0x9')][a21_0x39e0('0xa')]['eventFileFolder']+a21_0x39e0('0x13')+_0x86faeb;fs[a21_0x39e0('0x14')](_0x1eabda,_0x574328,_0x59b087=>{if(_0x59b087){console[a21_0x39e0('0x6')](_0x59b087);}else{console[a21_0x39e0('0x6')](a21_0x39e0('0x15')+_0x574328);this[a21_0x39e0('0x16')](_0x86faeb,_0x574328);}});}['sendFile'](_0x2b0272,_0x54ed9a){const _0x1bed3c='http://restapi.passcontrol.co/sync_files/upload_event';const _0x1e3cbc={'file':fs[a21_0x39e0('0x17')](_0x54ed9a)};console['log'](new Date());console[a21_0x39e0('0x6')](a21_0x39e0('0x18')+_0x1bed3c);console[a21_0x39e0('0x6')]('Sending\x20file:\x20'+_0x2b0272);try{request[a21_0x39e0('0x19')]({'url':_0x1bed3c,'formData':_0x1e3cbc},function(_0x406887,_0xb458f9,_0x5718a7){let _0x1f6527=null;let _0x3a2a0a='';if(_0x406887){_0x3a2a0a='';}else{try{console[a21_0x39e0('0x6')](a21_0x39e0('0x1a')+_0x5718a7);_0x1f6527=JSON[a21_0x39e0('0x1b')](_0x5718a7);if(_0x1f6527[a21_0x39e0('0x1c')]==0x1){_0x3a2a0a='success/';}else{_0x3a2a0a='';}}catch(_0x4b960f){console['error'](_0x4b960f);_0x3a2a0a='';}}const _0x4ce10e=stationSettings_1['StationContext'][a21_0x39e0('0xa')][a21_0x39e0('0xb')]+_0x3a2a0a+_0x2b0272;fs['rename'](_0x54ed9a,_0x4ce10e,function(_0x406887){if(_0x406887){console[a21_0x39e0('0x6')](_0x406887);}console[a21_0x39e0('0x6')]('Successfully\x20renamed\x20'+_0x4ce10e);});});}catch(_0x411f1d){console[a21_0x39e0('0x1d')](_0x411f1d);}}}exports[a21_0x39e0('0x1e')]=SyncEventsService;