var a20_0x1e21=['sendFile','http://restapi.passcontrol.co/sync_files/upload_event','serviceUrl:\x20','post','Response\x20body:\x20','status','success/','error','defineProperty','__esModule','../infrastructure/stationSettings','request','init','exploreDir','log','readdir','settings','eventFileFolder','forEach','includes','abs','getTime','ctime','syncFile','StationContext','process/','rename','Successfully\x20renamed\x20'];(function(_0x562fdd,_0x3872cd){var _0x5d907b=function(_0x4c8d3d){while(--_0x4c8d3d){_0x562fdd['push'](_0x562fdd['shift']());}};_0x5d907b(++_0x3872cd);}(a20_0x1e21,0x190));var a20_0x4597=function(_0x381a94,_0x44df8e){_0x381a94=_0x381a94-0x0;var _0x30b187=a20_0x1e21[_0x381a94];return _0x30b187;};'use strict';Object[a20_0x4597('0x0')](exports,a20_0x4597('0x1'),{'value':!![]});const stationSettings_1=require(a20_0x4597('0x2'));const fs=require('fs');const request=require(a20_0x4597('0x3'));class SyncEventsService{constructor(){}[a20_0x4597('0x4')](){this[a20_0x4597('0x5')](0x0);console[a20_0x4597('0x6')]('init\x20Sync');}[a20_0x4597('0x5')](_0x5b2b85){fs[a20_0x4597('0x7')](stationSettings_1['StationContext'][a20_0x4597('0x8')][a20_0x4597('0x9')],(_0x37fe4c,_0x54c0a3)=>{if(_0x54c0a3!=null){_0x54c0a3[a20_0x4597('0xa')](_0x479a03=>{if(_0x479a03[a20_0x4597('0xb')]('.gz')){fs['stat'](stationSettings_1['StationContext'][a20_0x4597('0x8')]['eventFileFolder']+_0x479a03,(_0x25e472,_0x598a7d)=>{const _0x36cca7=Math[a20_0x4597('0xc')](new Date()[a20_0x4597('0xd')]()-_0x598a7d[a20_0x4597('0xe')][a20_0x4597('0xd')]());if(_0x36cca7>0x2710){this[a20_0x4597('0xf')](_0x479a03);}});}});}});setTimeout(()=>{this[a20_0x4597('0x5')](++_0x5b2b85);},0x1388);}[a20_0x4597('0xf')](_0x5561f2){const _0x2e95f2=stationSettings_1[a20_0x4597('0x10')][a20_0x4597('0x8')][a20_0x4597('0x9')]+_0x5561f2;const _0x4a84fc=stationSettings_1[a20_0x4597('0x10')][a20_0x4597('0x8')][a20_0x4597('0x9')]+a20_0x4597('0x11')+_0x5561f2;fs[a20_0x4597('0x12')](_0x2e95f2,_0x4a84fc,_0x1f57ef=>{if(_0x1f57ef){console[a20_0x4597('0x6')](_0x1f57ef);}else{console[a20_0x4597('0x6')](a20_0x4597('0x13')+_0x4a84fc);this[a20_0x4597('0x14')](_0x5561f2,_0x4a84fc);}});}[a20_0x4597('0x14')](_0x58fa94,_0x4e264f){const _0x560d4f=a20_0x4597('0x15');const _0x1a9994={'file':fs['createReadStream'](_0x4e264f)};console[a20_0x4597('0x6')](new Date());console['log'](a20_0x4597('0x16')+_0x560d4f);console[a20_0x4597('0x6')]('Sending\x20file:\x20'+_0x58fa94);try{request[a20_0x4597('0x17')]({'url':_0x560d4f,'formData':_0x1a9994},function(_0x163b49,_0x34e083,_0x2e29e5){let _0x3d88b1=null;let _0x4a87f5='';if(_0x163b49){_0x4a87f5='';}else{try{console[a20_0x4597('0x6')](a20_0x4597('0x18')+_0x2e29e5);_0x3d88b1=JSON['parse'](_0x2e29e5);if(_0x3d88b1[a20_0x4597('0x19')]==0x1){_0x4a87f5=a20_0x4597('0x1a');}else{_0x4a87f5='';}}catch(_0x541fac){console[a20_0x4597('0x1b')](_0x541fac);_0x4a87f5='';}}const _0x4c815b=stationSettings_1[a20_0x4597('0x10')][a20_0x4597('0x8')][a20_0x4597('0x9')]+_0x4a87f5+_0x58fa94;fs[a20_0x4597('0x12')](_0x4e264f,_0x4c815b,function(_0x163b49){if(_0x163b49){console[a20_0x4597('0x6')](_0x163b49);}console[a20_0x4597('0x6')](a20_0x4597('0x13')+_0x4c815b);});});}catch(_0x35bef4){console['error'](_0x35bef4);}}}exports['SyncEventsService']=SyncEventsService;