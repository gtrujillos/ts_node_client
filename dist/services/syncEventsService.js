var a21_0x3a1a=['stat','settings','ctime','getTime','syncFile','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','status','success/','error','SyncEventsService','defineProperty','../infrastructure/stationSettings','request','init','exploreDir','log','init\x20Sync','readdir','StationContext','eventFileFolder','forEach','.gz'];(function(_0x1186d5,_0x3d2e90){var _0x569252=function(_0x553ce9){while(--_0x553ce9){_0x1186d5['push'](_0x1186d5['shift']());}};_0x569252(++_0x3d2e90);}(a21_0x3a1a,0x194));var a21_0x1e5a=function(_0x26ce89,_0x1dc49c){_0x26ce89=_0x26ce89-0x0;var _0x1800b2=a21_0x3a1a[_0x26ce89];return _0x1800b2;};'use strict';Object[a21_0x1e5a('0x0')](exports,'__esModule',{'value':!![]});const stationSettings_1=require(a21_0x1e5a('0x1'));const fs=require('fs');const request=require(a21_0x1e5a('0x2'));class SyncEventsService{constructor(){}[a21_0x1e5a('0x3')](){this[a21_0x1e5a('0x4')](0x0);console[a21_0x1e5a('0x5')](a21_0x1e5a('0x6'));}[a21_0x1e5a('0x4')](_0x2d1cb0){fs[a21_0x1e5a('0x7')](stationSettings_1[a21_0x1e5a('0x8')]['settings'][a21_0x1e5a('0x9')],(_0x52a307,_0x52cef5)=>{if(_0x52cef5!=null){_0x52cef5[a21_0x1e5a('0xa')](_0x4ec2c=>{if(_0x4ec2c['includes'](a21_0x1e5a('0xb'))){fs[a21_0x1e5a('0xc')](stationSettings_1[a21_0x1e5a('0x8')][a21_0x1e5a('0xd')]['eventFileFolder']+_0x4ec2c,(_0x3cbb98,_0x112a16)=>{const _0x8291b=Math['abs'](new Date()['getTime']()-_0x112a16[a21_0x1e5a('0xe')][a21_0x1e5a('0xf')]());if(_0x8291b>0x2710){this['syncFile'](_0x4ec2c);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x2d1cb0);},0x1388);}[a21_0x1e5a('0x10')](_0x320310){const _0x10b7b7=stationSettings_1['StationContext']['settings']['eventFileFolder']+_0x320310;const _0x455837=stationSettings_1['StationContext']['settings']['eventFileFolder']+'process/'+_0x320310;fs[a21_0x1e5a('0x11')](_0x10b7b7,_0x455837,_0x587551=>{if(_0x587551){console[a21_0x1e5a('0x5')](_0x587551);}else{console['log']('Successfully\x20renamed\x20'+_0x455837);this[a21_0x1e5a('0x12')](_0x320310,_0x455837);}});}['sendFile'](_0x57b055,_0x12202c){const _0x293255=a21_0x1e5a('0x13');const _0x22efc0={'file':fs['createReadStream'](_0x12202c)};console[a21_0x1e5a('0x5')](new Date());console[a21_0x1e5a('0x5')](a21_0x1e5a('0x14')+_0x293255);console['log'](a21_0x1e5a('0x15')+_0x57b055);try{request['post']({'url':_0x293255,'formData':_0x22efc0},function(_0x1c20d3,_0x5f5bc2,_0x35bad9){let _0x54bf15=null;let _0x53d8dc='';if(_0x1c20d3){_0x53d8dc='';}else{try{console[a21_0x1e5a('0x5')]('Response\x20body:\x20'+_0x35bad9);_0x54bf15=JSON['parse'](_0x35bad9);if(_0x54bf15[a21_0x1e5a('0x16')]==0x1){_0x53d8dc=a21_0x1e5a('0x17');}else{_0x53d8dc='';}}catch(_0x5ad111){console['error'](_0x5ad111);_0x53d8dc='';}}const _0x44942d=stationSettings_1[a21_0x1e5a('0x8')][a21_0x1e5a('0xd')]['eventFileFolder']+_0x53d8dc+_0x57b055;fs[a21_0x1e5a('0x11')](_0x12202c,_0x44942d,function(_0x1c20d3){if(_0x1c20d3){console[a21_0x1e5a('0x5')](_0x1c20d3);}console[a21_0x1e5a('0x5')]('Successfully\x20renamed\x20'+_0x44942d);});});}catch(_0x243c2c){console[a21_0x1e5a('0x18')](_0x243c2c);}}}exports[a21_0x1e5a('0x19')]=SyncEventsService;