var a21_0x11a0=['init\x20Sync','exploreDir','readdir','StationContext','forEach','.gz','settings','getTime','syncFile','eventFileFolder','process/','log','Successfully\x20renamed\x20','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','post','Response\x20body:\x20','parse','status','error','rename','SyncEventsService','__esModule','../infrastructure/stationSettings','init'];(function(_0xeb722,_0x17586d){var _0x2bcc68=function(_0x1f26dd){while(--_0x1f26dd){_0xeb722['push'](_0xeb722['shift']());}};_0x2bcc68(++_0x17586d);}(a21_0x11a0,0xba));var a21_0x2e0f=function(_0x28863c,_0x5d62b3){_0x28863c=_0x28863c-0x0;var _0x2630be=a21_0x11a0[_0x28863c];return _0x2630be;};'use strict';Object['defineProperty'](exports,a21_0x2e0f('0x0'),{'value':!![]});const stationSettings_1=require(a21_0x2e0f('0x1'));const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}[a21_0x2e0f('0x2')](){this['exploreDir'](0x0);console['log'](a21_0x2e0f('0x3'));}[a21_0x2e0f('0x4')](_0x541ac6){fs[a21_0x2e0f('0x5')](stationSettings_1[a21_0x2e0f('0x6')]['settings']['eventFileFolder'],(_0x334946,_0x37352d)=>{if(_0x37352d!=null){_0x37352d[a21_0x2e0f('0x7')](_0x45fa56=>{if(_0x45fa56['includes'](a21_0x2e0f('0x8'))){fs['stat'](stationSettings_1[a21_0x2e0f('0x6')][a21_0x2e0f('0x9')]['eventFileFolder']+_0x45fa56,(_0x1f4446,_0x45851a)=>{const _0x28fa7a=Math['abs'](new Date()[a21_0x2e0f('0xa')]()-_0x45851a['ctime'][a21_0x2e0f('0xa')]());if(_0x28fa7a>0x2710){this[a21_0x2e0f('0xb')](_0x45fa56);}});}});}});setTimeout(()=>{this[a21_0x2e0f('0x4')](++_0x541ac6);},0x1388);}['syncFile'](_0x3f2113){const _0xd0505d=stationSettings_1['StationContext'][a21_0x2e0f('0x9')][a21_0x2e0f('0xc')]+_0x3f2113;const _0x3fc523=stationSettings_1[a21_0x2e0f('0x6')]['settings'][a21_0x2e0f('0xc')]+a21_0x2e0f('0xd')+_0x3f2113;fs['rename'](_0xd0505d,_0x3fc523,_0x15b6e4=>{if(_0x15b6e4){console[a21_0x2e0f('0xe')](_0x15b6e4);}else{console[a21_0x2e0f('0xe')](a21_0x2e0f('0xf')+_0x3fc523);this['sendFile'](_0x3f2113,_0x3fc523);}});}[a21_0x2e0f('0x10')](_0x3f0eea,_0x8c38a8){const _0x32c81c=a21_0x2e0f('0x11');const _0x2a5035={'file':fs[a21_0x2e0f('0x12')](_0x8c38a8)};console[a21_0x2e0f('0xe')](new Date());console[a21_0x2e0f('0xe')](a21_0x2e0f('0x13')+_0x32c81c);console[a21_0x2e0f('0xe')]('Sending\x20file:\x20'+_0x3f0eea);try{request[a21_0x2e0f('0x14')]({'url':_0x32c81c,'formData':_0x2a5035},function(_0x50c543,_0x5d03fe,_0x2d9d5a){let _0x5388d2=null;let _0x2e5a97='';if(_0x50c543){_0x2e5a97='';}else{try{console[a21_0x2e0f('0xe')](a21_0x2e0f('0x15')+_0x2d9d5a);_0x5388d2=JSON[a21_0x2e0f('0x16')](_0x2d9d5a);if(_0x5388d2[a21_0x2e0f('0x17')]==0x1){_0x2e5a97='success/';}else{_0x2e5a97='';}}catch(_0x455fb9){console[a21_0x2e0f('0x18')](_0x455fb9);_0x2e5a97='';}}const _0x24e33c=stationSettings_1[a21_0x2e0f('0x6')][a21_0x2e0f('0x9')]['eventFileFolder']+_0x2e5a97+_0x3f0eea;fs[a21_0x2e0f('0x19')](_0x8c38a8,_0x24e33c,function(_0x50c543){if(_0x50c543){console[a21_0x2e0f('0xe')](_0x50c543);}console['log'](a21_0x2e0f('0xf')+_0x24e33c);});});}catch(_0x1421b4){console[a21_0x2e0f('0x18')](_0x1421b4);}}}exports[a21_0x2e0f('0x1a')]=SyncEventsService;