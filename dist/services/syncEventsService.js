var a21_0x5dcd=['sendFile','WEB_SERVICE_URL','sync_files/upload_event','Sending\x20file:\x20','post','Response\x20body:\x20','parse','status','success/','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','eventFileFolder','includes','stat','settings','getTime','ctime','syncFile','process/','rename','Successfully\x20renamed\x20'];(function(_0x1e9db9,_0xdd3aae){var _0xa460b0=function(_0x3fbbbf){while(--_0x3fbbbf){_0x1e9db9['push'](_0x1e9db9['shift']());}};_0xa460b0(++_0xdd3aae);}(a21_0x5dcd,0x1eb));var a21_0x2501=function(_0x31fa8d,_0xdaa038){_0x31fa8d=_0x31fa8d-0x0;var _0x15a675=a21_0x5dcd[_0x31fa8d];return _0x15a675;};'use strict';Object[a21_0x2501('0x0')](exports,a21_0x2501('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x2501('0x2'));const fs=require('fs');const request=require('request');class SyncEventsService{constructor(){}[a21_0x2501('0x3')](){console[a21_0x2501('0x4')](a21_0x2501('0x5'));this['exploreDir'](0x0);}[a21_0x2501('0x6')](_0x2695b4){fs[a21_0x2501('0x7')](stationSettings_1[a21_0x2501('0x8')]['settings'][a21_0x2501('0x9')],(_0x517422,_0x1c7a40)=>{if(_0x1c7a40!=null){_0x1c7a40['forEach'](_0x36912c=>{if(_0x36912c[a21_0x2501('0xa')]('.gz')){fs[a21_0x2501('0xb')](stationSettings_1[a21_0x2501('0x8')][a21_0x2501('0xc')][a21_0x2501('0x9')]+_0x36912c,(_0x2f84d8,_0x11ed13)=>{const _0x2b4f21=Math['abs'](new Date()[a21_0x2501('0xd')]()-_0x11ed13[a21_0x2501('0xe')][a21_0x2501('0xd')]());if(_0x2b4f21>0x2710){this[a21_0x2501('0xf')](_0x36912c);}});}});}});setTimeout(()=>{this[a21_0x2501('0x6')](++_0x2695b4);},0x1388);}['syncFile'](_0x2e0024){const _0x3b8b76=stationSettings_1[a21_0x2501('0x8')][a21_0x2501('0xc')][a21_0x2501('0x9')]+_0x2e0024;const _0x3b5847=stationSettings_1[a21_0x2501('0x8')][a21_0x2501('0xc')][a21_0x2501('0x9')]+a21_0x2501('0x10')+_0x2e0024;fs[a21_0x2501('0x11')](_0x3b8b76,_0x3b5847,_0x3b2f94=>{if(_0x3b2f94){console[a21_0x2501('0x4')](_0x3b2f94);}else{console[a21_0x2501('0x4')](a21_0x2501('0x12')+_0x3b5847);this[a21_0x2501('0x13')](_0x2e0024,_0x3b5847);}});}[a21_0x2501('0x13')](_0x1c9ef9,_0x2c3e41){const _0x354387=process['env'][a21_0x2501('0x14')]+a21_0x2501('0x15');const _0x4d31bc={'file':fs['createReadStream'](_0x2c3e41)};console['log'](new Date());console[a21_0x2501('0x4')]('serviceUrl:\x20'+_0x354387);console[a21_0x2501('0x4')](a21_0x2501('0x16')+_0x1c9ef9);try{request[a21_0x2501('0x17')]({'url':_0x354387,'formData':_0x4d31bc},function(_0x1347e4,_0x44c584,_0x53e2b4){let _0x324652=null;let _0x140094='';if(_0x1347e4){_0x140094='';}else{try{console[a21_0x2501('0x4')](a21_0x2501('0x18')+_0x53e2b4);_0x324652=JSON[a21_0x2501('0x19')](_0x53e2b4);if(_0x324652[a21_0x2501('0x1a')]==0x1){_0x140094=a21_0x2501('0x1b');}else{_0x140094='';}}catch(_0x46b5e0){console['error'](_0x46b5e0);_0x140094='';}}const _0x4d957e=stationSettings_1[a21_0x2501('0x8')]['settings'][a21_0x2501('0x9')]+_0x140094+_0x1c9ef9;fs[a21_0x2501('0x11')](_0x2c3e41,_0x4d957e,function(_0x1347e4){if(_0x1347e4){console[a21_0x2501('0x4')](_0x1347e4);}console['log'](a21_0x2501('0x12')+_0x4d957e);});});}catch(_0xf32d3f){console[a21_0x2501('0x1c')](_0xf32d3f);}}}exports[a21_0x2501('0x1d')]=SyncEventsService;