var a24_0x431b=['abs','getTime','ctime','syncFile','process/','rename','sendFile','env','sync_files/upload_event','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','status','success/','error','Successfully\x20renamed\x20','defineProperty','__esModule','../infrastructure/stationSettings','request','init','log','init\x20SyncEventsService','exploreDir','readdir','StationContext','settings','eventFileFolder','forEach','includes','.gz'];(function(_0x1c64c0,_0x3da813){var _0x532fd9=function(_0xe07f62){while(--_0xe07f62){_0x1c64c0['push'](_0x1c64c0['shift']());}};_0x532fd9(++_0x3da813);}(a24_0x431b,0x171));var a24_0x234a=function(_0x117bea,_0x7b6b8){_0x117bea=_0x117bea-0x0;var _0x28765c=a24_0x431b[_0x117bea];return _0x28765c;};'use strict';Object[a24_0x234a('0x0')](exports,a24_0x234a('0x1'),{'value':!![]});const stationSettings_1=require(a24_0x234a('0x2'));const fs=require('fs');const request=require(a24_0x234a('0x3'));class SyncEventsService{constructor(){}[a24_0x234a('0x4')](){console[a24_0x234a('0x5')](a24_0x234a('0x6'));this[a24_0x234a('0x7')](0x0);}['exploreDir'](_0x32fd50){fs[a24_0x234a('0x8')](stationSettings_1[a24_0x234a('0x9')][a24_0x234a('0xa')][a24_0x234a('0xb')],(_0x533895,_0x16a496)=>{if(_0x16a496!=null){_0x16a496[a24_0x234a('0xc')](_0x19aa05=>{if(_0x19aa05[a24_0x234a('0xd')](a24_0x234a('0xe'))){fs['stat'](stationSettings_1[a24_0x234a('0x9')]['settings'][a24_0x234a('0xb')]+_0x19aa05,(_0x132d5c,_0x20ee6e)=>{const _0x1ff75a=Math[a24_0x234a('0xf')](new Date()[a24_0x234a('0x10')]()-_0x20ee6e[a24_0x234a('0x11')][a24_0x234a('0x10')]());if(_0x1ff75a>0x2710){this['syncFile'](_0x19aa05);}});}});}});setTimeout(()=>{this[a24_0x234a('0x7')](++_0x32fd50);},0x1388);}[a24_0x234a('0x12')](_0x39e36b){const _0x2d86d1=stationSettings_1[a24_0x234a('0x9')][a24_0x234a('0xa')][a24_0x234a('0xb')]+_0x39e36b;const _0x7a0036=stationSettings_1['StationContext']['settings'][a24_0x234a('0xb')]+a24_0x234a('0x13')+_0x39e36b;fs[a24_0x234a('0x14')](_0x2d86d1,_0x7a0036,_0x1b54b0=>{if(_0x1b54b0){console[a24_0x234a('0x5')](_0x1b54b0);}else{console[a24_0x234a('0x5')]('Successfully\x20renamed\x20'+_0x7a0036);this[a24_0x234a('0x15')](_0x39e36b,_0x7a0036);}});}['sendFile'](_0x216ba8,_0xe7c2d5){const _0x3e16e9=process[a24_0x234a('0x16')]['WEB_SERVICE_URL']+a24_0x234a('0x17');const _0x4c68f4={'file':fs['createReadStream'](_0xe7c2d5)};console['log'](new Date());console[a24_0x234a('0x5')](a24_0x234a('0x18')+_0x3e16e9);console[a24_0x234a('0x5')](a24_0x234a('0x19')+_0x216ba8);try{request[a24_0x234a('0x1a')]({'url':_0x3e16e9,'formData':_0x4c68f4},function(_0x1777eb,_0x1245c4,_0x60ce2){let _0x929a0b=null;let _0x2f9397='';if(_0x1777eb){_0x2f9397='';}else{try{console[a24_0x234a('0x5')](a24_0x234a('0x1b')+_0x60ce2);_0x929a0b=JSON['parse'](_0x60ce2);if(_0x929a0b[a24_0x234a('0x1c')]==0x1){_0x2f9397=a24_0x234a('0x1d');}else{_0x2f9397='';}}catch(_0x2f84e5){console[a24_0x234a('0x1e')](_0x2f84e5);_0x2f9397='';}}const _0x302a79=stationSettings_1[a24_0x234a('0x9')][a24_0x234a('0xa')][a24_0x234a('0xb')]+_0x2f9397+_0x216ba8;fs[a24_0x234a('0x14')](_0xe7c2d5,_0x302a79,function(_0x1777eb){if(_0x1777eb){console[a24_0x234a('0x5')](_0x1777eb);}console[a24_0x234a('0x5')](a24_0x234a('0x1f')+_0x302a79);});});}catch(_0xc78135){console['error'](_0xc78135);}}}exports['SyncEventsService']=SyncEventsService;