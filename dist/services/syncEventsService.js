var a25_0x48c7=['StationContext','abs','getTime','ctime','syncFile','settings','process/','rename','Successfully\x20renamed\x20','sendFile','env','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','parse','success/','error','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','init','log','init\x20SyncEventsService','exploreDir','eventFileFolder','includes','stat'];(function(_0x2eed1a,_0x21c0f6){var _0x512ae2=function(_0x4dc400){while(--_0x4dc400){_0x2eed1a['push'](_0x2eed1a['shift']());}};_0x512ae2(++_0x21c0f6);}(a25_0x48c7,0x71));var a25_0x1213=function(_0x1b6ae5,_0x8ddc67){_0x1b6ae5=_0x1b6ae5-0x0;var _0x57677b=a25_0x48c7[_0x1b6ae5];return _0x57677b;};'use strict';Object[a25_0x1213('0x0')](exports,a25_0x1213('0x1'),{'value':!![]});const stationSettings_1=require(a25_0x1213('0x2'));const fs=require('fs');const request=require(a25_0x1213('0x3'));class SyncEventsService{constructor(){}[a25_0x1213('0x4')](){console[a25_0x1213('0x5')](a25_0x1213('0x6'));this[a25_0x1213('0x7')](0x0);}['exploreDir'](_0xff9a62){fs['readdir'](stationSettings_1['StationContext']['settings'][a25_0x1213('0x8')],(_0xf4e78,_0x534697)=>{if(_0x534697!=null){_0x534697['forEach'](_0x5d7071=>{if(_0x5d7071[a25_0x1213('0x9')]('.gz')){fs[a25_0x1213('0xa')](stationSettings_1[a25_0x1213('0xb')]['settings'][a25_0x1213('0x8')]+_0x5d7071,(_0x43a010,_0x47e7e2)=>{const _0x4e72d1=Math[a25_0x1213('0xc')](new Date()[a25_0x1213('0xd')]()-_0x47e7e2[a25_0x1213('0xe')][a25_0x1213('0xd')]());if(_0x4e72d1>0x2710){this[a25_0x1213('0xf')](_0x5d7071);}});}});}});setTimeout(()=>{this[a25_0x1213('0x7')](++_0xff9a62);},0x1388);}[a25_0x1213('0xf')](_0x1b1ea6){const _0xdc5b45=stationSettings_1[a25_0x1213('0xb')][a25_0x1213('0x10')][a25_0x1213('0x8')]+_0x1b1ea6;const _0x4d7841=stationSettings_1[a25_0x1213('0xb')][a25_0x1213('0x10')][a25_0x1213('0x8')]+a25_0x1213('0x11')+_0x1b1ea6;fs[a25_0x1213('0x12')](_0xdc5b45,_0x4d7841,_0x4b77ea=>{if(_0x4b77ea){console[a25_0x1213('0x5')](_0x4b77ea);}else{console['log'](a25_0x1213('0x13')+_0x4d7841);this[a25_0x1213('0x14')](_0x1b1ea6,_0x4d7841);}});}['sendFile'](_0x501588,_0x587e9b){const _0x227d72=process[a25_0x1213('0x15')]['WEB_SERVICE_URL']+'sync_files/upload_event';const _0x533365={'file':fs[a25_0x1213('0x16')](_0x587e9b)};console[a25_0x1213('0x5')](new Date());console[a25_0x1213('0x5')](a25_0x1213('0x17')+_0x227d72);console[a25_0x1213('0x5')](a25_0x1213('0x18')+_0x501588);try{request[a25_0x1213('0x19')]({'url':_0x227d72,'formData':_0x533365},function(_0x93c8ef,_0x4680bf,_0xc62ae6){let _0x54a7c6=null;let _0x15ddb9='';if(_0x93c8ef){_0x15ddb9='';}else{try{console[a25_0x1213('0x5')](a25_0x1213('0x1a')+_0xc62ae6);_0x54a7c6=JSON[a25_0x1213('0x1b')](_0xc62ae6);if(_0x54a7c6['status']==0x1){_0x15ddb9=a25_0x1213('0x1c');}else{_0x15ddb9='';}}catch(_0x43cfac){console[a25_0x1213('0x1d')](_0x43cfac);_0x15ddb9='';}}const _0x51e731=stationSettings_1['StationContext'][a25_0x1213('0x10')][a25_0x1213('0x8')]+_0x15ddb9+_0x501588;fs[a25_0x1213('0x12')](_0x587e9b,_0x51e731,function(_0x93c8ef){if(_0x93c8ef){console[a25_0x1213('0x5')](_0x93c8ef);}console[a25_0x1213('0x5')](a25_0x1213('0x13')+_0x51e731);});});}catch(_0x2c0ae9){console[a25_0x1213('0x1d')](_0x2c0ae9);}}}exports[a25_0x1213('0x1e')]=SyncEventsService;