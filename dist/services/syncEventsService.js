var a21_0x5451=['Response\x20body:\x20','parse','status','success/','error','Successfully\x20renamed\x20','SyncEventsService','defineProperty','__esModule','../infrastructure/stationSettings','request','exploreDir','log','readdir','StationContext','settings','forEach','includes','.gz','stat','eventFileFolder','abs','ctime','getTime','syncFile','rename','sendFile','http://restapi.passcontrol.co/sync_files/upload_event','createReadStream','serviceUrl:\x20','post'];(function(_0x5a882a,_0x4cf982){var _0x4af51e=function(_0x537464){while(--_0x537464){_0x5a882a['push'](_0x5a882a['shift']());}};_0x4af51e(++_0x4cf982);}(a21_0x5451,0x1b9));var a21_0x1c96=function(_0x20c7a9,_0xca8b3){_0x20c7a9=_0x20c7a9-0x0;var _0x184e8a=a21_0x5451[_0x20c7a9];return _0x184e8a;};'use strict';Object[a21_0x1c96('0x0')](exports,a21_0x1c96('0x1'),{'value':!![]});const stationSettings_1=require(a21_0x1c96('0x2'));const fs=require('fs');const request=require(a21_0x1c96('0x3'));class SyncEventsService{constructor(){}['init'](){this[a21_0x1c96('0x4')](0x0);console[a21_0x1c96('0x5')]('init\x20Sync');}['exploreDir'](_0x358d98){fs[a21_0x1c96('0x6')](stationSettings_1[a21_0x1c96('0x7')][a21_0x1c96('0x8')]['eventFileFolder'],(_0xefa0e5,_0x5f31df)=>{if(_0x5f31df!=null){_0x5f31df[a21_0x1c96('0x9')](_0x206c3d=>{if(_0x206c3d[a21_0x1c96('0xa')](a21_0x1c96('0xb'))){fs[a21_0x1c96('0xc')](stationSettings_1['StationContext'][a21_0x1c96('0x8')][a21_0x1c96('0xd')]+_0x206c3d,(_0xcd5175,_0x21bcdd)=>{const _0x45ff72=Math[a21_0x1c96('0xe')](new Date()['getTime']()-_0x21bcdd[a21_0x1c96('0xf')][a21_0x1c96('0x10')]());if(_0x45ff72>0x2710){this[a21_0x1c96('0x11')](_0x206c3d);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x358d98);},0x1388);}[a21_0x1c96('0x11')](_0x11ae17){const _0x341750=stationSettings_1[a21_0x1c96('0x7')][a21_0x1c96('0x8')][a21_0x1c96('0xd')]+_0x11ae17;const _0xa04280=stationSettings_1[a21_0x1c96('0x7')][a21_0x1c96('0x8')][a21_0x1c96('0xd')]+'process/'+_0x11ae17;fs[a21_0x1c96('0x12')](_0x341750,_0xa04280,_0x4a304d=>{if(_0x4a304d){console[a21_0x1c96('0x5')](_0x4a304d);}else{console[a21_0x1c96('0x5')]('Successfully\x20renamed\x20'+_0xa04280);this[a21_0x1c96('0x13')](_0x11ae17,_0xa04280);}});}[a21_0x1c96('0x13')](_0x1c7848,_0x829122){const _0x309fa6=a21_0x1c96('0x14');const _0x3aad82={'file':fs[a21_0x1c96('0x15')](_0x829122)};console[a21_0x1c96('0x5')](new Date());console[a21_0x1c96('0x5')](a21_0x1c96('0x16')+_0x309fa6);console[a21_0x1c96('0x5')]('Sending\x20file:\x20'+_0x1c7848);try{request[a21_0x1c96('0x17')]({'url':_0x309fa6,'formData':_0x3aad82},function(_0xa3bc13,_0x4610af,_0x4be752){let _0x367ff4=null;let _0x30abdc='';if(_0xa3bc13){_0x30abdc='';}else{try{console['log'](a21_0x1c96('0x18')+_0x4be752);_0x367ff4=JSON[a21_0x1c96('0x19')](_0x4be752);if(_0x367ff4[a21_0x1c96('0x1a')]==0x1){_0x30abdc=a21_0x1c96('0x1b');}else{_0x30abdc='';}}catch(_0xaf624f){console[a21_0x1c96('0x1c')](_0xaf624f);_0x30abdc='';}}const _0x5ed5f4=stationSettings_1['StationContext']['settings'][a21_0x1c96('0xd')]+_0x30abdc+_0x1c7848;fs[a21_0x1c96('0x12')](_0x829122,_0x5ed5f4,function(_0xa3bc13){if(_0xa3bc13){console[a21_0x1c96('0x5')](_0xa3bc13);}console[a21_0x1c96('0x5')](a21_0x1c96('0x1d')+_0x5ed5f4);});});}catch(_0x3ac0dd){console[a21_0x1c96('0x1c')](_0x3ac0dd);}}}exports[a21_0x1c96('0x1e')]=SyncEventsService;