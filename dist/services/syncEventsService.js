var a21_0x7481=['StationContext','eventFileFolder','forEach','includes','stat','settings','abs','ctime','getTime','syncFile','exploreDir','process/','rename','log','Successfully\x20renamed\x20','sendFile','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','post','Response\x20body:\x20','status','success/','error','defineProperty','__esModule','request','init','init\x20Sync','readdir'];(function(_0x4bd822,_0x2bd6f7){var _0xb4bdb3=function(_0x1d68f6){while(--_0x1d68f6){_0x4bd822['push'](_0x4bd822['shift']());}};_0xb4bdb3(++_0x2bd6f7);}(a21_0x7481,0x108));var a21_0xbc12=function(_0x111af4,_0x470189){_0x111af4=_0x111af4-0x0;var _0xb6fc64=a21_0x7481[_0x111af4];return _0xb6fc64;};'use strict';Object[a21_0xbc12('0x0')](exports,a21_0xbc12('0x1'),{'value':!![]});const stationSettings_1=require('../infrastructure/stationSettings');const fs=require('fs');const request=require(a21_0xbc12('0x2'));class SyncEventsService{constructor(){}[a21_0xbc12('0x3')](){this['exploreDir'](0x0);console['log'](a21_0xbc12('0x4'));}['exploreDir'](_0x52fc91){fs[a21_0xbc12('0x5')](stationSettings_1[a21_0xbc12('0x6')]['settings'][a21_0xbc12('0x7')],(_0x2db651,_0x5c6b43)=>{if(_0x5c6b43!=null){_0x5c6b43[a21_0xbc12('0x8')](_0x548974=>{if(_0x548974[a21_0xbc12('0x9')]('.gz')){fs[a21_0xbc12('0xa')](stationSettings_1['StationContext'][a21_0xbc12('0xb')][a21_0xbc12('0x7')]+_0x548974,(_0x4efffb,_0x23fddc)=>{const _0x3d14e9=Math[a21_0xbc12('0xc')](new Date()['getTime']()-_0x23fddc[a21_0xbc12('0xd')][a21_0xbc12('0xe')]());if(_0x3d14e9>0x2710){this[a21_0xbc12('0xf')](_0x548974);}});}});}});setTimeout(()=>{this[a21_0xbc12('0x10')](++_0x52fc91);},0x1388);}[a21_0xbc12('0xf')](_0x32294c){const _0x4bd715=stationSettings_1['StationContext'][a21_0xbc12('0xb')][a21_0xbc12('0x7')]+_0x32294c;const _0x464883=stationSettings_1[a21_0xbc12('0x6')]['settings'][a21_0xbc12('0x7')]+a21_0xbc12('0x11')+_0x32294c;fs[a21_0xbc12('0x12')](_0x4bd715,_0x464883,_0x450e49=>{if(_0x450e49){console[a21_0xbc12('0x13')](_0x450e49);}else{console[a21_0xbc12('0x13')](a21_0xbc12('0x14')+_0x464883);this['sendFile'](_0x32294c,_0x464883);}});}[a21_0xbc12('0x15')](_0xa59184,_0x5a021e){const _0x5bc484='http://restapi.passcontrol.co/sync_files/upload_event';const _0x4601f1={'file':fs[a21_0xbc12('0x16')](_0x5a021e)};console[a21_0xbc12('0x13')](new Date());console['log'](a21_0xbc12('0x17')+_0x5bc484);console[a21_0xbc12('0x13')](a21_0xbc12('0x18')+_0xa59184);try{request[a21_0xbc12('0x19')]({'url':_0x5bc484,'formData':_0x4601f1},function(_0x5c9a22,_0x4a3ba3,_0x5e4202){let _0x530661=null;let _0x169c98='';if(_0x5c9a22){_0x169c98='';}else{try{console['log'](a21_0xbc12('0x1a')+_0x5e4202);_0x530661=JSON['parse'](_0x5e4202);if(_0x530661[a21_0xbc12('0x1b')]==0x1){_0x169c98=a21_0xbc12('0x1c');}else{_0x169c98='';}}catch(_0x34033b){console[a21_0xbc12('0x1d')](_0x34033b);_0x169c98='';}}const _0x455a69=stationSettings_1[a21_0xbc12('0x6')][a21_0xbc12('0xb')]['eventFileFolder']+_0x169c98+_0xa59184;fs[a21_0xbc12('0x12')](_0x5a021e,_0x455a69,function(_0x5c9a22){if(_0x5c9a22){console[a21_0xbc12('0x13')](_0x5c9a22);}console['log'](a21_0xbc12('0x14')+_0x455a69);});});}catch(_0x4a1943){console['error'](_0x4a1943);}}}exports['SyncEventsService']=SyncEventsService;