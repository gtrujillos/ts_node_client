var a24_0x34d5=['exploreDir','readdir','settings','eventFileFolder','forEach','includes','.gz','stat','abs','getTime','ctime','syncFile','StationContext','rename','log','sendFile','env','WEB_SERVICE_URL','sync_files/upload_event','createReadStream','serviceUrl:\x20','Sending\x20file:\x20','Response\x20body:\x20','parse','status','success/','error','Successfully\x20renamed\x20','SyncEventsService','__esModule','../infrastructure/stationSettings','request','init','init\x20SyncEventsService'];(function(_0x3562b5,_0x22dabc){var _0x54d52d=function(_0x27bd3d){while(--_0x27bd3d){_0x3562b5['push'](_0x3562b5['shift']());}};_0x54d52d(++_0x22dabc);}(a24_0x34d5,0xa5));var a24_0x47fb=function(_0x42655f,_0x5ae11b){_0x42655f=_0x42655f-0x0;var _0x355a41=a24_0x34d5[_0x42655f];return _0x355a41;};'use strict';Object['defineProperty'](exports,a24_0x47fb('0x0'),{'value':!![]});const stationSettings_1=require(a24_0x47fb('0x1'));const fs=require('fs');const request=require(a24_0x47fb('0x2'));class SyncEventsService{constructor(){}[a24_0x47fb('0x3')](){console['log'](a24_0x47fb('0x4'));this[a24_0x47fb('0x5')](0x0);}[a24_0x47fb('0x5')](_0x22863b){fs[a24_0x47fb('0x6')](stationSettings_1['StationContext'][a24_0x47fb('0x7')][a24_0x47fb('0x8')],(_0x205a8d,_0x3403fc)=>{if(_0x3403fc!=null){_0x3403fc[a24_0x47fb('0x9')](_0x36add6=>{if(_0x36add6[a24_0x47fb('0xa')](a24_0x47fb('0xb'))){fs[a24_0x47fb('0xc')](stationSettings_1['StationContext'][a24_0x47fb('0x7')]['eventFileFolder']+_0x36add6,(_0x3d9d3c,_0x4d9f1d)=>{const _0x11262d=Math[a24_0x47fb('0xd')](new Date()[a24_0x47fb('0xe')]()-_0x4d9f1d[a24_0x47fb('0xf')][a24_0x47fb('0xe')]());if(_0x11262d>0x2710){this[a24_0x47fb('0x10')](_0x36add6);}});}});}});setTimeout(()=>{this['exploreDir'](++_0x22863b);},0x1388);}[a24_0x47fb('0x10')](_0x34f9e9){const _0x48101c=stationSettings_1[a24_0x47fb('0x11')][a24_0x47fb('0x7')]['eventFileFolder']+_0x34f9e9;const _0x21c79b=stationSettings_1[a24_0x47fb('0x11')]['settings']['eventFileFolder']+'process/'+_0x34f9e9;fs[a24_0x47fb('0x12')](_0x48101c,_0x21c79b,_0x323ac2=>{if(_0x323ac2){console[a24_0x47fb('0x13')](_0x323ac2);}else{console[a24_0x47fb('0x13')]('Successfully\x20renamed\x20'+_0x21c79b);this[a24_0x47fb('0x14')](_0x34f9e9,_0x21c79b);}});}[a24_0x47fb('0x14')](_0x2a1f9d,_0x3c0071){const _0x1f7150=process[a24_0x47fb('0x15')][a24_0x47fb('0x16')]+a24_0x47fb('0x17');const _0x37d368={'file':fs[a24_0x47fb('0x18')](_0x3c0071)};console[a24_0x47fb('0x13')](new Date());console['log'](a24_0x47fb('0x19')+_0x1f7150);console['log'](a24_0x47fb('0x1a')+_0x2a1f9d);try{request['post']({'url':_0x1f7150,'formData':_0x37d368},function(_0x4e3d29,_0x4e3454,_0x1b6646){let _0x1f2891=null;let _0x4df1f0='';if(_0x4e3d29){_0x4df1f0='';}else{try{console[a24_0x47fb('0x13')](a24_0x47fb('0x1b')+_0x1b6646);_0x1f2891=JSON[a24_0x47fb('0x1c')](_0x1b6646);if(_0x1f2891[a24_0x47fb('0x1d')]==0x1){_0x4df1f0=a24_0x47fb('0x1e');}else{_0x4df1f0='';}}catch(_0x90cd50){console[a24_0x47fb('0x1f')](_0x90cd50);_0x4df1f0='';}}const _0x149483=stationSettings_1[a24_0x47fb('0x11')][a24_0x47fb('0x7')][a24_0x47fb('0x8')]+_0x4df1f0+_0x2a1f9d;fs[a24_0x47fb('0x12')](_0x3c0071,_0x149483,function(_0x4e3d29){if(_0x4e3d29){console[a24_0x47fb('0x13')](_0x4e3d29);}console[a24_0x47fb('0x13')](a24_0x47fb('0x20')+_0x149483);});});}catch(_0xfbf576){console[a24_0x47fb('0x1f')](_0xfbf576);}}}exports[a24_0x47fb('0x21')]=SyncEventsService;