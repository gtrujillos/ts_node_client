var a9_0x3f87=['digest','hex','https://gravatar.com/avatar/','model','__esModule','bcrypt-nodejs','crypto','mongoose','default','Schema','pre','isModified','password','genSalt','compare','methods','comparePassword','email','&d=retro','createHash','update'];(function(_0x2ea8f5,_0x441e5e){var _0x4669a4=function(_0x9c0c72){while(--_0x9c0c72){_0x2ea8f5['push'](_0x2ea8f5['shift']());}};_0x4669a4(++_0x441e5e);}(a9_0x3f87,0x1d2));var a9_0x11af=function(_0x4cb95f,_0x39410e){_0x4cb95f=_0x4cb95f-0x0;var _0x5368d9=a9_0x3f87[_0x4cb95f];return _0x5368d9;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x32a9b4){return _0x32a9b4&&_0x32a9b4[a9_0x11af('0x0')]?_0x32a9b4:{'default':_0x32a9b4};};Object['defineProperty'](exports,a9_0x11af('0x0'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a9_0x11af('0x1')));const crypto_1=__importDefault(require(a9_0x11af('0x2')));const mongoose_1=__importDefault(require(a9_0x11af('0x3')));const userSchema=new mongoose_1[(a9_0x11af('0x4'))][(a9_0x11af('0x5'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a9_0x11af('0x6')]('save',function save(_0x1209b3){const _0x169c76=this;if(!_0x169c76[a9_0x11af('0x7')](a9_0x11af('0x8'))){return _0x1209b3();}bcrypt_nodejs_1[a9_0x11af('0x4')][a9_0x11af('0x9')](0xa,(_0x407e3d,_0x2fb6b9)=>{if(_0x407e3d){return _0x1209b3(_0x407e3d);}bcrypt_nodejs_1['default']['hash'](_0x169c76[a9_0x11af('0x8')],_0x2fb6b9,undefined,(_0x407e3d,_0x105fb6)=>{if(_0x407e3d){return _0x1209b3(_0x407e3d);}_0x169c76[a9_0x11af('0x8')]=_0x105fb6;_0x1209b3();});});});const comparePassword=function(_0x76129e,_0x405173){bcrypt_nodejs_1[a9_0x11af('0x4')][a9_0x11af('0xa')](_0x76129e,this[a9_0x11af('0x8')],(_0x54711e,_0x5a4d89)=>{_0x405173(_0x54711e,_0x5a4d89);});};userSchema[a9_0x11af('0xb')][a9_0x11af('0xc')]=comparePassword;userSchema['methods']['gravatar']=function(_0x17086f){if(!_0x17086f){_0x17086f=0xc8;}if(!this[a9_0x11af('0xd')]){return'https://gravatar.com/avatar/?s='+_0x17086f+a9_0x11af('0xe');}const _0x34d769=crypto_1[a9_0x11af('0x4')][a9_0x11af('0xf')]('md5')[a9_0x11af('0x10')](this[a9_0x11af('0xd')])[a9_0x11af('0x11')](a9_0x11af('0x12'));return a9_0x11af('0x13')+_0x34d769+'?s='+_0x17086f+'&d=retro';};const User=mongoose_1[a9_0x11af('0x4')][a9_0x11af('0x14')]('User',userSchema);exports[a9_0x11af('0x4')]=User;