var a9_0x4abb=['https://gravatar.com/avatar/','?s=','User','__esModule','defineProperty','bcrypt-nodejs','crypto','mongoose','default','Schema','pre','save','isModified','password','genSalt','compare','methods','comparePassword','gravatar','https://gravatar.com/avatar/?s=','&d=retro','createHash','update','digest'];(function(_0x216dda,_0x4085b0){var _0xa7a13e=function(_0x569dd4){while(--_0x569dd4){_0x216dda['push'](_0x216dda['shift']());}};_0xa7a13e(++_0x4085b0);}(a9_0x4abb,0x1e3));var a9_0x2d67=function(_0x334cbf,_0x24e708){_0x334cbf=_0x334cbf-0x0;var _0x804c1d=a9_0x4abb[_0x334cbf];return _0x804c1d;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0xae3878){return _0xae3878&&_0xae3878[a9_0x2d67('0x0')]?_0xae3878:{'default':_0xae3878};};Object[a9_0x2d67('0x1')](exports,a9_0x2d67('0x0'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a9_0x2d67('0x2')));const crypto_1=__importDefault(require(a9_0x2d67('0x3')));const mongoose_1=__importDefault(require(a9_0x2d67('0x4')));const userSchema=new mongoose_1[(a9_0x2d67('0x5'))][(a9_0x2d67('0x6'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a9_0x2d67('0x7')](a9_0x2d67('0x8'),function save(_0x57539c){const _0x38f46e=this;if(!_0x38f46e[a9_0x2d67('0x9')](a9_0x2d67('0xa'))){return _0x57539c();}bcrypt_nodejs_1['default'][a9_0x2d67('0xb')](0xa,(_0x672cc0,_0xe8c5ef)=>{if(_0x672cc0){return _0x57539c(_0x672cc0);}bcrypt_nodejs_1[a9_0x2d67('0x5')]['hash'](_0x38f46e['password'],_0xe8c5ef,undefined,(_0x672cc0,_0x1dccfb)=>{if(_0x672cc0){return _0x57539c(_0x672cc0);}_0x38f46e['password']=_0x1dccfb;_0x57539c();});});});const comparePassword=function(_0x604fa4,_0x278cee){bcrypt_nodejs_1['default'][a9_0x2d67('0xc')](_0x604fa4,this[a9_0x2d67('0xa')],(_0x192739,_0x410c1a)=>{_0x278cee(_0x192739,_0x410c1a);});};userSchema[a9_0x2d67('0xd')][a9_0x2d67('0xe')]=comparePassword;userSchema[a9_0x2d67('0xd')][a9_0x2d67('0xf')]=function(_0x30601c){if(!_0x30601c){_0x30601c=0xc8;}if(!this['email']){return a9_0x2d67('0x10')+_0x30601c+a9_0x2d67('0x11');}const _0x40fca4=crypto_1['default'][a9_0x2d67('0x12')]('md5')[a9_0x2d67('0x13')](this['email'])[a9_0x2d67('0x14')]('hex');return a9_0x2d67('0x15')+_0x40fca4+a9_0x2d67('0x16')+_0x30601c+a9_0x2d67('0x11');};const User=mongoose_1[a9_0x2d67('0x5')]['model'](a9_0x2d67('0x17'),userSchema);exports['default']=User;