var a10_0x2dae=['isModified','password','default','hash','compare','methods','comparePassword','email','https://gravatar.com/avatar/?s=','&d=retro','createHash','md5','update','digest','hex','?s=','model','User','__importDefault','__esModule','crypto','mongoose','Schema','pre','save'];(function(_0x3efd9c,_0x52dd81){var _0x4b9e03=function(_0x7bef1e){while(--_0x7bef1e){_0x3efd9c['push'](_0x3efd9c['shift']());}};_0x4b9e03(++_0x52dd81);}(a10_0x2dae,0xc1));var a10_0x4fa5=function(_0x417910,_0x4d42c4){_0x417910=_0x417910-0x0;var _0x55032e=a10_0x2dae[_0x417910];return _0x55032e;};'use strict';var __importDefault=this&&this[a10_0x4fa5('0x0')]||function(_0x15b3d2){return _0x15b3d2&&_0x15b3d2[a10_0x4fa5('0x1')]?_0x15b3d2:{'default':_0x15b3d2};};Object['defineProperty'](exports,a10_0x4fa5('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require('bcrypt-nodejs'));const crypto_1=__importDefault(require(a10_0x4fa5('0x2')));const mongoose_1=__importDefault(require(a10_0x4fa5('0x3')));const userSchema=new mongoose_1['default'][(a10_0x4fa5('0x4'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a10_0x4fa5('0x5')](a10_0x4fa5('0x6'),function save(_0x42fa78){const _0x580e5a=this;if(!_0x580e5a[a10_0x4fa5('0x7')](a10_0x4fa5('0x8'))){return _0x42fa78();}bcrypt_nodejs_1['default']['genSalt'](0xa,(_0x2605a9,_0x53320c)=>{if(_0x2605a9){return _0x42fa78(_0x2605a9);}bcrypt_nodejs_1[a10_0x4fa5('0x9')][a10_0x4fa5('0xa')](_0x580e5a[a10_0x4fa5('0x8')],_0x53320c,undefined,(_0x2605a9,_0x58668)=>{if(_0x2605a9){return _0x42fa78(_0x2605a9);}_0x580e5a['password']=_0x58668;_0x42fa78();});});});const comparePassword=function(_0x7ce019,_0x3679f1){bcrypt_nodejs_1[a10_0x4fa5('0x9')][a10_0x4fa5('0xb')](_0x7ce019,this[a10_0x4fa5('0x8')],(_0x1232b1,_0x98f491)=>{_0x3679f1(_0x1232b1,_0x98f491);});};userSchema[a10_0x4fa5('0xc')][a10_0x4fa5('0xd')]=comparePassword;userSchema[a10_0x4fa5('0xc')]['gravatar']=function(_0x2fa3e1){if(!_0x2fa3e1){_0x2fa3e1=0xc8;}if(!this[a10_0x4fa5('0xe')]){return a10_0x4fa5('0xf')+_0x2fa3e1+a10_0x4fa5('0x10');}const _0x1839ea=crypto_1[a10_0x4fa5('0x9')][a10_0x4fa5('0x11')](a10_0x4fa5('0x12'))[a10_0x4fa5('0x13')](this['email'])[a10_0x4fa5('0x14')](a10_0x4fa5('0x15'));return'https://gravatar.com/avatar/'+_0x1839ea+a10_0x4fa5('0x16')+_0x2fa3e1+a10_0x4fa5('0x10');};const User=mongoose_1[a10_0x4fa5('0x9')][a10_0x4fa5('0x17')](a10_0x4fa5('0x18'),userSchema);exports[a10_0x4fa5('0x9')]=User;