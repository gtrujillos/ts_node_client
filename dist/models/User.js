var a9_0x19ce=['password','hash','compare','methods','comparePassword','gravatar','email','https://gravatar.com/avatar/?s=','&d=retro','md5','digest','hex','model','User','__importDefault','defineProperty','__esModule','bcrypt-nodejs','crypto','mongoose','default','Schema'];(function(_0x549e90,_0x2ec9f1){var _0x1a434a=function(_0x1df474){while(--_0x1df474){_0x549e90['push'](_0x549e90['shift']());}};_0x1a434a(++_0x2ec9f1);}(a9_0x19ce,0x19a));var a9_0x37e5=function(_0x494c82,_0x1692c7){_0x494c82=_0x494c82-0x0;var _0x58f6bd=a9_0x19ce[_0x494c82];return _0x58f6bd;};'use strict';var __importDefault=this&&this[a9_0x37e5('0x0')]||function(_0x4ad56d){return _0x4ad56d&&_0x4ad56d['__esModule']?_0x4ad56d:{'default':_0x4ad56d};};Object[a9_0x37e5('0x1')](exports,a9_0x37e5('0x2'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a9_0x37e5('0x3')));const crypto_1=__importDefault(require(a9_0x37e5('0x4')));const mongoose_1=__importDefault(require(a9_0x37e5('0x5')));const userSchema=new mongoose_1[(a9_0x37e5('0x6'))][(a9_0x37e5('0x7'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre']('save',function save(_0x1422d9){const _0x1899d5=this;if(!_0x1899d5['isModified'](a9_0x37e5('0x8'))){return _0x1422d9();}bcrypt_nodejs_1[a9_0x37e5('0x6')]['genSalt'](0xa,(_0x3e159e,_0x114d25)=>{if(_0x3e159e){return _0x1422d9(_0x3e159e);}bcrypt_nodejs_1[a9_0x37e5('0x6')][a9_0x37e5('0x9')](_0x1899d5['password'],_0x114d25,undefined,(_0x3e159e,_0x33f05c)=>{if(_0x3e159e){return _0x1422d9(_0x3e159e);}_0x1899d5['password']=_0x33f05c;_0x1422d9();});});});const comparePassword=function(_0x5bdda9,_0x15b51d){bcrypt_nodejs_1['default'][a9_0x37e5('0xa')](_0x5bdda9,this[a9_0x37e5('0x8')],(_0x1b0411,_0x13c06c)=>{_0x15b51d(_0x1b0411,_0x13c06c);});};userSchema[a9_0x37e5('0xb')][a9_0x37e5('0xc')]=comparePassword;userSchema[a9_0x37e5('0xb')][a9_0x37e5('0xd')]=function(_0x4550b8){if(!_0x4550b8){_0x4550b8=0xc8;}if(!this[a9_0x37e5('0xe')]){return a9_0x37e5('0xf')+_0x4550b8+a9_0x37e5('0x10');}const _0xc15be7=crypto_1['default']['createHash'](a9_0x37e5('0x11'))['update'](this[a9_0x37e5('0xe')])[a9_0x37e5('0x12')](a9_0x37e5('0x13'));return'https://gravatar.com/avatar/'+_0xc15be7+'?s='+_0x4550b8+a9_0x37e5('0x10');};const User=mongoose_1[a9_0x37e5('0x6')][a9_0x37e5('0x14')](a9_0x37e5('0x15'),userSchema);exports[a9_0x37e5('0x6')]=User;