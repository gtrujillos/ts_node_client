var a9_0x3d48=['https://gravatar.com/avatar/','?s=','model','User','__esModule','bcrypt-nodejs','crypto','mongoose','default','Schema','isModified','password','hash','compare','methods','comparePassword','gravatar','email','https://gravatar.com/avatar/?s=','&d=retro','md5','update'];(function(_0x4aaefd,_0x6838b4){var _0x2494d7=function(_0xd2ebe9){while(--_0xd2ebe9){_0x4aaefd['push'](_0x4aaefd['shift']());}};_0x2494d7(++_0x6838b4);}(a9_0x3d48,0x1bc));var a9_0x403b=function(_0x3606a9,_0x1f439b){_0x3606a9=_0x3606a9-0x0;var _0x5e3a3f=a9_0x3d48[_0x3606a9];return _0x5e3a3f;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x230a50){return _0x230a50&&_0x230a50[a9_0x403b('0x0')]?_0x230a50:{'default':_0x230a50};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a9_0x403b('0x1')));const crypto_1=__importDefault(require(a9_0x403b('0x2')));const mongoose_1=__importDefault(require(a9_0x403b('0x3')));const userSchema=new mongoose_1[(a9_0x403b('0x4'))][(a9_0x403b('0x5'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre']('save',function save(_0x2e01ce){const _0x1d74e2=this;if(!_0x1d74e2[a9_0x403b('0x6')](a9_0x403b('0x7'))){return _0x2e01ce();}bcrypt_nodejs_1[a9_0x403b('0x4')]['genSalt'](0xa,(_0x4148a7,_0x384169)=>{if(_0x4148a7){return _0x2e01ce(_0x4148a7);}bcrypt_nodejs_1['default'][a9_0x403b('0x8')](_0x1d74e2['password'],_0x384169,undefined,(_0x4148a7,_0x5d216a)=>{if(_0x4148a7){return _0x2e01ce(_0x4148a7);}_0x1d74e2['password']=_0x5d216a;_0x2e01ce();});});});const comparePassword=function(_0x13e3f1,_0x1d9f25){bcrypt_nodejs_1[a9_0x403b('0x4')][a9_0x403b('0x9')](_0x13e3f1,this['password'],(_0x535540,_0xb733c6)=>{_0x1d9f25(_0x535540,_0xb733c6);});};userSchema[a9_0x403b('0xa')][a9_0x403b('0xb')]=comparePassword;userSchema['methods'][a9_0x403b('0xc')]=function(_0x58d412){if(!_0x58d412){_0x58d412=0xc8;}if(!this[a9_0x403b('0xd')]){return a9_0x403b('0xe')+_0x58d412+a9_0x403b('0xf');}const _0x235d3a=crypto_1[a9_0x403b('0x4')]['createHash'](a9_0x403b('0x10'))[a9_0x403b('0x11')](this[a9_0x403b('0xd')])['digest']('hex');return a9_0x403b('0x12')+_0x235d3a+a9_0x403b('0x13')+_0x58d412+'&d=retro';};const User=mongoose_1[a9_0x403b('0x4')][a9_0x403b('0x14')](a9_0x403b('0x15'),userSchema);exports['default']=User;