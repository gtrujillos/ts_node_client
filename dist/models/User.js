var a9_0x2709=['update','email','digest','https://gravatar.com/avatar/','model','__importDefault','__esModule','defineProperty','bcrypt-nodejs','Schema','save','isModified','default','genSalt','hash','password','comparePassword','methods','gravatar','https://gravatar.com/avatar/?s=','&d=retro'];(function(_0x41f60b,_0x50bbc7){var _0x451095=function(_0x353aba){while(--_0x353aba){_0x41f60b['push'](_0x41f60b['shift']());}};_0x451095(++_0x50bbc7);}(a9_0x2709,0x16a));var a9_0x5dc0=function(_0x4eccfa,_0x2a1d1e){_0x4eccfa=_0x4eccfa-0x0;var _0x33e520=a9_0x2709[_0x4eccfa];return _0x33e520;};'use strict';var __importDefault=this&&this[a9_0x5dc0('0x0')]||function(_0x8ffec6){return _0x8ffec6&&_0x8ffec6[a9_0x5dc0('0x1')]?_0x8ffec6:{'default':_0x8ffec6};};Object[a9_0x5dc0('0x2')](exports,'__esModule',{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a9_0x5dc0('0x3')));const crypto_1=__importDefault(require('crypto'));const mongoose_1=__importDefault(require('mongoose'));const userSchema=new mongoose_1['default'][(a9_0x5dc0('0x4'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre'](a9_0x5dc0('0x5'),function save(_0x53bb9e){const _0x33b16e=this;if(!_0x33b16e[a9_0x5dc0('0x6')]('password')){return _0x53bb9e();}bcrypt_nodejs_1[a9_0x5dc0('0x7')][a9_0x5dc0('0x8')](0xa,(_0x186d69,_0x2bee70)=>{if(_0x186d69){return _0x53bb9e(_0x186d69);}bcrypt_nodejs_1['default'][a9_0x5dc0('0x9')](_0x33b16e[a9_0x5dc0('0xa')],_0x2bee70,undefined,(_0x186d69,_0x6fe9ad)=>{if(_0x186d69){return _0x53bb9e(_0x186d69);}_0x33b16e[a9_0x5dc0('0xa')]=_0x6fe9ad;_0x53bb9e();});});});const comparePassword=function(_0x4ec0d9,_0x4db607){bcrypt_nodejs_1[a9_0x5dc0('0x7')]['compare'](_0x4ec0d9,this[a9_0x5dc0('0xa')],(_0xd3d893,_0x432ed5)=>{_0x4db607(_0xd3d893,_0x432ed5);});};userSchema['methods'][a9_0x5dc0('0xb')]=comparePassword;userSchema[a9_0x5dc0('0xc')][a9_0x5dc0('0xd')]=function(_0x32b7d4){if(!_0x32b7d4){_0x32b7d4=0xc8;}if(!this['email']){return a9_0x5dc0('0xe')+_0x32b7d4+a9_0x5dc0('0xf');}const _0x14b786=crypto_1[a9_0x5dc0('0x7')]['createHash']('md5')[a9_0x5dc0('0x10')](this[a9_0x5dc0('0x11')])[a9_0x5dc0('0x12')]('hex');return a9_0x5dc0('0x13')+_0x14b786+'?s='+_0x32b7d4+a9_0x5dc0('0xf');};const User=mongoose_1['default'][a9_0x5dc0('0x14')]('User',userSchema);exports['default']=User;