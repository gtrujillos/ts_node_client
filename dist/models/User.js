var a10_0x4f80=['&d=retro','createHash','md5','hex','model','User','__importDefault','__esModule','defineProperty','bcrypt-nodejs','crypto','mongoose','default','Schema','save','isModified','password','hash','compare','comparePassword','methods','gravatar','email'];(function(_0x1a72ba,_0x2a0f3a){var _0x15ac51=function(_0x38ee72){while(--_0x38ee72){_0x1a72ba['push'](_0x1a72ba['shift']());}};_0x15ac51(++_0x2a0f3a);}(a10_0x4f80,0x79));var a10_0x19ce=function(_0x5b16e5,_0x49559f){_0x5b16e5=_0x5b16e5-0x0;var _0x30eafe=a10_0x4f80[_0x5b16e5];return _0x30eafe;};'use strict';var __importDefault=this&&this[a10_0x19ce('0x0')]||function(_0x51e4c9){return _0x51e4c9&&_0x51e4c9[a10_0x19ce('0x1')]?_0x51e4c9:{'default':_0x51e4c9};};Object[a10_0x19ce('0x2')](exports,a10_0x19ce('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a10_0x19ce('0x3')));const crypto_1=__importDefault(require(a10_0x19ce('0x4')));const mongoose_1=__importDefault(require(a10_0x19ce('0x5')));const userSchema=new mongoose_1[(a10_0x19ce('0x6'))][(a10_0x19ce('0x7'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre'](a10_0x19ce('0x8'),function save(_0x524370){const _0x5a6247=this;if(!_0x5a6247[a10_0x19ce('0x9')](a10_0x19ce('0xa'))){return _0x524370();}bcrypt_nodejs_1[a10_0x19ce('0x6')]['genSalt'](0xa,(_0x7b65c1,_0x5539ea)=>{if(_0x7b65c1){return _0x524370(_0x7b65c1);}bcrypt_nodejs_1[a10_0x19ce('0x6')][a10_0x19ce('0xb')](_0x5a6247[a10_0x19ce('0xa')],_0x5539ea,undefined,(_0x7b65c1,_0x46972f)=>{if(_0x7b65c1){return _0x524370(_0x7b65c1);}_0x5a6247[a10_0x19ce('0xa')]=_0x46972f;_0x524370();});});});const comparePassword=function(_0x5c0267,_0x1264a5){bcrypt_nodejs_1[a10_0x19ce('0x6')][a10_0x19ce('0xc')](_0x5c0267,this[a10_0x19ce('0xa')],(_0x20b519,_0x1ad622)=>{_0x1264a5(_0x20b519,_0x1ad622);});};userSchema['methods'][a10_0x19ce('0xd')]=comparePassword;userSchema[a10_0x19ce('0xe')][a10_0x19ce('0xf')]=function(_0x2a75c4){if(!_0x2a75c4){_0x2a75c4=0xc8;}if(!this[a10_0x19ce('0x10')]){return'https://gravatar.com/avatar/?s='+_0x2a75c4+a10_0x19ce('0x11');}const _0x11ed6f=crypto_1[a10_0x19ce('0x6')][a10_0x19ce('0x12')](a10_0x19ce('0x13'))['update'](this[a10_0x19ce('0x10')])['digest'](a10_0x19ce('0x14'));return'https://gravatar.com/avatar/'+_0x11ed6f+'?s='+_0x2a75c4+a10_0x19ce('0x11');};const User=mongoose_1[a10_0x19ce('0x6')][a10_0x19ce('0x15')](a10_0x19ce('0x16'),userSchema);exports[a10_0x19ce('0x6')]=User;