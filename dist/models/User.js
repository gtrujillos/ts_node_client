var a9_0x53b8=['__importDefault','__esModule','defineProperty','bcrypt-nodejs','crypto','mongoose','default','Schema','password','genSalt','compare','methods','gravatar','email','https://gravatar.com/avatar/?s=','md5','update','digest','hex','&d=retro','model','User'];(function(_0x3f04e,_0x57e7ce){var _0x5ef396=function(_0x4e2ab9){while(--_0x4e2ab9){_0x3f04e['push'](_0x3f04e['shift']());}};_0x5ef396(++_0x57e7ce);}(a9_0x53b8,0xc6));var a9_0x571c=function(_0x5a2d91,_0x35671d){_0x5a2d91=_0x5a2d91-0x0;var _0x57cd78=a9_0x53b8[_0x5a2d91];return _0x57cd78;};'use strict';var __importDefault=this&&this[a9_0x571c('0x0')]||function(_0x3b75d7){return _0x3b75d7&&_0x3b75d7[a9_0x571c('0x1')]?_0x3b75d7:{'default':_0x3b75d7};};Object[a9_0x571c('0x2')](exports,a9_0x571c('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a9_0x571c('0x3')));const crypto_1=__importDefault(require(a9_0x571c('0x4')));const mongoose_1=__importDefault(require(a9_0x571c('0x5')));const userSchema=new mongoose_1[(a9_0x571c('0x6'))][(a9_0x571c('0x7'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre']('save',function save(_0x2ee3ba){const _0x329cb0=this;if(!_0x329cb0['isModified'](a9_0x571c('0x8'))){return _0x2ee3ba();}bcrypt_nodejs_1[a9_0x571c('0x6')][a9_0x571c('0x9')](0xa,(_0x4f2d11,_0xae8bf2)=>{if(_0x4f2d11){return _0x2ee3ba(_0x4f2d11);}bcrypt_nodejs_1[a9_0x571c('0x6')]['hash'](_0x329cb0[a9_0x571c('0x8')],_0xae8bf2,undefined,(_0x4f2d11,_0x360136)=>{if(_0x4f2d11){return _0x2ee3ba(_0x4f2d11);}_0x329cb0[a9_0x571c('0x8')]=_0x360136;_0x2ee3ba();});});});const comparePassword=function(_0x1d65cb,_0x2541f2){bcrypt_nodejs_1[a9_0x571c('0x6')][a9_0x571c('0xa')](_0x1d65cb,this['password'],(_0x16add8,_0x1a3d4)=>{_0x2541f2(_0x16add8,_0x1a3d4);});};userSchema[a9_0x571c('0xb')]['comparePassword']=comparePassword;userSchema[a9_0x571c('0xb')][a9_0x571c('0xc')]=function(_0x4c2e21){if(!_0x4c2e21){_0x4c2e21=0xc8;}if(!this[a9_0x571c('0xd')]){return a9_0x571c('0xe')+_0x4c2e21+'&d=retro';}const _0x48f5cf=crypto_1['default']['createHash'](a9_0x571c('0xf'))[a9_0x571c('0x10')](this['email'])[a9_0x571c('0x11')](a9_0x571c('0x12'));return'https://gravatar.com/avatar/'+_0x48f5cf+'?s='+_0x4c2e21+a9_0x571c('0x13');};const User=mongoose_1[a9_0x571c('0x6')][a9_0x571c('0x14')](a9_0x571c('0x15'),userSchema);exports[a9_0x571c('0x6')]=User;