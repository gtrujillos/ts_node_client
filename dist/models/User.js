var a10_0x1cd8=['hex','https://gravatar.com/avatar/','?s=','&d=retro','model','User','__importDefault','__esModule','defineProperty','crypto','Schema','pre','save','isModified','password','default','genSalt','hash','compare','methods','gravatar','md5','update','email'];(function(_0x1c9807,_0x9070d4){var _0x794de1=function(_0x2859e5){while(--_0x2859e5){_0x1c9807['push'](_0x1c9807['shift']());}};_0x794de1(++_0x9070d4);}(a10_0x1cd8,0x7e));var a10_0x8880=function(_0x187cb3,_0x4840fe){_0x187cb3=_0x187cb3-0x0;var _0x1b340f=a10_0x1cd8[_0x187cb3];return _0x1b340f;};'use strict';var __importDefault=this&&this[a10_0x8880('0x0')]||function(_0x139f63){return _0x139f63&&_0x139f63[a10_0x8880('0x1')]?_0x139f63:{'default':_0x139f63};};Object[a10_0x8880('0x2')](exports,'__esModule',{'value':!![]});const bcrypt_nodejs_1=__importDefault(require('bcrypt-nodejs'));const crypto_1=__importDefault(require(a10_0x8880('0x3')));const mongoose_1=__importDefault(require('mongoose'));const userSchema=new mongoose_1['default'][(a10_0x8880('0x4'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a10_0x8880('0x5')](a10_0x8880('0x6'),function save(_0x369774){const _0x4c424e=this;if(!_0x4c424e[a10_0x8880('0x7')](a10_0x8880('0x8'))){return _0x369774();}bcrypt_nodejs_1[a10_0x8880('0x9')][a10_0x8880('0xa')](0xa,(_0x4eaa0d,_0x243bbb)=>{if(_0x4eaa0d){return _0x369774(_0x4eaa0d);}bcrypt_nodejs_1[a10_0x8880('0x9')][a10_0x8880('0xb')](_0x4c424e[a10_0x8880('0x8')],_0x243bbb,undefined,(_0x4eaa0d,_0x226ebb)=>{if(_0x4eaa0d){return _0x369774(_0x4eaa0d);}_0x4c424e[a10_0x8880('0x8')]=_0x226ebb;_0x369774();});});});const comparePassword=function(_0x51d500,_0x3e7bbb){bcrypt_nodejs_1[a10_0x8880('0x9')][a10_0x8880('0xc')](_0x51d500,this[a10_0x8880('0x8')],(_0x5c29d6,_0x4e8245)=>{_0x3e7bbb(_0x5c29d6,_0x4e8245);});};userSchema[a10_0x8880('0xd')]['comparePassword']=comparePassword;userSchema['methods'][a10_0x8880('0xe')]=function(_0x5a8feb){if(!_0x5a8feb){_0x5a8feb=0xc8;}if(!this['email']){return'https://gravatar.com/avatar/?s='+_0x5a8feb+'&d=retro';}const _0x7bdb8f=crypto_1[a10_0x8880('0x9')]['createHash'](a10_0x8880('0xf'))[a10_0x8880('0x10')](this[a10_0x8880('0x11')])['digest'](a10_0x8880('0x12'));return a10_0x8880('0x13')+_0x7bdb8f+a10_0x8880('0x14')+_0x5a8feb+a10_0x8880('0x15');};const User=mongoose_1[a10_0x8880('0x9')][a10_0x8880('0x16')](a10_0x8880('0x17'),userSchema);exports[a10_0x8880('0x9')]=User;