var a9_0x217c=['https://gravatar.com/avatar/?s=','&d=retro','md5','update','digest','hex','?s=','model','User','__importDefault','__esModule','bcrypt-nodejs','crypto','mongoose','pre','save','isModified','hash','password','default','compare','methods','gravatar','email'];(function(_0x1dedc3,_0x14140e){var _0x4c9cdc=function(_0x26eb27){while(--_0x26eb27){_0x1dedc3['push'](_0x1dedc3['shift']());}};_0x4c9cdc(++_0x14140e);}(a9_0x217c,0x81));var a9_0x2778=function(_0x4d697b,_0x412f5d){_0x4d697b=_0x4d697b-0x0;var _0x13a220=a9_0x217c[_0x4d697b];return _0x13a220;};'use strict';var __importDefault=this&&this[a9_0x2778('0x0')]||function(_0x42d331){return _0x42d331&&_0x42d331[a9_0x2778('0x1')]?_0x42d331:{'default':_0x42d331};};Object['defineProperty'](exports,a9_0x2778('0x1'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require(a9_0x2778('0x2')));const crypto_1=__importDefault(require(a9_0x2778('0x3')));const mongoose_1=__importDefault(require(a9_0x2778('0x4')));const userSchema=new mongoose_1['default']['Schema']({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema[a9_0x2778('0x5')](a9_0x2778('0x6'),function save(_0x36f1f8){const _0x162803=this;if(!_0x162803[a9_0x2778('0x7')]('password')){return _0x36f1f8();}bcrypt_nodejs_1['default']['genSalt'](0xa,(_0x2d49b0,_0x17fa6f)=>{if(_0x2d49b0){return _0x36f1f8(_0x2d49b0);}bcrypt_nodejs_1['default'][a9_0x2778('0x8')](_0x162803[a9_0x2778('0x9')],_0x17fa6f,undefined,(_0x2d49b0,_0x3d60ae)=>{if(_0x2d49b0){return _0x36f1f8(_0x2d49b0);}_0x162803['password']=_0x3d60ae;_0x36f1f8();});});});const comparePassword=function(_0x47de88,_0x43172e){bcrypt_nodejs_1[a9_0x2778('0xa')][a9_0x2778('0xb')](_0x47de88,this[a9_0x2778('0x9')],(_0x1ee000,_0x18ce5c)=>{_0x43172e(_0x1ee000,_0x18ce5c);});};userSchema[a9_0x2778('0xc')]['comparePassword']=comparePassword;userSchema[a9_0x2778('0xc')][a9_0x2778('0xd')]=function(_0x32962a){if(!_0x32962a){_0x32962a=0xc8;}if(!this[a9_0x2778('0xe')]){return a9_0x2778('0xf')+_0x32962a+a9_0x2778('0x10');}const _0x36a28b=crypto_1[a9_0x2778('0xa')]['createHash'](a9_0x2778('0x11'))[a9_0x2778('0x12')](this['email'])[a9_0x2778('0x13')](a9_0x2778('0x14'));return'https://gravatar.com/avatar/'+_0x36a28b+a9_0x2778('0x15')+_0x32962a+a9_0x2778('0x10');};const User=mongoose_1['default'][a9_0x2778('0x16')](a9_0x2778('0x17'),userSchema);exports[a9_0x2778('0xa')]=User;