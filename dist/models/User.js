var a9_0x4da5=['&d=retro','md5','update','hex','https://gravatar.com/avatar/','model','__esModule','defineProperty','mongoose','default','Schema','save','isModified','password','genSalt','hash','compare','methods','comparePassword'];(function(_0x22c8da,_0x232d7e){var _0x149e5f=function(_0x336403){while(--_0x336403){_0x22c8da['push'](_0x22c8da['shift']());}};_0x149e5f(++_0x232d7e);}(a9_0x4da5,0xb1));var a9_0x3db4=function(_0x587bdf,_0x18f6a4){_0x587bdf=_0x587bdf-0x0;var _0x35d7e9=a9_0x4da5[_0x587bdf];return _0x35d7e9;};'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3a7f16){return _0x3a7f16&&_0x3a7f16[a9_0x3db4('0x0')]?_0x3a7f16:{'default':_0x3a7f16};};Object[a9_0x3db4('0x1')](exports,a9_0x3db4('0x0'),{'value':!![]});const bcrypt_nodejs_1=__importDefault(require('bcrypt-nodejs'));const crypto_1=__importDefault(require('crypto'));const mongoose_1=__importDefault(require(a9_0x3db4('0x2')));const userSchema=new mongoose_1[(a9_0x3db4('0x3'))][(a9_0x3db4('0x4'))]({'email':{'type':String,'unique':!![]},'password':String,'passwordResetToken':String,'passwordResetExpires':Date,'facebook':String,'twitter':String,'google':String,'tokens':Array,'profile':{'name':String,'gender':String,'location':String,'website':String,'picture':String}},{'timestamps':!![]});userSchema['pre'](a9_0x3db4('0x5'),function save(_0x27009c){const _0x3489b7=this;if(!_0x3489b7[a9_0x3db4('0x6')](a9_0x3db4('0x7'))){return _0x27009c();}bcrypt_nodejs_1[a9_0x3db4('0x3')][a9_0x3db4('0x8')](0xa,(_0x560706,_0xf2c13f)=>{if(_0x560706){return _0x27009c(_0x560706);}bcrypt_nodejs_1[a9_0x3db4('0x3')][a9_0x3db4('0x9')](_0x3489b7[a9_0x3db4('0x7')],_0xf2c13f,undefined,(_0x560706,_0x220dcd)=>{if(_0x560706){return _0x27009c(_0x560706);}_0x3489b7[a9_0x3db4('0x7')]=_0x220dcd;_0x27009c();});});});const comparePassword=function(_0xb41b1b,_0x10ce43){bcrypt_nodejs_1[a9_0x3db4('0x3')][a9_0x3db4('0xa')](_0xb41b1b,this[a9_0x3db4('0x7')],(_0x2bfef7,_0x45ddd2)=>{_0x10ce43(_0x2bfef7,_0x45ddd2);});};userSchema[a9_0x3db4('0xb')][a9_0x3db4('0xc')]=comparePassword;userSchema[a9_0x3db4('0xb')]['gravatar']=function(_0x27d104){if(!_0x27d104){_0x27d104=0xc8;}if(!this['email']){return'https://gravatar.com/avatar/?s='+_0x27d104+a9_0x3db4('0xd');}const _0x41614e=crypto_1[a9_0x3db4('0x3')]['createHash'](a9_0x3db4('0xe'))[a9_0x3db4('0xf')](this['email'])['digest'](a9_0x3db4('0x10'));return a9_0x3db4('0x11')+_0x41614e+'?s='+_0x27d104+a9_0x3db4('0xd');};const User=mongoose_1[a9_0x3db4('0x3')][a9_0x3db4('0x12')]('User',userSchema);exports[a9_0x3db4('0x3')]=User;