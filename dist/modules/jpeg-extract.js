var a11_0x3989=['concat','from','error','abort','statusCode','data','length','indexOf','slice','push'];(function(_0x903cb0,_0x51ae10){var _0x58ff7e=function(_0x4852b7){while(--_0x4852b7){_0x903cb0['push'](_0x903cb0['shift']());}};_0x58ff7e(++_0x51ae10);}(a11_0x3989,0x173));var a11_0x5240=function(_0x122330,_0x18b501){_0x122330=_0x122330-0x0;var _0x280e09=a11_0x3989[_0x122330];return _0x280e09;};const request=require('request');module['exports']=(_0x109c2d,_0x2f5ebc)=>{return new Promise((_0x4f650f,_0x1ea7a2)=>{const _0x3057e1=Buffer[a11_0x5240('0x0')]([0xff,0xd8]);const _0x50bf89=Buffer['from']([0xff,0xd9]);const _0x1a2343=[];const _0x11a5e5=request(_0x109c2d);_0x11a5e5['on'](a11_0x5240('0x1'),_0x525282=>{_0x11a5e5[a11_0x5240('0x2')]();if(_0x2f5ebc)_0x2f5ebc(_0x525282);else _0x1ea7a2(_0x525282);});_0x11a5e5['on']('response',_0x491e3f=>{if(_0x491e3f[a11_0x5240('0x3')]!==0xc8){_0x11a5e5[a11_0x5240('0x2')]();if(_0x2f5ebc)_0x2f5ebc(_0x491e3f);else _0x1ea7a2(new Error(_0x491e3f));}_0x491e3f['on'](a11_0x5240('0x4'),_0x25a73c=>{if(_0x1a2343[a11_0x5240('0x5')]===0x0){const _0x1aa994=_0x25a73c[a11_0x5240('0x6')](_0x3057e1);const _0x16a72e=_0x25a73c[a11_0x5240('0x7')](_0x1aa994,_0x25a73c[a11_0x5240('0x5')]);_0x1a2343['push'](_0x16a72e);}else if(_0x25a73c[a11_0x5240('0x6')](_0x50bf89)!=-0x1){const _0x1e030c=_0x25a73c[a11_0x5240('0x6')](_0x3057e1);const _0x3ce047=_0x25a73c[a11_0x5240('0x6')](_0x50bf89)+0x2;let _0x16a72e;if(_0x1e030c>-0x1){_0x16a72e=_0x25a73c[a11_0x5240('0x7')](_0x1e030c,_0x3ce047);}else{_0x16a72e=_0x25a73c['slice'](0x0,_0x3ce047);}_0x1a2343[a11_0x5240('0x8')](_0x16a72e);const _0x5073c7=Buffer[a11_0x5240('0x9')](_0x1a2343);_0x11a5e5[a11_0x5240('0x2')]();if(_0x2f5ebc)_0x2f5ebc(undefined,_0x5073c7);_0x4f650f(_0x5073c7);}else{_0x1a2343[a11_0x5240('0x8')](_0x25a73c);}});});});};